var N6=Object.defineProperty;var D6=(n,e,t)=>e in n?N6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ea=(n,e,t)=>(D6(n,typeof e!="symbol"?e+"":e,t),t);function Rle(){import.meta.url,import("_").catch(()=>1);async function*n(){}}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function VN(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var HN={exports:{}},ky={},WN={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Of=Symbol.for("react.element"),P6=Symbol.for("react.portal"),I6=Symbol.for("react.fragment"),R6=Symbol.for("react.strict_mode"),O6=Symbol.for("react.profiler"),M6=Symbol.for("react.provider"),L6=Symbol.for("react.context"),$6=Symbol.for("react.forward_ref"),B6=Symbol.for("react.suspense"),F6=Symbol.for("react.memo"),q6=Symbol.for("react.lazy"),e_=Symbol.iterator;function U6(n){return n===null||typeof n!="object"?null:(n=e_&&n[e_]||n["@@iterator"],typeof n=="function"?n:null)}var GN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QN=Object.assign,KN={};function od(n,e,t){this.props=n,this.context=e,this.refs=KN,this.updater=t||GN}od.prototype.isReactComponent={};od.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};od.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function YN(){}YN.prototype=od.prototype;function CE(n,e,t){this.props=n,this.context=e,this.refs=KN,this.updater=t||GN}var AE=CE.prototype=new YN;AE.constructor=CE;QN(AE,od.prototype);AE.isPureReactComponent=!0;var t_=Array.isArray,XN=Object.prototype.hasOwnProperty,kE={current:null},JN={key:!0,ref:!0,__self:!0,__source:!0};function ZN(n,e,t){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)XN.call(e,i)&&!JN.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Of,type:n,key:s,ref:a,props:r,_owner:kE.current}}function j6(n,e){return{$$typeof:Of,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function NE(n){return typeof n=="object"&&n!==null&&n.$$typeof===Of}function z6(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var n_=/\/+/g;function Ib(n,e){return typeof n=="object"&&n!==null&&n.key!=null?z6(""+n.key):e.toString(36)}function Sm(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Of:case P6:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+Ib(a,0):i,t_(r)?(t="",n!=null&&(t=n.replace(n_,"$&/")+"/"),Sm(r,e,t,"",function(c){return c})):r!=null&&(NE(r)&&(r=j6(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(n_,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",t_(n))for(var o=0;o<n.length;o++){s=n[o];var l=i+Ib(s,o);a+=Sm(s,e,t,l,r)}else if(l=U6(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=i+Ib(s,o++),a+=Sm(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Np(n,e,t){if(n==null)return n;var i=[],r=0;return Sm(n,i,"","",function(s){return e.call(t,s,r++)}),i}function V6(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Li={current:null},_m={transition:null},H6={ReactCurrentDispatcher:Li,ReactCurrentBatchConfig:_m,ReactCurrentOwner:kE};yt.Children={map:Np,forEach:function(n,e,t){Np(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Np(n,function(){e++}),e},toArray:function(n){return Np(n,function(e){return e})||[]},only:function(n){if(!NE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};yt.Component=od;yt.Fragment=I6;yt.Profiler=O6;yt.PureComponent=CE;yt.StrictMode=R6;yt.Suspense=B6;yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H6;yt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=QN({},n.props),r=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=kE.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)XN.call(e,l)&&!JN.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];i.children=o}return{$$typeof:Of,type:n.type,key:r,ref:s,props:i,_owner:a}};yt.createContext=function(n){return n={$$typeof:L6,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:M6,_context:n},n.Consumer=n};yt.createElement=ZN;yt.createFactory=function(n){var e=ZN.bind(null,n);return e.type=n,e};yt.createRef=function(){return{current:null}};yt.forwardRef=function(n){return{$$typeof:$6,render:n}};yt.isValidElement=NE;yt.lazy=function(n){return{$$typeof:q6,_payload:{_status:-1,_result:n},_init:V6}};yt.memo=function(n,e){return{$$typeof:F6,type:n,compare:e===void 0?null:e}};yt.startTransition=function(n){var e=_m.transition;_m.transition={};try{n()}finally{_m.transition=e}};yt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};yt.useCallback=function(n,e){return Li.current.useCallback(n,e)};yt.useContext=function(n){return Li.current.useContext(n)};yt.useDebugValue=function(){};yt.useDeferredValue=function(n){return Li.current.useDeferredValue(n)};yt.useEffect=function(n,e){return Li.current.useEffect(n,e)};yt.useId=function(){return Li.current.useId()};yt.useImperativeHandle=function(n,e,t){return Li.current.useImperativeHandle(n,e,t)};yt.useInsertionEffect=function(n,e){return Li.current.useInsertionEffect(n,e)};yt.useLayoutEffect=function(n,e){return Li.current.useLayoutEffect(n,e)};yt.useMemo=function(n,e){return Li.current.useMemo(n,e)};yt.useReducer=function(n,e,t){return Li.current.useReducer(n,e,t)};yt.useRef=function(n){return Li.current.useRef(n)};yt.useState=function(n){return Li.current.useState(n)};yt.useSyncExternalStore=function(n,e,t){return Li.current.useSyncExternalStore(n,e,t)};yt.useTransition=function(){return Li.current.useTransition()};yt.version="18.2.0";WN.exports=yt;var ze=WN.exports;const fe=bi(ze);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W6=ze,G6=Symbol.for("react.element"),Q6=Symbol.for("react.fragment"),K6=Object.prototype.hasOwnProperty,Y6=W6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X6={key:!0,ref:!0,__self:!0,__source:!0};function eD(n,e,t){var i,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)K6.call(e,i)&&!X6.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:G6,type:n,key:s,ref:a,props:r,_owner:Y6.current}}ky.Fragment=Q6;ky.jsx=eD;ky.jsxs=eD;HN.exports=ky;var ne=HN.exports;/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var i_;(function(n){(function(e){var t=typeof Iu=="object"?Iu:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),i=r(n);typeof t.Reflect>"u"?t.Reflect=n:i=r(t.Reflect,i),e(i);function r(s,a){return function(o,l){typeof s[o]!="function"&&Object.defineProperty(s,o,{configurable:!0,writable:!0,value:l}),a&&a(o,l)}}})(function(e){var t=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",r=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",o={__proto__:[]}instanceof Array,l=!a&&!o,c={create:a?function(){return xi(Object.create(null))}:o?function(){return xi({__proto__:null})}:function(){return xi({})},has:l?function(ae,we){return t.call(ae,we)}:function(ae,we){return we in ae},get:l?function(ae,we){return t.call(ae,we)?ae[we]:void 0}:function(ae,we){return ae[we]}},u=Object.getPrototypeOf(Function),d=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",h=!d&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:lt(),f=!d&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:_n(),m=!d&&typeof WeakMap=="function"?WeakMap:Zt(),g=new m;function _(ae,we,ke,R){if(le(ke)){if(!Yn(ae))throw new TypeError;if(!hn(we))throw new TypeError;return Z(ae,we)}else{if(!Yn(ae))throw new TypeError;if(!qe(we))throw new TypeError;if(!qe(R)&&!le(R)&&!Te(R))throw new TypeError;return Te(R)&&(R=void 0),ke=Jt(ke),O(ae,we,ke,R)}}e("decorate",_);function v(ae,we){function ke(R,S){if(!qe(R))throw new TypeError;if(!le(S)&&!wi(S))throw new TypeError;be(ae,we,R,S)}return ke}e("metadata",v);function y(ae,we,ke,R){if(!qe(ke))throw new TypeError;return le(R)||(R=Jt(R)),be(ae,we,ke,R)}e("defineMetadata",y);function T(ae,we,ke){if(!qe(we))throw new TypeError;return le(ke)||(ke=Jt(ke)),z(ae,we,ke)}e("hasMetadata",T);function N(ae,we,ke){if(!qe(we))throw new TypeError;return le(ke)||(ke=Jt(ke)),te(ae,we,ke)}e("hasOwnMetadata",N);function P(ae,we,ke){if(!qe(we))throw new TypeError;return le(ke)||(ke=Jt(ke)),ue(ae,we,ke)}e("getMetadata",P);function F(ae,we,ke){if(!qe(we))throw new TypeError;return le(ke)||(ke=Jt(ke)),ye(ae,we,ke)}e("getOwnMetadata",F);function $(ae,we){if(!qe(ae))throw new TypeError;return le(we)||(we=Jt(we)),de(ae,we)}e("getMetadataKeys",$);function B(ae,we){if(!qe(ae))throw new TypeError;return le(we)||(we=Jt(we)),he(ae,we)}e("getOwnMetadataKeys",B);function M(ae,we,ke){if(!qe(we))throw new TypeError;le(ke)||(ke=Jt(ke));var R=K(we,ke,!1);if(le(R)||!R.delete(ae))return!1;if(R.size>0)return!0;var S=g.get(we);return S.delete(ke),S.size>0||g.delete(we),!0}e("deleteMetadata",M);function Z(ae,we){for(var ke=ae.length-1;ke>=0;--ke){var R=ae[ke],S=R(we);if(!le(S)&&!Te(S)){if(!hn(S))throw new TypeError;we=S}}return we}function O(ae,we,ke,R){for(var S=ae.length-1;S>=0;--S){var k=ae[S],L=k(we,ke,R);if(!le(L)&&!Te(L)){if(!qe(L))throw new TypeError;R=L}}return R}function K(ae,we,ke){var R=g.get(ae);if(le(R)){if(!ke)return;R=new h,g.set(ae,R)}var S=R.get(we);if(le(S)){if(!ke)return;S=new h,R.set(we,S)}return S}function z(ae,we,ke){var R=te(ae,we,ke);if(R)return!0;var S=xt(we);return Te(S)?!1:z(ae,S,ke)}function te(ae,we,ke){var R=K(we,ke,!1);return le(R)?!1:it(R.has(ae))}function ue(ae,we,ke){var R=te(ae,we,ke);if(R)return ye(ae,we,ke);var S=xt(we);if(!Te(S))return ue(ae,S,ke)}function ye(ae,we,ke){var R=K(we,ke,!1);if(!le(R))return R.get(ae)}function be(ae,we,ke,R){var S=K(ke,R,!0);S.set(ae,we)}function de(ae,we){var ke=he(ae,we),R=xt(ae);if(R===null)return ke;var S=de(R,we);if(S.length<=0)return ke;if(ke.length<=0)return S;for(var k=new f,L=[],W=0,Y=ke;W<Y.length;W++){var ce=Y[W],Ie=k.has(ce);Ie||(k.add(ce),L.push(ce))}for(var Re=0,bt=S;Re<bt.length;Re++){var ce=bt[Re],Ie=k.has(ce);Ie||(k.add(ce),L.push(ce))}return L}function he(ae,we){var ke=[],R=K(ae,we,!1);if(le(R))return ke;for(var S=R.keys(),k=Jr(S),L=0;;){var W=Zr(k);if(!W)return ke.length=L,ke;var Y=Ps(W);try{ke[L]=Y}catch(ce){try{We(k)}finally{throw ce}}L++}}function ee(ae){if(ae===null)return 1;switch(typeof ae){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ae===null?1:6;default:return 6}}function le(ae){return ae===void 0}function Te(ae){return ae===null}function $e(ae){return typeof ae=="symbol"}function qe(ae){return typeof ae=="object"?ae!==null:typeof ae=="function"}function Ve(ae,we){switch(ee(ae)){case 0:return ae;case 1:return ae;case 2:return ae;case 3:return ae;case 4:return ae;case 5:return ae}var ke=we===3?"string":we===5?"number":"default",R=Ut(ae,r);if(R!==void 0){var S=R.call(ae,ke);if(qe(S))throw new TypeError;return S}return Je(ae,ke==="default"?"number":ke)}function Je(ae,we){if(we==="string"){var ke=ae.toString;if(Bn(ke)){var R=ke.call(ae);if(!qe(R))return R}var S=ae.valueOf;if(Bn(S)){var R=S.call(ae);if(!qe(R))return R}}else{var S=ae.valueOf;if(Bn(S)){var R=S.call(ae);if(!qe(R))return R}var k=ae.toString;if(Bn(k)){var R=k.call(ae);if(!qe(R))return R}}throw new TypeError}function it(ae){return!!ae}function qt(ae){return""+ae}function Jt(ae){var we=Ve(ae,3);return $e(we)?we:qt(we)}function Yn(ae){return Array.isArray?Array.isArray(ae):ae instanceof Object?ae instanceof Array:Object.prototype.toString.call(ae)==="[object Array]"}function Bn(ae){return typeof ae=="function"}function hn(ae){return typeof ae=="function"}function wi(ae){switch(ee(ae)){case 3:return!0;case 4:return!0;default:return!1}}function Ut(ae,we){var ke=ae[we];if(ke!=null){if(!Bn(ke))throw new TypeError;return ke}}function Jr(ae){var we=Ut(ae,s);if(!Bn(we))throw new TypeError;var ke=we.call(ae);if(!qe(ke))throw new TypeError;return ke}function Ps(ae){return ae.value}function Zr(ae){var we=ae.next();return we.done?!1:we}function We(ae){var we=ae.return;we&&we.call(ae)}function xt(ae){var we=Object.getPrototypeOf(ae);if(typeof ae!="function"||ae===u||we!==u)return we;var ke=ae.prototype,R=ke&&Object.getPrototypeOf(ke);if(R==null||R===Object.prototype)return we;var S=R.constructor;return typeof S!="function"||S===ae?we:S}function lt(){var ae={},we=[],ke=function(){function L(W,Y,ce){this._index=0,this._keys=W,this._values=Y,this._selector=ce}return L.prototype["@@iterator"]=function(){return this},L.prototype[s]=function(){return this},L.prototype.next=function(){var W=this._index;if(W>=0&&W<this._keys.length){var Y=this._selector(this._keys[W],this._values[W]);return W+1>=this._keys.length?(this._index=-1,this._keys=we,this._values=we):this._index++,{value:Y,done:!1}}return{value:void 0,done:!0}},L.prototype.throw=function(W){throw this._index>=0&&(this._index=-1,this._keys=we,this._values=we),W},L.prototype.return=function(W){return this._index>=0&&(this._index=-1,this._keys=we,this._values=we),{value:W,done:!0}},L}();return function(){function L(){this._keys=[],this._values=[],this._cacheKey=ae,this._cacheIndex=-2}return Object.defineProperty(L.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),L.prototype.has=function(W){return this._find(W,!1)>=0},L.prototype.get=function(W){var Y=this._find(W,!1);return Y>=0?this._values[Y]:void 0},L.prototype.set=function(W,Y){var ce=this._find(W,!0);return this._values[ce]=Y,this},L.prototype.delete=function(W){var Y=this._find(W,!1);if(Y>=0){for(var ce=this._keys.length,Ie=Y+1;Ie<ce;Ie++)this._keys[Ie-1]=this._keys[Ie],this._values[Ie-1]=this._values[Ie];return this._keys.length--,this._values.length--,W===this._cacheKey&&(this._cacheKey=ae,this._cacheIndex=-2),!0}return!1},L.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ae,this._cacheIndex=-2},L.prototype.keys=function(){return new ke(this._keys,this._values,R)},L.prototype.values=function(){return new ke(this._keys,this._values,S)},L.prototype.entries=function(){return new ke(this._keys,this._values,k)},L.prototype["@@iterator"]=function(){return this.entries()},L.prototype[s]=function(){return this.entries()},L.prototype._find=function(W,Y){return this._cacheKey!==W&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=W)),this._cacheIndex<0&&Y&&(this._cacheIndex=this._keys.length,this._keys.push(W),this._values.push(void 0)),this._cacheIndex},L}();function R(L,W){return L}function S(L,W){return W}function k(L,W){return[L,W]}}function _n(){return function(){function ae(){this._map=new h}return Object.defineProperty(ae.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ae.prototype.has=function(we){return this._map.has(we)},ae.prototype.add=function(we){return this._map.set(we,we),this},ae.prototype.delete=function(we){return this._map.delete(we)},ae.prototype.clear=function(){this._map.clear()},ae.prototype.keys=function(){return this._map.keys()},ae.prototype.values=function(){return this._map.values()},ae.prototype.entries=function(){return this._map.entries()},ae.prototype["@@iterator"]=function(){return this.keys()},ae.prototype[s]=function(){return this.keys()},ae}()}function Zt(){var ae=16,we=c.create(),ke=R();return function(){function Y(){this._key=R()}return Y.prototype.has=function(ce){var Ie=S(ce,!1);return Ie!==void 0?c.has(Ie,this._key):!1},Y.prototype.get=function(ce){var Ie=S(ce,!1);return Ie!==void 0?c.get(Ie,this._key):void 0},Y.prototype.set=function(ce,Ie){var Re=S(ce,!0);return Re[this._key]=Ie,this},Y.prototype.delete=function(ce){var Ie=S(ce,!1);return Ie!==void 0?delete Ie[this._key]:!1},Y.prototype.clear=function(){this._key=R()},Y}();function R(){var Y;do Y="@@WeakMap@@"+W();while(c.has(we,Y));return we[Y]=!0,Y}function S(Y,ce){if(!t.call(Y,ke)){if(!ce)return;Object.defineProperty(Y,ke,{value:c.create()})}return Y[ke]}function k(Y,ce){for(var Ie=0;Ie<ce;++Ie)Y[Ie]=Math.random()*255|0;return Y}function L(Y){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Y)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Y)):k(new Uint8Array(Y),Y):k(new Array(Y),Y)}function W(){var Y=L(ae);Y[6]=Y[6]&79|64,Y[8]=Y[8]&191|128;for(var ce="",Ie=0;Ie<ae;++Ie){var Re=Y[Ie];(Ie===4||Ie===6||Ie===8)&&(ce+="-"),Re<16&&(ce+="0"),ce+=Re.toString(16).toLowerCase()}return ce}}function xi(ae){return ae.__=void 0,delete ae.__,ae}})})(i_||(i_={}));var tD={exports:{}},wr={},nD={exports:{}},iD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(de,he){var ee=de.length;de.push(he);e:for(;0<ee;){var le=ee-1>>>1,Te=de[le];if(0<r(Te,he))de[le]=he,de[ee]=Te,ee=le;else break e}}function t(de){return de.length===0?null:de[0]}function i(de){if(de.length===0)return null;var he=de[0],ee=de.pop();if(ee!==he){de[0]=ee;e:for(var le=0,Te=de.length,$e=Te>>>1;le<$e;){var qe=2*(le+1)-1,Ve=de[qe],Je=qe+1,it=de[Je];if(0>r(Ve,ee))Je<Te&&0>r(it,Ve)?(de[le]=it,de[Je]=ee,le=Je):(de[le]=Ve,de[qe]=ee,le=qe);else if(Je<Te&&0>r(it,ee))de[le]=it,de[Je]=ee,le=Je;else break e}}return he}function r(de,he){var ee=de.sortIndex-he.sortIndex;return ee!==0?ee:de.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(de){for(var he=t(c);he!==null;){if(he.callback===null)i(c);else if(he.startTime<=de)i(c),he.sortIndex=he.expirationTime,e(l,he);else break;he=t(c)}}function N(de){if(g=!1,T(de),!m)if(t(l)!==null)m=!0,ye(P);else{var he=t(c);he!==null&&be(N,he.startTime-de)}}function P(de,he){m=!1,g&&(g=!1,v(B),B=-1),f=!0;var ee=h;try{for(T(he),d=t(l);d!==null&&(!(d.expirationTime>he)||de&&!O());){var le=d.callback;if(typeof le=="function"){d.callback=null,h=d.priorityLevel;var Te=le(d.expirationTime<=he);he=n.unstable_now(),typeof Te=="function"?d.callback=Te:d===t(l)&&i(l),T(he)}else i(l);d=t(l)}if(d!==null)var $e=!0;else{var qe=t(c);qe!==null&&be(N,qe.startTime-he),$e=!1}return $e}finally{d=null,h=ee,f=!1}}var F=!1,$=null,B=-1,M=5,Z=-1;function O(){return!(n.unstable_now()-Z<M)}function K(){if($!==null){var de=n.unstable_now();Z=de;var he=!0;try{he=$(!0,de)}finally{he?z():(F=!1,$=null)}}else F=!1}var z;if(typeof y=="function")z=function(){y(K)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ue=te.port2;te.port1.onmessage=K,z=function(){ue.postMessage(null)}}else z=function(){_(K,0)};function ye(de){$=de,F||(F=!0,z())}function be(de,he){B=_(function(){de(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(de){de.callback=null},n.unstable_continueExecution=function(){m||f||(m=!0,ye(P))},n.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<de?Math.floor(1e3/de):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(de){switch(h){case 1:case 2:case 3:var he=3;break;default:he=h}var ee=h;h=he;try{return de()}finally{h=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(de,he){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var ee=h;h=de;try{return he()}finally{h=ee}},n.unstable_scheduleCallback=function(de,he,ee){var le=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?le+ee:le):ee=le,de){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ee+Te,de={id:u++,callback:he,priorityLevel:de,startTime:ee,expirationTime:Te,sortIndex:-1},ee>le?(de.sortIndex=ee,e(c,de),t(l)===null&&de===t(c)&&(g?(v(B),B=-1):g=!0,be(N,ee-le))):(de.sortIndex=Te,e(l,de),m||f||(m=!0,ye(P))),de},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(de){var he=h;return function(){var ee=h;h=he;try{return de.apply(this,arguments)}finally{h=ee}}}})(iD);nD.exports=iD;var J6=nD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD=ze,br=J6;function Ne(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sD=new Set,Yh={};function ic(n,e){Ru(n,e),Ru(n+"Capture",e)}function Ru(n,e){for(Yh[n]=e,n=0;n<e.length;n++)sD.add(e[n])}var za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vw=Object.prototype.hasOwnProperty,Z6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r_={},s_={};function eB(n){return vw.call(s_,n)?!0:vw.call(r_,n)?!1:Z6.test(n)?s_[n]=!0:(r_[n]=!0,!1)}function tB(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function nB(n,e,t,i){if(e===null||typeof e>"u"||tB(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $i(n,e,t,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ni[n]=new $i(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ni[e]=new $i(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ni[n]=new $i(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ni[n]=new $i(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ni[n]=new $i(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ni[n]=new $i(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ni[n]=new $i(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ni[n]=new $i(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ni[n]=new $i(n,5,!1,n.toLowerCase(),null,!1,!1)});var DE=/[\-:]([a-z])/g;function PE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(DE,PE);ni[e]=new $i(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(DE,PE);ni[e]=new $i(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(DE,PE);ni[e]=new $i(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ni[n]=new $i(n,1,!1,n.toLowerCase(),null,!1,!1)});ni.xlinkHref=new $i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ni[n]=new $i(n,1,!1,n.toLowerCase(),null,!0,!0)});function IE(n,e,t,i){var r=ni.hasOwnProperty(e)?ni[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nB(e,t,r,i)&&(t=null),i||r===null?eB(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Za=rD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dp=Symbol.for("react.element"),Xc=Symbol.for("react.portal"),Jc=Symbol.for("react.fragment"),RE=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),aD=Symbol.for("react.provider"),oD=Symbol.for("react.context"),OE=Symbol.for("react.forward_ref"),xw=Symbol.for("react.suspense"),Ew=Symbol.for("react.suspense_list"),ME=Symbol.for("react.memo"),go=Symbol.for("react.lazy"),lD=Symbol.for("react.offscreen"),a_=Symbol.iterator;function jd(n){return n===null||typeof n!="object"?null:(n=a_&&n[a_]||n["@@iterator"],typeof n=="function"?n:null)}var dn=Object.assign,Rb;function fh(n){if(Rb===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Rb=e&&e[1]||""}return"\n"+Rb+n}var Ob=!1;function Mb(n,e){if(!n||Ob)return"";Ob=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{Ob=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?fh(n):""}function iB(n){switch(n.tag){case 5:return fh(n.type);case 16:return fh("Lazy");case 13:return fh("Suspense");case 19:return fh("SuspenseList");case 0:case 2:case 15:return n=Mb(n.type,!1),n;case 11:return n=Mb(n.type.render,!1),n;case 1:return n=Mb(n.type,!0),n;default:return""}}function Tw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Jc:return"Fragment";case Xc:return"Portal";case ww:return"Profiler";case RE:return"StrictMode";case xw:return"Suspense";case Ew:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oD:return(n.displayName||"Context")+".Consumer";case aD:return(n._context.displayName||"Context")+".Provider";case OE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ME:return e=n.displayName||null,e!==null?e:Tw(n.type)||"Memo";case go:e=n._payload,n=n._init;try{return Tw(n(e))}catch(t){}}return null}function rB(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tw(e);case 8:return e===RE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function cD(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sB(n){var e=cD(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Pp(n){n._valueTracker||(n._valueTracker=sB(n))}function uD(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=cD(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function eg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch(e){return n.body}}function Sw(n,e){var t=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function o_(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Lo(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dD(n,e){e=e.checked,e!=null&&IE(n,"checked",e,!1)}function _w(n,e){dD(n,e);var t=Lo(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Cw(n,e.type,t):e.hasOwnProperty("defaultValue")&&Cw(n,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function l_(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Cw(n,e,t){(e!=="number"||eg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ph=Array.isArray;function pu(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Lo(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Aw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function c_(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ne(92));if(ph(t)){if(1<t.length)throw Error(Ne(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Lo(t)}}function hD(n,e){var t=Lo(e.value),i=Lo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function u_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function fD(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?fD(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ip,pD=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ip=Ip||document.createElement("div"),Ip.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ip.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Xh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var kh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aB=["Webkit","ms","Moz","O"];Object.keys(kh).forEach(function(n){aB.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),kh[e]=kh[n]})});function mD(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||kh.hasOwnProperty(n)&&kh[n]?(""+e).trim():e+"px"}function gD(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=mD(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var oB=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nw(n,e){if(e){if(oB[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function Dw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pw=null;function LE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Iw=null,mu=null,gu=null;function d_(n){if(n=$f(n)){if(typeof Iw!="function")throw Error(Ne(280));var e=n.stateNode;e&&(e=Ry(e),Iw(n.stateNode,n.type,e))}}function yD(n){mu?gu?gu.push(n):gu=[n]:mu=n}function bD(){if(mu){var n=mu,e=gu;if(gu=mu=null,d_(n),e)for(n=0;n<e.length;n++)d_(e[n])}}function vD(n,e){return n(e)}function wD(){}var Lb=!1;function xD(n,e,t){if(Lb)return n(e,t);Lb=!0;try{return vD(n,e,t)}finally{Lb=!1,(mu!==null||gu!==null)&&(wD(),bD())}}function Jh(n,e){var t=n.stateNode;if(t===null)return null;var i=Ry(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ne(231,e,typeof t));return t}var Rw=!1;if(za)try{var zd={};Object.defineProperty(zd,"passive",{get:function(){Rw=!0}}),window.addEventListener("test",zd,zd),window.removeEventListener("test",zd,zd)}catch(n){Rw=!1}function lB(n,e,t,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Nh=!1,tg=null,ng=!1,Ow=null,cB={onError:function(n){Nh=!0,tg=n}};function uB(n,e,t,i,r,s,a,o,l){Nh=!1,tg=null,lB.apply(cB,arguments)}function dB(n,e,t,i,r,s,a,o,l){if(uB.apply(this,arguments),Nh){if(Nh){var c=tg;Nh=!1,tg=null}else throw Error(Ne(198));ng||(ng=!0,Ow=c)}}function rc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ED(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function h_(n){if(rc(n)!==n)throw Error(Ne(188))}function hB(n){var e=n.alternate;if(!e){if(e=rc(n),e===null)throw Error(Ne(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return h_(r),n;if(s===i)return h_(r),e;s=s.sibling}throw Error(Ne(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(Ne(189))}}if(t.alternate!==i)throw Error(Ne(190))}if(t.tag!==3)throw Error(Ne(188));return t.stateNode.current===t?n:e}function TD(n){return n=hB(n),n!==null?SD(n):null}function SD(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=SD(n);if(e!==null)return e;n=n.sibling}return null}var _D=br.unstable_scheduleCallback,f_=br.unstable_cancelCallback,fB=br.unstable_shouldYield,pB=br.unstable_requestPaint,En=br.unstable_now,mB=br.unstable_getCurrentPriorityLevel,$E=br.unstable_ImmediatePriority,CD=br.unstable_UserBlockingPriority,ig=br.unstable_NormalPriority,gB=br.unstable_LowPriority,AD=br.unstable_IdlePriority,Ny=null,ta=null;function yB(n){if(ta&&typeof ta.onCommitFiberRoot=="function")try{ta.onCommitFiberRoot(Ny,n,void 0,(n.current.flags&128)===128)}catch(e){}}var ws=Math.clz32?Math.clz32:wB,bB=Math.log,vB=Math.LN2;function wB(n){return n>>>=0,n===0?32:31-(bB(n)/vB|0)|0}var Rp=64,Op=4194304;function mh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function rg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?i=mh(o):(s&=a,s!==0&&(i=mh(s)))}else a=t&~r,a!==0?i=mh(a):s!==0&&(i=mh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ws(e),r=1<<t,i|=n[t],e&=~r;return i}function xB(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EB(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-ws(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&i)&&(r[a]=xB(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function Mw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function kD(){var n=Rp;return Rp<<=1,!(Rp&4194240)&&(Rp=64),n}function $b(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Mf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ws(e),n[e]=t}function TB(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-ws(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function BE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ws(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Mt=0;function ND(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var DD,FE,PD,ID,RD,Lw=!1,Mp=[],Ao=null,ko=null,No=null,Zh=new Map,ef=new Map,wo=[],SB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p_(n,e){switch(n){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":Zh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(e.pointerId)}}function Vd(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=$f(e),e!==null&&FE(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function _B(n,e,t,i,r){switch(e){case"focusin":return Ao=Vd(Ao,n,e,t,i,r),!0;case"dragenter":return ko=Vd(ko,n,e,t,i,r),!0;case"mouseover":return No=Vd(No,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Zh.set(s,Vd(Zh.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ef.set(s,Vd(ef.get(s)||null,n,e,t,i,r)),!0}return!1}function OD(n){var e=El(n.target);if(e!==null){var t=rc(e);if(t!==null){if(e=t.tag,e===13){if(e=ED(t),e!==null){n.blockedOn=e,RD(n.priority,function(){PD(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$w(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Pw=i,t.target.dispatchEvent(i),Pw=null}else return e=$f(t),e!==null&&FE(e),n.blockedOn=t,!1;e.shift()}return!0}function m_(n,e,t){Cm(n)&&t.delete(e)}function CB(){Lw=!1,Ao!==null&&Cm(Ao)&&(Ao=null),ko!==null&&Cm(ko)&&(ko=null),No!==null&&Cm(No)&&(No=null),Zh.forEach(m_),ef.forEach(m_)}function Hd(n,e){n.blockedOn===e&&(n.blockedOn=null,Lw||(Lw=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,CB)))}function tf(n){function e(r){return Hd(r,n)}if(0<Mp.length){Hd(Mp[0],n);for(var t=1;t<Mp.length;t++){var i=Mp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Ao!==null&&Hd(Ao,n),ko!==null&&Hd(ko,n),No!==null&&Hd(No,n),Zh.forEach(e),ef.forEach(e),t=0;t<wo.length;t++)i=wo[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<wo.length&&(t=wo[0],t.blockedOn===null);)OD(t),t.blockedOn===null&&wo.shift()}var yu=Za.ReactCurrentBatchConfig,sg=!0;function AB(n,e,t,i){var r=Mt,s=yu.transition;yu.transition=null;try{Mt=1,qE(n,e,t,i)}finally{Mt=r,yu.transition=s}}function kB(n,e,t,i){var r=Mt,s=yu.transition;yu.transition=null;try{Mt=4,qE(n,e,t,i)}finally{Mt=r,yu.transition=s}}function qE(n,e,t,i){if(sg){var r=$w(n,e,t,i);if(r===null)Gb(n,e,i,ag,t),p_(n,i);else if(_B(r,n,e,t,i))i.stopPropagation();else if(p_(n,i),e&4&&-1<SB.indexOf(n)){for(;r!==null;){var s=$f(r);if(s!==null&&DD(s),s=$w(n,e,t,i),s===null&&Gb(n,e,i,ag,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Gb(n,e,i,null,t)}}var ag=null;function $w(n,e,t,i){if(ag=null,n=LE(i),n=El(n),n!==null)if(e=rc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ED(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ag=n,null}function MD(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mB()){case $E:return 1;case CD:return 4;case ig:case gB:return 16;case AD:return 536870912;default:return 16}default:return 16}}var So=null,UE=null,Am=null;function LD(){if(Am)return Am;var n,e=UE,t=e.length,i,r="value"in So?So.value:So.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return Am=r.slice(n,1<i?1-i:void 0)}function km(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Lp(){return!0}function g_(){return!1}function xr(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Lp:g_,this.isPropagationStopped=g_,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Lp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Lp)},persist:function(){},isPersistent:Lp}),e}var ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jE=xr(ld),Lf=dn({},ld,{view:0,detail:0}),NB=xr(Lf),Bb,Fb,Wd,Dy=dn({},Lf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Wd&&(Wd&&n.type==="mousemove"?(Bb=n.screenX-Wd.screenX,Fb=n.screenY-Wd.screenY):Fb=Bb=0,Wd=n),Bb)},movementY:function(n){return"movementY"in n?n.movementY:Fb}}),y_=xr(Dy),DB=dn({},Dy,{dataTransfer:0}),PB=xr(DB),IB=dn({},Lf,{relatedTarget:0}),qb=xr(IB),RB=dn({},ld,{animationName:0,elapsedTime:0,pseudoElement:0}),OB=xr(RB),MB=dn({},ld,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),LB=xr(MB),$B=dn({},ld,{data:0}),b_=xr($B),BB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UB(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qB[n])?!!e[n]:!1}function zE(){return UB}var jB=dn({},Lf,{key:function(n){if(n.key){var e=BB[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=km(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?FB[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zE,charCode:function(n){return n.type==="keypress"?km(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?km(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),zB=xr(jB),VB=dn({},Dy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v_=xr(VB),HB=dn({},Lf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zE}),WB=xr(HB),GB=dn({},ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),QB=xr(GB),KB=dn({},Dy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),YB=xr(KB),XB=[9,13,27,32],VE=za&&"CompositionEvent"in window,Dh=null;za&&"documentMode"in document&&(Dh=document.documentMode);var JB=za&&"TextEvent"in window&&!Dh,$D=za&&(!VE||Dh&&8<Dh&&11>=Dh),w_=String.fromCharCode(32),x_=!1;function BD(n,e){switch(n){case"keyup":return XB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FD(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zc=!1;function ZB(n,e){switch(n){case"compositionend":return FD(e);case"keypress":return e.which!==32?null:(x_=!0,w_);case"textInput":return n=e.data,n===w_&&x_?null:n;default:return null}}function e5(n,e){if(Zc)return n==="compositionend"||!VE&&BD(n,e)?(n=LD(),Am=UE=So=null,Zc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $D&&e.locale!=="ko"?null:e.data;default:return null}}var t5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!t5[n.type]:e==="textarea"}function qD(n,e,t,i){yD(i),e=og(e,"onChange"),0<e.length&&(t=new jE("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ph=null,nf=null;function n5(n){XD(n,0)}function Py(n){var e=nu(n);if(uD(e))return n}function i5(n,e){if(n==="change")return e}var UD=!1;if(za){var Ub;if(za){var jb="oninput"in document;if(!jb){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),jb=typeof T_.oninput=="function"}Ub=jb}else Ub=!1;UD=Ub&&(!document.documentMode||9<document.documentMode)}function S_(){Ph&&(Ph.detachEvent("onpropertychange",jD),nf=Ph=null)}function jD(n){if(n.propertyName==="value"&&Py(nf)){var e=[];qD(e,nf,n,LE(n)),xD(n5,e)}}function r5(n,e,t){n==="focusin"?(S_(),Ph=e,nf=t,Ph.attachEvent("onpropertychange",jD)):n==="focusout"&&S_()}function s5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Py(nf)}function a5(n,e){if(n==="click")return Py(e)}function o5(n,e){if(n==="input"||n==="change")return Py(e)}function l5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var As=typeof Object.is=="function"?Object.is:l5;function rf(n,e){if(As(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!vw.call(e,r)||!As(n[r],e[r]))return!1}return!0}function __(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function C_(n,e){var t=__(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=__(t)}}function zD(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?zD(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function VD(){for(var n=window,e=eg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch(i){t=!1}if(t)n=e.contentWindow;else break;e=eg(n.document)}return e}function HE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function c5(n){var e=VD(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&zD(t.ownerDocument.documentElement,t)){if(i!==null&&HE(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=C_(t,s);var a=C_(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var u5=za&&"documentMode"in document&&11>=document.documentMode,eu=null,Bw=null,Ih=null,Fw=!1;function A_(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Fw||eu==null||eu!==eg(i)||(i=eu,"selectionStart"in i&&HE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ih&&rf(Ih,i)||(Ih=i,i=og(Bw,"onSelect"),0<i.length&&(e=new jE("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=eu)))}function $p(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var tu={animationend:$p("Animation","AnimationEnd"),animationiteration:$p("Animation","AnimationIteration"),animationstart:$p("Animation","AnimationStart"),transitionend:$p("Transition","TransitionEnd")},zb={},HD={};za&&(HD=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function Iy(n){if(zb[n])return zb[n];if(!tu[n])return n;var e=tu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in HD)return zb[n]=e[t];return n}var WD=Iy("animationend"),GD=Iy("animationiteration"),QD=Iy("animationstart"),KD=Iy("transitionend"),YD=new Map,k_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ho(n,e){YD.set(n,e),ic(e,[n])}for(var Vb=0;Vb<k_.length;Vb++){var Hb=k_[Vb],d5=Hb.toLowerCase(),h5=Hb[0].toUpperCase()+Hb.slice(1);Ho(d5,"on"+h5)}Ho(WD,"onAnimationEnd");Ho(GD,"onAnimationIteration");Ho(QD,"onAnimationStart");Ho("dblclick","onDoubleClick");Ho("focusin","onFocus");Ho("focusout","onBlur");Ho(KD,"onTransitionEnd");Ru("onMouseEnter",["mouseout","mouseover"]);Ru("onMouseLeave",["mouseout","mouseover"]);Ru("onPointerEnter",["pointerout","pointerover"]);Ru("onPointerLeave",["pointerout","pointerover"]);ic("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ic("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ic("onBeforeInput",["compositionend","keypress","textInput","paste"]);ic("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ic("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ic("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f5=new Set("cancel close invalid load scroll toggle".split(" ").concat(gh));function N_(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,dB(i,e,void 0,n),n.currentTarget=null}function XD(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;N_(r,o,c),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;N_(r,o,c),s=l}}}if(ng)throw n=Ow,ng=!1,Ow=null,n}function Qt(n,e){var t=e[Vw];t===void 0&&(t=e[Vw]=new Set);var i=n+"__bubble";t.has(i)||(JD(e,n,2,!1),t.add(i))}function Wb(n,e,t){var i=0;e&&(i|=4),JD(t,n,i,e)}var Bp="_reactListening"+Math.random().toString(36).slice(2);function sf(n){if(!n[Bp]){n[Bp]=!0,sD.forEach(function(t){t!=="selectionchange"&&(f5.has(t)||Wb(t,!1,n),Wb(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Bp]||(e[Bp]=!0,Wb("selectionchange",!1,e))}}function JD(n,e,t,i){switch(MD(e)){case 1:var r=AB;break;case 4:r=kB;break;default:r=qE}t=r.bind(null,e,t,n),r=void 0,!Rw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Gb(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=El(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}xD(function(){var c=s,u=LE(t),d=[];e:{var h=YD.get(n);if(h!==void 0){var f=jE,m=n;switch(n){case"keypress":if(km(t)===0)break e;case"keydown":case"keyup":f=zB;break;case"focusin":m="focus",f=qb;break;case"focusout":m="blur",f=qb;break;case"beforeblur":case"afterblur":f=qb;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=y_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=PB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=WB;break;case WD:case GD:case QD:f=OB;break;case KD:f=QB;break;case"scroll":f=NB;break;case"wheel":f=YB;break;case"copy":case"cut":case"paste":f=LB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=v_}var g=(e&4)!==0,_=!g&&n==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var y=c,T;y!==null;){T=y;var N=T.stateNode;if(T.tag===5&&N!==null&&(T=N,v!==null&&(N=Jh(y,v),N!=null&&g.push(af(y,N,T)))),_)break;y=y.return}0<g.length&&(h=new f(h,m,null,t,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==Pw&&(m=t.relatedTarget||t.fromElement)&&(El(m)||m[Va]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=c,m=m?El(m):null,m!==null&&(_=rc(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(g=y_,N="onMouseLeave",v="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(g=v_,N="onPointerLeave",v="onPointerEnter",y="pointer"),_=f==null?h:nu(f),T=m==null?h:nu(m),h=new g(N,y+"leave",f,t,u),h.target=_,h.relatedTarget=T,N=null,El(u)===c&&(g=new g(v,y+"enter",m,t,u),g.target=T,g.relatedTarget=_,N=g),_=N,f&&m)t:{for(g=f,v=m,y=0,T=g;T;T=Pc(T))y++;for(T=0,N=v;N;N=Pc(N))T++;for(;0<y-T;)g=Pc(g),y--;for(;0<T-y;)v=Pc(v),T--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Pc(g),v=Pc(v)}g=null}else g=null;f!==null&&D_(d,h,f,g,!1),m!==null&&_!==null&&D_(d,_,m,g,!0)}}e:{if(h=c?nu(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var P=i5;else if(E_(h))if(UD)P=o5;else{P=s5;var F=r5}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=a5);if(P&&(P=P(n,c))){qD(d,P,t,u);break e}F&&F(n,h,c),n==="focusout"&&(F=h._wrapperState)&&F.controlled&&h.type==="number"&&Cw(h,"number",h.value)}switch(F=c?nu(c):window,n){case"focusin":(E_(F)||F.contentEditable==="true")&&(eu=F,Bw=c,Ih=null);break;case"focusout":Ih=Bw=eu=null;break;case"mousedown":Fw=!0;break;case"contextmenu":case"mouseup":case"dragend":Fw=!1,A_(d,t,u);break;case"selectionchange":if(u5)break;case"keydown":case"keyup":A_(d,t,u)}var $;if(VE)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Zc?BD(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&($D&&t.locale!=="ko"&&(Zc||B!=="onCompositionStart"?B==="onCompositionEnd"&&Zc&&($=LD()):(So=u,UE="value"in So?So.value:So.textContent,Zc=!0)),F=og(c,B),0<F.length&&(B=new b_(B,n,null,t,u),d.push({event:B,listeners:F}),$?B.data=$:($=FD(t),$!==null&&(B.data=$)))),($=JB?ZB(n,t):e5(n,t))&&(c=og(c,"onBeforeInput"),0<c.length&&(u=new b_("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=$))}XD(d,e)})}function af(n,e,t){return{instance:n,listener:e,currentTarget:t}}function og(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Jh(n,t),s!=null&&i.unshift(af(n,s,r)),s=Jh(n,e),s!=null&&i.push(af(n,s,r))),n=n.return}return i}function Pc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function D_(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&c!==null&&(o=c,r?(l=Jh(t,s),l!=null&&a.unshift(af(t,l,o))):r||(l=Jh(t,s),l!=null&&a.push(af(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var p5=/\r\n?/g,m5=/\u0000|\uFFFD/g;function P_(n){return(typeof n=="string"?n:""+n).replace(p5,"\n").replace(m5,"")}function Fp(n,e,t){if(e=P_(e),P_(n)!==e&&t)throw Error(Ne(425))}function lg(){}var qw=null,Uw=null;function jw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zw=typeof setTimeout=="function"?setTimeout:void 0,g5=typeof clearTimeout=="function"?clearTimeout:void 0,I_=typeof Promise=="function"?Promise:void 0,y5=typeof queueMicrotask=="function"?queueMicrotask:typeof I_<"u"?function(n){return I_.resolve(null).then(n).catch(b5)}:zw;function b5(n){setTimeout(function(){throw n})}function Qb(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),tf(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);tf(e)}function Do(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function R_(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var cd=Math.random().toString(36).slice(2),Ws="__reactFiber$"+cd,of="__reactProps$"+cd,Va="__reactContainer$"+cd,Vw="__reactEvents$"+cd,v5="__reactListeners$"+cd,w5="__reactHandles$"+cd;function El(n){var e=n[Ws];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Va]||t[Ws]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=R_(n);n!==null;){if(t=n[Ws])return t;n=R_(n)}return e}n=t,t=n.parentNode}return null}function $f(n){return n=n[Ws]||n[Va],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function nu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ne(33))}function Ry(n){return n[of]||null}var Hw=[],iu=-1;function Wo(n){return{current:n}}function Xt(n){0>iu||(n.current=Hw[iu],Hw[iu]=null,iu--)}function Vt(n,e){iu++,Hw[iu]=n.current,n.current=e}var $o={},mi=Wo($o),Yi=Wo(!1),ql=$o;function Ou(n,e){var t=n.type.contextTypes;if(!t)return $o;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Xi(n){return n=n.childContextTypes,n!=null}function cg(){Xt(Yi),Xt(mi)}function O_(n,e,t){if(mi.current!==$o)throw Error(Ne(168));Vt(mi,e),Vt(Yi,t)}function ZD(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ne(108,rB(n)||"Unknown",r));return dn({},t,i)}function ug(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$o,ql=mi.current,Vt(mi,n),Vt(Yi,Yi.current),!0}function M_(n,e,t){var i=n.stateNode;if(!i)throw Error(Ne(169));t?(n=ZD(n,e,ql),i.__reactInternalMemoizedMergedChildContext=n,Xt(Yi),Xt(mi),Vt(mi,n)):Xt(Yi),Vt(Yi,t)}var Aa=null,Oy=!1,Kb=!1;function eP(n){Aa===null?Aa=[n]:Aa.push(n)}function x5(n){Oy=!0,eP(n)}function Go(){if(!Kb&&Aa!==null){Kb=!0;var n=0,e=Mt;try{var t=Aa;for(Mt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Aa=null,Oy=!1}catch(r){throw Aa!==null&&(Aa=Aa.slice(n+1)),_D($E,Go),r}finally{Mt=e,Kb=!1}}return null}var ru=[],su=0,dg=null,hg=0,Lr=[],$r=0,Ul=null,Ia=1,Ra="";function bl(n,e){ru[su++]=hg,ru[su++]=dg,dg=n,hg=e}function tP(n,e,t){Lr[$r++]=Ia,Lr[$r++]=Ra,Lr[$r++]=Ul,Ul=n;var i=Ia;n=Ra;var r=32-ws(i)-1;i&=~(1<<r),t+=1;var s=32-ws(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ia=1<<32-ws(e)+r|t<<r|i,Ra=s+n}else Ia=1<<s|t<<r|i,Ra=n}function WE(n){n.return!==null&&(bl(n,1),tP(n,1,0))}function GE(n){for(;n===dg;)dg=ru[--su],ru[su]=null,hg=ru[--su],ru[su]=null;for(;n===Ul;)Ul=Lr[--$r],Lr[$r]=null,Ra=Lr[--$r],Lr[$r]=null,Ia=Lr[--$r],Lr[$r]=null}var mr=null,pr=null,an=!1,fs=null;function nP(n,e){var t=qr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function L_(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,mr=n,pr=Do(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,mr=n,pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ul!==null?{id:Ia,overflow:Ra}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=qr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,mr=n,pr=null,!0):!1;default:return!1}}function Ww(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Gw(n){if(an){var e=pr;if(e){var t=e;if(!L_(n,e)){if(Ww(n))throw Error(Ne(418));e=Do(t.nextSibling);var i=mr;e&&L_(n,e)?nP(i,t):(n.flags=n.flags&-4097|2,an=!1,mr=n)}}else{if(Ww(n))throw Error(Ne(418));n.flags=n.flags&-4097|2,an=!1,mr=n}}}function $_(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mr=n}function qp(n){if(n!==mr)return!1;if(!an)return $_(n),an=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!jw(n.type,n.memoizedProps)),e&&(e=pr)){if(Ww(n))throw iP(),Error(Ne(418));for(;e;)nP(n,e),e=Do(e.nextSibling)}if($_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ne(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){pr=Do(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}pr=null}}else pr=mr?Do(n.stateNode.nextSibling):null;return!0}function iP(){for(var n=pr;n;)n=Do(n.nextSibling)}function Mu(){pr=mr=null,an=!1}function QE(n){fs===null?fs=[n]:fs.push(n)}var E5=Za.ReactCurrentBatchConfig;function cs(n,e){if(n&&n.defaultProps){e=dn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var fg=Wo(null),pg=null,au=null,KE=null;function YE(){KE=au=pg=null}function XE(n){var e=fg.current;Xt(fg),n._currentValue=e}function Qw(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function bu(n,e){pg=n,KE=au=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Qi=!0),n.firstContext=null)}function Wr(n){var e=n._currentValue;if(KE!==n)if(n={context:n,memoizedValue:e,next:null},au===null){if(pg===null)throw Error(Ne(308));au=n,pg.dependencies={lanes:0,firstContext:n}}else au=au.next=n;return e}var Tl=null;function JE(n){Tl===null?Tl=[n]:Tl.push(n)}function rP(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,JE(e)):(t.next=r.next,r.next=t),e.interleaved=t,Ha(n,i)}function Ha(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var yo=!1;function ZE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function La(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Po(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,_t&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ha(n,t)}return r=i.interleaved,r===null?(e.next=e,JE(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ha(n,t)}function Nm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,BE(n,t)}}function B_(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function mg(n,e,t,i){var r=n.updateQueue;yo=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,u=c=l=null,o=s;do{var h=o.lane,f=o.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=n,g=o;switch(h=e,f=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=dn({},d,h);break e;case 2:yo=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,h=r.effects,h===null?r.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,a|=h;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;h=o,o=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);zl|=a,n.lanes=a,n.memoizedState=d}}function F_(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ne(191,r));r.call(i)}}}var aP=new rD.Component().refs;function Kw(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:dn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var My={isMounted:function(n){return(n=n._reactInternals)?rc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Ri(),r=Ro(n),s=La(i,r);s.payload=e,t!=null&&(s.callback=t),e=Po(n,s,r),e!==null&&(xs(e,n,r,i),Nm(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Ri(),r=Ro(n),s=La(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Po(n,s,r),e!==null&&(xs(e,n,r,i),Nm(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ri(),i=Ro(n),r=La(t,i);r.tag=2,e!=null&&(r.callback=e),e=Po(n,r,i),e!==null&&(xs(e,n,i,t),Nm(e,n,i))}};function q_(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!rf(t,i)||!rf(r,s):!0}function oP(n,e,t){var i=!1,r=$o,s=e.contextType;return typeof s=="object"&&s!==null?s=Wr(s):(r=Xi(e)?ql:mi.current,i=e.contextTypes,s=(i=i!=null)?Ou(n,r):$o),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=My,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function U_(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&My.enqueueReplaceState(e,e.state,null)}function Yw(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=aP,ZE(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Wr(s):(s=Xi(e)?ql:mi.current,r.context=Ou(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kw(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&My.enqueueReplaceState(r,r.state,null),mg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Gd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ne(309));var i=t.stateNode}if(!i)throw Error(Ne(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;o===aP&&(o=r.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ne(284));if(!t._owner)throw Error(Ne(290,n))}return n}function Up(n,e){throw n=Object.prototype.toString.call(e),Error(Ne(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function j_(n){var e=n._init;return e(n._payload)}function lP(n){function e(v,y){if(n){var T=v.deletions;T===null?(v.deletions=[y],v.flags|=16):T.push(y)}}function t(v,y){if(!n)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Oo(v,y),v.index=0,v.sibling=null,v}function s(v,y,T){return v.index=T,n?(T=v.alternate,T!==null?(T=T.index,T<y?(v.flags|=2,y):T):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,y,T,N){return y===null||y.tag!==6?(y=nv(T,v.mode,N),y.return=v,y):(y=r(y,T),y.return=v,y)}function l(v,y,T,N){var P=T.type;return P===Jc?u(v,y,T.props.children,N,T.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===go&&j_(P)===y.type)?(N=r(y,T.props),N.ref=Gd(v,y,T),N.return=v,N):(N=Mm(T.type,T.key,T.props,null,v.mode,N),N.ref=Gd(v,y,T),N.return=v,N)}function c(v,y,T,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=iv(T,v.mode,N),y.return=v,y):(y=r(y,T.children||[]),y.return=v,y)}function u(v,y,T,N,P){return y===null||y.tag!==7?(y=Pl(T,v.mode,N,P),y.return=v,y):(y=r(y,T),y.return=v,y)}function d(v,y,T){if(typeof y=="string"&&y!==""||typeof y=="number")return y=nv(""+y,v.mode,T),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Dp:return T=Mm(y.type,y.key,y.props,null,v.mode,T),T.ref=Gd(v,null,y),T.return=v,T;case Xc:return y=iv(y,v.mode,T),y.return=v,y;case go:var N=y._init;return d(v,N(y._payload),T)}if(ph(y)||jd(y))return y=Pl(y,v.mode,T,null),y.return=v,y;Up(v,y)}return null}function h(v,y,T,N){var P=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return P!==null?null:o(v,y,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Dp:return T.key===P?l(v,y,T,N):null;case Xc:return T.key===P?c(v,y,T,N):null;case go:return P=T._init,h(v,y,P(T._payload),N)}if(ph(T)||jd(T))return P!==null?null:u(v,y,T,N,null);Up(v,T)}return null}function f(v,y,T,N,P){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(T)||null,o(y,v,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Dp:return v=v.get(N.key===null?T:N.key)||null,l(y,v,N,P);case Xc:return v=v.get(N.key===null?T:N.key)||null,c(y,v,N,P);case go:var F=N._init;return f(v,y,T,F(N._payload),P)}if(ph(N)||jd(N))return v=v.get(T)||null,u(y,v,N,P,null);Up(y,N)}return null}function m(v,y,T,N){for(var P=null,F=null,$=y,B=y=0,M=null;$!==null&&B<T.length;B++){$.index>B?(M=$,$=null):M=$.sibling;var Z=h(v,$,T[B],N);if(Z===null){$===null&&($=M);break}n&&$&&Z.alternate===null&&e(v,$),y=s(Z,y,B),F===null?P=Z:F.sibling=Z,F=Z,$=M}if(B===T.length)return t(v,$),an&&bl(v,B),P;if($===null){for(;B<T.length;B++)$=d(v,T[B],N),$!==null&&(y=s($,y,B),F===null?P=$:F.sibling=$,F=$);return an&&bl(v,B),P}for($=i(v,$);B<T.length;B++)M=f($,v,B,T[B],N),M!==null&&(n&&M.alternate!==null&&$.delete(M.key===null?B:M.key),y=s(M,y,B),F===null?P=M:F.sibling=M,F=M);return n&&$.forEach(function(O){return e(v,O)}),an&&bl(v,B),P}function g(v,y,T,N){var P=jd(T);if(typeof P!="function")throw Error(Ne(150));if(T=P.call(T),T==null)throw Error(Ne(151));for(var F=P=null,$=y,B=y=0,M=null,Z=T.next();$!==null&&!Z.done;B++,Z=T.next()){$.index>B?(M=$,$=null):M=$.sibling;var O=h(v,$,Z.value,N);if(O===null){$===null&&($=M);break}n&&$&&O.alternate===null&&e(v,$),y=s(O,y,B),F===null?P=O:F.sibling=O,F=O,$=M}if(Z.done)return t(v,$),an&&bl(v,B),P;if($===null){for(;!Z.done;B++,Z=T.next())Z=d(v,Z.value,N),Z!==null&&(y=s(Z,y,B),F===null?P=Z:F.sibling=Z,F=Z);return an&&bl(v,B),P}for($=i(v,$);!Z.done;B++,Z=T.next())Z=f($,v,B,Z.value,N),Z!==null&&(n&&Z.alternate!==null&&$.delete(Z.key===null?B:Z.key),y=s(Z,y,B),F===null?P=Z:F.sibling=Z,F=Z);return n&&$.forEach(function(K){return e(v,K)}),an&&bl(v,B),P}function _(v,y,T,N){if(typeof T=="object"&&T!==null&&T.type===Jc&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Dp:e:{for(var P=T.key,F=y;F!==null;){if(F.key===P){if(P=T.type,P===Jc){if(F.tag===7){t(v,F.sibling),y=r(F,T.props.children),y.return=v,v=y;break e}}else if(F.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===go&&j_(P)===F.type){t(v,F.sibling),y=r(F,T.props),y.ref=Gd(v,F,T),y.return=v,v=y;break e}t(v,F);break}else e(v,F);F=F.sibling}T.type===Jc?(y=Pl(T.props.children,v.mode,N,T.key),y.return=v,v=y):(N=Mm(T.type,T.key,T.props,null,v.mode,N),N.ref=Gd(v,y,T),N.return=v,v=N)}return a(v);case Xc:e:{for(F=T.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){t(v,y.sibling),y=r(y,T.children||[]),y.return=v,v=y;break e}else{t(v,y);break}else e(v,y);y=y.sibling}y=iv(T,v.mode,N),y.return=v,v=y}return a(v);case go:return F=T._init,_(v,y,F(T._payload),N)}if(ph(T))return m(v,y,T,N);if(jd(T))return g(v,y,T,N);Up(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,y!==null&&y.tag===6?(t(v,y.sibling),y=r(y,T),y.return=v,v=y):(t(v,y),y=nv(T,v.mode,N),y.return=v,v=y),a(v)):t(v,y)}return _}var Lu=lP(!0),cP=lP(!1),Bf={},na=Wo(Bf),lf=Wo(Bf),cf=Wo(Bf);function Sl(n){if(n===Bf)throw Error(Ne(174));return n}function eT(n,e){switch(Vt(cf,e),Vt(lf,n),Vt(na,Bf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=kw(e,n)}Xt(na),Vt(na,e)}function $u(){Xt(na),Xt(lf),Xt(cf)}function uP(n){Sl(cf.current);var e=Sl(na.current),t=kw(e,n.type);e!==t&&(Vt(lf,n),Vt(na,t))}function tT(n){lf.current===n&&(Xt(na),Xt(lf))}var ln=Wo(0);function gg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yb=[];function nT(){for(var n=0;n<Yb.length;n++)Yb[n]._workInProgressVersionPrimary=null;Yb.length=0}var Dm=Za.ReactCurrentDispatcher,Xb=Za.ReactCurrentBatchConfig,jl=0,un=null,Rn=null,Un=null,yg=!1,Rh=!1,uf=0,T5=0;function ai(){throw Error(Ne(321))}function iT(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!As(n[t],e[t]))return!1;return!0}function rT(n,e,t,i,r,s){if(jl=s,un=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dm.current=n===null||n.memoizedState===null?A5:k5,n=t(i,r),Rh){s=0;do{if(Rh=!1,uf=0,25<=s)throw Error(Ne(301));s+=1,Un=Rn=null,e.updateQueue=null,Dm.current=N5,n=t(i,r)}while(Rh)}if(Dm.current=bg,e=Rn!==null&&Rn.next!==null,jl=0,Un=Rn=un=null,yg=!1,e)throw Error(Ne(300));return n}function sT(){var n=uf!==0;return uf=0,n}function zs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?un.memoizedState=Un=n:Un=Un.next=n,Un}function Gr(){if(Rn===null){var n=un.alternate;n=n!==null?n.memoizedState:null}else n=Rn.next;var e=Un===null?un.memoizedState:Un.next;if(e!==null)Un=e,Rn=n;else{if(n===null)throw Error(Ne(310));Rn=n,n={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Un===null?un.memoizedState=Un=n:Un=Un.next=n}return Un}function df(n,e){return typeof e=="function"?e(n):e}function Jb(n){var e=Gr(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var i=Rn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((jl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=i):l=l.next=d,un.lanes|=u,zl|=u}c=c.next}while(c!==null&&c!==s);l===null?a=i:l.next=o,As(i,e.memoizedState)||(Qi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,un.lanes|=s,zl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Zb(n){var e=Gr(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);As(s,e.memoizedState)||(Qi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function dP(){}function hP(n,e){var t=un,i=Gr(),r=e(),s=!As(i.memoizedState,r);if(s&&(i.memoizedState=r,Qi=!0),i=i.queue,aT(mP.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Un!==null&&Un.memoizedState.tag&1){if(t.flags|=2048,hf(9,pP.bind(null,t,i,r,e),void 0,null),Vn===null)throw Error(Ne(349));jl&30||fP(t,e,r)}return r}function fP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=un.updateQueue,e===null?(e={lastEffect:null,stores:null},un.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function pP(n,e,t,i){e.value=t,e.getSnapshot=i,gP(e)&&yP(n)}function mP(n,e,t){return t(function(){gP(e)&&yP(n)})}function gP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!As(n,t)}catch(i){return!0}}function yP(n){var e=Ha(n,1);e!==null&&xs(e,n,1,-1)}function z_(n){var e=zs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:n},e.queue=n,n=n.dispatch=C5.bind(null,un,n),[e.memoizedState,n]}function hf(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=un.updateQueue,e===null?(e={lastEffect:null,stores:null},un.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function bP(){return Gr().memoizedState}function Pm(n,e,t,i){var r=zs();un.flags|=n,r.memoizedState=hf(1|e,t,void 0,i===void 0?null:i)}function Ly(n,e,t,i){var r=Gr();i=i===void 0?null:i;var s=void 0;if(Rn!==null){var a=Rn.memoizedState;if(s=a.destroy,i!==null&&iT(i,a.deps)){r.memoizedState=hf(e,t,s,i);return}}un.flags|=n,r.memoizedState=hf(1|e,t,s,i)}function V_(n,e){return Pm(8390656,8,n,e)}function aT(n,e){return Ly(2048,8,n,e)}function vP(n,e){return Ly(4,2,n,e)}function wP(n,e){return Ly(4,4,n,e)}function xP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function EP(n,e,t){return t=t!=null?t.concat([n]):null,Ly(4,4,xP.bind(null,e,n),t)}function oT(){}function TP(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&iT(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function SP(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&iT(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function _P(n,e,t){return jl&21?(As(t,e)||(t=kD(),un.lanes|=t,zl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Qi=!0),n.memoizedState=t)}function S5(n,e){var t=Mt;Mt=t!==0&&4>t?t:4,n(!0);var i=Xb.transition;Xb.transition={};try{n(!1),e()}finally{Mt=t,Xb.transition=i}}function CP(){return Gr().memoizedState}function _5(n,e,t){var i=Ro(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},AP(n))kP(e,t);else if(t=rP(n,e,t,i),t!==null){var r=Ri();xs(t,n,i,r),NP(t,e,i)}}function C5(n,e,t){var i=Ro(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(AP(n))kP(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,As(o,a)){var l=e.interleaved;l===null?(r.next=r,JE(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch(c){}finally{}t=rP(n,e,r,i),t!==null&&(r=Ri(),xs(t,n,i,r),NP(t,e,i))}}function AP(n){var e=n.alternate;return n===un||e!==null&&e===un}function kP(n,e){Rh=yg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function NP(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,BE(n,t)}}var bg={readContext:Wr,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},A5={readContext:Wr,useCallback:function(n,e){return zs().memoizedState=[n,e===void 0?null:e],n},useContext:Wr,useEffect:V_,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Pm(4194308,4,xP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Pm(4194308,4,n,e)},useInsertionEffect:function(n,e){return Pm(4,2,n,e)},useMemo:function(n,e){var t=zs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=zs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=_5.bind(null,un,n),[i.memoizedState,n]},useRef:function(n){var e=zs();return n={current:n},e.memoizedState=n},useState:z_,useDebugValue:oT,useDeferredValue:function(n){return zs().memoizedState=n},useTransition:function(){var n=z_(!1),e=n[0];return n=S5.bind(null,n[1]),zs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=un,r=zs();if(an){if(t===void 0)throw Error(Ne(407));t=t()}else{if(t=e(),Vn===null)throw Error(Ne(349));jl&30||fP(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,V_(mP.bind(null,i,s,n),[n]),i.flags|=2048,hf(9,pP.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=zs(),e=Vn.identifierPrefix;if(an){var t=Ra,i=Ia;t=(i&~(1<<32-ws(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=uf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=T5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},k5={readContext:Wr,useCallback:TP,useContext:Wr,useEffect:aT,useImperativeHandle:EP,useInsertionEffect:vP,useLayoutEffect:wP,useMemo:SP,useReducer:Jb,useRef:bP,useState:function(){return Jb(df)},useDebugValue:oT,useDeferredValue:function(n){var e=Gr();return _P(e,Rn.memoizedState,n)},useTransition:function(){var n=Jb(df)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:dP,useSyncExternalStore:hP,useId:CP,unstable_isNewReconciler:!1},N5={readContext:Wr,useCallback:TP,useContext:Wr,useEffect:aT,useImperativeHandle:EP,useInsertionEffect:vP,useLayoutEffect:wP,useMemo:SP,useReducer:Zb,useRef:bP,useState:function(){return Zb(df)},useDebugValue:oT,useDeferredValue:function(n){var e=Gr();return Rn===null?e.memoizedState=n:_P(e,Rn.memoizedState,n)},useTransition:function(){var n=Zb(df)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:dP,useSyncExternalStore:hP,useId:CP,unstable_isNewReconciler:!1};function Bu(n,e){try{var t="",i=e;do t+=iB(i),i=i.return;while(i);var r=t}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:n,source:e,stack:r,digest:null}}function ev(n,e,t){return{value:n,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function Xw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var D5=typeof WeakMap=="function"?WeakMap:Map;function DP(n,e,t){t=La(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){wg||(wg=!0,ox=i),Xw(n,e)},t}function PP(n,e,t){t=La(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Xw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Xw(n,e),typeof i!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function H_(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new D5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=V5.bind(null,n,e,t),e.then(n,n))}function W_(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function G_(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=La(-1,1),e.tag=2,Po(t,e,1))),t.lanes|=1),n)}var P5=Za.ReactCurrentOwner,Qi=!1;function Ai(n,e,t,i){e.child=n===null?cP(e,null,t,i):Lu(e,n.child,t,i)}function Q_(n,e,t,i,r){t=t.render;var s=e.ref;return bu(e,r),i=rT(n,e,t,i,s,r),t=sT(),n!==null&&!Qi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Wa(n,e,r)):(an&&t&&WE(e),e.flags|=1,Ai(n,e,i,r),e.child)}function K_(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!mT(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,IP(n,e,s,i,r)):(n=Mm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:rf,t(a,i)&&n.ref===e.ref)return Wa(n,e,r)}return e.flags|=1,n=Oo(s,i),n.ref=e.ref,n.return=e,e.child=n}function IP(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(rf(s,i)&&n.ref===e.ref)if(Qi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Qi=!0);else return e.lanes=n.lanes,Wa(n,e,r)}return Jw(n,e,t,i,r)}function RP(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(lu,lr),lr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Vt(lu,lr),lr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Vt(lu,lr),lr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Vt(lu,lr),lr|=i;return Ai(n,e,r,t),e.child}function OP(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Jw(n,e,t,i,r){var s=Xi(t)?ql:mi.current;return s=Ou(e,s),bu(e,r),t=rT(n,e,t,i,s,r),i=sT(),n!==null&&!Qi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Wa(n,e,r)):(an&&i&&WE(e),e.flags|=1,Ai(n,e,t,r),e.child)}function Y_(n,e,t,i,r){if(Xi(t)){var s=!0;ug(e)}else s=!1;if(bu(e,r),e.stateNode===null)Im(n,e),oP(e,t,i),Yw(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=Wr(c):(c=Xi(t)?ql:mi.current,c=Ou(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==c)&&U_(e,a,i,c),yo=!1;var h=e.memoizedState;a.state=h,mg(e,i,a,r),l=e.memoizedState,o!==i||h!==l||Yi.current||yo?(typeof u=="function"&&(Kw(e,t,u,i),l=e.memoizedState),(o=yo||q_(e,t,o,i,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,sP(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:cs(e.type,o),a.props=c,d=e.pendingProps,h=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Wr(l):(l=Xi(t)?ql:mi.current,l=Ou(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&U_(e,a,i,l),yo=!1,h=e.memoizedState,a.state=h,mg(e,i,a,r);var m=e.memoizedState;o!==d||h!==m||Yi.current||yo?(typeof f=="function"&&(Kw(e,t,f,i),m=e.memoizedState),(c=yo||q_(e,t,c,i,h,m,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),a.props=i,a.state=m,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return Zw(n,e,t,i,s,r)}function Zw(n,e,t,i,r,s){OP(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&M_(e,t,!1),Wa(n,e,s);i=e.stateNode,P5.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Lu(e,n.child,null,s),e.child=Lu(e,null,o,s)):Ai(n,e,o,s),e.memoizedState=i.state,r&&M_(e,t,!0),e.child}function MP(n){var e=n.stateNode;e.pendingContext?O_(n,e.pendingContext,e.pendingContext!==e.context):e.context&&O_(n,e.context,!1),eT(n,e.containerInfo)}function X_(n,e,t,i,r){return Mu(),QE(r),e.flags|=256,Ai(n,e,t,i),e.child}var ex={dehydrated:null,treeContext:null,retryLane:0};function tx(n){return{baseLanes:n,cachePool:null,transitions:null}}function LP(n,e,t){var i=e.pendingProps,r=ln.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Vt(ln,r&1),n===null)return Gw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Fy(a,i,0,null),n=Pl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=tx(t),e.memoizedState=ex,n):lT(e,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return I5(n,e,a,i,o,r,t);if(s){s=i.fallback,a=e.mode,r=n.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Oo(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=Oo(o,s):(s=Pl(s,a,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?tx(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=ex,i}return s=n.child,n=s.sibling,i=Oo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function lT(n,e){return e=Fy({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function jp(n,e,t,i){return i!==null&&QE(i),Lu(e,n.child,null,t),n=lT(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function I5(n,e,t,i,r,s,a){if(t)return e.flags&256?(e.flags&=-257,i=ev(Error(Ne(422))),jp(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Fy({mode:"visible",children:i.children},r,0,null),s=Pl(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Lu(e,n.child,null,a),e.child.memoizedState=tx(a),e.memoizedState=ex,s);if(!(e.mode&1))return jp(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(Ne(419)),i=ev(s,i,void 0),jp(n,e,a,i)}if(o=(a&n.childLanes)!==0,Qi||o){if(i=Vn,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ha(n,r),xs(i,n,r,-1))}return pT(),i=ev(Error(Ne(421))),jp(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=H5.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,pr=Do(r.nextSibling),mr=e,an=!0,fs=null,n!==null&&(Lr[$r++]=Ia,Lr[$r++]=Ra,Lr[$r++]=Ul,Ia=n.id,Ra=n.overflow,Ul=e),e=lT(e,i.children),e.flags|=4096,e)}function J_(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Qw(n.return,e,t)}function tv(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function $P(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ai(n,e,i.children,t),i=ln.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&J_(n,t,e);else if(n.tag===19)J_(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Vt(ln,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&gg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),tv(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&gg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}tv(e,!0,t,null,s);break;case"together":tv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Im(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Wa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),zl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ne(153));if(e.child!==null){for(n=e.child,t=Oo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Oo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function R5(n,e,t){switch(e.tag){case 3:MP(e),Mu();break;case 5:uP(e);break;case 1:Xi(e.type)&&ug(e);break;case 4:eT(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Vt(fg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Vt(ln,ln.current&1),e.flags|=128,null):t&e.child.childLanes?LP(n,e,t):(Vt(ln,ln.current&1),n=Wa(n,e,t),n!==null?n.sibling:null);Vt(ln,ln.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return $P(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Vt(ln,ln.current),i)break;return null;case 22:case 23:return e.lanes=0,RP(n,e,t)}return Wa(n,e,t)}var BP,nx,FP,qP;BP=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};nx=function(){};FP=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Sl(na.current);var s=null;switch(t){case"input":r=Sw(n,r),i=Sw(n,i),s=[];break;case"select":r=dn({},r,{value:void 0}),i=dn({},i,{value:void 0}),s=[];break;case"textarea":r=Aw(n,r),i=Aw(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=lg)}Nw(t,i);var a;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var o=r[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(o=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qt("scroll",n),s||o===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};qP=function(n,e,t,i){t!==i&&(e.flags|=4)};function Qd(n,e){if(!an)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function oi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function O5(n,e,t){var i=e.pendingProps;switch(GE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(e),null;case 1:return Xi(e.type)&&cg(),oi(e),null;case 3:return i=e.stateNode,$u(),Xt(Yi),Xt(mi),nT(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(qp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fs!==null&&(ux(fs),fs=null))),nx(n,e),oi(e),null;case 5:tT(e);var r=Sl(cf.current);if(t=e.type,n!==null&&e.stateNode!=null)FP(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ne(166));return oi(e),null}if(n=Sl(na.current),qp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Ws]=e,i[of]=s,n=(e.mode&1)!==0,t){case"dialog":Qt("cancel",i),Qt("close",i);break;case"iframe":case"object":case"embed":Qt("load",i);break;case"video":case"audio":for(r=0;r<gh.length;r++)Qt(gh[r],i);break;case"source":Qt("error",i);break;case"img":case"image":case"link":Qt("error",i),Qt("load",i);break;case"details":Qt("toggle",i);break;case"input":o_(i,s),Qt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Qt("invalid",i);break;case"textarea":c_(i,s),Qt("invalid",i)}Nw(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&Fp(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Fp(i.textContent,o,n),r=["children",""+o]):Yh.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Qt("scroll",i)}switch(t){case"input":Pp(i),l_(i,s,!0);break;case"textarea":Pp(i),u_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=lg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=fD(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[Ws]=e,n[of]=i,BP(n,e,!1,!1),e.stateNode=n;e:{switch(a=Dw(t,i),t){case"dialog":Qt("cancel",n),Qt("close",n),r=i;break;case"iframe":case"object":case"embed":Qt("load",n),r=i;break;case"video":case"audio":for(r=0;r<gh.length;r++)Qt(gh[r],n);r=i;break;case"source":Qt("error",n),r=i;break;case"img":case"image":case"link":Qt("error",n),Qt("load",n),r=i;break;case"details":Qt("toggle",n),r=i;break;case"input":o_(n,i),r=Sw(n,i),Qt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=dn({},i,{value:void 0}),Qt("invalid",n);break;case"textarea":c_(n,i),r=Aw(n,i),Qt("invalid",n);break;default:r=i}Nw(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?gD(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pD(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Xh(n,l):typeof l=="number"&&Xh(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qt("scroll",n):l!=null&&IE(n,s,l,a))}switch(t){case"input":Pp(n),l_(n,i,!1);break;case"textarea":Pp(n),u_(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Lo(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?pu(n,!!i.multiple,s,!1):i.defaultValue!=null&&pu(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=lg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oi(e),null;case 6:if(n&&e.stateNode!=null)qP(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ne(166));if(t=Sl(cf.current),Sl(na.current),qp(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ws]=e,(s=i.nodeValue!==t)&&(n=mr,n!==null))switch(n.tag){case 3:Fp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fp(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ws]=e,e.stateNode=i}return oi(e),null;case 13:if(Xt(ln),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(an&&pr!==null&&e.mode&1&&!(e.flags&128))iP(),Mu(),e.flags|=98560,s=!1;else if(s=qp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ne(317));s[Ws]=e}else Mu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oi(e),s=!1}else fs!==null&&(ux(fs),fs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||ln.current&1?Ln===0&&(Ln=3):pT())),e.updateQueue!==null&&(e.flags|=4),oi(e),null);case 4:return $u(),nx(n,e),n===null&&sf(e.stateNode.containerInfo),oi(e),null;case 10:return XE(e.type._context),oi(e),null;case 17:return Xi(e.type)&&cg(),oi(e),null;case 19:if(Xt(ln),s=e.memoizedState,s===null)return oi(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Qd(s,!1);else{if(Ln!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=gg(n),a!==null){for(e.flags|=128,Qd(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Vt(ln,ln.current&1|2),e.child}n=n.sibling}s.tail!==null&&En()>Fu&&(e.flags|=128,i=!0,Qd(s,!1),e.lanes=4194304)}else{if(!i)if(n=gg(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Qd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!an)return oi(e),null}else 2*En()-s.renderingStartTime>Fu&&t!==1073741824&&(e.flags|=128,i=!0,Qd(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=En(),e.sibling=null,t=ln.current,Vt(ln,i?t&1|2:t&1),e):(oi(e),null);case 22:case 23:return fT(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?lr&1073741824&&(oi(e),e.subtreeFlags&6&&(e.flags|=8192)):oi(e),null;case 24:return null;case 25:return null}throw Error(Ne(156,e.tag))}function M5(n,e){switch(GE(e),e.tag){case 1:return Xi(e.type)&&cg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return $u(),Xt(Yi),Xt(mi),nT(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return tT(e),null;case 13:if(Xt(ln),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));Mu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Xt(ln),null;case 4:return $u(),null;case 10:return XE(e.type._context),null;case 22:case 23:return fT(),null;case 24:return null;default:return null}}var zp=!1,li=!1,L5=typeof WeakSet=="function"?WeakSet:Set,je=null;function ou(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){gn(n,e,i)}else t.current=null}function ix(n,e,t){try{t()}catch(i){gn(n,e,i)}}var Z_=!1;function $5(n,e){if(qw=sg,n=VD(),HE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch(N){t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var f;d!==t||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===n)break t;if(h===t&&++c===r&&(o=a),h===s&&++u===i&&(l=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Uw={focusedElem:n,selectionRange:t},sg=!1,je=e;je!==null;)if(e=je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,je=n;else for(;je!==null;){e=je;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,_=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:cs(e.type,g),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(N){gn(e,e.return,N)}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}return m=Z_,Z_=!1,m}function Oh(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&ix(e,t,s)}r=r.next}while(r!==i)}}function $y(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function rx(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function UP(n){var e=n.alternate;e!==null&&(n.alternate=null,UP(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ws],delete e[of],delete e[Vw],delete e[v5],delete e[w5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function jP(n){return n.tag===5||n.tag===3||n.tag===4}function eC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||jP(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=lg));else if(i!==4&&(n=n.child,n!==null))for(sx(n,e,t),n=n.sibling;n!==null;)sx(n,e,t),n=n.sibling}function ax(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(ax(n,e,t),n=n.sibling;n!==null;)ax(n,e,t),n=n.sibling}var Zn=null,us=!1;function co(n,e,t){for(t=t.child;t!==null;)zP(n,e,t),t=t.sibling}function zP(n,e,t){if(ta&&typeof ta.onCommitFiberUnmount=="function")try{ta.onCommitFiberUnmount(Ny,t)}catch(o){}switch(t.tag){case 5:li||ou(t,e);case 6:var i=Zn,r=us;Zn=null,co(n,e,t),Zn=i,us=r,Zn!==null&&(us?(n=Zn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Zn.removeChild(t.stateNode));break;case 18:Zn!==null&&(us?(n=Zn,t=t.stateNode,n.nodeType===8?Qb(n.parentNode,t):n.nodeType===1&&Qb(n,t),tf(n)):Qb(Zn,t.stateNode));break;case 4:i=Zn,r=us,Zn=t.stateNode.containerInfo,us=!0,co(n,e,t),Zn=i,us=r;break;case 0:case 11:case 14:case 15:if(!li&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&ix(t,e,a),r=r.next}while(r!==i)}co(n,e,t);break;case 1:if(!li&&(ou(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){gn(t,e,o)}co(n,e,t);break;case 21:co(n,e,t);break;case 22:t.mode&1?(li=(i=li)||t.memoizedState!==null,co(n,e,t),li=i):co(n,e,t);break;default:co(n,e,t)}}function tC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new L5),e.forEach(function(i){var r=W5.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ss(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Zn=o.stateNode,us=!1;break e;case 3:Zn=o.stateNode.containerInfo,us=!0;break e;case 4:Zn=o.stateNode.containerInfo,us=!0;break e}o=o.return}if(Zn===null)throw Error(Ne(160));zP(s,a,r),Zn=null,us=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){gn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VP(e,n),e=e.sibling}function VP(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ss(e,n),js(n),i&4){try{Oh(3,n,n.return),$y(3,n)}catch(g){gn(n,n.return,g)}try{Oh(5,n,n.return)}catch(g){gn(n,n.return,g)}}break;case 1:ss(e,n),js(n),i&512&&t!==null&&ou(t,t.return);break;case 5:if(ss(e,n),js(n),i&512&&t!==null&&ou(t,t.return),n.flags&32){var r=n.stateNode;try{Xh(r,"")}catch(g){gn(n,n.return,g)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&dD(r,s),Dw(o,a);var c=Dw(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?gD(r,d):u==="dangerouslySetInnerHTML"?pD(r,d):u==="children"?Xh(r,d):IE(r,u,d,c)}switch(o){case"input":_w(r,s);break;case"textarea":hD(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?pu(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?pu(r,!!s.multiple,s.defaultValue,!0):pu(r,!!s.multiple,s.multiple?[]:"",!1))}r[of]=s}catch(g){gn(n,n.return,g)}}break;case 6:if(ss(e,n),js(n),i&4){if(n.stateNode===null)throw Error(Ne(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(g){gn(n,n.return,g)}}break;case 3:if(ss(e,n),js(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{tf(e.containerInfo)}catch(g){gn(n,n.return,g)}break;case 4:ss(e,n),js(n);break;case 13:ss(e,n),js(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(dT=En())),i&4&&tC(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(li=(c=li)||u,ss(e,n),li=c):ss(e,n),js(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(je=n,u=n.child;u!==null;){for(d=je=u;je!==null;){switch(h=je,f=h.child,h.tag){case 0:case 11:case 14:case 15:Oh(4,h,h.return);break;case 1:ou(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){gn(i,t,g)}}break;case 5:ou(h,h.return);break;case 22:if(h.memoizedState!==null){iC(d);continue}}f!==null?(f.return=h,je=f):iC(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=mD("display",a))}catch(g){gn(n,n.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){gn(n,n.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ss(e,n),js(n),i&4&&tC(n);break;case 21:break;default:ss(e,n),js(n)}}function js(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(jP(t)){var i=t;break e}t=t.return}throw Error(Ne(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Xh(r,""),i.flags&=-33);var s=eC(n);ax(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=eC(n);sx(n,o,a);break;default:throw Error(Ne(161))}}catch(l){gn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function B5(n,e,t){je=n,HP(n)}function HP(n,e,t){for(var i=(n.mode&1)!==0;je!==null;){var r=je,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||zp;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||li;o=zp;var c=li;if(zp=a,(li=l)&&!c)for(je=r;je!==null;)a=je,l=a.child,a.tag===22&&a.memoizedState!==null?rC(r):l!==null?(l.return=a,je=l):rC(r);for(;s!==null;)je=s,HP(s),s=s.sibling;je=r,zp=o,li=c}nC(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,je=s):nC(n)}}function nC(n){for(;je!==null;){var e=je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||$y(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!li)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:cs(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&F_(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}F_(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&tf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}li||e.flags&512&&rx(e)}catch(h){gn(e,e.return,h)}}if(e===n){je=null;break}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}}function iC(n){for(;je!==null;){var e=je;if(e===n){je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,je=t;break}je=e.return}}function rC(n){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$y(4,e)}catch(l){gn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){gn(e,r,l)}}var s=e.return;try{rx(e)}catch(l){gn(e,s,l)}break;case 5:var a=e.return;try{rx(e)}catch(l){gn(e,a,l)}}}catch(l){gn(e,e.return,l)}if(e===n){je=null;break}var o=e.sibling;if(o!==null){o.return=e.return,je=o;break}je=e.return}}var F5=Math.ceil,vg=Za.ReactCurrentDispatcher,cT=Za.ReactCurrentOwner,jr=Za.ReactCurrentBatchConfig,_t=0,Vn=null,Dn=null,ti=0,lr=0,lu=Wo(0),Ln=0,ff=null,zl=0,By=0,uT=0,Mh=null,ji=null,dT=0,Fu=1/0,Ca=null,wg=!1,ox=null,Io=null,Vp=!1,_o=null,xg=0,Lh=0,lx=null,Rm=-1,Om=0;function Ri(){return _t&6?En():Rm!==-1?Rm:Rm=En()}function Ro(n){return n.mode&1?_t&2&&ti!==0?ti&-ti:E5.transition!==null?(Om===0&&(Om=kD()),Om):(n=Mt,n!==0||(n=window.event,n=n===void 0?16:MD(n.type)),n):1}function xs(n,e,t,i){if(50<Lh)throw Lh=0,lx=null,Error(Ne(185));Mf(n,t,i),(!(_t&2)||n!==Vn)&&(n===Vn&&(!(_t&2)&&(By|=t),Ln===4&&xo(n,ti)),Ji(n,i),t===1&&_t===0&&!(e.mode&1)&&(Fu=En()+500,Oy&&Go()))}function Ji(n,e){var t=n.callbackNode;EB(n,e);var i=rg(n,n===Vn?ti:0);if(i===0)t!==null&&f_(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&f_(t),e===1)n.tag===0?x5(sC.bind(null,n)):eP(sC.bind(null,n)),y5(function(){!(_t&6)&&Go()}),t=null;else{switch(ND(i)){case 1:t=$E;break;case 4:t=CD;break;case 16:t=ig;break;case 536870912:t=AD;break;default:t=ig}t=ZP(t,WP.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function WP(n,e){if(Rm=-1,Om=0,_t&6)throw Error(Ne(327));var t=n.callbackNode;if(vu()&&n.callbackNode!==t)return null;var i=rg(n,n===Vn?ti:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Eg(n,i);else{e=i;var r=_t;_t|=2;var s=QP();(Vn!==n||ti!==e)&&(Ca=null,Fu=En()+500,Dl(n,e));do try{j5();break}catch(o){GP(n,o)}while(1);YE(),vg.current=s,_t=r,Dn!==null?e=0:(Vn=null,ti=0,e=Ln)}if(e!==0){if(e===2&&(r=Mw(n),r!==0&&(i=r,e=cx(n,r))),e===1)throw t=ff,Dl(n,0),xo(n,i),Ji(n,En()),t;if(e===6)xo(n,i);else{if(r=n.current.alternate,!(i&30)&&!q5(r)&&(e=Eg(n,i),e===2&&(s=Mw(n),s!==0&&(i=s,e=cx(n,s))),e===1))throw t=ff,Dl(n,0),xo(n,i),Ji(n,En()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ne(345));case 2:vl(n,ji,Ca);break;case 3:if(xo(n,i),(i&130023424)===i&&(e=dT+500-En(),10<e)){if(rg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Ri(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=zw(vl.bind(null,n,ji,Ca),e);break}vl(n,ji,Ca);break;case 4:if(xo(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-ws(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=En()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*F5(i/1960))-i,10<i){n.timeoutHandle=zw(vl.bind(null,n,ji,Ca),i);break}vl(n,ji,Ca);break;case 5:vl(n,ji,Ca);break;default:throw Error(Ne(329))}}}return Ji(n,En()),n.callbackNode===t?WP.bind(null,n):null}function cx(n,e){var t=Mh;return n.current.memoizedState.isDehydrated&&(Dl(n,e).flags|=256),n=Eg(n,e),n!==2&&(e=ji,ji=t,e!==null&&ux(e)),n}function ux(n){ji===null?ji=n:ji.push.apply(ji,n)}function q5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!As(s(),r))return!1}catch(a){return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xo(n,e){for(e&=~uT,e&=~By,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ws(e),i=1<<t;n[t]=-1,e&=~i}}function sC(n){if(_t&6)throw Error(Ne(327));vu();var e=rg(n,0);if(!(e&1))return Ji(n,En()),null;var t=Eg(n,e);if(n.tag!==0&&t===2){var i=Mw(n);i!==0&&(e=i,t=cx(n,i))}if(t===1)throw t=ff,Dl(n,0),xo(n,e),Ji(n,En()),t;if(t===6)throw Error(Ne(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,vl(n,ji,Ca),Ji(n,En()),null}function hT(n,e){var t=_t;_t|=1;try{return n(e)}finally{_t=t,_t===0&&(Fu=En()+500,Oy&&Go())}}function Vl(n){_o!==null&&_o.tag===0&&!(_t&6)&&vu();var e=_t;_t|=1;var t=jr.transition,i=Mt;try{if(jr.transition=null,Mt=1,n)return n()}finally{Mt=i,jr.transition=t,_t=e,!(_t&6)&&Go()}}function fT(){lr=lu.current,Xt(lu)}function Dl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,g5(t)),Dn!==null)for(t=Dn.return;t!==null;){var i=t;switch(GE(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&cg();break;case 3:$u(),Xt(Yi),Xt(mi),nT();break;case 5:tT(i);break;case 4:$u();break;case 13:Xt(ln);break;case 19:Xt(ln);break;case 10:XE(i.type._context);break;case 22:case 23:fT()}t=t.return}if(Vn=n,Dn=n=Oo(n.current,null),ti=lr=e,Ln=0,ff=null,uT=By=zl=0,ji=Mh=null,Tl!==null){for(e=0;e<Tl.length;e++)if(t=Tl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}t.pending=i}Tl=null}return n}function GP(n,e){do{var t=Dn;try{if(YE(),Dm.current=bg,yg){for(var i=un.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}yg=!1}if(jl=0,Un=Rn=un=null,Rh=!1,uf=0,cT.current=null,t===null||t.return===null){Ln=1,ff=e,Dn=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=ti,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=W_(a);if(f!==null){f.flags&=-257,G_(f,a,o,s,e),f.mode&1&&H_(s,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){H_(s,c,e),pT();break e}l=Error(Ne(426))}}else if(an&&o.mode&1){var _=W_(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),G_(_,a,o,s,e),QE(Bu(l,o));break e}}s=l=Bu(l,o),Ln!==4&&(Ln=2),Mh===null?Mh=[s]:Mh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=DP(s,l,e);B_(s,v);break e;case 1:o=l;var y=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Io===null||!Io.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=PP(s,o,e);B_(s,N);break e}}s=s.return}while(s!==null)}YP(t)}catch(P){e=P,Dn===t&&t!==null&&(Dn=t=t.return);continue}break}while(1)}function QP(){var n=vg.current;return vg.current=bg,n===null?bg:n}function pT(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Vn===null||!(zl&268435455)&&!(By&268435455)||xo(Vn,ti)}function Eg(n,e){var t=_t;_t|=2;var i=QP();(Vn!==n||ti!==e)&&(Ca=null,Dl(n,e));do try{U5();break}catch(r){GP(n,r)}while(1);if(YE(),_t=t,vg.current=i,Dn!==null)throw Error(Ne(261));return Vn=null,ti=0,Ln}function U5(){for(;Dn!==null;)KP(Dn)}function j5(){for(;Dn!==null&&!fB();)KP(Dn)}function KP(n){var e=JP(n.alternate,n,lr);n.memoizedProps=n.pendingProps,e===null?YP(n):Dn=e,cT.current=null}function YP(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=M5(t,e),t!==null){t.flags&=32767,Dn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ln=6,Dn=null;return}}else if(t=O5(t,e,lr),t!==null){Dn=t;return}if(e=e.sibling,e!==null){Dn=e;return}Dn=e=n}while(e!==null);Ln===0&&(Ln=5)}function vl(n,e,t){var i=Mt,r=jr.transition;try{jr.transition=null,Mt=1,z5(n,e,t,i)}finally{jr.transition=r,Mt=i}return null}function z5(n,e,t,i){do vu();while(_o!==null);if(_t&6)throw Error(Ne(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ne(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(TB(n,s),n===Vn&&(Dn=Vn=null,ti=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Vp||(Vp=!0,ZP(ig,function(){return vu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=jr.transition,jr.transition=null;var a=Mt;Mt=1;var o=_t;_t|=4,cT.current=null,$5(n,t),VP(t,n),c5(Uw),sg=!!qw,Uw=qw=null,n.current=t,B5(t),pB(),_t=o,Mt=a,jr.transition=s}else n.current=t;if(Vp&&(Vp=!1,_o=n,xg=r),s=n.pendingLanes,s===0&&(Io=null),yB(t.stateNode),Ji(n,En()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(wg)throw wg=!1,n=ox,ox=null,n;return xg&1&&n.tag!==0&&vu(),s=n.pendingLanes,s&1?n===lx?Lh++:(Lh=0,lx=n):Lh=0,Go(),null}function vu(){if(_o!==null){var n=ND(xg),e=jr.transition,t=Mt;try{if(jr.transition=null,Mt=16>n?16:n,_o===null)var i=!1;else{if(n=_o,_o=null,xg=0,_t&6)throw Error(Ne(331));var r=_t;for(_t|=4,je=n.current;je!==null;){var s=je,a=s.child;if(je.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(je=c;je!==null;){var u=je;switch(u.tag){case 0:case 11:case 15:Oh(8,u,s)}var d=u.child;if(d!==null)d.return=u,je=d;else for(;je!==null;){u=je;var h=u.sibling,f=u.return;if(UP(u),u===c){je=null;break}if(h!==null){h.return=f,je=h;break}je=f}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}je=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,je=a;else e:for(;je!==null;){if(s=je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Oh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,je=v;break e}je=s.return}}var y=n.current;for(je=y;je!==null;){a=je;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,je=T;else e:for(a=y;je!==null;){if(o=je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:$y(9,o)}}catch(P){gn(o,o.return,P)}if(o===a){je=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,je=N;break e}je=o.return}}if(_t=r,Go(),ta&&typeof ta.onPostCommitFiberRoot=="function")try{ta.onPostCommitFiberRoot(Ny,n)}catch(P){}i=!0}return i}finally{Mt=t,jr.transition=e}}return!1}function aC(n,e,t){e=Bu(t,e),e=DP(n,e,1),n=Po(n,e,1),e=Ri(),n!==null&&(Mf(n,1,e),Ji(n,e))}function gn(n,e,t){if(n.tag===3)aC(n,n,t);else for(;e!==null;){if(e.tag===3){aC(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Io===null||!Io.has(i))){n=Bu(t,n),n=PP(e,n,1),e=Po(e,n,1),n=Ri(),e!==null&&(Mf(e,1,n),Ji(e,n));break}}e=e.return}}function V5(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Ri(),n.pingedLanes|=n.suspendedLanes&t,Vn===n&&(ti&t)===t&&(Ln===4||Ln===3&&(ti&130023424)===ti&&500>En()-dT?Dl(n,0):uT|=t),Ji(n,e)}function XP(n,e){e===0&&(n.mode&1?(e=Op,Op<<=1,!(Op&130023424)&&(Op=4194304)):e=1);var t=Ri();n=Ha(n,e),n!==null&&(Mf(n,e,t),Ji(n,t))}function H5(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),XP(n,t)}function W5(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ne(314))}i!==null&&i.delete(e),XP(n,t)}var JP;JP=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Yi.current)Qi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Qi=!1,R5(n,e,t);Qi=!!(n.flags&131072)}else Qi=!1,an&&e.flags&1048576&&tP(e,hg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Im(n,e),n=e.pendingProps;var r=Ou(e,mi.current);bu(e,t),r=rT(null,e,i,n,r,t);var s=sT();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xi(i)?(s=!0,ug(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ZE(e),r.updater=My,e.stateNode=r,r._reactInternals=e,Yw(e,i,n,t),e=Zw(null,e,i,!0,s,t)):(e.tag=0,an&&s&&WE(e),Ai(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Im(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Q5(i),n=cs(i,n),r){case 0:e=Jw(null,e,i,n,t);break e;case 1:e=Y_(null,e,i,n,t);break e;case 11:e=Q_(null,e,i,n,t);break e;case 14:e=K_(null,e,i,cs(i.type,n),t);break e}throw Error(Ne(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),Jw(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),Y_(n,e,i,r,t);case 3:e:{if(MP(e),n===null)throw Error(Ne(387));i=e.pendingProps,s=e.memoizedState,r=s.element,sP(n,e),mg(e,i,null,t);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Bu(Error(Ne(423)),e),e=X_(n,e,i,t,r);break e}else if(i!==r){r=Bu(Error(Ne(424)),e),e=X_(n,e,i,t,r);break e}else for(pr=Do(e.stateNode.containerInfo.firstChild),mr=e,an=!0,fs=null,t=cP(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Mu(),i===r){e=Wa(n,e,t);break e}Ai(n,e,i,t)}e=e.child}return e;case 5:return uP(e),n===null&&Gw(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,jw(i,r)?a=null:s!==null&&jw(i,s)&&(e.flags|=32),OP(n,e),Ai(n,e,a,t),e.child;case 6:return n===null&&Gw(e),null;case 13:return LP(n,e,t);case 4:return eT(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Lu(e,null,i,t):Ai(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),Q_(n,e,i,r,t);case 7:return Ai(n,e,e.pendingProps,t),e.child;case 8:return Ai(n,e,e.pendingProps.children,t),e.child;case 12:return Ai(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Vt(fg,i._currentValue),i._currentValue=a,s!==null)if(As(s.value,a)){if(s.children===r.children&&!Yi.current){e=Wa(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=La(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Qw(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ne(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Qw(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ai(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,bu(e,t),r=Wr(r),i=i(r),e.flags|=1,Ai(n,e,i,t),e.child;case 14:return i=e.type,r=cs(i,e.pendingProps),r=cs(i.type,r),K_(n,e,i,r,t);case 15:return IP(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),Im(n,e),e.tag=1,Xi(i)?(n=!0,ug(e)):n=!1,bu(e,t),oP(e,i,r),Yw(e,i,r,t),Zw(null,e,i,!0,n,t);case 19:return $P(n,e,t);case 22:return RP(n,e,t)}throw Error(Ne(156,e.tag))};function ZP(n,e){return _D(n,e)}function G5(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(n,e,t,i){return new G5(n,e,t,i)}function mT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Q5(n){if(typeof n=="function")return mT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===OE)return 11;if(n===ME)return 14}return 2}function Oo(n,e){var t=n.alternate;return t===null?(t=qr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Mm(n,e,t,i,r,s){var a=2;if(i=n,typeof n=="function")mT(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Jc:return Pl(t.children,r,s,e);case RE:a=8,r|=8;break;case ww:return n=qr(12,t,e,r|2),n.elementType=ww,n.lanes=s,n;case xw:return n=qr(13,t,e,r),n.elementType=xw,n.lanes=s,n;case Ew:return n=qr(19,t,e,r),n.elementType=Ew,n.lanes=s,n;case lD:return Fy(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case aD:a=10;break e;case oD:a=9;break e;case OE:a=11;break e;case ME:a=14;break e;case go:a=16,i=null;break e}throw Error(Ne(130,n==null?n:typeof n,""))}return e=qr(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Pl(n,e,t,i){return n=qr(7,n,i,e),n.lanes=t,n}function Fy(n,e,t,i){return n=qr(22,n,i,e),n.elementType=lD,n.lanes=t,n.stateNode={isHidden:!1},n}function nv(n,e,t){return n=qr(6,n,null,e),n.lanes=t,n}function iv(n,e,t){return e=qr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function K5(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$b(0),this.expirationTimes=$b(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$b(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function gT(n,e,t,i,r,s,a,o,l){return n=new K5(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},ZE(s),n}function Y5(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function eI(n){if(!n)return $o;n=n._reactInternals;e:{if(rc(n)!==n||n.tag!==1)throw Error(Ne(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ne(171))}if(n.tag===1){var t=n.type;if(Xi(t))return ZD(n,t,e)}return e}function tI(n,e,t,i,r,s,a,o,l){return n=gT(t,i,!0,n,r,s,a,o,l),n.context=eI(null),t=n.current,i=Ri(),r=Ro(t),s=La(i,r),s.callback=e!=null?e:null,Po(t,s,r),n.current.lanes=r,Mf(n,r,i),Ji(n,i),n}function qy(n,e,t,i){var r=e.current,s=Ri(),a=Ro(r);return t=eI(t),e.context===null?e.context=t:e.pendingContext=t,e=La(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Po(r,e,a),n!==null&&(xs(n,r,a,s),Nm(n,r,a)),a}function Tg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function oC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function yT(n,e){oC(n,e),(n=n.alternate)&&oC(n,e)}function X5(){return null}var nI=typeof reportError=="function"?reportError:function(n){console.error(n)};function bT(n){this._internalRoot=n}Uy.prototype.render=bT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ne(409));qy(n,e,null,null)};Uy.prototype.unmount=bT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Vl(function(){qy(null,n,null,null)}),e[Va]=null}};function Uy(n){this._internalRoot=n}Uy.prototype.unstable_scheduleHydration=function(n){if(n){var e=ID();n={blockedOn:null,target:n,priority:e};for(var t=0;t<wo.length&&e!==0&&e<wo[t].priority;t++);wo.splice(t,0,n),t===0&&OD(n)}};function vT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function jy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function lC(){}function J5(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Tg(a);s.call(c)}}var a=tI(e,i,n,0,null,!1,!1,"",lC);return n._reactRootContainer=a,n[Va]=a.current,sf(n.nodeType===8?n.parentNode:n),Vl(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var c=Tg(l);o.call(c)}}var l=gT(n,0,!1,null,null,!1,!1,"",lC);return n._reactRootContainer=l,n[Va]=l.current,sf(n.nodeType===8?n.parentNode:n),Vl(function(){qy(e,l,t,i)}),l}function zy(n,e,t,i,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=Tg(a);o.call(l)}}qy(e,a,n,r)}else a=J5(t,e,n,r,i);return Tg(a)}DD=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=mh(e.pendingLanes);t!==0&&(BE(e,t|1),Ji(e,En()),!(_t&6)&&(Fu=En()+500,Go()))}break;case 13:Vl(function(){var i=Ha(n,1);if(i!==null){var r=Ri();xs(i,n,1,r)}}),yT(n,1)}};FE=function(n){if(n.tag===13){var e=Ha(n,134217728);if(e!==null){var t=Ri();xs(e,n,134217728,t)}yT(n,134217728)}};PD=function(n){if(n.tag===13){var e=Ro(n),t=Ha(n,e);if(t!==null){var i=Ri();xs(t,n,e,i)}yT(n,e)}};ID=function(){return Mt};RD=function(n,e){var t=Mt;try{return Mt=n,e()}finally{Mt=t}};Iw=function(n,e,t){switch(e){case"input":if(_w(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Ry(i);if(!r)throw Error(Ne(90));uD(i),_w(i,r)}}}break;case"textarea":hD(n,t);break;case"select":e=t.value,e!=null&&pu(n,!!t.multiple,e,!1)}};vD=hT;wD=Vl;var Z5={usingClientEntryPoint:!1,Events:[$f,nu,Ry,yD,bD,hT]},Kd={findFiberByHostInstance:El,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},e8={bundleType:Kd.bundleType,version:Kd.version,rendererPackageName:Kd.rendererPackageName,rendererConfig:Kd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Za.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=TD(n),n===null?null:n.stateNode},findFiberByHostInstance:Kd.findFiberByHostInstance||X5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hp.isDisabled&&Hp.supportsFiber)try{Ny=Hp.inject(e8),ta=Hp}catch(n){}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z5;wr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vT(e))throw Error(Ne(200));return Y5(n,e,null,t)};wr.createRoot=function(n,e){if(!vT(n))throw Error(Ne(299));var t=!1,i="",r=nI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=gT(n,1,!1,null,null,t,!1,i,r),n[Va]=e.current,sf(n.nodeType===8?n.parentNode:n),new bT(e)};wr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ne(188)):(n=Object.keys(n).join(","),Error(Ne(268,n)));return n=TD(e),n=n===null?null:n.stateNode,n};wr.flushSync=function(n){return Vl(n)};wr.hydrate=function(n,e,t){if(!jy(e))throw Error(Ne(200));return zy(null,n,e,!0,t)};wr.hydrateRoot=function(n,e,t){if(!vT(n))throw Error(Ne(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",a=nI;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=tI(e,null,n,1,t!=null?t:null,r,!1,s,a),n[Va]=e.current,sf(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Uy(e)};wr.render=function(n,e,t){if(!jy(e))throw Error(Ne(200));return zy(null,n,e,!1,t)};wr.unmountComponentAtNode=function(n){if(!jy(n))throw Error(Ne(40));return n._reactRootContainer?(Vl(function(){zy(null,null,n,!1,function(){n._reactRootContainer=null,n[Va]=null})}),!0):!1};wr.unstable_batchedUpdates=hT;wr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!jy(t))throw Error(Ne(200));if(n==null||n._reactInternals===void 0)throw Error(Ne(38));return zy(n,e,t,!1,i)};wr.version="18.2.0-next-9e3b772b8-20220608";function iI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iI)}catch(n){console.error(n)}}iI(),tD.exports=wr;var wT=tD.exports;const t8=bi(wT);var rI,cC=wT;rI=cC.createRoot,cC.hydrateRoot;function dx(n,e){return dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},dx(n,e)}function Bo(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,dx(n,e)}var sI={exports:{}},n8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",i8=n8,r8=i8;function aI(){}function oI(){}oI.resetWarningCache=aI;var s8=function(){function n(i,r,s,a,o,l){if(l!==r8){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:oI,resetWarningCache:aI};return t.PropTypes=t,t};sI.exports=s8();var a8=sI.exports;const uC=bi(a8);function Sn(){return Sn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Sn.apply(this,arguments)}const o8=Object.freeze(Object.defineProperty({__proto__:null,default:Sn},Symbol.toStringTag,{value:"Module"}));function Wp(n){return n.charAt(0)==="/"}function rv(n,e){for(var t=e,i=t+1,r=n.length;i<r;t+=1,i+=1)n[t]=n[i];n.pop()}function l8(n,e){e===void 0&&(e="");var t=n&&n.split("/")||[],i=e&&e.split("/")||[],r=n&&Wp(n),s=e&&Wp(e),a=r||s;if(n&&Wp(n)?i=t:t.length&&(i.pop(),i=i.concat(t)),!i.length)return"/";var o;if(i.length){var l=i[i.length-1];o=l==="."||l===".."||l===""}else o=!1;for(var c=0,u=i.length;u>=0;u--){var d=i[u];d==="."?rv(i,u):d===".."?(rv(i,u),c++):c&&(rv(i,u),c--)}if(!a)for(;c--;c)i.unshift("..");a&&i[0]!==""&&(!i[0]||!Wp(i[0]))&&i.unshift("");var h=i.join("/");return o&&h.substr(-1)!=="/"&&(h+="/"),h}function dC(n){return n.valueOf?n.valueOf():Object.prototype.valueOf.call(n)}function Lm(n,e){if(n===e)return!0;if(n==null||e==null)return!1;if(Array.isArray(n))return Array.isArray(e)&&n.length===e.length&&n.every(function(r,s){return Lm(r,e[s])});if(typeof n=="object"||typeof e=="object"){var t=dC(n),i=dC(e);return t!==n||i!==e?Lm(t,i):Object.keys(Object.assign({},n,e)).every(function(r){return Lm(n[r],e[r])})}return!1}var c8=!0,sv="Invariant failed";function sc(n,e){if(!n){if(c8)throw new Error(sv);var t=typeof e=="function"?e():e,i=t?"".concat(sv,": ").concat(t):sv;throw new Error(i)}}function $h(n){return n.charAt(0)==="/"?n:"/"+n}function hC(n){return n.charAt(0)==="/"?n.substr(1):n}function u8(n,e){return n.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(n.charAt(e.length))!==-1}function lI(n,e){return u8(n,e)?n.substr(e.length):n}function cI(n){return n.charAt(n.length-1)==="/"?n.slice(0,-1):n}function d8(n){var e=n||"/",t="",i="",r=e.indexOf("#");r!==-1&&(i=e.substr(r),e=e.substr(0,r));var s=e.indexOf("?");return s!==-1&&(t=e.substr(s),e=e.substr(0,s)),{pathname:e,search:t==="?"?"":t,hash:i==="#"?"":i}}function Or(n){var e=n.pathname,t=n.search,i=n.hash,r=e||"/";return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function Ki(n,e,t,i){var r;typeof n=="string"?(r=d8(n),r.state=e):(r=Sn({},n),r.pathname===void 0&&(r.pathname=""),r.search?r.search.charAt(0)!=="?"&&(r.search="?"+r.search):r.search="",r.hash?r.hash.charAt(0)!=="#"&&(r.hash="#"+r.hash):r.hash="",e!==void 0&&r.state===void 0&&(r.state=e));try{r.pathname=decodeURI(r.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return t&&(r.key=t),i?r.pathname?r.pathname.charAt(0)!=="/"&&(r.pathname=l8(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r}function h8(n,e){return n.pathname===e.pathname&&n.search===e.search&&n.hash===e.hash&&n.key===e.key&&Lm(n.state,e.state)}function xT(){var n=null;function e(a){return n=a,function(){n===a&&(n=null)}}function t(a,o,l,c){if(n!=null){var u=typeof n=="function"?n(a,o):n;typeof u=="string"?typeof l=="function"?l(u,c):c(!0):c(u!==!1)}else c(!0)}var i=[];function r(a){var o=!0;function l(){o&&a.apply(void 0,arguments)}return i.push(l),function(){o=!1,i=i.filter(function(c){return c!==l})}}function s(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];i.forEach(function(c){return c.apply(void 0,o)})}return{setPrompt:e,confirmTransitionTo:t,appendListener:r,notifyListeners:s}}var uI=!!(typeof window<"u"&&window.document&&window.document.createElement);function dI(n,e){e(window.confirm(n))}function f8(){var n=window.navigator.userAgent;return(n.indexOf("Android 2.")!==-1||n.indexOf("Android 4.0")!==-1)&&n.indexOf("Mobile Safari")!==-1&&n.indexOf("Chrome")===-1&&n.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function p8(){return window.navigator.userAgent.indexOf("Trident")===-1}function m8(){return window.navigator.userAgent.indexOf("Firefox")===-1}function g8(n){return n.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var fC="popstate",pC="hashchange";function mC(){try{return window.history.state||{}}catch(n){return{}}}function y8(n){n===void 0&&(n={}),uI||sc(!1);var e=window.history,t=f8(),i=!p8(),r=n,s=r.forceRefresh,a=s===void 0?!1:s,o=r.getUserConfirmation,l=o===void 0?dI:o,c=r.keyLength,u=c===void 0?6:c,d=n.basename?cI($h(n.basename)):"";function h(he){var ee=he||{},le=ee.key,Te=ee.state,$e=window.location,qe=$e.pathname,Ve=$e.search,Je=$e.hash,it=qe+Ve+Je;return d&&(it=lI(it,d)),Ki(it,Te,le)}function f(){return Math.random().toString(36).substr(2,u)}var m=xT();function g(he){Sn(de,he),de.length=e.length,m.notifyListeners(de.location,de.action)}function _(he){g8(he)||T(h(he.state))}function v(){T(h(mC()))}var y=!1;function T(he){if(y)y=!1,g();else{var ee="POP";m.confirmTransitionTo(he,ee,l,function(le){le?g({action:ee,location:he}):N(he)})}}function N(he){var ee=de.location,le=F.indexOf(ee.key);le===-1&&(le=0);var Te=F.indexOf(he.key);Te===-1&&(Te=0);var $e=le-Te;$e&&(y=!0,Z($e))}var P=h(mC()),F=[P.key];function $(he){return d+Or(he)}function B(he,ee){var le="PUSH",Te=Ki(he,ee,f(),de.location);m.confirmTransitionTo(Te,le,l,function($e){if($e){var qe=$(Te),Ve=Te.key,Je=Te.state;if(t)if(e.pushState({key:Ve,state:Je},null,qe),a)window.location.href=qe;else{var it=F.indexOf(de.location.key),qt=F.slice(0,it+1);qt.push(Te.key),F=qt,g({action:le,location:Te})}else window.location.href=qe}})}function M(he,ee){var le="REPLACE",Te=Ki(he,ee,f(),de.location);m.confirmTransitionTo(Te,le,l,function($e){if($e){var qe=$(Te),Ve=Te.key,Je=Te.state;if(t)if(e.replaceState({key:Ve,state:Je},null,qe),a)window.location.replace(qe);else{var it=F.indexOf(de.location.key);it!==-1&&(F[it]=Te.key),g({action:le,location:Te})}else window.location.replace(qe)}})}function Z(he){e.go(he)}function O(){Z(-1)}function K(){Z(1)}var z=0;function te(he){z+=he,z===1&&he===1?(window.addEventListener(fC,_),i&&window.addEventListener(pC,v)):z===0&&(window.removeEventListener(fC,_),i&&window.removeEventListener(pC,v))}var ue=!1;function ye(he){he===void 0&&(he=!1);var ee=m.setPrompt(he);return ue||(te(1),ue=!0),function(){return ue&&(ue=!1,te(-1)),ee()}}function be(he){var ee=m.appendListener(he);return te(1),function(){te(-1),ee()}}var de={length:e.length,action:"POP",location:P,createHref:$,push:B,replace:M,go:Z,goBack:O,goForward:K,block:ye,listen:be};return de}var gC="hashchange",b8={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+hC(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:hC,decodePath:$h},slash:{encodePath:$h,decodePath:$h}};function hI(n){var e=n.indexOf("#");return e===-1?n:n.slice(0,e)}function Yd(){var n=window.location.href,e=n.indexOf("#");return e===-1?"":n.substring(e+1)}function v8(n){window.location.hash=n}function av(n){window.location.replace(hI(window.location.href)+"#"+n)}function w8(n){n===void 0&&(n={}),uI||sc(!1);var e=window.history;m8();var t=n,i=t.getUserConfirmation,r=i===void 0?dI:i,s=t.hashType,a=s===void 0?"slash":s,o=n.basename?cI($h(n.basename)):"",l=b8[a],c=l.encodePath,u=l.decodePath;function d(){var ee=u(Yd());return o&&(ee=lI(ee,o)),Ki(ee)}var h=xT();function f(ee){Sn(he,ee),he.length=e.length,h.notifyListeners(he.location,he.action)}var m=!1,g=null;function _(ee,le){return ee.pathname===le.pathname&&ee.search===le.search&&ee.hash===le.hash}function v(){var ee=Yd(),le=c(ee);if(ee!==le)av(le);else{var Te=d(),$e=he.location;if(!m&&_($e,Te)||g===Or(Te))return;g=null,y(Te)}}function y(ee){if(m)m=!1,f();else{var le="POP";h.confirmTransitionTo(ee,le,r,function(Te){Te?f({action:le,location:ee}):T(ee)})}}function T(ee){var le=he.location,Te=$.lastIndexOf(Or(le));Te===-1&&(Te=0);var $e=$.lastIndexOf(Or(ee));$e===-1&&($e=0);var qe=Te-$e;qe&&(m=!0,O(qe))}var N=Yd(),P=c(N);N!==P&&av(P);var F=d(),$=[Or(F)];function B(ee){var le=document.querySelector("base"),Te="";return le&&le.getAttribute("href")&&(Te=hI(window.location.href)),Te+"#"+c(o+Or(ee))}function M(ee,le){var Te="PUSH",$e=Ki(ee,void 0,void 0,he.location);h.confirmTransitionTo($e,Te,r,function(qe){if(qe){var Ve=Or($e),Je=c(o+Ve),it=Yd()!==Je;if(it){g=Ve,v8(Je);var qt=$.lastIndexOf(Or(he.location)),Jt=$.slice(0,qt+1);Jt.push(Ve),$=Jt,f({action:Te,location:$e})}else f()}})}function Z(ee,le){var Te="REPLACE",$e=Ki(ee,void 0,void 0,he.location);h.confirmTransitionTo($e,Te,r,function(qe){if(qe){var Ve=Or($e),Je=c(o+Ve),it=Yd()!==Je;it&&(g=Ve,av(Je));var qt=$.indexOf(Or(he.location));qt!==-1&&($[qt]=Ve),f({action:Te,location:$e})}})}function O(ee){e.go(ee)}function K(){O(-1)}function z(){O(1)}var te=0;function ue(ee){te+=ee,te===1&&ee===1?window.addEventListener(gC,v):te===0&&window.removeEventListener(gC,v)}var ye=!1;function be(ee){ee===void 0&&(ee=!1);var le=h.setPrompt(ee);return ye||(ue(1),ye=!0),function(){return ye&&(ye=!1,ue(-1)),le()}}function de(ee){var le=h.appendListener(ee);return ue(1),function(){ue(-1),le()}}var he={length:e.length,action:"POP",location:F,createHref:B,push:M,replace:Z,go:O,goBack:K,goForward:z,block:be,listen:de};return he}function yC(n,e,t){return Math.min(Math.max(n,e),t)}function x8(n){n===void 0&&(n={});var e=n,t=e.getUserConfirmation,i=e.initialEntries,r=i===void 0?["/"]:i,s=e.initialIndex,a=s===void 0?0:s,o=e.keyLength,l=o===void 0?6:o,c=xT();function u(B){Sn($,B),$.length=$.entries.length,c.notifyListeners($.location,$.action)}function d(){return Math.random().toString(36).substr(2,l)}var h=yC(a,0,r.length-1),f=r.map(function(B){return typeof B=="string"?Ki(B,void 0,d()):Ki(B,void 0,B.key||d())}),m=Or;function g(B,M){var Z="PUSH",O=Ki(B,M,d(),$.location);c.confirmTransitionTo(O,Z,t,function(K){if(K){var z=$.index,te=z+1,ue=$.entries.slice(0);ue.length>te?ue.splice(te,ue.length-te,O):ue.push(O),u({action:Z,location:O,index:te,entries:ue})}})}function _(B,M){var Z="REPLACE",O=Ki(B,M,d(),$.location);c.confirmTransitionTo(O,Z,t,function(K){K&&($.entries[$.index]=O,u({action:Z,location:O}))})}function v(B){var M=yC($.index+B,0,$.entries.length-1),Z="POP",O=$.entries[M];c.confirmTransitionTo(O,Z,t,function(K){K?u({action:Z,location:O,index:M}):u()})}function y(){v(-1)}function T(){v(1)}function N(B){var M=$.index+B;return M>=0&&M<$.entries.length}function P(B){return B===void 0&&(B=!1),c.setPrompt(B)}function F(B){return c.appendListener(B)}var $={length:f.length,action:"POP",location:f[h],index:h,entries:f,createHref:m,push:g,replace:_,go:v,goBack:y,goForward:T,canGo:N,block:P,listen:F};return $}var ud={exports:{}},E8=Array.isArray||function(n){return Object.prototype.toString.call(n)=="[object Array]"},Sg=E8;ud.exports=mI;ud.exports.parse=ET;ud.exports.compile=S8;ud.exports.tokensToFunction=fI;ud.exports.tokensToRegExp=pI;var T8=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function ET(n,e){for(var t=[],i=0,r=0,s="",a=e&&e.delimiter||"/",o;(o=T8.exec(n))!=null;){var l=o[0],c=o[1],u=o.index;if(s+=n.slice(r,u),r=u+l.length,c){s+=c[1];continue}var d=n[r],h=o[2],f=o[3],m=o[4],g=o[5],_=o[6],v=o[7];s&&(t.push(s),s="");var y=h!=null&&d!=null&&d!==h,T=_==="+"||_==="*",N=_==="?"||_==="*",P=o[2]||a,F=m||g;t.push({name:f||i++,prefix:h||"",delimiter:P,optional:N,repeat:T,partial:y,asterisk:!!v,pattern:F?A8(F):v?".*":"[^"+$m(P)+"]+?"})}return r<n.length&&(s+=n.substr(r)),s&&t.push(s),t}function S8(n,e){return fI(ET(n,e),e)}function _8(n){return encodeURI(n).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function C8(n){return encodeURI(n).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function fI(n,e){for(var t=new Array(n.length),i=0;i<n.length;i++)typeof n[i]=="object"&&(t[i]=new RegExp("^(?:"+n[i].pattern+")$",ST(e)));return function(r,s){for(var a="",o=r||{},l=s||{},c=l.pretty?_8:encodeURIComponent,u=0;u<n.length;u++){var d=n[u];if(typeof d=="string"){a+=d;continue}var h=o[d.name],f;if(h==null)if(d.optional){d.partial&&(a+=d.prefix);continue}else throw new TypeError('Expected "'+d.name+'" to be defined');if(Sg(h)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(h.length===0){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var m=0;m<h.length;m++){if(f=c(h[m]),!t[u].test(f))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(m===0?d.prefix:d.delimiter)+f}continue}if(f=d.asterisk?C8(h):c(h),!t[u].test(f))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+f+'"');a+=d.prefix+f}return a}}function $m(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function A8(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function TT(n,e){return n.keys=e,n}function ST(n){return n&&n.sensitive?"":"i"}function k8(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var i=0;i<t.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return TT(n,e)}function N8(n,e,t){for(var i=[],r=0;r<n.length;r++)i.push(mI(n[r],e,t).source);var s=new RegExp("(?:"+i.join("|")+")",ST(t));return TT(s,e)}function D8(n,e,t){return pI(ET(n,t),e,t)}function pI(n,e,t){Sg(e)||(t=e||t,e=[]),t=t||{};for(var i=t.strict,r=t.end!==!1,s="",a=0;a<n.length;a++){var o=n[a];if(typeof o=="string")s+=$m(o);else{var l=$m(o.prefix),c="(?:"+o.pattern+")";e.push(o),o.repeat&&(c+="(?:"+l+c+")*"),o.optional?o.partial?c=l+"("+c+")?":c="(?:"+l+"("+c+"))?":c=l+"("+c+")",s+=c}}var u=$m(t.delimiter||"/"),d=s.slice(-u.length)===u;return i||(s=(d?s.slice(0,-u.length):s)+"(?:"+u+"(?=$))?"),r?s+="$":s+=i&&d?"":"(?="+u+"|$)",TT(new RegExp("^"+s,ST(t)),e)}function mI(n,e,t){return Sg(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?k8(n,e):Sg(n)?N8(n,e,t):D8(n,e,t)}var P8=ud.exports;const gI=bi(P8);var Ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=typeof Symbol=="function"&&Symbol.for,_T=Qn?Symbol.for("react.element"):60103,CT=Qn?Symbol.for("react.portal"):60106,Vy=Qn?Symbol.for("react.fragment"):60107,Hy=Qn?Symbol.for("react.strict_mode"):60108,Wy=Qn?Symbol.for("react.profiler"):60114,Gy=Qn?Symbol.for("react.provider"):60109,Qy=Qn?Symbol.for("react.context"):60110,AT=Qn?Symbol.for("react.async_mode"):60111,Ky=Qn?Symbol.for("react.concurrent_mode"):60111,Yy=Qn?Symbol.for("react.forward_ref"):60112,Xy=Qn?Symbol.for("react.suspense"):60113,I8=Qn?Symbol.for("react.suspense_list"):60120,Jy=Qn?Symbol.for("react.memo"):60115,Zy=Qn?Symbol.for("react.lazy"):60116,R8=Qn?Symbol.for("react.block"):60121,O8=Qn?Symbol.for("react.fundamental"):60117,M8=Qn?Symbol.for("react.responder"):60118,L8=Qn?Symbol.for("react.scope"):60119;function Er(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case _T:switch(n=n.type,n){case AT:case Ky:case Vy:case Wy:case Hy:case Xy:return n;default:switch(n=n&&n.$$typeof,n){case Qy:case Yy:case Zy:case Jy:case Gy:return n;default:return e}}case CT:return e}}}function yI(n){return Er(n)===Ky}Ft.AsyncMode=AT;Ft.ConcurrentMode=Ky;Ft.ContextConsumer=Qy;Ft.ContextProvider=Gy;Ft.Element=_T;Ft.ForwardRef=Yy;Ft.Fragment=Vy;Ft.Lazy=Zy;Ft.Memo=Jy;Ft.Portal=CT;Ft.Profiler=Wy;Ft.StrictMode=Hy;Ft.Suspense=Xy;Ft.isAsyncMode=function(n){return yI(n)||Er(n)===AT};Ft.isConcurrentMode=yI;Ft.isContextConsumer=function(n){return Er(n)===Qy};Ft.isContextProvider=function(n){return Er(n)===Gy};Ft.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===_T};Ft.isForwardRef=function(n){return Er(n)===Yy};Ft.isFragment=function(n){return Er(n)===Vy};Ft.isLazy=function(n){return Er(n)===Zy};Ft.isMemo=function(n){return Er(n)===Jy};Ft.isPortal=function(n){return Er(n)===CT};Ft.isProfiler=function(n){return Er(n)===Wy};Ft.isStrictMode=function(n){return Er(n)===Hy};Ft.isSuspense=function(n){return Er(n)===Xy};Ft.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Vy||n===Ky||n===Wy||n===Hy||n===Xy||n===I8||typeof n=="object"&&n!==null&&(n.$$typeof===Zy||n.$$typeof===Jy||n.$$typeof===Gy||n.$$typeof===Qy||n.$$typeof===Yy||n.$$typeof===O8||n.$$typeof===M8||n.$$typeof===L8||n.$$typeof===R8)};Ft.typeOf=Er;function bI(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var vI={exports:{}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kn=typeof Symbol=="function"&&Symbol.for,kT=Kn?Symbol.for("react.element"):60103,NT=Kn?Symbol.for("react.portal"):60106,e0=Kn?Symbol.for("react.fragment"):60107,t0=Kn?Symbol.for("react.strict_mode"):60108,n0=Kn?Symbol.for("react.profiler"):60114,i0=Kn?Symbol.for("react.provider"):60109,r0=Kn?Symbol.for("react.context"):60110,DT=Kn?Symbol.for("react.async_mode"):60111,s0=Kn?Symbol.for("react.concurrent_mode"):60111,a0=Kn?Symbol.for("react.forward_ref"):60112,o0=Kn?Symbol.for("react.suspense"):60113,$8=Kn?Symbol.for("react.suspense_list"):60120,l0=Kn?Symbol.for("react.memo"):60115,c0=Kn?Symbol.for("react.lazy"):60116,B8=Kn?Symbol.for("react.block"):60121,F8=Kn?Symbol.for("react.fundamental"):60117,q8=Kn?Symbol.for("react.responder"):60118,U8=Kn?Symbol.for("react.scope"):60119;function Tr(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case kT:switch(n=n.type,n){case DT:case s0:case e0:case n0:case t0:case o0:return n;default:switch(n=n&&n.$$typeof,n){case r0:case a0:case c0:case l0:case i0:return n;default:return e}}case NT:return e}}}function wI(n){return Tr(n)===s0}$t.AsyncMode=DT;$t.ConcurrentMode=s0;$t.ContextConsumer=r0;$t.ContextProvider=i0;$t.Element=kT;$t.ForwardRef=a0;$t.Fragment=e0;$t.Lazy=c0;$t.Memo=l0;$t.Portal=NT;$t.Profiler=n0;$t.StrictMode=t0;$t.Suspense=o0;$t.isAsyncMode=function(n){return wI(n)||Tr(n)===DT};$t.isConcurrentMode=wI;$t.isContextConsumer=function(n){return Tr(n)===r0};$t.isContextProvider=function(n){return Tr(n)===i0};$t.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===kT};$t.isForwardRef=function(n){return Tr(n)===a0};$t.isFragment=function(n){return Tr(n)===e0};$t.isLazy=function(n){return Tr(n)===c0};$t.isMemo=function(n){return Tr(n)===l0};$t.isPortal=function(n){return Tr(n)===NT};$t.isProfiler=function(n){return Tr(n)===n0};$t.isStrictMode=function(n){return Tr(n)===t0};$t.isSuspense=function(n){return Tr(n)===o0};$t.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===e0||n===s0||n===n0||n===t0||n===o0||n===$8||typeof n=="object"&&n!==null&&(n.$$typeof===c0||n.$$typeof===l0||n.$$typeof===i0||n.$$typeof===r0||n.$$typeof===a0||n.$$typeof===F8||n.$$typeof===q8||n.$$typeof===U8||n.$$typeof===B8)};$t.typeOf=Tr;vI.exports=$t;var j8=vI.exports,PT=j8,z8={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},V8={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},H8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xI={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},IT={};IT[PT.ForwardRef]=H8;IT[PT.Memo]=xI;function bC(n){return PT.isMemo(n)?xI:IT[n.$$typeof]||z8}var W8=Object.defineProperty,G8=Object.getOwnPropertyNames,vC=Object.getOwnPropertySymbols,Q8=Object.getOwnPropertyDescriptor,K8=Object.getPrototypeOf,wC=Object.prototype;function EI(n,e,t){if(typeof e!="string"){if(wC){var i=K8(e);i&&i!==wC&&EI(n,i,t)}var r=G8(e);vC&&(r=r.concat(vC(e)));for(var s=bC(n),a=bC(e),o=0;o<r.length;++o){var l=r[o];if(!V8[l]&&!(t&&t[l])&&!(a&&a[l])&&!(s&&s[l])){var c=Q8(e,l);try{W8(n,l,c)}catch(u){}}}}return n}var Y8=EI;const X8=bi(Y8);var ov=1073741823,xC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function J8(){var n="__global_unique_id__";return xC[n]=(xC[n]||0)+1}function Z8(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function eF(n){var e=[];return{on:function(i){e.push(i)},off:function(i){e=e.filter(function(r){return r!==i})},get:function(){return n},set:function(i,r){n=i,e.forEach(function(s){return s(n,r)})}}}function tF(n){return Array.isArray(n)?n[0]:n}function nF(n,e){var t,i,r="__create-react-context-"+J8()+"__",s=function(o){Bo(l,o);function l(){for(var u,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return u=o.call.apply(o,[this].concat(h))||this,u.emitter=eF(u.props.value),u}var c=l.prototype;return c.getChildContext=function(){var d;return d={},d[r]=this.emitter,d},c.componentWillReceiveProps=function(d){if(this.props.value!==d.value){var h=this.props.value,f=d.value,m;Z8(h,f)?m=0:(m=typeof e=="function"?e(h,f):ov,m|=0,m!==0&&this.emitter.set(d.value,m))}},c.render=function(){return this.props.children},l}(fe.Component);s.childContextTypes=(t={},t[r]=uC.object.isRequired,t);var a=function(o){Bo(l,o);function l(){for(var u,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return u=o.call.apply(o,[this].concat(h))||this,u.observedBits=void 0,u.state={value:u.getValue()},u.onUpdate=function(m,g){var _=u.observedBits|0;_&g&&u.setState({value:u.getValue()})},u}var c=l.prototype;return c.componentWillReceiveProps=function(d){var h=d.observedBits;this.observedBits=h==null?ov:h},c.componentDidMount=function(){this.context[r]&&this.context[r].on(this.onUpdate);var d=this.props.observedBits;this.observedBits=d==null?ov:d},c.componentWillUnmount=function(){this.context[r]&&this.context[r].off(this.onUpdate)},c.getValue=function(){return this.context[r]?this.context[r].get():n},c.render=function(){return tF(this.props.children)(this.state.value)},l}(fe.Component);return a.contextTypes=(i={},i[r]=uC.object,i),{Provider:s,Consumer:a}}var iF=fe.createContext||nF,TI=function(e){var t=iF();return t.displayName=e,t},rF=TI("Router-History"),qu=TI("Router"),Ff=function(n){Bo(e,n),e.computeRootMatch=function(r){return{path:"/",url:"/",params:{},isExact:r==="/"}};function e(i){var r;return r=n.call(this,i)||this,r.state={location:i.history.location},r._isMounted=!1,r._pendingLocation=null,i.staticContext||(r.unlisten=i.history.listen(function(s){r._pendingLocation=s})),r}var t=e.prototype;return t.componentDidMount=function(){var r=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(s){r._isMounted&&r.setState({location:s})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},t.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},t.render=function(){return fe.createElement(qu.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},fe.createElement(rF.Provider,{children:this.props.children||null,value:this.props.history}))},e}(fe.Component);fe.Component;var sF=function(n){Bo(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},t.componentDidUpdate=function(r){this.props.onUpdate&&this.props.onUpdate.call(this,this,r)},t.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},t.render=function(){return null},e}(fe.Component),lv={},aF=1e4,EC=0;function oF(n){if(lv[n])return lv[n];var e=gI.compile(n);return EC<aF&&(lv[n]=e,EC++),e}function TC(n,e){return n===void 0&&(n="/"),e===void 0&&(e={}),n==="/"?n:oF(n)(e,{pretty:!0})}function lF(n){var e=n.computedMatch,t=n.to,i=n.push,r=i===void 0?!1:i;return fe.createElement(qu.Consumer,null,function(s){s||sc(!1);var a=s.history,o=s.staticContext,l=r?a.push:a.replace,c=Ki(e?typeof t=="string"?TC(t,e.params):Sn({},t,{pathname:TC(t.pathname,e.params)}):t);return o?(l(c),null):fe.createElement(sF,{onMount:function(){l(c)},onUpdate:function(d,h){var f=Ki(h.to);h8(f,Sn({},c,{key:f.key}))||l(c)},to:t})})}var SC={},cF=1e4,_C=0;function uF(n,e){var t=""+e.end+e.strict+e.sensitive,i=SC[t]||(SC[t]={});if(i[n])return i[n];var r=[],s=gI(n,r,e),a={regexp:s,keys:r};return _C<cF&&(i[n]=a,_C++),a}function Hl(n,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var t=e,i=t.path,r=t.exact,s=r===void 0?!1:r,a=t.strict,o=a===void 0?!1:a,l=t.sensitive,c=l===void 0?!1:l,u=[].concat(i);return u.reduce(function(d,h){if(!h&&h!=="")return null;if(d)return d;var f=uF(h,{end:s,strict:o,sensitive:c}),m=f.regexp,g=f.keys,_=m.exec(n);if(!_)return null;var v=_[0],y=_.slice(1),T=n===v;return s&&!T?null:{path:h,url:h==="/"&&v===""?"/":v,isExact:T,params:g.reduce(function(N,P,F){return N[P.name]=y[F],N},{})}},null)}function dF(n){return fe.Children.count(n)===0}var yh=function(n){Bo(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var r=this;return fe.createElement(qu.Consumer,null,function(s){s||sc(!1);var a=r.props.location||s.location,o=r.props.computedMatch?r.props.computedMatch:r.props.path?Hl(a.pathname,r.props):s.match,l=Sn({},s,{location:a,match:o}),c=r.props,u=c.children,d=c.component,h=c.render;return Array.isArray(u)&&dF(u)&&(u=null),fe.createElement(qu.Provider,{value:l},l.match?u?typeof u=="function"?u(l):u:d?fe.createElement(d,l):h?h(l):null:typeof u=="function"?u(l):null)})},e}(fe.Component);function RT(n){return n.charAt(0)==="/"?n:"/"+n}function hF(n,e){return n?Sn({},e,{pathname:RT(n)+e.pathname}):e}function fF(n,e){if(!n)return e;var t=RT(n);return e.pathname.indexOf(t)!==0?e:Sn({},e,{pathname:e.pathname.substr(t.length)})}function CC(n){return typeof n=="string"?n:Or(n)}function cv(n){return function(){sc(!1)}}function AC(){}fe.Component;fe.Component;function pF(n){var e="withRouter("+(n.displayName||n.name)+")",t=function(r){var s=r.wrappedComponentRef,a=bI(r,["wrappedComponentRef"]);return fe.createElement(qu.Consumer,null,function(o){return o||sc(!1),fe.createElement(n,Sn({},a,o,{ref:s}))})};return t.displayName=e,t.WrappedComponent=n,X8(t,n)}fe.useContext;const mF="modulepreload",gF=function(n){return"/"+n},kC={},ci=function(e,t,i){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=gF(s),s in kC)return;kC[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const d=r[u];if(d.href===s&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(s,'"]').concat(o)))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":mF,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error("Unable to preload CSS for ".concat(s))))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},Vc={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,patchPseudoShadowDom:!1};let Hc,SI,u0,_I=!1,_g=!1,OT=!1,cr=!1,NC=null,hx=!1;const yF={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},bF=n=>{const e=new URL(n,Wn.$resourcesUrl$);return e.origin!==Uf.location.origin?e.href:e.pathname},Wl=(n,e="")=>()=>{},DC="http://www.w3.org/1999/xlink",PC={},vF="http://www.w3.org/2000/svg",wF="http://www.w3.org/1999/xhtml",xF=n=>n!=null,MT=n=>(n=typeof n,n==="object"||n==="function");function EF(n){var e,t,i;return(i=(t=(e=n.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&i!==void 0?i:void 0}const re=(n,e,...t)=>{let i=null,r=null,s=null,a=!1,o=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)i=d[h],Array.isArray(i)?c(i):i!=null&&typeof i!="boolean"&&((a=typeof n!="function"&&!MT(i))&&(i=String(i)),a&&o?l[l.length-1].$text$+=i:l.push(a?Cg(null,i):i),o=a)};if(c(t),e){e.key&&(r=e.key),e.name&&(s=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof n=="function")return n(e===null?{}:e,l,SF);const u=Cg(n,null);return u.$attrs$=e,l.length>0&&(u.$children$=l),u.$key$=r,u.$name$=s,u},Cg=(n,e)=>{const t={$flags$:0,$tag$:n,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},Ct={},TF=n=>n&&n.$tag$===Ct,SF={forEach:(n,e)=>n.map(IC).forEach(e),map:(n,e)=>n.map(IC).map(e).map(_F)},IC=n=>({vattrs:n.$attrs$,vchildren:n.$children$,vkey:n.$key$,vname:n.$name$,vtag:n.$tag$,vtext:n.$text$}),_F=n=>{if(typeof n.vtag=="function"){const t=Object.assign({},n.vattrs);return n.vkey&&(t.key=n.vkey),n.vname&&(t.name=n.vname),re(n.vtag,t,...n.vchildren||[])}const e=Cg(n.vtag,n.vtext);return e.$attrs$=n.vattrs,e.$children$=n.vchildren,e.$key$=n.vkey,e.$name$=n.vname,e},CF=n=>LI.map(e=>e(n)).find(e=>!!e),AF=n=>LI.push(n),kF=n=>dd(n).$modeName$,NF=(n,e)=>n!=null&&!MT(n)?e&4?n==="false"?!1:n===""||!!n:e&2?parseFloat(n):e&1?String(n):n:n,DF=n=>n,Ge=(n,e,t)=>{const i=DF(n);return{emit:r=>PF(i,e,{bubbles:!!(t&4),composed:!!(t&2),cancelable:!!(t&1),detail:r})}},PF=(n,e,t)=>{const i=Wn.ce(e,t);return n.dispatchEvent(i),i},RC=new WeakMap,IF=(n,e,t)=>{let i=kg.get(n);rq&&t?(i=i||new CSSStyleSheet,typeof i=="string"?i=e:i.replaceSync(e)):i=e,kg.set(n,i)},RF=(n,e,t)=>{var i;const r=CI(e,t),s=kg.get(r);if(n=n.nodeType===11?n:Es,s)if(typeof s=="string"){n=n.head||n;let a=RC.get(n),o;if(a||RC.set(n,a=new Set),!a.has(r)){{o=Es.createElement("style"),o.innerHTML=s;const l=(i=Wn.$nonce$)!==null&&i!==void 0?i:EF(Es);l!=null&&o.setAttribute("nonce",l),n.insertBefore(o,n.querySelector("link"))}a&&a.add(r)}}else n.adoptedStyleSheets.includes(s)||(n.adoptedStyleSheets=[...n.adoptedStyleSheets,s]);return r},OF=n=>{const e=n.$cmpMeta$,t=n.$hostElement$,i=e.$flags$,r=Wl("attachStyles",e.$tagName$),s=RF(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,n.$modeName$);i&10&&(t["s-sc"]=s,t.classList.add(s+"-h"),i&2&&t.classList.add(s+"-s")),r()},CI=(n,e)=>"sc-"+(e&&n.$flags$&32?n.$tagName$+"-"+e:n.$tagName$),OC=(n,e,t,i,r,s)=>{if(t!==i){let a=FC(n,e),o=e.toLowerCase();if(e==="class"){const l=n.classList,c=MC(t),u=MC(i);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in t)(!i||i[l]==null)&&(l.includes("-")?n.style.removeProperty(l):n.style[l]="");for(const l in i)(!t||i[l]!==t[l])&&(l.includes("-")?n.style.setProperty(l,i[l]):n.style[l]=i[l])}else if(e!=="key")if(e==="ref")i&&i(n);else if(!n.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):FC(Uf,o)?e=o.slice(2):e=o[2]+e.slice(3),t&&Wn.rel(n,e,t,!1),i&&Wn.ael(n,e,i,!1);else{const l=MT(i);if((a||l&&i!==null)&&!r)try{if(n.tagName.includes("-"))n[e]=i;else{const u=i==null?"":i;e==="list"?a=!1:(t==null||n[e]!=u)&&(n[e]=u)}}catch(u){}let c=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,c=!0),i==null||i===!1?(i!==!1||n.getAttribute(e)==="")&&(c?n.removeAttributeNS(DC,e):n.removeAttribute(e)):(!a||s&4||r)&&!l&&(i=i===!0?"":i,c?n.setAttributeNS(DC,e,i):n.setAttribute(e,i))}}},MF=/\s/,MC=n=>n?n.split(MF):[],AI=(n,e,t,i)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=n&&n.$attrs$||PC,a=e.$attrs$||PC;for(i in s)i in a||OC(r,i,s[i],void 0,t,e.$flags$);for(i in a)OC(r,i,s[i],a[i],t,e.$flags$)},Ag=(n,e,t,i)=>{const r=e.$children$[t];let s=0,a,o,l;if(_I||(OT=!0,r.$tag$==="slot"&&(Hc&&i.classList.add(Hc+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=Es.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=Es.createTextNode("");else{if(cr||(cr=r.$tag$==="svg"),a=r.$elm$=Es.createElementNS(cr?vF:wF,r.$flags$&2?"slot-fb":r.$tag$),cr&&r.$tag$==="foreignObject"&&(cr=!1),AI(null,r,cr),xF(Hc)&&a["s-si"]!==Hc&&a.classList.add(a["s-si"]=Hc),r.$children$)for(s=0;s<r.$children$.length;++s)o=Ag(n,r,s,a),o&&a.appendChild(o);r.$tag$==="svg"?cr=!1:a.tagName==="foreignObject"&&(cr=!0)}return a["s-hn"]=u0,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=SI,a["s-sn"]=r.$name$||"",l=n&&n.$children$&&n.$children$[t],l&&l.$tag$===r.$tag$&&n.$elm$&&pf(n.$elm$,!1)),a},pf=(n,e)=>{Wn.$flags$|=1;const t=n.childNodes;for(let i=t.length-1;i>=0;i--){const r=t[i];r["s-hn"]!==u0&&r["s-ol"]&&(DI(r).insertBefore(r,LT(r)),r["s-ol"].remove(),r["s-ol"]=void 0,OT=!0),e&&pf(r,e)}Wn.$flags$&=-2},kI=(n,e,t,i,r,s)=>{let a=n["s-cr"]&&n["s-cr"].parentNode||n,o;for(a.shadowRoot&&a.tagName===u0&&(a=a.shadowRoot);r<=s;++r)i[r]&&(o=Ag(null,t,r,n),o&&(i[r].$elm$=o,a.insertBefore(o,LT(e))))},NI=(n,e,t)=>{for(let i=e;i<=t;++i){const r=n[i];if(r){const s=r.$elm$;RI(r),s&&(_g=!0,s["s-ol"]?s["s-ol"].remove():pf(s,!0),s.remove())}}},LF=(n,e,t,i)=>{let r=0,s=0,a=0,o=0,l=e.length-1,c=e[0],u=e[l],d=i.length-1,h=i[0],f=i[d],m,g;for(;r<=l&&s<=d;)if(c==null)c=e[++r];else if(u==null)u=e[--l];else if(h==null)h=i[++s];else if(f==null)f=i[--d];else if(Gp(c,h))Wc(c,h),c=e[++r],h=i[++s];else if(Gp(u,f))Wc(u,f),u=e[--l],f=i[--d];else if(Gp(c,f))(c.$tag$==="slot"||f.$tag$==="slot")&&pf(c.$elm$.parentNode,!1),Wc(c,f),n.insertBefore(c.$elm$,u.$elm$.nextSibling),c=e[++r],f=i[--d];else if(Gp(u,h))(c.$tag$==="slot"||f.$tag$==="slot")&&pf(u.$elm$.parentNode,!1),Wc(u,h),n.insertBefore(u.$elm$,c.$elm$),u=e[--l],h=i[++s];else{for(a=-1,o=r;o<=l;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===h.$key$){a=o;break}a>=0?(g=e[a],g.$tag$!==h.$tag$?m=Ag(e&&e[s],t,a,n):(Wc(g,h),e[a]=void 0,m=g.$elm$),h=i[++s]):(m=Ag(e&&e[s],t,s,n),h=i[++s]),m&&DI(c.$elm$).insertBefore(m,LT(c.$elm$))}r>l?kI(n,i[d+1]==null?null:i[d+1].$elm$,t,i,s,d):s>d&&NI(e,r,l)},Gp=(n,e)=>n.$tag$===e.$tag$?n.$tag$==="slot"?n.$name$===e.$name$:n.$key$===e.$key$:!1,LT=n=>n&&n["s-ol"]||n,DI=n=>(n["s-ol"]?n["s-ol"]:n).parentNode,Wc=(n,e)=>{const t=e.$elm$=n.$elm$,i=n.$children$,r=e.$children$,s=e.$tag$,a=e.$text$;let o;a===null?(cr=s==="svg"?!0:s==="foreignObject"?!1:cr,s==="slot"||AI(n,e,cr),i!==null&&r!==null?LF(t,i,e,r):r!==null?(n.$text$!==null&&(t.textContent=""),kI(t,null,e,r,0,r.length-1)):i!==null&&NI(i,0,i.length-1),cr&&s==="svg"&&(cr=!1)):(o=t["s-cr"])?o.parentNode.textContent=a:n.$text$!==a&&(t.data=a)},PI=n=>{const e=n.childNodes;let t,i,r,s,a,o;for(i=0,r=e.length;i<r;i++)if(t=e[i],t.nodeType===1){if(t["s-sr"]){for(a=t["s-sn"],t.hidden=!1,s=0;s<r;s++)if(o=e[s].nodeType,e[s]["s-hn"]!==t["s-hn"]||a!==""){if(o===1&&a===e[s].getAttribute("slot")){t.hidden=!0;break}}else if(o===1||o===3&&e[s].textContent.trim()!==""){t.hidden=!0;break}}PI(t)}},ps=[],II=n=>{let e,t,i,r,s,a,o=0;const l=n.childNodes,c=l.length;for(;o<c;o++){if(e=l[o],e["s-sr"]&&(t=e["s-cr"])&&t.parentNode)for(i=t.parentNode.childNodes,r=e["s-sn"],a=i.length-1;a>=0;a--)t=i[a],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==e["s-hn"]&&(LC(t,r)?(s=ps.find(u=>u.$nodeToRelocate$===t),_g=!0,t["s-sn"]=t["s-sn"]||r,s?s.$slotRefNode$=e:ps.push({$slotRefNode$:e,$nodeToRelocate$:t}),t["s-sr"]&&ps.map(u=>{LC(u.$nodeToRelocate$,t["s-sn"])&&(s=ps.find(d=>d.$nodeToRelocate$===t),s&&!u.$slotRefNode$&&(u.$slotRefNode$=s.$slotRefNode$))})):ps.some(u=>u.$nodeToRelocate$===t)||ps.push({$nodeToRelocate$:t}));e.nodeType===1&&II(e)}},LC=(n,e)=>n.nodeType===1?n.getAttribute("slot")===null&&e===""||n.getAttribute("slot")===e:n["s-sn"]===e?!0:e==="",RI=n=>{n.$attrs$&&n.$attrs$.ref&&n.$attrs$.ref(null),n.$children$&&n.$children$.map(RI)},$F=(n,e,t=!1)=>{const i=n.$hostElement$,r=n.$cmpMeta$,s=n.$vnode$||Cg(null,null),a=TF(e)?e:re(null,null,e);if(u0=i.tagName,r.$attrsToReflect$&&(a.$attrs$=a.$attrs$||{},r.$attrsToReflect$.map(([o,l])=>a.$attrs$[l]=i[o])),t&&a.$attrs$)for(const o of Object.keys(a.$attrs$))i.hasAttribute(o)&&!["key","ref","style","class"].includes(o)&&(a.$attrs$[o]=i[o]);a.$tag$=null,a.$flags$|=4,n.$vnode$=a,a.$elm$=s.$elm$=i.shadowRoot||i,Hc=i["s-sc"],SI=i["s-cr"],_I=(r.$flags$&1)!==0,_g=!1,Wc(s,a);{if(Wn.$flags$|=1,OT){II(a.$elm$);let o,l,c,u,d,h,f=0;for(;f<ps.length;f++)o=ps[f],l=o.$nodeToRelocate$,l["s-ol"]||(c=Es.createTextNode(""),c["s-nr"]=l,l.parentNode.insertBefore(l["s-ol"]=c,l));for(f=0;f<ps.length;f++)if(o=ps[f],l=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,d=o.$slotRefNode$.nextSibling,c=l["s-ol"];c=c.previousSibling;)if(h=c["s-nr"],h&&h["s-sn"]===l["s-sn"]&&u===h.parentNode&&(h=h.nextSibling,!h||!h["s-nr"])){d=h;break}(!d&&u!==l.parentNode||l.nextSibling!==d)&&l!==d&&(!l["s-hn"]&&l["s-ol"]&&(l["s-hn"]=l["s-ol"].parentNode.nodeName),u.insertBefore(l,d))}else l.nodeType===1&&(l.hidden=!0)}_g&&PI(a.$elm$),Wn.$flags$&=-2,ps.length=0}},BF=(n,e)=>{},$T=(n,e)=>(n.$flags$|=16,BF(n,n.$ancestorComponent$),Qr(()=>FF(n,e))),FF=(n,e)=>{const t=n.$hostElement$,i=Wl("scheduleUpdate",n.$cmpMeta$.$tagName$),r=t;let s;return e?s=wu(r,"componentWillLoad"):s=wu(r,"componentWillUpdate"),s=$C(s,()=>wu(r,"componentWillRender")),i(),$C(s,()=>UF(n,r,e))},$C=(n,e)=>qF(n)?n.then(e):e(),qF=n=>n instanceof Promise||n&&n.then&&typeof n.then=="function",UF=async(n,e,t)=>{const i=n.$hostElement$,r=Wl("update",n.$cmpMeta$.$tagName$);i["s-rc"],t&&OF(n);const s=Wl("render",n.$cmpMeta$.$tagName$);jF(n,e,i,t),s(),r(),zF(n)},jF=(n,e,t,i)=>{try{NC=e,e=e.render&&e.render(),n.$flags$&=-17,n.$flags$|=2,(Vc.hasRenderFn||Vc.reflect)&&(Vc.vdomRender||Vc.reflect)&&(Vc.hydrateServerSide||$F(n,e,i))}catch(l){qf(l,n.$hostElement$)}return NC=null,null},zF=n=>{const e=n.$cmpMeta$.$tagName$,t=n.$hostElement$,i=Wl("postUpdate",e),r=t;n.$ancestorComponent$,wu(r,"componentDidRender"),n.$flags$&64?(wu(r,"componentDidUpdate"),i()):(n.$flags$|=64,wu(r,"componentDidLoad"),i())},Fo=n=>{{const e=dd(n),t=e.$hostElement$.isConnected;return t&&(e.$flags$&18)===2&&$T(e,!1),t}},wu=(n,e,t)=>{if(n&&n[e])try{return n[e](t)}catch(i){qf(i)}},VF=(n,e)=>dd(n).$instanceValues$.get(e),HF=(n,e,t,i)=>{const r=dd(n),s=n,a=r.$instanceValues$.get(e),o=r.$flags$,l=s;t=NF(t,i.$members$[e][0]);const c=Number.isNaN(a)&&Number.isNaN(t);if(t!==a&&!c){r.$instanceValues$.set(e,t);{if(i.$watchers$&&o&128){const d=i.$watchers$[e];d&&d.map(h=>{try{l[h](t,a,e)}catch(f){qf(f,s)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(t,a,e)===!1)return;$T(r,!1)}}}},WF=(n,e,t)=>{if(e.$members$){n.watchers&&(e.$watchers$=n.watchers);const i=Object.entries(e.$members$),r=n.prototype;i.map(([s,[a]])=>{(a&31||a&32)&&Object.defineProperty(r,s,{get(){return VF(this,s)},set(o){HF(this,s,o,e)},configurable:!0,enumerable:!0})});{const s=new Map;r.attributeChangedCallback=function(a,o,l){Wn.jmp(()=>{const c=s.get(a);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(r.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},n.observedAttributes=i.filter(([a,o])=>o[0]&15).map(([a,o])=>{const l=o[1]||a;return s.set(l,a),o[0]&512&&e.$attrsToReflect$.push([a,l]),l})}}return n},GF=async(n,e,t,i,r)=>{if(!(e.$flags$&32)&&(e.$flags$|=32,r=n.constructor,customElements.whenDefined(t.$tagName$).then(()=>e.$flags$|=128),r.style)){let a=r.style;typeof a!="string"&&(a=a[e.$modeName$=CF(n)]);const o=CI(t,e.$modeName$);if(!kg.has(o)){const l=Wl("registerStyles",t.$tagName$);IF(o,a,!!(t.$flags$&1)),l()}}e.$ancestorComponent$,(()=>$T(e,!0))()},BC=n=>{},QF=n=>{if(!(Wn.$flags$&1)){const e=dd(n),t=e.$cmpMeta$,i=Wl("connectedCallback",t.$tagName$);e.$flags$&1?(OI(n,e,t.$listeners$),e!=null&&e.$lazyInstance$?BC(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>BC(e.$lazyInstance$))):(e.$flags$|=1,t.$flags$&12&&KF(n),t.$members$&&Object.entries(t.$members$).map(([r,[s]])=>{if(s&31&&n.hasOwnProperty(r)){const a=n[r];delete n[r],n[r]=a}}),GF(n,e,t)),i()}},KF=n=>{const e=n["s-cr"]=Es.createComment("");e["s-cn"]=!0,n.insertBefore(e,n.firstChild)},YF=async n=>{if(!(Wn.$flags$&1)){const e=dd(n);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}},kt=(n,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=n.$watchers$,t.$attrsToReflect$=[];const i=n.prototype.connectedCallback,r=n.prototype.disconnectedCallback;return Object.assign(n.prototype,{__registerHost(){eq(this,t)},connectedCallback(){QF(this),i&&i.call(this)},disconnectedCallback(){YF(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)})}}),n.is=t.$tagName$,WF(n,t)},OI=(n,e,t,i)=>{t&&t.map(([r,s,a])=>{const o=JF(n,r),l=XF(e,a),c=ZF(r);Wn.ael(o,s,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Wn.rel(o,s,l,c))})},XF=(n,e)=>t=>{try{Vc.lazyLoad||n.$hostElement$[e](t)}catch(i){qf(i)}},JF=(n,e)=>e&4?Es:e&8?Uf:e&16?Es.body:n,ZF=n=>nq?{passive:(n&1)!==0,capture:(n&2)!==0}:(n&2)!==0,MI=new WeakMap,dd=n=>MI.get(n),eq=(n,e)=>{const t={$flags$:0,$hostElement$:n,$cmpMeta$:e,$instanceValues$:new Map};return OI(n,t,e.$listeners$),MI.set(n,t)},FC=(n,e)=>e in n,qf=(n,e)=>(0,console.error)(n,e),kg=new Map,LI=[],Uf=typeof window<"u"?window:{},Es=Uf.document||{head:{}},Nt=Uf.HTMLElement||class{},Wn={$flags$:0,$resourcesUrl$:"",jmp:n=>n(),raf:n=>requestAnimationFrame(n),ael:(n,e,t,i)=>n.addEventListener(e,t,i),rel:(n,e,t,i)=>n.removeEventListener(e,t,i),ce:(n,e)=>new CustomEvent(n,e)},tq=n=>{Object.assign(Wn,n)},nq=(()=>{let n=!1;try{Es.addEventListener("e",null,Object.defineProperty({},"passive",{get(){n=!0}}))}catch(e){}return n})(),iq=n=>Promise.resolve(n),rq=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(n){}return!1})(),fx=[],$I=[],BI=(n,e)=>t=>{n.push(t),hx||(hx=!0,e&&Wn.$flags$&4?sq(px):Wn.raf(px))},qC=n=>{for(let e=0;e<n.length;e++)try{n[e](performance.now())}catch(t){qf(t)}n.length=0},px=()=>{qC(fx),qC($I),(hx=fx.length>0)&&Wn.raf(px)},sq=n=>iq().then(n),mf=BI(fx,!1),Qr=BI($I,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const rn=typeof window<"u"?window:void 0,xu=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Gl=(n,e)=>{n.componentOnReady?n.componentOnReady().then(t=>e(t)):On(()=>e(n))},FI=n=>n.componentOnReady!==void 0,hd=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},aq=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ac=(n,e)=>{let t=aq;return e&&e.length>0&&(t=t.filter(i=>!e.includes(i))),hd(n,t)},oq=(n,e,t,i)=>{var r;if(typeof window<"u"){const s=window,a=(r=s==null?void 0:s.Ionic)===null||r===void 0?void 0:r.config;if(a){const o=a.get("_ael");if(o)return o(n,e,t,i);if(a._ael)return a._ael(n,e,t,i)}}return n.addEventListener(e,t,i)},lq=(n,e,t,i)=>{var r;if(typeof window<"u"){const s=window,a=(r=s==null?void 0:s.Ionic)===null||r===void 0?void 0:r.config;if(a){const o=a.get("_rel");if(o)return o(n,e,t,i);if(a._rel)return a._rel(n,e,t,i)}}return n.removeEventListener(e,t,i)},qo=(n,e=n)=>n.shadowRoot||e,On=n=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(n):typeof requestAnimationFrame=="function"?requestAnimationFrame(n):setTimeout(n),qI=n=>!!n.shadowRoot&&!!n.attachShadow,BT=n=>{const e=n.closest("ion-item");return e?e.querySelector("ion-label"):null},cq=n=>{if(n.focus(),n.classList.contains("ion-focusable")){const e=n.closest("ion-app");e&&e.setFocus([n])}},uq=(n,e)=>{let t;const i=n.getAttribute("aria-labelledby"),r=n.id;let s=i!==null&&i.trim()!==""?i:e+"-lbl",a=i!==null&&i.trim()!==""?document.getElementById(i):BT(n);return a?(i===null&&(a.id=s),t=a.textContent,a.setAttribute("aria-hidden","true")):r.trim()!==""&&(a=document.querySelector('label[for="'.concat(r,'"]')),a&&(a.id!==""?s=a.id:a.id=s="".concat(r,"-lbl"),t=a.textContent)),{label:a,labelId:s,labelText:t}},UC=(n,e,t,i,r)=>{if(n||qI(e)){let s=e.querySelector("input.aux-input");s||(s=e.ownerDocument.createElement("input"),s.type="hidden",s.classList.add("aux-input"),e.appendChild(s)),s.disabled=r,s.name=t,s.value=i||""}},Vi=(n,e,t)=>Math.max(n,Math.min(e,t)),xn=(n,e)=>{if(!n){const t="ASSERT: "+e;console.error(t);debugger;throw new Error(t)}},Ole=n=>n.timeStamp||Date.now(),Mle=n=>{if(n){const e=n.changedTouches;if(e&&e.length>0){const t=e[0];return{x:t.clientX,y:t.clientY}}if(n.pageX!==void 0)return{x:n.pageX,y:n.pageY}}return{x:0,y:0}},jC=n=>{const e=document.dir==="rtl";switch(n){case"start":return e;case"end":return!e;default:throw new Error('"'.concat(n,'" is not a valid value for [side]. Use "start" or "end" instead.'))}},UI=(n,e)=>{const t=n._original||n;return{_original:n,emit:dq(t.emit.bind(t),e)}},dq=(n,e=0)=>{let t;return(...i)=>{clearTimeout(t),t=setTimeout(n,e,...i)}},jI=(n,e)=>{if(n!=null||(n={}),e!=null||(e={}),n===e)return!0;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!(i in e)||n[i]!==e[i])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let uv;const hq=n=>(n.forEach(e=>{for(const t in e)if(e.hasOwnProperty(t)){const i=e[t];if(t==="easing"){const r="animation-timing-function";e[r]=i,delete e[t]}else{const r=fq(t);r!==t&&(e[r]=i,delete e[t])}}}),n),fq=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FT=n=>{if(uv===void 0){const e=n.style.animationName!==void 0,t=n.style.webkitAnimationName!==void 0;uv=!e&&t?"-webkit-":""}return uv},en=(n,e,t)=>{const i=e.startsWith("animation")?FT(n):"";n.style.setProperty(i+e,t)},as=(n,e)=>{const t=e.startsWith("animation")?FT(n):"";n.style.removeProperty(t+e)},pq=(n,e)=>{let t;const i={passive:!0},r=()=>{t&&t()},s=a=>{n===a.target&&(r(),e(a))};return n&&(n.addEventListener("webkitAnimationEnd",s,i),n.addEventListener("animationend",s,i),t=()=>{n.removeEventListener("webkitAnimationEnd",s,i),n.removeEventListener("animationend",s,i)}),r},mq=(n=[])=>n.map(e=>{const t=e.offset,i=[];for(const r in e)e.hasOwnProperty(r)&&r!=="offset"&&i.push("".concat(r,": ").concat(e[r],";"));return"".concat(t*100,"% { ").concat(i.join(" ")," }")}).join(" "),zC=[],gq=n=>{let e=zC.indexOf(n);return e<0&&(e=zC.push(n)-1),"ion-animation-".concat(e)},yq=n=>{const e=n.getRootNode!==void 0?n.getRootNode():n;return e.head||e},bq=(n,e,t)=>{var i;const r=yq(t),s=FT(t),a=r.querySelector("#"+n);if(a)return a;const o=((i=t.ownerDocument)!==null&&i!==void 0?i:document).createElement("style");return o.id=n,o.textContent="@".concat(s,"keyframes ").concat(n," { ").concat(e," } @").concat(s,"keyframes ").concat(n,"-alt { ").concat(e," }"),r.appendChild(o),o},Qp=(n=[],e)=>{if(e!==void 0){const t=Array.isArray(e)?e:[e];return[...n,...t]}return n},ht=n=>{let e,t,i,r,s,a,o=[],l=[],c=[],u=!1,d,h={},f=[],m=[],g={},_=0,v=!1,y=!1,T,N,P,F,$=!0,B=!1,M=!0,Z,O,K=!1;const z=n,te=[],ue=[],ye=[],be=[],de=[],he=[],ee=[],le=[],Te=[],$e=[],qe=typeof AnimationEffect=="function"||rn!==void 0&&typeof rn.AnimationEffect=="function",Ve=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&qe,Je=100,it=()=>$e,qt=pe=>(be.forEach(Pe=>{Pe.destroy(pe)}),Jt(pe),ye.length=0,be.length=0,o.length=0,wi(),u=!1,M=!0,O),Jt=pe=>{Ut(),pe&&Jr()},Yn=()=>{v=!1,y=!1,M=!0,N=void 0,P=void 0,F=void 0,_=0,B=!1,$=!0,K=!1},Bn=()=>_!==0&&!K,hn=(pe,Pe)=>((Pe!=null&&Pe.oneTimeCallback?ue:te).push({c:pe,o:Pe}),O),wi=()=>(te.length=0,ue.length=0,O),Ut=()=>{if(Ve)$e.forEach(pe=>{pe.cancel()}),$e.length=0;else{const pe=ye.slice();On(()=>{pe.forEach(Pe=>{as(Pe,"animation-name"),as(Pe,"animation-duration"),as(Pe,"animation-timing-function"),as(Pe,"animation-iteration-count"),as(Pe,"animation-delay"),as(Pe,"animation-play-state"),as(Pe,"animation-fill-mode"),as(Pe,"animation-direction")})})}},Jr=()=>{de.forEach(pe=>{pe!=null&&pe.parentNode&&pe.parentNode.removeChild(pe)}),de.length=0},Ps=pe=>(he.push(pe),O),Zr=pe=>(ee.push(pe),O),We=pe=>(le.push(pe),O),xt=pe=>(Te.push(pe),O),lt=pe=>(l=Qp(l,pe),O),_n=pe=>(c=Qp(c,pe),O),Zt=(pe={})=>(h=pe,O),xi=(pe=[])=>{for(const Pe of pe)h[Pe]="";return O},ae=pe=>(f=Qp(f,pe),O),we=pe=>(m=Qp(m,pe),O),ke=(pe={})=>(g=pe,O),R=(pe=[])=>{for(const Pe of pe)g[Pe]="";return O},S=()=>s!==void 0?s:d?d.getFill():"both",k=()=>N!==void 0?N:a!==void 0?a:d?d.getDirection():"normal",L=()=>v?"linear":i!==void 0?i:d?d.getEasing():"linear",W=()=>y?0:P!==void 0?P:t!==void 0?t:d?d.getDuration():0,Y=()=>r!==void 0?r:d?d.getIterations():1,ce=()=>F!==void 0?F:e!==void 0?e:d?d.getDelay():0,Ie=()=>o,Re=pe=>(a=pe,Rt(!0),O),bt=pe=>(s=pe,Rt(!0),O),It=pe=>(e=pe,Rt(!0),O),ct=pe=>(i=pe,Rt(!0),O),Pd=pe=>(!Ve&&pe===0&&(pe=1),t=pe,Rt(!0),O),_r=pe=>(r=pe,Rt(!0),O),fc=pe=>(d=pe,O),Se=pe=>{if(pe!=null)if(pe.nodeType===1)ye.push(pe);else if(pe.length>=0)for(let Pe=0;Pe<pe.length;Pe++)ye.push(pe[Pe]);else console.error("Invalid addElement value");return O},Yo=pe=>{if(pe!=null)if(Array.isArray(pe))for(const Pe of pe)Pe.parent(O),be.push(Pe);else pe.parent(O),be.push(pe);return O},Fn=pe=>{const Pe=o!==pe;return o=pe,Pe&&ga(o),O},ga=pe=>{Ve?it().forEach(Pe=>{if(Pe.effect.setKeyframes)Pe.effect.setKeyframes(pe);else{const Ue=new KeyframeEffect(Pe.effect.target,pe,Pe.effect.getTiming());Pe.effect=Ue}}):Xo()},no=()=>{he.forEach(jt=>jt()),ee.forEach(jt=>jt());const pe=l,Pe=c,Ue=h;ye.forEach(jt=>{const fn=jt.classList;pe.forEach(Xn=>fn.add(Xn)),Pe.forEach(Xn=>fn.remove(Xn));for(const Xn in Ue)Ue.hasOwnProperty(Xn)&&en(jt,Xn,Ue[Xn])})},pc=()=>{Os(),le.forEach(fn=>fn()),Te.forEach(fn=>fn());const pe=$?1:0,Pe=f,Ue=m,jt=g;ye.forEach(fn=>{const Xn=fn.classList;Pe.forEach(kr=>Xn.add(kr)),Ue.forEach(kr=>Xn.remove(kr));for(const kr in jt)jt.hasOwnProperty(kr)&&en(fn,kr,jt[kr])}),te.forEach(fn=>fn.c(pe,O)),ue.forEach(fn=>fn.c(pe,O)),ue.length=0,M=!0,$&&(B=!0),$=!0},ri=()=>{_!==0&&(_--,_===0&&(pc(),d&&d.animationFinish()))},Xo=(pe=!0)=>{Jr();const Pe=hq(o);ye.forEach(Ue=>{if(Pe.length>0){const jt=mq(Pe);Z=n!==void 0?n:gq(jt);const fn=bq(Z,jt,Ue);de.push(fn),en(Ue,"animation-duration","".concat(W(),"ms")),en(Ue,"animation-timing-function",L()),en(Ue,"animation-delay","".concat(ce(),"ms")),en(Ue,"animation-fill-mode",S()),en(Ue,"animation-direction",k());const Xn=Y()===1/0?"infinite":Y().toString();en(Ue,"animation-iteration-count",Xn),en(Ue,"animation-play-state","paused"),pe&&en(Ue,"animation-name","".concat(fn.id,"-alt")),On(()=>{en(Ue,"animation-name",fn.id||null)})}})},Id=()=>{ye.forEach(pe=>{const Pe=pe.animate(o,{id:z,delay:ce(),duration:W(),easing:L(),iterations:Y(),fill:S(),direction:k()});Pe.pause(),$e.push(Pe)}),$e.length>0&&($e[0].onfinish=()=>{ri()})},Jo=(pe=!0)=>{no(),o.length>0&&(Ve?Id():Xo(pe)),u=!0},Ei=pe=>{if(pe=Math.min(Math.max(pe,0),.9999),Ve)$e.forEach(Pe=>{Pe.currentTime=Pe.effect.getComputedTiming().delay+W()*pe,Pe.pause()});else{const Pe="-".concat(W()*pe,"ms");ye.forEach(Ue=>{o.length>0&&(en(Ue,"animation-delay",Pe),en(Ue,"animation-play-state","paused"))})}},ya=pe=>{$e.forEach(Pe=>{Pe.effect.updateTiming({delay:ce(),duration:W(),easing:L(),iterations:Y(),fill:S(),direction:k()})}),pe!==void 0&&Ei(pe)},Is=(pe=!0,Pe)=>{On(()=>{ye.forEach(Ue=>{en(Ue,"animation-name",Z||null),en(Ue,"animation-duration","".concat(W(),"ms")),en(Ue,"animation-timing-function",L()),en(Ue,"animation-delay",Pe!==void 0?"-".concat(Pe*W(),"ms"):"".concat(ce(),"ms")),en(Ue,"animation-fill-mode",S()||null),en(Ue,"animation-direction",k()||null);const jt=Y()===1/0?"infinite":Y().toString();en(Ue,"animation-iteration-count",jt),pe&&en(Ue,"animation-name","".concat(Z,"-alt")),On(()=>{en(Ue,"animation-name",Z||null)})})})},Rt=(pe=!1,Pe=!0,Ue)=>(pe&&be.forEach(jt=>{jt.update(pe,Pe,Ue)}),Ve?ya(Ue):Is(Pe,Ue),O),mc=(pe=!1,Pe)=>(be.forEach(Ue=>{Ue.progressStart(pe,Pe)}),Ti(),v=pe,u||Jo(),Rt(!1,!0,Pe),O),Rd=pe=>(be.forEach(Pe=>{Pe.progressStep(pe)}),Ei(pe),O),Rs=(pe,Pe,Ue)=>(v=!1,be.forEach(jt=>{jt.progressEnd(pe,Pe,Ue)}),Ue!==void 0&&(P=Ue),B=!1,$=!0,pe===0?(N=k()==="reverse"?"normal":"reverse",N==="reverse"&&($=!1),Ve?(Rt(),Ei(1-Pe)):(F=(1-Pe)*W()*-1,Rt(!1,!1))):pe===1&&(Ve?(Rt(),Ei(Pe)):(F=Pe*W()*-1,Rt(!1,!1))),pe!==void 0&&(hn(()=>{P=void 0,N=void 0,F=void 0},{oneTimeCallback:!0}),d||Et()),O),Ti=()=>{u&&(Ve?$e.forEach(pe=>{pe.pause()}):ye.forEach(pe=>{en(pe,"animation-play-state","paused")}),K=!0)},es=()=>(be.forEach(pe=>{pe.pause()}),Ti(),O),ut=()=>{T=void 0,ri()},Os=()=>{T&&clearTimeout(T)},Ms=()=>{if(Os(),On(()=>{ye.forEach(pe=>{o.length>0&&en(pe,"animation-play-state","running")})}),o.length===0||ye.length===0)ri();else{const pe=ce()||0,Pe=W()||0,Ue=Y()||1;isFinite(Ue)&&(T=setTimeout(ut,pe+Pe*Ue+Je)),pq(ye[0],()=>{Os(),On(()=>{ba(),On(ri)})})}},ba=()=>{ye.forEach(pe=>{as(pe,"animation-duration"),as(pe,"animation-delay"),as(pe,"animation-play-state")})},gc=()=>{$e.forEach(pe=>{pe.play()}),(o.length===0||ye.length===0)&&ri()},Cr=()=>{Ve?(Ei(0),ya()):Is()},Et=pe=>new Promise(Pe=>{pe!=null&&pe.sync&&(y=!0,hn(()=>y=!1,{oneTimeCallback:!0})),u||Jo(),B&&(Cr(),B=!1),M&&(_=be.length+1,M=!1),hn(()=>Pe(),{oneTimeCallback:!0}),be.forEach(Ue=>{Ue.play()}),Ve?gc():Ms(),K=!1}),Zo=()=>{be.forEach(pe=>{pe.stop()}),u&&(Ut(),u=!1),Yn()},Ar=(pe,Pe)=>{const Ue=o[0];return Ue!==void 0&&(Ue.offset===void 0||Ue.offset===0)?Ue[pe]=Pe:o=[{offset:0,[pe]:Pe},...o],O};return O={parentAnimation:d,elements:ye,childAnimations:be,id:z,animationFinish:ri,from:Ar,to:(pe,Pe)=>{const Ue=o[o.length-1];return Ue!==void 0&&(Ue.offset===void 0||Ue.offset===1)?Ue[pe]=Pe:o=[...o,{offset:1,[pe]:Pe}],O},fromTo:(pe,Pe,Ue)=>Ar(pe,Pe).to(pe,Ue),parent:fc,play:Et,pause:es,stop:Zo,destroy:qt,keyframes:Fn,addAnimation:Yo,addElement:Se,update:Rt,fill:bt,direction:Re,iterations:_r,duration:Pd,easing:ct,delay:It,getWebAnimations:it,getKeyframes:Ie,getFill:S,getDirection:k,getDelay:ce,getIterations:Y,getEasing:L,getDuration:W,afterAddRead:We,afterAddWrite:xt,afterClearStyles:R,afterStyles:ke,afterRemoveClass:we,afterAddClass:ae,beforeAddRead:Ps,beforeAddWrite:Zr,beforeClearStyles:xi,beforeStyles:Zt,beforeRemoveClass:_n,beforeAddClass:lt,onFinish:hn,isRunning:Bn,progressStart:mc,progressStep:Rd,progressEnd:Rs}},vq="ionViewWillEnter",wq="ionViewDidEnter",zI="ionViewWillLeave",VI="ionViewDidLeave",dv="ionViewWillUnload",xq=()=>ci(()=>import("./ios.transition-3c43e85f.js"),[]),Eq=()=>ci(()=>import("./md.transition-f5ea0f18.js"),[]),HI=n=>new Promise((e,t)=>{Qr(()=>{Tq(n),Sq(n).then(i=>{i.animation&&i.animation.destroy(),VC(n),e(i)},i=>{VC(n),t(i)})})}),Tq=n=>{const e=n.enteringEl,t=n.leavingEl;Pq(e,t,n.direction),n.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),mx(e,!1),e.style.setProperty("pointer-events","none"),t&&(mx(t,!1),t.style.setProperty("pointer-events","none"))},Sq=async n=>{const e=await _q(n);return e&&yF.isBrowser?Cq(e,n):Aq(n)},VC=n=>{const e=n.enteringEl,t=n.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),t!==void 0&&(t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"))},_q=async n=>!n.leavingEl||!n.animated||n.duration===0?void 0:n.animationBuilder?n.animationBuilder:n.mode==="ios"?(await xq()).iosTransitionAnimation:(await Eq()).mdTransitionAnimation,Cq=async(n,e)=>{await WI(e,!0);const t=n(e.baseEl,e);GI(e.enteringEl,e.leavingEl);const i=await Nq(t,e);return e.progressCallback&&e.progressCallback(void 0),i&&QI(e.enteringEl,e.leavingEl),{hasCompleted:i,animation:t}},Aq=async n=>{const e=n.enteringEl,t=n.leavingEl;return await WI(n,!1),GI(e,t),QI(e,t),{hasCompleted:!0}},WI=async(n,e)=>{(n.deepWait!==void 0?n.deepWait:e)&&await Promise.all([Ng(n.enteringEl),Ng(n.leavingEl)]),await kq(n.viewIsReady,n.enteringEl)},kq=async(n,e)=>{n&&await n(e)},Nq=(n,e)=>{const t=e.progressCallback,i=new Promise(r=>{n.onFinish(s=>r(s===1))});return t?(n.progressStart(!0),t(n)):n.play(),i},GI=(n,e)=>{Na(e,zI),Na(n,vq)},QI=(n,e)=>{Na(n,wq),Na(e,VI)},Na=(n,e)=>{if(n){const t=new CustomEvent(e,{bubbles:!1,cancelable:!1});n.dispatchEvent(t)}},Dq=()=>new Promise(n=>On(()=>On(()=>n()))),Ng=async n=>{const e=n;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(i=>On(i));return}await Promise.all(Array.from(e.children).map(Ng))}},mx=(n,e)=>{e?(n.setAttribute("aria-hidden","true"),n.classList.add("ion-page-hidden")):(n.hidden=!1,n.removeAttribute("aria-hidden"),n.classList.remove("ion-page-hidden"))},Pq=(n,e,t)=>{n!==void 0&&(n.style.zIndex=t==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},Lle=n=>{if(n.classList.contains("ion-page"))return n;const e=n.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||n};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ql=(n,e,t,i,r)=>Rq(n[1],e[1],t[1],i[1],r).map(s=>Iq(n[0],e[0],t[0],i[0],s)),Iq=(n,e,t,i,r)=>{const s=3*e*Math.pow(r-1,2),a=-3*t*r+3*t+i*r,o=n*Math.pow(r-1,3);return r*(s+r*a)-o},Rq=(n,e,t,i,r)=>(n-=r,e-=r,t-=r,i-=r,Mq(i-3*t+3*e-n,3*t-6*e+3*n,3*e-3*n,n).filter(a=>a>=0&&a<=1)),Oq=(n,e,t)=>{const i=e*e-4*n*t;return i<0?[]:[(-e+Math.sqrt(i))/(2*n),(-e-Math.sqrt(i))/(2*n)]},Mq=(n,e,t,i)=>{if(n===0)return Oq(e,t,i);e/=n,t/=n,i/=n;const r=(3*t-e*e)/3,s=(2*e*e*e-9*e*t+27*i)/27;if(r===0)return[Math.pow(-s,1/3)];if(s===0)return[Math.sqrt(-r),-Math.sqrt(-r)];const a=Math.pow(s/2,2)+Math.pow(r/3,3);if(a===0)return[Math.pow(s/2,1/2)-e/3];if(a>0)return[Math.pow(-(s/2)+Math.sqrt(a),1/3)-Math.pow(s/2+Math.sqrt(a),1/3)-e/3];const o=Math.sqrt(Math.pow(-(r/3),3)),l=Math.acos(-(s/(2*Math.sqrt(Math.pow(-(r/3),3))))),c=2*Math.pow(o,1/3);return[c*Math.cos(l/3)-e/3,c*Math.cos((l+2*Math.PI)/3)-e/3,c*Math.cos((l+4*Math.PI)/3)-e/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class Lq{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){var t;return new $q(this,this.newID(),e.name,(t=e.priority)!==null&&t!==void 0?t:0,!!e.disableScroll)}createBlocker(e={}){return new Bq(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,i){return this.canStart(e)?(this.requestedStart.set(t,i),!0):(this.requestedStart.delete(t),!1)}capture(e,t,i){if(!this.start(e,t,i))return!1;const r=this.requestedStart;let s=-1e4;if(r.forEach(a=>{s=Math.max(s,a)}),s===i){this.capturedId=t,r.clear();const a=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(a),!0}return r.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let i=this.disabledGestures.get(e);i===void 0&&(i=new Set,this.disabledGestures.set(e,i)),i.add(t)}enableGesture(e,t){const i=this.disabledGestures.get(e);i!==void 0&&i.delete(t)}disableScroll(e){this.disabledScroll.add(e),this.disabledScroll.size===1&&document.body.classList.add(HC)}enableScroll(e){this.disabledScroll.delete(e),this.disabledScroll.size===0&&document.body.classList.remove(HC)}canStart(e){return!(this.capturedId!==void 0||this.isDisabled(e))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}}class $q{constructor(e,t,i,r,s){this.id=t,this.name=i,this.disableScroll=s,this.priority=r*1e6+t,this.ctrl=e}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Bq{constructor(e,t,i,r){this.id=t,this.disable=i,this.disableScroll=r,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const HC="backdrop-no-scroll",d0=new Lq;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const fl=(n,e,t,i)=>{const r=Fq(n)?{capture:!!i.capture,passive:!!i.passive}:!!i.capture;let s,a;return n.__zone_symbol__addEventListener?(s="__zone_symbol__addEventListener",a="__zone_symbol__removeEventListener"):(s="addEventListener",a="removeEventListener"),n[s](e,t,r),()=>{n[a](e,t,r)}},Fq=n=>{if(Kp===void 0)try{const e=Object.defineProperty({},"passive",{get:()=>{Kp=!0}});n.addEventListener("optsTest",()=>{},e)}catch(e){Kp=!1}return!!Kp};let Kp;const qq=2e3,Uq=(n,e,t,i,r)=>{let s,a,o,l,c,u,d,h=0;const f=F=>{h=Date.now()+qq,e(F)&&(!a&&t&&(a=fl(n,"touchmove",t,r)),o||(o=fl(F.target,"touchend",g,r)),l||(l=fl(F.target,"touchcancel",g,r)))},m=F=>{h>Date.now()||e(F)&&(!u&&t&&(u=fl(WC(n),"mousemove",t,r)),d||(d=fl(WC(n),"mouseup",_,r)))},g=F=>{v(),i&&i(F)},_=F=>{y(),i&&i(F)},v=()=>{a&&a(),o&&o(),l&&l(),a=o=l=void 0},y=()=>{u&&u(),d&&d(),u=d=void 0},T=()=>{v(),y()},N=(F=!0)=>{F?(s||(s=fl(n,"touchstart",f,r)),c||(c=fl(n,"mousedown",m,r))):(s&&s(),c&&c(),s=c=void 0,T())};return{enable:N,stop:T,destroy:()=>{N(!1),i=t=e=void 0}}},WC=n=>n instanceof Document?n:n.ownerDocument,jq=(n,e,t)=>{const i=t*(Math.PI/180),r=n==="x",s=Math.cos(i),a=e*e;let o=0,l=0,c=!1,u=0;return{start(d,h){o=d,l=h,u=0,c=!0},detect(d,h){if(!c)return!1;const f=d-o,m=h-l,g=f*f+m*m;if(g<a)return!1;const _=Math.sqrt(g),v=(r?f:m)/_;return v>s?u=1:v<-s?u=-1:u=0,c=!1,!0},isGesture(){return u!==0},getDirection(){return u}}},h0=n=>{let e=!1,t=!1,i=!0,r=!1;const s=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},n),a=s.canStart,o=s.onWillStart,l=s.onStart,c=s.onEnd,u=s.notCaptured,d=s.onMove,h=s.threshold,f=s.passive,m=s.blurOnStart,g={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},_=jq(s.direction,s.threshold,s.maxAngle),v=d0.createGesture({name:n.gestureName,priority:n.gesturePriority,disableScroll:n.disableScroll}),y=K=>{const z=YI(K);return t||!i||(KI(K,g),g.startX=g.currentX,g.startY=g.currentY,g.startTime=g.currentTime=z,g.velocityX=g.velocityY=g.deltaX=g.deltaY=0,g.event=K,a&&a(g)===!1)||(v.release(),!v.start())?!1:(t=!0,h===0?P():(_.start(g.startX,g.startY),!0))},T=K=>{if(e){!r&&i&&(r=!0,hv(g,K),requestAnimationFrame(N));return}hv(g,K),_.detect(g.currentX,g.currentY)&&(!_.isGesture()||!P())&&O()},N=()=>{e&&(r=!1,d&&d(g))},P=()=>v.capture()?(e=!0,i=!1,g.startX=g.currentX,g.startY=g.currentY,g.startTime=g.currentTime,o?o(g).then($):$(),!0):!1,F=()=>{if(typeof document<"u"){const K=document.activeElement;K!=null&&K.blur&&K.blur()}},$=()=>{m&&F(),l&&l(g),i=!0},B=()=>{e=!1,t=!1,r=!1,i=!0,v.release()},M=K=>{const z=e,te=i;if(B(),!!te){if(hv(g,K),z){c&&c(g);return}u&&u(g)}},Z=Uq(s.el,y,T,M,{capture:!1,passive:f}),O=()=>{B(),Z.stop(),u&&u(g)};return{enable(K=!0){K||(e&&M(void 0),B()),Z.enable(K)},destroy(){v.destroy(),Z.destroy()}}},hv=(n,e)=>{if(!e)return;const t=n.currentX,i=n.currentY,r=n.currentTime;KI(e,n);const s=n.currentX,a=n.currentY,l=(n.currentTime=YI(e))-r;if(l>0&&l<100){const c=(s-t)/l,u=(a-i)/l;n.velocityX=c*.7+n.velocityX*.3,n.velocityY=u*.7+n.velocityY*.3}n.deltaX=s-n.startX,n.deltaY=a-n.startY,n.event=e},KI=(n,e)=>{let t=0,i=0;if(n){const r=n.changedTouches;if(r&&r.length>0){const s=r[0];t=s.clientX,i=s.clientY}else n.pageX!==void 0&&(t=n.pageX,i=n.pageY)}e.currentX=t,e.currentY=i},YI=n=>n.timeStamp||Date.now(),XI=Object.freeze(Object.defineProperty({__proto__:null,GESTURE_CONTROLLER:d0,createGesture:h0},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let zq=class{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const i=this.m.get(e);return i!==void 0?i:t}getBoolean(e,t=!1){const i=this.m.get(e);return i===void 0?t:typeof i=="string"?i==="true":!!i}getNumber(e,t){const i=parseFloat(this.m.get(e));return isNaN(i)?t!==void 0?t:NaN:i}set(e,t){this.m.set(e,t)}};const pt=new zq,Vq=n=>{try{const e=n.sessionStorage.getItem(JI);return e!==null?JSON.parse(e):{}}catch(e){return{}}},Hq=(n,e)=>{try{n.sessionStorage.setItem(JI,JSON.stringify(e))}catch(t){return}},Wq=n=>{const e={};return n.location.search.slice(1).split("&").map(t=>t.split("=")).map(([t,i])=>[decodeURIComponent(t),decodeURIComponent(i)]).filter(([t])=>Gq(t,GC)).map(([t,i])=>[t.slice(GC.length),i]).forEach(([t,i])=>{e[t]=i}),e},Gq=(n,e)=>n.substr(0,e.length)===e,GC="ionic:",JI="ionic-persist-config",Qq=n=>ZI(n),Oa=(n,e)=>(typeof n=="string"&&(e=n,n=void 0),Qq(n).includes(e)),ZI=(n=window)=>{if(typeof n>"u")return[];n.Ionic=n.Ionic||{};let e=n.Ionic.platforms;return e==null&&(e=n.Ionic.platforms=Kq(n),e.forEach(t=>n.document.documentElement.classList.add("plt-".concat(t)))),e},Kq=n=>{const e=pt.get("platform");return Object.keys(QC).filter(t=>{const i=e==null?void 0:e[t];return typeof i=="function"?i(n):QC[t](n)})},Yq=n=>f0(n)&&!tR(n),qT=n=>!!(Kl(n,/iPad/i)||Kl(n,/Macintosh/i)&&f0(n)),Xq=n=>Kl(n,/iPhone/i),Jq=n=>Kl(n,/iPhone|iPod/i)||qT(n),eR=n=>Kl(n,/android|sink/i),Zq=n=>eR(n)&&!Kl(n,/mobile/i),eU=n=>{const e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),r=Math.max(e,t);return i>390&&i<520&&r>620&&r<800},tU=n=>{const e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),r=Math.max(e,t);return qT(n)||Zq(n)||i>460&&i<820&&r>780&&r<1400},f0=n=>sU(n,"(any-pointer:coarse)"),nU=n=>!f0(n),tR=n=>nR(n)||iR(n),nR=n=>!!(n.cordova||n.phonegap||n.PhoneGap),iR=n=>{const e=n.Capacitor;return!!(e!=null&&e.isNative)},iU=n=>Kl(n,/electron/i),rU=n=>{var e;return!!(!((e=n.matchMedia)===null||e===void 0)&&e.call(n,"(display-mode: standalone)").matches||n.navigator.standalone)},Kl=(n,e)=>e.test(n.navigator.userAgent),sU=(n,e)=>{var t;return(t=n.matchMedia)===null||t===void 0?void 0:t.call(n,e).matches},QC={ipad:qT,iphone:Xq,ios:Jq,android:eR,phablet:eU,tablet:tU,cordova:nR,capacitor:iR,electron:iU,pwa:rU,mobile:f0,mobileweb:Yq,desktop:nU,hybrid:tR};let Gc;const Xe=n=>n&&kF(n)||Gc,aU=(n={})=>{if(typeof window>"u")return;const e=window.document,t=window,i=t.Ionic=t.Ionic||{},r={};n._ael&&(r.ael=n._ael),n._rel&&(r.rel=n._rel),n._ce&&(r.ce=n._ce),tq(r);const s=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Vq(t)),{persistConfig:!1}),i.config),Wq(t)),n);pt.reset(s),pt.getBoolean("persistConfig")&&Hq(t,s),ZI(t),i.config=pt,i.mode=Gc=pt.get("mode",e.documentElement.getAttribute("mode")||(Oa(t,"ios")?"ios":"md")),pt.set("mode",Gc),e.documentElement.setAttribute("mode",Gc),e.documentElement.classList.add(Gc),pt.getBoolean("_testing")&&pt.set("animated",!1);const a=l=>{var c;return(c=l.tagName)===null||c===void 0?void 0:c.startsWith("ION-")},o=l=>["ios","md"].includes(l);AF(l=>{for(;l;){const c=l.mode||l.getAttribute("mode");if(c){if(o(c))return c;a(l)&&console.warn('Invalid ionic mode: "'+c+'", expected: "ios" or "md"')}l=l.parentElement}return Gc})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const oU=n=>{try{if(n instanceof dU)return n.value;if(!lU()||typeof n!="string"||n==="")return n;if(n.includes("onload="))return"";const e=document.createDocumentFragment(),t=document.createElement("div");e.appendChild(t),t.innerHTML=n,uU.forEach(a=>{const o=e.querySelectorAll(a);for(let l=o.length-1;l>=0;l--){const c=o[l];c.parentNode?c.parentNode.removeChild(c):e.removeChild(c);const u=yx(c);for(let d=0;d<u.length;d++)gx(u[d])}});const i=yx(e);for(let a=0;a<i.length;a++)gx(i[a]);const r=document.createElement("div");r.appendChild(e);const s=r.querySelector("div");return s!==null?s.innerHTML:r.innerHTML}catch(e){return console.error(e),""}},gx=n=>{if(n.nodeType&&n.nodeType!==1)return;if(typeof NamedNodeMap<"u"&&!(n.attributes instanceof NamedNodeMap)){n.remove();return}for(let t=n.attributes.length-1;t>=0;t--){const i=n.attributes.item(t),r=i.name;if(!cU.includes(r.toLowerCase())){n.removeAttribute(r);continue}const s=i.value,a=n[r];(s!=null&&s.toLowerCase().includes("javascript:")||a!=null&&a.toLowerCase().includes("javascript:"))&&n.removeAttribute(r)}const e=yx(n);for(let t=0;t<e.length;t++)gx(e[t])},yx=n=>n.children!=null?n.children:n.childNodes,lU=()=>{var n;const e=window,t=(n=e==null?void 0:e.Ionic)===null||n===void 0?void 0:n.config;return t?t.get?t.get("sanitizerEnabled",!0):t.sanitizerEnabled===!0||t.sanitizerEnabled===void 0:!0},cU=["class","id","href","src","name","slot"],uU=["script","style","iframe","meta","link","object","embed"];class dU{constructor(e){this.value=e}}const hU=!1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const fU=()=>{document.addEventListener("backbutton",()=>{})},pU=()=>{const n=document;let e=!1;n.addEventListener("backbutton",()=>{if(e)return;let t=0,i=[];const r=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(o,l){i.push({priority:o,handler:l,id:t++})}}});n.dispatchEvent(r);const s=async o=>{try{if(o!=null&&o.handler){const l=o.handler(a);l!=null&&await l}}catch(l){console.error(l)}},a=()=>{if(i.length>0){let o={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};i.forEach(l=>{l.priority>=o.priority&&(o=l)}),e=!0,i=i.filter(l=>l.id!==o.id),s(o).then(()=>e=!1)}};a()})},rR=100,sR=99,mU=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:sR,OVERLAY_BACK_BUTTON_PRIORITY:rR,blockHardwareBackButton:fU,startHardwareBackButton:pU},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const UT=n=>ht().duration(n?400:300),gU=n=>{let e,t;const i=n.width+8,r=ht(),s=ht();n.isEndSide?(e=i+"px",t="0px"):(e=-i+"px",t="0px"),r.addElement(n.menuInnerEl).fromTo("transform","translateX(".concat(e,")"),"translateX(".concat(t,")"));const o=Xe(n)==="ios",l=o?.2:.25;return s.addElement(n.backdropEl).fromTo("opacity",.01,l),UT(o).addAnimation([r,s])},yU=n=>{let e,t;const i=Xe(n),r=n.width;n.isEndSide?(e=-r+"px",t=r+"px"):(e=r+"px",t=-r+"px");const s=ht().addElement(n.menuInnerEl).fromTo("transform","translateX(".concat(t,")"),"translateX(0px)"),a=ht().addElement(n.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(e,")")),o=ht().addElement(n.backdropEl).fromTo("opacity",.01,.32);return UT(i==="ios").addAnimation([s,a,o])},bU=n=>{const e=Xe(n),t=n.width*(n.isEndSide?-1:1)+"px",i=ht().addElement(n.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(t,")"));return UT(e==="ios").addAnimation(i)},vU=()=>{const n=new Map,e=[],t=async B=>{const M=await c(B);return M?M.open():!1},i=async B=>{const M=await(B!==void 0?c(B):u());return M!==void 0?M.close():!1},r=async B=>{const M=await c(B);return M?M.toggle():!1},s=async(B,M)=>{const Z=await c(M);return Z&&(Z.disabled=!B),Z},a=async(B,M)=>{const Z=await c(M);return Z&&(Z.swipeGesture=B),Z},o=async B=>{if(B!=null){const M=await c(B);return M!==void 0&&M.isOpen()}else return await u()!==void 0},l=async B=>{const M=await c(B);return M?!M.disabled:!1},c=async B=>{if(await $(),B==="start"||B==="end"){const Z=F(O=>O.side===B&&!O.disabled);return Z||F(O=>O.side===B)}else if(B!=null)return F(Z=>Z.menuId===B);const M=F(Z=>!Z.disabled);return M||(e.length>0?e[0].el:void 0)},u=async()=>(await $(),T()),d=async()=>(await $(),N()),h=async()=>(await $(),P()),f=(B,M)=>{n.set(B,M)},m=B=>{e.indexOf(B)<0&&(B.disabled||_(B),e.push(B))},g=B=>{const M=e.indexOf(B);M>-1&&e.splice(M,1)},_=B=>{const M=B.side;e.filter(Z=>Z.side===M&&Z!==B).forEach(Z=>Z.disabled=!0)},v=async(B,M,Z)=>{if(P())return!1;if(M){const O=await u();O&&B.el!==O&&await O.setOpen(!1,!1)}return B._setOpen(M,Z)},y=(B,M)=>{const Z=n.get(B);if(!Z)throw new Error("animation not registered");return Z(M)},T=()=>F(B=>B._isOpen),N=()=>e.map(B=>B.el),P=()=>e.some(B=>B.isAnimating),F=B=>{const M=e.find(B);if(M!==void 0)return M.el},$=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(B=>new Promise(M=>Gl(B,M))));return f("reveal",bU),f("push",yU),f("overlay",gU),typeof document<"u"&&document.addEventListener("ionBackButton",B=>{const M=T();M&&B.detail.register(sR,()=>M.close())}),{registerAnimation:f,get:c,getMenus:d,getOpen:u,isEnabled:l,swipeGesture:a,isAnimating:h,isOpen:o,enable:s,toggle:r,close:i,open:t,_getOpenSync:T,_createAnimation:y,_register:m,_unregister:g,_setOpen:v,_setActiveMenu:_}},ka=vU();/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const jT=async(n,e,t,i,r,s)=>{var a;if(n)return n.attachViewToDom(e,t,r,i);if(!s&&typeof t!="string"&&!(t instanceof HTMLElement))throw new Error("framework delegate is missing");const o=typeof t=="string"?(a=e.ownerDocument)===null||a===void 0?void 0:a.createElement(t):t;return i&&i.forEach(l=>o.classList.add(l)),r&&Object.assign(o,r),e.appendChild(o),await new Promise(l=>Gl(o,l)),o},aR=(n,e)=>{if(e){if(n){const t=e.parentElement;return n.removeViewFromDom(t,e)}e.remove()}return Promise.resolve()},oR=()=>{let n,e;return{attachViewToDom:async(r,s,a={},o=[])=>{var l,c;if(n=r,s){const d=typeof s=="string"?(l=n.ownerDocument)===null||l===void 0?void 0:l.createElement(s):s;o.forEach(h=>d.classList.add(h)),Object.assign(d,a),n.appendChild(d),await new Promise(h=>Gl(d,h))}else if(n.children.length>0&&(n.tagName==="ION-MODAL"||n.tagName==="ION-POPOVER")&&!n.children[0].classList.contains("ion-delegate-host")){const h=(c=n.ownerDocument)===null||c===void 0?void 0:c.createElement("div");h.classList.add("ion-delegate-host"),o.forEach(f=>h.classList.add(f)),h.append(...n.children),n.appendChild(h)}const u=document.querySelector("ion-app")||document.body;return e=document.createComment("ionic teleport"),n.parentNode.insertBefore(e,n),u.appendChild(n),n},removeViewFromDom:()=>(n&&e&&(e.parentNode.insertBefore(n,e),e.remove()),Promise.resolve())}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Mn=(n,...e)=>console.warn("[Ionic Warning]: ".concat(n),...e),lR=(n,...e)=>console.error("[Ionic Error]: ".concat(n),...e),wU=(n,...e)=>console.error("<".concat(n.tagName.toLowerCase(),"> must be used inside ").concat(e.join(" or "),"."));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let bx=0,xU=0;const Dg=new WeakMap,cR=n=>{typeof document<"u"&&SU(document);const e=bx++;n.overlayIndex=e},uR=n=>(n.hasAttribute("id")||(n.id="ion-overlay-".concat(++xU)),n.id),gf='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',KC=(n,e)=>{let t=n.querySelector(gf);const i=t==null?void 0:t.shadowRoot;i&&(t=i.querySelector(gf)||t),t?cq(t):e.focus()},EU=n=>n.classList.contains("overlay-hidden"),YC=(n,e)=>{const t=Array.from(n.querySelectorAll(gf));let i=t.length>0?t[t.length-1]:null;const r=i==null?void 0:i.shadowRoot;r&&(i=r.querySelector(gf)||i),i?i.focus():e.focus()},TU=(n,e)=>{const t=Pg(e,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),i=n.target;if(!t||!i||t.classList.contains("ion-disable-focus-trap"))return;const r=()=>{if(t===i)t.lastFocus=void 0;else{const a=qo(t);if(!a.contains(i))return;const o=a.querySelector(".ion-overlay-wrapper");if(!o)return;if(o.contains(i)||i===a.querySelector("ion-backdrop"))t.lastFocus=i;else{const l=t.lastFocus;KC(o,t),l===e.activeElement&&YC(o,t),t.lastFocus=e.activeElement}}},s=()=>{if(t.contains(i))t.lastFocus=i;else{const a=t.lastFocus;KC(t,t),a===e.activeElement&&YC(t,t),t.lastFocus=e.activeElement}};t.shadowRoot?s():r()},SU=n=>{bx===0&&(bx=1,n.addEventListener("focus",e=>{TU(e,n)},!0),n.addEventListener("ionBackButton",e=>{const t=Pg(n);t!=null&&t.backdropDismiss&&e.detail.register(rR,()=>t.dismiss(void 0,yf))}),n.addEventListener("keydown",e=>{if(e.key==="Escape"){const t=Pg(n);t!=null&&t.backdropDismiss&&t.dismiss(void 0,yf)}}))},_U=(n,e)=>(e===void 0&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(n.querySelectorAll(e)).filter(t=>t.overlayIndex>0)),Pg=(n,e,t)=>{const i=_U(n,e).filter(r=>!EU(r));return t===void 0?i[i.length-1]:i.find(r=>r.id===t)},dR=(n=!1)=>{const t=AU(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},hR=async(n,e,t,i,r)=>{var s,a;if(n.presented)return;dR(!0),n.presented=!0,n.willPresent.emit(),(s=n.willPresentShorthand)===null||s===void 0||s.emit();const o=Xe(n),l=n.enterAnimation?n.enterAnimation:pt.get(e,o==="ios"?t:i);await pR(n,l,n.el,r)&&(n.didPresent.emit(),(a=n.didPresentShorthand)===null||a===void 0||a.emit()),n.el.tagName!=="ION-TOAST"&&CU(n.el),n.keyboardClose&&(document.activeElement===null||!n.el.contains(document.activeElement))&&n.el.focus()},CU=async n=>{let e=document.activeElement;if(!e)return;const t=e==null?void 0:e.shadowRoot;t&&(e=t.querySelector(gf)||e),await n.onDidDismiss(),e.focus()},fR=async(n,e,t,i,r,s,a)=>{var o,l;if(!n.presented)return!1;dR(!1),n.presented=!1;try{n.el.style.setProperty("pointer-events","none"),n.willDismiss.emit({data:e,role:t}),(o=n.willDismissShorthand)===null||o===void 0||o.emit({data:e,role:t});const c=Xe(n),u=n.leaveAnimation?n.leaveAnimation:pt.get(i,c==="ios"?r:s);t!==Bh&&await pR(n,u,n.el,a),n.didDismiss.emit({data:e,role:t}),(l=n.didDismissShorthand)===null||l===void 0||l.emit({data:e,role:t}),Dg.delete(n),n.el.classList.add("overlay-hidden"),n.el.style.removeProperty("pointer-events"),n.el.lastFocus!==void 0&&(n.el.lastFocus=void 0)}catch(c){console.error(c)}return n.el.remove(),!0},AU=n=>n.querySelector("ion-app")||n.body,pR=async(n,e,t,i)=>{t.classList.remove("overlay-hidden");const r=n.el,s=e(r,i);(!n.animated||!pt.getBoolean("animated",!0))&&s.duration(0),n.keyboardClose&&s.beforeAddWrite(()=>{const o=t.ownerDocument.activeElement;o!=null&&o.matches("input,ion-input, ion-textarea")&&o.blur()});const a=Dg.get(n)||[];return Dg.set(n,[...a,s]),await s.play(),!0},Ig=(n,e)=>{let t;const i=new Promise(r=>t=r);return kU(n,e,r=>{t(r.detail)}),i},kU=(n,e,t)=>{const i=r=>{lq(n,e,i),t(r)};oq(n,e,i)},XC=n=>n==="cancel"||n===yf,NU=n=>n(),fv=(n,e)=>{if(typeof n=="function")return pt.get("_zoneGate",NU)(()=>{try{return n(e)}catch(i){throw i}})},yf="backdrop",Bh="gesture",DU=n=>{let e=!1,t;const i=oR(),r=(o=!1)=>{if(t&&!o)return{delegate:t,inline:e};const{el:l,hasController:c,delegate:u}=n;return e=l.parentNode!==null&&!c,t=e?u||i:u,{inline:e,delegate:t}};return{attachViewToDom:async o=>{const{delegate:l}=r(!0);if(l)return await l.attachViewToDom(n.el,o);const{hasController:c}=n;if(c&&o!==void 0)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:o}=r();o&&n.el!==void 0&&o.removeViewFromDom(n.el.parentElement,n.el)}}},mR=()=>{let n;const e=()=>{n&&(n(),n=void 0)};return{addClickListener:(i,r)=>{e();const s=r!==void 0?document.getElementById(r):null;if(!s){Mn('A trigger element with the ID "'.concat(r,'" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.'),i);return}n=((o,l)=>{const c=()=>{l.present()};return o.addEventListener("click",c),()=>{o.removeEventListener("click",c)}})(s,i)},removeClickListener:e}};function ii(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const PU="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",IU="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",JC="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",ZC="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",e2="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",RU="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",OU="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let pv;const MU=()=>{if(typeof window>"u")return new Map;if(!pv){const n=window;n.Ionicons=n.Ionicons||{},pv=n.Ionicons.map=n.Ionicons.map||new Map}return pv},LU=n=>{let e=mv(n.src);return e||(e=gR(n.name,n.icon,n.mode,n.ios,n.md),e?$U(e):n.icon&&(e=mv(n.icon),e||(e=mv(n.icon[n.mode]),e))?e:null)},$U=n=>{const e=MU().get(n);return e||bF("svg/".concat(n,".svg"))},gR=(n,e,t,i,r)=>(t=(t&&Yp(t))==="ios"?"ios":"md",i&&t==="ios"?n=Yp(i):r&&t==="md"?n=Yp(r):(!n&&e&&!yR(e)&&(n=e),Rg(n)&&(n=Yp(n))),!Rg(n)||n.trim()===""||n.replace(/[a-z]|-|\d/gi,"")!==""?null:n),mv=n=>Rg(n)&&(n=n.trim(),yR(n))?n:null,yR=n=>n.length>0&&/(\/|\.)/.test(n),Rg=n=>typeof n=="string",Yp=n=>n.toLowerCase(),BU=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},FU=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",qU=n=>{const e=document.createElement("div");e.innerHTML=n;for(let i=e.childNodes.length-1;i>=0;i--)e.childNodes[i].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[i]);const t=e.firstElementChild;if(t&&t.nodeName.toLowerCase()==="svg"){const i=t.getAttribute("class")||"";if(t.setAttribute("class",(i+" s-ion-icon").trim()),bR(t))return e.innerHTML}return""},bR=n=>{if(n.nodeType===1){if(n.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;if(Rg(t)&&t.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<n.childNodes.length;e++)if(!bR(n.childNodes[e]))return!1}return!0},UU=n=>n.startsWith("data:image/svg+xml"),jU=n=>n.indexOf(";utf8,")!==-1,_l=new Map,t2=new Map;let gv;const zU=(n,e)=>{let t=t2.get(n);if(!t)if(typeof fetch<"u"&&typeof document<"u")if(UU(n)&&jU(n)){gv||(gv=new DOMParser);const r=gv.parseFromString(n,"text/html").querySelector("svg");return r&&_l.set(n,r.outerHTML),Promise.resolve()}else t=fetch(n).then(i=>{if(i.ok)return i.text().then(r=>{r&&e!==!1&&(r=qU(r)),_l.set(n,r||"")});_l.set(n,"")}),t2.set(n,t);else return _l.set(n,""),Promise.resolve();return t},VU=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",HU=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=WU(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=BU(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,i){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const r=this.io=new window.IntersectionObserver(s=>{s[0].isIntersecting&&(r.disconnect(),this.io=void 0,i())},{rootMargin:t});r.observe(e)}else i()}loadIcon(){if(this.isVisible){const e=LU(this);e&&(_l.has(e)?this.svgContent=_l.get(e):zU(e,this.sanitize).then(()=>this.svgContent=_l.get(e)))}this.iconName=gR(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{iconName:e,el:t,inheritedAttributes:i}=this,r=this.mode||"md",s=this.flipRtl||e&&(e.indexOf("arrow")>-1||e.indexOf("chevron")>-1)&&this.flipRtl!==!1;return re(Ct,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},GU(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":!!s&&FU(t)})},i),this.svgContent?re("div",{class:"icon-inner",innerHTML:this.svgContent}):re("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return VU}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),WU=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",GU=n=>n?{"ion-color":!0,["ion-color-".concat(n)]:!0}:null;function zT(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,HU);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const QU=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",KU=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",YU=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=Ge(this,"ionBackdropTap",7),this.blocker=d0.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(e){this.emitTap(e)}emitTap(e){this.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const e=Xe(this);return re(Ct,{tabindex:"-1","aria-hidden":"true",class:{[e]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:QU,md:KU}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function VT(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(e=>{switch(e){case"ion-backdrop":customElements.get(e)||customElements.define(e,YU);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Hn=(n,e)=>e.closest(n)!==null,gi=(n,e)=>typeof n=="string"&&n.length>0?Object.assign({"ion-color":!0,["ion-color-".concat(n)]:!0},e):e,XU=n=>n!==void 0?(Array.isArray(n)?n:n.split(" ")).filter(t=>t!=null).map(t=>t.trim()).filter(t=>t!==""):[],Il=n=>{const e={};return XU(n).forEach(t=>e[t]=!0),e},JU=/^[a-z][a-z0-9+\-.]*:/,HT=async(n,e,t,i)=>{if(n!=null&&n[0]!=="#"&&!JU.test(n)){const r=document.querySelector("ion-router");if(r)return e!=null&&e.preventDefault(),r.push(n,t,i)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ZU=":host{--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff);--padding-top:3px;--padding-end:8px;--padding-bottom:3px;--padding-start:8px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:inline-block;min-width:10px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:13px;font-weight:bold;line-height:1;text-align:center;white-space:nowrap;contain:content;vertical-align:baseline}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(:empty){display:none}:host{border-radius:10px}",e9=":host{--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff);--padding-top:3px;--padding-end:8px;--padding-bottom:3px;--padding-start:8px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:inline-block;min-width:10px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:13px;font-weight:bold;line-height:1;text-align:center;white-space:nowrap;contain:content;vertical-align:baseline}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(:empty){display:none}:host{--padding-top:3px;--padding-end:4px;--padding-bottom:4px;--padding-start:4px;border-radius:4px}",t9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=Xe(this);return re(Ct,{class:gi(this.color,{[e]:!0})},re("slot",null))}static get style(){return{ios:ZU,md:e9}}},[33,"ion-badge",{color:[513]}]);function n9(){if(typeof customElements>"u")return;["ion-badge"].forEach(e=>{switch(e){case"ion-badge":customElements.get(e)||customElements.define(e,t9);break}})}const i9=n9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const r9=".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-ios-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:28px;line-height:0.67}",s9=".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-md-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:48px;height:48px}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}",a9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.collapse=!1}render(){const e=Xe(this);return re(Ct,{class:{[e]:!0,"buttons-collapse":this.collapse}})}static get style(){return{ios:r9,md:s9}}},[34,"ion-buttons",{collapse:[4]}]);function o9(){if(typeof customElements>"u")return;["ion-buttons"].forEach(e=>{switch(e){case"ion-buttons":customElements.get(e)||customElements.define(e,a9);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const l9=o9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const vR=n=>{const e=n;let t;return{hasLegacyControl:()=>{if(t===void 0){const r=e.label!==void 0||c9(e),s=e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby")&&e.shadowRoot===null,a=BT(e);t=e.legacy===!0||!r&&!s&&a!==null}return t}}},c9=n=>n.shadowRoot===null?!1:!!(u9.includes(n.tagName)&&n.querySelector('[slot="label"]')!==null||d9.includes(n.tagName)&&n.textContent!==""),u9=["ION-RANGE"],d9=["ION-TOGGLE","ION-CHECKBOX","ION-RADIO"];/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const h9=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",f9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,t){return new Promise(i=>{mf(()=>{const r=this.el.getBoundingClientRect(),s=r.width,a=r.height,o=Math.sqrt(s*s+a*a),l=Math.max(a,s),c=this.unbounded?l:o+m9,u=Math.floor(l*g9),d=c/u;let h=e-r.left,f=t-r.top;this.unbounded&&(h=s*.5,f=a*.5);const m=h-u*.5,g=f-u*.5,_=s*.5-h,v=a*.5-f;Qr(()=>{const y=document.createElement("div");y.classList.add("ripple-effect");const T=y.style;T.top=g+"px",T.left=m+"px",T.width=T.height=u+"px",T.setProperty("--final-scale","".concat(d)),T.setProperty("--translate-end","".concat(_,"px, ").concat(v,"px")),(this.el.shadowRoot||this.el).appendChild(y),setTimeout(()=>{i(()=>{p9(y)})},225+100)})})})}get unbounded(){return this.type==="unbounded"}render(){const e=Xe(this);return re(Ct,{role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return h9}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),p9=n=>{n.classList.add("fade-out"),setTimeout(()=>{n.remove()},200)},m9=10,g9=.5;function p0(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(e=>{switch(e){case"ion-ripple-effect":customElements.get(e)||customElements.define(e,f9);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const y9={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},b9=n=>{if(n===void 0||n==="")return!0;if(window.matchMedia){const e=y9[n];return window.matchMedia(e).matches}return!1},v9=":host{-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}",Xp=typeof window<"u"?window:void 0,n2=Xp&&!!(Xp.CSS&&Xp.CSS.supports&&Xp.CSS.supports("--a: 0")),w9=["","xs","sm","md","lg","xl"],x9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.offset=void 0,this.offsetXs=void 0,this.offsetSm=void 0,this.offsetMd=void 0,this.offsetLg=void 0,this.offsetXl=void 0,this.pull=void 0,this.pullXs=void 0,this.pullSm=void 0,this.pullMd=void 0,this.pullLg=void 0,this.pullXl=void 0,this.push=void 0,this.pushXs=void 0,this.pushSm=void 0,this.pushMd=void 0,this.pushLg=void 0,this.pushXl=void 0,this.size=void 0,this.sizeXs=void 0,this.sizeSm=void 0,this.sizeMd=void 0,this.sizeLg=void 0,this.sizeXl=void 0}onResize(){Fo(this)}getColumns(e){let t;for(const i of w9){const r=b9(i),s=this[e+i.charAt(0).toUpperCase()+i.slice(1)];r&&s!==void 0&&(t=s)}return t}calculateSize(){const e=this.getColumns("size");if(!e||e==="")return;const t=e==="auto"?"auto":n2?"calc(calc(".concat(e," / var(--ion-grid-columns, 12)) * 100%)"):e/12*100+"%";return{flex:"0 0 ".concat(t),width:"".concat(t),"max-width":"".concat(t)}}calculatePosition(e,t){const i=this.getColumns(e);if(!i)return;const r=n2?"calc(calc(".concat(i," / var(--ion-grid-columns, 12)) * 100%)"):i>0&&i<12?i/12*100+"%":"auto";return{[t]:r}}calculateOffset(e){return this.calculatePosition("offset",e?"margin-right":"margin-left")}calculatePull(e){return this.calculatePosition("pull",e?"left":"right")}calculatePush(e){return this.calculatePosition("push",e?"right":"left")}render(){const e=document.dir==="rtl",t=Xe(this);return re(Ct,{class:{[t]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(e)),this.calculatePull(e)),this.calculatePush(e)),this.calculateSize())},re("slot",null))}static get style(){return v9}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]);function E9(){if(typeof customElements>"u")return;["ion-col"].forEach(e=>{switch(e){case"ion-col":customElements.get(e)||customElements.define(e,x9);break}})}const T9=E9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Bm=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const S9=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',_9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Ge(this,"ionScrollStart",7),this.ionScroll=Ge(this,"ionScroll",7),this.ionScrollEnd=Ge(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,t=Xe(this);return e===void 0?t==="ios"&&Oa("ios"):e}resize(){this.fullscreen?mf(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,Fo(this))}readDimensions(){const e=A9(this.el),t=Math.max(this.el.offsetTop,0),i=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||i!==this.cBottom)&&(this.cTop=t,this.cBottom=i,Fo(this))}onScroll(e){const t=Date.now(),i=!this.isScrolling;this.lastScroll=t,i&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,mf(r=>{this.queued=!1,this.detail.event=e,k9(this.detail,this.scrollEl,r,i),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(e=>Gl(this.el,e)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(e=>Gl(this.el,e)),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const t=await this.getScrollElement(),i=t.scrollHeight-t.clientHeight;return this.scrollToPoint(void 0,i,e)}async scrollByPoint(e,t,i){const r=await this.getScrollElement();return this.scrollToPoint(e+r.scrollLeft,t+r.scrollTop,i)}async scrollToPoint(e,t,i=0){const r=await this.getScrollElement();if(i<32){t!=null&&(r.scrollTop=t),e!=null&&(r.scrollLeft=e);return}let s,a=0;const o=new Promise(f=>s=f),l=r.scrollTop,c=r.scrollLeft,u=t!=null?t-l:0,d=e!=null?e-c:0,h=f=>{const m=Math.min(1,(f-a)/i)-1,g=Math.pow(m,3)+1;u!==0&&(r.scrollTop=Math.floor(g*u+l)),d!==0&&(r.scrollLeft=Math.floor(g*d+c)),g<1?requestAnimationFrame(h):s()};return requestAnimationFrame(f=>{a=f,h(f)}),o}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:t,scrollY:i,el:r}=this,s=Bm(r)?"rtl":"ltr",a=Xe(this),o=this.shouldForceOverscroll(),l=a==="ios",c=e?"main":"div";return this.resize(),re(Ct,{class:gi(this.color,{[a]:!0,"content-sizing":Hn("ion-popover",this.el),overscroll:o,["content-".concat(s)]:!0}),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},re("div",{ref:u=>this.backgroundContentEl=u,id:"background-content",part:"background"}),re(c,{class:{"inner-scroll":!0,"scroll-x":t,"scroll-y":i,overscroll:(t||i)&&o},ref:u=>this.scrollEl=u,onScroll:this.scrollEvents?u=>this.onScroll(u):void 0,part:"scroll"},re("slot",null)),l?re("div",{class:"transition-effect"},re("div",{class:"transition-cover"}),re("div",{class:"transition-shadow"})):null,re("slot",{name:"fixed"}))}get el(){return this}static get style(){return S9}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),C9=n=>{var e;return n.parentElement?n.parentElement:!((e=n.parentNode)===null||e===void 0)&&e.host?n.parentNode.host:null},A9=n=>{const e=n.closest("ion-tabs");if(e)return e;const t=n.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return t||C9(n)},k9=(n,e,t,i)=>{const r=n.currentX,s=n.currentY,a=n.currentTime,o=e.scrollLeft,l=e.scrollTop,c=t-a;if(i&&(n.startTime=t,n.startX=o,n.startY=l,n.velocityX=n.velocityY=0),n.currentTime=t,n.currentX=n.scrollLeft=o,n.currentY=n.scrollTop=l,n.deltaX=o-n.startX,n.deltaY=l-n.startY,c>0&&c<100){const u=(o-r)/c,d=(l-s)/c;n.velocityX=u*.7+n.velocityX*.3,n.velocityY=d*.7+n.velocityY*.3}};function N9(){if(typeof customElements>"u")return;["ion-content"].forEach(e=>{switch(e){case"ion-content":customElements.get(e)||customElements.define(e,_9);break}})}const D9=N9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const P9=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:16px;font-weight:500;letter-spacing:0}:host(.in-buttons){font-size:17px;font-weight:400}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:13px}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',I9=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:20px}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:13px}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}',R9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Ge(this,"ionFocus",7),this.ionBlur=Ge(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=e=>{const{el:t}=this;this.type==="button"?HT(this.href,e,this.routerDirection,this.routerAnimation):qI(t)&&this.submitForm(e)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:e}=this;this.formButtonEl&&(this.formButtonEl.disabled=e)}renderHiddenButton(){const e=this.formEl=this.findForm();if(e){const{formButtonEl:t}=this;if(t!==null&&e.contains(t))return;const i=this.formButtonEl=document.createElement("button");i.type=this.type,i.style.display="none",i.disabled=this.disabled,e.appendChild(i)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=ac(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if(typeof e=="string"){const t=document.getElementById(e);return t?t instanceof HTMLFormElement?t:(Mn('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is attached to a <form> element.'),this.el),null):(Mn('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is correct and the form is rendered in the DOM.'),this.el),null)}return e!==void 0?(Mn('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(e){this.formEl&&this.formButtonEl&&(e.preventDefault(),this.formButtonEl.click())}render(){const e=Xe(this),{buttonType:t,type:i,disabled:r,rel:s,target:a,size:o,href:l,color:c,expand:u,hasIconOnly:d,shape:h,strong:f,inheritedAttributes:m}=this,g=o===void 0&&this.inItem?"small":o,_=l===void 0?"button":"a",v=_==="button"?{type:i}:{download:this.download,href:l,rel:s,target:a};let y=this.fill;return y==null&&(y=this.inToolbar||this.inListHeader?"clear":"solid"),i!=="button"&&this.renderHiddenButton(),re(Ct,{onClick:this.handleClick,"aria-disabled":r?"true":null,class:gi(c,{[e]:!0,[t]:!0,["".concat(t,"-").concat(u)]:u!==void 0,["".concat(t,"-").concat(g)]:g!==void 0,["".concat(t,"-").concat(h)]:h!==void 0,["".concat(t,"-").concat(y)]:!0,["".concat(t,"-strong")]:f,"in-toolbar":Hn("ion-toolbar",this.el),"in-toolbar-color":Hn("ion-toolbar[color]",this.el),"in-buttons":Hn("ion-buttons",this.el),"button-has-icon-only":d,"button-disabled":r,"ion-activatable":!0,"ion-focusable":!0})},re(_,Object.assign({},v,{class:"button-native",part:"native",disabled:r,onFocus:this.onFocus,onBlur:this.onBlur},m),re("span",{class:"button-inner"},re("slot",{name:"icon-only"}),re("slot",{name:"start"}),re("slot",null),re("slot",{name:"end"})),e==="md"&&re("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:P9,md:I9}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]}]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const O9=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));--color:var(--ion-item-color, var(--ion-text-color, #000));--highlight-height:0px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--bottom-padding-start:0px;font-size:16px}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-interactive){--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px;--show-inset-highlight:0}.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus) .item-highlight{border-top:none;border-right:none;border-left:none}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:1px;--padding-bottom:1px;--padding-start:.5em;--padding-end:.5em;min-height:24px;font-size:13px}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:0}',M9=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;--highlight-height:1px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);font-size:16px;font-weight:normal;text-transform:none}:host(.item-fill-outline){--highlight-height:2px}:host(.item-fill-none.item-interactive.ion-focus) .item-highlight,:host(.item-fill-none.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-none.item-interactive.ion-focus) .item-native,:host(.item-fill-none.item-interactive.item-has-focus) .item-native,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-highlight{border-width:var(--full-highlight-height);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-native{border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-highlight,:host(.item-fill-solid.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-native,:host(.item-fill-solid.item-interactive.item-has-focus) .item-native,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-has-focus) .item-native{caret-color:var(--highlight-background)}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-full){--border-width:0 0 1px 0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0;--show-inset-highlight:0}:host(.item-fill-outline) .item-highlight{--position-offset:calc(-1 * var(--border-width));top:var(--position-offset);width:calc(100% + 2 * var(--border-width));height:calc(100% + 2 * var(--border-width));-webkit-transition:none;transition:none}@supports (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{inset-inline-start:var(--position-offset)}}@supports not (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{left:var(--position-offset)}:host-context([dir=rtl]):host(.item-fill-outline) .item-highlight,:host-context([dir=rtl]).item-fill-outline .item-highlight{left:unset;right:unset;right:var(--position-offset)}@supports selector(:dir(rtl)){:host(.item-fill-outline) .item-highlight:dir(rtl){left:unset;right:unset;right:var(--position-offset)}}}:host(.item-fill-outline.ion-focused) .item-native,:host(.item-fill-outline.item-has-focus) .item-native{border-color:transparent}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted([slot=end]){-webkit-margin-start:32px;margin-inline-start:32px}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){-webkit-margin-end:8px;margin-inline-end:8px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]:not([slot=helper]):not([slot=error])){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){-webkit-padding-end:16px;padding-inline-end:16px}::slotted(ion-note[slot=end]){-webkit-padding-start:16px;padding-inline-start:16px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:8px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:2px;--padding-bottom:2px;--padding-start:.6em;--padding-end:.6em;min-height:25px;font-size:12px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #3880ff)}:host(.ion-color){--highlight-color-focused:var(--ion-color-contrast)}:host(.item-label-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid.ion-color),:host(.item-fill-outline.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid){--background:var(--ion-color-step-50, #f2f2f2);--background-hover:var(--ion-color-step-100, #e6e6e6);--background-focused:var(--ion-color-step-150, #d9d9d9);--border-width:0 0 1px 0;--inner-border-width:0;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid),:host-context([dir=rtl]).item-fill-solid{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid):dir(rtl){border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.item-fill-solid) .item-native{--border-color:var(--ion-color-step-500, gray)}:host(.item-fill-solid.ion-focused) .item-native,:host(.item-fill-solid.item-has-focus) .item-native{--background:var(--background-focused)}:host(.item-fill-solid.item-shape-round){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid.item-shape-round),:host-context([dir=rtl]).item-fill-solid.item-shape-round{border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid.item-shape-round):dir(rtl){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}}@media (any-hover: hover){:host(.item-fill-solid:hover) .item-native{--background:var(--background-hover);--border-color:var(--ion-color-step-750, #404040)}}:host(.item-fill-outline){--ripple-color:transparent;--background-focused:transparent;--background-hover:transparent;--border-color:var(--ion-color-step-500, gray);--border-width:1px;border:none;overflow:visible}:host(.item-fill-outline) .item-native{--native-padding-left:16px;border-radius:4px}:host(.item-fill-outline.item-shape-round) .item-native{--inner-padding-start:16px;border-radius:28px}:host(.item-fill-outline.item-shape-round) .item-bottom{-webkit-padding-start:32px;padding-inline-start:32px}:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-textarea:not(:first-child)){-webkit-transform:translateY(-14px);transform:translateY(-14px)}@media (any-hover: hover){:host(.item-fill-outline:hover) .item-native{--border-color:var(--ion-color-step-750, #404040)}}.item-counter{letter-spacing:0.0333333333em}',L9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.color=void 0,this.button=!1,this.detail=void 0,this.detailIcon=JC,this.disabled=!1,this.download=void 0,this.fill=void 0,this.shape=void 0,this.href=void 0,this.rel=void 0,this.lines=void 0,this.counter=!1,this.routerAnimation=void 0,this.routerDirection="forward",this.target=void 0,this.type="button",this.counterFormatter=void 0,this.counterString=void 0}counterFormatterChanged(){this.updateCounterOutput(this.getFirstInput())}handleIonInput(e){this.counter&&e.target===this.getFirstInput()&&this.updateCounterOutput(e.target)}labelColorChanged(e){const{color:t}=this;t===void 0&&(this.labelColorStyles=e.detail)}itemStyle(e){e.stopPropagation();const t=e.target.tagName,i=e.detail,r={},s=this.itemStyles.get(t)||{};let a=!1;Object.keys(i).forEach(o=>{if(i[o]){const l="item-".concat(o);s[l]||(a=!0),r[l]=!0}}),!a&&Object.keys(r).length!==Object.keys(s).length&&(a=!0),a&&(this.itemStyles.set(t,r),Fo(this))}connectedCallback(){this.counter&&this.updateCounterOutput(this.getFirstInput()),this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=hd(this.el,["aria-label"])}componentDidLoad(){const{el:e,counter:t,counterFormatter:i,fill:r,shape:s}=this;e.querySelector('[slot="helper"]')!==null&&Mn('The "helper" slot has been deprecated in favor of using the "helperText" property on ion-input or ion-textarea.',e),e.querySelector('[slot="error"]')!==null&&Mn('The "error" slot has been deprecated in favor of using the "errorText" property on ion-input or ion-textarea.',e),t===!0&&Mn('The "counter" property has been deprecated in favor of using the "counter" property on ion-input or ion-textarea.',e),i!==void 0&&Mn('The "counterFormatter" property has been deprecated in favor of using the "counterFormatter" property on ion-input or ion-textarea.',e),r!==void 0&&Mn('The "fill" property has been deprecated in favor of using the "fill" property on ion-input or ion-textarea.',e),s!==void 0&&Mn('The "shape" property has been deprecated in favor of using the "shape" property on ion-input or ion-textarea.',e),On(()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()})}setMultipleInputs(){const e=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),t=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),i=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=e.length+t.length>1||e.length+i.length>1||e.length>0&&this.isClickable()}hasCover(){return this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length===1&&!this.multipleInputs}isClickable(){return this.href!==void 0||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const e=this.el.querySelector(".ion-focusable");return this.canActivate()||e!==null}getFirstInput(){return this.el.querySelectorAll("ion-input, ion-textarea")[0]}updateCounterOutput(e){var t,i;const{counter:r,counterFormatter:s,defaultCounterFormatter:a}=this;if(r&&!this.multipleInputs&&(e==null?void 0:e.maxlength)!==void 0){const o=(i=(t=e==null?void 0:e.value)===null||t===void 0?void 0:t.toString().length)!==null&&i!==void 0?i:0;if(s===void 0)this.counterString=a(o,e.maxlength);else try{this.counterString=s(o,e.maxlength)}catch(l){lR("Exception in provided `counterFormatter`.",l),this.counterString=a(o,e.maxlength)}}}defaultCounterFormatter(e,t){return"".concat(e," / ").concat(t)}hasStartEl(){this.el.querySelector('[slot="start"]')!==null&&this.el.classList.add("item-has-start-slot")}render(){const{counterString:e,detail:t,detailIcon:i,download:r,fill:s,labelColorStyles:a,lines:o,disabled:l,href:c,rel:u,shape:d,target:h,routerAnimation:f,routerDirection:m,inheritedAriaAttributes:g}=this,_={},v=Xe(this),y=this.isClickable(),T=this.canActivate(),N=y?c===void 0?"button":"a":"div",P=N==="button"?{type:this.type}:{download:r,href:c,rel:u,target:h},F=y?{onClick:O=>{HT(c,O,m,f)}}:{},$=t!==void 0?t:v==="ios"&&y;this.itemStyles.forEach(O=>{Object.assign(_,O)});const B=l||_["item-interactive-disabled"]?"true":null,M=s||"none",Z=Hn("ion-list",this.el)&&!Hn("ion-radio-group",this.el);return re(Ct,{"aria-disabled":B,class:Object.assign(Object.assign(Object.assign({},_),a),gi(this.color,{item:!0,[v]:!0,"item-lines-default":o===void 0,["item-lines-".concat(o)]:o!==void 0,["item-fill-".concat(M)]:!0,["item-shape-".concat(d)]:d!==void 0,"item-disabled":l,"in-list":Z,"item-multiple-inputs":this.multipleInputs,"ion-activatable":T,"ion-focusable":this.focusable,"item-rtl":document.dir==="rtl"})),role:Z?"listitem":null},re(N,Object.assign({},P,g,{class:"item-native",part:"native",disabled:l},F),re("slot",{name:"start"}),re("div",{class:"item-inner"},re("div",{class:"input-wrapper"},re("slot",null)),re("slot",{name:"end"}),$&&re("ion-icon",{icon:i,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":i===JC}),re("div",{class:"item-inner-highlight"})),T&&v==="md"&&re("ion-ripple-effect",null),re("div",{class:"item-highlight"})),re("div",{class:"item-bottom"},re("slot",{name:"error"}),re("slot",{name:"helper"}),e&&re("ion-note",{class:"item-counter"},e)))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{counterFormatter:["counterFormatterChanged"]}}static get style(){return{ios:O9,md:M9}}},[49,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[4],download:[1],fill:[1],shape:[1],href:[1],rel:[1],lines:[1],counter:[4],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],counterFormatter:[16],multipleInputs:[32],focusable:[32],counterString:[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $9=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",B9='.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}',F9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.ionColor=Ge(this,"ionColor",7),this.ionStyle=Ge(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:e}=this;this.ionColor.emit({"item-label-color":e!==void 0,["ion-color-".concat(e)]:e!==void 0})}emitStyle(){const{inRange:e,position:t}=this;e||this.ionStyle.emit({label:!0,["label-".concat(t)]:t!==void 0})}render(){const e=this.position,t=Xe(this);return re(Ct,{class:gi(this.color,{[t]:!0,"in-item-color":Hn("ion-item.ion-color",this.el),["label-".concat(e)]:e!==void 0,"label-no-animate":this.noAnimate,"label-rtl":document.dir==="rtl"})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:$9,md:B9}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function q9(){if(typeof customElements>"u")return;["ion-label"].forEach(e=>{switch(e){case"ion-label":customElements.get(e)||customElements.define(e,F9);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Eu=()=>{if(rn!==void 0)return rn.Capacitor};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var vx;(function(n){n.Heavy="HEAVY",n.Medium="MEDIUM",n.Light="LIGHT"})(vx||(vx={}));var i2;(function(n){n.Success="SUCCESS",n.Warning="WARNING",n.Error="ERROR"})(i2||(i2={}));const m0={getEngine(){const n=window.TapticEngine;if(n)return n;const e=Eu();if(e!=null&&e.isPluginAvailable("Haptics"))return e.Plugins.Haptics},available(){if(!this.getEngine())return!1;const e=Eu();return(e==null?void 0:e.getPlatform())==="web"?typeof navigator<"u"&&navigator.vibrate!==void 0:!0},isCordova(){return window.TapticEngine!==void 0},isCapacitor(){return Eu()!==void 0},impact(n){const e=this.getEngine();if(!e)return;const t=this.isCapacitor()?n.style:n.style.toLowerCase();e.impact({style:t})},notification(n){const e=this.getEngine();if(!e)return;const t=this.isCapacitor()?n.type:n.type.toLowerCase();e.notification({type:t})},selection(){const n=this.isCapacitor()?vx.Light:"light";this.impact({style:n})},selectionStart(){const n=this.getEngine();n&&(this.isCapacitor()?n.selectionStart():n.gestureSelectionStart())},selectionChanged(){const n=this.getEngine();n&&(this.isCapacitor()?n.selectionChanged():n.gestureSelectionChanged())},selectionEnd(){const n=this.getEngine();n&&(this.isCapacitor()?n.selectionEnd():n.gestureSelectionEnd())}},WT=()=>m0.available(),U9=()=>{WT()&&m0.selectionStart()},j9=()=>{WT()&&m0.selectionChanged()},z9=()=>{WT()&&m0.selectionEnd()};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const V9="ION-CONTENT",wR="ion-content",xR=".ion-content-scroll-host",ER="".concat(wR,", ").concat(xR),Yl=n=>n.tagName===V9,r2=async n=>Yl(n)?(await new Promise(e=>Gl(n,e)),n.getScrollElement()):n,wx=n=>{const e=n.querySelector(xR);return e||n.querySelector(ER)},TR=n=>n.closest(ER),Qle=(n,e)=>Yl(n)?n.scrollToTop(e):Promise.resolve(n.scrollTo({top:0,left:0,behavior:e>0?"smooth":"auto"})),Kle=(n,e,t,i)=>Yl(n)?n.scrollByPoint(e,t,i):Promise.resolve(n.scrollBy({top:t,left:e,behavior:i>0?"smooth":"auto"})),xx=n=>wU(n,wR),Ex=n=>{if(Yl(n)){const e=n,t=e.scrollY;return e.scrollY=!1,t}else return n.style.setProperty("overflow","hidden"),!0},SR=(n,e)=>{Yl(n)?n.scrollY=e:n.style.removeProperty("overflow")};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Tx;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Tx||(Tx={}));var Sx;(function(n){n.Body="body",n.Ionic="ionic",n.Native="native",n.None="none"})(Sx||(Sx={}));const _R={getEngine(){const n=Eu();if(n!=null&&n.isPluginAvailable("Keyboard"))return n.Plugins.Keyboard},getResizeMode(){const n=this.getEngine();return n!=null&&n.getResizeMode?n.getResizeMode().catch(e=>{if(e.code!==Tx.Unimplemented)throw e}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const CR=n=>{if(xu===void 0||n===Sx.None||n===void 0)return null;const e=xu.querySelector("ion-app");return e!=null?e:xu.body},s2=n=>{const e=CR(n);return e===null?0:e.clientHeight},H9=async n=>{let e,t,i,r;const s=async()=>{const u=await _R.getResizeMode(),d=u===void 0?void 0:u.mode;e=()=>{r===void 0&&(r=s2(d)),i=!0,a(i,d)},t=()=>{i=!1,a(i,d)},rn==null||rn.addEventListener("keyboardWillShow",e),rn==null||rn.addEventListener("keyboardWillHide",t)},a=(u,d)=>{n&&n(u,o(d))},o=u=>{if(r===0||r===s2(u))return;const d=CR(u);if(d!==null)return new Promise(h=>{const f=()=>{d.clientHeight===r&&(m.disconnect(),h())},m=new ResizeObserver(f);m.observe(d)})},l=()=>{rn==null||rn.removeEventListener("keyboardWillShow",e),rn==null||rn.removeEventListener("keyboardWillHide",t),e=t=void 0},c=()=>i;return await s(),{init:s,destroy:l,isKeyboardVisible:c}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const W9=":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}",G9=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const e=Xe(this);return re(Ct,{class:{[e]:!0,"grid-fixed":this.fixed}},re("slot",null))}static get style(){return W9}},[1,"ion-grid",{fixed:[4]}]);function Q9(){if(typeof customElements>"u")return;["ion-grid"].forEach(e=>{switch(e){case"ion-grid":customElements.get(e)||customElements.define(e,G9);break}})}const K9=Q9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Y9="all 0.2s ease-in-out",a2=n=>{const e=document.querySelector("".concat(n,".ion-cloned-element"));if(e!==null)return e;const t=document.createElement(n);return t.classList.add("ion-cloned-element"),t.style.setProperty("display","none"),document.body.appendChild(t),t},o2=n=>{if(!n)return;const e=n.querySelectorAll("ion-toolbar");return{el:n,toolbars:Array.from(e).map(t=>{const i=t.querySelector("ion-title");return{el:t,background:t.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:i,innerTitleEl:i?i.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(t.querySelectorAll("ion-buttons"))}})}},X9=(n,e,t)=>{mf(()=>{const i=n.scrollTop,r=Vi(1,1+-i/500,1.1);t.querySelector("ion-refresher.refresher-native")===null&&Qr(()=>{e7(e.toolbars,r)})})},GT=(n,e)=>{n.collapse!=="fade"&&(e===void 0?n.style.removeProperty("--opacity-scale"):n.style.setProperty("--opacity-scale",e.toString()))},J9=(n,e,t)=>{if(!n[0].isIntersecting)return;const i=n[0].intersectionRatio>.9||t<=0?0:(1-n[0].intersectionRatio)*100/75;GT(e.el,i===1?void 0:i)},Z9=(n,e,t,i)=>{Qr(()=>{const r=i.scrollTop;J9(n,e,r);const s=n[0],a=s.intersectionRect,o=a.width*a.height,l=s.rootBounds.width*s.rootBounds.height,c=o===0&&l===0,u=Math.abs(a.left-s.boundingClientRect.left),d=Math.abs(a.right-s.boundingClientRect.right),h=o>0&&(u>=5||d>=5);c||h||(s.isIntersecting?(bh(e,!1),bh(t)):(a.x===0&&a.y===0||a.width!==0&&a.height!==0)&&r>0&&(bh(e),bh(t,!1),GT(e.el)))})},bh=(n,e=!0)=>{const t=n.el;e?(t.classList.remove("header-collapse-condense-inactive"),t.removeAttribute("aria-hidden")):(t.classList.add("header-collapse-condense-inactive"),t.setAttribute("aria-hidden","true"))},e7=(n=[],e=1,t=!1)=>{n.forEach(i=>{const r=i.ionTitleEl,s=i.innerTitleEl;!r||r.size!=="large"||(s.style.transition=t?Y9:"",s.style.transform="scale3d(".concat(e,", ").concat(e,", 1)"))})},l2=(n,e,t)=>{mf(()=>{const i=n.scrollTop,r=e.clientHeight,s=t?t.clientHeight:0;if(t!==null&&i<s){e.style.setProperty("--opacity-scale","0"),n.style.setProperty("clip-path","inset(".concat(r,"px 0px 0px 0px)"));return}const a=i-s,l=Vi(0,a/10,1);Qr(()=>{n.style.removeProperty("clip-path"),e.style.setProperty("--opacity-scale",l.toString())})})},t7="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:1px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",n7="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",i7=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(e,t)=>{const i=this.scrollEl=await r2(e);this.contentScrollCallback=()=>{l2(this.scrollEl,this.el,t)},i.addEventListener("scroll",this.contentScrollCallback),l2(this.scrollEl,this.el,t)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=ac(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(Xe(this)!=="ios")return;const{collapse:t}=this,i=t==="condense",r=t==="fade";if(this.destroyCollapsibleHeader(),i){const s=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),a=s?wx(s):null;Qr(()=>{const o=a2("ion-title");o.size="large",a2("ion-back-button")}),await this.setupCondenseHeader(a,s)}else if(r){const s=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),a=s?wx(s):null;if(!a){xx(this.el);return}const o=a.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(a,o)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,t){if(!e||!t){xx(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await r2(e);const i=t.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(i).find(o=>o.collapse!=="condense"),!this.collapsibleMainHeader)return;const r=o2(this.collapsibleMainHeader),s=o2(this.el);if(!r||!s)return;bh(r,!1),GT(r.el,0);const a=o=>{Z9(o,r,s,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(a,{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(s.toolbars[s.toolbars.length-1].el),this.contentScrollCallback=()=>{X9(this.scrollEl,s,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),Qr(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:e,inheritedAttributes:t}=this,i=Xe(this),r=this.collapse||"none",s=Hn("ion-menu",this.el)?"none":"banner";return re(Ct,Object.assign({role:s,class:{[i]:!0,["header-".concat(i)]:!0,"header-translucent":this.translucent,["header-collapse-".concat(r)]:!0,["header-translucent-".concat(i)]:this.translucent}},t),i==="ios"&&e&&re("div",{class:"header-background"}),re("slot",null))}get el(){return this}static get style(){return{ios:t7,md:n7}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);function r7(){if(typeof customElements>"u")return;["ion-header"].forEach(e=>{switch(e){case"ion-header":customElements.get(e)||customElements.define(e,i7);break}})}const s7=r7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const a7=":host{display:block;-o-object-fit:contain;object-fit:contain}img{display:block;width:100%;height:100%;-o-object-fit:inherit;object-fit:inherit;-o-object-position:inherit;object-position:inherit}",o7=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionImgWillLoad=Ge(this,"ionImgWillLoad",7),this.ionImgDidLoad=Ge(this,"ionImgDidLoad",7),this.ionError=Ge(this,"ionError",7),this.inheritedAttributes={},this.onLoad=()=>{this.ionImgDidLoad.emit()},this.onError=()=>{this.ionError.emit()},this.loadSrc=void 0,this.loadError=void 0,this.alt=void 0,this.src=void 0}srcChanged(){this.addIO()}componentWillLoad(){this.inheritedAttributes=hd(this.el,["draggable"])}componentDidLoad(){this.addIO()}addIO(){this.src!==void 0&&(typeof window<"u"&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype?(this.removeIO(),this.io=new IntersectionObserver(e=>{e[e.length-1].isIntersecting&&(this.load(),this.removeIO())}),this.io.observe(this.el)):setTimeout(()=>this.load(),200))}load(){this.loadError=this.onError,this.loadSrc=this.src,this.ionImgWillLoad.emit()}removeIO(){this.io&&(this.io.disconnect(),this.io=void 0)}render(){const{loadSrc:e,alt:t,onLoad:i,loadError:r,inheritedAttributes:s}=this,{draggable:a}=s;return re(Ct,{class:Xe(this)},re("img",{decoding:"async",src:e,alt:t,onLoad:i,onError:r,part:"image",draggable:l7(a)}))}get el(){return this}static get watchers(){return{src:["srcChanged"]}}static get style(){return a7}},[1,"ion-img",{alt:[1],src:[1],loadSrc:[32],loadError:[32]}]),l7=n=>{switch(n){case"true":return!0;case"false":return!1;default:return}};function c7(){if(typeof customElements>"u")return;["ion-img"].forEach(e=>{switch(e){case"ion-img":customElements.get(e)||customElements.define(e,o7);break}})}const u7=c7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const d7={bubbles:{dur:1e3,circles:9,fn:(n,e,t)=>{const i="".concat(n*e/t-n,"ms"),r=2*Math.PI*e/t;return{r:5,style:{top:"".concat(32*Math.sin(r),"%"),left:"".concat(32*Math.cos(r),"%"),"animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(n,e,t)=>{const i=e/t,r="".concat(n*i-n,"ms"),s=2*Math.PI*i;return{r:5,style:{top:"".concat(32*Math.sin(s),"%"),left:"".concat(32*Math.cos(s),"%"),"animation-delay":r}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(n,e)=>{const t=-(110*e)+"ms";return{r:6,style:{left:"".concat(32-32*e,"%"),"animation-delay":t}}}},lines:{dur:1e3,lines:8,fn:(n,e,t)=>{const i="rotate(".concat(360/t*e+(e<t/2?180:-180),"deg)"),r="".concat(n*e/t-n,"ms");return{y1:14,y2:26,style:{transform:i,"animation-delay":r}}}},"lines-small":{dur:1e3,lines:8,fn:(n,e,t)=>{const i="rotate(".concat(360/t*e+(e<t/2?180:-180),"deg)"),r="".concat(n*e/t-n,"ms");return{y1:12,y2:20,style:{transform:i,"animation-delay":r}}}},"lines-sharp":{dur:1e3,lines:12,fn:(n,e,t)=>{const i="rotate(".concat(30*e+(e<6?180:-180),"deg)"),r="".concat(n*e/t-n,"ms");return{y1:17,y2:29,style:{transform:i,"animation-delay":r}}}},"lines-sharp-small":{dur:1e3,lines:12,fn:(n,e,t)=>{const i="rotate(".concat(30*e+(e<6?180:-180),"deg)"),r="".concat(n*e/t-n,"ms");return{y1:12,y2:20,style:{transform:i,"animation-delay":r}}}}},c2=d7,h7=":host{display:inline-block;position:relative;width:28px;height:28px;color:var(--color);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.ion-color){color:var(--ion-color-base)}svg{-webkit-transform-origin:center;transform-origin:center;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0)}:host-context([dir=rtl]) svg{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}[dir=rtl] svg{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}@supports selector(:dir(rtl)){svg:dir(rtl){-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}}:host(.spinner-lines) line,:host(.spinner-lines-small) line{stroke-width:7px}:host(.spinner-lines-sharp) line,:host(.spinner-lines-sharp-small) line{stroke-width:4px}:host(.spinner-lines) line,:host(.spinner-lines-small) line,:host(.spinner-lines-sharp) line,:host(.spinner-lines-sharp-small) line{stroke-linecap:round;stroke:currentColor}:host(.spinner-lines) svg,:host(.spinner-lines-small) svg,:host(.spinner-lines-sharp) svg,:host(.spinner-lines-sharp-small) svg{-webkit-animation:spinner-fade-out 1s linear infinite;animation:spinner-fade-out 1s linear infinite}:host(.spinner-bubbles) svg{-webkit-animation:spinner-scale-out 1s linear infinite;animation:spinner-scale-out 1s linear infinite;fill:currentColor}:host(.spinner-circles) svg{-webkit-animation:spinner-fade-out 1s linear infinite;animation:spinner-fade-out 1s linear infinite;fill:currentColor}:host(.spinner-crescent) circle{fill:transparent;stroke-width:4px;stroke-dasharray:128px;stroke-dashoffset:82px;stroke:currentColor}:host(.spinner-crescent) svg{-webkit-animation:spinner-rotate 1s linear infinite;animation:spinner-rotate 1s linear infinite}:host(.spinner-dots) circle{stroke-width:0;fill:currentColor}:host(.spinner-dots) svg{-webkit-animation:spinner-dots 1s linear infinite;animation:spinner-dots 1s linear infinite}:host(.spinner-circular) svg{-webkit-animation:spinner-circular linear infinite;animation:spinner-circular linear infinite}:host(.spinner-circular) circle{-webkit-animation:spinner-circular-inner ease-in-out infinite;animation:spinner-circular-inner ease-in-out infinite;stroke:currentColor;stroke-dasharray:80px, 200px;stroke-dashoffset:0px;stroke-width:5.6;fill:none}:host(.spinner-paused),:host(.spinner-paused) svg,:host(.spinner-paused) circle{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes spinner-fade-out{0%{opacity:1}100%{opacity:0}}@keyframes spinner-fade-out{0%{opacity:1}100%{opacity:0}}@-webkit-keyframes spinner-scale-out{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1)}100%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}}@keyframes spinner-scale-out{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1)}100%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}}@-webkit-keyframes spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-dots{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}50%{-webkit-transform:scale(0.4, 0.4);transform:scale(0.4, 0.4);opacity:0.3}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}}@keyframes spinner-dots{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}50%{-webkit-transform:scale(0.4, 0.4);transform:scale(0.4, 0.4);opacity:0.3}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}}@-webkit-keyframes spinner-circular{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-circular{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-circular-inner{0%{stroke-dasharray:1px, 200px;stroke-dashoffset:0px}50%{stroke-dasharray:100px, 200px;stroke-dashoffset:-15px}100%{stroke-dasharray:100px, 200px;stroke-dashoffset:-125px}}@keyframes spinner-circular-inner{0%{stroke-dasharray:1px, 200px;stroke-dashoffset:0px}50%{stroke-dasharray:100px, 200px;stroke-dashoffset:-15px}100%{stroke-dasharray:100px, 200px;stroke-dashoffset:-125px}}",f7=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.duration=void 0,this.name=void 0,this.paused=!1}getName(){const e=this.name||pt.get("spinner"),t=Xe(this);return e||(t==="ios"?"lines":"circular")}render(){var e;const t=this,i=Xe(t),r=t.getName(),s=(e=c2[r])!==null&&e!==void 0?e:c2.lines,a=typeof t.duration=="number"&&t.duration>10?t.duration:s.dur,o=[];if(s.circles!==void 0)for(let l=0;l<s.circles;l++)o.push(p7(s,a,l,s.circles));else if(s.lines!==void 0)for(let l=0;l<s.lines;l++)o.push(m7(s,a,l,s.lines));return re(Ct,{class:gi(t.color,{[i]:!0,["spinner-".concat(r)]:!0,"spinner-paused":t.paused||pt.getBoolean("_testing")}),role:"progressbar",style:s.elmDuration?{animationDuration:a+"ms"}:{}},o)}static get style(){return h7}},[1,"ion-spinner",{color:[513],duration:[2],name:[1],paused:[4]}]),p7=(n,e,t,i)=>{const r=n.fn(e,t,i);return r.style["animation-duration"]=e+"ms",re("svg",{viewBox:r.viewBox||"0 0 64 64",style:r.style},re("circle",{transform:r.transform||"translate(32,32)",cx:r.cx,cy:r.cy,r:r.r,style:n.elmDuration?{animationDuration:e+"ms"}:{}}))},m7=(n,e,t,i)=>{const r=n.fn(e,t,i);return r.style["animation-duration"]=e+"ms",re("svg",{viewBox:r.viewBox||"0 0 64 64",style:r.style},re("line",{transform:"translate(32,32)",y1:r.y1,y2:r.y2}))};function g7(){if(typeof customElements>"u")return;["ion-spinner"].forEach(e=>{switch(e){case"ion-spinner":customElements.get(e)||customElements.define(e,f7);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const y7=(n,e,t)=>{let i;const r=()=>!(e()===void 0||n.label!==void 0||t()===null),s=()=>{r()&&On(()=>{a()})},a=()=>{const l=e();if(l===void 0)return;if(!r()){l.style.removeProperty("width");return}const c=t().scrollWidth;if(c===0&&l.offsetParent===null&&rn!==void 0&&"IntersectionObserver"in rn){if(i!==void 0)return;const u=i=new IntersectionObserver(d=>{d[0].intersectionRatio===1&&(a(),u.disconnect(),i=void 0)},{threshold:.01,root:n});u.observe(l);return}l.style.setProperty("width","".concat(c*.75,"px"))};return{calculateNotchWidth:s,destroy:()=>{i&&(i.disconnect(),i=void 0)}}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const b7=(n,e,t)=>{let i,r;rn!==void 0&&"MutationObserver"in rn&&(i=new MutationObserver(l=>{for(const c of l)for(const u of c.addedNodes)if(u.nodeType===Node.ELEMENT_NODE&&u.slot===e){t(),On(()=>s(u));return}}),i.observe(n,{childList:!0}));const s=l=>{var c;r&&(r.disconnect(),r=void 0),r=new MutationObserver(u=>{t();for(const d of u)for(const h of d.removedNodes)h.nodeType===Node.ELEMENT_NODE&&h.slot===e&&o()}),r.observe((c=l.parentElement)!==null&&c!==void 0?c:l,{subtree:!0,childList:!0})},a=()=>{i&&(i.disconnect(),i=void 0),o()},o=()=>{r&&(r.disconnect(),r=void 0)};return{destroy:a}},v7=(n,e,t)=>{const i=n==null?0:n.toString().length,r=w7(i,e);if(t===void 0)return r;try{return t(i,e)}catch(s){return lR("Exception in provided `counterFormatter`.",s),r}},w7=(n,e)=>"".concat(n," / ").concat(e);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const x7=".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:0.6;--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}.legacy-input.sc-ion-input-ios-h{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;background:var(--background)}.legacy-input.sc-ion-input-ios-h .native-input.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius)}ion-item.sc-ion-input-ios-h:not(.item-label):not(.item-has-modern-input),ion-item:not(.item-label):not(.item-has-modern-input) .sc-ion-input-ios-h{--padding-start:0}ion-item[slot=start].sc-ion-input-ios-h,ion-item [slot=start].sc-ion-input-ios-h,ion-item[slot=end].sc-ion-input-ios-h,ion-item [slot=end].sc-ion-input-ios-h{width:auto}.legacy-input.ion-color.sc-ion-input-ios-h{color:var(--ion-color-base)}.ion-color.sc-ion-input-ios-h{--highlight-color-focused:var(--ion-color-base)}.native-input.sc-ion-input-ios{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.cloned-input.sc-ion-input-ios{top:0;bottom:0;position:absolute;pointer-events:none}@supports (inset-inline-start: 0){.cloned-input.sc-ion-input-ios{inset-inline-start:0}}@supports not (inset-inline-start: 0){.cloned-input.sc-ion-input-ios{left:0}[dir=rtl].sc-ion-input-ios-h .cloned-input.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-ios .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.cloned-input.sc-ion-input-ios:dir(rtl){left:unset;right:unset;right:0}}}.cloned-input.sc-ion-input-ios:disabled{opacity:1}.legacy-input.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.input-clear-icon.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, #666666);visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{color:inherit}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.has-focus.sc-ion-input-ios-h{pointer-events:none}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h a.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h button.sc-ion-input-ios{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-ios-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-ios-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.input-wrapper.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;width:100%}.ion-touched.ion-invalid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:12px}.has-focus.ion-valid.sc-ion-input-ios-h,.ion-touched.ion-invalid.sc-ion-input-ios-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:block;color:var(--ion-color-step-550, #737373)}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:block}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:none}.input-bottom.sc-ion-input-ios .counter.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-ios,.sc-ion-input-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-ios,.input-outline-notch-hidden.sc-ion-input-ios{display:none}.input-wrapper.sc-ion-input-ios input.sc-ion-input-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text.sc-ion-input-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios:dir(rtl),.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-ios-h input.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:1}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.has-focus.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));font-size:inherit}.legacy-input.sc-ion-input-ios-h{--padding-top:10px;--padding-end:8px;--padding-bottom:10px;--padding-start:0}.item-label-stacked.sc-ion-input-ios-h,.item-label-stacked .sc-ion-input-ios-h,.item-label-floating.sc-ion-input-ios-h,.item-label-floating .sc-ion-input-ios-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0px}.input-clear-icon.sc-ion-input-ios ion-icon.sc-ion-input-ios{width:18px;height:18px}.sc-ion-input-ios-h:not(.legacy-input){min-height:44px}.input-label-placement-floating.sc-ion-input-ios-h,.input-label-placement-stacked.sc-ion-input-ios-h{min-height:56px}.legacy-input.sc-ion-input-ios-h .native-input[disabled].sc-ion-input-ios,.input-disabled.sc-ion-input-ios-h{opacity:0.3}",E7=".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:0.6;--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}.legacy-input.sc-ion-input-md-h{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;background:var(--background)}.legacy-input.sc-ion-input-md-h .native-input.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius)}ion-item.sc-ion-input-md-h:not(.item-label):not(.item-has-modern-input),ion-item:not(.item-label):not(.item-has-modern-input) .sc-ion-input-md-h{--padding-start:0}ion-item[slot=start].sc-ion-input-md-h,ion-item [slot=start].sc-ion-input-md-h,ion-item[slot=end].sc-ion-input-md-h,ion-item [slot=end].sc-ion-input-md-h{width:auto}.legacy-input.ion-color.sc-ion-input-md-h{color:var(--ion-color-base)}.ion-color.sc-ion-input-md-h{--highlight-color-focused:var(--ion-color-base)}.native-input.sc-ion-input-md{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.cloned-input.sc-ion-input-md{top:0;bottom:0;position:absolute;pointer-events:none}@supports (inset-inline-start: 0){.cloned-input.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.cloned-input.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h .cloned-input.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-md .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.cloned-input.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.cloned-input.sc-ion-input-md:disabled{opacity:1}.legacy-input.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.input-clear-icon.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, #666666);visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{color:inherit}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.has-focus.sc-ion-input-md-h{pointer-events:none}.has-focus.sc-ion-input-md-h input.sc-ion-input-md,.has-focus.sc-ion-input-md-h a.sc-ion-input-md,.has-focus.sc-ion-input-md-h button.sc-ion-input-md{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-md-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-md-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.input-wrapper.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;width:100%}.ion-touched.ion-invalid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:12px}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:block;color:var(--ion-color-step-550, #737373)}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:block}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:none}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-md-h input.sc-ion-input-md{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-md,.sc-ion-input-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-md,.input-outline-notch-hidden.sc-ion-input-md{display:none}.input-wrapper.sc-ion-input-md input.sc-ion-input-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text.sc-ion-input-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl),.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:1}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.input-fill-solid.sc-ion-input-md-h{--background:var(--ion-color-step-50, #f2f2f2);--border-color:var(--ion-color-step-500, gray);--border-radius:4px;--padding-start:16px;--padding-end:16px}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.input-fill-solid.ion-valid.sc-ion-input-md-h,.input-fill-solid.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-fill-solid.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}@media (any-hover: hover){.input-fill-solid.sc-ion-input-md-h:hover{--background:var(--ion-color-step-100, #e6e6e6);--border-color:var(--ion-color-step-750, #404040)}}.input-fill-solid.has-focus.sc-ion-input-md-h{--background:var(--ion-color-step-150, #d9d9d9);--border-color:var(--ion-color-step-750, #404040)}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl].input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}@supports selector(:dir(rtl)){.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}}.input-fill-solid.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{max-width:calc(100% / 0.75)}.input-fill-outline.sc-ion-input-md-h{--border-color:var(--ion-color-step-300, #b3b3b3);--border-radius:4px;--padding-start:16px;--padding-end:16px}.input-fill-outline.input-shape-round.sc-ion-input-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h,.input-fill-outline.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.input-fill-outline.sc-ion-input-md-h:hover{--border-color:var(--ion-color-step-750, #404040)}}.input-fill-outline.has-focus.sc-ion-input-md-h{--border-width:2px;--border-color:var(--highlight-color)}.input-fill-outline.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}.input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl),.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{position:relative}.has-focus.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}.input-fill-outline.sc-ion-input-md-h .input-outline-container.sc-ion-input-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{pointer-events:none}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.input-fill-outline.sc-ion-input-md-h .notch-spacer.sc-ion-input-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl].input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl] .input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px}@supports selector(:dir(rtl)){.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md:dir(rtl){border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px}}.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px;-ms-flex-positive:1;flex-grow:1}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl].input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl] .input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius)}@supports selector(:dir(rtl)){.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius)}}.has-focus.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.has-value.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{border-top:none}.sc-ion-input-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));font-size:inherit}.legacy-input.sc-ion-input-md-h{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:8px}.item-label-stacked.sc-ion-input-md-h,.item-label-stacked .sc-ion-input-md-h,.item-label-floating.sc-ion-input-md-h,.item-label-floating .sc-ion-input-md-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0}.input-clear-icon.sc-ion-input-md ion-icon.sc-ion-input-md{width:22px;height:22px}.legacy-input.sc-ion-input-md-h .native-input[disabled].sc-ion-input-md,.input-disabled.sc-ion-input-md-h{opacity:0.38}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{letter-spacing:0.0333333333em}.sc-ion-input-md-h:not(.legacy-input){min-height:56px}.input-label-placement-floating.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.has-focus.input-label-placement-floating.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-stacked.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.input-highlight.sc-ion-input-md{bottom:-1px;position:absolute;width:100%;height:2px;-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}@supports (inset-inline-start: 0){.input-highlight.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.input-highlight.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-md .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.input-highlight.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.has-focus.sc-ion-input-md-h .input-highlight.sc-ion-input-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{bottom:0}@supports (inset-inline-start: 0){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h -no-combinator.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl].in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.input-shape-round.sc-ion-input-md-h{--border-radius:16px}",T7=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.ionInput=Ge(this,"ionInput",7),this.ionChange=Ge(this,"ionChange",7),this.ionBlur=Ge(this,"ionBlur",7),this.ionFocus=Ge(this,"ionFocus",7),this.ionStyle=Ge(this,"ionStyle",7),this.inputId="ion-input-".concat(S7++),this.inheritedAttributes={},this.isComposing=!1,this.hasLoggedDeprecationWarning=!1,this.didInputClearOnEdit=!1,this.onInput=e=>{const t=e.target;t&&(this.value=t.value||""),this.emitInputChange(e)},this.onChange=e=>{this.emitValueChange(e)},this.onBlur=e=>{this.hasFocus=!1,this.emitStyle(),this.focusedValue!==this.value&&this.emitValueChange(e),this.didInputClearOnEdit=!1,this.ionBlur.emit(e)},this.onFocus=e=>{this.hasFocus=!0,this.focusedValue=this.value,this.emitStyle(),this.ionFocus.emit(e)},this.onKeydown=e=>{this.checkClearOnEdit(e)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=e=>{this.clearInput&&!this.readonly&&!this.disabled&&e&&(e.preventDefault(),e.stopPropagation(),this.setFocus()),this.value="",this.emitInputChange(e)},this.hasFocus=!1,this.color=void 0,this.accept=void 0,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.clearOnEdit=void 0,this.counter=!1,this.counterFormatter=void 0,this.debounce=void 0,this.disabled=!1,this.enterkeyhint=void 0,this.errorText=void 0,this.fill=void 0,this.inputmode=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.legacy=void 0,this.max=void 0,this.maxlength=void 0,this.min=void 0,this.minlength=void 0,this.multiple=void 0,this.name=this.inputId,this.pattern=void 0,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.shape=void 0,this.spellcheck=!1,this.step=void 0,this.size=void 0,this.type="text",this.value=""}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:i}=this;this.ionInput=t===void 0?i!=null?i:e:UI(e,t)}disabledChanged(){this.emitStyle()}placeholderChanged(){this.emitStyle()}valueChanged(){const e=this.nativeInput,t=this.getValue();e&&e.value!==t&&!this.isComposing&&(e.value=t),this.emitStyle()}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},ac(this.el)),hd(this.el,["tabindex","title","data-form-type"]))}connectedCallback(){const{el:e}=this;this.legacyFormController=vR(e),this.slotMutationController=b7(e,"label",()=>Fo(this)),this.notchController=y7(e,()=>this.notchSpacerEl,()=>this.labelSlot),this.emitStyle(),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){this.originalIonInput=this.ionInput}componentDidRender(){var e;(e=this.notchController)===null||e===void 0||e.calculateNotchWidth()}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}async setFocus(){this.nativeInput&&this.nativeInput.focus()}getInputElement(){return Promise.resolve(this.nativeInput)}emitValueChange(e){const{value:t}=this,i=t==null?t:t.toString();this.focusedValue=i,this.ionChange.emit({value:i,event:e})}emitInputChange(e){const{value:t}=this,i=t==null?t:t.toString();this.ionInput.emit({value:i,event:e})}shouldClearOnEdit(){const{type:e,clearOnEdit:t}=this;return t===void 0?e==="password":t}getValue(){return typeof this.value=="number"?this.value.toString():(this.value||"").toString()}emitStyle(){this.legacyFormController.hasLegacyControl()&&this.ionStyle.emit({interactive:!0,input:!0,"has-placeholder":this.placeholder!==void 0,"has-value":this.hasValue(),"has-focus":this.hasFocus,"interactive-disabled":this.disabled})}checkClearOnEdit(e){this.shouldClearOnEdit()&&(!this.didInputClearOnEdit&&this.hasValue()&&e.key!=="Enter"&&e.key!=="Tab"&&(this.value="",this.emitInputChange(e)),this.didInputClearOnEdit=!0)}hasValue(){return this.getValue().length>0}renderHintText(){const{helperText:e,errorText:t}=this;return[re("div",{class:"helper-text"},e),re("div",{class:"error-text"},t)]}renderCounter(){const{counter:e,maxlength:t,counterFormatter:i,value:r}=this;if(!(e!==!0||t===void 0))return re("div",{class:"counter"},v7(r,t,i))}renderBottomContent(){const{counter:e,helperText:t,errorText:i,maxlength:r}=this;if(!(!(t||i)&&!(e===!0&&r!==void 0)))return re("div",{class:"input-bottom"},this.renderHintText(),this.renderCounter())}renderLabel(){const{label:e}=this;return re("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},e===void 0?re("slot",{name:"label"}):re("div",{class:"label-text"},e))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return this.label!==void 0||this.labelSlot!==null}renderLabelContainer(){return Xe(this)==="md"&&this.fill==="outline"?[re("div",{class:"input-outline-container"},re("div",{class:"input-outline-start"}),re("div",{class:{"input-outline-notch":!0,"input-outline-notch-hidden":!this.hasLabel}},re("div",{class:"notch-spacer","aria-hidden":"true",ref:i=>this.notchSpacerEl=i},this.label)),re("div",{class:"input-outline-end"})),this.renderLabel()]:this.renderLabel()}renderInput(){const{disabled:e,fill:t,readonly:i,shape:r,inputId:s,labelPlacement:a}=this,o=Xe(this),l=this.getValue(),c=Hn("ion-item",this.el),u=o==="md"&&t!=="outline"&&!c;return re(Ct,{class:gi(this.color,{[o]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus,["input-fill-".concat(t)]:t!==void 0,["input-shape-".concat(r)]:r!==void 0,["input-label-placement-".concat(a)]:!0,"in-item":c,"in-item-color":Hn("ion-item.ion-color",this.el),"input-disabled":e})},re("label",{class:"input-wrapper"},this.renderLabelContainer(),re("div",{class:"native-wrapper"},re("input",Object.assign({class:"native-input",ref:d=>this.nativeInput=d,id:s,disabled:e,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:i,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:l,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown,onCompositionstart:this.onCompositionStart,onCompositionend:this.onCompositionEnd},this.inheritedAttributes)),this.clearInput&&!i&&!e&&re("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:d=>{d.preventDefault()},onClick:this.clearTextInput},re("ion-icon",{"aria-hidden":"true",icon:o==="ios"?ZC:e2}))),u&&re("div",{class:"input-highlight"})),this.renderBottomContent())}renderLegacyInput(){this.hasLoggedDeprecationWarning||(Mn('ion-input now requires providing a label with either the "label" property or the "aria-label" attribute. To migrate, remove any usage of "ion-label" and pass the label text to either the "label" property or the "aria-label" attribute.\n\nExample: <ion-input label="Email"></ion-input>\nExample with aria-label: <ion-input aria-label="Email"></ion-input>\n\nFor inputs that do not render the label immediately next to the input, developers may continue to use "ion-label" but must manually associate the label with the input by using "aria-labelledby".\n\nDevelopers can use the "legacy" property to continue using the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.',this.el),this.legacy&&Mn('ion-input is being used with the "legacy" property enabled which will forcibly enable the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.\n\nDevelopers can dismiss this warning by removing their usage of the "legacy" property and using the new input syntax.',this.el),this.hasLoggedDeprecationWarning=!0);const e=Xe(this),t=this.getValue(),i=this.inputId+"-lbl",r=BT(this.el);return r&&(r.id=i),re(Ct,{"aria-disabled":this.disabled?"true":null,class:gi(this.color,{[e]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus,"legacy-input":!0,"in-item-color":Hn("ion-item.ion-color",this.el)})},re("input",Object.assign({class:"native-input",ref:s=>this.nativeInput=s,"aria-labelledby":r?r.id:null,disabled:this.disabled,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:t,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown},this.inheritedAttributes)),this.clearInput&&!this.readonly&&!this.disabled&&re("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:s=>{s.preventDefault()},onClick:this.clearTextInput},re("ion-icon",{"aria-hidden":"true",icon:e==="ios"?ZC:e2})))}render(){const{legacyFormController:e}=this;return e.hasLegacyControl()?this.renderLegacyInput():this.renderInput()}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],placeholder:["placeholderChanged"],value:["valueChanged"]}}static get style(){return{ios:x7,md:E7}}},[38,"ion-input",{color:[513],accept:[1],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearOnEdit:[4,"clear-on-edit"],counter:[4],counterFormatter:[16],debounce:[2],disabled:[4],enterkeyhint:[1],errorText:[1,"error-text"],fill:[1],inputmode:[1],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],legacy:[4],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[4],required:[4],shape:[1],spellcheck:[4],step:[1],size:[2],type:[1],value:[1032],hasFocus:[32],setFocus:[64],getInputElement:[64]}]);let S7=0;function _7(){if(typeof customElements>"u")return;["ion-input","ion-icon"].forEach(e=>{switch(e){case"ion-input":customElements.get(e)||customElements.define(e,T7);break;case"ion-icon":customElements.get(e)||zT();break}})}const C7=_7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const A7=q9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const k7="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}.list-ios.list-inset ion-item:last-child{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-ios-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 0.55px 0}.list-ios-lines-inset .item-lines-default{--inner-border-width:0 0 0.55px 0;--border-width:0px}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",N7="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}@supports (inset-inline-start: 0){.list-md>.input:last-child::after{inset-inline-start:0}}@supports not (inset-inline-start: 0){.list-md>.input:last-child::after{left:0}:host-context([dir=rtl]) .list-md>.input:last-child::after{left:unset;right:unset;right:0}[dir=rtl] .list-md>.input:last-child::after{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.list-md>.input:last-child::after:dir(rtl){left:unset;right:unset;right:0}}}.list-md.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}.list-md.list-inset ion-item:first-child{--border-radius:2px 2px 0 0}.list-md.list-inset ion-item:last-child{--border-radius:0 0 2px, 2px;--border-width:0;--inner-border-width:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-md-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 1px 0}.list-md-lines-inset .item-lines-default{--inner-border-width:0 0 1px 0;--border-width:0px}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",D7=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.lines=void 0,this.inset=!1}async closeSlidingItems(){const e=this.el.querySelector("ion-item-sliding");return e!=null&&e.closeOpened?e.closeOpened():!1}render(){const e=Xe(this),{lines:t,inset:i}=this;return re(Ct,{role:"list",class:{[e]:!0,["list-".concat(e)]:!0,"list-inset":i,["list-lines-".concat(t)]:t!==void 0,["list-".concat(e,"-lines-").concat(t)]:t!==void 0}})}get el(){return this}static get style(){return{ios:k7,md:N7}}},[32,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);function P7(){if(typeof customElements>"u")return;["ion-list"].forEach(e=>{switch(e){case"ion-list":customElements.get(e)||customElements.define(e,D7);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const I7=P7,R7=":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{-webkit-transform:translateX(-9999px);transform:translateX(-9999px);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{inset-inline-start:0;inset-inline-end:auto}}@supports not (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{left:0;right:auto}:host-context([dir=rtl]):host(.menu-side-start) .menu-inner,:host-context([dir=rtl]).menu-side-start .menu-inner{left:unset;right:unset;left:auto;right:0}@supports selector(:dir(rtl)){:host(.menu-side-start) .menu-inner:dir(rtl){left:unset;right:unset;left:auto;right:0}}}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{inset-inline-start:auto;inset-inline-end:0}}@supports not (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{left:auto;right:0}:host-context([dir=rtl]):host(.menu-side-end) .menu-inner,:host-context([dir=rtl]).menu-side-end .menu-inner{left:unset;right:unset;left:0;right:auto}@supports selector(:dir(rtl)){:host(.menu-side-end) .menu-inner:dir(rtl){left:unset;right:unset;left:0;right:auto}}}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){width:var(--width);min-width:var(--min-width);max-width:var(--max-width)}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none !important;transform:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}:host(.menu-pane-visible) ion-backdrop{display:hidden !important;}:host(.menu-type-push){z-index:1000}:host(.menu-type-push) .show-backdrop{display:block}",O7=":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{-webkit-transform:translateX(-9999px);transform:translateX(-9999px);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{inset-inline-start:0;inset-inline-end:auto}}@supports not (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{left:0;right:auto}:host-context([dir=rtl]):host(.menu-side-start) .menu-inner,:host-context([dir=rtl]).menu-side-start .menu-inner{left:unset;right:unset;left:auto;right:0}@supports selector(:dir(rtl)){:host(.menu-side-start) .menu-inner:dir(rtl){left:unset;right:unset;left:auto;right:0}}}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{inset-inline-start:auto;inset-inline-end:0}}@supports not (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{left:auto;right:0}:host-context([dir=rtl]):host(.menu-side-end) .menu-inner,:host-context([dir=rtl]).menu-side-end .menu-inner{left:unset;right:unset;left:0;right:auto}@supports selector(:dir(rtl)){:host(.menu-side-end) .menu-inner:dir(rtl){left:unset;right:unset;left:0;right:auto}}}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){width:var(--width);min-width:var(--min-width);max-width:var(--max-width)}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none !important;transform:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}:host(.menu-pane-visible) ion-backdrop{display:hidden !important;}:host(.menu-type-overlay) .menu-inner{-webkit-box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18);box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18)}",M7="cubic-bezier(0.32,0.72,0,1)",L7="cubic-bezier(0.0,0.0,0.2,1)",$7="cubic-bezier(1, 0, 0.68, 0.28)",B7="cubic-bezier(0.4, 0, 0.6, 1)",u2='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',F7=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionWillOpen=Ge(this,"ionWillOpen",7),this.ionWillClose=Ge(this,"ionWillClose",7),this.ionDidOpen=Ge(this,"ionDidOpen",7),this.ionDidClose=Ge(this,"ionDidClose",7),this.ionMenuChange=Ge(this,"ionMenuChange",7),this.lastOnEnd=0,this.blocker=d0.createBlocker({disableScroll:!0}),this.didLoad=!1,this.isAnimating=!1,this._isOpen=!1,this.inheritedAttributes={},this.handleFocus=e=>{const t=Pg(document);t&&!t.contains(this.el)||this.trapKeyboardFocus(e,document)},this.isPaneVisible=!1,this.isEndSide=!1,this.contentId=void 0,this.menuId=void 0,this.type=void 0,this.disabled=!1,this.side="start",this.swipeGesture=!0,this.maxEdgeStart=50}typeChanged(e,t){const i=this.contentEl;i&&(t!==void 0&&i.classList.remove("menu-content-".concat(t)),i.classList.add("menu-content-".concat(e)),i.removeAttribute("style")),this.menuInnerEl&&this.menuInnerEl.removeAttribute("style"),this.animation=void 0}disabledChanged(){this.updateState(),this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}sideChanged(){this.isEndSide=jC(this.side),this.animation=void 0}swipeGestureChanged(){this.updateState()}async connectedCallback(){typeof customElements<"u"&&customElements!=null&&await customElements.whenDefined("ion-menu"),this.type===void 0&&(this.type=pt.get("menuType","overlay"));const e=this.contentId!==void 0?document.getElementById(this.contentId):null;if(e===null){console.error('Menu: must have a "content" element to listen for drag events on.');return}this.el.contains(e)&&console.error('Menu: "contentId" should refer to the main view\'s ion-content, not the ion-content inside of the ion-menu.'),this.contentEl=e,e.classList.add("menu-content"),this.typeChanged(this.type,void 0),this.sideChanged(),ka._register(this),this.menuChanged(),this.gesture=(await ci(()=>Promise.resolve().then(()=>XI),void 0)).createGesture({el:document,gestureName:"menu-swipe",gesturePriority:30,threshold:10,blurOnStart:!0,canStart:t=>this.canStart(t),onWillStart:()=>this.onWillStart(),onStart:()=>this.onStart(),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.updateState()}componentWillLoad(){this.inheritedAttributes=ac(this.el)}async componentDidLoad(){this.didLoad=!0,this.menuChanged(),this.updateState()}menuChanged(){this.didLoad&&this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}async disconnectedCallback(){await this.close(!1),this.blocker.destroy(),ka._unregister(this),this.animation&&this.animation.destroy(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.animation=void 0,this.contentEl=void 0}onSplitPaneChanged(e){this.isPaneVisible=e.detail.isPane(this.el),this.updateState()}onBackdropClick(e){this._isOpen&&this.lastOnEnd<e.timeStamp-100&&(e.composedPath&&!e.composedPath().includes(this.menuInnerEl))&&(e.preventDefault(),e.stopPropagation(),this.close())}onKeydown(e){e.key==="Escape"&&this.close()}isOpen(){return Promise.resolve(this._isOpen)}isActive(){return Promise.resolve(this._isActive())}open(e=!0){return this.setOpen(!0,e)}close(e=!0){return this.setOpen(!1,e)}toggle(e=!0){return this.setOpen(!this._isOpen,e)}setOpen(e,t=!0){return ka._setOpen(this,e,t)}focusFirstDescendant(){const{el:e}=this,t=e.querySelector(u2);t?t.focus():e.focus()}focusLastDescendant(){const{el:e}=this,t=Array.from(e.querySelectorAll(u2)),i=t.length>0?t[t.length-1]:null;i?i.focus():e.focus()}trapKeyboardFocus(e,t){const i=e.target;i&&(this.el.contains(i)?this.lastFocus=i:(this.focusFirstDescendant(),this.lastFocus===t.activeElement&&this.focusLastDescendant()))}async _setOpen(e,t=!0){return!this._isActive()||this.isAnimating||e===this._isOpen?!1:(this.beforeAnimation(e),await this.loadAnimation(),await this.startAnimation(e,t),this.afterAnimation(e),!0)}async loadAnimation(){const e=this.menuInnerEl.offsetWidth,t=jC(this.side);e===this.width&&this.animation!==void 0&&t===this.isEndSide||(this.width=e,this.isEndSide=t,this.animation&&(this.animation.destroy(),this.animation=void 0),this.animation=await ka._createAnimation(this.type,this),pt.getBoolean("animated",!0)||this.animation.duration(0),this.animation.fill("both"))}async startAnimation(e,t){const i=!e,r=Xe(this),s=r==="ios"?M7:L7,a=r==="ios"?$7:B7,o=this.animation.direction(i?"reverse":"normal").easing(i?a:s).onFinish(()=>{o.getDirection()==="reverse"&&o.direction("normal")});t?await o.play():o.play({sync:!0})}_isActive(){return!this.disabled&&!this.isPaneVisible}canSwipe(){return this.swipeGesture&&!this.isAnimating&&this._isActive()}canStart(e){return!!document.querySelector("ion-modal.show-modal")||!this.canSwipe()?!1:this._isOpen?!0:ka._getOpenSync()?!1:q7(window,e.currentX,this.isEndSide,this.maxEdgeStart)}onWillStart(){return this.beforeAnimation(!this._isOpen),this.loadAnimation()}onStart(){if(!this.isAnimating||!this.animation){xn(!1,"isAnimating has to be true");return}this.animation.progressStart(!0,this._isOpen?1:0)}onMove(e){if(!this.isAnimating||!this.animation){xn(!1,"isAnimating has to be true");return}const i=d2(e.deltaX,this._isOpen,this.isEndSide)/this.width;this.animation.progressStep(this._isOpen?1-i:i)}onEnd(e){if(!this.isAnimating||!this.animation){xn(!1,"isAnimating has to be true");return}const t=this._isOpen,i=this.isEndSide,r=d2(e.deltaX,t,i),s=this.width,a=r/s,o=e.velocityX,l=s/2,c=o>=0&&(o>.2||e.deltaX>l),u=o<=0&&(o<-.2||e.deltaX<-l),d=t?i?c:u:i?u:c;let h=!t&&d;t&&!d&&(h=!0),this.lastOnEnd=e.currentTime;let f=d?.001:-.001;const m=a<0?.01:a;f+=Ql([0,0],[.4,0],[.6,1],[1,1],Vi(0,m,.9999))[0]||0;const g=this._isOpen?!d:d;this.animation.easing("cubic-bezier(0.4, 0.0, 0.6, 1)").onFinish(()=>this.afterAnimation(h),{oneTimeCallback:!0}).progressEnd(g?1:0,this._isOpen?1-f:f,300)}beforeAnimation(e){xn(!this.isAnimating,"_before() should not be called while animating"),this.el.classList.add(h2),this.el.setAttribute("tabindex","0"),this.backdropEl&&this.backdropEl.classList.add(f2),this.contentEl&&(this.contentEl.classList.add(p2),this.contentEl.setAttribute("aria-hidden","true")),this.blocker.block(),this.isAnimating=!0,e?this.ionWillOpen.emit():this.ionWillClose.emit()}afterAnimation(e){var t;xn(this.isAnimating,"_before() should be called while animating"),this._isOpen=e,this.isAnimating=!1,this._isOpen||this.blocker.unblock(),e?(this.ionDidOpen.emit(),((t=document.activeElement)===null||t===void 0?void 0:t.closest("ion-menu"))!==this.el&&this.el.focus(),document.addEventListener("focus",this.handleFocus,!0)):(this.el.classList.remove(h2),this.el.removeAttribute("tabindex"),this.contentEl&&(this.contentEl.classList.remove(p2),this.contentEl.removeAttribute("aria-hidden")),this.backdropEl&&this.backdropEl.classList.remove(f2),this.animation&&this.animation.stop(),this.ionDidClose.emit(),document.removeEventListener("focus",this.handleFocus,!0))}updateState(){const e=this._isActive();this.gesture&&this.gesture.enable(e&&this.swipeGesture),!e&&this._isOpen&&this.forceClosing(),xu!=null&&xu.contains(this.el)&&(this.disabled||ka._setActiveMenu(this)),xn(!this.isAnimating,"can not be animating")}forceClosing(){xn(this._isOpen,"menu cannot be closed"),this.isAnimating=!0,this.animation.direction("reverse").play({sync:!0}),this.afterAnimation(!1)}render(){const{type:e,disabled:t,isPaneVisible:i,inheritedAttributes:r,side:s}=this,a=Xe(this);return re(Ct,{role:"navigation","aria-label":r["aria-label"]||"menu",class:{[a]:!0,["menu-type-".concat(e)]:!0,"menu-enabled":!t,["menu-side-".concat(s)]:!0,"menu-pane-visible":i}},re("div",{class:"menu-inner",part:"container",ref:o=>this.menuInnerEl=o},re("slot",null)),re("ion-backdrop",{ref:o=>this.backdropEl=o,class:"menu-backdrop",tappable:!1,stopPropagation:!1,part:"backdrop"}))}get el(){return this}static get watchers(){return{type:["typeChanged"],disabled:["disabledChanged"],side:["sideChanged"],swipeGesture:["swipeGestureChanged"]}}static get style(){return{ios:R7,md:O7}}},[33,"ion-menu",{contentId:[513,"content-id"],menuId:[513,"menu-id"],type:[1025],disabled:[1028],side:[513],swipeGesture:[4,"swipe-gesture"],maxEdgeStart:[2,"max-edge-start"],isPaneVisible:[32],isEndSide:[32],isOpen:[64],isActive:[64],open:[64],close:[64],toggle:[64],setOpen:[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]]),d2=(n,e,t)=>Math.max(0,e!==t?-n:n),q7=(n,e,t,i)=>t?e>=n.innerWidth-i:e<=i,h2="show-menu",f2="show-backdrop",p2="menu-content-open";function U7(){if(typeof customElements>"u")return;["ion-menu","ion-backdrop"].forEach(e=>{switch(e){case"ion-menu":customElements.get(e)||customElements.define(e,F7);break;case"ion-backdrop":customElements.get(e)||VT();break}})}const j7=U7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const AR=async n=>{const e=await ka.get(n);return!!(e&&await e.isActive())};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const z7=':host{--background:transparent;--color-focused:currentColor;--border-radius:initial;--padding-top:0;--padding-bottom:0;color:var(--color);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;pointer-events:none}:host(.menu-button-hidden){display:none}:host(.menu-button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity, 0)}}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #3880ff);--padding-start:5px;--padding-end:5px;height:32px;font-size:31px}:host(.ion-activated){opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',V7=':host{--background:transparent;--color-focused:currentColor;--border-radius:initial;--padding-top:0;--padding-bottom:0;color:var(--color);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;pointer-events:none}:host(.menu-button-hidden){display:none}:host(.menu-button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity, 0)}}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:.04;--border-radius:50%;--color:initial;--padding-start:8px;--padding-end:8px;width:48px;height:48px;font-size:24px}:host(.ion-color.ion-focused)::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}',H7=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.onClick=async()=>ka.toggle(this.menu),this.visible=!1,this.color=void 0,this.disabled=!1,this.menu=void 0,this.autoHide=!0,this.type="button"}componentWillLoad(){this.inheritedAttributes=ac(this.el)}componentDidLoad(){this.visibilityChanged()}async visibilityChanged(){this.visible=await AR(this.menu)}render(){const{color:e,disabled:t,inheritedAttributes:i}=this,r=Xe(this),s=pt.get("menuIcon",r==="ios"?RU:OU),a=this.autoHide&&!this.visible,o={type:this.type},l=i["aria-label"]||"menu";return re(Ct,{onClick:this.onClick,"aria-disabled":t?"true":null,"aria-hidden":a?"true":null,class:gi(e,{[r]:!0,button:!0,"menu-button-hidden":a,"menu-button-disabled":t,"in-toolbar":Hn("ion-toolbar",this.el),"in-toolbar-color":Hn("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0})},re("button",Object.assign({},o,{disabled:t,class:"button-native",part:"native","aria-label":l}),re("span",{class:"button-inner"},re("slot",null,re("ion-icon",{part:"icon",icon:s,mode:r,lazy:!1,"aria-hidden":"true"}))),r==="md"&&re("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:z7,md:V7}}},[33,"ion-menu-button",{color:[513],disabled:[4],menu:[1],autoHide:[4,"auto-hide"],type:[1],visible:[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]);function W7(){if(typeof customElements>"u")return;["ion-menu-button","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-menu-button":customElements.get(e)||customElements.define(e,H7);break;case"ion-icon":customElements.get(e)||zT();break;case"ion-ripple-effect":customElements.get(e)||p0();break}})}const G7=W7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Q7=":host(.menu-toggle-hidden){display:none}",K7=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.onClick=()=>ka.toggle(this.menu),this.visible=!1,this.menu=void 0,this.autoHide=!0}connectedCallback(){this.visibilityChanged()}async visibilityChanged(){this.visible=await AR(this.menu)}render(){const e=Xe(this),t=this.autoHide&&!this.visible;return re(Ct,{onClick:this.onClick,"aria-hidden":t?"true":null,class:{[e]:!0,"menu-toggle-hidden":t}},re("slot",null))}static get style(){return Q7}},[1,"ion-menu-toggle",{menu:[1],autoHide:[4,"auto-hide"],visible:[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]);function Y7(){if(typeof customElements>"u")return;["ion-menu-toggle"].forEach(e=>{switch(e){case"ion-menu-toggle":customElements.get(e)||customElements.define(e,K7);break}})}const X7=Y7,kR=1,NR=2,Og=3;class _x{constructor(e,t){this.component=e,this.params=t,this.state=kR}async init(e){if(this.state=NR,!this.element){const t=this.component;this.element=await jT(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){xn(this.state!==Og,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=Og}}const m2=(n,e,t)=>!n||n.component!==e?!1:jI(n.params,t),g2=(n,e)=>n?n instanceof _x?n:new _x(n,e):null,J7=n=>n.map(e=>e instanceof _x?e:"component"in e?g2(e.component,e.componentProps===null?void 0:e.componentProps):g2(e,void 0)).filter(e=>e!==null),Z7=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",ej=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ge(this,"ionNavWillLoad",7),this.ionNavWillChange=Ge(this,"ionNavWillChange",3),this.ionNavDidChange=Ge(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const e=Xe(this);this.swipeGesture=pt.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await ci(()=>import("./swipe-back-4216e829.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)Na(e.element,dv),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,t,i,r){return this.insert(-1,e,t,i,r)}insert(e,t,i,r,s){return this.insertPages(e,[{component:t,componentProps:i}],r,s)}insertPages(e,t,i,r){return this.queueTrns({insertStart:e,insertViews:t,opts:i},r)}pop(e,t){return this.removeIndex(-1,1,e,t)}popTo(e,t,i){const r={removeStart:-1,removeCount:-1,opts:t};return typeof e=="object"&&e.component?(r.removeView=e,r.removeStart=1):typeof e=="number"&&(r.removeStart=e+1),this.queueTrns(r,i)}popToRoot(e,t){return this.removeIndex(1,-1,e,t)}removeIndex(e,t=1,i,r){return this.queueTrns({removeStart:e,removeCount:t,opts:i},r)}setRoot(e,t,i,r){return this.setPages([{component:e,componentProps:t}],i,r)}setPages(e,t,i){return t!=null||(t={}),t.animated!==!0&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},i)}setRouteId(e,t,i,r){const s=this.getActiveSync();if(m2(s,e,t))return Promise.resolve({changed:!1,element:s.element});let a;const o=new Promise(u=>a=u);let l;const c={updateURL:!1,viewIsReady:u=>{let d;const h=new Promise(f=>d=f);return a({changed:!0,element:u,markVisible:async()=>{d(),await l}}),h}};if(i==="root")l=this.setRoot(e,t,c);else{const u=this.views.find(d=>m2(d,e,t));u?l=this.popTo(u,Object.assign(Object.assign({},c),{direction:"back",animationBuilder:r})):i==="forward"?l=this.push(e,t,Object.assign(Object.assign({},c),{animationBuilder:r})):i==="back"&&(l=this.setRoot(e,t,Object.assign(Object.assign({},c),{direction:"back",animated:!0,animationBuilder:r})))}return o}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const t=this.views,i=t.indexOf(e);return i>0?t[i-1]:void 0}async queueTrns(e,t){var i,r;if(this.isTransitioning&&(!((i=e.opts)===null||i===void 0)&&i.skipIfBusy))return!1;const s=new Promise((a,o)=>{e.resolve=a,e.reject=o});if(e.done=t,e.opts&&e.opts.updateURL!==!1&&this.useRouter){const a=document.querySelector("ion-router");if(a){const o=await a.canTransition();if(o===!1)return!1;if(typeof o=="string")return a.push(o,e.opts.direction||"back"),!1}}return((r=e.insertViews)===null||r===void 0?void 0:r.length)===0&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),s}success(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),t.opts.updateURL!==!1&&this.useRouter){const i=document.querySelector("ion-router");if(i){const r=e.direction==="back"?"back":"forward";i.navChanged(r)}}}failed(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}this.transInstr.length=0,this.fireError(e,t)}fireError(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return e?(this.runTransition(e),!0):!1}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const t=this.getActiveSync(),i=this.getEnteringView(e,t);if(!t&&!i)throw new Error("no views in the stack to be removed");i&&i.state===kR&&await i.init(this.el),this.postViewInit(i,t,e);const r=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&i!==t;r&&e.opts&&t&&(e.opts.direction==="back"&&(e.opts.animationBuilder=e.opts.animationBuilder||(i==null?void 0:i.animationBuilder)),t.animationBuilder=e.opts.animationBuilder);let s;r?s=await this.transition(i,t,e):s={hasCompleted:!0,requiresTransition:!1},this.success(s,e),this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var t,i,r;const s=this.views.length;if((t=e.opts)!==null&&t!==void 0||(e.opts={}),(i=(r=e.opts).delegate)!==null&&i!==void 0||(r.delegate=this.delegate),e.removeView!==void 0){xn(e.removeStart!==void 0,"removeView needs removeStart"),xn(e.removeCount!==void 0,"removeView needs removeCount");const l=this.views.indexOf(e.removeView);if(l<0)throw new Error("removeView was not found");e.removeStart+=l}e.removeStart!==void 0&&(e.removeStart<0&&(e.removeStart=s-1),e.removeCount<0&&(e.removeCount=s-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===s),e.insertViews&&((e.insertStart<0||e.insertStart>s)&&(e.insertStart=s),e.enteringRequiresTransition=e.insertStart===s);const a=e.insertViews;if(!a)return;xn(a.length>0,"length can not be zero");const o=J7(a);if(o.length===0)throw new Error("invalid views to insert");for(const l of o){l.delegate=e.opts.delegate;const c=l.nav;if(c&&c!==this)throw new Error("inserted view was already inserted");if(l.state===Og)throw new Error("inserted view was already destroyed")}e.insertViews=o}getEnteringView(e,t){const i=e.insertViews;if(i!==void 0)return i[i.length-1];const r=e.removeStart;if(r!==void 0){const s=this.views,a=r+e.removeCount;for(let o=s.length-1;o>=0;o--){const l=s[o];if((o<r||o>=a)&&l!==t)return l}}}postViewInit(e,t,i){var r,s,a;xn(t||e,"Both leavingView and enteringView are null"),xn(i.resolve,"resolve must be valid"),xn(i.reject,"reject must be valid");const o=i.opts,{insertViews:l,removeStart:c,removeCount:u}=i;let d;if(c!==void 0&&u!==void 0){xn(c>=0,"removeStart can not be negative"),xn(u>=0,"removeCount can not be negative"),d=[];for(let f=c;f<c+u;f++){const m=this.views[f];m!==void 0&&m!==e&&m!==t&&d.push(m)}(r=o.direction)!==null&&r!==void 0||(o.direction="back")}const h=this.views.length+((s=l==null?void 0:l.length)!==null&&s!==void 0?s:0)-(u!=null?u:0);if(xn(h>=0,"final balance can not be negative"),h===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(l){let f=i.insertStart;for(const m of l)this.insertViewAt(m,f),f++;i.enteringRequiresTransition&&((a=o.direction)!==null&&a!==void 0||(o.direction="forward"))}if(d&&d.length>0){for(const f of d)Na(f.element,zI),Na(f.element,VI),Na(f.element,dv);for(const f of d)this.destroyView(f)}}async transition(e,t,i){const r=i.opts,s=r.progressAnimation?d=>{d!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,d.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0}),d.progressEnd(0,0,0)):this.sbAni=d}:void 0,a=Xe(this),o=e.element,l=t&&t.element,c=Object.assign(Object.assign({mode:a,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:s,animated:this.animated&&pt.getBoolean("animated",!0),enteringEl:o,leavingEl:l},r),{animationBuilder:r.animationBuilder||this.animation||pt.get("navAnimation")}),{hasCompleted:u}=await HI(c);return this.transitionFinish(u,e,t,r)}transitionFinish(e,t,i,r){const s=e?t:i;return s&&this.unmountInactiveViews(s),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:i,direction:r.direction}}insertViewAt(e,t){const i=this.views,r=i.indexOf(e);r>-1?(xn(e.nav===this,"view is not part of the nav"),i.splice(r,1),i.splice(t,0,e)):(xn(!e.nav,"nav is used"),e.nav=this,i.splice(t,0,e))}removeView(e){xn(e.state===NR||e.state===Og,"view state should be loaded or destroyed");const t=this.views,i=t.indexOf(e);xn(i>-1,"view must be part of the stack"),i>=0&&t.splice(i,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const t=this.views,i=t.indexOf(e);for(let r=t.length-1;r>=0;r--){const s=t[r],a=s.element;a&&(r>i?(Na(a,dv),this.destroyView(s)):r<i&&mx(a,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,t,i){if(this.sbAni){this.sbAni.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0});let r=e?-.001:.001;e?r+=Ql([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=Ql([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,r,i)}else this.gestureOrAnimationInProgress=!1}render(){return re("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return Z7}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);function tj(){if(typeof customElements>"u")return;["ion-nav"].forEach(e=>{switch(e){case"ion-nav":customElements.get(e)||customElements.define(e,ej);break}})}const nj=tj;function ij(n){return n%1===0?0:n.toString().split(".")[1].length}function rj(n,...e){const t=Math.max(...e.map(i=>ij(i)));return Number(n.toFixed(t))}const sj=":host{--knob-handle-size:calc(var(--knob-size) * 2);display:-ms-flexbox;display:flex;position:relative;-ms-flex:3;flex:3;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.range-disabled){pointer-events:none}::slotted(ion-label){-ms-flex:initial;flex:initial}::slotted(ion-icon[slot]){font-size:24px}.range-slider{position:relative;-ms-flex:1;flex:1;width:100%;height:var(--height);contain:size layout style;cursor:-webkit-grab;cursor:grab;-ms-touch-action:pan-y;touch-action:pan-y}:host(.range-pressed) .range-slider{cursor:-webkit-grabbing;cursor:grabbing}.range-pin{position:absolute;background:var(--ion-color-base);color:var(--ion-color-contrast);text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.range-knob-handle{top:calc((var(--height) - var(--knob-handle-size)) / 2);-webkit-margin-start:calc(0px - var(--knob-handle-size) / 2);margin-inline-start:calc(0px - var(--knob-handle-size) / 2);position:absolute;width:var(--knob-handle-size);height:var(--knob-handle-size);text-align:center}@supports (inset-inline-start: 0){.range-knob-handle{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob-handle{left:0}:host-context([dir=rtl]) .range-knob-handle{left:unset;right:unset;right:0}[dir=rtl] .range-knob-handle{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-knob-handle{left:unset}[dir=rtl] .range-knob-handle{left:unset}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset}}.range-knob-handle:active,.range-knob-handle:focus{outline:none}.range-bar-container{border-radius:var(--bar-border-radius);top:calc((var(--height) - var(--bar-height)) / 2);position:absolute;width:100%;height:var(--bar-height)}@supports (inset-inline-start: 0){.range-bar-container{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-bar-container{left:0}:host-context([dir=rtl]) .range-bar-container{left:unset;right:unset;right:0}[dir=rtl] .range-bar-container{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-bar-container{left:unset}[dir=rtl] .range-bar-container{left:unset}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset}}.range-bar{border-radius:var(--bar-border-radius);position:absolute;width:100%;height:var(--bar-height);background:var(--bar-background);pointer-events:none}.range-knob{border-radius:var(--knob-border-radius);top:calc(50% - var(--knob-size) / 2);position:absolute;width:var(--knob-size);height:var(--knob-size);background:var(--knob-background);-webkit-box-shadow:var(--knob-box-shadow);box-shadow:var(--knob-box-shadow);z-index:2;pointer-events:none}@supports (inset-inline-start: 0){.range-knob{inset-inline-start:calc(50% - var(--knob-size) / 2)}}@supports not (inset-inline-start: 0){.range-knob{left:calc(50% - var(--knob-size) / 2)}:host-context([dir=rtl]) .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}[dir=rtl] .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}}}:host-context([dir=rtl]) .range-knob{left:unset}[dir=rtl] .range-knob{left:unset}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset}}:host(.range-pressed) .range-bar-active{will-change:left, right}:host(.in-item){width:100%}:host([slot=start]),:host([slot=end]){width:auto}:host(.in-item) ::slotted(ion-label){-ms-flex-item-align:center;align-self:center}.range-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit}::slotted([slot=label]){max-width:200px;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}:host(.range-label-placement-start) .range-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.range-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-end) .range-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.range-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host{--knob-border-radius:50%;--knob-background:#ffffff;--knob-box-shadow:0px 0.5px 4px rgba(0, 0, 0, 0.12), 0px 6px 13px rgba(0, 0, 0, 0.12);--knob-size:26px;--bar-height:4px;--bar-background:var(--ion-color-step-900, #e6e6e6);--bar-background-active:var(--ion-color-primary, #3880ff);--bar-border-radius:2px;--height:42px}:host(.legacy-range){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:8px;padding-bottom:8px}:host(.ion-color) .range-bar-active,:host(.ion-color) .range-tick-active{background:var(--ion-color-base)}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-has-pin){padding-top:20px}.range-bar-active{bottom:0;width:auto;background:var(--bar-background-active)}.range-bar-active.has-ticks{border-radius:0;-webkit-margin-start:-2px;margin-inline-start:-2px;-webkit-margin-end:-2px;margin-inline-end:-2px}.range-tick{-webkit-margin-start:-2px;margin-inline-start:-2px;border-radius:0;position:absolute;top:17px;width:4px;height:8px;background:var(--ion-color-step-900, #e6e6e6);pointer-events:none}.range-tick-active{background:var(--bar-background-active)}.range-pin{-webkit-transform:translate3d(0,  28px,  0) scale(0.01);transform:translate3d(0,  28px,  0) scale(0.01);-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;display:inline-block;position:relative;top:-20px;min-width:28px;-webkit-transition:-webkit-transform 120ms ease;transition:-webkit-transform 120ms ease;transition:transform 120ms ease;transition:transform 120ms ease, -webkit-transform 120ms ease;background:transparent;color:var(--ion-text-color, #000);font-size:12px;text-align:center}.range-knob-pressed .range-pin,.range-knob-handle.ion-focused .range-pin{-webkit-transform:translate3d(0,  0,  0) scale(1);transform:translate3d(0,  0,  0) scale(1)}:host(.range-disabled){opacity:0.3}",aj=':host{--knob-handle-size:calc(var(--knob-size) * 2);display:-ms-flexbox;display:flex;position:relative;-ms-flex:3;flex:3;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.range-disabled){pointer-events:none}::slotted(ion-label){-ms-flex:initial;flex:initial}::slotted(ion-icon[slot]){font-size:24px}.range-slider{position:relative;-ms-flex:1;flex:1;width:100%;height:var(--height);contain:size layout style;cursor:-webkit-grab;cursor:grab;-ms-touch-action:pan-y;touch-action:pan-y}:host(.range-pressed) .range-slider{cursor:-webkit-grabbing;cursor:grabbing}.range-pin{position:absolute;background:var(--ion-color-base);color:var(--ion-color-contrast);text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.range-knob-handle{top:calc((var(--height) - var(--knob-handle-size)) / 2);-webkit-margin-start:calc(0px - var(--knob-handle-size) / 2);margin-inline-start:calc(0px - var(--knob-handle-size) / 2);position:absolute;width:var(--knob-handle-size);height:var(--knob-handle-size);text-align:center}@supports (inset-inline-start: 0){.range-knob-handle{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob-handle{left:0}:host-context([dir=rtl]) .range-knob-handle{left:unset;right:unset;right:0}[dir=rtl] .range-knob-handle{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-knob-handle{left:unset}[dir=rtl] .range-knob-handle{left:unset}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset}}.range-knob-handle:active,.range-knob-handle:focus{outline:none}.range-bar-container{border-radius:var(--bar-border-radius);top:calc((var(--height) - var(--bar-height)) / 2);position:absolute;width:100%;height:var(--bar-height)}@supports (inset-inline-start: 0){.range-bar-container{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-bar-container{left:0}:host-context([dir=rtl]) .range-bar-container{left:unset;right:unset;right:0}[dir=rtl] .range-bar-container{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-bar-container{left:unset}[dir=rtl] .range-bar-container{left:unset}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset}}.range-bar{border-radius:var(--bar-border-radius);position:absolute;width:100%;height:var(--bar-height);background:var(--bar-background);pointer-events:none}.range-knob{border-radius:var(--knob-border-radius);top:calc(50% - var(--knob-size) / 2);position:absolute;width:var(--knob-size);height:var(--knob-size);background:var(--knob-background);-webkit-box-shadow:var(--knob-box-shadow);box-shadow:var(--knob-box-shadow);z-index:2;pointer-events:none}@supports (inset-inline-start: 0){.range-knob{inset-inline-start:calc(50% - var(--knob-size) / 2)}}@supports not (inset-inline-start: 0){.range-knob{left:calc(50% - var(--knob-size) / 2)}:host-context([dir=rtl]) .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}[dir=rtl] .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}}}:host-context([dir=rtl]) .range-knob{left:unset}[dir=rtl] .range-knob{left:unset}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset}}:host(.range-pressed) .range-bar-active{will-change:left, right}:host(.in-item){width:100%}:host([slot=start]),:host([slot=end]){width:auto}:host(.in-item) ::slotted(ion-label){-ms-flex-item-align:center;align-self:center}.range-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit}::slotted([slot=label]){max-width:200px;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}:host(.range-label-placement-start) .range-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.range-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-end) .range-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.range-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host{--knob-border-radius:50%;--knob-background:var(--bar-background-active);--knob-box-shadow:none;--knob-size:18px;--bar-height:2px;--bar-background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.26);--bar-background-active:var(--ion-color-primary, #3880ff);--bar-border-radius:0;--height:42px;--pin-background:var(--ion-color-primary, #3880ff);--pin-color:var(--ion-color-primary-contrast, #fff);font-size:12px}::slotted([slot=label]),.label-text{font-size:initial}:host(.legacy-range){-webkit-padding-start:14px;padding-inline-start:14px;-webkit-padding-end:14px;padding-inline-end:14px;padding-top:8px;padding-bottom:8px}:host(.ion-color) .range-bar{background:rgba(var(--ion-color-base-rgb), 0.26)}:host(.ion-color) .range-bar-active,:host(.ion-color) .range-knob,:host(.ion-color) .range-knob::before,:host(.ion-color) .range-pin,:host(.ion-color) .range-pin::before,:host(.ion-color) .range-tick{background:var(--ion-color-base);color:var(--ion-color-contrast)}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:14px;margin-inline-end:14px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:14px;margin-inline-start:14px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-has-pin){padding-top:28px}.range-bar-active{bottom:0;width:auto;background:var(--bar-background-active)}.range-knob{-webkit-transform:scale(0.67);transform:scale(0.67);-webkit-transition-duration:120ms;transition-duration:120ms;-webkit-transition-property:background-color, border, -webkit-transform;transition-property:background-color, border, -webkit-transform;transition-property:transform, background-color, border;transition-property:transform, background-color, border, -webkit-transform;-webkit-transition-timing-function:ease;transition-timing-function:ease;z-index:2}.range-knob::before{border-radius:50%;position:absolute;width:var(--knob-size);height:var(--knob-size);-webkit-transform:scale(1);transform:scale(1);-webkit-transition:0.267s cubic-bezier(0, 0, 0.58, 1);transition:0.267s cubic-bezier(0, 0, 0.58, 1);background:var(--knob-background);content:"";opacity:0.13;pointer-events:none}@supports (inset-inline-start: 0){.range-knob::before{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob::before{left:0}:host-context([dir=rtl]) .range-knob::before{left:unset;right:unset;right:0}[dir=rtl] .range-knob::before{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob::before:dir(rtl){left:unset;right:unset;right:0}}}.range-tick{position:absolute;top:calc((var(--height) - var(--bar-height)) / 2);width:var(--bar-height);height:var(--bar-height);background:var(--bar-background-active);z-index:1;pointer-events:none}.range-tick-active{background:transparent}.range-pin{padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;border-radius:50%;-webkit-transform:translate3d(0,  0,  0) scale(0.01);transform:translate3d(0,  0,  0) scale(0.01);display:inline-block;position:relative;min-width:28px;height:28px;-webkit-transition:background 120ms ease, -webkit-transform 120ms ease;transition:background 120ms ease, -webkit-transform 120ms ease;transition:transform 120ms ease, background 120ms ease;transition:transform 120ms ease, background 120ms ease, -webkit-transform 120ms ease;background:var(--pin-background);color:var(--pin-color);text-align:center}.range-pin::before{top:3px;-webkit-margin-start:-13px;margin-inline-start:-13px;border-radius:50% 50% 50% 0;position:absolute;width:26px;height:26px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transition:background 120ms ease;transition:background 120ms ease;background:var(--pin-background);content:"";z-index:-1}@supports (inset-inline-start: 0){.range-pin::before{inset-inline-start:50%}}@supports not (inset-inline-start: 0){.range-pin::before{left:50%}:host-context([dir=rtl]) .range-pin::before{left:unset;right:unset;right:50%}[dir=rtl] .range-pin::before{left:unset;right:unset;right:50%}@supports selector(:dir(rtl)){.range-pin::before:dir(rtl){left:unset;right:unset;right:50%}}}:host-context([dir=rtl]) .range-pin::before{left:unset}[dir=rtl] .range-pin::before{left:unset}@supports selector(:dir(rtl)){.range-pin::before:dir(rtl){left:unset}}.range-knob-pressed .range-pin,.range-knob-handle.ion-focused .range-pin{-webkit-transform:translate3d(0,  -24px,  0) scale(1);transform:translate3d(0,  -24px,  0) scale(1)}@media (any-hover: hover){.range-knob-handle:hover .range-knob:before{-webkit-transform:scale(2);transform:scale(2);opacity:0.13}}.range-knob-handle.ion-activated .range-knob:before,.range-knob-handle.ion-focused .range-knob:before,.range-knob-handle.range-knob-pressed .range-knob:before{-webkit-transform:scale(2);transform:scale(2)}.range-knob-handle.ion-focused .range-knob::before{opacity:0.13}.range-knob-handle.ion-activated .range-knob::before,.range-knob-handle.range-knob-pressed .range-knob::before{opacity:0.25}:host(:not(.range-has-pin)) .range-knob-pressed .range-knob,:host(:not(.range-has-pin)) .range-knob-handle.ion-focused .range-knob{-webkit-transform:scale(1);transform:scale(1)}:host(.range-disabled) .range-bar-active,:host(.range-disabled) .range-bar,:host(.range-disabled) .range-tick{background-color:var(--ion-color-step-250, #bfbfbf)}:host(.range-disabled) .range-knob{-webkit-transform:scale(0.55);transform:scale(0.55);outline:5px solid #fff;background-color:var(--ion-color-step-250, #bfbfbf)}:host(.range-disabled) .label-text-wrapper,:host(.range-disabled) ::slotted([slot=start]),:host(.range-disabled) ::slotted([slot=end]){opacity:0.38}',oj=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=Ge(this,"ionChange",7),this.ionInput=Ge(this,"ionInput",7),this.ionStyle=Ge(this,"ionStyle",7),this.ionFocus=Ge(this,"ionFocus",7),this.ionBlur=Ge(this,"ionBlur",7),this.ionKnobMoveStart=Ge(this,"ionKnobMoveStart",7),this.ionKnobMoveEnd=Ge(this,"ionKnobMoveEnd",7),this.rangeId="ion-r-".concat(lj++),this.didLoad=!1,this.noUpdate=!1,this.hasFocus=!1,this.inheritedAttributes={},this.contentEl=null,this.initialContentScrollY=!0,this.hasLoggedDeprecationWarning=!1,this.clampBounds=e=>Vi(this.min,e,this.max),this.ensureValueInBounds=e=>this.dualKnobs?{lower:this.clampBounds(e.lower),upper:this.clampBounds(e.upper)}:this.clampBounds(e),this.setupGesture=async()=>{const e=this.rangeSlider;e&&(this.gesture=(await ci(()=>Promise.resolve().then(()=>XI),void 0)).createGesture({el:e,gestureName:"range",gesturePriority:100,threshold:0,onStart:t=>this.onStart(t),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.gesture.enable(!this.disabled))},this.handleKeyboard=(e,t)=>{const{ensureValueInBounds:i}=this;let r=this.step;r=r>0?r:1,r=r/(this.max-this.min),t||(r*=-1),e==="A"?this.ratioA=Vi(0,this.ratioA+r,1):this.ratioB=Vi(0,this.ratioB+r,1),this.ionKnobMoveStart.emit({value:i(this.value)}),this.updateValue(),this.emitValueChange(),this.ionKnobMoveEnd.emit({value:i(this.value)})},this.onBlur=()=>{this.hasFocus&&(this.hasFocus=!1,this.ionBlur.emit(),this.emitStyle())},this.onFocus=()=>{this.hasFocus||(this.hasFocus=!0,this.ionFocus.emit(),this.emitStyle())},this.ratioA=0,this.ratioB=0,this.pressedKnob=void 0,this.color=void 0,this.debounce=void 0,this.name=this.rangeId,this.label=void 0,this.dualKnobs=!1,this.min=0,this.max=100,this.pin=!1,this.pinFormatter=e=>Math.round(e),this.snaps=!1,this.step=1,this.ticks=!0,this.activeBarStart=void 0,this.disabled=!1,this.value=0,this.labelPlacement="start",this.legacy=void 0}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:i}=this;this.ionInput=t===void 0?i!=null?i:e:UI(e,t)}minChanged(){this.noUpdate||this.updateRatio()}maxChanged(){this.noUpdate||this.updateRatio()}activeBarStartChanged(){const{activeBarStart:e}=this;e!==void 0&&(e>this.max?(Mn("Range: The value of activeBarStart (".concat(e,") is greater than the max (").concat(this.max,"). Valid values are greater than or equal to the min value and less than or equal to the max value."),this.el),this.activeBarStart=this.max):e<this.min&&(Mn("Range: The value of activeBarStart (".concat(e,") is less than the min (").concat(this.min,"). Valid values are greater than or equal to the min value and less than or equal to the max value."),this.el),this.activeBarStart=this.min))}disabledChanged(){this.gesture&&this.gesture.enable(!this.disabled),this.emitStyle()}valueChanged(){this.noUpdate||this.updateRatio()}componentWillLoad(){this.el.hasAttribute("id")&&(this.rangeId=this.el.getAttribute("id")),this.inheritedAttributes=ac(this.el)}componentDidLoad(){this.originalIonInput=this.ionInput,this.setupGesture(),this.didLoad=!0}connectedCallback(){const{el:e}=this;this.legacyFormController=vR(e),this.updateRatio(),this.debounceChanged(),this.disabledChanged(),this.activeBarStartChanged(),this.didLoad&&this.setupGesture(),this.contentEl=TR(this.el)}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}getValue(){var e;const t=(e=this.value)!==null&&e!==void 0?e:0;return this.dualKnobs?typeof t=="object"?t:{lower:0,upper:t}:typeof t=="object"?t.upper:t}emitStyle(){this.legacyFormController.hasLegacyControl()&&this.ionStyle.emit({interactive:!0,"interactive-disabled":this.disabled})}emitValueChange(){this.value=this.ensureValueInBounds(this.value),this.ionChange.emit({value:this.value})}onStart(e){const{contentEl:t}=this;t&&(this.initialContentScrollY=Ex(t));const i=this.rect=this.rangeSlider.getBoundingClientRect(),r=e.currentX;let s=Vi(0,(r-i.left)/i.width,1);Bm(this.el)&&(s=1-s),this.pressedKnob=!this.dualKnobs||Math.abs(this.ratioA-s)<Math.abs(this.ratioB-s)?"A":"B",this.setFocus(this.pressedKnob),this.update(r),this.ionKnobMoveStart.emit({value:this.ensureValueInBounds(this.value)})}onMove(e){this.update(e.currentX)}onEnd(e){const{contentEl:t,initialContentScrollY:i}=this;t&&SR(t,i),this.update(e.currentX),this.pressedKnob=void 0,this.emitValueChange(),this.ionKnobMoveEnd.emit({value:this.ensureValueInBounds(this.value)})}update(e){const t=this.rect;let i=Vi(0,(e-t.left)/t.width,1);Bm(this.el)&&(i=1-i),this.snaps&&(i=Ic(yv(i,this.min,this.max,this.step),this.min,this.max)),this.pressedKnob==="A"?this.ratioA=i:this.ratioB=i,this.updateValue()}get valA(){return yv(this.ratioA,this.min,this.max,this.step)}get valB(){return yv(this.ratioB,this.min,this.max,this.step)}get ratioLower(){if(this.dualKnobs)return Math.min(this.ratioA,this.ratioB);const{activeBarStart:e}=this;return e==null?0:Ic(e,this.min,this.max)}get ratioUpper(){return this.dualKnobs?Math.max(this.ratioA,this.ratioB):this.ratioA}updateRatio(){const e=this.getValue(),{min:t,max:i}=this;this.dualKnobs?(this.ratioA=Ic(e.lower,t,i),this.ratioB=Ic(e.upper,t,i)):this.ratioA=Ic(e,t,i)}updateValue(){this.noUpdate=!0;const{valA:e,valB:t}=this;this.value=this.dualKnobs?{lower:Math.min(e,t),upper:Math.max(e,t)}:e,this.ionInput.emit({value:this.value}),this.noUpdate=!1}setFocus(e){if(this.el.shadowRoot){const t=this.el.shadowRoot.querySelector(e==="A"?".range-knob-a":".range-knob-b");t&&t.focus()}}renderLegacyRange(){this.hasLoggedDeprecationWarning||(Mn('ion-range now requires providing a label with either the label slot or the "aria-label" attribute. To migrate, remove any usage of "ion-label" and pass the label text to either the component or the "aria-label" attribute.\n\nExample: <ion-range><div slot="label">Volume</div></ion-range>\nExample with aria-label: <ion-range aria-label="Volume"></ion-range>\n\nDevelopers can use the "legacy" property to continue using the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.',this.el),this.legacy&&Mn('ion-range is being used with the "legacy" property enabled which will forcibly enable the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.\n\nDevelopers can dismiss this warning by removing their usage of the "legacy" property and using the new range syntax.',this.el),this.hasLoggedDeprecationWarning=!0);const{el:e,pressedKnob:t,disabled:i,pin:r,rangeId:s}=this,a=Xe(this);return UC(!0,e,this.name,JSON.stringify(this.getValue()),i),re(Ct,{onFocusin:this.onFocus,onFocusout:this.onBlur,id:s,class:gi(this.color,{[a]:!0,"in-item":Hn("ion-item",e),"range-disabled":i,"range-pressed":t!==void 0,"range-has-pin":r,"legacy-range":!0})},re("slot",{name:"start"}),this.renderRangeSlider(),re("slot",{name:"end"}))}renderRange(){const{disabled:e,el:t,rangeId:i,pin:r,pressedKnob:s,labelPlacement:a,label:o}=this,l=Xe(this);return UC(!0,t,this.name,JSON.stringify(this.getValue()),e),re(Ct,{onFocusin:this.onFocus,onFocusout:this.onBlur,id:i,class:gi(this.color,{[l]:!0,"in-item":Hn("ion-item",t),"range-disabled":e,"range-pressed":s!==void 0,"range-has-pin":r,["range-label-placement-".concat(a)]:!0})},re("label",{class:"range-wrapper",id:"range-label"},re("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},o!==void 0?re("div",{class:"label-text"},o):re("slot",{name:"label"})),re("div",{class:"native-wrapper"},re("slot",{name:"start"}),this.renderRangeSlider(),re("slot",{name:"end"}))))}get hasLabel(){return this.label!==void 0||this.el.querySelector('[slot="label"]')!==null}renderRangeSlider(){var e;const{min:t,max:i,step:r,el:s,handleKeyboard:a,pressedKnob:o,disabled:l,pin:c,ratioLower:u,ratioUpper:d,inheritedAttributes:h,rangeId:f,pinFormatter:m}=this;let{labelText:g}=uq(s,f);g==null&&(g=h["aria-label"]);let _="".concat(u*100,"%"),v="".concat(100-d*100,"%");const y=Bm(this.el),T=y?"right":"left",N=y?"left":"right",P=M=>({[T]:M[T]});this.dualKnobs===!1&&(this.valA<((e=this.activeBarStart)!==null&&e!==void 0?e:this.min)?(_="".concat(d*100,"%"),v="".concat(100-u*100,"%")):(_="".concat(u*100,"%"),v="".concat(100-d*100,"%")));const F={[T]:_,[N]:v},$=[];if(this.snaps&&this.ticks)for(let M=t;M<=i;M+=r){const Z=Ic(M,t,i),O=Math.min(u,d),K=Math.max(u,d),z={ratio:Z,active:Z>=O&&Z<=K};z[T]="".concat(Z*100,"%"),$.push(z)}let B;return!this.legacyFormController.hasLegacyControl()&&this.hasLabel&&(B="range-label"),re("div",{class:"range-slider",ref:M=>this.rangeSlider=M},$.map(M=>re("div",{style:P(M),role:"presentation",class:{"range-tick":!0,"range-tick-active":M.active},part:M.active?"tick-active":"tick"})),re("div",{class:"range-bar-container"},re("div",{class:"range-bar",role:"presentation",part:"bar"}),re("div",{class:{"range-bar":!0,"range-bar-active":!0,"has-ticks":$.length>0},role:"presentation",style:F,part:"bar-active"})),y2(y,{knob:"A",pressed:o==="A",value:this.valA,ratio:this.ratioA,pin:c,pinFormatter:m,disabled:l,handleKeyboard:a,min:t,max:i,labelText:g,labelledBy:B}),this.dualKnobs&&y2(y,{knob:"B",pressed:o==="B",value:this.valB,ratio:this.ratioB,pin:c,pinFormatter:m,disabled:l,handleKeyboard:a,min:t,max:i,labelText:g,labelledBy:B}))}render(){const{legacyFormController:e}=this;return e.hasLegacyControl()?this.renderLegacyRange():this.renderRange()}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],min:["minChanged"],max:["maxChanged"],activeBarStart:["activeBarStartChanged"],disabled:["disabledChanged"],value:["valueChanged"]}}static get style(){return{ios:sj,md:aj}}},[33,"ion-range",{color:[513],debounce:[2],name:[1],label:[1],dualKnobs:[4,"dual-knobs"],min:[2],max:[2],pin:[4],pinFormatter:[16],snaps:[4],step:[2],ticks:[4],activeBarStart:[1026,"active-bar-start"],disabled:[4],value:[1026],labelPlacement:[1,"label-placement"],legacy:[4],ratioA:[32],ratioB:[32],pressedKnob:[32]}]),y2=(n,{knob:e,value:t,ratio:i,min:r,max:s,disabled:a,pressed:o,pin:l,handleKeyboard:c,labelText:u,labelledBy:d,pinFormatter:h})=>{const f=n?"right":"left";return re("div",{onKeyDown:g=>{const _=g.key;_==="ArrowLeft"||_==="ArrowDown"?(c(e,!1),g.preventDefault(),g.stopPropagation()):(_==="ArrowRight"||_==="ArrowUp")&&(c(e,!0),g.preventDefault(),g.stopPropagation())},class:{"range-knob-handle":!0,"range-knob-a":e==="A","range-knob-b":e==="B","range-knob-pressed":o,"range-knob-min":t===r,"range-knob-max":t===s,"ion-activatable":!0,"ion-focusable":!0},style:(()=>{const g={};return g[f]="".concat(i*100,"%"),g})(),role:"slider",tabindex:a?-1:0,"aria-label":d===void 0?u:null,"aria-labelledby":d!==void 0?d:null,"aria-valuemin":r,"aria-valuemax":s,"aria-disabled":a?"true":null,"aria-valuenow":t},l&&re("div",{class:"range-pin",role:"presentation",part:"pin"},h(t)),re("div",{class:"range-knob",role:"presentation",part:"knob"}))},yv=(n,e,t,i)=>{let r=(t-e)*n;i>0&&(r=Math.round(r/i)*i+e);const s=Vi(e,r,t);return rj(s,e,t,i)},Ic=(n,e,t)=>Vi(0,(n-e)/(t-e),1);let lj=0;function cj(){if(typeof customElements>"u")return;["ion-range"].forEach(e=>{switch(e){case"ion-range":customElements.get(e)||customElements.define(e,oj);break}})}const uj=cj;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const dj=":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}",hj=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return re(Ct,{class:Xe(this)},re("slot",null))}static get style(){return dj}},[1,"ion-row"]);function fj(){if(typeof customElements>"u")return;["ion-row"].forEach(e=>{switch(e){case"ion-row":customElements.get(e)||customElements.define(e,hj);break}})}const pj=fj;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const mj=(n,e)=>{let t,i;const r=(o,l,c)=>{if(typeof document>"u")return;const u=document.elementFromPoint(o,l);if(!u||!e(u)){a();return}u!==t&&(a(),s(u,c))},s=(o,l)=>{t=o,i||(i=t);const c=t;Qr(()=>c.classList.add("ion-activated")),l()},a=(o=!1)=>{if(!t)return;const l=t;Qr(()=>l.classList.remove("ion-activated")),o&&i!==t&&t.click(),t=void 0};return h0({el:n,gestureName:"buttonActiveDrag",threshold:0,onStart:o=>r(o.currentX,o.currentY,U9),onMove:o=>r(o.currentX,o.currentY,j9),onEnd:()=>{a(!0),z9(),i=void 0}})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const gj=n=>{const e=ht(),t=ht(),i=ht();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),e.addElement(n).easing("ease-in-out").duration(200).addAnimation([t,i])},yj=n=>{const e=ht(),t=ht(),i=ht();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),e.addElement(n).easing("ease-in-out").duration(200).addAnimation([t,i])},bj=n=>{const e=ht(),t=ht(),i=ht();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),e.addElement(n).easing("ease-in-out").duration(150).addAnimation([t,i])},vj=n=>{const e=ht(),t=ht(),i=ht();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),e.addElement(n).easing("ease-in-out").duration(150).addAnimation([t,i])},wj=".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, #f9f9f9));--max-width:270px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:14px}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;-webkit-box-shadow:none;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:7px;text-align:center}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:17px;font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, #666666);font-size:14px}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:13px;text-align:center}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:4px;margin-top:10px;-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:6px;padding-bottom:6px;border:0.55px solid var(--ion-color-step-250, #bfbfbf);background-color:var(--ion-background-color, #fff);-webkit-appearance:none;-moz-appearance:none;appearance:none}.alert-input.sc-ion-alert-ios::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{min-height:44px}.alert-radio-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;color:var(--ion-text-color, #000)}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #3880ff)}.alert-radio-icon.sc-ion-alert-ios{position:relative;-ms-flex-order:1;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{top:-7px;position:absolute;width:6px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #3880ff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{inset-inline-start:7px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:7px}[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios:dir(rtl){left:unset;right:unset;right:7px}}}.alert-checkbox-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-text-color, #000)}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px;margin-top:10px;margin-bottom:10px;position:relative;width:24px;height:24px;border-width:1px;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{top:4px;position:absolute;width:5px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:1px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{inset-inline-start:9px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:9px}[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios:dir(rtl){left:unset;right:unset;right:9px}}}.alert-button-group.sc-ion-alert-ios{-webkit-margin-end:-0.55px;margin-inline-end:-0.55px;-ms-flex-wrap:wrap;flex-wrap:wrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;-ms-flex:1 1 auto;flex:1 1 auto;min-width:50%;height:44px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #3880ff);font-size:17px;overflow:hidden}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child{border-right:0}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:first-child:dir(rtl){border-right:0}}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #eb445a)}",xj=".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:14px}.alert-wrapper.sc-ion-alert-md{border-radius:4px;-webkit-box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px;padding-top:20px;padding-bottom:15px;text-align:start}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:20px;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:16px}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, #737373)}.alert-message.sc-ion-alert-md{max-height:266px;font-size:16px}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #3880ff)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;max-height:266px;border-top:1px solid var(--ion-color-step-150, #d9d9d9);border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);overflow:auto}.alert-tappable.sc-ion-alert-md{position:relative;min-height:48px}.alert-radio-label.sc-ion-alert-md{-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px}.alert-radio-icon.sc-ion-alert-md{top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373)}@supports (inset-inline-start: 0){.alert-radio-icon.sc-ion-alert-md{inset-inline-start:26px}}@supports not (inset-inline-start: 0){.alert-radio-icon.sc-ion-alert-md{left:26px}[dir=rtl].sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[dir=rtl].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}@supports selector(:dir(rtl)){.alert-radio-icon.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:26px}}}.alert-radio-inner.sc-ion-alert-md{top:3px;border-radius:50%;position:absolute;width:10px;height:10px;-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #3880ff)}@supports (inset-inline-start: 0){.alert-radio-inner.sc-ion-alert-md{inset-inline-start:3px}}@supports not (inset-inline-start: 0){.alert-radio-inner.sc-ion-alert-md{left:3px}[dir=rtl].sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[dir=rtl].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}@supports selector(:dir(rtl)){.alert-radio-inner.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:3px}}}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, #262626)}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px}.alert-checkbox-icon.sc-ion-alert-md{top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373);contain:strict}@supports (inset-inline-start: 0){.alert-checkbox-icon.sc-ion-alert-md{inset-inline-start:26px}}@supports not (inset-inline-start: 0){.alert-checkbox-icon.sc-ion-alert-md{left:26px}[dir=rtl].sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[dir=rtl].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}@supports selector(:dir(rtl)){.alert-checkbox-icon.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:26px}}}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{top:0;position:absolute;width:6px;height:10px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{inset-inline-start:3px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:3px}[dir=rtl].sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[dir=rtl].sc-ion-alert-md [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:3px}}}.alert-button-group.sc-ion-alert-md{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;-ms-flex-pack:end;justify-content:flex-end}.alert-button.sc-ion-alert-md{border-radius:2px;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:0;margin-bottom:0;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #3880ff);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}.alert-button-inner.sc-ion-alert-md{-ms-flex-pack:end;justify-content:flex-end}",Ej=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.didPresent=Ge(this,"ionAlertDidPresent",7),this.willPresent=Ge(this,"ionAlertWillPresent",7),this.willDismiss=Ge(this,"ionAlertWillDismiss",7),this.didDismiss=Ge(this,"ionAlertDidDismiss",7),this.didPresentShorthand=Ge(this,"didPresent",7),this.willPresentShorthand=Ge(this,"willPresent",7),this.willDismissShorthand=Ge(this,"willDismiss",7),this.didDismissShorthand=Ge(this,"didDismiss",7),this.delegateController=DU(this),this.triggerController=mR(),this.customHTMLEnabled=pt.get("innerHTMLTemplatesEnabled",hU),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,yf)},this.dispatchCancelHandler=e=>{const t=e.detail.role;if(XC(t)){const i=this.processedButtons.find(r=>r.role==="cancel");this.callButtonHandler(i)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.header=void 0,this.subHeader=void 0,this.message=void 0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}onKeydown(e){if(!new Set(this.processedInputs.map(o=>o.type)).has("radio")||e.target&&!this.el.contains(e.target)||e.target.classList.contains("alert-button"))return;const i=this.el.querySelectorAll(".alert-radio"),r=Array.from(i).filter(o=>!o.disabled),s=r.findIndex(o=>o.id===e.target.id);let a;if(["ArrowDown","ArrowRight"].includes(e.key)&&(a=s===r.length-1?r[0]:r[s+1]),["ArrowUp","ArrowLeft"].includes(e.key)&&(a=s===0?r[r.length-1]:r[s-1]),a&&r.includes(a)){const o=this.processedInputs.find(l=>l.id===(a==null?void 0:a.id));o&&(this.rbClick(o),a.focus())}}buttonsChanged(){const e=this.buttons;this.processedButtons=e.map(t=>typeof t=="string"?{text:t,role:t.toLowerCase()==="cancel"?"cancel":void 0}:t)}inputsChanged(){const e=this.inputs,t=e.find(a=>!a.disabled),r=e.find(a=>a.checked&&!a.disabled)||t,s=new Set(e.map(a=>a.type));s.has("checkbox")&&s.has("radio")&&console.warn("Alert cannot mix input types: ".concat(Array.from(s.values()).join("/"),". Please see alert docs for more info.")),this.inputType=s.values().next().value,this.processedInputs=e.map((a,o)=>{var l;return{type:a.type||"text",name:a.name||"".concat(o),placeholder:a.placeholder||"",value:a.value,label:a.label,checked:!!a.checked,disabled:!!a.disabled,id:a.id||"alert-input-".concat(this.overlayIndex,"-").concat(o),handler:a.handler,min:a.min,max:a.max,cssClass:(l=a.cssClass)!==null&&l!==void 0?l:"",attributes:a.attributes||{},tabindex:a.type==="radio"&&a!==r?-1:0}})}connectedCallback(){cR(this.el),this.triggerChanged()}componentWillLoad(){uR(this.el),this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){!this.gesture&&Xe(this)==="ios"&&this.wrapperEl&&(this.gesture=mj(this.wrapperEl,e=>e.classList.contains("alert-button")),this.gesture.enable(!0)),this.isOpen===!0&&On(()=>this.present())}async present(){this.currentTransition!==void 0&&await this.currentTransition,await this.delegateController.attachViewToDom(),this.currentTransition=hR(this,"alertEnter",gj,bj),await this.currentTransition,this.currentTransition=void 0}async dismiss(e,t){this.currentTransition=fR(this,e,t,"alertLeave",yj,vj);const i=await this.currentTransition;return i&&this.delegateController.removeViewFromDom(),i}onDidDismiss(){return Ig(this.el,"ionAlertDidDismiss")}onWillDismiss(){return Ig(this.el,"ionAlertWillDismiss")}rbClick(e){for(const t of this.processedInputs)t.checked=t===e,t.tabindex=t===e?0:-1;this.activeId=e.id,fv(e.handler,e),Fo(this)}cbClick(e){e.checked=!e.checked,fv(e.handler,e),Fo(this)}async buttonClick(e){const t=e.role,i=this.getValues();if(XC(t))return this.dismiss({values:i},t);const r=await this.callButtonHandler(e,i);return r!==!1?this.dismiss(Object.assign({values:i},r),e.role):!1}async callButtonHandler(e,t){if(e!=null&&e.handler){const i=await fv(e.handler,t);if(i===!1)return!1;if(typeof i=="object")return i}return{}}getValues(){if(this.processedInputs.length===0)return;if(this.inputType==="radio"){const t=this.processedInputs.find(i=>!!i.checked);return t?t.value:void 0}if(this.inputType==="checkbox")return this.processedInputs.filter(t=>t.checked).map(t=>t.value);const e={};return this.processedInputs.forEach(t=>{e[t.name]=t.value||""}),e}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const e=this.processedInputs,t=Xe(this);return e.length===0?null:re("div",{class:"alert-checkbox-group"},e.map(i=>re("button",{type:"button",onClick:()=>this.cbClick(i),"aria-checked":"".concat(i.checked),id:i.id,disabled:i.disabled,tabIndex:i.tabindex,role:"checkbox",class:Object.assign(Object.assign({},Il(i.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":i.disabled||!1})},re("div",{class:"alert-button-inner"},re("div",{class:"alert-checkbox-icon"},re("div",{class:"alert-checkbox-inner"})),re("div",{class:"alert-checkbox-label"},i.label)),t==="md"&&re("ion-ripple-effect",null))))}renderRadio(){const e=this.processedInputs;return e.length===0?null:re("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},e.map(t=>re("button",{type:"button",onClick:()=>this.rbClick(t),"aria-checked":"".concat(t.checked),disabled:t.disabled,id:t.id,tabIndex:t.tabindex,class:Object.assign(Object.assign({},Il(t.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":t.disabled||!1}),role:"radio"},re("div",{class:"alert-button-inner"},re("div",{class:"alert-radio-icon"},re("div",{class:"alert-radio-inner"})),re("div",{class:"alert-radio-label"},t.label)))))}renderInput(){const e=this.processedInputs;return e.length===0?null:re("div",{class:"alert-input-group"},e.map(t=>{var i,r,s,a;return t.type==="textarea"?re("div",{class:"alert-input-wrapper"},re("textarea",Object.assign({placeholder:t.placeholder,value:t.value,id:t.id,tabIndex:t.tabindex},t.attributes,{disabled:(r=(i=t.attributes)===null||i===void 0?void 0:i.disabled)!==null&&r!==void 0?r:t.disabled,class:b2(t),onInput:o=>{var l;t.value=o.target.value,!((l=t.attributes)===null||l===void 0)&&l.onInput&&t.attributes.onInput(o)}}))):re("div",{class:"alert-input-wrapper"},re("input",Object.assign({placeholder:t.placeholder,type:t.type,min:t.min,max:t.max,value:t.value,id:t.id,tabIndex:t.tabindex},t.attributes,{disabled:(a=(s=t.attributes)===null||s===void 0?void 0:s.disabled)!==null&&a!==void 0?a:t.disabled,class:b2(t),onInput:o=>{var l;t.value=o.target.value,!((l=t.attributes)===null||l===void 0)&&l.onInput&&t.attributes.onInput(o)}})))}))}renderAlertButtons(){const e=this.processedButtons,t=Xe(this),i={"alert-button-group":!0,"alert-button-group-vertical":e.length>2};return re("div",{class:i},e.map(r=>re("button",Object.assign({},r.htmlAttributes,{type:"button",id:r.id,class:Tj(r),tabIndex:0,onClick:()=>this.buttonClick(r)}),re("span",{class:"alert-button-inner"},r.text),t==="md"&&re("ion-ripple-effect",null))))}renderAlertMessage(e){const{customHTMLEnabled:t,message:i}=this;return t?re("div",{id:e,class:"alert-message",innerHTML:oU(i)}):re("div",{id:e,class:"alert-message"},i)}render(){const{overlayIndex:e,header:t,subHeader:i,message:r,htmlAttributes:s}=this,a=Xe(this),o="alert-".concat(e,"-hdr"),l="alert-".concat(e,"-sub-hdr"),c="alert-".concat(e,"-msg"),u=this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert";return re(Ct,Object.assign({role:u,"aria-modal":"true","aria-labelledby":t?o:i?l:null,"aria-describedby":r!==void 0?c:null,tabindex:"-1"},s,{style:{zIndex:"".concat(2e4+e)},class:Object.assign(Object.assign({},Il(this.cssClass)),{[a]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),re("ion-backdrop",{tappable:this.backdropDismiss}),re("div",{tabindex:"0"}),re("div",{class:"alert-wrapper ion-overlay-wrapper",ref:h=>this.wrapperEl=h},re("div",{class:"alert-head"},t&&re("h2",{id:o,class:"alert-title"},t),i&&re("h2",{id:l,class:"alert-sub-title"},i)),this.renderAlertMessage(c),this.renderAlertInputs(),this.renderAlertButtons()),re("div",{tabindex:"0"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}}static get style(){return{ios:wj,md:xj}}},[34,"ion-alert",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],header:[1],subHeader:[1,"sub-header"],message:[1],buttons:[16],inputs:[1040],backdropDismiss:[4,"backdrop-dismiss"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},[[4,"keydown","onKeydown"]]]),b2=n=>{var e,t,i;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":((t=(e=n.attributes)===null||e===void 0?void 0:e.disabled)!==null&&t!==void 0?t:n.disabled)||!1},Il(n.cssClass)),Il(n.attributes?(i=n.attributes.class)===null||i===void 0?void 0:i.toString():""))},Tj=n=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,["alert-button-role-".concat(n.role)]:n.role!==void 0},Il(n.cssClass));function Sj(){if(typeof customElements>"u")return;["ion-alert","ion-backdrop","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-alert":customElements.get(e)||customElements.define(e,Ej);break;case"ion-backdrop":customElements.get(e)||VT();break;case"ion-ripple-effect":customElements.get(e)||p0();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _j=g7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Cj=":host(.ion-color){color:var(--ion-color-base)}",Aj=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=Xe(this);return re(Ct,{class:gi(this.color,{[e]:!0})},re("slot",null))}static get style(){return Cj}},[1,"ion-text",{color:[513]}]);function kj(){if(typeof customElements>"u")return;["ion-text"].forEach(e=>{switch(e){case"ion-text":customElements.get(e)||customElements.define(e,Aj);break}})}const Nj=kj;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Dj=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host:dir(rtl){left:unset;right:unset;right:0}}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large) .toolbar-title:dir(rtl){-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",Pj=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}",Ij=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=Ge(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({["title-".concat(e)]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const e=Xe(this),t=this.getSize();return re(Ct,{class:gi(this.color,{[e]:!0,["title-".concat(t)]:!0,"title-rtl":document.dir==="rtl"})},re("div",{class:"toolbar-title"},re("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:Dj,md:Pj}}},[33,"ion-title",{color:[513],size:[1]}]);function Rj(){if(typeof customElements>"u")return;["ion-title"].forEach(e=>{switch(e){case"ion-title":customElements.get(e)||customElements.define(e,Ij);break}})}const Oj=Rj;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Mj=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large){padding-bottom:7px}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",Lj=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",$j=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),t=e.find(s=>s.slot==="start");t&&t.classList.add("buttons-first-slot");const i=e.reverse(),r=i.find(s=>s.slot==="end")||i.find(s=>s.slot==="primary")||i.find(s=>s.slot==="secondary");r&&r.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const t=e.target.tagName,i=e.detail,r={},s=this.childrenStyles.get(t)||{};let a=!1;Object.keys(i).forEach(o=>{const l="toolbar-".concat(o),c=i[o];c!==s[l]&&(a=!0),c&&(r[l]=!0)}),a&&(this.childrenStyles.set(t,r),Fo(this))}render(){const e=Xe(this),t={};return this.childrenStyles.forEach(i=>{Object.assign(t,i)}),re(Ct,{class:Object.assign(Object.assign({},t),gi(this.color,{[e]:!0,"in-toolbar":Hn("ion-toolbar",this.el)}))},re("div",{class:"toolbar-background"}),re("div",{class:"toolbar-container"},re("slot",{name:"start"}),re("slot",{name:"secondary"}),re("div",{class:"toolbar-content"},re("slot",null)),re("slot",{name:"primary"}),re("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:Mj,md:Lj}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function Bj(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(e=>{switch(e){case"ion-toolbar":customElements.get(e)||customElements.define(e,$j);break}})}const Fj=Bj;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qj=R9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Uj=L9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const jj=Sj;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Mg="ionKeyboardDidShow",DR="ionKeyboardDidHide",zj=150;let Lg={},$a={},fd=!1;const Vj=()=>{Lg={},$a={},fd=!1},Hj=n=>{if(_R.getEngine())Wj(n);else{if(!n.visualViewport)return;$a=XT(n.visualViewport),n.visualViewport.onresize=()=>{RR(n),PR()||IR(n)?QT(n):YT(n)&&KT(n)}}},Wj=n=>{n.addEventListener("keyboardDidShow",e=>QT(n,e)),n.addEventListener("keyboardDidHide",()=>KT(n))},QT=(n,e)=>{Gj(n,e),fd=!0},KT=n=>{Qj(n),fd=!1},PR=()=>{const n=(Lg.height-$a.height)*$a.scale;return!fd&&Lg.width===$a.width&&n>zj},IR=n=>fd&&!YT(n),YT=n=>fd&&$a.height===n.innerHeight,Gj=(n,e)=>{const t=e?e.keyboardHeight:n.innerHeight-$a.height,i=new CustomEvent(Mg,{detail:{keyboardHeight:t}});n.dispatchEvent(i)},Qj=n=>{const e=new CustomEvent(DR);n.dispatchEvent(e)},RR=n=>{Lg=Object.assign({},$a),$a=XT(n.visualViewport)},XT=n=>({width:Math.round(n.width),height:Math.round(n.height),offsetTop:n.offsetTop,offsetLeft:n.offsetLeft,pageTop:n.pageTop,pageLeft:n.pageLeft,scale:n.scale}),Kj=Object.freeze(Object.defineProperty({__proto__:null,KEYBOARD_DID_CLOSE:DR,KEYBOARD_DID_OPEN:Mg,copyVisualViewport:XT,keyboardDidClose:YT,keyboardDidOpen:PR,keyboardDidResize:IR,resetKeyboardAssist:Vj,setKeyboardClose:KT,setKeyboardOpen:QT,startKeyboardAssist:Hj,trackViewportChanges:RR},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Uu;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(Uu||(Uu={}));const bf={getEngine(){const n=Eu();if(n!=null&&n.isPluginAvailable("StatusBar"))return n.Plugins.StatusBar},supportsDefaultStatusBarStyle(){const n=Eu();return!!(n!=null&&n.PluginHeaders)},setStyle(n){const e=this.getEngine();e&&e.setStyle(n)},getStyle:async function(){const n=this.getEngine();if(!n)return Uu.Default;const{style:e}=await n.getInfo();return e}},Cx=(n,e)=>{if(e===1)return 0;const t=1/(1-e),i=-(e*t);return n*t+i},OR=()=>{!rn||rn.innerWidth>=768||!bf.supportsDefaultStatusBarStyle()||bf.setStyle({style:Uu.Dark})},MR=(n=Uu.Default)=>{!rn||rn.innerWidth>=768||!bf.supportsDefaultStatusBarStyle()||bf.setStyle({style:n})},LR=async(n,e)=>{typeof n.canDismiss!="function"||!await n.canDismiss(void 0,Bh)||(e.isRunning()?e.onFinish(()=>{n.dismiss(void 0,"handler")},{oneTimeCallback:!0}):n.dismiss(void 0,"handler"))},Ax=n=>.00255275*2.71828**(-14.9619*n)-1.00255*2.71828**(-.0380968*n)+1,$g={MIN_PRESENTING_SCALE:.93},Yj=(n,e,t,i)=>{const s=n.offsetHeight;let a=!1,o=!1,l=null,c=null;const u=.2;let d=!0,h=0;const f=()=>l&&Yl(l)?l.scrollY:!0,y=h0({el:n,gestureName:"modalSwipeToClose",gesturePriority:39,direction:"y",threshold:10,canStart:T=>{const N=T.event.target;return N===null||!N.closest?!0:(l=TR(N),l?(Yl(l)?c=qo(l).querySelector(".inner-scroll"):c=l,!!!l.querySelector("ion-refresher")&&c.scrollTop===0):N.closest("ion-footer")===null)},onStart:T=>{const{deltaY:N}=T;d=f(),o=n.canDismiss!==void 0&&n.canDismiss!==!0,N>0&&l&&Ex(l),e.progressStart(!0,a?1:0)},onMove:T=>{const{deltaY:N}=T;N>0&&l&&Ex(l);const P=T.deltaY/s,F=P>=0&&o,$=F?u:.9999,B=F?Ax(P/$):P,M=Vi(1e-4,B,$);e.progressStep(M),M>=.5&&h<.5?MR(t):M<.5&&h>=.5&&OR(),h=M},onEnd:T=>{const N=T.velocityY,P=T.deltaY/s,F=P>=0&&o,$=F?u:.9999,B=F?Ax(P/$):P,M=Vi(1e-4,B,$),Z=(T.deltaY+N*1e3)/s,O=!F&&Z>=.5;let K=O?-.001:.001;O?(e.easing("cubic-bezier(0.32, 0.72, 0, 1)"),K+=Ql([0,0],[.32,.72],[0,1],[1,1],M)[0]):(e.easing("cubic-bezier(1, 0, 0.68, 0.28)"),K+=Ql([0,0],[1,0],[.68,.28],[1,1],M)[0]);const z=v2(O?P*s:(1-M)*s,N);a=O,y.enable(!1),l&&SR(l,d),e.onFinish(()=>{O||y.enable(!0)}).progressEnd(O?1:0,K,z),F&&M>$/4?LR(n,e):O&&i()}});return y},v2=(n,e)=>Vi(400,n/Math.abs(e*1.1),500),$R=n=>{const{currentBreakpoint:e,backdropBreakpoint:t}=n,i=t===void 0||t<e,r=i?"calc(var(--backdrop-opacity) * ".concat(e,")"):"0",s=ht("backdropAnimation").fromTo("opacity",0,r);return i&&s.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:ht("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:"translateY(".concat(100-e*100,"%)")}]),backdropAnimation:s}},BR=n=>{const{currentBreakpoint:e,backdropBreakpoint:t}=n,i="calc(var(--backdrop-opacity) * ".concat(Cx(e,t),")"),r=[{offset:0,opacity:i},{offset:1,opacity:0}],s=[{offset:0,opacity:i},{offset:t,opacity:0},{offset:1,opacity:0}],a=ht("backdropAnimation").keyframes(t!==0?s:r);return{wrapperAnimation:ht("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(".concat(100-e*100,"%)")},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:a}},Xj=()=>{const n=ht().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e=ht().fromTo("transform","translateY(100vh)","translateY(0vh)");return{backdropAnimation:n,wrapperAnimation:e}},w2=(n,e)=>{const{presentingEl:t,currentBreakpoint:i}=e,r=qo(n),{wrapperAnimation:s,backdropAnimation:a}=i!==void 0?$R(e):Xj();a.addElement(r.querySelector("ion-backdrop")),s.addElement(r.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const o=ht("entering-base").addElement(n).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(s);if(t){const l=window.innerWidth<768,c=t.tagName==="ION-MODAL"&&t.presentingElement!==void 0,u=qo(t),d=ht().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),h=document.body;if(l){const f=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",m=c?"-10px":f,g=$g.MIN_PRESENTING_SCALE,_="translateY(".concat(m,") scale(").concat(g,")");d.afterStyles({transform:_}).beforeAddWrite(()=>h.style.setProperty("background-color","black")).addElement(t).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:_,borderRadius:"10px 10px 0 0"}]),o.addAnimation(d)}else if(o.addAnimation(a),!c)s.fromTo("opacity","0","1");else{const f=c?$g.MIN_PRESENTING_SCALE:1,m="translateY(-10px) scale(".concat(f,")");d.afterStyles({transform:m}).addElement(u.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:m}]);const g=ht().afterStyles({transform:m}).addElement(u.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:m}]);o.addAnimation([d,g])}}else o.addAnimation(a);return o},Jj=()=>{const n=ht().fromTo("opacity","var(--backdrop-opacity)",0),e=ht().fromTo("transform","translateY(0vh)","translateY(100vh)");return{backdropAnimation:n,wrapperAnimation:e}},x2=(n,e,t=500)=>{const{presentingEl:i,currentBreakpoint:r}=e,s=qo(n),{wrapperAnimation:a,backdropAnimation:o}=r!==void 0?BR(e):Jj();o.addElement(s.querySelector("ion-backdrop")),a.addElement(s.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const l=ht("leaving-base").addElement(n).easing("cubic-bezier(0.32,0.72,0,1)").duration(t).addAnimation(a);if(i){const c=window.innerWidth<768,u=i.tagName==="ION-MODAL"&&i.presentingElement!==void 0,d=qo(i),h=ht().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(m=>{if(m!==1)return;i.style.setProperty("overflow",""),Array.from(f.querySelectorAll("ion-modal:not(.overlay-hidden)")).filter(_=>_.presentingElement!==void 0).length<=1&&f.style.setProperty("background-color","")}),f=document.body;if(c){const m=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",g=u?"-10px":m,_=$g.MIN_PRESENTING_SCALE,v="translateY(".concat(g,") scale(").concat(_,")");h.addElement(i).keyframes([{offset:0,filter:"contrast(0.85)",transform:v,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),l.addAnimation(h)}else if(l.addAnimation(o),!u)a.fromTo("opacity","1","0");else{const m=u?$g.MIN_PRESENTING_SCALE:1,g="translateY(-10px) scale(".concat(m,")");h.addElement(d.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:g},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const _=ht().addElement(d.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:g},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);l.addAnimation([h,_])}}else l.addAnimation(o);return l},Zj=()=>{const n=ht().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e=ht().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}]);return{backdropAnimation:n,wrapperAnimation:e}},ez=(n,e)=>{const{currentBreakpoint:t}=e,i=qo(n),{wrapperAnimation:r,backdropAnimation:s}=t!==void 0?$R(e):Zj();return s.addElement(i.querySelector("ion-backdrop")),r.addElement(i.querySelector(".modal-wrapper")),ht().addElement(n).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([s,r])},tz=()=>{const n=ht().fromTo("opacity","var(--backdrop-opacity)",0),e=ht().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}]);return{backdropAnimation:n,wrapperAnimation:e}},nz=(n,e)=>{const{currentBreakpoint:t}=e,i=qo(n),{wrapperAnimation:r,backdropAnimation:s}=t!==void 0?BR(e):tz();return s.addElement(i.querySelector("ion-backdrop")),r.addElement(i.querySelector(".modal-wrapper")),ht().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([s,r])},iz=(n,e,t,i,r,s,a=[],o,l,c)=>{const u=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}],d=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-r,opacity:0},{offset:1,opacity:0}],h={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:r!==0?d:u},f=n.querySelector("ion-content"),m=t.clientHeight;let g=i,_=0,v=!1;const y=.95,T=s.childAnimations.find(ue=>ue.id==="wrapperAnimation"),N=s.childAnimations.find(ue=>ue.id==="backdropAnimation"),P=a[a.length-1],F=a[0],$=()=>{n.style.setProperty("pointer-events","auto"),e.style.setProperty("pointer-events","auto"),n.classList.remove("ion-disable-focus-trap")},B=()=>{n.style.setProperty("pointer-events","none"),e.style.setProperty("pointer-events","none"),n.classList.add("ion-disable-focus-trap")};T&&N&&(T.keyframes([...h.WRAPPER_KEYFRAMES]),N.keyframes([...h.BACKDROP_KEYFRAMES]),s.progressStart(!0,1-g),g>r?$():B()),f&&g!==P&&(f.scrollY=!1);const M=ue=>{const ye=ue.event.target.closest("ion-content");return g=o(),!(g===1&&ye)},Z=()=>{v=n.canDismiss!==void 0&&n.canDismiss!==!0&&F===0,f&&(f.scrollY=!1),On(()=>{n.focus()}),s.progressStart(!0,1-g)},O=ue=>{const ye=1-g,be=a.length>1?1-a[1]:void 0,de=ye+ue.deltaY/m,he=be!==void 0&&de>=be&&v,ee=he?y:.9999,le=he&&be!==void 0?be+Ax((de-be)/(ee-be)):de;_=Vi(1e-4,le,ee),s.progressStep(_)},K=ue=>{const ye=ue.velocityY,be=(ue.deltaY+ye*350)/m,de=g-be,he=a.reduce((ee,le)=>Math.abs(le-de)<Math.abs(ee-de)?le:ee);z({breakpoint:he,breakpointOffset:_,canDismiss:v,animated:!0})},z=ue=>{const{breakpoint:ye,canDismiss:be,breakpointOffset:de,animated:he}=ue,ee=be&&ye===0,le=ee?g:ye,Te=le!==0;return g=0,T&&N&&(T.keyframes([{offset:0,transform:"translateY(".concat(de*100,"%)")},{offset:1,transform:"translateY(".concat((1-le)*100,"%)")}]),N.keyframes([{offset:0,opacity:"calc(var(--backdrop-opacity) * ".concat(Cx(1-de,r),")")},{offset:1,opacity:"calc(var(--backdrop-opacity) * ".concat(Cx(le,r),")")}]),s.progressStep(0)),te.enable(!1),ee?LR(n,s):Te||l(),new Promise($e=>{s.onFinish(()=>{Te?T&&N?On(()=>{T.keyframes([...h.WRAPPER_KEYFRAMES]),N.keyframes([...h.BACKDROP_KEYFRAMES]),s.progressStart(!0,1-le),g=le,c(g),f&&g===a[a.length-1]&&(f.scrollY=!0),g>r?$():B(),te.enable(!0),$e()}):(te.enable(!0),$e()):$e()},{oneTimeCallback:!0}).progressEnd(1,0,he?500:0)})},te=h0({el:t,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:M,onStart:Z,onMove:O,onEnd:K});return{gesture:te,moveSheetToBreakpoint:z}},rz=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-card) .modal-wrapper,:host-context([dir=rtl]).modal-card .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-card) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-sheet) .modal-wrapper,:host-context([dir=rtl]).modal-sheet .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-sheet) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}',sz=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}',az=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=Ge(this,"ionModalDidPresent",7),this.willPresent=Ge(this,"ionModalWillPresent",7),this.willDismiss=Ge(this,"ionModalWillDismiss",7),this.didDismiss=Ge(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=Ge(this,"ionBreakpointDidChange",7),this.didPresentShorthand=Ge(this,"didPresent",7),this.willPresentShorthand=Ge(this,"willPresent",7),this.willDismissShorthand=Ge(this,"willDismiss",7),this.didDismissShorthand=Ge(this,"didDismiss",7),this.ionMount=Ge(this,"ionMount",7),this.triggerController=mR(),this.coreDelegate=oR(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.onHandleClick=()=>{const{sheetTransition:e,handleBehavior:t}=this;t!=="cycle"||e!==void 0||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:e}=this;e===void 0&&this.dismiss(void 0,yf)},this.onLifecycle=e=>{const t=this.usersElement,i=oz[e.type];if(t&&i){const r=new CustomEvent(i,{bubbles:!1,cancelable:!1,detail:e.detail});t.dispatchEvent(r)}},this.presented=!1,this.hasController=!1,this.overlayIndex=void 0,this.delegate=void 0,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.breakpoints=void 0,this.initialBreakpoint=void 0,this.backdropBreakpoint=0,this.handle=void 0,this.handleBehavior="none",this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.presentingElement=void 0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0,this.keepContentsMounted=!1,this.canDismiss=!0}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}breakpointsChanged(e){e!==void 0&&(this.sortedBreakpoints=e.sort((t,i)=>t-i))}connectedCallback(){const{el:e}=this;cR(e),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){const{breakpoints:e,initialBreakpoint:t,el:i}=this,r=this.isSheetModal=e!==void 0&&t!==void 0;this.inheritedAttributes=hd(i,["aria-label","role"]),r&&(this.currentBreakpoint=this.initialBreakpoint),e!==void 0&&t!==void 0&&!e.includes(t)&&Mn("Your breakpoints array must include the initialBreakpoint value."),uR(i)}componentDidLoad(){this.isOpen===!0&&On(()=>this.present()),this.breakpointsChanged(this.breakpoints)}getDelegate(e=!1){if(this.workingDelegate&&!e)return{delegate:this.workingDelegate,inline:this.inline};const t=this.el.parentNode,i=this.inline=t!==null&&!this.hasController,r=this.workingDelegate=i?this.delegate||this.coreDelegate:this.delegate;return{inline:i,delegate:r}}async checkCanDismiss(e,t){const{canDismiss:i}=this;return typeof i=="function"?i(e,t):i}async present(){if(this.presented)return;const{presentingElement:e,el:t}=this;this.currentTransition!==void 0&&await this.currentTransition,this.currentBreakpoint=this.initialBreakpoint;const{inline:i,delegate:r}=this.getDelegate(!0);this.usersElement=await jT(r,t,this.component,["ion-page"],this.componentProps,i),this.ionMount.emit(),FI(t)?await Ng(this.usersElement):this.keepContentsMounted||await Dq(),Qr(()=>this.el.classList.add("show-modal")),this.currentTransition=hR(this,"modalEnter",w2,ez,{presentingEl:e,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint}),typeof window<"u"&&(this.keyboardOpenCallback=()=>{this.gesture&&(this.gesture.enable(!1),On(()=>{this.gesture&&this.gesture.enable(!0)}))},window.addEventListener(Mg,this.keyboardOpenCallback));const s=e!==void 0;s&&Xe(this)==="ios"&&(this.statusBarStyle=await bf.getStyle(),OR()),await this.currentTransition,this.isSheetModal?this.initSheetGesture():s&&this.initSwipeToClose(),this.currentTransition=void 0}initSwipeToClose(){var e;if(Xe(this)!=="ios")return;const{el:t}=this,i=this.leaveAnimation||pt.get("modalLeave",x2),r=this.animation=i(t,{presentingEl:this.presentingElement});if(!wx(t)){xx(t);return}const a=(e=this.statusBarStyle)!==null&&e!==void 0?e:Uu.Default;this.gesture=Yj(t,r,a,()=>{this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{await this.dismiss(void 0,Bh),this.gestureAnimationDismissing=!1})}),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:e,initialBreakpoint:t,backdropBreakpoint:i}=this;if(!e||t===void 0)return;const r=this.enterAnimation||pt.get("modalEnter",w2),s=this.animation=r(this.el,{presentingEl:this.presentingElement,currentBreakpoint:t,backdropBreakpoint:i});s.progressStart(!0,1);const{gesture:a,moveSheetToBreakpoint:o}=iz(this.el,this.backdropEl,e,t,i,s,this.sortedBreakpoints,()=>{var l;return(l=this.currentBreakpoint)!==null&&l!==void 0?l:0},()=>this.sheetOnDismiss(),l=>{this.currentBreakpoint!==l&&(this.currentBreakpoint=l,this.ionBreakpointDidChange.emit({breakpoint:l}))});this.gesture=a,this.moveSheetToBreakpoint=o,this.gesture.enable(!0)}sheetOnDismiss(){this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{this.currentBreakpoint=0,this.ionBreakpointDidChange.emit({breakpoint:this.currentBreakpoint}),await this.dismiss(void 0,Bh),this.gestureAnimationDismissing=!1})}async dismiss(e,t){var i;if(this.gestureAnimationDismissing&&t!==Bh||t!=="handler"&&!await this.checkCanDismiss(e,t))return!1;const{presentingElement:r}=this;r!==void 0&&Xe(this)==="ios"&&MR(this.statusBarStyle),typeof window<"u"&&this.keyboardOpenCallback&&(window.removeEventListener(Mg,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0),this.currentTransition!==void 0&&await this.currentTransition;const a=Dg.get(this)||[];this.currentTransition=fR(this,e,t,"modalLeave",x2,nz,{presentingEl:r,currentBreakpoint:(i=this.currentBreakpoint)!==null&&i!==void 0?i:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint});const o=await this.currentTransition;if(o){const{delegate:l}=this.getDelegate();await aR(l,this.usersElement),Qr(()=>this.el.classList.remove("show-modal")),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy(),a.forEach(c=>c.destroy())}return this.currentBreakpoint=void 0,this.currentTransition=void 0,this.animation=void 0,o}onDidDismiss(){return Ig(this.el,"ionModalDidDismiss")}onWillDismiss(){return Ig(this.el,"ionModalWillDismiss")}async setCurrentBreakpoint(e){if(!this.isSheetModal){Mn("setCurrentBreakpoint is only supported on sheet modals.");return}if(!this.breakpoints.includes(e)){Mn("Attempted to set invalid breakpoint value ".concat(e,". Please double check that the breakpoint value is part of your defined breakpoints."));return}const{currentBreakpoint:t,moveSheetToBreakpoint:i,canDismiss:r,breakpoints:s,animated:a}=this;t!==e&&i&&(this.sheetTransition=i({breakpoint:e,breakpointOffset:1-t,canDismiss:r!==void 0&&r!==!0&&s[0]===0,animated:a}),await this.sheetTransition,this.sheetTransition=void 0)}async getCurrentBreakpoint(){return this.currentBreakpoint}async moveToNextBreakpoint(){const{breakpoints:e,currentBreakpoint:t}=this;if(!e||t==null)return!1;const i=e.filter(o=>o!==0),s=(i.indexOf(t)+1)%i.length,a=i[s];return await this.setCurrentBreakpoint(a),!0}render(){const{handle:e,isSheetModal:t,presentingElement:i,htmlAttributes:r,handleBehavior:s,inheritedAttributes:a}=this,o=e!==!1&&t,l=Xe(this),c=i!==void 0&&l==="ios",u=s==="cycle";return re(Ct,Object.assign({"no-router":!0,tabindex:"-1"},r,{style:{zIndex:"".concat(2e4+this.overlayIndex)},class:Object.assign({[l]:!0,"modal-default":!c&&!t,"modal-card":c,"modal-sheet":t,"overlay-hidden":!0},Il(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),re("ion-backdrop",{ref:d=>this.backdropEl=d,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),l==="ios"&&re("div",{class:"modal-shadow"}),re("div",Object.assign({role:"dialog"},a,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:d=>this.wrapperEl=d}),o&&re("button",{class:"modal-handle",tabIndex:u?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:u?this.onHandleClick:void 0,part:"handle"}),re("slot",null)))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:rz,md:sz}}},[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]}]),oz={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};function lz(){if(typeof customElements>"u")return;["ion-modal","ion-backdrop"].forEach(e=>{switch(e){case"ion-modal":customElements.get(e)||customElements.define(e,az);break;case"ion-backdrop":customElements.get(e)||VT();break}})}const cz=lz,uz="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",dz=kt(class extends Nt{constructor(){super(),this.__registerHost()}componentDidLoad(){fz(async()=>{const e=Oa(window,"hybrid");if(pt.getBoolean("_testing")||ci(()=>import("./index9-441ad583.js"),[]).then(i=>i.startTapClick(pt)),pt.getBoolean("statusTap",e)&&ci(()=>import("./status-tap-71d82227.js"),[]).then(i=>i.startStatusTap()),pt.getBoolean("inputShims",hz())){const i=Oa(window,"ios")?"ios":"android";ci(()=>import("./input-shims-846ceb85.js"),[]).then(r=>r.startInputShims(pt,i))}const t=await ci(()=>Promise.resolve().then(()=>mU),void 0);pt.getBoolean("hardwareBackButton",e)?t.startHardwareBackButton():t.blockHardwareBackButton(),typeof window<"u"&&ci(()=>Promise.resolve().then(()=>Kj),void 0).then(i=>i.startKeyboardAssist(window)),ci(()=>import("./focus-visible-9c13edeb.js"),[]).then(i=>this.focusVisible=i.startFocusVisible())})}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=Xe(this);return re(Ct,{class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":pt.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return uz}},[0,"ion-app",{setFocus:[64]}]),hz=()=>!!(Oa(window,"ios")&&Oa(window,"mobile")||Oa(window,"android")&&Oa(window,"mobileweb")),fz=n=>{"requestIdleCallback"in window?window.requestIdleCallback(n):setTimeout(n,32)};function pz(){if(typeof customElements>"u")return;["ion-app"].forEach(e=>{switch(e){case"ion-app":customElements.get(e)||customElements.define(e,dz);break}})}const mz=pz;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const gz=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-hover:transparent;--background-hover-opacity:1;--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #3880ff);--icon-margin-end:1px;--icon-margin-start:-4px;--icon-font-size:1.6em;--min-height:32px;font-size:17px}.button-native{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:visible;z-index:99}:host(.ion-activated) .button-native{opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',yz=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--border-radius:4px;--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:0.04;--color:currentColor;--icon-margin-end:0;--icon-margin-start:0;--icon-font-size:24px;--icon-font-weight:normal;--min-height:32px;--min-width:44px;--padding-start:12px;--padding-end:12px;font-size:14px;font-weight:500;text-transform:uppercase}:host(.back-button-has-icon-only){--border-radius:50%;min-width:48px;height:48px}.button-native{-webkit-box-shadow:none;box-shadow:none}.button-text{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:0;padding-bottom:0}ion-icon{line-height:0.67;text-align:start}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}',bz=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.onClick=async e=>{const t=this.el.closest("ion-nav");return e.preventDefault(),t&&await t.canGoBack()?t.pop({animationBuilder:this.routerAnimation,skipIfBusy:!0}):HT(this.defaultHref,e,"back",this.routerAnimation)},this.color=void 0,this.defaultHref=void 0,this.disabled=!1,this.icon=void 0,this.text=void 0,this.type="button",this.routerAnimation=void 0}componentWillLoad(){this.inheritedAttributes=ac(this.el),this.defaultHref===void 0&&(this.defaultHref=pt.get("backButtonDefaultHref"))}get backButtonIcon(){const e=this.icon;return e!=null?e:Xe(this)==="ios"?pt.get("backButtonIcon",IU):pt.get("backButtonIcon",PU)}get backButtonText(){const e=Xe(this)==="ios"?"Back":null;return this.text!=null?this.text:pt.get("backButtonText",e)}get hasIconOnly(){return this.backButtonIcon&&!this.backButtonText}get rippleType(){return this.hasIconOnly?"unbounded":"bounded"}render(){const{color:e,defaultHref:t,disabled:i,type:r,hasIconOnly:s,backButtonIcon:a,backButtonText:o,icon:l,inheritedAttributes:c}=this,u=t!==void 0,d=Xe(this),h=c["aria-label"]||o||"back";return re(Ct,{onClick:this.onClick,class:gi(e,{[d]:!0,button:!0,"back-button-disabled":i,"back-button-has-icon-only":s,"in-toolbar":Hn("ion-toolbar",this.el),"in-toolbar-color":Hn("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0,"show-back-button":u})},re("button",{type:r,disabled:i,class:"button-native",part:"native","aria-label":h},re("span",{class:"button-inner"},a&&re("ion-icon",{part:"icon",icon:a,"aria-hidden":"true",lazy:!1,"flip-rtl":l===void 0}),o&&re("span",{part:"text","aria-hidden":"true",class:"button-text"},o)),d==="md"&&re("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get style(){return{ios:gz,md:yz}}},[33,"ion-back-button",{color:[513],defaultHref:[1025,"default-href"],disabled:[516],icon:[1],text:[1],type:[1],routerAnimation:[16]}]);function vz(){if(typeof customElements>"u")return;["ion-back-button","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-back-button":customElements.get(e)||customElements.define(e,bz);break;case"ion-icon":customElements.get(e)||zT();break;case"ion-ripple-effect":customElements.get(e)||p0();break}})}const wz=vz,xz=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",Ez=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ge(this,"ionNavWillLoad",7),this.ionNavWillChange=Ge(this,"ionNavWillChange",3),this.ionNavDidChange=Ge(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=Xe(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await ci(()=>import("./swipe-back-4216e829.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>e(),t=>{var i;return(i=this.ani)===null||i===void 0?void 0:i.progressStep(t)},(t,i,r)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(t)},{oneTimeCallback:!0});let s=t?-.001:.001;t?s+=Ql([0,0],[.32,.72],[0,1],[1,1],i)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),s+=Ql([0,0],[1,0],[.68,.28],[1,1],i)[0]),this.ani.progressEnd(t?1:0,s,r)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,t,i){const r=await this.lock();let s=!1;try{s=await this.transition(e,t,i)}catch(a){console.error(a)}return r(),s}async setRouteId(e,t,i,r){return{changed:await this.setRoot(e,t,{duration:i==="root"?0:void 0,direction:i==="back"?"back":"forward",animationBuilder:r}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,t,i){if(this.activeComponent===e&&jI(t,this.activeParams))return!1;const r=this.activeEl,s=await jT(this.delegate,this.el,e,["ion-page","ion-page-invisible"],t);return this.activeComponent=e,this.activeEl=s,this.activeParams=t,await this.commit(s,r,i),await aR(this.delegate,r),!0}async transition(e,t,i={}){if(t===e)return!1;this.ionNavWillChange.emit();const{el:r,mode:s}=this,a=this.animated&&pt.getBoolean("animated",!0),o=i.animationBuilder||this.animation||pt.get("navAnimation");return await HI(Object.assign(Object.assign({mode:s,animated:a,enteringEl:e,leavingEl:t,baseEl:r,deepWait:FI(r),progressCallback:i.progressAnimation?l=>{l!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,l.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),l.progressEnd(0,0,0)):this.ani=l}:void 0},i),{animationBuilder:o})),this.ionNavDidChange.emit(),!0}async lock(){const e=this.waitPromise;let t;return this.waitPromise=new Promise(i=>t=i),e!==void 0&&await e,t}render(){return re("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return xz}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);function Tz(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(e=>{switch(e){case"ion-router-outlet":customElements.get(e)||customElements.define(e,Ez);break}})}const Sz=Tz;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _z=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",Cz=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",Az=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Ge(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await H9(async(e,t)=>{e===!1&&t!==void 0&&await t,this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:e,translucent:t,keyboardVisible:i}=this,r=Xe(this),s=i&&this.el.getAttribute("slot")!=="top";return re(Ct,{role:"tablist","aria-hidden":s?"true":null,class:gi(e,{[r]:!0,"tab-bar-translucent":t,"tab-bar-hidden":s})},re("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:_z,md:Cz}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);function kz(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(e=>{switch(e){case"ion-tab-bar":customElements.get(e)||customElements.define(e,Az);break}})}const Nz=kz;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Dz=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',Pz=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',Iz=kt(class extends Nt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Ge(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{(e.key==="Enter"||e.key===" ")&&this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const t=e.target,i=this.el.parentElement;(e.composedPath().includes(i)||t!=null&&t.contains(this.el))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},hd(this.el,["aria-label"])),this.layout===void 0&&(this.layout=pt.get("tabButtonLayout","icon-top"))}selectTab(e){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:t,hasLabel:i,href:r,rel:s,target:a,layout:o,selected:l,tab:c,inheritedAttributes:u}=this,d=Xe(this),h={download:this.download,href:r,rel:s,target:a};return re(Ct,{onClick:this.onClick,onKeyup:this.onKeyUp,id:c!==void 0?"tab-button-".concat(c):null,class:{[d]:!0,"tab-selected":l,"tab-disabled":e,"tab-has-label":i,"tab-has-icon":t,"tab-has-label-only":i&&!t,"tab-has-icon-only":t&&!i,["tab-layout-".concat(o)]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},re("a",Object.assign({},h,{class:"button-native",part:"native",role:"tab","aria-selected":l?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},u),re("span",{class:"button-inner"},re("slot",null)),d==="md"&&re("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:Dz,md:Pz}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function Rz(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,Iz);break;case"ion-ripple-effect":customElements.get(e)||p0();break}})}const Oz=Rz,Qc={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Kc,FR,g0,qR=!1,Bg=!1,JT=!1,ur=!1,E2=null,kx=!1;const Mz=n=>{const e=new URL(n,yi.$resourcesUrl$);return e.origin!==zf.location.origin?e.href:e.pathname},Xl=(n,e="")=>()=>{},T2="http://www.w3.org/1999/xlink",S2={},Lz="http://www.w3.org/2000/svg",$z="http://www.w3.org/1999/xhtml",Bz=n=>n!=null,ZT=n=>(n=typeof n,n==="object"||n==="function");function Fz(n){var e,t,i;return(i=(t=(e=n.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&i!==void 0?i:void 0}const Fh=(n,e,...t)=>{let i=null,r=null,s=null,a=!1,o=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)i=d[h],Array.isArray(i)?c(i):i!=null&&typeof i!="boolean"&&((a=typeof n!="function"&&!ZT(i))&&(i=String(i)),a&&o?l[l.length-1].$text$+=i:l.push(a?Fg(null,i):i),o=a)};if(c(t),e){e.key&&(r=e.key),e.name&&(s=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof n=="function")return n(e===null?{}:e,l,Uz);const u=Fg(n,null);return u.$attrs$=e,l.length>0&&(u.$children$=l),u.$key$=r,u.$name$=s,u},Fg=(n,e)=>{const t={$flags$:0,$tag$:n,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},UR={},qz=n=>n&&n.$tag$===UR,Uz={forEach:(n,e)=>n.map(_2).forEach(e),map:(n,e)=>n.map(_2).map(e).map(jz)},_2=n=>({vattrs:n.$attrs$,vchildren:n.$children$,vkey:n.$key$,vname:n.$name$,vtag:n.$tag$,vtext:n.$text$}),jz=n=>{if(typeof n.vtag=="function"){const t=Object.assign({},n.vattrs);return n.vkey&&(t.key=n.vkey),n.vname&&(t.name=n.vname),Fh(n.vtag,t,...n.vchildren||[])}const e=Fg(n.vtag,n.vtext);return e.$attrs$=n.vattrs,e.$children$=n.vchildren,e.$key$=n.vkey,e.$name$=n.vname,e},zz=n=>mV.map(e=>e(n)).find(e=>!!e),Vz=(n,e)=>n!=null&&!ZT(n)?e&4?n==="false"?!1:n===""||!!n:e&2?parseFloat(n):e&1?String(n):n:n,C2=new WeakMap,Hz=(n,e,t)=>{let i=Ug.get(n);vV&&t?(i=i||new CSSStyleSheet,typeof i=="string"?i=e:i.replaceSync(e)):i=e,Ug.set(n,i)},Wz=(n,e,t,i)=>{var r;let s=jR(e,t);const a=Ug.get(s);if(n=n.nodeType===11?n:Ts,a)if(typeof a=="string"){n=n.head||n;let o=C2.get(n),l;if(o||C2.set(n,o=new Set),!o.has(s)){{l=Ts.createElement("style"),l.innerHTML=a;const c=(r=yi.$nonce$)!==null&&r!==void 0?r:Fz(Ts);c!=null&&l.setAttribute("nonce",c),n.insertBefore(l,n.querySelector("link"))}o&&o.add(s)}}else n.adoptedStyleSheets.includes(a)||(n.adoptedStyleSheets=[...n.adoptedStyleSheets,a]);return s},Gz=n=>{const e=n.$cmpMeta$,t=n.$hostElement$,i=e.$flags$,r=Xl("attachStyles",e.$tagName$),s=Wz(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,n.$modeName$);i&10&&(t["s-sc"]=s,t.classList.add(s+"-h"),i&2&&t.classList.add(s+"-s")),r()},jR=(n,e)=>"sc-"+(e&&n.$flags$&32?n.$tagName$+"-"+e:n.$tagName$),A2=(n,e,t,i,r,s)=>{if(t!==i){let a=P2(n,e),o=e.toLowerCase();if(e==="class"){const l=n.classList,c=k2(t),u=k2(i);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in t)(!i||i[l]==null)&&(l.includes("-")?n.style.removeProperty(l):n.style[l]="");for(const l in i)(!t||i[l]!==t[l])&&(l.includes("-")?n.style.setProperty(l,i[l]):n.style[l]=i[l])}else if(e!=="key")if(e==="ref")i&&i(n);else if(!n.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):P2(zf,o)?e=o.slice(2):e=o[2]+e.slice(3),t&&yi.rel(n,e,t,!1),i&&yi.ael(n,e,i,!1);else{const l=ZT(i);if((a||l&&i!==null)&&!r)try{if(n.tagName.includes("-"))n[e]=i;else{const u=i==null?"":i;e==="list"?a=!1:(t==null||n[e]!=u)&&(n[e]=u)}}catch(u){}let c=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,c=!0),i==null||i===!1?(i!==!1||n.getAttribute(e)==="")&&(c?n.removeAttributeNS(T2,e):n.removeAttribute(e)):(!a||s&4||r)&&!l&&(i=i===!0?"":i,c?n.setAttributeNS(T2,e,i):n.setAttribute(e,i))}}},Qz=/\s/,k2=n=>n?n.split(Qz):[],zR=(n,e,t,i)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=n&&n.$attrs$||S2,a=e.$attrs$||S2;for(i in s)i in a||A2(r,i,s[i],void 0,t,e.$flags$);for(i in a)A2(r,i,s[i],a[i],t,e.$flags$)},qg=(n,e,t,i)=>{const r=e.$children$[t];let s=0,a,o,l;if(qR||(JT=!0,r.$tag$==="slot"&&(Kc&&i.classList.add(Kc+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=Ts.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=Ts.createTextNode("");else{if(ur||(ur=r.$tag$==="svg"),a=r.$elm$=Ts.createElementNS(ur?Lz:$z,r.$flags$&2?"slot-fb":r.$tag$),ur&&r.$tag$==="foreignObject"&&(ur=!1),zR(null,r,ur),Bz(Kc)&&a["s-si"]!==Kc&&a.classList.add(a["s-si"]=Kc),r.$children$)for(s=0;s<r.$children$.length;++s)o=qg(n,r,s,a),o&&a.appendChild(o);r.$tag$==="svg"?ur=!1:a.tagName==="foreignObject"&&(ur=!0)}return a["s-hn"]=g0,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=FR,a["s-sn"]=r.$name$||"",l=n&&n.$children$&&n.$children$[t],l&&l.$tag$===r.$tag$&&n.$elm$&&vf(n.$elm$,!1)),a},vf=(n,e)=>{yi.$flags$|=1;const t=n.childNodes;for(let i=t.length-1;i>=0;i--){const r=t[i];r["s-hn"]!==g0&&r["s-ol"]&&(WR(r).insertBefore(r,e1(r)),r["s-ol"].remove(),r["s-ol"]=void 0,JT=!0),e&&vf(r,e)}yi.$flags$&=-2},VR=(n,e,t,i,r,s)=>{let a=n["s-cr"]&&n["s-cr"].parentNode||n,o;for(a.shadowRoot&&a.tagName===g0&&(a=a.shadowRoot);r<=s;++r)i[r]&&(o=qg(null,t,r,n),o&&(i[r].$elm$=o,a.insertBefore(o,e1(e))))},HR=(n,e,t,i,r)=>{for(;e<=t;++e)(i=n[e])&&(r=i.$elm$,KR(i),Bg=!0,r["s-ol"]?r["s-ol"].remove():vf(r,!0),r.remove())},Kz=(n,e,t,i)=>{let r=0,s=0,a=0,o=0,l=e.length-1,c=e[0],u=e[l],d=i.length-1,h=i[0],f=i[d],m,g;for(;r<=l&&s<=d;)if(c==null)c=e[++r];else if(u==null)u=e[--l];else if(h==null)h=i[++s];else if(f==null)f=i[--d];else if(Jp(c,h))Yc(c,h),c=e[++r],h=i[++s];else if(Jp(u,f))Yc(u,f),u=e[--l],f=i[--d];else if(Jp(c,f))(c.$tag$==="slot"||f.$tag$==="slot")&&vf(c.$elm$.parentNode,!1),Yc(c,f),n.insertBefore(c.$elm$,u.$elm$.nextSibling),c=e[++r],f=i[--d];else if(Jp(u,h))(c.$tag$==="slot"||f.$tag$==="slot")&&vf(u.$elm$.parentNode,!1),Yc(u,h),n.insertBefore(u.$elm$,c.$elm$),u=e[--l],h=i[++s];else{for(a=-1,o=r;o<=l;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===h.$key$){a=o;break}a>=0?(g=e[a],g.$tag$!==h.$tag$?m=qg(e&&e[s],t,a,n):(Yc(g,h),e[a]=void 0,m=g.$elm$),h=i[++s]):(m=qg(e&&e[s],t,s,n),h=i[++s]),m&&WR(c.$elm$).insertBefore(m,e1(c.$elm$))}r>l?VR(n,i[d+1]==null?null:i[d+1].$elm$,t,i,s,d):s>d&&HR(e,r,l)},Jp=(n,e)=>n.$tag$===e.$tag$?n.$tag$==="slot"?n.$name$===e.$name$:n.$key$===e.$key$:!1,e1=n=>n&&n["s-ol"]||n,WR=n=>(n["s-ol"]?n["s-ol"]:n).parentNode,Yc=(n,e)=>{const t=e.$elm$=n.$elm$,i=n.$children$,r=e.$children$,s=e.$tag$,a=e.$text$;let o;a===null?(ur=s==="svg"?!0:s==="foreignObject"?!1:ur,s==="slot"||zR(n,e,ur),i!==null&&r!==null?Kz(t,i,e,r):r!==null?(n.$text$!==null&&(t.textContent=""),VR(t,null,e,r,0,r.length-1)):i!==null&&HR(i,0,i.length-1),ur&&s==="svg"&&(ur=!1)):(o=t["s-cr"])?o.parentNode.textContent=a:n.$text$!==a&&(t.data=a)},GR=n=>{const e=n.childNodes;let t,i,r,s,a,o;for(i=0,r=e.length;i<r;i++)if(t=e[i],t.nodeType===1){if(t["s-sr"]){for(a=t["s-sn"],t.hidden=!1,s=0;s<r;s++)if(o=e[s].nodeType,e[s]["s-hn"]!==t["s-hn"]||a!==""){if(o===1&&a===e[s].getAttribute("slot")){t.hidden=!0;break}}else if(o===1||o===3&&e[s].textContent.trim()!==""){t.hidden=!0;break}}GR(t)}},ms=[],QR=n=>{let e,t,i,r,s,a,o=0;const l=n.childNodes,c=l.length;for(;o<c;o++){if(e=l[o],e["s-sr"]&&(t=e["s-cr"])&&t.parentNode)for(i=t.parentNode.childNodes,r=e["s-sn"],a=i.length-1;a>=0;a--)t=i[a],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==e["s-hn"]&&(N2(t,r)?(s=ms.find(u=>u.$nodeToRelocate$===t),Bg=!0,t["s-sn"]=t["s-sn"]||r,s?s.$slotRefNode$=e:ms.push({$slotRefNode$:e,$nodeToRelocate$:t}),t["s-sr"]&&ms.map(u=>{N2(u.$nodeToRelocate$,t["s-sn"])&&(s=ms.find(d=>d.$nodeToRelocate$===t),s&&!u.$slotRefNode$&&(u.$slotRefNode$=s.$slotRefNode$))})):ms.some(u=>u.$nodeToRelocate$===t)||ms.push({$nodeToRelocate$:t}));e.nodeType===1&&QR(e)}},N2=(n,e)=>n.nodeType===1?n.getAttribute("slot")===null&&e===""||n.getAttribute("slot")===e:n["s-sn"]===e?!0:e==="",KR=n=>{n.$attrs$&&n.$attrs$.ref&&n.$attrs$.ref(null),n.$children$&&n.$children$.map(KR)},Yz=(n,e)=>{const t=n.$hostElement$,i=n.$cmpMeta$,r=n.$vnode$||Fg(null,null),s=qz(e)?e:Fh(null,null,e);g0=t.tagName,i.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},i.$attrsToReflect$.map(([a,o])=>s.$attrs$[o]=t[a])),s.$tag$=null,s.$flags$|=4,n.$vnode$=s,s.$elm$=r.$elm$=t.shadowRoot||t,Kc=t["s-sc"],FR=t["s-cr"],qR=(i.$flags$&1)!==0,Bg=!1,Yc(r,s);{if(yi.$flags$|=1,JT){QR(s.$elm$);let a,o,l,c,u,d,h=0;for(;h<ms.length;h++)a=ms[h],o=a.$nodeToRelocate$,o["s-ol"]||(l=Ts.createTextNode(""),l["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=l,o));for(h=0;h<ms.length;h++)if(a=ms[h],o=a.$nodeToRelocate$,a.$slotRefNode$){for(c=a.$slotRefNode$.parentNode,u=a.$slotRefNode$.nextSibling,l=o["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===o["s-sn"]&&c===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){u=d;break}(!u&&c!==o.parentNode||o.nextSibling!==u)&&o!==u&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),c.insertBefore(o,u))}else o.nodeType===1&&(o.hidden=!0)}Bg&&GR(s.$elm$),yi.$flags$&=-2,ms.length=0}},Xz=(n,e)=>{},YR=(n,e)=>(n.$flags$|=16,Xz(n,n.$ancestorComponent$),EV(()=>Jz(n,e))),Jz=(n,e)=>{const t=n.$hostElement$,i=Xl("scheduleUpdate",n.$cmpMeta$.$tagName$),r=t;let s;return e?s=Tu(r,"componentWillLoad"):s=Tu(r,"componentWillUpdate"),s=D2(s,()=>Tu(r,"componentWillRender")),i(),D2(s,()=>Zz(n,r,e))},Zz=async(n,e,t)=>{const i=n.$hostElement$,r=Xl("update",n.$cmpMeta$.$tagName$);i["s-rc"],t&&Gz(n);const s=Xl("render",n.$cmpMeta$.$tagName$);eV(n,e,i),s(),r(),tV(n)},eV=(n,e,t)=>{try{E2=e,e=e.render&&e.render(),n.$flags$&=-17,n.$flags$|=2,(Qc.hasRenderFn||Qc.reflect)&&(Qc.vdomRender||Qc.reflect)&&(Qc.hydrateServerSide||Yz(n,e))}catch(o){jf(o,n.$hostElement$)}return E2=null,null},tV=n=>{const e=n.$cmpMeta$.$tagName$,t=n.$hostElement$,i=Xl("postUpdate",e),r=t;n.$ancestorComponent$,Tu(r,"componentDidRender"),n.$flags$&64?(Tu(r,"componentDidUpdate"),i()):(n.$flags$|=64,Tu(r,"componentDidLoad"),i())},Tu=(n,e,t)=>{if(n&&n[e])try{return n[e](t)}catch(i){jf(i)}},D2=(n,e)=>n&&n.then?n.then(e):e(),nV=(n,e)=>y0(n).$instanceValues$.get(e),iV=(n,e,t,i)=>{const r=y0(n),s=n,a=r.$instanceValues$.get(e),o=r.$flags$,l=s;t=Vz(t,i.$members$[e][0]);const c=Number.isNaN(a)&&Number.isNaN(t);if(t!==a&&!c){r.$instanceValues$.set(e,t);{if(i.$watchers$&&o&128){const d=i.$watchers$[e];d&&d.map(h=>{try{l[h](t,a,e)}catch(f){jf(f,s)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(t,a,e)===!1)return;YR(r,!1)}}}},rV=(n,e,t)=>{if(e.$members$){n.watchers&&(e.$watchers$=n.watchers);const i=Object.entries(e.$members$),r=n.prototype;i.map(([s,[a]])=>{(a&31||a&32)&&Object.defineProperty(r,s,{get(){return nV(this,s)},set(o){iV(this,s,o,e)},configurable:!0,enumerable:!0})});{const s=new Map;r.attributeChangedCallback=function(a,o,l){yi.jmp(()=>{const c=s.get(a);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(r.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},n.observedAttributes=i.filter(([a,o])=>o[0]&15).map(([a,o])=>{const l=o[1]||a;return s.set(l,a),o[0]&512&&e.$attrsToReflect$.push([a,l]),l})}}return n},sV=async(n,e,t,i,r)=>{if(!(e.$flags$&32)&&(r=n.constructor,e.$flags$|=32,customElements.whenDefined(t.$tagName$).then(()=>e.$flags$|=128),r.style)){let a=r.style;typeof a!="string"&&(a=a[e.$modeName$=zz(n)]);const o=jR(t,e.$modeName$);if(!Ug.has(o)){const l=Xl("registerStyles",t.$tagName$);Hz(o,a,!!(t.$flags$&1)),l()}}e.$ancestorComponent$,(()=>YR(e,!0))()},aV=n=>{},oV=n=>{if(!(yi.$flags$&1)){const e=y0(n),t=e.$cmpMeta$,i=Xl("connectedCallback",t.$tagName$);e.$flags$&1?(XR(n,e,t.$listeners$),aV(e.$lazyInstance$)):(e.$flags$|=1,t.$flags$&12&&lV(n),t.$members$&&Object.entries(t.$members$).map(([r,[s]])=>{if(s&31&&n.hasOwnProperty(r)){const a=n[r];delete n[r],n[r]=a}}),sV(n,e,t)),i()}},lV=n=>{const e=n["s-cr"]=Ts.createComment("");e["s-cn"]=!0,n.insertBefore(e,n.firstChild)},cV=n=>{if(!(yi.$flags$&1)){const e=y0(n);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}},uV=(n,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=n.$watchers$,t.$attrsToReflect$=[];const i=n.prototype.connectedCallback,r=n.prototype.disconnectedCallback;return Object.assign(n.prototype,{__registerHost(){pV(this,t)},connectedCallback(){oV(this),i&&i.call(this)},disconnectedCallback(){cV(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)})}}),n.is=t.$tagName$,rV(n,t)},XR=(n,e,t,i)=>{t&&t.map(([r,s,a])=>{const o=hV(n,r),l=dV(e,a),c=fV(r);yi.ael(o,s,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>yi.rel(o,s,l,c))})},dV=(n,e)=>t=>{try{Qc.lazyLoad||n.$hostElement$[e](t)}catch(i){jf(i)}},hV=(n,e)=>e&4?Ts:e&8?zf:e&16?Ts.body:n,fV=n=>yV?{passive:(n&1)!==0,capture:(n&2)!==0}:(n&2)!==0,JR=new WeakMap,y0=n=>JR.get(n),pV=(n,e)=>{const t={$flags$:0,$hostElement$:n,$cmpMeta$:e,$instanceValues$:new Map};return XR(n,t,e.$listeners$),JR.set(n,t)},P2=(n,e)=>e in n,jf=(n,e)=>(0,console.error)(n,e),Ug=new Map,mV=[],zf=typeof window<"u"?window:{},Ts=zf.document||{head:{}},gV=zf.HTMLElement||class{},yi={$flags$:0,$resourcesUrl$:"",jmp:n=>n(),raf:n=>requestAnimationFrame(n),ael:(n,e,t,i)=>n.addEventListener(e,t,i),rel:(n,e,t,i)=>n.removeEventListener(e,t,i),ce:(n,e)=>new CustomEvent(n,e)},yV=(()=>{let n=!1;try{Ts.addEventListener("e",null,Object.defineProperty({},"passive",{get(){n=!0}}))}catch(e){}return n})(),bV=n=>Promise.resolve(n),vV=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(n){}return!1})(),I2=[],ZR=[],wV=(n,e)=>t=>{n.push(t),kx||(kx=!0,e&&yi.$flags$&4?xV(Nx):yi.raf(Nx))},R2=n=>{for(let e=0;e<n.length;e++)try{n[e](performance.now())}catch(t){jf(t)}n.length=0},Nx=()=>{R2(I2),R2(ZR),(kx=I2.length>0)&&yi.raf(Nx)},xV=n=>bV().then(n),EV=wV(ZR,!0);let bv;const TV=()=>{if(typeof window>"u")return new Map;if(!bv){const n=window;n.Ionicons=n.Ionicons||{},bv=n.Ionicons.map=n.Ionicons.map||new Map}return bv},SV=n=>{let e=vv(n.src);return e||(e=eO(n.name,n.icon,n.mode,n.ios,n.md),e?_V(e):n.icon&&(e=vv(n.icon),e||(e=vv(n.icon[n.mode]),e))?e:null)},_V=n=>{const e=TV().get(n);return e||Mz("svg/".concat(n,".svg"))},eO=(n,e,t,i,r)=>(t=(t&&Zp(t))==="ios"?"ios":"md",i&&t==="ios"?n=Zp(i):r&&t==="md"?n=Zp(r):(!n&&e&&!tO(e)&&(n=e),jg(n)&&(n=Zp(n))),!jg(n)||n.trim()===""||n.replace(/[a-z]|-|\d/gi,"")!==""?null:n),vv=n=>jg(n)&&(n=n.trim(),tO(n))?n:null,tO=n=>n.length>0&&/(\/|\.)/.test(n),jg=n=>typeof n=="string",Zp=n=>n.toLowerCase(),CV=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},AV=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",kV=n=>{const e=document.createElement("div");e.innerHTML=n;for(let i=e.childNodes.length-1;i>=0;i--)e.childNodes[i].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[i]);const t=e.firstElementChild;if(t&&t.nodeName.toLowerCase()==="svg"){const i=t.getAttribute("class")||"";if(t.setAttribute("class",(i+" s-ion-icon").trim()),nO(t))return e.innerHTML}return""},nO=n=>{if(n.nodeType===1){if(n.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;if(jg(t)&&t.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<n.childNodes.length;e++)if(!nO(n.childNodes[e]))return!1}return!0},NV=n=>n.startsWith("data:image/svg+xml"),DV=n=>n.indexOf(";utf8,")!==-1,Cl=new Map,O2=new Map;let wv;const PV=(n,e)=>{let t=O2.get(n);if(!t)if(typeof fetch<"u"&&typeof document<"u")if(NV(n)&&DV(n)){wv||(wv=new DOMParser);const r=wv.parseFromString(n,"text/html").querySelector("svg");return r&&Cl.set(n,r.outerHTML),Promise.resolve()}else t=fetch(n).then(i=>{if(i.ok)return i.text().then(r=>{r&&e!==!1&&(r=kV(r)),Cl.set(n,r||"")});Cl.set(n,"")}),O2.set(n,t);else return Cl.set(n,""),Promise.resolve();return t},IV=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",RV=uV(class extends gV{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=OV(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=CV(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(n,e,t){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const i=this.io=new window.IntersectionObserver(r=>{r[0].isIntersecting&&(i.disconnect(),this.io=void 0,t())},{rootMargin:e});i.observe(n)}else t()}loadIcon(){if(this.isVisible){const n=SV(this);n&&(Cl.has(n)?this.svgContent=Cl.get(n):PV(n,this.sanitize).then(()=>this.svgContent=Cl.get(n)))}this.iconName=eO(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:n,iconName:e,inheritedAttributes:t,el:i}=this,r=this.mode||"md",s=e?(e.includes("arrow")||e.includes("chevron"))&&n!==!1:!1,a=n||s;return Fh(UR,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},MV(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":a,"icon-rtl":a&&AV(i)})},t),this.svgContent?Fh("div",{class:"icon-inner",innerHTML:this.svgContent}):Fh("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return IV}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),OV=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",MV=n=>n?{"ion-color":!0,["ion-color-".concat(n)]:!0}:null;function LV(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,RV);break}})}const $V=LV,t1=fe.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),BV=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(n){if(n.id){const e=this.ionViewWillEnterCallbacks.findIndex(t=>t.id===n.id);e>-1?this.ionViewWillEnterCallbacks[e]=n:this.ionViewWillEnterCallbacks.push(n)}else this.ionViewWillEnterCallbacks.push(n)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(n=>n())}onIonViewDidEnter(n){if(n.id){const e=this.ionViewDidEnterCallbacks.findIndex(t=>t.id===n.id);e>-1?this.ionViewDidEnterCallbacks[e]=n:this.ionViewDidEnterCallbacks.push(n)}else this.ionViewDidEnterCallbacks.push(n)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(n=>n())}onIonViewWillLeave(n){if(n.id){const e=this.ionViewWillLeaveCallbacks.findIndex(t=>t.id===n.id);e>-1?this.ionViewWillLeaveCallbacks[e]=n:this.ionViewWillLeaveCallbacks.push(n)}else this.ionViewWillLeaveCallbacks.push(n)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(n=>n())}onIonViewDidLeave(n){if(n.id){const e=this.ionViewDidLeaveCallbacks.findIndex(t=>t.id===n.id);e>-1?this.ionViewDidLeaveCallbacks[e]=n:this.ionViewDidLeaveCallbacks.push(n)}else this.ionViewDidLeaveCallbacks.push(n)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(n=>n()),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(n){this.componentCanBeDestroyedCallback=n}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},fa=fe.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:n=>{typeof window<"u"&&(typeof n=="string"?window.location.pathname=n:window.history.back())},navigate:n=>{typeof window<"u"&&(window.location.pathname=n)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(n,e)=>{typeof window<"u"&&(window.location.pathname=e)},resetTab:(n,e)=>{typeof window<"u"&&(window.location.pathname=e)}}),n1=n=>n.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),b0=n=>n.replace(/([A-Z])/g,e=>"-".concat(e[0].toLowerCase())),i1=(n,e,t={})=>{if(n instanceof Element){const i=FV(n.classList,e,t);i!==""&&(n.className=i),Object.keys(e).forEach(r=>{if(!(r==="children"||r==="style"||r==="ref"||r==="class"||r==="className"||r==="forwardedRef"))if(r.indexOf("on")===0&&r[2]===r[2].toUpperCase()){const s=r.substring(2),a=s[0].toLowerCase()+s.substring(1);Vf(a)||UV(n,a,e[r])}else n[r]=e[r],typeof e[r]==="string"&&n.setAttribute(b0(r),e[r])})}},FV=(n,e,t)=>{const i=e.className||e.class,r=t.className||t.class,s=xv(n),a=xv(i?i.split(" "):[]),o=xv(r?r.split(" "):[]),l=[];return s.forEach(c=>{a.has(c)?(l.push(c),a.delete(c)):o.has(c)||l.push(c)}),a.forEach(c=>l.push(c)),l.join(" ")},qV=n=>{switch(n){case"doubleclick":return"dblclick"}return n};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const Vf=n=>{if(typeof document>"u")return!0;{const e="on"+qV(n);let t=e in document;if(!t){const i=document.createElement("div");i.setAttribute(e,"return;"),t=typeof i[e]=="function"}return t}},UV=(n,e,t)=>{const i=n.__events||(n.__events={}),r=i[e];r&&n.removeEventListener(e,r),n.addEventListener(e,i[e]=function(a){t&&t.call(this,a)})},xv=n=>{const e=new Map;return n.forEach(t=>e.set(t,t)),e},jV=(n,e)=>{typeof n=="function"?n(e):n!=null&&(n.current=e)},v0=(...n)=>e=>{n.forEach(t=>{jV(t,e)})},zV=(n,e)=>{const t=(i,r)=>fe.createElement(n,Object.assign({},i,{forwardedRef:r}));return t.displayName=e,fe.forwardRef(t)},VV=(n,e)=>{e!==void 0&&typeof customElements<"u"&&!customElements.get(n)&&customElements.define(n,e)},Gt=(n,e,t,i)=>{i!==void 0&&i();const r=n1(n),s=class extends fe.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){i1(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:l,style:c,className:u,ref:d}=a,h=ii(a,["children","forwardedRef","style","className","ref"]);let f=Object.keys(h).reduce((g,_)=>{const v=h[_];if(_.indexOf("on")===0&&_[2]===_[2].toUpperCase()){const y=_.substring(2).toLowerCase();typeof document<"u"&&Vf(y)&&(g[_]=v)}else{const y=typeof v;(y==="string"||y==="boolean"||y==="number")&&(g[b0(_)]=v)}return g},{});t&&(f=t(this.props,f));const m=Object.assign(Object.assign({},f),{ref:v0(l,this.setComponentElRef),style:c});return ze.createElement(n,m,o)}static get displayName(){return r}};return e&&(s.contextType=e),zV(s,r)},HV=Gt("ion-badge",void 0,void 0,i9),Hf=Gt("ion-buttons",void 0,void 0,l9),Ks=Gt("ion-col",void 0,void 0,T9),ju=Gt("ion-content",void 0,void 0,D9),zg=Gt("ion-grid",void 0,void 0,K9),Uo=Gt("ion-header",void 0,void 0,s7),Ev=Gt("ion-img",void 0,void 0,u7),WV=Gt("ion-input",void 0,void 0,C7),Mo=Gt("ion-label",void 0,void 0,A7),GV=Gt("ion-list",void 0,void 0,I7),QV=Gt("ion-menu",void 0,void 0,j7),iO=Gt("ion-menu-button",void 0,void 0,G7),Xd=Gt("ion-menu-toggle",void 0,void 0,X7),KV=Gt("ion-range",void 0,void 0,uj),Rl=Gt("ion-row",void 0,void 0,pj),YV=Gt("ion-spinner",void 0,void 0,_j),Tv=Gt("ion-text",void 0,void 0,Nj),wf=Gt("ion-title",void 0,void 0,Oj),zu=Gt("ion-toolbar",void 0,void 0,Fj),oc=(n,e)=>{const t=(i,r)=>fe.createElement(n,Object.assign({},i,{forwardedRef:r}));return t.displayName=e,fe.forwardRef(t)},XV=n=>Oa(window,n),r1=()=>{if(typeof window<"u"){const n=window.Ionic;if(n&&n.config)return n.config}return null},rO=(n,e)=>{VV(n,e);const t=n1(n),i=class extends fe.Component{constructor(r){super(r),this.handleClick=s=>{const{routerLink:a,routerDirection:o,routerOptions:l,routerAnimation:c}=this.props;a!==void 0&&(s.preventDefault(),this.context.navigate(a,o,void 0,c,l))},this.ref=fe.createRef(),this.stableMergedRefs=v0(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(r){const s=this.ref.current;i1(s,this.props,r)}render(){const r=this.props,{children:s,forwardedRef:a,style:o,className:l,ref:c}=r,u=ii(r,["children","forwardedRef","style","className","ref"]),d=Object.keys(u).reduce((f,m)=>{if(m.indexOf("on")===0&&m[2]===m[2].toUpperCase()){const g=m.substring(2).toLowerCase();Vf(g)&&(f[m]=u[m])}else["string","boolean","number"].includes(typeof u[m])&&(f[b0(m)]=u[m]);return f},{}),h=Object.assign(Object.assign({},d),{ref:this.stableMergedRefs,style:o});if(this.props.routerLink&&!this.props.href&&(h.href=this.props.routerLink),h.onClick){const f=h.onClick;h.onClick=m=>{f(m),m.defaultPrevented||this.handleClick(m)}}else h.onClick=this.handleClick;return ze.createElement(n,h,s)}static get displayName(){return t}static get contextType(){return fa}};return oc(i,t)},Hi=rO("ion-button",qj),Eo=rO("ion-item",Uj),JV=(n,e)=>{n instanceof Element&&Object.keys(e).forEach(t=>{if(t.indexOf("on")===0&&t[2]===t[2].toUpperCase()){const i=t.substring(2),r=i[0].toLowerCase()+i.substring(1);Vf(r)||ZV(n,r)}})},ZV=(n,e)=>{const t=n.__events||(n.__events={}),i=t[e];i&&(n.removeEventListener(e,i),t[e]=void 0)},sO=(n,e,t)=>{e&&e();const i=n1(n),r=class extends fe.Component{constructor(s){super(s),this.handleIonMount=()=>{this.setState({isOpen:!0})},this.handleWillPresent=a=>{this.setState({isOpen:!0}),this.props.onWillPresent&&this.props.onWillPresent(a)},this.handleDidDismiss=a=>{const o=this.wrapperRef.current,l=this.ref.current;o&&l&&(l.append(o),this.setState({isOpen:!1})),this.props.onDidDismiss&&this.props.onDidDismiss(a)},this.ref=fe.createRef(),this.stableMergedRefs=v0(this.ref,this.props.forwardedRef),this.state={isOpen:!1},this.wrapperRef=fe.createRef()}componentDidMount(){var s,a,o;this.componentDidUpdate(this.props),(s=this.ref.current)===null||s===void 0||s.addEventListener("ionMount",this.handleIonMount),(a=this.ref.current)===null||a===void 0||a.addEventListener("willPresent",this.handleWillPresent),(o=this.ref.current)===null||o===void 0||o.addEventListener("didDismiss",this.handleDidDismiss)}componentDidUpdate(s){const a=this.ref.current,o=this.props,l=ii(o,["onDidDismiss","onWillPresent"]);i1(a,l,s)}componentWillUnmount(){const s=this.ref.current;s&&this.state.isOpen&&(s.removeEventListener("didDismiss",this.handleDidDismiss),s.remove(),JV(s,this.props))}render(){const s=this.props,{children:a,forwardedRef:o,style:l,className:c,ref:u}=s,d=ii(s,["children","forwardedRef","style","className","ref"]),h=Object.keys(d).reduce((g,_)=>{if(_.indexOf("on")===0&&_[2]===_[2].toUpperCase()){const v=_.substring(2).toLowerCase();Vf(v)&&(g[_]=d[_])}else["string","boolean","number"].includes(typeof d[_])&&(g[b0(_)]=d[_]);return g},{}),f=Object.assign(Object.assign({},h),{ref:this.stableMergedRefs,style:l}),m=()=>t?"".concat(M2," ion-page"):M2;return ze.createElement("template",{},ze.createElement(n,f,this.state.isOpen||this.props.keepContentsMounted?ze.createElement("div",{ref:this.wrapperRef,className:m()},a):null))}static get displayName(){return i}};return oc(r,i)},M2="ion-delegate-host",aO=sO("ion-alert",jj),eH=sO("ion-modal",cz,!0),tH=fe.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),nH=({onAddOverlay:n,onRemoveOverlay:e})=>{const[t,i]=ze.useState({}),r=ze.useRef({});r.current=t,ze.useEffect(()=>{n(s),e(a)},[]);const s=(l,c,u)=>{const d=Object.assign({},r.current);d[l]={component:c,containerElement:u},i(d)},a=l=>{const c=Object.assign({},r.current);delete c[l],i(c)},o=Object.keys(t);return fe.createElement(fe.Fragment,null,o.map(l=>{const c=t[l];return t8.createPortal(c.component,c.containerElement,"overlay-".concat(l))}))},iH=Gt("ion-tab-button",void 0,void 0,Oz),rH=Gt("ion-tab-bar",void 0,void 0,Nz),sH=Gt("ion-back-button",void 0,void 0,wz),Dx=Gt("ion-router-outlet",void 0,void 0,Sz),aH=Gt("ion-app",void 0,void 0,mz),oH=Gt("ion-icon",void 0,void 0,$V),lH=(()=>class extends fe.Component{constructor(n){super(n),this.ionContext={addOverlay:(e,t,i)=>{this.addOverlayCallback&&this.addOverlayCallback(e,t,i)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return fe.createElement(tH.Provider,{value:this.ionContext},fe.createElement(aH,Object.assign({},this.props),this.props.children),fe.createElement(nH,{onAddOverlay:n=>{this.addOverlayCallback=n},onRemoveOverlay:n=>{this.removeOverlayCallback=n}}))}static get displayName(){return"IonApp"}})(),s1=fe.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class oO extends fe.PureComponent{constructor(e){super(e),this.ionPageElementRef=fe.createRef(),this.stableMergedRefs=v0(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:t,children:i,routeInfo:r,forwardedRef:s}=e,a=ii(e,["className","children","routeInfo","forwardedRef"]);return fe.createElement(t1.Consumer,null,o=>(this.ionLifeCycleContext=o,fe.createElement("div",Object.assign({className:t?"".concat(t," ion-page"):"ion-page",ref:this.stableMergedRefs},a),i)))}static get contextType(){return s1}}class cH extends fe.Component{constructor(e){super(e)}render(){const e=this.props,{className:t,children:i,forwardedRef:r}=e,s=ii(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?fe.createElement(oO,Object.assign({className:t?"".concat(t):"",routeInfo:this.context.routeInfo,forwardedRef:r},s),i):fe.createElement("div",Object.assign({className:t?"ion-page ".concat(t):"ion-page",ref:r},s),i)}static get displayName(){return"IonPage"}static get contextType(){return fa}}const w0=oc(cH,"IonPage"),uH=(n,e)=>{const t=new WeakMap;return{attachViewToDom:async(s,a,o,l)=>{const c=document.createElement("div");l&&c.classList.add(...l),s.appendChild(c);const u=a(o),d=wT.createPortal(u,c);return t.set(c,d),n(d),Promise.resolve(c)},removeViewFromDom:(s,a)=>{const o=t.get(a);return o&&e(o),a.remove(),Promise.resolve()}}},dH=Gt("ion-nav",void 0,void 0,nj),hH=n=>{var{children:e,forwardedRef:t}=n,i=ii(n,["children","forwardedRef"]);const[r,s]=ze.useState([]),a=c=>s(u=>[...u,c]),o=c=>s(u=>u.filter(d=>d!==c)),l=ze.useMemo(()=>uH(a,o),[]);return fe.createElement(dH,Object.assign({delegate:l,ref:t},i),r)};oc(hH,"IonNav");fe.createContext({activeTab:void 0,selectTab:()=>!1});const fH=typeof HTMLElement<"u"?HTMLElement:class{};class pH extends fe.Component{constructor(e){super(e),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||Gl(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:t,children:i,routeInfo:r}=e,s=ii(e,["StackManager","children","routeInfo"]);return fe.createElement(t1.Consumer,null,a=>(this.ionLifeCycleContext=a,fe.createElement(t,{routeInfo:r},fe.createElement(Dx,Object.assign({setRef:o=>this.ionRouterOutlet=o},s),i))))}static get contextType(){return s1}}class mH extends fe.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),t=this.props,{children:i,forwardedRef:r}=t,s=ii(t,["children","forwardedRef"]);return this.context.hasIonicRouter()?s.ionPage?fe.createElement(pH,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},s),i):fe.createElement(e,{routeInfo:this.context.routeInfo},fe.createElement(Dx,Object.assign({},s,{forwardedRef:r}),i)):fe.createElement(Dx,Object.assign({ref:r},this.props),this.props.children)}static get contextType(){return fa}}const gH=oc(mH,"IonRouterOutlet"),Su=(()=>class extends fe.Component{constructor(n){super(n),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const n=this.props,e=ii(n,["onClick"]);return fe.createElement(iH,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}})();class yH extends fe.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=i=>{};const t={};fe.Children.forEach(e.children,i=>{var r,s,a,o;i!=null&&typeof i=="object"&&i.props&&(i.type===Su||i.type.isTabButton)&&(t[i.props.tab]={originalHref:i.props.href,currentHref:i.props.href,originalRouteOptions:i.props.href===((r=e.routeInfo)===null||r===void 0?void 0:r.pathname)?(s=e.routeInfo)===null||s===void 0?void 0:s.routeOptions:void 0,currentRouteOptions:i.props.href===((a=e.routeInfo)===null||a===void 0?void 0:a.pathname)?(o=e.routeInfo)===null||o===void 0?void 0:o.routeOptions:void 0})}),this.state={tabs:t},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,i=Object.keys(e).find(r=>{const s=e[r].originalHref;return this.props.routeInfo.pathname.startsWith(s)});i&&this.setState({activeTab:i})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const t=this.state.tabs[e];return t?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(e,t){var i,r,s;const a=Object.assign({},t.tabs),l=Object.keys(t.tabs).find(u=>{const d=t.tabs[u].originalHref;return e.routeInfo.pathname.startsWith(d)});fe.Children.forEach(e.children,u=>{if(u!=null&&typeof u=="object"&&u.props&&(u.type===Su||u.type.isTabButton)){const d=a[u.props.tab];(!d||d.originalHref!==u.props.href)&&(a[u.props.tab]={originalHref:u.props.href,currentHref:u.props.href,originalRouteOptions:u.props.routeOptions,currentRouteOptions:u.props.routeOptions})}});const{activeTab:c}=t;if(l&&c){const u=t.tabs[c].currentHref,d=t.tabs[c].currentRouteOptions;(l!==c||u!==((i=e.routeInfo)===null||i===void 0?void 0:i.pathname)||d!==((r=e.routeInfo)===null||r===void 0?void 0:r.routeOptions))&&(a[l]={originalHref:a[l].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:a[l].originalRouteOptions,currentRouteOptions:(s=e.routeInfo)===null||s===void 0?void 0:s.routeOptions},e.routeInfo.routeAction==="pop"&&l!==c&&(a[c]={originalHref:a[c].originalHref,currentHref:a[c].originalHref,originalRouteOptions:a[c].originalRouteOptions,currentRouteOptions:a[c].currentRouteOptions}))}return l&&e.onSetCurrentTab(l,e.routeInfo),{activeTab:l,tabs:a}}onTabButtonClick(e,t){const i=this.state.tabs[e.detail.tab],r=i.originalHref,s=e.detail.href,{activeTab:a}=this.state;t&&t(e),a===e.detail.tab?r!==s&&this.context.resetTab(e.detail.tab,r,i.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,s,e.detail.routeOptions))}renderTabButton(e){return t=>{var i,r;if(t!=null&&t.props&&(t.type===Su||t.type.isTabButton)){const s=t.props.tab===e?(i=this.props.routeInfo)===null||i===void 0?void 0:i.pathname:this.state.tabs[t.props.tab].currentHref,a=t.props.tab===e?(r=this.props.routeInfo)===null||r===void 0?void 0:r.routeOptions:this.state.tabs[t.props.tab].currentRouteOptions;return fe.cloneElement(t,{href:s,routeOptions:a,onClick:o=>this.onTabButtonClick(o,t.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return fe.createElement(rH,Object.assign({},this.props,{selectedTab:e}),fe.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return fa}}const bH=fe.memo(n=>{var{forwardedRef:e}=n,t=ii(n,["forwardedRef"]);const i=ze.useContext(fa);return fe.createElement(yH,Object.assign({ref:e},t,{routeInfo:t.routeInfo||i.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:i.setCurrentTab}),t.children)}),vH=oc(bH,"IonTabBar");class wH extends fH{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",wH));const xH=(()=>class extends fe.Component{constructor(){super(...arguments),this.clickButton=n=>{if(n.target&&n.target.closest("ion-nav")!==null)return;const{defaultHref:e,routerAnimation:t}=this.props;this.context.hasIonicRouter()?(n.stopPropagation(),this.context.goBack(e,t)):e!==void 0&&(window.location.href=e)}}render(){return fe.createElement(sH,Object.assign({onClick:this.clickButton},this.props))}static get displayName(){return"IonBackButton"}static get contextType(){return fa}})();class EH extends fe.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,t;const i=this.props,{icon:r,ios:s,md:a,mode:o}=i,l=ii(i,["icon","ios","md","mode"]);let c;const u=r1(),d=o||(u==null?void 0:u.get("mode"));return s||a?d==="ios"?c=(e=s!=null?s:a)!==null&&e!==void 0?e:r:c=(t=a!=null?a:s)!==null&&t!==void 0?t:r:c=r,fe.createElement(oH,Object.assign({ref:this.props.forwardedRef,icon:c},l),this.props.children)}static get contextType(){return fa}}const hr=oc(EH,"IonIcon");class a1 extends fe.PureComponent{render(){const e=this.context.getIonRoute();return!this.context.hasIonicRouter()||!a1?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):fe.createElement(e,Object.assign({},this.props))}static get contextType(){return fa}}class lO extends fe.PureComponent{render(){const e=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!lO?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):fe.createElement(e,Object.assign({},this.props))}static get contextType(){return fa}}const TH=fe.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class bce extends fe.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=ht(e.id)}setupAnimation(e){const t=this.animation;this.nodes.size>0&&t.addElement(Array.from(this.nodes.values())),L2(t,e),$2(t,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const t=this.animation,i=this.props;L2(t,i,e),SH(t,i,e),$2(t,i,e)}render(){const{children:e}=this.props;return fe.createElement(fe.Fragment,null,fe.Children.map(e,(t,i)=>fe.cloneElement(t,{ref:r=>this.nodes.set(i,r)})))}}const L2=(n,e={},t={})=>{const i=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const l in e)e.hasOwnProperty(l)&&!i.includes(l)&&e[l]!==t[l]&&n[l](e[l]);const r=e.from;r&&r!==t.from&&(Array.isArray(r)?r:[r]).forEach(c=>n.from(c.property,c.value));const s=e.to;s&&s!==t.to&&(Array.isArray(s)?s:[s]).forEach(c=>n.to(c.property,c.value));const a=e.fromTo;a&&a!==t.fromTo&&(Array.isArray(a)?a:[a]).forEach(c=>n.fromTo(c.property,c.fromValue,c.toValue));const o=e.onFinish;o&&o!==t.onFinish&&(Array.isArray(o)?o:[o]).forEach(c=>n.onFinish(c.callback,c.opts))},SH=(n,e={},t={})=>{var i,r,s,a,o;const{progressStart:l,progressStep:c,progressEnd:u}=e;l&&(((i=t.progressStart)===null||i===void 0?void 0:i.forceLinearEasing)!==(l==null?void 0:l.forceLinearEasing)||((r=t.progressStart)===null||r===void 0?void 0:r.step)!==(l==null?void 0:l.step))&&n.progressStart(l.forceLinearEasing,l.step),c&&((s=t.progressStep)===null||s===void 0?void 0:s.step)!==(c==null?void 0:c.step)&&n.progressStep(c.step),u&&(((a=t.progressEnd)===null||a===void 0?void 0:a.playTo)!==(u==null?void 0:u.playTo)||((o=t.progressEnd)===null||o===void 0?void 0:o.step)!==(u==null?void 0:u.step)||(t==null?void 0:t.dur)!==(u==null?void 0:u.dur))&&n.progressEnd(u.playTo,u.step,u.dur)},$2=(n,e={},t={})=>{!t.play&&e.play&&n.play(),!t.pause&&e.pause&&n.pause(),!t.stop&&e.stop&&n.stop(),!t.destroy&&e.destroy&&n.destroy()},B2={main:0},Vg=(n="main")=>{var e;const t=((e=B2[n])!==null&&e!==void 0?e:0)+1;return B2[n]=t,t.toString()},_H=(n={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),aU(Object.assign({},n))},cO=fe.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class F2 extends fe.Component{constructor(e){super(e),this.ionLifeCycleContext=new BV,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return fe.createElement(t1.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class CH{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){e.routeAction==="push"||e.routeAction==null?this._add(e):e.routeAction==="pop"?this._pop(e):e.routeAction==="replace"&&this._replace(e),e.routeDirection==="root"&&(this._clear(),this._add(e))}clearTabStack(e){const t=this._getRouteInfosByKey(e);t&&(t.forEach(i=>{this.locationHistory=this.locationHistory.filter(r=>r.id!==i.id)}),this.tabHistory[e]=[])}update(e){const t=this.locationHistory.findIndex(r=>r.id===e.id);t>-1&&this.locationHistory.splice(t,1,e);const i=this.tabHistory[e.tab||""];if(i){const r=i.findIndex(s=>s.id===e.id);r>-1?i.splice(r,1,e):i.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const t=this._getRouteInfosByKey(e.tab);t&&(this._areRoutesEqual(t[t.length-1],e)&&t.pop(),t.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,t){return!e||!t?!1:e.pathname===t.pathname&&e.search===t.search}_pop(e){const t=this._getRouteInfosByKey(e.tab);t&&(t.pop(),t.pop(),t.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const t=this._getRouteInfosByKey(e.tab);t&&t.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach(t=>this.tabHistory[t]=[]),this.locationHistory=[]}_getRouteInfosByKey(e){let t;return e&&(t=this.tabHistory[e],t||(t=this.tabHistory[e]=[])),t}getFirstRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[0]}getCurrentRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[t.length-1]}findLastLocation(e){const t=this._getRouteInfosByKey(e.tab);if(t)for(let i=t.length-2;i>=0;i--){const r=t[i];if(r&&r.pathname===e.pushedByRoute)return r}for(let i=this.locationHistory.length-2;i>=0;i--){const r=this.locationHistory[i];if(r&&r.pathname===e.pushedByRoute)return r}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class AH extends fe.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(t,i,r,s,a)=>{this.navigate(t,i,r,a,s)},back:t=>{this.goBack(void 0,t)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,t=>{this.nativeGoBack(),t()})}goBack(e,t){this.props.onNavigateBack(e,t)}nativeGoBack(){this.props.onNativeBack()}navigate(e,t="forward",i="push",r,s,a){this.props.onNavigate(e,i,t,r,s,a)}getPageManager(){return oO}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return fe.createElement(fa.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},fe.createElement(TH.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class kH{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:t}=e;this.viewStacks[t]?this.viewStacks[t].push(e):this.viewStacks[t]=[e]}clear(e){return setTimeout(()=>{delete this.viewStacks[e]},500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:t}=e,i=this.viewStacks[t];if(i){const r=i.find(s=>s.id===e.id);r&&(r.mount=!1,this.viewStacks[t]=i.filter(s=>s.id!==r.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),t=[];return e.forEach(i=>{t.push(...this.viewStacks[i])}),t}}class NH extends fe.PureComponent{render(){return fe.createElement(yh,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},this.props.computedMatch!==void 0?{computedMatch:this.props.computedMatch}:{}))}}class DH extends kH{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,t,i,r){const s={id:Vg("viewItem"),outletId:e,ionPageElement:r,reactElement:t,mount:!0,ionRoute:!1},a={exact:t.props.exact,path:t.props.path||t.props.from,component:t.props.component},o=Hl(i.pathname,a);return t.type===a1&&(s.ionRoute=!0,s.disableIonPageManagement=t.props.disableIonPageManagement),s.routeData={match:o,childProps:t.props},s}getChildrenToRender(e,t,i){const r=this.getViewItemsForOutlet(e);return fe.Children.forEach(t.props.children,a=>{const o=r.find(l=>q2(a,l.routeData.childProps.path||l.routeData.childProps.from));o&&(o.reactElement=a)}),r.map(a=>{let o;if(a.ionRoute&&!a.disableIonPageManagement)o=fe.createElement(F2,{key:"view-".concat(a.id),mount:a.mount,removeView:()=>this.remove(a)},fe.cloneElement(a.reactElement,{computedMatch:a.routeData.match}));else{const l=q2(a.reactElement,i.pathname);o=fe.createElement(F2,{key:"view-".concat(a.id),mount:a.mount,removeView:()=>this.remove(a)},fe.cloneElement(a.reactElement,{computedMatch:a.routeData.match})),!l&&a.routeData.match&&(a.routeData.match=void 0,a.mount=!1)}return o})}findViewItemByRouteInfo(e,t,i){const{viewItem:r,match:s}=this.findViewItemByPath(e.pathname,t);return(i===void 0||i===!0)&&r&&s&&(r.routeData.match=s),r}findLeavingViewItemByRouteInfo(e,t,i=!0){const{viewItem:r}=this.findViewItemByPath(e.lastPathname,t,!1,i);return r}findViewItemByPathname(e,t){const{viewItem:i}=this.findViewItemByPath(e,t);return i}findViewItemByPath(e,t,i,r){let s,a,o;if(t)o=this.getViewItemsForOutlet(t),o.some(l),s||o.some(c);else{const u=this.getAllViewItems();u.some(l),s||u.some(c)}return{viewItem:s,match:a};function l(u){if(r&&!u.ionRoute)return!1;const d={exact:i?!0:u.routeData.childProps.exact,path:u.routeData.childProps.path||u.routeData.childProps.from,component:u.routeData.childProps.component},h=Hl(e,d);return h?(s=u,a=h,!0):!1}function c(u){return!u.routeData.childProps.path&&!u.routeData.childProps.from?(a={path:e,url:e,isExact:!0,params:{}},s=u,!0):!1}}}function q2(n,e,t){const i={exact:t?!0:n.props.exact,path:n.props.path||n.props.from,component:n.props.component};return Hl(e,i)}function PH(n){let e;if(typeof n=="string"?e=n:e=n.outerHTML,document){const t=document.createElement("div");t.innerHTML=e,t.style.zIndex="";const i=t.getElementsByTagName("ion-back-button");return i[0]&&i[0].remove(),t.firstChild}}const U2=n=>!n.classList.contains("ion-page-invisible")&&!n.classList.contains("ion-page-hidden");class IH extends fe.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=Vg("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:t}=this.props.routeInfo,{pathname:i}=e.routeInfo;t!==i?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var t,i;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let r=this.context.findViewItemByRouteInfo(e,this.id),s=this.context.findLeavingViewItemByRouteInfo(e,this.id);!s&&e.prevRouteLastPathname&&(s=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),s&&(e.routeAction==="replace"?s.mount=!1:e.routeAction==="push"&&e.routeDirection==="forward"?!((t=e.routeOptions)===null||t===void 0)&&t.unmount&&(s.mount=!1):e.routeDirection!=="none"&&r!==s&&(s.mount=!1));const a=RH((i=this.ionRouterOutlet)===null||i===void 0?void 0:i.props.children,e);if(r?r.reactElement=a:a&&(r=this.context.createViewItem(this.id,a,e),this.context.addViewItem(r)),r&&r.ionPageElement){if(r===s&&r.routeData.match.url!==e.pathname||(!s&&this.props.routeInfo.prevRouteLastPathname&&(s=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),U2(r.ionPageElement)&&s!==void 0&&!U2(s.ionPageElement)))return;this.transitionPage(e,r,s)}else s&&!a&&!r&&s.ionPageElement&&(s.ionPageElement.classList.add("ion-page-hidden"),s.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(e,t){const i=this.context.findViewItemByRouteInfo(t,this.id);if(i){const r=i.ionPageElement;if(i.ionPageElement=e,i.ionRoute=!0,r===e)return}this.handlePageTransition(t)}async setupRouterOutlet(e){const t=()=>{const s=r1();if(!(s&&s.get("swipeBackEnabled",e.mode==="ios")))return!1;const{routeInfo:o}=this.props,l=this.prevProps&&this.prevProps.routeInfo.pathname===o.pushedByRoute?this.prevProps.routeInfo:{pathname:o.pushedByRoute||""},c=this.context.findViewItemByRouteInfo(l,this.id,!1);return!!c&&c.mount&&c.routeData.match.path!==o.pathname},i=async()=>{const{routeInfo:s}=this.props,a=this.prevProps&&this.prevProps.routeInfo.pathname===s.pushedByRoute?this.prevProps.routeInfo:{pathname:s.pushedByRoute||""},o=this.context.findViewItemByRouteInfo(a,this.id,!1),l=this.context.findViewItemByRouteInfo(s,this.id,!1);return o&&l&&await this.transitionPage(s,o,l,"back",!0),Promise.resolve()},r=s=>{if(s)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:a}=this.props,o=this.prevProps&&this.prevProps.routeInfo.pathname===a.pushedByRoute?this.prevProps.routeInfo:{pathname:a.pushedByRoute||""},l=this.context.findViewItemByRouteInfo(o,this.id,!1),c=this.context.findViewItemByRouteInfo(a,this.id,!1);if(l!==c&&(l==null?void 0:l.ionPageElement)!==void 0){const{ionPageElement:u}=l;u.setAttribute("aria-hidden","true"),u.classList.add("ion-page-hidden")}}};e.swipeHandler={canStart:t,onStart:i,onEnd:r}}async transitionPage(e,t,i,r,s=!1){const a=async(u,d)=>{const h=this.skipTransition;h?this.skipTransition=!1:(u.classList.add("ion-page"),u.classList.add("ion-page-invisible")),await o.commit(u,d,{duration:h||c===void 0?0:void 0,direction:c,showGoBack:!!e.pushedByRoute,progressAnimation:s,animationBuilder:e.routeAnimation})},o=this.routerOutletElement,l=e.routeDirection==="none"||e.routeDirection==="root"?void 0:e.routeDirection,c=r!=null?r:l;if(t&&t.ionPageElement&&this.routerOutletElement)if(i&&i.ionPageElement&&t===i)if(OH(i.reactElement,e.pathname,!0)){const d=PH(i.ionPageElement.outerHTML);d&&(this.routerOutletElement.appendChild(d),await a(t.ionPageElement,d),this.routerOutletElement.removeChild(d))}else await a(t.ionPageElement,void 0);else await a(t.ionPageElement,i==null?void 0:i.ionPageElement),i&&i.ionPageElement&&!s&&(i.ionPageElement.classList.add("ion-page-hidden"),i.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,t=fe.Children.only(e);this.ionRouterOutlet=t;const i=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return fe.createElement(s1.Provider,{value:this.stackContextValue},fe.cloneElement(t,{ref:r=>{t.props.setRef&&t.props.setRef(r),t.props.forwardedRef&&(t.props.forwardedRef.current=r),this.routerOutletElement=r;const{ref:s}=t;typeof s=="function"&&s(r)}},i))}static get contextType(){return cO}}function RH(n,e){let t;return fe.Children.forEach(n,i=>{const r={exact:i.props.exact,path:i.props.path||i.props.from,component:i.props.component};Hl(e.pathname,r)&&(t=i)}),t||(fe.Children.forEach(n,i=>{i.props.path||i.props.from||(t=i)}),t)}function OH(n,e,t){const i={exact:t?!0:n.props.exact,path:n.props.path||n.props.from,component:n.props.component};return Hl(e,i)}class MH extends fe.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new CH,this.viewStack=new DH,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const t={id:Vg("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(t),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:t}}handleChangeTab(e,t,i){if(!t)return;const r=this.locationHistory.getCurrentRouteInfoForTab(e),[s,a]=t.split("?");r?(this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"push",routeDirection:"none"}),r.pathname===s?(this.incomingRouteParams.routeOptions=i,this.props.history.push(r.pathname+(r.search||""))):(this.incomingRouteParams.pathname=s,this.incomingRouteParams.search=a?"?"+a:void 0,this.incomingRouteParams.routeOptions=i,this.props.history.push(s+(a?"?"+a:"")))):this.handleNavigate(s,"push","none",void 0,i,e)}handleHistoryChange(e,t){var i,r,s;let a;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?a=this.locationHistory.previous():a=this.locationHistory.current():a=this.locationHistory.current(),a.pathname+a.search!==e.pathname){if(!this.incomingRouteParams){if(t==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),t==="POP"){const c=this.locationHistory.current();if(c&&c.pushedByRoute){const u=this.locationHistory.findLastLocation(c);this.incomingRouteParams=Object.assign(Object.assign({},u),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:((i=e.state)===null||i===void 0?void 0:i.direction)||"forward",routeOptions:(r=e.state)===null||r===void 0?void 0:r.routerOptions,tab:this.currentTab})}let l;if(!((s=this.incomingRouteParams)===null||s===void 0)&&s.id)l=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:a.pathname}),this.locationHistory.add(l);else{const c=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(l=Object.assign(Object.assign({id:Vg("routeInfo")},this.incomingRouteParams),{lastPathname:a.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:a.lastPathname}),c)l.tab=a.tab,l.pushedByRoute=a.pathname;else if(l.routeAction==="pop"){const u=this.locationHistory.findLastLocation(l);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="push"&&l.tab!==a.tab){const u=this.locationHistory.getCurrentRouteInfoForTab(l.tab);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="replace"){const u=this.locationHistory.current(),d=u==null?void 0:u.pushedByRoute,h=d!==void 0&&d!==l.pathname?d:l.pushedByRoute;l.lastPathname=(u==null?void 0:u.pathname)||l.lastPathname,l.prevRouteLastPathname=u==null?void 0:u.lastPathname,l.pushedByRoute=h,l.routeDirection=(u==null?void 0:u.routeDirection)||l.routeDirection,l.routeAnimation=(u==null?void 0:u.routeAnimation)||l.routeAnimation}this.locationHistory.add(l)}this.setState({routeInfo:l})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,t,i,r,s,a){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:t,routeDirection:i,routeOptions:s,routeAnimation:r,tab:a}),t==="push"?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",t){const i=r1();e=e||i&&i.get("backButtonDefaultHref");const r=this.locationHistory.current();if(r&&r.pushedByRoute){const s=this.locationHistory.findLastLocation(r);if(s)if(this.incomingRouteParams=Object.assign(Object.assign({},s),{routeAction:"pop",routeDirection:"back",routeAnimation:t||r.routeAnimation}),r.lastPathname===r.pushedByRoute||s.pathname===r.pushedByRoute&&r.tab===""&&s.tab===""){const a=this.props.history;(a.goBack||a.back)()}else this.handleNavigate(s.pathname+(s.search||""),"pop","back",t);else this.handleNavigate(e,"pop","back",t)}else this.handleNavigate(e,"pop","back",t)}handleResetTab(e,t,i){const r=this.locationHistory.getFirstRouteInfoForTab(e);if(r){const s=Object.assign({},r);s.pathname=t,s.routeOptions=i,this.incomingRouteParams=Object.assign(Object.assign({},s),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(s.pathname+(s.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const t=Object.assign({},this.locationHistory.current());t.tab!==e&&(t.tab=e,this.locationHistory.update(t))}render(){return fe.createElement(cO.Provider,{value:this.routeMangerContextState},fe.createElement(AH,{ionRoute:NH,ionRedirect:{},stackManager:IH,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const x0=pF(MH);x0.displayName="IonRouter";class LH extends fe.Component{constructor(e){super(e);const{history:t}=e,i=ii(e,["history"]);this.history=t||y8(i),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const i=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(i,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,i=ii(e,["children"]);return fe.createElement(Ff,Object.assign({history:this.history},i),fe.createElement(x0,{registerHistoryListener:this.registerHistoryListener},t))}}class vce extends fe.Component{constructor(e){super(e),this.history=e.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const i=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(i,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,i=ii(e,["children"]);return fe.createElement(Ff,Object.assign({},i),fe.createElement(x0,{registerHistoryListener:this.registerHistoryListener},t))}}class wce extends fe.Component{constructor(e){super(e);const{history:t}=e,i=ii(e,["history"]);this.history=t||w8(i),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const i=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(i,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,i=ii(e,["children"]);return fe.createElement(Ff,Object.assign({history:this.history},i),fe.createElement(x0,{registerHistoryListener:this.registerHistoryListener},t))}}const $H="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M321.94 98L158.82 237.78a24 24 0 000 36.44L321.94 414c15.57 13.34 39.62 2.28 39.62-18.22v-279.6c0-20.5-24.05-31.56-39.62-18.18z'/></svg>",BH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M190.06 414l163.12-139.78a24 24 0 000-36.44L190.06 98c-15.57-13.34-39.62-2.28-39.62 18.22v279.6c0 20.5 24.05 31.56 39.62 18.18z'/></svg>",FH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 80a176 176 0 10176 176A176 176 0 00256 80z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296' stroke-linecap='round' stroke-miterlimit='10' stroke-width='28' class='ionicon-fill-none'/><circle cx='250' cy='348' r='20'/></svg>",qH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M261.56 101.28a8 8 0 00-11.06 0L66.4 277.15a8 8 0 00-2.47 5.79L63.9 448a32 32 0 0032 32H192a16 16 0 0016-16V328a8 8 0 018-8h80a8 8 0 018 8v136a16 16 0 0016 16h96.06a32 32 0 0032-32V282.94a8 8 0 00-2.47-5.79z'/><path d='M490.91 244.15l-74.8-71.56V64a16 16 0 00-16-16h-48a16 16 0 00-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0043 267.56L250.5 69.28a8 8 0 0111.06 0l207.52 198.28a16 16 0 0022.59-.44c6.14-6.36 5.63-16.86-.76-22.97z'/></svg>",UH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M480 257.35c0-123.7-100.3-224-224-224s-224 100.3-224 224c0 111.8 81.9 204.47 189 221.29V322.12h-56.89v-64.77H221V208c0-56.13 33.45-87.16 84.61-87.16 24.51 0 50.15 4.38 50.15 4.38v55.13H327.5c-27.81 0-36.51 17.26-36.51 35v42h62.12l-9.92 64.77H291v156.54c107.1-16.81 189-109.48 189-221.31z' fill-rule='evenodd'/></svg>",jH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M349.33 69.33a93.62 93.62 0 0193.34 93.34v186.66a93.62 93.62 0 01-93.34 93.34H162.67a93.62 93.62 0 01-93.34-93.34V162.67a93.62 93.62 0 0193.34-93.34h186.66m0-37.33H162.67C90.8 32 32 90.8 32 162.67v186.66C32 421.2 90.8 480 162.67 480h186.66C421.2 480 480 421.2 480 349.33V162.67C480 90.8 421.2 32 349.33 32z'/><path d='M377.33 162.67a28 28 0 1128-28 27.94 27.94 0 01-28 28zM256 181.33A74.67 74.67 0 11181.33 256 74.75 74.75 0 01256 181.33m0-37.33a112 112 0 10112 112 112 112 0 00-112-112z'/></svg>",zH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448.67 154.45L274.1 68.2a41.1 41.1 0 00-36.2 0L63.33 154.45A55.6 55.6 0 0032 204.53v184.61c0 30.88 25.42 56 56.67 56h334.66c31.25 0 56.67-25.12 56.67-56V204.53a55.6 55.6 0 00-31.33-50.08zM252.38 96.82a8.22 8.22 0 017.24 0L429 180.48l-172 85a8.22 8.22 0 01-7.24 0L80.35 181.81z'/></svg>",VH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M224 432h-80V80h80zM368 432h-80V80h80z'/></svg>",HH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M96 448l320-192L96 64v384z'/></svg>",WH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><path d='M470.39 300l-.47-.38-31.56-24.75a16.11 16.11 0 01-6.1-13.33v-11.56a16 16 0 016.11-13.22L469.92 212l.47-.38a26.68 26.68 0 005.9-34.06l-42.71-73.9a1.59 1.59 0 01-.13-.22A26.86 26.86 0 00401 92.14l-.35.13-37.1 14.93a15.94 15.94 0 01-14.47-1.29q-4.92-3.1-10-5.86a15.94 15.94 0 01-8.19-11.82l-5.59-39.59-.12-.72A27.22 27.22 0 00298.76 26h-85.52a26.92 26.92 0 00-26.45 22.39l-.09.56-5.57 39.67a16 16 0 01-8.13 11.82 175.21 175.21 0 00-10 5.82 15.92 15.92 0 01-14.43 1.27l-37.13-15-.35-.14a26.87 26.87 0 00-32.48 11.34l-.13.22-42.77 73.95a26.71 26.71 0 005.9 34.1l.47.38 31.56 24.75a16.11 16.11 0 016.1 13.33v11.56a16 16 0 01-6.11 13.22L42.08 300l-.47.38a26.68 26.68 0 00-5.9 34.06l42.71 73.9a1.59 1.59 0 01.13.22 26.86 26.86 0 0032.45 11.3l.35-.13 37.07-14.93a15.94 15.94 0 0114.47 1.29q4.92 3.11 10 5.86a15.94 15.94 0 018.19 11.82l5.56 39.59.12.72A27.22 27.22 0 00213.24 486h85.52a26.92 26.92 0 0026.45-22.39l.09-.56 5.57-39.67a16 16 0 018.18-11.82c3.42-1.84 6.76-3.79 10-5.82a15.92 15.92 0 0114.43-1.27l37.13 14.95.35.14a26.85 26.85 0 0032.48-11.34 2.53 2.53 0 01.13-.22l42.71-73.89a26.7 26.7 0 00-5.89-34.11zm-134.48-40.24a80 80 0 11-83.66-83.67 80.21 80.21 0 0183.66 83.67z'/></svg>",uO="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='16'/><path d='M280 81.5V72a24 24 0 00-48 0v9.5a191 191 0 00-84.43 32.13L137 103a24 24 0 00-34 34l8.6 8.6A191.17 191.17 0 0064 272c0 105.87 86.13 192 192 192s192-86.13 192-192c0-97.74-73.42-178.66-168-190.5zM256 320a48 48 0 01-16-93.25V152a16 16 0 0132 0v74.75A48 48 0 01256 320z'/></svg>",GH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M434.67 285.59v-29.8c0-98.73-80.24-178.79-179.2-178.79a179 179 0 00-140.14 67.36m-38.53 82v29.8C76.8 355 157 435 256 435a180.45 180.45 0 00140-66.92' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M32 256l44-44 46 44M480 256l-44 44-46-44' class='ionicon-fill-none ionicon-stroke-width'/></svg>",QH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z'/></svg>",j2=n=>{let e;const t=new Set,i=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const d=e;e=(c!=null?c:typeof u!="object")?u:Object.assign({},e,u),t.forEach(h=>h(e,d))}},r=()=>e,o={setState:i,getState:r,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{t.clear()}};return e=n(i,r,o),o},KH=n=>n?j2(n):j2;var dO={exports:{}},hO={},fO={exports:{}},pO={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu=ze;function YH(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var XH=typeof Object.is=="function"?Object.is:YH,JH=Vu.useState,ZH=Vu.useEffect,eW=Vu.useLayoutEffect,tW=Vu.useDebugValue;function nW(n,e){var t=e(),i=JH({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return eW(function(){r.value=t,r.getSnapshot=e,Sv(r)&&s({inst:r})},[n,t,e]),ZH(function(){return Sv(r)&&s({inst:r}),n(function(){Sv(r)&&s({inst:r})})},[n]),tW(t),t}function Sv(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!XH(n,t)}catch(i){return!0}}function iW(n,e){return e()}var rW=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iW:nW;pO.useSyncExternalStore=Vu.useSyncExternalStore!==void 0?Vu.useSyncExternalStore:rW;fO.exports=pO;var sW=fO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0=ze,aW=sW;function oW(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var lW=typeof Object.is=="function"?Object.is:oW,cW=aW.useSyncExternalStore,uW=E0.useRef,dW=E0.useEffect,hW=E0.useMemo,fW=E0.useDebugValue;hO.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=uW(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=hW(function(){function l(f){if(!c){if(c=!0,u=f,f=i(f),r!==void 0&&a.hasValue){var m=a.value;if(r(m,f))return d=m}return d=f}if(m=d,lW(u,f))return m;var g=i(f);return r!==void 0&&r(m,g)?m:(u=f,d=g)}var c=!1,u,d,h=t===void 0?null:t;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,t,i,r]);var o=cW(n,s[0],s[1]);return dW(function(){a.hasValue=!0,a.value=o},[o]),fW(o),o};dO.exports=hO;var pW=dO.exports;const mW=bi(pW),{useSyncExternalStoreWithSelector:gW}=mW;function yW(n,e=n.getState,t){const i=gW(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return ze.useDebugValue(i),i}const z2=n=>{const e=typeof n=="function"?KH(n):n,t=(i,r)=>yW(e,i,r);return Object.assign(t,e),t},bW=n=>n?z2(n):z2,Px=new Map,em=n=>{const e=Px.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,i])=>[t,i.getState()])):{}},vW=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const i=Px.get(t.name);if(i)return{type:"tracked",store:n,...i};const r={connection:e.connect(t),stores:{}};return Px.set(t.name,r),{type:"tracked",store:n,...r}},wW=(n,e={})=>(t,i,r)=>{const{enabled:s,anonymousActionType:a,store:o,...l}=e;let c;try{c=(s!=null?s:!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(g){}if(!c)return n(t,i,r);const{connection:u,...d}=vW(o,c,l);let h=!0;r.setState=(g,_,v)=>{const y=t(g,_);if(!h)return y;const T=v===void 0?{type:a||"anonymous"}:typeof v=="string"?{type:v}:v;return o===void 0?(u==null||u.send(T,i()),y):(u==null||u.send({...T,type:"".concat(o,"/").concat(T.type)},{...em(l.name),[o]:r.getState()}),y)};const f=(...g)=>{const _=h;h=!1,t(...g),h=_},m=n(r.setState,i,r);if(d.type==="untracked"?u==null||u.init(m):(d.stores[d.store]=r,u==null||u.init(Object.fromEntries(Object.entries(d.stores).map(([g,_])=>[g,g===d.store?m:_.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let g=!1;const _=r.dispatch;r.dispatch=(...v)=>{_(...v)}}return u.subscribe(g=>{var _;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return _v(g.payload,v=>{if(v.type==="__setState"){if(o===void 0){f(v.state);return}Object.keys(v.state).length!==1&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const y=v.state[o];if(y==null)return;JSON.stringify(r.getState())!==JSON.stringify(y)&&f(y);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(v)});case"DISPATCH":switch(g.payload.type){case"RESET":return f(m),o===void 0?u==null?void 0:u.init(r.getState()):u==null?void 0:u.init(em(l.name));case"COMMIT":if(o===void 0){u==null||u.init(r.getState());return}return u==null?void 0:u.init(em(l.name));case"ROLLBACK":return _v(g.state,v=>{if(o===void 0){f(v),u==null||u.init(r.getState());return}f(v[o]),u==null||u.init(em(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return _v(g.state,v=>{if(o===void 0){f(v);return}JSON.stringify(r.getState())!==JSON.stringify(v[o])&&f(v[o])});case"IMPORT_STATE":{const{nextLiftedState:v}=g.payload,y=(_=v.computedStates.slice(-1)[0])==null?void 0:_.state;if(!y)return;f(o===void 0?y:y[o]),u==null||u.send(null,v);return}case"PAUSE_RECORDING":return h=!h}return}}),m},xW=wW,_v=(n,e)=>{let t;try{t=JSON.parse(n)}catch(i){console.error("[zustand devtools middleware] Could not parse the received json",i)}t!==void 0&&e(t)};function mO(n,e){let t;try{t=n()}catch(r){return}return{getItem:r=>{var s;const a=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),o=(s=t.getItem(r))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(r,s)=>t.setItem(r,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:r=>t.removeItem(r)}}const xf=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return xf(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return xf(i)(t)}}}},EW=(n,e)=>(t,i,r)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,v)=>({...v,..._}),...e},a=!1;const o=new Set,l=new Set;let c;try{c=s.getStorage()}catch(_){}if(!c)return n((..._)=>{console.warn("[zustand persist middleware] Unable to update item '".concat(s.name,"', the given storage is currently unavailable.")),t(..._)},i,r);const u=xf(s.serialize),d=()=>{const _=s.partialize({...i()});let v;const y=u({state:_,version:s.version}).then(T=>c.setItem(s.name,T)).catch(T=>{v=T});if(v)throw v;return y},h=r.setState;r.setState=(_,v)=>{h(_,v),d()};const f=n((..._)=>{t(..._),d()},i,r);let m;const g=()=>{var _;if(!c)return;a=!1,o.forEach(y=>y(i()));const v=((_=s.onRehydrateStorage)==null?void 0:_.call(s,i()))||void 0;return xf(c.getItem.bind(c))(s.name).then(y=>{if(y)return s.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==s.version){if(s.migrate)return s.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var T;return m=s.merge(y,(T=i())!=null?T:f),t(m,!0),d()}).then(()=>{v==null||v(m,void 0),a=!0,l.forEach(y=>y(m))}).catch(y=>{v==null||v(void 0,y)})};return r.persist={setOptions:_=>{s={...s,..._},_.getStorage&&(c=_.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:_=>(o.add(_),()=>{o.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},g(),m||f},TW=(n,e)=>(t,i,r)=>{let s={storage:mO(()=>localStorage),partialize:g=>g,version:0,merge:(g,_)=>({..._,...g}),...e},a=!1;const o=new Set,l=new Set;let c=s.storage;if(!c)return n((...g)=>{console.warn("[zustand persist middleware] Unable to update item '".concat(s.name,"', the given storage is currently unavailable.")),t(...g)},i,r);const u=()=>{const g=s.partialize({...i()});return c.setItem(s.name,{state:g,version:s.version})},d=r.setState;r.setState=(g,_)=>{d(g,_),u()};const h=n((...g)=>{t(...g),u()},i,r);let f;const m=()=>{var g,_;if(!c)return;a=!1,o.forEach(y=>{var T;return y((T=i())!=null?T:h)});const v=((_=s.onRehydrateStorage)==null?void 0:_.call(s,(g=i())!=null?g:h))||void 0;return xf(c.getItem.bind(c))(s.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==s.version){if(s.migrate)return s.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var T;return f=s.merge(y,(T=i())!=null?T:h),t(f,!0),u()}).then(()=>{v==null||v(f,void 0),f=i(),a=!0,l.forEach(y=>y(f))}).catch(y=>{v==null||v(void 0,y)})};return r.persist={setOptions:g=>{s={...s,...g},g.storage&&(c=g.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:g=>(o.add(g),()=>{o.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},s.skipHydration||m(),f||h},SW=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?EW(n,e):TW(n,e),_W=SW,CW=n=>({timerInterval:25,setTimerInterval:e=>n(()=>({timerInterval:e}),!1,"setTimerInterval"),timerStatus:"idle",setTimerStatus:e=>n(()=>({timerStatus:e}),!1,"setTimerStatus"),timerKey:Date.now(),setTimerKey:()=>n(()=>({timerKey:Date.now()}),!1,"setTimerKey"),timerDuration:0,setTimerDuration:e=>n(()=>({timerDuration:Date.now()+e}),!1,"setTimerDuration"),timerPausedTime:0,setTimerPausedTime:()=>n(e=>({timerPausedTime:e.timerDuration-Date.now()}),!1,"setTimerPausedTime"),unsetTimer:()=>n(()=>({timerKey:Date.now(),timerStatus:"idle",timerDuration:0,timerPausedTime:0}),!1,"unsetTimer")});/*! Capacitor: https://capacitorjs.com/ - MIT License */const AW=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},i=(s,a)=>{t.platforms.set(s,a)},r=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=i,t.setPlatform=r,t},kW=n=>n.CapacitorPlatforms=AW(n),gO=kW(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});gO.addPlatform;gO.setPlatform;var Hu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Hu||(Hu={}));class Cv extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const NW=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},DW=n=>{var e,t,i,r,s;const a=n.CapacitorCustomPlatform||null,o=n.Capacitor||{},l=o.Plugins=o.Plugins||{},c=n.CapacitorPlatforms,u=()=>a!==null?a.name:NW(n),d=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||u,h=()=>d()!=="web",f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||h,m=$=>{const B=N.get($);return!!(B!=null&&B.platforms.has(d())||v($))},g=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.isPluginAvailable)||m,_=$=>{var B;return(B=o.PluginHeaders)===null||B===void 0?void 0:B.find(M=>M.name===$)},v=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||_,y=$=>n.console.error($),T=($,B,M)=>Promise.reject("".concat(M,' does not have an implementation of "').concat(B,'".')),N=new Map,P=($,B={})=>{const M=N.get($);if(M)return console.warn('Capacitor plugin "'.concat($,'" already registered. Cannot register plugins twice.')),M.proxy;const Z=d(),O=v($);let K;const z=async()=>(!K&&Z in B?K=typeof B[Z]=="function"?K=await B[Z]():K=B[Z]:a!==null&&!K&&"web"in B&&(K=typeof B.web=="function"?K=await B.web():K=B.web),K),te=(ee,le)=>{var Te,$e;if(O){const qe=O==null?void 0:O.methods.find(Ve=>le===Ve.name);if(qe)return qe.rtype==="promise"?Ve=>o.nativePromise($,le.toString(),Ve):(Ve,Je)=>o.nativeCallback($,le.toString(),Ve,Je);if(ee)return(Te=ee[le])===null||Te===void 0?void 0:Te.bind(ee)}else{if(ee)return($e=ee[le])===null||$e===void 0?void 0:$e.bind(ee);throw new Cv('"'.concat($,'" plugin is not implemented on ').concat(Z),Hu.Unimplemented)}},ue=ee=>{let le;const Te=(...$e)=>{const qe=z().then(Ve=>{const Je=te(Ve,ee);if(Je){const it=Je(...$e);return le=it==null?void 0:it.remove,it}else throw new Cv('"'.concat($,".").concat(ee,'()" is not implemented on ').concat(Z),Hu.Unimplemented)});return ee==="addListener"&&(qe.remove=async()=>le()),qe};return Te.toString=()=>"".concat(ee.toString(),"() { [capacitor code] }"),Object.defineProperty(Te,"name",{value:ee,writable:!1,configurable:!1}),Te},ye=ue("addListener"),be=ue("removeListener"),de=(ee,le)=>{const Te=ye({eventName:ee},le),$e=async()=>{const Ve=await Te;be({eventName:ee,callbackId:Ve},le)},qe=new Promise(Ve=>Te.then(()=>Ve({remove:$e})));return qe.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await $e()},qe},he=new Proxy({},{get(ee,le){switch(le){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return O?de:ye;case"removeListener":return be;default:return ue(le)}}});return l[$]=he,N.set($,{name:$,proxy:he,platforms:new Set([...Object.keys(B),...O?[Z]:[]])}),he},F=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||P;return o.convertFileSrc||(o.convertFileSrc=$=>$),o.getPlatform=d,o.handleError=y,o.isNativePlatform=f,o.isPluginAvailable=g,o.pluginMethodNoop=T,o.registerPlugin=F,o.Exception=Cv,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},PW=n=>n.Capacitor=DW(n),Jl=PW(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Wf=Jl.registerPlugin;Jl.Plugins;class yO{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn('Capacitor WebPlugin "'.concat(e.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const s=async()=>this.removeListener(e,t),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const i=this.listeners[e];i&&i.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new Jl.Exception(e,Hu.Unimplemented)}unavailable(e="not available"){return new Jl.Exception(e,Hu.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const r=i.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const V2=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),H2=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class IW extends yO{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[r,s]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=H2(r).trim(),s=H2(s).trim(),t[r]=s}),t}async setCookie(e){try{const t=V2(e.key),i=V2(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(i||"").concat(r,"; path=").concat(s,"; ").concat(a,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Wf("CapacitorCookies",{web:()=>new IW});const RW=async n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const r=i.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},i.onerror=r=>t(r),i.readAsDataURL(n)}),OW=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(r=>r.toLocaleLowerCase()).reduce((r,s,a)=>(r[s]=n[e[a]],r),{})},MW=(n,e=!0)=>n?Object.entries(n).reduce((i,r)=>{const[s,a]=r;let o,l;return Array.isArray(a)?(l="",a.forEach(c=>{o=e?encodeURIComponent(c):c,l+="".concat(s,"=").concat(o,"&")}),l.slice(0,-1)):(o=e?encodeURIComponent(a):a,l="".concat(s,"=").concat(o)),"".concat(i,"&").concat(l)},"").substr(1):null,LW=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),r=OW(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(r.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,o]of Object.entries(n.data||{}))s.set(a,o);t.body=s.toString()}else if(r.includes("multipart/form-data")){const s=new FormData;if(n.data instanceof FormData)n.data.forEach((o,l)=>{s.append(l,o)});else for(const o of Object.keys(n.data))s.append(o,n.data[o]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(r.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class $W extends yO{async request(e){const t=LW(e,e.webFetchExtra),i=MW(e.params,e.shouldEncodeUrlParams),r=i?"".concat(e.url,"?").concat(i):e.url,s=await fetch(r,t),a=s.headers.get("content-type")||"";let{responseType:o="text"}=s.ok?e:{};a.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await s.blob(),l=await RW(c);break;case"json":l=await s.json();break;case"document":case"text":default:l=await s.text()}const u={};return s.headers.forEach((d,h)=>{u[h]=d}),{data:l,headers:u,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Wf("CapacitorHttp",{web:()=>new $W});class BW{constructor(e){this.sqlite=e,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(e){return Promise.reject(e)}}async saveToStore(e){try{return await this.sqlite.saveToStore({database:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToLocalDisk(e){try{return await this.sqlite.saveToLocalDisk({database:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async getFromLocalDiskToStore(e){const t=e!=null?e:!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:t}),Promise.resolve()}catch(i){return Promise.reject(i)}}async echo(e){try{const t=await this.sqlite.echo({value:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isSecretStored(){try{const e=await this.sqlite.isSecretStored();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async setEncryptionSecret(e){try{return await this.sqlite.setEncryptionSecret({passphrase:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async changeEncryptionSecret(e,t){try{return await this.sqlite.changeEncryptionSecret({passphrase:e,oldpassphrase:t}),Promise.resolve()}catch(i){return Promise.reject(i)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(e){return Promise.reject(e)}}async checkEncryptionSecret(e){try{const t=await this.sqlite.checkEncryptionSecret({passphrase:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async addUpgradeStatement(e,t,i){const r={toVersion:t,statements:i};try{return e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:e,upgrade:[r]}),Promise.resolve()}catch(s){return Promise.reject(s)}}async createConnection(e,t,i,r,s){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.createConnection({database:e,encrypted:t,mode:i,version:r,readonly:s});const a=new W2(e,s,this.sqlite),o=s?"RO_".concat(e):"RW_".concat(e);return this._connectionDict.set(o,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(e,t){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.closeConnection({database:e,readonly:t});const i=t?"RO_".concat(e):"RW_".concat(e);return this._connectionDict.delete(i),Promise.resolve()}catch(i){return Promise.reject(i)}}async isConnection(e,t){const i={};e.endsWith(".db")&&(e=e.slice(0,-3));const r=t?"RO_".concat(e):"RW_".concat(e);return i.result=this._connectionDict.has(r),Promise.resolve(i)}async retrieveConnection(e,t){e.endsWith(".db")&&(e=e.slice(0,-3));const i=t?"RO_".concat(e):"RW_".concat(e);if(this._connectionDict.has(i)){const r=this._connectionDict.get(i);return typeof r<"u"?Promise.resolve(r):Promise.reject("Connection ".concat(e," is undefined"))}else return Promise.reject("Connection ".concat(e," does not exist"))}async getNCDatabasePath(e,t){try{const i=await this.sqlite.getNCDatabasePath({path:e,database:t});return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async createNCConnection(e,t){try{await this.sqlite.createNCConnection({databasePath:e,version:t});const i=new W2(e,!0,this.sqlite),r="RO_".concat(e,")");return this._connectionDict.set(r,i),Promise.resolve(i)}catch(i){return Promise.reject(i)}}async closeNCConnection(e){try{await this.sqlite.closeNCConnection({databasePath:e});const t="RO_".concat(e,")");return this._connectionDict.delete(t),Promise.resolve()}catch(t){return Promise.reject(t)}}async isNCConnection(e){const t={},i="RO_".concat(e,")");return t.result=this._connectionDict.has(i),Promise.resolve(t)}async retrieveNCConnection(e){if(this._connectionDict.has(e)){const t="RO_".concat(e,")"),i=this._connectionDict.get(t);return typeof i<"u"?Promise.resolve(i):Promise.reject("Connection ".concat(e," is undefined"))}else return Promise.reject("Connection ".concat(e," does not exist"))}async isNCDatabase(e){try{const t=await this.sqlite.isNCDatabase({databasePath:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const e=new Map;try{for(const t of this._connectionDict.keys()){const i=t.substring(3),r=t.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:i,readonly:r}),e.set(t,null)}for(const t of e.keys())this._connectionDict.delete(t);return Promise.resolve()}catch(t){return Promise.reject(t)}}async checkConnectionsConsistency(){try{const e=[...this._connectionDict.keys()],t=[],i=[];for(const s of e)t.push(s.substring(0,2)),i.push(s.substring(3));const r=await this.sqlite.checkConnectionsConsistency({dbNames:i,openModes:t});return r.result||(this._connectionDict=new Map),Promise.resolve(r)}catch(e){return this._connectionDict=new Map,Promise.reject(e)}}async importFromJson(e){try{const t=await this.sqlite.importFromJson({jsonstring:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isJsonValid(e){try{const t=await this.sqlite.isJsonValid({jsonstring:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async copyFromAssets(e){const t=e!=null?e:!0;try{return await this.sqlite.copyFromAssets({overwrite:t}),Promise.resolve()}catch(i){return Promise.reject(i)}}async getFromHTTPRequest(e,t){const i=t!=null?t:!0;try{return await this.sqlite.getFromHTTPRequest({url:e,overwrite:i}),Promise.resolve()}catch(r){return Promise.reject(r)}}async isDatabaseEncrypted(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const t=await this.sqlite.isDatabaseEncrypted({database:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigEncryption(){try{const e=await this.sqlite.isInConfigEncryption();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isInConfigBiometricAuth(){try{const e=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isDatabase(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const t=await this.sqlite.isDatabase({database:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getDatabaseList(){try{const t=(await this.sqlite.getDatabaseList()).values;t.sort();const i={values:t};return Promise.resolve(i)}catch(e){return Promise.reject(e)}}async getMigratableDbList(e){if(!e||e.length===0)return Promise.reject("You must provide a folder path");try{const t=await this.sqlite.getMigratableDbList({folderPath:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async addSQLiteSuffix(e,t){const i=e||"default",r=t||[];try{const s=await this.sqlite.addSQLiteSuffix({folderPath:i,dbNameList:r});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteOldDatabases(e,t){const i=e||"default",r=t||[];try{const s=await this.sqlite.deleteOldDatabases({folderPath:i,dbNameList:r});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async moveDatabasesAndAddSuffix(e,t){const i=e||"default",r=t||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:i,dbNameList:r})}}class W2{constructor(e,t,i){this.dbName=e,this.readonly=t,this.sqlite=i}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async beginTransaction(){try{const e=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async commitTransaction(){try{const e=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async rollbackTransaction(){try{const e=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTransactionActive(){try{const e=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async loadExtension(e){try{return await this.sqlite.loadExtension({database:this.dbName,path:e,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async enableLoadExtension(e){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:e,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async getUrl(){try{const e=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getVersion(){try{const e=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getTableList(){try{const e=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async execute(e,t=!0,i=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const r=await this.sqlite.execute({database:this.dbName,statements:e,transaction:t,readonly:!1,isSQL92:i});return Promise.resolve(r)}}catch(r){return Promise.reject(r)}}async query(e,t,i=!0){let r;try{return t&&t.length>0?r=await this.sqlite.query({database:this.dbName,statement:e,values:t,readonly:this.readonly,isSql92:!0}):r=await this.sqlite.query({database:this.dbName,statement:e,values:[],readonly:this.readonly,isSQL92:i}),r=await this.reorderRows(r),Promise.resolve(r)}catch(s){return Promise.reject(s)}}async run(e,t,i=!0,r="no",s=!0){let a;try{if(this.readonly)return Promise.reject("not allowed in read-only mode");if(t&&t.length>0){const o=e.toUpperCase().includes("RETURNING")?r:"no";a=await this.sqlite.run({database:this.dbName,statement:e,values:t,transaction:i,readonly:!1,returnMode:o,isSQL92:!0})}else{const o=e.toUpperCase().includes("RETURNING")?r:"no";a=await this.sqlite.run({database:this.dbName,statement:e,values:[],transaction:i,readonly:!1,returnMode:o,isSQL92:s})}return a.changes=await this.reorderRows(a.changes),Promise.resolve(a)}catch(o){return Promise.reject(o)}}async executeSet(e,t=!0,i="no",r=!0){let s;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(s=await this.sqlite.executeSet({database:this.dbName,set:e,transaction:t,readonly:!1,returnMode:i,isSQL92:r}),s.changes=await this.reorderRows(s.changes),Promise.resolve(s))}catch(a){return Promise.reject(a)}}async isExists(){try{const e=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTable(e){try{const t=await this.sqlite.isTableExists({database:this.dbName,table:e,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDBOpen(){try{const e=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const e=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(e)}}catch(e){return Promise.reject(e)}}async setSyncDate(e){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:e,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async getSyncDate(){try{const e=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let t="";return e.syncDate>0&&(t=new Date(e.syncDate*1e3).toISOString()),Promise.resolve(t)}catch(e){return Promise.reject(e)}}async exportToJson(e,t=!1){try{const i=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:e,readonly:this.readonly,encrypted:t});return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async executeTransaction(e,t=!0){let i=0,r=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");try{if(await this.sqlite.beginTransaction({database:this.dbName}),r=await this.sqlite.isTransactionActive({database:this.dbName}),!r)return Promise.reject("After Begin Transaction, no transaction active")}catch(s){return Promise.reject(s)}try{for(const a of e)if(a.values&&a.values.length>0){const o=a.statement.toUpperCase().includes("RETURNING")?"all":"no",l=await this.sqlite.run({database:this.dbName,statement:a.statement,values:a.values,transaction:!1,readonly:!1,returnMode:o,isSQL92:t});if(l.changes.changes<=0)throw new Error("Error in transaction method run ");i+=l.changes.changes}else{const o=await this.sqlite.execute({database:this.dbName,statements:a.statement,transaction:!1,readonly:!1});if(r=await this.sqlite.isTransactionActive({database:this.dbName}),o.changes.changes<0)throw new Error("Error in transaction method execute ");i+=o.changes.changes}if(r=await this.sqlite.isTransactionActive({database:this.dbName}),r){const a=await this.sqlite.commitTransaction({database:this.dbName});i+=a.changes.changes}const s={changes:{changes:i}};return Promise.resolve(s)}catch(s){const a=s.message?s.message:s;return r=await this.sqlite.isTransactionActive({database:this.dbName}),r&&await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(a)}}async reorderRows(e){const t=e;if(e!=null&&e.values&&typeof e.values[0]=="object"&&Object.keys(e.values[0]).includes("ios_columns")){const i=e.values[0].ios_columns,r=[];for(let s=1;s<e.values.length;s++){const a=e.values[s],o={};for(const l of i)o[l]=a[l];r.push(o)}t.values=r}return Promise.resolve(t)}}const FW=Wf("CapacitorSQLite",{web:()=>ci(()=>import("./web-6afab22a.js"),[]).then(n=>new n.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite});class Fm{static getInheritanceTree(e){const t=[e],i=r=>{const s=Object.getPrototypeOf(r);s&&s.name&&(t.push(s),i(s))};return i(e),t}static isInherited(e,t){return e.prototype instanceof t}static filterByTarget(e,t){return t?e.filter(i=>i.target&&t.indexOf(i.target)!==-1):e}}class bO{constructor(){this.tables=[],this.trees=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.uniques=[],this.checks=[],this.exclusions=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}filterTables(e){return this.filterByTarget(this.tables,e)}filterColumns(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)}findGenerated(e,t){return this.generations.find(i=>(Array.isArray(e)?e.indexOf(i.target)!==-1:i.target===e)&&i.propertyName===t)}findTree(e){return this.trees.find(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterRelations(e){return this.filterByTargetAndWithoutDuplicateRelationProperties(this.relations,e)}filterRelationIds(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)}filterRelationCounts(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)}filterIndices(e){return this.indices.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterUniques(e){return this.uniques.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterChecks(e){return this.checks.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterExclusions(e){return this.exclusions.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterListeners(e){return this.filterByTarget(this.entityListeners,e)}filterEmbeddeds(e){return this.filterByTargetAndWithoutDuplicateEmbeddedProperties(this.embeddeds,e)}findJoinTable(e,t){return this.joinTables.find(i=>i.target===e&&i.propertyName===t)}filterJoinColumns(e,t){return this.joinColumns.filter(i=>i.target===e&&i.propertyName===t)}filterSubscribers(e){return this.filterByTarget(this.entitySubscribers,e)}filterNamingStrategies(e){return this.filterByTarget(this.namingStrategies,e)}filterTransactionEntityManagers(e,t){return this.transactionEntityManagers.filter(i=>(Array.isArray(e)?e.indexOf(i.target)!==-1:i.target===e)&&i.methodName===t)}filterTransactionRepository(e,t){return this.transactionRepositories.filter(i=>(Array.isArray(e)?e.indexOf(i.target)!==-1:i.target===e)&&i.methodName===t)}filterSingleTableChildren(e){return this.tables.filter(t=>typeof t.target=="function"&&typeof e=="function"&&Fm.isInherited(t.target,e)&&t.type==="entity-child")}findInheritanceType(e){return this.inheritances.find(t=>t.target===e)}findDiscriminatorValue(e){return this.discriminatorValues.find(t=>t.target===e)}filterByTarget(e,t){return e.filter(i=>Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)}filterByTargetAndWithoutDuplicateProperties(e,t){const i=[];return e.forEach(r=>{(Array.isArray(t)?t.indexOf(r.target)!==-1:r.target===t)&&(i.find(a=>a.propertyName===r.propertyName)||i.push(r))}),i}filterByTargetAndWithoutDuplicateRelationProperties(e,t){const i=[];return e.forEach(r=>{if(Array.isArray(t)?t.indexOf(r.target)!==-1:r.target===t){const a=i.findIndex(o=>o.propertyName===r.propertyName);if(Array.isArray(t)&&a!==-1&&t.indexOf(r.target)<t.indexOf(i[a].target)){const o=Object.create(i[a]);o.type=r.type,i[a]=o}else a===-1&&i.push(r)}}),i}filterByTargetAndWithoutDuplicateEmbeddedProperties(e,t){const i=[];return e.forEach(r=>{(Array.isArray(t)?t.indexOf(r.target)!==-1:r.target===t)&&(i.find(o=>o.prefix===r.prefix&&o.propertyName===r.propertyName)||i.push(r))}),i}}class Kt{static getGlobalVariable(){return typeof window<"u"?window:global}static load(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: require("'.concat(e,'").'));return""}static pathNormalize(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: path.normalize("'.concat(e,'").'));return""}static pathExtname(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: path.extname("'.concat(e,'").'));return""}static pathResolve(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: path.resolve("'.concat(e,'").'));return""}static fileExist(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.existsSync("'.concat(e,'").'));return!1}static dotenv(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: dotenv.config({ path: "'.concat(e,'" }).'))}static getEnvVariable(e){}static readFileSync(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("'.concat(e,'").'));return null}static appendFileSync(e,t){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("'.concat(e,'").'))}static writeFile(e,t){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.writeFile("'.concat(e,'").'));return Promise.reject(null)}static highlightSql(e){return e}static highlightJson(e){return e}static logInfo(e,t){console.info(e+" ",t)}static logError(e,t){console.error(e+" ",t)}static logWarn(e,t){console.warn(e+" ",t)}static log(e){console.log(e)}static warn(e){return e}}Kt.type="browser";typeof window<"u"&&typeof require<"u"&&(window.Buffer=require("buffer/").Buffer);typeof global<"u"&&typeof require<"u"&&(global.Buffer=require("buffer/").Buffer);class uo{static sha1(e){let t=function(P,F){return P<<F|P>>>32-F},i=function(P){let F="",$,B;for($=7;$>=0;$--)B=P>>>$*4&15,F+=B.toString(16);return F},r,s,a,o=new Array(80),l=1732584193,c=4023233417,u=2562383102,d=271733878,h=3285377520,f,m,g,_,v,y;e=encodeURIComponent(e);let T=e.length,N=[];for(s=0;s<T-3;s+=4)a=e.charCodeAt(s)<<24|e.charCodeAt(s+1)<<16|e.charCodeAt(s+2)<<8|e.charCodeAt(s+3),N.push(a);switch(T%4){case 0:s=2147483648;break;case 1:s=e.charCodeAt(T-1)<<24|8388608;break;case 2:s=e.charCodeAt(T-2)<<24|e.charCodeAt(T-1)<<16|32768;break;case 3:s=e.charCodeAt(T-3)<<24|e.charCodeAt(T-2)<<16|e.charCodeAt(T-1)<<8|128;break}for(N.push(s);N.length%16!==14;)N.push(0);for(N.push(T>>>29),N.push(T<<3&4294967295),r=0;r<N.length;r+=16){for(s=0;s<16;s++)o[s]=N[r+s];for(s=16;s<=79;s++)o[s]=t(o[s-3]^o[s-8]^o[s-14]^o[s-16],1);for(f=l,m=c,g=u,_=d,v=h,s=0;s<=19;s++)y=t(f,5)+(m&g|~m&_)+v+o[s]+1518500249&4294967295,v=_,_=g,g=t(m,30),m=f,f=y;for(s=20;s<=39;s++)y=t(f,5)+(m^g^_)+v+o[s]+1859775393&4294967295,v=_,_=g,g=t(m,30),m=f,f=y;for(s=40;s<=59;s++)y=t(f,5)+(m&g|m&_|g&_)+v+o[s]+2400959708&4294967295,v=_,_=g,g=t(m,30),m=f,f=y;for(s=60;s<=79;s++)y=t(f,5)+(m^g^_)+v+o[s]+3395469782&4294967295,v=_,_=g,g=t(m,30),m=f,f=y;l=l+f&4294967295,c=c+m&4294967295,u=u+g&4294967295,d=d+_&4294967295,h=h+v&4294967295}return y=i(l)+i(c)+i(u)+i(d)+i(h),y.toLowerCase()}}var vO={exports:{}},Ix={exports:{}};typeof Object.create=="function"?Ix.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ix.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}};var pd=Ix.exports,Rx={exports:{}},o1={},T0={};T0.byteLength=jW;T0.toByteArray=VW;T0.fromByteArray=GW;var Gs=[],Mr=[],qW=typeof Uint8Array<"u"?Uint8Array:Array,Av="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Rc=0,UW=Av.length;Rc<UW;++Rc)Gs[Rc]=Av[Rc],Mr[Av.charCodeAt(Rc)]=Rc;Mr["-".charCodeAt(0)]=62;Mr["_".charCodeAt(0)]=63;function wO(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function jW(n){var e=wO(n),t=e[0],i=e[1];return(t+i)*3/4-i}function zW(n,e,t){return(e+t)*3/4-t}function VW(n){var e,t=wO(n),i=t[0],r=t[1],s=new qW(zW(n,i,r)),a=0,o=r>0?i-4:i,l;for(l=0;l<o;l+=4)e=Mr[n.charCodeAt(l)]<<18|Mr[n.charCodeAt(l+1)]<<12|Mr[n.charCodeAt(l+2)]<<6|Mr[n.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=Mr[n.charCodeAt(l)]<<2|Mr[n.charCodeAt(l+1)]>>4,s[a++]=e&255),r===1&&(e=Mr[n.charCodeAt(l)]<<10|Mr[n.charCodeAt(l+1)]<<4|Mr[n.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function HW(n){return Gs[n>>18&63]+Gs[n>>12&63]+Gs[n>>6&63]+Gs[n&63]}function WW(n,e,t){for(var i,r=[],s=e;s<t;s+=3)i=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),r.push(HW(i));return r.join("")}function GW(n){for(var e,t=n.length,i=t%3,r=[],s=16383,a=0,o=t-i;a<o;a+=s)r.push(WW(n,a,a+s>o?o:a+s));return i===1?(e=n[t-1],r.push(Gs[e>>2]+Gs[e<<4&63]+"==")):i===2&&(e=(n[t-2]<<8)+n[t-1],r.push(Gs[e>>10]+Gs[e>>4&63]+Gs[e<<2&63]+"=")),r.join("")}var l1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l1.read=function(n,e,t,i,r){var s,a,o=r*8-i-1,l=(1<<o)-1,c=l>>1,u=-7,d=t?r-1:0,h=t?-1:1,f=n[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=s*256+n[e+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=i;u>0;a=a*256+n[e+d],d+=h,u-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-c}return(f?-1:1)*a*Math.pow(2,s-i)};l1.write=function(n,e,t,i,r,s){var a,o,l,c=s*8-r-1,u=(1<<c)-1,d=u>>1,h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,m=i?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?e+=h/l:e+=h*Math.pow(2,1-d),e*l>=2&&(a++,l/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(e*l-1)*Math.pow(2,r),a=a+d):(o=e*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;n[t+f]=o&255,f+=m,o/=256,r-=8);for(a=a<<r|o,c+=r;c>0;n[t+f]=a&255,f+=m,a/=256,c-=8);n[t+f-m]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=T0,t=l1,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const R=new Uint8Array(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(R,S),R.foo()===42}catch(R){return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(R){if(R>r)throw new RangeError('The value "'+R+'" is invalid for option "size"');const S=new Uint8Array(R);return Object.setPrototypeOf(S,o.prototype),S}function o(R,S,k){if(typeof R=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(R)}return l(R,S,k)}o.poolSize=8192;function l(R,S,k){if(typeof R=="string")return h(R,S);if(ArrayBuffer.isView(R))return m(R);if(R==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(Zt(R,ArrayBuffer)||R&&Zt(R.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Zt(R,SharedArrayBuffer)||R&&Zt(R.buffer,SharedArrayBuffer)))return g(R,S,k);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=R.valueOf&&R.valueOf();if(L!=null&&L!==R)return o.from(L,S,k);const W=_(R);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return o.from(R[Symbol.toPrimitive]("string"),S,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}o.from=function(R,S,k){return l(R,S,k)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function c(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function u(R,S,k){return c(R),R<=0?a(R):S!==void 0?typeof k=="string"?a(R).fill(S,k):a(R).fill(S):a(R)}o.alloc=function(R,S,k){return u(R,S,k)};function d(R){return c(R),a(R<0?0:v(R)|0)}o.allocUnsafe=function(R){return d(R)},o.allocUnsafeSlow=function(R){return d(R)};function h(R,S){if((typeof S!="string"||S==="")&&(S="utf8"),!o.isEncoding(S))throw new TypeError("Unknown encoding: "+S);const k=T(R,S)|0;let L=a(k);const W=L.write(R,S);return W!==k&&(L=L.slice(0,W)),L}function f(R){const S=R.length<0?0:v(R.length)|0,k=a(S);for(let L=0;L<S;L+=1)k[L]=R[L]&255;return k}function m(R){if(Zt(R,Uint8Array)){const S=new Uint8Array(R);return g(S.buffer,S.byteOffset,S.byteLength)}return f(R)}function g(R,S,k){if(S<0||R.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<S+(k||0))throw new RangeError('"length" is outside of buffer bounds');let L;return S===void 0&&k===void 0?L=new Uint8Array(R):k===void 0?L=new Uint8Array(R,S):L=new Uint8Array(R,S,k),Object.setPrototypeOf(L,o.prototype),L}function _(R){if(o.isBuffer(R)){const S=v(R.length)|0,k=a(S);return k.length===0||R.copy(k,0,0,S),k}if(R.length!==void 0)return typeof R.length!="number"||xi(R.length)?a(0):f(R);if(R.type==="Buffer"&&Array.isArray(R.data))return f(R.data)}function v(R){if(R>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return R|0}function y(R){return+R!=R&&(R=0),o.alloc(+R)}o.isBuffer=function(S){return S!=null&&S._isBuffer===!0&&S!==o.prototype},o.compare=function(S,k){if(Zt(S,Uint8Array)&&(S=o.from(S,S.offset,S.byteLength)),Zt(k,Uint8Array)&&(k=o.from(k,k.offset,k.byteLength)),!o.isBuffer(S)||!o.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(S===k)return 0;let L=S.length,W=k.length;for(let Y=0,ce=Math.min(L,W);Y<ce;++Y)if(S[Y]!==k[Y]){L=S[Y],W=k[Y];break}return L<W?-1:W<L?1:0},o.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(S,k){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return o.alloc(0);let L;if(k===void 0)for(k=0,L=0;L<S.length;++L)k+=S[L].length;const W=o.allocUnsafe(k);let Y=0;for(L=0;L<S.length;++L){let ce=S[L];if(Zt(ce,Uint8Array))Y+ce.length>W.length?(o.isBuffer(ce)||(ce=o.from(ce)),ce.copy(W,Y)):Uint8Array.prototype.set.call(W,ce,Y);else if(o.isBuffer(ce))ce.copy(W,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=ce.length}return W};function T(R,S){if(o.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||Zt(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);const k=R.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&k===0)return 0;let W=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return Zr(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return lt(R).length;default:if(W)return L?-1:Zr(R).length;S=(""+S).toLowerCase(),W=!0}}o.byteLength=T;function N(R,S,k){let L=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,S>>>=0,k<=S))return"";for(R||(R="utf8");;)switch(R){case"hex":return he(this,S,k);case"utf8":case"utf-8":return te(this,S,k);case"ascii":return be(this,S,k);case"latin1":case"binary":return de(this,S,k);case"base64":return z(this,S,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,S,k);default:if(L)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),L=!0}}o.prototype._isBuffer=!0;function P(R,S,k){const L=R[S];R[S]=R[k],R[k]=L}o.prototype.swap16=function(){const S=this.length;if(S%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<S;k+=2)P(this,k,k+1);return this},o.prototype.swap32=function(){const S=this.length;if(S%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<S;k+=4)P(this,k,k+3),P(this,k+1,k+2);return this},o.prototype.swap64=function(){const S=this.length;if(S%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<S;k+=8)P(this,k,k+7),P(this,k+1,k+6),P(this,k+2,k+5),P(this,k+3,k+4);return this},o.prototype.toString=function(){const S=this.length;return S===0?"":arguments.length===0?te(this,0,S):N.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(S){if(!o.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S?!0:o.compare(this,S)===0},o.prototype.inspect=function(){let S="";const k=n.INSPECT_MAX_BYTES;return S=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(S+=" ... "),"<Buffer "+S+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(S,k,L,W,Y){if(Zt(S,Uint8Array)&&(S=o.from(S,S.offset,S.byteLength)),!o.isBuffer(S))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof S);if(k===void 0&&(k=0),L===void 0&&(L=S?S.length:0),W===void 0&&(W=0),Y===void 0&&(Y=this.length),k<0||L>S.length||W<0||Y>this.length)throw new RangeError("out of range index");if(W>=Y&&k>=L)return 0;if(W>=Y)return-1;if(k>=L)return 1;if(k>>>=0,L>>>=0,W>>>=0,Y>>>=0,this===S)return 0;let ce=Y-W,Ie=L-k;const Re=Math.min(ce,Ie),bt=this.slice(W,Y),It=S.slice(k,L);for(let ct=0;ct<Re;++ct)if(bt[ct]!==It[ct]){ce=bt[ct],Ie=It[ct];break}return ce<Ie?-1:Ie<ce?1:0};function F(R,S,k,L,W){if(R.length===0)return-1;if(typeof k=="string"?(L=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,xi(k)&&(k=W?0:R.length-1),k<0&&(k=R.length+k),k>=R.length){if(W)return-1;k=R.length-1}else if(k<0)if(W)k=0;else return-1;if(typeof S=="string"&&(S=o.from(S,L)),o.isBuffer(S))return S.length===0?-1:$(R,S,k,L,W);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(R,S,k):Uint8Array.prototype.lastIndexOf.call(R,S,k):$(R,[S],k,L,W);throw new TypeError("val must be string, number or Buffer")}function $(R,S,k,L,W){let Y=1,ce=R.length,Ie=S.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(R.length<2||S.length<2)return-1;Y=2,ce/=2,Ie/=2,k/=2}function Re(It,ct){return Y===1?It[ct]:It.readUInt16BE(ct*Y)}let bt;if(W){let It=-1;for(bt=k;bt<ce;bt++)if(Re(R,bt)===Re(S,It===-1?0:bt-It)){if(It===-1&&(It=bt),bt-It+1===Ie)return It*Y}else It!==-1&&(bt-=bt-It),It=-1}else for(k+Ie>ce&&(k=ce-Ie),bt=k;bt>=0;bt--){let It=!0;for(let ct=0;ct<Ie;ct++)if(Re(R,bt+ct)!==Re(S,ct)){It=!1;break}if(It)return bt}return-1}o.prototype.includes=function(S,k,L){return this.indexOf(S,k,L)!==-1},o.prototype.indexOf=function(S,k,L){return F(this,S,k,L,!0)},o.prototype.lastIndexOf=function(S,k,L){return F(this,S,k,L,!1)};function B(R,S,k,L){k=Number(k)||0;const W=R.length-k;L?(L=Number(L),L>W&&(L=W)):L=W;const Y=S.length;L>Y/2&&(L=Y/2);let ce;for(ce=0;ce<L;++ce){const Ie=parseInt(S.substr(ce*2,2),16);if(xi(Ie))return ce;R[k+ce]=Ie}return ce}function M(R,S,k,L){return _n(Zr(S,R.length-k),R,k,L)}function Z(R,S,k,L){return _n(We(S),R,k,L)}function O(R,S,k,L){return _n(lt(S),R,k,L)}function K(R,S,k,L){return _n(xt(S,R.length-k),R,k,L)}o.prototype.write=function(S,k,L,W){if(k===void 0)W="utf8",L=this.length,k=0;else if(L===void 0&&typeof k=="string")W=k,L=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(L)?(L=L>>>0,W===void 0&&(W="utf8")):(W=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Y=this.length-k;if((L===void 0||L>Y)&&(L=Y),S.length>0&&(L<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let ce=!1;for(;;)switch(W){case"hex":return B(this,S,k,L);case"utf8":case"utf-8":return M(this,S,k,L);case"ascii":case"latin1":case"binary":return Z(this,S,k,L);case"base64":return O(this,S,k,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,S,k,L);default:if(ce)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),ce=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(R,S,k){return S===0&&k===R.length?e.fromByteArray(R):e.fromByteArray(R.slice(S,k))}function te(R,S,k){k=Math.min(R.length,k);const L=[];let W=S;for(;W<k;){const Y=R[W];let ce=null,Ie=Y>239?4:Y>223?3:Y>191?2:1;if(W+Ie<=k){let Re,bt,It,ct;switch(Ie){case 1:Y<128&&(ce=Y);break;case 2:Re=R[W+1],(Re&192)===128&&(ct=(Y&31)<<6|Re&63,ct>127&&(ce=ct));break;case 3:Re=R[W+1],bt=R[W+2],(Re&192)===128&&(bt&192)===128&&(ct=(Y&15)<<12|(Re&63)<<6|bt&63,ct>2047&&(ct<55296||ct>57343)&&(ce=ct));break;case 4:Re=R[W+1],bt=R[W+2],It=R[W+3],(Re&192)===128&&(bt&192)===128&&(It&192)===128&&(ct=(Y&15)<<18|(Re&63)<<12|(bt&63)<<6|It&63,ct>65535&&ct<1114112&&(ce=ct))}}ce===null?(ce=65533,Ie=1):ce>65535&&(ce-=65536,L.push(ce>>>10&1023|55296),ce=56320|ce&1023),L.push(ce),W+=Ie}return ye(L)}const ue=4096;function ye(R){const S=R.length;if(S<=ue)return String.fromCharCode.apply(String,R);let k="",L=0;for(;L<S;)k+=String.fromCharCode.apply(String,R.slice(L,L+=ue));return k}function be(R,S,k){let L="";k=Math.min(R.length,k);for(let W=S;W<k;++W)L+=String.fromCharCode(R[W]&127);return L}function de(R,S,k){let L="";k=Math.min(R.length,k);for(let W=S;W<k;++W)L+=String.fromCharCode(R[W]);return L}function he(R,S,k){const L=R.length;(!S||S<0)&&(S=0),(!k||k<0||k>L)&&(k=L);let W="";for(let Y=S;Y<k;++Y)W+=ae[R[Y]];return W}function ee(R,S,k){const L=R.slice(S,k);let W="";for(let Y=0;Y<L.length-1;Y+=2)W+=String.fromCharCode(L[Y]+L[Y+1]*256);return W}o.prototype.slice=function(S,k){const L=this.length;S=~~S,k=k===void 0?L:~~k,S<0?(S+=L,S<0&&(S=0)):S>L&&(S=L),k<0?(k+=L,k<0&&(k=0)):k>L&&(k=L),k<S&&(k=S);const W=this.subarray(S,k);return Object.setPrototypeOf(W,o.prototype),W};function le(R,S,k){if(R%1!==0||R<0)throw new RangeError("offset is not uint");if(R+S>k)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(S,k,L){S=S>>>0,k=k>>>0,L||le(S,k,this.length);let W=this[S],Y=1,ce=0;for(;++ce<k&&(Y*=256);)W+=this[S+ce]*Y;return W},o.prototype.readUintBE=o.prototype.readUIntBE=function(S,k,L){S=S>>>0,k=k>>>0,L||le(S,k,this.length);let W=this[S+--k],Y=1;for(;k>0&&(Y*=256);)W+=this[S+--k]*Y;return W},o.prototype.readUint8=o.prototype.readUInt8=function(S,k){return S=S>>>0,k||le(S,1,this.length),this[S]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(S,k){return S=S>>>0,k||le(S,2,this.length),this[S]|this[S+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(S,k){return S=S>>>0,k||le(S,2,this.length),this[S]<<8|this[S+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(S,k){return S=S>>>0,k||le(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+this[S+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(S,k){return S=S>>>0,k||le(S,4,this.length),this[S]*16777216+(this[S+1]<<16|this[S+2]<<8|this[S+3])},o.prototype.readBigUInt64LE=we(function(S){S=S>>>0,wi(S,"offset");const k=this[S],L=this[S+7];(k===void 0||L===void 0)&&Ut(S,this.length-8);const W=k+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24,Y=this[++S]+this[++S]*2**8+this[++S]*2**16+L*2**24;return BigInt(W)+(BigInt(Y)<<BigInt(32))}),o.prototype.readBigUInt64BE=we(function(S){S=S>>>0,wi(S,"offset");const k=this[S],L=this[S+7];(k===void 0||L===void 0)&&Ut(S,this.length-8);const W=k*2**24+this[++S]*2**16+this[++S]*2**8+this[++S],Y=this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+L;return(BigInt(W)<<BigInt(32))+BigInt(Y)}),o.prototype.readIntLE=function(S,k,L){S=S>>>0,k=k>>>0,L||le(S,k,this.length);let W=this[S],Y=1,ce=0;for(;++ce<k&&(Y*=256);)W+=this[S+ce]*Y;return Y*=128,W>=Y&&(W-=Math.pow(2,8*k)),W},o.prototype.readIntBE=function(S,k,L){S=S>>>0,k=k>>>0,L||le(S,k,this.length);let W=k,Y=1,ce=this[S+--W];for(;W>0&&(Y*=256);)ce+=this[S+--W]*Y;return Y*=128,ce>=Y&&(ce-=Math.pow(2,8*k)),ce},o.prototype.readInt8=function(S,k){return S=S>>>0,k||le(S,1,this.length),this[S]&128?(255-this[S]+1)*-1:this[S]},o.prototype.readInt16LE=function(S,k){S=S>>>0,k||le(S,2,this.length);const L=this[S]|this[S+1]<<8;return L&32768?L|4294901760:L},o.prototype.readInt16BE=function(S,k){S=S>>>0,k||le(S,2,this.length);const L=this[S+1]|this[S]<<8;return L&32768?L|4294901760:L},o.prototype.readInt32LE=function(S,k){return S=S>>>0,k||le(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},o.prototype.readInt32BE=function(S,k){return S=S>>>0,k||le(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},o.prototype.readBigInt64LE=we(function(S){S=S>>>0,wi(S,"offset");const k=this[S],L=this[S+7];(k===void 0||L===void 0)&&Ut(S,this.length-8);const W=this[S+4]+this[S+5]*2**8+this[S+6]*2**16+(L<<24);return(BigInt(W)<<BigInt(32))+BigInt(k+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24)}),o.prototype.readBigInt64BE=we(function(S){S=S>>>0,wi(S,"offset");const k=this[S],L=this[S+7];(k===void 0||L===void 0)&&Ut(S,this.length-8);const W=(k<<24)+this[++S]*2**16+this[++S]*2**8+this[++S];return(BigInt(W)<<BigInt(32))+BigInt(this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+L)}),o.prototype.readFloatLE=function(S,k){return S=S>>>0,k||le(S,4,this.length),t.read(this,S,!0,23,4)},o.prototype.readFloatBE=function(S,k){return S=S>>>0,k||le(S,4,this.length),t.read(this,S,!1,23,4)},o.prototype.readDoubleLE=function(S,k){return S=S>>>0,k||le(S,8,this.length),t.read(this,S,!0,52,8)},o.prototype.readDoubleBE=function(S,k){return S=S>>>0,k||le(S,8,this.length),t.read(this,S,!1,52,8)};function Te(R,S,k,L,W,Y){if(!o.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>W||S<Y)throw new RangeError('"value" argument is out of bounds');if(k+L>R.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(S,k,L,W){if(S=+S,k=k>>>0,L=L>>>0,!W){const Ie=Math.pow(2,8*L)-1;Te(this,S,k,L,Ie,0)}let Y=1,ce=0;for(this[k]=S&255;++ce<L&&(Y*=256);)this[k+ce]=S/Y&255;return k+L},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(S,k,L,W){if(S=+S,k=k>>>0,L=L>>>0,!W){const Ie=Math.pow(2,8*L)-1;Te(this,S,k,L,Ie,0)}let Y=L-1,ce=1;for(this[k+Y]=S&255;--Y>=0&&(ce*=256);)this[k+Y]=S/ce&255;return k+L},o.prototype.writeUint8=o.prototype.writeUInt8=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,1,255,0),this[k]=S&255,k+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,2,65535,0),this[k]=S&255,this[k+1]=S>>>8,k+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,2,65535,0),this[k]=S>>>8,this[k+1]=S&255,k+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,4,4294967295,0),this[k+3]=S>>>24,this[k+2]=S>>>16,this[k+1]=S>>>8,this[k]=S&255,k+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,4,4294967295,0),this[k]=S>>>24,this[k+1]=S>>>16,this[k+2]=S>>>8,this[k+3]=S&255,k+4};function $e(R,S,k,L,W){hn(S,L,W,R,k,7);let Y=Number(S&BigInt(4294967295));R[k++]=Y,Y=Y>>8,R[k++]=Y,Y=Y>>8,R[k++]=Y,Y=Y>>8,R[k++]=Y;let ce=Number(S>>BigInt(32)&BigInt(4294967295));return R[k++]=ce,ce=ce>>8,R[k++]=ce,ce=ce>>8,R[k++]=ce,ce=ce>>8,R[k++]=ce,k}function qe(R,S,k,L,W){hn(S,L,W,R,k,7);let Y=Number(S&BigInt(4294967295));R[k+7]=Y,Y=Y>>8,R[k+6]=Y,Y=Y>>8,R[k+5]=Y,Y=Y>>8,R[k+4]=Y;let ce=Number(S>>BigInt(32)&BigInt(4294967295));return R[k+3]=ce,ce=ce>>8,R[k+2]=ce,ce=ce>>8,R[k+1]=ce,ce=ce>>8,R[k]=ce,k+8}o.prototype.writeBigUInt64LE=we(function(S,k=0){return $e(this,S,k,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=we(function(S,k=0){return qe(this,S,k,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(S,k,L,W){if(S=+S,k=k>>>0,!W){const Re=Math.pow(2,8*L-1);Te(this,S,k,L,Re-1,-Re)}let Y=0,ce=1,Ie=0;for(this[k]=S&255;++Y<L&&(ce*=256);)S<0&&Ie===0&&this[k+Y-1]!==0&&(Ie=1),this[k+Y]=(S/ce>>0)-Ie&255;return k+L},o.prototype.writeIntBE=function(S,k,L,W){if(S=+S,k=k>>>0,!W){const Re=Math.pow(2,8*L-1);Te(this,S,k,L,Re-1,-Re)}let Y=L-1,ce=1,Ie=0;for(this[k+Y]=S&255;--Y>=0&&(ce*=256);)S<0&&Ie===0&&this[k+Y+1]!==0&&(Ie=1),this[k+Y]=(S/ce>>0)-Ie&255;return k+L},o.prototype.writeInt8=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,1,127,-128),S<0&&(S=255+S+1),this[k]=S&255,k+1},o.prototype.writeInt16LE=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,2,32767,-32768),this[k]=S&255,this[k+1]=S>>>8,k+2},o.prototype.writeInt16BE=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,2,32767,-32768),this[k]=S>>>8,this[k+1]=S&255,k+2},o.prototype.writeInt32LE=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,4,2147483647,-2147483648),this[k]=S&255,this[k+1]=S>>>8,this[k+2]=S>>>16,this[k+3]=S>>>24,k+4},o.prototype.writeInt32BE=function(S,k,L){return S=+S,k=k>>>0,L||Te(this,S,k,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[k]=S>>>24,this[k+1]=S>>>16,this[k+2]=S>>>8,this[k+3]=S&255,k+4},o.prototype.writeBigInt64LE=we(function(S,k=0){return $e(this,S,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=we(function(S,k=0){return qe(this,S,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ve(R,S,k,L,W,Y){if(k+L>R.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function Je(R,S,k,L,W){return S=+S,k=k>>>0,W||Ve(R,S,k,4),t.write(R,S,k,L,23,4),k+4}o.prototype.writeFloatLE=function(S,k,L){return Je(this,S,k,!0,L)},o.prototype.writeFloatBE=function(S,k,L){return Je(this,S,k,!1,L)};function it(R,S,k,L,W){return S=+S,k=k>>>0,W||Ve(R,S,k,8),t.write(R,S,k,L,52,8),k+8}o.prototype.writeDoubleLE=function(S,k,L){return it(this,S,k,!0,L)},o.prototype.writeDoubleBE=function(S,k,L){return it(this,S,k,!1,L)},o.prototype.copy=function(S,k,L,W){if(!o.isBuffer(S))throw new TypeError("argument should be a Buffer");if(L||(L=0),!W&&W!==0&&(W=this.length),k>=S.length&&(k=S.length),k||(k=0),W>0&&W<L&&(W=L),W===L||S.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),S.length-k<W-L&&(W=S.length-k+L);const Y=W-L;return this===S&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,L,W):Uint8Array.prototype.set.call(S,this.subarray(L,W),k),Y},o.prototype.fill=function(S,k,L,W){if(typeof S=="string"){if(typeof k=="string"?(W=k,k=0,L=this.length):typeof L=="string"&&(W=L,L=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!o.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(S.length===1){const ce=S.charCodeAt(0);(W==="utf8"&&ce<128||W==="latin1")&&(S=ce)}}else typeof S=="number"?S=S&255:typeof S=="boolean"&&(S=Number(S));if(k<0||this.length<k||this.length<L)throw new RangeError("Out of range index");if(L<=k)return this;k=k>>>0,L=L===void 0?this.length:L>>>0,S||(S=0);let Y;if(typeof S=="number")for(Y=k;Y<L;++Y)this[Y]=S;else{const ce=o.isBuffer(S)?S:o.from(S,W),Ie=ce.length;if(Ie===0)throw new TypeError('The value "'+S+'" is invalid for argument "value"');for(Y=0;Y<L-k;++Y)this[Y+k]=ce[Y%Ie]}return this};const qt={};function Jt(R,S,k){qt[R]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(R,"]"),this.stack,delete this.name}get code(){return R}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return"".concat(this.name," [").concat(R,"]: ").concat(this.message)}}}Jt("ERR_BUFFER_OUT_OF_BOUNDS",function(R){return R?"".concat(R," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Jt("ERR_INVALID_ARG_TYPE",function(R,S){return'The "'.concat(R,'" argument must be of type number. Received type ').concat(typeof S)},TypeError),Jt("ERR_OUT_OF_RANGE",function(R,S,k){let L='The value of "'.concat(R,'" is out of range.'),W=k;return Number.isInteger(k)&&Math.abs(k)>2**32?W=Yn(String(k)):typeof k=="bigint"&&(W=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(W=Yn(W)),W+="n"),L+=" It must be ".concat(S,". Received ").concat(W),L},RangeError);function Yn(R){let S="",k=R.length;const L=R[0]==="-"?1:0;for(;k>=L+4;k-=3)S="_".concat(R.slice(k-3,k)).concat(S);return"".concat(R.slice(0,k)).concat(S)}function Bn(R,S,k){wi(S,"offset"),(R[S]===void 0||R[S+k]===void 0)&&Ut(S,R.length-(k+1))}function hn(R,S,k,L,W,Y){if(R>k||R<S){const ce=typeof S=="bigint"?"n":"";let Ie;throw Y>3?S===0||S===BigInt(0)?Ie=">= 0".concat(ce," and < 2").concat(ce," ** ").concat((Y+1)*8).concat(ce):Ie=">= -(2".concat(ce," ** ").concat((Y+1)*8-1).concat(ce,") and < 2 ** ")+"".concat((Y+1)*8-1).concat(ce):Ie=">= ".concat(S).concat(ce," and <= ").concat(k).concat(ce),new qt.ERR_OUT_OF_RANGE("value",Ie,R)}Bn(L,W,Y)}function wi(R,S){if(typeof R!="number")throw new qt.ERR_INVALID_ARG_TYPE(S,"number",R)}function Ut(R,S,k){throw Math.floor(R)!==R?(wi(R,k),new qt.ERR_OUT_OF_RANGE(k||"offset","an integer",R)):S<0?new qt.ERR_BUFFER_OUT_OF_BOUNDS:new qt.ERR_OUT_OF_RANGE(k||"offset",">= ".concat(k?1:0," and <= ").concat(S),R)}const Jr=/[^+/0-9A-Za-z-_]/g;function Ps(R){if(R=R.split("=")[0],R=R.trim().replace(Jr,""),R.length<2)return"";for(;R.length%4!==0;)R=R+"=";return R}function Zr(R,S){S=S||1/0;let k;const L=R.length;let W=null;const Y=[];for(let ce=0;ce<L;++ce){if(k=R.charCodeAt(ce),k>55295&&k<57344){if(!W){if(k>56319){(S-=3)>-1&&Y.push(239,191,189);continue}else if(ce+1===L){(S-=3)>-1&&Y.push(239,191,189);continue}W=k;continue}if(k<56320){(S-=3)>-1&&Y.push(239,191,189),W=k;continue}k=(W-55296<<10|k-56320)+65536}else W&&(S-=3)>-1&&Y.push(239,191,189);if(W=null,k<128){if((S-=1)<0)break;Y.push(k)}else if(k<2048){if((S-=2)<0)break;Y.push(k>>6|192,k&63|128)}else if(k<65536){if((S-=3)<0)break;Y.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((S-=4)<0)break;Y.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return Y}function We(R){const S=[];for(let k=0;k<R.length;++k)S.push(R.charCodeAt(k)&255);return S}function xt(R,S){let k,L,W;const Y=[];for(let ce=0;ce<R.length&&!((S-=2)<0);++ce)k=R.charCodeAt(ce),L=k>>8,W=k%256,Y.push(W),Y.push(L);return Y}function lt(R){return e.toByteArray(Ps(R))}function _n(R,S,k,L){let W;for(W=0;W<L&&!(W+k>=S.length||W>=R.length);++W)S[W+k]=R[W];return W}function Zt(R,S){return R instanceof S||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===S.name}function xi(R){return R!==R}const ae=function(){const R="0123456789abcdef",S=new Array(256);for(let k=0;k<16;++k){const L=k*16;for(let W=0;W<16;++W)S[L+W]=R[k]+R[W]}return S}();function we(R){return typeof BigInt>"u"?ke:R}function ke(){throw new Error("BigInt not supported")}})(o1);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=o1,i=t.Buffer;function r(a,o){for(var l in a)o[l]=a[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?n.exports=t:(r(t,e),e.Buffer=s);function s(a,o,l){return i(a,o,l)}s.prototype=Object.create(i.prototype),r(i,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=i(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(Rx,Rx.exports);var lc=Rx.exports,xO=lc.Buffer;function S0(n,e){this._block=xO.alloc(n),this._finalSize=e,this._blockSize=n,this._len=0}S0.prototype.update=function(n,e){typeof n=="string"&&(e=e||"utf8",n=xO.from(n,e));for(var t=this._block,i=this._blockSize,r=n.length,s=this._len,a=0;a<r;){for(var o=s%i,l=Math.min(r-a,i-o),c=0;c<l;c++)t[o+c]=n[a+c];s+=l,a+=l,s%i===0&&this._update(t)}return this._len+=r,this};S0.prototype.digest=function(n){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var t=this._len*8;if(t<=4294967295)this._block.writeUInt32BE(t,this._blockSize-4);else{var i=(t&4294967295)>>>0,r=(t-i)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s};S0.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var md=S0,QW=pd,EO=md,KW=lc.Buffer,YW=[1518500249,1859775393,-1894007588,-899497514],XW=new Array(80);function Gf(){this.init(),this._w=XW,EO.call(this,64,56)}QW(Gf,EO);Gf.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function JW(n){return n<<5|n>>>27}function ZW(n){return n<<30|n>>>2}function eG(n,e,t,i){return n===0?e&t|~e&i:n===2?e&t|e&i|t&i:e^t^i}Gf.prototype._update=function(n){for(var e=this._w,t=this._a|0,i=this._b|0,r=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=n.readInt32BE(o*4);for(;o<80;++o)e[o]=e[o-3]^e[o-8]^e[o-14]^e[o-16];for(var l=0;l<80;++l){var c=~~(l/20),u=JW(t)+eG(c,i,r,s)+a+e[l]+YW[c]|0;a=s,s=r,r=ZW(i),i=t,t=u}this._a=t+this._a|0,this._b=i+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};Gf.prototype._hash=function(){var n=KW.allocUnsafe(20);return n.writeInt32BE(this._a|0,0),n.writeInt32BE(this._b|0,4),n.writeInt32BE(this._c|0,8),n.writeInt32BE(this._d|0,12),n.writeInt32BE(this._e|0,16),n};var tG=Gf,nG=pd,TO=md,iG=lc.Buffer,rG=[1518500249,1859775393,-1894007588,-899497514],sG=new Array(80);function Qf(){this.init(),this._w=sG,TO.call(this,64,56)}nG(Qf,TO);Qf.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function aG(n){return n<<1|n>>>31}function oG(n){return n<<5|n>>>27}function lG(n){return n<<30|n>>>2}function cG(n,e,t,i){return n===0?e&t|~e&i:n===2?e&t|e&i|t&i:e^t^i}Qf.prototype._update=function(n){for(var e=this._w,t=this._a|0,i=this._b|0,r=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=n.readInt32BE(o*4);for(;o<80;++o)e[o]=aG(e[o-3]^e[o-8]^e[o-14]^e[o-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=oG(t)+cG(c,i,r,s)+a+e[l]+rG[c]|0;a=s,s=r,r=lG(i),i=t,t=u}this._a=t+this._a|0,this._b=i+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};Qf.prototype._hash=function(){var n=iG.allocUnsafe(20);return n.writeInt32BE(this._a|0,0),n.writeInt32BE(this._b|0,4),n.writeInt32BE(this._c|0,8),n.writeInt32BE(this._d|0,12),n.writeInt32BE(this._e|0,16),n};var uG=Qf,dG=pd,SO=md,hG=lc.Buffer,fG=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],pG=new Array(64);function Kf(){this.init(),this._w=pG,SO.call(this,64,56)}dG(Kf,SO);Kf.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function mG(n,e,t){return t^n&(e^t)}function gG(n,e,t){return n&e|t&(n|e)}function yG(n){return(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10)}function bG(n){return(n>>>6|n<<26)^(n>>>11|n<<21)^(n>>>25|n<<7)}function vG(n){return(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3}function wG(n){return(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10}Kf.prototype._update=function(n){for(var e=this._w,t=this._a|0,i=this._b|0,r=this._c|0,s=this._d|0,a=this._e|0,o=this._f|0,l=this._g|0,c=this._h|0,u=0;u<16;++u)e[u]=n.readInt32BE(u*4);for(;u<64;++u)e[u]=wG(e[u-2])+e[u-7]+vG(e[u-15])+e[u-16]|0;for(var d=0;d<64;++d){var h=c+bG(a)+mG(a,o,l)+fG[d]+e[d]|0,f=yG(t)+gG(t,i,r)|0;c=l,l=o,o=a,a=s+h|0,s=r,r=i,i=t,t=h+f|0}this._a=t+this._a|0,this._b=i+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=o+this._f|0,this._g=l+this._g|0,this._h=c+this._h|0};Kf.prototype._hash=function(){var n=hG.allocUnsafe(32);return n.writeInt32BE(this._a,0),n.writeInt32BE(this._b,4),n.writeInt32BE(this._c,8),n.writeInt32BE(this._d,12),n.writeInt32BE(this._e,16),n.writeInt32BE(this._f,20),n.writeInt32BE(this._g,24),n.writeInt32BE(this._h,28),n};var _O=Kf,xG=pd,EG=_O,TG=md,SG=lc.Buffer,_G=new Array(64);function _0(){this.init(),this._w=_G,TG.call(this,64,56)}xG(_0,EG);_0.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};_0.prototype._hash=function(){var n=SG.allocUnsafe(28);return n.writeInt32BE(this._a,0),n.writeInt32BE(this._b,4),n.writeInt32BE(this._c,8),n.writeInt32BE(this._d,12),n.writeInt32BE(this._e,16),n.writeInt32BE(this._f,20),n.writeInt32BE(this._g,24),n};var CG=_0,AG=pd,CO=md,kG=lc.Buffer,G2=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],NG=new Array(160);function Yf(){this.init(),this._w=NG,CO.call(this,128,112)}AG(Yf,CO);Yf.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Q2(n,e,t){return t^n&(e^t)}function K2(n,e,t){return n&e|t&(n|e)}function Y2(n,e){return(n>>>28|e<<4)^(e>>>2|n<<30)^(e>>>7|n<<25)}function X2(n,e){return(n>>>14|e<<18)^(n>>>18|e<<14)^(e>>>9|n<<23)}function DG(n,e){return(n>>>1|e<<31)^(n>>>8|e<<24)^n>>>7}function PG(n,e){return(n>>>1|e<<31)^(n>>>8|e<<24)^(n>>>7|e<<25)}function IG(n,e){return(n>>>19|e<<13)^(e>>>29|n<<3)^n>>>6}function RG(n,e){return(n>>>19|e<<13)^(e>>>29|n<<3)^(n>>>6|e<<26)}function qn(n,e){return n>>>0<e>>>0?1:0}Yf.prototype._update=function(n){for(var e=this._w,t=this._ah|0,i=this._bh|0,r=this._ch|0,s=this._dh|0,a=this._eh|0,o=this._fh|0,l=this._gh|0,c=this._hh|0,u=this._al|0,d=this._bl|0,h=this._cl|0,f=this._dl|0,m=this._el|0,g=this._fl|0,_=this._gl|0,v=this._hl|0,y=0;y<32;y+=2)e[y]=n.readInt32BE(y*4),e[y+1]=n.readInt32BE(y*4+4);for(;y<160;y+=2){var T=e[y-30],N=e[y-15*2+1],P=DG(T,N),F=PG(N,T);T=e[y-2*2],N=e[y-2*2+1];var $=IG(T,N),B=RG(N,T),M=e[y-7*2],Z=e[y-7*2+1],O=e[y-16*2],K=e[y-16*2+1],z=F+Z|0,te=P+M+qn(z,F)|0;z=z+B|0,te=te+$+qn(z,B)|0,z=z+K|0,te=te+O+qn(z,K)|0,e[y]=te,e[y+1]=z}for(var ue=0;ue<160;ue+=2){te=e[ue],z=e[ue+1];var ye=K2(t,i,r),be=K2(u,d,h),de=Y2(t,u),he=Y2(u,t),ee=X2(a,m),le=X2(m,a),Te=G2[ue],$e=G2[ue+1],qe=Q2(a,o,l),Ve=Q2(m,g,_),Je=v+le|0,it=c+ee+qn(Je,v)|0;Je=Je+Ve|0,it=it+qe+qn(Je,Ve)|0,Je=Je+$e|0,it=it+Te+qn(Je,$e)|0,Je=Je+z|0,it=it+te+qn(Je,z)|0;var qt=he+be|0,Jt=de+ye+qn(qt,he)|0;c=l,v=_,l=o,_=g,o=a,g=m,m=f+Je|0,a=s+it+qn(m,f)|0,s=r,f=h,r=i,h=d,i=t,d=u,u=Je+qt|0,t=it+Jt+qn(u,Je)|0}this._al=this._al+u|0,this._bl=this._bl+d|0,this._cl=this._cl+h|0,this._dl=this._dl+f|0,this._el=this._el+m|0,this._fl=this._fl+g|0,this._gl=this._gl+_|0,this._hl=this._hl+v|0,this._ah=this._ah+t+qn(this._al,u)|0,this._bh=this._bh+i+qn(this._bl,d)|0,this._ch=this._ch+r+qn(this._cl,h)|0,this._dh=this._dh+s+qn(this._dl,f)|0,this._eh=this._eh+a+qn(this._el,m)|0,this._fh=this._fh+o+qn(this._fl,g)|0,this._gh=this._gh+l+qn(this._gl,_)|0,this._hh=this._hh+c+qn(this._hl,v)|0};Yf.prototype._hash=function(){var n=kG.allocUnsafe(64);function e(t,i,r){n.writeInt32BE(t,r),n.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),n};var AO=Yf,OG=pd,MG=AO,LG=md,$G=lc.Buffer,BG=new Array(160);function C0(){this.init(),this._w=BG,LG.call(this,128,112)}OG(C0,MG);C0.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};C0.prototype._hash=function(){var n=$G.allocUnsafe(48);function e(t,i,r){n.writeInt32BE(t,r),n.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),n};var FG=C0,cc=vO.exports=function(e){e=e.toLowerCase();var t=cc[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};cc.sha=tG;cc.sha1=uG;cc.sha224=CG;cc.sha256=_O;cc.sha384=FG;cc.sha512=AO;var qG=vO.exports;const UG=bi(qG);function kv(n,e=!1){return e&&(n=" "+n),n.replace(/^([A-Z])|[\s-_](\w)/g,function(t,i,r){return r?r.toUpperCase():i.toLowerCase()})}function J2(n){return n.replace(/([A-Z])([A-Z])([a-z])/g,"$1_$2$3").replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase()}function jG(n){return n.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}function kO(n,e={}){const{segmentLength:t=4,separator:i="__",termLength:r=2}=e;return n.split(i).reduce((o,l)=>{const c=l.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),u=c.length>1?r:t,d=c.map(h=>h.substr(0,u)).join("");return o.push(d),o},[]).join(i)}function zG(n,e={}){const t=UG("sha1");t.update(n,"utf8");const i=t.digest("hex");return e.length?i.slice(0,e.length):i}class VG{constructor(){this.nestedSetColumnNames={left:"nsleft",right:"nsright"},this.materializedPathColumnName="mpath"}getTableName(e){return typeof e!="string"&&(e=e.name),e.split(".").pop()}tableName(e,t){return t||J2(e)}closureJunctionTableName(e){return e+"_closure"}columnName(e,t,i){const r=t||e;return i.length?kv(i.join("_"))+jG(r):r}relationName(e){return e}primaryKeyName(e,t){const i=[...t];i.sort();const s=this.getTableName(e).replace(".","_"),a="".concat(s,"_").concat(i.join("_"));return"PK_"+uo.sha1(a).substr(0,27)}uniqueConstraintName(e,t){const i=[...t];i.sort();const s=this.getTableName(e).replace(".","_"),a="".concat(s,"_").concat(i.join("_"));return"UQ_"+uo.sha1(a).substr(0,27)}relationConstraintName(e,t,i){const r=[...t];r.sort();const a=this.getTableName(e).replace(".","_");let o="".concat(a,"_").concat(r.join("_"));return i&&(o+="_".concat(i)),"REL_"+uo.sha1(o).substr(0,26)}defaultConstraintName(e,t){const r=this.getTableName(e).replace(".","_"),s="".concat(r,"_").concat(t);return"DF_"+uo.sha1(s).substr(0,27)}foreignKeyName(e,t,i,r){const s=[...t];s.sort();const o=this.getTableName(e).replace(".","_"),l="".concat(o,"_").concat(s.join("_"));return"FK_"+uo.sha1(l).substr(0,27)}indexName(e,t,i){const r=[...t];r.sort();const a=this.getTableName(e).replace(".","_");let o="".concat(a,"_").concat(r.join("_"));return i&&(o+="_".concat(i)),"IDX_"+uo.sha1(o).substr(0,26)}checkConstraintName(e,t,i){const s=this.getTableName(e).replace(".","_"),a="".concat(s,"_").concat(t),o="CHK_"+uo.sha1(a).substr(0,26);return i?"".concat(o,"_ENUM"):o}exclusionConstraintName(e,t){const r=this.getTableName(e).replace(".","_"),s="".concat(r,"_").concat(t);return"XCL_"+uo.sha1(s).substr(0,26)}joinColumnName(e,t){return kv(e+"_"+t)}joinTableName(e,t,i,r){return J2(e+"_"+i.replace(/\./gi,"_")+"_"+t)}joinTableColumnDuplicationPrefix(e,t){return e+"_"+t}joinTableColumnName(e,t,i){return kv(e+"_"+(i||t))}joinTableInverseColumnName(e,t,i){return this.joinTableColumnName(e,t,i)}prefixTableName(e,t){return e+t}eagerJoinRelationAlias(e,t){return e+"_"+t.replace(".","_")}}class J extends Error{get name(){return this.constructor.name}constructor(e){super(e),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class tm extends J{constructor(e){super("Internal error. Subject ".concat(e.metadata.targetName," must have an identifier to perform operation."))}}class HG extends J{constructor(e){super('Cannot create a "'.concat(e,'" connection because connection to the database already established.'))}}class Oc extends J{constructor(){super("Locking not supported on given driver.")}}class WG extends J{constructor(e,t){super();const i=e.primaryColumns.reduce((r,s,a)=>(s.setEntityValue(r,a+1),r),{});this.message='Cannot use given entity id "'.concat(t,'" because "').concat(e.targetName,'" contains multiple primary columns, you must provide object in following form: ').concat(JSON.stringify(i)," as an id.")}}class GG extends J{constructor(e){super("Cannot ".concat(e,", given value must be instance of entity class, ")+"instead object literal is given. Or you must specify an entity target to method call.")}}class QG extends J{constructor(e){super("Tree repositories are not supported in ".concat(e.options.type," driver."))}}class NO extends J{constructor(e){super("Custom repository ".concat(typeof e=="function"?e.name:e.constructor.name," was not found. ")+"Did you forgot to put @EntityRepository decorator on it?")}}class Kr extends J{constructor(){super("Transaction is not started yet, start transaction before committing or rolling it back.")}}class KG extends J{constructor(){super("Transaction already started for the given connection, commit current transaction before starting a new one.")}}class ft{static isObject(e){return e!==null&&typeof e=="object"}static isObjectWithName(e){return e!==null&&typeof e=="object"&&e.name!==void 0}static assign(e,...t){for(const i of t)for(const r of Object.getOwnPropertyNames(i))e[r]=i[r]}static mixedListToArray(e){return e!==null&&typeof e=="object"?Object.keys(e).map(t=>e[t]):e}}class se{static isMssqlParameter(e){return this.check(e,"MssqlParameter")}static isEntityMetadata(e){return this.check(e,"EntityMetadata")}static isColumnMetadata(e){return this.check(e,"ColumnMetadata")}static isSelectQueryBuilder(e){return this.check(e,"SelectQueryBuilder")}static isInsertQueryBuilder(e){return this.check(e,"InsertQueryBuilder")}static isDeleteQueryBuilder(e){return this.check(e,"DeleteQueryBuilder")}static isUpdateQueryBuilder(e){return this.check(e,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(e){return this.check(e,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(e){return this.check(e,"RelationQueryBuilder")}static isBrackets(e){return this.check(e,"Brackets")||this.check(e,"NotBrackets")}static isNotBrackets(e){return this.check(e,"NotBrackets")}static isSubject(e){return this.check(e,"Subject")}static isRdbmsSchemaBuilder(e){return this.check(e,"RdbmsSchemaBuilder")}static isMongoEntityManager(e){return this.check(e,"MongoEntityManager")}static isSqljsEntityManager(e){return this.check(e,"SqljsEntityManager")}static isEntitySchema(e){return this.check(e,"EntitySchema")}static isBaseEntityConstructor(e){return typeof e=="function"&&typeof e.hasId=="function"&&typeof e.save=="function"&&typeof e.useDataSource=="function"}static isFindOperator(e){return this.check(e,"FindOperator")||this.check(e,"EqualOperator")}static isEqualOperator(e){return this.check(e,"EqualOperator")}static isQuery(e){return this.check(e,"Query")}static isTable(e){return this.check(e,"Table")}static isTableCheck(e){return this.check(e,"TableCheck")}static isTableColumn(e){return this.check(e,"TableColumn")}static isTableExclusion(e){return this.check(e,"TableExclusion")}static isTableForeignKey(e){return this.check(e,"TableForeignKey")}static isTableIndex(e){return this.check(e,"TableIndex")}static isTableUnique(e){return this.check(e,"TableUnique")}static isView(e){return this.check(e,"View")}static isDataSource(e){return this.check(e,"DataSource")}static check(e,t){return typeof e=="object"&&e!==null&&e["@instanceof"]===Symbol.for(t)}}class Ox extends J{constructor(e,t){super(),this.message='Could not find any entity of type "'.concat(this.stringifyTarget(e),'" ')+"matching: ".concat(this.stringifyCriteria(t))}stringifyTarget(e){return se.isEntitySchema(e)?e.options.name:typeof e=="function"||ft.isObject(e)&&"name"in e?e.name:e}stringifyCriteria(e){try{return JSON.stringify(e,null,4)}catch(t){}return""+e}}class YG extends J{constructor(e){super(),this.message='No metadata for "'.concat(this.stringifyTarget(e),'" was found.')}stringifyTarget(e){return se.isEntitySchema(e)?e.options.name:typeof e=="function"||ft.isObject(e)&&"name"in e?e.name:e}}class XG extends J{constructor(e,t){super("Cannot ".concat(e,', given value must be an entity, instead "').concat(t,'" is given.'))}}class Z2 extends J{constructor(e,t,i){super("The optimistic lock on entity ".concat(e," failed, version ").concat(t," was expected, but is actually ").concat(i,"."))}}class JG extends J{constructor(e,t){super("Primary column ".concat(e.constructor.name,"#").concat(t," cannot be nullable. ")+"Its not allowed for primary keys. Try to remove nullable option.")}}class ZG extends J{constructor(e){super("Custom entity repository ".concat(typeof e=="function"?e.name:e.constructor.name," ")+" cannot inherit Repository class without entity being set in the @EntityRepository decorator.")}}class DO extends J{constructor(){super("Database connection provided by a query runner was already released, cannot continue to use its querying methods anymore.")}}class eA extends J{constructor(e){super('Cannot attach entity "'.concat(e,'" to its parent. Please make sure parent ')+"is saved in the database before saving children nodes.")}}class Nv extends J{constructor(e){super("Custom repository ".concat(typeof e=="function"?e.name:e.constructor.name," does not have managed entity. ")+"Did you forget to specify entity for it @EntityRepository(MyEntity)? ")}}class eQ extends J{constructor(e){super("Circular relations detected: ".concat(e,". To resolve this issue you need to ")+"set nullable: true somewhere in this dependency structure.")}}class tQ extends J{constructor(e){super('Entity "'.concat(e.name,'" does not have a primary column. Primary column is required to ')+"have in all your entities. Use @PrimaryColumn decorator to add a primary column to your entity.")}}class Qs extends J{constructor(e,t){super(e),Object.setPrototypeOf(this,Qs.prototype),this.message='Property "'.concat(e,'" was not found in "').concat(t.targetName,'". Make sure your query is correct.')}}class nQ extends J{constructor(e,t=[]){super('Wrong driver: "'.concat(e,'" given. Supported drivers are: ')+"".concat(t.map(i=>'"'.concat(i,'"')).join(", "),"."))}}class gd extends J{constructor(e,t){super("".concat(e," package has not been found installed. ")+"Try to install it: npm install ".concat(t," --save"))}}class iQ extends J{constructor(e){super("Entity ".concat(e," does not have version or update date columns."))}}class Jd extends J{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class rQ extends J{constructor(e){super("Driver option (".concat(e,") is not set. ")+"Please set it to perform connection to the database.")}}class sQ extends J{constructor(e){super(),e.length===1?this.message='Relation "'.concat(e[0],'" was not found; please check if it is correct and really exists in your entity.'):this.message="Relations ".concat(e.map(t=>'"'.concat(t,'"')).join(", ")," were not found; please check if relations are correct and they exist in your entities.")}}class aQ extends J{constructor(){super("An open transaction is required for pessimistic lock.")}}class oQ extends J{constructor(e,t,i){super();const r=typeof t=="string"?t:t.name;this.message='Data type "'.concat(r,'" in "').concat(e.entityMetadata.targetName,".").concat(e.propertyName,'" is not supported by "').concat(i,'" database.')}}class lQ extends J{constructor(e){super("Array initializations are not allowed in entity relations. "+'Please remove array initialization (= []) from "'.concat(e.entityMetadata.targetName,"#").concat(e.propertyPath,'". ')+"This is ORM requirement to make relations to work properly. Refer docs for more information.")}}class ia extends J{constructor(e,t,i){if(super(i.toString().replace(/^error: /,"").replace(/^Error: /,"").replace(/^Request/,"")),this.query=e,this.parameters=t,this.driverError=i,i){const{name:r,...s}=i;ft.assign(this,{...s})}}}class cQ extends J{constructor(){super("Entity manager is not using single database connection and cannot be released. Only entity managers created by connection#createEntityManagerWithSingleDatabaseConnection methods have a single database connection and they should be released.")}}class uQ extends J{constructor(e){super('Removed entity "'.concat(e.metadata.name,'" is also scheduled for update operation. ')+"Make sure you are not updating and removing same object (note that update or remove may be executed by cascade operations).")}}class PO extends J{constructor(e,t){super("Column type for ".concat(e.constructor.name,"#").concat(t," is not defined and cannot be guessed. ")+'Make sure you have turned on an "emitDecoratorMetadata": true option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application (before any entity imported).If you are using JavaScript instead of TypeScript you must explicitly provide a column type.')}}class Oi extends J{constructor(){super("Query runner already released. Cannot run queries anymore.")}}class dQ extends J{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class Zd extends J{constructor(e){super('Cannot execute operation on "'.concat(e,'" connection because connection is not yet established.'))}}class hQ extends J{constructor(e){super('Option "'.concat(e,'" is not set in your connection options, please ')+'define "'.concat(e,'" option in your connection options or ormconfig.json'))}}class fQ extends J{constructor(e){const t=e.map(i=>'"'.concat(i.name,'"'));super("Migrations ".concat(t.join(", "),' override the transaction mode, but the global transaction mode is "all"'))}}class Wi{constructor(e){this["@instanceof"]=Symbol.for("TableColumn"),this.isNullable=!1,this.isGenerated=!1,this.isPrimary=!1,this.isUnique=!1,this.isArray=!1,this.length="",this.zerofill=!1,this.unsigned=!1,e&&(this.name=e.name,this.type=e.type||"",this.length=e.length||"",this.width=e.width,this.charset=e.charset,this.collation=e.collation,this.precision=e.precision,this.scale=e.scale,this.zerofill=e.zerofill||!1,this.unsigned=this.zerofill?!0:e.unsigned||!1,this.default=e.default,this.onUpdate=e.onUpdate,this.isNullable=e.isNullable||!1,this.isGenerated=e.isGenerated||!1,this.generationStrategy=e.generationStrategy,this.generatedIdentity=e.generatedIdentity,this.isPrimary=e.isPrimary||!1,this.isUnique=e.isUnique||!1,this.isArray=e.isArray||!1,this.comment=e.comment,this.enum=e.enum,this.enumName=e.enumName,this.primaryKeyConstraintName=e.primaryKeyConstraintName,this.asExpression=e.asExpression,this.generatedType=e.generatedType,this.spatialFeatureType=e.spatialFeatureType,this.srid=e.srid)}clone(){return new Wi({name:this.name,type:this.type,length:this.length,width:this.width,charset:this.charset,collation:this.collation,precision:this.precision,scale:this.scale,zerofill:this.zerofill,unsigned:this.unsigned,enum:this.enum,enumName:this.enumName,primaryKeyConstraintName:this.primaryKeyConstraintName,asExpression:this.asExpression,generatedType:this.generatedType,default:this.default,onUpdate:this.onUpdate,isNullable:this.isNullable,isGenerated:this.isGenerated,generationStrategy:this.generationStrategy,generatedIdentity:this.generatedIdentity,isPrimary:this.isPrimary,isUnique:this.isUnique,isArray:this.isArray,comment:this.comment,spatialFeatureType:this.spatialFeatureType,srid:this.srid})}}class yn{constructor(e){this["@instanceof"]=Symbol.for("TableIndex"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.isUnique=!!e.isUnique,this.isSpatial=!!e.isSpatial,this.isFulltext=!!e.isFulltext,this.isNullFiltered=!!e.isNullFiltered,this.parser=e.parser,this.where=e.where?e.where:""}clone(){return new yn({name:this.name,columnNames:[...this.columnNames],isUnique:this.isUnique,isSpatial:this.isSpatial,isFulltext:this.isFulltext,isNullFiltered:this.isNullFiltered,parser:this.parser,where:this.where})}static create(e){return new yn({name:e.name,columnNames:e.columns.map(t=>t.databaseName),isUnique:e.isUnique,isSpatial:e.isSpatial,isFulltext:e.isFulltext,isNullFiltered:e.isNullFiltered,parser:e.parser,where:e.where})}}class zr{constructor(e){this["@instanceof"]=Symbol.for("TableForeignKey"),this.columnNames=[],this.referencedColumnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.referencedColumnNames=e.referencedColumnNames,this.referencedDatabase=e.referencedDatabase,this.referencedSchema=e.referencedSchema,this.referencedTableName=e.referencedTableName,this.onDelete=e.onDelete,this.onUpdate=e.onUpdate,this.deferrable=e.deferrable}clone(){return new zr({name:this.name,columnNames:[...this.columnNames],referencedColumnNames:[...this.referencedColumnNames],referencedDatabase:this.referencedDatabase,referencedSchema:this.referencedSchema,referencedTableName:this.referencedTableName,onDelete:this.onDelete,onUpdate:this.onUpdate,deferrable:this.deferrable})}static create(e,t){return new zr({name:e.name,columnNames:e.columnNames,referencedColumnNames:e.referencedColumnNames,referencedDatabase:e.referencedEntityMetadata.database,referencedSchema:e.referencedEntityMetadata.schema,referencedTableName:e.referencedTablePath,onDelete:e.onDelete,onUpdate:e.onUpdate,deferrable:e.deferrable})}}class qm{static createTableColumnOptions(e,t){return{name:e.databaseName,length:t.getColumnLength(e),width:e.width,charset:e.charset,collation:e.collation,precision:e.precision,scale:e.scale,zerofill:e.zerofill,unsigned:e.unsigned,asExpression:e.asExpression,generatedType:e.generatedType,default:t.normalizeDefault(e),onUpdate:e.onUpdate,comment:e.comment,isGenerated:e.isGenerated,generationStrategy:e.generationStrategy,generatedIdentity:e.generatedIdentity,isNullable:e.isNullable,type:t.normalizeType(e),isPrimary:e.isPrimary,isUnique:t.normalizeIsUnique(e),isArray:e.isArray||!1,enum:e.enum?e.enum.map(i=>i+""):e.enum,enumName:e.enumName,primaryKeyConstraintName:e.primaryKeyConstraintName,spatialFeatureType:e.spatialFeatureType,srid:e.srid}}}class hi{constructor(e){this["@instanceof"]=Symbol.for("TableUnique"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.deferrable=e.deferrable}clone(){return new hi({name:this.name,columnNames:[...this.columnNames],deferrable:this.deferrable})}static create(e){return new hi({name:e.name,columnNames:e.columns.map(t=>t.databaseName),deferrable:e.deferrable})}}class Ss{constructor(e){this["@instanceof"]=Symbol.for("TableCheck"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.expression=e.expression}clone(){return new Ss({name:this.name,columnNames:this.columnNames?[...this.columnNames]:[],expression:this.expression})}static create(e){return new Ss({name:e.name,expression:e.expression})}}class Zl{constructor(e){this["@instanceof"]=Symbol.for("TableExclusion"),this.name=e.name,this.expression=e.expression}clone(){return new Zl({name:this.name,expression:this.expression})}static create(e){return new Zl({name:e.name,expression:e.expression})}}class nn{constructor(e){this["@instanceof"]=Symbol.for("Table"),this.columns=[],this.indices=[],this.foreignKeys=[],this.uniques=[],this.checks=[],this.exclusions=[],this.justCreated=!1,this.withoutRowid=!1,e&&(this.database=e.database,this.schema=e.schema,this.name=e.name,e.columns&&(this.columns=e.columns.map(t=>new Wi(t))),e.indices&&(this.indices=e.indices.map(t=>new yn(t))),e.foreignKeys&&(this.foreignKeys=e.foreignKeys.map(t=>new zr({...t,referencedDatabase:(t==null?void 0:t.referencedDatabase)||e.database,referencedSchema:(t==null?void 0:t.referencedSchema)||e.schema}))),e.uniques&&(this.uniques=e.uniques.map(t=>new hi(t))),e.checks&&(this.checks=e.checks.map(t=>new Ss(t))),e.exclusions&&(this.exclusions=e.exclusions.map(t=>new Zl(t))),e.justCreated!==void 0&&(this.justCreated=e.justCreated),e.withoutRowid&&(this.withoutRowid=e.withoutRowid),this.engine=e.engine)}get primaryColumns(){return this.columns.filter(e=>e.isPrimary)}clone(){return new nn({schema:this.schema,database:this.database,name:this.name,columns:this.columns.map(e=>e.clone()),indices:this.indices.map(e=>e.clone()),foreignKeys:this.foreignKeys.map(e=>e.clone()),uniques:this.uniques.map(e=>e.clone()),checks:this.checks.map(e=>e.clone()),exclusions:this.exclusions.map(e=>e.clone()),justCreated:this.justCreated,withoutRowid:this.withoutRowid,engine:this.engine})}addColumn(e){this.columns.push(e)}removeColumn(e){const t=this.columns.find(i=>i.name===e.name);t&&this.columns.splice(this.columns.indexOf(t),1)}addUniqueConstraint(e){if(this.uniques.push(e),e.columnNames.length===1){const t=this.columns.find(i=>i.name===e.columnNames[0]);t&&(t.isUnique=!0)}}removeUniqueConstraint(e){const t=this.uniques.find(i=>i.name===e.name);if(t&&(this.uniques.splice(this.uniques.indexOf(t),1),t.columnNames.length===1)){const i=this.columns.find(r=>r.name===t.columnNames[0]);i&&(i.isUnique=!1)}}addCheckConstraint(e){this.checks.push(e)}removeCheckConstraint(e){const t=this.checks.find(i=>i.name===e.name);t&&this.checks.splice(this.checks.indexOf(t),1)}addExclusionConstraint(e){this.exclusions.push(e)}removeExclusionConstraint(e){const t=this.exclusions.find(i=>i.name===e.name);t&&this.exclusions.splice(this.exclusions.indexOf(t),1)}addForeignKey(e){this.foreignKeys.push(e)}removeForeignKey(e){const t=this.foreignKeys.find(i=>i.name===e.name);t&&this.foreignKeys.splice(this.foreignKeys.indexOf(t),1)}addIndex(e,t=!1){if(this.indices.push(e),e.columnNames.length===1&&e.isUnique&&t){const i=this.columns.find(r=>r.name===e.columnNames[0]);i&&(i.isUnique=!0)}}removeIndex(e,t=!1){const i=this.indices.find(r=>r.name===e.name);if(i&&(this.indices.splice(this.indices.indexOf(i),1),i.columnNames.length===1&&i.isUnique&&t)){const r=this.columns.find(s=>s.name===i.columnNames[0]);r&&(r.isUnique=this.indices.some(s=>s.columnNames.length===1&&s.columnNames[0]===r.name&&!!i.isUnique))}}findColumnByName(e){return this.columns.find(t=>t.name===e)}findColumnIndices(e){return this.indices.filter(t=>!!t.columnNames.find(i=>i===e.name))}findColumnForeignKeys(e){return this.foreignKeys.filter(t=>!!t.columnNames.find(i=>i===e.name))}findColumnUniques(e){return this.uniques.filter(t=>!!t.columnNames.find(i=>i===e.name))}findColumnChecks(e){return this.checks.filter(t=>!!t.columnNames.find(i=>i===e.name))}static create(e,t){const i=e.database===t.database?void 0:e.database,r=e.schema===t.options.schema?void 0:e.schema,s={database:e.database,schema:e.schema,name:t.buildTableName(e.tableName,r,i),withoutRowid:e.withoutRowid,engine:e.engine,columns:e.columns.filter(a=>a&&!a.isVirtualProperty).map(a=>qm.createTableColumnOptions(a,t)),indices:e.indices.filter(a=>a.synchronize===!0).map(a=>yn.create(a)),uniques:e.uniques.map(a=>hi.create(a)),checks:e.checks.map(a=>Ss.create(a)),exclusions:e.exclusions.map(a=>Zl.create(a))};return new nn(s)}}class tA{constructor(e,t,i,r,s){this.id=e,this.timestamp=t,this.name=i,this.instance=r,this.transaction=s}}class ds{constructor(e,t,...i){this.value=e,this.type=t,this["@instanceof"]=Symbol.for("MssqlParameter"),this.params=[],this.params=i||[]}}class Dv{constructor(e,t){this.connection=e,this.queryRunner=t,this.transaction="all";const{schema:i}=this.connection.driver.options,r=this.connection.driver.database;this.migrationsDatabase=r,this.migrationsSchema=i,this.migrationsTableName=e.options.migrationsTableName||"migrations",this.migrationsTable=this.connection.driver.buildTableName(this.migrationsTableName,i,r)}async executeMigration(e){return this.withQueryRunner(async t=>{await this.createMigrationsTableIfNotExist(t);const i=this.connection.driver.createSchemaBuilder();return se.isRdbmsSchemaBuilder(i)&&await i.createMetadataTableIfNecessary(t),await t.beforeMigration(),await e.instance.up(t),await t.afterMigration(),await this.insertExecutedMigration(t,e),e})}async getAllMigrations(){return Promise.resolve(this.getMigrations())}async getExecutedMigrations(){return this.withQueryRunner(async e=>(await this.createMigrationsTableIfNotExist(e),await this.loadExecutedMigrations(e)))}async getPendingMigrations(){const e=await this.getAllMigrations(),t=await this.getExecutedMigrations();return e.filter(i=>!t.find(r=>r.name===i.name))}insertMigration(e){return this.withQueryRunner(t=>this.insertExecutedMigration(t,e))}deleteMigration(e){return this.withQueryRunner(t=>this.deleteExecutedMigration(t,e))}async showMigrations(){let e=!1;const t=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(t);const i=await this.loadExecutedMigrations(t),r=this.getMigrations();for(const s of r){const a=i.find(o=>o.name===s.name);a?this.connection.logger.logSchemaBuild("[X] ".concat(a.id," ").concat(s.name)):(e=!0,this.connection.logger.logSchemaBuild("[ ] ".concat(s.name)))}return this.queryRunner||await t.release(),e}async executePendingMigrations(){const e=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(e);const t=this.connection.driver.createSchemaBuilder();se.isRdbmsSchemaBuilder(t)&&await t.createMetadataTableIfNecessary(e);const i=await this.loadExecutedMigrations(e);let r=this.getLatestTimestampMigration(i);const s=this.getMigrations(),a=[],o=s.filter(u=>!i.find(h=>h.name===u.name));if(!o.length)return this.connection.logger.logSchemaBuild("No migrations are pending"),this.queryRunner||await e.release(),[];if(this.connection.logger.logSchemaBuild("".concat(i.length," migrations are already loaded in the database.")),this.connection.logger.logSchemaBuild("".concat(s.length," migrations were found in the source code.")),r&&this.connection.logger.logSchemaBuild("".concat(r.name," is the last executed migration. It was executed on ").concat(new Date(r.timestamp).toString(),".")),this.connection.logger.logSchemaBuild("".concat(o.length," migrations are new migrations must be executed.")),this.transaction==="all"){const u=o.filter(d=>{var h;return((h=d.instance)===null||h===void 0?void 0:h.transaction)!==void 0});if(u.length>0){const d=new fQ(u);throw this.connection.logger.logMigration("Migrations failed, error: ".concat(d.message)),d}}const l={each:!0,none:!1,all:!1}[this.transaction];for(const u of o)if(u.instance){const d=u.instance.transaction;d===void 0?u.transaction=l:u.transaction=d}let c=!1;this.transaction==="all"&&!e.isTransactionActive&&(await e.beforeMigration(),await e.startTransaction(),c=!0);try{for(const u of o){if(this.fake){await this.insertExecutedMigration(e,u);continue}u.transaction&&!e.isTransactionActive&&(await e.beforeMigration(),await e.startTransaction(),c=!0),await u.instance.up(e).catch(d=>{throw this.connection.logger.logMigration('Migration "'.concat(u.name,'" failed, error: ').concat(d==null?void 0:d.message)),d}).then(async()=>{await this.insertExecutedMigration(e,u),u.transaction&&c&&(await e.commitTransaction(),await e.afterMigration())}).then(()=>{a.push(u),this.connection.logger.logSchemaBuild("Migration ".concat(u.name," has been ").concat(this.fake?"(fake)":""," executed successfully."))})}this.transaction==="all"&&c&&(await e.commitTransaction(),await e.afterMigration())}catch(u){if(c)try{await e.rollbackTransaction()}catch(d){}throw u}finally{this.queryRunner||await e.release()}return a}async undoLastMigration(){const e=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(e);const t=this.connection.driver.createSchemaBuilder();se.isRdbmsSchemaBuilder(t)&&await t.createMetadataTableIfNecessary(e);const i=await this.loadExecutedMigrations(e);let r=this.getLatestExecutedMigration(i);if(!r){this.connection.logger.logSchemaBuild("No migrations were found in the database. Nothing to revert!");return}const a=this.getMigrations().find(l=>l.name===r.name);if(!a)throw new J("No migration ".concat(r.name," was found in the source code. Make sure you have this migration in your codebase and its included in the connection options."));this.connection.logger.logSchemaBuild("".concat(i.length," migrations are already loaded in the database.")),this.connection.logger.logSchemaBuild("".concat(r.name," is the last executed migration. It was executed on ").concat(new Date(r.timestamp).toString(),".")),this.connection.logger.logSchemaBuild("Now reverting it...");let o=!1;this.transaction!=="none"&&!e.isTransactionActive&&(await e.startTransaction(),o=!0);try{this.fake||(await e.beforeMigration(),await a.instance.down(e),await e.afterMigration()),await this.deleteExecutedMigration(e,a),this.connection.logger.logSchemaBuild("Migration ".concat(a.name," has been ").concat(this.fake?"(fake)":""," reverted successfully.")),o&&await e.commitTransaction()}catch(l){if(o)try{await e.rollbackTransaction()}catch(c){}throw l}finally{this.queryRunner||await e.release()}}async createMigrationsTableIfNotExist(e){if(this.connection.driver.options.type==="mongodb")return;await e.hasTable(this.migrationsTable)||await e.createTable(new nn({database:this.migrationsDatabase,schema:this.migrationsSchema,name:this.migrationsTable,columns:[{name:"id",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationId}),isGenerated:!0,generationStrategy:"increment",isPrimary:!0,isNullable:!1},{name:"timestamp",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp}),isPrimary:!1,isNullable:!1},{name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}),isNullable:!1}]}))}async loadExecutedMigrations(e){return this.connection.driver.options.type==="mongodb"?e.cursor(this.migrationsTableName,{}).sort({_id:-1}).toArray():(await this.connection.manager.createQueryBuilder(e).select().orderBy(this.connection.driver.escape("id"),"DESC").from(this.migrationsTable,this.migrationsTableName).getRawMany()).map(i=>new tA(parseInt(i.id),parseInt(i.timestamp),i.name))}getMigrations(){const e=this.connection.migrations.map(t=>{const i=t.name||t.constructor.name,r=parseInt(i.substr(-13),10);if(!r||isNaN(r))throw new J("".concat(i," migration name is wrong. Migration class name should have a JavaScript timestamp appended."));return new tA(void 0,r,i,t)});return this.checkForDuplicateMigrations(e),e.sort((t,i)=>t.timestamp-i.timestamp)}checkForDuplicateMigrations(e){const t=e.map(r=>r.name),i=Array.from(new Set(t.filter((r,s)=>t.indexOf(r)<s)));if(i.length>0)throw Error("Duplicate migrations: ".concat(i.join(", ")))}getLatestTimestampMigration(e){const t=e.map(i=>i).sort((i,r)=>(i.timestamp-r.timestamp)*-1);return t.length>0?t[0]:void 0}getLatestExecutedMigration(e){return e.length>0?e[0]:void 0}async insertExecutedMigration(e,t){const i={};this.connection.driver.options.type==="mssql"?(i.timestamp=new ds(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),i.name=new ds(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))):(i.timestamp=t.timestamp,i.name=t.name),this.connection.driver.options.type==="mongodb"?await e.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).insertOne(i):await e.manager.createQueryBuilder().insert().into(this.migrationsTable).values(i).execute()}async deleteExecutedMigration(e,t){const i={};if(this.connection.driver.options.type==="mssql"?(i.timestamp=new ds(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),i.name=new ds(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))):(i.timestamp=t.timestamp,i.name=t.name),this.connection.driver.options.type==="mongodb")await e.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).deleteOne(i);else{const r=e.manager.createQueryBuilder();await r.delete().from(this.migrationsTable).where("".concat(r.escape("timestamp")," = :timestamp")).andWhere("".concat(r.escape("name")," = :name")).setParameters(i).execute()}}async withQueryRunner(e){const t=this.queryRunner||this.connection.createQueryRunner();try{return await e(t)}finally{this.queryRunner||await t.release()}}}function nm(n,e,t){let i=[],r={};return function s(a){r[a]=!0,i.push(a),n[a].forEach(function(o){if(!r[o])s(o);else if(i.indexOf(o)>=0)throw i.push(o),new J("Dependency Cycle Found: ".concat(i.join(" -> ")))}),i.pop(),(!e||n[a].length===0)&&t.indexOf(a)===-1&&t.push(a)}}class pQ{constructor(){this.nodes={},this.outgoingEdges={},this.incomingEdges={}}addNode(e,t){this.hasNode(e)||(arguments.length===2?this.nodes[e]=t:this.nodes[e]=e,this.outgoingEdges[e]=[],this.incomingEdges[e]=[])}removeNode(e){this.hasNode(e)&&(delete this.nodes[e],delete this.outgoingEdges[e],delete this.incomingEdges[e],[this.incomingEdges,this.outgoingEdges].forEach(function(t){Object.keys(t).forEach(function(i){let r=t[i].indexOf(e);r>=0&&t[i].splice(r,1)},this)}))}hasNode(e){return this.nodes.hasOwnProperty(e)}getNodeData(e){if(this.hasNode(e))return this.nodes[e];throw new J("Node does not exist: ".concat(e))}setNodeData(e,t){if(this.hasNode(e))this.nodes[e]=t;else throw new J("Node does not exist: ".concat(e))}addDependency(e,t){if(!this.hasNode(e))throw new J("Node does not exist: ".concat(e));if(!this.hasNode(t))throw new J("Node does not exist: ".concat(t));return this.outgoingEdges[e].indexOf(t)===-1&&this.outgoingEdges[e].push(t),this.incomingEdges[t].indexOf(e)===-1&&this.incomingEdges[t].push(e),!0}removeDependency(e,t){let i;this.hasNode(e)&&(i=this.outgoingEdges[e].indexOf(t),i>=0&&this.outgoingEdges[e].splice(i,1)),this.hasNode(t)&&(i=this.incomingEdges[t].indexOf(e),i>=0&&this.incomingEdges[t].splice(i,1))}dependenciesOf(e,t){if(this.hasNode(e)){let i=[];nm(this.outgoingEdges,t,i)(e);let s=i.indexOf(e);return s>=0&&i.splice(s,1),i}else throw new J("Node does not exist: ".concat(e))}dependantsOf(e,t){if(this.hasNode(e)){let i=[];nm(this.incomingEdges,t,i)(e);let s=i.indexOf(e);return s>=0&&i.splice(s,1),i}else throw new J("Node does not exist: ".concat(e))}overallOrder(e){let t=this,i=[],r=Object.keys(this.nodes);if(r.length===0)return i;{let s=nm(this.outgoingEdges,!1,[]);r.forEach(function(o){s(o)});let a=nm(this.outgoingEdges,e,i);return r.filter(function(o){return t.incomingEdges[o].length===0}).forEach(function(o){a(o)}),i}}}class IO{static isGreaterOrEqual(e,t){const i=nA(e),r=nA(t);return i[0]>r[0]||i[0]===r[0]&&i[1]>r[1]||i[0]===r[0]&&i[1]===r[1]&&i[2]>=r[2]}}function nA(n=""){const e=[0,0,0];return n.split(".").forEach((t,i)=>e[i]=parseInt(t,10)),e}class Oe{static isSQLiteFamily(e){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(e.options.type)}static isMySQLFamily(e){return["mysql","mariadb"].includes(e.options.type)}static isReleaseVersionOrGreater(e,t){return e.version!=null&&IO.isGreaterOrEqual(e.version,t)}static isPostgresFamily(e){return["postgres","aurora-postgres","cockroachdb"].includes(e.options.type)}static buildDriverOptions(e,t){if(e.url){const i=this.parseConnectionUrl(e.url);t&&t.useSid&&i.database&&(i.sid=i.database);for(const r of Object.keys(i))typeof i[r]>"u"&&delete i[r];return Object.assign({},e,i)}return Object.assign({},e)}static buildMongoDBDriverOptions(e,t){if(e.url){const i=this.parseMongoDBConnectionUrl(e.url);t&&t.useSid&&i.database&&(i.sid=i.database);for(const r of Object.keys(i))typeof i[r]>"u"&&delete i[r];return Object.assign({},e,i)}return Object.assign({},e)}static buildAlias({maxAliasLength:e},t,...i){const r=i.length===1?i[0]:i.join(t&&t.joiner?t.joiner:"_");if(e&&e>0&&r.length>e){if(t&&t.shorten===!0){const s=kO(r);if(s.length<e)return s}return zG(r,{length:e})}return r}static buildColumnAlias({maxAliasLength:e},t,...i){return typeof t=="string"?(i.unshift(t),t={shorten:!1,joiner:"_"}):t=Object.assign({shorten:!1,joiner:"_"},t),this.buildAlias({maxAliasLength:e},t,...i)}static parseConnectionUrl(e){const t=e.split(":")[0],i=e.indexOf("//"),r=e.substr(i+2),s=r.indexOf("/"),a=s!==-1?r.substr(0,s):r;let o=s!==-1?r.substr(s+1):void 0;o&&o.indexOf("?")!==-1&&(o=o.substr(0,o.indexOf("?")));const l=a.lastIndexOf("@"),c=a.substr(0,l),u=a.substr(l+1);let d=c,h="";const f=c.indexOf(":");f!==-1&&(d=c.substr(0,f),h=c.substr(f+1));const[m,g]=u.split(":");return{type:t,host:m,username:decodeURIComponent(d),password:decodeURIComponent(h),port:g?parseInt(g):void 0,database:o||void 0}}static parseMongoDBConnectionUrl(e){const t=e.split(":")[0],i=e.indexOf("//"),r=e.substr(i+2),s=r.indexOf("/"),a=s!==-1?r.substr(0,s):r;let o=s!==-1?r.substr(s+1):void 0,l="",c,u,d,h,f={};if(o&&o.indexOf("?")!==-1){l=o.substr(o.indexOf("?")+1,o.length);const P=l.split("&");let F,$;P.forEach(B=>{F=B.split("=")[0],$=B.split("=")[1],f[F]=$}),h=f.replicaSet,o=o.substr(0,o.indexOf("?"))}const m=a.lastIndexOf("@"),g=a.substr(0,m),_=a.substr(m+1);let v=g,y="";const T=g.indexOf(":");T!==-1&&(v=g.substr(0,T),y=g.substr(T+1)),h?d=_:[c,u]=_.split(":");let N={type:t,host:c,hostReplicaSet:d,username:decodeURIComponent(v),password:decodeURIComponent(y),port:u?parseInt(u):void 0,database:o||void 0};for(const[P,F]of Object.entries(f))N[P]=F;return N}}class mQ{validateMany(e,t){e.forEach(i=>this.validate(i,e,t)),this.validateDependencies(e),this.validateEagerRelations(e)}validate(e,t,i){if(!e.primaryColumns.length&&!e.isJunction)throw new tQ(e);if(e.primaryColumns.length>1&&!e.primaryColumns.every((a,o,l)=>a.primaryKeyConstraintName===l[0].primaryKeyConstraintName))throw new J("Entity ".concat(e.name," has multiple primary columns with different constraint names. Constraint names should be the equal."));if(e.inheritancePattern==="STI"||e.tableType==="entity-child"){if(!e.discriminatorColumn)throw new J("Entity ".concat(e.name," using single-table inheritance, it should also have a discriminator column. Did you forget to put discriminator column options?"));if(typeof e.discriminatorValue>"u")throw new J("Entity ".concat(e.name," has an undefined discriminator value. Discriminator value should be defined."));const s=t.find(a=>a!==e&&(a.inheritancePattern==="STI"||a.tableType==="entity-child")&&a.tableName===e.tableName&&a.discriminatorValue===e.discriminatorValue&&a.inheritanceTree.some(o=>e.inheritanceTree.indexOf(o)!==-1));if(s)throw new J("Entities ".concat(e.name," and ").concat(s.name," have the same discriminator values. Make sure they are different while using the @ChildEntity decorator."))}if(e.relationCounts.forEach(s=>{if(s.relation.isManyToOne||s.relation.isOneToOne)throw new J("Relation count can not be implemented on ManyToOne or OneToOne relations.")}),i.options.type!=="mongodb"&&e.columns.filter(s=>!s.isVirtualProperty).forEach(s=>{const a=i.normalizeType(s);if(i.supportedDataTypes.indexOf(a)===-1)throw new oQ(s,a,i.options.type);if(s.length&&i.withLengthColumnTypes.indexOf(a)===-1)throw new J("Column ".concat(s.propertyName," of Entity ").concat(e.name," does not support length property."));if(s.type==="enum"&&!s.enum&&!s.enumName)throw new J('Column "'.concat(s.propertyName,'" of Entity "').concat(e.name,'" is defined as enum, but missing "enum" or "enumName" properties.'))}),(Oe.isMySQLFamily(i)||i.options.type==="aurora-mysql")&&e.columns.filter(a=>a.isGenerated&&a.generationStrategy!=="uuid").length>1)throw new J("Error in ".concat(e.name," entity. There can be only one auto-increment column in MySql table."));if(Oe.isMySQLFamily(i)&&t.filter(a=>a.database).length===0&&!i.database)throw new hQ("database");if(i.options.type==="mssql"&&e.columns.filter(a=>a.charset).length>1)throw new J("Character set specifying is not supported in Sql Server");if(i.options.type==="postgres"){const s=e.columns.find(a=>a.asExpression&&(!a.generatedType||a.generatedType==="VIRTUAL"));if(s)throw new J('Column "'.concat(s.propertyName,'" of Entity "').concat(e.name,'" is defined as VIRTUAL, but Postgres supports only STORED generated columns.'))}const r=e.create(void 0,{fromDeserializer:!0});e.relations.forEach(s=>{if(s.isManyToMany||s.isOneToMany){if(s.persistenceEnabled===!1)return;const a=s.getEntityValue(r);if(Array.isArray(a))throw new lQ(s)}}),e.relations.forEach(s=>{if(i.supportedOnDeleteTypes&&s.onDelete&&!i.supportedOnDeleteTypes.includes(s.onDelete))throw new J('OnDeleteType "'.concat(s.onDelete,'" is not supported for ').concat(i.options.type,"!"));if(i.supportedOnUpdateTypes&&s.onUpdate&&!i.supportedOnUpdateTypes.includes(s.onUpdate))throw new J('OnUpdateType "'.concat(s.onUpdate,'" is not valid for ').concat(i.options.type,"!"))}),e.relations.forEach(s=>{if(s.isCascadeRemove&&s.inverseRelation&&s.inverseRelation.isCascadeRemove)throw new J("Relation ".concat(e.name,"#").concat(s.propertyName," and ").concat(s.inverseRelation.entityMetadata.name,"#").concat(s.inverseRelation.propertyName," both has cascade remove set. ")+"This may lead to unexpected circular removals. Please set cascade remove only from one side of relationship.")}),e.eagerRelations.forEach(s=>{})}validateDependencies(e){const t=new pQ;e.forEach(i=>{t.addNode(i.name)}),e.forEach(i=>{i.relationsWithJoinColumns.filter(r=>!r.isNullable).forEach(r=>{t.addDependency(i.name,r.inverseEntityMetadata.name)})});try{t.overallOrder()}catch(i){throw new eQ(i.toString().replace("Error: Dependency Cycle Found: ",""))}}validateEagerRelations(e){e.forEach(t=>{t.eagerRelations.forEach(i=>{if(i.inverseRelation&&i.inverseRelation.isEager)throw new J("Circular eager relations are disallowed. "+"".concat(t.targetName,"#").concat(i.propertyPath,' contains "eager: true", and its inverse side ')+"".concat(i.inverseEntityMetadata.targetName,"#").concat(i.inverseRelation.propertyPath,' contains "eager: true" as well.')+' Remove "eager: true" from one side of the relation.')})})}}class gQ{}class yQ{}class bQ{}class RO{}class vQ{}class wQ{}class xQ{}class iA{}class EQ{}class TQ{}class SQ{}class ui{static isFindOneOptions(e){const t=e;return t&&(Array.isArray(t.select)||Array.isArray(t.relations)||typeof t.select=="object"||typeof t.relations=="object"||typeof t.where=="object"||typeof t.join=="object"||typeof t.order=="object"||typeof t.cache=="object"||typeof t.cache=="boolean"||typeof t.cache=="number"||typeof t.comment=="string"||typeof t.lock=="object"||typeof t.loadRelationIds=="object"||typeof t.loadRelationIds=="boolean"||typeof t.loadEagerRelations=="boolean"||typeof t.withDeleted=="boolean"||typeof t.relationLoadStrategy=="string"||typeof t.transaction=="boolean")}static isFindManyOptions(e){const t=e;return t&&(this.isFindOneOptions(t)||typeof t.skip=="number"||typeof t.take=="number"||typeof t.skip=="string"||typeof t.take=="string")}static extractFindManyOptionsAlias(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias}static applyOptionsToTreeQueryBuilder(e,t){if(t!=null&&t.relations){const i=[...t.relations];if(ui.applyRelationsRecursively(e,i,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),i.length>0)throw new sQ(i)}return e}static applyRelationsRecursively(e,t,i,r,s){let a=[];if(s){const o=new RegExp("^"+s.replace(".","\\.")+"\\.");a=t.filter(l=>l.match(o)).map(l=>r.findRelationWithPropertyPath(l.replace(o,""))).filter(l=>l)}else a=t.map(o=>r.findRelationWithPropertyPath(o)).filter(o=>o);a.forEach(o=>{let l=Oe.buildAlias(e.connection.driver,{joiner:"__"},i,o.propertyPath);const c=i+"."+o.propertyPath;e.expressionMap.relationLoadStrategy==="query"?e.concatRelationMetadata(o):e.leftJoinAndSelect(c,l),t.splice(t.indexOf(s?s+"."+o.propertyPath:o.propertyPath),1);let u,d;if(e.expressionMap.relationLoadStrategy==="query")u=o.inverseEntityMetadata,d=l;else{const h=e.expressionMap.joinAttributes.find(f=>f.entityOrProperty===c);u=h.metadata,d=h.alias.name}if(!d||!u)throw new Qs(o.propertyPath,r);if(this.applyRelationsRecursively(e,t,d,u,s?s+"."+o.propertyPath:o.propertyPath),e.expressionMap.relationLoadStrategy==="join"){const h=r.relations.find(f=>f.propertyName===o.propertyPath);h&&this.joinEagerRelations(e,l,h.inverseEntityMetadata)}})}static joinEagerRelations(e,t,i){i.eagerRelations.forEach(r=>{let s=Oe.buildAlias(e.connection.driver,{joiner:"__"},t,r.propertyPath),a=!0;for(const c of e.expressionMap.joinAttributes)if(!(c.condition!==void 0||c.mapToProperty!==void 0||c.isMappingMany!==void 0||c.direction!=="LEFT"||c.entityOrProperty!=="".concat(t,".").concat(r.propertyPath))){a=!1,s=c.alias.name;break}const o=!!e.expressionMap.joinAttributes.find(c=>c.alias.name===s);a&&!o&&e.leftJoin(t+"."+r.propertyPath,s);let l=!0;for(const c of e.expressionMap.selects)if(!(c.aliasName!==void 0||c.virtual!==void 0||c.selection!==s)){l=!1;break}l&&e.addSelect(s),this.joinEagerRelations(e,s,r.inverseEntityMetadata)})}}class Al{static createRelationMaps(e,t,i,r){return r.map(s=>{var a;const o=t.treeParentRelation.joinColumns[0],l=(a=o.referencedColumn)!==null&&a!==void 0?a:t.primaryColumns[0],c=o.givenDatabaseName||o.databaseName,u=l.givenDatabaseName||l.databaseName,d=s[i+"_"+u],h=s[i+"_"+c];return{id:e.connection.driver.prepareHydratedValue(d,l),parentId:e.connection.driver.prepareHydratedValue(h,o)}})}static buildChildrenEntityTree(e,t,i,r,s){var a;const o=e.treeChildrenRelation.propertyName;if(s.depth===0){t[o]=[];return}const c=(a=e.treeParentRelation.joinColumns[0].referencedColumn)!==null&&a!==void 0?a:e.primaryColumns[0],u=c.getEntityValue(t),d=r.filter(f=>f.parentId===u),h=new Set(d.map(f=>f.id));t[o]=i.filter(f=>h.has(c.getEntityValue(f))),t[o].forEach(f=>{Al.buildChildrenEntityTree(e,f,i,r,{...s,depth:s.depth-1})})}static buildParentEntityTree(e,t,i,r){var s;const a=e.treeParentRelation.propertyName,l=(s=e.treeParentRelation.joinColumns[0].referencedColumn)!==null&&s!==void 0?s:e.primaryColumns[0],c=l.getEntityValue(t),u=r.find(h=>h.id===c),d=i.find(h=>u?l.getEntityValue(h)===u.parentId:!1);d&&(t[a]=d,Al.buildParentEntityTree(e,t[a],i,r))}}class OO{get metadata(){return this.manager.connection.getMetadata(this.target)}constructor(e,t,i){this.target=e,this.manager=t,this.queryRunner=i}createQueryBuilder(e,t){return this.manager.createQueryBuilder(this.metadata.target,e||this.metadata.targetName,t||this.queryRunner)}hasId(e){return this.manager.hasId(this.metadata.target,e)}getId(e){return this.manager.getId(this.metadata.target,e)}create(e){return this.manager.create(this.metadata.target,e)}merge(e,...t){return this.manager.merge(this.metadata.target,e,...t)}preload(e){return this.manager.preload(this.metadata.target,e)}save(e,t){return this.manager.save(this.metadata.target,e,t)}remove(e,t){return this.manager.remove(this.metadata.target,e,t)}softRemove(e,t){return this.manager.softRemove(this.metadata.target,e,t)}recover(e,t){return this.manager.recover(this.metadata.target,e,t)}insert(e){return this.manager.insert(this.metadata.target,e)}update(e,t){return this.manager.update(this.metadata.target,e,t)}upsert(e,t){return this.manager.upsert(this.metadata.target,e,t)}delete(e){return this.manager.delete(this.metadata.target,e)}softDelete(e){return this.manager.softDelete(this.metadata.target,e)}restore(e){return this.manager.restore(this.metadata.target,e)}exist(e){return this.manager.exists(this.metadata.target,e)}count(e){return this.manager.count(this.metadata.target,e)}countBy(e){return this.manager.countBy(this.metadata.target,e)}sum(e,t){return this.manager.sum(this.metadata.target,e,t)}average(e,t){return this.manager.average(this.metadata.target,e,t)}minimum(e,t){return this.manager.minimum(this.metadata.target,e,t)}maximum(e,t){return this.manager.maximum(this.metadata.target,e,t)}async find(e){return this.manager.find(this.metadata.target,e)}async findBy(e){return this.manager.findBy(this.metadata.target,e)}findAndCount(e){return this.manager.findAndCount(this.metadata.target,e)}findAndCountBy(e){return this.manager.findAndCountBy(this.metadata.target,e)}async findByIds(e){return this.manager.findByIds(this.metadata.target,e)}async findOne(e){return this.manager.findOne(this.metadata.target,e)}async findOneBy(e){return this.manager.findOneBy(this.metadata.target,e)}async findOneById(e){return this.manager.findOneById(this.metadata.target,e)}async findOneOrFail(e){return this.manager.findOneOrFail(this.metadata.target,e)}async findOneByOrFail(e){return this.manager.findOneByOrFail(this.metadata.target,e)}query(e,t){return this.manager.query(e,t)}clear(){return this.manager.clear(this.metadata.target)}increment(e,t,i){return this.manager.increment(this.metadata.target,e,t,i)}decrement(e,t,i){return this.manager.decrement(this.metadata.target,e,t,i)}extend(e){const t=this.constructor,{target:i,manager:r,queryRunner:s}=this,a=new class extends t{}(i,r,s);return Object.assign(a,e),a}}class _Q extends OO{async findTrees(e){const t=await this.findRoots(e);return await Promise.all(t.map(i=>this.findDescendantsTree(i,e))),t}findRoots(e){const t=o=>this.manager.connection.driver.escape(o),i=o=>this.manager.connection.driver.escape(o),r=this.metadata.treeParentRelation.joinColumns[0],s=r.givenDatabaseName||r.databaseName,a=this.createQueryBuilder("treeEntity");return ui.applyOptionsToTreeQueryBuilder(a,e),a.where("".concat(t("treeEntity"),".").concat(i(s)," IS NULL")).getMany()}findDescendants(e,t){const i=this.createDescendantsQueryBuilder("treeEntity","treeClosure",e);return ui.applyOptionsToTreeQueryBuilder(i,t),i.getMany()}async findDescendantsTree(e,t){const i=this.createDescendantsQueryBuilder("treeEntity","treeClosure",e);ui.applyOptionsToTreeQueryBuilder(i,t);const r=await i.getRawAndEntities(),s=Al.createRelationMaps(this.manager,this.metadata,"treeEntity",r.raw);return Al.buildChildrenEntityTree(this.metadata,e,r.entities,s,{depth:-1,...t}),e}countDescendants(e){return this.createDescendantsQueryBuilder("treeEntity","treeClosure",e).getCount()}createDescendantsQueryBuilder(e,t,i){const r=s=>this.manager.connection.driver.escape(s);if(this.metadata.treeType==="closure-table"){const s=this.metadata.closureJunctionTable.descendantColumns.map(l=>r(t)+"."+r(l.propertyPath)+" = "+r(e)+"."+r(l.referencedColumn.propertyPath)).join(" AND "),a={},o=this.metadata.closureJunctionTable.ancestorColumns.map(l=>(a[l.referencedColumn.propertyName]=l.referencedColumn.getEntityValue(i),r(t)+"."+r(l.propertyPath)+" = :"+l.referencedColumn.propertyName)).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,s).where(o).setParameters(a)}else if(this.metadata.treeType==="nested-set"){const s=e+"."+this.metadata.nestedSetLeftColumn.propertyPath+" BETWEEN joined."+this.metadata.nestedSetLeftColumn.propertyPath+" AND joined."+this.metadata.nestedSetRightColumn.propertyPath,a={},o=this.metadata.treeParentRelation.joinColumns.map(l=>{const c=l.referencedColumn.propertyPath.replace(".","_");return a[c]=l.referencedColumn.getEntityValue(i),"joined."+l.referencedColumn.propertyPath+" = :"+c}).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.targetName,"joined",s).where(o,a)}else if(this.metadata.treeType==="materialized-path")return this.createQueryBuilder(e).where(s=>{const a=s.subQuery().select("".concat(this.metadata.targetName,".").concat(this.metadata.materializedPathColumn.propertyPath),"path").from(this.metadata.target,this.metadata.targetName).whereInIds(this.metadata.getEntityIdMap(i));return Oe.isSQLiteFamily(this.manager.connection.driver)?"".concat(e,".").concat(this.metadata.materializedPathColumn.propertyPath," LIKE ").concat(a.getQuery()," || '%'"):"".concat(e,".").concat(this.metadata.materializedPathColumn.propertyPath," LIKE NULLIF(CONCAT(").concat(a.getQuery(),", '%'), '%')")});throw new J("Supported only in tree entities")}findAncestors(e,t){const i=this.createAncestorsQueryBuilder("treeEntity","treeClosure",e);return ui.applyOptionsToTreeQueryBuilder(i,t),i.getMany()}async findAncestorsTree(e,t){const i=this.createAncestorsQueryBuilder("treeEntity","treeClosure",e);ui.applyOptionsToTreeQueryBuilder(i,t);const r=await i.getRawAndEntities(),s=Al.createRelationMaps(this.manager,this.metadata,"treeEntity",r.raw);return Al.buildParentEntityTree(this.metadata,e,r.entities,s),e}countAncestors(e){return this.createAncestorsQueryBuilder("treeEntity","treeClosure",e).getCount()}createAncestorsQueryBuilder(e,t,i){if(this.metadata.treeType==="closure-table"){const r=this.metadata.closureJunctionTable.ancestorColumns.map(o=>t+"."+o.propertyPath+" = "+e+"."+o.referencedColumn.propertyPath).join(" AND "),s={},a=this.metadata.closureJunctionTable.descendantColumns.map(o=>(s[o.referencedColumn.propertyName]=o.referencedColumn.getEntityValue(i),t+"."+o.propertyPath+" = :"+o.referencedColumn.propertyName)).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,r).where(a).setParameters(s)}else if(this.metadata.treeType==="nested-set"){const r="joined."+this.metadata.nestedSetLeftColumn.propertyPath+" BETWEEN "+e+"."+this.metadata.nestedSetLeftColumn.propertyPath+" AND "+e+"."+this.metadata.nestedSetRightColumn.propertyPath,s={},a=this.metadata.treeParentRelation.joinColumns.map(o=>{const l=o.referencedColumn.propertyPath.replace(".","_");return s[l]=o.referencedColumn.getEntityValue(i),"joined."+o.referencedColumn.propertyPath+" = :"+l}).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.targetName,"joined",r).where(a,s)}else if(this.metadata.treeType==="materialized-path")return this.createQueryBuilder(e).where(r=>{const s=r.subQuery().select("".concat(this.metadata.targetName,".").concat(this.metadata.materializedPathColumn.propertyPath),"path").from(this.metadata.target,this.metadata.targetName).whereInIds(this.metadata.getEntityIdMap(i));return Oe.isSQLiteFamily(this.manager.connection.driver)?"".concat(s.getQuery()," LIKE ").concat(e,".").concat(this.metadata.materializedPathColumn.propertyPath," || '%'"):"".concat(s.getQuery()," LIKE CONCAT(").concat(e,".").concat(this.metadata.materializedPathColumn.propertyPath,", '%')")});throw new J("Supported only in tree entities")}}class CQ{transform(e,t,i,r=!1){return this.groupAndTransform(e,t,i,r),e}groupAndTransform(e,t,i,r=!1){i.nonVirtualColumns.forEach(s=>{const a=s.getEntityValue(t);a!==void 0&&s.setEntityValue(e,a)}),i.relations.length&&i.relations.forEach(s=>{let a=s.getEntityValue(e);const o=s.getEntityValue(t,r);if(o!==void 0)if(s.isOneToMany||s.isManyToMany){if(!Array.isArray(o))return;a||(a=[],s.setEntityValue(e,a)),o.forEach(l=>{let c=a.find(d=>s.inverseEntityMetadata.compareEntities(l,d));const u=s.inverseEntityMetadata.findInheritanceMetadata(l);c||(c=u.create(void 0,{fromDeserializer:!0}),a.push(c)),this.groupAndTransform(c,l,u,r)})}else{if(!ft.isObject(o)){ft.isObject(a)||s.setEntityValue(e,o);return}const l=s.inverseEntityMetadata.findInheritanceMetadata(o);a||(a=l.create(void 0,{fromDeserializer:!0}),s.setEntityValue(e,a)),this.groupAndTransform(a,o,l,r)}})}}class AQ{constructor(e,t,i,r){this.plainEntity=e,this.metadata=t,this.parentLoadMapItem=i,this.relation=r}get target(){return this.metadata.target}get id(){return this.metadata.getEntityIdMixedMap(this.plainEntity)}}class kQ{constructor(){this.loadMapItems=[]}get mainLoadMapItem(){return this.loadMapItems.find(e=>!e.relation&&!e.parentLoadMapItem)}addLoadMap(e){this.loadMapItems.find(i=>i.target===e.target&&i.id===e.id)||this.loadMapItems.push(e)}fillEntities(e,t){t.forEach(i=>{const r=this.loadMapItems.find(s=>s.target===e&&s.metadata.compareEntities(i,s.plainEntity));r&&(r.entity=i)})}groupByTargetIds(){const e=[];return this.loadMapItems.forEach(t=>{let i=e.find(r=>r.target===t.target);i||(i={target:t.target,ids:[]},e.push(i)),i.ids.push(t.id)}),e}}class NQ{constructor(e){this.manager=e}async transform(e,t){if(!t.hasAllPrimaryKeys(e))return Promise.reject("Given object does not have a primary column, cannot transform it to database entity.");const i=new kQ,r=(s,a,o,l)=>{const c=new AQ(s,a,o,l);i.addLoadMap(c),a.extractRelationValuesFromEntity(s,t.relations).filter(u=>u!=null).forEach(([u,d,h])=>r(d,h,c,u))};return r(e,t),await Promise.all(i.groupByTargetIds().map(s=>this.manager.findByIds(s.target,s.ids).then(a=>i.fillEntities(s.target,a)))),i.loadMapItems.forEach(s=>{!s.relation||!s.entity||!s.parentLoadMapItem||!s.parentLoadMapItem.entity||(s.relation.isManyToMany||s.relation.isOneToMany?(s.parentLoadMapItem.entity[s.relation.propertyName]||(s.parentLoadMapItem.entity[s.relation.propertyName]=[]),s.parentLoadMapItem.entity[s.relation.propertyName].push(s.entity)):s.parentLoadMapItem.entity[s.relation.propertyName]=s.entity)}),i.mainLoadMapItem?i.mainLoadMapItem.entity:void 0}}class DQ{get repository(){const e=this.getCustomRepositoryTarget(this);if(!e)throw new Nv(this.constructor);return this.manager.getRepository(e)}get treeRepository(){const e=this.getCustomRepositoryTarget(this);if(!e)throw new Nv(this.constructor);return this.manager.getTreeRepository(e)}createQueryBuilder(e){const t=this.getCustomRepositoryTarget(this.constructor);if(!t)throw new Nv(this.constructor);return this.manager.getRepository(t).createQueryBuilder(e)}createQueryBuilderFor(e,t){return this.getRepositoryFor(e).createQueryBuilder(t)}getRepositoryFor(e){return this.manager.getRepository(e)}getTreeRepositoryFor(e){return this.manager.getTreeRepository(e)}getCustomRepositoryTarget(e){const t=ys().entityRepositories.find(i=>i.target===(typeof e=="function"?e:e.constructor));if(!t)throw new NO(e);return t.entity}}class rA{constructor(e){this.subjects=[...e],this.metadatas=this.getUniqueMetadatas(this.subjects)}sort(e){if(!this.metadatas.length)return this.subjects;const t=[];if(e==="delete"){const o=this.subjects.filter(l=>!l.entity&&!l.databaseEntity);t.push(...o),this.removeAlreadySorted(o)}const i=this.getNonNullableDependencies();let r=this.toposort(i);e==="insert"&&(r=r.reverse()),r.forEach(o=>{const l=this.subjects.filter(c=>c.metadata.targetName===o||c.metadata.inheritanceTree.some(u=>u.name===o));t.push(...l),this.removeAlreadySorted(l)});const s=this.getDependencies();let a=this.toposort(s);return e==="insert"&&(a=a.reverse()),a.forEach(o=>{const l=this.subjects.filter(c=>c.metadata.targetName===o);t.push(...l),this.removeAlreadySorted(l)}),t.push(...this.subjects),t}removeAlreadySorted(e){e.forEach(t=>{this.subjects.splice(this.subjects.indexOf(t),1)})}getUniqueMetadatas(e){const t=[];return e.forEach(i=>{t.indexOf(i.metadata)===-1&&t.push(i.metadata)}),t}getNonNullableDependencies(){return this.metadatas.reduce((e,t)=>(t.relationsWithJoinColumns.forEach(i=>{i.isNullable||e.push([t.targetName,i.inverseEntityMetadata.targetName])}),e),[])}getDependencies(){return this.metadatas.reduce((e,t)=>(t.relationsWithJoinColumns.forEach(i=>{i.inverseEntityMetadata!==t&&e.push([t.targetName,i.inverseEntityMetadata.targetName])}),e),[])}toposort(e){function t(c){let u=[];for(let d=0,h=c.length;d<h;d++){let f=c[d];u.indexOf(f[0])<0&&u.push(f[0]),u.indexOf(f[1])<0&&u.push(f[1])}return u}const i=t(e);let r=i.length,s=new Array(r),a={},o=r;for(;o--;)a[o]||l(i[o],o,[]);function l(c,u,d){if(d.indexOf(c)>=0)throw new J("Cyclic dependency: "+JSON.stringify(c));if(!~i.indexOf(c))throw new J("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(a[u])return;a[u]=!0;let h=e.filter(function(f){return f[0]===c});if(u=h.length){let f=d.concat(c);do{let m=h[--u][1];l(m,i.indexOf(m),f)}while(u)}s[--r]=c}return s}}function PQ(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function IQ(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}var MO=6e4,LO=36e5;function RQ(n,e){var t;IQ(1,arguments);var i=PQ((t=e==null?void 0:e.additionalDigits)!==null&&t!==void 0?t:2);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var r=$Q(n),s;if(r.date){var a=BQ(r.date,i);s=FQ(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var o=s.getTime(),l=0,c;if(r.time&&(l=qQ(r.time),isNaN(l)))return new Date(NaN);if(r.timezone){if(c=UQ(r.timezone),isNaN(c))return new Date(NaN)}else{var u=new Date(o+l),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return new Date(o+l+c)}var im={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},OQ=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,MQ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,LQ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $Q(n){var e={},t=n.split(im.dateTimeDelimiter),i;if(t.length>2)return e;if(/:/.test(t[0])?i=t[0]:(e.date=t[0],i=t[1],im.timeZoneDelimiter.test(e.date)&&(e.date=n.split(im.timeZoneDelimiter)[0],i=n.substr(e.date.length,n.length))),i){var r=im.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function BQ(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=n.match(t);if(!i)return{year:NaN,restDateString:""};var r=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?r:s*100,restDateString:n.slice((i[1]||i[2]).length)}}function FQ(n,e){if(e===null)return new Date(NaN);var t=n.match(OQ);if(!t)return new Date(NaN);var i=!!t[4],r=eh(t[1]),s=eh(t[2])-1,a=eh(t[3]),o=eh(t[4]),l=eh(t[5])-1;if(i)return WQ(e,o,l)?jQ(e,o,l):new Date(NaN);var c=new Date(0);return!VQ(e,s,a)||!HQ(e,r)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(r,a)),c)}function eh(n){return n?parseInt(n):1}function qQ(n){var e=n.match(MQ);if(!e)return NaN;var t=Pv(e[1]),i=Pv(e[2]),r=Pv(e[3]);return GQ(t,i,r)?t*LO+i*MO+r*1e3:NaN}function Pv(n){return n&&parseFloat(n.replace(",","."))||0}function UQ(n){if(n==="Z")return 0;var e=n.match(LQ);if(!e)return 0;var t=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return QQ(i,r)?t*(i*LO+r*MO):NaN}function jQ(n,e,t){var i=new Date(0);i.setUTCFullYear(n,0,4);var r=i.getUTCDay()||7,s=(e-1)*7+t+1-r;return i.setUTCDate(i.getUTCDate()+s),i}var zQ=[31,null,31,30,31,30,31,31,30,31,30,31];function $O(n){return n%400===0||n%4===0&&n%100!==0}function VQ(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(zQ[e]||($O(n)?29:28))}function HQ(n,e){return e>=1&&e<=($O(n)?366:365)}function WQ(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function GQ(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function QQ(n,e){return e>=0&&e<=59}class Ye{static normalizeHydratedDate(e){return e&&(typeof e=="string"?new Date(e):e)}static mixedDateToDateString(e){return e instanceof Date?this.formatZerolessValue(e.getFullYear(),4)+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate()):e}static mixedDateToDate(e,t=!1,i=!0){let r=typeof e=="string"?RQ(e):e;return t&&(r=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())),i||r.setUTCMilliseconds(0),r}static mixedDateToTimeString(e,t=!1){return e instanceof Date?this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+(t?"":":"+this.formatZerolessValue(e.getSeconds())):e}static mixedTimeToDate(e){if(typeof e=="string"){const[t,i,r]=e.split(":"),s=new Date;return t&&s.setHours(parseInt(t)),i&&s.setMinutes(parseInt(i)),r&&s.setSeconds(parseInt(r)),s}return e}static mixedTimeToString(e,t=!1){return e=e instanceof Date?e.getHours()+":"+e.getMinutes()+(t?"":":"+e.getSeconds()):e,typeof e=="string"?e.split(":").map(i=>i.length===1?"0"+i:i).join(":"):e}static mixedDateToDatetimeString(e,t){if(typeof e=="string"&&(e=new Date(e)),e instanceof Date){let i=this.formatZerolessValue(e.getFullYear(),4)+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate())+" "+this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+":"+this.formatZerolessValue(e.getSeconds());t&&(i+=".".concat(this.formatMilliseconds(e.getMilliseconds()))),e=i}return e}static mixedDateToUtcDatetimeString(e){return typeof e=="string"&&(e=new Date(e)),e instanceof Date?this.formatZerolessValue(e.getUTCFullYear(),4)+"-"+this.formatZerolessValue(e.getUTCMonth()+1)+"-"+this.formatZerolessValue(e.getUTCDate())+" "+this.formatZerolessValue(e.getUTCHours())+":"+this.formatZerolessValue(e.getUTCMinutes())+":"+this.formatZerolessValue(e.getUTCSeconds())+"."+this.formatMilliseconds(e.getUTCMilliseconds()):e}static simpleArrayToString(e){return Array.isArray(e)?e.map(t=>String(t)).join(","):e}static stringToSimpleArray(e){return typeof e=="string"?e.length>0?e.split(","):[]:e}static simpleJsonToString(e){return JSON.stringify(e)}static stringToSimpleJson(e){return typeof e=="string"?JSON.parse(e):e}static simpleEnumToString(e){return""+e}static stringToSimpleEnum(e,t){return t.enum&&!isNaN(e)&&t.enum.indexOf(parseInt(e))>=0&&(e=parseInt(e)),e}static formatZerolessValue(e,t=2){const i="0".repeat(t);return String("".concat(i).concat(e)).slice(-t)}static formatMilliseconds(e){return e<10?"00"+e:e<100?"0"+e:String(e)}}class Fe{static chunk(e,t){return Array.from(Array(Math.ceil(e.length/t)),(i,r)=>e.slice(r*t,r*t+t))}static splitClassesAndStrings(e){return[e.filter(t=>typeof t!="string"),e.filter(t=>typeof t=="string")]}static groupBy(e,t){return e.reduce((i,r)=>{const s=t(r);let a=i.find(o=>o.id===s);return a||(a={id:s,items:[]},i.push(a)),a.items.push(r),i},[])}static uniq(e,t){return e.reduce((i,r)=>{let s=!1;if(typeof t=="function"){const a=t(r);s=!!i.find(o=>t(o)===a)}else typeof t=="string"?s=!!i.find(a=>a[t]===r[t]):s=i.indexOf(r)!==-1;return s||i.push(r),i},[])}static isPlainObject(e){return e==null?!1:!e.constructor||e.constructor===Object}static mergeArrayKey(e,t,i,r){if(r.has(i)){e[t]=r.get(i);return}if(!(i instanceof Promise)){if(!this.isPlainObject(i)&&!Array.isArray(i)){e[t]=i;return}e[t]||(e[t]=Array.isArray(i)?[]:{}),r.set(i,e[t]),this.merge(e[t],i,r),r.delete(i)}}static mergeObjectKey(e,t,i,r){if(r.has(i)){Object.assign(e,{[t]:r.get(i)});return}if(!(i instanceof Promise)){if(!this.isPlainObject(i)&&!Array.isArray(i)){Object.assign(e,{[t]:i});return}e[t]||Object.assign(e,{[t]:Array.isArray(i)?[]:{}}),r.set(i,e[t]),this.merge(e[t],i,r),r.delete(i)}}static merge(e,t,i=new Map){if(this.isPlainObject(e)&&this.isPlainObject(t))for(const r of Object.keys(t))r!=="__proto__"&&this.mergeObjectKey(e,r,t[r],i);if(Array.isArray(e)&&Array.isArray(t))for(let r=0;r<t.length;r++)this.mergeArrayKey(e,r,t[r],i)}static mergeDeep(e,...t){if(!t.length)return e;for(const i of t)Fe.merge(e,i);return e}static deepCompare(...e){let t,i,r,s;if(arguments.length<1)return!0;for(t=1,i=arguments.length;t<i;t++)if(r=[],s=[],!this.compare2Objects(r,s,arguments[0],arguments[t]))return!1;return!0}static deepValue(e,t){const i=t.split(".");for(let r=0,s=i.length;r<s;r++)e=e[i[r]];return e}static replaceEmptyObjectsWithBooleans(e){for(let t in e)e[t]&&typeof e[t]=="object"&&(Object.keys(e[t]).length===0?e[t]=!0:this.replaceEmptyObjectsWithBooleans(e[t]))}static propertyPathsToTruthyObject(e){let t={};for(let i of e){const r=i.split(".");if(!r.length)continue;(!t[r[0]]||t[r[0]]===!0)&&(t[r[0]]={});let s=t[r[0]];for(let[a,o]of r.entries())a!==0&&(s[o]?s=s[o]:a===r.length-1?(s[o]={},s=null):(s[o]={},s=s[o]))}return this.replaceEmptyObjectsWithBooleans(t),t}static compareIds(e,t){return e==null||t===void 0||t===null?!1:(typeof e.id=="string"&&typeof t.id=="string"||typeof e.id=="number"&&typeof t.id=="number")&&Object.keys(e).length===1&&Object.keys(t).length===1?e.id===t.id:Fe.deepCompare(e,t)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e==="true"||e==="1":typeof e=="number"?e>0:!1}static zipObject(e,t){return e.reduce((i,r,s)=>(i[r]=t[s],i),{})}static isArraysEqual(e,t){return e.length!==t.length?!1:e.every(i=>t.indexOf(i)!==-1)}static areMutuallyExclusive(...e){return!e.some(i=>{const r=e.filter(s=>s!==i);return i.some(s=>r.some(a=>a.includes(s)))})}static compare2Objects(e,t,i,r){let s;if(Number.isNaN(i)&&Number.isNaN(r)||i===r)return!0;if(i===null||r===null||i===void 0||r===void 0)return!1;if((typeof i.equals=="function"||typeof i.equals=="function")&&i.equals(r))return!0;if(typeof i=="function"&&typeof r=="function"||i instanceof Date&&r instanceof Date||i instanceof RegExp&&r instanceof RegExp||typeof i=="string"&&typeof r=="string"||typeof i=="number"&&typeof r=="number")return i.toString()===r.toString();if(!(typeof i=="object"&&typeof r=="object")||Object.prototype.isPrototypeOf.call(i,r)||Object.prototype.isPrototypeOf.call(r,i)||i.constructor!==r.constructor||i.prototype!==r.prototype||e.indexOf(i)>-1||t.indexOf(r)>-1)return!1;for(s in r){if(r.hasOwnProperty(s)!==i.hasOwnProperty(s))return!1;if(typeof r[s]!=typeof i[s])return!1}for(s in i){if(r.hasOwnProperty(s)!==i.hasOwnProperty(s))return!1;if(typeof r[s]!=typeof i[s])return!1;switch(typeof i[s]){case"object":case"function":if(e.push(i),t.push(r),!this.compare2Objects(e,t,i[s],r[s]))return!1;e.pop(),t.pop();break;default:if(i[s]!==r[s])return!1;break}}return!0}}class $n{static transformFrom(e,t){return Array.isArray(e)?e.slice().reverse().reduce((r,s)=>s.from(r),t):e.from(t)}static transformTo(e,t){return Array.isArray(e)?e.reduce((i,r)=>r.to(i),t):e.to(t)}}class KQ{compute(e){e.forEach(t=>{this.computeDiffColumns(t),this.computeDiffRelationalColumns(e,t)})}computeDiffColumns(e){e.entity&&e.metadata.columns.forEach(t=>{if(t.isVirtual||t.isDiscriminator)return;const i=e.changeMaps.find(s=>s.column===t);i&&e.changeMaps.splice(e.changeMaps.indexOf(i),1);const r=t.getEntityValue(e.entity);if(r!==void 0){if(e.databaseEntity){const s=t.type!=="json"&&t.type!=="jsonb";let a=t.getEntityValue(e.databaseEntity,s);if(t.relationMetadata){const l=t.relationMetadata.getEntityValue(e.entity);if(l!=null)return}let o=r;if(r!==null){switch(t.type){case"date":o=Ye.mixedDateToDateString(r);break;case"time":case"time with time zone":case"time without time zone":case"timetz":o=Ye.mixedDateToTimeString(r);break;case"datetime":case"datetime2":case Date:case"timestamp":case"timestamp without time zone":case"timestamp with time zone":case"timestamp with local time zone":case"timestamptz":o=Ye.mixedDateToUtcDatetimeString(r),a=Ye.mixedDateToUtcDatetimeString(a);break;case"json":case"jsonb":if(Fe.deepCompare(r,a))return;break;case"simple-array":o=Ye.simpleArrayToString(r),a=Ye.simpleArrayToString(a);break;case"simple-enum":o=Ye.simpleEnumToString(r),a=Ye.simpleEnumToString(a);break;case"simple-json":o=Ye.simpleJsonToString(r),a=Ye.simpleJsonToString(a);break}t.transformer&&(o=$n.transformTo(t.transformer,r))}if(Buffer.isBuffer(o)&&Buffer.isBuffer(a)){if(o.equals(a))return}else if(o===a)return}e.diffColumns.includes(t)||e.diffColumns.push(t),e.changeMaps.push({column:t,value:r})}})}computeDiffRelationalColumns(e,t){t.entity&&t.metadata.relationsWithJoinColumns.forEach(i=>{let r=i.getEntityValue(t.entity);if(r===void 0)return;if(t.databaseEntity){let o=r;o!==null&&ft.isObject(o)&&(o=i.getRelationIdMap(o));const l=i.getEntityValue(t.databaseEntity);if(Fe.compareIds(o,l))return;t.diffRelations.push(i)}const s=e.find(o=>o.mustBeInserted&&o.entity===r);s&&(r=s);const a=t.changeMaps.find(o=>o.relation===i);a?a.value=r:t.changeMaps.push({relation:i,value:r})})}}class Mx{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class sA extends J{constructor(){super("Nested sets do not support multiple root entities.")}}class Iv{constructor(e){this.queryRunner=e}async insert(e){const t=c=>this.queryRunner.connection.driver.escape(c),i=this.getTableName(e.metadata.tablePath),r=t(e.metadata.nestedSetLeftColumn.databaseName),s=t(e.metadata.nestedSetRightColumn.databaseName);let a=e.metadata.treeParentRelation.getEntityValue(e.entity);!a&&e.parentSubject&&e.parentSubject.entity&&(a=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity);const o=e.metadata.getEntityIdMap(a);let l;if(o&&(l=await this.queryRunner.manager.createQueryBuilder().select(e.metadata.targetName+"."+e.metadata.nestedSetRightColumn.propertyPath,"right").from(e.metadata.target,e.metadata.targetName).whereInIds(o).getRawOne().then(c=>{const u=c?c.right:void 0;return typeof u=="string"?parseInt(u):u})),l!==void 0)await this.queryRunner.query("UPDATE ".concat(i," SET ")+"".concat(r," = CASE WHEN ").concat(r," > ").concat(l," THEN ").concat(r," + 2 ELSE ").concat(r," END,")+"".concat(s," = ").concat(s," + 2 ")+"WHERE ".concat(s," >= ").concat(l)),Fe.mergeDeep(e.insertedValueSet,e.metadata.nestedSetLeftColumn.createValueMap(l),e.metadata.nestedSetRightColumn.createValueMap(l+1));else{if(!await this.isUniqueRootEntity(e,a))throw new sA;Fe.mergeDeep(e.insertedValueSet,e.metadata.nestedSetLeftColumn.createValueMap(1),e.metadata.nestedSetRightColumn.createValueMap(2))}}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let i=e.databaseEntity;if(!i&&t&&(i=e.metadata.treeChildrenRelation.getEntityValue(t).find(o=>Object.entries(e.identifier).every(([l,c])=>o[l]===c))),i===void 0||t===void 0)return;const r=e.metadata.treeParentRelation.getEntityValue(i),s=e.metadata.getEntityIdMap(r),a=e.metadata.getEntityIdMap(t);if(!Fe.compareIds(s,a)){if(t){const o=m=>this.queryRunner.connection.driver.escape(m),l=this.getTableName(e.metadata.tablePath),c=o(e.metadata.nestedSetLeftColumn.databaseName),u=o(e.metadata.nestedSetRightColumn.databaseName),d=e.metadata.getEntityIdMap(i);let h;d&&(h=(await this.getNestedSetIds(e.metadata,d))[0]);let f;if(a&&(f=(await this.getNestedSetIds(e.metadata,a))[0]),h!==void 0&&f!==void 0){const m=f.left>h.left,g=h.right-h.left+1;let _;m?_=f.left-h.right:_=f.right-h.left;const v="WHEN ".concat(c," >= ").concat(h.left," AND ")+"".concat(c," < ").concat(h.right," ")+"THEN ".concat(c," + ").concat(_," "),y="WHEN ".concat(u," > ").concat(h.left," AND ")+"".concat(u," <= ").concat(h.right," ")+"THEN ".concat(u," + ").concat(_," ");m?await this.queryRunner.query("UPDATE ".concat(l," ")+"SET ".concat(c," = CASE ")+"WHEN ".concat(c," > ").concat(h.right," AND ")+"".concat(c," <= ").concat(f.left," ")+"THEN ".concat(c," - ").concat(g," ")+v+"ELSE ".concat(c," ")+"END, "+"".concat(u," = CASE ")+"WHEN ".concat(u," > ").concat(h.right," AND ")+"".concat(u," < ").concat(f.left," ")+"THEN ".concat(u," - ").concat(g," ")+y+"ELSE ".concat(u," ")+"END"):await this.queryRunner.query("UPDATE ".concat(l," ")+"SET ".concat(c," = CASE ")+"WHEN ".concat(c," < ").concat(h.left," AND ")+"".concat(c," > ").concat(f.right," ")+"THEN ".concat(c," + ").concat(g," ")+v+"ELSE ".concat(c," ")+"END, "+"".concat(u," = CASE ")+"WHEN ".concat(u," < ").concat(h.left," AND ")+"".concat(u," >= ").concat(f.right," ")+"THEN ".concat(u," + ").concat(g," ")+y+"ELSE ".concat(u," ")+"END")}}else if(!await this.isUniqueRootEntity(e,t))throw new sA}}async remove(e){Array.isArray(e)||(e=[e]);const t=e[0].metadata,i=c=>this.queryRunner.connection.driver.escape(c),r=this.getTableName(t.tablePath),s=i(t.nestedSetLeftColumn.databaseName),a=i(t.nestedSetRightColumn.databaseName);let o=[];for(const c of e){const u=t.getEntityIdMap(c.entity);u&&o.push(u)}let l=await this.getNestedSetIds(t,o);for(const c of l){const u=c.right-c.left+1;await this.queryRunner.query("UPDATE ".concat(r," ")+"SET ".concat(s," = CASE ")+"WHEN ".concat(s," > ").concat(c.left," THEN ").concat(s," - ").concat(u," ")+"ELSE ".concat(s," ")+"END, "+"".concat(a," = CASE ")+"WHEN ".concat(a," > ").concat(c.right," THEN ").concat(a," - ").concat(u," ")+"ELSE ".concat(a," ")+"END")}}getNestedSetIds(e,t){const i={left:"".concat(e.targetName,".").concat(e.nestedSetLeftColumn.propertyPath),right:"".concat(e.targetName,".").concat(e.nestedSetRightColumn.propertyPath)},r=this.queryRunner.manager.createQueryBuilder();return Object.entries(i).forEach(([s,a])=>{r.addSelect(a,s)}),r.from(e.target,e.targetName).whereInIds(t).orderBy(i.right,"DESC").getRawMany().then(s=>{const a=[];for(const o of s){const l={};for(const c of Object.keys(i)){const u=o?o[c]:void 0;l[c]=typeof u=="string"?parseInt(u):u}a.push(l)}return a})}async isUniqueRootEntity(e,t){const i=c=>this.queryRunner.connection.driver.escape(c),r=this.getTableName(e.metadata.tablePath),s=[],a=e.metadata.treeParentRelation.joinColumns.map(c=>{const u=i(c.databaseName),d=c.getEntityValue(t);if(d==null)return"".concat(u," IS NULL");s.push(d);const h=this.queryRunner.connection.driver.createParameter("entity_"+c.databaseName,s.length-1);return"".concat(u," = ").concat(h)}).join(" AND "),o="count",l=await this.queryRunner.query("SELECT COUNT(1) AS ".concat(i(o)," FROM ").concat(r," WHERE ").concat(a),s,!0);return parseInt(l.records[0][o])===0}getTableName(e){return e.split(".").map(t=>t===""?t:this.queryRunner.connection.driver.escape(t)).join(".")}}class Rv{constructor(e){this.queryRunner=e}async insert(e){const t={};e.metadata.closureJunctionTable.ancestorColumns.forEach(r=>{t[r.databaseName]=e.identifier}),e.metadata.closureJunctionTable.descendantColumns.forEach(r=>{t[r.databaseName]=e.identifier}),await this.queryRunner.manager.createQueryBuilder().insert().into(e.metadata.closureJunctionTable.tablePath).values(t).updateEntity(!1).callListeners(!1).execute();let i=e.metadata.treeParentRelation.getEntityValue(e.entity);if(!i&&e.parentSubject&&e.parentSubject.entity&&(i=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity),i){const r=d=>this.queryRunner.connection.driver.escape(d),s=this.getTableName(e.metadata.closureJunctionTable.tablePath),a=[],o=e.metadata.closureJunctionTable.ancestorColumns.map(d=>r(d.databaseName)),l=e.metadata.closureJunctionTable.descendantColumns.map(d=>r(d.databaseName)),c=e.metadata.primaryColumns.map(d=>(a.push(d.getEntityValue(e.insertedValueSet?e.insertedValueSet:e.entity)),this.queryRunner.connection.driver.createParameter("child_entity_"+d.databaseName,a.length-1))),u=e.metadata.closureJunctionTable.descendantColumns.map(d=>{const h=r(d.databaseName),f=d.referencedColumn.getEntityValue(i);if(!f)throw new eA(e.metadata.name);a.push(f);const m=this.queryRunner.connection.driver.createParameter("parent_entity_"+d.referencedColumn.databaseName,a.length-1);return"".concat(h," = ").concat(m)});await this.queryRunner.query("INSERT INTO ".concat(s," (").concat([...o,...l].join(", "),") ")+"SELECT ".concat(o.join(", "),", ").concat(c.join(", ")," FROM ").concat(s," WHERE ").concat(u.join(" AND ")),a)}}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let i=e.databaseEntity;if(!i&&t&&(i=e.metadata.treeChildrenRelation.getEntityValue(t).find(f=>Object.entries(e.identifier).every(([m,g])=>f[m]===g))),i===void 0||t===void 0)return;const r=e.metadata.treeParentRelation.getEntityValue(i),s=e.metadata.getEntityIdMap(r),a=e.metadata.getEntityIdMap(t);if(Fe.compareIds(s,a))return;const o=f=>this.queryRunner.connection.driver.escape(f),l=e.metadata.closureJunctionTable,c=l.ancestorColumns.map(f=>o(f.databaseName)),u=l.descendantColumns.map(f=>o(f.databaseName)),d=(f,m)=>{const g="sub".concat(m),_=f.createQueryBuilder().select(u.join(", ")).from(l.tablePath,g);for(const v of l.ancestorColumns)_.andWhere("".concat(o(g),".").concat(o(v.databaseName)," = :value_").concat(v.referencedColumn.databaseName));return f.createQueryBuilder().select(u.join(", ")).from("(".concat(_.getQuery(),")"),m).setParameters(_.getParameters()).getQuery()},h={};for(const f of e.metadata.primaryColumns)h["value_".concat(f.databaseName)]=i[f.databaseName];if(await this.queryRunner.manager.createQueryBuilder().delete().from(l.tablePath).where(f=>"(".concat(u.join(", "),") IN (").concat(d(f,"descendant"),")")).andWhere(f=>"(".concat(c.join(", "),") NOT IN (").concat(d(f,"ancestor"),")")).setParameters(h).execute(),t){const f=[],m=this.getTableName(l.tablePath),g=o("supertree"),_=o("subtree"),v=[...c.map(N=>"".concat(g,".").concat(N)),...u.map(N=>"".concat(_,".").concat(N))],y=e.metadata.closureJunctionTable.ancestorColumns.map(N=>{const P=o(N.databaseName),F=N.referencedColumn.getEntityValue(i);f.push(F);const $=this.queryRunner.connection.driver.createParameter("entity_"+N.referencedColumn.databaseName,f.length-1);return"".concat(_,".").concat(P," = ").concat($)}),T=e.metadata.closureJunctionTable.descendantColumns.map(N=>{const P=o(N.databaseName),F=N.referencedColumn.getEntityValue(t);if(!F)throw new eA(e.metadata.name);f.push(F);const $=this.queryRunner.connection.driver.createParameter("parent_entity_"+N.referencedColumn.databaseName,f.length-1);return"".concat(g,".").concat(P," = ").concat($)});await this.queryRunner.query("INSERT INTO ".concat(m," (").concat([...c,...u].join(", "),") ")+"SELECT ".concat(v.join(", ")," ")+"FROM ".concat(m," AS ").concat(g,", ").concat(m," AS ").concat(_," ")+"WHERE ".concat([...y,...T].join(" AND ")),f)}}async remove(e){if(this.queryRunner.connection.driver.options.type!=="mssql")return;Array.isArray(e)||(e=[e]);const t=l=>this.queryRunner.connection.driver.escape(l),i=e.map(l=>l.identifier),r=e[0].metadata.closureJunctionTable,s=l=>l.map(c=>{const u=i.map(d=>d[c.referencedColumn.databaseName]);return"".concat(t(c.databaseName)," IN (").concat(u.join(", "),")")}).join(" AND "),a=s(r.ancestorColumns),o=s(r.descendantColumns);await this.queryRunner.manager.createQueryBuilder().delete().from(r.tablePath).where(a).orWhere(o).execute()}getTableName(e){return e.split(".").map(t=>t===""?t:this.queryRunner.connection.driver.escape(t)).join(".")}}class _s{constructor(e){this["@instanceof"]=Symbol.for("EntityMetadata"),this.childEntityMetadatas=[],this.inheritanceTree=[],this.tableType="regular",this.withoutRowid=!1,this.synchronize=!0,this.hasNonNullableRelations=!1,this.isJunction=!1,this.isAlwaysUsingConstructor=!0,this.isClosureJunction=!1,this.hasMultiplePrimaryKeys=!1,this.hasUUIDGeneratedColumns=!1,this.ownColumns=[],this.columns=[],this.ancestorColumns=[],this.descendantColumns=[],this.nonVirtualColumns=[],this.ownerColumns=[],this.inverseColumns=[],this.generatedColumns=[],this.primaryColumns=[],this.ownRelations=[],this.relations=[],this.eagerRelations=[],this.lazyRelations=[],this.oneToOneRelations=[],this.ownerOneToOneRelations=[],this.oneToManyRelations=[],this.manyToOneRelations=[],this.manyToManyRelations=[],this.ownerManyToManyRelations=[],this.relationsWithJoinColumns=[],this.relationIds=[],this.relationCounts=[],this.foreignKeys=[],this.embeddeds=[],this.allEmbeddeds=[],this.ownIndices=[],this.indices=[],this.uniques=[],this.ownUniques=[],this.checks=[],this.exclusions=[],this.ownListeners=[],this.listeners=[],this.afterLoadListeners=[],this.beforeInsertListeners=[],this.afterInsertListeners=[],this.beforeUpdateListeners=[],this.afterUpdateListeners=[],this.beforeRemoveListeners=[],this.beforeSoftRemoveListeners=[],this.beforeRecoverListeners=[],this.afterRemoveListeners=[],this.afterSoftRemoveListeners=[],this.afterRecoverListeners=[],this.connection=e.connection,this.inheritanceTree=e.inheritanceTree||[],this.inheritancePattern=e.inheritancePattern,this.treeType=e.tableTree?e.tableTree.type:void 0,this.treeOptions=e.tableTree?e.tableTree.options:void 0,this.parentClosureEntityMetadata=e.parentClosureEntityMetadata,this.tableMetadataArgs=e.args,this.target=this.tableMetadataArgs.target,this.tableType=this.tableMetadataArgs.type,this.expression=this.tableMetadataArgs.expression,this.withoutRowid=this.tableMetadataArgs.withoutRowid,this.dependsOn=this.tableMetadataArgs.dependsOn}create(e,t){const i=!!(t&&t.pojo===!0);let r;return typeof this.target=="function"&&!i?!(t!=null&&t.fromDeserializer)||this.isAlwaysUsingConstructor?r=new this.target:r=Object.create(this.target.prototype):r={},this.connection.options.typename&&(r[this.connection.options.typename]=this.targetName),this.lazyRelations.forEach(s=>this.connection.relationLoader.enableLazyLoad(s,r,e)),r}hasId(e){return e?this.primaryColumns.every(t=>{const i=t.getEntityValue(e);return i!=null&&i!==""}):!1}hasAllPrimaryKeys(e){return this.primaryColumns.every(t=>{const i=t.getEntityValue(e);return i!=null})}ensureEntityIdMap(e){if(ft.isObject(e))return e;if(this.hasMultiplePrimaryKeys)throw new WG(this,e);return this.primaryColumns[0].createValueMap(e)}getEntityIdMap(e){if(e)return _s.getValueMap(e,this.primaryColumns,{skipNulls:!0})}getEntityIdMixedMap(e){if(!e)return e;const t=this.getEntityIdMap(e);return this.hasMultiplePrimaryKeys?t:t&&this.primaryColumns[0].getEntityValue(t)}compareEntities(e,t){const i=this.getEntityIdMap(e);if(!i)return!1;const r=this.getEntityIdMap(t);return r?Fe.compareIds(i,r):!1}findColumnWithPropertyName(e){return this.columns.find(t=>t.propertyName===e)}findColumnWithDatabaseName(e){return this.columns.find(t=>t.databaseName===e)}hasColumnWithPropertyPath(e){return this.columns.some(i=>i.propertyPath===e)||this.hasRelationWithPropertyPath(e)}findColumnWithPropertyPath(e){const t=this.columns.find(r=>r.propertyPath===e);if(t)return t;const i=this.relations.find(r=>r.propertyPath===e);if(i&&i.joinColumns.length===1)return i.joinColumns[0]}findColumnWithPropertyPathStrict(e){return this.columns.find(t=>t.propertyPath===e)}findColumnsWithPropertyPath(e){const t=this.columns.find(r=>r.propertyPath===e);if(t)return[t];const i=this.findRelationWithPropertyPath(e);return i&&i.joinColumns?i.joinColumns:[]}hasRelationWithPropertyPath(e){return this.relations.some(t=>t.propertyPath===e)}findRelationWithPropertyPath(e){return this.relations.find(t=>t.propertyPath===e)}hasEmbeddedWithPropertyPath(e){return this.allEmbeddeds.some(t=>t.propertyPath===e)}findEmbeddedWithPropertyPath(e){return this.allEmbeddeds.find(t=>t.propertyPath===e)}mapPropertyPathsToColumns(e){return e.map(t=>{const i=this.findColumnWithPropertyPath(t);if(i==null)throw new Qs(t,this);return i})}extractRelationValuesFromEntity(e,t){const i=[];return t.forEach(r=>{const s=r.getEntityValue(e);Array.isArray(s)?s.forEach(a=>i.push([r,a,_s.getInverseEntityMetadata(a,r)])):s&&i.push([r,s,_s.getInverseEntityMetadata(s,r)])}),i}findInheritanceMetadata(e){if(this.inheritancePattern==="STI"&&this.childEntityMetadatas.length>0){let t;return this.discriminatorColumn&&(t=e[this.discriminatorColumn.propertyName]),this.childEntityMetadatas.find(i=>t===i.discriminatorValue||e.constructor===i.target)||this}return this}static getInverseEntityMetadata(e,t){return t.inverseEntityMetadata.findInheritanceMetadata(e)}static createPropertyPath(e,t,i=""){const r=[];return Object.keys(t).forEach(s=>{const a=i?i+"."+s:s;if(e.hasEmbeddedWithPropertyPath(a)){const o=this.createPropertyPath(e,t[s],a);r.push(...o)}else{const o=i?i+"."+s:s;r.push(o)}}),r}static difference(e,t){return e.filter(i=>!t.find(r=>Fe.compareIds(i,r)))}static getValueMap(e,t,i){return t.reduce((r,s)=>{const a=s.getEntityValueMap(e,i);if(!(r===void 0||a===null||a===void 0))return Fe.mergeDeep(r,a)},{})}build(){var e;const t=this.connection.namingStrategy,i=this.connection.options.entityPrefix,r=this.connection.options.entitySkipConstructor;this.engine=this.tableMetadataArgs.engine,this.database=this.tableMetadataArgs.type==="entity-child"&&this.parentEntityMetadata?this.parentEntityMetadata.database:this.tableMetadataArgs.database,this.tableMetadataArgs.schema?this.schema=this.tableMetadataArgs.schema:this.tableMetadataArgs.type==="entity-child"&&this.parentEntityMetadata?this.schema=this.parentEntityMetadata.schema:!((e=this.connection.options)===null||e===void 0)&&e.hasOwnProperty("schema")&&(this.schema=this.connection.options.schema),this.givenTableName=this.tableMetadataArgs.type==="entity-child"&&this.parentEntityMetadata?this.parentEntityMetadata.givenTableName:this.tableMetadataArgs.name,this.synchronize=this.tableMetadataArgs.synchronize!==!1,this.targetName=typeof this.tableMetadataArgs.target=="function"?this.tableMetadataArgs.target.name:this.tableMetadataArgs.target,this.tableMetadataArgs.type==="closure-junction"?this.tableNameWithoutPrefix=t.closureJunctionTableName(this.givenTableName):this.tableMetadataArgs.type==="entity-child"&&this.parentEntityMetadata?this.tableNameWithoutPrefix=t.tableName(this.parentEntityMetadata.targetName,this.parentEntityMetadata.givenTableName):(this.tableNameWithoutPrefix=t.tableName(this.targetName,this.givenTableName),this.tableMetadataArgs.type==="junction"&&this.connection.driver.maxAliasLength&&this.connection.driver.maxAliasLength>0&&this.tableNameWithoutPrefix.length>this.connection.driver.maxAliasLength&&(this.tableNameWithoutPrefix=kO(this.tableNameWithoutPrefix,{separator:"_",segmentLength:3}))),this.tableName=i?t.prefixTableName(i,this.tableNameWithoutPrefix):this.tableNameWithoutPrefix,this.target=this.target?this.target:this.tableName,this.name=this.targetName?this.targetName:this.tableName,this.expression=this.tableMetadataArgs.expression,this.withoutRowid=this.tableMetadataArgs.withoutRowid===!0,this.tablePath=this.connection.driver.buildTableName(this.tableName,this.schema,this.database),this.orderBy=typeof this.tableMetadataArgs.orderBy=="function"?this.tableMetadataArgs.orderBy(this.propertiesMap):this.tableMetadataArgs.orderBy,r!==void 0&&(this.isAlwaysUsingConstructor=!r),this.isJunction=this.tableMetadataArgs.type==="closure-junction"||this.tableMetadataArgs.type==="junction",this.isClosureJunction=this.tableMetadataArgs.type==="closure-junction"}registerColumn(e){this.ownColumns.indexOf(e)===-1&&(this.ownColumns.push(e),this.columns=this.embeddeds.reduce((t,i)=>t.concat(i.columnsFromTree),this.ownColumns),this.primaryColumns=this.columns.filter(t=>t.isPrimary),this.hasMultiplePrimaryKeys=this.primaryColumns.length>1,this.hasUUIDGeneratedColumns=this.columns.filter(t=>t.isGenerated||t.generationStrategy==="uuid").length>0,this.propertiesMap=this.createPropertiesMap(),this.childEntityMetadatas&&this.childEntityMetadatas.forEach(t=>t.registerColumn(e)))}createPropertiesMap(){const e={};return this.columns.forEach(t=>Fe.mergeDeep(e,t.createValueMap(t.propertyPath))),this.relations.forEach(t=>Fe.mergeDeep(e,t.createValueMap(t.propertyPath))),e}getInsertionReturningColumns(){return this.columns.filter(e=>e.default!==void 0||e.isGenerated||e.isCreateDate||e.isUpdateDate||e.isDeleteDate||e.isVersion)}}class Hg{constructor(e){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=e}}class aA{constructor(e){this.queryRunner=e}async insert(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity);const i=e.metadata.getEntityIdMap(t);let r="";i&&(r=await this.getEntityPath(e,i));const s=e.metadata.treeParentRelation.joinColumns.map(a=>a.referencedColumn.getEntityValue(e.insertedValueSet)).join("_");await this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set({[e.metadata.materializedPathColumn.propertyPath]:r+s+"."}).where(e.identifier).execute()}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let i=e.databaseEntity;!i&&t&&(i=e.metadata.treeChildrenRelation.getEntityValue(t).find(d=>Object.entries(e.identifier).every(([h,f])=>d[h]===f)));const r=e.metadata.treeParentRelation.getEntityValue(i),s=this.getEntityParentReferencedColumnMap(e,r),a=this.getEntityParentReferencedColumnMap(e,t);if(Fe.compareIds(s,a))return;let o="";a&&(o=await this.getEntityPath(e,a));let l="";s&&(l=await this.getEntityPath(e,s)||"");const c=e.metadata.treeParentRelation.joinColumns.map(d=>d.referencedColumn.getEntityValue(i)).join("_"),u=e.metadata.materializedPathColumn.propertyPath;await this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set({[u]:()=>"REPLACE(".concat(this.queryRunner.connection.driver.escape(u),", '").concat(l).concat(c,".', '").concat(o).concat(c,".')")}).where("".concat(u," LIKE :path"),{path:"".concat(l).concat(c,".%")}).execute()}getEntityParentReferencedColumnMap(e,t){if(t)return _s.getValueMap(t,e.metadata.treeParentRelation.joinColumns.map(i=>i.referencedColumn).filter(i=>i!=null),{skipNulls:!0})}getEntityPath(e,t){const i=e.metadata,r=(Array.isArray(t)?t:[t]).map(s=>i.ensureEntityIdMap(s));return this.queryRunner.manager.createQueryBuilder().select(e.metadata.targetName+"."+e.metadata.materializedPathColumn.propertyPath,"path").from(e.metadata.target,e.metadata.targetName).where(new Hg(s=>{for(const a of r)s.orWhere(new Hg(o=>o.where(a)))})).getRawOne().then(s=>s?s.path:"")}}class YQ{constructor(e,t,i){this.hasExecutableOperations=!1,this.insertSubjects=[],this.updateSubjects=[],this.removeSubjects=[],this.softRemoveSubjects=[],this.recoverSubjects=[],this.queryRunner=e,this.allSubjects=t,this.options=i,this.validate(),this.recompute()}async execute(){let e;(!this.options||this.options.listeners!==!1)&&(e=this.broadcastBeforeEventsForAll(),e.promises.length>0&&await Promise.all(e.promises)),e&&e.count>0&&(this.insertSubjects.forEach(t=>t.recompute()),this.updateSubjects.forEach(t=>t.recompute()),this.removeSubjects.forEach(t=>t.recompute()),this.softRemoveSubjects.forEach(t=>t.recompute()),this.recoverSubjects.forEach(t=>t.recompute()),this.recompute()),this.insertSubjects=new rA(this.insertSubjects).sort("insert"),await this.executeInsertOperations(),this.updateSubjects=this.allSubjects.filter(t=>t.mustBeUpdated),await this.executeUpdateOperations(),this.removeSubjects=new rA(this.removeSubjects).sort("delete"),await this.executeRemoveOperations(),this.softRemoveSubjects=this.allSubjects.filter(t=>t.mustBeSoftRemoved),await this.executeSoftRemoveOperations(),this.recoverSubjects=this.allSubjects.filter(t=>t.mustBeRecovered),await this.executeRecoverOperations(),await this.updateSpecialColumnsInPersistedEntities(),(!this.options||this.options.listeners!==!1)&&(e=this.broadcastAfterEventsForAll(),e.promises.length>0&&await Promise.all(e.promises))}validate(){this.allSubjects.forEach(e=>{if(e.mustBeUpdated&&e.mustBeRemoved)throw new uQ(e)})}recompute(){new KQ().compute(this.allSubjects),this.insertSubjects=this.allSubjects.filter(e=>e.mustBeInserted),this.updateSubjects=this.allSubjects.filter(e=>e.mustBeUpdated),this.removeSubjects=this.allSubjects.filter(e=>e.mustBeRemoved),this.softRemoveSubjects=this.allSubjects.filter(e=>e.mustBeSoftRemoved),this.recoverSubjects=this.allSubjects.filter(e=>e.mustBeRecovered),this.hasExecutableOperations=this.insertSubjects.length>0||this.updateSubjects.length>0||this.removeSubjects.length>0||this.softRemoveSubjects.length>0||this.recoverSubjects.length>0}broadcastBeforeEventsForAll(){const e=new Mx;return this.insertSubjects.length&&this.insertSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeInsertEvent(e,t.metadata,t.entity)),this.updateSubjects.length&&this.updateSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeUpdateEvent(e,t.metadata,t.entity,t.databaseEntity,t.diffColumns,t.diffRelations)),this.removeSubjects.length&&this.removeSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),this.softRemoveSubjects.length&&this.softRemoveSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeSoftRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),this.recoverSubjects.length&&this.recoverSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeRecoverEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),e}broadcastAfterEventsForAll(){const e=new Mx;return this.insertSubjects.length&&this.insertSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterInsertEvent(e,t.metadata,t.entity)),this.updateSubjects.length&&this.updateSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterUpdateEvent(e,t.metadata,t.entity,t.databaseEntity,t.diffColumns,t.diffRelations)),this.removeSubjects.length&&this.removeSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),this.softRemoveSubjects.length&&this.softRemoveSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterSoftRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),this.recoverSubjects.length&&this.recoverSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterRecoverEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),e}async executeInsertOperations(){const[e,t]=this.groupBulkSubjects(this.insertSubjects,"insert");for(const i of t){const r=e[i],s=[],a=[],o=[];if(this.queryRunner.connection.driver.options.type==="mongodb"?r.forEach(l=>{l.metadata.createDateColumn&&l.entity&&(l.entity[l.metadata.createDateColumn.databaseName]=new Date),l.metadata.updateDateColumn&&l.entity&&(l.entity[l.metadata.updateDateColumn.databaseName]=new Date),l.createValueSetAndPopChangeMap(),a.push(l),s.push(l.entity)}):this.queryRunner.connection.driver.options.type==="oracle"?r.forEach(l=>{o.push(l)}):r.forEach(l=>{l.changeMaps.length===0||l.metadata.treeType||this.queryRunner.connection.driver.options.type==="oracle"||this.queryRunner.connection.driver.options.type==="sap"?o.push(l):(a.push(l),s.push(l.createValueSetAndPopChangeMap()))}),se.isMongoEntityManager(this.queryRunner.manager)){const l=await this.queryRunner.manager.insert(r[0].metadata.target,s);r.forEach((c,u)=>{c.identifier=l.identifiers[u],c.generatedMap=l.generatedMaps[u],c.insertedValueSet=s[u]})}else{if(s.length>0){const l=await this.queryRunner.manager.createQueryBuilder().insert().into(r[0].metadata.target).values(s).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1).execute();a.forEach((c,u)=>{c.identifier=l.identifiers[u],c.generatedMap=l.generatedMaps[u],c.insertedValueSet=s[u]})}if(o.length>0)for(const l of o)l.insertedValueSet=l.createValueSetAndPopChangeMap(),l.metadata.treeType==="nested-set"&&await new Iv(this.queryRunner).insert(l),await this.queryRunner.manager.createQueryBuilder().insert().into(l.metadata.target).values(l.insertedValueSet).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1).execute().then(c=>{l.identifier=c.identifiers[0],l.generatedMap=c.generatedMaps[0]}),l.metadata.treeType==="closure-table"?await new Rv(this.queryRunner).insert(l):l.metadata.treeType==="materialized-path"&&await new aA(this.queryRunner).insert(l)}r.forEach(l=>{l.generatedMap&&l.metadata.columns.forEach(c=>{const u=c.getEntityValue(l.generatedMap);if(u!=null){const d=this.queryRunner.connection.driver.prepareHydratedValue(u,c);c.setEntityValue(l.generatedMap,d)}})})}}async executeUpdateOperations(){const e=async s=>{if(!s.identifier)throw new tm(s);if(se.isMongoEntityManager(this.queryRunner.manager)){const a=this.cloneMongoSubjectEntity(s);s.metadata.objectIdColumn&&s.metadata.objectIdColumn.propertyName&&delete a[s.metadata.objectIdColumn.propertyName],s.metadata.createDateColumn&&s.metadata.createDateColumn.propertyName&&delete a[s.metadata.createDateColumn.propertyName],s.metadata.updateDateColumn&&s.metadata.updateDateColumn.propertyName&&(a[s.metadata.updateDateColumn.propertyName]=new Date),await this.queryRunner.manager.update(s.metadata.target,s.identifier,a)}else{const a=s.createValueSetAndPopChangeMap();switch(s.metadata.treeType){case"nested-set":await new Iv(this.queryRunner).update(s);break;case"closure-table":await new Rv(this.queryRunner).update(s);break;case"materialized-path":await new aA(this.queryRunner).update(s);break}const o=this.queryRunner.manager.createQueryBuilder().update(s.metadata.target).set(a).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1);s.entity?o.whereEntity(s.identifier):o.where(s.identifier);let c=(await o.execute()).generatedMaps[0];c&&(s.metadata.columns.forEach(u=>{const d=u.getEntityValue(c);if(d!=null){const h=this.queryRunner.connection.driver.prepareHydratedValue(d,u);u.setEntityValue(c,h)}}),s.generatedMap||(s.generatedMap={}),Object.assign(s.generatedMap,c))}},t=[],i=[];for(const s of this.updateSubjects)s.metadata.treeType==="nested-set"?t.push(s):i.push(s);const r=new Promise(async(s,a)=>{for(const o of t)try{await e(o)}catch(l){a(l)}s()});await Promise.all([...i.map(e),r])}async executeRemoveOperations(){const[e,t]=this.groupBulkSubjects(this.removeSubjects,"delete");for(const i of t){const r=e[i],s=r.map(a=>{if(!a.identifier)throw new tm(a);return a.identifier});if(se.isMongoEntityManager(this.queryRunner.manager))await this.queryRunner.manager.delete(r[0].metadata.target,s);else{switch(r[0].metadata.treeType){case"nested-set":await new Iv(this.queryRunner).remove(r);break;case"closure-table":await new Rv(this.queryRunner).remove(r);break}await this.queryRunner.manager.createQueryBuilder().delete().from(r[0].metadata.target).where(s).callListeners(!1).execute()}}}cloneMongoSubjectEntity(e){const t={};if(e.entity)for(const i of e.metadata.columns)Fe.mergeDeep(t,i.getEntityValueMap(e.entity));return t}async executeSoftRemoveOperations(){await Promise.all(this.softRemoveSubjects.map(async e=>{if(!e.identifier)throw new tm(e);let t;if(se.isMongoEntityManager(this.queryRunner.manager)){const i=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete i[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete i[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(i[e.metadata.updateDateColumn.propertyName]=new Date),e.metadata.deleteDateColumn&&e.metadata.deleteDateColumn.propertyName&&(i[e.metadata.deleteDateColumn.propertyName]=new Date),t=await this.queryRunner.manager.update(e.metadata.target,e.identifier,i)}else{const i=this.queryRunner.manager.createQueryBuilder().softDelete().from(e.metadata.target).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1);e.entity?i.whereEntity(e.identifier):i.where(e.identifier),t=await i.execute()}e.generatedMap=t.generatedMaps[0],e.generatedMap&&e.metadata.columns.forEach(i=>{const r=i.getEntityValue(e.generatedMap);if(r!=null){const s=this.queryRunner.connection.driver.prepareHydratedValue(r,i);i.setEntityValue(e.generatedMap,s)}})}))}async executeRecoverOperations(){await Promise.all(this.recoverSubjects.map(async e=>{if(!e.identifier)throw new tm(e);let t;if(se.isMongoEntityManager(this.queryRunner.manager)){const i=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete i[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete i[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(i[e.metadata.updateDateColumn.propertyName]=new Date),e.metadata.deleteDateColumn&&e.metadata.deleteDateColumn.propertyName&&(i[e.metadata.deleteDateColumn.propertyName]=null),t=await this.queryRunner.manager.update(e.metadata.target,e.identifier,i)}else{const i=this.queryRunner.manager.createQueryBuilder().restore().from(e.metadata.target).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1);e.entity?i.whereEntity(e.identifier):i.where(e.identifier),t=await i.execute()}e.generatedMap=t.generatedMaps[0],e.generatedMap&&e.metadata.columns.forEach(i=>{const r=i.getEntityValue(e.generatedMap);if(r!=null){const s=this.queryRunner.connection.driver.prepareHydratedValue(r,i);i.setEntityValue(e.generatedMap,s)}})}))}updateSpecialColumnsInPersistedEntities(){this.insertSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.insertSubjects),this.updateSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.updateSubjects),this.softRemoveSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.softRemoveSubjects),this.recoverSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.recoverSubjects),this.removeSubjects.length&&this.removeSubjects.forEach(e=>{e.entity&&e.metadata.primaryColumns.forEach(t=>{t.setEntityValue(e.entity,void 0)})}),this.allSubjects.forEach(e=>{e.entity&&(e.metadata.relationIds.forEach(t=>{t.setValue(e.entity)}),se.isMongoEntityManager(this.queryRunner.manager)&&e.metadata.objectIdColumn&&e.metadata.objectIdColumn.databaseName&&e.metadata.objectIdColumn.databaseName!==e.metadata.objectIdColumn.propertyName&&delete e.entity[e.metadata.objectIdColumn.databaseName])})}updateSpecialColumnsInInsertedAndUpdatedEntities(e){e.forEach(t=>{t.entity&&(t.metadata.columns.forEach(i=>{t.metadata.childEntityMetadatas.length>0&&t.metadata.childEntityMetadatas.map(r=>r.target).indexOf(i.target)!==-1||i.isVirtual||(i.isNullable&&i.getEntityValue(t.entity)===void 0&&i.setEntityValue(t.entity,null),t.updatedRelationMaps.length>0&&t.updatedRelationMaps.forEach(r=>{r.relation.joinColumns.forEach(s=>{s.isVirtual!==!0&&s.setEntityValue(t.entity,ft.isObject(r.value)?s.referencedColumn.getEntityValue(r.value):r.value)})}))}),t.generatedMap&&this.queryRunner.manager.merge(t.metadata.target,t.entity,t.generatedMap))})}groupBulkSubjects(e,t){const i={},r=[],s=e.some(o=>o.metadata.getInsertionReturningColumns().length>0),a=t==="delete"||this.queryRunner.connection.driver.isReturningSqlSupported("insert")||s===!1;return e.forEach((o,l)=>{const c=a||o.metadata.isJunction?o.metadata.name:o.metadata.name+"_"+l;i[c]?i[c].push(o):(i[c]=[o],r.push(c))}),[i,r]}}class Ba{constructor(e){this["@instanceof"]=Symbol.for("Subject"),this.identifier=void 0,this.entityWithFulfilledIds=void 0,this.databaseEntityLoaded=!1,this.changeMaps=[],this.canBeInserted=!1,this.canBeUpdated=!1,this.mustBeRemoved=!1,this.canBeSoftRemoved=!1,this.canBeRecovered=!1,this.updatedRelationMaps=[],this.diffColumns=[],this.diffRelations=[],this.metadata=e.metadata,this.entity=e.entity,this.parentSubject=e.parentSubject,e.canBeInserted!==void 0&&(this.canBeInserted=e.canBeInserted),e.canBeUpdated!==void 0&&(this.canBeUpdated=e.canBeUpdated),e.mustBeRemoved!==void 0&&(this.mustBeRemoved=e.mustBeRemoved),e.canBeSoftRemoved!==void 0&&(this.canBeSoftRemoved=e.canBeSoftRemoved),e.canBeRecovered!==void 0&&(this.canBeRecovered=e.canBeRecovered),e.identifier!==void 0&&(this.identifier=e.identifier),e.changeMaps!==void 0&&this.changeMaps.push(...e.changeMaps),this.recompute()}get mustBeInserted(){return this.canBeInserted&&!this.databaseEntity}get mustBeUpdated(){return this.canBeUpdated&&this.identifier&&(this.databaseEntityLoaded===!1||this.databaseEntityLoaded&&this.databaseEntity)&&this.changeMaps.length>0}get mustBeSoftRemoved(){return this.canBeSoftRemoved&&this.identifier&&(this.databaseEntityLoaded===!1||this.databaseEntityLoaded&&this.databaseEntity)}get mustBeRecovered(){return this.canBeRecovered&&this.identifier&&(this.databaseEntityLoaded===!1||this.databaseEntityLoaded&&this.databaseEntity)}createValueSetAndPopChangeMap(){const e=[],t=this.changeMaps.reduce((i,r)=>{let s=r.value;se.isSubject(s)&&(s=s.insertedValueSet?s.insertedValueSet:s.entity);let a;if(this.metadata.isJunction&&r.column)a=r.column.createValueMap(r.column.referencedColumn.getEntityValue(s));else if(r.column)a=r.column.createValueMap(s);else if(r.relation)if(ft.isObject(s)&&!Buffer.isBuffer(s)){const o=r.relation.getRelationIdMap(s);if(o===void 0)return e.push(r),this.canBeUpdated=!0,i;a=r.relation.createValueMap(o),this.updatedRelationMaps.push({relation:r.relation,value:o})}else a=r.relation.createValueMap(s),this.updatedRelationMaps.push({relation:r.relation,value:s});return Fe.mergeDeep(i,a),i},{});return this.changeMaps=e,t}recompute(){this.entity?(this.entityWithFulfilledIds=Object.assign({},this.entity),this.parentSubject&&this.metadata.primaryColumns.forEach(e=>{if(e.relationMetadata&&e.relationMetadata.inverseEntityMetadata===this.parentSubject.metadata){const t=e.referencedColumn.getEntityValue(this.parentSubject.entity);e.setEntityValue(this.entityWithFulfilledIds,t)}}),this.identifier=this.metadata.getEntityIdMap(this.entityWithFulfilledIds)):this.databaseEntity&&(this.identifier=this.metadata.getEntityIdMap(this.databaseEntity))}}class XQ{constructor(e){this.subjects=e}build(){this.subjects.forEach(e=>{e.metadata.oneToManyRelations.forEach(t=>{t.persistenceEnabled!==!1&&this.buildForSubjectRelation(e,t)})})}buildForSubjectRelation(e,t){var i;let r=[];if(e.databaseEntity){const o=t.getEntityValue(e.databaseEntity);o&&(r=o.map(l=>t.inverseEntityMetadata.getEntityIdMap(l)))}let s=t.getEntityValue(e.entity);if(s===null&&(s=[]),s===void 0)return;const a=[];s.forEach(o=>{let l=t.inverseEntityMetadata.getEntityIdMap(o),c=this.subjects.find(d=>d.entity===o);if(c&&(l=c.identifier),!l){if(!c)return;c.changeMaps.push({relation:t.inverseRelation,value:e});return}r.find(d=>Fe.compareIds(l,d))||(c||(c=new Ba({metadata:t.inverseEntityMetadata,parentSubject:e,canBeUpdated:!0,identifier:l}),this.subjects.push(c)),c.changeMaps.push({relation:t.inverseRelation,value:e})),a.push(l)}),((i=t.inverseRelation)===null||i===void 0?void 0:i.orphanedRowAction)!=="disable"&&_s.difference(r,a).forEach(o=>{const l=new Ba({metadata:t.inverseEntityMetadata,parentSubject:e,identifier:o});!t.inverseRelation||t.inverseRelation.orphanedRowAction==="nullify"?(l.canBeUpdated=!0,l.changeMaps=[{relation:t.inverseRelation,value:null}]):t.inverseRelation.orphanedRowAction==="delete"?l.mustBeRemoved=!0:t.inverseRelation.orphanedRowAction==="soft-delete"&&(l.canBeSoftRemoved=!0),this.subjects.push(l)})}}class JQ{constructor(e){this.subjects=e}build(){this.subjects.forEach(e=>{e.metadata.oneToOneRelations.forEach(t=>{t.isOwning||t.persistenceEnabled===!1||this.buildForSubjectRelation(e,t)})})}buildForSubjectRelation(e,t){let i;e.databaseEntity&&(i=t.getEntityValue(e.databaseEntity));let r=t.getEntityValue(e.entity);if(r===void 0)return;if(r===null){if(i){const l=new Ba({metadata:t.inverseEntityMetadata,parentSubject:e,canBeUpdated:!0,identifier:i,changeMaps:[{relation:t.inverseRelation,value:null}]});this.subjects.push(l)}return}let s=t.inverseEntityMetadata.getEntityIdMap(r),a=this.subjects.find(l=>!!l.entity&&l.entity===r);if(a&&(s=a.identifier),!s){if(!a)return;a.changeMaps.push({relation:t.inverseRelation,value:e})}i&&Fe.compareIds(s,i)||(a||(a=new Ba({metadata:t.inverseEntityMetadata,canBeUpdated:!0,identifier:s}),this.subjects.push(a)),a.changeMaps.push({relation:t.inverseRelation,value:e}))}}class oA{constructor(e){this.subjects=e}build(){this.subjects.forEach(e=>{e.entity&&e.metadata.manyToManyRelations.forEach(t=>{t.persistenceEnabled!==!1&&this.buildForSubjectRelation(e,t)})})}buildForAllRemoval(e){e.databaseEntity&&e.metadata.manyToManyRelations.forEach(t=>{if(t.persistenceEnabled===!1)return;t.getEntityValue(e.databaseEntity).forEach(r=>{const s=new Ba({metadata:t.junctionEntityMetadata,parentSubject:e,mustBeRemoved:!0,identifier:this.buildJunctionIdentifier(e,t,r)});this.subjects.push(s)})})}buildForSubjectRelation(e,t){let i=[];e.databaseEntity&&(i=t.getEntityValue(e.databaseEntity));let r=t.getEntityValue(e.entity);if(r===null&&(r=[]),!Array.isArray(r))return;r.forEach(o=>{let l=t.inverseEntityMetadata.getEntityIdMap(o);const c=this.subjects.find(m=>m.entity===o);if(c&&(l=c.identifier),!l&&!c||i.find(m=>Fe.compareIds(m,l)))return;const d=t.isOwning?e:c||o,h=t.isOwning?c||o:e,f=new Ba({metadata:t.junctionEntityMetadata,parentSubject:e,canBeInserted:!0});this.subjects.push(f),t.junctionEntityMetadata.ownerColumns.forEach(m=>{f.changeMaps.push({column:m,value:d})}),t.junctionEntityMetadata.inverseColumns.forEach(m=>{f.changeMaps.push({column:m,value:h})})});const s=[];r.forEach(o=>{let l=t.inverseEntityMetadata.getEntityIdMap(o);const c=this.subjects.find(u=>u.entity===o);c&&(l=c.identifier),l!=null&&s.push(l)}),i.filter(o=>!s.find(l=>Fe.compareIds(l,o))).forEach(o=>{const l=new Ba({metadata:t.junctionEntityMetadata,parentSubject:e,mustBeRemoved:!0,identifier:this.buildJunctionIdentifier(e,t,o)});this.subjects.push(l)})}buildJunctionIdentifier(e,t,i){const r=t.isOwning?e.entity:i,s=t.isOwning?i:e.entity,a={};return t.junctionEntityMetadata.ownerColumns.forEach(o=>{Fe.mergeDeep(a,o.createValueMap(o.referencedColumn.getEntityValue(r)))}),t.junctionEntityMetadata.inverseColumns.forEach(o=>{Fe.mergeDeep(a,o.createValueMap(o.referencedColumn.getEntityValue(s)))}),a}}class ZQ{constructor(e,t){this.queryRunner=e,this.subjects=t}async load(e){const t=this.groupByEntityTargets().map(async i=>{const r=[],s=[];if(i.subjects.forEach(c=>{c.databaseEntity||!c.identifier||(r.push(c.identifier),s.push(c))}),!r.length)return;const a=[];e==="save"||e==="soft-remove"||e==="recover"?i.subjects.forEach(c=>{c.metadata.relations.forEach(u=>{u.getEntityValue(c.entityWithFulfilledIds)!==void 0&&a.indexOf(u.propertyPath)===-1&&a.push(u.propertyPath)})}):a.push(...i.subjects[0].metadata.manyToManyRelations.map(c=>c.propertyPath));const o={loadEagerRelations:!1,loadRelationIds:{relations:a,disableMixedMap:!0},withDeleted:!0};let l=[];this.queryRunner.connection.driver.options.type==="mongodb"?l=await this.queryRunner.manager.getRepository(i.target).findByIds(r,o):l=await this.queryRunner.manager.getRepository(i.target).createQueryBuilder().setFindOptions(o).whereInIds(r).getMany(),l.forEach(c=>{this.findByPersistEntityLike(i.target,c).forEach(d=>{d.databaseEntity=c,d.identifier||(d.identifier=d.metadata.hasAllPrimaryKeys(c)?d.metadata.getEntityIdMap(c):void 0)})});for(let c of s)c.databaseEntityLoaded=!0});await Promise.all(t)}findByPersistEntityLike(e,t){return this.subjects.filter(i=>i.entity?i.entity===t?!0:i.metadata.target===e&&i.metadata.compareEntities(i.entityWithFulfilledIds,t):!1)}groupByEntityTargets(){return this.subjects.reduce((e,t)=>{let i=e.find(r=>r.target===t.metadata.target);return i||(i={target:t.metadata.target,subjects:[]},e.push(i)),i.subjects.push(t),e},[])}}class eK{constructor(e){this.allSubjects=e}build(e,t){e.metadata.extractRelationValuesFromEntity(e.entity,e.metadata.relations).forEach(([i,r,s])=>{if(r==null||!i.isCascadeInsert&&!i.isCascadeUpdate&&!i.isCascadeSoftRemove&&!i.isCascadeRecover||!ft.isObject(r))return;const a=this.findByPersistEntityLike(s.target,r);if(a){a.canBeInserted===!1&&(a.canBeInserted=i.isCascadeInsert===!0&&t==="save"),a.canBeUpdated===!1&&(a.canBeUpdated=i.isCascadeUpdate===!0&&t==="save"),a.canBeSoftRemoved===!1&&(a.canBeSoftRemoved=i.isCascadeSoftRemove===!0&&t==="soft-remove"),a.canBeRecovered===!1&&(a.canBeRecovered=i.isCascadeRecover===!0&&t==="recover");return}const o=new Ba({metadata:s,parentSubject:e,entity:r,canBeInserted:i.isCascadeInsert===!0&&t==="save",canBeUpdated:i.isCascadeUpdate===!0&&t==="save",canBeSoftRemoved:i.isCascadeSoftRemove===!0&&t==="soft-remove",canBeRecovered:i.isCascadeRecover===!0&&t==="recover"});this.allSubjects.push(o),this.build(o,t)})}findByPersistEntityLike(e,t){return this.allSubjects.find(i=>i.entity?i.entity===t?!0:i.metadata.target===e&&i.metadata.compareEntities(i.entityWithFulfilledIds,t):!1)}}class rm{constructor(e,t,i,r,s,a){this.connection=e,this.queryRunner=t,this.mode=i,this.target=r,this.entity=s,this.options=a}async execute(){if(!this.entity||typeof this.entity!="object")return Promise.reject(new XG(this.mode,this.entity));await Promise.resolve();const e=this.queryRunner||this.connection.createQueryRunner();let t=e.data;this.options&&this.options.data&&(e.data=this.options.data);try{const i=Array.isArray(this.entity)?this.entity:[this.entity],r=this.options&&this.options.chunk&&this.options.chunk>0?Fe.chunk(i,this.options.chunk):[i],a=(await Promise.all(r.map(async l=>{const c=[];l.forEach(d=>{const h=this.target?this.target:d.constructor;if(h===Object)throw new GG(this.mode);let f=this.connection.getMetadata(h).findInheritanceMetadata(d);c.push(new Ba({metadata:f,entity:d,canBeInserted:this.mode==="save",canBeUpdated:this.mode==="save",mustBeRemoved:this.mode==="remove",canBeSoftRemoved:this.mode==="soft-remove",canBeRecovered:this.mode==="recover"}))});const u=new eK(c);return c.forEach(d=>{u.build(d,this.mode)}),await new ZQ(e,c).load(this.mode),this.mode==="save"||this.mode==="soft-remove"||this.mode==="recover"?(new XQ(c).build(),new JQ(c).build(),new oA(c).build()):c.forEach(d=>{d.mustBeRemoved&&new oA(c).buildForAllRemoval(d)}),new YQ(e,c,this.options)}))).filter(l=>l.hasExecutableOperations);if(a.length===0)return;let o=!1;try{e.isTransactionActive||this.connection.driver.transactionSupport!=="none"&&(!this.options||this.options.transaction!==!1)&&(o=!0,await e.startTransaction());for(const l of a)await l.execute();o===!0&&await e.commitTransaction()}catch(l){if(o)try{await e.rollbackTransaction()}catch(c){}throw l}}finally{e.data=t,this.queryRunner||await e.release()}}}class BO{constructor(e,t){this["@instanceof"]=Symbol.for("EntityManager"),this.repositories=new Map,this.treeRepositories=[],this.plainObjectToEntityTransformer=new CQ,this.connection=e,t&&(this.queryRunner=t,ft.assign(this.queryRunner,{manager:this}))}async transaction(e,t){const i=typeof e=="string"?e:void 0,r=typeof e=="function"?e:t;if(!r)throw new J("Transaction method requires callback in second parameter if isolation level is supplied.");if(this.queryRunner&&this.queryRunner.isReleased)throw new DO;const s=this.queryRunner||this.connection.createQueryRunner();try{await s.startTransaction(i);const a=await r(s.manager);return await s.commitTransaction(),a}catch(a){try{await s.rollbackTransaction()}catch(o){}throw a}finally{this.queryRunner||await s.release()}}async query(e,t){return this.connection.query(e,t,this.queryRunner)}createQueryBuilder(e,t,i){return t?this.connection.createQueryBuilder(e,t,i||this.queryRunner):this.connection.createQueryBuilder(e||i||this.queryRunner)}hasId(e,t){const i=arguments.length===2?e:e.constructor,r=arguments.length===2?t:e;return this.connection.getMetadata(i).hasId(r)}getId(e,t){const i=arguments.length===2?e:e.constructor,r=arguments.length===2?t:e;return this.connection.getMetadata(i).getEntityIdMixedMap(r)}create(e,t){const i=this.connection.getMetadata(e);if(!t)return i.create(this.queryRunner);if(Array.isArray(t))return t.map(s=>this.create(e,s));const r=i.create(this.queryRunner);return this.plainObjectToEntityTransformer.transform(r,t,i,!0),r}merge(e,t,...i){const r=this.connection.getMetadata(e);return i.forEach(s=>this.plainObjectToEntityTransformer.transform(t,s,r)),t}async preload(e,t){const i=this.connection.getMetadata(e),s=await new NQ(this.connection.manager).transform(t,i);if(s)return this.merge(e,s,t)}save(e,t,i){let r=arguments.length>1&&(typeof e=="function"||se.isEntitySchema(e)||typeof e=="string")?e:void 0;const s=r?t:e,a=r?i:t;return se.isEntitySchema(r)&&(r=r.options.name),Array.isArray(s)&&s.length===0?Promise.resolve(s):new rm(this.connection,this.queryRunner,"save",r,s,a).execute().then(()=>s)}remove(e,t,i){const r=arguments.length>1&&(typeof e=="function"||se.isEntitySchema(e)||typeof e=="string")?e:void 0,s=r?t:e,a=r?i:t;return Array.isArray(s)&&s.length===0?Promise.resolve(s):new rm(this.connection,this.queryRunner,"remove",r,s,a).execute().then(()=>s)}softRemove(e,t,i){let r=arguments.length>1&&(typeof e=="function"||se.isEntitySchema(e)||typeof e=="string")?e:void 0;const s=r?t:e,a=r?i:t;return se.isEntitySchema(r)&&(r=r.options.name),Array.isArray(s)&&s.length===0?Promise.resolve(s):new rm(this.connection,this.queryRunner,"soft-remove",r,s,a).execute().then(()=>s)}recover(e,t,i){let r=arguments.length>1&&(typeof e=="function"||se.isEntitySchema(e)||typeof e=="string")?e:void 0;const s=r?t:e,a=r?i:t;return se.isEntitySchema(r)&&(r=r.options.name),Array.isArray(s)&&s.length===0?Promise.resolve(s):new rm(this.connection,this.queryRunner,"recover",r,s,a).execute().then(()=>s)}async insert(e,t){return this.createQueryBuilder().insert().into(e).values(t).execute()}async upsert(e,t,i){const r=this.connection.getMetadata(e);let s;Array.isArray(i)?s={conflictPaths:i}:s=i;let a;Array.isArray(t)?a=t:a=[t];const o=r.mapPropertyPathsToColumns(Array.isArray(s.conflictPaths)?s.conflictPaths:Object.keys(s.conflictPaths)),l=r.columns.filter(c=>!o.includes(c)&&a.some(u=>typeof c.getEntityValue(u)<"u"));return this.createQueryBuilder().insert().into(e).values(a).orUpdate([...o,...l].map(c=>c.databaseName),o.map(c=>c.databaseName),{skipUpdateIfNoValuesChanged:s.skipUpdateIfNoValuesChanged,indexPredicate:s.indexPredicate,upsertType:s.upsertType||this.connection.driver.supportedUpsertTypes[0]}).execute()}update(e,t,i){return t==null||t===""||Array.isArray(t)&&t.length===0?Promise.reject(new J("Empty criteria(s) are not allowed for the update method.")):typeof t=="string"||typeof t=="number"||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().update(e).set(i).whereInIds(t).execute():this.createQueryBuilder().update(e).set(i).where(t).execute()}delete(e,t){return t==null||t===""||Array.isArray(t)&&t.length===0?Promise.reject(new J("Empty criteria(s) are not allowed for the delete method.")):typeof t=="string"||typeof t=="number"||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().delete().from(e).whereInIds(t).execute():this.createQueryBuilder().delete().from(e).where(t).execute()}softDelete(e,t){return t==null||t===""||Array.isArray(t)&&t.length===0?Promise.reject(new J("Empty criteria(s) are not allowed for the delete method.")):typeof t=="string"||typeof t=="number"||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().softDelete().from(e).whereInIds(t).execute():this.createQueryBuilder().softDelete().from(e).where(t).execute()}restore(e,t){return t==null||t===""||Array.isArray(t)&&t.length===0?Promise.reject(new J("Empty criteria(s) are not allowed for the delete method.")):typeof t=="string"||typeof t=="number"||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().restore().from(e).whereInIds(t).execute():this.createQueryBuilder().restore().from(e).where(t).execute()}exists(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,ui.extractFindManyOptionsAlias(t)||i.name).setFindOptions(t||{}).getExists()}count(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,ui.extractFindManyOptionsAlias(t)||i.name).setFindOptions(t||{}).getCount()}countBy(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,i.name).setFindOptions({where:t}).getCount()}sum(e,t,i){return this.callAggregateFun(e,"SUM",t,i)}average(e,t,i){return this.callAggregateFun(e,"AVG",t,i)}minimum(e,t,i){return this.callAggregateFun(e,"MIN",t,i)}maximum(e,t,i){return this.callAggregateFun(e,"MAX",t,i)}async callAggregateFun(e,t,i,r={}){const s=this.connection.getMetadata(e),a=await this.createQueryBuilder(e,s.name).setFindOptions({where:r}).select("".concat(t,"(").concat(this.connection.driver.escape(String(i)),")"),t).getRawOne();return a[t]===null?null:parseFloat(a[t])}async find(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,ui.extractFindManyOptionsAlias(t)||i.name).setFindOptions(t||{}).getMany()}async findBy(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,i.name).setFindOptions({where:t}).getMany()}findAndCount(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,ui.extractFindManyOptionsAlias(t)||i.name).setFindOptions(t||{}).getManyAndCount()}findAndCountBy(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,i.name).setFindOptions({where:t}).getManyAndCount()}async findByIds(e,t){if(!t.length)return Promise.resolve([]);const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,i.name).andWhereInIds(t).getMany()}async findOne(e,t){let r=this.connection.getMetadata(e).name;if(t&&t.join&&(r=t.join.alias),!t.where)throw new Error("You must provide selection conditions in order to find a single row.");return this.createQueryBuilder(e,r).setFindOptions({...t,take:1}).getOne()}async findOneBy(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,i.name).setFindOptions({where:t,take:1}).getOne()}async findOneById(e,t){const i=this.connection.getMetadata(e);return this.createQueryBuilder(e,i.name).setFindOptions({take:1}).whereInIds(i.ensureEntityIdMap(t)).getOne()}async findOneOrFail(e,t){return this.findOne(e,t).then(i=>i===null?Promise.reject(new Ox(e,t)):Promise.resolve(i))}async findOneByOrFail(e,t){return this.findOneBy(e,t).then(i=>i===null?Promise.reject(new Ox(e,t)):Promise.resolve(i))}async clear(e){const t=this.connection.getMetadata(e),i=this.queryRunner||this.connection.createQueryRunner();try{return await i.clearTable(t.tablePath)}finally{this.queryRunner||await i.release()}}async increment(e,t,i,r){const s=this.connection.getMetadata(e),a=s.findColumnWithPropertyPath(i);if(!a)throw new J("Column ".concat(i," was not found in ").concat(s.targetName," entity."));if(isNaN(Number(r)))throw new J('Value "'.concat(r,'" is not a number.'));const o=i.split(".").reduceRight((l,c)=>({[c]:l}),()=>this.connection.driver.escape(a.databaseName)+" + "+r);return this.createQueryBuilder(e,"entity").update(e).set(o).where(t).execute()}async decrement(e,t,i,r){const s=this.connection.getMetadata(e),a=s.findColumnWithPropertyPath(i);if(!a)throw new J("Column ".concat(i," was not found in ").concat(s.targetName," entity."));if(isNaN(Number(r)))throw new J('Value "'.concat(r,'" is not a number.'));const o=i.split(".").reduceRight((l,c)=>({[c]:l}),()=>this.connection.driver.escape(a.databaseName)+" - "+r);return this.createQueryBuilder(e,"entity").update(e).set(o).where(t).execute()}getRepository(e){const t=this.repositories.get(e);if(t)return t;if(this.connection.driver.options.type==="mongodb"){const i=new bQ(e,this,this.queryRunner);return this.repositories.set(e,i),i}else{const i=new OO(e,this,this.queryRunner);return this.repositories.set(e,i),i}}getTreeRepository(e){if(this.connection.driver.treeSupport===!1)throw new QG(this.connection.driver);const t=this.treeRepositories.find(r=>r.target===e);if(t)return t;const i=new _Q(e,this,this.queryRunner);return this.treeRepositories.push(i),i}getMongoRepository(e){return this.connection.getMongoRepository(e)}withRepository(e){const t=e.constructor,{target:i,manager:r,queryRunner:s,...a}=e;return Object.assign(new t(e.target,this),{...a})}getCustomRepository(e){const t=ys().entityRepositories.find(s=>s.target===(typeof e=="function"?e:e.constructor));if(!t)throw new NO(e);const i=t.entity?this.connection.getMetadata(t.entity):void 0,r=new t.target(this,i);if(r instanceof DQ)r.manager||(r.manager=this);else{if(!i)throw new ZG(e);r.manager=this,r.metadata=i}return r}async release(){if(!this.queryRunner)throw new cQ;return this.queryRunner.release()}}class tK extends BO{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SqljsEntityManager"),this.driver=e.driver}async loadDatabase(e){await this.driver.load(e)}async saveDatabase(e){await this.driver.save(e)}exportDatabase(){return this.driver.export()}}class nK{create(e,t){return e.driver.options.type==="mongodb"?new yQ(e):e.driver.options.type==="sqljs"?new tK(e,t):new BO(e,t)}}class Ga{constructor(e){this["@instanceof"]=Symbol.for("View"),this.indices=[],e&&(this.database=e.database,this.schema=e.schema,this.name=e.name,this.expression=e.expression,this.materialized=!!e.materialized)}clone(){return new Ga({database:this.database,schema:this.schema,name:this.name,expression:this.expression,materialized:this.materialized})}addIndex(e){this.indices.push(e)}removeIndex(e){const t=this.indices.find(i=>i.name===e.name);t&&this.indices.splice(this.indices.indexOf(t),1)}static create(e,t){const i={database:e.database,schema:e.schema,name:t.buildTableName(e.tableName,e.schema,e.database),expression:e.expression,materialized:e.tableMetadataArgs.materialized};return new Ga(i)}}class lA{static viewMetadataCmp(e,t){return!e||!t?0:e.dependsOn&&(e.dependsOn.has(t.target)||e.dependsOn.has(t.name))?1:t.dependsOn&&(t.dependsOn.has(e.target)||t.dependsOn.has(e.name))?-1:0}}class A0{constructor(e){this.connection=e,this["@instanceof"]=Symbol.for("RdbmsSchemaBuilder")}async build(){this.queryRunner=this.connection.createQueryRunner(),this.currentDatabase=this.connection.driver.database,this.currentSchema=this.connection.driver.schema;const e=this.connection.driver.options.type!=="cockroachdb"&&this.connection.driver.options.type!=="spanner"&&this.connection.options.migrationsTransactionMode!=="none";await this.queryRunner.beforeMigration(),e&&await this.queryRunner.startTransaction();try{await this.createMetadataTableIfNecessary(this.queryRunner);const t=this.entityToSyncMetadatas.map(r=>this.getTablePath(r)),i=this.viewEntityToSyncMetadatas.map(r=>this.getTablePath(r));await this.queryRunner.getTables(t),await this.queryRunner.getViews(i),await this.executeSchemaSyncOperationsInProperOrder(),this.connection.queryResultCache&&await this.connection.queryResultCache.synchronize(this.queryRunner),e&&await this.queryRunner.commitTransaction()}catch(t){try{e&&await this.queryRunner.rollbackTransaction()}catch(i){}throw t}finally{await this.queryRunner.afterMigration(),await this.queryRunner.release()}}async createMetadataTableIfNecessary(e){(this.viewEntityToSyncMetadatas.length>0||this.hasGeneratedColumns())&&await this.createTypeormMetadataTable(e)}async log(){this.queryRunner=this.connection.createQueryRunner();try{const e=this.entityToSyncMetadatas.map(i=>this.getTablePath(i)),t=this.viewEntityToSyncMetadatas.map(i=>this.getTablePath(i));return await this.queryRunner.getTables(e),await this.queryRunner.getViews(t),this.queryRunner.enableSqlMemory(),await this.executeSchemaSyncOperationsInProperOrder(),this.connection.queryResultCache&&await this.connection.queryResultCache.synchronize(this.queryRunner),this.queryRunner.getMemorySql()}finally{this.queryRunner.disableSqlMemory(),await this.queryRunner.release()}}get entityToSyncMetadatas(){return this.connection.entityMetadatas.filter(e=>e.synchronize&&e.tableType!=="entity-child"&&e.tableType!=="view")}get viewEntityToSyncMetadatas(){return this.connection.entityMetadatas.filter(e=>e.tableType==="view"&&e.synchronize).sort(lA.viewMetadataCmp)}hasGeneratedColumns(){return this.connection.entityMetadatas.some(e=>e.columns.some(t=>t.generatedType))}async executeSchemaSyncOperationsInProperOrder(){await this.dropOldViews(),await this.dropOldForeignKeys(),await this.dropOldIndices(),await this.dropOldChecks(),await this.dropOldExclusions(),await this.dropCompositeUniqueConstraints(),await this.renameColumns(),await this.createNewTables(),await this.dropRemovedColumns(),await this.addNewColumns(),await this.updatePrimaryKeys(),await this.updateExistColumns(),await this.createNewIndices(),await this.createNewChecks(),await this.createNewExclusions(),await this.createCompositeUniqueConstraints(),await this.createForeignKeys(),await this.createViews(),await this.createNewViewIndices()}getTablePath(e){const t=this.connection.driver.parseTableName(e);return this.connection.driver.buildTableName(t.tableName,t.schema||this.currentSchema,t.database||this.currentDatabase)}async dropOldForeignKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=t.foreignKeys.filter(r=>{const s=e.foreignKeys.find(a=>r.name===a.name&&this.getTablePath(r)===this.getTablePath(a.referencedEntityMetadata));return!s||s.onDelete&&s.onDelete!==r.onDelete||s.onUpdate&&s.onUpdate!==r.onUpdate});i.length!==0&&(this.connection.logger.logSchemaBuild("dropping old foreign keys of ".concat(t.name,": ").concat(i.map(r=>r.name).join(", "))),await this.queryRunner.dropForeignKeys(t,i))}}async renameTables(){}async renameColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(a=>this.getTablePath(a)===this.getTablePath(e));if(!t||e.columns.length!==t.columns.length)continue;const i=e.columns.filter(a=>!a.isVirtualProperty).filter(a=>!t.columns.find(o=>o.name===a.databaseName&&o.type===this.connection.driver.normalizeType(a)&&o.isNullable===a.isNullable&&o.isUnique===this.connection.driver.normalizeIsUnique(a)));if(i.length===0||i.length>1)continue;const r=t.columns.filter(a=>!e.columns.find(o=>!o.isVirtualProperty&&o.databaseName===a.name&&this.connection.driver.normalizeType(o)===a.type&&o.isNullable===a.isNullable&&this.connection.driver.normalizeIsUnique(o)===a.isUnique));if(r.length===0||r.length>1)continue;const s=r[0].clone();s.name=i[0].databaseName,this.connection.logger.logSchemaBuild('renaming column "'.concat(r[0].name,'" in "').concat(t.name,'" to "').concat(s.name,'"')),await this.queryRunner.renameColumn(t,r[0],s)}}async dropOldIndices(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=t.indices.filter(r=>{const s=e.indices.find(a=>a.name===r.name);return s?s.synchronize===!1?!1:s.isUnique!==r.isUnique||s.isSpatial!==r.isSpatial||this.connection.driver.isFullTextColumnTypeSupported()&&s.isFulltext!==r.isFulltext||s.columns.length!==r.columnNames.length?!0:!s.columns.every(a=>r.columnNames.indexOf(a.databaseName)!==-1):!0}).map(async r=>{this.connection.logger.logSchemaBuild('dropping an index: "'.concat(r.name,'" from table ').concat(t.name)),await this.queryRunner.dropIndex(t,r)});await Promise.all(i)}if(this.connection.options.type==="postgres"){const e=this.queryRunner;for(const t of this.viewEntityToSyncMetadatas){const i=this.queryRunner.loadedViews.find(s=>this.getTablePath(s)===this.getTablePath(t));if(!i)continue;const r=i.indices.filter(s=>{const a=t.indices.find(o=>o.name===s.name);return a?a.synchronize===!1?!1:a.isUnique!==s.isUnique||a.isSpatial!==s.isSpatial||this.connection.driver.isFullTextColumnTypeSupported()&&a.isFulltext!==s.isFulltext||a.columns.length!==s.columnNames.length?!0:!a.columns.every(o=>s.columnNames.indexOf(o.databaseName)!==-1):!0}).map(async s=>{this.connection.logger.logSchemaBuild('dropping an index: "'.concat(s.name,'" from view ').concat(i.name)),await e.dropViewIndex(i,s)});await Promise.all(r)}}}async dropOldChecks(){if(!(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"))for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=t.checks.filter(r=>!e.checks.find(s=>s.name===r.name));i.length!==0&&(this.connection.logger.logSchemaBuild("dropping old check constraint: ".concat(i.map(r=>'"'.concat(r.name,'"')).join(", "),' from table "').concat(t.name,'"')),await this.queryRunner.dropCheckConstraints(t,i))}}async dropCompositeUniqueConstraints(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=t.uniques.filter(r=>r.columnNames.length>1&&!e.uniques.find(s=>s.name===r.name));i.length!==0&&(this.connection.logger.logSchemaBuild("dropping old unique constraint: ".concat(i.map(r=>'"'.concat(r.name,'"')).join(", "),' from table "').concat(t.name,'"')),await this.queryRunner.dropUniqueConstraints(t,i))}}async dropOldExclusions(){if(this.connection.driver.options.type==="postgres")for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=t.exclusions.filter(r=>!e.exclusions.find(s=>s.name===r.name));i.length!==0&&(this.connection.logger.logSchemaBuild("dropping old exclusion constraint: ".concat(i.map(r=>'"'.concat(r.name,'"')).join(", "),' from table "').concat(t.name,'"')),await this.queryRunner.dropExclusionConstraints(t,i))}}async createNewTables(){for(const e of this.entityToSyncMetadatas){if(this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e)))continue;this.connection.logger.logSchemaBuild("creating a new table: ".concat(this.getTablePath(e)));const i=nn.create(e,this.connection.driver);await this.queryRunner.createTable(i,!1,!1),this.queryRunner.loadedTables.push(i)}}async createViews(){for(const e of this.viewEntityToSyncMetadatas){if(this.queryRunner.loadedViews.find(r=>{const s=typeof r.expression=="string"?r.expression.trim():r.expression(this.connection).getQuery(),a=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.getTablePath(r)===this.getTablePath(e)&&s===a}))continue;this.connection.logger.logSchemaBuild("creating a new view: ".concat(this.getTablePath(e)));const i=Ga.create(e,this.connection.driver);await this.queryRunner.createView(i,!0),this.queryRunner.loadedViews.push(i)}}async dropOldViews(){const e=[],t=this.viewEntityToSyncMetadatas,i=new Map;for(const a of this.queryRunner.loadedViews){const o=t.find(l=>this.getTablePath(a)===this.getTablePath(l));o&&i.set(a,o)}for(const a of this.queryRunner.loadedViews){const o=i.get(a);if(!o)continue;const l=typeof a.expression=="string"?a.expression.trim():a.expression(this.connection).getQuery(),c=typeof o.expression=="string"?o.expression.trim():o.expression(this.connection).getQuery();l!==c&&(this.connection.logger.logSchemaBuild("dropping an old view: ".concat(a.name)),e.push(a))}const r=a=>{const o=i.get(a);let l=[a];if(!o)return l;for(const[c,u]of i.entries())c!==a&&u.dependsOn&&(u.dependsOn.has(o.target)||u.dependsOn.has(o.name))&&(l=l.concat(r(c)));return l},s=new Set(e.map(a=>r(a)).reduce((a,o)=>a.concat(o),[]).sort((a,o)=>lA.viewMetadataCmp(i.get(a),i.get(o))).reverse());for(const a of s)await this.queryRunner.dropView(a);this.queryRunner.loadedViews=this.queryRunner.loadedViews.filter(a=>!s.has(a))}async dropRemovedColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=t.columns.filter(r=>!e.columns.find(s=>s.isVirtualProperty||s.databaseName===r.name));i.length!==0&&(this.connection.logger.logSchemaBuild("columns dropped in ".concat(t.name,": ")+i.map(r=>r.name).join(", ")),await this.queryRunner.dropColumns(t,i))}}async addNewColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(a=>this.getTablePath(a)===this.getTablePath(e));if(!t)continue;const i=e.columns.filter(a=>!a.isVirtualProperty&&!t.columns.find(o=>o.name===a.databaseName));if(i.length===0)continue;const s=this.metadataColumnsToTableColumnOptions(i).map(a=>new Wi(a));s.length!==0&&(this.connection.logger.logSchemaBuild("new columns added: "+i.map(a=>a.databaseName).join(", ")),await this.queryRunner.addColumns(t,s))}}async updatePrimaryKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===this.getTablePath(e));if(!t)continue;const i=e.columns.filter(s=>s.isPrimary);if(t.columns.filter(s=>s.isPrimary).length!==i.length&&i.length>1){const s=i.map(a=>new Wi(qm.createTableColumnOptions(a,this.connection.driver)));await this.queryRunner.updatePrimaryKeys(t,s)}}}async updateExistColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===this.getTablePath(e));if(!t)continue;const i=this.connection.driver.findChangedColumns(t.columns,e.columns);if(i.length===0)continue;for(const s of i)await this.dropColumnReferencedForeignKeys(this.getTablePath(e),s.databaseName);for(const s of i)await this.dropColumnCompositeIndices(this.getTablePath(e),s.databaseName);if(!(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="spanner"))for(const s of i)await this.dropColumnCompositeUniques(this.getTablePath(e),s.databaseName);const r=i.map(s=>{const a=t.columns.find(c=>c.name===s.databaseName),o=qm.createTableColumnOptions(s,this.connection.driver),l=new Wi(o);return{oldColumn:a,newColumn:l}});r.length!==0&&(this.connection.logger.logSchemaBuild('columns changed in "'.concat(t.name,'". updating: ')+i.map(s=>s.databaseName).join(", ")),await this.queryRunner.changeColumns(t,r))}}async createNewIndices(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=e.indices.filter(r=>!t.indices.find(s=>s.name===r.name)&&r.synchronize===!0).map(r=>yn.create(r));i.length!==0&&(this.connection.logger.logSchemaBuild("adding new indices ".concat(i.map(r=>'"'.concat(r.name,'"')).join(", "),' in table "').concat(t.name,'"')),await this.queryRunner.createIndices(t,i))}}async createNewViewIndices(){if(this.connection.options.type!=="postgres"||!Oe.isPostgresFamily(this.connection.driver))return;const e=this.queryRunner;for(const t of this.viewEntityToSyncMetadatas){const i=this.queryRunner.loadedViews.find(s=>{const a=typeof s.expression=="string"?s.expression.trim():s.expression(this.connection).getQuery(),o=typeof t.expression=="string"?t.expression.trim():t.expression(this.connection).getQuery();return this.getTablePath(s)===this.getTablePath(t)&&a===o});if(!i||!i.materialized)continue;const r=t.indices.filter(s=>!i.indices.find(a=>a.name===s.name)&&s.synchronize===!0).map(s=>yn.create(s));r.length!==0&&(this.connection.logger.logSchemaBuild("adding new indices ".concat(r.map(s=>'"'.concat(s.name,'"')).join(", "),' in view "').concat(i.name,'"')),await e.createViewIndices(i,r))}}async createNewChecks(){if(!(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"))for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=e.checks.filter(r=>!t.checks.find(s=>s.name===r.name)).map(r=>Ss.create(r));i.length!==0&&(this.connection.logger.logSchemaBuild("adding new check constraints: ".concat(i.map(r=>'"'.concat(r.name,'"')).join(", "),' in table "').concat(t.name,'"')),await this.queryRunner.createCheckConstraints(t,i))}}async createCompositeUniqueConstraints(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=e.uniques.filter(r=>r.columns.length>1&&!t.uniques.find(s=>s.name===r.name)).map(r=>hi.create(r));i.length!==0&&(this.connection.logger.logSchemaBuild("adding new unique constraints: ".concat(i.map(r=>'"'.concat(r.name,'"')).join(", "),' in table "').concat(t.name,'"')),await this.queryRunner.createUniqueConstraints(t,i))}}async createNewExclusions(){if(this.connection.driver.options.type==="postgres")for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const i=e.exclusions.filter(r=>!t.exclusions.find(s=>s.name===r.name)).map(r=>Zl.create(r));i.length!==0&&(this.connection.logger.logSchemaBuild("adding new exclusion constraints: ".concat(i.map(r=>'"'.concat(r.name,'"')).join(", "),' in table "').concat(t.name,'"')),await this.queryRunner.createExclusionConstraints(t,i))}}async createForeignKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===this.getTablePath(e));if(!t)continue;const i=e.foreignKeys.filter(s=>!t.foreignKeys.find(a=>a.name===s.name&&this.getTablePath(a)===this.getTablePath(s.referencedEntityMetadata)));if(i.length===0)continue;const r=i.map(s=>zr.create(s,this.connection.driver));this.connection.logger.logSchemaBuild("creating a foreign keys: ".concat(i.map(s=>s.name).join(", "),' on table "').concat(t.name,'"')),await this.queryRunner.createForeignKeys(t,r)}}async dropColumnReferencedForeignKeys(e,t){const i=this.queryRunner.loadedTables.find(a=>this.getTablePath(a)===e);if(!i)return;const r=[],s=i.foreignKeys.find(a=>a.columnNames.indexOf(t)!==-1);if(s){const a=i.clone();a.foreignKeys=[s],r.push(a),i.removeForeignKey(s)}for(const a of this.queryRunner.loadedTables){const o=a.foreignKeys.filter(l=>this.getTablePath(l)===e&&l.referencedColumnNames.indexOf(t)!==-1);if(o.length>0){const l=a.clone();l.foreignKeys=o,r.push(l),o.forEach(c=>a.removeForeignKey(c))}}if(r.length>0)for(const a of r)this.connection.logger.logSchemaBuild("dropping related foreign keys of ".concat(a.name,": ").concat(a.foreignKeys.map(o=>o.name).join(", "))),await this.queryRunner.dropForeignKeys(a,a.foreignKeys)}async dropColumnCompositeIndices(e,t){const i=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===e);if(!i)return;const r=i.indices.filter(s=>s.columnNames.length>1&&s.columnNames.indexOf(t)!==-1);r.length!==0&&(this.connection.logger.logSchemaBuild('dropping related indices of "'.concat(e,'"."').concat(t,'": ').concat(r.map(s=>s.name).join(", "))),await this.queryRunner.dropIndices(i,r))}async dropColumnCompositeUniques(e,t){const i=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===e);if(!i)return;const r=i.uniques.filter(s=>s.columnNames.length>1&&s.columnNames.indexOf(t)!==-1);r.length!==0&&(this.connection.logger.logSchemaBuild('dropping related unique constraints of "'.concat(e,'"."').concat(t,'": ').concat(r.map(s=>s.name).join(", "))),await this.queryRunner.dropUniqueConstraints(i,r))}metadataColumnsToTableColumnOptions(e){return e.map(t=>qm.createTableColumnOptions(t,this.connection.driver))}async createTypeormMetadataTable(e){const t=this.currentSchema,i=this.currentDatabase,r=this.connection.driver.buildTableName(this.connection.metadataTableName,t,i),s=this.connection.driver.options.type==="spanner";await e.createTable(new nn({database:i,schema:t,name:r,columns:[{name:"type",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataType}),isNullable:!1,isPrimary:s},{name:"database",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataDatabase}),isNullable:!0,isPrimary:s},{name:"schema",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataSchema}),isNullable:!0,isPrimary:s},{name:"table",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataTable}),isNullable:!0,isPrimary:s},{name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataName}),isNullable:!0,isPrimary:s},{name:"value",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataValue}),isNullable:!0,isPrimary:s}]}),!0)}}class Xf{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["int","integer","tinyint","smallint","mediumint","bigint","unsigned big int","int2","int8","integer","character","varchar","varying character","nchar","native character","nvarchar","text","clob","text","blob","real","double","double precision","float","real","numeric","decimal","boolean","date","time","datetime","json"],this.supportedUpsertTypes=["on-conflict-do-update"],this.withLengthColumnTypes=["character","varchar","varying character","nchar","native character","nvarchar","text","blob","clob"],this.spatialTypes=[],this.withPrecisionColumnTypes=["real","double","double precision","float","real","numeric","decimal","date","time","datetime"],this.withScaleColumnTypes=["real","double","double precision","float","real","numeric","decimal"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"datetime('now')",updateDate:"datetime",updateDateDefault:"datetime('now')",deleteDate:"datetime",deleteDateNullable:!0,version:"integer",treeLevel:"integer",migrationId:"integer",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.cteCapabilities={enabled:!0,requiresRecursiveHint:!0},this.attachedDatabases={},this.connection=e,this.options=e.options,this.database=Oe.buildDriverOptions(this.options).database}async connect(){this.databaseConnection=await this.createDatabaseConnection()}afterConnect(){return Promise.resolve()}async disconnect(){return new Promise((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close(i=>i?t(i):e())})}hasAttachedDatabases(){return!!Object.keys(this.attachedDatabases).length}getAttachedDatabaseHandleByRelativePath(e){var t,i;return(i=(t=this.attachedDatabases)===null||t===void 0?void 0:t[e])===null||i===void 0?void 0:i.attachHandle}getAttachedDatabasePathRelativeByHandle(e){var t;return(t=Object.values(this.attachedDatabases).find(({attachHandle:i})=>e===i))===null||t===void 0?void 0:t.attachFilepathRelative}createSchemaBuilder(){return new A0(this.connection)}preparePersistentValue(e,t){return t.transformer&&(e=$n.transformTo(t.transformer,e)),e==null?e:t.type===Boolean||t.type==="boolean"?e===!0?1:0:t.type==="date"?Ye.mixedDateToDateString(e):t.type==="time"?Ye.mixedDateToTimeString(e):t.type==="datetime"||t.type===Date?Ye.mixedDateToUtcDatetimeString(e):t.type==="json"||t.type==="simple-json"?Ye.simpleJsonToString(e):t.type==="simple-array"?Ye.simpleArrayToString(e):t.type==="simple-enum"?Ye.simpleEnumToString(e):e}prepareHydratedValue(e,t){return e==null?t.transformer?$n.transformFrom(t.transformer,e):e:(t.type===Boolean||t.type==="boolean"?e=!!e:t.type==="datetime"||t.type===Date?(e&&typeof e=="string"&&(/^\d\d\d\d-\d\d-\d\d \d\d:\d\d/.test(e)&&(e=e.replace(" ","T")),/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d(:\d\d(\.\d\d\d)?)?$/.test(e)&&(e+="Z")),e=Ye.normalizeHydratedDate(e)):t.type==="date"?e=Ye.mixedDateToDateString(e):t.type==="time"?e=Ye.mixedTimeToString(e):t.type==="json"||t.type==="simple-json"?e=Ye.stringToSimpleJson(e):t.type==="simple-array"?e=Ye.stringToSimpleArray(e):t.type==="simple-enum"?e=Ye.stringToSimpleEnum(e,t):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=$n.transformFrom(t.transformer,e)),e)}escapeQueryWithParameters(e,t,i){const r=Object.keys(i).map(s=>typeof i[s]=="boolean"?i[s]===!0?1:0:i[s]instanceof Date?Ye.mixedDateToUtcDatetimeString(i[s]):i[s]);return!t||!Object.keys(t).length?[e,r]:(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o)=>{if(!t.hasOwnProperty(o))return s;let l=t[o];return a?l.map(c=>(r.push(c),this.createParameter(o,r.length-1))).join(", "):typeof l=="function"?l():typeof l=="number"?String(l):typeof l=="boolean"?(r.push(+l),this.createParameter(o,r.length-1)):l instanceof Date?(r.push(Ye.mixedDateToUtcDatetimeString(l)),this.createParameter(o,r.length-1)):(r.push(l),this.createParameter(o,r.length-1))}),[e,r])}escape(e){return'"'+e+'"'}buildTableName(e,t,i){return e}parseTableName(e){var t;const i=this.database,r=void 0;if(se.isTable(e)||se.isView(e)){const a=this.parseTableName(e.schema?'"'.concat(e.schema,'"."').concat(e.name,'"'):e.name);return{database:e.database||a.database||i,schema:e.schema||a.schema||r,tableName:a.tableName}}if(se.isTableForeignKey(e)){const a=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||a.database||i,schema:e.referencedSchema||a.schema||r,tableName:a.tableName}}if(se.isEntityMetadata(e))return{database:e.database||i,schema:e.schema||r,tableName:e.tableName};const s=e.split(".");return s.length===3?{database:s[0]||i,schema:s[1]||r,tableName:s[2]}:s.length===2?{database:(t=this.getAttachedDatabasePathRelativeByHandle(s[0]))!==null&&t!==void 0?t:i,schema:s[0],tableName:s[1]}:{database:i,schema:r,tableName:e}}normalizeType(e){return e.type===Number||e.type==="int"?"integer":e.type===String?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":e.type==="uuid"?"varchar":e.type==="simple-array"||e.type==="simple-json"?"text":e.type==="simple-enum"?"varchar":e.type||""}normalizeDefault(e){const t=e.default;if(typeof t=="number")return""+t;if(typeof t=="boolean")return t?"1":"0";if(typeof t=="function")return t();if(typeof t=="string")return"'".concat(t,"'");if(t!=null)return"".concat(t)}normalizeIsUnique(e){return e.entityMetadata.uniques.some(t=>t.columns.length===1&&t.columns[0]===e)}getColumnLength(e){return e.length?e.length.toString():""}createFullType(e){let t=e.type;return e.enum?"varchar":(e.length?t+="("+e.length+")":e.precision!==null&&e.precision!==void 0&&e.scale!==null&&e.scale!==void 0?t+="("+e.precision+","+e.scale+")":e.precision!==null&&e.precision!==void 0&&(t+="("+e.precision+")"),e.isArray&&(t+=" array"),t)}obtainMasterConnection(){return Promise.resolve()}obtainSlaveConnection(){return Promise.resolve()}createGeneratedMap(e,t,i,r){const s=e.generatedColumns.reduce((a,o)=>{let l;return o.generationStrategy==="increment"&&t&&(l=t-r+i+1),l?Fe.mergeDeep(a,o.createValueMap(l)):a},{});return Object.keys(s).length>0?s:void 0}findChangedColumns(e,t){return t.filter(i=>{const r=e.find(a=>a.name===i.databaseName);return r?r.name!==i.databaseName||r.type!==this.normalizeType(i)||r.length!==i.length||r.precision!==i.precision||r.scale!==i.scale||this.normalizeDefault(i)!==r.default||r.isPrimary!==i.isPrimary||r.isNullable!==i.isNullable||r.generatedType!==i.generatedType||r.asExpression!==i.asExpression||r.isUnique!==this.normalizeIsUnique(i)||r.enum&&i.enum&&!Fe.isArraysEqual(r.enum,i.enum.map(a=>a+""))||i.generationStrategy!=="uuid"&&r.isGenerated!==i.isGenerated:!1})}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"?"}createDatabaseConnection(){throw new J("Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers")}loadDependencies(){}}class H{constructor(e,t){this.query=e,this.parameters=t,this["@instanceof"]=Symbol.for("Query")}}class sm{constructor(){this.upQueries=[],this.downQueries=[]}}class k0{constructor(){this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.loadedTables=[],this.loadedViews=[],this.sqlMemoryMode=!1,this.sqlInMemory=new sm,this.transactionDepth=0,this.cachedTablePaths={}}async beforeMigration(){}async afterMigration(){}async getTable(e){return this.loadedTables=await this.loadTables([e]),this.loadedTables.length>0?this.loadedTables[0]:void 0}async getTables(e){return e?(this.loadedTables=await this.loadTables(e),this.loadedTables):await this.loadTables(e)}async getView(e){return this.loadedViews=await this.loadViews([e]),this.loadedViews.length>0?this.loadedViews[0]:void 0}async getViews(e){return this.loadedViews=await this.loadViews(e),this.loadedViews}enableSqlMemory(){this.sqlInMemory=new sm,this.sqlMemoryMode=!0}disableSqlMemory(){this.sqlInMemory=new sm,this.sqlMemoryMode=!1}clearSqlMemory(){this.sqlInMemory=new sm}getMemorySql(){return this.sqlInMemory}async executeMemoryUpSql(){for(const{query:e,parameters:t}of this.sqlInMemory.upQueries)await this.query(e,t)}async executeMemoryDownSql(){for(const{query:e,parameters:t}of this.sqlInMemory.downQueries.reverse())await this.query(e,t)}getReplicationMode(){return this.mode}async getCachedView(e){const t=this.loadedViews.find(r=>r.name===e);if(t)return t;const i=await this.loadViews([e]);if(i.length>0)return this.loadedViews.push(i[0]),i[0];throw new J('View "'.concat(e,'" does not exist.'))}async getCachedTable(e){if(e in this.cachedTablePaths){const i=this.cachedTablePaths[e],r=this.loadedTables.find(s=>this.getTablePath(s)===i);if(r)return r}const t=await this.loadTables([e]);if(t.length>0){const i=this.getTablePath(t[0]),r=this.loadedTables.find(s=>this.getTablePath(s)===i);return r||(this.cachedTablePaths[e]=this.getTablePath(t[0]),this.loadedTables.push(t[0]),t[0])}else throw new J('Table "'.concat(e,'" does not exist.'))}replaceCachedTable(e,t){const i=this.getTablePath(e),r=this.loadedTables.find(s=>this.getTablePath(s)===i);for(const[s,a]of Object.entries(this.cachedTablePaths))a===i&&(this.cachedTablePaths[s]=this.getTablePath(t));r&&(r.database=t.database,r.schema=t.schema,r.name=t.name,r.columns=t.columns,r.indices=t.indices,r.foreignKeys=t.foreignKeys,r.uniques=t.uniques,r.checks=t.checks,r.justCreated=t.justCreated,r.engine=t.engine)}getTablePath(e){const t=this.connection.driver.parseTableName(e);return this.connection.driver.buildTableName(t.tableName,t.schema,t.database)}getTypeormMetadataTableName(){const e=this.connection.driver.options;return this.connection.driver.buildTableName(this.connection.metadataTableName,e.schema,e.database)}selectTypeormMetadataSql({database:e,schema:t,table:i,type:r,name:s}){const a=this.connection.createQueryBuilder(),o=a.select().from(this.getTypeormMetadataTableName(),"t").where("".concat(a.escape("type")," = :type"),{type:r}).andWhere("".concat(a.escape("name")," = :name"),{name:s});e&&o.andWhere("".concat(a.escape("database")," = :database"),{database:e}),t&&o.andWhere("".concat(a.escape("schema")," = :schema"),{schema:t}),i&&o.andWhere("".concat(a.escape("table")," = :table"),{table:i});const[l,c]=o.getQueryAndParameters();return new H(l,c)}insertTypeormMetadataSql({database:e,schema:t,table:i,type:r,name:s,value:a}){const[o,l]=this.connection.createQueryBuilder().insert().into(this.getTypeormMetadataTableName()).values({database:e,schema:t,table:i,type:r,name:s,value:a}).getQueryAndParameters();return new H(o,l)}deleteTypeormMetadataSql({database:e,schema:t,table:i,type:r,name:s}){const a=this.connection.createQueryBuilder(),o=a.delete().from(this.getTypeormMetadataTableName()).where("".concat(a.escape("type")," = :type"),{type:r}).andWhere("".concat(a.escape("name")," = :name"),{name:s});e&&o.andWhere("".concat(a.escape("database")," = :database"),{database:e}),t&&o.andWhere("".concat(a.escape("schema")," = :schema"),{schema:t}),i&&o.andWhere("".concat(a.escape("table")," = :table"),{table:i});const[l,c]=o.getQueryAndParameters();return new H(l,c)}isColumnChanged(e,t,i,r,s=!0){return e.charset!==t.charset||e.collation!==t.collation||e.precision!==t.precision||e.scale!==t.scale||e.width!==t.width||e.zerofill!==t.zerofill||e.unsigned!==t.unsigned||e.asExpression!==t.asExpression||i&&e.default!==t.default||e.onUpdate!==t.onUpdate||e.isNullable!==t.isNullable||r&&e.comment!==t.comment||s&&this.isEnumChanged(e,t)}isEnumChanged(e,t){return!Fe.isArraysEqual(e.enum||[],t.enum||[])}isDefaultColumnLength(e,t,i){if(this.connection.hasMetadata(e.name)){const s=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(s&&this.connection.driver.getColumnLength(s))return!1}return this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].length?this.connection.driver.dataTypeDefaults[t.type].length.toString()===i.toString():!1}isDefaultColumnPrecision(e,t,i){if(this.connection.hasMetadata(e.name)){const s=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(s&&s.precision!==null&&s.precision!==void 0)return!1}return this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].precision!==null&&this.connection.driver.dataTypeDefaults[t.type].precision!==void 0?this.connection.driver.dataTypeDefaults[t.type].precision===i:!1}isDefaultColumnScale(e,t,i){if(this.connection.hasMetadata(e.name)){const s=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(s&&s.scale!==null&&s.scale!==void 0)return!1}return this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].scale!==null&&this.connection.driver.dataTypeDefaults[t.type].scale!==void 0?this.connection.driver.dataTypeDefaults[t.type].scale===i:!1}async executeQueries(e,t){if(se.isQuery(e)&&(e=[e]),se.isQuery(t)&&(t=[t]),this.sqlInMemory.upQueries.push(...e),this.sqlInMemory.downQueries.push(...t),this.sqlMemoryMode===!0)return Promise.resolve();for(const{query:i,parameters:r}of e)await this.query(i,r)}generateIndexName(e,t){return this.connection.namingStrategy.indexName(e,t.columnNames,t.where)}}var Ke;(function(n){n.VIEW="VIEW",n.MATERIALIZED_VIEW="MATERIALIZED_VIEW",n.GENERATED_COLUMN="GENERATED_COLUMN"})(Ke||(Ke={}));class yd extends k0{constructor(){super(),this.transactionPromise=null}connect(){return Promise.resolve(this.driver.databaseConnection)}release(){return this.loadedTables=[],this.clearSqlMemory(),Promise.resolve()}async startTransaction(e){if(this.driver.transactionSupport==="none")throw new J("Transactions aren't supported by ".concat(this.connection.driver.options.type,"."));if(this.isTransactionActive&&this.driver.transactionSupport==="simple")throw new KG;if(e&&e!=="READ UNCOMMITTED"&&e!=="SERIALIZABLE")throw new J("SQLite only supports SERIALIZABLE and READ UNCOMMITTED isolation");this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}this.transactionDepth===0?(e&&(e==="READ UNCOMMITTED"?await this.query("PRAGMA read_uncommitted = true"):await this.query("PRAGMA read_uncommitted = false")),await this.query("BEGIN TRANSACTION")):await this.query("SAVEPOINT typeorm_".concat(this.transactionDepth)),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.query("COMMIT"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.query("ROLLBACK"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}stream(e,t,i,r){throw new J("Stream is not supported by sqlite driver.")}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){return Promise.resolve(!1)}async getCurrentDatabase(){return Promise.resolve(void 0)}async hasSchema(e){throw new J("This driver does not support table schemas")}async getCurrentSchema(){return Promise.resolve(void 0)}async hasTable(e){const t=se.isTable(e)?e.name:e,i='SELECT * FROM "sqlite_master" WHERE "type" = \'table\' AND "name" = \''.concat(t,"'");return!!(await this.query(i)).length}async hasColumn(e,t){const i=se.isTable(e)?e.name:e,r="PRAGMA table_xinfo(".concat(this.escapePath(i),")");return!!(await this.query(r)).find(a=>a.name===t)}async createDatabase(e,t){return Promise.resolve()}async dropDatabase(e,t){return Promise.resolve()}async createSchema(e,t){return Promise.resolve()}async dropSchema(e,t){return Promise.resolve()}async createTable(e,t=!1,i=!0,r=!0){const s=[],a=[];if(t&&await this.hasTable(e))return Promise.resolve();s.push(this.createTableSql(e,i)),a.push(this.dropTableSql(e)),r&&e.indices.forEach(l=>{l.name||(l.name=this.connection.namingStrategy.indexName(e,l.columnNames,l.where)),s.push(this.createIndexSql(e,l)),a.push(this.dropIndexSql(l))});const o=e.columns.filter(l=>l.generatedType&&l.asExpression);for(const l of o){const c=this.insertTypeormMetadataSql({table:e.name,type:Ke.GENERATED_COLUMN,name:l.name,value:l.asExpression}),u=this.deleteTypeormMetadataSql({table:e.name,type:Ke.GENERATED_COLUMN,name:l.name});s.push(c),a.push(u)}await this.executeQueries(s,a)}async dropTable(e,t,i=!0,r=!0){if(t&&!await this.hasTable(e))return Promise.resolve();const s=i,a=se.isTable(e)?e:await this.getCachedTable(e),o=[],l=[];r&&a.indices.forEach(u=>{o.push(this.dropIndexSql(u)),l.push(this.createIndexSql(a,u))}),o.push(this.dropTableSql(a,t)),l.push(this.createTableSql(a,s));const c=a.columns.filter(u=>u.generatedType&&u.asExpression);for(const u of c){const d=this.deleteTypeormMetadataSql({table:a.name,type:Ke.GENERATED_COLUMN,name:u.name}),h=this.insertTypeormMetadataSql({table:a.name,type:Ke.GENERATED_COLUMN,name:u.name,value:u.asExpression});o.push(d),l.push(h)}await this.executeQueries(o,l)}async createView(e,t=!1){const i=[],r=[];i.push(this.createViewSql(e)),t&&i.push(this.insertViewDefinitionSql(e)),r.push(this.dropViewSql(e)),t&&r.push(this.deleteViewDefinitionSql(e)),await this.executeQueries(i,r)}async dropView(e){const t=se.isView(e)?e.name:e,i=await this.getCachedView(t),r=[],s=[];r.push(this.deleteViewDefinitionSql(i)),r.push(this.dropViewSql(i)),s.push(this.insertViewDefinitionSql(i)),s.push(this.createViewSql(i)),await this.executeQueries(r,s)}async renameTable(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();r.name=t;const s=new H("ALTER TABLE ".concat(this.escapePath(i.name)," RENAME TO ").concat(this.escapePath(t))),a=new H("ALTER TABLE ".concat(this.escapePath(t)," RENAME TO ").concat(this.escapePath(i.name)));await this.executeQueries(s,a),r.uniques.forEach(o=>{const l=this.connection.namingStrategy.uniqueConstraintName(i,o.columnNames);o.name===l&&(o.name=this.connection.namingStrategy.uniqueConstraintName(r,o.columnNames))}),r.foreignKeys.forEach(o=>{const l=this.connection.namingStrategy.foreignKeyName(i,o.columnNames,this.getTablePath(o),o.referencedColumnNames);o.name===l&&(o.name=this.connection.namingStrategy.foreignKeyName(r,o.columnNames,this.getTablePath(o),o.referencedColumnNames))}),r.indices.forEach(o=>{const l=this.connection.namingStrategy.indexName(i,o.columnNames,o.where);o.name===l&&(o.name=this.connection.namingStrategy.indexName(r,o.columnNames,o.where))}),i.name=r.name,await this.recreateTable(r,i)}async addColumn(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);return this.addColumns(i,[t])}async addColumns(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>r.addColumn(s)),await this.recreateTable(r,i)}async renameColumn(e,t,i){const r=se.isTable(e)?e:await this.getCachedTable(e),s=se.isTableColumn(t)?t:r.columns.find(o=>o.name===t);if(!s)throw new J('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));let a;return se.isTableColumn(i)?a=i:(a=s.clone(),a.name=i),this.changeColumn(r,s,a)}async changeColumn(e,t,i){const r=se.isTable(e)?e:await this.getCachedTable(e),s=se.isTableColumn(t)?t:r.columns.find(a=>a.name===t);if(!s)throw new J('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));await this.changeColumns(r,[{oldColumn:s,newColumn:i}])}async changeColumns(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>{s.newColumn.name!==s.oldColumn.name&&(r.findColumnUniques(s.oldColumn).forEach(o=>{const l=this.connection.namingStrategy.uniqueConstraintName(i,o.columnNames);o.columnNames.splice(o.columnNames.indexOf(s.oldColumn.name),1),o.columnNames.push(s.newColumn.name),o.name===l&&(o.name=this.connection.namingStrategy.uniqueConstraintName(r,o.columnNames))}),r.findColumnForeignKeys(s.oldColumn).forEach(o=>{const l=this.connection.namingStrategy.foreignKeyName(i,o.columnNames,this.getTablePath(o),o.referencedColumnNames);o.columnNames.splice(o.columnNames.indexOf(s.oldColumn.name),1),o.columnNames.push(s.newColumn.name),o.name===l&&(o.name=this.connection.namingStrategy.foreignKeyName(r,o.columnNames,this.getTablePath(o),o.referencedColumnNames))}),r.findColumnIndices(s.oldColumn).forEach(o=>{const l=this.connection.namingStrategy.indexName(i,o.columnNames,o.where);o.columnNames.splice(o.columnNames.indexOf(s.oldColumn.name),1),o.columnNames.push(s.newColumn.name),o.name===l&&(o.name=this.connection.namingStrategy.indexName(r,o.columnNames,o.where))}));const a=r.columns.find(o=>o.name===s.oldColumn.name);a&&(r.columns[r.columns.indexOf(a)]=s.newColumn)}),await this.recreateTable(r,i)}async dropColumn(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableColumn(t)?t:i.findColumnByName(t);if(!r)throw new J('Column "'.concat(t,'" was not found in table "').concat(i.name,'"'));await this.dropColumns(i,[r])}async dropColumns(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>{const a=se.isTableColumn(s)?s:i.findColumnByName(s);if(!a)throw new Error('Column "'.concat(s,'" was not found in table "').concat(i.name,'"'));r.removeColumn(a),r.findColumnUniques(a).forEach(o=>r.removeUniqueConstraint(o)),r.findColumnIndices(a).forEach(o=>r.removeIndex(o)),r.findColumnForeignKeys(a).forEach(o=>r.removeForeignKey(o))}),await this.recreateTable(r,i)}async createPrimaryKey(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();r.columns.forEach(s=>{t.find(a=>a===s.name)&&(s.isPrimary=!0)}),await this.recreateTable(r,i),i.columns.forEach(s=>{t.find(a=>a===s.name)&&(s.isPrimary=!0)})}async updatePrimaryKeys(e,t){await Promise.resolve()}async dropPrimaryKey(e){const t=se.isTable(e)?e:await this.getCachedTable(e),i=t.clone();i.primaryColumns.forEach(r=>{r.isPrimary=!1}),await this.recreateTable(i,t),t.primaryColumns.forEach(r=>{r.isPrimary=!1})}async createUniqueConstraint(e,t){await this.createUniqueConstraints(e,[t])}async createUniqueConstraints(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>r.addUniqueConstraint(s)),await this.recreateTable(r,i)}async dropUniqueConstraint(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableUnique(t)?t:i.uniques.find(s=>s.name===t);if(!r)throw new J("Supplied unique constraint was not found in table ".concat(i.name));await this.dropUniqueConstraints(i,[r])}async dropUniqueConstraints(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>r.removeUniqueConstraint(s)),await this.recreateTable(r,i)}async createCheckConstraint(e,t){await this.createCheckConstraints(e,[t])}async createCheckConstraints(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>r.addCheckConstraint(s)),await this.recreateTable(r,i)}async dropCheckConstraint(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableCheck(t)?t:i.checks.find(s=>s.name===t);if(!r)throw new J("Supplied check constraint was not found in table ".concat(i.name));await this.dropCheckConstraints(i,[r])}async dropCheckConstraints(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>r.removeCheckConstraint(s)),await this.recreateTable(r,i)}async createExclusionConstraint(e,t){throw new J("Sqlite does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new J("Sqlite does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new J("Sqlite does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new J("Sqlite does not support exclusion constraints.")}async createForeignKey(e,t){await this.createForeignKeys(e,[t])}async createForeignKeys(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>r.addForeignKey(s)),await this.recreateTable(r,i)}async dropForeignKey(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableForeignKey(t)?t:i.foreignKeys.find(s=>s.name===t);if(!r)throw new J("Supplied foreign key was not found in table ".concat(i.name));await this.dropForeignKeys(e,[r])}async dropForeignKeys(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone();t.forEach(s=>r.removeForeignKey(s)),await this.recreateTable(r,i)}async createIndex(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(i,t));const r=this.createIndexSql(i,t),s=this.dropIndexSql(t);await this.executeQueries(r,s),i.addIndex(t)}async createIndices(e,t){const i=t.map(r=>this.createIndex(e,r));await Promise.all(i)}async dropIndex(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableIndex(t)?t:i.indices.find(o=>o.name===t);if(!r)throw new J("Supplied index ".concat(t," was not found in table ").concat(i.name));r.name||(r.name=this.generateIndexName(i,r));const s=this.dropIndexSql(r),a=this.createIndexSql(i,r);await this.executeQueries(s,a),i.removeIndex(r)}async dropIndices(e,t){const i=t.map(r=>this.dropIndex(e,r));await Promise.all(i)}async clearTable(e){await this.query("DELETE FROM ".concat(this.escapePath(e)))}async clearDatabase(e){let t;e&&this.driver.getAttachedDatabaseHandleByRelativePath(e)&&(t=this.driver.getAttachedDatabaseHandleByRelativePath(e)),await this.query("PRAGMA foreign_keys = OFF");const i=this.isTransactionActive;i||await this.startTransaction();try{const r=t?"SELECT 'DROP VIEW \"".concat(t,'"."\' || name || \'";\' as query FROM "').concat(t,'"."sqlite_master" WHERE "type" = \'view\''):"SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",s=await this.query(r);await Promise.all(s.map(l=>this.query(l.query)));const a=t?"SELECT 'DROP TABLE \"".concat(t,'"."\' || name || \'";\' as query FROM "').concat(t,'"."sqlite_master" WHERE "type" = \'table\' AND "name" != \'sqlite_sequence\''):"SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",o=await this.query(a);await Promise.all(o.map(l=>this.query(l.query))),i||await this.commitTransaction()}catch(r){try{i||await this.rollbackTransaction()}catch(s){}throw r}finally{await this.query("PRAGMA foreign_keys = ON")}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const i=e.map(a=>"'"+a+"'").join(", ");let r='SELECT "t".* FROM "'.concat(this.getTypeormMetadataTableName(),'" "t" INNER JOIN "sqlite_master" s ON "s"."name" = "t"."name" AND "s"."type" = \'view\' WHERE "t"."type" = \'').concat(Ke.VIEW,"'");return i.length>0&&(r+=' AND "t"."name" IN ('.concat(i,")")),(await this.query(r)).map(a=>{const o=new Ga;return o.name=a.name,o.expression=a.value,o})}async loadTableRecords(e,t){let i;const[r,s]=this.splitTablePath(e);return r&&this.driver.getAttachedDatabasePathRelativeByHandle(r)&&(i=this.driver.getAttachedDatabasePathRelativeByHandle(r)),this.query("SELECT ".concat(i?"'".concat(i,"'"):null," as database, ").concat(r?"'".concat(r,"'"):null," as schema, * FROM ").concat(r?'"'.concat(r,'".'):"").concat(this.escapePath("sqlite_master"),' WHERE "type" = \'').concat(t,"' AND \"").concat(t==="table"?"name":"tbl_name","\" IN ('").concat(s,"')"))}async loadPragmaRecords(e,t){const[,i]=this.splitTablePath(e);return this.query("PRAGMA ".concat(t,'("').concat(i,'")'))}async loadTables(e){if(e&&e.length===0)return[];let t=[],i;if(e){const r=e.filter(o=>o.split(".").length===1).map(o=>"'".concat(o,"'")),s=e.filter(o=>o.split(".").length>1),a=o=>{const l=[...s.map(c=>this.loadTableRecords(c,o))];return r.length&&l.push(this.query('SELECT * FROM "sqlite_master" WHERE "type" = \''.concat(o,"' AND \"").concat(o==="table"?"name":"tbl_name",'" IN (').concat(r,")"))),l};t=(await Promise.all(a("table"))).reduce((o,l)=>[...o,...l],[]).filter(Boolean),i=(await Promise.all(a("index"))).reduce((o,l)=>[...o,...l],[]).filter(Boolean)}else{const r='SELECT * FROM "sqlite_master" WHERE "type" = \'table\'';t.push(...await this.query(r));const s=t.map(({name:a})=>"'".concat(a,"'")).join(", ");i=await this.query('SELECT * FROM "sqlite_master" WHERE "type" = \'index\' AND "tbl_name" IN ('.concat(s,")"))}return t.length===0?[]:Promise.all(t.map(async r=>{const s=r.database&&this.driver.getAttachedDatabaseHandleByRelativePath(r.database)?"".concat(this.driver.getAttachedDatabaseHandleByRelativePath(r.database),".").concat(r.name):r.name,a=r.sql,o=a.includes("WITHOUT ROWID"),l=new nn({name:s,withoutRowid:o}),[c,u,d]=await Promise.all([this.loadPragmaRecords(s,"table_xinfo"),this.loadPragmaRecords(s,"index_list"),this.loadPragmaRecords(s,"foreign_key_list")]);let h;const f=r.sql;let m=f.toUpperCase().indexOf("AUTOINCREMENT");if(m!==-1){h=f.substr(0,m);const O=h.lastIndexOf(","),K=h.lastIndexOf("(");O!==-1?(h=h.substr(O),h=h.substr(0,h.lastIndexOf('"')),h=h.substr(h.indexOf('"')+1)):K!==-1&&(h=h.substr(K),h=h.substr(0,h.lastIndexOf('"')),h=h.substr(h.indexOf('"')+1))}l.columns=await Promise.all(c.map(async O=>{const K=new Wi;if(K.name=O.name,K.type=O.type.toLowerCase(),K.default=O.dflt_value!==null&&O.dflt_value!==void 0?O.dflt_value:void 0,K.isNullable=O.notnull===0,K.isPrimary=O.pk>0,K.comment="",K.isGenerated=h===O.name,K.isGenerated&&(K.generationStrategy="increment"),O.hidden===2||O.hidden===3){K.generatedType=O.hidden===2?"VIRTUAL":"STORED";const te=await this.selectTypeormMetadataSql({table:l.name,type:Ke.GENERATED_COLUMN,name:K.name}),ue=await this.query(te.query,te.parameters);ue[0]&&ue[0].value?K.asExpression=ue[0].value:K.asExpression=""}if(K.type==="varchar"){const te=a.match(new RegExp('"('+K.name+")\" varchar CHECK\\s*\\(\\s*\"\\1\"\\s+IN\\s*\\(('[^']+'(?:\\s*,\\s*'[^']+')+)\\s*\\)\\s*\\)"));te&&(K.enum=te[2].substr(1,te[2].length-2).split("','"))}let z=K.type.indexOf("(");if(z!==-1){const te=K.type;let ue=te.substr(0,z);if(this.driver.withLengthColumnTypes.find(ye=>ye===ue)){let ye=parseInt(te.substring(z+1,te.length-1));ye&&(K.length=ye.toString(),K.type=ue)}if(this.driver.withPrecisionColumnTypes.find(ye=>ye===ue)){const ye=new RegExp("^".concat(ue,"\\((\\d+),?\\s?(\\d+)?\\)")),be=te.match(ye);be&&be[1]&&(K.precision=+be[1]),this.driver.withScaleColumnTypes.find(de=>de===ue)&&be&&be[2]&&(K.scale=+be[2]),K.type=ue}}return K}));let g;const _=[],v=/CONSTRAINT "([^"]*)" FOREIGN KEY ?\((.*?)\) REFERENCES "([^"]*)"/g;for(;(g=v.exec(a))!==null;)_.push({name:g[1],columns:g[2].substr(1,g[2].length-2).split('", "'),referencedTableName:g[3]});const y=Fe.uniq(d,O=>O.id);l.foreignKeys=y.map(O=>{const K=d.filter(ye=>ye.id===O.id&&ye.table===O.table),z=K.map(ye=>ye.from),te=K.map(ye=>ye.to),ue=_.find(ye=>ye.referencedTableName===O.table&&ye.columns.every(be=>z.indexOf(be)!==-1));return new zr({name:ue==null?void 0:ue.name,columnNames:z,referencedTableName:O.table,referencedColumnNames:te,onDelete:O.on_delete,onUpdate:O.on_update})});let T;const N=[],P=/CONSTRAINT "([^"]*)" UNIQUE ?\((.*?)\)/g;for(;(T=P.exec(a))!==null;)N.push({name:T[1],columns:T[2].substr(1,T[2].length-2).split('", "')});const F=u.filter(O=>O.origin==="u").map(O=>O.name).filter((O,K,z)=>z.indexOf(O)===K).map(async O=>{const K=u.find(ye=>ye.name===O),te=(await this.query('PRAGMA index_info("'.concat(K.name,'")'))).sort((ye,be)=>parseInt(ye.seqno)-parseInt(be.seqno)).map(ye=>ye.name);if(te.length===1){const ye=l.columns.find(be=>!!te.find(de=>de===be.name));ye&&(ye.isUnique=!0)}const ue=N.find(ye=>ye.columns.every(be=>te.indexOf(be)!==-1));return new hi({name:ue?ue.name:this.connection.namingStrategy.uniqueConstraintName(l,te),columnNames:te})});l.uniques=await Promise.all(F);let $;const B=/CONSTRAINT "([^"]*)" CHECK ?(\(.*?\))([,]|[)]$)/g;for(;($=B.exec(a))!==null;)l.checks.push(new Ss({name:$[1],expression:$[2]}));const M=u.filter(O=>O.origin==="c").map(O=>O.name).filter((O,K,z)=>z.indexOf(O)===K).map(async O=>{const K=i.find(he=>he.name===O),z=/WHERE (.*)/.exec(K.sql),te=u.find(he=>he.name===O),ye=(await this.query('PRAGMA index_info("'.concat(te.name,'")'))).sort((he,ee)=>parseInt(he.seqno)-parseInt(ee.seqno)).map(he=>he.name),be="".concat(r.database?"".concat(r.database,"."):"").concat(te.name),de=te.unique==="1"||te.unique===1;return new yn({table:l,name:be,columnNames:ye,isUnique:de,where:z?z[1]:void 0})}),Z=await Promise.all(M);return l.indices=Z.filter(O=>!!O),l}))}createTableSql(e,t,i){const r=e.columns.filter(f=>f.isPrimary),s=r.find(f=>f.isGenerated&&f.generationStrategy==="increment"),a=r.length>1;if(a&&s)throw new J("Sqlite does not support AUTOINCREMENT on composite primary key");const o=e.columns.map(f=>this.buildCreateColumnSql(f,a)).join(", "),[l]=this.splitTablePath(e.name);let c="CREATE TABLE ".concat(this.escapePath(e.name)," (").concat(o),[u,d]=this.splitTablePath(e.name);const h=i?"".concat(u?"".concat(u,"."):"").concat(d.replace(/^temporary_/,"")):e.name;if(e.columns.filter(f=>f.isUnique).forEach(f=>{e.uniques.some(g=>g.columnNames.length===1&&g.columnNames[0]===f.name)||e.uniques.push(new hi({name:this.connection.namingStrategy.uniqueConstraintName(e,[f.name]),columnNames:[f.name]}))}),e.uniques.length>0){const f=e.uniques.map(m=>{const g=m.name?m.name:this.connection.namingStrategy.uniqueConstraintName(h,m.columnNames),_=m.columnNames.map(v=>'"'.concat(v,'"')).join(", ");return'CONSTRAINT "'.concat(g,'" UNIQUE (').concat(_,")")}).join(", ");c+=", ".concat(f)}if(e.checks.length>0){const f=e.checks.map(m=>{const g=m.name?m.name:this.connection.namingStrategy.checkConstraintName(h,m.expression);return'CONSTRAINT "'.concat(g,'" CHECK (').concat(m.expression,")")}).join(", ");c+=", ".concat(f)}if(e.foreignKeys.length>0&&t){const f=e.foreignKeys.filter(m=>{const[g]=this.splitTablePath(m.referencedTableName);return g===l}).map(m=>{const[,g]=this.splitTablePath(m.referencedTableName),_=m.columnNames.map(T=>'"'.concat(T,'"')).join(", ");m.name||(m.name=this.connection.namingStrategy.foreignKeyName(h,m.columnNames,this.getTablePath(m),m.referencedColumnNames));const v=m.referencedColumnNames.map(T=>'"'.concat(T,'"')).join(", ");let y='CONSTRAINT "'.concat(m.name,'" FOREIGN KEY (').concat(_,') REFERENCES "').concat(g,'" (').concat(v,")");return m.onDelete&&(y+=" ON DELETE ".concat(m.onDelete)),m.onUpdate&&(y+=" ON UPDATE ".concat(m.onUpdate)),m.deferrable&&(y+=" DEFERRABLE ".concat(m.deferrable)),y}).join(", ");c+=", ".concat(f)}if(r.length>1){const f=r.map(m=>'"'.concat(m.name,'"')).join(", ");c+=", PRIMARY KEY (".concat(f,")")}return c+=")",e.withoutRowid&&(c+=" WITHOUT ROWID"),new H(c)}dropTableSql(e,t){const i=se.isTable(e)?e.name:e,r=t?"DROP TABLE IF EXISTS ".concat(this.escapePath(i)):"DROP TABLE ".concat(this.escapePath(i));return new H(r)}createViewSql(e){return typeof e.expression=="string"?new H('CREATE VIEW "'.concat(e.name,'" AS ').concat(e.expression)):new H('CREATE VIEW "'.concat(e.name,'" AS ').concat(e.expression(this.connection).getQuery()))}insertViewDefinitionSql(e){const t=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:Ke.VIEW,name:e.name,value:t})}dropViewSql(e){const t=se.isView(e)?e.name:e;return new H('DROP VIEW "'.concat(t,'"'))}deleteViewDefinitionSql(e){const t=se.isView(e)?e.name:e;return this.deleteTypeormMetadataSql({type:Ke.VIEW,name:t})}createIndexSql(e,t){const i=t.columnNames.map(a=>'"'.concat(a,'"')).join(", "),[r,s]=this.splitTablePath(e.name);return new H("CREATE ".concat(t.isUnique?"UNIQUE ":"","INDEX ").concat(r?'"'.concat(r,'".'):"").concat(this.escapePath(t.name),' ON "').concat(s,'" (').concat(i,") ").concat(t.where?"WHERE "+t.where:""))}dropIndexSql(e){let t=se.isTableIndex(e)?e.name:e;return new H("DROP INDEX ".concat(this.escapePath(t)))}buildCreateColumnSql(e,t){let i='"'+e.name+'"';return se.isColumnMetadata(e)?i+=" "+this.driver.normalizeType(e):i+=" "+this.connection.driver.createFullType(e),e.enum&&(i+=' CHECK( "'+e.name+'" IN ('+e.enum.map(r=>"'"+r+"'").join(",")+") )"),e.isPrimary&&!t&&(i+=" PRIMARY KEY"),e.isGenerated===!0&&e.generationStrategy==="increment"&&(i+=" AUTOINCREMENT"),e.collation&&(i+=" COLLATE "+e.collation),e.isNullable!==!0&&(i+=" NOT NULL"),e.asExpression?i+=" AS (".concat(e.asExpression,") ").concat(e.generatedType?e.generatedType:"VIRTUAL"):e.default!==void 0&&e.default!==null&&(i+=" DEFAULT ("+e.default+")"),i}async recreateTable(e,t,i=!0){const r=[],s=[];t.indices.forEach(c=>{r.push(this.dropIndexSql(c)),s.push(this.createIndexSql(t,c))});let[a,o]=this.splitTablePath(e.name),[,l]=this.splitTablePath(t.name);if(e.name=o="".concat(a?"".concat(a,"."):"","temporary_").concat(o),r.push(this.createTableSql(e,!0,!0)),s.push(this.dropTableSql(e)),i){let c=e.columns.filter(d=>!d.generatedType).map(d=>'"'.concat(d.name,'"')),u=t.columns.filter(d=>!d.generatedType).map(d=>'"'.concat(d.name,'"'));u.length<c.length?c=e.columns.filter(d=>{const h=t.columns.find(f=>f.name===d.name);return h&&h.generatedType?!1:!d.generatedType&&h}).map(d=>'"'.concat(d.name,'"')):u.length>c.length&&(u=t.columns.filter(d=>!d.generatedType&&e.columns.find(h=>h.name===d.name)).map(d=>'"'.concat(d.name,'"'))),r.push(new H("INSERT INTO ".concat(this.escapePath(e.name),"(").concat(c.join(", "),") SELECT ").concat(u.join(", ")," FROM ").concat(this.escapePath(t.name)))),s.push(new H("INSERT INTO ".concat(this.escapePath(t.name),"(").concat(u.join(", "),") SELECT ").concat(c.join(", ")," FROM ").concat(this.escapePath(e.name))))}r.push(this.dropTableSql(t)),s.push(this.createTableSql(t,!0)),r.push(new H("ALTER TABLE ".concat(this.escapePath(e.name)," RENAME TO ").concat(this.escapePath(l)))),s.push(new H("ALTER TABLE ".concat(this.escapePath(t.name)," RENAME TO ").concat(this.escapePath(o)))),e.name=t.name,e.indices.forEach(c=>{c.name||(c.name=this.connection.namingStrategy.indexName(e,c.columnNames,c.where)),r.push(this.createIndexSql(e,c)),s.push(this.dropIndexSql(c))}),t.columns.filter(c=>{const u=e.columns.find(d=>d.name===c.name);return c.generatedType&&c.asExpression&&(!u||!u.generatedType&&!u.asExpression)}).forEach(c=>{const u=this.deleteTypeormMetadataSql({table:t.name,type:Ke.GENERATED_COLUMN,name:c.name}),d=this.insertTypeormMetadataSql({table:t.name,type:Ke.GENERATED_COLUMN,name:c.name,value:c.asExpression});r.push(u),s.push(d)}),e.columns.filter(c=>c.generatedType&&c.asExpression&&!t.columns.some(u=>u.name===c.name)).forEach(c=>{const u=this.insertTypeormMetadataSql({table:e.name,type:Ke.GENERATED_COLUMN,name:c.name,value:c.asExpression}),d=this.deleteTypeormMetadataSql({table:e.name,type:Ke.GENERATED_COLUMN,name:c.name});r.push(u),s.push(d)}),e.columns.filter(c=>c.generatedType&&c.asExpression).forEach(c=>{const u=t.columns.find(g=>g.name===c.name&&g.generatedType&&c.generatedType&&g.asExpression!==c.asExpression);if(!u)return;const d=this.deleteTypeormMetadataSql({table:t.name,type:Ke.GENERATED_COLUMN,name:u.name}),h=this.insertTypeormMetadataSql({table:e.name,type:Ke.GENERATED_COLUMN,name:c.name,value:c.asExpression});r.push(d),r.push(h);const f=this.insertTypeormMetadataSql({table:e.name,type:Ke.GENERATED_COLUMN,name:u.name,value:u.asExpression}),m=this.deleteTypeormMetadataSql({table:t.name,type:Ke.GENERATED_COLUMN,name:c.name});s.push(f),s.push(m)}),await this.executeQueries(r,s),this.replaceCachedTable(t,e)}splitTablePath(e){return e.indexOf(".")!==-1?e.split("."):[void 0,e]}escapePath(e,t){return(se.isTable(e)||se.isView(e)?e.name:e).replace(/^\.+|\.+$/g,"").split(".").map(r=>t?r:'"'.concat(r,'"')).join(".")}}class eo{constructor(e){this.queryRunner=e}async broadcast(e,...t){const i=new Mx,r=this["broadcast".concat(e,"Event")];typeof r=="function"&&r.call(this,i,...t),await i.wait()}broadcastBeforeInsertEvent(e,t,i){i&&t.beforeInsertListeners.length&&t.beforeInsertListeners.forEach(r=>{if(r.isAllowed(i)){const s=r.execute(i);s instanceof Promise&&e.promises.push(s),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(r=>{if(this.isAllowedSubscriber(r,t.target)&&r.beforeInsert){const s=r.beforeInsert({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t});s instanceof Promise&&e.promises.push(s),e.count++}})}broadcastBeforeUpdateEvent(e,t,i,r,s,a){i&&t.beforeUpdateListeners.length&&t.beforeUpdateListeners.forEach(o=>{if(o.isAllowed(i)){const l=o.execute(i);l instanceof Promise&&e.promises.push(l),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(o=>{if(this.isAllowedSubscriber(o,t.target)&&o.beforeUpdate){const l=o.beforeUpdate({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t,databaseEntity:r,updatedColumns:s||[],updatedRelations:a||[]});l instanceof Promise&&e.promises.push(l),e.count++}})}broadcastBeforeRemoveEvent(e,t,i,r,s){i&&t.beforeRemoveListeners.length&&t.beforeRemoveListeners.forEach(a=>{if(a.isAllowed(i)){const o=a.execute(i);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeRemove){const o=a.beforeRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastBeforeSoftRemoveEvent(e,t,i,r,s){i&&t.beforeSoftRemoveListeners.length&&t.beforeSoftRemoveListeners.forEach(a=>{if(a.isAllowed(i)){const o=a.execute(i);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeSoftRemove){const o=a.beforeSoftRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastBeforeRecoverEvent(e,t,i,r,s){i&&t.beforeRecoverListeners.length&&t.beforeRecoverListeners.forEach(a=>{if(a.isAllowed(i)){const o=a.execute(i);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeRecover){const o=a.beforeRecover({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastAfterInsertEvent(e,t,i){i&&t.afterInsertListeners.length&&t.afterInsertListeners.forEach(r=>{if(r.isAllowed(i)){const s=r.execute(i);s instanceof Promise&&e.promises.push(s),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(r=>{if(this.isAllowedSubscriber(r,t.target)&&r.afterInsert){const s=r.afterInsert({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t});s instanceof Promise&&e.promises.push(s),e.count++}})}broadcastBeforeTransactionStartEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.beforeTransactionStart){const i=t.beforeTransactionStart({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});i instanceof Promise&&e.promises.push(i),e.count++}})}broadcastAfterTransactionStartEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.afterTransactionStart){const i=t.afterTransactionStart({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});i instanceof Promise&&e.promises.push(i),e.count++}})}broadcastBeforeTransactionCommitEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.beforeTransactionCommit){const i=t.beforeTransactionCommit({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});i instanceof Promise&&e.promises.push(i),e.count++}})}broadcastAfterTransactionCommitEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.afterTransactionCommit){const i=t.afterTransactionCommit({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});i instanceof Promise&&e.promises.push(i),e.count++}})}broadcastBeforeTransactionRollbackEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.beforeTransactionRollback){const i=t.beforeTransactionRollback({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});i instanceof Promise&&e.promises.push(i),e.count++}})}broadcastAfterTransactionRollbackEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.afterTransactionRollback){const i=t.afterTransactionRollback({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});i instanceof Promise&&e.promises.push(i),e.count++}})}broadcastAfterUpdateEvent(e,t,i,r,s,a){i&&t.afterUpdateListeners.length&&t.afterUpdateListeners.forEach(o=>{if(o.isAllowed(i)){const l=o.execute(i);l instanceof Promise&&e.promises.push(l),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(o=>{if(this.isAllowedSubscriber(o,t.target)&&o.afterUpdate){const l=o.afterUpdate({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t,databaseEntity:r,updatedColumns:s||[],updatedRelations:a||[]});l instanceof Promise&&e.promises.push(l),e.count++}})}broadcastAfterRemoveEvent(e,t,i,r,s){i&&t.afterRemoveListeners.length&&t.afterRemoveListeners.forEach(a=>{if(a.isAllowed(i)){const o=a.execute(i);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterRemove){const o=a.afterRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastAfterSoftRemoveEvent(e,t,i,r,s){i&&t.afterSoftRemoveListeners.length&&t.afterSoftRemoveListeners.forEach(a=>{if(a.isAllowed(i)){const o=a.execute(i);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterSoftRemove){const o=a.afterSoftRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastAfterRecoverEvent(e,t,i,r,s){i&&t.afterRecoverListeners.length&&t.afterRecoverListeners.forEach(a=>{if(a.isAllowed(i)){const o=a.execute(i);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterRecover){const o=a.afterRecover({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:i,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastLoadEventsForAll(e,t,i){return this.broadcastLoadEvent(e,t,i)}broadcastLoadEvent(e,t,i){const r=this.queryRunner.connection.subscribers.filter(s=>this.isAllowedSubscriber(s,t.target)&&s.afterLoad);if(t.relations.length||t.afterLoadListeners.length||r.length){const s=i.filter(a=>!(a instanceof Promise));t.relations.length&&t.relations.forEach(a=>{s.forEach(o=>{if(a.isLazy&&!o.hasOwnProperty(a.propertyName))return;const l=a.getEntityValue(o);ft.isObject(l)&&this.broadcastLoadEvent(e,a.inverseEntityMetadata,Array.isArray(l)?l:[l])})}),t.afterLoadListeners.length&&t.afterLoadListeners.forEach(a=>{s.forEach(o=>{if(a.isAllowed(o)){const l=a.execute(o);l instanceof Promise&&e.promises.push(l),e.count++}})}),r.forEach(a=>{s.forEach(o=>{const l=a.afterLoad(o,{entity:o,metadata:t,connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});l instanceof Promise&&e.promises.push(l),e.count++})})}}isAllowedSubscriber(e,t){return!e.listenTo||!e.listenTo()||e.listenTo()===Object||e.listenTo()===t||e.listenTo().isPrototypeOf(t)}}class pa{constructor(){this.records=[]}}class iK extends yd{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new eo(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async query(e,t,i=!1){if(this.isReleased)throw new Oi;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const s=+new Date;try{const a=await new Promise(async(d,h)=>{r.executeSql(e,t,f=>d(f),f=>h(f))}),o=this.driver.options.maxQueryExecutionTime,c=+new Date-s;o&&c>o&&this.driver.connection.logger.logQuerySlow(c,e,t,this);const u=new pa;if(e.substr(0,11)==="INSERT INTO")u.raw=a.insertId;else{let d=[];for(let h=0;h<a.rows.length;h++)d.push(a.rows.item(h));u.records=d,u.raw=d}return i?u:u.raw}catch(a){throw this.driver.connection.logger.logQueryError(a,e,t,this),new ia(e,t,a)}}async startTransaction(){throw new J("Transactions are not supported by the Cordova driver")}async commitTransaction(){throw new J("Transactions are not supported by the Cordova driver")}async rollbackTransaction(){throw new J("Transactions are not supported by the Cordova driver")}async clearDatabase(){await this.query("PRAGMA foreign_keys = OFF");try{const e="SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",t=await this.query(e),i="SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",r=await this.query(i);await Promise.all(t.map(s=>this.query(s.query))),await Promise.all(r.map(s=>this.query(s.query)))}finally{await this.query("PRAGMA foreign_keys = ON")}}parametrize(e,t=0){return Object.keys(e).map((i,r)=>'"'.concat(i,'"')+"=?")}}class rK extends Xf{constructor(e){super(e),this.transactionSupport="none",this.database=this.options.database,this.loadDependencies()}async disconnect(){return this.queryRunner=void 0,new Promise((e,t)=>{this.databaseConnection.close(e,t)})}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new iK(this)),this.queryRunner}async createDatabaseConnection(){const e=Object.assign({},{name:this.options.database,location:this.options.location},this.options.extra||{}),t=await new Promise(i=>{this.sqlite.openDatabase(e,r=>i(r))});return await new Promise((i,r)=>{t.executeSql("PRAGMA foreign_keys = ON",[],()=>i(),s=>r(s))}),t}loadDependencies(){try{const e=this.options.driver||window.sqlitePlugin;this.sqlite=e}catch(e){throw new gd("Cordova-SQLite","cordova-sqlite-storage")}}}class sK extends yd{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new eo(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}query(e,t,i=!1){if(this.isReleased)throw new Oi;return new Promise(async(r,s)=>{const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=+new Date;a.executeSql(e,t,l=>{const c=this.driver.options.maxQueryExecutionTime,d=+new Date-o;c&&d>c&&this.driver.connection.logger.logQuerySlow(d,e,t,this);const h=new pa;if(l!=null&&l.hasOwnProperty("rowsAffected")&&(h.affected=l.rowsAffected),l!=null&&l.hasOwnProperty("rows")){let f=[];for(let m=0;m<l.rows.length;m++)f.push(l.rows.item(m));h.raw=f,h.records=f}e.substr(0,11)==="INSERT INTO"&&(h.raw=l.insertId),r(i?h:h.raw)},l=>{this.driver.connection.logger.logQueryError(l,e,t,this),s(new ia(e,t,l))})})}parametrize(e,t=0){return Object.keys(e).map((i,r)=>'"'.concat(i,'"')+"=?")}}class aK{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["int","integer","tinyint","smallint","mediumint","bigint","unsigned big int","int2","int8","integer","character","varchar","varying character","nchar","native character","nvarchar","text","clob","text","blob","real","double","double precision","float","real","numeric","decimal","boolean","date","time","datetime"],this.supportedUpsertTypes=["on-conflict-do-update"],this.withLengthColumnTypes=["character","varchar","varying character","nchar","native character","nvarchar","text","blob","clob"],this.spatialTypes=[],this.withPrecisionColumnTypes=["real","double","double precision","float","real","numeric","decimal","date","time","datetime"],this.withScaleColumnTypes=["real","double","double precision","float","real","numeric","decimal"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"datetime('now')",updateDate:"datetime",updateDateDefault:"datetime('now')",deleteDate:"datetime",deleteDateNullable:!0,version:"integer",treeLevel:"integer",migrationId:"integer",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.cteCapabilities={enabled:!0,requiresRecursiveHint:!0},this.attachedDatabases={},this.connection=e,this.options=e.options,this.database=this.options.database,this.loadDependencies()}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new sK(this)),this.queryRunner}async connect(){this.databaseConnection=await this.createDatabaseConnection()}afterConnect(){return Promise.resolve()}async disconnect(){return new Promise((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close(e,t)})}hasAttachedDatabases(){return!!Object.keys(this.attachedDatabases).length}getAttachedDatabaseHandleByRelativePath(e){var t,i;return(i=(t=this.attachedDatabases)===null||t===void 0?void 0:t[e])===null||i===void 0?void 0:i.attachHandle}getAttachedDatabasePathRelativeByHandle(e){var t;return(t=Object.values(this.attachedDatabases).find(({attachHandle:i})=>e===i))===null||t===void 0?void 0:t.attachFilepathRelative}createSchemaBuilder(){return new A0(this.connection)}preparePersistentValue(e,t){return t.transformer&&(e=$n.transformTo(t.transformer,e)),e==null?e:t.type===Boolean||t.type==="boolean"?e===!0?1:0:t.type==="date"?Ye.mixedDateToDateString(e):t.type==="time"?Ye.mixedDateToTimeString(e):t.type==="datetime"||t.type===Date?Ye.mixedDateToUtcDatetimeString(e):t.type==="simple-array"?Ye.simpleArrayToString(e):t.type==="simple-json"?Ye.simpleJsonToString(e):t.type==="simple-enum"?Ye.simpleEnumToString(e):e}prepareHydratedValue(e,t){return e==null?t.transformer?$n.transformFrom(t.transformer,e):e:(t.type===Boolean||t.type==="boolean"?e=!!e:t.type==="datetime"||t.type===Date?(e&&typeof e=="string"&&(/^\d\d\d\d-\d\d-\d\d \d\d:\d\d/.test(e)&&(e=e.replace(" ","T")),/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d(:\d\d(\.\d\d\d)?)?$/.test(e)&&(e+="Z")),e=Ye.normalizeHydratedDate(e)):t.type==="date"?e=Ye.mixedDateToDateString(e):t.type==="time"?e=Ye.mixedTimeToString(e):t.type==="simple-array"?e=Ye.stringToSimpleArray(e):t.type==="simple-json"?e=Ye.stringToSimpleJson(e):t.type==="simple-enum"?e=Ye.stringToSimpleEnum(e,t):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=$n.transformFrom(t.transformer,e)),e)}escapeQueryWithParameters(e,t,i){const r=Object.keys(i).map(s=>typeof i[s]=="boolean"?i[s]===!0?1:0:i[s]instanceof Date?Ye.mixedDateToUtcDatetimeString(i[s]):i[s]);return!t||!Object.keys(t).length?[e,r]:(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o)=>{if(!t.hasOwnProperty(o))return s;let l=t[o];return a?l.map(c=>(r.push(c),this.createParameter(o,r.length-1))).join(", "):typeof l=="function"?l():typeof l=="number"?String(l):typeof l=="boolean"?(r.push(+l),this.createParameter(o,r.length-1)):l instanceof Date?(r.push(Ye.mixedDateToUtcDatetimeString(l)),this.createParameter(o,r.length-1)):(r.push(l),this.createParameter(o,r.length-1))}),[e,r])}escape(e){return'"'+e+'"'}buildTableName(e,t,i){return e}parseTableName(e){var t;const i=this.database,r=void 0;if(se.isTable(e)||se.isView(e)){const a=this.parseTableName(e.schema?'"'.concat(e.schema,'"."').concat(e.name,'"'):e.name);return{database:e.database||a.database||i,schema:e.schema||a.schema||r,tableName:a.tableName}}if(se.isTableForeignKey(e)){const a=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||a.database||i,schema:e.referencedSchema||a.schema||r,tableName:a.tableName}}if(se.isEntityMetadata(e))return{database:e.database||i,schema:e.schema||r,tableName:e.tableName};const s=e.split(".");return s.length===3?{database:s[0]||i,schema:s[1]||r,tableName:s[2]}:s.length===2?{database:(t=this.getAttachedDatabasePathRelativeByHandle(s[0]))!==null&&t!==void 0?t:i,schema:s[0],tableName:s[1]}:{database:i,schema:r,tableName:e}}normalizeType(e){return e.type===Number||e.type==="int"?"integer":e.type===String?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":e.type==="uuid"?"varchar":e.type==="simple-array"||e.type==="simple-json"?"text":e.type==="simple-enum"?"varchar":e.type||""}normalizeDefault(e){const t=e.default;if(typeof t=="number")return""+t;if(typeof t=="boolean")return t?"1":"0";if(typeof t=="function")return t();if(typeof t=="string")return"'".concat(t,"'");if(t!=null)return"".concat(t)}normalizeIsUnique(e){return e.entityMetadata.uniques.some(t=>t.columns.length===1&&t.columns[0]===e)}getColumnLength(e){return e.length?e.length.toString():""}createFullType(e){let t=e.type;return e.enum?"varchar":(e.length?t+="("+e.length+")":e.precision!==null&&e.precision!==void 0&&e.scale!==null&&e.scale!==void 0?t+="("+e.precision+","+e.scale+")":e.precision!==null&&e.precision!==void 0&&(t+="("+e.precision+")"),e.isArray&&(t+=" array"),t)}obtainMasterConnection(){return Promise.resolve()}obtainSlaveConnection(){return Promise.resolve()}createGeneratedMap(e,t,i,r){const s=e.generatedColumns.reduce((a,o)=>{let l;return o.generationStrategy==="increment"&&t&&(l=t-r+i+1),l?Fe.mergeDeep(a,o.createValueMap(l)):a},{});return Object.keys(s).length>0?s:void 0}findChangedColumns(e,t){return t.filter(i=>{const r=e.find(a=>a.name===i.databaseName);return r?r.name!==i.databaseName||r.type!==this.normalizeType(i)||r.length!==i.length||r.precision!==i.precision||r.scale!==i.scale||this.normalizeDefault(i)!==r.default||r.isPrimary!==i.isPrimary||r.isNullable!==i.isNullable||r.generatedType!==i.generatedType||r.asExpression!==i.asExpression||r.isUnique!==this.normalizeIsUnique(i)||r.enum&&i.enum&&!Fe.isArraysEqual(r.enum,i.enum.map(a=>a+""))||i.generationStrategy!=="uuid"&&r.isGenerated!==i.isGenerated:!1})}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"?"}createDatabaseConnection(){return new Promise((e,t)=>{const i=Object.assign({},{name:this.options.database,location:this.options.location},this.options.extra||{});this.sqlite.openDatabase(i,r=>{const s=r;s.executeSql("PRAGMA foreign_keys = ON",[],a=>{e(s)},a=>{t(a)})},r=>{t(r)})})}loadDependencies(){try{const e=this.options.driver||require("react-native-sqlite-storage");this.sqlite=e}catch(e){throw new gd("React-Native","react-native-sqlite-storage")}}}class oK extends yd{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new eo(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async query(e,t,i=!1){if(this.isReleased)throw new Oi;const r=this.driver.connection;return new Promise(async(s,a)=>{const o=await this.connect(),l=e.substr(0,11)==="INSERT INTO";r.logger.logQuery(e,t,this);const c=(d,h)=>{const f=this.driver.options.maxQueryExecutionTime,g=+new Date-u;f&&g>f&&r.logger.logQuerySlow(g,e,t,this),d&&(r.logger.logQueryError(d,e,t,this),a(new ia(e,t,d)));const _=new pa;_.raw=h,!l&&Array.isArray(h)&&(_.records=h),s(i?_:_.raw)},u=+new Date;l?o.execSQL(e,t,c):o.all(e,t,c)})}parametrize(e,t=0){return Object.keys(e).map((i,r)=>'"'.concat(i,'"')+"=?")}}class lK extends Xf{constructor(e){super(e),this.connection=e,this.options=e.options,this.database=this.options.database,this.driver=this.options.driver,this.loadDependencies()}async disconnect(){return new Promise((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close().then(e).catch(t)})}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new oK(this)),this.queryRunner}normalizeType(e){return e.type===Buffer?"blob":super.normalizeType(e)}createDatabaseConnection(){return new Promise((e,t)=>{const i=Object.assign({},{readOnly:this.options.readOnly,key:this.options.key,multithreading:this.options.multithreading,migrate:this.options.migrate,iosFlags:this.options.iosFlags,androidFlags:this.options.androidFlags},this.options.extra||{});new this.sqlite(this.options.database,i,(r,s)=>{if(r)return t(r);s.resultType(this.sqlite.RESULTSASOBJECT),s.execSQL("PRAGMA foreign_keys = ON",[],(a,o)=>{if(a)return t(a);e(s)})})})}loadDependencies(){if(this.sqlite=this.driver,!this.driver)throw new gd("Nativescript","nativescript-sqlite")}}class cK extends yd{constructor(e){super(),this.isDirty=!1,this.driver=e,this.connection=e.connection,this.broadcaster=new eo(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async flush(){this.isDirty&&(await this.driver.autoSave(),this.isDirty=!1)}async release(){return await this.flush(),super.release()}async commitTransaction(){await super.commitTransaction(),this.isTransactionActive||await this.flush()}async query(e,t=[],i=!1){if(this.isReleased)throw new Oi;const r=e.trim().split(" ",1)[0],s=this.driver.databaseConnection;this.driver.connection.logger.logQuery(e,t,this);const a=+new Date;let o;try{o=s.prepare(e),t&&(t=t.map(f=>typeof f<"u"?f:null),o.bind(t));const l=this.driver.options.maxQueryExecutionTime,u=+new Date-a;l&&u>l&&this.driver.connection.logger.logQuerySlow(u,e,t,this);const d=[];for(;o.step();)d.push(o.getAsObject());const h=new pa;return h.affected=s.getRowsModified(),h.records=d,h.raw=d,o.free(),r!=="SELECT"&&(this.isDirty=!0),i?h:h.raw}catch(l){throw o&&o.free(),this.driver.connection.logger.logQueryError(l,e,t,this),new ia(e,t,l)}}}class uK extends Xf{constructor(e){if(super(e),this.options.autoSave&&!this.options.location&&!this.options.autoSaveCallback)throw new rQ("location or autoSaveCallback");this.loadDependencies()}async connect(){this.databaseConnection=await this.createDatabaseConnection()}async disconnect(){this.queryRunner=void 0,this.databaseConnection.close()}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new cK(this)),this.queryRunner}async load(e,t=!0){if(typeof e=="string")if(Kt.type==="node")if(Kt.fileExist(e)){const i=Kt.readFileSync(e);return this.createDatabaseConnectionWithImport(i)}else{if(t)throw new J("File ".concat(e," does not exist"));return this.createDatabaseConnectionWithImport()}else{let i=null;if(this.options.useLocalForage)if(window.localforage)i=await window.localforage.getItem(e);else throw new J("localforage is not defined - please import localforage.js into your site");else i=Kt.getGlobalVariable().localStorage.getItem(e);if(i!=null)return this.createDatabaseConnectionWithImport(JSON.parse(i));if(t)throw new J("File ".concat(e," does not exist"));return this.createDatabaseConnectionWithImport()}else return this.createDatabaseConnectionWithImport(e)}async save(e){if(!e&&!this.options.location)throw new J("No location is set, specify a location parameter or add the location option to your configuration");let t="";if(e?t=e:this.options.location&&(t=this.options.location),Kt.type==="node")try{const i=Buffer.from(this.databaseConnection.export());await Kt.writeFile(t,i)}catch(i){throw new J("Could not save database, error: ".concat(i))}else{const i=this.databaseConnection.export(),r=[].slice.call(i);if(this.options.useLocalForage)if(window.localforage)await window.localforage.setItem(t,JSON.stringify(r));else throw new J("localforage is not defined - please import localforage.js into your site");else Kt.getGlobalVariable().localStorage.setItem(t,JSON.stringify(r))}}async autoSave(){var e;this.options.autoSave&&!(!((e=this.queryRunner)===null||e===void 0)&&e.isTransactionActive)&&(this.options.autoSaveCallback?await this.options.autoSaveCallback(this.export()):await this.save())}export(){return this.databaseConnection.export()}createGeneratedMap(e,t){const i=e.generatedColumns.reduce((r,s)=>{if(s.isPrimary&&s.generationStrategy==="increment"){const a="SELECT last_insert_rowid()";try{let o=this.databaseConnection.exec(a);return this.connection.logger.logQuery(a),Fe.mergeDeep(r,s.createValueMap(o[0].values[0][0]))}catch(o){this.connection.logger.logQueryError(o,a,[])}}return r},{});return Object.keys(i).length>0?i:void 0}createDatabaseConnection(){return this.options.location?this.load(this.options.location,!1):this.createDatabaseConnectionWithImport(this.options.database)}async createDatabaseConnectionWithImport(e){const i=typeof this.sqlite.Database=="function"?this.sqlite:await this.sqlite(this.options.sqlJsConfig);return e&&e.length>0?this.databaseConnection=new i.Database(e):this.databaseConnection=new i.Database,this.databaseConnection.exec("PRAGMA foreign_keys = ON"),this.databaseConnection}loadDependencies(){if(Kt.type==="browser"){const e=this.options.driver||window.SQL;this.sqlite=e}else try{const e=this.options.driver||Kt.load("sql.js");this.sqlite=e}catch(e){throw new gd("sql.js","sql.js")}}}class dK extends yd{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new eo(this)}async startTransaction(){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive&&typeof this.transaction>"u")throw new Kr;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transaction=void 0,this.isTransactionActive=!1,this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive&&typeof this.transaction>"u")throw new Kr;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transaction=void 0,this.isTransactionActive=!1,this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async beforeMigration(){const e=await this.connect();return new Promise((t,i)=>{e.exec([{sql:"PRAGMA foreign_keys = OFF",args:[]}],!1,r=>r?i(r):t())})}async afterMigration(){const e=await this.connect();return new Promise((t,i)=>{e.exec([{sql:"PRAGMA foreign_keys = ON",args:[]}],!1,r=>r?i(r):t())})}async query(e,t,i=!1){if(this.isReleased)throw new Oi;return new Promise(async(r,s)=>{const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=+new Date;a.transaction(async l=>{typeof this.transaction>"u"&&(await this.startTransaction(),this.transaction=l),this.transaction.executeSql(e,t,(c,u)=>{const d=this.driver.options.maxQueryExecutionTime,f=+new Date-o;d&&f>d&&this.driver.connection.logger.logQuerySlow(f,e,t,this);const m=new pa;if(u!=null&&u.hasOwnProperty("rowsAffected")&&(m.affected=u.rowsAffected),u!=null&&u.hasOwnProperty("rows")){let g=[];for(let _=0;_<u.rows.length;_++)g.push(u.rows.item(_));m.raw=g,m.records=g}e.startsWith("INSERT INTO")&&(m.raw=u.insertId),r(i?m:m.raw)},(c,u)=>{this.driver.connection.logger.logQueryError(u,e,t,this),s(new ia(e,t,u))})},async l=>{await this.rollbackTransaction(),s(l)},()=>{this.isTransactionActive=!1,this.transaction=void 0})})}}class hK extends Xf{constructor(e){super(e),this.database=this.options.database,this.sqlite=this.options.driver}async disconnect(){return new Promise((e,t)=>{try{this.queryRunner=void 0,this.databaseConnection._db.close(),this.databaseConnection=void 0,e()}catch(i){t(i)}})}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new dK(this)),this.queryRunner}createDatabaseConnection(){return new Promise((e,t)=>{try{const i=this.sqlite.openDatabase(this.options.database);i.transaction(r=>{r.executeSql("PRAGMA foreign_keys = ON",[],(s,a)=>{e(i)},(s,a)=>{t({transaction:s,error:a})})},r=>{t(r)})}catch(i){t(i)}})}}class fK extends k0{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.client=t,this.broadcaster=new eo(this)}async connect(){return{}}release(){return this.isReleased=!0,this.databaseConnection&&this.databaseConnection.release(),Promise.resolve()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}this.transactionDepth===0?await this.client.startTransaction():await this.query("SAVEPOINT typeorm_".concat(this.transactionDepth)),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.client.commitTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.client.rollbackTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,i=!1){if(this.isReleased)throw new Oi;const r=await this.client.query(e,t),s=new pa;return s.raw=r,r!=null&&r.hasOwnProperty("records")&&Array.isArray(r.records)&&(s.records=r.records),r!=null&&r.hasOwnProperty("numberOfRecordsUpdated")&&(s.affected=r.numberOfRecordsUpdated),i?s:s.raw}stream(e,t,i,r){if(this.isReleased)throw new Oi;return new Promise(async(s,a)=>{try{const l=(await this.connect()).query(e,t);i&&l.on("end",i),r&&l.on("error",r),s(l)}catch(o){a(o)}})}async getDatabases(){return Promise.resolve([])}async getSchemas(e){throw new J("MySql driver does not support table schemas")}async hasDatabase(e){return!!(await this.query("SELECT * FROM `INFORMATION_SCHEMA`.`SCHEMATA` WHERE `SCHEMA_NAME` = '".concat(e,"'"))).length}async getCurrentDatabase(){return(await this.query("SELECT DATABASE() AS `db_name`"))[0].db_name}async hasSchema(e){throw new J("MySql driver does not support table schemas")}async getCurrentSchema(){return(await this.query("SELECT SCHEMA() AS `schema_name`"))[0].schema_name}async hasTable(e){const t=this.driver.parseTableName(e),i="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_SCHEMA` = '".concat(t.database,"' AND `TABLE_NAME` = '").concat(t.tableName,"'");return!!(await this.query(i)).length}async hasColumn(e,t){const i=this.driver.parseTableName(e),r=se.isTableColumn(t)?t.name:t,s="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_SCHEMA` = '".concat(i.database,"' AND `TABLE_NAME` = '").concat(i.tableName,"' AND `COLUMN_NAME` = '").concat(r,"'");return!!(await this.query(s)).length}async createDatabase(e,t){const i=t?"CREATE DATABASE IF NOT EXISTS `".concat(e,"`"):"CREATE DATABASE `".concat(e,"`"),r="DROP DATABASE `".concat(e,"`");await this.executeQueries(new H(i),new H(r))}async dropDatabase(e,t){const i=t?"DROP DATABASE IF EXISTS `".concat(e,"`"):"DROP DATABASE `".concat(e,"`"),r="CREATE DATABASE `".concat(e,"`");await this.executeQueries(new H(i),new H(r))}async createSchema(e,t){throw new J("Schema create queries are not supported by MySql driver.")}async dropSchema(e,t){throw new J("Schema drop queries are not supported by MySql driver.")}async createTable(e,t=!1,i=!0){if(t&&await this.hasTable(e))return Promise.resolve();const r=[],s=[];return r.push(this.createTableSql(e,i)),s.push(this.dropTableSql(e)),e.indices.forEach(a=>s.push(this.dropIndexSql(e,a))),i&&e.foreignKeys.forEach(a=>s.push(this.dropForeignKeySql(e,a))),this.executeQueries(r,s)}async dropTable(e,t,i=!0){if(t&&!await this.hasTable(e))return Promise.resolve();const r=i,s=this.getTablePath(e),a=await this.getCachedTable(s),o=[],l=[];i&&a.foreignKeys.forEach(c=>o.push(this.dropForeignKeySql(a,c))),a.indices.forEach(c=>o.push(this.dropIndexSql(a,c))),o.push(this.dropTableSql(a)),l.push(this.createTableSql(a,r)),await this.executeQueries(o,l)}async createView(e,t=!1){const i=[],r=[];i.push(this.createViewSql(e)),t&&i.push(await this.insertViewDefinitionSql(e)),r.push(this.dropViewSql(e)),t&&r.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(i,r)}async dropView(e){const t=se.isView(e)?e.name:e,i=await this.getCachedView(t),r=[],s=[];r.push(await this.deleteViewDefinitionSql(i)),r.push(this.dropViewSql(i)),s.push(await this.insertViewDefinitionSql(i)),s.push(this.createViewSql(i)),await this.executeQueries(r,s)}async renameTable(e,t){const i=[],r=[],s=se.isTable(e)?e:await this.getCachedTable(e),a=s.clone(),{database:o}=this.driver.parseTableName(s);a.name=o?"".concat(o,".").concat(t):t,i.push(new H("RENAME TABLE ".concat(this.escapePath(s)," TO ").concat(this.escapePath(a)))),r.push(new H("RENAME TABLE ".concat(this.escapePath(a)," TO ").concat(this.escapePath(s)))),a.indices.forEach(l=>{const c=l.columnNames.map(h=>"`".concat(h,"`")).join(", "),u=this.connection.namingStrategy.indexName(a,l.columnNames,l.where);let d="";l.isUnique&&(d+="UNIQUE "),l.isSpatial&&(d+="SPATIAL "),l.isFulltext&&(d+="FULLTEXT "),i.push(new H("ALTER TABLE ".concat(this.escapePath(a)," DROP INDEX `").concat(l.name,"`, ADD ").concat(d,"INDEX `").concat(u,"` (").concat(c,")"))),r.push(new H("ALTER TABLE ".concat(this.escapePath(a)," DROP INDEX `").concat(u,"`, ADD ").concat(d,"INDEX `").concat(l.name,"` (").concat(c,")"))),l.name=u}),a.foreignKeys.forEach(l=>{const c=l.columnNames.map(m=>"`".concat(m,"`")).join(", "),u=l.referencedColumnNames.map(m=>"`".concat(m,"`")).join(","),d=this.connection.namingStrategy.foreignKeyName(a,l.columnNames);let h="ALTER TABLE ".concat(this.escapePath(a)," DROP FOREIGN KEY `").concat(l.name,"`, ADD CONSTRAINT `").concat(d,"` FOREIGN KEY (").concat(c,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(l)),"(").concat(u,")");l.onDelete&&(h+=" ON DELETE ".concat(l.onDelete)),l.onUpdate&&(h+=" ON UPDATE ".concat(l.onUpdate));let f="ALTER TABLE ".concat(this.escapePath(a)," DROP FOREIGN KEY `").concat(d,"`, ADD CONSTRAINT `").concat(l.name,"` FOREIGN KEY (").concat(c,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(l)),"(").concat(u,")");l.onDelete&&(f+=" ON DELETE ".concat(l.onDelete)),l.onUpdate&&(f+=" ON UPDATE ".concat(l.onUpdate)),i.push(new H(h)),r.push(new H(f)),l.name=d}),await this.executeQueries(i,r),s.name=a.name,this.replaceCachedTable(s,a)}async addColumn(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone(),s=[],a=[],o=r.primaryColumns.length>0;if(s.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD ").concat(this.buildCreateColumnSql(t,o,!1)))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP COLUMN `").concat(t.name,"`"))),t.isPrimary&&o){const c=r.columns.find(h=>h.isGenerated&&h.generationStrategy==="increment");if(c){const h=c.clone();h.isGenerated=!1,h.generationStrategy=void 0,s.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(t.name,"` ").concat(this.buildCreateColumnSql(h,!0)))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(t,!0))))}const u=r.primaryColumns;let d=u.map(h=>"`".concat(h.name,"`")).join(", ");if(s.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP PRIMARY KEY"))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD PRIMARY KEY (").concat(d,")"))),u.push(t),d=u.map(h=>"`".concat(h.name,"`")).join(", "),s.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD PRIMARY KEY (").concat(d,")"))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP PRIMARY KEY"))),c){const h=c.clone();h.isGenerated=!1,h.generationStrategy=void 0,s.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(t,!0)))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(t.name,"` ").concat(this.buildCreateColumnSql(h,!0))))}}const l=r.indices.find(c=>c.columnNames.length===1&&c.columnNames[0]===t.name);if(l)s.push(this.createIndexSql(i,l)),a.push(this.dropIndexSql(i,l));else if(t.isUnique){const c=new yn({name:this.connection.namingStrategy.indexName(i,[t.name]),columnNames:[t.name],isUnique:!0});r.indices.push(c),r.uniques.push(new hi({name:c.name,columnNames:c.columnNames})),s.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD UNIQUE INDEX `").concat(c.name,"` (`").concat(t.name,"`)"))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP INDEX `").concat(c.name,"`")))}await this.executeQueries(s,a),r.addColumn(t),this.replaceCachedTable(i,r)}async addColumns(e,t){for(const i of t)await this.addColumn(e,i)}async renameColumn(e,t,i){const r=se.isTable(e)?e:await this.getCachedTable(e),s=se.isTableColumn(t)?t:r.columns.find(o=>o.name===t);if(!s)throw new J('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));let a;se.isTableColumn(i)?a=i:(a=s.clone(),a.name=i),await this.changeColumn(r,s,a)}async changeColumn(e,t,i){const r=se.isTable(e)?e:await this.getCachedTable(e);let s=r.clone();const a=[],o=[],l=se.isTableColumn(t)?t:r.columns.find(c=>c.name===t);if(!l)throw new J('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));if(i.isGenerated!==l.isGenerated&&i.generationStrategy!=="uuid"||l.type!==i.type||l.length!==i.length||l.generatedType!==i.generatedType)await this.dropColumn(r,l),await this.addColumn(r,i),s=r.clone();else{if(i.name!==l.name){a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(l.name,"` `").concat(i.name,"` ").concat(this.buildCreateColumnSql(l,!0,!0)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(i.name,"` `").concat(l.name,"` ").concat(this.buildCreateColumnSql(l,!0,!0)))),s.findColumnIndices(l).forEach(u=>{u.columnNames.splice(u.columnNames.indexOf(l.name),1),u.columnNames.push(i.name);const d=u.columnNames.map(m=>"`".concat(m,"`")).join(", "),h=this.connection.namingStrategy.indexName(s,u.columnNames,u.where);let f="";u.isUnique&&(f+="UNIQUE "),u.isSpatial&&(f+="SPATIAL "),u.isFulltext&&(f+="FULLTEXT "),a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," DROP INDEX `").concat(u.name,"`, ADD ").concat(f,"INDEX `").concat(h,"` (").concat(d,")"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," DROP INDEX `").concat(h,"`, ADD ").concat(f,"INDEX `").concat(u.name,"` (").concat(d,")"))),u.name=h}),s.findColumnForeignKeys(l).forEach(u=>{u.columnNames.splice(u.columnNames.indexOf(l.name),1),u.columnNames.push(i.name);const d=u.columnNames.map(_=>"`".concat(_,"`")).join(", "),h=u.referencedColumnNames.map(_=>"`".concat(_,"`")).join(","),f=this.connection.namingStrategy.foreignKeyName(s,u.columnNames);let m="ALTER TABLE ".concat(this.escapePath(r)," DROP FOREIGN KEY `").concat(u.name,"`, ADD CONSTRAINT `").concat(f,"` FOREIGN KEY (").concat(d,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(u)),"(").concat(h,")");u.onDelete&&(m+=" ON DELETE ".concat(u.onDelete)),u.onUpdate&&(m+=" ON UPDATE ".concat(u.onUpdate));let g="ALTER TABLE ".concat(this.escapePath(r)," DROP FOREIGN KEY `").concat(f,"`, ADD CONSTRAINT `").concat(u.name,"` FOREIGN KEY (").concat(d,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(u)),"(").concat(h,")");u.onDelete&&(g+=" ON DELETE ".concat(u.onDelete)),u.onUpdate&&(g+=" ON UPDATE ".concat(u.onUpdate)),a.push(new H(m)),o.push(new H(g)),u.name=f});const c=s.columns.find(u=>u.name===l.name);s.columns[s.columns.indexOf(c)].name=i.name,l.name=i.name}if(this.isColumnChanged(l,i,!0)&&(a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(l.name,"` ").concat(this.buildCreateColumnSql(i,!0)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(i.name,"` ").concat(this.buildCreateColumnSql(l,!0))))),i.isPrimary!==l.isPrimary){const c=s.columns.find(d=>d.isGenerated&&d.generationStrategy==="increment");if(c){const d=c.clone();d.isGenerated=!1,d.generationStrategy=void 0,a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(c.name,"` ").concat(this.buildCreateColumnSql(d,!0)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(d.name,"` ").concat(this.buildCreateColumnSql(c,!0))))}const u=s.primaryColumns;if(u.length>0){const d=u.map(h=>"`".concat(h.name,"`")).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," DROP PRIMARY KEY"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," ADD PRIMARY KEY (").concat(d,")")))}if(i.isPrimary===!0){u.push(i);const d=s.columns.find(f=>f.name===i.name);d.isPrimary=!0;const h=u.map(f=>"`".concat(f.name,"`")).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," ADD PRIMARY KEY (").concat(h,")"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," DROP PRIMARY KEY")))}else{const d=u.find(f=>f.name===i.name);u.splice(u.indexOf(d),1);const h=s.columns.find(f=>f.name===i.name);if(h.isPrimary=!1,u.length>0){const f=u.map(m=>"`".concat(m.name,"`")).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," ADD PRIMARY KEY (").concat(f,")"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," DROP PRIMARY KEY")))}}if(c){const d=c.clone();d.isGenerated=!1,d.generationStrategy=void 0,a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(d.name,"` ").concat(this.buildCreateColumnSql(c,!0)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(c.name,"` ").concat(this.buildCreateColumnSql(d,!0))))}}if(i.isUnique!==l.isUnique)if(i.isUnique===!0){const c=new yn({name:this.connection.namingStrategy.indexName(r,[i.name]),columnNames:[i.name],isUnique:!0});s.indices.push(c),s.uniques.push(new hi({name:c.name,columnNames:c.columnNames})),a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," ADD UNIQUE INDEX `").concat(c.name,"` (`").concat(i.name,"`)"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," DROP INDEX `").concat(c.name,"`")))}else{const c=s.indices.find(d=>d.columnNames.length===1&&d.isUnique===!0&&!!d.columnNames.find(h=>h===i.name));s.indices.splice(s.indices.indexOf(c),1);const u=s.uniques.find(d=>d.name===c.name);s.uniques.splice(s.uniques.indexOf(u),1),a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," DROP INDEX `").concat(c.name,"`"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," ADD UNIQUE INDEX `").concat(c.name,"` (`").concat(i.name,"`)")))}}await this.executeQueries(a,o),this.replaceCachedTable(r,s)}async changeColumns(e,t){for(const{oldColumn:i,newColumn:r}of t)await this.changeColumn(e,i,r)}async dropColumn(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableColumn(t)?t:i.findColumnByName(t);if(!r)throw new J('Column "'.concat(t,'" was not found in table "').concat(i.name,'"'));const s=i.clone(),a=[],o=[];if(r.isPrimary){const c=s.columns.find(h=>h.isGenerated&&h.generationStrategy==="increment");if(c){const h=c.clone();h.isGenerated=!1,h.generationStrategy=void 0,a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(c.name,"` ").concat(this.buildCreateColumnSql(h,!0)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(c,!0))))}const u=s.primaryColumns.map(h=>"`".concat(h.name,"`")).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(s)," DROP PRIMARY KEY"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(s)," ADD PRIMARY KEY (").concat(u,")")));const d=s.findColumnByName(r.name);if(d.isPrimary=!1,s.primaryColumns.length>0){const h=s.primaryColumns.map(f=>"`".concat(f.name,"`")).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(s)," ADD PRIMARY KEY (").concat(h,")"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(s)," DROP PRIMARY KEY")))}if(c&&c.name!==r.name){const h=c.clone();h.isGenerated=!1,h.generationStrategy=void 0,a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(c,!0)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(c.name,"` ").concat(this.buildCreateColumnSql(h,!0))))}}const l=s.indices.find(c=>c.columnNames.length===1&&c.columnNames[0]===r.name);if(l)s.indices.splice(s.indices.indexOf(l),1),a.push(this.dropIndexSql(i,l)),o.push(this.createIndexSql(i,l));else if(r.isUnique){const c=this.connection.namingStrategy.uniqueConstraintName(i,[r.name]),u=s.uniques.find(f=>f.name===c);u&&s.uniques.splice(s.uniques.indexOf(u),1);const d=this.connection.namingStrategy.indexName(i,[r.name]),h=s.indices.find(f=>f.name===d);h&&s.indices.splice(s.indices.indexOf(h),1),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP INDEX `").concat(d,"`"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD UNIQUE INDEX `").concat(d,"` (`").concat(r.name,"`)")))}a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP COLUMN `").concat(r.name,"`"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD ").concat(this.buildCreateColumnSql(r,!0)))),await this.executeQueries(a,o),s.removeColumn(r),this.replaceCachedTable(i,s)}async dropColumns(e,t){for(const i of t)await this.dropColumn(e,i)}async createPrimaryKey(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone(),s=this.createPrimaryKeySql(i,t),a=this.dropPrimaryKeySql(i);await this.executeQueries(s,a),r.columns.forEach(o=>{t.find(l=>l===o.name)&&(o.isPrimary=!0)}),this.replaceCachedTable(i,r)}async updatePrimaryKeys(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone(),s=t.map(h=>h.name),a=[],o=[],l=r.columns.find(h=>h.isGenerated&&h.generationStrategy==="increment");if(l){const h=l.clone();h.isGenerated=!1,h.generationStrategy=void 0,a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(l.name,"` ").concat(this.buildCreateColumnSql(h,!0)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(l,!0))))}const c=r.primaryColumns;if(c.length>0){const h=c.map(f=>"`".concat(f.name,"`")).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP PRIMARY KEY"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD PRIMARY KEY (").concat(h,")")))}r.columns.filter(h=>s.indexOf(h.name)!==-1).forEach(h=>h.isPrimary=!0);const u=s.map(h=>"`".concat(h,"`")).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD PRIMARY KEY (").concat(u,")"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP PRIMARY KEY")));const d=l||t.find(h=>h.isGenerated&&h.generationStrategy==="increment");if(d){const h=d.clone();h.isGenerated=!1,h.generationStrategy=void 0,a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(d,!0)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," CHANGE `").concat(d.name,"` ").concat(this.buildCreateColumnSql(h,!0))));const f=r.columns.find(m=>m.name===d.name);f.isGenerated=!0,f.generationStrategy="increment"}await this.executeQueries(a,o),this.replaceCachedTable(i,r)}async dropPrimaryKey(e){const t=se.isTable(e)?e:await this.getCachedTable(e),i=this.dropPrimaryKeySql(t),r=this.createPrimaryKeySql(t,t.primaryColumns.map(s=>s.name));await this.executeQueries(i,r),t.primaryColumns.forEach(s=>{s.isPrimary=!1})}async createUniqueConstraint(e,t){throw new J("MySql does not support unique constraints. Use unique index instead.")}async createUniqueConstraints(e,t){throw new J("MySql does not support unique constraints. Use unique index instead.")}async dropUniqueConstraint(e,t){throw new J("MySql does not support unique constraints. Use unique index instead.")}async dropUniqueConstraints(e,t){throw new J("MySql does not support unique constraints. Use unique index instead.")}async createCheckConstraint(e,t){throw new J("MySql does not support check constraints.")}async createCheckConstraints(e,t){throw new J("MySql does not support check constraints.")}async dropCheckConstraint(e,t){throw new J("MySql does not support check constraints.")}async dropCheckConstraints(e,t){throw new J("MySql does not support check constraints.")}async createExclusionConstraint(e,t){throw new J("MySql does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new J("MySql does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new J("MySql does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new J("MySql does not support exclusion constraints.")}async createForeignKey(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(i,t.columnNames));const r=this.createForeignKeySql(i,t),s=this.dropForeignKeySql(i,t);await this.executeQueries(r,s),i.addForeignKey(t)}async createForeignKeys(e,t){const i=t.map(r=>this.createForeignKey(e,r));await Promise.all(i)}async dropForeignKey(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableForeignKey(t)?t:i.foreignKeys.find(o=>o.name===t);if(!r)throw new J("Supplied foreign key was not found in table ".concat(i.name));const s=this.dropForeignKeySql(i,r),a=this.createForeignKeySql(i,r);await this.executeQueries(s,a),i.removeForeignKey(r)}async dropForeignKeys(e,t){const i=t.map(r=>this.dropForeignKey(e,r));await Promise.all(i)}async createIndex(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(i,t));const r=this.createIndexSql(i,t),s=this.dropIndexSql(i,t);await this.executeQueries(r,s),i.addIndex(t,!0)}async createIndices(e,t){const i=t.map(r=>this.createIndex(e,r));await Promise.all(i)}async dropIndex(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableIndex(t)?t:i.indices.find(o=>o.name===t);if(!r)throw new J("Supplied index ".concat(t," was not found in table ").concat(i.name));r.name||(r.name=this.generateIndexName(i,r));const s=this.dropIndexSql(i,r),a=this.createIndexSql(i,r);await this.executeQueries(s,a),i.removeIndex(r,!0)}async dropIndices(e,t){const i=t.map(r=>this.dropIndex(e,r));await Promise.all(i)}async clearTable(e){await this.query("TRUNCATE TABLE ".concat(this.escapePath(e)))}async clearDatabase(e){const t=e||this.driver.database;if(t){if(!await this.hasDatabase(t))return Promise.resolve()}else throw new J("Can not clear database. No database is specified");const i=this.isTransactionActive;i||await this.startTransaction();try{const r="SELECT concat('DROP VIEW IF EXISTS `', table_schema, '`.`', table_name, '`') AS `query` FROM `INFORMATION_SCHEMA`.`VIEWS` WHERE `TABLE_SCHEMA` = '".concat(t,"'"),s=await this.query(r);await Promise.all(s.map(u=>this.query(u.query)));const a="SET FOREIGN_KEY_CHECKS = 0;",o="SELECT concat('DROP TABLE IF EXISTS `', table_schema, '`.`', table_name, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_SCHEMA` = '".concat(t,"'"),l="SET FOREIGN_KEY_CHECKS = 1;";await this.query(a);const c=await this.query(o);await Promise.all(c.map(u=>this.query(u.query))),await this.query(l),i||await this.commitTransaction()}catch(r){try{i||await this.rollbackTransaction()}catch(s){}throw r}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const i=await this.getCurrentDatabase(),r=e.map(o=>{let{database:l,tableName:c}=this.driver.parseTableName(o);return l||(l=i),"(`t`.`schema` = '".concat(l,"' AND `t`.`name` = '").concat(c,"')")}).join(" OR "),s="SELECT `t`.*, `v`.`check_option` FROM ".concat(this.escapePath(this.getTypeormMetadataTableName())," `t` ")+"INNER JOIN `information_schema`.`views` `v` ON `v`.`table_schema` = `t`.`schema` AND `v`.`table_name` = `t`.`name` WHERE `t`.`type` = '".concat(Ke.VIEW,"' ").concat(r?"AND (".concat(r,")"):"");return(await this.query(s)).map(o=>{const l=new Ga,c=o.schema===i?void 0:o.schema;return l.database=o.schema,l.name=this.driver.buildTableName(o.name,void 0,c),l.expression=o.value,l})}async loadTables(e){if(e&&e.length===0)return[];const t=[],i=await this.getCurrentDatabase();if(e){const y="SELECT TABLE_NAME, TABLE_SCHEMA FROM `INFORMATION_SCHEMA`.`TABLES` WHERE "+e.map(T=>{let[N,P]=T.split(".");return P||(P=N,N=this.driver.database||i),"(`TABLE_SCHEMA` = '".concat(N,"' AND `TABLE_NAME` = '").concat(P,"')")}).join(" OR ");t.push(...await this.query(y))}else{const v="SELECT TABLE_NAME, TABLE_SCHEMA FROM `INFORMATION_SCHEMA`.`TABLES`";t.push(...await this.query(v))}if(t.length===0)return[];const r=t.map(({TABLE_NAME:v,TABLE_SCHEMA:y})=>"(`TABLE_SCHEMA` = '".concat(y,"' AND `TABLE_NAME` = '").concat(v,"')")).join(" OR "),s="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE "+r,a="SELECT * FROM `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` WHERE `CONSTRAINT_NAME` = 'PRIMARY' AND (".concat(r,")"),o="SELECT `SCHEMA_NAME`, `DEFAULT_CHARACTER_SET_NAME` as `CHARSET`, `DEFAULT_COLLATION_NAME` AS `COLLATION` FROM `INFORMATION_SCHEMA`.`SCHEMATA`",l=t.map(({TABLE_NAME:v,TABLE_SCHEMA:y})=>"(`s`.`TABLE_SCHEMA` = '".concat(y,"' AND `s`.`TABLE_NAME` = '").concat(v,"')")).join(" OR "),c="SELECT `s`.* FROM `INFORMATION_SCHEMA`.`STATISTICS` `s` LEFT JOIN `INFORMATION_SCHEMA`.`REFERENTIAL_CONSTRAINTS` `rc` ON `s`.`INDEX_NAME` = `rc`.`CONSTRAINT_NAME` "+"WHERE (".concat(l,") AND `s`.`INDEX_NAME` != 'PRIMARY' AND `rc`.`CONSTRAINT_NAME` IS NULL"),d="SELECT `kcu`.`TABLE_SCHEMA`, `kcu`.`TABLE_NAME`, `kcu`.`CONSTRAINT_NAME`, `kcu`.`COLUMN_NAME`, `kcu`.`REFERENCED_TABLE_SCHEMA`, `kcu`.`REFERENCED_TABLE_NAME`, `kcu`.`REFERENCED_COLUMN_NAME`, `rc`.`DELETE_RULE` `ON_DELETE`, `rc`.`UPDATE_RULE` `ON_UPDATE` FROM `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` `kcu` INNER JOIN `INFORMATION_SCHEMA`.`REFERENTIAL_CONSTRAINTS` `rc` ON `rc`.`constraint_name` = `kcu`.`constraint_name` WHERE "+t.map(({TABLE_NAME:v,TABLE_SCHEMA:y})=>"(`kcu`.`TABLE_SCHEMA` = '".concat(y,"' AND `kcu`.`TABLE_NAME` = '").concat(v,"')")).join(" OR "),[h,f,m,g,_]=await Promise.all([this.query(s),this.query(a),this.query(o),this.query(c),this.query(d)]);return Promise.all(t.map(async v=>{const y=new nn,T=m.find(M=>M.SCHEMA_NAME===v.TABLE_SCHEMA),N=T.COLLATION,P=T.CHARSET,F=v.TABLE_SCHEMA===i?void 0:v.TABLE_SCHEMA;y.database=v.TABLE_SCHEMA,y.name=this.driver.buildTableName(v.TABLE_NAME,void 0,F),y.columns=h.filter(M=>M.TABLE_NAME===v.TABLE_NAME&&M.TABLE_SCHEMA===v.TABLE_SCHEMA).map(M=>{const Z=g.filter(ue=>ue.TABLE_NAME===v.TABLE_NAME&&ue.TABLE_SCHEMA===v.TABLE_SCHEMA&&ue.COLUMN_NAME===M.COLUMN_NAME&&parseInt(ue.NON_UNIQUE,10)===0),O=this.connection.entityMetadatas.find(ue=>this.getTablePath(y)===this.getTablePath(ue)),K=Z.length>0&&O&&O.indices.some(ue=>Z.some(ye=>ue.name===ye.INDEX_NAME&&ue.synchronize===!1)),z=Z.every(ue=>g.some(ye=>ye.INDEX_NAME===ue.INDEX_NAME&&ye.COLUMN_NAME!==M.COLUMN_NAME)),te=new Wi;if(te.name=M.COLUMN_NAME,te.type=M.DATA_TYPE.toLowerCase(),te.unsigned=te.zerofill?!0:M.COLUMN_TYPE.indexOf("unsigned")!==-1,this.driver.withWidthColumnTypes.indexOf(te.type)!==-1){const ue=M.COLUMN_TYPE.substring(M.COLUMN_TYPE.indexOf("(")+1,M.COLUMN_TYPE.indexOf(")"));te.width=ue&&!this.isDefaultColumnWidth(y,te,parseInt(ue))?parseInt(ue):void 0}if(M.COLUMN_DEFAULT===null||M.COLUMN_DEFAULT===void 0?te.default=void 0:te.default=M.COLUMN_DEFAULT==="CURRENT_TIMESTAMP"?M.COLUMN_DEFAULT:"'".concat(M.COLUMN_DEFAULT,"'"),M.EXTRA.indexOf("on update")!==-1&&(te.onUpdate=M.EXTRA.substring(M.EXTRA.indexOf("on update")+10)),M.GENERATION_EXPRESSION&&(te.asExpression=M.GENERATION_EXPRESSION,te.generatedType=M.EXTRA.indexOf("VIRTUAL")!==-1?"VIRTUAL":"STORED"),te.isUnique=Z.length>0&&!K&&!z,te.isNullable=M.IS_NULLABLE==="YES",te.isPrimary=f.some(ue=>ue.TABLE_NAME===M.TABLE_NAME&&ue.TABLE_SCHEMA===M.TABLE_SCHEMA&&ue.COLUMN_NAME===M.COLUMN_NAME),te.zerofill=M.COLUMN_TYPE.indexOf("zerofill")!==-1,te.isGenerated=M.EXTRA.indexOf("auto_increment")!==-1,te.isGenerated&&(te.generationStrategy="increment"),te.comment=typeof M.COLUMN_COMMENT=="string"&&M.COLUMN_COMMENT.length===0?void 0:M.COLUMN_COMMENT,M.CHARACTER_SET_NAME&&(te.charset=M.CHARACTER_SET_NAME===P?void 0:M.CHARACTER_SET_NAME),M.COLLATION_NAME&&(te.collation=M.COLLATION_NAME===N?void 0:M.COLLATION_NAME),this.driver.withLengthColumnTypes.indexOf(te.type)!==-1&&M.CHARACTER_MAXIMUM_LENGTH){const ue=M.CHARACTER_MAXIMUM_LENGTH.toString();te.length=this.isDefaultColumnLength(y,te,ue)?"":ue}if((te.type==="decimal"||te.type==="double"||te.type==="float")&&(M.NUMERIC_PRECISION!==null&&!this.isDefaultColumnPrecision(y,te,M.NUMERIC_PRECISION)&&(te.precision=parseInt(M.NUMERIC_PRECISION)),M.NUMERIC_SCALE!==null&&!this.isDefaultColumnScale(y,te,M.NUMERIC_SCALE)&&(te.scale=parseInt(M.NUMERIC_SCALE))),te.type==="enum"||te.type==="simple-enum"||te.type==="set"){const ue=M.COLUMN_TYPE,ye=ue.substring(ue.indexOf("(")+1,ue.lastIndexOf(")")).split(",");te.enum=ye.map(be=>be.substring(1,be.length-1)),te.length=""}return(te.type==="datetime"||te.type==="time"||te.type==="timestamp")&&M.DATETIME_PRECISION!==null&&M.DATETIME_PRECISION!==void 0&&!this.isDefaultColumnPrecision(y,te,parseInt(M.DATETIME_PRECISION))&&(te.precision=parseInt(M.DATETIME_PRECISION)),te});const $=Fe.uniq(_.filter(M=>M.TABLE_NAME===v.TABLE_NAME&&M.TABLE_SCHEMA===v.TABLE_SCHEMA),M=>M.CONSTRAINT_NAME);y.foreignKeys=$.map(M=>{const Z=_.filter(z=>z.CONSTRAINT_NAME===M.CONSTRAINT_NAME),O=M.REFERENCED_TABLE_SCHEMA===i?void 0:M.REFERENCED_TABLE_SCHEMA,K=this.driver.buildTableName(M.REFERENCED_TABLE_NAME,void 0,O);return new zr({name:M.CONSTRAINT_NAME,columnNames:Z.map(z=>z.COLUMN_NAME),referencedDatabase:M.REFERENCED_TABLE_SCHEMA,referencedTableName:K,referencedColumnNames:Z.map(z=>z.REFERENCED_COLUMN_NAME),onDelete:M.ON_DELETE,onUpdate:M.ON_UPDATE})});const B=Fe.uniq(g.filter(M=>M.TABLE_NAME===v.TABLE_NAME&&M.TABLE_SCHEMA===v.TABLE_SCHEMA),M=>M.INDEX_NAME);return y.indices=B.map(M=>{const Z=g.filter(K=>K.TABLE_SCHEMA===M.TABLE_SCHEMA&&K.TABLE_NAME===M.TABLE_NAME&&K.INDEX_NAME===M.INDEX_NAME),O=parseInt(M.NON_UNIQUE,10);return new yn({table:y,name:M.INDEX_NAME,columnNames:Z.map(K=>K.COLUMN_NAME),isUnique:O===0,isSpatial:M.INDEX_TYPE==="SPATIAL",isFulltext:M.INDEX_TYPE==="FULLTEXT"})}),y}))}createTableSql(e,t){const i=e.columns.map(s=>this.buildCreateColumnSql(s,!0)).join(", ");let r="CREATE TABLE ".concat(this.escapePath(e)," (").concat(i);if(e.columns.filter(s=>s.isUnique).forEach(s=>{const a=e.indices.some(l=>l.columnNames.length===1&&!!l.isUnique&&l.columnNames.indexOf(s.name)!==-1),o=e.uniques.some(l=>l.columnNames.length===1&&l.columnNames.indexOf(s.name)!==-1);!a&&!o&&e.indices.push(new yn({name:this.connection.namingStrategy.uniqueConstraintName(e,[s.name]),columnNames:[s.name],isUnique:!0}))}),e.uniques.length>0&&e.uniques.forEach(s=>{e.indices.some(o=>o.name===s.name)||e.indices.push(new yn({name:s.name,columnNames:s.columnNames,isUnique:!0}))}),e.indices.length>0){const s=e.indices.map(a=>{const o=a.columnNames.map(c=>"`".concat(c,"`")).join(", ");a.name||(a.name=this.connection.namingStrategy.indexName(e,a.columnNames,a.where));let l="";return a.isUnique&&(l+="UNIQUE "),a.isSpatial&&(l+="SPATIAL "),a.isFulltext&&(l+="FULLTEXT "),"".concat(l,"INDEX `").concat(a.name,"` (").concat(o,")")}).join(", ");r+=", ".concat(s)}if(e.foreignKeys.length>0&&t){const s=e.foreignKeys.map(a=>{const o=a.columnNames.map(u=>"`".concat(u,"`")).join(", ");a.name||(a.name=this.connection.namingStrategy.foreignKeyName(e,a.columnNames));const l=a.referencedColumnNames.map(u=>"`".concat(u,"`")).join(", ");let c="CONSTRAINT `".concat(a.name,"` FOREIGN KEY (").concat(o,") REFERENCES ").concat(this.escapePath(this.getTablePath(a))," (").concat(l,")");return a.onDelete&&(c+=" ON DELETE ".concat(a.onDelete)),a.onUpdate&&(c+=" ON UPDATE ".concat(a.onUpdate)),c}).join(", ");r+=", ".concat(s)}if(e.primaryColumns.length>0){const s=e.primaryColumns.map(a=>"`".concat(a.name,"`")).join(", ");r+=", PRIMARY KEY (".concat(s,")")}return r+=") ENGINE=".concat(e.engine||"InnoDB"),new H(r)}dropTableSql(e){return new H("DROP TABLE ".concat(this.escapePath(e)))}createViewSql(e){return typeof e.expression=="string"?new H("CREATE VIEW ".concat(this.escapePath(e)," AS ").concat(e.expression)):new H("CREATE VIEW ".concat(this.escapePath(e)," AS ").concat(e.expression(this.connection).getQuery()))}async insertViewDefinitionSql(e){const t=await this.getCurrentDatabase(),i=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:Ke.VIEW,schema:t,name:e.name,value:i})}dropViewSql(e){return new H("DROP VIEW ".concat(this.escapePath(e)))}async deleteViewDefinitionSql(e){const t=await this.getCurrentDatabase(),i=se.isView(e)?e.name:e;return this.deleteTypeormMetadataSql({type:Ke.VIEW,schema:t,name:i})}createIndexSql(e,t){const i=t.columnNames.map(s=>"`".concat(s,"`")).join(", ");let r="";return t.isUnique&&(r+="UNIQUE "),t.isSpatial&&(r+="SPATIAL "),t.isFulltext&&(r+="FULLTEXT "),new H("CREATE ".concat(r,"INDEX `").concat(t.name,"` ON ").concat(this.escapePath(e)," (").concat(i,")"))}dropIndexSql(e,t){let i=se.isTableIndex(t)?t.name:t;return new H("DROP INDEX `".concat(i,"` ON ").concat(this.escapePath(e)))}createPrimaryKeySql(e,t){const i=t.map(r=>"`".concat(r,"`")).join(", ");return new H("ALTER TABLE ".concat(this.escapePath(e)," ADD PRIMARY KEY (").concat(i,")"))}dropPrimaryKeySql(e){return new H("ALTER TABLE ".concat(this.escapePath(e)," DROP PRIMARY KEY"))}createForeignKeySql(e,t){const i=t.columnNames.map(a=>"`".concat(a,"`")).join(", "),r=t.referencedColumnNames.map(a=>"`".concat(a,"`")).join(",");let s="ALTER TABLE ".concat(this.escapePath(e)," ADD CONSTRAINT `").concat(t.name,"` FOREIGN KEY (").concat(i,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(t)),"(").concat(r,")");return t.onDelete&&(s+=" ON DELETE ".concat(t.onDelete)),t.onUpdate&&(s+=" ON UPDATE ".concat(t.onUpdate)),new H(s)}dropForeignKeySql(e,t){const i=se.isTableForeignKey(t)?t.name:t;return new H("ALTER TABLE ".concat(this.escapePath(e)," DROP FOREIGN KEY `").concat(i,"`"))}escapeComment(e){return!e||e.length===0?"''":(e=e.replace(/\\/g,"\\\\").replace(/'/g,"''").replace(/\u0000/g,""),"'".concat(e,"'"))}escapePath(e){const{database:t,tableName:i}=this.driver.parseTableName(e);return t&&t!==this.driver.database?"`".concat(t,"`.`").concat(i,"`"):"`".concat(i,"`")}buildCreateColumnSql(e,t,i=!1){let r="";return i?r=this.connection.driver.createFullType(e):r="`".concat(e.name,"` ").concat(this.connection.driver.createFullType(e)),e.asExpression&&(r+=" AS (".concat(e.asExpression,") ").concat(e.generatedType?e.generatedType:"VIRTUAL")),e.zerofill?r+=" ZEROFILL":e.unsigned&&(r+=" UNSIGNED"),e.enum&&(r+=" (".concat(e.enum.map(s=>"'"+s+"'").join(", "),")")),e.charset&&(r+=' CHARACTER SET "'.concat(e.charset,'"')),e.collation&&(r+=' COLLATE "'.concat(e.collation,'"')),e.isNullable||(r+=" NOT NULL"),e.isNullable&&(r+=" NULL"),e.isPrimary&&!t&&(r+=" PRIMARY KEY"),e.isGenerated&&e.generationStrategy==="increment"&&(r+=" AUTO_INCREMENT"),e.comment&&(r+=" COMMENT ".concat(this.escapeComment(e.comment))),e.default!==void 0&&e.default!==null&&(r+=" DEFAULT ".concat(e.default)),e.onUpdate&&(r+=" ON UPDATE ".concat(e.onUpdate)),r}isDefaultColumnWidth(e,t,i){if(this.connection.hasMetadata(e.name)){const a=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(a&&a.width)return!1}const r=this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].width;if(r){const a=["int","tinyint","smallint","mediumint"].indexOf(t.type)!==-1;return t.unsigned&&a?r-1===i:r===i}return!1}}class pK{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["bit","int","integer","tinyint","smallint","mediumint","bigint","float","double","double precision","real","decimal","dec","numeric","fixed","bool","boolean","date","datetime","timestamp","time","year","char","nchar","national char","varchar","nvarchar","national varchar","blob","text","tinyblob","tinytext","mediumblob","mediumtext","longblob","longtext","enum","set","binary","varbinary","json","geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","geometrycollection"],this.supportedUpsertTypes=["on-duplicate-key-update"],this.spatialTypes=["geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","geometrycollection"],this.withLengthColumnTypes=["char","varchar","nvarchar","binary","varbinary"],this.withWidthColumnTypes=["bit","tinyint","smallint","mediumint","int","integer","bigint"],this.withPrecisionColumnTypes=["decimal","dec","numeric","fixed","float","double","double precision","real","time","datetime","timestamp"],this.withScaleColumnTypes=["decimal","dec","numeric","fixed","float","double","double precision","real"],this.unsignedAndZerofillTypes=["int","integer","smallint","tinyint","mediumint","bigint","decimal","dec","numeric","fixed","float","double","double precision","real"],this.mappedDataTypes={createDate:"datetime",createDatePrecision:6,createDateDefault:"CURRENT_TIMESTAMP(6)",updateDate:"datetime",updateDatePrecision:6,updateDateDefault:"CURRENT_TIMESTAMP(6)",deleteDate:"datetime",deleteDatePrecision:6,deleteDateNullable:!0,version:"int",treeLevel:"int",migrationId:"int",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.dataTypeDefaults={varchar:{length:255},nvarchar:{length:255},"national varchar":{length:255},char:{length:1},binary:{length:1},varbinary:{length:255},decimal:{precision:10,scale:0},dec:{precision:10,scale:0},numeric:{precision:10,scale:0},fixed:{precision:10,scale:0},float:{precision:12},double:{precision:22},time:{precision:0},datetime:{precision:0},timestamp:{precision:0},bit:{width:1},int:{width:11},integer:{width:11},tinyint:{width:4},smallint:{width:6},mediumint:{width:9},bigint:{width:20}},this.maxAliasLength=63,this.cteCapabilities={enabled:!1},this.connection=e,this.options=e.options,this.loadDependencies(),this.client=new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,(t,i)=>this.connection.logger.logQuery(t,i),this.options.serviceConfigOptions,this.options.formatOptions),this.database=Oe.buildDriverOptions(this.options).database}async connect(){if(!this.database){const e=await this.createQueryRunner("master");this.database=await e.getCurrentDatabase(),await e.release()}}afterConnect(){return Promise.resolve()}async disconnect(){}createSchemaBuilder(){return new A0(this.connection)}createQueryRunner(e){return new fK(this,new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,(t,i)=>this.connection.logger.logQuery(t,i),this.options.serviceConfigOptions,this.options.formatOptions))}escapeQueryWithParameters(e,t,i){const r=Object.keys(i).map(s=>i[s]);return!t||!Object.keys(t).length?[e,r]:(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o)=>{if(!t.hasOwnProperty(o))return s;let l=t[o];return a?l.map(c=>(r.push(c),this.createParameter(o,r.length-1))).join(", "):typeof l=="function"?l():(r.push(l),this.createParameter(o,r.length-1))}),[e,r])}escape(e){return"`"+e+"`"}buildTableName(e,t,i){let r=[e];return i&&r.unshift(i),r.join(".")}parseTableName(e){const t=this.database,i=void 0;if(se.isTable(e)||se.isView(e)){const s=this.parseTableName(e.name);return{database:e.database||s.database||t,schema:e.schema||s.schema||i,tableName:s.tableName}}if(se.isTableForeignKey(e)){const s=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||s.database||t,schema:e.referencedSchema||s.schema||i,tableName:s.tableName}}if(se.isEntityMetadata(e))return{database:e.database||t,schema:e.schema||i,tableName:e.tableName};const r=e.split(".");return{database:(r.length>1?r[0]:void 0)||t,schema:i,tableName:r.length>1?r[1]:r[0]}}preparePersistentValue(e,t){return t.transformer&&(e=$n.transformTo(t.transformer,e)),!this.options.formatOptions||this.options.formatOptions.castParameters!==!1?this.client.preparePersistentValue(e,t):e==null?e:t.type===Boolean?e===!0?1:0:t.type==="date"?Ye.mixedDateToDateString(e):t.type==="time"?Ye.mixedDateToTimeString(e):t.type==="json"?JSON.stringify(e):t.type==="timestamp"||t.type==="datetime"||t.type===Date?Ye.mixedDateToDate(e):t.type==="simple-array"||t.type==="set"?Ye.simpleArrayToString(e):t.type==="simple-json"?Ye.simpleJsonToString(e):t.type==="enum"||t.type==="simple-enum"?""+e:e}prepareHydratedValue(e,t){return e==null?t.transformer?$n.transformFrom(t.transformer,e):e:!this.options.formatOptions||this.options.formatOptions.castParameters!==!1?this.client.prepareHydratedValue(e,t):(t.type===Boolean||t.type==="bool"||t.type==="boolean"?e=!!e:t.type==="datetime"||t.type===Date?e=Ye.normalizeHydratedDate(e):t.type==="date"?e=Ye.mixedDateToDateString(e):t.type==="json"?e=typeof e=="string"?JSON.parse(e):e:t.type==="time"?e=Ye.mixedTimeToString(e):t.type==="simple-array"||t.type==="set"?e=Ye.stringToSimpleArray(e):t.type==="simple-json"?e=Ye.stringToSimpleJson(e):(t.type==="enum"||t.type==="simple-enum")&&t.enum&&!isNaN(e)&&t.enum.indexOf(parseInt(e))>=0?e=parseInt(e):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=$n.transformFrom(t.transformer,e)),e)}normalizeType(e){return e.type===Number||e.type==="integer"?"int":e.type===String?"varchar":e.type===Date?"datetime":e.type===Buffer?"blob":e.type===Boolean?"tinyint":e.type==="uuid"?"varchar":e.type==="simple-array"||e.type==="simple-json"?"text":e.type==="simple-enum"?"enum":e.type==="double precision"||e.type==="real"?"double":e.type==="dec"||e.type==="numeric"||e.type==="fixed"?"decimal":e.type==="bool"||e.type==="boolean"?"tinyint":e.type==="nvarchar"||e.type==="national varchar"?"varchar":e.type==="nchar"||e.type==="national char"?"char":e.type||""}normalizeDefault(e){const t=e.default;if(t!==null){if((e.type==="enum"||e.type==="simple-enum")&&t!==void 0)return"'".concat(t,"'");if(e.type==="set"&&t!==void 0)return"'".concat(Ye.simpleArrayToString(t),"'");if(typeof t=="number")return"".concat(t);if(typeof t=="boolean")return t?"1":"0";if(typeof t=="function")return t();if(typeof t=="string")return"'".concat(t,"'");if(t!==void 0)return"".concat(t)}}normalizeIsUnique(e){return e.entityMetadata.indices.some(t=>t.isUnique&&t.columns.length===1&&t.columns[0]===e)}getColumnLength(e){if(e.length)return e.length.toString();if(e.generationStrategy==="uuid")return"36";switch(e.type){case String:case"varchar":case"nvarchar":case"national varchar":return"255";case"varbinary":return"255";default:return""}}createFullType(e){let t=e.type;return this.getColumnLength(e)?t+="(".concat(this.getColumnLength(e),")"):e.width?t+="(".concat(e.width,")"):e.precision!==null&&e.precision!==void 0&&e.scale!==null&&e.scale!==void 0?t+="(".concat(e.precision,",").concat(e.scale,")"):e.precision!==null&&e.precision!==void 0&&(t+="(".concat(e.precision,")")),e.isArray&&(t+=" array"),t}obtainMasterConnection(){return new Promise((e,t)=>{this.poolCluster?this.poolCluster.getConnection("MASTER",(i,r)=>{i?t(i):e(this.prepareDbConnection(r))}):this.pool?this.pool.getConnection((i,r)=>{i?t(i):e(this.prepareDbConnection(r))}):t(new J("Connection is not established with mysql database"))})}obtainSlaveConnection(){return this.poolCluster?new Promise((e,t)=>{this.poolCluster.getConnection("SLAVE*",(i,r)=>{i?t(i):e(this.prepareDbConnection(r))})}):this.obtainMasterConnection()}createGeneratedMap(e,t,i){const r=e.generatedColumns.reduce((s,a)=>{let o;return a.generationStrategy==="increment"&&t.insertId&&(o=t.insertId+i),Fe.mergeDeep(s,a.createValueMap(o))},{});return Object.keys(r).length>0?r:void 0}findChangedColumns(e,t){return t.filter(i=>{const r=e.find(a=>a.name===i.databaseName);if(!r)return!1;let s=i.length;return!s&&i.generationStrategy==="uuid"&&(s=this.getColumnLength(i)),r.name!==i.databaseName||r.type!==this.normalizeType(i)||r.length!==s||r.width!==i.width||r.precision!==i.precision||r.scale!==i.scale||r.zerofill!==i.zerofill||r.unsigned!==i.unsigned||r.asExpression!==i.asExpression||r.generatedType!==i.generatedType||r.comment!==this.escapeComment(i.comment)||!this.compareDefaultValues(this.normalizeDefault(i),r.default)||r.enum&&i.enum&&!Fe.isArraysEqual(r.enum,i.enum.map(a=>a+""))||r.onUpdate!==i.onUpdate||r.isPrimary!==i.isPrimary||r.isNullable!==i.isNullable||r.isUnique!==this.normalizeIsUnique(i)||i.generationStrategy!=="uuid"&&r.isGenerated!==i.isGenerated})}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!0}createParameter(e,t){return"?"}loadDependencies(){const e=this.options.driver||Kt.load("typeorm-aurora-data-api-driver");this.DataApiDriver=e,this.DataApiDriver=this.DataApiDriver.default||this.DataApiDriver}createConnectionOptions(e,t){return t=Object.assign({},t,Oe.buildDriverOptions(t)),Object.assign({},{resourceArn:e.resourceArn,secretArn:e.secretArn,database:e.database,region:e.region,type:e.type},{host:t.host,user:t.username,password:t.password,database:t.database,port:t.port,ssl:e.ssl},e.extra||{})}async createPool(e){return{}}prepareDbConnection(e){const{logger:t}=this.connection;return e.listeners("error").length===0&&e.on("error",i=>t.log("warn","MySQL connection raised an error. ".concat(i))),e}compareDefaultValues(e,t){return typeof e=="string"&&typeof t=="string"&&(e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t}escapeComment(e){return e&&(e=e.replace(/\u0000/g,""),e)}}class mK extends k0{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.mode=t,this.broadcaster=new eo(this)}connect(){return this.databaseConnection?Promise.resolve(this.databaseConnection):this.databaseConnectionPromise?this.databaseConnectionPromise:(this.mode==="slave"&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then(([e,t])=>{this.driver.connectedQueryRunners.push(this),this.databaseConnection=e;const i=r=>this.releasePostgresConnection(r);return this.releaseCallback=r=>{this.databaseConnection.removeListener("error",i),t(r)},this.databaseConnection.on("error",i),this.databaseConnection}):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then(([e,t])=>{this.driver.connectedQueryRunners.push(this),this.databaseConnection=e;const i=r=>this.releasePostgresConnection(r);return this.releaseCallback=r=>{this.databaseConnection.removeListener("error",i),t(r)},this.databaseConnection.on("error",i),this.databaseConnection}),this.databaseConnectionPromise)}async releasePostgresConnection(e){if(this.isReleased)return;this.isReleased=!0,this.releaseCallback&&(this.releaseCallback(e),this.releaseCallback=void 0);const t=this.driver.connectedQueryRunners.indexOf(this);t!==-1&&this.driver.connectedQueryRunners.splice(t,1)}release(){return this.releasePostgresConnection()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}this.transactionDepth===0?(await this.query("START TRANSACTION"),e&&await this.query("SET TRANSACTION ISOLATION LEVEL "+e)):await this.query("SAVEPOINT typeorm_".concat(this.transactionDepth)),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.query("COMMIT"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.query("ROLLBACK"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,i=!1){if(this.isReleased)throw new Oi;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);try{const s=+new Date,a=await r.query(e,t),o=this.driver.options.maxQueryExecutionTime,c=+new Date-s;o&&c>o&&this.driver.connection.logger.logQuerySlow(c,e,t,this);const u=new pa;if(a){switch(a.hasOwnProperty("rows")&&(u.records=a.rows),a.hasOwnProperty("rowCount")&&(u.affected=a.rowCount),a.command){case"DELETE":case"UPDATE":u.raw=[a.rows,a.rowCount];break;default:u.raw=a.rows}if(!i)return u.raw}return u}catch(s){throw this.driver.connection.logger.logQueryError(s,e,t,this),new ia(e,t,s)}}async stream(e,t,i,r){const s=this.driver.loadStreamDependency();if(this.isReleased)throw new Oi;const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=a.query(new s(e,t));return i&&o.on("end",i),r&&o.on("error",r),o}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){return!!(await this.query("SELECT * FROM pg_database WHERE datname='".concat(e,"';"))).length}async getCurrentDatabase(){return(await this.query("SELECT * FROM current_database()"))[0].current_database}async hasSchema(e){return!!(await this.query('SELECT * FROM "information_schema"."schemata" WHERE "schema_name" = \''.concat(e,"'"))).length}async getCurrentSchema(){return(await this.query("SELECT * FROM current_schema()"))[0].current_schema}async hasTable(e){const t=this.driver.parseTableName(e);t.schema||(t.schema=await this.getCurrentSchema());const i='SELECT * FROM "information_schema"."tables" WHERE "table_schema" = \''.concat(t.schema,"' AND \"table_name\" = '").concat(t.tableName,"'");return!!(await this.query(i)).length}async hasColumn(e,t){const i=this.driver.parseTableName(e);i.schema||(i.schema=await this.getCurrentSchema());const r='SELECT * FROM "information_schema"."columns" WHERE "table_schema" = \''.concat(i.schema,"' AND \"table_name\" = '").concat(i.tableName,"' AND \"column_name\" = '").concat(t,"'");return!!(await this.query(r)).length}async createDatabase(e,t){if(t&&await this.hasDatabase(e))return Promise.resolve();const i='CREATE DATABASE "'.concat(e,'"'),r='DROP DATABASE "'.concat(e,'"');await this.executeQueries(new H(i),new H(r))}async dropDatabase(e,t){const i=t?'DROP DATABASE IF EXISTS "'.concat(e,'"'):'DROP DATABASE "'.concat(e,'"'),r='CREATE DATABASE "'.concat(e,'"');await this.executeQueries(new H(i),new H(r))}async createSchema(e,t){const i=e.indexOf(".")===-1?e:e.split(".")[1],r=t?'CREATE SCHEMA IF NOT EXISTS "'.concat(i,'"'):'CREATE SCHEMA "'.concat(i,'"'),s='DROP SCHEMA "'.concat(i,'" CASCADE');await this.executeQueries(new H(r),new H(s))}async dropSchema(e,t,i){const r=e.indexOf(".")===-1?e:e.split(".")[1],s=t?'DROP SCHEMA IF EXISTS "'.concat(r,'" ').concat(i?"CASCADE":""):'DROP SCHEMA "'.concat(r,'" ').concat(i?"CASCADE":""),a='CREATE SCHEMA "'.concat(r,'"');await this.executeQueries(new H(s),new H(a))}async createTable(e,t=!1,i=!0,r=!0){if(t&&await this.hasTable(e))return Promise.resolve();const s=[],a=[],o=e.columns.filter(u=>u.type==="enum"||u.type==="simple-enum"),l=[];for(const u of o){const d=await this.hasEnumType(e,u),h=this.buildEnumName(e,u);!d&&l.indexOf(h)===-1&&(l.push(h),s.push(this.createEnumTypeSql(e,u,h)),a.push(this.dropEnumTypeSql(e,u,h)))}const c=e.columns.filter(u=>u.generatedType==="STORED"&&u.asExpression);for(const u of c){const d=(await this.getTableNameWithSchema(e.name)).split("."),h=d[1],f=d[0],m=this.insertTypeormMetadataSql({database:this.driver.database,schema:f,table:h,type:Ke.GENERATED_COLUMN,name:u.name,value:u.asExpression}),g=this.deleteTypeormMetadataSql({database:this.driver.database,schema:f,table:h,type:Ke.GENERATED_COLUMN,name:u.name});s.push(m),a.push(g)}s.push(this.createTableSql(e,i)),a.push(this.dropTableSql(e)),i&&e.foreignKeys.forEach(u=>a.push(this.dropForeignKeySql(e,u))),r&&e.indices.forEach(u=>{u.name||(u.name=this.connection.namingStrategy.indexName(e,u.columnNames,u.where)),s.push(this.createIndexSql(e,u)),a.push(this.dropIndexSql(e,u))}),await this.executeQueries(s,a)}async dropTable(e,t,i=!0,r=!0){if(t&&!await this.hasTable(e))return Promise.resolve();const s=i,a=this.getTablePath(e),o=await this.getCachedTable(a),l=[],c=[];r&&o.indices.forEach(d=>{l.push(this.dropIndexSql(o,d)),c.push(this.createIndexSql(o,d))}),i&&o.foreignKeys.forEach(d=>l.push(this.dropForeignKeySql(o,d))),l.push(this.dropTableSql(o)),c.push(this.createTableSql(o,s));const u=o.columns.filter(d=>d.generatedType&&d.asExpression);for(const d of u){const h=(await this.getTableNameWithSchema(o.name)).split("."),f=h[1],m=h[0],g=this.deleteTypeormMetadataSql({database:this.driver.database,schema:m,table:f,type:Ke.GENERATED_COLUMN,name:d.name}),_=this.insertTypeormMetadataSql({database:this.driver.database,schema:m,table:f,type:Ke.GENERATED_COLUMN,name:d.name,value:d.asExpression});l.push(g),c.push(_)}await this.executeQueries(l,c)}async createView(e,t=!1){const i=[],r=[];i.push(this.createViewSql(e)),t&&i.push(await this.insertViewDefinitionSql(e)),r.push(this.dropViewSql(e)),t&&r.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(i,r)}async dropView(e){const t=se.isView(e)?e.name:e,i=await this.getCachedView(t),r=[],s=[];r.push(await this.deleteViewDefinitionSql(i)),r.push(this.dropViewSql(i)),s.push(await this.insertViewDefinitionSql(i)),s.push(this.createViewSql(i)),await this.executeQueries(r,s)}async renameTable(e,t){const i=[],r=[],s=se.isTable(e)?e:await this.getCachedTable(e),a=s.clone(),{schema:o,tableName:l}=this.driver.parseTableName(s);if(a.name=o?"".concat(o,".").concat(t):t,i.push(new H("ALTER TABLE ".concat(this.escapePath(s),' RENAME TO "').concat(t,'"'))),r.push(new H("ALTER TABLE ".concat(this.escapePath(a),' RENAME TO "').concat(l,'"'))),a.primaryColumns.length>0&&!a.primaryColumns[0].primaryKeyConstraintName){const u=a.primaryColumns.map(f=>f.name),d=this.connection.namingStrategy.primaryKeyName(s,u),h=this.connection.namingStrategy.primaryKeyName(a,u);i.push(new H("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(d,'" TO "').concat(h,'"'))),r.push(new H("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(h,'" TO "').concat(d,'"')))}a.columns.map(u=>{if(u.isGenerated&&u.generationStrategy==="increment"){const d=this.buildSequencePath(s,u.name),h=this.buildSequenceName(s,u.name),f=this.buildSequencePath(a,u.name),m=this.buildSequenceName(a,u.name),g="ALTER SEQUENCE ".concat(this.escapePath(d),' RENAME TO "').concat(m,'"'),_="ALTER SEQUENCE ".concat(this.escapePath(f),' RENAME TO "').concat(h,'"');i.push(new H(g)),r.push(new H(_))}}),a.uniques.forEach(u=>{const d=this.connection.namingStrategy.uniqueConstraintName(s,u.columnNames);if(u.name!==d)return;const h=this.connection.namingStrategy.uniqueConstraintName(a,u.columnNames);i.push(new H("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(u.name,'" TO "').concat(h,'"'))),r.push(new H("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(h,'" TO "').concat(u.name,'"'))),u.name=h}),a.indices.forEach(u=>{const d=this.connection.namingStrategy.indexName(s,u.columnNames,u.where);if(u.name!==d)return;const{schema:h}=this.driver.parseTableName(a),f=this.connection.namingStrategy.indexName(a,u.columnNames,u.where),m=h?'ALTER INDEX "'.concat(h,'"."').concat(u.name,'" RENAME TO "').concat(f,'"'):'ALTER INDEX "'.concat(u.name,'" RENAME TO "').concat(f,'"'),g=h?'ALTER INDEX "'.concat(h,'"."').concat(f,'" RENAME TO "').concat(u.name,'"'):'ALTER INDEX "'.concat(f,'" RENAME TO "').concat(u.name,'"');i.push(new H(m)),r.push(new H(g)),u.name=f}),a.foreignKeys.forEach(u=>{const d=this.connection.namingStrategy.foreignKeyName(s,u.columnNames,this.getTablePath(u),u.referencedColumnNames);if(u.name!==d)return;const h=this.connection.namingStrategy.foreignKeyName(a,u.columnNames,this.getTablePath(u),u.referencedColumnNames);i.push(new H("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(u.name,'" TO "').concat(h,'"'))),r.push(new H("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(h,'" TO "').concat(u.name,'"'))),u.name=h});const c=a.columns.filter(u=>u.type==="enum"||u.type==="simple-enum");for(let u of c){if(u.enumName)continue;const d=await this.getUserDefinedTypeName(s,u);i.push(new H('ALTER TYPE "'.concat(d.schema,'"."').concat(d.name,'" RENAME TO ').concat(this.buildEnumName(a,u,!1)))),r.push(new H("ALTER TYPE ".concat(this.buildEnumName(a,u),' RENAME TO "').concat(d.name,'"')))}await this.executeQueries(i,r)}async addColumn(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=i.clone(),s=[],a=[];if((t.type==="enum"||t.type==="simple-enum")&&(await this.hasEnumType(i,t)||(s.push(this.createEnumTypeSql(i,t)),a.push(this.dropEnumTypeSql(i,t)))),s.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD ").concat(this.buildCreateColumnSql(i,t)))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i),' DROP COLUMN "').concat(t.name,'"'))),t.isPrimary){const l=r.primaryColumns;if(l.length>0){const d=l[0].primaryKeyConstraintName?l[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,l.map(f=>f.name)),h=l.map(f=>'"'.concat(f.name,'"')).join(", ");s.push(new H("ALTER TABLE ".concat(this.escapePath(i),' DROP CONSTRAINT "').concat(d,'"'))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i),' ADD CONSTRAINT "').concat(d,'" PRIMARY KEY (').concat(h,")")))}l.push(t);const c=l[0].primaryKeyConstraintName?l[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,l.map(d=>d.name)),u=l.map(d=>'"'.concat(d.name,'"')).join(", ");s.push(new H("ALTER TABLE ".concat(this.escapePath(i),' ADD CONSTRAINT "').concat(c,'" PRIMARY KEY (').concat(u,")"))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i),' DROP CONSTRAINT "').concat(c,'"')))}const o=r.indices.find(l=>l.columnNames.length===1&&l.columnNames[0]===t.name);if(o&&(s.push(this.createIndexSql(i,o)),a.push(this.dropIndexSql(i,o))),t.isUnique){const l=new hi({name:this.connection.namingStrategy.uniqueConstraintName(i,[t.name]),columnNames:[t.name]});r.uniques.push(l),s.push(new H("ALTER TABLE ".concat(this.escapePath(i),' ADD CONSTRAINT "').concat(l.name,'" UNIQUE ("').concat(t.name,'")'))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i),' DROP CONSTRAINT "').concat(l.name,'"')))}if(t.generatedType==="STORED"&&t.asExpression){const l=(await this.getTableNameWithSchema(i.name)).split("."),c=l[1],u=l[0],d=this.insertTypeormMetadataSql({database:this.driver.database,schema:u,table:c,type:Ke.GENERATED_COLUMN,name:t.name,value:t.asExpression}),h=this.deleteTypeormMetadataSql({database:this.driver.database,schema:u,table:c,type:Ke.GENERATED_COLUMN,name:t.name});s.push(d),a.push(h)}t.comment&&(s.push(new H("COMMENT ON COLUMN ".concat(this.escapePath(i),'."').concat(t.name,'" IS ').concat(this.escapeComment(t.comment)))),a.push(new H("COMMENT ON COLUMN ".concat(this.escapePath(i),'."').concat(t.name,'" IS ').concat(this.escapeComment(t.comment))))),await this.executeQueries(s,a),r.addColumn(t),this.replaceCachedTable(i,r)}async addColumns(e,t){for(const i of t)await this.addColumn(e,i)}async renameColumn(e,t,i){const r=se.isTable(e)?e:await this.getCachedTable(e),s=se.isTableColumn(t)?t:r.columns.find(o=>o.name===t);if(!s)throw new J('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));let a;return se.isTableColumn(i)?a=i:(a=s.clone(),a.name=i),this.changeColumn(r,s,a)}async changeColumn(e,t,i){const r=se.isTable(e)?e:await this.getCachedTable(e);let s=r.clone();const a=[],o=[];let l=!1;const c=se.isTableColumn(t)?t:r.columns.find(u=>u.name===t);if(!c)throw new J('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));if(c.type!==i.type||c.length!==i.length||i.isArray!==c.isArray||!c.generatedType&&i.generatedType==="STORED"||c.asExpression!==i.asExpression&&i.generatedType==="STORED")await this.dropColumn(r,c),await this.addColumn(r,i),s=r.clone();else{if(c.name!==i.name){if(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME COLUMN "').concat(c.name,'" TO "').concat(i.name,'"'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME COLUMN "').concat(i.name,'" TO "').concat(c.name,'"'))),c.type==="enum"||c.type==="simple-enum"){const d=await this.getUserDefinedTypeName(r,c);a.push(new H('ALTER TYPE "'.concat(d.schema,'"."').concat(d.name,'" RENAME TO ').concat(this.buildEnumName(r,i,!1)))),o.push(new H("ALTER TYPE ".concat(this.buildEnumName(r,i),' RENAME TO "').concat(d.name,'"')))}if(c.isPrimary===!0&&!c.primaryKeyConstraintName){const h=s.primaryColumns.map(g=>g.name),f=this.connection.namingStrategy.primaryKeyName(s,h);h.splice(h.indexOf(c.name),1),h.push(i.name);const m=this.connection.namingStrategy.primaryKeyName(s,h);a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(f,'" TO "').concat(m,'"'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(m,'" TO "').concat(f,'"')))}if(c.isGenerated===!0&&i.generationStrategy==="increment"){const d=this.buildSequencePath(r,c.name),h=this.buildSequenceName(r,c.name),f=this.buildSequencePath(r,i.name),m=this.buildSequenceName(r,i.name),g="ALTER SEQUENCE ".concat(this.escapePath(d),' RENAME TO "').concat(m,'"'),_="ALTER SEQUENCE ".concat(this.escapePath(f),' RENAME TO "').concat(h,'"');a.push(new H(g)),o.push(new H(_))}s.findColumnUniques(c).forEach(d=>{const h=this.connection.namingStrategy.uniqueConstraintName(s,d.columnNames);if(d.name!==h)return;d.columnNames.splice(d.columnNames.indexOf(c.name),1),d.columnNames.push(i.name);const f=this.connection.namingStrategy.uniqueConstraintName(s,d.columnNames);a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(d.name,'" TO "').concat(f,'"'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(f,'" TO "').concat(d.name,'"'))),d.name=f}),s.findColumnIndices(c).forEach(d=>{const h=this.connection.namingStrategy.indexName(s,d.columnNames,d.where);if(d.name!==h)return;d.columnNames.splice(d.columnNames.indexOf(c.name),1),d.columnNames.push(i.name);const{schema:f}=this.driver.parseTableName(r),m=this.connection.namingStrategy.indexName(s,d.columnNames,d.where),g=f?'ALTER INDEX "'.concat(f,'"."').concat(d.name,'" RENAME TO "').concat(m,'"'):'ALTER INDEX "'.concat(d.name,'" RENAME TO "').concat(m,'"'),_=f?'ALTER INDEX "'.concat(f,'"."').concat(m,'" RENAME TO "').concat(d.name,'"'):'ALTER INDEX "'.concat(m,'" RENAME TO "').concat(d.name,'"');a.push(new H(g)),o.push(new H(_)),d.name=m}),s.findColumnForeignKeys(c).forEach(d=>{const h=this.connection.namingStrategy.foreignKeyName(s,d.columnNames,this.getTablePath(d),d.referencedColumnNames);if(d.name!==h)return;d.columnNames.splice(d.columnNames.indexOf(c.name),1),d.columnNames.push(i.name);const f=this.connection.namingStrategy.foreignKeyName(s,d.columnNames,this.getTablePath(d),d.referencedColumnNames);a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(d.name,'" TO "').concat(f,'"'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(f,'" TO "').concat(d.name,'"'))),d.name=f});const u=s.columns.find(d=>d.name===c.name);s.columns[s.columns.indexOf(u)].name=i.name,c.name=i.name}if((i.precision!==c.precision||i.scale!==c.scale)&&(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" TYPE ').concat(this.driver.createFullType(i)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" TYPE ').concat(this.driver.createFullType(c))))),(i.type==="enum"||i.type==="simple-enum")&&(c.type==="enum"||c.type==="simple-enum")&&(!Fe.isArraysEqual(i.enum,c.enum)||i.enumName!==c.enumName)){const u=i.isArray?"[]":"",d=this.buildEnumName(r,i),h=this.buildEnumName(r,c),f=this.buildEnumName(r,c,!1),m=this.buildEnumName(r,c,!0,!1,!0),g=this.buildEnumName(r,c,!1,!1,!0);a.push(new H("ALTER TYPE ".concat(h," RENAME TO ").concat(g))),o.push(new H("ALTER TYPE ".concat(m," RENAME TO ").concat(f))),a.push(this.createEnumTypeSql(r,i,d)),o.push(this.dropEnumTypeSql(r,i,d)),c.default!==null&&c.default!==void 0&&(l=!0,a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" DROP DEFAULT'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" SET DEFAULT ').concat(c.default))));const _="".concat(d).concat(u,' USING "').concat(i.name,'"::"text"::').concat(d).concat(u),v="".concat(m).concat(u,' USING "').concat(i.name,'"::"text"::').concat(m).concat(u);a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" TYPE ').concat(_))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" TYPE ').concat(v))),i.default!==null&&i.default!==void 0&&(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" SET DEFAULT ').concat(i.default))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" DROP DEFAULT')))),a.push(this.dropEnumTypeSql(r,c,m)),o.push(this.createEnumTypeSql(r,c,m))}if(c.isNullable!==i.isNullable&&(i.isNullable?(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" DROP NOT NULL'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" SET NOT NULL')))):(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" SET NOT NULL'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" DROP NOT NULL'))))),c.comment!==i.comment&&(a.push(new H("COMMENT ON COLUMN ".concat(this.escapePath(r),'."').concat(c.name,'" IS ').concat(this.escapeComment(i.comment)))),o.push(new H("COMMENT ON COLUMN ".concat(this.escapePath(r),'."').concat(i.name,'" IS ').concat(this.escapeComment(c.comment))))),i.isPrimary!==c.isPrimary){const u=s.primaryColumns;if(u.length>0){const d=u[0].primaryKeyConstraintName?u[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,u.map(f=>f.name)),h=u.map(f=>'"'.concat(f.name,'"')).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(d,'"'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(d,'" PRIMARY KEY (').concat(h,")")))}if(i.isPrimary===!0){u.push(i);const d=s.columns.find(m=>m.name===i.name);d.isPrimary=!0;const h=u[0].primaryKeyConstraintName?u[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,u.map(m=>m.name)),f=u.map(m=>'"'.concat(m.name,'"')).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(h,'" PRIMARY KEY (').concat(f,")"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(h,'"')))}else{const d=u.find(f=>f.name===i.name);u.splice(u.indexOf(d),1);const h=s.columns.find(f=>f.name===i.name);if(h.isPrimary=!1,u.length>0){const f=u[0].primaryKeyConstraintName?u[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,u.map(g=>g.name)),m=u.map(g=>'"'.concat(g.name,'"')).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(f,'" PRIMARY KEY (').concat(m,")"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(f,'"')))}}}if(i.isUnique!==c.isUnique)if(i.isUnique===!0){const u=new hi({name:this.connection.namingStrategy.uniqueConstraintName(r,[i.name]),columnNames:[i.name]});s.uniques.push(u),a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(u.name,'" UNIQUE ("').concat(i.name,'")'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(u.name,'"')))}else{const u=s.uniques.find(d=>d.columnNames.length===1&&!!d.columnNames.find(h=>h===i.name));s.uniques.splice(s.uniques.indexOf(u),1),a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(u.name,'"'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(u.name,'" UNIQUE ("').concat(i.name,'")')))}if(c.isGenerated!==i.isGenerated&&(c.isGenerated&&(c.generationStrategy==="uuid"?(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" DROP DEFAULT'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" SET DEFAULT ').concat(this.driver.uuidGenerator)))):c.generationStrategy==="increment"&&(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" DROP DEFAULT'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,"\" SET DEFAULT nextval('").concat(this.escapePath(this.buildSequencePath(r,i)),"')"))),a.push(new H("DROP SEQUENCE ".concat(this.escapePath(this.buildSequencePath(r,i))))),o.push(new H("CREATE SEQUENCE IF NOT EXISTS ".concat(this.escapePath(this.buildSequencePath(r,i))," OWNED BY ").concat(this.escapePath(r),'."').concat(i.name,'"'))))),i.generationStrategy==="uuid"?i.isGenerated===!0?(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" SET DEFAULT ').concat(this.driver.uuidGenerator))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" DROP DEFAULT')))):(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" DROP DEFAULT'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" SET DEFAULT ').concat(this.driver.uuidGenerator)))):i.generationStrategy==="increment"&&(i.isGenerated===!0?(a.push(new H("CREATE SEQUENCE IF NOT EXISTS ".concat(this.escapePath(this.buildSequencePath(r,i))," OWNED BY ").concat(this.escapePath(r),'."').concat(i.name,'"'))),o.push(new H("DROP SEQUENCE ".concat(this.escapePath(this.buildSequencePath(r,i))))),a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,"\" SET DEFAULT nextval('").concat(this.escapePath(this.buildSequencePath(r,i)),"')"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" DROP DEFAULT')))):(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" DROP DEFAULT'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,"\" SET DEFAULT nextval('").concat(this.escapePath(this.buildSequencePath(r,i)),"')"))),a.push(new H("DROP SEQUENCE ".concat(this.escapePath(this.buildSequencePath(r,i))))),o.push(new H("CREATE SEQUENCE IF NOT EXISTS ".concat(this.escapePath(this.buildSequencePath(r,i))," OWNED BY ").concat(this.escapePath(r),'."').concat(i.name,'"')))))),i.default!==c.default&&!l&&(i.default!==null&&i.default!==void 0?(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" SET DEFAULT ').concat(i.default))),c.default!==null&&c.default!==void 0?o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" SET DEFAULT ').concat(c.default))):o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" DROP DEFAULT')))):c.default!==null&&c.default!==void 0&&(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" DROP DEFAULT'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" SET DEFAULT ').concat(c.default))))),((i.spatialFeatureType||"").toLowerCase()!==(c.spatialFeatureType||"").toLowerCase()||i.srid!==c.srid)&&(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" TYPE ').concat(this.driver.createFullType(i)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" TYPE ').concat(this.driver.createFullType(c))))),i.generatedType!==c.generatedType&&(!i.generatedType||i.generatedType==="VIRTUAL")){const u=(await this.getTableNameWithSchema(r.name)).split("."),d=u[1],h=u[0];a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' RENAME COLUMN "').concat(c.name,'" TO "TEMP_OLD_').concat(c.name,'"'))),a.push(new H("ALTER TABLE ".concat(this.escapePath(r)," ADD ").concat(this.buildCreateColumnSql(r,i)))),a.push(new H("UPDATE ".concat(this.escapePath(r),' SET "').concat(i.name,'" = "TEMP_OLD_').concat(c.name,'"'))),a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP COLUMN "TEMP_OLD_').concat(c.name,'"'))),a.push(this.deleteTypeormMetadataSql({database:this.driver.database,schema:h,table:d,type:Ke.GENERATED_COLUMN,name:c.name})),o.push(this.insertTypeormMetadataSql({database:this.driver.database,schema:h,table:d,type:Ke.GENERATED_COLUMN,name:c.name,value:c.asExpression})),o.push(new H("ALTER TABLE ".concat(this.escapePath(r)," ADD ").concat(this.buildCreateColumnSql(r,c)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP COLUMN "').concat(i.name,'"')))}}await this.executeQueries(a,o),this.replaceCachedTable(r,s)}async changeColumns(e,t){for(const{oldColumn:i,newColumn:r}of t)await this.changeColumn(e,i,r)}async dropColumn(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableColumn(t)?t:i.findColumnByName(t);if(!r)throw new J('Column "'.concat(t,'" was not found in table "').concat(i.name,'"'));const s=i.clone(),a=[],o=[];if(r.isPrimary){const d=r.primaryKeyConstraintName?r.primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,s.primaryColumns.map(m=>m.name)),h=s.primaryColumns.map(m=>'"'.concat(m.name,'"')).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(s),' DROP CONSTRAINT "').concat(d,'"'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(s),' ADD CONSTRAINT "').concat(d,'" PRIMARY KEY (').concat(h,")")));const f=s.findColumnByName(r.name);if(f.isPrimary=!1,s.primaryColumns.length>0){const m=s.primaryColumns[0].primaryKeyConstraintName?s.primaryColumns[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,s.primaryColumns.map(_=>_.name)),g=s.primaryColumns.map(_=>'"'.concat(_.name,'"')).join(", ");a.push(new H("ALTER TABLE ".concat(this.escapePath(s),' ADD CONSTRAINT "').concat(m,'" PRIMARY KEY (').concat(g,")"))),o.push(new H("ALTER TABLE ".concat(this.escapePath(s),' DROP CONSTRAINT "').concat(m,'"')))}}const l=s.indices.find(d=>d.columnNames.length===1&&d.columnNames[0]===r.name);l&&(s.indices.splice(s.indices.indexOf(l),1),a.push(this.dropIndexSql(i,l)),o.push(this.createIndexSql(i,l)));const c=s.checks.find(d=>!!d.columnNames&&d.columnNames.length===1&&d.columnNames[0]===r.name);c&&(s.checks.splice(s.checks.indexOf(c),1),a.push(this.dropCheckConstraintSql(i,c)),o.push(this.createCheckConstraintSql(i,c)));const u=s.uniques.find(d=>d.columnNames.length===1&&d.columnNames[0]===r.name);if(u&&(s.uniques.splice(s.uniques.indexOf(u),1),a.push(this.dropUniqueConstraintSql(i,u)),o.push(this.createUniqueConstraintSql(i,u))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i),' DROP COLUMN "').concat(r.name,'"'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD ").concat(this.buildCreateColumnSql(i,r)))),(r.type==="enum"||r.type==="simple-enum")&&await this.hasEnumType(i,r)){const h=await this.getUserDefinedTypeName(i,r),f='"'.concat(h.schema,'"."').concat(h.name,'"');a.push(this.dropEnumTypeSql(i,r,f)),o.push(this.createEnumTypeSql(i,r,f))}if(r.generatedType==="STORED"){const d=(await this.getTableNameWithSchema(i.name)).split("."),h=d[1],f=d[0],m=this.deleteTypeormMetadataSql({database:this.driver.database,schema:f,table:h,type:Ke.GENERATED_COLUMN,name:r.name}),g=this.insertTypeormMetadataSql({database:this.driver.database,schema:f,table:h,type:Ke.GENERATED_COLUMN,name:r.name,value:r.asExpression});a.push(m),o.push(g)}await this.executeQueries(a,o),s.removeColumn(r),this.replaceCachedTable(i,s)}async dropColumns(e,t){for(const i of t)await this.dropColumn(e,i)}async createPrimaryKey(e,t,i){const r=se.isTable(e)?e:await this.getCachedTable(e),s=r.clone(),a=this.createPrimaryKeySql(r,t,i);s.columns.forEach(l=>{t.find(c=>c===l.name)&&(l.isPrimary=!0)});const o=this.dropPrimaryKeySql(s);await this.executeQueries(a,o),this.replaceCachedTable(r,s)}async updatePrimaryKeys(e,t){var i;const r=se.isTable(e)?e:await this.getCachedTable(e),s=r.clone(),a=t.map(h=>h.name),o=[],l=[],c=s.primaryColumns;if(c.length>0){const h=c[0].primaryKeyConstraintName?c[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,c.map(m=>m.name)),f=c.map(m=>'"'.concat(m.name,'"')).join(", ");o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(h,'"'))),l.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(h,'" PRIMARY KEY (').concat(f,")")))}s.columns.filter(h=>a.indexOf(h.name)!==-1).forEach(h=>h.isPrimary=!0);const u=!((i=c[0])===null||i===void 0)&&i.primaryKeyConstraintName?c[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,a),d=a.map(h=>'"'.concat(h,'"')).join(", ");o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(u,'" PRIMARY KEY (').concat(d,")"))),l.push(new H("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(u,'"'))),await this.executeQueries(o,l),this.replaceCachedTable(r,s)}async dropPrimaryKey(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=this.dropPrimaryKeySql(i),s=this.createPrimaryKeySql(i,i.primaryColumns.map(a=>a.name),t);await this.executeQueries(r,s),i.primaryColumns.forEach(a=>{a.isPrimary=!1})}async createUniqueConstraint(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.uniqueConstraintName(i,t.columnNames));const r=this.createUniqueConstraintSql(i,t),s=this.dropUniqueConstraintSql(i,t);await this.executeQueries(r,s),i.addUniqueConstraint(t)}async createUniqueConstraints(e,t){for(const i of t)await this.createUniqueConstraint(e,i)}async dropUniqueConstraint(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableUnique(t)?t:i.uniques.find(o=>o.name===t);if(!r)throw new J("Supplied unique constraint was not found in table ".concat(i.name));const s=this.dropUniqueConstraintSql(i,r),a=this.createUniqueConstraintSql(i,r);await this.executeQueries(s,a),i.removeUniqueConstraint(r)}async dropUniqueConstraints(e,t){for(const i of t)await this.dropUniqueConstraint(e,i)}async createCheckConstraint(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.checkConstraintName(i,t.expression));const r=this.createCheckConstraintSql(i,t),s=this.dropCheckConstraintSql(i,t);await this.executeQueries(r,s),i.addCheckConstraint(t)}async createCheckConstraints(e,t){const i=t.map(r=>this.createCheckConstraint(e,r));await Promise.all(i)}async dropCheckConstraint(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableCheck(t)?t:i.checks.find(o=>o.name===t);if(!r)throw new J("Supplied check constraint was not found in table ".concat(i.name));const s=this.dropCheckConstraintSql(i,r),a=this.createCheckConstraintSql(i,r);await this.executeQueries(s,a),i.removeCheckConstraint(r)}async dropCheckConstraints(e,t){const i=t.map(r=>this.dropCheckConstraint(e,r));await Promise.all(i)}async createExclusionConstraint(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.exclusionConstraintName(i,t.expression));const r=this.createExclusionConstraintSql(i,t),s=this.dropExclusionConstraintSql(i,t);await this.executeQueries(r,s),i.addExclusionConstraint(t)}async createExclusionConstraints(e,t){const i=t.map(r=>this.createExclusionConstraint(e,r));await Promise.all(i)}async dropExclusionConstraint(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableExclusion(t)?t:i.exclusions.find(o=>o.name===t);if(!r)throw new J("Supplied exclusion constraint was not found in table ".concat(i.name));const s=this.dropExclusionConstraintSql(i,r),a=this.createExclusionConstraintSql(i,r);await this.executeQueries(s,a),i.removeExclusionConstraint(r)}async dropExclusionConstraints(e,t){const i=t.map(r=>this.dropExclusionConstraint(e,r));await Promise.all(i)}async createForeignKey(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(i,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const r=this.createForeignKeySql(i,t),s=this.dropForeignKeySql(i,t);await this.executeQueries(r,s),i.addForeignKey(t)}async createForeignKeys(e,t){for(const i of t)await this.createForeignKey(e,i)}async dropForeignKey(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableForeignKey(t)?t:i.foreignKeys.find(o=>o.name===t);if(!r)throw new J("Supplied foreign key was not found in table ".concat(i.name));r.name||(r.name=this.connection.namingStrategy.foreignKeyName(i,r.columnNames,this.getTablePath(r),r.referencedColumnNames));const s=this.dropForeignKeySql(i,r),a=this.createForeignKeySql(i,r);await this.executeQueries(s,a),i.removeForeignKey(r)}async dropForeignKeys(e,t){for(const i of t)await this.dropForeignKey(e,i)}async createIndex(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(i,t));const r=this.createIndexSql(i,t),s=this.dropIndexSql(i,t);await this.executeQueries(r,s),i.addIndex(t)}async createViewIndex(e,t){const i=se.isView(e)?e:await this.getCachedView(e);t.name||(t.name=this.generateIndexName(i,t));const r=this.createViewIndexSql(i,t),s=this.dropIndexSql(i,t);await this.executeQueries(r,s),i.addIndex(t)}async createIndices(e,t){for(const i of t)await this.createIndex(e,i)}async createViewIndices(e,t){for(const i of t)await this.createViewIndex(e,i)}async dropIndex(e,t){const i=se.isTable(e)?e:await this.getCachedTable(e),r=se.isTableIndex(t)?t:i.indices.find(o=>o.name===t);if(!r)throw new J("Supplied index ".concat(t," was not found in table ").concat(i.name));r.name||(r.name=this.generateIndexName(i,r));const s=this.dropIndexSql(i,r),a=this.createIndexSql(i,r);await this.executeQueries(s,a),i.removeIndex(r)}async dropViewIndex(e,t){const i=se.isView(e)?e:await this.getCachedView(e),r=se.isTableIndex(t)?t:i.indices.find(o=>o.name===t);if(!r)throw new J("Supplied index ".concat(t," was not found in view ").concat(i.name));r.name||(r.name=this.generateIndexName(i,r));const s=this.dropIndexSql(i,r),a=this.createViewIndexSql(i,r);await this.executeQueries(s,a),i.removeIndex(r)}async dropIndices(e,t){for(const i of t)await this.dropIndex(e,i)}async clearTable(e){await this.query("TRUNCATE TABLE ".concat(this.escapePath(e)))}async clearDatabase(){const e=[];this.connection.entityMetadatas.filter(r=>r.schema).forEach(r=>{!!e.find(a=>a===r.schema)||e.push(r.schema)}),e.push(this.driver.options.schema||"current_schema()");const t=e.map(r=>r==="current_schema()"?r:"'"+r+"'").join(", "),i=this.isTransactionActive;i||await this.startTransaction();try{const r=await this.getVersion(),s="SELECT 'DROP VIEW IF EXISTS \"' || schemaname || '\".\"' || viewname || '\" CASCADE;' as \"query\" "+'FROM "pg_views" WHERE "schemaname" IN ('.concat(t,") AND \"viewname\" NOT IN ('geography_columns', 'geometry_columns', 'raster_columns', 'raster_overviews')"),a=await this.query(s);if(await Promise.all(a.map(c=>this.query(c.query))),IO.isGreaterOrEqual(r,"9.3")){const c="SELECT 'DROP MATERIALIZED VIEW IF EXISTS \"' || schemaname || '\".\"' || matviewname || '\" CASCADE;' as \"query\" "+'FROM "pg_matviews" WHERE "schemaname" IN ('.concat(t,")"),u=await this.query(c);await Promise.all(u.map(d=>this.query(d.query)))}const o='SELECT \'DROP TABLE IF EXISTS "\' || schemaname || \'"."\' || tablename || \'" CASCADE;\' as "query" FROM "pg_tables" WHERE "schemaname" IN ('.concat(t,") AND \"tablename\" NOT IN ('spatial_ref_sys')"),l=await this.query(o);await Promise.all(l.map(c=>this.query(c.query))),await this.dropEnumTypes(t),i||await this.commitTransaction()}catch(r){try{i||await this.rollbackTransaction()}catch(s){}throw r}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const i=await this.getCurrentDatabase(),r=await this.getCurrentSchema(),s=e.length===0?"1=1":e.map(d=>this.driver.parseTableName(d)).map(({schema:d,tableName:h})=>(d||(d=this.driver.options.schema||r),'("t"."schema" = \''.concat(d,'\' AND "t"."name" = \'').concat(h,"')"))).join(" OR "),a=e.length===0?"1=1":e.map(d=>this.driver.parseTableName(d)).map(({schema:d,tableName:h})=>(d||(d=this.driver.options.schema||r),'("ns"."nspname" = \''.concat(d,'\' AND "t"."relname" = \'').concat(h,"')"))).join(" OR "),o='SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN \'t\' THEN \'TRUE\' ELSE\'FALSE\' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" '+'WHERE "t"."relkind" IN (\'m\') AND "cnst"."contype" IS NULL AND ('.concat(a,")"),l='SELECT "t".* FROM '.concat(this.escapePath(this.getTypeormMetadataTableName()),' "t" ')+'INNER JOIN "pg_catalog"."pg_class" "c" ON "c"."relname" = "t"."name" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "c"."relnamespace" AND "n"."nspname" = "t"."schema" '+'WHERE "t"."type" IN (\''.concat(Ke.VIEW,"', '").concat(Ke.MATERIALIZED_VIEW,"') ").concat(s?"AND (".concat(s,")"):""),c=await this.query(l),u=await this.query(o);return c.map(d=>{const h=Fe.uniq(u.filter(g=>g.table_name===d.name&&g.table_schema===d.schema),g=>g.constraint_name),f=new Ga,m=d.schema===r&&!this.driver.options.schema?void 0:d.schema;return f.database=i,f.schema=d.schema,f.name=this.driver.buildTableName(d.name,m),f.expression=d.value,f.materialized=d.type===Ke.MATERIALIZED_VIEW,f.indices=h.map(g=>{const _=u.filter(v=>v.table_schema===g.table_schema&&v.table_name===g.table_name&&v.constraint_name===g.constraint_name);return new yn({view:f,name:g.constraint_name,columnNames:_.map(v=>v.column_name),isUnique:g.is_unique==="TRUE",where:g.condition,isFulltext:!1})}),f})}async loadTables(e){if(e&&e.length===0)return[];const t=await this.getCurrentSchema(),i=await this.getCurrentDatabase(),r=[];if(e){const T='SELECT "table_schema", "table_name" FROM "information_schema"."tables" WHERE '+e.map(N=>this.driver.parseTableName(N)).map(({schema:N,tableName:P})=>'("table_schema" = \''.concat(N||t,"' AND \"table_name\" = '").concat(P,"')")).join(" OR ");r.push(...await this.query(T))}else{const y='SELECT "table_schema", "table_name" FROM "information_schema"."tables"';r.push(...await this.query(y))}if(r.length===0)return[];const a='SELECT columns.*, pg_catalog.col_description((\'"\' || table_catalog || \'"."\' || table_schema || \'"."\' || table_name || \'"\')::regclass::oid, ordinal_position) AS description, (\'"\' || "udt_schema" || \'"."\' || "udt_name" || \'"\')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE '+r.map(({table_schema:y,table_name:T})=>'("table_schema" = \''.concat(y,"' AND \"table_name\" = '").concat(T,"')")).join(" OR "),o=r.map(({table_schema:y,table_name:T})=>'("ns"."nspname" = \''.concat(y,'\' AND "t"."relname" = \'').concat(T,"')")).join(" OR "),l='SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN \'p\' THEN \'PRIMARY\' WHEN \'u\' THEN \'UNIQUE\' WHEN \'c\' THEN \'CHECK\' WHEN \'x\' THEN \'EXCLUDE\' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") '+"WHERE \"t\".\"relkind\" IN ('r', 'p') AND (".concat(o,")"),c='SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN \'t\' THEN \'TRUE\' ELSE\'FALSE\' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" '+'WHERE "t"."relkind" IN (\'r\', \'p\') AND "cnst"."contype" IS NULL AND ('.concat(o,")"),u=r.map(({table_schema:y,table_name:T})=>'("ns"."nspname" = \''.concat(y,'\' AND "cl"."relname" = \'').concat(T,"')")).join(" OR "),h=await this.hasSupportForPartitionedTables()?' AND "cl"."relispartition" = \'f\'':"",f='SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN \'INITIALLY DEFERRED\' ELSE \'INITIALLY IMMEDIATE\' END as condeferred, CASE "con1"."confdeltype" WHEN \'a\' THEN \'NO ACTION\' WHEN \'r\' THEN \'RESTRICT\' WHEN \'c\' THEN \'CASCADE\' WHEN \'n\' THEN \'SET NULL\' WHEN \'d\' THEN \'SET DEFAULT\' END as "confdeltype", CASE "con1"."confupdtype" WHEN \'a\' THEN \'NO ACTION\' WHEN \'r\' THEN \'RESTRICT\' WHEN \'c\' THEN \'CASCADE\' WHEN \'n\' THEN \'SET NULL\' WHEN \'d\' THEN \'SET DEFAULT\' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" '+'WHERE "con1"."contype" = \'f\' AND ('.concat(u,") ")+') "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" '+'INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid" '.concat(h)+'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"',[m,g,_,v]=await Promise.all([this.query(a),this.query(l),this.query(c),this.query(f)]);return Promise.all(r.map(async y=>{const T=new nn,N=(O,K)=>O[K]===t&&(!this.driver.options.schema||this.driver.options.schema===t)?void 0:O[K],P=N(y,"table_schema");T.database=i,T.schema=y.table_schema,T.name=this.driver.buildTableName(y.table_name,P),T.columns=await Promise.all(m.filter(O=>O.table_name===y.table_name&&O.table_schema===y.table_schema).map(async O=>{const K=g.filter(be=>be.table_name===O.table_name&&be.table_schema===O.table_schema&&be.column_name===O.column_name),z=new Wi;if(z.name=O.column_name,z.type=O.regtype.toLowerCase(),(z.type==="numeric"||z.type==="decimal"||z.type==="float")&&(O.numeric_precision!==null&&!this.isDefaultColumnPrecision(T,z,O.numeric_precision)?z.precision=O.numeric_precision:O.numeric_scale!==null&&!this.isDefaultColumnScale(T,z,O.numeric_scale)&&(z.precision=void 0),O.numeric_scale!==null&&!this.isDefaultColumnScale(T,z,O.numeric_scale)?z.scale=O.numeric_scale:O.numeric_precision!==null&&!this.isDefaultColumnPrecision(T,z,O.numeric_precision)&&(z.scale=void 0)),(z.type==="interval"||z.type==="time without time zone"||z.type==="time with time zone"||z.type==="timestamp without time zone"||z.type==="timestamp with time zone")&&(z.precision=this.isDefaultColumnPrecision(T,z,O.datetime_precision)?void 0:O.datetime_precision),O.data_type==="USER-DEFINED"||O.data_type==="ARRAY"){const{name:be}=await this.getUserDefinedTypeName(T,z),he=this.buildEnumName(T,z,!1,!0)!==be?be:void 0,ee='SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" '+'WHERE "n"."nspname" = \''.concat(y.table_schema,'\' AND "t"."typname" = \'').concat(he||be,"'"),le=await this.query(ee);if(le.length&&(z.type="enum",z.enum=le.map(Te=>Te.value),z.enumName=he),O.data_type==="ARRAY"){z.isArray=!0;const Te=z.type.replace("[]","");z.type=this.connection.driver.normalizeType({type:Te})}}if(z.type==="geometry"||z.type==="geography"){const be='SELECT * FROM (SELECT "f_table_schema" "table_schema", "f_table_name" "table_name", '+'"f_'.concat(z.type,'_column" "column_name", "srid", "type" ')+'FROM "'.concat(z.type,'_columns"')+") AS _ "+'WHERE "column_name" = \''.concat(O.column_name,"' AND ")+'"table_schema" = \''.concat(O.table_schema,"' AND ")+'"table_name" = \''.concat(O.table_name,"'"),de=await this.query(be);de.length>0&&(z.spatialFeatureType=de[0].type,z.srid=de[0].srid)}if(this.driver.withLengthColumnTypes.indexOf(z.type)!==-1){let be;if(z.isArray){const de=/\((\d+)\)/.exec(O.format_type);be=de?de[1]:void 0}else O.character_maximum_length&&(be=O.character_maximum_length.toString());be&&(z.length=this.isDefaultColumnLength(T,z,be)?"":be)}z.isNullable=O.is_nullable==="YES";const te=K.find(be=>be.constraint_type==="PRIMARY");if(te){z.isPrimary=!0;const de=g.filter(ee=>ee.table_name===O.table_name&&ee.table_schema===O.table_schema&&ee.column_name!==O.column_name&&ee.constraint_type==="PRIMARY").map(ee=>ee.column_name);de.push(O.column_name);const he=this.connection.namingStrategy.primaryKeyName(T,de);te.constraint_name!==he&&(z.primaryKeyConstraintName=te.constraint_name)}const ue=K.filter(be=>be.constraint_type==="UNIQUE"),ye=ue.every(be=>g.some(de=>de.constraint_type==="UNIQUE"&&de.constraint_name===be.constraint_name&&de.column_name!==O.column_name));if(z.isUnique=ue.length>0&&!ye,O.is_identity==="YES")z.isGenerated=!0,z.generationStrategy="identity",z.generatedIdentity=O.identity_generation;else if(O.column_default!==null&&O.column_default!==void 0){const be="nextval('".concat(this.buildSequenceName(T,O.column_name),"'::regclass)"),de="nextval('".concat(this.buildSequencePath(T,O.column_name),"'::regclass)"),he=O.column_default.replace(/"/g,"");he===be||he===de?(z.isGenerated=!0,z.generationStrategy="increment"):O.column_default==="gen_random_uuid()"||/^uuid_generate_v\d\(\)/.test(O.column_default)?z.type==="uuid"?(z.isGenerated=!0,z.generationStrategy="uuid"):z.default=O.column_default:O.column_default==="now()"||O.column_default.indexOf("'now'::text")!==-1?z.default=O.column_default:(z.default=O.column_default.replace(/::[\w\s.\[\]\-"]+/g,""),z.default=z.default.replace(/^(-?\d+)$/,"'$1'"))}if(O.is_generated==="ALWAYS"&&O.generation_expression){z.generatedType="STORED";const be=await this.selectTypeormMetadataSql({database:i,schema:y.table_schema,table:y.table_name,type:Ke.GENERATED_COLUMN,name:z.name}),de=await this.query(be.query,be.parameters);de[0]&&de[0].value?z.asExpression=de[0].value:z.asExpression=""}return z.comment=O.description?O.description:void 0,O.character_set_name&&(z.charset=O.character_set_name),O.collation_name&&(z.collation=O.collation_name),z}));const F=Fe.uniq(g.filter(O=>O.table_name===y.table_name&&O.table_schema===y.table_schema&&O.constraint_type==="UNIQUE"),O=>O.constraint_name);T.uniques=F.map(O=>{const K=g.filter(z=>z.constraint_name===O.constraint_name);return new hi({name:O.constraint_name,columnNames:K.map(z=>z.column_name),deferrable:O.deferrable?O.deferred:void 0})});const $=Fe.uniq(g.filter(O=>O.table_name===y.table_name&&O.table_schema===y.table_schema&&O.constraint_type==="CHECK"),O=>O.constraint_name);T.checks=$.map(O=>{const K=g.filter(z=>z.constraint_name===O.constraint_name);return new Ss({name:O.constraint_name,columnNames:K.map(z=>z.column_name),expression:O.expression.replace(/^\s*CHECK\s*\((.*)\)\s*$/i,"$1")})});const B=Fe.uniq(g.filter(O=>O.table_name===y.table_name&&O.table_schema===y.table_schema&&O.constraint_type==="EXCLUDE"),O=>O.constraint_name);T.exclusions=B.map(O=>new Zl({name:O.constraint_name,expression:O.expression.substring(8)}));const M=Fe.uniq(v.filter(O=>O.table_name===y.table_name&&O.table_schema===y.table_schema),O=>O.constraint_name);T.foreignKeys=M.map(O=>{const K=v.filter(ue=>ue.constraint_name===O.constraint_name),z=N(O,"referenced_table_schema"),te=this.driver.buildTableName(O.referenced_table_name,z);return new zr({name:O.constraint_name,columnNames:K.map(ue=>ue.column_name),referencedSchema:O.referenced_table_schema,referencedTableName:te,referencedColumnNames:K.map(ue=>ue.referenced_column_name),onDelete:O.on_delete,onUpdate:O.on_update,deferrable:O.deferrable?O.deferred:void 0})});const Z=Fe.uniq(_.filter(O=>O.table_name===y.table_name&&O.table_schema===y.table_schema),O=>O.constraint_name);return T.indices=Z.map(O=>{const K=_.filter(z=>z.table_schema===O.table_schema&&z.table_name===O.table_name&&z.constraint_name===O.constraint_name);return new yn({table:T,name:O.constraint_name,columnNames:K.map(z=>z.column_name),isUnique:O.is_unique==="TRUE",where:O.condition,isSpatial:K.every(z=>this.driver.spatialTypes.indexOf(z.type_name)>=0),isFulltext:!1})}),T}))}createTableSql(e,t){const i=e.columns.map(a=>this.buildCreateColumnSql(e,a)).join(", ");let r="CREATE TABLE ".concat(this.escapePath(e)," (").concat(i);if(e.columns.filter(a=>a.isUnique).forEach(a=>{e.uniques.some(l=>l.columnNames.length===1&&l.columnNames[0]===a.name)||e.uniques.push(new hi({name:this.connection.namingStrategy.uniqueConstraintName(e,[a.name]),columnNames:[a.name]}))}),e.uniques.length>0){const a=e.uniques.map(o=>{const l=o.name?o.name:this.connection.namingStrategy.uniqueConstraintName(e,o.columnNames),c=o.columnNames.map(d=>'"'.concat(d,'"')).join(", ");let u='CONSTRAINT "'.concat(l,'" UNIQUE (').concat(c,")");return o.deferrable&&(u+=" DEFERRABLE ".concat(o.deferrable)),u}).join(", ");r+=", ".concat(a)}if(e.checks.length>0){const a=e.checks.map(o=>{const l=o.name?o.name:this.connection.namingStrategy.checkConstraintName(e,o.expression);return'CONSTRAINT "'.concat(l,'" CHECK (').concat(o.expression,")")}).join(", ");r+=", ".concat(a)}if(e.exclusions.length>0){const a=e.exclusions.map(o=>{const l=o.name?o.name:this.connection.namingStrategy.exclusionConstraintName(e,o.expression);return'CONSTRAINT "'.concat(l,'" EXCLUDE ').concat(o.expression)}).join(", ");r+=", ".concat(a)}if(e.foreignKeys.length>0&&t){const a=e.foreignKeys.map(o=>{const l=o.columnNames.map(d=>'"'.concat(d,'"')).join(", ");o.name||(o.name=this.connection.namingStrategy.foreignKeyName(e,o.columnNames,this.getTablePath(o),o.referencedColumnNames));const c=o.referencedColumnNames.map(d=>'"'.concat(d,'"')).join(", ");let u='CONSTRAINT "'.concat(o.name,'" FOREIGN KEY (').concat(l,") REFERENCES ").concat(this.escapePath(this.getTablePath(o))," (").concat(c,")");return o.onDelete&&(u+=" ON DELETE ".concat(o.onDelete)),o.onUpdate&&(u+=" ON UPDATE ".concat(o.onUpdate)),o.deferrable&&(u+=" DEFERRABLE ".concat(o.deferrable)),u}).join(", ");r+=", ".concat(a)}const s=e.columns.filter(a=>a.isPrimary);if(s.length>0){const a=s[0].primaryKeyConstraintName?s[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(e,s.map(l=>l.name)),o=s.map(l=>'"'.concat(l.name,'"')).join(", ");r+=', CONSTRAINT "'.concat(a,'" PRIMARY KEY (').concat(o,")")}return r+=")",e.columns.filter(a=>a.comment).forEach(a=>r+="; COMMENT ON COLUMN ".concat(this.escapePath(e),'."').concat(a.name,'" IS ').concat(this.escapeComment(a.comment))),new H(r)}async getVersion(){return(await this.query("SELECT version()"))[0].version.replace(/^PostgreSQL ([\d\.]+) .*$/,"$1")}dropTableSql(e){return new H("DROP TABLE ".concat(this.escapePath(e)))}createViewSql(e){const t=e.materialized?"MATERIALIZED ":"",i=this.escapePath(e);return typeof e.expression=="string"?new H("CREATE ".concat(t,"VIEW ").concat(i," AS ").concat(e.expression)):new H("CREATE ".concat(t,"VIEW ").concat(i," AS ").concat(e.expression(this.connection).getQuery()))}async insertViewDefinitionSql(e){const t=await this.getCurrentSchema();let{schema:i,tableName:r}=this.driver.parseTableName(e);i||(i=t);const s=e.materialized?Ke.MATERIALIZED_VIEW:Ke.VIEW,a=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:s,schema:i,name:r,value:a})}dropViewSql(e){const t=e.materialized?"MATERIALIZED ":"";return new H("DROP ".concat(t,"VIEW ").concat(this.escapePath(e)))}async deleteViewDefinitionSql(e){const t=await this.getCurrentSchema();let{schema:i,tableName:r}=this.driver.parseTableName(e);i||(i=t);const s=e.materialized?Ke.MATERIALIZED_VIEW:Ke.VIEW;return this.deleteTypeormMetadataSql({type:s,schema:i,name:r})}async dropEnumTypes(e){const t='SELECT \'DROP TYPE IF EXISTS "\' || n.nspname || \'"."\' || t.typname || \'" CASCADE;\' as "query" FROM "pg_type" "t" INNER JOIN "pg_enum" "e" ON "e"."enumtypid" = "t"."oid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" '+'WHERE "n"."nspname" IN ('.concat(e,') GROUP BY "n"."nspname", "t"."typname"'),i=await this.query(t);await Promise.all(i.map(r=>this.query(r.query)))}async hasEnumType(e,t){let{schema:i}=this.driver.parseTableName(e);i||(i=await this.getCurrentSchema());const r=this.buildEnumName(e,t,!1,!0),s='SELECT "n"."nspname", "t"."typname" FROM "pg_type" "t" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" '+'WHERE "n"."nspname" = \''.concat(i,'\' AND "t"."typname" = \'').concat(r,"'");return!!(await this.query(s)).length}createEnumTypeSql(e,t,i){i||(i=this.buildEnumName(e,t));const r=t.enum.map(s=>"'".concat(s.replace("'","''"),"'")).join(", ");return new H("CREATE TYPE ".concat(i," AS ENUM(").concat(r,")"))}dropEnumTypeSql(e,t,i){return i||(i=this.buildEnumName(e,t)),new H("DROP TYPE ".concat(i))}createIndexSql(e,t){const i=t.columnNames.map(r=>'"'.concat(r,'"')).join(", ");return new H("CREATE ".concat(t.isUnique?"UNIQUE ":"",'INDEX "').concat(t.name,'" ON ').concat(this.escapePath(e)," ").concat(t.isSpatial?"USING GiST ":"","(").concat(i,") ").concat(t.where?"WHERE "+t.where:""))}createViewIndexSql(e,t){const i=t.columnNames.map(r=>'"'.concat(r,'"')).join(", ");return new H("CREATE ".concat(t.isUnique?"UNIQUE ":"",'INDEX "').concat(t.name,'" ON ').concat(this.escapePath(e)," (").concat(i,") ").concat(t.where?"WHERE "+t.where:""))}dropIndexSql(e,t){let i=se.isTableIndex(t)?t.name:t;const{schema:r}=this.driver.parseTableName(e);return r?new H('DROP INDEX "'.concat(r,'"."').concat(i,'"')):new H('DROP INDEX "'.concat(i,'"'))}createPrimaryKeySql(e,t,i){const r=i||this.connection.namingStrategy.primaryKeyName(e,t),s=t.map(a=>'"'.concat(a,'"')).join(", ");return new H("ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(r,'" PRIMARY KEY (').concat(s,")"))}dropPrimaryKeySql(e){if(!e.primaryColumns.length)throw new J("Table ".concat(e," has no primary keys."));const t=e.primaryColumns.map(s=>s.name),i=e.primaryColumns[0].primaryKeyConstraintName,r=i||this.connection.namingStrategy.primaryKeyName(e,t);return new H("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(r,'"'))}createUniqueConstraintSql(e,t){const i=t.columnNames.map(s=>'"'+s+'"').join(", ");let r="ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(t.name,'" UNIQUE (').concat(i,")");return t.deferrable&&(r+=" DEFERRABLE ".concat(t.deferrable)),new H(r)}dropUniqueConstraintSql(e,t){const i=se.isTableUnique(t)?t.name:t;return new H("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(i,'"'))}createCheckConstraintSql(e,t){return new H("ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(t.name,'" CHECK (').concat(t.expression,")"))}dropCheckConstraintSql(e,t){const i=se.isTableCheck(t)?t.name:t;return new H("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(i,'"'))}createExclusionConstraintSql(e,t){return new H("ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(t.name,'" EXCLUDE ').concat(t.expression))}dropExclusionConstraintSql(e,t){const i=se.isTableExclusion(t)?t.name:t;return new H("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(i,'"'))}createForeignKeySql(e,t){const i=t.columnNames.map(a=>'"'+a+'"').join(", "),r=t.referencedColumnNames.map(a=>'"'+a+'"').join(",");let s="ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(t.name,'" FOREIGN KEY (').concat(i,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(t)),"(").concat(r,")");return t.onDelete&&(s+=" ON DELETE ".concat(t.onDelete)),t.onUpdate&&(s+=" ON UPDATE ".concat(t.onUpdate)),t.deferrable&&(s+=" DEFERRABLE ".concat(t.deferrable)),new H(s)}dropForeignKeySql(e,t){const i=se.isTableForeignKey(t)?t.name:t;return new H("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(i,'"'))}buildSequenceName(e,t){const{tableName:i}=this.driver.parseTableName(e),r=se.isTableColumn(t)?t.name:t;let s="".concat(i,"_").concat(r,"_seq");return s.length>this.connection.driver.maxAliasLength&&(s="".concat(i.substring(0,29),"_").concat(r.substring(0,Math.max(29,63-e.name.length-5)),"_seq")),s}buildSequencePath(e,t){const{schema:i}=this.driver.parseTableName(e);return i?"".concat(i,".").concat(this.buildSequenceName(e,t)):this.buildSequenceName(e,t)}buildEnumName(e,t,i=!0,r,s){const{schema:a,tableName:o}=this.driver.parseTableName(e);let l=t.enumName?t.enumName:"".concat(o,"_").concat(t.name.toLowerCase(),"_enum");return a&&i&&(l="".concat(a,".").concat(l)),s&&(l=l+"_old"),l.split(".").map(c=>r?c:'"'.concat(c,'"')).join(".")}async getUserDefinedTypeName(e,t){let{schema:i,tableName:r}=this.driver.parseTableName(e);i||(i=await this.getCurrentSchema());const s=await this.query('SELECT "udt_schema", "udt_name" '+'FROM "information_schema"."columns" WHERE "table_schema" = \''.concat(i,"' AND \"table_name\" = '").concat(r,"' AND \"column_name\"='").concat(t.name,"'"));let a=s[0].udt_name;return a.indexOf("_")===0&&(a=a.substr(1,a.length)),{schema:s[0].udt_schema,name:a}}escapeComment(e){return!e||e.length===0?"NULL":(e=e.replace(/'/g,"''").replace(/\u0000/g,""),"'".concat(e,"'"))}escapePath(e){const{schema:t,tableName:i}=this.driver.parseTableName(e);return t&&t!==this.driver.searchSchema?'"'.concat(t,'"."').concat(i,'"'):'"'.concat(i,'"')}async getTableNameWithSchema(e){const t=se.isTable(e)?e.name:e;if(t.indexOf(".")===-1){const r=(await this.query("SELECT current_schema()"))[0].current_schema;return"".concat(r,".").concat(t)}else return"".concat(t.split(".")[0],".").concat(t.split(".")[1])}buildCreateColumnSql(e,t){let i='"'+t.name+'"';if(t.isGenerated===!0&&t.generationStrategy!=="uuid")if(t.generationStrategy==="identity"){const r=t.generatedIdentity||"BY DEFAULT";i+=" ".concat(t.type," GENERATED ").concat(r," AS IDENTITY")}else(t.type==="integer"||t.type==="int"||t.type==="int4")&&(i+=" SERIAL"),(t.type==="smallint"||t.type==="int2")&&(i+=" SMALLSERIAL"),(t.type==="bigint"||t.type==="int8")&&(i+=" BIGSERIAL");return t.type==="enum"||t.type==="simple-enum"?(i+=" "+this.buildEnumName(e,t),t.isArray&&(i+=" array")):(!t.isGenerated||t.type==="uuid")&&(i+=" "+this.connection.driver.createFullType(t)),t.generatedType==="STORED"&&t.asExpression&&(i+=" GENERATED ALWAYS AS (".concat(t.asExpression,") STORED")),t.charset&&(i+=' CHARACTER SET "'+t.charset+'"'),t.collation&&(i+=' COLLATE "'+t.collation+'"'),t.isNullable!==!0&&(i+=" NOT NULL"),t.default!==void 0&&t.default!==null&&(i+=" DEFAULT "+t.default),t.isGenerated&&t.generationStrategy==="uuid"&&!t.default&&(i+=" DEFAULT ".concat(this.driver.uuidGenerator)),i}async hasSupportForPartitionedTables(){return!!(await this.query("SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'")).length}}class gK extends mK{constructor(e,t){super(e,t)}}class yK extends gK{constructor(e,t,i){super(e,i),this.client=t}connect(){return this.databaseConnection?Promise.resolve(this.databaseConnection):this.databaseConnectionPromise?this.databaseConnectionPromise:(this.mode==="slave"&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then(([e,t])=>(this.driver.connectedQueryRunners.push(this),this.databaseConnection=e,this.releaseCallback=t,this.databaseConnection)):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then(([e,t])=>(this.driver.connectedQueryRunners.push(this),this.databaseConnection=e,this.releaseCallback=t,this.databaseConnection)),this.databaseConnectionPromise)}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}this.transactionDepth===0?await this.client.startTransaction():await this.query("SAVEPOINT typeorm_".concat(this.transactionDepth)),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.client.commitTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.client.rollbackTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,i=!1){if(this.isReleased)throw new Oi;const r=await this.client.query(e,t),s=new pa;return s.raw=r,r!=null&&r.hasOwnProperty("records")&&Array.isArray(r.records)&&(s.records=r.records),r!=null&&r.hasOwnProperty("numberOfRecordsUpdated")&&(s.affected=r.numberOfRecordsUpdated),i?s:s.raw}}class bK extends RO{}class vK extends bK{constructor(e){super(),this.transactionSupport="nested",this.connection=e,this.options=e.options,this.isReplicated=!1,this.loadDependencies(),this.client=new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,(t,i)=>this.connection.logger.logQuery(t,i),this.options.serviceConfigOptions,this.options.formatOptions),this.database=Oe.buildDriverOptions(this.options).database}async connect(){}async disconnect(){}createQueryRunner(e){return new yK(this,new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,(t,i)=>this.connection.logger.logQuery(t,i),this.options.serviceConfigOptions,this.options.formatOptions),e)}preparePersistentValue(e,t){return this.options.formatOptions&&this.options.formatOptions.castParameters===!1?super.preparePersistentValue(e,t):(t.transformer&&(e=$n.transformTo(t.transformer,e)),this.client.preparePersistentValue(e,t))}prepareHydratedValue(e,t){return this.options.formatOptions&&this.options.formatOptions.castParameters===!1?super.prepareHydratedValue(e,t):(t.transformer&&(e=$n.transformFrom(t.transformer,e)),this.client.prepareHydratedValue(e,t))}loadDependencies(){const e=this.options.driver||Kt.load("typeorm-aurora-data-api-driver"),{pg:t}=e;this.DataApiDriver=t}executeQuery(e,t){return this.connection.query(t)}async afterConnect(){const e=await this.checkMetadataForExtensions();return e.hasExtensions&&await this.enableExtensions(e,this.connection),Promise.resolve()}}class wK extends yd{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new eo(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async executeSet(e){if(this.isReleased)throw new Oi;return(await this.connect()).executeSet(e,!1)}async query(e,t,i=!1){if(this.isReleased)throw new Oi;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const s=e.substr(0,e.indexOf(" "));try{let a;["BEGIN","ROLLBACK","COMMIT","CREATE","ALTER","DROP"].indexOf(s)!==-1?a=await r.execute(e,!1):["INSERT","UPDATE","DELETE"].indexOf(s)!==-1?a=await r.run(e,t,!1):a=await r.query(e,t||[]);const o=new pa;return a!=null&&a.hasOwnProperty("values")&&(o.raw=a.values,o.records=a.values),a!=null&&a.hasOwnProperty("changes")&&(o.affected=a.changes.changes,o.raw=a.changes.lastId||a.changes.changes),i?o:o.raw}catch(a){throw this.driver.connection.logger.logQueryError(a,e,t,this),new ia(e,t,a)}}parametrize(e){return Object.keys(e).map(t=>'"'.concat(t,'"')+"=?")}}class xK extends Xf{constructor(e){super(e),this.database=this.options.database,this.driver=this.options.driver,this.sqlite=this.options.driver}async connect(){this.databaseConnection=this.createDatabaseConnection(),await this.databaseConnection}async disconnect(){return this.queryRunner=void 0,(await this.databaseConnection).close().then(()=>{this.databaseConnection=void 0})}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new wK(this)),this.queryRunner}async createDatabaseConnection(){const e=this.options.mode||"no-encryption",t=e!=="no-encryption",i=typeof this.options.version>"u"?1:this.options.version,r=await this.sqlite.createConnection(this.options.database,t,e,i);return await r.open(),await r.query("PRAGMA foreign_keys = ON"),this.options.journalMode&&["DELETE","TRUNCATE","PERSIST","MEMORY","WAL","OFF"].indexOf(this.options.journalMode)!==-1&&await r.query("PRAGMA journal_mode = ".concat(this.options.journalMode)),r}loadDependencies(){if(this.sqlite=this.driver,!this.driver)throw new gd("Capacitor","@capacitor-community/sqlite")}}class EK extends k0{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.mode=t,this.broadcaster=new eo(this)}async connect(){if(this.session)return Promise.resolve(this.session);const[e]=await this.driver.instanceDatabase.createSession({});return this.session=e,this.sessionTransaction=await e.transaction(),this.session}async release(){return this.isReleased=!0,this.session&&await this.session.delete(),this.session=void 0,Promise.resolve()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}await this.connect(),await this.sessionTransaction.begin(),this.connection.logger.logQuery("START TRANSACTION"),await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive||!this.sessionTransaction)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionCommit"),await this.sessionTransaction.commit(),this.connection.logger.logQuery("COMMIT"),this.isTransactionActive=!1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive||!this.sessionTransaction)throw new Kr;await this.broadcaster.broadcast("BeforeTransactionRollback"),await this.sessionTransaction.rollback(),this.connection.logger.logQuery("ROLLBACK"),this.isTransactionActive=!1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,i=!1){if(this.isReleased)throw new Oi;try{const r=+new Date;await this.connect();let s;const a=e.startsWith("SELECT"),o=a&&!this.isTransactionActive?this.driver.instanceDatabase:this.sessionTransaction;!this.isTransactionActive&&!a&&await this.sessionTransaction.begin();try{this.driver.connection.logger.logQuery(e,t,this),s=await o.run({sql:e,params:t?t.reduce((h,f,m)=>(h["param"+m]=f,h),{}):void 0,json:!0}),!this.isTransactionActive&&!a&&await this.sessionTransaction.commit()}catch(h){try{!this.isTransactionActive&&!a&&await this.sessionTransaction.rollback()}catch(f){}throw h}const l=this.driver.options.maxQueryExecutionTime,u=+new Date-r;l&&u>l&&this.driver.connection.logger.logQuerySlow(u,e,t,this);const d=new pa;return d.raw=s,d.records=s?s[0]:[],s&&s[1]&&s[1].rowCountExact&&(d.affected=parseInt(s[1].rowCountExact)),i?d:d.records}catch(r){throw this.driver.connection.logger.logQueryError(r,e,t,this),new ia(e,t,r)}finally{}}async updateDDL(e,t){if(this.isReleased)throw new Oi;this.driver.connection.logger.logQuery(e,t,this);try{const i=+new Date,[r]=await this.driver.instanceDatabase.updateSchema(e);await r.promise();const s=this.driver.options.maxQueryExecutionTime,o=+new Date-i;s&&o>s&&this.driver.connection.logger.logQuerySlow(o,e,t,this)}catch(i){throw this.driver.connection.logger.logQueryError(i,e,t,this),new ia(e,t,i)}}async stream(e,t,i,r){if(this.isReleased)throw new Oi;try{this.driver.connection.logger.logQuery(e,t,this);const s={sql:e,params:t?t.reduce((o,l,c)=>(o["param"+c]=l,o),{}):void 0,json:!0},a=this.driver.instanceDatabase.runStream(s);return i&&a.on("end",i),r&&a.on("error",r),a}catch(s){throw this.driver.connection.logger.logQueryError(s,e,t,this),new ia(e,t,s)}}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){throw new J("Check database queries are not supported by Spanner driver.")}async getCurrentDatabase(){throw new J("Check database queries are not supported by Spanner driver.")}async hasSchema(e){return!!(await this.query('SELECT * FROM "information_schema"."schemata" WHERE "schema_name" = \''.concat(e,"'"))).length}async getCurrentSchema(){throw new J("Check schema queries are not supported by Spanner driver.")}async hasTable(e){const t=e instanceof nn?e.name:e,i="SELECT * FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE' "+"AND `TABLE_NAME` = '".concat(t,"'");return!!(await this.query(i)).length}async hasColumn(e,t){const i=e instanceof nn?e.name:e,r="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' "+"AND `TABLE_NAME` = '".concat(i,"' AND `COLUMN_NAME` = '").concat(t,"'");return!!(await this.query(r)).length}async createDatabase(e,t){if(t&&await this.hasDatabase(e))return Promise.resolve();const i='CREATE DATABASE "'.concat(e,'"'),r='DROP DATABASE "'.concat(e,'"');await this.executeQueries(new H(i),new H(r))}async dropDatabase(e,t){const i=t?'DROP DATABASE IF EXISTS "'.concat(e,'"'):'DROP DATABASE "'.concat(e,'"'),r='CREATE DATABASE "'.concat(e,'"');await this.executeQueries(new H(i),new H(r))}async createSchema(e,t){return Promise.resolve()}async dropSchema(e,t,i){return Promise.resolve()}async createTable(e,t=!1,i=!0,r=!0){if(t&&await this.hasTable(e))return Promise.resolve();const s=[],a=[];s.push(this.createTableSql(e,i)),a.push(this.dropTableSql(e)),i&&e.foreignKeys.forEach(l=>a.push(this.dropForeignKeySql(e,l))),r&&e.indices.forEach(l=>{l.name||(l.name=this.connection.namingStrategy.indexName(e,l.columnNames,l.where)),s.push(this.createIndexSql(e,l)),a.push(this.dropIndexSql(e,l))});const o=e.columns.filter(l=>l.generatedType&&l.asExpression);for(const l of o){const c=this.insertTypeormMetadataSql({table:e.name,type:Ke.GENERATED_COLUMN,name:l.name,value:l.asExpression}),u=this.deleteTypeormMetadataSql({table:e.name,type:Ke.GENERATED_COLUMN,name:l.name});s.push(c),a.push(u)}await this.executeQueries(s,a)}async dropTable(e,t,i=!0,r=!0){if(t&&!await this.hasTable(e))return Promise.resolve();const s=i,a=this.getTablePath(e),o=await this.getCachedTable(a),l=[],c=[];r&&o.indices.forEach(d=>{l.push(this.dropIndexSql(o,d)),c.push(this.createIndexSql(o,d))}),i&&o.foreignKeys.forEach(d=>l.push(this.dropForeignKeySql(o,d))),l.push(this.dropTableSql(o)),c.push(this.createTableSql(o,s));const u=o.columns.filter(d=>d.generatedType&&d.asExpression);for(const d of u){const h=this.deleteTypeormMetadataSql({table:o.name,type:Ke.GENERATED_COLUMN,name:d.name}),f=this.insertTypeormMetadataSql({table:o.name,type:Ke.GENERATED_COLUMN,name:d.name,value:d.asExpression});l.push(h),c.push(f)}await this.executeQueries(l,c)}async createView(e){const t=[],i=[];t.push(this.createViewSql(e)),t.push(await this.insertViewDefinitionSql(e)),i.push(this.dropViewSql(e)),i.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(t,i)}async dropView(e){const t=e instanceof Ga?e.name:e,i=await this.getCachedView(t),r=[],s=[];r.push(await this.deleteViewDefinitionSql(i)),r.push(this.dropViewSql(i)),s.push(await this.insertViewDefinitionSql(i)),s.push(this.createViewSql(i)),await this.executeQueries(r,s)}async renameTable(e,t){throw new J("Rename table queries are not supported by Spanner driver.")}async addColumn(e,t){const i=e instanceof nn?e:await this.getCachedTable(e),r=i.clone(),s=[],a=[];s.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD ").concat(this.buildCreateColumnSql(t)))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP COLUMN ").concat(this.driver.escape(t.name))));const o=r.indices.find(l=>l.columnNames.length===1&&l.columnNames[0]===t.name);if(o)s.push(this.createIndexSql(i,o)),a.push(this.dropIndexSql(i,o));else if(t.isUnique){const l=new yn({name:this.connection.namingStrategy.indexName(i,[t.name]),columnNames:[t.name],isUnique:!0});r.indices.push(l),r.uniques.push(new hi({name:l.name,columnNames:l.columnNames})),s.push(this.createIndexSql(i,l)),a.push(this.dropIndexSql(i,l))}if(t.generatedType&&t.asExpression){const l=this.insertTypeormMetadataSql({table:i.name,type:Ke.GENERATED_COLUMN,name:t.name,value:t.asExpression}),c=this.deleteTypeormMetadataSql({table:i.name,type:Ke.GENERATED_COLUMN,name:t.name});s.push(l),a.push(c)}await this.executeQueries(s,a),r.addColumn(t),this.replaceCachedTable(i,r)}async addColumns(e,t){for(const i of t)await this.addColumn(e,i)}async renameColumn(e,t,i){const r=e instanceof nn?e:await this.getCachedTable(e),s=t instanceof Wi?t:r.columns.find(o=>o.name===t);if(!s)throw new J('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));let a;return i instanceof Wi?a=i:(a=s.clone(),a.name=i),this.changeColumn(r,s,a)}async changeColumn(e,t,i){const r=e instanceof nn?e:await this.getCachedTable(e);let s=r.clone();const a=[],o=[],l=t instanceof Wi?t:r.columns.find(c=>c.name===t);if(!l)throw new J('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));if(l.name!==i.name||l.type!==i.type||l.length!==i.length||l.isArray!==i.isArray||l.generatedType!==i.generatedType||l.asExpression!==i.asExpression)await this.dropColumn(r,l),await this.addColumn(r,i),s=r.clone();else if((i.precision!==l.precision||i.scale!==l.scale)&&(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" TYPE ').concat(this.driver.createFullType(i)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(i.name,'" TYPE ').concat(this.driver.createFullType(l))))),l.isNullable!==i.isNullable&&(i.isNullable?(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(l.name,'" DROP NOT NULL'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(l.name,'" SET NOT NULL')))):(a.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(l.name,'" SET NOT NULL'))),o.push(new H("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(l.name,'" DROP NOT NULL'))))),i.isUnique!==l.isUnique)if(i.isUnique===!0){const c=new yn({name:this.connection.namingStrategy.indexName(r,[i.name]),columnNames:[i.name],isUnique:!0});s.indices.push(c),s.uniques.push(new hi({name:c.name,columnNames:c.columnNames})),a.push(this.createIndexSql(r,c)),o.push(this.dropIndexSql(r,c))}else{const c=s.indices.find(d=>d.columnNames.length===1&&d.isUnique===!0&&!!d.columnNames.find(h=>h===i.name));s.indices.splice(s.indices.indexOf(c),1);const u=s.uniques.find(d=>d.name===c.name);s.uniques.splice(s.uniques.indexOf(u),1),a.push(this.dropIndexSql(r,c)),o.push(this.createIndexSql(r,c))}await this.executeQueries(a,o),this.replaceCachedTable(r,s)}async changeColumns(e,t){for(const{oldColumn:i,newColumn:r}of t)await this.changeColumn(e,i,r)}async dropColumn(e,t){const i=e instanceof nn?e:await this.getCachedTable(e),r=t instanceof Wi?t:i.findColumnByName(t);if(!r)throw new J('Column "'.concat(t,'" was not found in table "').concat(i.name,'"'));const s=i.clone(),a=[],o=[],l=s.indices.find(u=>u.columnNames.length===1&&u.columnNames[0]===r.name);l&&(s.indices.splice(s.indices.indexOf(l),1),a.push(this.dropIndexSql(i,l)),o.push(this.createIndexSql(i,l)));const c=s.checks.find(u=>!!u.columnNames&&u.columnNames.length===1&&u.columnNames[0]===r.name);if(c&&(s.checks.splice(s.checks.indexOf(c),1),a.push(this.dropCheckConstraintSql(i,c)),o.push(this.createCheckConstraintSql(i,c))),a.push(new H("ALTER TABLE ".concat(this.escapePath(i)," DROP COLUMN ").concat(this.driver.escape(r.name)))),o.push(new H("ALTER TABLE ".concat(this.escapePath(i)," ADD ").concat(this.buildCreateColumnSql(r)))),r.generatedType&&r.asExpression){const u=this.deleteTypeormMetadataSql({table:i.name,type:Ke.GENERATED_COLUMN,name:r.name}),d=this.insertTypeormMetadataSql({table:i.name,type:Ke.GENERATED_COLUMN,name:r.name,value:r.asExpression});a.push(u),o.push(d)}await this.executeQueries(a,o),s.removeColumn(r),this.replaceCachedTable(i,s)}async dropColumns(e,t){for(const i of t)await this.dropColumn(e,i)}async createPrimaryKey(e,t){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async updatePrimaryKeys(e,t){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async dropPrimaryKey(e){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async createUniqueConstraint(e,t){throw new J("Spanner does not support unique constraints. Use unique index instead.")}async createUniqueConstraints(e,t){throw new J("Spanner does not support unique constraints. Use unique index instead.")}async dropUniqueConstraint(e,t){throw new J("Spanner does not support unique constraints. Use unique index instead.")}async dropUniqueConstraints(e,t){throw new J("Spanner does not support unique constraints. Use unique index instead.")}async createCheckConstraint(e,t){const i=e instanceof nn?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.checkConstraintName(i,t.expression));const r=this.createCheckConstraintSql(i,t),s=this.dropCheckConstraintSql(i,t);await this.executeQueries(r,s),i.addCheckConstraint(t)}async createCheckConstraints(e,t){const i=t.map(r=>this.createCheckConstraint(e,r));await Promise.all(i)}async dropCheckConstraint(e,t){const i=e instanceof nn?e:await this.getCachedTable(e),r=t instanceof Ss?t:i.checks.find(o=>o.name===t);if(!r)throw new J("Supplied check constraint was not found in table ".concat(i.name));const s=this.dropCheckConstraintSql(i,r),a=this.createCheckConstraintSql(i,r);await this.executeQueries(s,a),i.removeCheckConstraint(r)}async dropCheckConstraints(e,t){const i=t.map(r=>this.dropCheckConstraint(e,r));await Promise.all(i)}async createExclusionConstraint(e,t){throw new J("Spanner does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new J("Spanner does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new J("Spanner does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new J("Spanner does not support exclusion constraints.")}async createForeignKey(e,t){const i=e instanceof nn?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(i,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const r=this.createForeignKeySql(i,t),s=this.dropForeignKeySql(i,t);await this.executeQueries(r,s),i.addForeignKey(t)}async createForeignKeys(e,t){for(const i of t)await this.createForeignKey(e,i)}async dropForeignKey(e,t){const i=e instanceof nn?e:await this.getCachedTable(e),r=t instanceof zr?t:i.foreignKeys.find(o=>o.name===t);if(!r)throw new J("Supplied foreign key was not found in table ".concat(i.name));const s=this.dropForeignKeySql(i,r),a=this.createForeignKeySql(i,r);await this.executeQueries(s,a),i.removeForeignKey(r)}async dropForeignKeys(e,t){for(const i of t)await this.dropForeignKey(e,i)}async createIndex(e,t){const i=e instanceof nn?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(i,t));const r=this.createIndexSql(i,t),s=this.dropIndexSql(i,t);await this.executeQueries(r,s),i.addIndex(t)}async createIndices(e,t){for(const i of t)await this.createIndex(e,i)}async dropIndex(e,t){const i=e instanceof nn?e:await this.getCachedTable(e),r=t instanceof yn?t:i.indices.find(o=>o.name===t);if(!r)throw new J("Supplied index ".concat(t," was not found in table ").concat(i.name));r.name||(r.name=this.generateIndexName(i,r));const s=this.dropIndexSql(i,r),a=this.createIndexSql(i,r);await this.executeQueries(s,a),i.removeIndex(r)}async dropIndices(e,t){for(const i of t)await this.dropIndex(e,i)}async clearTable(e){await this.query("DELETE FROM ".concat(this.escapePath(e)," WHERE true"))}async clearDatabase(){const e="SELECT concat('DROP INDEX `', INDEX_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`INDEXES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `INDEX_TYPE` = 'INDEX' AND `SPANNER_IS_MANAGED` = false",t=await this.query(e),i="SELECT concat('ALTER TABLE `', TABLE_NAME, '`', ' DROP CONSTRAINT `', CONSTRAINT_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `CONSTRAINT_TYPE` = 'FOREIGN KEY'",r=await this.query(i),s="SELECT concat('DROP TABLE `', TABLE_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE'",a=await this.query(s);if(!t.length&&!r.length&&!a.length)return;const o=this.isTransactionActive;o||await this.startTransaction();try{for(let l of t)await this.updateDDL(l.query);for(let l of r)await this.updateDDL(l.query);for(let l of a)await this.updateDDL(l.query);await this.commitTransaction()}catch(l){try{o||await this.rollbackTransaction()}catch(c){}throw l}}async executeMemoryUpSql(){for(const{query:e,parameters:t}of this.sqlInMemory.upQueries)this.isDMLQuery(e)?await this.query(e,t):await this.updateDDL(e,t)}async executeMemoryDownSql(){for(const{query:e,parameters:t}of this.sqlInMemory.downQueries.reverse())this.isDMLQuery(e)?await this.query(e,t):await this.updateDDL(e,t)}async loadViews(e){return Promise.resolve([])}async loadTables(e){if(e&&e.length===0)return[];const t=[];if(!e||!e.length){const m="SELECT `TABLE_NAME` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE'";t.push(...await this.query(m))}else{const m="SELECT `TABLE_NAME` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE' "+"AND `TABLE_NAME` IN (".concat(e.map(g=>"'".concat(g,"'")).join(", "),")");t.push(...await this.query(m))}if(!t.length)return[];const i=t.map(m=>"'".concat(m.TABLE_NAME,"'")).join(", "),r="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_NAME` IN (".concat(i,")"),s="SELECT `KCU`.`TABLE_NAME`, `KCU`.`COLUMN_NAME` FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` `TC` INNER JOIN `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` `KCU` ON `KCU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` WHERE `TC`.`TABLE_CATALOG` = '' AND `TC`.`TABLE_SCHEMA` = '' AND `TC`.`CONSTRAINT_TYPE` = 'PRIMARY KEY' "+"AND `TC`.`TABLE_NAME` IN (".concat(i,")"),a="SELECT `I`.`TABLE_NAME`, `I`.`INDEX_NAME`, `I`.`IS_UNIQUE`, `I`.`IS_NULL_FILTERED`, `IC`.`COLUMN_NAME` FROM `INFORMATION_SCHEMA`.`INDEXES` `I` INNER JOIN `INFORMATION_SCHEMA`.`INDEX_COLUMNS` `IC` ON `IC`.`INDEX_NAME` = `I`.`INDEX_NAME` AND `IC`.`TABLE_NAME` = `I`.`TABLE_NAME` "+"WHERE `I`.`TABLE_CATALOG` = '' AND `I`.`TABLE_SCHEMA` = '' AND `I`.`TABLE_NAME` IN (".concat(i,") ")+"AND `I`.`INDEX_TYPE` = 'INDEX' AND `I`.`SPANNER_IS_MANAGED` = false",o="SELECT `TC`.`TABLE_NAME`, `TC`.`CONSTRAINT_NAME`, `CC`.`CHECK_CLAUSE`, `CCU`.`COLUMN_NAME`FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` `TC` INNER JOIN `INFORMATION_SCHEMA`.`CONSTRAINT_COLUMN_USAGE` `CCU` ON `CCU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` INNER JOIN `INFORMATION_SCHEMA`.`CHECK_CONSTRAINTS` `CC` ON `CC`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` WHERE `TC`.`TABLE_CATALOG` = '' AND `TC`.`TABLE_SCHEMA` = '' AND `TC`.`CONSTRAINT_TYPE` = 'CHECK' "+"AND `TC`.`TABLE_NAME` IN (".concat(i,") AND `TC`.`CONSTRAINT_NAME` NOT LIKE 'CK_IS_NOT_NULL%'"),l="SELECT `TC`.`TABLE_NAME`, `TC`.`CONSTRAINT_NAME`, `KCU`.`COLUMN_NAME`, `CTU`.`TABLE_NAME` AS `REFERENCED_TABLE_NAME`, `CCU`.`COLUMN_NAME` AS `REFERENCED_COLUMN_NAME`, `RC`.`UPDATE_RULE`, `RC`.`DELETE_RULE` FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` `TC` INNER JOIN `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` `KCU` ON `KCU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` INNER JOIN `INFORMATION_SCHEMA`.`CONSTRAINT_TABLE_USAGE` `CTU` ON `CTU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` INNER JOIN `INFORMATION_SCHEMA`.`REFERENTIAL_CONSTRAINTS` `RC` ON `RC`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` INNER JOIN `INFORMATION_SCHEMA`.`CONSTRAINT_COLUMN_USAGE` `CCU` ON `CCU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` WHERE `TC`.`TABLE_CATALOG` = '' AND `TC`.`TABLE_SCHEMA` = '' AND `TC`.`CONSTRAINT_TYPE` = 'FOREIGN KEY' "+"AND `TC`.`TABLE_NAME` IN (".concat(i,")"),[c,u,d,h,f]=await Promise.all([this.query(r),this.query(s),this.query(a),this.query(o),this.query(l)]);return Promise.all(t.map(async m=>{const g=new nn;g.name=this.driver.buildTableName(m.TABLE_NAME),g.columns=await Promise.all(c.filter(T=>T.TABLE_NAME===m.TABLE_NAME).map(async T=>{const N=d.filter(Z=>Z.TABLE_NAME===m.TABLE_NAME&&Z.COLUMN_NAME===T.COLUMN_NAME&&Z.IS_UNIQUE===!0),P=this.connection.entityMetadatas.find(Z=>this.getTablePath(g)===this.getTablePath(Z)),F=N.length>0&&P&&P.indices.some(Z=>N.some(O=>Z.name===O.INDEX_NAME&&Z.synchronize===!1)),$=N.every(Z=>d.some(O=>O.INDEX_NAME===Z.INDEX_NAME&&O.COLUMN_NAME!==T.COLUMN_NAME)),B=new Wi;B.name=T.COLUMN_NAME;let M=T.SPANNER_TYPE.toLowerCase();if(M.indexOf("array")!==-1&&(B.isArray=!0,M=M.substring(M.indexOf("<")+1,M.indexOf(">"))),M.indexOf("(")!==-1?B.type=M.substring(0,M.indexOf("(")):B.type=M,this.driver.withLengthColumnTypes.indexOf(B.type)!==-1&&(B.length=M.substring(M.indexOf("(")+1,M.indexOf(")"))),T.IS_GENERATED==="ALWAYS"){B.asExpression=T.GENERATION_EXPRESSION,B.generatedType="STORED";const Z=await this.selectTypeormMetadataSql({table:m.TABLE_NAME,type:Ke.GENERATED_COLUMN,name:B.name}),O=await this.query(Z.query,Z.parameters);O[0]&&O[0].value?B.asExpression=O[0].value:B.asExpression=""}return B.isUnique=N.length>0&&!F&&!$,B.isNullable=T.IS_NULLABLE==="YES",B.isPrimary=u.some(Z=>Z.TABLE_NAME===T.TABLE_NAME&&Z.COLUMN_NAME===T.COLUMN_NAME),B}));const _=f.filter(T=>T.TABLE_NAME===m.TABLE_NAME);g.foreignKeys=Fe.uniq(_,T=>T.CONSTRAINT_NAME).map(T=>{const N=_.filter(P=>P.CONSTRAINT_NAME===T.CONSTRAINT_NAME);return new zr({name:T.CONSTRAINT_NAME,columnNames:Fe.uniq(N.map(P=>P.COLUMN_NAME)),referencedDatabase:T.REFERENCED_TABLE_SCHEMA,referencedTableName:T.REFERENCED_TABLE_NAME,referencedColumnNames:Fe.uniq(N.map(P=>P.REFERENCED_COLUMN_NAME)),onDelete:T.DELETE_RULE,onUpdate:T.UPDATE_RULE})});const v=d.filter(T=>T.TABLE_NAME===m.TABLE_NAME);g.indices=Fe.uniq(v,T=>T.INDEX_NAME).map(T=>{const N=v.filter(P=>P.INDEX_NAME===T.INDEX_NAME);return new yn({table:g,name:T.INDEX_NAME,columnNames:N.map(P=>P.COLUMN_NAME),isUnique:T.IS_UNIQUE,isNullFiltered:T.IS_NULL_FILTERED})});const y=h.filter(T=>T.TABLE_NAME===m.TABLE_NAME);return g.checks=Fe.uniq(y,T=>T.CONSTRAINT_NAME).map(T=>{const N=y.filter(P=>P.CONSTRAINT_NAME===T.CONSTRAINT_NAME);return new Ss({name:T.CONSTRAINT_NAME,columnNames:N.map(P=>P.COLUMN_NAME),expression:T.CHECK_CLAUSE})}),g}))}createTableSql(e,t){const i=e.columns.map(a=>this.buildCreateColumnSql(a)).join(", ");let r="CREATE TABLE ".concat(this.escapePath(e)," (").concat(i);if(e.columns.filter(a=>a.isUnique).forEach(a=>{const o=e.indices.some(c=>c.columnNames.length===1&&!!c.isUnique&&c.columnNames.indexOf(a.name)!==-1),l=e.uniques.some(c=>c.columnNames.length===1&&c.columnNames.indexOf(a.name)!==-1);!o&&!l&&e.indices.push(new yn({name:this.connection.namingStrategy.uniqueConstraintName(e,[a.name]),columnNames:[a.name],isUnique:!0}))}),e.uniques.length>0&&e.uniques.forEach(a=>{e.indices.some(l=>l.name===a.name)||e.indices.push(new yn({name:a.name,columnNames:a.columnNames,isUnique:!0}))}),e.checks.length>0){const a=e.checks.map(o=>{const l=o.name?o.name:this.connection.namingStrategy.checkConstraintName(e,o.expression);return"CONSTRAINT `".concat(l,"` CHECK (").concat(o.expression,")")}).join(", ");r+=", ".concat(a)}if(e.foreignKeys.length>0&&t){const a=e.foreignKeys.map(o=>{const l=o.columnNames.map(u=>"`".concat(u,"`")).join(", ");o.name||(o.name=this.connection.namingStrategy.foreignKeyName(e,o.columnNames,this.getTablePath(o),o.referencedColumnNames));const c=o.referencedColumnNames.map(u=>"`".concat(u,"`")).join(", ");return"CONSTRAINT `".concat(o.name,"` FOREIGN KEY (").concat(l,") REFERENCES ").concat(this.escapePath(this.getTablePath(o))," (").concat(c,")")}).join(", ");r+=", ".concat(a)}r+=")";const s=e.columns.filter(a=>a.isPrimary);if(s.length>0){const a=s.map(o=>this.driver.escape(o.name)).join(", ");r+=" PRIMARY KEY (".concat(a,")")}return new H(r)}dropTableSql(e){return new H("DROP TABLE ".concat(this.escapePath(e)))}createViewSql(e){const t=e.materialized?"MATERIALIZED ":"",i=this.escapePath(e),r=typeof e.expression=="string"?e.expression:e.expression(this.connection).getQuery();return new H("CREATE ".concat(t,"VIEW ").concat(i," SQL SECURITY INVOKER AS ").concat(r))}async insertViewDefinitionSql(e){let{schema:t,tableName:i}=this.driver.parseTableName(e);const r=e.materialized?Ke.MATERIALIZED_VIEW:Ke.VIEW,s=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:r,schema:t,name:i,value:s})}dropViewSql(e){const t=e.materialized?"MATERIALIZED ":"";return new H("DROP ".concat(t,"VIEW ").concat(this.escapePath(e)))}async deleteViewDefinitionSql(e){let{schema:t,tableName:i}=this.driver.parseTableName(e);const r=e.materialized?Ke.MATERIALIZED_VIEW:Ke.VIEW;return this.deleteTypeormMetadataSql({type:r,schema:t,name:i})}createIndexSql(e,t){const i=t.columnNames.map(s=>this.driver.escape(s)).join(", ");let r="";return t.isUnique&&(r+="UNIQUE "),t.isNullFiltered&&(r+="NULL_FILTERED "),new H("CREATE ".concat(r,"INDEX `").concat(t.name,"` ON ").concat(this.escapePath(e)," (").concat(i,")"))}dropIndexSql(e,t){let i=t instanceof yn?t.name:t;return new H("DROP INDEX `".concat(i,"`"))}createCheckConstraintSql(e,t){return new H("ALTER TABLE ".concat(this.escapePath(e)," ADD CONSTRAINT `").concat(t.name,"` CHECK (").concat(t.expression,")"))}dropCheckConstraintSql(e,t){const i=t instanceof Ss?t.name:t;return new H("ALTER TABLE ".concat(this.escapePath(e)," DROP CONSTRAINT `").concat(i,"`"))}createForeignKeySql(e,t){const i=t.columnNames.map(a=>this.driver.escape(a)).join(", "),r=t.referencedColumnNames.map(a=>this.driver.escape(a)).join(",");let s="ALTER TABLE ".concat(this.escapePath(e)," ADD CONSTRAINT `").concat(t.name,"` FOREIGN KEY (").concat(i,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(t))," (").concat(r,")");return new H(s)}dropForeignKeySql(e,t){const i=t instanceof zr?t.name:t;return new H("ALTER TABLE ".concat(this.escapePath(e)," DROP CONSTRAINT `").concat(i,"`"))}escapePath(e){const{tableName:t}=this.driver.parseTableName(e);return"`".concat(t,"`")}buildCreateColumnSql(e){let t="".concat(this.driver.escape(e.name)," ").concat(this.connection.driver.createFullType(e));return e.generatedType==="STORED"&&e.asExpression?t+=" AS (".concat(e.asExpression,") STORED"):e.isNullable||(t+=" NOT NULL"),t}async executeQueries(e,t){if(e instanceof H&&(e=[e]),t instanceof H&&(t=[t]),this.sqlInMemory.upQueries.push(...e),this.sqlInMemory.downQueries.push(...t),this.sqlMemoryMode===!0)return Promise.resolve();for(const{query:i,parameters:r}of e)this.isDMLQuery(i)?await this.query(i,r):await this.updateDDL(i,r)}isDMLQuery(e){return e.startsWith("INSERT")||e.startsWith("UPDATE")||e.startsWith("DELETE")}}class TK{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="none",this.supportedDataTypes=["bool","int64","float64","numeric","string","json","bytes","date","timestamp","array"],this.supportedUpsertTypes=[],this.spatialTypes=[],this.withLengthColumnTypes=["string","bytes"],this.withWidthColumnTypes=[],this.withPrecisionColumnTypes=[],this.withScaleColumnTypes=[],this.mappedDataTypes={createDate:"timestamp",createDateDefault:"",updateDate:"timestamp",updateDateDefault:"",deleteDate:"timestamp",deleteDateNullable:!0,version:"int64",treeLevel:"int64",migrationId:"int64",migrationName:"string",migrationTimestamp:"int64",cacheId:"string",cacheIdentifier:"string",cacheTime:"int64",cacheDuration:"int64",cacheQuery:"string",cacheResult:"string",metadataType:"string",metadataDatabase:"string",metadataSchema:"string",metadataTable:"string",metadataName:"string",metadataValue:"string"},this.dataTypeDefaults={},this.maxAliasLength=63,this.cteCapabilities={enabled:!0},this._isReturningSqlSupported={delete:!1,insert:!1,update:!1},this.connection=e,this.options=e.options,this.isReplicated=!!this.options.replication,this.loadDependencies()}async connect(){this.instance=this.spanner.instance(this.options.instanceId),this.instanceDatabase=this.instance.database(this.options.databaseId)}afterConnect(){return Promise.resolve()}async disconnect(){this.instanceDatabase.close()}createSchemaBuilder(){return new A0(this.connection)}createQueryRunner(e){return new EK(this,e)}escapeQueryWithParameters(e,t,i){const r=Object.keys(i).map(s=>i[s]);return!t||!Object.keys(t).length?[e,r]:(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o)=>{if(!t.hasOwnProperty(o))return s;let l=t[o];return l===null?s:a?l.map(c=>(r.push(c),this.createParameter(o,r.length-1))).join(", "):l instanceof Function?l():(r.push(l),this.createParameter(o,r.length-1))}),e=e.replace(/([ ]+)?=([ ]+)?:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o,l,c)=>t.hasOwnProperty(c)&&t[c]===null?" IS NULL":s),[e,r])}escape(e){return"`".concat(e,"`")}buildTableName(e,t,i){let r=[e];return i&&r.unshift(i),r.join(".")}parseTableName(e){const t=this.database,i=void 0;if(e instanceof nn||e instanceof Ga){const s=this.parseTableName(e.name);return{database:e.database||s.database||t,schema:e.schema||s.schema||i,tableName:s.tableName}}if(e instanceof zr){const s=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||s.database||t,schema:e.referencedSchema||s.schema||i,tableName:s.tableName}}if(e instanceof _s)return{database:e.database||t,schema:e.schema||i,tableName:e.tableName};const r=e.split(".");return{database:(r.length>1?r[0]:void 0)||t,schema:i,tableName:r.length>1?r[1]:r[0]}}preparePersistentValue(e,t){return t.transformer&&(e=$n.transformTo(t.transformer,e)),e==null?e:t.type==="numeric"?(this.options.driver||Kt.load("spanner")).Spanner.numeric(e):t.type==="date"?Ye.mixedDateToDateString(e):t.type==="json"?e:t.type==="timestamp"||t.type===Date?Ye.mixedDateToDate(e):e}prepareHydratedValue(e,t){return e==null?t.transformer?$n.transformFrom(t.transformer,e):e:(t.type===Boolean||t.type==="bool"?e=!!e:t.type==="timestamp"||t.type===Date?e=new Date(e):t.type==="numeric"?e=e.value:t.type==="date"?e=Ye.mixedDateToDateString(e):t.type==="json"?e=typeof e=="string"?JSON.parse(e):e:t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=$n.transformFrom(t.transformer,e)),e)}normalizeType(e){return e.type===Number?"int64":e.type===String||e.type==="uuid"?"string":e.type===Date?"timestamp":e.type===Buffer?"bytes":e.type===Boolean?"bool":e.type||""}normalizeDefault(e){return e.default===""?'"'.concat(e.default,'"'):"".concat(e.default)}normalizeIsUnique(e){return e.entityMetadata.indices.some(t=>t.isUnique&&t.columns.length===1&&t.columns[0]===e)}getColumnLength(e){if(e.length)return e.length.toString();if(e.generationStrategy==="uuid")return"36";switch(e.type){case String:case"string":case"bytes":return"max";default:return""}}createFullType(e){let t=e.type;return this.getColumnLength(e)?t+="(".concat(this.getColumnLength(e),")"):e.width?t+="(".concat(e.width,")"):e.precision!==null&&e.precision!==void 0&&e.scale!==null&&e.scale!==void 0?t+="(".concat(e.precision,",").concat(e.scale,")"):e.precision!==null&&e.precision!==void 0&&(t+="(".concat(e.precision,")")),e.isArray&&(t="array<".concat(t,">")),t}obtainMasterConnection(){return this.instanceDatabase}obtainSlaveConnection(){return this.instanceDatabase}createGeneratedMap(e,t,i){if(!t)return;if(t.insertId===void 0)return Object.keys(t).reduce((s,a)=>{const o=e.findColumnWithDatabaseName(a);return o&&Fe.mergeDeep(s,o.createValueMap(t[a])),s},{});const r=e.generatedColumns.reduce((s,a)=>{let o;return a.generationStrategy==="increment"&&t.insertId&&(o=t.insertId+i),Fe.mergeDeep(s,a.createValueMap(o))},{});return Object.keys(r).length>0?r:void 0}findChangedColumns(e,t){return t.filter(i=>{const r=e.find(a=>a.name===i.databaseName);return r?r.name!==i.databaseName||r.type!==this.normalizeType(i)||r.length!==this.getColumnLength(i)||r.asExpression!==i.asExpression||r.generatedType!==i.generatedType||r.isPrimary!==i.isPrimary||!this.compareNullableValues(i,r)||r.isUnique!==this.normalizeIsUnique(i):!1})}isReturningSqlSupported(e){return this._isReturningSqlSupported[e]}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"@param"+t}loadDependencies(){try{const e=this.options.driver||Kt.load("spanner");this.spanner=new e.Spanner({projectId:this.options.projectId})}catch(e){throw console.error(e),new gd("Spanner","@google-cloud/spanner")}}compareNullableValues(e,t){return e.generatedType?!0:e.isNullable===t.isNullable}compareDefaultValues(e,t){return typeof e=="string"&&typeof t=="string"&&(e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t}normalizeDatetimeFunction(e){if(!e)return e;if(e.toUpperCase().indexOf("CURRENT_TIMESTAMP")!==-1||e.toUpperCase().indexOf("NOW")!==-1){const i=e.match(/\(\d+\)/);return i?"CURRENT_TIMESTAMP".concat(i[0]):"CURRENT_TIMESTAMP"}else return e}escapeComment(e){return e&&(e=e.replace(/\u0000/g,""),e)}}class SK{create(e){const{type:t}=e.options;switch(t){case"mysql":return new iA(e);case"postgres":return new RO(e);case"cockroachdb":return new vQ(e);case"sap":return new xQ(e);case"mariadb":return new iA(e);case"sqlite":return new TQ(e);case"better-sqlite3":return new SQ(e);case"cordova":return new rK(e);case"nativescript":return new lK(e);case"react-native":return new aK(e);case"sqljs":return new uK(e);case"oracle":return new EQ(e);case"mssql":return new wQ(e);case"mongodb":return new gQ(e);case"expo":return new hK(e);case"aurora-mysql":return new pK(e);case"aurora-postgres":return new vK(e);case"capacitor":return new xK(e);case"spanner":return new TK(e);default:throw new nQ(t,["aurora-mysql","aurora-postgres","better-sqlite3","capacitor","cockroachdb","cordova","expo","mariadb","mongodb","mssql","mysql","nativescript","oracle","postgres","react-native","sap","sqlite","sqljs","spanner"])}}}function Ov(n,e,t=[".js",".cjs",".ts"]){return[]}const _K=new class{constructor(){this.instances=[]}get(n){let e=this.instances.find(t=>t.type===n);return e||(e={type:n,object:new n},this.instances.push(e)),e.object}};function cA(n){return _K.get(n)}class Br{constructor(e){this["@instanceof"]=Symbol.for("ColumnMetadata"),this.length="",this.isPrimary=!1,this.isGenerated=!1,this.isNullable=!1,this.isSelect=!0,this.isInsert=!0,this.isUpdate=!0,this.zerofill=!1,this.unsigned=!1,this.isArray=!1,this.isVirtual=!1,this.isVirtualProperty=!1,this.isDiscriminator=!1,this.isTreeLevel=!1,this.isCreateDate=!1,this.isUpdateDate=!1,this.isDeleteDate=!1,this.isVersion=!1,this.isObjectId=!1,this.isNestedSetLeft=!1,this.isNestedSetRight=!1,this.isMaterializedPath=!1,this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.referencedColumn=e.referencedColumn,e.args.target&&(this.target=e.args.target),e.args.propertyName&&(this.propertyName=e.args.propertyName),e.args.options.name&&(this.givenDatabaseName=e.args.options.name),e.args.options.type&&(this.type=e.args.options.type),e.args.options.length&&(this.length=e.args.options.length?e.args.options.length.toString():""),e.args.options.width&&(this.width=e.args.options.width),e.args.options.charset&&(this.charset=e.args.options.charset),e.args.options.collation&&(this.collation=e.args.options.collation),e.args.options.primary&&(this.isPrimary=e.args.options.primary),e.args.options.default===null&&(this.isNullable=!0),e.args.options.nullable!==void 0&&(this.isNullable=e.args.options.nullable),e.args.options.select!==void 0&&(this.isSelect=e.args.options.select),e.args.options.insert!==void 0&&(this.isInsert=e.args.options.insert),e.args.options.update!==void 0&&(this.isUpdate=e.args.options.update),e.args.options.readonly!==void 0&&(this.isUpdate=!e.args.options.readonly),e.args.options.comment&&(this.comment=e.args.options.comment),e.args.options.default!==void 0&&(this.default=e.args.options.default),e.args.options.onUpdate&&(this.onUpdate=e.args.options.onUpdate),e.args.options.generatedIdentity&&(this.generatedIdentity=e.args.options.generatedIdentity),e.args.options.scale!==null&&e.args.options.scale!==void 0&&(this.scale=e.args.options.scale),e.args.options.zerofill&&(this.zerofill=e.args.options.zerofill,this.unsigned=!0),e.args.options.unsigned&&(this.unsigned=e.args.options.unsigned),e.args.options.precision!==null&&(this.precision=e.args.options.precision),e.args.options.enum&&(ft.isObject(e.args.options.enum)&&!Array.isArray(e.args.options.enum)?this.enum=Object.keys(e.args.options.enum).filter(t=>isNaN(+t)&&typeof e.args.options.enum[t]!="function").map(t=>e.args.options.enum[t]):this.enum=e.args.options.enum),e.args.options.enumName&&(this.enumName=e.args.options.enumName),e.args.options.primaryKeyConstraintName&&(this.primaryKeyConstraintName=e.args.options.primaryKeyConstraintName),e.args.options.foreignKeyConstraintName&&(this.foreignKeyConstraintName=e.args.options.foreignKeyConstraintName),e.args.options.asExpression&&(this.asExpression=e.args.options.asExpression,this.generatedType=e.args.options.generatedType?e.args.options.generatedType:"VIRTUAL"),e.args.options.hstoreType&&(this.hstoreType=e.args.options.hstoreType),e.args.options.array&&(this.isArray=e.args.options.array),e.args.mode&&(this.isVirtualProperty=e.args.mode==="virtual-property",this.isVirtual=e.args.mode==="virtual",this.isTreeLevel=e.args.mode==="treeLevel",this.isCreateDate=e.args.mode==="createDate",this.isUpdateDate=e.args.mode==="updateDate",this.isDeleteDate=e.args.mode==="deleteDate",this.isVersion=e.args.mode==="version",this.isObjectId=e.args.mode==="objectId"),this.isVirtualProperty&&(this.isInsert=!1,this.isUpdate=!1),e.args.options.transformer&&(this.transformer=e.args.options.transformer),e.args.options.spatialFeatureType&&(this.spatialFeatureType=e.args.options.spatialFeatureType),e.args.options.srid!==void 0&&(this.srid=e.args.options.srid),e.args.options.query&&(this.query=e.args.options.query),this.isTreeLevel&&(this.type=e.connection.driver.mappedDataTypes.treeLevel),this.isCreateDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.createDate),this.default||(this.default=()=>e.connection.driver.mappedDataTypes.createDateDefault),this.precision===void 0&&e.args.options.precision===void 0&&e.connection.driver.mappedDataTypes.createDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.createDatePrecision)),this.isUpdateDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.updateDate),this.default||(this.default=()=>e.connection.driver.mappedDataTypes.updateDateDefault),this.onUpdate||(this.onUpdate=e.connection.driver.mappedDataTypes.updateDateDefault),this.precision===void 0&&e.args.options.precision===void 0&&e.connection.driver.mappedDataTypes.updateDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.updateDatePrecision)),this.isDeleteDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.deleteDate),this.isNullable||(this.isNullable=e.connection.driver.mappedDataTypes.deleteDateNullable),this.precision===void 0&&e.args.options.precision===void 0&&e.connection.driver.mappedDataTypes.deleteDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.deleteDatePrecision)),this.isVersion&&(this.type=e.connection.driver.mappedDataTypes.version),e.closureType&&(this.closureType=e.closureType),e.nestedSetLeft&&(this.isNestedSetLeft=e.nestedSetLeft),e.nestedSetRight&&(this.isNestedSetRight=e.nestedSetRight),e.materializedPath&&(this.isMaterializedPath=e.materializedPath)}createValueMap(e,t=!1){if(this.embeddedMetadata){const i=[...this.embeddedMetadata.parentPropertyNames],r=(s,a)=>{const o=s.shift();return o?(a[o]={},r(s,a[o]),a):((this.generationStrategy==="increment"||this.generationStrategy==="rowid")&&this.type==="bigint"&&e!==null&&(e=String(e)),a[t?this.databaseName:this.propertyName]=e,a)};return r(i,{})}else return(this.generationStrategy==="increment"||this.generationStrategy==="rowid")&&this.type==="bigint"&&e!==null&&(e=String(e)),{[t?this.databaseName:this.propertyName]:e}}getEntityValueMap(e,t){var i;if(this.embeddedMetadata){const s=[...this.embeddedMetadata.parentPropertyNames],a=this.embeddedMetadata.isArray,o=(c,u)=>{if(u===void 0)return{};const d=c.shift();if(d){const h=o(c,u[d]);return Object.keys(h).length>0?{[d]:h}:{}}return a&&Array.isArray(u)?u.map(h=>({[this.propertyName]:h[this.propertyName]})):u[this.propertyName]!==void 0?{[this.propertyName]:u[this.propertyName]}:{}},l=o(s,e);return Object.keys(l).length>0?l:void 0}else if(this.relationMetadata&&!(!((i=Object.getOwnPropertyDescriptor(e,this.relationMetadata.propertyName))===null||i===void 0)&&i.get)&&e[this.relationMetadata.propertyName]&&ft.isObject(e[this.relationMetadata.propertyName])){const s=this.relationMetadata.joinColumns.reduce((a,o)=>{const l=o.referencedColumn.getEntityValueMap(e[this.relationMetadata.propertyName]);return l===void 0?a:Fe.mergeDeep(a,l)},{});return Object.keys(s).length>0?{[this.propertyName]:s}:void 0}else return e[this.propertyName]!==void 0?{[this.propertyName]:e[this.propertyName]}:void 0}getEntityValue(e,t=!1){if(e==null)return;let i;if(this.embeddedMetadata){const r=[...this.embeddedMetadata.parentPropertyNames],s=this.embeddedMetadata.isArray,a=(l,c)=>{const u=l.shift();return u&&c?a(l,c[u]):c},o=a(r,e);if(o)if(this.relationMetadata&&this.referencedColumn){const l=this.relationMetadata.getEntityValue(o);l&&ft.isObject(l)&&!se.isFindOperator(l)&&!Buffer.isBuffer(l)?i=this.referencedColumn.getEntityValue(l):o[this.propertyName]&&ft.isObject(o[this.propertyName])&&!se.isFindOperator(o[this.propertyName])&&!Buffer.isBuffer(o[this.propertyName])&&!(o[this.propertyName]instanceof Date)?i=this.referencedColumn.getEntityValue(o[this.propertyName]):i=o[this.propertyName]}else this.referencedColumn?i=this.referencedColumn.getEntityValue(o[this.propertyName]):s&&Array.isArray(o)?i=o.map(l=>l[this.propertyName]):i=o[this.propertyName]}else if(this.relationMetadata&&this.referencedColumn){const r=this.relationMetadata.getEntityValue(e);r&&ft.isObject(r)&&!se.isFindOperator(r)&&typeof r!="function"&&!Buffer.isBuffer(r)?i=this.referencedColumn.getEntityValue(r):e[this.propertyName]&&ft.isObject(e[this.propertyName])&&!se.isFindOperator(e[this.propertyName])&&typeof e[this.propertyName]!="function"&&!Buffer.isBuffer(e[this.propertyName])&&!(e[this.propertyName]instanceof Date)?i=this.referencedColumn.getEntityValue(e[this.propertyName]):i=e[this.propertyName]}else this.referencedColumn?i=this.referencedColumn.getEntityValue(e[this.propertyName]):i=e[this.propertyName];return t&&this.transformer&&(i=$n.transformTo(this.transformer,i)),i}setEntityValue(e,t){if(this.embeddedMetadata){const i=(r,s)=>{const a=r.shift();return a?(s[a.propertyName]||(s[a.propertyName]=a.create()),i(r,s[a.propertyName]),s):(s[this.propertyName]=t,s)};return i([...this.embeddedMetadata.embeddedMetadataTree],e)}else!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName?(this.propertyName in e||(e[this.propertyName]={}),e[this.propertyName][this.referencedColumn.propertyName]=t):e[this.propertyName]=t}compareEntityValue(e,t){const i=this.getEntityValue(e);return ft.isObject(i)?i.equals(t):i===t}build(e){return this.propertyPath=this.buildPropertyPath(),this.propertyAliasName=this.propertyPath.replace(".","_"),this.databaseName=this.buildDatabaseName(e),this.databasePath=this.buildDatabasePath(),this.databaseNameWithoutPrefixes=e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,[]),this}buildPropertyPath(){let e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.propertyName,!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName&&(e+="."+this.referencedColumn.propertyName),e}buildDatabasePath(){let e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.databaseName,!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.databaseName!==this.databaseName&&(e+="."+this.referencedColumn.databaseName),e}buildDatabaseName(e){let t=this.embeddedMetadata?this.embeddedMetadata.parentPrefixes:[];return e.driver.options.type==="mongodb"&&(t=[]),e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,t)}}class hs{constructor(e){this.isUnique=!1,this.isSpatial=!1,this.isFulltext=!1,this.isNullFiltered=!1,this.synchronize=!0,this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,e.args.synchronize!==null&&e.args.synchronize!==void 0&&(this.synchronize=e.args.synchronize),this.isUnique=!!e.args.unique,this.isSpatial=!!e.args.spatial,this.isFulltext=!!e.args.fulltext,this.isNullFiltered=!!e.args.nullFiltered,this.parser=e.args.parser,this.where=e.args.where,this.isSparse=e.args.sparse,this.isBackground=e.args.background,this.expireAfterSeconds=e.args.expireAfterSeconds,this.givenName=e.args.name,this.givenColumnNames=e.args.columns)}build(e){if(this.synchronize===!1)return this.name=this.givenName,this;const t={};if(this.givenColumnNames){let i=[];if(Array.isArray(this.givenColumnNames))i=this.givenColumnNames.map(r=>this.embeddedMetadata?this.embeddedMetadata.propertyPath+"."+r:r.trim()),i.forEach(r=>t[r]=1);else{const r=this.givenColumnNames(this.entityMetadata.propertiesMap);Array.isArray(r)?(i=r.map(s=>String(s)),i.forEach(s=>t[s]=1)):(i=Object.keys(r).map(s=>String(s)),Object.keys(r).forEach(s=>t[s]=r[s]))}this.columns=i.map(r=>{const s=this.entityMetadata.columns.find(c=>c.propertyPath===r);if(s)return[s];const a=this.entityMetadata.relations.find(c=>c.isWithJoinColumn&&c.propertyName===r);if(a)return a.joinColumns;const o=this.givenName?'"'+this.givenName+'" ':"",l=this.entityMetadata.targetName;throw new J("Index ".concat(o,"contains column that is missing in the entity (").concat(l,"): ")+r)}).reduce((r,s)=>r.concat(s))}return this.columnNamesWithOrderingMap=Object.keys(t).reduce((i,r)=>{const s=this.entityMetadata.columns.find(a=>a.propertyPath===r);return s&&(i[s.databasePath]=t[r]),i},{}),this.name=this.givenName?this.givenName:e.indexName(this.entityMetadata.tableName,this.columns.map(i=>i.databaseName),this.where),this}}class uA{constructor(e){this.isTreeParent=!1,this.isTreeChildren=!1,this.isPrimary=!1,this.isLazy=!1,this.isEager=!1,this.persistenceEnabled=!0,this.isCascadeInsert=!1,this.isCascadeUpdate=!1,this.isCascadeRemove=!1,this.isCascadeSoftRemove=!1,this.isCascadeRecover=!1,this.isNullable=!0,this.createForeignKeyConstraints=!0,this.isOwning=!1,this.isOneToOne=!1,this.isOneToOneOwner=!1,this.isWithJoinColumn=!1,this.isOneToOneNotOwner=!1,this.isOneToMany=!1,this.isManyToOne=!1,this.isManyToMany=!1,this.isManyToManyOwner=!1,this.isManyToManyNotOwner=!1,this.foreignKeys=[],this.joinColumns=[],this.inverseJoinColumns=[],this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata;const t=e.args;this.target=t.target,this.propertyName=t.propertyName,this.relationType=t.relationType,t.inverseSideProperty&&(this.givenInverseSidePropertyFactory=t.inverseSideProperty),this.isLazy=t.isLazy||!1,this.isCascadeInsert=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("insert")!==-1,this.isCascadeUpdate=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("update")!==-1,this.isCascadeRemove=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("remove")!==-1,this.isCascadeSoftRemove=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("soft-remove")!==-1,this.isCascadeRecover=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("recover")!==-1,this.isNullable=!(t.options.nullable===!1||this.isPrimary),this.onDelete=t.options.onDelete,this.onUpdate=t.options.onUpdate,this.deferrable=t.options.deferrable,this.createForeignKeyConstraints=t.options.createForeignKeyConstraints!==!1,this.isEager=t.options.eager||!1,this.persistenceEnabled=t.options.persistence!==!1,this.orphanedRowAction=t.options.orphanedRowAction||"nullify",this.isTreeParent=t.isTreeParent||!1,this.isTreeChildren=t.isTreeChildren||!1,typeof t.type=="function"?this.type=typeof t.type=="function"?t.type():t.type:se.isEntitySchema(t.type)?this.type=t.type.options.name:ft.isObject(t.type)&&typeof t.type.name=="string"?this.type=t.type.name:this.type=t.type,this.isOneToOne=this.relationType==="one-to-one",this.isOneToMany=this.relationType==="one-to-many",this.isManyToOne=this.relationType==="many-to-one",this.isManyToMany=this.relationType==="many-to-many",this.isOneToOneNotOwner=!!this.isOneToOne,this.isManyToManyNotOwner=!!this.isManyToMany}getRelationIdMap(e){const i=(this.isOwning?this.joinColumns:this.inverseRelation.joinColumns).map(r=>r.referencedColumn);return _s.getValueMap(e,i)}ensureRelationIdMap(e){if(ft.isObject(e))return e;const i=(this.isOwning?this.joinColumns:this.inverseRelation.joinColumns).map(r=>r.referencedColumn);if(i.length>1)throw new J("Cannot create relation id map for a single value because relation contains multiple referenced columns.");return i[0].createValueMap(e)}getEntityValue(e,t=!1){if(e!=null)if(this.embeddedMetadata){const i=[...this.embeddedMetadata.parentPropertyNames],r=(a,o)=>{const l=a.shift();return l?o[l]?r(a,o[l]):void 0:o},s=r(i,e);return this.isLazy?s["__"+this.propertyName+"__"]!==void 0?s["__"+this.propertyName+"__"]:t===!0?s[this.propertyName]:void 0:s?s[this.isLazy?"__"+this.propertyName+"__":this.propertyName]:void 0}else return this.isLazy?e["__"+this.propertyName+"__"]!==void 0?e["__"+this.propertyName+"__"]:t===!0?e[this.propertyName]:void 0:e[this.propertyName]}setEntityValue(e,t){const i=this.isLazy?"__"+this.propertyName+"__":this.propertyName;if(this.embeddedMetadata){const r=(s,a)=>{const o=s.shift();return o?(a[o.propertyName]||(a[o.propertyName]=o.create()),r(s,a[o.propertyName]),a):(a[i]=t,a)};return r([...this.embeddedMetadata.embeddedMetadataTree],e)}else e[i]=t}createValueMap(e){if(this.embeddedMetadata){const t=[...this.embeddedMetadata.parentPropertyNames],i=(r,s)=>{const a=r.shift();return a?(s[a]={},i(r,s[a]),s):(s[this.propertyName]=e,s)};return i(t,{})}else return{[this.propertyName]:e}}build(){this.propertyPath=this.buildPropertyPath()}registerForeignKeys(...e){this.foreignKeys.push(...e)}registerJoinColumns(e=[],t=[]){this.joinColumns=e,this.inverseJoinColumns=t,this.isOwning=this.isManyToOne||(this.isManyToMany||this.isOneToOne)&&this.joinColumns.length>0,this.isOneToOneOwner=this.isOneToOne&&this.isOwning,this.isOneToOneNotOwner=this.isOneToOne&&!this.isOwning,this.isManyToManyOwner=this.isManyToMany&&this.isOwning,this.isManyToManyNotOwner=this.isManyToMany&&!this.isOwning,this.isWithJoinColumn=this.isManyToOne||this.isOneToOneOwner}registerJunctionEntityMetadata(e){this.junctionEntityMetadata=e,this.joinTableName=e.tableName,this.inverseRelation&&(this.inverseRelation.junctionEntityMetadata=e,this.joinTableName=e.tableName)}buildInverseSidePropertyPath(){if(this.givenInverseSidePropertyFactory){const e=this.inverseEntityMetadata.propertiesMap;if(typeof this.givenInverseSidePropertyFactory=="function")return this.givenInverseSidePropertyFactory(e);if(typeof this.givenInverseSidePropertyFactory=="string")return this.givenInverseSidePropertyFactory}else{if(this.isTreeParent&&this.entityMetadata.treeChildrenRelation)return this.entityMetadata.treeChildrenRelation.propertyName;if(this.isTreeChildren&&this.entityMetadata.treeParentRelation)return this.entityMetadata.treeParentRelation.propertyName}return""}buildPropertyPath(){return!this.embeddedMetadata||!this.embeddedMetadata.parentPropertyNames.length?this.propertyName:this.embeddedMetadata.parentPropertyNames.join(".")+"."+this.propertyName}}class CK{constructor(e){this.columns=[],this.relations=[],this.listeners=[],this.indices=[],this.uniques=[],this.relationIds=[],this.relationCounts=[],this.embeddeds=[],this.isAlwaysUsingConstructor=!0,this.isArray=!1,this.parentPropertyNames=[],this.parentPrefixes=[],this.embeddedMetadataTree=[],this.columnsFromTree=[],this.relationsFromTree=[],this.listenersFromTree=[],this.indicesFromTree=[],this.uniquesFromTree=[],this.relationIdsFromTree=[],this.relationCountsFromTree=[],this.entityMetadata=e.entityMetadata,this.type=e.args.type(),this.propertyName=e.args.propertyName,this.customPrefix=e.args.prefix,this.isArray=e.args.isArray}create(e){return typeof this.type!="function"?{}:e!=null&&e.fromDeserializer||!this.isAlwaysUsingConstructor?Object.create(this.type.prototype):new this.type}build(e){return this.embeddeds.forEach(t=>t.build(e)),this.prefix=this.buildPrefix(e),this.parentPropertyNames=this.buildParentPropertyNames(),this.parentPrefixes=this.buildParentPrefixes(),this.propertyPath=this.parentPropertyNames.join("."),this.embeddedMetadataTree=this.buildEmbeddedMetadataTree(),this.columnsFromTree=this.buildColumnsFromTree(),this.relationsFromTree=this.buildRelationsFromTree(),this.listenersFromTree=this.buildListenersFromTree(),this.indicesFromTree=this.buildIndicesFromTree(),this.uniquesFromTree=this.buildUniquesFromTree(),this.relationIdsFromTree=this.buildRelationIdsFromTree(),this.relationCountsFromTree=this.buildRelationCountsFromTree(),e.options.entitySkipConstructor&&(this.isAlwaysUsingConstructor=!e.options.entitySkipConstructor),this}buildPartialPrefix(){if(this.customPrefix===void 0||this.customPrefix===!0)return[this.propertyName];if(this.customPrefix===""||this.customPrefix===!1)return[];if(typeof this.customPrefix=="string")return[this.customPrefix];throw new J("Invalid prefix option given for ".concat(this.entityMetadata.targetName,"#").concat(this.propertyName))}buildPrefix(e){if(e.driver.options.type==="mongodb")return this.propertyName;let t=[];return this.parentEmbeddedMetadata&&t.push(this.parentEmbeddedMetadata.buildPrefix(e)),t.push(...this.buildPartialPrefix()),t.join("_")}buildParentPropertyNames(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPropertyNames().concat(this.propertyName):[this.propertyName]}buildParentPrefixes(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPrefixes().concat(this.buildPartialPrefix()):this.buildPartialPrefix()}buildEmbeddedMetadataTree(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildEmbeddedMetadataTree().concat(this):[this]}buildColumnsFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildColumnsFromTree()),this.columns)}buildRelationsFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildRelationsFromTree()),this.relations)}buildListenersFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildListenersFromTree()),this.listeners)}buildIndicesFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildIndicesFromTree()),this.indices)}buildUniquesFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildUniquesFromTree()),this.uniques)}buildRelationIdsFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildRelationIdsFromTree()),this.relationIds)}buildRelationCountsFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildRelationCountsFromTree()),this.relationCounts)}}class dA{constructor(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}setValue(e){const t=this.relation.getEntityValue(e);if(Array.isArray(t))e[this.propertyName]=t.map(i=>this.relation.inverseEntityMetadata.getEntityIdMixedMap(i)).filter(i=>i!=null);else{const i=this.relation.inverseEntityMetadata.getEntityIdMixedMap(t);i!==void 0&&(e[this.propertyName]=i)}}build(){const e=typeof this.relationNameOrFactory=="function"?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new J("Cannot find relation ".concat(e,". Wrong relation specified for @RelationId decorator."));this.relation=t}}class hA{constructor(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}build(){const e=typeof this.relationNameOrFactory=="function"?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new J("Cannot find relation ".concat(e,". Wrong relation specified for @RelationCount decorator."));this.relation=t}}class mn{}mn.AFTER_LOAD="after-load";mn.BEFORE_INSERT="before-insert";mn.AFTER_INSERT="after-insert";mn.BEFORE_UPDATE="before-update";mn.AFTER_UPDATE="after-update";mn.BEFORE_REMOVE="before-remove";mn.AFTER_REMOVE="after-remove";mn.BEFORE_SOFT_REMOVE="before-soft-remove";mn.AFTER_SOFT_REMOVE="after-soft-remove";mn.BEFORE_RECOVER="before-recover";mn.AFTER_RECOVER="after-recover";class Ef{constructor(e){this.columns=[],this.referencedColumns=[],this.columnNames=[],this.referencedColumnNames=[],this.entityMetadata=e.entityMetadata,this.referencedEntityMetadata=e.referencedEntityMetadata,this.columns=e.columns,this.referencedColumns=e.referencedColumns,this.onDelete=e.onDelete||"NO ACTION",this.onUpdate=e.onUpdate||"NO ACTION",this.deferrable=e.deferrable,this.givenName=e.name,e.namingStrategy&&this.build(e.namingStrategy)}build(e){this.columnNames=this.columns.map(t=>t.databaseName),this.referencedColumnNames=this.referencedColumns.map(t=>t.databaseName),this.referencedTablePath=this.referencedEntityMetadata.tablePath,this.name=this.givenName?this.givenName:e.foreignKeyName(this.entityMetadata.tableName,this.columnNames,this.referencedEntityMetadata.tableName,this.referencedColumnNames)}}class AK{constructor(e){this.connection=e}build(e,t){var i,r;const s=this.collectReferencedColumns(e,t),a=this.collectInverseReferencedColumns(e,t),o=t.name||this.connection.namingStrategy.joinTableName(e.entityMetadata.tableNameWithoutPrefix,e.inverseEntityMetadata.tableNameWithoutPrefix,e.propertyPath,e.inverseRelation?e.inverseRelation.propertyName:""),l=new _s({connection:this.connection,args:{target:"",name:o,type:"junction",database:t.database||e.entityMetadata.database,schema:t.schema||e.entityMetadata.schema,synchronize:t.synchronize}});l.build();const c=s.map(d=>{const h=t.joinColumns?t.joinColumns.find(m=>(!m.referencedColumnName||m.referencedColumnName===d.propertyName)&&!!m.name):void 0,f=h&&h.name?h.name:this.connection.namingStrategy.joinTableColumnName(e.entityMetadata.tableNameWithoutPrefix,d.propertyName,d.databaseName);return new Br({connection:this.connection,entityMetadata:l,referencedColumn:d,args:{target:"",mode:"virtual",propertyName:f,options:{name:f,length:!d.length&&(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.normalizeType(d)!=="uuid"&&(d.generationStrategy==="uuid"||d.type==="uuid")?"36":d.length,width:d.width,type:d.type,precision:d.precision,scale:d.scale,charset:d.charset,collation:d.collation,zerofill:d.zerofill,unsigned:d.zerofill?!0:d.unsigned,enum:d.enum,enumName:d.enumName,foreignKeyConstraintName:h==null?void 0:h.foreignKeyConstraintName,nullable:!1,primary:!0}}})}),u=a.map(d=>{const h=t.inverseJoinColumns?t.inverseJoinColumns.find(m=>(!m.referencedColumnName||m.referencedColumnName===d.propertyName)&&!!m.name):void 0,f=h&&h.name?h.name:this.connection.namingStrategy.joinTableInverseColumnName(e.inverseEntityMetadata.tableNameWithoutPrefix,d.propertyName,d.databaseName);return new Br({connection:this.connection,entityMetadata:l,referencedColumn:d,args:{target:"",mode:"virtual",propertyName:f,options:{length:!d.length&&(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.normalizeType(d)!=="uuid"&&(d.generationStrategy==="uuid"||d.type==="uuid")?"36":d.length,width:d.width,type:d.type,precision:d.precision,scale:d.scale,charset:d.charset,collation:d.collation,zerofill:d.zerofill,unsigned:d.zerofill?!0:d.unsigned,enum:d.enum,enumName:d.enumName,foreignKeyConstraintName:h==null?void 0:h.foreignKeyConstraintName,name:f,nullable:!1,primary:!0}}})});return this.changeDuplicatedColumnNames(c,u),l.ownerColumns=c,l.inverseColumns=u,l.ownColumns=[...c,...u],l.ownColumns.forEach(d=>d.relationMetadata=e),l.foreignKeys=e.createForeignKeyConstraints?[new Ef({entityMetadata:l,referencedEntityMetadata:e.entityMetadata,columns:c,referencedColumns:s,name:(i=c[0])===null||i===void 0?void 0:i.foreignKeyConstraintName,onDelete:this.connection.driver.options.type==="spanner"?"NO ACTION":e.onDelete||"CASCADE",onUpdate:this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="spanner"?"NO ACTION":e.onUpdate||"CASCADE"}),new Ef({entityMetadata:l,referencedEntityMetadata:e.inverseEntityMetadata,columns:u,referencedColumns:a,name:(r=u[0])===null||r===void 0?void 0:r.foreignKeyConstraintName,onDelete:this.connection.driver.options.type==="spanner"?"NO ACTION":e.inverseRelation?e.inverseRelation.onDelete:"CASCADE",onUpdate:this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="spanner"?"NO ACTION":e.inverseRelation?e.inverseRelation.onUpdate:"CASCADE"})]:[],l.ownIndices=[new hs({entityMetadata:l,columns:c,args:{target:l.target,synchronize:!0}}),new hs({entityMetadata:l,columns:u,args:{target:l.target,synchronize:!0}})],l}collectReferencedColumns(e,t){const i=t.joinColumns?t.joinColumns.find(r=>!!r.referencedColumnName):!1;return!t.joinColumns||t.joinColumns&&!i?e.entityMetadata.columns.filter(r=>r.isPrimary):t.joinColumns.map(r=>{const s=e.entityMetadata.columns.find(a=>a.propertyName===r.referencedColumnName);if(!s)throw new J("Referenced column ".concat(r.referencedColumnName," was not found in entity ").concat(e.entityMetadata.name));return s})}collectInverseReferencedColumns(e,t){const i=!!t.inverseJoinColumns,r=i?t.inverseJoinColumns.find(s=>!!s.referencedColumnName):!1;return!i||i&&!r?e.inverseEntityMetadata.primaryColumns:t.inverseJoinColumns.map(s=>{const a=e.inverseEntityMetadata.ownColumns.find(o=>o.propertyName===s.referencedColumnName);if(!a)throw new J("Referenced column ".concat(s.referencedColumnName," was not found in entity ").concat(e.inverseEntityMetadata.name));return a})}changeDuplicatedColumnNames(e,t){e.forEach(i=>{t.forEach(r=>{if(i.givenDatabaseName===r.givenDatabaseName){const s=this.connection.namingStrategy.joinTableColumnDuplicationPrefix(i.propertyName,1);i.propertyName=s,i.givenDatabaseName=s;const a=this.connection.namingStrategy.joinTableColumnDuplicationPrefix(r.propertyName,2);r.propertyName=a,r.givenDatabaseName=a}})})}}class kK{constructor(e){this.connection=e}build(e){const t=new _s({parentClosureEntityMetadata:e,connection:this.connection,args:{target:"",name:e.treeOptions&&e.treeOptions.closureTableName?e.treeOptions.closureTableName:e.tableNameWithoutPrefix,type:"closure-junction"}});return t.build(),e.primaryColumns.forEach(i=>{t.ownColumns.push(new Br({connection:this.connection,entityMetadata:t,closureType:"ancestor",referencedColumn:i,args:{target:"",mode:"virtual",propertyName:e.treeOptions&&e.treeOptions.ancestorColumnName?e.treeOptions.ancestorColumnName(i):i.propertyName+"_ancestor",options:{primary:!0,length:i.length,type:i.type}}})),t.ownColumns.push(new Br({connection:this.connection,entityMetadata:t,closureType:"descendant",referencedColumn:i,args:{target:"",mode:"virtual",propertyName:e.treeOptions&&e.treeOptions.descendantColumnName?e.treeOptions.descendantColumnName(i):i.propertyName+"_descendant",options:{primary:!0,length:i.length,type:i.type}}}))}),t.ownIndices=[new hs({entityMetadata:t,columns:[t.ownColumns[0]],args:{target:t.target,synchronize:!0}}),new hs({entityMetadata:t,columns:[t.ownColumns[1]],args:{target:t.target,synchronize:!0}})],e.treeLevelColumn&&t.ownColumns.push(new Br({connection:this.connection,entityMetadata:t,args:{target:"",mode:"virtual",propertyName:"level",options:{type:this.connection.driver.mappedDataTypes.treeLevel}}})),t.foreignKeys=[new Ef({entityMetadata:t,referencedEntityMetadata:e,columns:[t.ownColumns[0]],referencedColumns:e.primaryColumns,onDelete:this.connection.driver.options.type==="mssql"?"NO ACTION":"CASCADE"}),new Ef({entityMetadata:t,referencedEntityMetadata:e,columns:[t.ownColumns[1]],referencedColumns:e.primaryColumns,onDelete:this.connection.driver.options.type==="mssql"?"NO ACTION":"CASCADE"})],t}}class Um{constructor(e){this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,this.givenName=e.args.name,this.givenColumnNames=e.args.columns,this.deferrable=e.args.deferrable)}build(e){const t={};if(this.givenColumnNames){let i=[];if(Array.isArray(this.givenColumnNames))i=this.givenColumnNames.map(r=>this.embeddedMetadata?this.embeddedMetadata.propertyPath+"."+r:r.trim()),i.forEach(r=>t[r]=1);else{const r=this.givenColumnNames(this.entityMetadata.propertiesMap);Array.isArray(r)?(i=r.map(s=>String(s)),i.forEach(s=>t[s]=1)):(i=Object.keys(r).map(s=>String(s)),Object.keys(r).forEach(s=>t[s]=r[s]))}this.columns=i.map(r=>{const s=this.entityMetadata.columns.find(c=>c.propertyPath===r);if(s)return[s];const a=this.entityMetadata.relations.find(c=>c.isWithJoinColumn&&c.propertyName===r);if(a)return a.joinColumns;const o=this.givenName?'"'+this.givenName+'" ':"",l=this.entityMetadata.targetName;throw new J("Unique constraint ".concat(o,"contains column that is missing in the entity (").concat(l,"): ")+r)}).reduce((r,s)=>r.concat(s))}return this.columnNamesWithOrderingMap=Object.keys(t).reduce((i,r)=>{const s=this.entityMetadata.columns.find(a=>a.propertyPath===r);return s&&(i[s.databasePath]=t[r]),i},{}),this.name=this.givenName?this.givenName:e.uniqueConstraintName(this.entityMetadata.tableName,this.columns.map(i=>i.databaseName)),this}}class NK{constructor(e){this.connection=e}build(e,t){var i;const r=this.collectReferencedColumns(e,t),s=this.collectColumns(e,t,r);if(!r.length||!t.createForeignKeyConstraints)return{foreignKey:void 0,columns:s,uniqueConstraint:void 0};const a=new Ef({name:(i=e[0])===null||i===void 0?void 0:i.foreignKeyConstraintName,entityMetadata:t.entityMetadata,referencedEntityMetadata:t.inverseEntityMetadata,namingStrategy:this.connection.namingStrategy,columns:s,referencedColumns:r,onDelete:t.onDelete,onUpdate:t.onUpdate,deferrable:t.deferrable});if(s.every(l=>l.isPrimary)||!t.isOneToOne)return{foreignKey:a,columns:s,uniqueConstraint:void 0};const o=new Um({entityMetadata:t.entityMetadata,columns:a.columns,args:{name:this.connection.namingStrategy.relationConstraintName(t.entityMetadata.tableName,a.columns.map(l=>l.databaseName)),target:t.entityMetadata.target}});return o.build(this.connection.namingStrategy),{foreignKey:a,columns:s,uniqueConstraint:o}}collectReferencedColumns(e,t){const i=e.find(a=>!!a.referencedColumnName),r=e.length===0&&t.isManyToOne,s=e.length>0&&!i;return r||s?t.inverseEntityMetadata.primaryColumns:e.map(a=>{const o=t.inverseEntityMetadata.ownColumns.find(l=>l.propertyName===a.referencedColumnName);if(!o)throw new J("Referenced column ".concat(a.referencedColumnName," was not found in entity ").concat(t.inverseEntityMetadata.name));return o})}collectColumns(e,t,i){return i.map(r=>{const s=e.find(c=>(!c.referencedColumnName||c.referencedColumnName===r.propertyName)&&!!c.name),a=s?s.name:this.connection.namingStrategy.joinColumnName(t.propertyName,r.propertyName);let l=(t.embeddedMetadata?t.embeddedMetadata.columns:t.entityMetadata.ownColumns).find(c=>c.databaseNameWithoutPrefixes===a);return l||(l=new Br({connection:this.connection,entityMetadata:t.entityMetadata,embeddedMetadata:t.embeddedMetadata,args:{target:"",mode:"virtual",propertyName:t.propertyName,options:{name:a,type:r.type,length:!r.length&&(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.normalizeType(r)!=="uuid"&&(r.generationStrategy==="uuid"||r.type==="uuid")?"36":r.length,width:r.width,charset:r.charset,collation:r.collation,precision:r.precision,scale:r.scale,zerofill:r.zerofill,unsigned:r.unsigned,comment:r.comment,enum:r.enum,enumName:r.enumName,primary:t.isPrimary,nullable:t.isNullable}}}),t.entityMetadata.registerColumn(l)),l.referencedColumn=r,l.type=r.type,l.relationMetadata=t,l.build(this.connection),l})}}class fA{constructor(e){this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.type=e.args.type}isAllowed(e){return this.entityMetadata.target===e.constructor||typeof this.entityMetadata.target=="function"&&e.constructor.prototype instanceof this.entityMetadata.target}execute(e){if(!this.embeddedMetadata)return e[this.propertyName]();this.callEntityEmbeddedMethod(e,this.embeddedMetadata.propertyPath.split("."))}callEntityEmbeddedMethod(e,t){const i=t.shift();!i||!e[i]||(t.length===0?Array.isArray(e[i])?e[i].map(r=>r[this.propertyName]()):e[i][this.propertyName]():e[i]&&this.callEntityEmbeddedMethod(e[i],t))}}class DK{constructor(e){this.entityMetadata=e.entityMetadata,e.args&&(this.target=e.args.target,this.expression=e.args.expression,this.givenName=e.args.name)}build(e){return this.name=this.givenName?this.givenName:e.checkConstraintName(this.entityMetadata.tableName,this.expression),this}}class PK{constructor(e){this.entityMetadata=e.entityMetadata,e.args&&(this.target=e.args.target,this.expression=e.args.expression,this.givenName=e.args.name)}build(e){return this.name=this.givenName?this.givenName:e.exclusionConstraintName(this.entityMetadata.tableName,this.expression),this}}class pA{constructor(e,t){this.connection=e,this.metadataArgsStorage=t,this.junctionEntityMetadataBuilder=new AK(e),this.closureJunctionEntityMetadataBuilder=new kK(e),this.relationJoinColumnBuilder=new NK(e)}build(e){const r=(e?this.metadataArgsStorage.filterTables(e):this.metadataArgsStorage.tables).filter(s=>s.type==="regular"||s.type==="closure"||s.type==="entity-child"||s.type==="view").map(s=>this.createEntityMetadata(s));return r.forEach(s=>this.computeParentEntityMetadata(r,s)),r.forEach(s=>{s.childEntityMetadatas=r.filter(a=>typeof s.target=="function"&&typeof a.target=="function"&&Fm.isInherited(a.target,s.target))}),r.filter(s=>s.tableType!=="entity-child").forEach(s=>s.build()),r.filter(s=>s.tableType==="entity-child").forEach(s=>s.build()),r.filter(s=>s.tableType!=="entity-child").forEach(s=>this.computeEntityMetadataStep1(r,s)),r.filter(s=>s.tableType==="entity-child").forEach(s=>this.computeEntityMetadataStep1(r,s)),r.forEach(s=>this.computeEntityMetadataStep2(s)),r.forEach(s=>this.computeInverseProperties(s,r)),r.filter(s=>s.tableType!=="entity-child").forEach(s=>{s.relations.filter(a=>a.isOneToOne||a.isManyToOne).forEach(a=>{const o=this.metadataArgsStorage.filterJoinColumns(a.target,a.propertyName),{foreignKey:l,columns:c,uniqueConstraint:u}=this.relationJoinColumnBuilder.build(o,a);if(l&&(a.registerForeignKeys(l),s.foreignKeys.push(l)),c&&a.registerJoinColumns(c),u)if(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="mssql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){const d=new hs({entityMetadata:u.entityMetadata,columns:u.columns,args:{target:u.target,name:u.name,unique:!0,synchronize:!0}});this.connection.driver.options.type==="mssql"&&(d.where=d.columns.map(h=>"".concat(this.connection.driver.escape(h.databaseName)," IS NOT NULL")).join(" AND ")),this.connection.driver.options.type==="spanner"&&(d.isNullFiltered=!0),a.embeddedMetadata?a.embeddedMetadata.indices.push(d):a.entityMetadata.ownIndices.push(d),this.computeEntityMetadataStep2(s)}else a.embeddedMetadata?a.embeddedMetadata.uniques.push(u):a.entityMetadata.ownUniques.push(u),this.computeEntityMetadataStep2(s);if(l&&this.connection.driver.options.type==="cockroachdb"){const d=new hs({entityMetadata:a.entityMetadata,columns:l.columns,args:{target:a.entityMetadata.target,synchronize:!0}});a.embeddedMetadata?a.embeddedMetadata.indices.push(d):a.entityMetadata.ownIndices.push(d),this.computeEntityMetadataStep2(s)}}),s.relations.filter(a=>a.isManyToMany).forEach(a=>{const o=this.metadataArgsStorage.findJoinTable(a.target,a.propertyName);if(!o)return;const l=this.junctionEntityMetadataBuilder.build(a,o);a.registerForeignKeys(...l.foreignKeys),a.registerJoinColumns(l.ownIndices[0].columns,l.ownIndices[1].columns),a.registerJunctionEntityMetadata(l),this.computeEntityMetadataStep2(l),this.computeInverseProperties(l,r),r.push(l)})}),r.forEach(s=>{s.relationsWithJoinColumns=s.relations.filter(a=>a.isWithJoinColumn),s.hasNonNullableRelations=s.relationsWithJoinColumns.some(a=>!a.isNullable||a.isPrimary)}),r.filter(s=>s.treeType==="closure-table").forEach(s=>{const a=this.closureJunctionEntityMetadataBuilder.build(s);s.closureJunctionTable=a,this.computeEntityMetadataStep2(a),this.computeInverseProperties(a,r),r.push(a)}),r.filter(s=>s.inheritancePattern==="STI"&&s.discriminatorColumn).forEach(s=>this.createKeysForTableInheritance(s)),r.forEach(s=>{s.indices.forEach(a=>a.build(this.connection.namingStrategy))}),r.forEach(s=>{s.uniques.forEach(a=>a.build(this.connection.namingStrategy))}),r.forEach(s=>{s.checks.forEach(a=>a.build(this.connection.namingStrategy))}),r.forEach(s=>{s.exclusions.forEach(a=>a.build(this.connection.namingStrategy))}),r.filter(s=>typeof s.target=="function").forEach(s=>{s.relations.filter(a=>a.isLazy).forEach(a=>{this.connection.relationLoader.enableLazyLoad(a,s.target.prototype)})}),r.forEach(s=>{s.columns.forEach(a=>{const o=this.metadataArgsStorage.findGenerated(a.target,a.propertyName);o&&(a.isGenerated=!0,a.generationStrategy=o.strategy,o.strategy==="uuid"?a.type="uuid":o.strategy==="rowid"?a.type="int":a.type=a.type||Number,a.build(this.connection),this.computeEntityMetadataStep2(s))})}),r}createEntityMetadata(e){const t=typeof e.target=="function"?Fm.getInheritanceTree(e.target):[e.target],i=this.metadataArgsStorage.findInheritanceType(e.target),r=this.metadataArgsStorage.findTree(e.target);let s;return(i&&i.pattern==="STI"||e.type==="entity-child")&&(s=this.metadataArgsStorage.filterSingleTableChildren(e.target).map(a=>a.target).filter(a=>typeof a=="function"),t.push(...s)),new _s({connection:this.connection,args:e,inheritanceTree:t,tableTree:r,inheritancePattern:i?i.pattern:void 0})}computeParentEntityMetadata(e,t){t.tableType==="entity-child"&&(t.parentEntityMetadata=e.find(i=>i.inheritanceTree.indexOf(t.target)!==-1&&i.inheritancePattern==="STI"))}computeEntityMetadataStep1(e,t){const i=this.metadataArgsStorage.findInheritanceType(t.target),r=this.metadataArgsStorage.findDiscriminatorValue(t.target);if(typeof r<"u"?t.discriminatorValue=r.value:t.discriminatorValue=t.target.name,t.embeddeds=this.createEmbeddedsRecursively(t,this.metadataArgsStorage.filterEmbeddeds(t.inheritanceTree)).map(a=>(t.inheritancePattern==="STI"&&(a.columns=a.columns.map(o=>(o.isNullable=!0,o))),a)),t.ownColumns=this.metadataArgsStorage.filterColumns(t.inheritanceTree).map(a=>{if(t.tableType==="entity-child")return t.parentEntityMetadata.ownColumns.find(c=>c.propertyName===a.propertyName);const o=new Br({connection:this.connection,entityMetadata:t,args:a});return e.find(c=>c.tableType==="entity-child"&&c.target===a.target)&&(o.isNullable=!0),o}),i&&i.column){const a=i.column&&i.column.name?i.column.name:"type";let o=t.ownColumns.find(l=>l.propertyName===a);o?o.isDiscriminator=!0:(o=new Br({connection:this.connection,entityMetadata:t,args:{target:t.target,mode:"virtual",propertyName:a,options:i.column||{name:a,type:"varchar",nullable:!1}}}),o.isVirtual=!0,o.isDiscriminator=!0,t.ownColumns.push(o))}if(t.tableType==="entity-child"){const a=t.parentEntityMetadata.ownColumns.find(o=>o.isDiscriminator);a&&!t.ownColumns.find(o=>o===a)&&t.ownColumns.push(a),t.inheritancePattern=t.parentEntityMetadata.inheritancePattern,!t.treeType&&t.parentEntityMetadata.treeType&&(t.treeType=t.parentEntityMetadata.treeType,t.treeOptions=t.parentEntityMetadata.treeOptions,t.treeParentRelation=t.parentEntityMetadata.treeParentRelation,t.treeLevelColumn=t.parentEntityMetadata.treeLevelColumn)}const{namingStrategy:s}=this.connection;if(t.treeType==="materialized-path")t.ownColumns.push(new Br({connection:this.connection,entityMetadata:t,materializedPath:!0,args:{target:t.target,mode:"virtual",propertyName:"mpath",options:{name:s.materializedPathColumnName,type:String,nullable:!0,default:""}}}));else if(t.treeType==="nested-set"){const{left:a,right:o}=s.nestedSetColumnNames;t.ownColumns.push(new Br({connection:this.connection,entityMetadata:t,nestedSetLeft:!0,args:{target:t.target,mode:"virtual",propertyName:a,options:{name:a,type:Number,nullable:!1,default:1}}})),t.ownColumns.push(new Br({connection:this.connection,entityMetadata:t,nestedSetRight:!0,args:{target:t.target,mode:"virtual",propertyName:o,options:{name:o,type:Number,nullable:!1,default:2}}}))}if(t.ownRelations=this.metadataArgsStorage.filterRelations(t.inheritanceTree).map(a=>{if(t.tableType==="entity-child"){const o=t.parentEntityMetadata.ownRelations.find(c=>c.propertyName===a.propertyName),l=typeof a.type=="function"?a.type():a.type;if(o.type!==l){const c=Object.create(o);return c.type=l,c}return o}return new uA({entityMetadata:t,args:a})}),t.relationIds=this.metadataArgsStorage.filterRelationIds(t.inheritanceTree).map(a=>t.tableType==="entity-child"?t.parentEntityMetadata.relationIds.find(o=>o.propertyName===a.propertyName):new dA({entityMetadata:t,args:a})),t.relationCounts=this.metadataArgsStorage.filterRelationCounts(t.inheritanceTree).map(a=>t.tableType==="entity-child"?t.parentEntityMetadata.relationCounts.find(o=>o.propertyName===a.propertyName):new hA({entityMetadata:t,args:a})),t.ownListeners=this.metadataArgsStorage.filterListeners(t.inheritanceTree).map(a=>new fA({entityMetadata:t,args:a})),t.checks=this.metadataArgsStorage.filterChecks(t.inheritanceTree).map(a=>new DK({entityMetadata:t,args:a})),this.connection.driver.options.type==="postgres"&&(t.exclusions=this.metadataArgsStorage.filterExclusions(t.inheritanceTree).map(a=>new PK({entityMetadata:t,args:a}))),this.connection.driver.options.type==="cockroachdb"){t.ownIndices=this.metadataArgsStorage.filterIndices(t.inheritanceTree).filter(o=>!o.unique).map(o=>new hs({entityMetadata:t,args:o}));const a=this.metadataArgsStorage.filterIndices(t.inheritanceTree).filter(o=>o.unique).map(o=>new Um({entityMetadata:t,args:{target:o.target,name:o.name,columns:o.columns}}));t.ownUniques.push(...a)}else t.ownIndices=this.metadataArgsStorage.filterIndices(t.inheritanceTree).map(a=>new hs({entityMetadata:t,args:a}));if(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){const a=this.metadataArgsStorage.filterUniques(t.inheritanceTree).map(o=>new hs({entityMetadata:t,args:{target:o.target,name:o.name,columns:o.columns,unique:!0,synchronize:!0}}));t.ownIndices.push(...a)}else{const a=this.metadataArgsStorage.filterUniques(t.inheritanceTree).map(o=>new Um({entityMetadata:t,args:o}));t.ownUniques.push(...a)}}createEmbeddedsRecursively(e,t){return t.map(i=>{const r=new CK({entityMetadata:e,args:i}),s=typeof r.type=="function"?Fm.getInheritanceTree(r.type):[r.type];return r.columns=this.metadataArgsStorage.filterColumns(s).map(a=>new Br({connection:this.connection,entityMetadata:e,embeddedMetadata:r,args:a})),r.relations=this.metadataArgsStorage.filterRelations(s).map(a=>new uA({entityMetadata:e,embeddedMetadata:r,args:a})),r.listeners=this.metadataArgsStorage.filterListeners(s).map(a=>new fA({entityMetadata:e,embeddedMetadata:r,args:a})),r.indices=this.metadataArgsStorage.filterIndices(s).map(a=>new hs({entityMetadata:e,embeddedMetadata:r,args:a})),r.uniques=this.metadataArgsStorage.filterUniques(s).map(a=>new Um({entityMetadata:e,embeddedMetadata:r,args:a})),r.relationIds=this.metadataArgsStorage.filterRelationIds(s).map(a=>new dA({entityMetadata:e,args:a})),r.relationCounts=this.metadataArgsStorage.filterRelationCounts(s).map(a=>new hA({entityMetadata:e,args:a})),r.embeddeds=this.createEmbeddedsRecursively(e,this.metadataArgsStorage.filterEmbeddeds(s)),r.embeddeds.forEach(a=>a.parentEmbeddedMetadata=r),e.allEmbeddeds.push(r),r})}computeEntityMetadataStep2(e){e.embeddeds.forEach(t=>t.build(this.connection)),e.embeddeds.forEach(t=>{t.columnsFromTree.forEach(i=>i.build(this.connection)),t.relationsFromTree.forEach(i=>i.build())}),e.ownColumns.forEach(t=>t.build(this.connection)),e.ownRelations.forEach(t=>t.build()),e.relations=e.embeddeds.reduce((t,i)=>t.concat(i.relationsFromTree),e.ownRelations),e.eagerRelations=e.relations.filter(t=>t.isEager),e.lazyRelations=e.relations.filter(t=>t.isLazy),e.oneToOneRelations=e.relations.filter(t=>t.isOneToOne),e.oneToManyRelations=e.relations.filter(t=>t.isOneToMany),e.manyToOneRelations=e.relations.filter(t=>t.isManyToOne),e.manyToManyRelations=e.relations.filter(t=>t.isManyToMany),e.ownerOneToOneRelations=e.relations.filter(t=>t.isOneToOneOwner),e.ownerManyToManyRelations=e.relations.filter(t=>t.isManyToManyOwner),e.treeParentRelation=e.relations.find(t=>t.isTreeParent),e.treeChildrenRelation=e.relations.find(t=>t.isTreeChildren),e.columns=e.embeddeds.reduce((t,i)=>t.concat(i.columnsFromTree),e.ownColumns),e.listeners=e.embeddeds.reduce((t,i)=>t.concat(i.listenersFromTree),e.ownListeners),e.afterLoadListeners=e.listeners.filter(t=>t.type===mn.AFTER_LOAD),e.afterInsertListeners=e.listeners.filter(t=>t.type===mn.AFTER_INSERT),e.afterUpdateListeners=e.listeners.filter(t=>t.type===mn.AFTER_UPDATE),e.afterRemoveListeners=e.listeners.filter(t=>t.type===mn.AFTER_REMOVE),e.afterSoftRemoveListeners=e.listeners.filter(t=>t.type===mn.AFTER_SOFT_REMOVE),e.afterRecoverListeners=e.listeners.filter(t=>t.type===mn.AFTER_RECOVER),e.beforeInsertListeners=e.listeners.filter(t=>t.type===mn.BEFORE_INSERT),e.beforeUpdateListeners=e.listeners.filter(t=>t.type===mn.BEFORE_UPDATE),e.beforeRemoveListeners=e.listeners.filter(t=>t.type===mn.BEFORE_REMOVE),e.beforeSoftRemoveListeners=e.listeners.filter(t=>t.type===mn.BEFORE_SOFT_REMOVE),e.beforeRecoverListeners=e.listeners.filter(t=>t.type===mn.BEFORE_RECOVER),e.indices=e.embeddeds.reduce((t,i)=>t.concat(i.indicesFromTree),e.ownIndices),e.uniques=e.embeddeds.reduce((t,i)=>t.concat(i.uniquesFromTree),e.ownUniques),e.primaryColumns=e.columns.filter(t=>t.isPrimary),e.nonVirtualColumns=e.columns.filter(t=>!t.isVirtual),e.ancestorColumns=e.columns.filter(t=>t.closureType==="ancestor"),e.descendantColumns=e.columns.filter(t=>t.closureType==="descendant"),e.hasMultiplePrimaryKeys=e.primaryColumns.length>1,e.generatedColumns=e.columns.filter(t=>t.isGenerated||t.isObjectId),e.hasUUIDGeneratedColumns=e.columns.filter(t=>t.isGenerated||t.generationStrategy==="uuid").length>0,e.createDateColumn=e.columns.find(t=>t.isCreateDate),e.updateDateColumn=e.columns.find(t=>t.isUpdateDate),e.deleteDateColumn=e.columns.find(t=>t.isDeleteDate),e.versionColumn=e.columns.find(t=>t.isVersion),e.discriminatorColumn=e.columns.find(t=>t.isDiscriminator),e.treeLevelColumn=e.columns.find(t=>t.isTreeLevel),e.nestedSetLeftColumn=e.columns.find(t=>t.isNestedSetLeft),e.nestedSetRightColumn=e.columns.find(t=>t.isNestedSetRight),e.materializedPathColumn=e.columns.find(t=>t.isMaterializedPath),e.objectIdColumn=e.columns.find(t=>t.isObjectId),e.foreignKeys.forEach(t=>t.build(this.connection.namingStrategy)),e.propertiesMap=e.createPropertiesMap(),e.relationIds.forEach(t=>t.build()),e.relationCounts.forEach(t=>t.build()),e.embeddeds.forEach(t=>{t.relationIdsFromTree.forEach(i=>i.build()),t.relationCountsFromTree.forEach(i=>i.build())})}computeInverseProperties(e,t){e.relations.forEach(i=>{const r=t.find(s=>s.target===i.type||typeof i.type=="string"&&(s.targetName===i.type||s.givenTableName===i.type));if(!r)throw new J("Entity metadata for "+e.name+"#"+i.propertyPath+" was not found. Check if you specified a correct entity object and if it's connected in the connection options.");i.inverseEntityMetadata=r,i.inverseSidePropertyPath=i.buildInverseSidePropertyPath(),i.inverseRelation=r.relations.find(s=>s.propertyPath===i.inverseSidePropertyPath)})}createKeysForTableInheritance(e){e.indices.push(new hs({entityMetadata:e,columns:[e.discriminatorColumn],args:{target:e.target,unique:!1}}))}}class Wg extends J{static createEntitySchemaIsRequiredException(e){return new Wg("EntitySchema is required for ".concat(e," embedded field"))}static createTargetIsRequired(e){return new Wg("Target field is required for ".concat(e," embedded EntitySchema"))}constructor(e){super(e)}}class IK{transform(e){const t=new bO;return e.forEach(i=>{var r;const s=i.options,a={target:s.target||s.name,name:s.tableName,database:s.database,schema:s.schema,type:s.type||"regular",orderBy:s.orderBy,synchronize:s.synchronize,withoutRowid:!!s.withoutRowid,expression:s.expression};t.tables.push(a);const{inheritance:o}=s;o&&t.inheritances.push({target:s.target,pattern:(r=o.pattern)!==null&&r!==void 0?r:"STI",column:o.column?typeof o.column=="string"?{name:o.column}:o.column:void 0}),this.transformColumnsRecursive(s,t)}),t}transformColumnsRecursive(e,t){Object.keys(e.columns).forEach(i=>{const s=e.columns[i];let a="regular";s.createDate&&(a="createDate"),s.updateDate&&(a="updateDate"),s.deleteDate&&(a="deleteDate"),s.version&&(a="version"),s.treeChildrenCount&&(a="treeChildrenCount"),s.treeLevel&&(a="treeLevel"),s.objectId&&(a="objectId");const o={target:e.target||e.name,mode:a,propertyName:i,options:{type:s.type,name:s.objectId?"_id":s.name,primaryKeyConstraintName:s.primaryKeyConstraintName,length:s.length,width:s.width,nullable:s.nullable,readonly:s.readonly,update:s.update,select:s.select,insert:s.insert,primary:s.primary,unique:s.unique,comment:s.comment,default:s.default,onUpdate:s.onUpdate,precision:s.precision,scale:s.scale,zerofill:s.zerofill,unsigned:s.unsigned,charset:s.charset,collation:s.collation,enum:s.enum,enumName:s.enumName,asExpression:s.asExpression,generatedType:s.generatedType,hstoreType:s.hstoreType,array:s.array,transformer:s.transformer,spatialFeatureType:s.spatialFeatureType,srid:s.srid}};if(t.columns.push(o),s.generated){const l={target:e.target||e.name,propertyName:i,strategy:typeof s.generated=="string"?s.generated:"increment"};t.generations.push(l)}s.unique&&t.uniques.push({target:e.target||e.name,columns:[i]})}),e.relations&&Object.keys(e.relations).forEach(i=>{const r=e.relations[i],s={target:e.target||e.name,propertyName:i,relationType:r.type,isLazy:r.lazy||!1,type:r.target,inverseSideProperty:r.inverseSide,isTreeParent:r.treeParent,isTreeChildren:r.treeChildren,options:{eager:r.eager||!1,cascade:r.cascade,nullable:r.nullable,onDelete:r.onDelete,onUpdate:r.onUpdate,deferrable:r.deferrable,createForeignKeyConstraints:r.createForeignKeyConstraints,persistence:r.persistence,orphanedRowAction:r.orphanedRowAction}};if(t.relations.push(s),r.joinColumn)if(typeof r.joinColumn=="boolean"){const a={target:e.target||e.name,propertyName:i};t.joinColumns.push(a)}else{const a=Array.isArray(r.joinColumn)?r.joinColumn:[r.joinColumn];for(const o of a){const l={target:e.target||e.name,propertyName:i,name:o.name,referencedColumnName:o.referencedColumnName,foreignKeyConstraintName:o.foreignKeyConstraintName};t.joinColumns.push(l)}}if(r.joinTable)if(typeof r.joinTable=="boolean"){const a={target:e.target||e.name,propertyName:i};t.joinTables.push(a)}else{const a={target:e.target||e.name,propertyName:i,name:r.joinTable.name,database:r.joinTable.database,schema:r.joinTable.schema,joinColumns:r.joinTable.joinColumn?[r.joinTable.joinColumn]:r.joinTable.joinColumns,inverseJoinColumns:r.joinTable.inverseJoinColumn?[r.joinTable.inverseJoinColumn]:r.joinTable.inverseJoinColumns};t.joinTables.push(a)}}),e.relationIds&&Object.keys(e.relationIds).forEach(i=>{const r=e.relationIds[i],s={propertyName:i,relation:r.relationName,target:e.target||e.name,alias:r.alias,queryBuilderFactory:r.queryBuilderFactory};t.relationIds.push(s)}),e.indices&&e.indices.forEach(i=>{const r={target:e.target||e.name,name:i.name,unique:i.unique===!0,spatial:i.spatial===!0,fulltext:i.fulltext===!0,nullFiltered:i.nullFiltered===!0,parser:i.parser,synchronize:i.synchronize!==!1,where:i.where,sparse:i.sparse,columns:i.columns};t.indices.push(r)}),e.uniques&&e.uniques.forEach(i=>{const r={target:e.target||e.name,name:i.name,columns:i.columns,deferrable:i.deferrable};t.uniques.push(r)}),e.checks&&e.checks.forEach(i=>{const r={target:e.target||e.name,name:i.name,expression:i.expression};t.checks.push(r)}),e.exclusions&&e.exclusions.forEach(i=>{const r={target:e.target||e.name,name:i.name,expression:i.expression};t.exclusions.push(r)}),e.embeddeds&&Object.keys(e.embeddeds).forEach(i=>{const r=e.embeddeds[i];if(!r.schema)throw Wg.createEntitySchemaIsRequiredException(i);const s=r.schema.options;t.embeddeds.push({target:e.target||e.name,propertyName:i,isArray:r.array===!0,prefix:r.prefix!==void 0?r.prefix:void 0,type:()=>(s==null?void 0:s.target)||s.name}),this.transformColumnsRecursive(s,t)})}}class RK{constructor(e){this.connection=e}async buildMigrations(e){const[t,i]=Fe.splitClassesAndStrings(e);return[...t,...await Ov(this.connection.logger)].map(s=>cA(s))}async buildSubscribers(e){const[t,i]=Fe.splitClassesAndStrings(e||[]),r=[...t,...await Ov(this.connection.logger)];return ys().filterSubscribers(r).map(s=>cA(s.target))}async buildEntityMetadatas(e){const[t,i]=Fe.splitClassesAndStrings(e||[]),r=t.filter(u=>!se.isEntitySchema(u)),s=t.filter(u=>se.isEntitySchema(u)),a=[...r,...await Ov(this.connection.logger)];a.forEach(u=>{se.isEntitySchema(u)&&s.push(u)});const o=new pA(this.connection,ys()).build(a),l=new IK().transform(s),c=new pA(this.connection,l).build();return[...o,...c]}}class OK{constructor(e,t,i,r,s){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=i,this.rawRelationCountResults=r,this.queryRunner=s}transform(e,t){const i=this.group(e,t),r=[];return i.forEach(s=>{const a=this.transformRawResultsGroup(s,t);a!==void 0&&!Object.values(a).every(o=>o===null)&&r.push(a)}),r}group(e,t){const i=new Map,r=[];return t.metadata.tableType==="view"?r.push(...t.metadata.columns.map(s=>Oe.buildAlias(this.driver,void 0,t.name,s.databaseName))):r.push(...t.metadata.primaryColumns.map(s=>Oe.buildAlias(this.driver,void 0,t.name,s.databaseName))),e.forEach(s=>{const a=r.map(l=>{const c=s[l];return Buffer.isBuffer(c)?c.toString("hex"):ft.isObject(c)?JSON.stringify(c):c}).join("_"),o=i.get(a);o?o.push(s):i.set(a,[s])}),i}transformRawResultsGroup(e,t){let i=t.metadata;if(i.discriminatorColumn){const u=e.map(h=>h[Oe.buildAlias(this.driver,void 0,t.name,t.metadata.discriminatorColumn.databaseName)]),d=i.childEntityMetadatas.find(h=>typeof u.find(f=>f===h.discriminatorValue)<"u");d&&(i=d)}let r=i.create(this.queryRunner,{fromDeserializer:!0,pojo:this.expressionMap.options.indexOf("create-pojo")!==-1});const s=this.transformColumns(e,t,r,i),a=this.transformJoins(e,r,t,i),o=this.transformRelationIds(e,t,r,i),l=this.transformRelationCounts(e,t,r);if(s||i.primaryColumns.filter(u=>u.isVirtual===!1).length===0&&(a||o||l))return r}transformColumns(e,t,i,r){let s=!1;return r.columns.forEach(a=>{if(r.childEntityMetadatas.length>0&&r.childEntityMetadatas.findIndex(l=>l.target===a.target)!==-1)return;const o=e[0][Oe.buildAlias(this.driver,void 0,t.name,a.databaseName)];o===void 0||a.isVirtual||this.expressionMap.selects.find(l=>l.selection===t.name||l.selection===t.name+"."+a.propertyPath)&&(a.setEntityValue(i,this.driver.prepareHydratedValue(o,a)),o!==null&&(s=!0))}),s}transformJoins(e,t,i,r){let s=!1;return this.expressionMap.joinAttributes.forEach(a=>{if(!a.metadata||!a.isSelected||a.relation&&!r.relations.find(l=>l===a.relation))return;if(a.mapToProperty){if(a.mapToPropertyParentAlias!==i.name)return}else if(!a.relation||a.parentAlias!==i.name||a.relationPropertyPath!==a.relation.propertyPath)return;let o=this.transform(e,a.alias);o=a.isMany?o:o[0],o=!a.isMany&&o===void 0?null:o,o!==void 0&&(a.mapToPropertyPropertyName?t[a.mapToPropertyPropertyName]=o:a.relation.setEntityValue(t,o),s=!0)}),s}transformRelationIds(e,t,i,r){let s=!1;return this.rawRelationIdResults.forEach((a,o)=>{if(a.relationIdAttribute.parentAlias!==t.name)return;const l=a.relationIdAttribute.relation,c=this.createValueMapFromJoinColumns(l,a.relationIdAttribute.parentAlias,e);if(c==null)return;this.prepareDataForTransformRelationIds();const u=this.hashEntityIds(l,c),d=this.relationIdMaps[o][u]||[],h=a.relationIdAttribute.mapToPropertyPropertyPath.split("."),f=(m,g,_)=>{const v=m.shift();if(v&&m.length===0)return g[v]=_,g;if(v&&m.length>0)f(m,g[v],_);else return g};l.isOneToOne||l.isManyToOne?d[0]!==void 0&&(f(h,i,d[0]),s=!0):(f(h,i,d),s=s||d.length>0)}),s}transformRelationCounts(e,t,i){let r=!1;return this.rawRelationCountResults.filter(s=>s.relationCountAttribute.parentAlias===t.name).forEach(s=>{const a=s.relationCountAttribute.relation;let o;a.isOneToMany?o=a.inverseRelation.joinColumns[0].referencedColumn.databaseName:o=a.isOwning?a.joinColumns[0].referencedColumn.databaseName:a.inverseRelation.joinColumns[0].referencedColumn.databaseName;const l=e[0][Oe.buildAlias(this.driver,void 0,t.name,o)];l!=null&&(i[s.relationCountAttribute.mapToPropertyPropertyName]=0,s.results.filter(c=>c.parentId===l).forEach(c=>{i[s.relationCountAttribute.mapToPropertyPropertyName]=parseInt(c.cnt),r=!0}))}),r}createValueMapFromJoinColumns(e,t,i){let r;return e.isManyToOne||e.isOneToOneOwner?r=e.entityMetadata.primaryColumns.map(s=>s):e.isOneToMany||e.isOneToOneNotOwner?r=e.inverseRelation.joinColumns.map(s=>s):e.isOwning?r=e.joinColumns.map(s=>s):r=e.inverseRelation.inverseJoinColumns.map(s=>s),r.reduce((s,a)=>(i.forEach(o=>{e.isManyToOne||e.isOneToOneOwner?s[a.databaseName]=this.driver.prepareHydratedValue(o[Oe.buildAlias(this.driver,void 0,t,a.databaseName)],a):s[a.databaseName]=this.driver.prepareHydratedValue(o[Oe.buildAlias(this.driver,void 0,t,a.referencedColumn.databaseName)],a.referencedColumn)}),s),{})}extractEntityPrimaryIds(e,t){let i;return e.isManyToOne||e.isOneToOneOwner?i=e.entityMetadata.primaryColumns.map(r=>r):e.isOneToMany||e.isOneToOneNotOwner?i=e.inverseRelation.joinColumns.map(r=>r):e.isOwning?i=e.joinColumns.map(r=>r):i=e.inverseRelation.inverseJoinColumns.map(r=>r),i.reduce((r,s)=>(r[s.databaseName]=t[s.databaseName],r),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(e=>{const t=e.relationIdAttribute.relation;let i;return t.isManyToOne||t.isOneToOneOwner?i=t.joinColumns:t.isOneToMany||t.isOneToOneNotOwner?i=t.inverseEntityMetadata.primaryColumns:t.isOwning?i=t.inverseJoinColumns:i=t.inverseRelation.joinColumns,e.results.reduce((r,s)=>{let a=i.reduce((o,l)=>{let c=s[l.databaseName];return t.isOneToMany||t.isOneToOneNotOwner?(l.isVirtual&&l.referencedColumn&&l.referencedColumn.propertyName!==l.propertyName&&(c=l.referencedColumn.createValueMap(c)),Fe.mergeDeep(o,l.createValueMap(c))):(!l.isPrimary&&l.referencedColumn.referencedColumn&&(c=l.referencedColumn.referencedColumn.createValueMap(c)),Fe.mergeDeep(o,l.referencedColumn.createValueMap(c)))},{});if(i.length===1&&!e.relationIdAttribute.disableMixedMap&&(t.isOneToMany||t.isOneToOneNotOwner?a=i[0].getEntityValue(a):a=i[0].referencedColumn.getEntityValue(a)),a!==void 0){const o=this.hashEntityIds(t,s);r[o]?r[o].push(a):r[o]=[a]}return r},{})}))}hashEntityIds(e,t){const i=this.extractEntityPrimaryIds(e,t);return JSON.stringify(i)}}class Ys{static isAliasProperty(e){if(typeof e!="string"||e.indexOf(".")===-1)return!1;const[t,i]=e.split(".");return!(!t||!i||e.indexOf("(")!==-1||e.indexOf(")")!==-1)}}class FO{constructor(e,t,i){this.connection=e,this.queryExpressionMap=t,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,i&&ft.assign(this,i)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){let e=()=>{for(const t of this.queryExpressionMap.selects)if(t.selection===this.alias.name||this.metadata&&this.metadata.columns.find(i=>t.selection===this.alias.name+"."+i.propertyPath))return!0;return!1};this.isSelectedCache=e(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Ys.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Ys.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let e=()=>{if(!Ys.isAliasProperty(this.entityOrProperty))return;const t=this.queryExpressionMap.findAliasByName(this.parentAlias);let i=t.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(i||t.metadata.parentEntityMetadata&&(i=t.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),i))return i;throw new J("Relation with property path ".concat(this.relationPropertyPath," in entity was not found."))};this.relationCache=e.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new J("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new J("Junction property is not defined.");const e=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?Oe.buildAlias(this.connection.driver,void 0,e,this.alias.name):Oe.buildAlias(this.connection.driver,void 0,this.alias.name,e)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class c1{constructor(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,ft.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Ys.isAliasProperty(this.relationName))throw new J("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Ys.isAliasProperty(this.relationName))throw new J("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Ys.isAliasProperty(this.relationName))throw new J("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new J("Relation with property path ".concat(this.relationPropertyPath," in entity was not found."));return t}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class u1{constructor(e,t){this.expressionMap=e,ft.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Ys.isAliasProperty(this.relationName))throw new J("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Ys.isAliasProperty(this.relationName))throw new J("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rc"}get relation(){if(!Ys.isAliasProperty(this.relationName))throw new J("Given value is a string representation of alias property");const[e,t]=this.relationName.split("."),r=this.expressionMap.findAliasByName(e).metadata.findRelationWithPropertyPath(t);if(!r)throw new J("Relation with property path ".concat(t," in entity was not found."));return r}get metadata(){if(!Ys.isAliasProperty(this.relationName))throw new J("Given value is a string representation of alias property");const e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}let MK=class{constructor(e,t,i){this.connection=e,this.queryRunner=t,this.relationIdAttributes=i}async load(e){const t=this.relationIdAttributes.map(async i=>{if(i.relation.isManyToOne||i.relation.isOneToOneOwner){if(i.queryBuilderFactory)throw new J("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const r={},s=e.map(a=>{const o={},l=[];i.relation.joinColumns.forEach(u=>{o[u.databaseName]=this.connection.driver.prepareHydratedValue(a[Oe.buildAlias(this.connection.driver,void 0,i.parentAlias,u.databaseName)],u.referencedColumn);const d="".concat(u.databaseName,":").concat(o[u.databaseName]);l.indexOf(d)===-1&&l.push(d)}),i.relation.entityMetadata.primaryColumns.forEach(u=>{o[u.databaseName]=this.connection.driver.prepareHydratedValue(a[Oe.buildAlias(this.connection.driver,void 0,i.parentAlias,u.databaseName)],u);const d="".concat(u.databaseName,":").concat(o[u.databaseName]);l.indexOf(d)===-1&&l.push(d)}),l.sort();const c=l.join("::");return r[c]?null:(r[c]=!0,o)}).filter(a=>a);return{relationIdAttribute:i,results:s}}else if(i.relation.isOneToMany||i.relation.isOneToOneNotOwner){const r=i.relation,s=r.isOwning?r.joinColumns:r.inverseRelation.joinColumns,a=r.inverseEntityMetadata.target,o=r.inverseEntityMetadata.tableName,l=i.alias||o,c={},u={},d=e.map((g,_)=>{const v=[],y={},T=s.map(P=>{const F=P.databaseName+_,$=g[Oe.buildAlias(this.connection.driver,void 0,i.parentAlias,P.referencedColumn.databaseName)],B="".concat(l,":").concat(P.propertyPath,":").concat($);return v.indexOf(B)!==-1?"":(v.push(B),y[F]=$,l+"."+P.propertyPath+" = :"+F)}).filter(P=>P).join(" AND ");v.sort();const N=v.join("::");return c[N]?"":(c[N]=!0,Object.assign(u,y),T)}).filter(g=>g).map(g=>"("+g+")").join(" OR ");if(!d)return{relationIdAttribute:i,results:[]};const h=this.connection.createQueryBuilder(this.queryRunner);Fe.uniq([...s,...r.inverseRelation.entityMetadata.primaryColumns],g=>g.propertyPath).forEach(g=>{h.addSelect(l+"."+g.propertyPath,g.databaseName)}),h.from(a,l).where("("+d+")").setParameters(u),i.queryBuilderFactory&&i.queryBuilderFactory(h);const m=await h.getRawMany();return m.forEach(g=>{s.forEach(_=>{g[_.databaseName]=this.connection.driver.prepareHydratedValue(g[_.databaseName],_.referencedColumn)}),r.inverseRelation.entityMetadata.primaryColumns.forEach(_=>{g[_.databaseName]=this.connection.driver.prepareHydratedValue(g[_.databaseName],_)})}),{relationIdAttribute:i,results:m}}else{const r=i.relation,s=r.isOwning?r.joinColumns:r.inverseRelation.inverseJoinColumns,a=r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns,o=i.junctionAlias,l=i.joinInverseSideMetadata.tableName,c=i.alias||l,u=r.isOwning?r.junctionEntityMetadata.tableName:r.inverseRelation.junctionEntityMetadata.tableName,d=e.map(T=>s.reduce((N,P)=>(N[P.propertyPath]=T[Oe.buildAlias(this.connection.driver,void 0,i.parentAlias,P.referencedColumn.databaseName)],N),{}));if(d.length===0)return{relationIdAttribute:i,results:[]};const h={},f={},m=d.map((T,N)=>{const P=[],F={},$=Object.keys(T).map(M=>{const Z=M+N,O=T[M],K="".concat(o,":").concat(M,":").concat(O);return P.indexOf(K)!==-1?"":(P.push(K),F[Z]=O,o+"."+M+" = :"+Z)}).filter(M=>M).join(" AND ");P.sort();const B=P.join("::");return f[B]?"":(f[B]=!0,Object.assign(h,F),$)}).filter(T=>T),g=a.map(T=>o+"."+T.propertyPath+" = "+c+"."+T.referencedColumn.propertyPath).join(" AND "),_=m.map(T=>"("+T+" AND "+g+")").join(" OR "),v=this.connection.createQueryBuilder(this.queryRunner);a.forEach(T=>{v.addSelect(o+"."+T.propertyPath,T.databaseName).addOrderBy(o+"."+T.propertyPath)}),s.forEach(T=>{v.addSelect(o+"."+T.propertyPath,T.databaseName).addOrderBy(o+"."+T.propertyPath)}),v.from(l,c).innerJoin(u,o,_).setParameters(h),i.queryBuilderFactory&&i.queryBuilderFactory(v);const y=await v.getRawMany();return y.forEach(T=>{[...s,...a].forEach(N=>{T[N.databaseName]=this.connection.driver.prepareHydratedValue(T[N.databaseName],N.referencedColumn)})}),{relationIdAttribute:i,results:y}}});return Promise.all(t)}};class qO{constructor(e,t){this.connection=e,this.queryRunner=t}load(e,t,i){const r=Array.isArray(t)?t:[t],s=Array.isArray(i)?i:i?[i]:void 0;return e.isManyToMany?this.loadForManyToMany(e,r,s):e.isManyToOne||e.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(e,r,s):this.loadForOneToManyAndOneToOneNotOwner(e,r,s)}async loadManyToManyRelationIdsAndGroup(e,t,i,r){const s=e.isManyToMany||e.isOneToMany,a=Array.isArray(t)?t:[t];if(!i&&(i=await this.connection.relationLoader.load(e,t,this.queryRunner,r),!i.length))return a.map(d=>({entity:d,related:s?[]:void 0}));const o=await this.load(e,t,i),l=Array.isArray(i)?i:[i];let c=[],u=[];return e.isManyToManyOwner?(c=e.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn),u=e.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn)):e.isManyToManyNotOwner?(c=e.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn),u=e.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn)):e.isManyToOne||e.isOneToOneOwner?(c=e.joinColumns.map(d=>d.referencedColumn),u=e.entityMetadata.primaryColumns):(e.isOneToMany||e.isOneToOneNotOwner)&&(c=e.inverseRelation.entityMetadata.primaryColumns,u=e.inverseRelation.joinColumns.map(d=>d.referencedColumn)),a.map(d=>{const h={entity:d,related:s?[]:void 0},f=o.filter(m=>u.every(g=>g.compareEntityValue(d,m[g.entityMetadata.name+"_"+g.propertyAliasName])));return f.length&&l.forEach(m=>{f.forEach(g=>{c.every(v=>v.compareEntityValue(m,g[Oe.buildAlias(this.connection.driver,void 0,v.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+v.propertyPath.replace(".","_"))]))&&(s?h.related.push(m):h.related=m)})}),h})}loadForManyToMany(e,t,i){const r=e.junctionEntityMetadata,s=r.name,a=e.isOwning?r.ownerColumns:r.inverseColumns,o=e.isOwning?r.inverseColumns:r.ownerColumns,l=this.connection.createQueryBuilder(this.queryRunner);a.forEach(h=>{const f=Oe.buildAlias(this.connection.driver,void 0,h.referencedColumn.entityMetadata.name+"_"+h.referencedColumn.propertyPath.replace(".","_"));l.addSelect(s+"."+h.propertyPath,f)}),o.forEach(h=>{const f=Oe.buildAlias(this.connection.driver,void 0,h.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+h.referencedColumn.propertyPath.replace(".","_"));l.addSelect(s+"."+h.propertyPath,f)});let c="";if(a.length===1){const h=t.map(m=>a[0].referencedColumn.getEntityValue(m));h.every(m=>typeof m=="number")?c="".concat(s,".").concat(a[0].propertyPath," IN (").concat(h.join(", "),")"):(l.setParameter("values1",h),c=s+"."+a[0].propertyPath+" IN (:...values1)")}else c="("+t.map((h,f)=>a.map(m=>{const g="entity1_"+f+"_"+m.propertyName;return l.setParameter(g,m.referencedColumn.getEntityValue(h)),s+"."+m.propertyPath+" = :"+g}).join(" AND ")).map(h=>"("+h+")").join(" OR ")+")";let u="";if(i)if(o.length===1){const h=i.map(m=>o[0].referencedColumn.getEntityValue(m));h.every(m=>typeof m=="number")?u="".concat(s,".").concat(o[0].propertyPath," IN (").concat(h.join(", "),")"):(l.setParameter("values2",h),u=s+"."+o[0].propertyPath+" IN (:...values2)")}else u="("+i.map((h,f)=>o.map(m=>{const g="entity2_"+f+"_"+m.propertyName;return l.setParameter(g,m.referencedColumn.getEntityValue(h)),s+"."+m.propertyPath+" = :"+g}).join(" AND ")).map(h=>"("+h+")").join(" OR ")+")";const d=[c,u].filter(h=>h.length>0).join(" AND ");return l.from(r.target,s).where(d).getRawMany()}loadForManyToOneAndOneToOneOwner(e,t,i){const r=e.entityMetadata.targetName,s=e.joinColumns.every(l=>!!e.entityMetadata.nonVirtualColumns.find(c=>c===l));if(i&&s){let l=[];if(t.forEach(c=>{let u={};e.entityMetadata.primaryColumns.forEach(d=>{const h=d.entityMetadata.name+"_"+d.propertyPath.replace(".","_");u[h]=d.getEntityValue(c)}),i.forEach(d=>{e.joinColumns.forEach(h=>{const f=h.getEntityValue(c),m=h.referencedColumn.getEntityValue(d);if(!(f===void 0||m===void 0)&&f===m){const g=h.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+h.referencedColumn.propertyPath.replace(".","_");u[g]=m}})}),Object.keys(u).length===e.entityMetadata.primaryColumns.length+e.joinColumns.length&&l.push(u)}),l.length===t.length)return Promise.resolve(l)}const a=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(l=>{const c=Oe.buildAlias(this.connection.driver,void 0,l.entityMetadata.name+"_"+l.propertyPath.replace(".","_"));a.addSelect(r+"."+l.propertyPath,c)}),e.joinColumns.forEach(l=>{const c=Oe.buildAlias(this.connection.driver,void 0,l.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+l.referencedColumn.propertyPath.replace(".","_"));a.addSelect(r+"."+l.propertyPath,c)});let o="";if(e.entityMetadata.primaryColumns.length===1){const l=t.map(u=>e.entityMetadata.primaryColumns[0].getEntityValue(u));l.every(u=>typeof u=="number")?o="".concat(r,".").concat(e.entityMetadata.primaryColumns[0].propertyPath," IN (").concat(l.join(", "),")"):(a.setParameter("values",l),o=r+"."+e.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else o=t.map((l,c)=>e.entityMetadata.primaryColumns.map((u,d)=>{const h="entity"+c+"_"+d;return a.setParameter(h,u.getEntityValue(l)),r+"."+u.propertyPath+" = :"+h}).join(" AND ")).map(l=>"("+l+")").join(" OR ");return a.from(e.entityMetadata.target,r).where(o).getRawMany()}loadForOneToManyAndOneToOneNotOwner(e,t,i){if(e=e.inverseRelation,e.entityMetadata.primaryColumns.length===e.joinColumns.length&&e.entityMetadata.primaryColumns.every(l=>e.joinColumns.indexOf(l)!==-1))return Promise.resolve(t.map(l=>{const c={};return e.joinColumns.forEach(function(u){const d=u.referencedColumn.getEntityValue(l),h=u.referencedColumn.entityMetadata.name+"_"+u.referencedColumn.propertyPath.replace(".","_"),f=u.entityMetadata.name+"_"+e.inverseRelation.propertyPath.replace(".","_")+"_"+u.propertyPath.replace(".","_");c[h]=d,c[f]=d}),c}));const r=e.entityMetadata.targetName,s=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(o=>{const l=Oe.buildAlias(this.connection.driver,void 0,o.entityMetadata.name+"_"+e.inverseRelation.propertyPath.replace(".","_")+"_"+o.propertyPath.replace(".","_"));s.addSelect(r+"."+o.propertyPath,l)}),e.joinColumns.forEach(o=>{const l=Oe.buildAlias(this.connection.driver,void 0,o.referencedColumn.entityMetadata.name+"_"+o.referencedColumn.propertyPath.replace(".","_"));s.addSelect(r+"."+o.propertyPath,l)});let a="";if(e.joinColumns.length===1){const o=t.map(c=>e.joinColumns[0].referencedColumn.getEntityValue(c));o.every(c=>typeof c=="number")?a="".concat(r,".").concat(e.joinColumns[0].propertyPath," IN (").concat(o.join(", "),")"):(s.setParameter("values",o),a=r+"."+e.joinColumns[0].propertyPath+" IN (:...values)")}else a=t.map((o,l)=>e.joinColumns.map((c,u)=>{const d="entity"+l+"_"+u;return s.setParameter(d,c.referencedColumn.getEntityValue(o)),r+"."+c.propertyPath+" = :"+d}).join(" AND ")).map(o=>"("+o+")").join(" OR ");return s.from(e.entityMetadata.target,r).where(a).getRawMany()}}class LK{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationIdAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationIds.forEach(t=>{const i=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationIdAttributes.push(i)})})}metadataToAttribute(e,t){return new c1(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class $K{constructor(e,t,i){this.connection=e,this.queryRunner=t,this.relationCountAttributes=i}async load(e){const t=(r,s,a)=>a.indexOf(r)===s,i=this.relationCountAttributes.map(async r=>{if(r.relation.isOneToMany){const s=r.relation,a=s.inverseRelation,o=a.joinColumns[0].referencedColumn.propertyName,l=s.inverseEntityMetadata.target,c=s.inverseEntityMetadata.tableName,u=r.alias||c,d=a.propertyName;let h=e.map(m=>m[r.parentAlias+"_"+o]).filter(m=>!!m);if(h=h.filter(t),h.length===0)return{relationCountAttribute:r,results:[]};const f=this.connection.createQueryBuilder(this.queryRunner);return f.select(u+"."+d,"parentId").addSelect("COUNT(*)","cnt").from(l,u).where(u+"."+d+" IN (:...ids)").addGroupBy(u+"."+d).setParameter("ids",h),r.queryBuilderFactory&&r.queryBuilderFactory(f),{relationCountAttribute:r,results:await f.getRawMany()}}else{let s,a,o,l;r.relation.isOwning?(s=r.relation.joinColumns[0].referencedColumn.databaseName,a=r.relation.inverseJoinColumns[0].referencedColumn.databaseName,o=r.relation.junctionEntityMetadata.columns[0],l=r.relation.junctionEntityMetadata.columns[1]):(s=r.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,a=r.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,o=r.relation.junctionEntityMetadata.columns[1],l=r.relation.junctionEntityMetadata.columns[0]);let c=e.map(_=>_[r.parentAlias+"_"+s]).filter(_=>!!_);if(c=c.filter(t),c.length===0)return{relationCountAttribute:r,results:[]};const u=r.junctionAlias,d=r.joinInverseSideMetadata.tableName,h=r.alias||d,f=r.relation.junctionEntityMetadata.tableName,m=u+"."+o.propertyName+" IN ("+c.map(_=>isNaN(_)?"'"+_+"'":_)+") AND "+u+"."+l.propertyName+" = "+h+"."+a,g=this.connection.createQueryBuilder(this.queryRunner);return g.select(u+"."+o.propertyName,"parentId").addSelect("COUNT("+g.escape(h)+"."+g.escape(a)+")","cnt").from(d,h).innerJoin(f,u,m).addGroupBy(u+"."+o.propertyName),r.queryBuilderFactory&&r.queryBuilderFactory(g),{relationCountAttribute:r,results:await g.getRawMany()}}});return Promise.all(i)}}class BK{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationCountAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationCounts.forEach(t=>{const i=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationCountAttributes.push(i)})})}metadataToAttribute(e,t){return new u1(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class mA{constructor(e){ft.assign(this,e||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(e){this._metadata=e}get metadata(){if(!this._metadata)throw new J('Cannot get entity metadata for the given alias "'.concat(this.name,'"'));return this._metadata}}class d1{constructor(e){var t;this.connection=e,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.cache=!1,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],e.options.relationLoadStrategy&&(this.relationLoadStrategy=e.options.relationLoadStrategy),this.timeTravel=((t=e.options)===null||t===void 0?void 0:t.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const e=this.mainAlias.metadata.orderBy||{};return Object.keys(e).reduce((t,i)=>(t[this.mainAlias.name+"."+i]=e[i],t),{})}return this.orderBys}setMainAlias(e){return this.mainAlias=e,e}createAlias(e){let t=e.name;!t&&e.tablePath&&(t=e.tablePath),!t&&typeof e.target=="function"&&(t=e.target.name),!t&&typeof e.target=="string"&&(t=e.target);const i=new mA;return i.type=e.type,t&&(i.name=t),e.metadata&&(i.metadata=e.metadata),e.target&&!i.hasMetadata&&(i.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(i.tablePath=e.tablePath),e.subQuery&&(i.subQuery=e.subQuery),this.aliases.push(i),i}findAliasByName(e){const t=this.aliases.find(i=>i.name===e);if(!t)throw new J('"'.concat(e,'" alias was not found. Maybe you forgot to join it?'));return t}findColumnByAliasExpression(e){const[t,i]=e.split(".");return this.findAliasByName(t).metadata.findColumnWithPropertyName(i)}get relationMetadata(){if(!this.mainAlias)throw new J("Entity to work with is not specified!");const e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new J("Relation ".concat(this.relationPropertyPath," was not found in entity ").concat(this.mainAlias.name));return e}clone(){const e=new d1(this.connection);return e.queryType=this.queryType,e.selects=this.selects.map(t=>t),e.maxExecutionTime=this.maxExecutionTime,e.selectDistinct=this.selectDistinct,e.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(t=>e.aliases.push(new mA(t))),e.relationLoadStrategy=this.relationLoadStrategy,e.mainAlias=this.mainAlias,e.valuesSet=this.valuesSet,e.returning=this.returning,e.onConflict=this.onConflict,e.onIgnore=this.onIgnore,e.onUpdate=this.onUpdate,e.joinAttributes=this.joinAttributes.map(t=>new FO(this.connection,this,t)),e.relationIdAttributes=this.relationIdAttributes.map(t=>new c1(this,t)),e.relationCountAttributes=this.relationCountAttributes.map(t=>new u1(this,t)),e.wheres=this.wheres.map(t=>({...t})),e.havings=this.havings.map(t=>({...t})),e.orderBys=Object.assign({},this.orderBys),e.groupBys=this.groupBys.map(t=>t),e.limit=this.limit,e.offset=this.offset,e.skip=this.skip,e.take=this.take,e.lockMode=this.lockMode,e.onLocked=this.onLocked,e.lockVersion=this.lockVersion,e.lockTables=this.lockTables,e.withDeleted=this.withDeleted,e.parameters=Object.assign({},this.parameters),e.disableEscaping=this.disableEscaping,e.enableRelationIdValues=this.enableRelationIdValues,e.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,e.subQuery=this.subQuery,e.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,e.cache=this.cache,e.cacheId=this.cacheId,e.cacheDuration=this.cacheDuration,e.relationPropertyPath=this.relationPropertyPath,e.of=this.of,e.insertColumns=this.insertColumns,e.whereEntities=this.whereEntities,e.updateEntity=this.updateEntity,e.callListeners=this.callListeners,e.useTransaction=this.useTransaction,e.timeTravel=this.timeTravel,e.nativeParameters=Object.assign({},this.nativeParameters),e.comment=this.comment,e.commonTableExpressions=this.commonTableExpressions.map(t=>({alias:t.alias,queryBuilder:typeof t.queryBuilder=="string"?t.queryBuilder:t.queryBuilder.clone(),options:t.options})),e}}class Jf{constructor(e,t,i=!0,r=!1,s,a){this["@instanceof"]=Symbol.for("FindOperator"),this._type=e,this._value=t,this._useParameter=i,this._multipleParameters=r,this._getSql=s,this._objectLiteralParameters=a}get useParameter(){return se.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return se.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return se.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return se.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(se.isFindOperator(this._value))return this._value}get getSql(){return se.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(e){this._value instanceof Jf?this._value.transformValue(e):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(t=>e&&$n.transformTo(e,t)):$n.transformTo(e,this._value)}}function FK(n){return new Jf("in",n,!0,!0)}const qK=/[.*+\-?^${}()|[\]\\]/g,UK=n=>n.replace(qK,"\\$&");class jK{constructor(e,t){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,se.isDataSource(e)?(this.connection=e,this.queryRunner=t,this.expressionMap=new d1(this.connection)):(this.connection=e.connection,this.queryRunner=e.queryRunner,this.expressionMap=e.expressionMap.clone())}get alias(){if(!this.expressionMap.mainAlias)throw new J("Main alias is not set");return this.expressionMap.mainAlias.name}select(e,t){this.expressionMap.queryType="select",Array.isArray(e)?this.expressionMap.selects=e.map(r=>({selection:r})):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);const i=require("./SelectQueryBuilder").SelectQueryBuilder;return se.isSelectQueryBuilder(this)?this:new i(this)}insert(){this.expressionMap.queryType="insert";const e=require("./InsertQueryBuilder").InsertQueryBuilder;return se.isInsertQueryBuilder(this)?this:new e(this)}update(e,t){const i=t||e;if(e=se.isEntitySchema(e)?e.options.name:e,typeof e=="function"||typeof e=="string"){const s=this.createFromAlias(e);this.expressionMap.setMainAlias(s)}this.expressionMap.queryType="update",this.expressionMap.valuesSet=i;const r=require("./UpdateQueryBuilder").UpdateQueryBuilder;return se.isUpdateQueryBuilder(this)?this:new r(this)}delete(){this.expressionMap.queryType="delete";const e=require("./DeleteQueryBuilder").DeleteQueryBuilder;return se.isDeleteQueryBuilder(this)?this:new e(this)}softDelete(){this.expressionMap.queryType="soft-delete";const e=require("./SoftDeleteQueryBuilder").SoftDeleteQueryBuilder;return se.isSoftDeleteQueryBuilder(this)?this:new e(this)}restore(){this.expressionMap.queryType="restore";const e=require("./SoftDeleteQueryBuilder").SoftDeleteQueryBuilder;return se.isSoftDeleteQueryBuilder(this)?this:new e(this)}relation(e,t){const i=arguments.length===2?e:void 0,r=arguments.length===2?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=r,i){const a=this.createFromAlias(i);this.expressionMap.setMainAlias(a)}const s=require("./RelationQueryBuilder").RelationQueryBuilder;return se.isRelationQueryBuilder(this)?this:new s(this)}hasRelation(e,t){const i=this.connection.getMetadata(e);return(Array.isArray(t)?t:[t]).every(s=>!!i.findRelationWithPropertyPath(s))}hasParameter(e){var t;return((t=this.parentQueryBuilder)===null||t===void 0?void 0:t.hasParameter(e))||e in this.expressionMap.parameters}setParameter(e,t){if(typeof t=="function")throw new J("Function parameter isn't supported in the parameters. Please check \"".concat(e,'" parameter.'));if(!e.match(/^([A-Za-z0-9_.]+)$/))throw new J("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(e,t),this.expressionMap.parameters[e]=t,this}setParameters(e){for(const[t,i]of Object.entries(e))this.setParameter(t,i);return this}createParameter(e){let t;do t="orm_param_".concat(this.parameterIndex++);while(this.hasParameter(t));return this.setParameter(t,e),":".concat(t)}setNativeParameters(e){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(e),Object.keys(e).forEach(t=>{this.expressionMap.nativeParameters[t]=e[t]}),this}getParameters(){const e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){const i=t.childEntityMetadatas.filter(r=>r.discriminatorColumn).map(r=>r.discriminatorValue);i.push(t.discriminatorValue),e.discriminatorColumnValues=i}}return e}printSql(){const[e,t]=this.getQueryAndParameters();return this.connection.logger.logQuery(e,t),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const e=this.getQuery(),t=this.getParameters();return this.connection.driver.escapeQueryWithParameters(e,t,this.expressionMap.nativeParameters)}async execute(){const[e,t]=this.getQueryAndParameters(),i=this.obtainQueryRunner();try{return await i.query(e,t)}finally{i!==this.queryRunner&&await i.release()}}createQueryBuilder(){return new this.constructor(this.connection,this.queryRunner)}clone(){return new this.constructor(this)}comment(e){return this.expressionMap.comment=e,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e}setQueryRunner(e){return this.queryRunner=e,this}callListeners(e){return this.expressionMap.callListeners=e,this}useTransaction(e){return this.expressionMap.useTransaction=e,this}addCommonTableExpression(e,t,i){return this.expressionMap.commonTableExpressions.push({queryBuilder:e,alias:t,options:i||{}}),this}getTableName(e){return e.split(".").map(t=>t===""?t:this.escape(t)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new J('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(e,t){if(this.connection.hasMetadata(e)){const i=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:i.tablePath})}else{if(typeof e=="string"){const s=e.substr(0,1)==="("&&e.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:t,tablePath:s?void 0:e,subQuery:s?e:void 0})}const i=e(this.subQuery());this.setParameters(i.getParameters());const r=i.getQuery();return this.expressionMap.createAlias({type:"from",name:t,subQuery:r})}}replacePropertyNames(e){return e}replacePropertyNamesForTheWholeQuery(e){const t={};for(const s of this.expressionMap.aliases){if(!s.hasMetadata)continue;const a=this.expressionMap.aliasNamePrefixingEnabled&&s.name?"".concat(s.name,"."):"";t[a]||(t[a]={});for(const o of s.metadata.relations)o.joinColumns.length>0&&(t[a][o.propertyPath]=o.joinColumns[0].databaseName);for(const o of s.metadata.relations){const l=[...o.joinColumns,...o.inverseJoinColumns];for(const c of l){const u="".concat(o.propertyPath,".").concat(c.referencedColumn.propertyPath);t[a][u]=c.databaseName}}for(const o of s.metadata.columns)t[a][o.databaseName]=o.databaseName;for(const o of s.metadata.columns)t[a][o.propertyName]=o.databaseName;for(const o of s.metadata.columns)t[a][o.propertyPath]=o.databaseName}const i=Object.keys(t),r=i.map(s=>UK(s)).join("|");return i.length>0&&(e=e.replace(new RegExp("([ =(]|^.{0})"+"".concat(r?"("+r+")":"","([^ =(),]+)")+"(?=[ =),]|.{0}$)","gm"),(...s)=>{let a,o,l;if(r){if(a=s[0],o=s[1],l=s[3],t[s[2]][l])return"".concat(o).concat(this.escape(s[2].substring(0,s[2].length-1)),".").concat(this.escape(t[s[2]][l]))}else if(a=s[0],o=s[1],l=s[2],t[""][l])return"".concat(o).concat(this.escape(t[""][l]));return a})),e}createComment(){return this.expressionMap.comment?"/* ".concat(this.expressionMap.comment.replace("*/","")," */ "):""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?" AS OF SYSTEM TIME ".concat(this.expressionMap.timeTravel):""}createWhereExpression(){const e=[],t=this.createWhereClausesExpression(this.expressionMap.wheres);if(t.length>0&&t!=="1=1"&&e.push(this.replacePropertyNames(t)),this.expressionMap.mainAlias.hasMetadata){const r=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&r.deleteDateColumn){const s=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+r.deleteDateColumn.propertyName:r.deleteDateColumn.propertyName,a="".concat(this.replacePropertyNames(s)," IS NULL");e.push(a)}if(r.discriminatorColumn&&r.parentEntityMetadata){const s=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+r.discriminatorColumn.databaseName:r.discriminatorColumn.databaseName,a="".concat(this.replacePropertyNames(s)," IN (:...discriminatorColumnValues)");e.push(a)}}if(this.expressionMap.extraAppendedAndWhereCondition){const r=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);e.push(r)}let i="";return i+=this.createTimeTravelQuery(),e.length?e.length===1?i+=" WHERE ".concat(e[0]):i+=" WHERE ( ".concat(e.join(" ) AND ( ")," )"):i+="",i}createReturningExpression(e){const t=this.getReturningColumns(),i=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&i.isReturningSqlSupported(e)&&t.push(...this.expressionMap.extraReturningColumns.filter(r=>t.indexOf(r)===-1)),t.length){let r=t.map(s=>{const a=this.escape(s.databaseName);return i.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+a:this.escape(this.getMainTableName())+"."+a:a}).join(", ");return i.options.type==="oracle"&&(r+=" INTO "+t.map(s=>this.createParameter({type:i.columnTypeToNativeParameter(s.type),dir:i.oracle.BIND_OUT})).join(", ")),i.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(r+=" INTO @OutputTable"),r}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const e=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(t=>{this.expressionMap.mainAlias.hasMetadata&&e.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(t))}),e}createWhereClausesExpression(e){return e.map((t,i)=>{const r=this.createWhereConditionExpression(t.condition);switch(t.type){case"and":return(i>0?"AND ":"")+r;case"or":return(i>0?"OR ":"")+r}return r}).join(" ").trim()}createWhereConditionExpression(e,t=!1){if(typeof e=="string")return e;if(Array.isArray(e))return e.length===0?"1=1":e.length===1&&!t?this.createWhereClausesExpression(e):"("+this.createWhereClausesExpression(e)+")";const{driver:i}=this.connection;switch(e.operator){case"lessThan":return"".concat(e.parameters[0]," < ").concat(e.parameters[1]);case"lessThanOrEqual":return"".concat(e.parameters[0]," <= ").concat(e.parameters[1]);case"arrayContains":return"".concat(e.parameters[0]," @> ").concat(e.parameters[1]);case"jsonContains":return"".concat(e.parameters[0]," ::jsonb @> ").concat(e.parameters[1]);case"arrayContainedBy":return"".concat(e.parameters[0]," <@ ").concat(e.parameters[1]);case"arrayOverlap":return"".concat(e.parameters[0]," && ").concat(e.parameters[1]);case"moreThan":return"".concat(e.parameters[0]," > ").concat(e.parameters[1]);case"moreThanOrEqual":return"".concat(e.parameters[0]," >= ").concat(e.parameters[1]);case"notEqual":return"".concat(e.parameters[0]," != ").concat(e.parameters[1]);case"equal":return"".concat(e.parameters[0]," = ").concat(e.parameters[1]);case"ilike":return i.options.type==="postgres"||i.options.type==="cockroachdb"?"".concat(e.parameters[0]," ILIKE ").concat(e.parameters[1]):"UPPER(".concat(e.parameters[0],") LIKE UPPER(").concat(e.parameters[1],")");case"like":return"".concat(e.parameters[0]," LIKE ").concat(e.parameters[1]);case"between":return"".concat(e.parameters[0]," BETWEEN ").concat(e.parameters[1]," AND ").concat(e.parameters[2]);case"in":return e.parameters.length<=1?"0=1":"".concat(e.parameters[0]," IN (").concat(e.parameters.slice(1).join(", "),")");case"any":return i.options.type==="cockroachdb"?"".concat(e.parameters[0],"::STRING = ANY(").concat(e.parameters[1],"::STRING[])"):"".concat(e.parameters[0]," = ANY(").concat(e.parameters[1],")");case"isNull":return"".concat(e.parameters[0]," IS NULL");case"not":return"NOT(".concat(this.createWhereConditionExpression(e.condition),")");case"brackets":return"".concat(this.createWhereConditionExpression(e.condition,!0));case"and":return e.parameters.join(" AND ")}throw new TypeError("Unsupported FindOperator ".concat(Jf.constructor.name))}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const e=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(i=>{const r=typeof i.queryBuilder=="string"?i.queryBuilder:i.queryBuilder.getQuery();if(typeof i.queryBuilder!="string"){if(i.queryBuilder.hasCommonTableExpressions())throw new J("Nested CTEs aren't supported (CTE: ".concat(i.alias,")"));if(!this.connection.driver.cteCapabilities.writable&&!se.isSelectQueryBuilder(i.queryBuilder))throw new J("Only select queries are supported in CTEs in ".concat(this.connection.options.type," (CTE: ").concat(i.alias,")"));this.setParameters(i.queryBuilder.getParameters())}let s=this.escape(i.alias);if(i.options.columnNames){const l=i.options.columnNames.map(c=>this.escape(c));if(se.isSelectQueryBuilder(i.queryBuilder)&&i.queryBuilder.expressionMap.selects.length&&i.options.columnNames.length!==i.queryBuilder.expressionMap.selects.length)throw new J("cte.options.columnNames length (".concat(i.options.columnNames.length,") doesn't match subquery select list length ").concat(i.queryBuilder.expressionMap.selects.length," (CTE: ").concat(i.alias,")"));s+="(".concat(l.join(", "),")")}const a=i.options.recursive&&e?"RECURSIVE":"";let o="";return this.connection.driver.cteCapabilities.materializedHint&&i.options.materialized!==void 0&&(o=i.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,s,"AS",o,"(".concat(r,")")].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(e){const t=this.expressionMap.mainAlias.metadata,i=(Array.isArray(e)?e:[e]).map(r=>t.ensureEntityIdMap(r));if(!t.hasMultiplePrimaryKeys){const r=t.primaryColumns[0];if(!r.transformer&&!r.relationMetadata&&!r.embeddedMetadata)return{[r.propertyName]:FK(i.map(s=>r.getEntityValue(s,!1)))}}return new Hg(r=>{for(const s of i)r.orWhere(new Hg(a=>a.where(s)))})}getExistsCondition(e){const t=e.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return["EXISTS (".concat(t.getQuery(),")"),t.getParameters()]}findColumnsForPropertyPath(e){let t=this.expressionMap.mainAlias;const i=[],r=e.split(".");for(;r.length>1;){const o=r[0];if(!(t!=null&&t.hasMetadata))break;if(t.metadata.hasEmbeddedWithPropertyPath(o)){r.unshift("".concat(r.shift(),".").concat(r.shift()));continue}if(t.metadata.hasRelationWithPropertyPath(o)){const l=this.expressionMap.joinAttributes.find(c=>c.relationPropertyPath===o);if(!(l!=null&&l.alias)){const c=i.length>0?"".concat(i.join("."),".").concat(o):o;throw new Error("Cannot find alias for relation at ".concat(c))}t=l.alias,i.push(...o.split(".")),r.shift();continue}break}if(!t)throw new Error("Cannot find alias for property ".concat(e));const s=r.join("."),a=t.metadata.findColumnsWithPropertyPath(s);if(!a.length)throw new Qs(e,t.metadata);return[t,i,a]}createPropertyPath(e,t,i=""){const r=[];for(const s of Object.keys(t)){const a=i?"".concat(i,".").concat(s):s;if(t[s]===null||typeof t[s]!="object"||se.isFindOperator(t[s])){r.push(a);continue}if(e.hasEmbeddedWithPropertyPath(a)){const o=this.createPropertyPath(e,t[s],a);r.push(...o);continue}if(e.hasRelationWithPropertyPath(a)){const o=e.findRelationWithPropertyPath(a);if(o.relationType==="one-to-one"||o.relationType==="many-to-one"){const d=o.joinColumns.map(f=>f.referencedColumn).filter(f=>!!f);if(d.length>0&&d.every(f=>f.getEntityValue(t[s],!1))){r.push(a);continue}}if(o.relationType==="one-to-many"||o.relationType==="many-to-many")throw new Error("Cannot query across ".concat(o.relationType," for property ").concat(a));const l=o.inverseEntityMetadata.primaryColumns;if(l.length>0&&l.every(d=>d.getEntityValue(t[s],!1))){const d=l.map(h=>"".concat(a,".").concat(h.propertyPath));r.push(...d);continue}const u=this.createPropertyPath(o.inverseEntityMetadata,t[s]).map(d=>"".concat(a,".").concat(d));r.push(...u);continue}r.push(a)}return r}*getPredicates(e){if(this.expressionMap.mainAlias.hasMetadata){const t=this.createPropertyPath(this.expressionMap.mainAlias.metadata,e);for(const i of t){const[r,s,a]=this.findColumnsForPropertyPath(i);for(const o of a){let l=e;for(const d of s){if(!l||!(d in l)){l={};break}l=l[d]}const c=this.expressionMap.aliasNamePrefixingEnabled?"".concat(r.name,".").concat(o.propertyPath):o.propertyPath,u=o.getEntityValue(l,!0);yield[c,u]}}}else for(const t of Object.keys(e)){const i=e[t];yield[this.expressionMap.aliasNamePrefixingEnabled?"".concat(this.alias,".").concat(t):t,i]}}getWherePredicateCondition(e,t){if(se.isFindOperator(t)){let i=[];if(t.useParameter)if(t.objectLiteralParameters)this.setParameters(t.objectLiteralParameters);else if(t.multipleParameters)for(const r of t.value)i.push(this.createParameter(r));else i.push(this.createParameter(t.value));if(t.type==="raw")return t.getSql?t.getSql(e):{operator:"equal",parameters:[e,t.value]};if(t.type==="not")return t.child?{operator:t.type,condition:this.getWherePredicateCondition(e,t.child)}:{operator:"notEqual",parameters:[e,...i]};if(t.type==="and"){const r=t.value;return{operator:t.type,parameters:r.map(s=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,s)))}}else return{operator:t.type,parameters:[e,...i]}}else return{operator:"equal",parameters:[e,this.createParameter(t)]}}getWhereCondition(e){if(typeof e=="string")return e;if(se.isBrackets(e)){const r=this.createQueryBuilder();return r.parentQueryBuilder=this,r.expressionMap.mainAlias=this.expressionMap.mainAlias,r.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,r.expressionMap.parameters=this.expressionMap.parameters,r.expressionMap.nativeParameters=this.expressionMap.nativeParameters,r.expressionMap.wheres=[],e.whereFactory(r),{operator:se.isNotBrackets(e)?"not":"brackets",condition:r.expressionMap.wheres}}if(typeof e=="function")return e(this);const t=Array.isArray(e)?e:[e],i=[];for(const r of t){const s=[];for(const[a,o]of this.getPredicates(r))s.push({type:"and",condition:this.getWherePredicateCondition(a,o)});i.push({type:"or",condition:s})}return i.length===1?i[0].condition:i}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}class Gg extends jK{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createSelectExpression(),e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),this.replacePropertyNamesForTheWholeQuery(e)}setFindOptions(e){return this.findOptions=e,this.applyFindOptions(),this}subQuery(){const e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.parentQueryBuilder=this,e}select(e,t){if(this.expressionMap.queryType="select",Array.isArray(e))this.expressionMap.selects=e.map(i=>({selection:i}));else if(typeof e=="function"){const i=e(this.subQuery());this.setParameters(i.getParameters()),this.expressionMap.selects.push({selection:i.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this}addSelect(e,t){if(!e)return this;if(Array.isArray(e))this.expressionMap.selects=this.expressionMap.selects.concat(e.map(i=>({selection:i})));else if(typeof e=="function"){const i=e(this.subQuery());this.setParameters(i.getParameters()),this.expressionMap.selects.push({selection:i.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this}maxExecutionTime(e){return this.expressionMap.maxExecutionTime=e,this}distinct(e=!0){return this.expressionMap.selectDistinct=e,this}distinctOn(e){return this.expressionMap.selectDistinctOn=e,this}fromDummy(){var e;return this.from((e=this.connection.driver.dummyTableName)!==null&&e!==void 0?e:"(SELECT 1 AS dummy_column)","dummy_table")}from(e,t){const i=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(i),this}addFrom(e,t){const i=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(i),this}innerJoin(e,t,i,r){return this.join("INNER",e,t,i,r),this}leftJoin(e,t,i,r){return this.join("LEFT",e,t,i,r),this}innerJoinAndSelect(e,t,i,r){return this.addSelect(t),this.innerJoin(e,t,i,r),this}leftJoinAndSelect(e,t,i,r){return this.addSelect(t),this.leftJoin(e,t,i,r),this}innerJoinAndMapMany(e,t,i,r,s){return this.addSelect(i),this.join("INNER",t,i,r,s,e,!0),this}innerJoinAndMapOne(e,t,i,r,s,a){return this.addSelect(i),this.join("INNER",t,i,r,s,e,!1,a),this}leftJoinAndMapMany(e,t,i,r,s){return this.addSelect(i),this.join("LEFT",t,i,r,s,e,!0),this}leftJoinAndMapOne(e,t,i,r,s,a){return this.addSelect(i),this.join("LEFT",t,i,r,s,e,!1,a),this}loadRelationIdAndMap(e,t,i,r){const s=new c1(this.expressionMap);return s.mapToProperty=e,s.relationName=t,typeof i=="string"&&(s.alias=i),typeof i=="object"&&i.disableMixedMap&&(s.disableMixedMap=!0),s.queryBuilderFactory=r,this.expressionMap.relationIdAttributes.push(s),s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(e,t,i,r){const s=new u1(this.expressionMap);return s.mapToProperty=e,s.relationName=t,s.alias=i,s.queryBuilderFactory=r,this.expressionMap.relationCountAttributes.push(s),this.expressionMap.createAlias({type:"other",name:s.junctionAlias}),s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata}),this}loadAllRelationIds(e){return this.expressionMap.mainAlias.metadata.relations.forEach(t=>{e!==void 0&&e.relations!==void 0&&e.relations.indexOf(t.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+t.propertyPath,this.expressionMap.mainAlias.name+"."+t.propertyPath,e)}),this}where(e,t){this.expressionMap.wheres=[];const i=this.getWhereCondition(e);return i&&(this.expressionMap.wheres=[{type:"simple",condition:i}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereExists(e){return this.where(...this.getExistsCondition(e))}andWhereExists(e){return this.andWhere(...this.getExistsCondition(e))}orWhereExists(e){return this.orWhere(...this.getExistsCondition(e))}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}having(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this}andHaving(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this}orHaving(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this}groupBy(e){return e?this.expressionMap.groupBys=[e]:this.expressionMap.groupBys=[],this}addGroupBy(e){return this.expressionMap.groupBys.push(e),this}timeTravelQuery(e){return this.connection.driver.options.type==="cockroachdb"&&(e===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=e),this}orderBy(e,t="ASC",i){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new J('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(i!==void 0&&i!=="NULLS FIRST"&&i!=="NULLS LAST")throw new J('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return e?typeof e=="object"?this.expressionMap.orderBys=e:i?this.expressionMap.orderBys={[e]:{order:t,nulls:i}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",i){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new J('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(i!==void 0&&i!=="NULLS FIRST"&&i!=="NULLS LAST")throw new J('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return i?this.expressionMap.orderBys[e]={order:t,nulls:i}:this.expressionMap.orderBys[e]=t,this}limit(e){if(this.expressionMap.limit=this.normalizeNumber(e),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new J('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(e){if(this.expressionMap.offset=this.normalizeNumber(e),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new J('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(e){if(this.expressionMap.take=this.normalizeNumber(e),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new J('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(e){if(this.expressionMap.skip=this.normalizeNumber(e),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new J('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(e){return this.expressionMap.useIndex=e,this}setLock(e,t,i){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this.expressionMap.lockTables=i,this}setOnLocked(e){return this.expressionMap.onLocked=e,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new Jd;this.expressionMap.queryEntity=!1;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0);const i=await this.loadRawResults(e);return t&&await e.commitTransaction(),i}catch(i){if(t)try{await e.rollbackTransaction()}catch(r){}throw i}finally{e!==this.queryRunner&&await e.release()}}async getRawAndEntities(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const i=await this.executeEntitiesAndRawResults(e);return t&&await e.commitTransaction(),i}catch(i){if(t)try{await e.rollbackTransaction()}catch(r){}throw i}finally{e!==this.queryRunner&&await e.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const i=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const r=i.updateDateColumn.getEntityValue(t);if(r.getTime()!==this.expressionMap.lockVersion.getTime())throw new Z2(i.name,this.expressionMap.lockVersion,r)}else{const r=i.versionColumn.getEntityValue(t);if(r!==this.expressionMap.lockVersion)throw new Z2(i.name,this.expressionMap.lockVersion,r)}}return t===void 0?null:t}async getOneOrFail(){const e=await this.getOne();if(!e)throw new Ox(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return e}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new Jd;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new Jd;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const i=await this.executeCountQuery(e);return t&&await e.commitTransaction(),i}catch(i){if(t)try{await e.rollbackTransaction()}catch(r){}throw i}finally{e!==this.queryRunner&&await e.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new Jd;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const i=await this.executeExistsQuery(e);return t&&await e.commitTransaction(),i}catch(i){if(t)try{await e.rollbackTransaction()}catch(r){}throw i}finally{e!==this.queryRunner&&await e.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new Jd;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const i=await this.executeEntitiesAndRawResults(e);this.expressionMap.queryEntity=!1;const r=this.expressionMap.cacheId;this.expressionMap.cacheId=r&&"".concat(r,"-count");const s=await this.executeCountQuery(e),a=[i.entities,s];return t&&await e.commitTransaction(),a}catch(i){if(t)try{await e.rollbackTransaction()}catch(r){}throw i}finally{e!==this.queryRunner&&await e.release()}}async stream(){this.expressionMap.queryEntity=!1;const[e,t]=this.getQueryAndParameters(),i=this.obtainQueryRunner();let r=!1;try{this.expressionMap.useTransaction===!0&&i.isTransactionActive===!1&&(await i.startTransaction(),r=!0);const s=()=>{if(i!==this.queryRunner)return i.release()},a=i.stream(e,t,s,s);return r&&await i.commitTransaction(),a}catch(s){if(r)try{await i.rollbackTransaction()}catch(a){}throw s}}cache(e,t){return typeof e=="boolean"?this.expressionMap.cache=e:typeof e=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):(typeof e=="string"||typeof e=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this}setOption(e){return this.expressionMap.options.push(e),this}join(e,t,i,r,s,a,o,l){s&&this.setParameters(s);const c=new FO(this.connection,this.expressionMap);c.direction=e,c.mapAsEntity=l,c.mapToProperty=a,c.isMappingMany=o,c.entityOrProperty=t,c.condition=r,this.expressionMap.joinAttributes.push(c);const u=c.metadata;if(u){if(u.deleteDateColumn&&!this.expressionMap.withDeleted){const d="".concat(i,".").concat(u.deleteDateColumn.propertyName," IS NULL");c.condition=c.condition?" ".concat(c.condition," AND ").concat(d):"".concat(d)}c.alias=this.expressionMap.createAlias({type:"join",name:i,metadata:u}),c.relation&&c.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:c.junctionAlias,metadata:c.relation.junctionEntityMetadata})}else{let d="";if(typeof t=="function"){const f=t(this.subQuery());this.setParameters(f.getParameters()),d=f.getQuery()}else d=t;const h=typeof t=="function"||t.substr(0,1)==="("&&t.substr(-1)===")";c.alias=this.expressionMap.createAlias({type:"join",name:i,tablePath:h===!1?t:void 0,subQuery:h===!0?d:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new J("Cannot build query because main alias is not set (call qb#from method)");const e=[],t=[];if(this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;e.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,o)),t.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,o))}this.expressionMap.joinAttributes.forEach(o=>{if(o.metadata)e.push(...this.buildEscapedEntityColumnSelects(o.alias.name,o.metadata)),t.push(...this.findEntityColumnSelects(o.alias.name,o.metadata));else if(this.expressionMap.selects.some(c=>c.selection===o.alias.name)){e.push({selection:this.escape(o.alias.name)+".*"});const c=this.expressionMap.selects.find(u=>u.selection===o.alias.name);t.push(c)}}),this.expressionMap.selects.filter(o=>t.indexOf(o)===-1).forEach(o=>e.push({selection:this.replacePropertyNames(o.selection),aliasName:o.aliasName})),e.length===0&&e.push({selection:"*"});let i="";this.expressionMap.useIndex&&Oe.isMySQLFamily(this.connection.driver)&&(i=" USE INDEX (".concat(this.expressionMap.useIndex,")"));const r=this.expressionMap.aliases.filter(o=>o.type==="from"&&(o.tablePath||o.subQuery)).map(o=>o.subQuery?o.subQuery+" "+this.escape(o.name):this.getTableName(o.tablePath)+" "+this.escape(o.name)),s=this.createSelectDistinctExpression(),a=e.map(o=>o.selection+(o.aliasName?" AS "+this.escape(o.aliasName):"")).join(", ");return s+a+" FROM "+r.join(", ")+this.createTableLockExpression()+i}createSelectDistinctExpression(){const{selectDistinct:e,selectDistinctOn:t,maxExecutionTime:i}=this.expressionMap,{driver:r}=this.connection;let s="SELECT ";if(i>0&&Oe.isMySQLFamily(r)&&(s+="/*+ MAX_EXECUTION_TIME(".concat(this.expressionMap.maxExecutionTime,") */ ")),Oe.isPostgresFamily(r)&&t.length>0){const a=t.map(o=>this.replacePropertyNames(o)).join(", ");s="SELECT DISTINCT ON (".concat(a,") ")}else e&&(s="SELECT DISTINCT ");return s}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const i=t.relation,r=t.tablePath,s=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const o=t.parentAlias;if(!o||!i){const l=t.alias.subQuery?t.alias.subQuery:this.getTableName(r);return" "+t.direction+" JOIN "+l+" "+this.escape(s)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(i.isManyToOne||i.isOneToOneOwner){const l=i.joinColumns.map(c=>s+"."+c.referencedColumn.propertyPath+"="+o+"."+i.propertyPath+"."+c.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l+a)}else if(i.isOneToMany||i.isOneToOneNotOwner){const l=i.inverseRelation.joinColumns.map(c=>(i.inverseEntityMetadata.tableType==="entity-child"&&i.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+s+"."+i.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+i.inverseEntityMetadata.discriminatorValue+"'"),s+"."+i.inverseRelation.propertyPath+"."+c.referencedColumn.propertyPath+"="+o+"."+c.referencedColumn.propertyPath)).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l+a)}else{const l=i.junctionEntityMetadata.tablePath,c=t.junctionAlias;let u="",d="";return i.isOwning?(u=i.joinColumns.map(h=>c+"."+h.propertyPath+"="+o+"."+h.referencedColumn.propertyPath).join(" AND "),d=i.inverseJoinColumns.map(h=>s+"."+h.referencedColumn.propertyPath+"="+c+"."+h.propertyPath).join(" AND ")):(u=i.inverseRelation.inverseJoinColumns.map(h=>c+"."+h.propertyPath+"="+o+"."+h.referencedColumn.propertyPath).join(" AND "),d=i.inverseRelation.joinColumns.map(h=>s+"."+h.referencedColumn.propertyPath+"="+c+"."+h.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(l)+" "+this.escape(c)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(u)+" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(d+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const e=this.expressionMap.allOrderBys;return Object.keys(e).length===0?"":" ORDER BY "+Object.keys(e).map(t=>{const i=typeof e[t]=="string"?e[t]:e[t].order+" "+e[t].nulls,r=this.expressionMap.selects.find(s=>s.selection===t);if(r&&!r.aliasName&&t.indexOf(".")!==-1){const s=t.split("."),a=s[0],o=s.slice(1).join("."),l=this.expressionMap.aliases.find(c=>c.name===a);if(l){const c=l.metadata.findColumnWithPropertyPath(o);if(c){const u=Oe.buildAlias(this.connection.driver,void 0,a,c.databaseName);return this.escape(u)+" "+i}}}return this.replacePropertyNames(t)+" "+i}).join(", ")}createLimitOffsetExpression(){let e=this.expressionMap.offset,t=this.expressionMap.limit;if(!e&&!t&&this.expressionMap.joinAttributes.length===0&&(e=this.expressionMap.skip,t=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let i="";if((t||e)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(i=" ORDER BY (SELECT NULL)"),t&&e)return i+" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return i+" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(e)return i+" OFFSET "+e+" ROWS"}else if(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)throw new dQ}else if(Oe.isSQLiteFamily(this.connection.driver)){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" LIMIT -1 OFFSET "+e}else if(this.connection.driver.options.type==="oracle"){if(t&&e)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return" FETCH NEXT "+t+" ROWS ONLY";if(e)return" OFFSET "+e+" ROWS"}else{if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" OFFSET "+e}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const e=this.connection.driver;let t="";if(this.expressionMap.lockTables){if(!(Oe.isPostgresFamily(e)||e.options.type==="cockroachdb"))throw new J("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new J("lockTables cannot be an empty array");t=" OF "+this.expressionMap.lockTables.join(", ")}let i="";switch(this.expressionMap.onLocked==="nowait"?i=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(i=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(e.options.type==="mysql"||e.options.type==="aurora-mysql")return Oe.isReleaseVersionOrGreater(e,"8.0.0")?" FOR SHARE"+t+i:" LOCK IN SHARE MODE";if(e.options.type==="mariadb")return" LOCK IN SHARE MODE";if(Oe.isPostgresFamily(e))return" FOR SHARE"+t+i;if(e.options.type==="oracle")return" FOR UPDATE";if(e.options.type==="mssql")return"";throw new Oc;case"pessimistic_write":if(Oe.isMySQLFamily(e)||e.options.type==="aurora-mysql"||e.options.type==="oracle")return" FOR UPDATE"+i;if(Oe.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+i;if(e.options.type==="mssql")return"";throw new Oc;case"pessimistic_partial_write":if(Oe.isPostgresFamily(e))return" FOR UPDATE"+t+" SKIP LOCKED";if(Oe.isMySQLFamily(e))return" FOR UPDATE SKIP LOCKED";throw new Oc;case"pessimistic_write_or_fail":if(Oe.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+" NOWAIT";if(Oe.isMySQLFamily(e))return" FOR UPDATE NOWAIT";throw new Oc;case"for_no_key_update":if(Oe.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+t+i;throw new Oc;case"for_key_share":if(Oe.isPostgresFamily(e))return" FOR KEY SHARE"+t+i;throw new Oc;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const e=this.expressionMap.havings.map((t,i)=>{switch(t.type){case"and":return(i>0?"AND ":"")+this.replacePropertyNames(t.condition);case"or":return(i>0?"OR ":"")+this.replacePropertyNames(t.condition);default:return this.replacePropertyNames(t.condition)}}).join(" ");return e.length?" HAVING "+e:""}buildEscapedEntityColumnSelects(e,t){const i=this.expressionMap.selects.some(c=>c.selection===e),r=[];if(i&&r.push(...t.columns.filter(c=>c.isSelect===!0)),r.push(...t.columns.filter(c=>this.expressionMap.selects.some(u=>u.selection===e+"."+c.propertyPath))),r.length===0)return[];const s=this.expressionMap.queryEntity?t.primaryColumns.filter(c=>r.indexOf(c)===-1):[],a=[...r,...s],o=[],l=this.escape(e);return a.forEach(c=>{let u=l+"."+this.escape(c.databaseName);if(c.isVirtualProperty&&c.query&&(u="(".concat(c.query(l),")")),this.connection.driver.spatialTypes.indexOf(c.type)!==-1){if(Oe.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"){const f=this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText";u="".concat(f,"(").concat(u,")")}Oe.isPostgresFamily(this.connection.driver)&&(c.precision?u="ST_AsGeoJSON(".concat(u,", ").concat(c.precision,")::json"):u="ST_AsGeoJSON(".concat(u,")::json")),this.connection.driver.options.type==="mssql"&&(u="".concat(u,".ToString()"))}const d=this.expressionMap.selects.filter(h=>h.selection===e+"."+c.propertyPath);d.length?d.forEach(h=>{o.push({selection:u,aliasName:h.aliasName?h.aliasName:Oe.buildAlias(this.connection.driver,void 0,e,c.databaseName),virtual:h.virtual})}):o.push({selection:u,aliasName:Oe.buildAlias(this.connection.driver,void 0,e,c.databaseName),virtual:i})}),o}findEntityColumnSelects(e,t){const i=this.expressionMap.selects.find(r=>r.selection===e);return i?[i]:this.expressionMap.selects.filter(r=>t.columns.some(s=>r.selection===e+"."+s.propertyPath))}computeCountExpression(){const e=this.expressionMap.mainAlias.name,i=this.expressionMap.mainAlias.metadata.primaryColumns,r=this.escape(e);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||Oe.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+i.map(s=>"".concat(r,".").concat(this.escape(s.databaseName))).join(", ")+"))";if(Oe.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+i.map(s=>"".concat(r,".").concat(this.escape(s.databaseName))).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const s=i.map(a=>"".concat(r,".").concat(this.escape(a.databaseName))).join(", '|;|', ");return i.length===1?"COUNT(DISTINCT(".concat(s,"))"):"COUNT(DISTINCT(CONCAT(".concat(s,")))")}if(this.connection.driver.options.type==="spanner"){if(i.length===1)return"COUNT(DISTINCT(".concat(r,".").concat(this.escape(i[0].databaseName),"))");const s=i.map(a=>"CAST(".concat(r,".").concat(this.escape(a.databaseName)," AS STRING)")).join(", '|;|', ");return"COUNT(DISTINCT(CONCAT(".concat(s,")))")}return"COUNT(DISTINCT("+i.map(s=>"".concat(r,".").concat(this.escape(s.databaseName))).join(" || '|;|' || ")+"))"}async executeCountQuery(e){const t=this.computeCountExpression(),i=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(t,"cnt").setOption("disable-global-order").loadRawResults(e);return!i||!i[0]||!i[0].cnt?0:parseInt(i[0].cnt)}async executeExistsQuery(e){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(e)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const e=Array.isArray(this.findOptions.select)?Fe.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(e,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const e=Array.isArray(this.findOptions.relations)?Fe.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(e=>{e.select&&!e.selection?e.type==="inner"?this.innerJoinAndSelect("".concat(e.parentAlias,".").concat(e.relationMetadata.propertyPath),e.alias):this.leftJoinAndSelect("".concat(e.parentAlias,".").concat(e.relationMetadata.propertyPath),e.alias):e.type==="inner"?this.innerJoin("".concat(e.parentAlias,".").concat(e.relationMetadata.propertyPath),e.alias):this.leftJoin("".concat(e.parentAlias,".").concat(e.relationMetadata.propertyPath),e.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(e=>{this.leftJoin(this.findOptions.join.leftJoin[e],e)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(e=>{this.innerJoin(this.findOptions.join.innerJoin[e],e)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(e=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[e],e)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(e=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[e],e)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const e=this.findOptions.lock.tables?this.findOptions.lock.tables.map(t=>{const i=this.expressionMap.aliases.find(r=>r.metadata.tableNameWithoutPrefix===t);if(!i)throw new J('"'.concat(t,'" is not part of this query'));return this.escape(i.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,e),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&ui.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(e){this.relationMetadatas.push(e)}async executeEntitiesAndRawResults(e){if(!this.expressionMap.mainAlias)throw new J('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!e.isTransactionActive)throw new aQ;if(this.expressionMap.lockMode==="optimistic"){const l=this.expressionMap.mainAlias.metadata;if(!l.versionColumn&&!l.updateDateColumn)throw new iQ(l.name)}const t=new MK(this.connection,e,this.expressionMap.relationIdAttributes),i=new $K(this.connection,e,this.expressionMap.relationCountAttributes);new LK(this.expressionMap).transform(),new BK(this.expressionMap).transform();let a=[],o=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[l,c]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),u=this.expressionMap.mainAlias.metadata,d=this.expressionMap.mainAlias.name,h=u.primaryColumns.map(g=>{const _=this.escape("distinctAlias"),v=this.escape(Oe.buildAlias(this.connection.driver,void 0,d,g.databaseName));c[v]||(c[v]="ASC");const y=Oe.buildAlias(this.connection.driver,void 0,"ids_"+d,g.databaseName);return"".concat(_,".").concat(v," AS ").concat(this.escape(y))}),f=this.clone(),m=f.expressionMap.timeTravel;if(a=await new Gg(this.connection,e).select("DISTINCT ".concat(h.join(", "))).addSelect(l).from("(".concat(f.orderBy().timeTravelQuery(!1).getQuery(),")"),"distinctAlias").timeTravelQuery(m).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(c).cache(this.expressionMap.cache&&this.expressionMap.cacheId?"".concat(this.expressionMap.cacheId,"-pagination"):this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),a.length>0){let g="";const _={};if(u.hasMultiplePrimaryKeys)g=a.map((v,y)=>u.primaryColumns.map(T=>{const N="orm_distinct_ids_".concat(y,"_").concat(T.databaseName),P=Oe.buildAlias(this.connection.driver,void 0,"ids_"+d,T.databaseName);return _[N]=v[P],"".concat(d,".").concat(T.propertyPath,"=:").concat(N)}).join(" AND ")).join(" OR ");else{const v=Oe.buildAlias(this.connection.driver,void 0,"ids_"+d,u.primaryColumns[0].databaseName),y=a.map(N=>N[v]);y.every(N=>typeof N=="number")?g="".concat(d,".").concat(u.primaryColumns[0].propertyPath," IN (").concat(y.join(", "),")"):(_.orm_distinct_ids=y,g=d+"."+u.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}a=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:g}).setParameters(_).loadRawResults(e)}}else a=await this.loadRawResults(e);if(a.length>0){const l=await t.load(a),c=await i.load(a);o=new OK(this.expressionMap,this.connection.driver,l,c,this.queryRunner).transform(a,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,o)}if(this.expressionMap.relationLoadStrategy==="query"){const l=new qO(this.connection,e);await Promise.all(this.relationMetadatas.map(async c=>{const u=c.inverseEntityMetadata.target,d=c.inverseEntityMetadata.targetName,h=Array.isArray(this.findOptions.select)?Fe.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,f=Array.isArray(this.findOptions.relations)?Fe.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,m=this.createQueryBuilder().select(d).from(u,d).setFindOptions({select:h?Fe.deepValue(h,c.propertyPath):void 0,order:this.findOptions.order?Fe.deepValue(this.findOptions.order,c.propertyPath):void 0,relations:f?Fe.deepValue(f,c.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(o.length>0){const g=await l.loadManyToManyRelationIdsAndGroup(c,o,void 0,m);o.forEach(_=>{const v=g.find(y=>y.entity===_);if(v){const y=v.related===void 0?null:v.related;c.setEntityValue(_,y)}})}}))}return{raw:a,entities:o}}createOrderByCombinedWithSelectExpression(e){const t=this.expressionMap.allOrderBys,i=Object.keys(t).map(s=>{if(s.indexOf(".")!==-1){const a=s.split("."),o=a[0],l=a.slice(1).join("."),u=this.expressionMap.findAliasByName(o).metadata.findColumnWithPropertyPath(l);return this.escape(e)+"."+this.escape(Oe.buildAlias(this.connection.driver,void 0,o,u.databaseName))}else return this.expressionMap.selects.find(a=>a.selection===s||a.aliasName===s)?this.escape(e)+"."+this.escape(s):""}).join(", "),r={};return Object.keys(t).forEach(s=>{if(s.indexOf(".")!==-1){const a=s.split("."),o=a[0],l=a.slice(1).join("."),u=this.expressionMap.findAliasByName(o).metadata.findColumnWithPropertyPath(l);r[this.escape(e)+"."+this.escape(Oe.buildAlias(this.connection.driver,void 0,o,u.databaseName))]=t[s]}else this.expressionMap.selects.find(a=>a.selection===s||a.aliasName===s)?r[this.escape(e)+"."+this.escape(s)]=t[s]:r[s]=t[s]}),[i,r]}async loadRawResults(e){const[t,i]=this.getQueryAndParameters(),r=t+" -- PARAMETERS: "+JSON.stringify(i),s=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let a;const o=s.alwaysEnabled&&this.expressionMap.cache||this.expressionMap.cache;let l=!1;if(this.connection.queryResultCache&&o)try{if(a=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:r,duration:this.expressionMap.cacheDuration||s.duration||1e3},e),a&&!this.connection.queryResultCache.isExpired(a))return JSON.parse(a.result)}catch(u){if(!s.ignoreErrors)throw u;l=!0}const c=await e.query(t,i,!0);if(!l&&this.connection.queryResultCache&&o)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:r,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||s.duration||1e3,result:JSON.stringify(c.records)},a,e)}catch(u){if(!s.ignoreErrors)throw u}return c.records}mergeExpressionMap(e){return ft.assign(this.expressionMap,e),this}normalizeNumber(e){return typeof e=="number"||e===void 0||e===null?e:Number(e)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner("slave")}buildSelect(e,t,i,r){for(let s in e){if(e[s]===void 0||e[s]===!1)continue;const a=r?r+"."+s:s,o=t.findColumnWithPropertyPathStrict(a),l=t.findEmbeddedWithPropertyPath(a),c=t.findRelationWithPropertyPath(a);if(!l&&!o&&!c)throw new Qs(a,t);o?this.selects.push(i+"."+a):l&&this.buildSelect(e[s],t,i,a)}}buildRelations(e,t,i,r,s){e&&Object.keys(e).forEach(a=>{const o=e[a],l=s?s+"."+a:a,c=i.findEmbeddedWithPropertyPath(l),u=i.findRelationWithPropertyPath(l);if(!c&&!u)throw new Qs(l,i);if(c)this.buildRelations(o,typeof t=="object"?Fe.deepValue(t,c.propertyPath):void 0,i,r,l);else if(u){let d=r+"_"+l.replace(".","_");d=Oe.buildAlias(this.connection.driver,{joiner:"__"},r,d),(o===!0||typeof o=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(u):(this.joins.push({type:"left",select:!0,selection:t&&typeof t[a]=="object"?t[a]:void 0,alias:d,parentAlias:r,relationMetadata:u}),t&&typeof t[a]=="object"&&this.buildSelect(t[a],u.inverseEntityMetadata,d))),typeof o=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(o,typeof t=="object"?Fe.deepValue(t,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildEagerRelations(e,t,i,r,s){e&&Object.keys(e).forEach(a=>{const o=e[a],l=s?s+"."+a:a,c=i.findEmbeddedWithPropertyPath(l),u=i.findRelationWithPropertyPath(l);if(!c&&!u)throw new Qs(l,i);if(c)this.buildEagerRelations(o,typeof t=="object"?Fe.deepValue(t,c.propertyPath):void 0,i,r,l);else if(u){let d=r+"_"+l.replace(".","_");d=Oe.buildAlias(this.connection.driver,{joiner:"__"},r,d),(o===!0||typeof o=="object")&&u.inverseEntityMetadata.eagerRelations.forEach(h=>{let f=d+"_"+h.propertyPath.replace(".","_");f=Oe.buildAlias(this.connection.driver,{joiner:"__"},d,f),this.joins.find(g=>g.alias===f)||this.joins.push({type:"left",select:!0,alias:f,parentAlias:d,selection:void 0,relationMetadata:h}),t&&typeof t[a]=="object"&&this.buildSelect(t[a],u.inverseEntityMetadata,d)}),typeof o=="object"&&this.buildEagerRelations(o,typeof t=="object"?Fe.deepValue(t,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildOrder(e,t,i,r){for(let s in e){if(e[s]===void 0)continue;const a=r?r+"."+s:s,o=t.findColumnWithPropertyPathStrict(a),l=t.findEmbeddedWithPropertyPath(a),c=t.findRelationWithPropertyPath(a);if(!l&&!o&&!c)throw new Qs(a,t);if(o){let u=typeof e[s]=="object"?e[s].direction:e[s];u=u==="DESC"||u==="desc"||u===-1?"DESC":"ASC";let d=typeof e[s]=="object"?e[s].nulls:void 0;d=(d==null?void 0:d.toLowerCase())==="first"?"NULLS FIRST":(d==null?void 0:d.toLowerCase())==="last"?"NULLS LAST":void 0;let h="".concat(i,".").concat(a);this.addOrderBy(h,u,d)}else if(l)this.buildOrder(e[s],t,i,a);else if(c){let u=i+"_"+a.replace(".","_");u=Oe.buildAlias(this.connection.driver,{joiner:"__"},i,u),this.joins.find(h=>h.alias===u)||this.joins.push({type:"left",select:!1,alias:u,parentAlias:i,selection:void 0,relationMetadata:c}),this.buildOrder(e[s],c.inverseEntityMetadata,u)}}}buildWhere(e,t,i,r){let s="";if(Array.isArray(e)&&e.length)s="("+e.map(a=>this.buildWhere(a,t,i,r)).filter(a=>!!a).map(a=>"("+a+")").join(" OR ")+")";else{let a=[];for(let o in e){if(e[o]===void 0||e[o]===null)continue;const l=r?r+"."+o:o,c=t.findColumnWithPropertyPathStrict(l),u=t.findEmbeddedWithPropertyPath(l),d=t.findRelationWithPropertyPath(l);if(!u&&!c&&!d)throw new Qs(l,t);if(c){let h="".concat(i,".").concat(l);c.isVirtualProperty&&c.query&&(h="(".concat(c.query(i),")"));let f=e[o];se.isEqualOperator(e[o])&&(f=e[o].value),c.transformer&&(f instanceof Jf?f.transformValue(c.transformer):f=$n.transformTo(c.transformer,f)),a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(h,f)))}else if(u){const h=this.buildWhere(e[o],t,i,l);h&&a.push(h)}else if(d){if(typeof e[o]=="object"&&Object.keys(e[o]).every(f=>e[o][f]===void 0))continue;if(se.isFindOperator(e[o]))if(e[o].type==="moreThan"||e[o].type==="lessThan"||e[o].type==="moreThanOrEqual"||e[o].type==="lessThanOrEqual"){let h="";e[o].type==="moreThan"?h=">":e[o].type==="lessThan"?h="<":e[o].type==="moreThanOrEqual"?h=">=":e[o].type==="lessThanOrEqual"&&(h="<=");const f=this.subQuery();if(d.isManyToManyOwner)f.select("COUNT(*)").from(d.joinTableName,d.joinTableName).where(d.joinColumns.map(m=>"".concat(d.joinTableName,".").concat(m.propertyName," = ").concat(i,".").concat(m.referencedColumn.propertyName)).join(" AND "));else if(d.isManyToManyNotOwner)f.select("COUNT(*)").from(d.inverseRelation.joinTableName,d.inverseRelation.joinTableName).where(d.inverseRelation.inverseJoinColumns.map(m=>"".concat(d.inverseRelation.joinTableName,".").concat(m.propertyName," = ").concat(i,".").concat(m.referencedColumn.propertyName)).join(" AND "));else if(d.isOneToMany)f.select("COUNT(*)").from(d.inverseEntityMetadata.target,d.inverseEntityMetadata.tableName).where(d.inverseRelation.joinColumns.map(m=>"".concat(d.inverseEntityMetadata.tableName,".").concat(m.propertyName," = ").concat(i,".").concat(m.referencedColumn.propertyName)).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(f.getSql()+" "+h+" "+parseInt(e[o].value))}else if(d.isManyToOne||d.isOneToOne&&d.isOneToOneOwner){const h="".concat(i,".").concat(l);a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(h,e[o])))}else throw new Error("This relation isn't supported by given find operator");else{let h=i+"_"+d.propertyPath.replace(".","_");h=Oe.buildAlias(this.connection.driver,{joiner:"__"},i,h),this.joins.find(g=>g.alias===h)||this.joins.push({type:"left",select:!1,selection:void 0,alias:h,parentAlias:i,relationMetadata:d});const m=this.buildWhere(e[o],d.inverseEntityMetadata,h);m&&a.push(m)}}}s=a.join(" AND ")}return s}}class h1{constructor(e){this.options=e}logQuery(e,t,i){this.isLogEnabledFor("query")&&this.writeLog("query",{type:"query",prefix:"query",message:e,format:"sql",parameters:t},i)}logQueryError(e,t,i,r){this.isLogEnabledFor("query-error")&&this.writeLog("warn",[{type:"query-error",prefix:"query failed",message:t,format:"sql",parameters:i},{type:"query-error",prefix:"error",message:e}],r)}logQuerySlow(e,t,i,r){this.isLogEnabledFor("query-slow")&&this.writeLog("warn",[{type:"query-slow",prefix:"query is slow",message:t,format:"sql",parameters:i,additionalInfo:{time:e}},{type:"query-slow",prefix:"execution time",message:e}],r)}logSchemaBuild(e,t){this.isLogEnabledFor("schema-build")&&this.writeLog("schema",{type:"schema-build",message:e},t)}logMigration(e,t){this.isLogEnabledFor("migration")||this.writeLog("log",{type:"migration",message:e},t)}log(e,t,i){switch(e){case"log":if(!this.isLogEnabledFor("log"))return;this.writeLog("log",{type:"log",message:t},i);break;case"info":if(!this.isLogEnabledFor("info"))return;this.writeLog("info",{type:"info",prefix:"info",message:t},i);break;case"warn":if(!this.isLogEnabledFor("warn"))return;this.writeLog("warn",{type:"warn",message:t},i);break}}isLogEnabledFor(e){switch(e){case"query":return this.options==="all"||this.options===!0||Array.isArray(this.options)&&this.options.indexOf("query")!==-1;case"error":case"query-error":return this.options==="all"||this.options===!0||Array.isArray(this.options)&&this.options.indexOf("error")!==-1;case"query-slow":return!0;case"schema":case"schema-build":return this.options==="all"||Array.isArray(this.options)&&this.options.indexOf("schema")!==-1;case"migration":return!0;case"log":return this.options==="all"||Array.isArray(this.options)&&this.options.indexOf("log")!==-1;case"info":return this.options==="all"||Array.isArray(this.options)&&this.options.indexOf("info")!==-1;case"warn":return this.options==="all"||Array.isArray(this.options)&&this.options.indexOf("warn")!==-1;default:return!1}}prepareLogMessages(e,t){t={addColonToPrefix:!0,appendParameterAsComment:!0,highlightSql:!0,...t};const i=Array.isArray(e)?e:[e];for(let r of i){if(typeof r!="object"&&(r={message:r}),r.format==="sql"){let s=String(r.message);t.appendParameterAsComment&&r.parameters&&r.parameters.length&&(s+=" -- PARAMETERS: ".concat(this.stringifyParams(r.parameters))),t.highlightSql&&(s=Kt.highlightSql(s)),r.message=s}t.addColonToPrefix&&r.prefix&&(r.prefix+=":")}return i}stringifyParams(e){try{return JSON.stringify(e)}catch(t){return e}}}class zK extends h1{writeLog(e,t,i){var r;const s=this.prepareLogMessages(t,{highlightSql:!1});for(let a of s)switch((r=a.type)!==null&&r!==void 0?r:e){case"log":case"schema-build":case"migration":console.log(a.message);break;case"info":case"query":a.prefix?console.info(a.prefix,a.message):console.info(a.message);break;case"warn":case"query-slow":a.prefix?console.warn(a.prefix,a.message):console.warn(a.message);break;case"error":case"query-error":a.prefix?console.error(a.prefix,a.message):console.error(a.message);break}}}class gA extends h1{writeLog(e,t,i){var r;const s=this.prepareLogMessages(t);for(let a of s)switch((r=a.type)!==null&&r!==void 0?r:e){case"log":case"schema-build":case"migration":Kt.log(String(a.message));break;case"info":case"query":a.prefix?Kt.logInfo(a.prefix,a.message):Kt.log(String(a.message));break;case"warn":case"query-slow":a.prefix?Kt.logWarn(a.prefix,a.message):console.warn(Kt.warn(String(a.message)));break;case"error":case"query-error":a.prefix?Kt.logError(a.prefix,String(a.message)):console.error(Kt.error(String(a.message)));break}}}class VK{logQuery(){throw new Error("This logger is not applicable in a browser context")}logQueryError(){throw new Error("This logger is not applicable in a browser context")}logQuerySlow(){throw new Error("This logger is not applicable in a browser context")}logSchemaBuild(){throw new Error("This logger is not applicable in a browser context")}logMigration(){throw new Error("This logger is not applicable in a browser context")}log(){throw new Error("This logger is not applicable in a browser context")}}class HK extends VK{}var Lx={exports:{}},Mv,yA;function WK(){if(yA)return Mv;yA=1;var n=1e3,e=n*60,t=e*60,i=t*24,r=i*7,s=i*365.25;Mv=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return a(u);if(h==="number"&&isFinite(u))return d.long?l(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),f=(d[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*r;case"days":case"day":case"d":return h*i;case"hours":case"hour":case"hrs":case"hr":case"h":return h*t;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(u){var d=Math.abs(u);return d>=i?Math.round(u/i)+"d":d>=t?Math.round(u/t)+"h":d>=e?Math.round(u/e)+"m":d>=n?Math.round(u/n)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=i?c(u,d,i,"day"):d>=t?c(u,d,t,"hour"):d>=e?c(u,d,e,"minute"):d>=n?c(u,d,n,"second"):u+" ms"}function c(u,d,h,f){var m=d>=h*1.5;return Math.round(u/h)+" "+f+(m?"s":"")}return Mv}function GK(n){t.debug=t,t.default=t,t.coerce=l,t.disable=s,t.enable=r,t.enabled=a,t.humanize=WK(),t.destroy=c,Object.keys(n).forEach(u=>{t[u]=n[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(u){let d,h=null,f,m;function g(..._){if(!g.enabled)return;const v=g,y=Number(new Date),T=y-(d||y);v.diff=T,v.prev=d,v.curr=y,d=y,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let N=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(F,$)=>{if(F==="%%")return"%";N++;const B=t.formatters[$];if(typeof B=="function"){const M=_[N];F=B.call(v,M),_.splice(N,1),N--}return F}),t.formatArgs.call(v,_),(v.log||t.log).apply(v,_)}return g.namespace=u,g.useColors=t.useColors(),g.color=t.selectColor(u),g.extend=i,g.destroy=t.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==t.namespaces&&(f=t.namespaces,m=t.enabled(u)),m),set:_=>{h=_}}),typeof t.init=="function"&&t.init(g),g}function i(u,d){const h=t(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function r(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let d;const h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...t.names.map(o),...t.skips.map(o).map(d=>"-"+d)].join(",");return t.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(u))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(u))return!0;return!1}function o(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var QK=GK;(function(n,e){e.formatArgs=i,e.save=r,e.load=s,e.useColors=t,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,d=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(d=u))}),l.splice(d,0,c)}e.log=console.debug||console.log||(()=>{});function r(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch(c){}}function s(){let l;try{l=e.storage.getItem("debug")}catch(c){}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function a(){try{return localStorage}catch(l){}}n.exports=QK(e);const{formatters:o}=n.exports;o.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(Lx,Lx.exports);var Ta=Lx.exports;class KK extends h1{constructor(){super(...arguments),this.logger={log:Ta.debug("typeorm:log"),info:Ta.debug("typeorm:info"),warn:Ta.debug("typeorm:warn"),error:Ta.debug("typeorm:error"),query:Ta.debug("typeorm:query:log"),"query-error":Ta.debug("typeorm:query:error"),"query-slow":Ta.debug("typeorm:query:slow"),"schema-build":Ta.debug("typeorm:schema"),migration:Ta.debug("typeorm:migration")}}isLogEnabledFor(e){switch(e){case"query":return this.logger.query.enabled;case"query-error":return this.logger["query-error"].enabled;case"query-slow":return!0;case"schema":case"schema-build":return this.logger["schema-build"].enabled;case"migration":return this.logger.migration.enabled;case"log":return this.logger.log.enabled;case"info":return this.logger.info.enabled;case"warn":return this.logger.warn.enabled;default:return!1}}writeLog(e,t,i){var r;const s=this.prepareLogMessages(t,{appendParameterAsComment:!1});for(let a of s){const o=(r=a.type)!==null&&r!==void 0?r:e;o in this.logger&&(a.prefix?this.logger[o](a.prefix,a.message):this.logger[o](a.message),a.parameters&&a.parameters.length&&this.logger[o]("parameters:",a.parameters))}}}class bA{create(e,t){if(ft.isObject(e))return e;if(e)switch(e){case"simple-console":return new zK(t);case"file":return new HK(t);case"advanced-console":return new gA(t);case"debug":return new KK}return new gA(t)}}class YK{constructor(e,t){this.connection=e,this.clientType=t,this.redis=this.loadRedis()}async connect(){const e=this.connection.options.cache;if(this.clientType==="redis")this.client=this.redis.createClient({...e==null?void 0:e.options,legacyMode:!0}),typeof this.connection.options.cache=="object"&&this.connection.options.cache.ignoreErrors&&this.client.on("error",t=>{this.connection.logger.log("warn",t)}),"connect"in this.client&&await this.client.connect();else if(this.clientType==="ioredis")e&&e.port?e.options?this.client=new this.redis(e.port,e.options):this.client=new this.redis(e.port):e&&e.options?this.client=new this.redis(e.options):this.client=new this.redis;else if(this.clientType==="ioredis/cluster")if(e&&e.options&&Array.isArray(e.options))this.client=new this.redis.Cluster(e.options);else if(e&&e.options&&e.options.startupNodes)this.client=new this.redis.Cluster(e.options.startupNodes,e.options.options);else throw new J("options.startupNodes required for ".concat(this.clientType,"."))}async disconnect(){return new Promise((e,t)=>{this.client.quit((i,r)=>{if(i)return t(i);e(),this.client=void 0})})}async synchronize(e){}getFromCache(e,t){return new Promise((i,r)=>{e.identifier?this.client.get(e.identifier,(s,a)=>{if(s)return r(s);i(JSON.parse(a))}):e.query?this.client.get(e.query,(s,a)=>{if(s)return r(s);i(JSON.parse(a))}):i(void 0)})}isExpired(e){return e.time+e.duration<new Date().getTime()}async storeInCache(e,t,i){return new Promise((r,s)=>{e.identifier?this.client.set(e.identifier,JSON.stringify(e),"PX",e.duration,(a,o)=>{if(a)return s(a);r()}):e.query&&this.client.set(e.query,JSON.stringify(e),"PX",e.duration,(a,o)=>{if(a)return s(a);r()})})}async clear(e){return new Promise((t,i)=>{this.client.flushdb((r,s)=>{if(r)return i(r);t()})})}async remove(e,t){await Promise.all(e.map(i=>this.deleteKey(i)))}deleteKey(e){return new Promise((t,i)=>{this.client.del(e,(r,s)=>{if(r)return i(r);t()})})}loadRedis(){try{return this.clientType==="ioredis/cluster"?Kt.load("ioredis"):Kt.load(this.clientType)}catch(e){throw new J("Cannot use cache because ".concat(this.clientType,' is not installed. Please run "npm i ').concat(this.clientType,' --save".'))}}}let am;const XK=new Uint8Array(16);function JK(){if(!am&&(am=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!am))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return am(XK)}const Jn=[];for(let n=0;n<256;++n)Jn.push((n+256).toString(16).slice(1));function ZK(n,e=0){return Jn[n[e+0]]+Jn[n[e+1]]+Jn[n[e+2]]+Jn[n[e+3]]+"-"+Jn[n[e+4]]+Jn[n[e+5]]+"-"+Jn[n[e+6]]+Jn[n[e+7]]+"-"+Jn[n[e+8]]+Jn[n[e+9]]+"-"+Jn[n[e+10]]+Jn[n[e+11]]+Jn[n[e+12]]+Jn[n[e+13]]+Jn[n[e+14]]+Jn[n[e+15]]}const eY=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vA={randomUUID:eY};function tY(n,e,t){if(vA.randomUUID&&!e&&!n)return vA.randomUUID();n=n||{};const i=n.random||(n.rng||JK)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=i[r];return e}return ZK(i)}class nY{constructor(e){this.connection=e;const{schema:t}=this.connection.driver.options,i=this.connection.driver.database,s=(typeof this.connection.options.cache=="object"?this.connection.options.cache:{}).tableName||"query-result-cache";this.queryResultCacheDatabase=i,this.queryResultCacheSchema=t,this.queryResultCacheTable=this.connection.driver.buildTableName(s,t,i)}async connect(){}async disconnect(){}async synchronize(e){e=this.getQueryRunner(e);const t=this.connection.driver;await e.hasTable(this.queryResultCacheTable)||await e.createTable(new nn({database:this.queryResultCacheDatabase,schema:this.queryResultCacheSchema,name:this.queryResultCacheTable,columns:[{name:"id",isPrimary:!0,isNullable:!1,type:t.normalizeType({type:t.mappedDataTypes.cacheId}),generationStrategy:t.options.type==="spanner"?"uuid":"increment",isGenerated:!0},{name:"identifier",type:t.normalizeType({type:t.mappedDataTypes.cacheIdentifier}),isNullable:!0},{name:"time",type:t.normalizeType({type:t.mappedDataTypes.cacheTime}),isPrimary:!1,isNullable:!1},{name:"duration",type:t.normalizeType({type:t.mappedDataTypes.cacheDuration}),isPrimary:!1,isNullable:!1},{name:"query",type:t.normalizeType({type:t.mappedDataTypes.cacheQuery}),isPrimary:!1,isNullable:!1},{name:"result",type:t.normalizeType({type:t.mappedDataTypes.cacheResult}),isNullable:!1}]}))}getFromCache(e,t){t=this.getQueryRunner(t);const i=this.connection.createQueryBuilder(t).select().from(this.queryResultCacheTable,"cache");return e.identifier?i.where("".concat(i.escape("cache"),".").concat(i.escape("identifier")," = :identifier")).setParameters({identifier:this.connection.driver.options.type==="mssql"?new ds(e.identifier,"nvarchar"):e.identifier}).getRawOne():e.query?this.connection.driver.options.type==="oracle"?i.where("dbms_lob.compare(".concat(i.escape("cache"),".").concat(i.escape("query"),", :query) = 0"),{query:e.query}).getRawOne():i.where("".concat(i.escape("cache"),".").concat(i.escape("query")," = :query")).setParameters({query:this.connection.driver.options.type==="mssql"?new ds(e.query,"nvarchar"):e.query}).getRawOne():Promise.resolve(void 0)}isExpired(e){const t=typeof e.duration=="string"?parseInt(e.duration):e.duration;return(typeof e.time=="string"?parseInt(e.time):e.time)+t<new Date().getTime()}async storeInCache(e,t,i){const r=i===void 0||(i==null?void 0:i.getReplicationMode())==="slave";(i===void 0||r)&&(i=this.connection.createQueryRunner("master"));let s=e;if(this.connection.driver.options.type==="mssql"&&(s={identifier:new ds(e.identifier,"nvarchar"),time:new ds(e.time,"bigint"),duration:new ds(e.duration,"int"),query:new ds(e.query,"nvarchar"),result:new ds(e.result,"nvarchar")}),t&&t.identifier){const a=i.manager.createQueryBuilder().update(this.queryResultCacheTable).set(s);a.where("".concat(a.escape("identifier")," = :condition"),{condition:s.identifier}),await a.execute()}else if(t&&t.query){const a=i.manager.createQueryBuilder().update(this.queryResultCacheTable).set(s);this.connection.driver.options.type==="oracle"?a.where('dbms_lob.compare("query", :condition) = 0',{condition:s.query}):a.where("".concat(a.escape("query")," = :condition"),{condition:s.query}),await a.execute()}else this.connection.driver.options.type==="spanner"&&!s.id&&(s.id=tY()),await i.manager.createQueryBuilder().insert().into(this.queryResultCacheTable).values(s).execute();r&&await i.release()}async clear(e){return this.getQueryRunner(e).clearTable(this.queryResultCacheTable)}async remove(e,t){let i=t||this.getQueryRunner();await Promise.all(e.map(r=>{const s=i.manager.createQueryBuilder();return s.delete().from(this.queryResultCacheTable).where("".concat(s.escape("identifier")," = :identifier"),{identifier:r}).execute()})),t||await i.release()}getQueryRunner(e){return e||this.connection.createQueryRunner()}}class wA{constructor(e){this.connection=e}create(){if(!this.connection.options.cache)throw new J("To use cache you need to enable it in connection options by setting cache: true or providing some caching options. Example: { host: ..., username: ..., cache: true }");const e=this.connection.options.cache;return e.provider&&typeof e.provider=="function"?e.provider(this.connection):e.type==="redis"||e.type==="ioredis"||e.type==="ioredis/cluster"?new YK(this.connection,e.type):new nY(this.connection)}}class iY{constructor(e){this.connection=e}load(e,t,i,r){return i&&i.isReleased&&(i=void 0),e.isManyToOne||e.isOneToOneOwner?this.loadManyToOneOrOneToOneOwner(e,t,i,r):e.isOneToMany||e.isOneToOneNotOwner?this.loadOneToManyOrOneToOneNotOwner(e,t,i,r):e.isManyToManyOwner?this.loadManyToManyOwner(e,t,i,r):this.loadManyToManyNotOwner(e,t,i,r)}loadManyToOneOrOneToOneOwner(e,t,i,r){const s=Array.isArray(t)?t:[t],a=e.entityMetadata.name,o=r||this.connection.createQueryBuilder(i).select(e.propertyName).from(e.type,e.propertyName),l=o.expressionMap.mainAlias.name,c=e.entityMetadata.primaryColumns,d=(e.isOwning?e.joinColumns:e.inverseRelation.joinColumns).map(h=>"".concat(e.entityMetadata.name,".").concat(h.propertyName," = ").concat(l,".").concat(h.referencedColumn.propertyName)).join(" AND ");if(o.innerJoin(e.entityMetadata.target,a,d),c.length===1)o.where("".concat(a,".").concat(c[0].propertyPath," IN (:...").concat(a+"_"+c[0].propertyName,")")),o.setParameter(a+"_"+c[0].propertyName,s.map(h=>c[0].getEntityValue(h,!0)));else{const h=s.map((f,m)=>c.map((g,_)=>{const v=a+"_entity_"+m+"_"+_;return o.setParameter(v,g.getEntityValue(f,!0)),a+"."+g.propertyPath+" = :"+v}).join(" AND ")).map(f=>"("+f+")").join(" OR ");o.where(h)}return ui.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadOneToManyOrOneToOneNotOwner(e,t,i,r){const s=Array.isArray(t)?t:[t],a=e.inverseRelation.joinColumns,o=r||this.connection.createQueryBuilder(i).select(e.propertyName).from(e.inverseRelation.entityMetadata.target,e.propertyName),l=o.expressionMap.mainAlias.name;if(a.length===1)o.where("".concat(l,".").concat(a[0].propertyPath," IN (:...").concat(l+"_"+a[0].propertyName,")")),o.setParameter(l+"_"+a[0].propertyName,s.map(c=>a[0].referencedColumn.getEntityValue(c,!0)));else{const c=s.map((u,d)=>a.map((h,f)=>{const m=l+"_entity_"+d+"_"+f;return o.setParameter(m,h.referencedColumn.getEntityValue(u,!0)),l+"."+h.propertyPath+" = :"+m}).join(" AND ")).map(u=>"("+u+")").join(" OR ");o.where(c)}return ui.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadManyToManyOwner(e,t,i,r){const s=Array.isArray(t)?t:[t],a=e.joinColumns.reduce((h,f)=>(h[f.propertyName]=s.map(m=>f.referencedColumn.getEntityValue(m,!0)),h),{}),o=r||this.connection.createQueryBuilder(i).select(e.propertyName).from(e.type,e.propertyName),l=o.expressionMap.mainAlias.name,c=e.junctionEntityMetadata.tableName,u=e.joinColumns.map(h=>"".concat(c,".").concat(h.propertyName," IN (:...").concat(h.propertyName,")")),d=e.inverseJoinColumns.map(h=>"".concat(c,".").concat(h.propertyName,"=").concat(l,".").concat(h.referencedColumn.propertyName));return o.innerJoin(c,c,[...u,...d].join(" AND ")).setParameters(a),ui.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadManyToManyNotOwner(e,t,i,r){const s=Array.isArray(t)?t:[t],a=r||this.connection.createQueryBuilder(i).select(e.propertyName).from(e.type,e.propertyName),o=a.expressionMap.mainAlias.name,l=e.junctionEntityMetadata.tableName,c=e.inverseRelation.joinColumns.map(h=>"".concat(l,".").concat(h.propertyName," = ").concat(o,".").concat(h.referencedColumn.propertyName)),u=e.inverseRelation.inverseJoinColumns.map(h=>"".concat(l,".").concat(h.propertyName," IN (:...").concat(h.propertyName,")")),d=e.inverseRelation.inverseJoinColumns.reduce((h,f)=>(h[f.propertyName]=s.map(m=>f.referencedColumn.getEntityValue(m,!0)),h),{});return a.innerJoin(l,l,[...c,...u].join(" AND ")).setParameters(d),ui.joinEagerRelations(a,a.alias,a.expressionMap.mainAlias.metadata),a.getMany()}enableLazyLoad(e,t,i){const r=this,s="__"+e.propertyName+"__",a="__promise_"+e.propertyName+"__",o="__has_"+e.propertyName+"__",l=(u,d)=>(u[s]=d,u[o]=!0,delete u[a],d),c=(u,d)=>(delete u[o],delete u[s],u[a]=d,d.then(h=>u[a]===d?l(u,h):h),d);Object.defineProperty(t,e.propertyName,{get:function(){if(this[o]===!0||this[s]!==void 0)return Promise.resolve(this[s]);if(this[a])return this[a];const u=r.load(e,this,i).then(d=>e.isOneToOne||e.isManyToOne?d.length===0?null:d[0]:d);return c(this,u)},set:function(u){u instanceof Promise?c(this,u):l(this,u)},configurable:!0,enumerable:!1})}}class xA{constructor(e){this["@instanceof"]=Symbol.for("DataSource"),this.migrations=[],this.subscribers=[],this.entityMetadatas=[],this.entityMetadatasMap=new Map,this.name=e.name||"default",this.options=e,this.logger=new bA().create(this.options.logger,this.options.logging),this.driver=new SK().create(this),this.manager=this.createEntityManager(),this.namingStrategy=e.namingStrategy||new VG,this.metadataTableName=e.metadataTableName||"typeorm_metadata",this.queryResultCache=e.cache?new wA(this).create():void 0,this.relationLoader=new iY(this),this.relationIdLoader=new qO(this),this.isInitialized=!1}get isConnected(){return this.isInitialized}get mongoManager(){if(!se.isMongoEntityManager(this.manager))throw new J("MongoEntityManager is only available for MongoDB databases.");return this.manager}get sqljsManager(){if(!se.isSqljsEntityManager(this.manager))throw new J("SqljsEntityManager is only available for Sqljs databases.");return this.manager}setOptions(e){return Object.assign(this.options,e),(e.logger||e.logging)&&(this.logger=new bA().create(e.logger||this.options.logger,e.logging||this.options.logging)),e.namingStrategy&&(this.namingStrategy=e.namingStrategy),e.cache&&(this.queryResultCache=new wA(this).create()),e.database&&(this.driver.database=Oe.buildDriverOptions(this.options).database),this}async initialize(){if(this.isInitialized)throw new HG(this.name);await this.driver.connect(),this.queryResultCache&&await this.queryResultCache.connect(),ft.assign(this,{isInitialized:!0});try{await this.buildMetadatas(),await this.driver.afterConnect(),this.options.dropSchema&&await this.dropDatabase(),this.options.migrationsRun&&await this.runMigrations({transaction:this.options.migrationsTransactionMode}),this.options.synchronize&&await this.synchronize()}catch(e){throw await this.destroy(),e}return this}async connect(){return this.initialize()}async destroy(){if(!this.isInitialized)throw new Zd(this.name);await this.driver.disconnect(),this.queryResultCache&&await this.queryResultCache.disconnect(),ft.assign(this,{isInitialized:!1})}async close(){return this.destroy()}async synchronize(e=!1){if(!this.isInitialized)throw new Zd(this.name);e&&await this.dropDatabase(),await this.driver.createSchemaBuilder().build()}async dropDatabase(){const e=this.createQueryRunner();try{if(this.driver.options.type==="mssql"||Oe.isMySQLFamily(this.driver)||this.driver.options.type==="aurora-mysql"||Oe.isSQLiteFamily(this.driver)){const t=[];if(this.entityMetadatas.forEach(i=>{i.database&&t.indexOf(i.database)===-1&&t.push(i.database)}),t.length===0&&this.driver.database&&t.push(this.driver.database),t.length===0)await e.clearDatabase();else for(const i of t)await e.clearDatabase(i)}else await e.clearDatabase()}finally{await e.release()}}async runMigrations(e){if(!this.isInitialized)throw new Zd(this.name);const t=new Dv(this);return t.transaction=e&&e.transaction||"all",t.fake=e&&e.fake||!1,await t.executePendingMigrations()}async undoLastMigration(e){if(!this.isInitialized)throw new Zd(this.name);const t=new Dv(this);t.transaction=e&&e.transaction||"all",t.fake=e&&e.fake||!1,await t.undoLastMigration()}async showMigrations(){if(!this.isInitialized)throw new Zd(this.name);return await new Dv(this).showMigrations()}hasMetadata(e){return!!this.findMetadata(e)}getMetadata(e){const t=this.findMetadata(e);if(!t)throw new YG(e);return t}getRepository(e){return this.manager.getRepository(e)}getTreeRepository(e){return this.manager.getTreeRepository(e)}getMongoRepository(e){if(this.driver.options.type!=="mongodb")throw new J("You can use getMongoRepository only for MongoDB connections.");return this.manager.getRepository(e)}getCustomRepository(e){return this.manager.getCustomRepository(e)}async transaction(e,t){return this.manager.transaction(e,t)}async query(e,t,i){if(se.isMongoEntityManager(this.manager))throw new J("Queries aren't supported by MongoDB.");if(i&&i.isReleased)throw new DO;const r=i||this.createQueryRunner();try{return await r.query(e,t)}finally{i||await r.release()}}createQueryBuilder(e,t,i){if(se.isMongoEntityManager(this.manager))throw new J("Query Builder is not supported by MongoDB.");if(t){t=Oe.buildAlias(this.driver,void 0,t);const r=this.getMetadata(e);return new Gg(this,i).select(t).from(r.target,t)}else return new Gg(this,e)}createQueryRunner(e="master"){const t=this.driver.createQueryRunner(e),i=this.createEntityManager(t);return Object.assign(t,{manager:i}),t}getManyToManyMetadata(e,t){const i=this.getMetadata(e).findRelationWithPropertyPath(t);if(!i)throw new J('Relation "'.concat(t,'" was not found in ').concat(e," entity."));if(!i.isManyToMany)throw new J('Relation "'.concat(e,"#").concat(t,'" does not have a many-to-many relationship.')+"You can use this method only on many-to-many relations.");return i.junctionEntityMetadata}createEntityManager(e){return new nK().create(this,e)}findMetadata(e){const t=this.entityMetadatasMap.get(e);if(t)return t;for(let[i,r]of this.entityMetadatasMap){if(se.isEntitySchema(e)&&r.name===e.options.name)return r;if(typeof e=="string"){if(e.indexOf(".")!==-1){if(r.tablePath===e)return r}else if(r.name===e||r.tableName===e)return r}if(ft.isObjectWithName(e)&&typeof e.name=="string"){if(e.name.indexOf(".")!==-1){if(r.tablePath===e.name)return r}else if(r.name===e.name||r.tableName===e.name)return r}}}async buildMetadatas(){const e=new RK(this),t=new mQ,i=ft.mixedListToArray(this.options.subscribers||[]),r=await e.buildSubscribers(i);ft.assign(this,{subscribers:r});const s=ft.mixedListToArray(this.options.entities||[]),a=await e.buildEntityMetadatas(s);ft.assign(this,{entityMetadatas:a,entityMetadatasMap:new Map(a.map(c=>[c.target,c]))});const o=ft.mixedListToArray(this.options.migrations||[]),l=await e.buildMigrations(o);ft.assign(this,{migrations:l}),t.validateMany(this.entityMetadatas.filter(c=>c.tableType!=="view"),this.driver);for(let c of a)se.isBaseEntityConstructor(c.target)&&c.target.useDataSource(this)}}function ys(){const n=Kt.getGlobalVariable();return n.typeormMetadataArgsStorage||(n.typeormMetadataArgsStorage=new bO),n.typeormMetadataArgsStorage}function f1(n,e){return function(t,i){let r;typeof n=="string"||typeof n=="function"?r=n:n&&(e=n,r=n.type),e||(e={});const s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,i):void 0;if(!r&&s&&(r=s),!e.type&&r&&(e.type=r),e.type==="hstore"&&!e.hstoreType&&(e.hstoreType=s===Object?"object":"string"),typeof n=="function")ys().embeddeds.push({target:t.constructor,propertyName:i,isArray:s===Array||e.array===!0,prefix:e.prefix!==void 0?e.prefix:void 0,type:n});else{if(!e.type)throw new PO(t,i);e.unique===!0&&ys().uniques.push({target:t.constructor,columns:[i]}),ys().columns.push({target:t.constructor,propertyName:i,mode:"regular",options:e}),e.generated&&ys().generations.push({target:t.constructor,propertyName:i,strategy:typeof e.generated=="string"?e.generated:"increment"})}}}function UO(n,e){return function(t,i){let r;typeof n=="string"||n===String||n===Boolean||n===Number?r=n:e=Object.assign({},n),e||(e={});const s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,i):void 0;if(!r&&s&&(r=s),!e.type&&r&&(e.type=r),!e.type)throw new PO(t,i);if(e.nullable)throw new JG(t,i);e.primary=!0,ys().columns.push({target:t.constructor,propertyName:i,mode:"regular",options:e}),e.generated&&ys().generations.push({target:t.constructor,propertyName:i,strategy:typeof e.generated=="string"?e.generated:"increment"})}}function jO(n,e){const t=(ft.isObject(n)?n:e)||{},i=typeof n=="string"?n:t.name;return function(r){ys().tables.push({target:r,name:i,type:"regular",orderBy:t.orderBy?t.orderBy:void 0,engine:t.engine?t.engine:void 0,database:t.database?t.database:void 0,schema:t.schema?t.schema:void 0,synchronize:t.synchronize,withoutRowid:t.withoutRowid})}}var rY=Object.defineProperty,sY=Object.getOwnPropertyDescriptor,N0=(n,e,t,i)=>{for(var r=i>1?void 0:i?sY(e,t):e,s=n.length-1,a;s>=0;s--)(a=n[s])&&(r=(i?a(e,t,r):a(r))||r);return i&&r&&rY(e,t,r),r};let Fa=class{constructor(){Ea(this,"id");Ea(this,"isActive");Ea(this,"file")}};N0([UO({type:"varchar"})],Fa.prototype,"id",2);N0([f1({type:"boolean"})],Fa.prototype,"isActive",2);N0([f1({type:"blob",length:255})],Fa.prototype,"file",2);Fa=N0([jO("test")],Fa);var aY=Object.defineProperty,oY=Object.getOwnPropertyDescriptor,p1=(n,e,t,i)=>{for(var r=i>1?void 0:i?oY(e,t):e,s=n.length-1,a;s>=0;s--)(a=n[s])&&(r=(i?a(e,t,r):a(r))||r);return i&&r&&aY(e,t,r),r};let Wu=class{constructor(){Ea(this,"id");Ea(this,"store")}};p1([UO({type:"varchar"})],Wu.prototype,"id",2);p1([f1({type:"text"})],Wu.prototype,"store",2);Wu=p1([jO("state")],Wu);class lY{async up(e){await e.query('\n            CREATE TABLE "test" (\n                "id" integer PRIMARY KEY NOT NULL,\n                "isActive" boolean NOT NULL,\n                "file" blob NOT NULL\n            )\n        ')}async down(e){await e.query('\n            DROP TABLE "test"\n        ')}}class cY{async up(e){await e.query('\n            CREATE TABLE "state" (\n                "id" text PRIMARY KEY NOT NULL,\n                "store" text NOT NULL\n            )\n        ')}async down(e){await e.query('\n            DROP TABLE "state"\n        ')}}var zO={exports:{}};const uY={},dY=Object.freeze(Object.defineProperty({__proto__:null,default:uY},Symbol.toStringTag,{value:"Module"})),vh=VN(dY);(function(n,e){var t=void 0,i=function(r){return t||(t=new Promise(function(s,a){var o=typeof r<"u"?r:{},l=o.onAbort;o.onAbort=function(x){a(new Error(x)),l&&l(x)},o.postRun=o.postRun||[],o.postRun.push(function(){s(o)}),n=void 0;var c;c||(c=typeof o<"u"?o:{}),c.onRuntimeInitialized=function(){function x(oe,Ae){switch(typeof Ae){case"boolean":Tp(oe,Ae?1:0);break;case"number":kc(oe,Ae);break;case"string":Eb(oe,Ae,-1,-1);break;case"object":if(Ae===null)Fs(oe);else if(Ae.length!=null){var He=xc(Ae);Ep(oe,He,Ae.length,-1),rl(He)}else lo(oe,"Wrong API use : tried to return a value of an unknown type ("+Ae+").",-1);break;default:Fs(oe)}}function A(oe,Ae){for(var He=[],et=0;et<oe;et+=1){var dt=_n(Ae+4*et,"i32"),At=xb(dt);if(At===1||At===2)dt=oo(dt);else if(At===3)dt=Bd(dt);else if(At===4){At=dt,dt=$d(At),At=ll(At);for(var sr=new Uint8Array(dt),si=0;si<dt;si+=1)sr[si]=be[At+si];dt=sr}else dt=null;He.push(dt)}return He}function I(oe,Ae){this.La=oe,this.db=Ae,this.Ja=1,this.fb=[]}function U(oe,Ae){if(this.db=Ae,Ae=ue(oe)+1,this.Ya=xa(Ae),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");te(oe,de,this.Ya,Ae),this.eb=this.Ya,this.Ua=this.ib=null}function X(oe){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),oe!=null){var Ae=this.filename,He="/",et=Ae;if(He&&(He=typeof He=="string"?He:ga(He),et=Ae?ae(He+"/"+Ae):He),Ae=el(!0,!0),et=es(et,(Ae!==void 0?Ae:438)&4095|32768,0),oe){if(typeof oe=="string"){He=Array(oe.length);for(var dt=0,At=oe.length;dt<At;++dt)He[dt]=oe.charCodeAt(dt);oe=He}Ar(et,Ae|146),He=va(et,577),jt(He,oe,0,oe.length,0),pe(He),Ar(et,Ae)}}this.handleError(tt(this.filename,ve)),this.db=_n(ve,"i32"),Tb(this.db),this.Za={},this.Na={}}var ve=ns(4),Ee=c.cwrap,tt=Ee("sqlite3_open","number",["string","number"]),Tt=Ee("sqlite3_close_v2","number",["number"]),mt=Ee("sqlite3_exec","number",["number","string","number","number","number"]),on=Ee("sqlite3_changes","number",["number"]),is=Ee("sqlite3_prepare_v2","number",["number","string","number","number","number"]),vp=Ee("sqlite3_sql","string",["number"]),hb=Ee("sqlite3_normalized_sql","string",["number"]),Tc=Ee("sqlite3_prepare_v2","number",["number","number","number","number","number"]),fb=Ee("sqlite3_bind_text","number",["number","number","number","number","number"]),Ld=Ee("sqlite3_bind_blob","number",["number","number","number","number","number"]),Sc=Ee("sqlite3_bind_double","number",["number","number","number"]),pb=Ee("sqlite3_bind_int","number",["number","number","number"]),mb=Ee("sqlite3_bind_parameter_index","number",["number","string"]),gb=Ee("sqlite3_step","number",["number"]),yb=Ee("sqlite3_errmsg","string",["number"]),bb=Ee("sqlite3_column_count","number",["number"]),_c=Ee("sqlite3_data_count","number",["number"]),ol=Ee("sqlite3_column_double","number",["number","number"]),ao=Ee("sqlite3_column_text","string",["number","number"]),Cc=Ee("sqlite3_column_blob","number",["number","number"]),rr=Ee("sqlite3_column_bytes","number",["number","number"]),rs=Ee("sqlite3_column_type","number",["number","number"]),Ac=Ee("sqlite3_column_name","string",["number","number"]),wp=Ee("sqlite3_reset","number",["number"]),vb=Ee("sqlite3_clear_bindings","number",["number"]),wb=Ee("sqlite3_finalize","number",["number"]),xp=Ee("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),xb=Ee("sqlite3_value_type","number",["number"]),$d=Ee("sqlite3_value_bytes","number",["number"]),Bd=Ee("sqlite3_value_text","string",["number"]),ll=Ee("sqlite3_value_blob","number",["number"]),oo=Ee("sqlite3_value_double","number",["number"]),kc=Ee("sqlite3_result_double","",["number","number"]),Fs=Ee("sqlite3_result_null","",["number"]),Eb=Ee("sqlite3_result_text","",["number","string","number","number"]),Ep=Ee("sqlite3_result_blob","",["number","number","number","number"]),Tp=Ee("sqlite3_result_int","",["number","number"]),lo=Ee("sqlite3_result_error","",["number","string","number"]),Sp=Ee("sqlite3_aggregate_context","number",["number","number"]),Tb=Ee("RegisterExtensionFunctions","number",["number"]);I.prototype.bind=function(oe){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(oe)?this.xb(oe):oe!=null&&typeof oe=="object"?this.yb(oe):!0},I.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var oe=gb(this.La);switch(oe){case 100:return!0;case 101:return!1;default:throw this.db.handleError(oe)}},I.prototype.sb=function(oe){return oe==null&&(oe=this.Ja,this.Ja+=1),ol(this.La,oe)},I.prototype.Cb=function(oe){if(oe==null&&(oe=this.Ja,this.Ja+=1),oe=ao(this.La,oe),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(oe)},I.prototype.Db=function(oe){return oe==null&&(oe=this.Ja,this.Ja+=1),ao(this.La,oe)},I.prototype.getBlob=function(oe){oe==null&&(oe=this.Ja,this.Ja+=1);var Ae=rr(this.La,oe);oe=Cc(this.La,oe);for(var He=new Uint8Array(Ae),et=0;et<Ae;et+=1)He[et]=be[oe+et];return He},I.prototype.get=function(oe,Ae){Ae=Ae||{},oe!=null&&this.bind(oe)&&this.step(),oe=[];for(var He=_c(this.La),et=0;et<He;et+=1)switch(rs(this.La,et)){case 1:var dt=Ae.useBigInt?this.Cb(et):this.sb(et);oe.push(dt);break;case 2:oe.push(this.sb(et));break;case 3:oe.push(this.Db(et));break;case 4:oe.push(this.getBlob(et));break;default:oe.push(null)}return oe},I.prototype.getColumnNames=function(){for(var oe=[],Ae=bb(this.La),He=0;He<Ae;He+=1)oe.push(Ac(this.La,He));return oe},I.prototype.getAsObject=function(oe,Ae){oe=this.get(oe,Ae),Ae=this.getColumnNames();for(var He={},et=0;et<Ae.length;et+=1)He[Ae[et]]=oe[et];return He},I.prototype.getSQL=function(){return vp(this.La)},I.prototype.getNormalizedSQL=function(){return hb(this.La)},I.prototype.run=function(oe){return oe!=null&&this.bind(oe),this.step(),this.reset()},I.prototype.nb=function(oe,Ae){Ae==null&&(Ae=this.Ja,this.Ja+=1),oe=k(oe);var He=xc(oe);this.fb.push(He),this.db.handleError(fb(this.La,Ae,He,oe.length-1,0))},I.prototype.wb=function(oe,Ae){Ae==null&&(Ae=this.Ja,this.Ja+=1);var He=xc(oe);this.fb.push(He),this.db.handleError(Ld(this.La,Ae,He,oe.length,0))},I.prototype.mb=function(oe,Ae){Ae==null&&(Ae=this.Ja,this.Ja+=1),this.db.handleError((oe===(oe|0)?pb:Sc)(this.La,Ae,oe))},I.prototype.zb=function(oe){oe==null&&(oe=this.Ja,this.Ja+=1),Ld(this.La,oe,0,0,0)},I.prototype.ob=function(oe,Ae){switch(Ae==null&&(Ae=this.Ja,this.Ja+=1),typeof oe){case"string":this.nb(oe,Ae);return;case"number":this.mb(oe,Ae);return;case"bigint":this.nb(oe.toString(),Ae);return;case"boolean":this.mb(oe+0,Ae);return;case"object":if(oe===null){this.zb(Ae);return}if(oe.length!=null){this.wb(oe,Ae);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+oe+")."},I.prototype.yb=function(oe){var Ae=this;return Object.keys(oe).forEach(function(He){var et=mb(Ae.La,He);et!==0&&Ae.ob(oe[He],et)}),!0},I.prototype.xb=function(oe){for(var Ae=0;Ae<oe.length;Ae+=1)this.ob(oe[Ae],Ae+1);return!0},I.prototype.reset=function(){return this.freemem(),vb(this.La)===0&&wp(this.La)===0},I.prototype.freemem=function(){for(var oe;(oe=this.fb.pop())!==void 0;)rl(oe)},I.prototype.free=function(){this.freemem();var oe=wb(this.La)===0;return delete this.db.Za[this.La],this.La=0,oe},U.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var oe=so(),Ae=ns(4);Zt(ve),Zt(Ae);try{this.db.handleError(Tc(this.db.db,this.eb,-1,ve,Ae)),this.eb=_n(Ae,"i32");var He=_n(ve,"i32");return He===0?(this.gb(),{done:!0}):(this.Ua=new I(He,this.db),this.db.Za[He]=this.Ua,{value:this.Ua,done:!1})}catch(et){throw this.ib=z(this.eb),this.gb(),et}finally{sl(oe)}},U.prototype.gb=function(){rl(this.Ya),this.Ya=null},U.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:z(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(U.prototype[Symbol.iterator]=function(){return this}),X.prototype.run=function(oe,Ae){if(!this.db)throw"Database closed";if(Ae){oe=this.prepare(oe,Ae);try{oe.step()}finally{oe.free()}}else this.handleError(mt(this.db,oe,0,0,ve));return this},X.prototype.exec=function(oe,Ae,He){if(!this.db)throw"Database closed";var et=so(),dt=null;try{var At=ue(oe)+1,sr=ns(At);te(oe,be,sr,At);var si=sr,Fi=ns(4);for(oe=[];_n(si,"i8")!==0;){Zt(ve),Zt(Fi),this.handleError(Tc(this.db,si,-1,ve,Fi));var qi=_n(ve,"i32");if(si=_n(Fi,"i32"),qi!==0){for(At=null,dt=new I(qi,this),Ae!=null&&dt.bind(Ae);dt.step();)At===null&&(At={columns:dt.getColumnNames(),values:[]},oe.push(At)),At.values.push(dt.get(null,He));dt.free()}}return oe}catch(cl){throw dt&&dt.free(),cl}finally{sl(et)}},X.prototype.each=function(oe,Ae,He,et,dt){typeof Ae=="function"&&(et=He,He=Ae,Ae=void 0),oe=this.prepare(oe,Ae);try{for(;oe.step();)He(oe.getAsObject(null,dt))}finally{oe.free()}if(typeof et=="function")return et()},X.prototype.prepare=function(oe,Ae){if(Zt(ve),this.handleError(is(this.db,oe,-1,ve,0)),oe=_n(ve,"i32"),oe===0)throw"Nothing to prepare";var He=new I(oe,this);return Ae!=null&&He.bind(Ae),this.Za[oe]=He},X.prototype.iterateStatements=function(oe){return new U(oe,this)},X.prototype.export=function(){Object.values(this.Za).forEach(function(Ae){Ae.free()}),Object.values(this.Na).forEach(wa),this.Na={},this.handleError(Tt(this.db));var oe=fn(this.filename);return this.handleError(tt(this.filename,ve)),this.db=_n(ve,"i32"),oe},X.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(oe){oe.free()}),Object.values(this.Na).forEach(wa),this.Na={},this.handleError(Tt(this.db)),gc("/"+this.filename),this.db=null)},X.prototype.handleError=function(oe){if(oe===0)return null;throw oe=yb(this.db),Error(oe)},X.prototype.getRowsModified=function(){return on(this.db)},X.prototype.create_function=function(oe,Ae){Object.prototype.hasOwnProperty.call(this.Na,oe)&&(wa(this.Na[oe]),delete this.Na[oe]);var He=Bs(function(et,dt,At){dt=A(dt,At);try{var sr=Ae.apply(null,dt)}catch(si){lo(et,si,-1);return}x(et,sr)},"viii");return this.Na[oe]=He,this.handleError(xp(this.db,oe,Ae.length,1,0,He,0,0,0)),this},X.prototype.create_aggregate=function(oe,Ae){var He=Ae.init||function(){return null},et=Ae.finalize||function(Fi){return Fi},dt=Ae.step;if(!dt)throw"An aggregate function must have a step function in "+oe;var At={};Object.hasOwnProperty.call(this.Na,oe)&&(wa(this.Na[oe]),delete this.Na[oe]),Ae=oe+"__finalize",Object.hasOwnProperty.call(this.Na,Ae)&&(wa(this.Na[Ae]),delete this.Na[Ae]);var sr=Bs(function(Fi,qi,cl){var qs=Sp(Fi,1);Object.hasOwnProperty.call(At,qs)||(At[qs]=He()),qi=A(qi,cl),qi=[At[qs]].concat(qi);try{At[qs]=dt.apply(null,qi)}catch(Sb){delete At[qs],lo(Fi,Sb,-1)}},"viii"),si=Bs(function(Fi){var qi=Sp(Fi,1);try{var cl=et(At[qi])}catch(qs){delete At[qi],lo(Fi,qs,-1);return}x(Fi,cl),delete At[qi]},"vi");return this.Na[oe]=sr,this.Na[Ae]=si,this.handleError(xp(this.db,oe,dt.length-1,1,0,0,sr,si,0)),this},c.Database=X};var u=Object.assign({},c),d="./this.program",h=typeof window=="object",f=typeof importScripts=="function",m=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",g="",_,v,y,T,N,P;m?(g=f?vh.dirname(g)+"/":__dirname+"/",P=()=>{N||(T=vh,N=vh)},_=function(x,A){return P(),x=N.normalize(x),T.readFileSync(x,A?void 0:"utf8")},y=x=>(x=_(x,!0),x.buffer||(x=new Uint8Array(x)),x),v=(x,A,I)=>{P(),x=N.normalize(x),T.readFile(x,function(U,X){U?I(U):A(X.buffer)})},1<process.argv.length&&(d=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.exports=c,c.inspect=function(){return"[Emscripten Module object]"}):(h||f)&&(f?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=g.indexOf("blob:")!==0?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_=x=>{var A=new XMLHttpRequest;return A.open("GET",x,!1),A.send(null),A.responseText},f&&(y=x=>{var A=new XMLHttpRequest;return A.open("GET",x,!1),A.responseType="arraybuffer",A.send(null),new Uint8Array(A.response)}),v=(x,A,I)=>{var U=new XMLHttpRequest;U.open("GET",x,!0),U.responseType="arraybuffer",U.onload=()=>{U.status==200||U.status==0&&U.response?A(U.response):I()},U.onerror=I,U.send(null)});var F=c.print||console.log.bind(console),$=c.printErr||console.warn.bind(console);Object.assign(c,u),u=null,c.thisProgram&&(d=c.thisProgram);var B;c.wasmBinary&&(B=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&hn("no native wasm support detected");var M,Z=!1,O=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function K(x,A,I){var U=A+I;for(I=A;x[I]&&!(I>=U);)++I;if(16<I-A&&x.buffer&&O)return O.decode(x.subarray(A,I));for(U="";A<I;){var X=x[A++];if(X&128){var ve=x[A++]&63;if((X&224)==192)U+=String.fromCharCode((X&31)<<6|ve);else{var Ee=x[A++]&63;X=(X&240)==224?(X&15)<<12|ve<<6|Ee:(X&7)<<18|ve<<12|Ee<<6|x[A++]&63,65536>X?U+=String.fromCharCode(X):(X-=65536,U+=String.fromCharCode(55296|X>>10,56320|X&1023))}}else U+=String.fromCharCode(X)}return U}function z(x,A){return x?K(de,x,A):""}function te(x,A,I,U){if(!(0<U))return 0;var X=I;U=I+U-1;for(var ve=0;ve<x.length;++ve){var Ee=x.charCodeAt(ve);if(55296<=Ee&&57343>=Ee){var tt=x.charCodeAt(++ve);Ee=65536+((Ee&1023)<<10)|tt&1023}if(127>=Ee){if(I>=U)break;A[I++]=Ee}else{if(2047>=Ee){if(I+1>=U)break;A[I++]=192|Ee>>6}else{if(65535>=Ee){if(I+2>=U)break;A[I++]=224|Ee>>12}else{if(I+3>=U)break;A[I++]=240|Ee>>18,A[I++]=128|Ee>>12&63}A[I++]=128|Ee>>6&63}A[I++]=128|Ee&63}}return A[I]=0,I-X}function ue(x){for(var A=0,I=0;I<x.length;++I){var U=x.charCodeAt(I);127>=U?A++:2047>=U?A+=2:55296<=U&&57343>=U?(A+=4,++I):A+=3}return A}var ye,be,de,he,ee,le,Te,$e;function qe(){var x=M.buffer;ye=x,c.HEAP8=be=new Int8Array(x),c.HEAP16=he=new Int16Array(x),c.HEAP32=ee=new Int32Array(x),c.HEAPU8=de=new Uint8Array(x),c.HEAPU16=new Uint16Array(x),c.HEAPU32=le=new Uint32Array(x),c.HEAPF32=Te=new Float32Array(x),c.HEAPF64=$e=new Float64Array(x)}var Ve,Je=[],it=[],qt=[];function Jt(){var x=c.preRun.shift();Je.unshift(x)}var Yn=0,Bn=null;function hn(x){throw c.onAbort&&c.onAbort(x),x="Aborted("+x+")",$(x),Z=!0,new WebAssembly.RuntimeError(x+". Build with -sASSERTIONS for more info.")}function wi(){return Ut.startsWith("data:application/octet-stream;base64,")}var Ut;if(Ut="sql-wasm.wasm",!wi()){var Jr=Ut;Ut=c.locateFile?c.locateFile(Jr,g):g+Jr}function Ps(){var x=Ut;try{if(x==Ut&&B)return new Uint8Array(B);if(y)return y(x);throw"both async and sync fetching of the wasm failed"}catch(A){hn(A)}}function Zr(){if(!B&&(h||f)){if(typeof fetch=="function"&&!Ut.startsWith("file://"))return fetch(Ut,{credentials:"same-origin"}).then(function(x){if(!x.ok)throw"failed to load wasm binary file at '"+Ut+"'";return x.arrayBuffer()}).catch(function(){return Ps()});if(v)return new Promise(function(x,A){v(Ut,function(I){x(new Uint8Array(I))},A)})}return Promise.resolve().then(function(){return Ps()})}var We,xt;function lt(x){for(;0<x.length;)x.shift()(c)}function _n(x,A="i8"){switch(A.endsWith("*")&&(A="*"),A){case"i1":return be[x>>0];case"i8":return be[x>>0];case"i16":return he[x>>1];case"i32":return ee[x>>2];case"i64":return ee[x>>2];case"float":return Te[x>>2];case"double":return $e[x>>3];case"*":return le[x>>2];default:hn("invalid type for getValue: "+A)}return null}function Zt(x){var A="i32";switch(A.endsWith("*")&&(A="*"),A){case"i1":be[x>>0]=0;break;case"i8":be[x>>0]=0;break;case"i16":he[x>>1]=0;break;case"i32":ee[x>>2]=0;break;case"i64":xt=[0,(We=0,1<=+Math.abs(We)?0<We?(Math.min(+Math.floor(We/4294967296),4294967295)|0)>>>0:~~+Math.ceil((We-+(~~We>>>0))/4294967296)>>>0:0)],ee[x>>2]=xt[0],ee[x+4>>2]=xt[1];break;case"float":Te[x>>2]=0;break;case"double":$e[x>>3]=0;break;case"*":le[x>>2]=0;break;default:hn("invalid type for setValue: "+A)}}var xi=(x,A)=>{for(var I=0,U=x.length-1;0<=U;U--){var X=x[U];X==="."?x.splice(U,1):X===".."?(x.splice(U,1),I++):I&&(x.splice(U,1),I--)}if(A)for(;I;I--)x.unshift("..");return x},ae=x=>{var A=x.charAt(0)==="/",I=x.substr(-1)==="/";return(x=xi(x.split("/").filter(U=>!!U),!A).join("/"))||A||(x="."),x&&I&&(x+="/"),(A?"/":"")+x},we=x=>{var A=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(x).slice(1);return x=A[0],A=A[1],!x&&!A?".":(A&&(A=A.substr(0,A.length-1)),x+A)},ke=x=>{if(x==="/")return"/";x=ae(x),x=x.replace(/\/$/,"");var A=x.lastIndexOf("/");return A===-1?x:x.substr(A+1)};function R(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var x=new Uint8Array(1);return()=>(crypto.getRandomValues(x),x[0])}if(m)try{var A=vh;return()=>A.randomBytes(1)[0]}catch(I){}return()=>hn("randomDevice")}function S(){for(var x="",A=!1,I=arguments.length-1;-1<=I&&!A;I--){if(A=0<=I?arguments[I]:"/",typeof A!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!A)return"";x=A+"/"+x,A=A.charAt(0)==="/"}return x=xi(x.split("/").filter(U=>!!U),!A).join("/"),(A?"/":"")+x||"."}function k(x,A){var I=Array(ue(x)+1);return x=te(x,I,0,I.length),A&&(I.length=x),I}var L=[];function W(x,A){L[x]={input:[],output:[],Xa:A},Rs(x,Y)}var Y={open:function(x){var A=L[x.node.rdev];if(!A)throw new Se(43);x.tty=A,x.seekable=!1},close:function(x){x.tty.Xa.fsync(x.tty)},fsync:function(x){x.tty.Xa.fsync(x.tty)},read:function(x,A,I,U){if(!x.tty||!x.tty.Xa.tb)throw new Se(60);for(var X=0,ve=0;ve<U;ve++){try{var Ee=x.tty.Xa.tb(x.tty)}catch(tt){throw new Se(29)}if(Ee===void 0&&X===0)throw new Se(6);if(Ee==null)break;X++,A[I+ve]=Ee}return X&&(x.node.timestamp=Date.now()),X},write:function(x,A,I,U){if(!x.tty||!x.tty.Xa.jb)throw new Se(60);try{for(var X=0;X<U;X++)x.tty.Xa.jb(x.tty,A[I+X])}catch(ve){throw new Se(29)}return U&&(x.node.timestamp=Date.now()),X}},ce={tb:function(x){if(!x.input.length){var A=null;if(m){var I=Buffer.alloc(256),U=0;try{U=T.readSync(process.stdin.fd,I,0,256,-1)}catch(X){if(X.toString().includes("EOF"))U=0;else throw X}0<U?A=I.slice(0,U).toString("utf-8"):A=null}else typeof window<"u"&&typeof window.prompt=="function"?(A=window.prompt("Input: "),A!==null&&(A+="\n")):typeof readline=="function"&&(A=readline(),A!==null&&(A+="\n"));if(!A)return null;x.input=k(A,!0)}return x.input.shift()},jb:function(x,A){A===null||A===10?(F(K(x.output,0)),x.output=[]):A!=0&&x.output.push(A)},fsync:function(x){x.output&&0<x.output.length&&(F(K(x.output,0)),x.output=[])}},Ie={jb:function(x,A){A===null||A===10?($(K(x.output,0)),x.output=[]):A!=0&&x.output.push(A)},fsync:function(x){x.output&&0<x.output.length&&($(K(x.output,0)),x.output=[])}},Re={Qa:null,Ra:function(){return Re.createNode(null,"/",16895,0)},createNode:function(x,A,I,U){if((I&61440)===24576||(I&61440)===4096)throw new Se(63);return Re.Qa||(Re.Qa={dir:{node:{Pa:Re.Ga.Pa,Oa:Re.Ga.Oa,lookup:Re.Ga.lookup,ab:Re.Ga.ab,rename:Re.Ga.rename,unlink:Re.Ga.unlink,rmdir:Re.Ga.rmdir,readdir:Re.Ga.readdir,symlink:Re.Ga.symlink},stream:{Ta:Re.Ha.Ta}},file:{node:{Pa:Re.Ga.Pa,Oa:Re.Ga.Oa},stream:{Ta:Re.Ha.Ta,read:Re.Ha.read,write:Re.Ha.write,lb:Re.Ha.lb,bb:Re.Ha.bb,cb:Re.Ha.cb}},link:{node:{Pa:Re.Ga.Pa,Oa:Re.Ga.Oa,readlink:Re.Ga.readlink},stream:{}},pb:{node:{Pa:Re.Ga.Pa,Oa:Re.Ga.Oa},stream:Rd}}),I=Xo(x,A,I,U),(I.mode&61440)===16384?(I.Ga=Re.Qa.dir.node,I.Ha=Re.Qa.dir.stream,I.Ia={}):(I.mode&61440)===32768?(I.Ga=Re.Qa.file.node,I.Ha=Re.Qa.file.stream,I.Ma=0,I.Ia=null):(I.mode&61440)===40960?(I.Ga=Re.Qa.link.node,I.Ha=Re.Qa.link.stream):(I.mode&61440)===8192&&(I.Ga=Re.Qa.pb.node,I.Ha=Re.Qa.pb.stream),I.timestamp=Date.now(),x&&(x.Ia[A]=I,x.timestamp=I.timestamp),I},Jb:function(x){return x.Ia?x.Ia.subarray?x.Ia.subarray(0,x.Ma):new Uint8Array(x.Ia):new Uint8Array(0)},qb:function(x,A){var I=x.Ia?x.Ia.length:0;I>=A||(A=Math.max(A,I*(1048576>I?2:1.125)>>>0),I!=0&&(A=Math.max(A,256)),I=x.Ia,x.Ia=new Uint8Array(A),0<x.Ma&&x.Ia.set(I.subarray(0,x.Ma),0))},Gb:function(x,A){if(x.Ma!=A)if(A==0)x.Ia=null,x.Ma=0;else{var I=x.Ia;x.Ia=new Uint8Array(A),I&&x.Ia.set(I.subarray(0,Math.min(A,x.Ma))),x.Ma=A}},Ga:{Pa:function(x){var A={};return A.dev=(x.mode&61440)===8192?x.id:1,A.ino=x.id,A.mode=x.mode,A.nlink=1,A.uid=0,A.gid=0,A.rdev=x.rdev,(x.mode&61440)===16384?A.size=4096:(x.mode&61440)===32768?A.size=x.Ma:(x.mode&61440)===40960?A.size=x.link.length:A.size=0,A.atime=new Date(x.timestamp),A.mtime=new Date(x.timestamp),A.ctime=new Date(x.timestamp),A.Ab=4096,A.blocks=Math.ceil(A.size/A.Ab),A},Oa:function(x,A){A.mode!==void 0&&(x.mode=A.mode),A.timestamp!==void 0&&(x.timestamp=A.timestamp),A.size!==void 0&&Re.Gb(x,A.size)},lookup:function(){throw Yo[44]},ab:function(x,A,I,U){return Re.createNode(x,A,I,U)},rename:function(x,A,I){if((x.mode&61440)===16384){try{var U=ri(A,I)}catch(ve){}if(U)for(var X in U.Ia)throw new Se(55)}delete x.parent.Ia[x.name],x.parent.timestamp=Date.now(),x.name=I,A.Ia[I]=x,A.timestamp=x.parent.timestamp,x.parent=A},unlink:function(x,A){delete x.Ia[A],x.timestamp=Date.now()},rmdir:function(x,A){var I=ri(x,A),U;for(U in I.Ia)throw new Se(55);delete x.Ia[A],x.timestamp=Date.now()},readdir:function(x){var A=[".",".."],I;for(I in x.Ia)x.Ia.hasOwnProperty(I)&&A.push(I);return A},symlink:function(x,A,I){return x=Re.createNode(x,A,41471,0),x.link=I,x},readlink:function(x){if((x.mode&61440)!==40960)throw new Se(28);return x.link}},Ha:{read:function(x,A,I,U,X){var ve=x.node.Ia;if(X>=x.node.Ma)return 0;if(x=Math.min(x.node.Ma-X,U),8<x&&ve.subarray)A.set(ve.subarray(X,X+x),I);else for(U=0;U<x;U++)A[I+U]=ve[X+U];return x},write:function(x,A,I,U,X,ve){if(A.buffer===be.buffer&&(ve=!1),!U)return 0;if(x=x.node,x.timestamp=Date.now(),A.subarray&&(!x.Ia||x.Ia.subarray)){if(ve)return x.Ia=A.subarray(I,I+U),x.Ma=U;if(x.Ma===0&&X===0)return x.Ia=A.slice(I,I+U),x.Ma=U;if(X+U<=x.Ma)return x.Ia.set(A.subarray(I,I+U),X),U}if(Re.qb(x,X+U),x.Ia.subarray&&A.subarray)x.Ia.set(A.subarray(I,I+U),X);else for(ve=0;ve<U;ve++)x.Ia[X+ve]=A[I+ve];return x.Ma=Math.max(x.Ma,X+U),U},Ta:function(x,A,I){if(I===1?A+=x.position:I===2&&(x.node.mode&61440)===32768&&(A+=x.node.Ma),0>A)throw new Se(28);return A},lb:function(x,A,I){Re.qb(x.node,A+I),x.node.Ma=Math.max(x.node.Ma,A+I)},bb:function(x,A,I,U,X){if((x.node.mode&61440)!==32768)throw new Se(43);if(x=x.node.Ia,X&2||x.buffer!==ye){if((0<I||I+A<x.length)&&(x.subarray?x=x.subarray(I,I+A):x=Array.prototype.slice.call(x,I,I+A)),I=!0,A=65536*Math.ceil(A/65536),(X=bp(65536,A))?(de.fill(0,X,X+A),A=X):A=0,!A)throw new Se(48);be.set(x,A)}else I=!1,A=x.byteOffset;return{Fb:A,vb:I}},cb:function(x,A,I,U,X){if((x.node.mode&61440)!==32768)throw new Se(43);return X&2||Re.Ha.write(x,A,0,U,I,!1),0}}},bt=null,It={},ct=[],Pd=1,_r=null,fc=!0,Se=null,Yo={},Fn=(x,A={})=>{if(x=S("/",x),!x)return{path:"",node:null};if(A=Object.assign({rb:!0,kb:0},A),8<A.kb)throw new Se(32);x=xi(x.split("/").filter(Ee=>!!Ee),!1);for(var I=bt,U="/",X=0;X<x.length;X++){var ve=X===x.length-1;if(ve&&A.parent)break;if(I=ri(I,x[X]),U=ae(U+"/"+x[X]),I.Va&&(!ve||ve&&A.rb)&&(I=I.Va.root),!ve||A.Sa){for(ve=0;(I.mode&61440)===40960;)if(I=Cr(U),U=S(we(U),I),I=Fn(U,{kb:A.kb+1}).node,40<ve++)throw new Se(32)}}return{path:U,node:I}},ga=x=>{for(var A;;){if(x===x.parent)return x=x.Ra.ub,A?x[x.length-1]!=="/"?x+"/"+A:x+A:x;A=A?x.name+"/"+A:x.name,x=x.parent}},no=(x,A)=>{for(var I=0,U=0;U<A.length;U++)I=(I<<5)-I+A.charCodeAt(U)|0;return(x+I>>>0)%_r.length},pc=x=>{var A=no(x.parent.id,x.name);if(_r[A]===x)_r[A]=x.Wa;else for(A=_r[A];A;){if(A.Wa===x){A.Wa=x.Wa;break}A=A.Wa}},ri=(x,A)=>{var I;if(I=(I=Ei(x,"x"))?I:x.Ga.lookup?0:2)throw new Se(I,x);for(I=_r[no(x.id,A)];I;I=I.Wa){var U=I.name;if(I.parent.id===x.id&&U===A)return I}return x.Ga.lookup(x,A)},Xo=(x,A,I,U)=>(x=new gp(x,A,I,U),A=no(x.parent.id,x.name),x.Wa=_r[A],_r[A]=x),Id={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Jo=x=>{var A=["r","w","rw"][x&3];return x&512&&(A+="w"),A},Ei=(x,A)=>{if(fc)return 0;if(!A.includes("r")||x.mode&292){if(A.includes("w")&&!(x.mode&146)||A.includes("x")&&!(x.mode&73))return 2}else return 2;return 0},ya=(x,A)=>{try{return ri(x,A),20}catch(I){}return Ei(x,"wx")},Is=(x,A,I)=>{try{var U=ri(x,A)}catch(X){return X.Ka}if(x=Ei(x,"wx"))return x;if(I){if((U.mode&61440)!==16384)return 54;if(U===U.parent||ga(U)==="/")return 10}else if((U.mode&61440)===16384)return 31;return 0},Rt=(x=0)=>{for(;4096>=x;x++)if(!ct[x])return x;throw new Se(33)},mc=(x,A)=>(ts||(ts=function(){this.$a={}},ts.prototype={},Object.defineProperties(ts.prototype,{object:{get:function(){return this.node},set:function(I){this.node=I}},flags:{get:function(){return this.$a.flags},set:function(I){this.$a.flags=I}},position:{get:function(){return this.$a.position},set:function(I){this.$a.position=I}}})),x=Object.assign(new ts,x),A=Rt(A),x.fd=A,ct[A]=x),Rd={open:x=>{x.Ha=It[x.node.rdev].Ha,x.Ha.open&&x.Ha.open(x)},Ta:()=>{throw new Se(70)}},Rs=(x,A)=>{It[x]={Ha:A}},Ti=(x,A)=>{var I=A==="/",U=!A;if(I&&bt)throw new Se(10);if(!I&&!U){var X=Fn(A,{rb:!1});if(A=X.path,X=X.node,X.Va)throw new Se(10);if((X.mode&61440)!==16384)throw new Se(54)}A={type:x,Kb:{},ub:A,Eb:[]},x=x.Ra(A),x.Ra=A,A.root=x,I?bt=x:X&&(X.Va=A,X.Ra&&X.Ra.Eb.push(A))},es=(x,A,I)=>{var U=Fn(x,{parent:!0}).node;if(x=ke(x),!x||x==="."||x==="..")throw new Se(28);var X=ya(U,x);if(X)throw new Se(X);if(!U.Ga.ab)throw new Se(63);return U.Ga.ab(U,x,A,I)},ut=(x,A)=>es(x,(A!==void 0?A:511)&1023|16384,0),Os=(x,A,I)=>{typeof I>"u"&&(I=A,A=438),es(x,A|8192,I)},Ms=(x,A)=>{if(!S(x))throw new Se(44);var I=Fn(A,{parent:!0}).node;if(!I)throw new Se(44);A=ke(A);var U=ya(I,A);if(U)throw new Se(U);if(!I.Ga.symlink)throw new Se(63);I.Ga.symlink(I,A,x)},ba=x=>{var A=Fn(x,{parent:!0}).node;x=ke(x);var I=ri(A,x),U=Is(A,x,!0);if(U)throw new Se(U);if(!A.Ga.rmdir)throw new Se(63);if(I.Va)throw new Se(10);A.Ga.rmdir(A,x),pc(I)},gc=x=>{var A=Fn(x,{parent:!0}).node;if(!A)throw new Se(44);x=ke(x);var I=ri(A,x),U=Is(A,x,!1);if(U)throw new Se(U);if(!A.Ga.unlink)throw new Se(63);if(I.Va)throw new Se(10);A.Ga.unlink(A,x),pc(I)},Cr=x=>{if(x=Fn(x).node,!x)throw new Se(44);if(!x.Ga.readlink)throw new Se(28);return S(ga(x.parent),x.Ga.readlink(x))},Et=(x,A)=>{if(x=Fn(x,{Sa:!A}).node,!x)throw new Se(44);if(!x.Ga.Pa)throw new Se(63);return x.Ga.Pa(x)},Zo=x=>Et(x,!0),Ar=(x,A)=>{if(x=typeof x=="string"?Fn(x,{Sa:!0}).node:x,!x.Ga.Oa)throw new Se(63);x.Ga.Oa(x,{mode:A&4095|x.mode&-4096,timestamp:Date.now()})},Od=(x,A)=>{if(0>A)throw new Se(28);if(x=typeof x=="string"?Fn(x,{Sa:!0}).node:x,!x.Ga.Oa)throw new Se(63);if((x.mode&61440)===16384)throw new Se(31);if((x.mode&61440)!==32768)throw new Se(28);var I=Ei(x,"w");if(I)throw new Se(I);x.Ga.Oa(x,{size:A,timestamp:Date.now()})},va=(x,A,I)=>{if(x==="")throw new Se(44);if(typeof A=="string"){var U=Id[A];if(typeof U>"u")throw Error("Unknown file open mode: "+A);A=U}if(I=A&64?(typeof I>"u"?438:I)&4095|32768:0,typeof x=="object")var X=x;else{x=ae(x);try{X=Fn(x,{Sa:!(A&131072)}).node}catch(ve){}}if(U=!1,A&64)if(X){if(A&128)throw new Se(20)}else X=es(x,I,0),U=!0;if(!X)throw new Se(44);if((X.mode&61440)===8192&&(A&=-513),A&65536&&(X.mode&61440)!==16384)throw new Se(54);if(!U&&(I=X?(X.mode&61440)===40960?32:(X.mode&61440)===16384&&(Jo(A)!=="r"||A&512)?31:Ei(X,Jo(A)):44))throw new Se(I);return A&512&&!U&&Od(X,0),A&=-131713,X=mc({node:X,path:ga(X),flags:A,seekable:!0,position:0,Ha:X.Ha,Ib:[],error:!1}),X.Ha.open&&X.Ha.open(X),!c.logReadFiles||A&1||($s||($s={}),x in $s||($s[x]=1)),X},pe=x=>{if(x.fd===null)throw new Se(8);x.hb&&(x.hb=null);try{x.Ha.close&&x.Ha.close(x)}catch(A){throw A}finally{ct[x.fd]=null}x.fd=null},Pe=(x,A,I)=>{if(x.fd===null)throw new Se(8);if(!x.seekable||!x.Ha.Ta)throw new Se(70);if(I!=0&&I!=1&&I!=2)throw new Se(28);x.position=x.Ha.Ta(x,A,I),x.Ib=[]},Ue=(x,A,I,U,X)=>{if(0>U||0>X)throw new Se(28);if(x.fd===null)throw new Se(8);if((x.flags&2097155)===1)throw new Se(8);if((x.node.mode&61440)===16384)throw new Se(31);if(!x.Ha.read)throw new Se(28);var ve=typeof X<"u";if(!ve)X=x.position;else if(!x.seekable)throw new Se(70);return A=x.Ha.read(x,A,I,U,X),ve||(x.position+=A),A},jt=(x,A,I,U,X)=>{if(0>U||0>X)throw new Se(28);if(x.fd===null)throw new Se(8);if(!(x.flags&2097155))throw new Se(8);if((x.node.mode&61440)===16384)throw new Se(31);if(!x.Ha.write)throw new Se(28);x.seekable&&x.flags&1024&&Pe(x,0,2);var ve=typeof X<"u";if(!ve)X=x.position;else if(!x.seekable)throw new Se(70);return A=x.Ha.write(x,A,I,U,X,void 0),ve||(x.position+=A),A},fn=x=>{var A,I=va(x,I||0);x=Et(x).size;var U=new Uint8Array(x);return Ue(I,U,0,x,0),A=U,pe(I),A},Xn=()=>{Se||(Se=function(x,A){this.node=A,this.Hb=function(I){this.Ka=I},this.Hb(x),this.message="FS error"},Se.prototype=Error(),Se.prototype.constructor=Se,[44].forEach(x=>{Yo[x]=new Se(x),Yo[x].stack="<generic error, no stack>"}))},kr,el=(x,A)=>{var I=0;return x&&(I|=365),A&&(I|=146),I},Ls=(x,A,I)=>{x=ae("/dev/"+x);var U=el(!!A,!!I);yc||(yc=64);var X=yc++<<8|0;Rs(X,{open:ve=>{ve.seekable=!1},close:()=>{I&&I.buffer&&I.buffer.length&&I(10)},read:(ve,Ee,tt,Tt)=>{for(var mt=0,on=0;on<Tt;on++){try{var is=A()}catch(vp){throw new Se(29)}if(is===void 0&&mt===0)throw new Se(6);if(is==null)break;mt++,Ee[tt+on]=is}return mt&&(ve.node.timestamp=Date.now()),mt},write:(ve,Ee,tt,Tt)=>{for(var mt=0;mt<Tt;mt++)try{I(Ee[tt+mt])}catch(on){throw new Se(29)}return Tt&&(ve.node.timestamp=Date.now()),mt}}),Os(x,U,X)},yc,Dt={},ts,$s;function nr(x,A,I){if(A.charAt(0)==="/")return A;if(x=x===-100?"/":ir(x).path,A.length==0){if(!I)throw new Se(44);return x}return ae(x+"/"+A)}function bc(x,A,I){try{var U=x(A)}catch(X){if(X&&X.node&&ae(A)!==ae(ga(X.node)))return-54;throw X}return ee[I>>2]=U.dev,ee[I+8>>2]=U.ino,ee[I+12>>2]=U.mode,le[I+16>>2]=U.nlink,ee[I+20>>2]=U.uid,ee[I+24>>2]=U.gid,ee[I+28>>2]=U.rdev,xt=[U.size>>>0,(We=U.size,1<=+Math.abs(We)?0<We?(Math.min(+Math.floor(We/4294967296),4294967295)|0)>>>0:~~+Math.ceil((We-+(~~We>>>0))/4294967296)>>>0:0)],ee[I+40>>2]=xt[0],ee[I+44>>2]=xt[1],ee[I+48>>2]=4096,ee[I+52>>2]=U.blocks,xt=[Math.floor(U.atime.getTime()/1e3)>>>0,(We=Math.floor(U.atime.getTime()/1e3),1<=+Math.abs(We)?0<We?(Math.min(+Math.floor(We/4294967296),4294967295)|0)>>>0:~~+Math.ceil((We-+(~~We>>>0))/4294967296)>>>0:0)],ee[I+56>>2]=xt[0],ee[I+60>>2]=xt[1],le[I+64>>2]=0,xt=[Math.floor(U.mtime.getTime()/1e3)>>>0,(We=Math.floor(U.mtime.getTime()/1e3),1<=+Math.abs(We)?0<We?(Math.min(+Math.floor(We/4294967296),4294967295)|0)>>>0:~~+Math.ceil((We-+(~~We>>>0))/4294967296)>>>0:0)],ee[I+72>>2]=xt[0],ee[I+76>>2]=xt[1],le[I+80>>2]=0,xt=[Math.floor(U.ctime.getTime()/1e3)>>>0,(We=Math.floor(U.ctime.getTime()/1e3),1<=+Math.abs(We)?0<We?(Math.min(+Math.floor(We/4294967296),4294967295)|0)>>>0:~~+Math.ceil((We-+(~~We>>>0))/4294967296)>>>0:0)],ee[I+88>>2]=xt[0],ee[I+92>>2]=xt[1],le[I+96>>2]=0,xt=[U.ino>>>0,(We=U.ino,1<=+Math.abs(We)?0<We?(Math.min(+Math.floor(We/4294967296),4294967295)|0)>>>0:~~+Math.ceil((We-+(~~We>>>0))/4294967296)>>>0:0)],ee[I+104>>2]=xt[0],ee[I+108>>2]=xt[1],0}var tl=void 0;function vc(){return tl+=4,ee[tl-4>>2]}function ir(x){if(x=ct[x],!x)throw new Se(8);return x}function Nr(x){return le[x>>2]+4294967296*ee[x+4>>2]}function nl(x){var A=ue(x)+1,I=xa(A);return I&&te(x,be,I,A),I}function ub(x,A,I){function U(Tt){return(Tt=Tt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Tt[1]:"GMT"}var X=new Date().getFullYear(),ve=new Date(X,0,1),Ee=new Date(X,6,1);X=ve.getTimezoneOffset();var tt=Ee.getTimezoneOffset();ee[x>>2]=60*Math.max(X,tt),ee[A>>2]=+(X!=tt),x=U(ve),A=U(Ee),x=nl(x),A=nl(A),tt<X?(le[I>>2]=x,le[I+4>>2]=A):(le[I>>2]=A,le[I+4>>2]=x)}function il(x,A,I){il.Bb||(il.Bb=!0,ub(x,A,I))}var wc;wc=m?()=>{var x=process.hrtime();return 1e3*x[0]+x[1]/1e6}:()=>performance.now();var Si={};function mp(){if(!io){var x={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},A;for(A in Si)Si[A]===void 0?delete x[A]:x[A]=Si[A];var I=[];for(A in x)I.push(A+"="+x[A]);io=I}return io}var io,Bi=void 0,ro=[];function Bs(x,A){if(!Bi){Bi=new WeakMap;var I=Ve.length;if(Bi)for(var U=0;U<0+I;U++){var X=Ve.get(U);X&&Bi.set(X,U)}}if(Bi.has(x))return Bi.get(x);if(ro.length)I=ro.pop();else{try{Ve.grow(1)}catch(tt){throw tt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":tt}I=Ve.length-1}try{Ve.set(I,x)}catch(tt){if(!(tt instanceof TypeError))throw tt;if(typeof WebAssembly.Function=="function"){U=WebAssembly.Function,X={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var ve={parameters:[],results:A[0]=="v"?[]:[X[A[0]]]},Ee=1;Ee<A.length;++Ee)ve.parameters.push(X[A[Ee]]);A=new U(ve,x)}else{for(U=[1,96],X=A.slice(0,1),A=A.slice(1),ve={i:127,p:127,j:126,f:125,d:124},Ee=A.length,128>Ee?U.push(Ee):U.push(Ee%128|128,Ee>>7),Ee=0;Ee<A.length;++Ee)U.push(ve[A[Ee]]);X=="v"?U.push(0):U.push(1,ve[X]),A=[0,97,115,109,1,0,0,0,1],X=U.length,128>X?A.push(X):A.push(X%128|128,X>>7),A.push.apply(A,U),A.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),A=new WebAssembly.Module(new Uint8Array(A)),A=new WebAssembly.Instance(A,{e:{f:x}}).exports.f}Ve.set(I,A)}return Bi.set(x,I),I}function wa(x){Bi.delete(Ve.get(x)),ro.push(x)}function xc(x){var A=xa(x.length);return x.subarray||x.slice||(x=new Uint8Array(x)),de.set(x,A),A}function Md(x,A,I,U){var X={string:mt=>{var on=0;if(mt!=null&&mt!==0){var is=(mt.length<<2)+1;on=ns(is),te(mt,de,on,is)}return on},array:mt=>{var on=ns(mt.length);return be.set(mt,on),on}};x=c["_"+x];var ve=[],Ee=0;if(U)for(var tt=0;tt<U.length;tt++){var Tt=X[I[tt]];Tt?(Ee===0&&(Ee=so()),ve[tt]=Tt(U[tt])):ve[tt]=U[tt]}return I=x.apply(null,ve),I=function(mt){return Ee!==0&&sl(Ee),A==="string"?z(mt):A==="boolean"?!!mt:mt}(I)}function gp(x,A,I,U){x||(x=this),this.parent=x,this.Ra=x.Ra,this.Va=null,this.id=Pd++,this.name=A,this.mode=I,this.Ga={},this.Ha={},this.rdev=U}Object.defineProperties(gp.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(x){x?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(x){x?this.mode|=146:this.mode&=-147}}}),Xn(),_r=Array(4096),Ti(Re,"/"),ut("/tmp"),ut("/home"),ut("/home/web_user"),(()=>{ut("/dev"),Rs(259,{read:()=>0,write:(A,I,U,X)=>X}),Os("/dev/null",259),W(1280,ce),W(1536,Ie),Os("/dev/tty",1280),Os("/dev/tty1",1536);var x=R();Ls("random",x),Ls("urandom",x),ut("/dev/shm"),ut("/dev/shm/tmp")})(),(()=>{ut("/proc");var x=ut("/proc/self");ut("/proc/self/fd"),Ti({Ra:()=>{var A=Xo(x,"fd",16895,73);return A.Ga={lookup:(I,U)=>{var X=ct[+U];if(!X)throw new Se(8);return I={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>X.path}},I.parent=I}},A}},"/proc/self/fd")})();var db={a:function(x,A,I,U){hn("Assertion failed: "+z(x)+", at: "+[A?z(A):"unknown filename",I,U?z(U):"unknown function"])},h:function(x,A){try{return x=z(x),Ar(x,A),0}catch(I){if(typeof Dt>"u"||!(I instanceof Se))throw I;return-I.Ka}},H:function(x,A,I){try{if(A=z(A),A=nr(x,A),I&-8)return-28;var U=Fn(A,{Sa:!0}).node;return U?(x="",I&4&&(x+="r"),I&2&&(x+="w"),I&1&&(x+="x"),x&&Ei(U,x)?-2:0):-44}catch(X){if(typeof Dt>"u"||!(X instanceof Se))throw X;return-X.Ka}},i:function(x,A){try{var I=ct[x];if(!I)throw new Se(8);return Ar(I.node,A),0}catch(U){if(typeof Dt>"u"||!(U instanceof Se))throw U;return-U.Ka}},g:function(x){try{var A=ct[x];if(!A)throw new Se(8);var I=A.node,U=typeof I=="string"?Fn(I,{Sa:!0}).node:I;if(!U.Ga.Oa)throw new Se(63);return U.Ga.Oa(U,{timestamp:Date.now()}),0}catch(X){if(typeof Dt>"u"||!(X instanceof Se))throw X;return-X.Ka}},b:function(x,A,I){tl=I;try{var U=ir(x);switch(A){case 0:var X=vc();return 0>X?-28:mc(U,X).fd;case 1:case 2:return 0;case 3:return U.flags;case 4:return X=vc(),U.flags|=X,0;case 5:return X=vc(),he[X+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return ee[yp()>>2]=28,-1;default:return-28}}catch(ve){if(typeof Dt>"u"||!(ve instanceof Se))throw ve;return-ve.Ka}},G:function(x,A){try{var I=ir(x);return bc(Et,I.path,A)}catch(U){if(typeof Dt>"u"||!(U instanceof Se))throw U;return-U.Ka}},l:function(x,A,I){try{if(A=I+2097152>>>0<4194305-!!A?(A>>>0)+4294967296*I:NaN,isNaN(A))return-61;var U=ct[x];if(!U)throw new Se(8);if(!(U.flags&2097155))throw new Se(28);return Od(U.node,A),0}catch(X){if(typeof Dt>"u"||!(X instanceof Se))throw X;return-X.Ka}},B:function(x,A){try{if(A===0)return-28;var I=ue("/")+1;return A<I?-68:(te("/",de,x,A),I)}catch(U){if(typeof Dt>"u"||!(U instanceof Se))throw U;return-U.Ka}},E:function(x,A){try{return x=z(x),bc(Zo,x,A)}catch(I){if(typeof Dt>"u"||!(I instanceof Se))throw I;return-I.Ka}},y:function(x,A,I){try{return A=z(A),A=nr(x,A),A=ae(A),A[A.length-1]==="/"&&(A=A.substr(0,A.length-1)),ut(A,I),0}catch(U){if(typeof Dt>"u"||!(U instanceof Se))throw U;return-U.Ka}},D:function(x,A,I,U){try{A=z(A);var X=U&256;return A=nr(x,A,U&4096),bc(X?Zo:Et,A,I)}catch(ve){if(typeof Dt>"u"||!(ve instanceof Se))throw ve;return-ve.Ka}},v:function(x,A,I,U){tl=U;try{A=z(A),A=nr(x,A);var X=U?vc():0;return va(A,I,X).fd}catch(ve){if(typeof Dt>"u"||!(ve instanceof Se))throw ve;return-ve.Ka}},t:function(x,A,I,U){try{if(A=z(A),A=nr(x,A),0>=U)return-28;var X=Cr(A),ve=Math.min(U,ue(X)),Ee=be[I+ve];return te(X,de,I,U+1),be[I+ve]=Ee,ve}catch(tt){if(typeof Dt>"u"||!(tt instanceof Se))throw tt;return-tt.Ka}},s:function(x){try{return x=z(x),ba(x),0}catch(A){if(typeof Dt>"u"||!(A instanceof Se))throw A;return-A.Ka}},F:function(x,A){try{return x=z(x),bc(Et,x,A)}catch(I){if(typeof Dt>"u"||!(I instanceof Se))throw I;return-I.Ka}},p:function(x,A,I){try{return A=z(A),A=nr(x,A),I===0?gc(A):I===512?ba(A):hn("Invalid flags passed to unlinkat"),0}catch(U){if(typeof Dt>"u"||!(U instanceof Se))throw U;return-U.Ka}},o:function(x,A,I){try{if(A=z(A),A=nr(x,A,!0),I){var U=Nr(I),X=ee[I+8>>2];ve=1e3*U+X/1e6,I+=16,U=Nr(I),X=ee[I+8>>2],Ee=1e3*U+X/1e6}else var ve=Date.now(),Ee=ve;x=ve;var tt=Fn(A,{Sa:!0}).node;return tt.Ga.Oa(tt,{timestamp:Math.max(x,Ee)}),0}catch(Tt){if(typeof Dt>"u"||!(Tt instanceof Se))throw Tt;return-Tt.Ka}},e:function(){return Date.now()},j:function(x,A){x=new Date(1e3*Nr(x)),ee[A>>2]=x.getSeconds(),ee[A+4>>2]=x.getMinutes(),ee[A+8>>2]=x.getHours(),ee[A+12>>2]=x.getDate(),ee[A+16>>2]=x.getMonth(),ee[A+20>>2]=x.getFullYear()-1900,ee[A+24>>2]=x.getDay();var I=new Date(x.getFullYear(),0,1);ee[A+28>>2]=(x.getTime()-I.getTime())/864e5|0,ee[A+36>>2]=-(60*x.getTimezoneOffset());var U=new Date(x.getFullYear(),6,1).getTimezoneOffset();I=I.getTimezoneOffset(),ee[A+32>>2]=(U!=I&&x.getTimezoneOffset()==Math.min(I,U))|0},w:function(x,A,I,U,X,ve){try{var Ee=ir(U);if(A&2&&!(I&2)&&(Ee.flags&2097155)!==2)throw new Se(2);if((Ee.flags&2097155)===1)throw new Se(2);if(!Ee.Ha.bb)throw new Se(43);var tt=Ee.Ha.bb(Ee,x,X,A,I),Tt=tt.Fb;return ee[ve>>2]=tt.vb,Tt}catch(mt){if(typeof Dt>"u"||!(mt instanceof Se))throw mt;return-mt.Ka}},x:function(x,A,I,U,X,ve){try{var Ee=ir(X);if(I&2){var tt=de.slice(x,x+A);Ee&&Ee.Ha.cb&&Ee.Ha.cb(Ee,tt,ve,A,U)}}catch(Tt){if(typeof Dt>"u"||!(Tt instanceof Se))throw Tt;return-Tt.Ka}},n:il,q:function(){return 2147483648},d:wc,c:function(x){var A=de.length;if(x>>>=0,2147483648<x)return!1;for(var I=1;4>=I;I*=2){var U=A*(1+.2/I);U=Math.min(U,x+100663296);var X=Math;U=Math.max(x,U),X=X.min.call(X,2147483648,U+(65536-U%65536)%65536);e:{try{M.grow(X-ye.byteLength+65535>>>16),qe();var ve=1;break e}catch(Ee){}ve=void 0}if(ve)return!0}return!1},z:function(x,A){var I=0;return mp().forEach(function(U,X){var ve=A+I;for(X=le[x+4*X>>2]=ve,ve=0;ve<U.length;++ve)be[X++>>0]=U.charCodeAt(ve);be[X>>0]=0,I+=U.length+1}),0},A:function(x,A){var I=mp();le[x>>2]=I.length;var U=0;return I.forEach(function(X){U+=X.length+1}),le[A>>2]=U,0},f:function(x){try{var A=ir(x);return pe(A),0}catch(I){if(typeof Dt>"u"||!(I instanceof Se))throw I;return I.Ka}},m:function(x,A){try{var I=ir(x);return be[A>>0]=I.tty?2:(I.mode&61440)===16384?3:(I.mode&61440)===40960?7:4,0}catch(U){if(typeof Dt>"u"||!(U instanceof Se))throw U;return U.Ka}},u:function(x,A,I,U){try{e:{var X=ir(x);x=A;for(var ve=A=0;ve<I;ve++){var Ee=le[x>>2],tt=le[x+4>>2];x+=8;var Tt=Ue(X,be,Ee,tt);if(0>Tt){var mt=-1;break e}if(A+=Tt,Tt<tt)break}mt=A}return le[U>>2]=mt,0}catch(on){if(typeof Dt>"u"||!(on instanceof Se))throw on;return on.Ka}},k:function(x,A,I,U,X){try{if(A=I+2097152>>>0<4194305-!!A?(A>>>0)+4294967296*I:NaN,isNaN(A))return 61;var ve=ir(x);return Pe(ve,A,U),xt=[ve.position>>>0,(We=ve.position,1<=+Math.abs(We)?0<We?(Math.min(+Math.floor(We/4294967296),4294967295)|0)>>>0:~~+Math.ceil((We-+(~~We>>>0))/4294967296)>>>0:0)],ee[X>>2]=xt[0],ee[X+4>>2]=xt[1],ve.hb&&A===0&&U===0&&(ve.hb=null),0}catch(Ee){if(typeof Dt>"u"||!(Ee instanceof Se))throw Ee;return Ee.Ka}},C:function(x){try{var A=ir(x);return A.Ha&&A.Ha.fsync?A.Ha.fsync(A):0}catch(I){if(typeof Dt>"u"||!(I instanceof Se))throw I;return I.Ka}},r:function(x,A,I,U){try{e:{var X=ir(x);x=A;for(var ve=A=0;ve<I;ve++){var Ee=le[x>>2],tt=le[x+4>>2];x+=8;var Tt=jt(X,be,Ee,tt);if(0>Tt){var mt=-1;break e}A+=Tt}mt=A}return le[U>>2]=mt,0}catch(on){if(typeof Dt>"u"||!(on instanceof Se))throw on;return on.Ka}}};(function(){function x(X){c.asm=X.exports,M=c.asm.I,qe(),Ve=c.asm.Aa,it.unshift(c.asm.J),Yn--,c.monitorRunDependencies&&c.monitorRunDependencies(Yn),Yn==0&&Bn&&(X=Bn,Bn=null,X())}function A(X){x(X.instance)}function I(X){return Zr().then(function(ve){return WebAssembly.instantiate(ve,U)}).then(function(ve){return ve}).then(X,function(ve){$("failed to asynchronously prepare wasm: "+ve),hn(ve)})}var U={a:db};if(Yn++,c.monitorRunDependencies&&c.monitorRunDependencies(Yn),c.instantiateWasm)try{return c.instantiateWasm(U,x)}catch(X){return $("Module.instantiateWasm callback failed with error: "+X),!1}return function(){return B||typeof WebAssembly.instantiateStreaming!="function"||wi()||Ut.startsWith("file://")||m||typeof fetch!="function"?I(A):fetch(Ut,{credentials:"same-origin"}).then(function(X){return WebAssembly.instantiateStreaming(X,U).then(A,function(ve){return $("wasm streaming compile failed: "+ve),$("falling back to ArrayBuffer instantiation"),I(A)})})}(),{}})(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.J).apply(null,arguments)},c._sqlite3_free=function(){return(c._sqlite3_free=c.asm.K).apply(null,arguments)},c._sqlite3_value_double=function(){return(c._sqlite3_value_double=c.asm.L).apply(null,arguments)},c._sqlite3_value_text=function(){return(c._sqlite3_value_text=c.asm.M).apply(null,arguments)};var yp=c.___errno_location=function(){return(yp=c.___errno_location=c.asm.N).apply(null,arguments)};c._sqlite3_prepare_v2=function(){return(c._sqlite3_prepare_v2=c.asm.O).apply(null,arguments)},c._sqlite3_step=function(){return(c._sqlite3_step=c.asm.P).apply(null,arguments)},c._sqlite3_finalize=function(){return(c._sqlite3_finalize=c.asm.Q).apply(null,arguments)},c._sqlite3_reset=function(){return(c._sqlite3_reset=c.asm.R).apply(null,arguments)},c._sqlite3_value_int=function(){return(c._sqlite3_value_int=c.asm.S).apply(null,arguments)},c._sqlite3_clear_bindings=function(){return(c._sqlite3_clear_bindings=c.asm.T).apply(null,arguments)},c._sqlite3_value_blob=function(){return(c._sqlite3_value_blob=c.asm.U).apply(null,arguments)},c._sqlite3_value_bytes=function(){return(c._sqlite3_value_bytes=c.asm.V).apply(null,arguments)},c._sqlite3_value_type=function(){return(c._sqlite3_value_type=c.asm.W).apply(null,arguments)},c._sqlite3_result_blob=function(){return(c._sqlite3_result_blob=c.asm.X).apply(null,arguments)},c._sqlite3_result_double=function(){return(c._sqlite3_result_double=c.asm.Y).apply(null,arguments)},c._sqlite3_result_error=function(){return(c._sqlite3_result_error=c.asm.Z).apply(null,arguments)},c._sqlite3_result_int=function(){return(c._sqlite3_result_int=c.asm._).apply(null,arguments)},c._sqlite3_result_int64=function(){return(c._sqlite3_result_int64=c.asm.$).apply(null,arguments)},c._sqlite3_result_null=function(){return(c._sqlite3_result_null=c.asm.aa).apply(null,arguments)},c._sqlite3_result_text=function(){return(c._sqlite3_result_text=c.asm.ba).apply(null,arguments)},c._sqlite3_sql=function(){return(c._sqlite3_sql=c.asm.ca).apply(null,arguments)},c._sqlite3_aggregate_context=function(){return(c._sqlite3_aggregate_context=c.asm.da).apply(null,arguments)},c._sqlite3_column_count=function(){return(c._sqlite3_column_count=c.asm.ea).apply(null,arguments)},c._sqlite3_data_count=function(){return(c._sqlite3_data_count=c.asm.fa).apply(null,arguments)},c._sqlite3_column_blob=function(){return(c._sqlite3_column_blob=c.asm.ga).apply(null,arguments)},c._sqlite3_column_bytes=function(){return(c._sqlite3_column_bytes=c.asm.ha).apply(null,arguments)},c._sqlite3_column_double=function(){return(c._sqlite3_column_double=c.asm.ia).apply(null,arguments)},c._sqlite3_column_text=function(){return(c._sqlite3_column_text=c.asm.ja).apply(null,arguments)},c._sqlite3_column_type=function(){return(c._sqlite3_column_type=c.asm.ka).apply(null,arguments)},c._sqlite3_column_name=function(){return(c._sqlite3_column_name=c.asm.la).apply(null,arguments)},c._sqlite3_bind_blob=function(){return(c._sqlite3_bind_blob=c.asm.ma).apply(null,arguments)},c._sqlite3_bind_double=function(){return(c._sqlite3_bind_double=c.asm.na).apply(null,arguments)},c._sqlite3_bind_int=function(){return(c._sqlite3_bind_int=c.asm.oa).apply(null,arguments)},c._sqlite3_bind_text=function(){return(c._sqlite3_bind_text=c.asm.pa).apply(null,arguments)},c._sqlite3_bind_parameter_index=function(){return(c._sqlite3_bind_parameter_index=c.asm.qa).apply(null,arguments)},c._sqlite3_normalized_sql=function(){return(c._sqlite3_normalized_sql=c.asm.ra).apply(null,arguments)},c._sqlite3_errmsg=function(){return(c._sqlite3_errmsg=c.asm.sa).apply(null,arguments)},c._sqlite3_exec=function(){return(c._sqlite3_exec=c.asm.ta).apply(null,arguments)},c._sqlite3_changes=function(){return(c._sqlite3_changes=c.asm.ua).apply(null,arguments)},c._sqlite3_close_v2=function(){return(c._sqlite3_close_v2=c.asm.va).apply(null,arguments)},c._sqlite3_create_function_v2=function(){return(c._sqlite3_create_function_v2=c.asm.wa).apply(null,arguments)},c._sqlite3_open=function(){return(c._sqlite3_open=c.asm.xa).apply(null,arguments)};var xa=c._malloc=function(){return(xa=c._malloc=c.asm.ya).apply(null,arguments)},rl=c._free=function(){return(rl=c._free=c.asm.za).apply(null,arguments)};c._RegisterExtensionFunctions=function(){return(c._RegisterExtensionFunctions=c.asm.Ba).apply(null,arguments)};var bp=c._emscripten_builtin_memalign=function(){return(bp=c._emscripten_builtin_memalign=c.asm.Ca).apply(null,arguments)},so=c.stackSave=function(){return(so=c.stackSave=c.asm.Da).apply(null,arguments)},sl=c.stackRestore=function(){return(sl=c.stackRestore=c.asm.Ea).apply(null,arguments)},ns=c.stackAlloc=function(){return(ns=c.stackAlloc=c.asm.Fa).apply(null,arguments)};c.UTF8ToString=z,c.stackAlloc=ns,c.stackSave=so,c.stackRestore=sl,c.cwrap=function(x,A,I,U){I=I||[];var X=I.every(ve=>ve==="number"||ve==="boolean");return A!=="string"&&X&&!U?c["_"+x]:function(){return Md(x,A,I,arguments)}};var Ec;Bn=function x(){Ec||al(),Ec||(Bn=x)};function al(){function x(){if(!Ec&&(Ec=!0,c.calledRun=!0,!Z)){if(c.noFSInit||kr||(kr=!0,Xn(),c.stdin=c.stdin,c.stdout=c.stdout,c.stderr=c.stderr,c.stdin?Ls("stdin",c.stdin):Ms("/dev/tty","/dev/stdin"),c.stdout?Ls("stdout",null,c.stdout):Ms("/dev/tty","/dev/stdout"),c.stderr?Ls("stderr",null,c.stderr):Ms("/dev/tty1","/dev/stderr"),va("/dev/stdin",0),va("/dev/stdout",1),va("/dev/stderr",1)),fc=!1,lt(it),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;){var A=c.postRun.shift();qt.unshift(A)}lt(qt)}}if(!(0<Yn)){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Jt();lt(Je),0<Yn||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),x()},1)):x())}}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return al(),o}),t)};n.exports=i,n.exports.default=i})(zO);var hY=zO.exports;const fY=bi(hY),EA={entities:[Fa,Wu],migrations:[lY,cY],migrationsRun:!0,logging:["error","query","schema"]},Cn=class Cn{static async initLocalForage(){try{const e=await ci(()=>import("./localforage-a042bc9f.js").then(t=>t.l),[]);Cn.localForage=e.default,window.localforage=Cn.localForage}catch(e){console.log("Error with initLocalForage: ",e)}}static async initSqlJs(){try{const e=await fY({locateFile:t=>"/static/assets/sql.js/".concat(t)});window.SQL=e}catch(e){console.log("Error with initSqlite: ",e)}}static configureNativeConnection(){try{const e=new BW(FW);return Cn.connection=new xA({type:"capacitor",database:Cn.dbName,driver:e,migrationsTransactionMode:"none",...EA}),Cn.connection}catch(e){console.log("Error with configureNativeConnection: ",e)}}static configureWebConnection(){try{return Cn.localForage.config({description:"quest",driver:Cn.localForage.INDEXEDDB}),Cn.connection=new xA({type:"sqljs",autoSave:!0,location:Cn.dbName,useLocalForage:!0,...EA}),Cn.connection}catch(e){console.log("Error with configureWebConnection: ",e)}}static async initConnection(){try{if(Cn.connection)return;await Cn.initLocalForage(),await Cn.initSqlJs();let e;Jl.getPlatform()==="web"?e=Cn.configureWebConnection():e=Cn.configureNativeConnection(),await(e==null?void 0:e.initialize())}catch(e){console.log("Error with initConnection: ",e)}}};Ea(Cn,"dbName","fitrem_db"),Ea(Cn,"connection",null),Ea(Cn,"localForage");let Ol=Cn;const TA=async()=>{var n;return(n=Ol.connection)==null?void 0:n.getRepository(Wu)};class pY{async getItem(e){await Ol.initConnection();try{const t=await TA(),i=await(t==null?void 0:t.findOne({where:{id:e}}));return i?(console.log("***GET_ITEM",i==null?void 0:i.store),i.store):null}catch(t){return console.log("Error GET_ITEM:",t),null}}async setItem(e,t){try{const i=await TA();await(i==null?void 0:i.upsert({id:e,store:t},{conflictPaths:["id"],skipUpdateIfNoValuesChanged:!0})),console.log("***SET_ITEM: ",await(i==null?void 0:i.find({})))}catch(i){console.log("Error with SET_ITEM",i)}}async removeItem(e){await new Promise(t=>t(e)).then(t=>console.log(t))}}const mY=n=>({rehydrated:!1}),gY=["timerStatus"],yY=new pY,Tf=bW()(xW(_W((...n)=>({...mY(...n),...CW(...n)}),{name:"combineStore",partialize:n=>Object.fromEntries(Object.entries(n).filter(([e])=>!gY.includes(e))),storage:mO(()=>yY),onRehydrateStorage:n=>(console.log("hydration starts"),(e,t)=>{t?console.log("an error happened during hydration",t):(Tf.setState({rehydrated:!0}),console.log("hydration finished",e))})})));function bY({isOpen:n,setIsOpen:e}){return ne.jsx(aO,{isOpen:n,header:"",subHeader:"Nice choice",message:"Let's do it!",buttons:["OK"],onDidDismiss:()=>{e(!1),history.back()}})}const vY=()=>{const{unsetTimer:n}=Tf(),{timerInterval:e,setTimerInterval:t}=Tf(),[i,r]=ze.useState(e),[s,a]=ze.useState(!1),o=()=>{t(i),a(!0),n()};return ne.jsxs(w0,{id:"main-content",children:[ne.jsx(Uo,{children:ne.jsx(zu,{color:"warning",children:ne.jsx(Hf,{slot:"start",children:ne.jsx(xH,{defaultHref:"/timer"})})})}),ne.jsxs(ju,{children:[ne.jsxs(zg,{children:[ne.jsx(Rl,{children:ne.jsxs(Ks,{children:[ne.jsxs(Tv,{children:[ne.jsx("h2",{children:"Timer Settings"}),ne.jsxs("p",{children:["Your timer is set to ring in ",i.toString()," seconds.",ne.jsx(hr,{slot:"icon-only",icon:FH,color:"primary"})]})]}),ne.jsxs(KV,{min:5,max:60,step:5,snaps:!0,color:"primary",value:i,onIonChange:l=>r(l.detail.value),children:[ne.jsx(Mo,{slot:"start",children:"5 sec"}),ne.jsx(Mo,{slot:"end",children:"60 sec"})]}),ne.jsx(Tv,{children:ne.jsx("small",{children:"If you wish to change the settings drag the nob to the desired time interval (5 to 60 seconds)."})})]})}),ne.jsx(Rl,{children:ne.jsx(Ks,{children:ne.jsx(Tv,{})})}),ne.jsx(Rl,{children:ne.jsx(Ks,{children:ne.jsx(Hi,{expand:"block",onClick:o,children:"Save"})})})]}),ne.jsx(bY,{isOpen:s,setIsOpen:a})]})]})};var SA=typeof window>"u"?ze.useEffect:ze.useLayoutEffect,wY=({isPlaying:n,duration:e,startAt:t=0,updateInterval:i=0,onComplete:r,onUpdate:s})=>{let[a,o]=ze.useState(t),l=ze.useRef(0),c=ze.useRef(t),u=ze.useRef(t*-1e3),d=ze.useRef(null),h=ze.useRef(null),f=ze.useRef(null),m=v=>{let y=v/1e3;if(h.current===null){h.current=y,d.current=requestAnimationFrame(m);return}let T=y-h.current,N=l.current+T;h.current=y,l.current=N;let P=c.current+(i===0?N:(N/i|0)*i),F=c.current+N,$=typeof e=="number"&&F>=e;o($?e:P),$||(d.current=requestAnimationFrame(m))},g=()=>{d.current&&cancelAnimationFrame(d.current),f.current&&clearTimeout(f.current),h.current=null},_=ze.useCallback(v=>{g(),l.current=0;let y=typeof v=="number"?v:t;c.current=y,o(y),n&&(d.current=requestAnimationFrame(m))},[n,t]);return SA(()=>{if(s==null||s(a),e&&a>=e){u.current+=e*1e3;let{shouldRepeat:v=!1,delay:y=0,newStartAt:T}=(r==null?void 0:r(u.current/1e3))||{};v&&(f.current=setTimeout(()=>_(T),y*1e3))}},[a,e]),SA(()=>(n&&(d.current=requestAnimationFrame(m)),g),[n,e,i]),{elapsedTime:a,reset:_}},xY=(n,e,t)=>{let i=n/2,r=e/2,s=i-r,a=2*s,o=t==="clockwise"?"1,0":"0,1",l=2*Math.PI*s;return{path:"m ".concat(i,",").concat(r," a ").concat(s,",").concat(s," 0 ").concat(o," 0,").concat(a," a ").concat(s,",").concat(s," 0 ").concat(o," 0,-").concat(a),pathLength:l}},_A=(n,e)=>n===0||n===e?0:typeof e=="number"?n-e:0,EY=n=>({position:"relative",width:n,height:n}),TY={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},VO=(n,e,t,i,r)=>{if(i===0)return e;let s=(r?i-n:n)/i;return e+t*s},CA=n=>{var e,t;return(t=(e=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(i,r,s,a)=>"#".concat(r).concat(r).concat(s).concat(s).concat(a).concat(a)).substring(1).match(/.{2}/g))==null?void 0:e.map(i=>parseInt(i,16)))!=null?t:[]},SY=(n,e)=>{var t;let{colors:i,colorsTime:r,isSmoothColorTransition:s=!0}=n;if(typeof i=="string")return i;let a=(t=r==null?void 0:r.findIndex((h,f)=>h>=e&&e>=r[f+1]))!=null?t:-1;if(!r||a===-1)return i[0];if(!s)return i[a];let o=r[a]-e,l=r[a]-r[a+1],c=CA(i[a]),u=CA(i[a+1]),d=!!n.isGrowing;return"rgb(".concat(c.map((h,f)=>VO(o,h,u[f]-h,l,d)|0).join(","),")")},_Y=n=>{let{duration:e,initialRemainingTime:t,updateInterval:i,size:r=180,strokeWidth:s=12,trailStrokeWidth:a,isPlaying:o=!1,isGrowing:l=!1,rotation:c="clockwise",onComplete:u,onUpdate:d}=n,h=ze.useRef(),f=Math.max(s,a!=null?a:0),{path:m,pathLength:g}=xY(r,f,c),{elapsedTime:_}=wY({isPlaying:o,duration:e,startAt:_A(e,t),updateInterval:i,onUpdate:typeof d=="function"?y=>{let T=Math.ceil(e-y);T!==h.current&&(h.current=T,d(T))}:void 0,onComplete:typeof u=="function"?y=>{var T;let{shouldRepeat:N,delay:P,newInitialRemainingTime:F}=(T=u(y))!=null?T:{};if(N)return{shouldRepeat:N,delay:P,newStartAt:_A(e,F)}}:void 0}),v=e-_;return{elapsedTime:_,path:m,pathLength:g,remainingTime:Math.ceil(v),rotation:c,size:r,stroke:SY(n,v),strokeDashoffset:VO(_,0,g,e,l),strokeWidth:s}},HO=n=>{let{children:e,strokeLinecap:t,trailColor:i,trailStrokeWidth:r}=n,{path:s,pathLength:a,stroke:o,strokeDashoffset:l,remainingTime:c,elapsedTime:u,size:d,strokeWidth:h}=_Y(n);return fe.createElement("div",{style:EY(d)},fe.createElement("svg",{viewBox:"0 0 ".concat(d," ").concat(d),width:d,height:d,xmlns:"http://www.w3.org/2000/svg"},fe.createElement("path",{d:s,fill:"none",stroke:i!=null?i:"#d9d9d9",strokeWidth:r!=null?r:h}),fe.createElement("path",{d:s,fill:"none",stroke:o,strokeLinecap:t!=null?t:"round",strokeWidth:h,strokeDasharray:a,strokeDashoffset:l})),typeof e=="function"&&fe.createElement("div",{style:TY},e({remainingTime:c,elapsedTime:u,color:o})))};HO.displayName="CountdownCircleTimer";class uc extends Error{}class CY extends uc{constructor(e){super("Invalid DateTime: ".concat(e.toMessage()))}}class AY extends uc{constructor(e){super("Invalid Interval: ".concat(e.toMessage()))}}class kY extends uc{constructor(e){super("Invalid Duration: ".concat(e.toMessage()))}}class wh extends uc{}class WO extends uc{constructor(e){super("Invalid unit ".concat(e))}}class Fr extends uc{}class ho extends uc{constructor(){super("Zone is an abstract class")}}const Me="numeric",ks="short",gr="long",Qg={year:Me,month:Me,day:Me},GO={year:Me,month:ks,day:Me},NY={year:Me,month:ks,day:Me,weekday:ks},QO={year:Me,month:gr,day:Me},KO={year:Me,month:gr,day:Me,weekday:gr},YO={hour:Me,minute:Me},XO={hour:Me,minute:Me,second:Me},JO={hour:Me,minute:Me,second:Me,timeZoneName:ks},ZO={hour:Me,minute:Me,second:Me,timeZoneName:gr},eM={hour:Me,minute:Me,hourCycle:"h23"},tM={hour:Me,minute:Me,second:Me,hourCycle:"h23"},nM={hour:Me,minute:Me,second:Me,hourCycle:"h23",timeZoneName:ks},iM={hour:Me,minute:Me,second:Me,hourCycle:"h23",timeZoneName:gr},rM={year:Me,month:Me,day:Me,hour:Me,minute:Me},sM={year:Me,month:Me,day:Me,hour:Me,minute:Me,second:Me},aM={year:Me,month:ks,day:Me,hour:Me,minute:Me},oM={year:Me,month:ks,day:Me,hour:Me,minute:Me,second:Me},DY={year:Me,month:ks,day:Me,weekday:ks,hour:Me,minute:Me},lM={year:Me,month:gr,day:Me,hour:Me,minute:Me,timeZoneName:ks},cM={year:Me,month:gr,day:Me,hour:Me,minute:Me,second:Me,timeZoneName:ks},uM={year:Me,month:gr,day:Me,weekday:gr,hour:Me,minute:Me,timeZoneName:gr},dM={year:Me,month:gr,day:Me,weekday:gr,hour:Me,minute:Me,second:Me,timeZoneName:gr};class Zf{get type(){throw new ho}get name(){throw new ho}get ianaName(){return this.name}get isUniversal(){throw new ho}offsetName(e,t){throw new ho}formatOffset(e,t){throw new ho}offset(e){throw new ho}equals(e){throw new ho}get isValid(){throw new ho}}let Lv=null;class D0 extends Zf{static get instance(){return Lv===null&&(Lv=new D0),Lv}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return fM(e,t,i)}formatOffset(e,t){return Uh(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let jm={};function PY(n){return jm[n]||(jm[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),jm[n]}const IY={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function RY(n,e){const t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,r,s,a,o,l,c,u]=i;return[a,r,s,o,l,c,u]}function OY(n,e){const t=n.formatToParts(e),i=[];for(let r=0;r<t.length;r++){const{type:s,value:a}=t[r],o=IY[s];s==="era"?i[o]=a:vt(o)||(i[o]=parseInt(a,10))}return i}let om={};class Qa extends Zf{static create(e){return om[e]||(om[e]=new Qa(e)),om[e]}static resetCache(){om={},jm={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=Qa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return fM(e,t,i,this.name)}formatOffset(e,t){return Uh(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const i=PY(this.name);let[r,s,a,o,l,c,u]=i.formatToParts?OY(i,t):RY(i,t);o==="BC"&&(r=-Math.abs(r)+1);const h=I0({year:r,month:s,day:a,hour:l===24?0:l,minute:c,second:u,millisecond:0});let f=+t;const m=f%1e3;return f-=m>=0?m:1e3+m,(h-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let AA={};function MY(n,e={}){const t=JSON.stringify([n,e]);let i=AA[t];return i||(i=new Intl.ListFormat(n,e),AA[t]=i),i}let $x={};function Bx(n,e={}){const t=JSON.stringify([n,e]);let i=$x[t];return i||(i=new Intl.DateTimeFormat(n,e),$x[t]=i),i}let Fx={};function LY(n,e={}){const t=JSON.stringify([n,e]);let i=Fx[t];return i||(i=new Intl.NumberFormat(n,e),Fx[t]=i),i}let qx={};function $Y(n,e={}){const{base:t,...i}=e,r=JSON.stringify([n,i]);let s=qx[r];return s||(s=new Intl.RelativeTimeFormat(n,e),qx[r]=s),s}let xh=null;function BY(){return xh||(xh=new Intl.DateTimeFormat().resolvedOptions().locale,xh)}function FY(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let i,r;try{i=Bx(n).resolvedOptions(),r=n}catch(o){const l=n.substring(0,t);i=Bx(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:a}=i;return[r,s,a]}}function qY(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+="-ca-".concat(t)),e&&(n+="-nu-".concat(e))),n}function UY(n){const e=[];for(let t=1;t<=12;t++){const i=at.utc(2009,t,1);e.push(n(i))}return e}function jY(n){const e=[];for(let t=1;t<=7;t++){const i=at.utc(2016,11,13+t);e.push(n(i))}return e}function lm(n,e,t,i){const r=n.listingMode();return r==="error"?null:r==="en"?t(e):i(e)}function zY(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}class VY{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:s,...a}=i;if(!t||Object.keys(a).length>0){const o={useGrouping:!1,...i};i.padTo>0&&(o.minimumIntegerDigits=i.padTo),this.inf=LY(e,o)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):g1(e,3);return kn(t,this.padTo)}}}class HY{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),o=a>=0?"Etc/GMT+".concat(a):"Etc/GMT".concat(a);e.offset!==0&&Qa.create(o).valid?(r=o,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=Bx(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class WY{constructor(e,t,i){this.opts={style:"long",...i},!t&&hM()&&(this.rtf=$Y(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):cX(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}class Yt{static fromOpts(e){return Yt.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,i,r=!1){const s=e||An.defaultLocale,a=s||(r?"en-US":BY()),o=t||An.defaultNumberingSystem,l=i||An.defaultOutputCalendar;return new Yt(a,o,l,s)}static resetCache(){xh=null,$x={},Fx={},qx={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:i}={}){return Yt.create(e,t,i)}constructor(e,t,i,r){const[s,a,o]=FY(e);this.locale=s,this.numberingSystem=t||a||null,this.outputCalendar=i||o||null,this.intl=qY(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=zY(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Yt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return lm(this,e,gM,()=>{const i=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=UY(s=>this.extract(s,i,"month"))),this.monthsCache[r][e]})}weekdays(e,t=!1){return lm(this,e,vM,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=jY(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return lm(this,void 0,()=>wM,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[at.utc(2016,11,13,9),at.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return lm(this,e,xM,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[at.utc(-40,1,1),at.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const r=this.dtFormatter(e,t),s=r.formatToParts(),a=s.find(o=>o.type.toLowerCase()===i);return a?a.value:null}numberFormatter(e={}){return new VY(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new HY(e,this.intl,t)}relFormatter(e={}){return new WY(this.intl,this.isEnglish(),e)}listFormatter(e={}){return MY(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let $v=null;class Ii extends Zf{static get utcInstance(){return $v===null&&($v=new Ii(0)),$v}static instance(e){return e===0?Ii.utcInstance:new Ii(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Ii(R0(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":"UTC".concat(Uh(this.fixed,"narrow"))}get ianaName(){return this.fixed===0?"Etc/UTC":"Etc/GMT".concat(Uh(-this.fixed,"narrow"))}offsetName(){return this.name}formatOffset(e,t){return Uh(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class GY extends Zf{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function To(n,e){if(vt(n)||n===null)return e;if(n instanceof Zf)return n;if(QY(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?D0.instance:t==="utc"||t==="gmt"?Ii.utcInstance:Ii.parseSpecifier(t)||Qa.create(n)}else return Ml(n)?Ii.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new GY(n)}let kA=()=>Date.now(),NA="system",DA=null,PA=null,IA=null,RA=60,OA,An=class{static get now(){return kA}static set now(e){kA=e}static set defaultZone(e){NA=e}static get defaultZone(){return To(NA,D0.instance)}static get defaultLocale(){return DA}static set defaultLocale(e){DA=e}static get defaultNumberingSystem(){return PA}static set defaultNumberingSystem(e){PA=e}static get defaultOutputCalendar(){return IA}static set defaultOutputCalendar(e){IA=e}static get twoDigitCutoffYear(){return RA}static set twoDigitCutoffYear(e){RA=e%100}static get throwOnInvalid(){return OA}static set throwOnInvalid(e){OA=e}static resetCaches(){Yt.resetCache(),Qa.resetCache()}};function vt(n){return typeof n>"u"}function Ml(n){return typeof n=="number"}function P0(n){return typeof n=="number"&&n%1===0}function QY(n){return typeof n=="string"}function KY(n){return Object.prototype.toString.call(n)==="[object Date]"}function hM(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch(n){return!1}}function YY(n){return Array.isArray(n)?n:[n]}function MA(n,e,t){if(n.length!==0)return n.reduce((i,r)=>{const s=[e(r),r];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function XY(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function Gu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ma(n,e,t){return P0(n)&&n>=e&&n<=t}function JY(n,e){return n-e*Math.floor(n/e)}function kn(n,e=2){const t=n<0;let i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function bo(n){if(!(vt(n)||n===null||n===""))return parseInt(n,10)}function pl(n){if(!(vt(n)||n===null||n===""))return parseFloat(n)}function m1(n){if(!(vt(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function g1(n,e,t=!1){const i=10**e;return(t?Math.trunc:Math.round)(n*i)/i}function ep(n){return n%4===0&&(n%100!==0||n%400===0)}function qh(n){return ep(n)?366:365}function Kg(n,e){const t=JY(e-1,12)+1,i=n+(e-t)/12;return t===2?ep(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function I0(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function Yg(n){const e=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7,t=n-1,i=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return e===4||i===3?53:52}function Ux(n){return n>99?n:n>An.twoDigitCutoffYear?1900+n:2e3+n}function fM(n,e,t,i=null){const r=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const a={timeZoneName:e,...s},o=new Intl.DateTimeFormat(t,a).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return o?o.value:null}function R0(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,r=t<0||Object.is(t,-0)?-i:i;return t*60+r}function pM(n){const e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new Fr("Invalid unit value ".concat(n));return e}function Xg(n,e){const t={};for(const i in n)if(Gu(n,i)){const r=n[i];if(r==null)continue;t[e(i)]=pM(r)}return t}function Uh(n,e){const t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),r=n>=0?"+":"-";switch(e){case"short":return"".concat(r).concat(kn(t,2),":").concat(kn(i,2));case"narrow":return"".concat(r).concat(t).concat(i>0?":".concat(i):"");case"techie":return"".concat(r).concat(kn(t,2)).concat(kn(i,2));default:throw new RangeError("Value format ".concat(e," is out of range for property format"))}}function O0(n){return XY(n,["hour","minute","second","millisecond"])}const ZY=["January","February","March","April","May","June","July","August","September","October","November","December"],mM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],eX=["J","F","M","A","M","J","J","A","S","O","N","D"];function gM(n){switch(n){case"narrow":return[...eX];case"short":return[...mM];case"long":return[...ZY];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const yM=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],bM=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],tX=["M","T","W","T","F","S","S"];function vM(n){switch(n){case"narrow":return[...tX];case"short":return[...bM];case"long":return[...yM];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const wM=["AM","PM"],nX=["Before Christ","Anno Domini"],iX=["BC","AD"],rX=["B","A"];function xM(n){switch(n){case"narrow":return[...rX];case"short":return[...iX];case"long":return[...nX];default:return null}}function sX(n){return wM[n.hour<12?0:1]}function aX(n,e){return vM(e)[n.weekday-1]}function oX(n,e){return gM(e)[n.month-1]}function lX(n,e){return xM(e)[n.year<0?0:1]}function cX(n,e,t="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const d=n==="days";switch(e){case 1:return d?"tomorrow":"next ".concat(r[n][0]);case-1:return d?"yesterday":"last ".concat(r[n][0]);case 0:return d?"today":"this ".concat(r[n][0])}}const a=Object.is(e,-0)||e<0,o=Math.abs(e),l=o===1,c=r[n],u=i?l?c[1]:c[2]||c[1]:l?r[n][0]:n;return a?"".concat(o," ").concat(u," ago"):"in ".concat(o," ").concat(u)}function LA(n,e){let t="";for(const i of n)i.literal?t+=i.val:t+=e(i.val);return t}const uX={D:Qg,DD:GO,DDD:QO,DDDD:KO,t:YO,tt:XO,ttt:JO,tttt:ZO,T:eM,TT:tM,TTT:nM,TTTT:iM,f:rM,ff:aM,fff:lM,ffff:uM,F:sM,FF:oM,FFF:cM,FFFF:dM};class di{static create(e,t={}){return new di(e,t)}static parseFormat(e){let t=null,i="",r=!1;const s=[];for(let a=0;a<e.length;a++){const o=e.charAt(a);o==="'"?(i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),t=null,i="",r=!r):r||o===t?i+=o:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=o,t=o)}return i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return uX[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return kn(e,t);const i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,m)=>this.loc.extract(e,f,m),a=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",o=()=>i?sX(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,m)=>i?oX(e,f):s(m?{month:f}:{month:f,day:"numeric"},"month"),c=(f,m)=>i?aX(e,f):s(m?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const m=di.macroTokenToFormatOpts(f);return m?this.formatWithSystemDefault(e,m):f},d=f=>i?lX(e,f):s({era:f},"era"),h=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(f)}};return LA(di.parseFormat(t),h)}formatDurationFromString(e,t){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},s=di.parseFormat(t),a=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),o=e.shiftTo(...a.map(i).filter(l=>l));return LA(s,r(o))}}class bs{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?"".concat(this.reason,": ").concat(this.explanation):this.reason}}const EM=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function bd(...n){const e=n.reduce((t,i)=>t+i.source,"");return RegExp("^".concat(e,"$"))}function vd(...n){return e=>n.reduce(([t,i,r],s)=>{const[a,o,l]=s(e,r);return[{...t,...a},o||i,l]},[{},null,1]).slice(0,2)}function wd(n,...e){if(n==null)return[null,null];for(const[t,i]of e){const r=t.exec(n);if(r)return i(r)}return[null,null]}function TM(...n){return(e,t)=>{const i={};let r;for(r=0;r<n.length;r++)i[n[r]]=bo(e[t+r]);return[i,null,t+r]}}const SM=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,dX="(?:".concat(SM.source,"?(?:\\[(").concat(EM.source,")\\])?)?"),y1=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,_M=RegExp("".concat(y1.source).concat(dX)),b1=RegExp("(?:T".concat(_M.source,")?")),hX=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,fX=/(\d{4})-?W(\d\d)(?:-?(\d))?/,pX=/(\d{4})-?(\d{3})/,mX=TM("weekYear","weekNumber","weekDay"),gX=TM("year","ordinal"),yX=/(\d{4})-(\d\d)-(\d\d)/,CM=RegExp("".concat(y1.source," ?(?:").concat(SM.source,"|(").concat(EM.source,"))?")),bX=RegExp("(?: ".concat(CM.source,")?"));function _u(n,e,t){const i=n[e];return vt(i)?t:bo(i)}function vX(n,e){return[{year:_u(n,e),month:_u(n,e+1,1),day:_u(n,e+2,1)},null,e+3]}function xd(n,e){return[{hours:_u(n,e,0),minutes:_u(n,e+1,0),seconds:_u(n,e+2,0),milliseconds:m1(n[e+3])},null,e+4]}function tp(n,e){const t=!n[e]&&!n[e+1],i=R0(n[e+1],n[e+2]),r=t?null:Ii.instance(i);return[{},r,e+3]}function np(n,e){const t=n[e]?Qa.create(n[e]):null;return[{},t,e+1]}const wX=RegExp("^T?".concat(y1.source,"$")),xX=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function EX(n){const[e,t,i,r,s,a,o,l,c]=n,u=e[0]==="-",d=l&&l[0]==="-",h=(f,m=!1)=>f!==void 0&&(m||f&&u)?-f:f;return[{years:h(pl(t)),months:h(pl(i)),weeks:h(pl(r)),days:h(pl(s)),hours:h(pl(a)),minutes:h(pl(o)),seconds:h(pl(l),l==="-0"),milliseconds:h(m1(c),d)}]}const TX={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function v1(n,e,t,i,r,s,a){const o={year:e.length===2?Ux(bo(e)):bo(e),month:mM.indexOf(t)+1,day:bo(i),hour:bo(r),minute:bo(s)};return a&&(o.second=bo(a)),n&&(o.weekday=n.length>3?yM.indexOf(n)+1:bM.indexOf(n)+1),o}const SX=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function _X(n){const[,e,t,i,r,s,a,o,l,c,u,d]=n,h=v1(e,r,i,t,s,a,o);let f;return l?f=TX[l]:c?f=0:f=R0(u,d),[h,new Ii(f)]}function CX(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const AX=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,kX=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,NX=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function $A(n){const[,e,t,i,r,s,a,o]=n;return[v1(e,r,i,t,s,a,o),Ii.utcInstance]}function DX(n){const[,e,t,i,r,s,a,o]=n;return[v1(e,o,t,i,r,s,a),Ii.utcInstance]}const PX=bd(hX,b1),IX=bd(fX,b1),RX=bd(pX,b1),OX=bd(_M),AM=vd(vX,xd,tp,np),MX=vd(mX,xd,tp,np),LX=vd(gX,xd,tp,np),$X=vd(xd,tp,np);function BX(n){return wd(n,[PX,AM],[IX,MX],[RX,LX],[OX,$X])}function FX(n){return wd(CX(n),[SX,_X])}function qX(n){return wd(n,[AX,$A],[kX,$A],[NX,DX])}function UX(n){return wd(n,[xX,EX])}const jX=vd(xd);function zX(n){return wd(n,[wX,jX])}const VX=bd(yX,bX),HX=bd(CM),WX=vd(xd,tp,np);function GX(n){return wd(n,[VX,AM],[HX,WX])}const BA="Invalid Duration",kM={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},QX={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...kM},Pr=146097/400,Mc=146097/4800,KX={years:{quarters:4,months:12,weeks:Pr/7,days:Pr,hours:Pr*24,minutes:Pr*24*60,seconds:Pr*24*60*60,milliseconds:Pr*24*60*60*1e3},quarters:{months:3,weeks:Pr/28,days:Pr/4,hours:Pr*24/4,minutes:Pr*24*60/4,seconds:Pr*24*60*60/4,milliseconds:Pr*24*60*60*1e3/4},months:{weeks:Mc/7,days:Mc,hours:Mc*24,minutes:Mc*24*60,seconds:Mc*24*60*60,milliseconds:Mc*24*60*60*1e3},...kM},kl=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],YX=kl.slice(0).reverse();function fo(n,e,t=!1){const i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new wt(i)}function NM(n,e){var i;let t=(i=e.milliseconds)!=null?i:0;for(const r of YX.slice(1))e[r]&&(t+=e[r]*n[r].milliseconds);return t}function FA(n,e){const t=NM(n,e)<0?-1:1;kl.reduceRight((i,r)=>{if(vt(e[r]))return i;if(i){const s=e[i]*t,a=n[r][i],o=Math.floor(s/a);e[r]+=o*t,e[i]-=o*a*t}return r},null),kl.reduce((i,r)=>{if(vt(e[r]))return i;if(i){const s=e[i]%1;e[i]-=s,e[r]+=s*n[i][r]}return r},null)}function XX(n){const e={};for(const[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}class wt{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?KX:QX;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Yt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return wt.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Fr("Duration.fromObject: argument expected to be an object, got ".concat(e===null?"null":typeof e));return new wt({values:Xg(e,wt.normalizeUnit),loc:Yt.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Ml(e))return wt.fromMillis(e);if(wt.isDuration(e))return e;if(typeof e=="object")return wt.fromObject(e);throw new Fr("Unknown duration argument ".concat(e," of type ").concat(typeof e))}static fromISO(e,t){const[i]=UX(e);return i?wt.fromObject(i,t):wt.invalid("unparsable",'the input "'.concat(e,"\" can't be parsed as ISO 8601"))}static fromISOTime(e,t){const[i]=zX(e);return i?wt.fromObject(i,t):wt.invalid("unparsable",'the input "'.concat(e,"\" can't be parsed as ISO 8601"))}static invalid(e,t=null){if(!e)throw new Fr("need to specify a reason the Duration is invalid");const i=e instanceof bs?e:new bs(e,t);if(An.throwOnInvalid)throw new kY(i);return new wt({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new WO(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?di.create(this.loc,i).formatDurationFromString(this,e):BA}toHuman(e={}){if(!this.isValid)return BA;const t=kl.map(i=>{const r=this.values[i];return vt(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=g1(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},at.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?NM(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=wt.fromDurationLike(e),i={};for(const r of kl)(Gu(t.values,r)||Gu(this.values,r))&&(i[r]=t.get(r)+this.get(r));return fo(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=wt.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=pM(e(this.values[i],i));return fo(this,{values:t},!0)}get(e){return this[wt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Xg(e,wt.normalizeUnit)};return fo(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:r}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:i};return fo(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return FA(this.matrix,e),fo(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=XX(this.normalize().shiftToAll().toObject());return fo(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>wt.normalizeUnit(a));const t={},i={},r=this.toObject();let s;for(const a of kl)if(e.indexOf(a)>=0){s=a;let o=0;for(const c in i)o+=this.matrix[c][a]*i[c],i[c]=0;Ml(r[a])&&(o+=r[a]);const l=Math.trunc(o);t[a]=l,i[a]=(o*1e3-l*1e3)/1e3}else Ml(r[a])&&(i[a]=r[a]);for(const a in i)i[a]!==0&&(t[s]+=a===s?i[a]:i[a]/this.matrix[s][a]);return FA(this.matrix,t),fo(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return fo(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(const i of kl)if(!t(this.values[i],e.values[i]))return!1;return!0}}const Lc="Invalid Interval";function JX(n,e){return!n||!n.isValid?pn.invalid("missing or invalid start"):!e||!e.isValid?pn.invalid("missing or invalid end"):e<n?pn.invalid("end before start","The end of an interval must be after its start, but you had start=".concat(n.toISO()," and end=").concat(e.toISO())):null}class pn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Fr("need to specify a reason the Interval is invalid");const i=e instanceof bs?e:new bs(e,t);if(An.throwOnInvalid)throw new AY(i);return new pn({invalid:i})}static fromDateTimes(e,t){const i=nh(e),r=nh(t),s=JX(i,r);return s==null?new pn({start:i,end:r}):s}static after(e,t){const i=wt.fromDurationLike(t),r=nh(e);return pn.fromDateTimes(r,r.plus(i))}static before(e,t){const i=wt.fromDurationLike(t),r=nh(e);return pn.fromDateTimes(r.minus(i),r)}static fromISO(e,t){const[i,r]=(e||"").split("/",2);if(i&&r){let s,a;try{s=at.fromISO(i,t),a=s.isValid}catch(c){a=!1}let o,l;try{o=at.fromISO(r,t),l=o.isValid}catch(c){l=!1}if(a&&l)return pn.fromDateTimes(s,o);if(a){const c=wt.fromISO(r,t);if(c.isValid)return pn.after(s,c)}else if(l){const c=wt.fromISO(i,t);if(c.isValid)return pn.before(o,c)}}return pn.invalid("unparsable",'the input "'.concat(e,"\" can't be parsed as ISO 8601"))}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const t=this.start.startOf(e),i=this.end.startOf(e);return Math.floor(i.diff(t,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?pn.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(nh).filter(a=>this.contains(a)).sort(),i=[];let{s:r}=this,s=0;for(;r<this.e;){const a=t[s]||this.e,o=+a>+this.e?this.e:a;i.push(pn.fromDateTimes(r,o)),r=o,s+=1}return i}splitBy(e){const t=wt.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,r=1,s;const a=[];for(;i<this.e;){const o=this.start.plus(t.mapUnits(l=>l*r));s=+o>+this.e?this.e:o,a.push(pn.fromDateTimes(i,s)),i=s,r+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:pn.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return pn.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((r,s)=>r.s-s.s).reduce(([r,s],a)=>s?s.overlaps(a)||s.abutsStart(a)?[r,s.union(a)]:[r.concat([s]),a]:[r,a],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const r=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),a=Array.prototype.concat(...s),o=a.sort((l,c)=>l.time-c.time);for(const l of o)i+=l.type==="s"?1:-1,i===1?t=l.time:(t&&+t!=+l.time&&r.push(pn.fromDateTimes(t,l.time)),t=null);return pn.merge(r)}difference(...e){return pn.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?"[".concat(this.s.toISO()," – ").concat(this.e.toISO(),")"):Lc}toLocaleString(e=Qg,t={}){return this.isValid?di.create(this.s.loc.clone(t),e).formatInterval(this):Lc}toISO(e){return this.isValid?"".concat(this.s.toISO(e),"/").concat(this.e.toISO(e)):Lc}toISODate(){return this.isValid?"".concat(this.s.toISODate(),"/").concat(this.e.toISODate()):Lc}toISOTime(e){return this.isValid?"".concat(this.s.toISOTime(e),"/").concat(this.e.toISOTime(e)):Lc}toFormat(e,{separator:t=" – "}={}){return this.isValid?"".concat(this.s.toFormat(e)).concat(t).concat(this.e.toFormat(e)):Lc}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):wt.invalid(this.invalidReason)}mapEndpoints(e){return pn.fromDateTimes(e(this.s),e(this.e))}}class cm{static hasDST(e=An.defaultZone){const t=at.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Qa.isValidZone(e)}static normalizeZone(e){return To(e,An.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||Yt.create(t,i,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||Yt.create(t,i,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null}={}){return(r||Yt.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null}={}){return(r||Yt.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Yt.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Yt.create(t,null,"gregory").eras(e)}static features(){return{relative:hM()}}}function qA(n,e){const t=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(wt.fromMillis(i).as("days"))}function ZX(n,e,t){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=qA(l,c);return(u-u%7)/7}],["days",qA]],r={},s=n;let a,o;for(const[l,c]of i)t.indexOf(l)>=0&&(a=l,r[l]=c(n,e),o=s.plus(r),o>e?(r[l]--,n=s.plus(r),n>e&&(o=n,r[l]--,n=s.plus(r))):n=o);return[n,r,o,a]}function eJ(n,e,t,i){let[r,s,a,o]=ZX(n,e,t);const l=e-r,c=t.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(a<e&&(a=r.plus({[o]:1})),a!==r&&(s[o]=(s[o]||0)+l/(a-r)));const u=wt.fromObject(s,i);return c.length>0?wt.fromMillis(l,i).shiftTo(...c).plus(u):u}const w1={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},UA={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},tJ=w1.hanidec.replace(/[\[|\]]/g,"").split("");function nJ(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(n[t].search(w1.hanidec)!==-1)e+=tJ.indexOf(n[t]);else for(const r in UA){const[s,a]=UA[r];i>=s&&i<=a&&(e+=i-s)}}return parseInt(e,10)}else return e}function os({numberingSystem:n},e=""){return new RegExp("".concat(w1[n||"latn"]).concat(e))}const iJ="missing Intl.DateTimeFormat.formatToParts support";function Pt(n,e=t=>t){return{regex:n,deser:([t])=>e(nJ(t))}}const rJ=String.fromCharCode(160),DM="[ ".concat(rJ,"]"),PM=new RegExp(DM,"g");function sJ(n){return n.replace(/\./g,"\\.?").replace(PM,DM)}function jA(n){return n.replace(/\./g,"").replace(PM," ").toLowerCase()}function ls(n,e){return n===null?null:{regex:RegExp(n.map(sJ).join("|")),deser:([t])=>n.findIndex(i=>jA(t)===jA(i))+e}}function zA(n,e){return{regex:n,deser:([,t,i])=>R0(t,i),groups:e}}function um(n){return{regex:n,deser:([e])=>e}}function aJ(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function oJ(n,e){const t=os(e),i=os(e,"{2}"),r=os(e,"{3}"),s=os(e,"{4}"),a=os(e,"{6}"),o=os(e,"{1,2}"),l=os(e,"{1,3}"),c=os(e,"{1,6}"),u=os(e,"{1,9}"),d=os(e,"{2,4}"),h=os(e,"{4,6}"),f=_=>({regex:RegExp(aJ(_.val)),deser:([v])=>v,literal:!0}),g=(_=>{if(n.literal)return f(_);switch(_.val){case"G":return ls(e.eras("short"),0);case"GG":return ls(e.eras("long"),0);case"y":return Pt(c);case"yy":return Pt(d,Ux);case"yyyy":return Pt(s);case"yyyyy":return Pt(h);case"yyyyyy":return Pt(a);case"M":return Pt(o);case"MM":return Pt(i);case"MMM":return ls(e.months("short",!0),1);case"MMMM":return ls(e.months("long",!0),1);case"L":return Pt(o);case"LL":return Pt(i);case"LLL":return ls(e.months("short",!1),1);case"LLLL":return ls(e.months("long",!1),1);case"d":return Pt(o);case"dd":return Pt(i);case"o":return Pt(l);case"ooo":return Pt(r);case"HH":return Pt(i);case"H":return Pt(o);case"hh":return Pt(i);case"h":return Pt(o);case"mm":return Pt(i);case"m":return Pt(o);case"q":return Pt(o);case"qq":return Pt(i);case"s":return Pt(o);case"ss":return Pt(i);case"S":return Pt(l);case"SSS":return Pt(r);case"u":return um(u);case"uu":return um(o);case"uuu":return Pt(t);case"a":return ls(e.meridiems(),0);case"kkkk":return Pt(s);case"kk":return Pt(d,Ux);case"W":return Pt(o);case"WW":return Pt(i);case"E":case"c":return Pt(t);case"EEE":return ls(e.weekdays("short",!1),1);case"EEEE":return ls(e.weekdays("long",!1),1);case"ccc":return ls(e.weekdays("short",!0),1);case"cccc":return ls(e.weekdays("long",!0),1);case"Z":case"ZZ":return zA(new RegExp("([+-]".concat(o.source,")(?::(").concat(i.source,"))?")),2);case"ZZZ":return zA(new RegExp("([+-]".concat(o.source,")(").concat(i.source,")?")),2);case"z":return um(/[a-z_+-/]{1,256}?/i);case" ":return um(/[^\S\n\r]/);default:return f(_)}})(n)||{invalidReason:iJ};return g.token=n,g}const lJ={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function cJ(n,e,t){const{type:i,value:r}=n;if(i==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=e[i];let a=i;i==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=t.hour12?"hour12":"hour24");let o=lJ[a];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function uJ(n){const e=n.map(t=>t.regex).reduce((t,i)=>"".concat(t,"(").concat(i.source,")"),"");return["^".concat(e,"$"),n]}function dJ(n,e,t){const i=n.match(e);if(i){const r={};let s=1;for(const a in t)if(Gu(t,a)){const o=t[a],l=o.groups?o.groups+1:1;!o.literal&&o.token&&(r[o.token.val[0]]=o.deser(i.slice(s,s+l))),s+=l}return[i,r]}else return[i,{}]}function hJ(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return vt(n.z)||(t=Qa.create(n.z)),vt(n.Z)||(t||(t=new Ii(n.Z)),i=n.Z),vt(n.q)||(n.M=(n.q-1)*3+1),vt(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),vt(n.u)||(n.S=m1(n.u)),[Object.keys(n).reduce((s,a)=>{const o=e(a);return o&&(s[o]=n[a]),s},{}),t,i]}let Bv=null;function fJ(){return Bv||(Bv=at.fromMillis(1555555555555)),Bv}function pJ(n,e){if(n.literal)return n;const t=di.macroTokenToFormatOpts(n.val),i=OM(t,e);return i==null||i.includes(void 0)?n:i}function IM(n,e){return Array.prototype.concat(...n.map(t=>pJ(t,e)))}function RM(n,e,t){const i=IM(di.parseFormat(t),n),r=i.map(a=>oJ(a,n)),s=r.find(a=>a.invalidReason);if(s)return{input:e,tokens:i,invalidReason:s.invalidReason};{const[a,o]=uJ(r),l=RegExp(a,"i"),[c,u]=dJ(e,l,o),[d,h,f]=u?hJ(u):[null,null,void 0];if(Gu(u,"a")&&Gu(u,"H"))throw new wh("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:l,rawMatches:c,matches:u,result:d,zone:h,specificOffset:f}}}function mJ(n,e,t){const{result:i,zone:r,specificOffset:s,invalidReason:a}=RM(n,e,t);return[i,r,s,a]}function OM(n,e){if(!n)return null;const i=di.create(e,n).dtFormatter(fJ()),r=i.formatToParts(),s=i.resolvedOptions();return r.map(a=>cJ(a,n,s))}const MM=[0,31,59,90,120,151,181,212,243,273,304,334],LM=[0,31,60,91,121,152,182,213,244,274,305,335];function Ur(n,e){return new bs("unit out of range","you specified ".concat(e," (of type ").concat(typeof e,") as a ").concat(n,", which is invalid"))}function $M(n,e,t){const i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return r===0?7:r}function BM(n,e,t){return t+(ep(n)?LM:MM)[e-1]}function FM(n,e){const t=ep(n)?LM:MM,i=t.findIndex(s=>s<e),r=e-t[i];return{month:i+1,day:r}}function jx(n){const{year:e,month:t,day:i}=n,r=BM(e,t,i),s=$M(e,t,i);let a=Math.floor((r-s+10)/7),o;return a<1?(o=e-1,a=Yg(o)):a>Yg(e)?(o=e+1,a=1):o=e,{weekYear:o,weekNumber:a,weekday:s,...O0(n)}}function VA(n){const{weekYear:e,weekNumber:t,weekday:i}=n,r=$M(e,1,4),s=qh(e);let a=t*7+i-r-3,o;a<1?(o=e-1,a+=qh(o)):a>s?(o=e+1,a-=qh(e)):o=e;const{month:l,day:c}=FM(o,a);return{year:o,month:l,day:c,...O0(n)}}function Fv(n){const{year:e,month:t,day:i}=n,r=BM(e,t,i);return{year:e,ordinal:r,...O0(n)}}function HA(n){const{year:e,ordinal:t}=n,{month:i,day:r}=FM(e,t);return{year:e,month:i,day:r,...O0(n)}}function gJ(n){const e=P0(n.weekYear),t=Ma(n.weekNumber,1,Yg(n.weekYear)),i=Ma(n.weekday,1,7);return e?t?i?!1:Ur("weekday",n.weekday):Ur("week",n.week):Ur("weekYear",n.weekYear)}function yJ(n){const e=P0(n.year),t=Ma(n.ordinal,1,qh(n.year));return e?t?!1:Ur("ordinal",n.ordinal):Ur("year",n.year)}function qM(n){const e=P0(n.year),t=Ma(n.month,1,12),i=Ma(n.day,1,Kg(n.year,n.month));return e?t?i?!1:Ur("day",n.day):Ur("month",n.month):Ur("year",n.year)}function UM(n){const{hour:e,minute:t,second:i,millisecond:r}=n,s=Ma(e,0,23)||e===24&&t===0&&i===0&&r===0,a=Ma(t,0,59),o=Ma(i,0,59),l=Ma(r,0,999);return s?a?o?l?!1:Ur("millisecond",r):Ur("second",i):Ur("minute",t):Ur("hour",e)}const qv="Invalid DateTime",WA=864e13;function dm(n){return new bs("unsupported zone",'the zone "'.concat(n.name,'" is not supported'))}function Uv(n){return n.weekData===null&&(n.weekData=jx(n.c)),n.weekData}function ml(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new at({...t,...e,old:t})}function jM(n,e,t){let i=n-e*60*1e3;const r=t.offset(i);if(e===r)return[i,e];i-=(r-e)*60*1e3;const s=t.offset(i);return r===s?[i,r]:[n-Math.min(r,s)*60*1e3,Math.max(r,s)]}function hm(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function zm(n,e,t){return jM(I0(n),e,t)}function GA(n,e){const t=n.o,i=n.c.year+Math.trunc(e.years),r=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:i,month:r,day:Math.min(n.c.day,Kg(i,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=wt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=I0(s);let[l,c]=jM(o,t,n.zone);return a!==0&&(l+=a,c=n.zone.offset(l)),{ts:l,o:c}}function th(n,e,t,i,r,s){const{setZone:a,zone:o}=t;if(n&&Object.keys(n).length!==0||e){const l=e||o,c=at.fromObject(n,{...t,zone:l,specificOffset:s});return a?c:c.setZone(o)}else return at.invalid(new bs("unparsable",'the input "'.concat(r,"\" can't be parsed as ").concat(i)))}function fm(n,e,t=!0){return n.isValid?di.create(Yt.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function jv(n,e){const t=n.c.year>9999||n.c.year<0;let i="";return t&&n.c.year>=0&&(i+="+"),i+=kn(n.c.year,t?6:4),e?(i+="-",i+=kn(n.c.month),i+="-",i+=kn(n.c.day)):(i+=kn(n.c.month),i+=kn(n.c.day)),i}function QA(n,e,t,i,r,s){let a=kn(n.c.hour);return e?(a+=":",a+=kn(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(a+=":")):a+=kn(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(a+=kn(n.c.second),(n.c.millisecond!==0||!i)&&(a+=".",a+=kn(n.c.millisecond,3))),r&&(n.isOffsetFixed&&n.offset===0&&!s?a+="Z":n.o<0?(a+="-",a+=kn(Math.trunc(-n.o/60)),a+=":",a+=kn(Math.trunc(-n.o%60))):(a+="+",a+=kn(Math.trunc(n.o/60)),a+=":",a+=kn(Math.trunc(n.o%60)))),s&&(a+="["+n.zone.ianaName+"]"),a}const zM={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},bJ={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},vJ={ordinal:1,hour:0,minute:0,second:0,millisecond:0},VM=["year","month","day","hour","minute","second","millisecond"],wJ=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],xJ=["year","ordinal","hour","minute","second","millisecond"];function KA(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new WO(n);return e}function YA(n,e){const t=To(e.zone,An.defaultZone),i=Yt.fromObject(e),r=An.now();let s,a;if(vt(n.year))s=r;else{for(const c of VM)vt(n[c])&&(n[c]=zM[c]);const o=qM(n)||UM(n);if(o)return at.invalid(o);const l=t.offset(r);[s,a]=zm(n,l,t)}return new at({ts:s,zone:t,loc:i,o:a})}function XA(n,e,t){const i=vt(t.round)?!0:t.round,r=(a,o)=>(a=g1(a,i||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(a,o)),s=a=>t.calendary?e.hasSame(n,a)?0:e.startOf(a).diff(n.startOf(a),a).get(a):e.diff(n,a).get(a);if(t.unit)return r(s(t.unit),t.unit);for(const a of t.units){const o=s(a);if(Math.abs(o)>=1)return r(o,a)}return r(n>e?-0:0,t.units[t.units.length-1])}function JA(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}class at{constructor(e){const t=e.zone||An.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new bs("invalid input"):null)||(t.isValid?null:dm(t));this.ts=vt(e.ts)?An.now():e.ts;let r=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,s]=[e.old.c,e.old.o];else{const o=t.offset(this.ts);r=hm(this.ts,o),i=Number.isNaN(r.year)?new bs("invalid input"):null,r=i?null:r,s=i?null:o}this._zone=t,this.loc=e.loc||Yt.create(),this.invalid=i,this.weekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new at({})}static local(){const[e,t]=JA(arguments),[i,r,s,a,o,l,c]=t;return YA({year:i,month:r,day:s,hour:a,minute:o,second:l,millisecond:c},e)}static utc(){const[e,t]=JA(arguments),[i,r,s,a,o,l,c]=t;return e.zone=Ii.utcInstance,YA({year:i,month:r,day:s,hour:a,minute:o,second:l,millisecond:c},e)}static fromJSDate(e,t={}){const i=KY(e)?e.valueOf():NaN;if(Number.isNaN(i))return at.invalid("invalid input");const r=To(t.zone,An.defaultZone);return r.isValid?new at({ts:i,zone:r,loc:Yt.fromObject(t)}):at.invalid(dm(r))}static fromMillis(e,t={}){if(Ml(e))return e<-WA||e>WA?at.invalid("Timestamp out of range"):new at({ts:e,zone:To(t.zone,An.defaultZone),loc:Yt.fromObject(t)});throw new Fr("fromMillis requires a numerical input, but received a ".concat(typeof e," with value ").concat(e))}static fromSeconds(e,t={}){if(Ml(e))return new at({ts:e*1e3,zone:To(t.zone,An.defaultZone),loc:Yt.fromObject(t)});throw new Fr("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=To(t.zone,An.defaultZone);if(!i.isValid)return at.invalid(dm(i));const r=An.now(),s=vt(t.specificOffset)?i.offset(r):t.specificOffset,a=Xg(e,KA),o=!vt(a.ordinal),l=!vt(a.year),c=!vt(a.month)||!vt(a.day),u=l||c,d=a.weekYear||a.weekNumber,h=Yt.fromObject(t);if((u||o)&&d)throw new wh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new wh("Can't mix ordinal dates with month/day");const f=d||a.weekday&&!u;let m,g,_=hm(r,s);f?(m=wJ,g=bJ,_=jx(_)):o?(m=xJ,g=vJ,_=Fv(_)):(m=VM,g=zM);let v=!1;for(const B of m){const M=a[B];vt(M)?v?a[B]=g[B]:a[B]=_[B]:v=!0}const y=f?gJ(a):o?yJ(a):qM(a),T=y||UM(a);if(T)return at.invalid(T);const N=f?VA(a):o?HA(a):a,[P,F]=zm(N,s,i),$=new at({ts:P,zone:i,o:F,loc:h});return a.weekday&&u&&e.weekday!==$.weekday?at.invalid("mismatched weekday","you can't specify both a weekday of ".concat(a.weekday," and a date of ").concat($.toISO())):$}static fromISO(e,t={}){const[i,r]=BX(e);return th(i,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,r]=FX(e);return th(i,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,r]=qX(e);return th(i,r,t,"HTTP",t)}static fromFormat(e,t,i={}){if(vt(e)||vt(t))throw new Fr("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=i,a=Yt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[o,l,c,u]=mJ(a,e,t);return u?at.invalid(u):th(o,l,i,"format ".concat(t),e,c)}static fromString(e,t,i={}){return at.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,r]=GX(e);return th(i,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Fr("need to specify a reason the DateTime is invalid");const i=e instanceof bs?e:new bs(e,t);if(An.throwOnInvalid)throw new CY(i);return new at({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=OM(e,Yt.fromObject(t));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(e,t={}){return IM(di.parseFormat(e),Yt.fromObject(t)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Uv(this).weekYear:NaN}get weekNumber(){return this.isValid?Uv(this).weekNumber:NaN}get weekday(){return this.isValid?Uv(this).weekday:NaN}get ordinal(){return this.isValid?Fv(this.c).ordinal:NaN}get monthShort(){return this.isValid?cm.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?cm.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?cm.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?cm.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=I0(this.c),r=this.zone.offset(i-e),s=this.zone.offset(i+e),a=this.zone.offset(i-r*t),o=this.zone.offset(i-s*t);if(a===o)return[this];const l=i-a*t,c=i-o*t,u=hm(l,a),d=hm(c,o);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[ml(this,{ts:l}),ml(this,{ts:c})]:[this]}get isInLeapYear(){return ep(this.year)}get daysInMonth(){return Kg(this.year,this.month)}get daysInYear(){return this.isValid?qh(this.year):NaN}get weeksInWeekYear(){return this.isValid?Yg(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:r}=di.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(Ii.instance(e),t)}toLocal(){return this.setZone(An.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=To(e,An.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||i){const s=e.offset(this.ts),a=this.toObject();[r]=zm(a,s,e)}return ml(this,{ts:r,zone:e})}else return at.invalid(dm(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const r=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return ml(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Xg(e,KA),i=!vt(t.weekYear)||!vt(t.weekNumber)||!vt(t.weekday),r=!vt(t.ordinal),s=!vt(t.year),a=!vt(t.month)||!vt(t.day),o=s||a,l=t.weekYear||t.weekNumber;if((o||r)&&l)throw new wh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&r)throw new wh("Can't mix ordinal dates with month/day");let c;i?c=VA({...jx(this.c),...t}):vt(t.ordinal)?(c={...this.toObject(),...t},vt(t.day)&&(c.day=Math.min(Kg(c.year,c.month),c.day))):c=HA({...Fv(this.c),...t});const[u,d]=zm(c,this.o,this.zone);return ml(this,{ts:u,o:d})}plus(e){if(!this.isValid)return this;const t=wt.fromDurationLike(e);return ml(this,GA(this,t))}minus(e){if(!this.isValid)return this;const t=wt.fromDurationLike(e).negate();return ml(this,GA(this,t))}startOf(e){if(!this.isValid)return this;const t={},i=wt.normalizeUnit(e);switch(i){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0;break}if(i==="weeks"&&(t.weekday=1),i==="quarters"){const r=Math.ceil(this.month/3);t.month=(r-1)*3+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?di.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):qv}toLocaleString(e=Qg,t={}){return this.isValid?di.create(this.loc.clone(t),e).formatDateTime(this):qv}toLocaleParts(e={}){return this.isValid?di.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const a=e==="extended";let o=jv(this,a);return o+="T",o+=QA(this,a,t,i,r,s),o}toISODate({format:e="extended"}={}){return this.isValid?jv(this,e==="extended"):null}toISOWeekDate(){return fm(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:s=!1,format:a="extended"}={}){return this.isValid?(r?"T":"")+QA(this,a==="extended",t,e,i,s):null}toRFC2822(){return fm(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return fm(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?jv(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(i&&(r+=" "),t?r+="z":e&&(r+="ZZ")),fm(this,r,!0)}toSQL(e={}){return this.isValid?"".concat(this.toSQLDate()," ").concat(this.toSQLTime(e)):null}toString(){return this.isValid?this.toISO():qv}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return wt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=YY(t).map(wt.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,l=a?e:this,c=eJ(o,l,s,r);return a?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(at.now(),e,t)}until(e){return this.isValid?pn.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;const i=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(t)<=i&&i<=r.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||at.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),XA(t,this.plus(i),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?XA(e.base||at.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(at.isDateTime))throw new Fr("min requires all arguments be DateTimes");return MA(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(at.isDateTime))throw new Fr("max requires all arguments be DateTimes");return MA(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:r=null,numberingSystem:s=null}=i,a=Yt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return RM(a,e,t)}static fromStringExplain(e,t,i={}){return at.fromFormatExplain(e,t,i)}static get DATE_SHORT(){return Qg}static get DATE_MED(){return GO}static get DATE_MED_WITH_WEEKDAY(){return NY}static get DATE_FULL(){return QO}static get DATE_HUGE(){return KO}static get TIME_SIMPLE(){return YO}static get TIME_WITH_SECONDS(){return XO}static get TIME_WITH_SHORT_OFFSET(){return JO}static get TIME_WITH_LONG_OFFSET(){return ZO}static get TIME_24_SIMPLE(){return eM}static get TIME_24_WITH_SECONDS(){return tM}static get TIME_24_WITH_SHORT_OFFSET(){return nM}static get TIME_24_WITH_LONG_OFFSET(){return iM}static get DATETIME_SHORT(){return rM}static get DATETIME_SHORT_WITH_SECONDS(){return sM}static get DATETIME_MED(){return aM}static get DATETIME_MED_WITH_SECONDS(){return oM}static get DATETIME_MED_WITH_WEEKDAY(){return DY}static get DATETIME_FULL(){return lM}static get DATETIME_FULL_WITH_SECONDS(){return cM}static get DATETIME_HUGE(){return uM}static get DATETIME_HUGE_WITH_SECONDS(){return dM}}function nh(n){if(at.isDateTime(n))return n;if(n&&n.valueOf&&Ml(n.valueOf()))return at.fromJSDate(n);if(n&&typeof n=="object")return at.fromObject(n);throw new Fr("Unknown datetime argument: ".concat(n,", of type ").concat(typeof n))}const EJ=({timerInterval:n,timerKey:e,timerDuration:t,timerActive:i,unsetTimer:r})=>{const a=t?(t-Date.now())/1e3:n*1,o=(l,c)=>{const u=wt.fromMillis(l*1e3).toFormat("mm:ss");return ne.jsxs("div",{className:"time-wrapper",children:[ne.jsx("div",{children:c?"NEXT BREAK IS IN":"CLICK PLAY BUTTON"}),ne.jsx("div",{className:"timer-digits",children:ne.jsx("div",{children:u})})]})};return ne.jsx(HO,{isPlaying:i,size:300,strokeWidth:22,colors:["#004777","#F7B801","#A30000","#A30000"],colorsTime:[7,5,2,0],rotation:"clockwise",duration:n*1,initialRemainingTime:a>0?a:n*1,onComplete:()=>{r()},children:({remainingTime:l})=>o(l,i)},e)},TJ=({timerStatus:n,timerHandler:e})=>ne.jsx(Hi,{color:"success",expand:"full",onClick:e,children:ne.jsx(hr,{icon:n==="running"?VH:HH,size:"large"})});const HM=()=>{const n=()=>{window.location.href="https://backpackgym.com"};return ne.jsxs(QV,{contentId:"main-content",children:[ne.jsx(Uo,{children:ne.jsx(zu,{color:"tertiary",children:ne.jsx(wf,{children:"Menu"})})}),ne.jsxs(ju,{className:"ion-padding",children:[ne.jsxs(GV,{children:[ne.jsx(Xd,{children:ne.jsxs(Eo,{lines:"full",button:!0,routerLink:"/timer",children:[ne.jsx(hr,{slot:"start",icon:uO}),ne.jsx(Mo,{children:"Start Your Workout"})]})}),ne.jsx(Xd,{children:ne.jsxs(Eo,{lines:"full",button:!0,href:"https://backpackgym.com/contact",children:[ne.jsx(hr,{slot:"start",icon:QH}),ne.jsx(Mo,{children:"Video Tutorial"})]})}),ne.jsx(Xd,{children:ne.jsxs(Eo,{lines:"full",button:!0,href:"https://backpackgym.com/contact",children:[ne.jsx(hr,{slot:"start",icon:zH}),ne.jsx(Mo,{children:"Contact"})]})}),ne.jsx(Xd,{children:ne.jsx(Eo,{lines:"none",children:ne.jsxs(Hf,{slot:"end",children:[ne.jsx(Hi,{href:"https://facebook.com/backpackgym",children:ne.jsx(hr,{slot:"icon-only",icon:UH})}),ne.jsx(Hi,{href:"https://facebook.com/backpackgym",children:ne.jsx(hr,{slot:"icon-only",icon:jH})})]})})}),ne.jsx(Xd,{children:ne.jsx(Eo,{className:"bpg-block",onClick:n})})]}),ne.jsx("div",{slot:"fixed",className:"app-info",children:ne.jsxs("p",{children:["Presented by Backpack Gym® ",ne.jsx("br",{}),"App version 1.0.1"]})})]})]})};const WM=()=>ne.jsxs(vH,{slot:"bottom",color:"warning",children:[ne.jsxs(Su,{className:"my-tab-button",tab:"home",href:"/home",children:[ne.jsx(hr,{icon:qH}),ne.jsx(Mo,{children:"Home"}),ne.jsx(HV,{color:"danger",children:"1"})]}),ne.jsxs(Su,{className:"my-tab-button",tab:"timer",href:"/timer",children:[ne.jsx(hr,{icon:uO}),ne.jsx(Mo,{children:"Timer"})]}),ne.jsxs(Su,{className:"my-tab-button",tab:"settings",href:"/timer-configuration",children:[ne.jsx(hr,{icon:WH}),ne.jsx(Mo,{children:"Settings"})]})]}),SJ=({timerStatus:n,unsetTimer:e})=>ne.jsx(Hi,{color:"danger",expand:"full",disabled:n==="running",onClick:e,children:ne.jsx(hr,{icon:GH,size:"large"})});var ZA;(function(n){n[n.Sunday=1]="Sunday",n[n.Monday=2]="Monday",n[n.Tuesday=3]="Tuesday",n[n.Wednesday=4]="Wednesday",n[n.Thursday=5]="Thursday",n[n.Friday=6]="Friday",n[n.Saturday=7]="Saturday"})(ZA||(ZA={}));const zx=Wf("LocalNotifications",{web:()=>ci(()=>import("./web-529fe8de.js"),[]).then(n=>new n.LocalNotificationsWeb)}),ek=async n=>{try{if((await zx.requestPermissions()).display!=="granted")throw new Error("Permissions haven't been granted");await zx.schedule({notifications:[{title:"Friendly Reminder",body:"Get up and workout",id:1,schedule:{at:new Date(Date.now()+n)},extra:{data:"Pass data to your handler"},iconColor:"#FF7F50",sound:"birds.wav"}]})}catch(e){console.log(e)}},_J=async()=>{zx.cancel({notifications:[{id:1}]})};function tk(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function x1(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:tk(e[t])&&tk(n[t])&&Object.keys(e[t]).length>0&&x1(n[t],e[t])})}const GM={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function dc(){const n=typeof document<"u"?document:{};return x1(n,GM),n}const CJ={document:GM,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function Sr(){const n=typeof window<"u"?window:{};return x1(n,CJ),n}function AJ(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch(i){}try{delete e[t]}catch(i){}})}function Vx(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Jg(){return Date.now()}function kJ(n){const e=Sr();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function NJ(n,e){e===void 0&&(e="x");const t=Sr();let i,r,s;const a=kJ(n);return t.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function pm(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function DJ(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function dr(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!DJ(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,a=r.length;s<a;s+=1){const o=r[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(pm(n[o])&&pm(i[o])?i[o].__swiper__?n[o]=i[o]:dr(n[o],i[o]):!pm(n[o])&&pm(i[o])?(n[o]={},i[o].__swiper__?n[o]=i[o]:dr(n[o],i[o])):n[o]=i[o])}}}return n}function mm(n,e,t){n.style.setProperty(e,t)}function QM(n){let{swiper:e,targetPosition:t,side:i}=n;const r=Sr(),s=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",u=(h,f)=>c==="next"&&h>=f||c==="prev"&&h<=f,d=()=>{o=new Date().getTime(),a===null&&(a=o);const h=Math.max(Math.min((o-a)/l,1),0),f=.5-Math.cos(h*Math.PI)/2;let m=s+f*(t-s);if(u(m,t)&&(m=t),e.wrapperEl.scrollTo({[i]:m}),u(m,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:m})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(d)};d()}function Xs(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function cu(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:[e]),t}function PJ(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function IJ(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Co(n,e){return Sr().getComputedStyle(n,null).getPropertyValue(e)}function Zg(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function KM(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function Hx(n,e,t){const i=Sr();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let zv;function RJ(){const n=Sr(),e=dc();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function YM(){return zv||(zv=RJ()),zv}let Vv;function OJ(n){let{userAgent:e}=n===void 0?{}:n;const t=YM(),i=Sr(),r=i.navigator.platform,s=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad).*OS\s([\d_]+)/);const d=s.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=r==="Win32";let m=r==="MacIntel";const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&m&&t.touch&&g.indexOf("".concat(o,"x").concat(l))>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),m=!1),c&&!f&&(a.os="android",a.android=!0),(u||h||d)&&(a.os="ios",a.ios=!0),a}function MJ(n){return n===void 0&&(n={}),Vv||(Vv=OJ(n)),Vv}let Hv;function LJ(){const n=Sr();let e=!1;function t(){const i=n.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}if(t()){const i=String(n.navigator.userAgent);if(i.includes("Version/")){const[r,s]=i.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=r<16||r===16&&s<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent)}}function $J(){return Hv||(Hv=LJ()),Hv}function BJ(n){let{swiper:e,on:t,emit:i}=n;const r=Sr();let s=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(d=>{a=r.requestAnimationFrame(()=>{const{width:h,height:f}=e;let m=h,g=f;d.forEach(_=>{let{contentBoxSize:v,contentRect:y,target:T}=_;T&&T!==e.el||(m=y?y.width:(v[0]||v).inlineSize,g=y?y.height:(v[0]||v).blockSize)}),(m!==h||g!==f)&&o()})}),s.observe(e.el))},c=()=>{a&&r.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",u)})}function FJ(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],a=Sr(),o=function(u,d){d===void 0&&(d={});const h=a.MutationObserver||a.WebkitMutationObserver,f=new h(m=>{if(e.__preventObserver__)return;if(m.length===1){r("observerUpdate",m[0]);return}const g=function(){r("observerUpdate",m[0])};a.requestAnimationFrame?a.requestAnimationFrame(g):a.setTimeout(g,0)});f.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),s.push(f)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=KM(e.hostEl);for(let d=0;d<u.length;d+=1)o(u[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var qJ={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];e.apply(i,a)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function UJ(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Co(i,"padding-left")||0,10)-parseInt(Co(i,"padding-right")||0,10),t=t-parseInt(Co(i,"padding-top")||0,10)-parseInt(Co(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function jJ(){const n=this;function e(O){return n.isHorizontal()?O:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[O]}function t(O,K){return parseFloat(O.getPropertyValue(e(K))||0)}const i=n.params,{wrapperEl:r,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=n,c=n.virtual&&i.virtual.enabled,u=c?n.virtual.slides.length:n.slides.length,d=Xs(s,".".concat(n.params.slideClass,", swiper-slide")),h=c?n.virtual.slides.length:d.length;let f=[];const m=[],g=[];let _=i.slidesOffsetBefore;typeof _=="function"&&(_=i.slidesOffsetBefore.call(n));let v=i.slidesOffsetAfter;typeof v=="function"&&(v=i.slidesOffsetAfter.call(n));const y=n.snapGrid.length,T=n.slidesGrid.length;let N=i.spaceBetween,P=-_,F=0,$=0;if(typeof a>"u")return;typeof N=="string"&&N.indexOf("%")>=0?N=parseFloat(N.replace("%",""))/100*a:typeof N=="string"&&(N=parseFloat(N)),n.virtualSize=-N,d.forEach(O=>{o?O.style.marginLeft="":O.style.marginRight="",O.style.marginBottom="",O.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(mm(r,"--swiper-centered-offset-before",""),mm(r,"--swiper-centered-offset-after",""));const B=i.grid&&i.grid.rows>1&&n.grid;B&&n.grid.initSlides(h);let M;const Z=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(O=>typeof i.breakpoints[O].slidesPerView<"u").length>0;for(let O=0;O<h;O+=1){M=0;let K;if(d[O]&&(K=d[O]),B&&n.grid.updateSlide(O,K,h,e),!(d[O]&&Co(K,"display")==="none")){if(i.slidesPerView==="auto"){Z&&(d[O].style[e("width")]="");const z=getComputedStyle(K),te=K.style.transform,ue=K.style.webkitTransform;if(te&&(K.style.transform="none"),ue&&(K.style.webkitTransform="none"),i.roundLengths)M=n.isHorizontal()?Hx(K,"width",!0):Hx(K,"height",!0);else{const ye=t(z,"width"),be=t(z,"padding-left"),de=t(z,"padding-right"),he=t(z,"margin-left"),ee=t(z,"margin-right"),le=z.getPropertyValue("box-sizing");if(le&&le==="border-box")M=ye+he+ee;else{const{clientWidth:Te,offsetWidth:$e}=K;M=ye+be+de+he+ee+($e-Te)}}te&&(K.style.transform=te),ue&&(K.style.webkitTransform=ue),i.roundLengths&&(M=Math.floor(M))}else M=(a-(i.slidesPerView-1)*N)/i.slidesPerView,i.roundLengths&&(M=Math.floor(M)),d[O]&&(d[O].style[e("width")]="".concat(M,"px"));d[O]&&(d[O].swiperSlideSize=M),g.push(M),i.centeredSlides?(P=P+M/2+F/2+N,F===0&&O!==0&&(P=P-a/2-N),O===0&&(P=P-a/2-N),Math.abs(P)<1/1e3&&(P=0),i.roundLengths&&(P=Math.floor(P)),$%i.slidesPerGroup===0&&f.push(P),m.push(P)):(i.roundLengths&&(P=Math.floor(P)),($-Math.min(n.params.slidesPerGroupSkip,$))%n.params.slidesPerGroup===0&&f.push(P),m.push(P),P=P+M+N),n.virtualSize+=M+N,F=M,$+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+v,o&&l&&(i.effect==="slide"||i.effect==="coverflow")&&(r.style.width="".concat(n.virtualSize+N,"px")),i.setWrapperSize&&(r.style[e("width")]="".concat(n.virtualSize+N,"px")),B&&n.grid.updateWrapperSize(M,f,e),!i.centeredSlides){const O=[];for(let K=0;K<f.length;K+=1){let z=f[K];i.roundLengths&&(z=Math.floor(z)),f[K]<=n.virtualSize-a&&O.push(z)}f=O,Math.floor(n.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(n.virtualSize-a)}if(c&&i.loop){const O=g[0]+N;if(i.slidesPerGroup>1){const K=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/i.slidesPerGroup),z=O*i.slidesPerGroup;for(let te=0;te<K;te+=1)f.push(f[f.length-1]+z)}for(let K=0;K<n.virtual.slidesBefore+n.virtual.slidesAfter;K+=1)i.slidesPerGroup===1&&f.push(f[f.length-1]+O),m.push(m[m.length-1]+O),n.virtualSize+=O}if(f.length===0&&(f=[0]),N!==0){const O=n.isHorizontal()&&o?"marginLeft":e("marginRight");d.filter((K,z)=>!i.cssMode||i.loop?!0:z!==d.length-1).forEach(K=>{K.style[O]="".concat(N,"px")})}if(i.centeredSlides&&i.centeredSlidesBounds){let O=0;g.forEach(z=>{O+=z+(N||0)}),O-=N;const K=O-a;f=f.map(z=>z<=0?-_:z>K?K+v:z)}if(i.centerInsufficientSlides){let O=0;if(g.forEach(K=>{O+=K+(N||0)}),O-=N,O<a){const K=(a-O)/2;f.forEach((z,te)=>{f[te]=z-K}),m.forEach((z,te)=>{m[te]=z+K})}}if(Object.assign(n,{slides:d,snapGrid:f,slidesGrid:m,slidesSizesGrid:g}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){mm(r,"--swiper-centered-offset-before","".concat(-f[0],"px")),mm(r,"--swiper-centered-offset-after","".concat(n.size/2-g[g.length-1]/2,"px"));const O=-n.snapGrid[0],K=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(z=>z+O),n.slidesGrid=n.slidesGrid.map(z=>z+K)}if(h!==u&&n.emit("slidesLengthChange"),f.length!==y&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),m.length!==T&&n.emit("slidesGridLengthChange"),i.watchSlidesProgress&&n.updateSlidesOffset(),!c&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const O="".concat(i.containerModifierClass,"backface-hidden"),K=n.el.classList.contains(O);h<=i.maxBackfaceHiddenSlides?K||n.el.classList.add(O):K&&n.el.classList.remove(O)}}function zJ(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const o=t[s].offsetHeight;r=o>r?o:r}(r||r===0)&&(e.wrapperEl.style.height="".concat(r,"px"))}function VJ(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}function HJ(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;r&&(a=n),i.forEach(l=>{l.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const c=i[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),h=(a-s[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),f=-(a-u),m=f+e.slidesSizesGrid[l];(f>=0&&f<e.size-1||m>1&&m<=e.size||f<=0&&m>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),c.progress=r?-d:d,c.originalProgress=r?-h:h}}function WJ(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,c=a;if(i===0)r=0,s=!0,a=!0;else{r=(n-e.minTranslate())/i;const u=Math.abs(n-e.minTranslate())<1,d=Math.abs(n-e.maxTranslate())<1;s=u||r<=0,a=d||r>=1,u&&(r=0),d&&(r=1)}if(t.loop){const u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[u],f=e.slidesGrid[d],m=e.slidesGrid[e.slidesGrid.length-1],g=Math.abs(n);g>=h?o=(g-h)/m:o=(g+m-f)/m,o>1&&(o-=1)}Object.assign(e,{progress:r,progressLoop:o,isBeginning:s,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}function GJ(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,a=l=>Xs(i,".".concat(t.slideClass).concat(l,", swiper-slide").concat(l))[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let o;if(s)if(t.loop){let l=r-n.virtual.slidesBefore;l<0&&(l=n.virtual.slides.length+l),l>=n.virtual.slides.length&&(l-=n.virtual.slides.length),o=a('[data-swiper-slide-index="'.concat(l,'"]'))}else o=a('[data-swiper-slide-index="'.concat(r,'"]'));else o=e[r];if(o){o.classList.add(t.slideActiveClass);let l=IJ(o,".".concat(t.slideClass,", swiper-slide"))[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let c=PJ(o,".".concat(t.slideClass,", swiper-slide"))[0];t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass)}n.emitSlidesClasses()}const Vm=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":".".concat(n.params.slideClass),i=e.closest(t());if(i){let r=i.querySelector(".".concat(n.params.lazyPreloaderClass));!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(".".concat(n.params.lazyPreloaderClass)):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(".".concat(n.params.lazyPreloaderClass)),r&&r.remove())})),r&&r.remove()}},Wv=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Wx=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=r,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+i+c)),n.slides.forEach((l,c)=>{o.includes(l.column)&&Wv(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let a=r-e;a<=s+e;a+=1){const o=(a%t+t)%t;(o<r||o>s)&&Wv(n,o)}else for(let a=Math.max(r-e,0);a<=Math.min(s+e,t-1);a+=1)a!==r&&(a>s||a<r)&&Wv(n,a)};function QJ(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function KJ(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=n,c;const u=h=>{let f=h-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=QJ(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const h=Math.min(r.slidesPerGroupSkip,l);c=h+Math.floor((l-h)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=u(l));return}let d;e.virtual&&r.virtual.enabled&&r.loop?d=u(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:d,previousIndex:s,activeIndex:l}),e.initialized&&Wx(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==d&&e.emit("realIndexChange"),e.emit("slideChange"))}function YJ(n,e){const t=this,i=t.params;let r=n.closest(".".concat(i.slideClass,", swiper-slide"));!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!r&&o.matches&&o.matches(".".concat(i.slideClass,", swiper-slide"))&&(r=o)});let s=!1,a;if(r){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===r){s=!0,a=o;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var XJ={updateSize:UJ,updateSlides:jJ,updateAutoHeight:zJ,updateSlidesOffset:VJ,updateSlidesProgress:HJ,updateProgress:WJ,updateSlidesClasses:GJ,updateActiveIndex:KJ,updateClickedSlide:YJ};function JJ(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let a=NJ(s,n);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function ZJ(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=i?-n:n:l=n,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:r.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform="translate3d(".concat(o,"px, ").concat(l,"px, ").concat(c,"px)"));let u;const d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(n-t.minTranslate())/d,u!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function eZ(){return-this.snapGrid[0]}function tZ(){return-this.snapGrid[this.snapGrid.length-1]}function nZ(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(i&&n>l?u=l:i&&n<c?u=c:u=n,s.updateProgress(u),a.cssMode){const d=s.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return QM({swiper:s,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(h){!s||s.destroyed||h.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var iZ={getTranslate:JJ,setTranslate:ZJ,minTranslate:eZ,maxTranslate:tZ,translateTo:nZ};function rZ(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration="".concat(n,"ms"),t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function XM(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:a}=e;let o=i;if(o||(s>a?o="next":s<a?o="prev":o="reset"),e.emit("transition".concat(r)),t&&s!==a){if(o==="reset"){e.emit("slideResetTransition".concat(r));return}e.emit("slideChangeTransition".concat(r)),o==="next"?e.emit("slideNextTransition".concat(r)):e.emit("slidePrevTransition".concat(r))}}function sZ(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),XM({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function aZ(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),XM({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var oZ={setTransition:rZ,transitionStart:sZ,transitionEnd:aZ};function lZ(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:m}=s;if(s.animating&&o.preventInteractionOnTransition||!m&&!i&&!r)return!1;const g=Math.min(s.params.slidesPerGroupSkip,a);let _=g+Math.floor((a-g)/s.params.slidesPerGroup);_>=l.length&&(_=l.length-1);const v=-l[_];if(o.normalizeSlideIndex)for(let T=0;T<c.length;T+=1){const N=-Math.floor(v*100),P=Math.floor(c[T]*100),F=Math.floor(c[T+1]*100);typeof c[T+1]<"u"?N>=P&&N<F-(F-P)/2?a=T:N>=P&&N<F&&(a=T+1):N>=P&&(a=T)}if(s.initialized&&a!==d&&(!s.allowSlideNext&&(h?v>s.translate&&v>s.minTranslate():v<s.translate&&v<s.minTranslate())||!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(d||0)!==a))return!1;a!==(u||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(v);let y;if(a>d?y="next":a<d?y="prev":y="reset",h&&-v===s.translate||!h&&v===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(v),y!=="reset"&&(s.transitionStart(t,y),s.transitionEnd(t,y)),!1;if(o.cssMode){const T=s.isHorizontal(),N=h?v:-v;if(e===0){const P=s.virtual&&s.params.virtual.enabled;P&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),P&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[T?"scrollLeft":"scrollTop"]=N})):f[T?"scrollLeft":"scrollTop"]=N,P&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return QM({swiper:s,targetPosition:N,side:T?"left":"top"}),!0;f.scrollTo({[T?"left":"top"]:N,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,y),e===0?s.transitionEnd(t,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(N){!s||s.destroyed||N.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,y))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function cZ(n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;let s=n;return r.params.loop&&(r.virtual&&r.params.virtual.enabled?s=s+r.virtual.slidesBefore:s=r.getSlideIndexByData(s)),r.slideTo(s,e,t,i)}function uZ(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:a}=i;if(!r)return i;let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:o,c=i.virtual&&s.virtual.enabled;if(s.loop){if(a&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function dZ(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=i;if(!l)return i;const u=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const d=o?i.translate:-i.translate;function h(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}const f=h(d),m=s.map(v=>h(v));let g=s[m.indexOf(f)-1];if(typeof g>"u"&&r.cssMode){let v;s.forEach((y,T)=>{f>=y&&(v=T)}),typeof v<"u"&&(g=s[v>0?v-1:v])}let _=0;if(typeof g<"u"&&(_=a.indexOf(g),_<0&&(_=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(_=_-i.slidesPerViewDynamic("previous",!0)+1,_=Math.max(_,0))),r.rewind&&i.isBeginning){const v=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(v,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(_,n,e,t)}),!0;return i.slideTo(_,n,e,t)}function hZ(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this;return i.slideTo(i.activeIndex,n,e,t)}function fZ(n,e,t,i){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const c=r.snapGrid[o],u=r.snapGrid[o+1];l-c>(u-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[o-1],u=r.snapGrid[o];l-c<=(u-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function pZ(){const n=this,{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const a=n.isElement?"swiper-slide":".".concat(e.slideClass);if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(Xs(t,"".concat(a,'[data-swiper-slide-index="').concat(s,'"]'))[0]),Vx(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(Xs(t,"".concat(a,'[data-swiper-slide-index="').concat(s,'"]'))[0]),Vx(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var mZ={slideTo:lZ,slideToLoop:cZ,slideNext:uZ,slidePrev:dZ,slideReset:hZ,slideToClosest:fZ,slideToClickedSlide:pZ};function gZ(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;Xs(i,".".concat(t.slideClass,", swiper-slide")).forEach((s,a)=>{s.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function yZ(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:a,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:d,slidesEl:h,params:f}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&f.virtual.enabled){t&&(!f.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):f.centeredSlides&&l.snapIndex<f.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=d,l.emit("loopFix");return}const m=f.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(f.slidesPerView,10));let g=f.loopedSlides||m;g%f.slidesPerGroup!==0&&(g+=f.slidesPerGroup-g%f.slidesPerGroup),l.loopedSlides=g;const _=[],v=[];let y=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(l.slides.filter($=>$.classList.contains(f.slideActiveClass))[0]):y=s;const T=i==="next"||!i,N=i==="prev"||!i;let P=0,F=0;if(s<g){P=Math.max(g-s,f.slidesPerGroup);for(let $=0;$<g-s;$+=1){const B=$-Math.floor($/c.length)*c.length;_.push(c.length-B-1)}}else if(s>l.slides.length-g*2){F=Math.max(s-(l.slides.length-g*2),f.slidesPerGroup);for(let $=0;$<F;$+=1){const B=$-Math.floor($/c.length)*c.length;v.push(B)}}if(N&&_.forEach($=>{l.slides[$].swiperLoopMoveDOM=!0,h.prepend(l.slides[$]),l.slides[$].swiperLoopMoveDOM=!1}),T&&v.forEach($=>{l.slides[$].swiperLoopMoveDOM=!0,h.append(l.slides[$]),l.slides[$].swiperLoopMoveDOM=!1}),l.recalcSlides(),f.slidesPerView==="auto"&&l.updateSlides(),f.watchSlidesProgress&&l.updateSlidesOffset(),t){if(_.length>0&&N)if(typeof e>"u"){const $=l.slidesGrid[y],M=l.slidesGrid[y+P]-$;o?l.setTranslate(l.translate-M):(l.slideTo(y+P,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=M,l.touchEventsData.currentTranslate=l.translate))}else r&&(l.slideToLoop(e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate);else if(v.length>0&&T)if(typeof e>"u"){const $=l.slidesGrid[y],M=l.slidesGrid[y-F]-$;o?l.setTranslate(l.translate-M):(l.slideTo(y-F,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=M,l.touchEventsData.currentTranslate=l.translate))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=u,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const $={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(B=>{!B.destroyed&&B.params.loop&&B.loopFix({...$,slideTo:B.params.slidesPerView===f.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...$,slideTo:l.controller.control.params.slidesPerView===f.slidesPerView?t:!1})}l.emit("loopFix")}function bZ(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var vZ={loopCreate:gZ,loopFix:yZ,loopDestroy:bZ};function wZ(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function xZ(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var EZ={setGrabCursor:wZ,unsetGrabCursor:xZ};function TZ(n,e){e===void 0&&(e=this);function t(i){if(!i||i===dc()||i===Sr())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function SZ(n){const e=this,t=dc(),i=Sr(),r=e.touchEventsData;r.evCache.push(n);const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&n.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=n;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||r.isTouched&&r.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=n.composedPath?n.composedPath():n.path;u&&l.target&&l.target.shadowRoot&&d&&(c=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:".".concat(s.noSwipingClass),f=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(f?TZ(h,c):c.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;a.currentX=l.pageX,a.currentY=l.pageY;const m=a.currentX,g=a.currentY,_=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,v=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(_&&(m<=v||m>=i.innerWidth-v))if(_==="prevent")n.preventDefault();else return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=m,a.startY=g,r.touchStartTime=Jg(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let y=!0;c.matches(r.focusableElements)&&(y=!1,c.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==c&&t.activeElement.blur();const T=y&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||T)&&!c.isContentEditable&&l.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function _Z(n){const e=dc(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:a,enabled:o}=t;if(!o||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=i.evCache.findIndex($=>$.pointerId===l.pointerId);c>=0&&(i.evCache[c]=l);const u=i.evCache.length>1?i.evCache[0]:l,d=u.pageX,h=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:h,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:d,currentY:h}),i.touchStartTime=Jg());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}if(i.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,m=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(f**2+m**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let $;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:f*f+m*m>=25&&($=Math.atan2(Math.abs(m),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?$>r.touchAngle:90-$>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&i.evCache.length>1){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let g=t.isHorizontal()?f:m,_=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(g=Math.abs(g)*(a?1:-1),_=Math.abs(_)*(a?1:-1)),s.diff=g,g*=r.touchRatio,a&&(g=-g,_=-_);const v=t.touchesDirection;t.swipeDirection=g>0?"prev":"next",t.touchesDirection=_>0?"prev":"next";const y=t.params.loop&&!r.cssMode,T=t.swipeDirection==="next"&&t.allowSlideNext||t.swipeDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(y&&T&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const $=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent($)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let N;i.isMoved&&v!==t.touchesDirection&&y&&T&&Math.abs(g)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),N=!0),t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=g+i.startTranslate;let P=!0,F=r.resistanceRatio;if(r.touchReleaseOnEdges&&(F=0),g>0?(y&&T&&!N&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(P=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+g)**F))):g<0&&(y&&T&&!N&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(P=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-g)**F))),P&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(g)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function CZ(n){const e=this,t=e.touchEventsData,i=t.evCache.findIndex(T=>T.pointerId===n.pointerId);if(i>=0&&t.evCache.splice(i,1),["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:r,touches:s,rtlTranslate:a,slidesGrid:o,enabled:l}=e;if(!l||!r.simulateTouch&&n.pointerType==="mouse")return;let c=n;if(c.originalEvent&&(c=c.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",c),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&r.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}r.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=Jg(),d=u-t.touchStartTime;if(e.allowClick){const T=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(T&&T[0]||c.target,T),e.emit("tap click",c),d<300&&u-t.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(t.lastClickTime=Jg(),Vx(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||s.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let h;if(r.followFinger?h=a?e.translate:-e.translate:h=-t.currentTranslate,r.cssMode)return;if(r.freeMode&&r.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:h});return}let f=0,m=e.slidesSizesGrid[0];for(let T=0;T<o.length;T+=T<r.slidesPerGroupSkip?1:r.slidesPerGroup){const N=T<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;typeof o[T+N]<"u"?h>=o[T]&&h<o[T+N]&&(f=T,m=o[T+N]-o[T]):h>=o[T]&&(f=T,m=o[o.length-1]-o[o.length-2])}let g=null,_=null;r.rewind&&(e.isBeginning?_=r.virtual&&r.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const v=(h-o[f])/m,y=f<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(d>r.longSwipesMs){if(!r.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(v>=r.longSwipesRatio?e.slideTo(r.rewind&&e.isEnd?g:f+y):e.slideTo(f)),e.swipeDirection==="prev"&&(v>1-r.longSwipesRatio?e.slideTo(f+y):_!==null&&v<0&&Math.abs(v)>r.longSwipesRatio?e.slideTo(_):e.slideTo(f))}else{if(!r.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(f+y):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:f+y),e.swipeDirection==="prev"&&e.slideTo(_!==null?_:f))}}function nk(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function AZ(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function kZ(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function NZ(n){const e=this;Vm(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let ik=!1;function DZ(){}const JM=(n,e)=>{const t=dc(),{params:i,el:r,wrapperEl:s,device:a}=n,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",nk,!0):n[c]("observerUpdate",nk,!0),r[l]("load",n.onLoad,{capture:!0})};function PZ(){const n=this,e=dc(),{params:t}=n;n.onTouchStart=SZ.bind(n),n.onTouchMove=_Z.bind(n),n.onTouchEnd=CZ.bind(n),t.cssMode&&(n.onScroll=kZ.bind(n)),n.onClick=AZ.bind(n),n.onLoad=NZ.bind(n),ik||(e.addEventListener("touchstart",DZ),ik=!0),JM(n,"on")}function IZ(){JM(this,"off")}var RZ={attachEvents:PZ,detachEvents:IZ};const rk=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function OZ(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!a||n.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||n.originalParams,c=rk(n,i),u=rk(n,l),d=i.enabled;c&&!u?(r.classList.remove("".concat(i.containerModifierClass,"grid"),"".concat(i.containerModifierClass,"grid-column")),n.emitContainerClasses()):!c&&u&&(r.classList.add("".concat(i.containerModifierClass,"grid")),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add("".concat(i.containerModifierClass,"grid-column")),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(v=>{if(typeof l[v]>"u")return;const y=i[v]&&i[v].enabled,T=l[v]&&l[v].enabled;y&&!T&&n[v].disable(),!y&&T&&n[v].enable()});const h=l.direction&&l.direction!==i.direction,f=i.loop&&(l.slidesPerView!==i.slidesPerView||h),m=i.loop;h&&t&&n.changeDirection(),dr(n.params,l);const g=n.params.enabled,_=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!g?n.disable():!d&&g&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",l),t&&(f?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!m&&_?(n.loopCreate(e),n.updateSlides()):m&&!_&&n.loopDestroy()),n.emit("breakpoint",l)}function MZ(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=Sr(),s=e==="window"?r.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?r.matchMedia("(min-width: ".concat(c,"px)")).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var LZ={setBreakpoint:OZ,getBreakpoint:MZ};function $Z(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function BZ(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,a=$Z(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),r.classList.add(...e),n.emitContainerClasses()}function FZ(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var qZ={addClasses:BZ,removeClasses:FZ};function UZ(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var jZ={checkOverflow:UZ},Gx={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function zZ(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){dr(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){dr(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),dr(e,i)}}const Gv={eventsEmitter:qJ,update:XJ,translate:iZ,transition:oZ,slide:mZ,loop:vZ,grabCursor:EZ,events:RZ,breakpoints:LZ,checkOverflow:jZ,classes:qZ},Qv={};let E1=class _a{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=dr({},t),e&&!t.el&&(t.el=e);const a=dc();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const u=[];return a.querySelectorAll(t.el).forEach(d=>{const h=dr({},t,{el:d});u.push(new _a(h))}),u}const o=this;o.__swiper__=!0,o.support=YM(),o.device=MJ({userAgent:t.userAgent}),o.browser=$J(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(u=>{u({params:t,swiper:o,extendParams:zZ(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=dr({},Gx,l);return o.params=dr({},c,Qv,t),o.originalParams=dr({},o.params),o.passedParams=dr({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(u=>{o.on(u,o.params.on[u])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=Xs(t,".".concat(i.slideClass,", swiper-slide")),s=Zg(r[0]);return Zg(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=Xs(t,".".concat(i.slideClass,", swiper-slide"))}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),a=(i.maxTranslate()-r)*e+r;i.translateTo(a,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=i;let u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let d=s[c]?s[c].swiperSlideSize:0,h;for(let f=c+1;f<s.length;f+=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0));for(let f=c-1;f>=0;f-=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<s.length;d+=1)(t?a[d]+o[d]-a[c]<l:a[d]-a[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)a[c]-a[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&Vm(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(a.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove("".concat(i.params.containerModifierClass).concat(r)),i.el.classList.add("".concat(i.params.containerModifierClass).concat(e)),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const r=()=>".".concat((t.params.wrapperClass||"").trim().split(" ").join("."));let a=(()=>i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):Xs(i,r())[0])();return!a&&t.params.createElements&&(a=cu("div",t.params.wrapperClass),i.append(a),Xs(i,".".concat(t.params.slideClass)).forEach(o=>{a.append(o)})),Object.assign(t,{el:i,wrapperEl:a,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Co(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Co(i,"direction")==="rtl"),wrongRTL:Co(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?Vm(t,s):s.addEventListener("load",a=>{Vm(t,a.target)})}),Wx(t),t.initialized=!0,Wx(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,AJ(i)),i.destroyed=!0),null}static extendDefaults(e){dr(Qv,e)}static get extendedDefaults(){return Qv}static get defaults(){return Gx}static installModule(e){_a.prototype.__modules__||(_a.prototype.__modules__=[]);const t=_a.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>_a.installModule(t)),_a):(_a.installModule(e),_a)}};Object.keys(Gv).forEach(n=>{Object.keys(Gv[n]).forEach(e=>{E1.prototype[e]=Gv[n][e]})});E1.use([BJ,FJ]);const ZM=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ec(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Ll(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:ec(e[i])&&ec(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:Ll(n[i],e[i]):n[i]=e[i]})}function eL(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function tL(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function nL(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function iL(n){n===void 0&&(n="");const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function VZ(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:"swiper-wrapper ".concat(n):"swiper-wrapper"}function HZ(n){let{swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:a,scrollbarEl:o,paginationEl:l}=n;const c=r.filter(M=>M!=="children"&&M!=="direction"&&M!=="wrapperClass"),{params:u,pagination:d,navigation:h,scrollbar:f,virtual:m,thumbs:g}=e;let _,v,y,T,N,P,F,$;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(_=!0),r.includes("controller")&&i.controller&&i.controller.control&&u.controller&&!u.controller.control&&(v=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(u.pagination||u.pagination===!1)&&d&&!d.el&&(y=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||o)&&(u.scrollbar||u.scrollbar===!1)&&f&&!f.el&&(T=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||a)&&(i.navigation.nextEl||s)&&(u.navigation||u.navigation===!1)&&h&&!h.prevEl&&!h.nextEl&&(N=!0);const B=M=>{e[M]&&(e[M].destroy(),M==="navigation"?(e.isElement&&(e[M].prevEl.remove(),e[M].nextEl.remove()),u[M].prevEl=void 0,u[M].nextEl=void 0,e[M].prevEl=void 0,e[M].nextEl=void 0):(e.isElement&&e[M].el.remove(),u[M].el=void 0,e[M].el=void 0))};r.includes("loop")&&e.isElement&&(u.loop&&!i.loop?P=!0:!u.loop&&i.loop?F=!0:$=!0),c.forEach(M=>{if(ec(u[M])&&ec(i[M]))Ll(u[M],i[M]),(M==="navigation"||M==="pagination"||M==="scrollbar")&&"enabled"in i[M]&&!i[M].enabled&&B(M);else{const Z=i[M];(Z===!0||Z===!1)&&(M==="navigation"||M==="pagination"||M==="scrollbar")?Z===!1&&B(M):u[M]=i[M]}}),c.includes("controller")&&!v&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&m&&u.virtual.enabled&&(m.slides=t,m.update(!0)),r.includes("children")&&t&&u.loop&&($=!0),_&&g.init()&&g.update(!0),v&&(e.controller.control=u.controller.control),y&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),d.init(),d.render(),d.update()),T&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(u.scrollbar.el=o),f.init(),f.updateSize(),f.setTranslate()),N&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),a.innerHTML=e.hostEl.constructor.prevButtonSvg,a.part.add("button-prev"),e.el.appendChild(a))),s&&(u.navigation.nextEl=s),a&&(u.navigation.prevEl=a),h.init(),h.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(P||$)&&e.loopDestroy(),(F||$)&&e.loopCreate(),e.update()}function WZ(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},i={},r={};Ll(t,Gx),t._emitClasses=!0,t.init=!1;const s={},a=ZM.map(l=>l.replace(/_/,"")),o=Object.assign({},n);return Object.keys(o).forEach(l=>{typeof n[l]>"u"||(a.indexOf(l)>=0?ec(n[l])?(t[l]={},r[l]={},Ll(t[l],n[l]),Ll(r[l],n[l])):(t[l]=n[l],r[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?i["".concat(l[2].toLowerCase()).concat(l.substr(3))]=n[l]:t.on["".concat(l[2].toLowerCase()).concat(l.substr(3))]=n[l]:s[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:r,rest:s,events:i}}function GZ(n,e){let{el:t,nextEl:i,prevEl:r,paginationEl:s,scrollbarEl:a,swiper:o}=n;eL(e)&&i&&r&&(o.params.navigation.nextEl=i,o.originalParams.navigation.nextEl=i,o.params.navigation.prevEl=r,o.originalParams.navigation.prevEl=r),tL(e)&&s&&(o.params.pagination.el=s,o.originalParams.pagination.el=s),nL(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(t)}function QZ(n,e,t,i,r){const s=[];if(!e)return s;const a=l=>{s.indexOf(l)<0&&s.push(l)};if(t&&i){const l=i.map(r),c=t.map(r);l.join("")!==c.join("")&&a("children"),i.length!==t.length&&a("children")}return ZM.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(ec(n[l])&&ec(e[l])){const c=Object.keys(n[l]),u=Object.keys(e[l]);c.length!==u.length?a(l):(c.forEach(d=>{n[l][d]!==e[l][d]&&a(l)}),u.forEach(d=>{n[l][d]!==e[l][d]&&a(l)}))}else n[l]!==e[l]&&a(l)}),s}const KZ=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function ey(){return ey=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ey.apply(this,arguments)}function rL(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function sL(n){const e=[];return fe.Children.toArray(n).forEach(t=>{rL(t)?e.push(t):t.props&&t.props.children&&sL(t.props.children).forEach(i=>e.push(i))}),e}function YZ(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return fe.Children.toArray(n).forEach(i=>{if(rL(i))e.push(i);else if(i.props&&i.props.slot&&t[i.props.slot])t[i.props.slot].push(i);else if(i.props&&i.props.children){const r=sL(i.props.children);r.length>0?r.forEach(s=>e.push(s)):t["container-end"].push(i)}else t["container-end"].push(i)}),{slides:e,slots:t}}function XZ(n,e,t){if(!t)return null;const i=u=>{let d=u;return u<0?d=e.length+u:d>=e.length&&(d=d-e.length),d},r=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:"".concat(t.offset,"px")}:{top:"".concat(t.offset,"px")},{from:s,to:a}=t,o=n.params.loop?-e.length:0,l=n.params.loop?e.length*2:e.length,c=[];for(let u=o;u<l;u+=1)u>=s&&u<=a&&c.push(e[i(u)]);return c.map((u,d)=>fe.cloneElement(u,{swiper:n,style:r,key:"slide-".concat(d)}))}function jh(n,e){return typeof window>"u"?ze.useEffect(n,e):ze.useLayoutEffect(n,e)}const sk=ze.createContext(null),aL=ze.createContext(null),JZ=()=>ze.useContext(aL),oL=ze.forwardRef(function(n,e){let{className:t,tag:i="div",wrapperTag:r="div",children:s,onSwiper:a,...o}=n===void 0?{}:n,l=!1;const[c,u]=ze.useState("swiper"),[d,h]=ze.useState(null),[f,m]=ze.useState(!1),g=ze.useRef(!1),_=ze.useRef(null),v=ze.useRef(null),y=ze.useRef(null),T=ze.useRef(null),N=ze.useRef(null),P=ze.useRef(null),F=ze.useRef(null),$=ze.useRef(null),{params:B,passedParams:M,rest:Z,events:O}=WZ(o),{slides:K,slots:z}=YZ(s),te=()=>{m(!f)};Object.assign(B.on,{_containerClasses(he,ee){u(ee)}});const ue=()=>{Object.assign(B.on,O),l=!0;const he={...B};if(delete he.wrapperClass,v.current=new E1(he),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=K;const ee={cache:!1,slides:K,renderExternal:h,renderExternalUpdate:!1};Ll(v.current.params.virtual,ee),Ll(v.current.originalParams.virtual,ee)}};_.current||ue(),v.current&&v.current.on("_beforeBreakpoint",te);const ye=()=>{l||!O||!v.current||Object.keys(O).forEach(he=>{v.current.on(he,O[he])})},be=()=>{!O||!v.current||Object.keys(O).forEach(he=>{v.current.off(he,O[he])})};ze.useEffect(()=>()=>{v.current&&v.current.off("_beforeBreakpoint",te)}),ze.useEffect(()=>{!g.current&&v.current&&(v.current.emitSlidesClasses(),g.current=!0)}),jh(()=>{if(e&&(e.current=_.current),!!_.current)return v.current.destroyed&&ue(),GZ({el:_.current,nextEl:N.current,prevEl:P.current,paginationEl:F.current,scrollbarEl:$.current,swiper:v.current},B),a&&a(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}},[]),jh(()=>{ye();const he=QZ(M,y.current,K,T.current,ee=>ee.key);return y.current=M,T.current=K,he.length&&v.current&&!v.current.destroyed&&HZ({swiper:v.current,slides:K,passedParams:M,changedParams:he,nextEl:N.current,prevEl:P.current,scrollbarEl:$.current,paginationEl:F.current}),()=>{be()}}),jh(()=>{KZ(v.current)},[d]);function de(){return B.virtual?XZ(v.current,K,d):K.map((he,ee)=>fe.cloneElement(he,{swiper:v.current,swiperSlideIndex:ee}))}return fe.createElement(i,ey({ref:_,className:iL("".concat(c).concat(t?" ".concat(t):""))},Z),fe.createElement(aL.Provider,{value:v.current},z["container-start"],fe.createElement(r,{className:VZ(B.wrapperClass)},z["wrapper-start"],de(),z["wrapper-end"]),eL(B)&&fe.createElement(fe.Fragment,null,fe.createElement("div",{ref:P,className:"swiper-button-prev"}),fe.createElement("div",{ref:N,className:"swiper-button-next"})),nL(B)&&fe.createElement("div",{ref:$,className:"swiper-scrollbar"}),tL(B)&&fe.createElement("div",{ref:F,className:"swiper-pagination"}),z["container-end"]))});oL.displayName="Swiper";const Hm=ze.forwardRef(function(n,e){let{tag:t="div",children:i,className:r="",swiper:s,zoom:a,lazy:o,virtualIndex:l,swiperSlideIndex:c,...u}=n===void 0?{}:n;const d=ze.useRef(null),[h,f]=ze.useState("swiper-slide"),[m,g]=ze.useState(!1);function _(N,P,F){P===d.current&&f(F)}jh(()=>{if(typeof c<"u"&&(d.current.swiperSlideIndex=c),e&&(e.current=d.current),!(!d.current||!s)){if(s.destroyed){h!=="swiper-slide"&&f("swiper-slide");return}return s.on("_slideClass",_),()=>{s&&s.off("_slideClass",_)}}}),jh(()=>{s&&d.current&&!s.destroyed&&f(s.getSlideClasses(d.current))},[s]);const v={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},y=()=>typeof i=="function"?i(v):i,T=()=>{g(!0)};return fe.createElement(t,ey({ref:d,className:iL("".concat(h).concat(r?" ".concat(r):"")),"data-swiper-slide-index":l,onLoad:T},u),a&&fe.createElement(sk.Provider,{value:v},fe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},y(),o&&!m&&fe.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&fe.createElement(sk.Provider,{value:v},y(),o&&!m&&fe.createElement("div",{className:"swiper-lazy-preloader"})))});Hm.displayName="SwiperSlide";function lL(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(r=>{if(!t[r]&&t.auto===!0){let s=Xs(n.el,".".concat(i[r]))[0];s||(s=cu("div",i[r]),s.className=i[r],n.el.append(s)),t[r]=s,e[r]=s}}),t}function ZZ(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const s=g=>(Array.isArray(g)?g:[g]).filter(_=>!!_);function a(g){let _;return g&&typeof g=="string"&&e.isElement&&(_=e.el.querySelector(g),_)?_:(g&&(typeof g=="string"&&(_=[...document.querySelectorAll(g)]),e.params.uniqueNavElements&&typeof g=="string"&&_.length>1&&e.el.querySelectorAll(g).length===1&&(_=e.el.querySelector(g))),g&&!_?g:_)}function o(g,_){const v=e.params.navigation;g=s(g),g.forEach(y=>{y&&(y.classList[_?"add":"remove"](...v.disabledClass.split(" ")),y.tagName==="BUTTON"&&(y.disabled=_),e.params.watchOverflow&&e.enabled&&y.classList[e.isLocked?"add":"remove"](v.lockClass))})}function l(){const{nextEl:g,prevEl:_}=e.navigation;if(e.params.loop){o(_,!1),o(g,!1);return}o(_,e.isBeginning&&!e.params.rewind),o(g,e.isEnd&&!e.params.rewind)}function c(g){g.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function u(g){g.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function d(){const g=e.params.navigation;if(e.params.navigation=lL(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(g.nextEl||g.prevEl))return;let _=a(g.nextEl),v=a(g.prevEl);Object.assign(e.navigation,{nextEl:_,prevEl:v}),_=s(_),v=s(v);const y=(T,N)=>{T&&T.addEventListener("click",N==="next"?u:c),!e.enabled&&T&&T.classList.add(...g.lockClass.split(" "))};_.forEach(T=>y(T,"next")),v.forEach(T=>y(T,"prev"))}function h(){let{nextEl:g,prevEl:_}=e.navigation;g=s(g),_=s(_);const v=(y,T)=>{y.removeEventListener("click",T==="next"?u:c),y.classList.remove(...e.params.navigation.disabledClass.split(" "))};g.forEach(y=>v(y,"next")),_.forEach(y=>v(y,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?m():(d(),l())}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:g,prevEl:_}=e.navigation;if(g=s(g),_=s(_),e.enabled){l();return}[...g,..._].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),i("click",(g,_)=>{let{nextEl:v,prevEl:y}=e.navigation;v=s(v),y=s(y);const T=_.target;if(e.params.navigation.hideOnClick&&!y.includes(T)&&!v.includes(T)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===T||e.pagination.el.contains(T)))return;let N;v.length?N=v[0].classList.contains(e.params.navigation.hiddenClass):y.length&&(N=y[0].classList.contains(e.params.navigation.hiddenClass)),r(N===!0?"navigationShow":"navigationHide"),[...v,...y].filter(P=>!!P).forEach(P=>P.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),l()},m=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:m,update:l,init:d,destroy:h})}function ih(n){return n===void 0&&(n=""),".".concat(n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,"."))}function eee(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:y=>y,formatFractionTotal:y=>y,bulletClass:"".concat(s,"-bullet"),bulletActiveClass:"".concat(s,"-bullet-active"),modifierClass:"".concat(s,"-"),currentClass:"".concat(s,"-current"),totalClass:"".concat(s,"-total"),hiddenClass:"".concat(s,"-hidden"),progressbarFillClass:"".concat(s,"-progressbar-fill"),progressbarOppositeClass:"".concat(s,"-progressbar-opposite"),clickableClass:"".concat(s,"-clickable"),lockClass:"".concat(s,"-lock"),horizontalClass:"".concat(s,"-horizontal"),verticalClass:"".concat(s,"-vertical"),paginationDisabledClass:"".concat(s,"-disabled")}}),e.pagination={el:null,bullets:[]};let a,o=0;const l=y=>(Array.isArray(y)?y:[y]).filter(T=>!!T);function c(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function u(y,T){const{bulletActiveClass:N}=e.params.pagination;y&&(y=y["".concat(T==="prev"?"previous":"next","ElementSibling")],y&&(y.classList.add("".concat(N,"-").concat(T)),y=y["".concat(T==="prev"?"previous":"next","ElementSibling")],y&&y.classList.add("".concat(N,"-").concat(T,"-").concat(T))))}function d(y){const T=y.target.closest(ih(e.params.pagination.bulletClass));if(!T)return;y.preventDefault();const N=Zg(T)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===N)return;const P=e.realIndex,F=e.getSlideIndexByData(N),$=e.getSlideIndexByData(e.realIndex),B=M=>{const Z=e.activeIndex;e.loopFix({direction:M,activeSlideIndex:F,slideTo:!1});const O=e.activeIndex;Z===O&&e.slideToLoop(P,0,!1,!0)};if(F>e.slides.length-e.loopedSlides)B(F>$?"next":"prev");else if(e.params.centeredSlides){const M=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(parseFloat(e.params.slidesPerView,10));F<Math.floor(M/2)&&B("prev")}e.slideToLoop(N)}else e.slideTo(N)}function h(){const y=e.rtl,T=e.params.pagination;if(c())return;let N=e.pagination.el;N=l(N);let P,F;const $=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,B=e.params.loop?Math.ceil($/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(F=e.previousRealIndex||0,P=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(P=e.snapIndex,F=e.previousSnapIndex):(F=e.previousIndex||0,P=e.activeIndex||0),T.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const M=e.pagination.bullets;let Z,O,K;if(T.dynamicBullets&&(a=Hx(M[0],e.isHorizontal()?"width":"height",!0),N.forEach(z=>{z.style[e.isHorizontal()?"width":"height"]="".concat(a*(T.dynamicMainBullets+4),"px")}),T.dynamicMainBullets>1&&F!==void 0&&(o+=P-(F||0),o>T.dynamicMainBullets-1?o=T.dynamicMainBullets-1:o<0&&(o=0)),Z=Math.max(P-o,0),O=Z+(Math.min(M.length,T.dynamicMainBullets)-1),K=(O+Z)/2),M.forEach(z=>{const te=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(ue=>"".concat(T.bulletActiveClass).concat(ue))].map(ue=>typeof ue=="string"&&ue.includes(" ")?ue.split(" "):ue).flat();z.classList.remove(...te)}),N.length>1)M.forEach(z=>{const te=Zg(z);te===P?z.classList.add(...T.bulletActiveClass.split(" ")):e.isElement&&z.setAttribute("part","bullet"),T.dynamicBullets&&(te>=Z&&te<=O&&z.classList.add(..."".concat(T.bulletActiveClass,"-main").split(" ")),te===Z&&u(z,"prev"),te===O&&u(z,"next"))});else{const z=M[P];if(z&&z.classList.add(...T.bulletActiveClass.split(" ")),e.isElement&&M.forEach((te,ue)=>{te.setAttribute("part",ue===P?"bullet-active":"bullet")}),T.dynamicBullets){const te=M[Z],ue=M[O];for(let ye=Z;ye<=O;ye+=1)M[ye]&&M[ye].classList.add(..."".concat(T.bulletActiveClass,"-main").split(" "));u(te,"prev"),u(ue,"next")}}if(T.dynamicBullets){const z=Math.min(M.length,T.dynamicMainBullets+4),te=(a*z-a)/2-K*a,ue=y?"right":"left";M.forEach(ye=>{ye.style[e.isHorizontal()?ue:"top"]="".concat(te,"px")})}}N.forEach((M,Z)=>{if(T.type==="fraction"&&(M.querySelectorAll(ih(T.currentClass)).forEach(O=>{O.textContent=T.formatFractionCurrent(P+1)}),M.querySelectorAll(ih(T.totalClass)).forEach(O=>{O.textContent=T.formatFractionTotal(B)})),T.type==="progressbar"){let O;T.progressbarOpposite?O=e.isHorizontal()?"vertical":"horizontal":O=e.isHorizontal()?"horizontal":"vertical";const K=(P+1)/B;let z=1,te=1;O==="horizontal"?z=K:te=K,M.querySelectorAll(ih(T.progressbarFillClass)).forEach(ue=>{ue.style.transform="translate3d(0,0,0) scaleX(".concat(z,") scaleY(").concat(te,")"),ue.style.transitionDuration="".concat(e.params.speed,"ms")})}T.type==="custom"&&T.renderCustom?(M.innerHTML=T.renderCustom(e,P+1,B),Z===0&&r("paginationRender",M)):(Z===0&&r("paginationRender",M),r("paginationUpdate",M)),e.params.watchOverflow&&e.enabled&&M.classList[e.isLocked?"add":"remove"](T.lockClass)})}function f(){const y=e.params.pagination;if(c())return;const T=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let N=e.pagination.el;N=l(N);let P="";if(y.type==="bullets"){let F=e.params.loop?Math.ceil(T/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&F>T&&(F=T);for(let $=0;$<F;$+=1)y.renderBullet?P+=y.renderBullet.call(e,$,y.bulletClass):P+="<".concat(y.bulletElement," ").concat(e.isElement?'part="bullet"':"",' class="').concat(y.bulletClass,'"></').concat(y.bulletElement,">")}y.type==="fraction"&&(y.renderFraction?P=y.renderFraction.call(e,y.currentClass,y.totalClass):P='<span class="'.concat(y.currentClass,'"></span>')+" / "+'<span class="'.concat(y.totalClass,'"></span>')),y.type==="progressbar"&&(y.renderProgressbar?P=y.renderProgressbar.call(e,y.progressbarFillClass):P='<span class="'.concat(y.progressbarFillClass,'"></span>')),e.pagination.bullets=[],N.forEach(F=>{y.type!=="custom"&&(F.innerHTML=P||""),y.type==="bullets"&&e.pagination.bullets.push(...F.querySelectorAll(ih(y.bulletClass)))}),y.type!=="custom"&&r("paginationRender",N[0])}function m(){e.params.pagination=lL(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const y=e.params.pagination;if(!y.el)return;let T;typeof y.el=="string"&&e.isElement&&(T=e.el.querySelector(y.el)),!T&&typeof y.el=="string"&&(T=[...document.querySelectorAll(y.el)]),T||(T=y.el),!(!T||T.length===0)&&(e.params.uniqueNavElements&&typeof y.el=="string"&&Array.isArray(T)&&T.length>1&&(T=[...e.el.querySelectorAll(y.el)],T.length>1&&(T=T.filter(N=>KM(N,".swiper")[0]===e.el)[0])),Array.isArray(T)&&T.length===1&&(T=T[0]),Object.assign(e.pagination,{el:T}),T=l(T),T.forEach(N=>{y.type==="bullets"&&y.clickable&&N.classList.add(...(y.clickableClass||"").split(" ")),N.classList.add(y.modifierClass+y.type),N.classList.add(e.isHorizontal()?y.horizontalClass:y.verticalClass),y.type==="bullets"&&y.dynamicBullets&&(N.classList.add("".concat(y.modifierClass).concat(y.type,"-dynamic")),o=0,y.dynamicMainBullets<1&&(y.dynamicMainBullets=1)),y.type==="progressbar"&&y.progressbarOpposite&&N.classList.add(y.progressbarOppositeClass),y.clickable&&N.addEventListener("click",d),e.enabled||N.classList.add(y.lockClass)}))}function g(){const y=e.params.pagination;if(c())return;let T=e.pagination.el;T&&(T=l(T),T.forEach(N=>{N.classList.remove(y.hiddenClass),N.classList.remove(y.modifierClass+y.type),N.classList.remove(e.isHorizontal()?y.horizontalClass:y.verticalClass),y.clickable&&(N.classList.remove(...(y.clickableClass||"").split(" ")),N.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(N=>N.classList.remove(...y.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const y=e.params.pagination;let{el:T}=e.pagination;T=l(T),T.forEach(N=>{N.classList.remove(y.horizontalClass,y.verticalClass),N.classList.add(e.isHorizontal()?y.horizontalClass:y.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?v():(m(),f(),h())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&h()}),i("snapIndexChange",()=>{h()}),i("snapGridLengthChange",()=>{f(),h()}),i("destroy",()=>{g()}),i("enable disable",()=>{let{el:y}=e.pagination;y&&(y=l(y),y.forEach(T=>T.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{h()}),i("click",(y,T)=>{const N=T.target,P=l(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&P&&P.length>0&&!N.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&N===e.navigation.nextEl||e.navigation.prevEl&&N===e.navigation.prevEl))return;const F=P[0].classList.contains(e.params.pagination.hiddenClass);r(F===!0?"paginationShow":"paginationHide"),P.forEach($=>$.classList.toggle(e.params.pagination.hiddenClass))}});const _=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:y}=e.pagination;y&&(y=l(y),y.forEach(T=>T.classList.remove(e.params.pagination.paginationDisabledClass))),m(),f(),h()},v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:y}=e.pagination;y&&(y=l(y),y.forEach(T=>T.classList.add(e.params.pagination.paginationDisabledClass))),g()};Object.assign(e.pagination,{enable:_,disable:v,render:f,update:h,init:m,destroy:g})}function tee(n){const{effect:e,swiper:t,on:i,setTranslate:r,setTransition:s,overwriteParams:a,perspective:o,recreateShadows:l,getEffectParams:c}=n;i("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push("".concat(t.params.containerModifierClass).concat(e)),o&&o()&&t.classNames.push("".concat(t.params.containerModifierClass,"3d"));const d=a?a():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),i("setTranslate",()=>{t.params.effect===e&&r()}),i("setTransition",(d,h)=>{t.params.effect===e&&s(h)}),i("transitionEnd",()=>{if(t.params.effect===e&&l){if(!c||!c().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),l()}});let u;i("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(u=!0),requestAnimationFrame(()=>{u&&t.slides&&t.slides.length&&(r(),u=!1)}))})}function nee(n){let{swiper:e,extendParams:t,on:i}=n;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const r=(l,c,u)=>{let d=u?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),h=u?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");d||(d=cu("div","swiper-slide-shadow-cube swiper-slide-shadow-".concat(u?"left":"top").split(" ")),l.append(d)),h||(h=cu("div","swiper-slide-shadow-cube swiper-slide-shadow-".concat(u?"right":"bottom").split(" ")),l.append(h)),d&&(d.style.opacity=Math.max(-c,0)),h&&(h.style.opacity=Math.max(c,0))};tee({effect:"cube",swiper:e,on:i,setTranslate:()=>{const{el:l,wrapperEl:c,slides:u,width:d,height:h,rtlTranslate:f,size:m,browser:g}=e,_=e.params.cubeEffect,v=e.isHorizontal(),y=e.virtual&&e.params.virtual.enabled;let T=0,N;_.shadow&&(v?(N=e.wrapperEl.querySelector(".swiper-cube-shadow"),N||(N=cu("div","swiper-cube-shadow"),e.wrapperEl.append(N)),N.style.height="".concat(d,"px")):(N=l.querySelector(".swiper-cube-shadow"),N||(N=cu("div","swiper-cube-shadow"),l.append(N))));for(let F=0;F<u.length;F+=1){const $=u[F];let B=F;y&&(B=parseInt($.getAttribute("data-swiper-slide-index"),10));let M=B*90,Z=Math.floor(M/360);f&&(M=-M,Z=Math.floor(-M/360));const O=Math.max(Math.min($.progress,1),-1);let K=0,z=0,te=0;B%4===0?(K=-Z*4*m,te=0):(B-1)%4===0?(K=0,te=-Z*4*m):(B-2)%4===0?(K=m+Z*4*m,te=m):(B-3)%4===0&&(K=-m,te=3*m+m*4*Z),f&&(K=-K),v||(z=K,K=0);const ue="rotateX(".concat(v?0:-M,"deg) rotateY(").concat(v?M:0,"deg) translate3d(").concat(K,"px, ").concat(z,"px, ").concat(te,"px)");O<=1&&O>-1&&(T=B*90+O*90,f&&(T=-B*90-O*90)),$.style.transform=ue,_.slideShadows&&r($,O,v)}if(c.style.transformOrigin="50% 50% -".concat(m/2,"px"),c.style["-webkit-transform-origin"]="50% 50% -".concat(m/2,"px"),_.shadow)if(v)N.style.transform="translate3d(0px, ".concat(d/2+_.shadowOffset,"px, ").concat(-d/2,"px) rotateX(90deg) rotateZ(0deg) scale(").concat(_.shadowScale,")");else{const F=Math.abs(T)-Math.floor(Math.abs(T)/90)*90,$=1.5-(Math.sin(F*2*Math.PI/360)/2+Math.cos(F*2*Math.PI/360)/2),B=_.shadowScale,M=_.shadowScale/$,Z=_.shadowOffset;N.style.transform="scale3d(".concat(B,", 1, ").concat(M,") translate3d(0px, ").concat(h/2+Z,"px, ").concat(-h/2/M,"px) rotateX(-90deg)")}const P=(g.isSafari||g.isWebView)&&g.needPerspectiveFix?-m/2:0;c.style.transform="translate3d(0px,0,".concat(P,"px) rotateX(").concat(e.isHorizontal()?0:T,"deg) rotateY(").concat(e.isHorizontal()?-T:0,"deg)"),c.style.setProperty("--swiper-cube-translate-z","".concat(P,"px"))},setTransition:l=>{const{el:c,slides:u}=e;if(u.forEach(d=>{d.style.transitionDuration="".concat(l,"ms"),d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration="".concat(l,"ms")})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const d=c.querySelector(".swiper-cube-shadow");d&&(d.style.transitionDuration="".concat(l,"ms"))}},recreateShadows:()=>{const l=e.isHorizontal();e.slides.forEach(c=>{const u=Math.max(Math.min(c.progress,1),-1);r(c,u,l)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}const iee=()=>{const n=JZ();return ne.jsx("div",{className:"test",children:ne.jsxs("div",{className:"swiper__container",children:[ne.jsx("button",{className:"swiper__btn_left",onClick:()=>{n.slidePrev()},children:ne.jsx(hr,{icon:$H,className:"swiper__icon_left"})}),ne.jsx("button",{className:"swiper__btn_right",onClick:()=>{n.slideNext()},children:ne.jsx(hr,{icon:BH,size:"large",className:"swiper__icon_right"})})]})})};var Eh;typeof window<"u"?Eh=window:typeof Iu<"u"?Eh=Iu:typeof self<"u"?Eh=self:Eh={};var M0=Eh;const G=bi(M0);var ak=typeof Iu<"u"?Iu:typeof window<"u"?window:{},ree=vh,Th;typeof document<"u"?Th=document:(Th=ak["__GLOBAL_DOCUMENT_CACHE@4"],Th||(Th=ak["__GLOBAL_DOCUMENT_CACHE@4"]=ree));var cL=Th;const De=bi(cL);var Qx={exports:{}};(function(n,e){function t(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return a[l];var u=String(l),d=i[u.toLowerCase()];if(d)return d;var d=r[u.toLowerCase()];if(d)return d;if(u.length===1)return u.charCodeAt(0)}t.isEventKey=function(c,u){if(c&&typeof c=="object"){var d=c.which||c.keyCode||c.charCode;if(d==null)return!1;if(typeof u=="string"){var h=i[u.toLowerCase()];if(h)return h===d;var h=r[u.toLowerCase()];if(h)return h===d}else if(typeof u=="number")return u===d;return!1}},e=n.exports=t;var i=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(s=97;s<123;s++)i[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)i[s-48]=s;for(s=1;s<13;s++)i["f"+s]=s+111;for(s=0;s<10;s++)i["numpad "+s]=s+96;var a=e.names=e.title={};for(s in i)a[i[s]]=s;for(var o in r)i[o]=r[o]})(Qx,Qx.exports);var see=Qx.exports;const rt=bi(see);var aee=oee;function oee(n,e){var t,i=null;try{t=JSON.parse(n,e)}catch(r){i=r}return[i,t]}const lee=bi(aee);var T1={exports:{}};const cee=VN(o8);var uee=hee,dee=Object.prototype.toString;function hee(n){if(!n)return!1;var e=dee.call(n);return e==="[object Function]"||typeof n=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}var fee=M0,pee=function(e,t){return t===void 0&&(t=!1),function(i,r,s){if(i){e(i);return}if(r.statusCode>=400&&r.statusCode<=599){var a=s;if(t)if(fee.TextDecoder){var o=mee(r.headers&&r.headers["content-type"]);try{a=new TextDecoder(o).decode(s)}catch(l){}}else a=String.fromCharCode.apply(null,new Uint8Array(s));e({cause:a});return}e(null,s)}};function mee(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(e,t){var i=t.split("="),r=i[0],s=i[1];return r.trim()==="charset"?s.trim():e},"utf-8")}var gee=pee,uL=M0,yee=cee,bee=uee;ra.httpHandler=gee;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var vee=function(e){var t={};return e&&e.trim().split("\n").forEach(function(i){var r=i.indexOf(":"),s=i.slice(0,r).trim().toLowerCase(),a=i.slice(r+1).trim();typeof t[s]>"u"?t[s]=a:Array.isArray(t[s])?t[s].push(a):t[s]=[t[s],a]}),t};T1.exports=ra;T1.exports.default=ra;ra.XMLHttpRequest=uL.XMLHttpRequest||Tee;ra.XDomainRequest="withCredentials"in new ra.XMLHttpRequest?ra.XMLHttpRequest:uL.XDomainRequest;wee(["get","put","post","patch","head","delete"],function(n){ra[n==="delete"?"del":n]=function(e,t,i){return t=dL(e,t,i),t.method=n.toUpperCase(),hL(t)}});function wee(n,e){for(var t=0;t<n.length;t++)e(n[t])}function xee(n){for(var e in n)if(n.hasOwnProperty(e))return!1;return!0}function dL(n,e,t){var i=n;return bee(e)?(t=e,typeof n=="string"&&(i={uri:n})):i=yee({},e,{uri:n}),i.callback=t,i}function ra(n,e,t){return e=dL(n,e,t),hL(e)}function hL(n){if(typeof n.callback>"u")throw new Error("callback argument missing");var e=!1,t=function(T,N,P){e||(e=!0,n.callback(T,N,P))};function i(){o.readyState===4&&setTimeout(a,0)}function r(){var y=void 0;if(o.response?y=o.response:y=o.responseText||Eee(o),g)try{y=JSON.parse(y)}catch(T){}return y}function s(y){return clearTimeout(_),y instanceof Error||(y=new Error(""+(y||"Unknown XMLHttpRequest Error"))),y.statusCode=0,t(y,v)}function a(){if(!c){var y;clearTimeout(_),n.useXDR&&o.status===void 0?y=200:y=o.status===1223?204:o.status;var T=v,N=null;return y!==0?(T={body:r(),statusCode:y,method:d,headers:{},url:u,rawRequest:o},o.getAllResponseHeaders&&(T.headers=vee(o.getAllResponseHeaders()))):N=new Error("Internal XMLHttpRequest Error"),t(N,T,T.body)}}var o=n.xhr||null;o||(n.cors||n.useXDR?o=new ra.XDomainRequest:o=new ra.XMLHttpRequest);var l,c,u=o.url=n.uri||n.url,d=o.method=n.method||"GET",h=n.body||n.data,f=o.headers=n.headers||{},m=!!n.sync,g=!1,_,v={body:void 0,headers:{},statusCode:0,method:d,url:u,rawRequest:o};if("json"in n&&n.json!==!1&&(g=!0,f.accept||f.Accept||(f.Accept="application/json"),d!=="GET"&&d!=="HEAD"&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),h=JSON.stringify(n.json===!0?h:n.json))),o.onreadystatechange=i,o.onload=a,o.onerror=s,o.onprogress=function(){},o.onabort=function(){c=!0},o.ontimeout=s,o.open(d,u,!m,n.username,n.password),m||(o.withCredentials=!!n.withCredentials),!m&&n.timeout>0&&(_=setTimeout(function(){if(!c){c=!0,o.abort("timeout");var y=new Error("XMLHttpRequest timeout");y.code="ETIMEDOUT",s(y)}},n.timeout)),o.setRequestHeader)for(l in f)f.hasOwnProperty(l)&&o.setRequestHeader(l,f[l]);else if(n.headers&&!xee(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(o.responseType=n.responseType),"beforeSend"in n&&typeof n.beforeSend=="function"&&n.beforeSend(o),o.send(h||null),o}function Eee(n){try{if(n.responseType==="document")return n.responseXML;var e=n.responseXML&&n.responseXML.documentElement.nodeName==="parsererror";if(n.responseType===""&&!e)return n.responseXML}catch(t){}return null}function Tee(){}var See=T1.exports;const fL=bi(See);var pL={exports:{}},ok=cL,S1=Object.create||function(){function n(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=e,new n}}();function fr(n,e){this.name="ParsingError",this.code=n.code,this.message=e||n.message}fr.prototype=S1(Error.prototype);fr.prototype.constructor=fr;fr.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function _1(n){function e(i,r,s,a){return(i|0)*3600+(r|0)*60+(s|0)+(a|0)/1e3}var t=n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function zh(){this.values=S1(null)}zh.prototype={set:function(n,e){!this.get(n)&&e!==""&&(this.values[n]=e)},get:function(n,e,t){return t?this.has(n)?this.values[n]:e[t]:this.has(n)?this.values[n]:e},has:function(n){return n in this.values},alt:function(n,e,t){for(var i=0;i<t.length;++i)if(e===t[i]){this.set(n,e);break}},integer:function(n,e){/^-?\d+$/.test(e)&&this.set(n,parseInt(e,10))},percent:function(n,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(n,e),!0):!1}};function Sh(n,e,t,i){var r=i?n.split(i):[n];for(var s in r)if(typeof r[s]=="string"){var a=r[s].split(t);if(a.length===2){var o=a[0].trim(),l=a[1].trim();e(o,l)}}}function _ee(n,e,t){var i=n;function r(){var o=_1(n);if(o===null)throw new fr(fr.Errors.BadTimeStamp,"Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){var c=new zh;Sh(o,function(u,d){switch(u){case"region":for(var h=t.length-1;h>=0;h--)if(t[h].id===d){c.set(u,t[h].region);break}break;case"vertical":c.alt(u,d,["rl","lr"]);break;case"line":var f=d.split(","),m=f[0];c.integer(u,m),c.percent(u,m)&&c.set("snapToLines",!1),c.alt(u,m,["auto"]),f.length===2&&c.alt("lineAlign",f[1],["start","center","end"]);break;case"position":f=d.split(","),c.percent(u,f[0]),f.length===2&&c.alt("positionAlign",f[1],["start","center","end"]);break;case"size":c.percent(u,d);break;case"align":c.alt(u,d,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");try{l.line=c.get("line","auto")}catch(u){}l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100);try{l.align=c.get("align","center")}catch(u){l.align=c.get("align","middle")}try{l.position=c.get("position","auto")}catch(u){l.position=c.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=c.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=r(),a(),n.substr(0,3)!=="-->")throw new fr(fr.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.substr(3),a(),e.endTime=r(),a(),s(n,e)}var Kv=ok.createElement&&ok.createElement("textarea"),Cee={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},lk={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Aee={v:"title",lang:"lang"},ck={rt:"ruby"};function mL(n,e){function t(){if(!e)return null;function m(_){return e=e.substr(_.length),_}var g=e.match(/^([^<]*)(<[^>]*>?)?/);return m(g[1]?g[1]:g[2])}function i(m){return Kv.innerHTML=m,m=Kv.textContent,Kv.textContent="",m}function r(m,g){return!ck[g.localName]||ck[g.localName]===m.localName}function s(m,g){var _=Cee[m];if(!_)return null;var v=n.document.createElement(_),y=Aee[m];return y&&g&&(v[y]=g.trim()),v}for(var a=n.document.createElement("div"),o=a,l,c=[];(l=t())!==null;){if(l[0]==="<"){if(l[1]==="/"){c.length&&c[c.length-1]===l.substr(2).replace(">","")&&(c.pop(),o=o.parentNode);continue}var u=_1(l.substr(1,l.length-2)),d;if(u){d=n.document.createProcessingInstruction("timestamp",u),o.appendChild(d);continue}var h=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h||(d=s(h[1],h[3]),!d)||!r(o,d))continue;if(h[2]){var f=h[2].split(".");f.forEach(function(m){var g=/^bg_/.test(m),_=g?m.slice(3):m;if(lk.hasOwnProperty(_)){var v=g?"background-color":"color",y=lk[_];d.style[v]=y}}),d.className=f.join(" ")}c.push(h[1]),o.appendChild(d),o=d;continue}o.appendChild(n.document.createTextNode(i(l)))}return a}var uk=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function kee(n){for(var e=0;e<uk.length;e++){var t=uk[e];if(n>=t[0]&&n<=t[1])return!0}return!1}function Nee(n){var e=[],t="",i;if(!n||!n.childNodes)return"ltr";function r(o,l){for(var c=l.childNodes.length-1;c>=0;c--)o.push(l.childNodes[c])}function s(o){if(!o||!o.length)return null;var l=o.pop(),c=l.textContent||l.innerText;if(c){var u=c.match(/^.*(\n|\r)/);return u?(o.length=0,u[0]):c}if(l.tagName==="ruby")return s(o);if(l.childNodes)return r(o,l),s(o)}for(r(e,n);t=s(e);)for(var a=0;a<t.length;a++)if(i=t.charCodeAt(a),kee(i))return"rtl";return"ltr"}function Dee(n){if(typeof n.line=="number"&&(n.snapToLines||n.line>=0&&n.line<=100))return n.line;if(!n.track||!n.track.textTrackList||!n.track.textTrackList.mediaElement)return-1;for(var e=n.track,t=e.textTrackList,i=0,r=0;r<t.length&&t[r]!==e;r++)t[r].mode==="showing"&&i++;return++i*-1}function L0(){}L0.prototype.applyStyles=function(n,e){e=e||this.div;for(var t in n)n.hasOwnProperty(t)&&(e.style[t]=n[t])};L0.prototype.formatStyle=function(n,e){return n===0?0:n+e};function ty(n,e,t){L0.call(this),this.cue=e,this.cueDiv=mL(n,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=n.document.createElement("div"),i={direction:Nee(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:t.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":case"line-left":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":case"line-right":r=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(s){this.applyStyles({top:this.formatStyle(s.top,"px"),bottom:this.formatStyle(s.bottom,"px"),left:this.formatStyle(s.left,"px"),right:this.formatStyle(s.right,"px"),height:this.formatStyle(s.height,"px"),width:this.formatStyle(s.width,"px")})}}ty.prototype=S1(L0.prototype);ty.prototype.constructor=ty;function Ni(n){var e,t,i,r;if(n.div){t=n.div.offsetHeight,i=n.div.offsetWidth,r=n.div.offsetTop;var s=(s=n.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();n=n.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,n.height/s.length):0}this.left=n.left,this.right=n.right,this.top=n.top||r,this.height=n.height||t,this.bottom=n.bottom||r+(n.height||t),this.width=n.width||i,this.lineHeight=e!==void 0?e:n.lineHeight}Ni.prototype.move=function(n,e){switch(e=e!==void 0?e:this.lineHeight,n){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Ni.prototype.overlaps=function(n){return this.left<n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};Ni.prototype.overlapsAny=function(n){for(var e=0;e<n.length;e++)if(this.overlaps(n[e]))return!0;return!1};Ni.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};Ni.prototype.overlapsOppositeAxis=function(n,e){switch(e){case"+x":return this.left<n.left;case"-x":return this.right>n.right;case"+y":return this.top<n.top;case"-y":return this.bottom>n.bottom}};Ni.prototype.intersectPercentage=function(n){var e=Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left)),t=Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top)),i=e*t;return i/(this.height*this.width)};Ni.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};Ni.getSimpleBoxPosition=function(n){var e=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,t=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:0,i=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n;var r={left:n.left,right:n.right,top:n.top||i,height:n.height||e,bottom:n.bottom||i+(n.height||e),width:n.width||t};return r};function Pee(n,e,t,i){function r(_,v){for(var y,T=new Ni(_),N=1,P=0;P<v.length;P++){for(;_.overlapsOppositeAxis(t,v[P])||_.within(t)&&_.overlapsAny(i);)_.move(v[P]);if(_.within(t))return _;var F=_.intersectPercentage(t);N>F&&(y=new Ni(_),N=F),_=new Ni(T)}return y||T}var s=new Ni(e),a=e.cue,o=Dee(a),l=[];if(a.snapToLines){var c;switch(a.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width";break}var u=s.lineHeight,d=u*Math.round(o),h=t[c]+u,f=l[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/u)*u),o<0&&(d+=a.vertical===""?t.height:t.width,l=l.reverse()),s.move(f,d)}else{var m=s.lineHeight/t.height*100;switch(a.lineAlign){case"center":o-=m/2;break;case"end":o-=m;break}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],s=new Ni(e)}var g=r(s,l);e.move(g.toCSSCompatValues(t))}function Ed(){}Ed.StringDecoder=function(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};Ed.convertCueToDOMTree=function(n,e){return!n||!e?null:mL(n,e)};var Iee=.05,Ree="sans-serif",Oee="1.5%";Ed.processCues=function(n,e,t){if(!n||!e||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var i=n.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=Oee,t.appendChild(i);function r(u){for(var d=0;d<u.length;d++)if(u[d].hasBeenReset||!u[d].displayState)return!0;return!1}if(!r(e)){for(var s=0;s<e.length;s++)i.appendChild(e[s].displayState);return}var a=[],o=Ni.getSimpleBoxPosition(i),l=Math.round(o.height*Iee*100)/100,c={font:l+"px "+Ree};(function(){for(var u,d,h=0;h<e.length;h++)d=e[h],u=new ty(n,d,c),i.appendChild(u.div),Pee(n,u,o,a),d.displayState=u.div,a.push(Ni.getSimpleBoxPosition(u))})()};Ed.Parser=function(n,e,t){t||(t=e,e={}),e||(e={}),this.window=n,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]};Ed.Parser.prototype={reportOrThrowError:function(n){if(n instanceof fr)this.onparsingerror&&this.onparsingerror(n);else throw n},parse:function(n){var e=this;n&&(e.buffer+=e.decoder.decode(n,{stream:!0}));function t(){for(var u=e.buffer,d=0;d<u.length&&u[d]!=="\r"&&u[d]!=="\n";)++d;var h=u.substr(0,d);return u[d]==="\r"&&++d,u[d]==="\n"&&++d,e.buffer=u.substr(d),h}function i(u){var d=new zh;if(Sh(u,function(f,m){switch(f){case"id":d.set(f,m);break;case"width":d.percent(f,m);break;case"lines":d.integer(f,m);break;case"regionanchor":case"viewportanchor":var g=m.split(",");if(g.length!==2)break;var _=new zh;if(_.percent("x",g[0]),_.percent("y",g[1]),!_.has("x")||!_.has("y"))break;d.set(f+"X",_.get("x")),d.set(f+"Y",_.get("y"));break;case"scroll":d.alt(f,m,["up"]);break}},/=/,/\s/),d.has("id")){var h=new(e.vttjs.VTTRegion||e.window.VTTRegion);h.width=d.get("width",100),h.lines=d.get("lines",3),h.regionAnchorX=d.get("regionanchorX",0),h.regionAnchorY=d.get("regionanchorY",100),h.viewportAnchorX=d.get("viewportanchorX",0),h.viewportAnchorY=d.get("viewportanchorY",100),h.scroll=d.get("scroll",""),e.onregion&&e.onregion(h),e.regionList.push({id:d.get("id"),region:h})}}function r(u){var d=new zh;Sh(u,function(h,f){switch(h){case"MPEGT":d.integer(h+"S",f);break;case"LOCA":d.set(h+"L",_1(f));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function s(u){u.match(/X-TIMESTAMP-MAP/)?Sh(u,function(d,h){switch(d){case"X-TIMESTAMP-MAP":r(h);break}},/=/):Sh(u,function(d,h){switch(d){case"Region":i(h);break}},/:/)}try{var a;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=t();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new fr(fr.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:a=t(),e.state){case"HEADER":/:/.test(a)?s(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch(u){e.cue.align="middle"}if(e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":try{_ee(a,e.cue,e.regionList)}catch(u){e.reportOrThrowError(u),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var c=a.indexOf("-->")!==-1;if(!a||c&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=a.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":a||(e.state="ID");continue}}}catch(u){e.reportOrThrowError(u),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||n.state==="HEADER")&&(n.buffer+="\n\n",n.parse()),n.state==="INITIAL")throw new fr(fr.Errors.BadSignature)}catch(e){n.reportOrThrowError(e)}return n.onflush&&n.onflush(),this}};var Mee=Ed,Lee="auto",$ee={"":1,lr:1,rl:1},Bee={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Fee(n){if(typeof n!="string")return!1;var e=$ee[n.toLowerCase()];return e?n.toLowerCase():!1}function Yv(n){if(typeof n!="string")return!1;var e=Bee[n.toLowerCase()];return e?n.toLowerCase():!1}function gL(n,e,t){this.hasBeenReset=!1;var i="",r=!1,s=n,a=e,o=t,l=null,c="",u=!0,d="auto",h="start",f="auto",m="auto",g=100,_="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(v){i=""+v}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(v){r=!!v}},startTime:{enumerable:!0,get:function(){return s},set:function(v){if(typeof v!="number")throw new TypeError("Start time must be set to a number.");s=v,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(v){if(typeof v!="number")throw new TypeError("End time must be set to a number.");a=v,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(v){o=""+v,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(v){l=v,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(v){var y=Fee(v);if(y===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=y,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return u},set:function(v){u=!!v,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(v){if(typeof v!="number"&&v!==Lee)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=v,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(v){var y=Yv(v);y?(h=y,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return f},set:function(v){if(v<0||v>100)throw new Error("Position must be between 0 and 100.");f=v,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m},set:function(v){var y=Yv(v);y?(m=y,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(v){if(v<0||v>100)throw new Error("Size must be between 0 and 100.");g=v,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return _},set:function(v){var y=Yv(v);if(!y)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");_=y,this.hasBeenReset=!0}}}),this.displayState=void 0}gL.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var qee=gL,Uee={"":!0,up:!0};function jee(n){if(typeof n!="string")return!1;var e=Uee[n.toLowerCase()];return e?n.toLowerCase():!1}function rh(n){return typeof n=="number"&&n>=0&&n<=100}function zee(){var n=100,e=3,t=0,i=100,r=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(o){if(!rh(o))throw new Error("Width must be between 0 and 100.");n=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(o){if(!rh(o))throw new Error("RegionAnchorX must be between 0 and 100.");i=o}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!rh(o))throw new Error("RegionAnchorY must be between 0 and 100.");t=o}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(o){if(!rh(o))throw new Error("ViewportAnchorY must be between 0 and 100.");s=o}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!rh(o))throw new Error("ViewportAnchorX must be between 0 and 100.");r=o}},scroll:{enumerable:!0,get:function(){return a},set:function(o){var l=jee(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):a=l}}})}var Vee=zee,Ka=M0,hc=pL.exports={WebVTT:Mee,VTTCue:qee,VTTRegion:Vee};Ka.vttjs=hc;Ka.WebVTT=hc.WebVTT;var Hee=hc.VTTCue,Wee=hc.VTTRegion,Gee=Ka.VTTCue,Qee=Ka.VTTRegion;hc.shim=function(){Ka.VTTCue=Hee,Ka.VTTRegion=Wee};hc.restore=function(){Ka.VTTCue=Gee,Ka.VTTRegion=Qee};Ka.VTTCue||hc.shim();var Kee=pL.exports;const dk=bi(Kee);var yL={exports:{}};(function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):c;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var m=r.exec(f.path);f.netLoc=m[1],f.path=m[2]}f.netLoc&&!f.path&&(f.path="/");var g={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(g.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)g.path=f.path,h.params||(g.params=f.params,h.query||(g.query=f.query));else{var _=f.path,v=_.substring(0,_.lastIndexOf("/")+1)+h.path;g.path=o.normalizePath(v)}return g.path===null&&(g.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(g)},parseURL:function(l){var c=i.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=o})()})(yL);var Yee=yL.exports;const ny=bi(Yee);var hk="http://example.com",Xee=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=G.location&&G.location.href||"");var i=typeof G.URL=="function",r=/^\/\//.test(e),s=!G.location&&!/\/\//i.test(e);if(i?e=new G.URL(e,G.location||hk):/\/\//i.test(e)||(e=ny.buildAbsoluteURL(G.location&&G.location.href||"",e)),i){var a=new URL(t,e);return s?a.href.slice(hk.length):r?a.href.slice(a.protocol.length):a.href}return ny.buildAbsoluteURL(e,t)},C1=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(i,r){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r)},e.off=function(i,r){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(r);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},e.trigger=function(i){var r=this.listeners[i];if(r)if(arguments.length===2)for(var s=r.length,a=0;a<s;++a)r[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=r.length,c=0;c<l;++c)r[c].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(r){i.push(r)})},n}(),Jee=function(e){return G.atob?G.atob(e):Buffer.from(e,"base64").toString("binary")};function Zee(n){for(var e=Jee(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}/*! @name m3u8-parser @version 6.2.0 @license Apache-2.0 */class ete extends C1{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const tte=String.fromCharCode(9),Xv=function(n){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},nte=function(){const n="[^=]*",e='"[^"]*"|[^,]*',t="(?:"+n+")=(?:"+e+")";return new RegExp("(?:^|,)("+t+")")},Ir=function(n){const e={};if(!n)return e;const t=n.split(nte());let i=t.length,r;for(;i--;)t[i]!==""&&(r=/([^=]*)=(.*)/.exec(t[i]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),e[r[0]]=r[1]);return e};class ite extends C1{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,a)=>{const o=a(e);return o===e?s:s.concat([o])},[e]).forEach(s=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t){i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),this.trigger("data",i);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t){i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t){i=Sn(Xv(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t){i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(i={type:"tag",tagType:"map"},t[1]){const a=Ir(t[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=Xv(a.BYTERANGE))}this.trigger("data",i);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=Ir(t[1]),i.attributes.RESOLUTION){const a=i.attributes.RESOLUTION.split("x"),o={};a[0]&&(o.width=parseInt(a[0],10)),a[1]&&(o.height=parseInt(a[1],10)),i.attributes.RESOLUTION=o}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t){i={type:"tag",tagType:"media"},t[1]&&(i.attributes=Ir(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-ENDLIST/.exec(s),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t){i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(s),t){i={type:"tag",tagType:"key"},t[1]&&(i.attributes=Ir(t[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(t=/^#EXT-X-START:(.*)$/.exec(s),t){i={type:"tag",tagType:"start"},t[1]&&(i.attributes=Ir(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"skip"},i.attributes=Ir(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(tte)),this.trigger("data",i);return}if(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"part"},i.attributes=Ir(t[1]),["DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=Xv(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"server-control"},i.attributes=Ir(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"part-inf"},i.attributes=Ir(t[1]),["PART-TARGET"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=Ir(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(i.attributes.hasOwnProperty(a)){i.attributes[a]=parseInt(i.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[a],delete i.attributes[a]}}),this.trigger("data",i);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=Ir(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseInt(i.attributes[a],10))}),this.trigger("data",i);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"daterange"},i.attributes=Ir(t[1]),["ID","CLASS"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=String(i.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=new Date(i.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/i.test(i.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=i.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in i.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(i.attributes[o]),c=/^\d+(\.\d+)?$/.test(i.attributes[o]);i.attributes[o]=l?i.attributes[o].toString(16):c?parseFloat(i.attributes[o]):String(i.attributes[o])}this.trigger("data",i);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:t,dataParser:i,segment:r}){typeof i!="function"&&(i=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:i(s),customType:t,segment:r}),!0})}addTagMapper({expression:e,map:t}){const i=r=>e.test(r)?t(r):r;this.tagMappers.push(i)}}const rte=n=>n.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),gl=function(n){const e={};return Object.keys(n).forEach(function(t){e[rte(t)]=n[t]}),e},Jv=function(n){const{serverControl:e,targetDuration:t,partTargetDuration:i}=n;if(!e)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=t&&t*3,l=i&&i*2;t&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:"".concat(r," defaulting HOLD-BACK to targetDuration * 3 (").concat(o,").")})),o&&e[s]<o&&(this.trigger("warn",{message:"".concat(r," clamping HOLD-BACK (").concat(e[s],") to targetDuration * 3 (").concat(o,")")}),e[s]=o),i&&!e.hasOwnProperty(a)&&(e[a]=i*3,this.trigger("info",{message:"".concat(r," defaulting PART-HOLD-BACK to partTargetDuration * 3 (").concat(e[a],").")})),i&&e[a]<l&&(this.trigger("warn",{message:"".concat(r," clamping PART-HOLD-BACK (").concat(e[a],") to partTargetDuration * 2 (").concat(l,").")}),e[a]=l)};class ste extends C1{constructor(){super(),this.lineStream=new ete,this.parseStream=new ite,this.lineStream.pipe(this.parseStream);const e=this,t=[];let i={},r,s,a=!1;const o=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let u=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let d=0,h=0;const f={};this.on("end",()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&r&&(i.map=r),!i.key&&s&&(i.key=s),!i.timeline&&typeof u=="number"&&(i.timeline=u),this.manifest.preloadSegment=i)}),this.parseStream.on("data",function(m){let g,_;({tag(){({version(){m.version&&(this.manifest.version=m.version)},"allow-cache"(){this.manifest.allowCache=m.allowed,"allowed"in m||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const v={};"length"in m&&(i.byterange=v,v.length=m.length,"offset"in m||(m.offset=d)),"offset"in m&&(i.byterange=v,v.offset=m.offset),d=v.offset+v.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),m.duration>0&&(i.duration=m.duration),m.duration===0&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(!m.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(m.attributes.METHOD==="NONE"){s=null;return}if(!m.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(m.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:m.attributes};return}if(m.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:m.attributes.URI};return}if(m.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(m.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(m.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),m.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(m.attributes.KEYID&&m.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:m.attributes.KEYFORMAT,keyId:m.attributes.KEYID.substring(2)},pssh:Zee(m.attributes.URI.split(",")[1])};return}m.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:m.attributes.METHOD||"AES-128",uri:m.attributes.URI},typeof m.attributes.IV<"u"&&(s.iv=m.attributes.IV)},"media-sequence"(){if(!isFinite(m.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+m.number});return}this.manifest.mediaSequence=m.number},"discontinuity-sequence"(){if(!isFinite(m.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+m.number});return}this.manifest.discontinuitySequence=m.number,u=m.number},"playlist-type"(){if(!/VOD|EVENT/.test(m.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+m.playlist});return}this.manifest.playlistType=m.playlistType},map(){r={},m.uri&&(r.uri=m.uri),m.byterange&&(r.byterange=m.byterange),s&&(r.key=s)},"stream-inf"(){if(this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||l,!m.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}i.attributes||(i.attributes={}),Sn(i.attributes,m.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(m.attributes&&m.attributes.TYPE&&m.attributes["GROUP-ID"]&&m.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const v=this.manifest.mediaGroups[m.attributes.TYPE];v[m.attributes["GROUP-ID"]]=v[m.attributes["GROUP-ID"]]||{},g=v[m.attributes["GROUP-ID"]],_={default:/yes/i.test(m.attributes.DEFAULT)},_.default?_.autoselect=!0:_.autoselect=/yes/i.test(m.attributes.AUTOSELECT),m.attributes.LANGUAGE&&(_.language=m.attributes.LANGUAGE),m.attributes.URI&&(_.uri=m.attributes.URI),m.attributes["INSTREAM-ID"]&&(_.instreamId=m.attributes["INSTREAM-ID"]),m.attributes.CHARACTERISTICS&&(_.characteristics=m.attributes.CHARACTERISTICS),m.attributes.FORCED&&(_.forced=/yes/i.test(m.attributes.FORCED)),g[m.attributes.NAME]=_},discontinuity(){u+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=m.dateTimeString,this.manifest.dateTimeObject=m.dateTimeObject),i.dateTimeString=m.dateTimeString,i.dateTimeObject=m.dateTimeObject},targetduration(){if(!isFinite(m.duration)||m.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+m.duration});return}this.manifest.targetDuration=m.duration,Jv.call(this,this.manifest)},start(){if(!m.attributes||isNaN(m.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:m.attributes["TIME-OFFSET"],precise:m.attributes.PRECISE}},"cue-out"(){i.cueOut=m.data},"cue-out-cont"(){i.cueOutCont=m.data},"cue-in"(){i.cueIn=m.data},skip(){this.manifest.skip=gl(m.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",m.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const v=this.manifest.segments.length,y=gl(m.attributes);i.parts=i.parts||[],i.parts.push(y),y.byterange&&(y.byterange.hasOwnProperty("offset")||(y.byterange.offset=h),h=y.byterange.offset+y.byterange.length);const T=i.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #".concat(T," for segment #").concat(v),m.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((N,P)=>{N.hasOwnProperty("lastPart")||this.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #".concat(P," lacks required attribute(s): LAST-PART")})})},"server-control"(){const v=this.manifest.serverControl=gl(m.attributes);v.hasOwnProperty("canBlockReload")||(v.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Jv.call(this,this.manifest),v.canSkipDateranges&&!v.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const v=this.manifest.segments.length,y=gl(m.attributes),T=y.type&&y.type==="PART";i.preloadHints=i.preloadHints||[],i.preloadHints.push(y),y.byterange&&(y.byterange.hasOwnProperty("offset")||(y.byterange.offset=T?h:0,T&&(h=y.byterange.offset+y.byterange.length)));const N=i.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #".concat(N," for segment #").concat(v),m.attributes,["TYPE","URI"]),!!y.type)for(let P=0;P<i.preloadHints.length-1;P++){const F=i.preloadHints[P];F.type&&F.type===y.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #".concat(N," for segment #").concat(v," has the same TYPE ").concat(y.type," as preload hint #").concat(P)})}},"rendition-report"(){const v=gl(m.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(v);const y=this.manifest.renditionReports.length-1,T=["LAST-MSN","URI"];a&&T.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #".concat(y),m.attributes,T)},"part-inf"(){this.manifest.partInf=gl(m.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",m.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Jv.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(gl(m.attributes));const v=this.manifest.daterange.length-1;this.warnOnMissingAttributes_("#EXT-X-DATERANGE #".concat(v),m.attributes,["ID","START-DATE"]);const y=this.manifest.daterange[v];y.endDate&&y.startDate&&new Date(y.endDate)<new Date(y.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),y.duration&&y.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),y.plannedDuration&&y.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const T=!!y.endOnNext;if(T&&!y.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),T&&(y.duration||y.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),y.duration&&y.endDate){const N=y.startDate,P=N.setSeconds(N.getSeconds()+y.duration);this.manifest.daterange[v].endDate=new Date(P)}if(y&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),!f[y.id])f[y.id]=y;else for(const N in f[y.id])if(f[y.id][N]!==y[N]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}},"independent-segments"(){this.manifest.independentSegments=!0}}[m.tagType]||o).call(e)},uri(){i.uri=m.uri,t.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),s&&(i.key=s),i.timeline=u,r&&(i.map=r),h=0,i={}},comment(){},custom(){m.segment?(i.custom=i.custom||{},i.custom[m.customType]=m.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[m.customType]=m.data)}})[m.type].call(e)})}warnOnMissingAttributes_(e,t,i){const r=[];i.forEach(function(s){t.hasOwnProperty(s)||r.push(s)}),r.length&&this.trigger("warn",{message:"".concat(e," lacks required attribute(s): ").concat(r.join(", "))})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var $l={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},ate=["video","audio","text"],fk=["Video","Audio","Text"],bL=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,r){var s=("00"+Number(i).toString(16)).slice(-2),a=("00"+Number(r).toString(16)).slice(-2);return"avc1."+s+"00"+a})},Vs=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(r){r=r.trim();var s;ate.forEach(function(a){var o=$l[a].exec(r.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=r.substring(0,o[1].length),c=r.replace(l,"");i.push({type:l,details:c,mediaType:a})}}),s||i.push({type:r,details:"",mediaType:"unknown"})}),i},ote=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var r in i){var s=i[r];if(s.default&&s.playlists)return Vs(s.playlists[0].attributes.CODECS)}return null},vL=function(e){return e===void 0&&(e=""),$l.audio.test(e.trim().toLowerCase())},lte=function(e){return e===void 0&&(e=""),$l.text.test(e.trim().toLowerCase())},Sf=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return bL(s.trim())}),i="video";t.length===1&&vL(t[0])?i="audio":t.length===1&&lte(t[0])&&(i="application");var r="mp4";return t.every(function(s){return $l.mp4.test(s)})?r="mp4":t.every(function(s){return $l.webm.test(s)})?r="webm":t.every(function(s){return $l.ogg.test(s)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},Wm=function(e){return e===void 0&&(e=""),G.MediaSource&&G.MediaSource.isTypeSupported&&G.MediaSource.isTypeSupported(Sf(e))||!1},Zv=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<fk.length;i++){var r=fk[i];if($l["muxer"+r].test(t))return!0}return!1})},pk="mp4a.40.2",cte="avc1.4d400d",ute=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,dte=/^application\/dash\+xml/i,wL=function(e){return ute.test(e)?"hls":dte.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},hte=function(e){return e.toString(2).length},fte=function(e){return Math.ceil(hte(e)/8)},xL=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},pte=function(e){return xL(e)},Qe=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!pte(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},ei=G.BigInt||Number,Kx=[ei("0x1"),ei("0x100"),ei("0x10000"),ei("0x1000000"),ei("0x100000000"),ei("0x10000000000"),ei("0x1000000000000"),ei("0x100000000000000"),ei("0x10000000000000000")];(function(){var n=new Uint16Array([65484]),e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var mte=function(e,t){var i=t===void 0?{}:t,r=i.signed,s=r===void 0?!1:r,a=i.le,o=a===void 0?!1:a;e=Qe(e);var l=o?"reduce":"reduceRight",c=e[l]?e[l]:Array.prototype[l],u=c.call(e,function(h,f,m){var g=o?m:Math.abs(m+1-e.length);return h+ei(f)*Kx[g]},ei(0));if(s){var d=Kx[e.length]/ei(2)-ei(1);u=ei(u),u>d&&(u-=d,u-=d,u-=ei(2))}return Number(u)},gte=function(e,t){var i=t===void 0?{}:t,r=i.le,s=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=ei(e);for(var a=fte(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var c=s?l:Math.abs(l+1-o.length);o[c]=Number(e/Kx[l]&ei(255)),e<0&&(o[c]=Math.abs(~o[c]),o[c]-=l===0?1:2)}return o},EL=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},yte=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return Qe(t[0]);var r=t.reduce(function(o,l,c){return o+(l.byteLength||l.length)},0),s=new Uint8Array(r),a=0;return t.forEach(function(o){o=Qe(o),s.set(o,a),a+=o.byteLength}),s},tn=function(e,t,i){var r=i===void 0?{}:i,s=r.offset,a=s===void 0?0:s,o=r.mask,l=o===void 0?[]:o;e=Qe(e),t=Qe(t);var c=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&c.call(t,function(u,d){var h=l[d]?l[d]&e[a+d]:e[a+d];return u===h})},mk="http://example.com",A1=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=G.location&&G.location.href||"");var i=typeof G.URL=="function",r=/^\/\//.test(e),s=!G.location&&!/\/\//i.test(e);if(i?e=new G.URL(e,G.location||mk):/\/\//i.test(e)||(e=ny.buildAbsoluteURL(G.location&&G.location.href||"",e)),i){var a=new URL(t,e);return s?a.href.slice(mk.length):r?a.href.slice(a.protocol.length):a.href}return ny.buildAbsoluteURL(e,t)},bte=function(e,t,i){t.forEach(function(r){for(var s in e.mediaGroups[r])for(var a in e.mediaGroups[r][s]){var o=e.mediaGroups[r][s][a];i(o,r,s,a)}})},vte=function(e){return G.atob?G.atob(e):Buffer.from(e,"base64").toString("binary")};function wte(n){for(var e=vte(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}var Qo={},to={};function xte(n,e,t){if(t===void 0&&(t=Array.prototype),n&&typeof t.find=="function")return t.find.call(n,e);for(var i=0;i<n.length;i++)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];if(e.call(void 0,r,i,n))return r}}function k1(n,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(n):n}function Ete(n,e){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}var TL=k1({HTML:"text/html",isHTML:function(n){return n===TL.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),SL=k1({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===SL.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});to.assign=Ete;to.find=xte;to.freeze=k1;to.MIME_TYPE=TL;to.NAMESPACE=SL;var _L=to,sa=_L.find,_f=_L.NAMESPACE;function Tte(n){return n!==""}function Ste(n){return n?n.split(/[\t\n\f\r ]+/).filter(Tte):[]}function _te(n,e){return n.hasOwnProperty(e)||(n[e]=!0),n}function gk(n){if(!n)return[];var e=Ste(n);return Object.keys(e.reduce(_te,{}))}function Cte(n){return function(e){return n&&n.indexOf(e)!==-1}}function ip(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function er(n,e){var t=n.prototype;if(!(t instanceof e)){let i=function(){};i.prototype=e.prototype,i=new i,ip(t,i),n.prototype=t=i}t.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),t.constructor=n)}var tr={},Cs=tr.ELEMENT_NODE=1,Qu=tr.ATTRIBUTE_NODE=2,iy=tr.TEXT_NODE=3,CL=tr.CDATA_SECTION_NODE=4,AL=tr.ENTITY_REFERENCE_NODE=5,Ate=tr.ENTITY_NODE=6,kL=tr.PROCESSING_INSTRUCTION_NODE=7,NL=tr.COMMENT_NODE=8,DL=tr.DOCUMENT_NODE=9,PL=tr.DOCUMENT_TYPE_NODE=10,Ya=tr.DOCUMENT_FRAGMENT_NODE=11,kte=tr.NOTATION_NODE=12,vi={},Gn={};vi.INDEX_SIZE_ERR=(Gn[1]="Index size error",1);vi.DOMSTRING_SIZE_ERR=(Gn[2]="DOMString size error",2);var zi=vi.HIERARCHY_REQUEST_ERR=(Gn[3]="Hierarchy request error",3);vi.WRONG_DOCUMENT_ERR=(Gn[4]="Wrong document",4);vi.INVALID_CHARACTER_ERR=(Gn[5]="Invalid character",5);vi.NO_DATA_ALLOWED_ERR=(Gn[6]="No data allowed",6);vi.NO_MODIFICATION_ALLOWED_ERR=(Gn[7]="No modification allowed",7);var IL=vi.NOT_FOUND_ERR=(Gn[8]="Not found",8);vi.NOT_SUPPORTED_ERR=(Gn[9]="Not supported",9);var yk=vi.INUSE_ATTRIBUTE_ERR=(Gn[10]="Attribute in use",10);vi.INVALID_STATE_ERR=(Gn[11]="Invalid state",11);vi.SYNTAX_ERR=(Gn[12]="Syntax error",12);vi.INVALID_MODIFICATION_ERR=(Gn[13]="Invalid modification",13);vi.NAMESPACE_ERR=(Gn[14]="Invalid namespace",14);vi.INVALID_ACCESS_ERR=(Gn[15]="Invalid access",15);function Tn(n,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Gn[n]),this.message=Gn[n],Error.captureStackTrace&&Error.captureStackTrace(this,Tn);return t.code=n,e&&(this.message=this.message+": "+e),t}Tn.prototype=Error.prototype;ip(vi,Tn);function qa(){}qa.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,e){for(var t=[],i=0;i<this.length;i++)uu(this[i],t,n,e);return t.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function Ku(n,e){this._node=n,this._refresh=e,N1(this)}function N1(n){var e=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==e){var t=n._refresh(n._node);if(VL(n,"length",t.length),!n.$$length||t.length<n.$$length)for(var i=t.length;i in n;i++)Object.prototype.hasOwnProperty.call(n,i)&&delete n[i];ip(t,n),n._inc=e}}Ku.prototype.item=function(n){return N1(this),this[n]||null};er(Ku,qa);function ry(){}function RL(n,e){for(var t=n.length;t--;)if(n[t]===e)return t}function bk(n,e,t,i){if(i?e[RL(e,i)]=t:e[e.length++]=t,n){t.ownerElement=n;var r=n.ownerDocument;r&&(i&&LL(r,n,i),Nte(r,n,t))}}function vk(n,e,t){var i=RL(e,t);if(i>=0){for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,n){var s=n.ownerDocument;s&&(LL(s,n,t),t.ownerElement=null)}}else throw new Tn(IL,new Error(n.tagName+"@"+t))}ry.prototype={length:0,item:qa.prototype.item,getNamedItem:function(n){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==n)return t}},setNamedItem:function(n){var e=n.ownerElement;if(e&&e!=this._ownerElement)throw new Tn(yk);var t=this.getNamedItem(n.nodeName);return bk(this._ownerElement,this,n,t),t},setNamedItemNS:function(n){var e=n.ownerElement,t;if(e&&e!=this._ownerElement)throw new Tn(yk);return t=this.getNamedItemNS(n.namespaceURI,n.localName),bk(this._ownerElement,this,n,t),t},removeNamedItem:function(n){var e=this.getNamedItem(n);return vk(this._ownerElement,this,e),e},removeNamedItemNS:function(n,e){var t=this.getNamedItemNS(n,e);return vk(this._ownerElement,this,t),t},getNamedItemNS:function(n,e){for(var t=this.length;t--;){var i=this[t];if(i.localName==e&&i.namespaceURI==n)return i}return null}};function OL(){}OL.prototype={hasFeature:function(n,e){return!0},createDocument:function(n,e,t){var i=new rp;if(i.implementation=this,i.childNodes=new qa,i.doctype=t||null,t&&i.appendChild(t),e){var r=i.createElementNS(n,e);i.appendChild(r)}return i},createDocumentType:function(n,e,t){var i=new $0;return i.name=n,i.nodeName=n,i.publicId=e||"",i.systemId=t||"",i}};function Lt(){}Lt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,e){return sy(this,n,e)},replaceChild:function(n,e){sy(this,n,e,BL),e&&this.removeChild(e)},removeChild:function(n){return $L(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return Yx(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var e=n.nextSibling;e&&e.nodeType==iy&&n.nodeType==iy?(this.removeChild(e),n.appendData(e.data)):(n.normalize(),n=e)}},isSupported:function(n,e){return this.ownerDocument.implementation.hasFeature(n,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var e=this;e;){var t=e._nsMap;if(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]===n)return i}e=e.nodeType==Qu?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(n){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n];e=e.nodeType==Qu?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(n){var e=this.lookupPrefix(n);return e==null}};function ML(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}ip(tr,Lt);ip(tr,Lt.prototype);function Cf(n,e){if(e(n))return!0;if(n=n.firstChild)do if(Cf(n,e))return!0;while(n=n.nextSibling)}function rp(){this.ownerDocument=this}function Nte(n,e,t){n&&n._inc++;var i=t.namespaceURI;i===_f.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function LL(n,e,t,i){n&&n._inc++;var r=t.namespaceURI;r===_f.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function D1(n,e,t){if(n&&n._inc){n._inc++;var i=e.childNodes;if(t)i[i.length++]=t;else{for(var r=e.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function $L(n,e){var t=e.previousSibling,i=e.nextSibling;return t?t.nextSibling=i:n.firstChild=i,i?i.previousSibling=t:n.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,D1(n.ownerDocument,n),e}function Dte(n){return n&&(n.nodeType===Lt.DOCUMENT_NODE||n.nodeType===Lt.DOCUMENT_FRAGMENT_NODE||n.nodeType===Lt.ELEMENT_NODE)}function Pte(n){return n&&(aa(n)||P1(n)||Xa(n)||n.nodeType===Lt.DOCUMENT_FRAGMENT_NODE||n.nodeType===Lt.COMMENT_NODE||n.nodeType===Lt.PROCESSING_INSTRUCTION_NODE)}function Xa(n){return n&&n.nodeType===Lt.DOCUMENT_TYPE_NODE}function aa(n){return n&&n.nodeType===Lt.ELEMENT_NODE}function P1(n){return n&&n.nodeType===Lt.TEXT_NODE}function wk(n,e){var t=n.childNodes||[];if(sa(t,aa)||Xa(e))return!1;var i=sa(t,Xa);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function xk(n,e){var t=n.childNodes||[];function i(s){return aa(s)&&s!==e}if(sa(t,i))return!1;var r=sa(t,Xa);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function Ite(n,e,t){if(!Dte(n))throw new Tn(zi,"Unexpected parent node type "+n.nodeType);if(t&&t.parentNode!==n)throw new Tn(IL,"child not in parent");if(!Pte(e)||Xa(e)&&n.nodeType!==Lt.DOCUMENT_NODE)throw new Tn(zi,"Unexpected node type "+e.nodeType+" for parent node type "+n.nodeType)}function Rte(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===Lt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(aa);if(s.length>1||sa(r,P1))throw new Tn(zi,"More than one element or text in fragment");if(s.length===1&&!wk(n,t))throw new Tn(zi,"Element in fragment can not be inserted before doctype")}if(aa(e)&&!wk(n,t))throw new Tn(zi,"Only one element can be added and only after doctype");if(Xa(e)){if(sa(i,Xa))throw new Tn(zi,"Only one doctype is allowed");var a=sa(i,aa);if(t&&i.indexOf(a)<i.indexOf(t))throw new Tn(zi,"Doctype can only be inserted before an element");if(!t&&a)throw new Tn(zi,"Doctype can not be appended since element is present")}}function BL(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===Lt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(aa);if(s.length>1||sa(r,P1))throw new Tn(zi,"More than one element or text in fragment");if(s.length===1&&!xk(n,t))throw new Tn(zi,"Element in fragment can not be inserted before doctype")}if(aa(e)&&!xk(n,t))throw new Tn(zi,"Only one element can be added and only after doctype");if(Xa(e)){if(sa(i,function(l){return Xa(l)&&l!==t}))throw new Tn(zi,"Only one doctype is allowed");var a=sa(i,aa);if(t&&i.indexOf(a)<i.indexOf(t))throw new Tn(zi,"Doctype can only be inserted before an element")}}function sy(n,e,t,i){Ite(n,e,t),n.nodeType===Lt.DOCUMENT_NODE&&(i||Rte)(n,e,t);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===Ya){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=t?t.previousSibling:n.lastChild;s.previousSibling=o,a.nextSibling=t,o?o.nextSibling=s:n.firstChild=s,t==null?n.lastChild=a:t.previousSibling=a;do s.parentNode=n;while(s!==a&&(s=s.nextSibling));return D1(n.ownerDocument||n,n),e.nodeType==Ya&&(e.firstChild=e.lastChild=null),e}function Ote(n,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=n,e.previousSibling=n.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,n.lastChild=e,D1(n.ownerDocument,n,e),e}rp.prototype={nodeName:"#document",nodeType:DL,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,e){if(n.nodeType==Ya){for(var t=n.firstChild;t;){var i=t.nextSibling;this.insertBefore(t,e),t=i}return n}return sy(this,n,e),n.ownerDocument=this,this.documentElement===null&&n.nodeType===Cs&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),$L(this,n)},replaceChild:function(n,e){sy(this,n,e,BL),n.ownerDocument=this,e&&this.removeChild(e),aa(n)&&(this.documentElement=n)},importNode:function(n,e){return zL(this,n,e)},getElementById:function(n){var e=null;return Cf(this.documentElement,function(t){if(t.nodeType==Cs&&t.getAttribute("id")==n)return e=t,!0}),e},getElementsByClassName:function(n){var e=gk(n);return new Ku(this,function(t){var i=[];return e.length>0&&Cf(t.documentElement,function(r){if(r!==t&&r.nodeType===Cs){var s=r.getAttribute("class");if(s){var a=n===s;if(!a){var o=gk(s);a=e.every(Cte(o))}a&&i.push(r)}}}),i})},createElement:function(n){var e=new tc;e.ownerDocument=this,e.nodeName=n,e.tagName=n,e.localName=n,e.childNodes=new qa;var t=e.attributes=new ry;return t._ownerElement=e,e},createDocumentFragment:function(){var n=new B0;return n.ownerDocument=this,n.childNodes=new qa,n},createTextNode:function(n){var e=new I1;return e.ownerDocument=this,e.appendData(n),e},createComment:function(n){var e=new R1;return e.ownerDocument=this,e.appendData(n),e},createCDATASection:function(n){var e=new O1;return e.ownerDocument=this,e.appendData(n),e},createProcessingInstruction:function(n,e){var t=new L1;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=n,t.nodeValue=t.data=e,t},createAttribute:function(n){var e=new ay;return e.ownerDocument=this,e.name=n,e.nodeName=n,e.localName=n,e.specified=!0,e},createEntityReference:function(n){var e=new M1;return e.ownerDocument=this,e.nodeName=n,e},createElementNS:function(n,e){var t=new tc,i=e.split(":"),r=t.attributes=new ry;return t.childNodes=new qa,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=n,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,r._ownerElement=t,t},createAttributeNS:function(n,e){var t=new ay,i=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=n,t.specified=!0,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,t}};er(rp,Lt);function tc(){this._nsMap={}}tc.prototype={nodeType:Cs,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var e=this.getAttributeNode(n);return e&&e.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,e){var t=this.ownerDocument.createAttribute(n);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(n){var e=this.getAttributeNode(n);e&&this.removeAttributeNode(e)},appendChild:function(n){return n.nodeType===Ya?this.insertBefore(n,null):Ote(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(n,e){return this.getAttributeNodeNS(n,e)!=null},getAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);return t&&t.value||""},setAttributeNS:function(n,e,t){var i=this.ownerDocument.createAttributeNS(n,e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},getAttributeNodeNS:function(n,e){return this.attributes.getNamedItemNS(n,e)},getElementsByTagName:function(n){return new Ku(this,function(e){var t=[];return Cf(e,function(i){i!==e&&i.nodeType==Cs&&(n==="*"||i.tagName==n)&&t.push(i)}),t})},getElementsByTagNameNS:function(n,e){return new Ku(this,function(t){var i=[];return Cf(t,function(r){r!==t&&r.nodeType===Cs&&(n==="*"||r.namespaceURI===n)&&(e==="*"||r.localName==e)&&i.push(r)}),i})}};rp.prototype.getElementsByTagName=tc.prototype.getElementsByTagName;rp.prototype.getElementsByTagNameNS=tc.prototype.getElementsByTagNameNS;er(tc,Lt);function ay(){}ay.prototype.nodeType=Qu;er(ay,Lt);function sp(){}sp.prototype={data:"",substringData:function(n,e){return this.data.substring(n,n+e)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,e){this.replaceData(n,0,e)},appendChild:function(n){throw new Error(Gn[zi])},deleteData:function(n,e){this.replaceData(n,e,"")},replaceData:function(n,e,t){var i=this.data.substring(0,n),r=this.data.substring(n+e);t=i+t+r,this.nodeValue=this.data=t,this.length=t.length}};er(sp,Lt);function I1(){}I1.prototype={nodeName:"#text",nodeType:iy,splitText:function(n){var e=this.data,t=e.substring(n);e=e.substring(0,n),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};er(I1,sp);function R1(){}R1.prototype={nodeName:"#comment",nodeType:NL};er(R1,sp);function O1(){}O1.prototype={nodeName:"#cdata-section",nodeType:CL};er(O1,sp);function $0(){}$0.prototype.nodeType=PL;er($0,Lt);function FL(){}FL.prototype.nodeType=kte;er(FL,Lt);function qL(){}qL.prototype.nodeType=Ate;er(qL,Lt);function M1(){}M1.prototype.nodeType=AL;er(M1,Lt);function B0(){}B0.prototype.nodeName="#document-fragment";B0.prototype.nodeType=Ya;er(B0,Lt);function L1(){}L1.prototype.nodeType=kL;er(L1,Lt);function UL(){}UL.prototype.serializeToString=function(n,e,t){return jL.call(n,e,t)};Lt.prototype.toString=jL;function jL(n,e){var t=[],i=this.nodeType==9&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&r==null){var r=i.lookupPrefix(s);if(r==null)var a=[{namespace:s,prefix:null}]}return uu(this,t,n,e,a),t.join("")}function Ek(n,e,t){var i=n.prefix||"",r=n.namespaceURI;if(!r||i==="xml"&&r===_f.XML||r===_f.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===i)return a.namespace!==r}return!0}function ew(n,e,t){n.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,ML),'"')}function uu(n,e,t,i,r){if(r||(r=[]),i)if(n=i(n),n){if(typeof n=="string"){e.push(n);return}}else return;switch(n.nodeType){case Cs:var s=n.attributes,a=s.length,v=n.firstChild,o=n.tagName;t=_f.isHTML(n.namespaceURI)||t;var l=o;if(!t&&!n.prefix&&n.namespaceURI){for(var c,u=0;u<s.length;u++)if(s.item(u).name==="xmlns"){c=s.item(u).value;break}if(!c)for(var d=r.length-1;d>=0;d--){var h=r[d];if(h.prefix===""&&h.namespace===n.namespaceURI){c=h.namespace;break}}if(c!==n.namespaceURI)for(var d=r.length-1;d>=0;d--){var h=r[d];if(h.namespace===n.namespaceURI){h.prefix&&(l=h.prefix+":"+o);break}}}e.push("<",l);for(var f=0;f<a;f++){var m=s.item(f);m.prefix=="xmlns"?r.push({prefix:m.localName,namespace:m.value}):m.nodeName=="xmlns"&&r.push({prefix:"",namespace:m.value})}for(var f=0;f<a;f++){var m=s.item(f);if(Ek(m,t,r)){var g=m.prefix||"",_=m.namespaceURI;ew(e,g?"xmlns:"+g:"xmlns",_),r.push({prefix:g,namespace:_})}uu(m,e,t,i,r)}if(o===l&&Ek(n,t,r)){var g=n.prefix||"",_=n.namespaceURI;ew(e,g?"xmlns:"+g:"xmlns",_),r.push({prefix:g,namespace:_})}if(v||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;v;)v.data?e.push(v.data):uu(v,e,t,i,r.slice()),v=v.nextSibling;else for(;v;)uu(v,e,t,i,r.slice()),v=v.nextSibling;e.push("</",l,">")}else e.push("/>");return;case DL:case Ya:for(var v=n.firstChild;v;)uu(v,e,t,i,r.slice()),v=v.nextSibling;return;case Qu:return ew(e,n.name,n.value);case iy:return e.push(n.data.replace(/[<&>]/g,ML));case CL:return e.push("<![CDATA[",n.data,"]]>");case NL:return e.push("<!--",n.data,"-->");case PL:var y=n.publicId,T=n.systemId;if(e.push("<!DOCTYPE ",n.name),y)e.push(" PUBLIC ",y),T&&T!="."&&e.push(" ",T),e.push(">");else if(T&&T!=".")e.push(" SYSTEM ",T,">");else{var N=n.internalSubset;N&&e.push(" [",N,"]"),e.push(">")}return;case kL:return e.push("<?",n.target," ",n.data,"?>");case AL:return e.push("&",n.nodeName,";");default:e.push("??",n.nodeName)}}function zL(n,e,t){var i;switch(e.nodeType){case Cs:i=e.cloneNode(!1),i.ownerDocument=n;case Ya:break;case Qu:t=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=n,i.parentNode=null,t)for(var r=e.firstChild;r;)i.appendChild(zL(n,r,t)),r=r.nextSibling;return i}function Yx(n,e,t){var i=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];typeof s!="object"&&s!=i[r]&&(i[r]=s)}switch(e.childNodes&&(i.childNodes=new qa),i.ownerDocument=n,i.nodeType){case Cs:var a=e.attributes,o=i.attributes=new ry,l=a.length;o._ownerElement=i;for(var c=0;c<l;c++)i.setAttributeNode(Yx(n,a.item(c),!0));break;case Qu:t=!0}if(t)for(var u=e.firstChild;u;)i.appendChild(Yx(n,u,t)),u=u.nextSibling;return i}function VL(n,e,t){n[e]=t}try{if(Object.defineProperty){let n=function(e){switch(e.nodeType){case Cs:case Ya:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(n(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(Ku.prototype,"length",{get:function(){return N1(this),this.$$length}}),Object.defineProperty(Lt.prototype,"textContent",{get:function(){return n(this)},set:function(e){switch(this.nodeType){case Cs:case Ya:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),VL=function(e,t,i){e["$$"+t]=i}}}catch(n){}Qo.DocumentType=$0;Qo.DOMException=Tn;Qo.DOMImplementation=OL;Qo.Element=tc;Qo.Node=Lt;Qo.NodeList=qa;Qo.XMLSerializer=UL;var F0={},HL={};(function(n){var e=to.freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(HL);var $1={},Af=to.NAMESPACE,Xx=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Tk=new RegExp("[\\-\\.0-9"+Xx.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Sk=new RegExp("^"+Xx.source+Tk.source+"*(?::"+Xx.source+Tk.source+"*)?$"),sh=0,po=1,$c=2,ah=3,Bc=4,Fc=5,oh=6,gm=7;function Yu(n,e){this.message=n,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Yu)}Yu.prototype=new Error;Yu.prototype.name=Yu.name;function WL(){}WL.prototype={parse:function(n,e,t){var i=this.domBuilder;i.startDocument(),GL(e,e={}),Mte(n,e,t,i,this.errorHandler),i.endDocument()}};function Mte(n,e,t,i,r){function s(ye){if(ye>65535){ye-=65536;var be=55296+(ye>>10),de=56320+(ye&1023);return String.fromCharCode(be,de)}else return String.fromCharCode(ye)}function a(ye){var be=ye.slice(1,-1);return Object.hasOwnProperty.call(t,be)?t[be]:be.charAt(0)==="#"?s(parseInt(be.substr(1).replace("x","0x"))):(r.error("entity not found:"+ye),ye)}function o(ye){if(ye>g){var be=n.substring(g,ye).replace(/&#?\w+;/g,a);h&&l(g),i.characters(be,0,ye-g),g=ye}}function l(ye,be){for(;ye>=u&&(be=d.exec(n));)c=be.index,u=c+be[0].length,h.lineNumber++;h.columnNumber=ye-c+1}for(var c=0,u=0,d=/.*(?:\r\n?|\n)|.*$/g,h=i.locator,f=[{currentNSMap:e}],m={},g=0;;){try{var _=n.indexOf("<",g);if(_<0){if(!n.substr(g).match(/^\s*$/)){var v=i.doc,y=v.createTextNode(n.substr(g));v.appendChild(y),i.currentElement=y}return}switch(_>g&&o(_),n.charAt(_+1)){case"/":var O=n.indexOf(">",_+3),T=n.substring(_+2,O).replace(/[ \t\n\r]+$/g,""),N=f.pop();O<0?(T=n.substring(_+2).replace(/[\s<].*/,""),r.error("end tag name: "+T+" is not complete:"+N.tagName),O=_+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),r.error("end tag name: "+T+" maybe not complete"),O=_+1+T.length);var P=N.localNSMap,F=N.tagName==T,$=F||N.tagName&&N.tagName.toLowerCase()==T.toLowerCase();if($){if(i.endElement(N.uri,N.localName,T),P)for(var B in P)Object.prototype.hasOwnProperty.call(P,B)&&i.endPrefixMapping(B);F||r.fatalError("end tag name: "+T+" is not match the current start tagName:"+N.tagName)}else f.push(N);O++;break;case"?":h&&l(_),O=qte(n,_,i);break;case"!":h&&l(_),O=Fte(n,_,i,r);break;default:h&&l(_);var M=new QL,Z=f[f.length-1].currentNSMap,O=Lte(n,_,M,Z,a,r),K=M.length;if(!M.closed&&Bte(n,O,M.tagName,m)&&(M.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),h&&K){for(var z=_k(h,{}),te=0;te<K;te++){var ue=M[te];l(ue.offset),ue.locator=_k(h,{})}i.locator=z,Ck(M,i,Z)&&f.push(M),i.locator=h}else Ck(M,i,Z)&&f.push(M);Af.isHTML(M.uri)&&!M.closed?O=$te(n,O,M.tagName,a,i):O++}}catch(ye){if(ye instanceof Yu)throw ye;r.error("element parse error: "+ye),O=-1}O>g?g=O:o(Math.max(_,g)+1)}}function _k(n,e){return e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber,e}function Lte(n,e,t,i,r,s){function a(h,f,m){t.attributeNames.hasOwnProperty(h)&&s.fatalError("Attribute "+h+" redefined"),t.addValue(h,f.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),m)}for(var o,l,c=++e,u=sh;;){var d=n.charAt(c);switch(d){case"=":if(u===po)o=n.slice(e,c),u=ah;else if(u===$c)u=ah;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(u===ah||u===po)if(u===po&&(s.warning('attribute value must after "="'),o=n.slice(e,c)),e=c+1,c=n.indexOf(d,e),c>0)l=n.slice(e,c),a(o,l,e-1),u=Fc;else throw new Error("attribute value no end '"+d+"' match");else if(u==Bc)l=n.slice(e,c),a(o,l,e),s.warning('attribute "'+o+'" missed start quot('+d+")!!"),e=c+1,u=Fc;else throw new Error('attribute value must after "="');break;case"/":switch(u){case sh:t.setTagName(n.slice(e,c));case Fc:case oh:case gm:u=gm,t.closed=!0;case Bc:case po:break;case $c:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),u==sh&&t.setTagName(n.slice(e,c)),c;case">":switch(u){case sh:t.setTagName(n.slice(e,c));case Fc:case oh:case gm:break;case Bc:case po:l=n.slice(e,c),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case $c:u===$c&&(l=o),u==Bc?(s.warning('attribute "'+l+'" missed quot(")!'),a(o,l,e)):((!Af.isHTML(i[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case ah:throw new Error("attribute value missed!!")}return c;case"":d=" ";default:if(d<=" ")switch(u){case sh:t.setTagName(n.slice(e,c)),u=oh;break;case po:o=n.slice(e,c),u=$c;break;case Bc:var l=n.slice(e,c);s.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case Fc:u=oh;break}else switch(u){case $c:t.tagName,(!Af.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=c,u=po;break;case Fc:s.warning('attribute space is required"'+o+'"!!');case oh:u=po,e=c;break;case ah:u=Bc,e=c;break;case gm:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function Ck(n,e,t){for(var i=n.tagName,r=null,d=n.length;d--;){var s=n[d],a=s.qName,o=s.value,h=a.indexOf(":");if(h>0)var l=s.prefix=a.slice(0,h),c=a.slice(h+1),u=l==="xmlns"&&c;else c=a,l=null,u=a==="xmlns"&&"";s.localName=c,u!==!1&&(r==null&&(r={},GL(t,t={})),t[u]=r[u]=o,s.uri=Af.XMLNS,e.startPrefixMapping(u,o))}for(var d=n.length;d--;){s=n[d];var l=s.prefix;l&&(l==="xml"&&(s.uri=Af.XML),l!=="xmlns"&&(s.uri=t[l||""]))}var h=i.indexOf(":");h>0?(l=n.prefix=i.slice(0,h),c=n.localName=i.slice(h+1)):(l=null,c=n.localName=i);var f=n.uri=t[l||""];if(e.startElement(f,c,i,n),n.closed){if(e.endElement(f,c,i),r)for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&e.endPrefixMapping(l)}else return n.currentNSMap=t,n.localNSMap=r,!0}function $te(n,e,t,i,r){if(/^(?:script|textarea)$/i.test(t)){var s=n.indexOf("</"+t+">",e),a=n.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),s)}return e+1}function Bte(n,e,t,i){var r=i[t];return r==null&&(r=n.lastIndexOf("</"+t+">"),r<e&&(r=n.lastIndexOf("</"+t)),i[t]=r),r<e}function GL(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function Fte(n,e,t,i){var r=n.charAt(e+2);switch(r){case"-":if(n.charAt(e+3)==="-"){var s=n.indexOf("-->",e+4);return s>e?(t.comment(n,e+4,s-e-4),s+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(e+3,6)=="CDATA["){var s=n.indexOf("]]>",e+9);return t.startCDATA(),t.characters(n,e+9,s-e-9),t.endCDATA(),s+3}var a=Ute(n,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],c=!1,u=!1;o>3&&(/^public$/i.test(a[2][0])?(c=a[3][0],u=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(u=a[3][0]));var d=a[o-1];return t.startDTD(l,c,u),t.endDTD(),d.index+d[0].length}}return-1}function qte(n,e,t){var i=n.indexOf("?>",e);if(i){var r=n.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,t.processingInstruction(r[1],r[2]),i+2):-1}return-1}function QL(){this.attributeNames={}}QL.prototype={setTagName:function(n){if(!Sk.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,e,t){if(!Sk.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:e,offset:t}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function Ute(n,e){var t,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(n);t=r.exec(n);)if(i.push(t),t[1])return i}$1.XMLReader=WL;$1.ParseError=Yu;var jte=to,zte=Qo,Ak=HL,KL=$1,Vte=zte.DOMImplementation,kk=jte.NAMESPACE,Hte=KL.ParseError,Wte=KL.XMLReader;function YL(n){return n.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function XL(n){this.options=n||{locator:{}}}XL.prototype.parseFromString=function(n,e){var t=this.options,i=new Wte,r=t.domBuilder||new ap,s=t.errorHandler,a=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),c=l?Ak.HTML_ENTITIES:Ak.XML_ENTITIES;a&&r.setDocumentLocator(a),i.errorHandler=Gte(s,r,a),i.domBuilder=t.domBuilder||r,l&&(o[""]=kk.HTML),o.xml=o.xml||kk.XML;var u=t.normalizeLineEndings||YL;return n&&typeof n=="string"?i.parse(u(n),o,c):i.errorHandler.error("invalid doc source"),r.doc};function Gte(n,e,t){if(!n){if(e instanceof ap)return e;n=e}var i={},r=n instanceof Function;t=t||{};function s(a){var o=n[a];!o&&r&&(o=n.length==2?function(l){n(a,l)}:n),i[a]=o&&function(l){o("[xmldom "+a+"]	"+l+Jx(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),i}function ap(){this.cdata=!1}function qc(n,e){e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber}ap.prototype={startDocument:function(){this.doc=new Vte().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,e,t,i){var r=this.doc,s=r.createElementNS(n,t||e),a=i.length;ym(this,s),this.currentElement=s,this.locator&&qc(this.locator,s);for(var o=0;o<a;o++){var n=i.getURI(o),l=i.getValue(o),t=i.getQName(o),c=r.createAttributeNS(n,t);this.locator&&qc(i.getLocator(o),c),c.value=c.nodeValue=l,s.setAttributeNode(c)}},endElement:function(n,e,t){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(n,e){},endPrefixMapping:function(n){},processingInstruction:function(n,e){var t=this.doc.createProcessingInstruction(n,e);this.locator&&qc(this.locator,t),ym(this,t)},ignorableWhitespace:function(n,e,t){},characters:function(n,e,t){if(n=Nk.apply(this,arguments),n){if(this.cdata)var i=this.doc.createCDATASection(n);else var i=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(n)&&this.doc.appendChild(i),this.locator&&qc(this.locator,i)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,e,t){n=Nk.apply(this,arguments);var i=this.doc.createComment(n);this.locator&&qc(this.locator,i),ym(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,e,t){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(n,e,t);this.locator&&qc(this.locator,r),ym(this,r),this.doc.doctype=r}},warning:function(n){console.warn("[xmldom warning]	"+n,Jx(this.locator))},error:function(n){console.error("[xmldom error]	"+n,Jx(this.locator))},fatalError:function(n){throw new Hte(n,this.locator)}};function Jx(n){if(n)return"\n@"+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function Nk(n,e,t){return typeof n=="string"?n.substr(e,t):n.length>=e+t||e?new java.lang.String(n,e,t)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){ap.prototype[n]=function(){return null}});function ym(n,e){n.currentElement?n.currentElement.appendChild(e):n.doc.appendChild(e)}F0.__DOMHandler=ap;F0.normalizeLineEndings=YL;F0.DOMParser=XL;var Qte=F0.DOMParser;/*! @name mpd-parser @version 1.2.2 @license Apache-2.0 */const Dk=n=>!!n&&typeof n=="object",zn=(...n)=>n.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):Dk(e[i])&&Dk(t[i])?e[i]=zn(e[i],t[i]):e[i]=t[i]}),e),{}),JL=n=>Object.keys(n).map(e=>n[e]),Kte=(n,e)=>{const t=[];for(let i=n;i<e;i++)t.push(i);return t},Xu=n=>n.reduce((e,t)=>e.concat(t),[]),ZL=n=>{if(!n.length)return[];const e=[];for(let t=0;t<n.length;t++)e.push(n[t]);return e},Yte=(n,e)=>n.reduce((t,i,r)=>(i[e]&&t.push(r),t),[]),Xte=(n,e)=>JL(n.reduce((t,i)=>(i.forEach(r=>{t[e(r)]=r}),t),{}));var Ju={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const kf=({baseUrl:n="",source:e="",range:t="",indexRange:i=""})=>{const r={uri:e,resolvedUri:A1(n||"",e)};if(t||i){const a=(t||i).split("-");let o=G.BigInt?G.BigInt(a[0]):parseInt(a[0],10),l=G.BigInt?G.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let c;typeof l=="bigint"||typeof o=="bigint"?c=G.BigInt(l)-G.BigInt(o)+G.BigInt(1):c=l-o+1,typeof c=="bigint"&&c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),r.byterange={length:c,offset:o}}return r},Jte=n=>{let e;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=G.BigInt(n.offset)+G.BigInt(n.length)-G.BigInt(1):e=n.offset+n.length-1,"".concat(n.offset,"-").concat(e)},Pk=n=>(n&&typeof n!="number"&&(n=parseInt(n,10)),isNaN(n)?null:n),Zte={static(n){const{duration:e,timescale:t=1,sourceDuration:i,periodDuration:r}=n,s=Pk(n.endNumber),a=e/t;return typeof s=="number"?{start:0,end:s}:typeof r=="number"?{start:0,end:r/a}:{start:0,end:i/a}},dynamic(n){const{NOW:e,clientOffset:t,availabilityStartTime:i,timescale:r=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=n,c=Pk(n.endNumber),u=(e+t)/1e3,d=i+a,f=u+o-d,m=Math.ceil(f*r/s),g=Math.floor((u-d-l)*r/s),_=Math.floor((u-d)*r/s);return{start:Math.max(0,g),end:typeof c=="number"?c:Math.min(m,_)}}},ene=n=>e=>{const{duration:t,timescale:i=1,periodStart:r,startNumber:s=1}=n;return{number:s+e,duration:t/i,timeline:r,time:e*t}},B1=n=>{const{type:e,duration:t,timescale:i=1,periodDuration:r,sourceDuration:s}=n,{start:a,end:o}=Zte[e](n),l=Kte(a,o).map(ene(n));if(e==="static"){const c=l.length-1,u=typeof r=="number"?r:s;l[c].duration=u-t/i*c}return l},e3=n=>{const{baseUrl:e,initialization:t={},sourceDuration:i,indexRange:r="",periodStart:s,presentationTime:a,number:o=0,duration:l}=n;if(!e)throw new Error(Ju.NO_BASE_URL);const c=kf({baseUrl:e,source:t.sourceURL,range:t.range}),u=kf({baseUrl:e,source:e,indexRange:r});if(u.map=c,l){const d=B1(n);d.length&&(u.duration=d[0].duration,u.timeline=d[0].timeline)}else i&&(u.duration=i,u.timeline=s);return u.presentationTime=a||s,u.number=o,[u]},F1=(n,e,t)=>{const i=n.sidx.map?n.sidx.map:null,r=n.sidx.duration,s=n.timeline||0,a=n.sidx.byterange,o=a.offset+a.length,l=e.timescale,c=e.references.filter(_=>_.referenceType!==1),u=[],d=n.endList?"static":"dynamic",h=n.sidx.timeline;let f=h,m=n.mediaSequence||0,g;typeof e.firstOffset=="bigint"?g=G.BigInt(o)+e.firstOffset:g=o+e.firstOffset;for(let _=0;_<c.length;_++){const v=e.references[_],y=v.referencedSize,T=v.subsegmentDuration;let N;typeof g=="bigint"?N=g+G.BigInt(y)-G.BigInt(1):N=g+y-1;const P="".concat(g,"-").concat(N),$=e3({baseUrl:t,timescale:l,timeline:s,periodStart:h,presentationTime:f,number:m,duration:T,sourceDuration:r,indexRange:P,type:d})[0];i&&($.map=i),u.push($),typeof g=="bigint"?g+=G.BigInt(y):g+=y,f+=T/l,m++}return n.segments=u,n},tne=["AUDIO","SUBTITLES"],nne=1/60,t3=n=>Xte(n,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),ine=(n,e)=>{for(let t=0;t<n.length;t++)if(n[t].attributes.NAME===e)return n[t];return null},Ik=n=>{let e=[];return bte(n,tne,(t,i,r,s)=>{e=e.concat(t.playlists||[])}),e},Rk=({playlist:n,mediaSequence:e})=>{n.mediaSequence=e,n.segments.forEach((t,i)=>{t.number=n.mediaSequence+i})},rne=({oldPlaylists:n,newPlaylists:e,timelineStarts:t})=>{e.forEach(i=>{i.discontinuitySequence=t.findIndex(function({timeline:l}){return l===i.timeline});const r=ine(n,i.attributes.NAME);if(!r||i.sidx)return;const s=i.segments[0],a=r.segments.findIndex(function(l){return Math.abs(l.presentationTime-s.presentationTime)<nne});if(a===-1){Rk({playlist:i,mediaSequence:r.mediaSequence+r.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!r.segments.length&&i.timeline>r.timeline||r.segments.length&&i.timeline>r.segments[r.segments.length-1].timeline)&&i.discontinuitySequence--;return}r.segments[a].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Rk({playlist:i,mediaSequence:r.segments[a].number})})},sne=({oldManifest:n,newManifest:e})=>{const t=n.playlists.concat(Ik(n)),i=e.playlists.concat(Ik(e));return e.timelineStarts=t3([n.timelineStarts,e.timelineStarts]),rne({oldPlaylists:t,newPlaylists:i,timelineStarts:e.timelineStarts}),e},q0=n=>n&&n.uri+"-"+Jte(n.byterange),tw=n=>{const e=n.reduce(function(i,r){return i[r.attributes.baseUrl]||(i[r.attributes.baseUrl]=[]),i[r.attributes.baseUrl].push(r),i},{});let t=[];return Object.values(e).forEach(i=>{const r=JL(i.reduce((s,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return s[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),s[o].segments.push(...a.segments)),a.attributes.contentProtection&&(s[o].attributes.contentProtection=a.attributes.contentProtection)):(s[o]=a,s[o].attributes.timelineStarts=[]),s[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),s},{}));t=t.concat(r)}),t.map(i=>(i.discontinuityStarts=Yte(i.segments||[],"discontinuity"),i))},q1=(n,e)=>{const t=q0(n.sidx),i=t&&e[t]&&e[t].sidx;return i&&F1(n,i,n.sidx.resolvedUri),n},ane=(n,e={})=>{if(!Object.keys(e).length)return n;for(const t in n)n[t]=q1(n[t],e);return n},one=({attributes:n,segments:e,sidx:t,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:s},a)=>{const o={attributes:{NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:n.timelineStarts,mediaSequence:i,segments:e};return n.contentProtection&&(o.contentProtection=n.contentProtection),n.serviceLocation&&(o.attributes.serviceLocation=n.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},lne=({attributes:n,segments:e,mediaSequence:t,discontinuityStarts:i,discontinuitySequence:r})=>{typeof e>"u"&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);const s={NAME:n.id,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1};n.codecs&&(s.CODECS=n.codecs);const a={attributes:s,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:t,segments:e};return n.serviceLocation&&(a.attributes.serviceLocation=n.serviceLocation),a},cne=(n,e={},t=!1)=>{let i;const r=n.reduce((s,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let c=a.attributes.label||"main";if(l&&!a.attributes.label){const d=o?" (".concat(o,")"):"";c="".concat(a.attributes.lang).concat(d)}s[c]||(s[c]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const u=q1(one(a,t),e);return s[c].playlists.push(u),typeof i>"u"&&o==="main"&&(i=a,i.default=!0),s},{});if(!i){const s=Object.keys(r)[0];r[s].default=!0}return r},une=(n,e={})=>n.reduce((t,i)=>{const r=i.attributes.label||i.attributes.lang||"text";return t[r]||(t[r]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),t[r].playlists.push(q1(lne(i),e)),t},{}),dne=n=>n.reduce((e,t)=>(t&&t.forEach(i=>{const{channel:r,language:s}=i;e[s]={autoselect:!1,default:!1,instreamId:r,language:s},i.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[s]["3D"]=i["3D"])}),e),{}),hne=({attributes:n,segments:e,sidx:t,discontinuityStarts:i})=>{const r={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuityStarts:i,timelineStarts:n.timelineStarts,segments:e};return n.frameRate&&(r.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(r.contentProtection=n.contentProtection),n.serviceLocation&&(r.attributes.serviceLocation=n.serviceLocation),t&&(r.sidx=t),r},fne=({attributes:n})=>n.mimeType==="video/mp4"||n.mimeType==="video/webm"||n.contentType==="video",pne=({attributes:n})=>n.mimeType==="audio/mp4"||n.mimeType==="audio/webm"||n.contentType==="audio",mne=({attributes:n})=>n.mimeType==="text/vtt"||n.contentType==="text",gne=(n,e)=>{n.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:i}){return i===t.timeline}),t.segments&&t.segments.forEach((i,r)=>{i.number=r})})},Ok=n=>n?Object.keys(n).reduce((e,t)=>{const i=n[t];return e.concat(i.playlists)},[]):[],yne=({dashPlaylists:n,locations:e,contentSteering:t,sidxMapping:i={},previousManifest:r,eventStream:s})=>{if(!n.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:c}=n[0].attributes,u=tw(n.filter(fne)).map(hne),d=tw(n.filter(pne)),h=tw(n.filter(mne)),f=n.map(N=>N.attributes.captionServices).filter(Boolean),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:ane(u,i)};c>=0&&(m.minimumUpdatePeriod=c*1e3),e&&(m.locations=e),t&&(m.contentSteering=t),o==="dynamic"&&(m.suggestedPresentationDelay=l),s&&s.length>0&&(m.eventStream=s);const g=m.playlists.length===0,_=d.length?cne(d,i,g):null,v=h.length?une(h,i):null,y=u.concat(Ok(_),Ok(v)),T=y.map(({timelineStarts:N})=>N);return m.timelineStarts=t3(T),gne(y,m.timelineStarts),_&&(m.mediaGroups.AUDIO.audio=_),v&&(m.mediaGroups.SUBTITLES.subs=v),f.length&&(m.mediaGroups["CLOSED-CAPTIONS"].cc=dne(f)),r?sne({oldManifest:r,newManifest:m}):m},bne=(n,e,t)=>{const{NOW:i,clientOffset:r,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=n,c=(i+r)/1e3,u=s+o,h=c+l-u;return Math.ceil((h*a-e)/t)},n3=(n,e)=>{const{type:t,minimumUpdatePeriod:i=0,media:r="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=n,c=[];let u=-1;for(let d=0;d<e.length;d++){const h=e[d],f=h.d,m=h.r||0,g=h.t||0;u<0&&(u=g),g&&g>u&&(u=g);let _;if(m<0){const T=d+1;T===e.length?t==="dynamic"&&i>0&&r.indexOf("$Number$")>0?_=bne(n,u,f):_=(s*a-u)/f:_=(e[T].t-u)/f}else _=m+1;const v=o+c.length+_;let y=o+c.length;for(;y<v;)c.push({number:y,duration:f/a,time:u,timeline:l}),u+=f,y++}return c},vne=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,wne=n=>(e,t,i,r)=>{if(e==="$$")return"$";if(typeof n[t]>"u")return e;const s=""+n[t];return t==="RepresentationID"||(i?r=parseInt(r,10):r=1,s.length>=r)?s:"".concat(new Array(r-s.length+1).join("0")).concat(s)},Mk=(n,e)=>n.replace(vne,wne(e)),xne=(n,e)=>!n.duration&&!e?[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodStart}]:n.duration?B1(n):n3(n,e),Ene=(n,e)=>{const t={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=n,r=kf({baseUrl:n.baseUrl,source:Mk(i.sourceURL,t),range:i.range});return xne(n,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=Mk(n.media||"",t),l=n.timescale||1,c=n.presentationTimeOffset||0,u=n.periodStart+(a.time-c)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:A1(n.baseUrl||"",o),map:r,number:a.number,presentationTime:u}})},Tne=(n,e)=>{const{baseUrl:t,initialization:i={}}=n,r=kf({baseUrl:t,source:i.sourceURL,range:i.range}),s=kf({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=r,s},Sne=(n,e)=>{const{duration:t,segmentUrls:i=[],periodStart:r}=n;if(!t&&!e||t&&e)throw new Error(Ju.SEGMENT_TIME_UNSPECIFIED);const s=i.map(l=>Tne(n,l));let a;return t&&(a=B1(n)),e&&(a=n3(n,e)),a.map((l,c)=>{if(s[c]){const u=s[c],d=n.timescale||1,h=n.presentationTimeOffset||0;return u.timeline=l.timeline,u.duration=l.duration,u.number=l.number,u.presentationTime=r+(l.time-h)/d,u}}).filter(l=>l)},_ne=({attributes:n,segmentInfo:e})=>{let t,i;e.template?(i=Ene,t=zn(n,e.template)):e.base?(i=e3,t=zn(n,e.base)):e.list&&(i=Sne,t=zn(n,e.list));const r={attributes:n};if(!i)return r;const s=i(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else s.length?t.duration=s.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return r.attributes=t,r.segments=s,e.base&&t.indexRange&&(r.sidx=s[0],r.segments=[]),r},Cne=n=>n.map(_ne),sn=(n,e)=>ZL(n.childNodes).filter(({tagName:t})=>t===e),op=n=>n.textContent.trim(),Ane=n=>parseFloat(n.split("/").reduce((e,t)=>e/t)),Uc=n=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!o)return 0;const[l,c,u,d,h,f]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(c||0)*2592e3+parseFloat(u||0)*86400+parseFloat(d||0)*3600+parseFloat(h||0)*60+parseFloat(f||0)},kne=n=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)),Lk={mediaPresentationDuration(n){return Uc(n)},availabilityStartTime(n){return kne(n)/1e3},minimumUpdatePeriod(n){return Uc(n)},suggestedPresentationDelay(n){return Uc(n)},type(n){return n},timeShiftBufferDepth(n){return Uc(n)},start(n){return Uc(n)},width(n){return parseInt(n,10)},height(n){return parseInt(n,10)},bandwidth(n){return parseInt(n,10)},frameRate(n){return Ane(n)},startNumber(n){return parseInt(n,10)},timescale(n){return parseInt(n,10)},presentationTimeOffset(n){return parseInt(n,10)},duration(n){const e=parseInt(n,10);return isNaN(e)?Uc(n):e},d(n){return parseInt(n,10)},t(n){return parseInt(n,10)},r(n){return parseInt(n,10)},presentationTime(n){return parseInt(n,10)},DEFAULT(n){return n}},Nn=n=>n&&n.attributes?ZL(n.attributes).reduce((e,t)=>{const i=Lk[t.name]||Lk.DEFAULT;return e[t.name]=i(t.value),e},{}):{},Nne={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},U0=(n,e)=>e.length?Xu(n.map(function(t){return e.map(function(i){const r=op(i),s=A1(t.baseUrl,r),a=zn(Nn(i),{baseUrl:s});return s!==r&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):n,U1=n=>{const e=sn(n,"SegmentTemplate")[0],t=sn(n,"SegmentList")[0],i=t&&sn(t,"SegmentURL").map(d=>zn({tag:"SegmentURL"},Nn(d))),r=sn(n,"SegmentBase")[0],s=t||e,a=s&&sn(s,"SegmentTimeline")[0],o=t||r||e,l=o&&sn(o,"Initialization")[0],c=e&&Nn(e);c&&l?c.initialization=l&&Nn(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});const u={template:c,segmentTimeline:a&&sn(a,"S").map(d=>Nn(d)),list:t&&zn(Nn(t),{segmentUrls:i,initialization:Nn(l)}),base:r&&zn(Nn(r),{initialization:Nn(l)})};return Object.keys(u).forEach(d=>{u[d]||delete u[d]}),u},Dne=(n,e,t)=>i=>{const r=sn(i,"BaseURL"),s=U0(e,r),a=zn(n,Nn(i)),o=U1(i);return s.map(l=>({segmentInfo:zn(t,o),attributes:zn(a,l)}))},Pne=n=>n.reduce((e,t)=>{const i=Nn(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const r=Nne[i.schemeIdUri];if(r){e[r]={attributes:i};const s=sn(t,"cenc:pssh")[0];if(s){const a=op(s);e[r].pssh=a&&wte(a)}}return e},{}),Ine=n=>{if(n.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{let i,r;return r=t,/^CC\d=/.test(t)?[i,r]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:r}});if(n.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{const i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[r,s=""]=t.split("=");i.channel=r,i.language=t,s.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?i.language=l:o==="er"?i.easyReader=Number(l):o==="war"?i.aspectRatio=Number(l):o==="3D"&&(i["3D"]=Number(l))})}else i.language=t;return i.channel&&(i.channel="SERVICE"+i.channel),i})},Rne=n=>Xu(sn(n.node,"EventStream").map(e=>{const t=Nn(e),i=t.schemeIdUri;return sn(e,"Event").map(r=>{const s=Nn(r),a=s.presentationTime||0,o=t.timescale||1,l=s.duration||0,c=a/o+n.attributes.start;return{schemeIdUri:i,value:t.value,id:s.id,start:c,end:c+l/o,messageData:op(r)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),One=(n,e,t)=>i=>{const r=Nn(i),s=U0(e,sn(i,"BaseURL")),a=sn(i,"Role")[0],o={role:Nn(a)};let l=zn(n,r,o);const c=sn(i,"Accessibility")[0],u=Ine(Nn(c));u&&(l=zn(l,{captionServices:u}));const d=sn(i,"Label")[0];if(d&&d.childNodes.length){const _=d.childNodes[0].nodeValue.trim();l=zn(l,{label:_})}const h=Pne(sn(i,"ContentProtection"));Object.keys(h).length&&(l=zn(l,{contentProtection:h}));const f=U1(i),m=sn(i,"Representation"),g=zn(t,f);return Xu(m.map(Dne(l,s,g)))},Mne=(n,e)=>(t,i)=>{const r=U0(e,sn(t.node,"BaseURL")),s=zn(n,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(s.periodDuration=t.attributes.duration);const a=sn(t.node,"AdaptationSet"),o=U1(t.node);return Xu(a.map(One(s,r,o)))},Lne=(n,e)=>{if(n.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!n.length)return null;const t=zn({serverURL:op(n[0])},Nn(n[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},$ne=({attributes:n,priorPeriodAttributes:e,mpdType:t})=>typeof n.start=="number"?n.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,Bne=(n,e={})=>{const{manifestUri:t="",NOW:i=Date.now(),clientOffset:r=0,eventHandler:s=function(){}}=e,a=sn(n,"Period");if(!a.length)throw new Error(Ju.INVALID_NUMBER_OF_PERIOD);const o=sn(n,"Location"),l=Nn(n),c=U0([{baseUrl:t}],sn(n,"BaseURL")),u=sn(n,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=r,o.length&&(l.locations=o.map(op));const d=[];return a.forEach((h,f)=>{const m=Nn(h),g=d[f-1];m.start=$ne({attributes:m,priorPeriodAttributes:g?g.attributes:null,mpdType:l.type}),d.push({node:h,attributes:m})}),{locations:l.locations,contentSteeringInfo:Lne(u,s),representationInfo:Xu(d.map(Mne(l,c))),eventStream:Xu(d.map(Rne))}},i3=n=>{if(n==="")throw new Error(Ju.DASH_EMPTY_MANIFEST);const e=new Qte;let t,i;try{t=e.parseFromString(n,"application/xml"),i=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch(r){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Ju.DASH_INVALID_XML);return i},Fne=n=>{const e=sn(n,"UTCTiming")[0];if(!e)return null;const t=Nn(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ju.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},qne=(n,e={})=>{const t=Bne(i3(n),e),i=Cne(t.representationInfo);return yne({dashPlaylists:i,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},Une=n=>Fne(i3(n));var r3=Math.pow(2,32),jne=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*r3+e.getUint32(4)},zne={getUint64:jne,MAX_UINT32:r3},$k=zne.getUint64,Vne=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;t.version===0?(t.earliestPresentationTime=e.getUint32(i),t.firstOffset=e.getUint32(i+4),i+=8):(t.earliestPresentationTime=$k(n.subarray(i)),t.firstOffset=$k(n.subarray(i+8)),i+=16),i+=2;var r=e.getUint16(i);for(i+=2;r>0;i+=12,r--)t.references.push({referenceType:(n[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(n[i+8]&128),sapType:(n[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return t},Hne=Vne;const Wne=bi(Hne);var Gne=Qe([73,68,51]),Qne=function(e,t){t===void 0&&(t=0),e=Qe(e);var i=e[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(i&16)>>4;return s?r+20:r+10},_h=function n(e,t){return t===void 0&&(t=0),e=Qe(e),e.length-t<10||!tn(e,Gne,{offset:t})?t:(t+=Qne(e,t),n(e,t))},Bk=function(e){return typeof e=="string"?EL(e):e},Kne=function(e){return Array.isArray(e)?e.map(function(t){return Bk(t)}):[Bk(e)]},Yne=function n(e,t,i){i===void 0&&(i=!1),t=Kne(t),e=Qe(e);var r=[];if(!t.length)return r;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(i)break;l=e.length}var c=e.subarray(s+8,l);tn(o,t[0])&&(t.length===1?r.push(c):r.push.apply(r,n(c,t.slice(1),i))),s=l}return r},bm={EBML:Qe([26,69,223,163]),DocType:Qe([66,130]),Segment:Qe([24,83,128,103]),SegmentInfo:Qe([21,73,169,102]),Tracks:Qe([22,84,174,107]),Track:Qe([174]),TrackNumber:Qe([215]),DefaultDuration:Qe([35,227,131]),TrackEntry:Qe([174]),TrackType:Qe([131]),FlagDefault:Qe([136]),CodecID:Qe([134]),CodecPrivate:Qe([99,162]),VideoTrack:Qe([224]),AudioTrack:Qe([225]),Cluster:Qe([31,67,182,117]),Timestamp:Qe([231]),TimestampScale:Qe([42,215,177]),BlockGroup:Qe([160]),BlockDuration:Qe([155]),Block:Qe([161]),SimpleBlock:Qe([163])},Zx=[128,64,32,16,8,4,2,1],Xne=function(e){for(var t=1,i=0;i<Zx.length&&!(e&Zx[i]);i++)t++;return t},oy=function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var s=Xne(e[t]),a=e.subarray(t,t+s);return i&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=Zx[s-1]),{length:s,value:mte(a,{signed:r}),bytes:a}},Fk=function n(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return n(t)}):typeof e=="number"?gte(e):e},Jne=function(e){return Array.isArray(e)?e.map(function(t){return Fk(t)}):[Fk(e)]},Zne=function n(e,t,i){if(i>=t.length)return t.length;var r=oy(t,i,!1);if(tn(e.bytes,r.bytes))return i;var s=oy(t,i+r.length);return n(e,t,i+s.length+s.value+r.length)},qk=function n(e,t){t=Jne(t),e=Qe(e);var i=[];if(!t.length)return i;for(var r=0;r<e.length;){var s=oy(e,r,!1),a=oy(e,r+s.length),o=r+s.length+a.length;a.value===127&&(a.value=Zne(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,c=e.subarray(o,l);tn(t[0],s.bytes)&&(t.length===1?i.push(c):i=i.concat(n(c,t.slice(1))));var u=s.length+a.length+c.length;r+=u}return i},eie=Qe([0,0,0,1]),tie=Qe([0,0,1]),nie=Qe([0,0,3]),iie=function(e){for(var t=[],i=1;i<e.length-2;)tn(e.subarray(i,i+3),nie)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var r=e.length-t.length,s=new Uint8Array(r),a=0;for(i=0;i<r;a++,i++)a===t[0]&&(a++,t.shift()),s[i]=e[a];return s},s3=function(e,t,i,r){r===void 0&&(r=1/0),e=Qe(e),i=[].concat(i);for(var s=0,a,o=0;s<e.length&&(o<r||a);){var l=void 0;if(tn(e.subarray(s),eie)?l=4:tn(e.subarray(s),tie)&&(l=3),!l){s++;continue}if(o++,a)return iie(e.subarray(a,s));var c=void 0;t==="h264"?c=e[s+l]&31:t==="h265"&&(c=e[s+l]>>1&63),i.indexOf(c)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},rie=function(e,t,i){return s3(e,"h264",t,i)},sie=function(e,t,i){return s3(e,"h265",t,i)},Ci={webm:Qe([119,101,98,109]),matroska:Qe([109,97,116,114,111,115,107,97]),flac:Qe([102,76,97,67]),ogg:Qe([79,103,103,83]),ac3:Qe([11,119]),riff:Qe([82,73,70,70]),avi:Qe([65,86,73]),wav:Qe([87,65,86,69]),"3gp":Qe([102,116,121,112,51,103]),mp4:Qe([102,116,121,112]),fmp4:Qe([115,116,121,112]),mov:Qe([102,116,121,112,113,116]),moov:Qe([109,111,111,118]),moof:Qe([109,111,111,102])},Zu={aac:function(e){var t=_h(e);return tn(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=_h(e);return tn(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=qk(e,[bm.EBML,bm.DocType])[0];return tn(t,Ci.webm)},mkv:function(e){var t=qk(e,[bm.EBML,bm.DocType])[0];return tn(t,Ci.matroska)},mp4:function(e){if(Zu["3gp"](e)||Zu.mov(e))return!1;if(tn(e,Ci.mp4,{offset:4})||tn(e,Ci.fmp4,{offset:4})||tn(e,Ci.moof,{offset:4})||tn(e,Ci.moov,{offset:4}))return!0},mov:function(e){return tn(e,Ci.mov,{offset:4})},"3gp":function(e){return tn(e,Ci["3gp"],{offset:4})},ac3:function(e){var t=_h(e);return tn(e,Ci.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=_h(e);return tn(e,Ci.flac,{offset:t})},ogg:function(e){return tn(e,Ci.ogg)},avi:function(e){return tn(e,Ci.riff)&&tn(e,Ci.avi,{offset:8})},wav:function(e){return tn(e,Ci.riff)&&tn(e,Ci.wav,{offset:8})},h264:function(e){return rie(e,7,3).length},h265:function(e){return sie(e,[32,33],3).length}},eE=Object.keys(Zu).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);eE.forEach(function(n){var e=Zu[n];Zu[n]=function(t){return e(Qe(t))}});var aie=Zu,j1=function(e){e=Qe(e);for(var t=0;t<eE.length;t++){var i=eE[t];if(aie[i](e))return i}return""},oie=function(e){return Yne(e,["moof"]).length>0},z1=9e4,V1,H1,j0,W1,a3,o3,l3;V1=function(n){return n*z1};H1=function(n,e){return n*e};j0=function(n){return n/z1};W1=function(n,e){return n/e};a3=function(n,e){return V1(W1(n,e))};o3=function(n,e){return H1(j0(n),e)};l3=function(n,e,t){return j0(t?n:n-e)};var ly={ONE_SECOND_IN_TS:z1,secondsToVideoTs:V1,secondsToAudioTs:H1,videoTsToSeconds:j0,audioTsToSeconds:W1,audioTsToVideoTs:a3,videoTsToAudioTs:o3,metadataTsToSeconds:l3};/**
 * @license
 * Video.js 8.5.2 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var c3="8.5.2";const Da={},jo=function(n,e){return Da[n]=Da[n]||[],e&&(Da[n]=Da[n].concat(e)),Da[n]},lie=function(n,e){jo(n,e)},u3=function(n,e){const t=jo(n).indexOf(e);return t<=-1?!1:(Da[n]=Da[n].slice(),Da[n].splice(t,1),!0)},cie=function(n,e){jo(n,[].concat(e).map(t=>{const i=(...r)=>(u3(n,i),t(...r));return i}))},cy={prefixed:!0},Gm=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],Uk=Gm[0];let Ch;for(let n=0;n<Gm.length;n++)if(Gm[n][1]in De){Ch=Gm[n];break}if(Ch){for(let n=0;n<Ch.length;n++)cy[Uk[n]]=Ch[n];cy.prefixed=Ch[0]!==Uk[0]}let Ui=[];const uie=(n,e)=>(t,i,r)=>{const s=e.levels[i],a=new RegExp("^(".concat(s,")$"));if(t!=="log"&&r.unshift(t.toUpperCase()+":"),r.unshift(n+":"),Ui){Ui.push([].concat(r));const l=Ui.length-1e3;Ui.splice(0,l>0?l:0)}if(!G.console)return;let o=G.console[t];!o&&t==="debug"&&(o=G.console.info||G.console.log),!(!o||!s||!a.test(t))&&o[Array.isArray(r)?"apply":"call"](G.console,r)};function d3(n){let e="info",t;const i=function(...r){t("log",e,r)};return t=uie(n,i),i.createLogger=r=>d3(n+": "+r),i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},i.level=r=>{if(typeof r=="string"){if(!i.levels.hasOwnProperty(r))throw new Error('"'.concat(r,'" in not a valid log level'));e=r}return e},i.history=()=>Ui?[].concat(Ui):[],i.history.filter=r=>(Ui||[]).filter(s=>new RegExp(".*".concat(r,".*")).test(s[0])),i.history.clear=()=>{Ui&&(Ui.length=0)},i.history.disable=()=>{Ui!==null&&(Ui.length=0,Ui=null)},i.history.enable=()=>{Ui===null&&(Ui=[])},i.error=(...r)=>t("error",e,r),i.warn=(...r)=>t("warn",e,r),i.debug=(...r)=>t("debug",e,r),i}const gt=d3("VIDEOJS"),h3=gt.createLogger,die=Object.prototype.toString,f3=function(n){return la(n)?Object.keys(n):[]};function Cu(n,e){f3(n).forEach(t=>e(n[t],t))}function p3(n,e,t=0){return f3(n).reduce((i,r)=>e(i,n[r],r),t)}function la(n){return!!n&&typeof n=="object"}function ed(n){return la(n)&&die.call(n)==="[object Object]"&&n.constructor===Object}function zt(...n){const e={};return n.forEach(t=>{t&&Cu(t,(i,r)=>{if(!ed(i)){e[r]=i;return}ed(e[r])||(e[r]={}),e[r]=zt(e[r],i)})}),e}function m3(n={}){const e=[];for(const t in n)if(n.hasOwnProperty(t)){const i=n[t];e.push(i)}return e}function z0(n,e,t,i=!0){const r=a=>Object.defineProperty(n,e,{value:a,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const a=t();return r(a),a}};return i&&(s.set=r),Object.defineProperty(n,e,s)}var hie=Object.freeze({__proto__:null,each:Cu,reduce:p3,isObject:la,isPlain:ed,merge:zt,values:m3,defineLazyProperty:z0});let G1=!1,g3=null,ca=!1,y3,b3=!1,Au=!1,ku=!1,ua=!1,Q1=null,V0=null,v3=null,uy=!1,H0=!1,dy=!1,W0=!1;const Nf=!!(Td()&&("ontouchstart"in G||G.navigator.maxTouchPoints||G.DocumentTouch&&G.document instanceof G.DocumentTouch)),jc=G.navigator&&G.navigator.userAgentData;jc&&(ca=jc.platform==="Android",Au=!!jc.brands.find(n=>n.brand==="Microsoft Edge"),ku=!!jc.brands.find(n=>n.brand==="Chromium"),ua=!Au&&ku,Q1=V0=(jc.brands.find(n=>n.brand==="Chromium")||{}).version||null,H0=jc.platform==="Windows");if(!ku){const n=G.navigator&&G.navigator.userAgent||"";G1=/iPod/i.test(n),g3=function(){const e=n.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),ca=/Android/i.test(n),y3=function(){const e=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),b3=/Firefox/i.test(n),Au=/Edg/i.test(n),ku=/Chrome/i.test(n)||/CriOS/i.test(n),ua=!Au&&ku,Q1=V0=function(){const e=n.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),v3=function(){const e=/MSIE\s(\d+)\.\d/.exec(n);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(t=11),t}(),uy=/Safari/i.test(n)&&!ua&&!ca&&!Au,H0=/Windows/i.test(n),dy=/iPad/i.test(n)||uy&&Nf&&!/iPhone/i.test(n),W0=/iPhone/i.test(n)&&!dy}const Mi=W0||dy||G1,G0=(uy||Mi)&&!ua;var fie=Object.freeze({__proto__:null,get IS_IPOD(){return G1},get IOS_VERSION(){return g3},get IS_ANDROID(){return ca},get ANDROID_VERSION(){return y3},get IS_FIREFOX(){return b3},get IS_EDGE(){return Au},get IS_CHROMIUM(){return ku},get IS_CHROME(){return ua},get CHROMIUM_VERSION(){return Q1},get CHROME_VERSION(){return V0},get IE_VERSION(){return v3},get IS_SAFARI(){return uy},get IS_WINDOWS(){return H0},get IS_IPAD(){return dy},get IS_IPHONE(){return W0},TOUCH_ENABLED:Nf,IS_IOS:Mi,IS_ANY_SAFARI:G0});function jk(n){return typeof n=="string"&&!!n.trim()}function pie(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Td(){return De===G.document}function Sd(n){return la(n)&&n.nodeType===1}function w3(){try{return G.parent!==G.self}catch(n){return!0}}function x3(n){return function(e,t){if(!jk(e))return De[n](null);jk(t)&&(t=De.querySelector(t));const i=Sd(t)?t:De;return i[n]&&i[n](e)}}function ot(n="div",e={},t={},i){const r=De.createElement(n);return Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];s==="textContent"?Ko(r,a):(r[s]!==a||s==="tabIndex")&&(r[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){r.setAttribute(s,t[s])}),i&&K1(r,i),r}function Ko(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function tE(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function Vh(n,e){return pie(e),n.classList.contains(e)}function Bl(n,...e){return n.classList.add(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n}function Q0(n,...e){return n?(n.classList.remove(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n):(gt.warn("removeClass was called with an element that doesn't exist"),null)}function E3(n,e,t){return typeof t=="function"&&(t=t(n,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(i=>n.classList.toggle(i,t)),n}function T3(n,e){Object.getOwnPropertyNames(e).forEach(function(t){const i=e[t];i===null||typeof i>"u"||i===!1?n.removeAttribute(t):n.setAttribute(t,i===!0?"":i)})}function vo(n){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(n&&n.attributes&&n.attributes.length>0){const i=n.attributes;for(let r=i.length-1;r>=0;r--){const s=i[r].name;let a=i[r].value;t.includes(s)&&(a=a!==null),e[s]=a}}return e}function S3(n,e){return n.getAttribute(e)}function td(n,e,t){n.setAttribute(e,t)}function K0(n,e){n.removeAttribute(e)}function _3(){De.body.focus(),De.onselectstart=function(){return!1}}function C3(){De.onselectstart=function(){return!0}}function nd(n){if(n&&n.getBoundingClientRect&&n.parentNode){const e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(id(n,"height"))),t.width||(t.width=parseFloat(id(n,"width"))),t}}function Df(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};const e=n.offsetWidth,t=n.offsetHeight;let i=0,r=0;for(;n.offsetParent&&n!==De[cy.fullscreenElement];)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{left:i,top:r,width:e,height:t}}function Y0(n,e){const t={x:0,y:0};if(Mi){let u=n;for(;u&&u.nodeName.toLowerCase()!=="html";){const d=id(u,"transform");if(/^matrix/.test(d)){const h=d.slice(7,-1).split(/,\s/).map(Number);t.x+=h[4],t.y+=h[5]}else if(/^matrix3d/.test(d)){const h=d.slice(9,-1).split(/,\s/).map(Number);t.x+=h[12],t.y+=h[13]}u=u.parentNode}}const i={},r=Df(e.target),s=Df(n),a=s.width,o=s.height;let l=e.offsetY-(s.top-r.top),c=e.offsetX-(s.left-r.left);return e.changedTouches&&(c=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,Mi&&(c-=t.x,l-=t.y)),i.y=1-Math.max(0,Math.min(1,l/o)),i.x=Math.max(0,Math.min(1,c/a)),i}function A3(n){return la(n)&&n.nodeType===3}function X0(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function k3(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(e=>{if(typeof e=="function"&&(e=e()),Sd(e)||A3(e))return e;if(typeof e=="string"&&/\S/.test(e))return De.createTextNode(e)}).filter(e=>e)}function K1(n,e){return k3(e).forEach(t=>n.appendChild(t)),n}function N3(n,e){return K1(X0(n),e)}function Pf(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0?!0:!(n.button!==0||n.buttons!==1)}const zo=x3("querySelector"),D3=x3("querySelectorAll");function id(n,e){if(!n||!e)return"";if(typeof G.getComputedStyle=="function"){let t;try{t=G.getComputedStyle(n)}catch(i){return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function P3(n){[...De.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(r=>r.cssText).join(""),i=De.createElement("style");i.textContent=t,n.document.head.appendChild(i)}catch(t){const i=De.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,n.document.head.appendChild(i)}})}var I3=Object.freeze({__proto__:null,isReal:Td,isEl:Sd,isInFrame:w3,createEl:ot,textContent:Ko,prependTo:tE,hasClass:Vh,addClass:Bl,removeClass:Q0,toggleClass:E3,setAttributes:T3,getAttributes:vo,getAttribute:S3,setAttribute:td,removeAttribute:K0,blockTextSelection:_3,unblockTextSelection:C3,getBoundingClientRect:nd,findPosition:Df,getPointerPosition:Y0,isTextNode:A3,emptyEl:X0,normalizeContent:k3,appendContent:K1,insertContent:N3,isSingleLeftClick:Pf,$:zo,$$:D3,computedStyle:id,copyStyleSheetsToWindow:P3});let R3=!1,nE;const mie=function(){if(nE.options.autoSetup===!1)return;const n=Array.prototype.slice.call(De.getElementsByTagName("video")),e=Array.prototype.slice.call(De.getElementsByTagName("audio")),t=Array.prototype.slice.call(De.getElementsByTagName("video-js")),i=n.concat(e,t);if(i&&i.length>0)for(let r=0,s=i.length;r<s;r++){const a=i[r];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&nE(a);else{iE(1);break}}else R3||iE(1)};function iE(n,e){Td()&&(e&&(nE=e),G.setTimeout(mie,n))}function rE(){R3=!0,G.removeEventListener("load",rE)}Td()&&(De.readyState==="complete"?rE():G.addEventListener("load",rE));const O3=function(n){const e=De.createElement("style");return e.className=n,e},M3=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e};var Di=new WeakMap;const gie=3;let yie=gie;function da(){return yie++}function zk(n,e){if(!Di.has(n))return;const t=Di.get(n);t.handlers[e].length===0&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Di.delete(n)}function Y1(n,e,t,i){t.forEach(function(r){n(e,r,i)})}function J0(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){const i=n||G.event;n={};for(const r in i)r!=="layerX"&&r!=="layerY"&&r!=="keyLocation"&&r!=="webkitMovementX"&&r!=="webkitMovementY"&&r!=="path"&&(r==="returnValue"&&i.preventDefault||(n[r]=i[r]));if(n.target||(n.target=n.srcElement||De),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){i.preventDefault&&i.preventDefault(),n.returnValue=!1,i.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),n.cancelBubble=!0,i.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,n.clientX!==null&&n.clientX!==void 0){const r=De.documentElement,s=De.body;n.pageX=n.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),n.pageY=n.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n.fixed_=!0,n}let vm;const bie=function(){if(typeof vm!="boolean"){vm=!1;try{const n=Object.defineProperty({},"passive",{get(){vm=!0}});G.addEventListener("test",null,n),G.removeEventListener("test",null,n)}catch(n){}}return vm},vie=["touchstart","touchmove"];function vr(n,e,t){if(Array.isArray(e))return Y1(vr,n,e,t);Di.has(n)||Di.set(n,{});const i=Di.get(n);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=da()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(r,s){if(i.disabled)return;r=J0(r);const a=i.handlers[r.type];if(a){const o=a.slice(0);for(let l=0,c=o.length;l<c&&!r.isImmediatePropagationStopped();l++)try{o[l].call(n,r,s)}catch(u){gt.error(u)}}}),i.handlers[e].length===1)if(n.addEventListener){let r=!1;bie()&&vie.indexOf(e)>-1&&(r={passive:!0}),n.addEventListener(e,i.dispatcher,r)}else n.attachEvent&&n.attachEvent("on"+e,i.dispatcher)}function pi(n,e,t){if(!Di.has(n))return;const i=Di.get(n);if(!i.handlers)return;if(Array.isArray(e))return Y1(pi,n,e,t);const r=function(a,o){i.handlers[o]=[],zk(a,o)};if(e===void 0){for(const a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&r(n,a);return}const s=i.handlers[e];if(s){if(!t){r(n,e);return}if(t.guid)for(let a=0;a<s.length;a++)s[a].guid===t.guid&&s.splice(a--,1);zk(n,e)}}function _d(n,e,t){const i=Di.has(n)?Di.get(n):{},r=n.parentNode||n.ownerDocument;if(typeof e=="string"?e={type:e,target:n}:e.target||(e.target=n),e=J0(e),i.dispatcher&&i.dispatcher.call(n,e,t),r&&!e.isPropagationStopped()&&e.bubbles===!0)_d.call(null,r,e,t);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){Di.has(e.target)||Di.set(e.target,{});const s=Di.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function Z0(n,e,t){if(Array.isArray(e))return Y1(Z0,n,e,t);const i=function(){pi(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||da(),vr(n,e,i)}function X1(n,e,t){const i=function(){pi(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||da(),vr(n,e,i)}var wie=Object.freeze({__proto__:null,fixEvent:J0,on:vr,off:pi,trigger:_d,one:Z0,any:X1});const Yr=30,Ht=function(n,e,t){e.guid||(e.guid=da());const i=e.bind(n);return i.guid=t?t+"_"+e.guid:e.guid,i},ha=function(n,e){let t=G.performance.now();return function(...r){const s=G.performance.now();s-t>=e&&(n(...r),t=s)}},L3=function(n,e,t,i=G){let r;const s=()=>{i.clearTimeout(r),r=null},a=function(){const o=this,l=arguments;let c=function(){r=null,c=null,t||n.apply(o,l)};!r&&t&&n.apply(o,l),i.clearTimeout(r),r=i.setTimeout(c,e)};return a.cancel=s,a};var xie=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Yr,bind_:Ht,throttle:ha,debounce:L3});let lh;class Xr{on(e,t){const i=this.addEventListener;this.addEventListener=()=>{},vr(this,e,t),this.addEventListener=i}off(e,t){pi(this,e,t)}one(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Z0(this,e,t),this.addEventListener=i}any(e,t){const i=this.addEventListener;this.addEventListener=()=>{},X1(this,e,t),this.addEventListener=i}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=J0(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),_d(this,e)}queueTrigger(e){lh||(lh=new Map);const t=e.type||e;let i=lh.get(this);i||(i=new Map,lh.set(this,i));const r=i.get(t);i.delete(t),G.clearTimeout(r);const s=G.setTimeout(()=>{i.delete(t),i.size===0&&(i=null,lh.delete(this)),this.trigger(e)},0);i.set(t,s)}}Xr.prototype.allowedEvents_={};Xr.prototype.addEventListener=Xr.prototype.on;Xr.prototype.removeEventListener=Xr.prototype.off;Xr.prototype.dispatchEvent=Xr.prototype.trigger;const eb=n=>typeof n.name=="function"?n.name():typeof n.name=="string"?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,Ua=n=>n instanceof Xr||!!n.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof n[e]=="function"),Eie=(n,e)=>{Ua(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))},sE=n=>typeof n=="string"&&/\S/.test(n)||Array.isArray(n)&&!!n.length,hy=(n,e,t)=>{if(!n||!n.nodeName&&!Ua(n))throw new Error("Invalid target for ".concat(eb(e),"#").concat(t,"; must be a DOM node or evented object."))},$3=(n,e,t)=>{if(!sE(n))throw new Error("Invalid event type for ".concat(eb(e),"#").concat(t,"; must be a non-empty string or array."))},B3=(n,e,t)=>{if(typeof n!="function")throw new Error("Invalid listener for ".concat(eb(e),"#").concat(t,"; must be a function."))},nw=(n,e,t)=>{const i=e.length<3||e[0]===n||e[0]===n.eventBusEl_;let r,s,a;return i?(r=n.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):[r,s,a]=e,hy(r,n,t),$3(s,n,t),B3(a,n,t),a=Ht(n,a),{isTargetingSelf:i,target:r,type:s,listener:a}},yl=(n,e,t,i)=>{hy(n,n,e),n.nodeName?wie[e](n,t,i):n[e](t,i)},Tie={on(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=nw(this,n,"on");if(yl(t,"on",i,r),!e){const s=()=>this.off(t,i,r);s.guid=r.guid;const a=()=>this.off("dispose",s);a.guid=r.guid,yl(this,"on","dispose",s),yl(t,"on","dispose",a)}},one(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=nw(this,n,"one");if(e)yl(t,"one",i,r);else{const s=(...a)=>{this.off(t,i,s),r.apply(null,a)};s.guid=r.guid,yl(t,"one",i,s)}},any(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=nw(this,n,"any");if(e)yl(t,"any",i,r);else{const s=(...a)=>{this.off(t,i,s),r.apply(null,a)};s.guid=r.guid,yl(t,"any",i,s)}},off(n,e,t){if(!n||sE(n))pi(this.eventBusEl_,n,e);else{const i=n,r=e;hy(i,this,"off"),$3(r,this,"off"),B3(t,this,"off"),t=Ht(this,t),this.off("dispose",t),i.nodeName?(pi(i,r,t),pi(i,"dispose",t)):Ua(i)&&(i.off(r,t),i.off("dispose",t))}},trigger(n,e){hy(this.eventBusEl_,this,"trigger");const t=n&&typeof n!="string"?n.type:n;if(!sE(t))throw new Error("Invalid event type for ".concat(eb(this),"#trigger; ")+"must be a non-empty string or object with a type key that has a non-empty value.");return _d(this.eventBusEl_,n,e)}};function J1(n,e={}){const{eventBusKey:t}=e;if(t){if(!n[t].nodeName)throw new Error('The eventBusKey "'.concat(t,'" does not refer to an element.'));n.eventBusEl_=n[t]}else n.eventBusEl_=ot("span",{className:"vjs-event-bus"});return Object.assign(n,Tie),n.eventedCallbacks&&n.eventedCallbacks.forEach(i=>{i()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(i){i&&Di.has(i)&&Di.delete(i)}),G.setTimeout(()=>{n.eventBusEl_=null},0)}),n}const Sie={state:{},setState(n){typeof n=="function"&&(n=n());let e;return Cu(n,(t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t}),e&&Ua(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function F3(n,e){return Object.assign(n,Sie),n.state=Object.assign({},n.state,e),typeof n.handleStateChanged=="function"&&Ua(n)&&n.on("statechanged",n.handleStateChanged),n}const Hh=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toLowerCase())},bn=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},q3=function(n,e){return bn(n)===bn(e)};var _ie=Object.freeze({__proto__:null,toLowerCase:Hh,toTitleCase:bn,titleCaseEquals:q3});class xe{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=zt({},this.options_),t=this.options_=zt(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const r=e&&e.id&&e.id()||"no_player";this.id_="".concat(r,"_component_").concat(da())}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(r=>this.addClass(r)),["on","off","one","any","trigger"].forEach(r=>{this[r]=void 0}),t.evented!==!1&&(J1(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),F3(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(i),t.reportTouchActivity!==!1&&this.enableTouchActivity()}on(e,t){}off(e,t){}one(e,t){}any(e,t){}trigger(e,t){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=zt(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return ot(e,t,i)}localize(e,t,i=e){const r=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),a=s&&s[r],o=r&&r.split("-")[0],l=s&&s[o];let c=i;return a&&a[e]?c=a[e]:l&&l[e]&&(c=l[e]),t&&(c=c.replace(/\{(\d+)\}/g,function(u,d){const h=t[d-1];let f=h;return typeof h>"u"&&(f=u),f})),c}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,r)=>i.concat(r),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",r=ot("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=De.createElementNS(i,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const a=De.createElementNS(i,"use");return s.appendChild(a),a.setAttributeNS(null,"href","#vjs-icon-".concat(e)),r.appendChild(s),this.iconIsSet_?t.replaceChild(r,t.querySelector(".vjs-icon-placeholder")):t.appendChild(r),this.iconIsSet_=!0,r}addChild(e,t={},i=this.children_.length){let r,s;if(typeof e=="string"){s=bn(e);const a=t.componentClass||s;t.name=s;const o=xe.getComponent(a);if(!o)throw new Error("Component ".concat(a," does not exist"));if(typeof o!="function")return null;r=new o(this.player_||this,t)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,typeof r.id=="function"&&(this.childIndex_[r.id()]=r),s=s||r.name&&bn(r.name()),s&&(this.childNameIndex_[s]=r,this.childNameIndex_[Hh(s)]=r),typeof r.el=="function"&&r.el()){let a=null;this.children_[i+1]&&(this.children_[i+1].el_?a=this.children_[i+1].el_:Sd(this.children_[i+1])&&(a=this.children_[i+1])),this.contentEl().insertBefore(r.el(),a)}return r}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[bn(e.name())]=null,this.childNameIndex_[Hh(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,i=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const c=this.addChild(o,l);c&&(this[o]=c)};let r;const s=xe.getComponent("Tech");Array.isArray(e)?r=e:r=Object.keys(e),r.concat(Object.keys(this.options_).filter(function(a){return!r.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=xe.getComponent(a.opts.componentClass||bn(a.name));return o&&!s.isTech(o)}).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return zo(e,t||this.contentEl())}$$(e,t){return D3(e,t||this.contentEl())}hasClass(e){return Vh(this.el_,e)}addClass(...e){Bl(this.el_,...e)}removeClass(...e){Q0(this.el_,...e)}toggleClass(e,t){E3(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return S3(this.el_,e)}setAttribute(e,t){td(this.el_,e,t)}removeAttribute(e){K0(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;const r=this.el_.style[e],s=r.indexOf("px");return parseInt(s!==-1?r.slice(0,s):this.el_["offset"+bn(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=id(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const i="offset".concat(bn(e));t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(rt.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const i=10,r=200;let s;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=G.performance.now(),s=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)s=!1;else if(t){const l=o.touches[0].pageX-t.pageX,c=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+c*c)>i&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,s===!0&&G.performance.now()-e<r&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Ht(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const i=function(r){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=Ht(this,e),this.clearTimersOnDispose_(),i=G.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),G.clearTimeout(e)),e}setInterval(e,t){e=Ht(this,e),this.clearTimersOnDispose_();const i=G.setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),G.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=Ht(this,e),t=G.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=Ht(this,t);const i=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),G.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((i,r)=>this[t](r))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error('Illegal component name, "'.concat(e,'"; must be a non-empty string.'));const i=xe.getComponent("Tech"),r=i&&i.isTech(t),s=xe===t||xe.prototype.isPrototypeOf(t.prototype);if(r||!s){let o;throw r?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error('Illegal component, "'.concat(e,'"; ').concat(o,"."))}e=bn(e),xe.components_||(xe.components_={});const a=xe.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0&&l.map(c=>o[c]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return xe.components_[e]=t,xe.components_[Hh(e)]=t,t}static getComponent(e){if(!(!e||!xe.components_))return xe.components_[e]}}xe.registerComponent("Component",xe);function Cie(n,e,t){if(typeof e!="number"||e<0||e>t)throw new Error("Failed to execute '".concat(n,"' on 'TimeRanges': The index provided (").concat(e,") is non-numeric or out of bounds (0-").concat(t,")."))}function Vk(n,e,t,i){return Cie(n,i,t.length-1),t[i][e]}function iw(n){let e;return n===void 0||n.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:n.length,start:Vk.bind(null,"start",0,n),end:Vk.bind(null,"end",1,n)},G.Symbol&&G.Symbol.iterator&&(e[G.Symbol.iterator]=()=>(n||[]).values()),e}function oa(n,e){return Array.isArray(n)?iw(n):n===void 0||e===void 0?iw():iw([[n,e]])}const U3=function(n,e){n=n<0?0:n;let t=Math.floor(n%60),i=Math.floor(n/60%60),r=Math.floor(n/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(r=i=t="-"),r=r>0||a>0?r+":":"",i=((r||s>=10)&&i<10?"0"+i:i)+":",t=t<10?"0"+t:t,r+i+t};let Z1=U3;function j3(n){Z1=n}function z3(){Z1=U3}function nc(n,e=n){return Z1(n,e)}var Aie=Object.freeze({__proto__:null,createTimeRanges:oa,createTimeRange:oa,setFormatTime:j3,resetFormatTime:z3,formatTime:nc});function V3(n,e){let t=0,i,r;if(!e)return 0;(!n||!n.length)&&(n=oa(0,0));for(let s=0;s<n.length;s++)i=n.start(s),r=n.end(s),r>e&&(r=e),t+=r-i;return t/e}function Pi(n){if(n instanceof Pi)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:la(n)&&(typeof n.code=="number"&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=Pi.defaultMessages[this.code]||"")}Pi.prototype.code=0;Pi.prototype.message="";Pi.prototype.status=null;Pi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Pi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let n=0;n<Pi.errorTypes.length;n++)Pi[Pi.errorTypes[n]]=n,Pi.prototype[Pi.errorTypes[n]]=n;function Wh(n){return n!=null&&typeof n.then=="function"}function Js(n){Wh(n)&&n.then(null,e=>{})}const aE=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,r)=>(n[i]&&(t[i]=n[i]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},kie=function(n){const e=n.$$("track"),t=Array.prototype.map.call(e,r=>r.track);return Array.prototype.map.call(e,function(r){const s=aE(r.track);return r.src&&(s.src=r.src),s}).concat(Array.prototype.filter.call(n.textTracks(),function(r){return t.indexOf(r)===-1}).map(aE))},Nie=function(n,e){return n.forEach(function(t){const i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(r=>i.addCue(r))}),e.textTracks()};var Hk={textTracksToJson:kie,jsonToTextTracks:Nie,trackToJson_:aE};const rw="vjs-modal-dialog";class Cd extends xe{constructor(e,t){super(e,t),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=ot("div",{className:"".concat(rw,"-content")},{role:"document"}),this.descEl_=ot("p",{className:"".concat(rw,"-description vjs-control-text"),id:this.el().getAttribute("aria-describedby")}),Ko(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":"".concat(this.id(),"_description"),"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return"".concat(rw," vjs-hidden ").concat(super.buildCSSClass())}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let i=this.getChild("closeButton");if(t&&!i){const r=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),i=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),N3(t,e),this.trigger("modalfill"),r?i.insertBefore(t,r):i.appendChild(t);const s=this.getChild("closeButton");s&&i.appendChild(s.el_)}empty(){this.trigger("beforemodalempty"),X0(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=De.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),rt.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(!rt.isEventKey(e,"Tab"))return;const t=this.focusableEls_(),i=this.el_.querySelector(":focus");let r;for(let s=0;s<t.length;s++)if(i===t[s]){r=s;break}De.activeElement===this.el_&&(r=0),e.shiftKey&&r===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&r===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof G.HTMLAnchorElement||t instanceof G.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof G.HTMLInputElement||t instanceof G.HTMLSelectElement||t instanceof G.HTMLTextAreaElement||t instanceof G.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof G.HTMLIFrameElement||t instanceof G.HTMLObjectElement||t instanceof G.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}}Cd.prototype.options_={pauseOnOpen:!0,temporary:!0};xe.registerComponent("ModalDialog",Cd);class rd extends Xr{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Ua(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,r=this.length;i<r;i++){const s=this[i];if(s.id===e){t=s;break}}return t}}rd.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const n in rd.prototype.allowedEvents_)rd.prototype["on"+n]=null;const sw=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].enabled=!1)};class Die extends rd{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){sw(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&sw(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,sw(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const aw=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].selected=!1)};class Pie extends rd{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){aw(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&aw(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,aw(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class H3 extends rd{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Iie{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,r=this.trackElements_.length;i<r;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class fy{constructor(e){fy.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let i=0;const r=e.length;this.cues_=e,this.length_=e.length;const s=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<r)for(i=t;i<r;i++)s.call(this,i)}getCueById(e){let t=null;for(let i=0,r=this.length;i<r;i++){const s=this[i];if(s.id===e){t=s;break}}return t}}const Rie={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Oie={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Mie={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Wk={disabled:"disabled",hidden:"hidden",showing:"showing"};class eS extends Xr{constructor(e={}){super();const t={id:e.id||"vjs_track_"+da(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const r in t)Object.defineProperty(this,r,{get(){return t[r]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(r){r!==i&&(i=r,this.trigger("labelchange"))}})}}const tS=function(n){const e=["protocol","hostname","port","pathname","search","hash","host"],t=De.createElement("a");t.href=n;const i={};for(let r=0;r<e.length;r++)i[e[r]]=t[e[r]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=G.location.protocol),i.host||(i.host=G.location.host),i},W3=function(n){if(!n.match(/^https?:\/\//)){const e=De.createElement("a");e.href=n,n=e.href}return n},nS=function(n){if(typeof n=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n);if(t)return t.pop().toLowerCase()}return""},tb=function(n,e=G.location){const t=tS(n);return(t.protocol===":"?e.protocol:t.protocol)+t.host!==e.protocol+e.host};var Lie=Object.freeze({__proto__:null,parseUrl:tS,getAbsoluteURL:W3,getFileExtension:nS,isCrossOrigin:tb});const Gk=function(n,e){const t=new G.WebVTT.Parser(G,G.vttjs,G.WebVTT.StringDecoder()),i=[];t.oncue=function(r){e.addCue(r)},t.onparsingerror=function(r){i.push(r)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(n),i.length>0&&(G.console&&G.console.groupCollapsed&&G.console.groupCollapsed("Text Track parsing errors for ".concat(e.src)),i.forEach(r=>gt.error(r)),G.console&&G.console.groupEnd&&G.console.groupEnd()),t.flush()},Qk=function(n,e){const t={uri:n},i=tb(n);i&&(t.cors=i);const r=e.tech_.crossOrigin()==="use-credentials";r&&(t.withCredentials=r),fL(t,Ht(this,function(s,a,o){if(s)return gt.error(s,a);e.loaded_=!0,typeof G.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){gt.error("vttjs failed to load, stopping trying to process ".concat(e.src));return}return Gk(o,e)}):Gk(o,e)}))};class lp extends eS{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=zt(e,{kind:Mie[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=Wk[t.mode]||"disabled";const r=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new fy(this.cues_),a=new fy(this.activeCues_);let o=!1;this.timeupdateHandler=Ht(this,function(c={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){c.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),c.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return r},set(){}},mode:{get(){return i},set(c){Wk[c]&&i!==c&&(i=c,!this.preload_&&i!=="disabled"&&this.cues.length===0&&Qk(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const c=this.tech_.currentTime(),u=[];for(let d=0,h=this.cues.length;d<h;d++){const f=this.cues[d];f.startTime<=c&&f.endTime>=c&&u.push(f)}if(o=!1,u.length!==this.activeCues_.length)o=!0;else for(let d=0;d<u.length;d++)this.activeCues_.indexOf(u[d])===-1&&(o=!0);return this.activeCues_=u,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&Qk(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(t.constructor&&t.constructor.name!=="VTTCue"){t=new G.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const r in e)r in t||(t[r]=e[r]);t.id=e.id,t.originalCue_=e}const i=this.tech_.textTracks();for(let r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}lp.prototype.allowedEvents_={cuechange:"cuechange"};class G3 extends eS{constructor(e={}){const t=zt(e,{kind:Oie[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class Q3 extends eS{constructor(e={}){const t=zt(e,{kind:Rie[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Ja extends Xr{constructor(e={}){super();let t;const i=new lp(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=Ja.NONE,i.addEventListener("loadeddata",()=>{t=Ja.LOADED,this.trigger({type:"load",target:this})})}}Ja.prototype.allowedEvents_={load:"load"};Ja.NONE=0;Ja.LOADING=1;Ja.LOADED=2;Ja.ERROR=3;const Vr={audio:{ListClass:Die,TrackClass:G3,capitalName:"Audio"},video:{ListClass:Pie,TrackClass:Q3,capitalName:"Video"},text:{ListClass:H3,TrackClass:lp,capitalName:"Text"}};Object.keys(Vr).forEach(function(n){Vr[n].getterName="".concat(n,"Tracks"),Vr[n].privateName="".concat(n,"Tracks_")});const sd={remoteText:{ListClass:H3,TrackClass:lp,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Iie,TrackClass:Ja,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ki=Object.assign({},Vr,sd);sd.names=Object.keys(sd);Vr.names=Object.keys(Vr);ki.names=[].concat(sd.names).concat(Vr.names);function $ie(n,e,t,i,r={}){const s=n.textTracks();r.kind=e,t&&(r.label=t),i&&(r.language=i),r.tech=n;const a=new ki.text.TrackClass(r);return s.addTrack(a),a}class st extends xe{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ki.names.forEach(i=>{const r=ki[i];e&&e[r.getterName]&&(this[r.privateName]=e[r.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e["native".concat(i,"Tracks")]===!1&&(this["featuresNative".concat(i,"Tracks")]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ki.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ht(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return oa(0,0)}bufferedPercent(){return V3(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Vr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const i=this["".concat(t,"Tracks")]()||[];let r=i.length;for(;r--;){const s=i[r];t==="text"&&this.removeRemoteTextTrack(s),i.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Pi(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?oa(0,0):oa()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Vr.names.forEach(e=>{const t=Vr[e],i=()=>{this.trigger("".concat(e,"trackchange"))},r=this[t.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),this.on("dispose",()=>{r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!G.WebVTT)if(De.body.contains(this.el())){if(!this.options_["vtt.js"]&&ed(dk)&&Object.keys(dk).length>0){this.trigger("vttjsloaded");return}const e=De.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),G.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),i=o=>e.addTrack(o.track),r=o=>e.removeTrack(o.track);t.on("addtrack",i),t.on("removetrack",r),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),a=()=>{s();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",s),l.mode==="showing"&&l.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",r),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",s)})}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return $ie(this,e,t,i)}createRemoteTextTrack(e){const t=zt(e,{tech:this});return new sd.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const i=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=da();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return st.canPlayType(e.type)}static isTech(e){return e.prototype instanceof st||e instanceof st||e===st}static registerTech(e,t){if(st.techs_||(st.techs_={}),!st.isTech(t))throw new Error("Tech ".concat(e," must be a Tech"));if(!st.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!st.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=bn(e),st.techs_[e]=t,st.techs_[Hh(e)]=t,e!=="Tech"&&st.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(st.techs_&&st.techs_[e])return st.techs_[e];if(e=bn(e),G&&G.videojs&&G.videojs[e])return gt.warn("The ".concat(e," tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)")),G.videojs[e]}}}ki.names.forEach(function(n){const e=ki[n];st.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});st.prototype.featuresVolumeControl=!0;st.prototype.featuresMuteControl=!0;st.prototype.featuresFullscreenResize=!1;st.prototype.featuresPlaybackRate=!1;st.prototype.featuresProgressEvents=!1;st.prototype.featuresSourceset=!1;st.prototype.featuresTimeupdateEvents=!1;st.prototype.featuresNativeTextTracks=!1;st.prototype.featuresVideoFrameCallback=!1;st.withSourceHandlers=function(n){n.registerSourceHandler=function(t,i){let r=n.sourceHandlers;r||(r=n.sourceHandlers=[]),i===void 0&&(i=r.length),r.splice(i,0,t)},n.canPlayType=function(t){const i=n.sourceHandlers||[];let r;for(let s=0;s<i.length;s++)if(r=i[s].canPlayType(t),r)return r;return""},n.selectSourceHandler=function(t,i){const r=n.sourceHandlers||[];let s;for(let a=0;a<r.length;a++)if(s=r[a].canHandleSource(t,i),s)return r[a];return null},n.canPlaySource=function(t,i){const r=n.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){const i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let i=n.selectSourceHandler(t,this.options_);i||(n.nativeSourceHandler?i=n.nativeSourceHandler:gt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};xe.registerComponent("Tech",st);st.registerTech("Tech",st);st.defaultTechOrder_=[];const Fl={},oE={},py={};function Bie(n,e){Fl[n]=Fl[n]||[],Fl[n].push(e)}function Fie(n,e,t){n.setTimeout(()=>wl(e,Fl[e.type],t,n),1)}function qie(n,e){n.forEach(t=>t.setTech&&t.setTech(e))}function Uie(n,e,t){return n.reduceRight(iS(t),e[t]())}function jie(n,e,t,i){return e[t](n.reduce(iS(t),i))}function Kk(n,e,t,i=null){const r="call"+bn(t),s=n.reduce(iS(r),i),a=s===py,o=a?null:e[t](s);return Hie(n,t,o,a),o}const zie={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Vie={setCurrentTime:1,setMuted:1,setVolume:1},Yk={play:1,pause:1};function iS(n){return(e,t)=>e===py?py:t[n]?t[n](e):e}function Hie(n,e,t,i){for(let r=n.length-1;r>=0;r--){const s=n[r];s[e]&&s[e](i,t)}}function Wie(n){oE[n.id()]=null}function Gie(n,e){const t=oE[n.id()];let i=null;if(t==null)return i=e(n),oE[n.id()]=[[e,i]],i;for(let r=0;r<t.length;r++){const[s,a]=t[r];s===e&&(i=a)}return i===null&&(i=e(n),t.push([e,i])),i}function wl(n={},e=[],t,i,r=[],s=!1){const[a,...o]=e;if(typeof a=="string")wl(n,Fl[a],t,i,r,s);else if(a){const l=Gie(i,a);if(!l.setSource)return r.push(l),wl(n,o,t,i,r,s);l.setSource(Object.assign({},n),function(c,u){if(c)return wl(n,o,t,i,r,s);r.push(l),wl(u,n.type===u.type?o:Fl[u.type],t,i,r,s)})}else o.length?wl(n,o,t,i,r,s):s?t(n,r):wl(n,Fl["*"],t,i,r,!0)}const Qie={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},my=function(n=""){const e=nS(n);return Qie[e.toLowerCase()]||""},Kie=(n,e)=>{if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;const t=n.cache_.sources.filter(r=>r.src===e);if(t.length)return t[0].type;const i=n.$$("source");for(let r=0;r<i.length;r++){const s=i[r];if(s.type&&s.src&&s.src===e)return s.type}return my(e)},K3=function(n){if(Array.isArray(n)){let e=[];n.forEach(function(t){t=K3(t),Array.isArray(t)?e=e.concat(t):la(t)&&e.push(t)}),n=e}else typeof n=="string"&&n.trim()?n=[Xk({src:n})]:la(n)&&typeof n.src=="string"&&n.src&&n.src.trim()?n=[Xk(n)]:n=[];return n};function Xk(n){if(!n.type){const e=my(n.src);e&&(n.type=e)}return n}var Yie='<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 16 16" id="vjs-icon-play">\n      <path d="M2 1v14l12-7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-pause">\n       <path d="M10 4H5v16h5V4zm9 0h-5v16h5V4z"/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-audio">\n      <g><rect fill=\'none\' height=\'24\' width=\'24\'/></g><g><path d=\'M12,3c-4.97,0-9,4.03-9,9v7c0,1.1,0.9,2,2,2h4v-8H5v-1c0-3.87,3.13-7,7-7s7,3.13,7,7v1h-4v8h4c1.1,0,2-0.9,2-2v-7 C21,7.03,16.97,3,12,3z\'/></g>\n    </symbol>\n    <symbol viewBox="0 0 576 512" id="vjs-icon-captions">\n      <path d=\'M0 96C0 60.7 28.7 32 64 32H512c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-subtitles">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z\'/>\n    </symbol>\n    <symbol viewBox="0 0 448 512" id="vjs-icon-fullscreen-enter">\n      <path d=\'M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-fullscreen-exit">\n      <path d="M16,9h5a1,1,0,0,0,0-2H17V3a1,1,0,0,0-2,0V8A1,1,0,0,0,16,9ZM8,15H3a1,1,0,0,0,0,2H7v4a1,1,0,0,0,2,0V16A1,1,0,0,0,8,15ZM8,2A1,1,0,0,0,7,3V7H3A1,1,0,0,0,3,9H8A1,1,0,0,0,9,8V3A1,1,0,0,0,8,2ZM21,15H16a1,1,0,0,0-1,1v5a1,1,0,0,0,2,0V17h4a1,1,0,0,0,0-2Z"/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-play-circle">\n      <path d=\'M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c7.6-4.2 16.8-4.1 24.3 .5l144 88c7.1 4.4 11.5 12.1 11.5 20.5s-4.4 16.1-11.5 20.5l-144 88c-7.4 4.5-16.7 4.7-24.3 .5s-12.3-12.2-12.3-20.9V168c0-8.7 4.7-16.7 12.3-20.9z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-volume-mute">\n      <path d=\'M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-volume-low">\n      <path d="M0 0h24v24H0z" fill="none"/><path d="M7 9v6h4l5 5V4l-5 5H7z"/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-volume-medium">\n      <path d="M0 0h24v24H0z" fill="none"/><path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-volume-high">\n      <path d="M0 0h24v24H0z" fill="none"/><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-spinner">\n      <path d=\'M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d=\'M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-chapters">\n      <path d=\'M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-downloading">\n      <path d=\'M18.32,4.26C16.84,3.05,15.01,2.25,13,2.05v2.02c1.46,0.18,2.79,0.76,3.9,1.62L18.32,4.26z M19.93,11h2.02 c-0.2-2.01-1-3.84-2.21-5.32L18.31,7.1C19.17,8.21,19.75,9.54,19.93,11z M18.31,16.9l1.43,1.43c1.21-1.48,2.01-3.32,2.21-5.32 h-2.02C19.75,14.46,19.17,15.79,18.31,16.9z M13,19.93v2.02c2.01-0.2,3.84-1,5.32-2.21l-1.43-1.43 C15.79,19.17,14.46,19.75,13,19.93z M15.59,10.59L13,13.17V7h-2v6.17l-2.59-2.59L7,12l5,5l5-5L15.59,10.59z M11,19.93v2.02 c-5.05-0.5-9-4.76-9-9.95s3.95-9.45,9-9.95v2.02C7.05,4.56,4,7.92,4,12S7.05,19.44,11,19.93z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-file-download">\n      <path d=\'M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-file-download-done">\n      <polygon points=\'20.13,5.41 18.72,4 9.53,13.19 5.28,8.95 3.87,10.36 9.53,16.02\'/><rect height=\'2\' width=\'14\' x=\'5\' y=\'18\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-file-download-off">\n      <path d=\'M18,15.17V15h2v2.17L18,15.17z M15.41,12.59L17,11l-1.41-1.41L14,11.17L15.41,12.59z M13,10.17V4h-2v4.17L13,10.17z M21.19,21.19l-1.78-1.78L2.81,2.81L1.39,4.22l6.19,6.19L7,11l5,5l0.59-0.59L15.17,18H6v-3H4v3c0,1.1,0.9,2,2,2h11.17l2.61,2.61 L21.19,21.19z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-share">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-cog">\n      <path d=\'M0,0h24v24H0V0z\' fill=\'none\'/><path d=\'M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\'/>\n    </symbol>\n    <symbol viewBox="0 0 448 512" id="vjs-icon-square">\n      <path d=\'M384 80c8.8 0 16 7.2 16 16V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16H384zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z\'/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-circle">\n      <path d=\'M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-circle-outline">\n      <path d=\'M12,2C6.47,2,2,6.47,2,12c0,5.53,4.47,10,10,10s10-4.47,10-10C22,6.47,17.53,2,12,2z M12,20c-4.42,0-8-3.58-8-8 c0-4.42,3.58-8,8-8s8,3.58,8,8C20,16.42,16.42,20,12,20z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-circle-inner-circle">\n      <path d=\'M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-cancel">\n      <path d=\'M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-repeat">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-replay">\n      <path d=\'M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d=\'m17.68852 98-8.69633 8.69633 8.69633 8.69634 2.48665-2.48434-4.31928-4.31928h1.3011c4.93015 0 9.07149 1.72189 12.42399 5.16511 3.35251 3.44322 5.02876 7.63753 5.02876 12.58345h3.54972c0-2.95809-.55264-5.7293-1.657-8.3127-1.10435-2.5834-2.62238-4.84095-4.555-6.77357-1.93262-1.93262-4.19017-3.45065-6.77357-4.55501-2.5834-1.10435-5.35462-1.65699-8.31271-1.65699H15.5l4.61508-4.61509zm-8.07929 21.65879v13.86144h11.35631v5.00796H9.60923V143h12.699c.83466 0 1.55075-.29818 2.14693-.89436.59619-.59619.89436-1.30996.89436-2.14462v-7.78117c0-.83466-.29817-1.55075-.89436-2.14693-.59618-.59618-1.31227-.89436-2.14693-.89436h-8.22719v-5.09578h11.26848v-4.38399z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d=\'M42.314792 125.62978c0-4.99676-1.693476-9.23445-5.080438-12.71305-3.386962-3.47861-7.570851-5.21791-12.551676-5.21791h-1.314946l4.363203 4.3632-2.510335 2.51034-8.786174-8.78619L25.2206 97l2.450567 2.45057-4.662053 4.66205h1.374714c2.988489 0 5.787713.55785 8.397671 1.67355 2.609949 1.11571 4.891163 2.64981 6.843654 4.60229 1.952481 1.95248 3.486576 4.2337 4.602275 6.84365 1.115709 2.60995 1.673563 5.40917 1.673563 8.39767zM8.1829433 142v-19.65677H3.17603v-4.5433h9.642939V142Zm13.6299297 0c-1.155923 0-2.126398-.39251-2.911424-1.17755-.778861-.77885-1.168286-1.74624-1.168286-2.90215v-16.04066c0-1.15593.392524-2.1264 1.17755-2.91144.77886-.77885 1.746237-1.16827 2.90216-1.16827h7.695814c1.155914 0 2.126388.39251 2.911425 1.17755.77885.77886 1.168275 1.74623 1.168275 2.90216v16.04066c0 1.15591-.392513 2.12639-1.177549 2.91142-.778851.77885-1.746237 1.16828-2.902151 1.16828Zm.556316-4.63603h6.583172v-15.02074h-6.583172z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d=\'m26.046875 97-8.732422 8.73242 8.732422 8.73242 2.496094-2.49414-4.335938-4.33789h1.306641c4.950749 0 9.108097 1.72991 12.474609 5.1875 3.366504 3.4576 5.050781 7.66818 5.050781 12.63477h3.564454c0-2.97045-.555098-5.75152-1.664063-8.3457-1.108965-2.59419-2.633522-4.86205-4.574219-6.80274-1.940688-1.94069-4.208545-3.46525-6.802734-4.57422-2.59419-1.10897-5.375262-1.66406-8.345703-1.66406h-1.367188l4.634766-4.63477zM2.5546875 117.53125v4.6875H12.851562v5.25H5.8730469v4.6875h6.9785151v5.15625H2.5546875V142H13.361328c1.06088 0 1.950319-.39495 2.667969-1.18555.71765-.79059 1.076172-1.7727 1.076172-2.9414v-16.2168c0-1.1687-.358522-2.14886-1.076172-2.93945-.71765-.79059-1.607089-1.18555-2.667969-1.18555zm22.4824215.14063c-1.148936 0-2.110612.38991-2.884765 1.16406-.780292.78029-1.171875 1.74365-1.171875 2.89258v15.94336c0 1.14892.387966 2.1106 1.162109 2.88476.780302.78029 1.745595 1.17188 2.894531 1.17188h7.648438c1.148936 0 2.110613-.38795 2.884765-1.16211.780294-.78029 1.169922-1.74561 1.169922-2.89453v-15.94336c0-1.14893-.386013-2.11061-1.160156-2.88477-.780293-.78029-1.745595-1.17187-2.894531-1.17187zm.552735 4.51757h6.544922v14.92969h-6.544922z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d=\'m29.50843 97-2.43193 2.42962 4.6253 4.6253h-1.3642c-2.96464 0-5.74198.55386-8.3311 1.66066-2.58912 1.1068-4.85167 2.62819-6.78857 4.56508-1.93689 1.9369-3.45828 4.19945-4.56508 6.78857-1.1068 2.58911-1.66066 5.36646-1.66066 8.3311h3.55757c0-4.95687 1.67996-9.16047 5.03989-12.6113 3.35992-3.45084 7.51042-5.17654 12.45149-5.17654h1.30398l-4.32653 4.32883 2.48984 2.48984 8.71558-8.71558zm-9.78332 21.60945v13.8898h11.38144v5.01905H19.72511V142h12.72711c.83651 0 1.55186-.29884 2.14937-.89634.5975-.59751.89634-1.31286.89634-2.14936v-7.7984c0-.83651-.29884-1.55418-.89634-2.15168-.59751-.5975-1.31286-.89634-2.14937-.89634h-8.2454v-5.10706h11.29111v-4.39137z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d=\'m23.118923 97-2.385761 2.38349 4.537491 4.53749h-1.338298c-2.908354 0-5.632974.54335-8.172936 1.62913-2.539963 1.08579-4.759558 2.57829-6.659682 4.47842-1.900125 1.90012-3.39263 4.11972-4.478415 6.65968-1.085785 2.53996-1.629134 5.26458-1.629134 8.17294h3.490028c0-4.86277 1.648071-8.98656 4.944206-12.37188 3.296134-3.38532 7.367841-5.07826 12.215097-5.07826h1.279222l-4.244383 4.24665 2.442565 2.44257 8.550114-8.55012zm-9.520322 21.44913v4.42161h4.871497V142h4.512496v-23.55087zm18.136328 0c-1.124919 0-2.06632.37811-2.824287 1.13608-.763982.76398-1.147437 1.70845-1.147437 2.83337v15.61197c0 1.12492.380382 2.06631 1.138349 2.82428.763983.76398 1.708456 1.14517 2.833375 1.14517h7.489021c1.12492 0 2.06632-.37811 2.82428-1.13608.76399-.76398 1.14517-1.70845 1.14517-2.83337v-15.61197c0-1.12492-.37811-2.06632-1.13608-2.82429-.76398-.76398-1.70845-1.14516-2.83337-1.14516zm.540773 4.42161h6.407468v14.61676h-6.407468z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d=\'m25.548631 97-2.436697 2.43438 4.634367 4.63436H26.37943c-2.970448 0-5.753239.55495-8.347429 1.66392-2.594191 1.10897-4.861176 2.63334-6.801867 4.57403-1.940693 1.94069-3.465063 4.20767-4.57403 6.80187-1.108967 2.59419-1.663916 5.37698-1.663916 8.34742h3.56454c0-4.96658 1.683258-9.17841 5.049766-12.63601 3.366507-3.4576 7.525145-5.18669 12.475891-5.18669h1.306534l-4.335002 4.33733 2.494714 2.49471 8.73266-8.73266zm-11.552266 20.53092v4.68774h10.296787v5.24934h-6.978237v4.68774h6.978237v5.15652H13.996365V142h10.807333c1.060879 0 1.94879-.39527 2.666443-1.18586.717653-.79059 1.076789-1.77158 1.076789-2.94028v-16.2168c0-1.1687-.359136-2.14969-1.076789-2.94028-.717653-.79059-1.605564-1.18586-2.666443-1.18586zm21.173741.16708c-1.148937 0-2.110436.38851-2.884586 1.16266-.780294.78029-1.171935 1.74493-1.171935 2.89387v15.94296c0 1.14894.388502 2.11043 1.162652 2.88458.780294.78029 1.744932 1.16962 2.893869 1.16962h7.648904c1.14894 0 2.11044-.38619 2.88459-1.16033.78029-.7803 1.16961-1.74493 1.16961-2.89387v-15.94296c0-1.14894-.38618-2.11044-1.16033-2.88459-.78029-.78029-1.74493-1.17194-2.89387-1.17194zm.552317 4.51602h6.541957v14.93115h-6.541957z\'/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" xmlns:sketch=\'http://www.bohemiancoding.com/sketch/ns\' id="vjs-icon-audio-description">\n      <g id=\'Page-1\' stroke=\'none\' stroke-width=\'1\' sketch:type=\'MSPage\'><g id=\'AD\' sketch:type=\'MSArtboardGroup\'><g id=\'g24\' sketch:type=\'MSLayerGroup\' transform=\'translate(226.904216, 162.124958)\'><path d=\'M0.385466989,219.226204 L0.385466989,0.867948105 C50.7660025,-0.149278544 89.4938709,-2.16027378 118.016886,17.9940357 C145.39121,37.3362698 166.750707,74.9591545 162.906445,123.318579 C158.839382,174.474203 121.571663,217.457893 73.1311827,221.793795 C49.0460488,223.949377 1.1583283,221.793795 1.1583283,221.793795 C1.1583283,221.793795 0.318395733,220.441758 0.385466989,219.226204 M49.1404882,164.421786 C80.5703101,165.681697 102.34881,147.788744 105.636072,119.036417 C110.038491,80.5268177 84.4473371,55.4838492 47.5943801,58.2399576 L47.5943801,161.852062 C47.5585317,163.318404 48.1702678,164.071194 49.1404882,164.421786\' id=\'path26\' sketch:type=\'MSShapeGroup\'></path></g><g id=\'g28\' sketch:type=\'MSLayerGroup\' transform=\'translate(383.779991, 168.926023)\'><path d=\'M0,212.402042 C13.3360014,216.111401 17.386874,201.342635 23.2151349,190.99422 C35.936702,168.422877 45.5086182,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77564916,7.35260805 5.41542574,10.3142944 C18.5814362,34.0755999 30.7818519,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id=\'path30\' sketch:type=\'MSShapeGroup\'></path></g><g id=\'g32\' sketch:type=\'MSLayerGroup\' transform=\'translate(425.153705, 168.926023)\'><path d=\'M0,212.402042 C13.3360014,216.111401 17.3841758,201.340502 23.2151349,190.99422 C35.936702,168.422877 45.5066909,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77487823,7.35346107 5.41542574,10.3142944 C18.5814362,34.0755999 30.7822374,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id=\'path34\' sketch:type=\'MSShapeGroup\'></path></g><g id=\'g36\' sketch:type=\'MSLayerGroup\' transform=\'translate(466.260868, 168.926023)\'><path d=\'M0,212.402042 C13.3360014,216.111401 17.3841758,201.340502 23.2151349,190.99422 C35.936702,168.422877 45.5066909,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77487823,7.35303456 5.41542574,10.3142944 C18.5814362,34.0755999 30.7818519,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id=\'path38\' sketch:type=\'MSShapeGroup\'></path></g><path d=\'M4.4765625,383.005158 L72.5800993,383.005158 L91.1530552,354.521486 L155.321745,354.386058 C155.321745,354.386058 155.386889,373.799083 155.386889,383.005158 L204.142681,383.005158 L204.142681,160.308263 L145.326586,160.308263 C139.673713,169.845383 4.4765625,383.005158 4.4765625,383.005158 L4.4765625,383.005158 Z M157.144233,237.722611 L157.144233,308.881058 L116.6914,308.610203 L157.144233,237.722611 L157.144233,237.722611 Z\' id=\'path22\' sketch:type=\'MSShapeGroup\'></path></g></g>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-next-item">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-previous-item">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M6 6h2v12H6zm3.5 6l8.5 6V6z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-shuffle">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-cast">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M0 0h24v24H0z\' fill=\'none\' opacity=\'.1\'/><path d=\'M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-picture-in-picture-enter">\n      <path d=\'M0 0h24v24H0V0z\' fill=\'none\'/><path d=\'M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z\'/>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d=\'M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z\'/><path fill=\'none\' d=\'M-1-3h24v24H-1z\'/>\n    </symbol>\n    <symbol viewBox="0 0 320 512" id="vjs-icon-facebook">\n      <path d=\'M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z\'/>\n    </symbol>\n    <symbol viewBox="0 0 448 512" id="vjs-icon-linkedin">\n      <path d=\'M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z\'/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-twitter">\n      <path d=\'M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\'/>\n    </symbol>\n    <symbol viewBox="0 0 320 512" id="vjs-icon-tumblr">\n      <path d=\'M309.8 480.3c-13.6 14.5-50 31.7-97.4 31.7-120.8 0-147-88.8-147-140.6v-144H17.9c-5.5 0-10-4.5-10-10v-68c0-7.2 4.5-13.6 11.3-16 62-21.8 81.5-76 84.3-117.1.8-11 6.5-16.3 16.1-16.3h70.9c5.5 0 10 4.5 10 10v115.2h83c5.5 0 10 4.4 10 9.9v81.7c0 5.5-4.5 10-10 10h-83.4V360c0 34.2 23.7 53.6 68 35.8 4.8-1.9 9-3.2 12.7-2.2 3.5.9 5.8 3.4 7.4 7.9l22 64.3c1.8 5 3.3 10.6-.4 14.5z\'/>\n    </symbol>\n    <symbol viewBox="0 0 496 512" id="vjs-icon-pinterest">\n      <path d=\'M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z\'/>\n    </symbol>\n  </defs>\n</svg>';class Xie extends xe{constructor(e,t,i){const r=zt({createEl:!1},t);if(super(e,r,i),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let s=0,a=t.playerOptions.techOrder;s<a.length;s++){const o=bn(a[s]);let l=st.getTech(o);if(o||(l=xe.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}}xe.registerComponent("MediaLoader",Xie);class nb extends xe{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&gt.error("Creating a ClickableComponent with an HTML element of ".concat(e," is not supported; use a Button instead.")),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;const r=ot(e,t,i);return this.player_.options_.experimentalSvgIcons||r.appendChild(ot("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=ot("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,Ko(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",i)}buildCSSClass(){return"vjs-control vjs-button ".concat(super.buildCSSClass())}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){rt.isEventKey(e,"Space")||rt.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}xe.registerComponent("ClickableComponent",nb);class lE extends nb{constructor(e,t){super(e,t),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return ot("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn('crossOrigin must be null,  "anonymous" or "use-credentials", given "'.concat(e,'"'));return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(ot("picture",{className:"vjs-poster",tabIndex:-1},{},ot("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Js(this.player_.play()):this.player_.pause())}}lE.prototype.crossorigin=lE.prototype.crossOrigin;xe.registerComponent("PosterImage",lE);const Rr="#222",Jk="#ccc",Jie={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ow(n,e){let t;if(n.length===4)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)t=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function ch(n,e,t){try{n.style[e]=t}catch(i){return}}function Zk(n){return n?"".concat(n,"px"):""}class Zie extends xe{constructor(e,t,i){super(e,t,i);const r=a=>this.updateDisplay(a),s=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",r),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(Ht(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",s),e.on("playerresize",s);const a=G.screen.orientation||G,o=G.screen.orientation?"change":"orientationchange";a.addEventListener(o,s),e.on("dispose",()=>a.removeEventListener(o,s));const l=this.options_.playerOptions.tracks||[];for(let c=0;c<l.length;c++)this.player_.addRemoteTextTrack(l[c],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let r,s,a;for(let o=0;o<t.length;o++){const l=t[o];i&&i.enabled&&i.language&&i.language===l.language&&l.kind in e?l.kind===i.kind?a=l:a||(a=l):i&&!i.enabled?(a=null,r=null,s=null):l.default&&(l.kind==="descriptions"&&!r?r=l:l.kind in e&&!s&&(s=l))}a?a.mode="showing":s?s.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof G.WebVTT=="function"&&G.WebVTT.processCues(G,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let i=null,r=null,s=e.length;for(;s--;){const a=e[s];a.mode==="showing"&&(a.kind==="descriptions"?i=a:r=a)}r?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!G.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),i=e/t,r=this.player_.videoWidth()/this.player_.videoHeight();let s=0,a=0;Math.abs(i-r)>.1&&(i>r?s=Math.round((e-t*r)/2):a=Math.round((t-e/r)/2)),ch(this.el_,"insetInline",Zk(s)),ch(this.el_,"insetBlock",Zk(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),i=e.activeCues;let r=i.length;for(;r--;){const s=i[r];if(!s)continue;const a=s.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&ch(a.firstChild,"color",ow(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&ch(a.firstChild,"backgroundColor",ow(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?ch(a,"backgroundColor",ow(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow="2px 2px 3px ".concat(Rr,", 2px 2px 4px ").concat(Rr,", 2px 2px 5px ").concat(Rr):t.edgeStyle==="raised"?a.firstChild.style.textShadow="1px 1px ".concat(Rr,", 2px 2px ").concat(Rr,", 3px 3px ").concat(Rr):t.edgeStyle==="depressed"?a.firstChild.style.textShadow="1px 1px ".concat(Jk,", 0 1px ").concat(Jk,", -1px -1px ").concat(Rr,", 0 -1px ").concat(Rr):t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow="0 0 4px ".concat(Rr,", 0 0 4px ").concat(Rr,", 0 0 4px ").concat(Rr,", 0 0 4px ").concat(Rr))),t.fontPercent&&t.fontPercent!==1){const o=G.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Jie[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof G.WebVTT!="function"||e.every(i=>!i.activeCues))return;const t=[];for(let i=0;i<e.length;++i){const r=e[i];for(let s=0;s<r.activeCues.length;++s)t.push(r.activeCues[s])}G.WebVTT.processCues(G,t,this.el_);for(let i=0;i<e.length;++i){const r=e[i];for(let s=0;s<r.activeCues.length;++s){const a=r.activeCues[s].displayState;Bl(a,"vjs-text-track-cue","vjs-text-track-cue-"+(r.language?r.language:i)),r.language&&td(a,"lang",r.language)}this.player_.textTrackSettings&&this.updateDisplayState(r)}}}xe.registerComponent("TextTrackDisplay",Zie);class ere extends xe{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=ot("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}xe.registerComponent("LoadingSpinner",ere);class yr extends nb{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);const r=ot(e,t,i);return this.player_.options_.experimentalSvgIcons||r.appendChild(ot("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,t={}){const i=this.constructor.name;return gt.warn("Adding an actionable (user controllable) child to a Button (".concat(i,") is not supported; use a ClickableComponent instead.")),xe.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(rt.isEventKey(e,"Space")||rt.isEventKey(e,"Enter")){e.stopPropagation();return}super.handleKeyDown(e)}}xe.registerComponent("Button",yr);class Y3 extends yr{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){Js(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(!r){this.player_.tech(!0).focus();return}const s=()=>r.focus();Wh(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}Y3.prototype.controlText_="Play Video";xe.registerComponent("BigPlayButton",Y3);class tre extends yr{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return"vjs-close-button ".concat(super.buildCSSClass())}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){rt.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}xe.registerComponent("CloseButton",tre);class X3 extends yr{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),t.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return"vjs-play-control ".concat(super.buildCSSClass())}handleClick(e){this.player_.paused()?Js(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}X3.prototype.controlText_="Play";xe.registerComponent("PlayToggle",X3);class Ad extends xe{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended"],i=>this.updateContent(i)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:"".concat(e," vjs-time-control vjs-control")}),i=ot("span",{className:"vjs-control-text",textContent:"".concat(this.localize(this.labelText_)," ")},{role:"presentation"});return t.appendChild(i),this.contentEl_=ot("span",{className:"".concat(e,"-display")},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=nc(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,gt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=De.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}Ad.prototype.labelText_="Time";Ad.prototype.controlText_="Time";xe.registerComponent("TimeDisplay",Ad);class rS extends Ad{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}rS.prototype.labelText_="Current Time";rS.prototype.controlText_="Current Time";xe.registerComponent("CurrentTimeDisplay",rS);class sS extends Ad{constructor(e,t){super(e,t);const i=r=>this.updateContent(r);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}sS.prototype.labelText_="Duration";sS.prototype.controlText_="Duration";xe.registerComponent("DurationDisplay",sS);class nre extends xe{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}}xe.registerComponent("TimeDivider",nre);class aS extends Ad{constructor(e,t){super(e,t),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(ot("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}}aS.prototype.labelText_="Remaining Time";aS.prototype.controlText_="Remaining Time";xe.registerComponent("RemainingTimeDisplay",aS);class ire extends xe{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ot("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(ot("span",{className:"vjs-control-text",textContent:"".concat(this.localize("Stream Type")," ")})),this.contentEl_.appendChild(De.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}xe.registerComponent("LiveDisplay",ire);class J3 extends yr{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=ot("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}J3.prototype.controlText_="Seek to live, currently playing live";xe.registerComponent("SeekToLive",J3);function cp(n,e,t){return n=Number(n),Math.min(t,Math.max(e,isNaN(n)?e:n))}var rre=Object.freeze({__proto__:null,clamp:cp});class oS extends xe{constructor(e,t){super(e,t),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!ua&&e.preventDefault(),_3(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;C3(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(cp(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=Y0(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){rt.isEventKey(e,"Left")||rt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):rt.isEventKey(e,"Right")||rt.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}xe.registerComponent("Slider",oS);const lw=(n,e)=>cp(n/e*100,0,100).toFixed(2)+"%";class sre extends xe{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=ot("span",{className:"vjs-control-text"}),i=ot("span",{textContent:this.localize("Loaded")}),r=De.createTextNode(": ");return this.percentageEl_=ot("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(r),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,i=this.player_.buffered(),r=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),a=this.partEls_,o=lw(s,r);this.percent_!==o&&(this.el_.style.width=o,Ko(this.percentageEl_,o),this.percent_=o);for(let l=0;l<i.length;l++){const c=i.start(l),u=i.end(l);let d=a[l];d||(d=this.el_.appendChild(ot()),a[l]=d),!(d.dataset.start===c&&d.dataset.end===u)&&(d.dataset.start=c,d.dataset.end=u,d.style.left=lw(c,s),d.style.width=lw(u-c,s))}for(let l=a.length;l>i.length;l--)this.el_.removeChild(a[l-1]);a.length=i.length})}}xe.registerComponent("LoadProgressBar",sre);class are extends xe{constructor(e,t){super(e,t),this.update=ha(Ht(this,this.update),Yr)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){const r=Df(this.el_),s=nd(this.player_.el()),a=e.width*t;if(!s||!r)return;const o=e.left-s.left+a,l=e.width-a+(s.right-e.right);let c=r.width/2;o<c?c+=c-o:l<c&&(c=l),c<0?c=0:c>r.width&&(c=r.width),c=Math.round(c),this.el_.style.right="-".concat(c,"px"),this.write(i)}write(e){Ko(this.el_,e)}updateTime(e,t,i,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;s=(l<1?"":"-")+nc(l,o)}else s=nc(i,a);this.update(e,t,s),r&&r()})}}xe.registerComponent("TimeTooltip",are);class lS extends xe{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=ha(Ht(this,this.update),Yr)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const i=this.getChild("timeTooltip");if(!i)return;const r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,r)}}lS.prototype.options_={children:[]};!Mi&&!ca&&lS.prototype.options_.children.push("timeTooltip");xe.registerComponent("PlayProgressBar",lS);class Z3 extends xe{constructor(e,t){super(e,t),this.update=ha(Ht(this,this.update),Yr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,()=>{this.el_.style.left="".concat(e.width*t,"px")})}}Z3.prototype.options_={children:["timeTooltip"]};xe.registerComponent("MouseTimeDisplay",Z3);const wm=5,eN=12;class cS extends oS{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Ht(this,this.update),this.update=ha(this.update_,Yr),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in De&&"visibilityState"in De&&this.on(De,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){De.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Yr))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(De.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),r=this.player_.liveTracker;let s=this.player_.duration();r&&r.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==i||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[nc(i,s),nc(s,s)],"{1} of {2}")),this.currentTime_=i,this.duration_=s),this.bar&&this.bar.update(nd(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){Pf(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Pf(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i;const r=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())i=r*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(r>=.99){s.seekToLiveEdge();return}const a=s.seekableStart(),o=s.liveCurrentTime();if(i=a+r*s.liveWindow(),i>=o&&(i=o),i<=a&&(i=a+.1),i===1/0)return}this.userSeek_(i)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Js(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+wm)}stepBack(){this.userSeek_(this.player_.currentTime()-wm)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(rt.isEventKey(e,"Space")||rt.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(rt.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(rt.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(rt(e))){e.preventDefault(),e.stopPropagation();const i=(rt.codes[rt(e)]-rt.codes[0])*10/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else rt.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-wm*eN)):rt.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+wm*eN)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in De&&"visibilityState"in De&&this.off(De,"visibilitychange",this.toggleVisibility_),super.dispose()}}cS.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!Mi&&!ca&&cS.prototype.options_.children.splice(1,0,"mouseTimeDisplay");xe.registerComponent("SeekBar",cS);class e$ extends xe{constructor(e,t){super(e,t),this.handleMouseMove=ha(Ht(this,this.handleMouseMove),Yr),this.throttledHandleMouseSeek=ha(Ht(this,this.handleMouseSeek),Yr),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const i=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(!i&&!r)return;const s=t.el(),a=Df(s);let o=Y0(s,e).x;o=cp(o,0,1),r&&r.update(a,o),i&&i.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Js(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}e$.prototype.options_={children:["seekBar"]};xe.registerComponent("ProgressControl",e$);class t$ extends yr{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return"vjs-picture-in-picture-control vjs-hidden ".concat(super.buildCSSClass())}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){De.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in G?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof De.exitPictureInPicture=="function"&&super.show()}}t$.prototype.controlText_="Picture-in-Picture";xe.registerComponent("PictureInPictureToggle",t$);class n$ extends yr{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),De[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return"vjs-fullscreen-control ".concat(super.buildCSSClass())}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}n$.prototype.controlText_="Fullscreen";xe.registerComponent("FullscreenToggle",n$);const ore=function(n,e){e.tech_&&!e.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};class lre extends xe{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}xe.registerComponent("VolumeLevel",lre);class cre extends xe{constructor(e,t){super(e,t),this.update=ha(Ht(this,this.update),Yr)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,r){if(!i){const s=nd(this.el_),a=nd(this.player_.el()),o=e.width*t;if(!a||!s)return;const l=e.left-a.left+o,c=e.width-o+(a.right-e.right);let u=s.width/2;l<u?u+=u-l:c<u&&(u=c),u<0?u=0:u>s.width&&(u=s.width),this.el_.style.right="-".concat(u,"px")}this.write("".concat(r,"%"))}write(e){Ko(this.el_,e)}updateVolume(e,t,i,r,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,i,r.toFixed(0)),s&&s()})}}xe.registerComponent("VolumeLevelTooltip",cre);class i$ extends xe{constructor(e,t){super(e,t),this.update=ha(Ht(this,this.update),Yr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){const r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,r,()=>{i?this.el_.style.bottom="".concat(e.height*t,"px"):this.el_.style.left="".concat(e.width*t,"px")})}}i$.prototype.options_={children:["volumeLevelTooltip"]};xe.registerComponent("MouseVolumeLevelDisplay",i$);class ib extends oS{constructor(e,t){super(e,t),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Pf(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const i=this.el(),r=nd(i),s=this.vertical();let a=Y0(i,e);a=s?a.y:a.x,a=cp(a,0,1),t.update(r,a,s)}Pf(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}ib.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Mi&&!ca&&ib.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");ib.prototype.playerEvent="volumechange";xe.registerComponent("VolumeBar",ib);class r$ extends xe{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||ed(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),ore(this,e),this.throttledHandleMouseMove=ha(Ht(this,this.handleMouseMove),Yr),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:"vjs-volume-control vjs-control ".concat(e)})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}r$.prototype.options_={children:["volumeBar"]};xe.registerComponent("VolumeControl",r$);const ure=function(n,e){e.tech_&&!e.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};class s$ extends yr{constructor(e,t){super(e,t),ure(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return"vjs-mute-control ".concat(super.buildCSSClass())}handleClick(e){const t=this.player_.volume(),i=this.player_.lastVolume_();if(t===0){const r=i<.1?.1:i;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),Mi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),Q0(this.el_,[0,1,2,3].reduce((i,r)=>i+"".concat(r?" ":"","vjs-vol-").concat(r),"")),Bl(this.el_,"vjs-vol-".concat(t))}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}s$.prototype.controlText_="Mute";xe.registerComponent("MuteToggle",s$);class a$ extends xe{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||ed(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:"vjs-volume-panel vjs-control ".concat(e)})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){rt.isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),vr(De,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),pi(De,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){rt.isEventKey(e,"Esc")&&this.handleMouseOut()}}a$.prototype.options_={children:["muteToggle","volumeControl"]};xe.registerComponent("VolumePanel",a$);class dre extends yr{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon("forward-".concat(this.skipTime)),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return"vjs-skip-forward-".concat(this.getSkipForwardTime()," ").concat(super.buildCSSClass())}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()?i.seekableEnd():this.player_.duration();let s;t+this.skipTime<=r?s=t+this.skipTime:s=r,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}xe.registerComponent("SkipForward",dre);class o$ extends yr{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon("replay-".concat(this.skipTime)),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return"vjs-skip-backward-".concat(this.getSkipBackwardTime()," ").concat(super.buildCSSClass())}handleClick(e){const t=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()&&i.seekableStart();let s;r&&t-this.skipTime<=r?s=r:t>=this.skipTime?s=t-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}o$.prototype.controlText_="Skip Backward";xe.registerComponent("SkipBackward",o$);class l$ extends xe{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof xe&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof xe&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=ot(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),vr(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||De.activeElement;if(!this.children().some(i=>i.el()===t)){const i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const i=t.filter(r=>r.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){rt.isEventKey(e,"Left")||rt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(rt.isEventKey(e,"Right")||rt.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}xe.registerComponent("Menu",l$);class uS extends xe{constructor(e,t={}){super(e,t),this.menuButton_=new yr(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=yr.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const r=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),vr(De,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new l$(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=ot("li",{className:"vjs-menu-title",textContent:bn(this.options_.title),tabIndex:-1}),i=new xe(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=yr.prototype.buildCSSClass();return"vjs-menu-button ".concat(e," ").concat(t," ").concat(super.buildCSSClass())}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup","vjs-menu-button ".concat(e," ").concat(super.buildCSSClass())}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),pi(De,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){rt.isEventKey(e,"Esc")||rt.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),rt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(rt.isEventKey(e,"Up")||rt.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(rt.isEventKey(e,"Esc")||rt.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(rt.isEventKey(e,"Esc")||rt.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),rt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Mi&&w3())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}xe.registerComponent("MenuButton",uS);class dS extends uS{constructor(e,t){const i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;const r=Ht(this,this.update);i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),i.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r),i.removeEventListener("labelchange",r)})}}xe.registerComponent("TrackButton",dS);const hre=["Tab","Esc","Up","Down","Right","Left"];class up extends nb{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;const r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i),s=ot("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?r.appendChild(s):r.replaceChild(s,r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){hre.some(t=>rt.isEventKey(e,t))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}xe.registerComponent("MenuItem",up);class dp extends up{constructor(e,t){const i=t.track,r=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected=i.mode==="showing",super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",a)}),r.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof G.Event!="object")try{o=new G.Event("change")}catch(l){}o||(o=De.createEvent("Event"),o.initEvent("change",!0,!0)),r.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let r=0;r<i.length;r++){const s=i[r];this.kinds.indexOf(s.kind)!==-1&&(s===t?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}xe.registerComponent("TextTrackMenuItem",dp);class c$ extends dp{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let i=!0;for(let r=0,s=t.length;r<s;r++){const a=t[r];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let i=!0;for(let r=0,s=t.length;r<s;r++){const a=t[r];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}xe.registerComponent("OffTextTrackMenuItem",c$);class kd extends dS{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=dp){let i;this.label_&&(i="".concat(this.label_," off")),e.push(new c$(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<r.length;s++){const a=r[s];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-".concat(a.kind,"-menu-item")),e.push(o)}}return e}}xe.registerComponent("TextTrackButton",kd);class u$ extends up{constructor(e,t){const i=t.track,r=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=s&&s<r.endTime,super(e,t),this.track=i,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}xe.registerComponent("ChaptersTrackMenuItem",u$);class hS extends kd{constructor(e,t,i){super(e,t,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(r=>{r.selected(this.track_.activeCues[0]===r.cue)})}}buildCSSClass(){return"vjs-chapters-button ".concat(super.buildCSSClass())}buildWrapperCSSClass(){return"vjs-chapters-button ".concat(super.buildWrapperCSSClass())}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(bn(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let i=0,r=t.length;i<r;i++){const s=t[i],a=new u$(this.player_,{track:this.track_,cue:s});e.push(a)}return e}}hS.prototype.kind_="chapters";hS.prototype.controlText_="Chapters";xe.registerComponent("ChaptersButton",hS);class fS extends kd{constructor(e,t,i){super(e,t,i),this.setIcon("audio-description");const r=e.textTracks(),s=Ht(this,this.handleTracksChange);r.addEventListener("change",s),this.on("dispose",function(){r.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let i=!1;for(let r=0,s=t.length;r<s;r++){const a=t[r];if(a.kind!==this.kind_&&a.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return"vjs-descriptions-button ".concat(super.buildCSSClass())}buildWrapperCSSClass(){return"vjs-descriptions-button ".concat(super.buildWrapperCSSClass())}}fS.prototype.kind_="descriptions";fS.prototype.controlText_="Descriptions";xe.registerComponent("DescriptionsButton",fS);class pS extends kd{constructor(e,t,i){super(e,t,i),this.setIcon("subtitles")}buildCSSClass(){return"vjs-subtitles-button ".concat(super.buildCSSClass())}buildWrapperCSSClass(){return"vjs-subtitles-button ".concat(super.buildWrapperCSSClass())}}pS.prototype.kind_="subtitles";pS.prototype.controlText_="Subtitles";xe.registerComponent("SubtitlesButton",pS);class mS extends dp{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}xe.registerComponent("CaptionSettingsMenuItem",mS);class gS extends kd{constructor(e,t,i){super(e,t,i),this.setIcon("captions")}buildCSSClass(){return"vjs-captions-button ".concat(super.buildCSSClass())}buildWrapperCSSClass(){return"vjs-captions-button ".concat(super.buildWrapperCSSClass())}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new mS(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}gS.prototype.kind_="captions";gS.prototype.controlText_="Captions";xe.registerComponent("CaptionsButton",gS);class d$ extends dp{createEl(e,t,i){const r=super.createEl(e,t,i),s=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",r):s.appendChild(ot("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(ot("span",{className:"vjs-control-text",textContent:" ".concat(this.localize("Captions"))}))),r}}xe.registerComponent("SubsCapsMenuItem",d$);class yS extends kd{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(bn(this.label_))}buildCSSClass(){return"vjs-subs-caps-button ".concat(super.buildCSSClass())}buildWrapperCSSClass(){return"vjs-subs-caps-button ".concat(super.buildWrapperCSSClass())}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new mS(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,d$),e}}yS.prototype.kinds_=["captions","subtitles"];yS.prototype.controlText_="Subtitles";xe.registerComponent("SubsCapsButton",yS);class h$ extends up{constructor(e,t){const i=t.track,r=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass("vjs-".concat(i.kind,"-menu-item"));const s=(...a)=>{this.handleTracksChange.apply(this,a)};r.addEventListener("change",s),this.on("dispose",()=>{r.removeEventListener("change",s)})}createEl(e,t,i){const r=super.createEl(e,t,i),s=r.querySelector(".vjs-menu-item-text");return["main-desc","description"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(ot("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(ot("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const r=t[i];r!==this.track&&(r.enabled=r===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}xe.registerComponent("AudioTrackMenuItem",h$);class f$ extends dS{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return"vjs-audio-button ".concat(super.buildCSSClass())}buildWrapperCSSClass(){return"vjs-audio-button ".concat(super.buildWrapperCSSClass())}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const r=t[i];e.push(new h$(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}}f$.prototype.controlText_="Audio Track";xe.registerComponent("AudioTrackButton",f$);class bS extends up{constructor(e,t){const i=t.rate,r=parseFloat(i,10);t.label=i,t.selected=r===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=r,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}bS.prototype.contentElType="button";xe.registerComponent("PlaybackRateMenuItem",bS);class p$ extends uS{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=ot("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return"vjs-playback-rate ".concat(super.buildCSSClass())}buildWrapperCSSClass(){return"vjs-playback-rate ".concat(super.buildWrapperCSSClass())}createItems(){const e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new bS(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}p$.prototype.controlText_="Playback Rate";xe.registerComponent("PlaybackRateMenuButton",p$);class m$ extends xe{buildCSSClass(){return"vjs-spacer ".concat(super.buildCSSClass())}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}}xe.registerComponent("Spacer",m$);class fre extends m${buildCSSClass(){return"vjs-custom-control-spacer ".concat(super.buildCSSClass())}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}xe.registerComponent("CustomControlSpacer",fre);class g$ extends xe{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}g$.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};xe.registerComponent("ControlBar",g$);class y$ extends Cd{constructor(e,t){super(e,t),this.on(e,"error",i=>this.open(i))}buildCSSClass(){return"vjs-error-display ".concat(super.buildCSSClass())}content(){const e=this.player().error();return e?this.localize(e.message):""}}y$.prototype.options_=Object.assign({},Cd.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});xe.registerComponent("ErrorDisplay",y$);const cw="vjs-text-track-settings",tN=["#000","Black"],nN=["#00F","Blue"],iN=["#0FF","Cyan"],rN=["#0F0","Green"],sN=["#F0F","Magenta"],aN=["#F00","Red"],oN=["#FFF","White"],lN=["#FF0","Yellow"],uw=["1","Opaque"],dw=["0.5","Semi-Transparent"],cN=["0","Transparent"],xl={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[tN,oN,aN,rN,nN,lN,sN,iN]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[uw,dw,cN]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[oN,tN,aN,rN,nN,lN,sN,iN]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>n==="1.00"?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[uw,dw]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[cN,dw,uw]}};xl.windowColor.options=xl.backgroundColor.options;function b$(n,e){if(e&&(n=e(n)),n&&n!=="none")return n}function pre(n,e){const t=n.options[n.options.selectedIndex].value;return b$(t,e)}function mre(n,e,t){if(e){for(let i=0;i<n.options.length;i++)if(b$(n.options[i].value,t)===e){n.selectedIndex=i;break}}}class gre extends Cd{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=ot("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),Cu(xl,i=>{this.on(this.$(i.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",i="label"){const r=xl[e],s=r.id.replace("%s",this.id_),a=[t,s].join(" ").trim();return["<".concat(i,' id="').concat(s,'" class="').concat(i==="label"?"vjs-label":"",'">'),this.localize(r.label),"</".concat(i,">"),'<select aria-labelledby="'.concat(a,'">')].concat(r.options.map(o=>{const l=s+"-"+o[1].replace(/\W+/g,"");return['<option id="'.concat(l,'" value="').concat(o[0],'" '),'aria-labelledby="'.concat(a," ").concat(l,'">'),this.localize(o[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e="captions-text-legend-".concat(this.id_);return['<fieldset class="vjs-fg vjs-track-setting">','<legend id="'.concat(e,'">'),this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e="captions-background-".concat(this.id_);return['<fieldset class="vjs-bg vjs-track-setting">','<legend id="'.concat(e,'">'),this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e="captions-window-".concat(this.id_);return['<fieldset class="vjs-window vjs-track-setting">','<legend id="'.concat(e,'">'),this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return ot("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return ot("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return ot("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'.concat(e,'">'),this.localize("Reset"),'<span class="vjs-control-text"> '.concat(e,"</span>"),"</button>",'<button type="button" class="vjs-done-button">'.concat(this.localize("Done"),"</button>")].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return p3(xl,(e,t,i)=>{const r=pre(this.$(t.selector),t.parser);return r!==void 0&&(e[i]=r),e},{})}setValues(e){Cu(xl,(t,i)=>{mre(this.$(t.selector),e[i],t.parser)})}setDefaults(){Cu(xl,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(G.localStorage.getItem(cw))}catch(t){gt.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?G.localStorage.setItem(cw,JSON.stringify(e)):G.localStorage.removeItem(cw)}catch(t){gt.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()}handleLanguagechange(){this.fill()}}xe.registerComponent("TextTrackSettings",gre);class yre extends xe{constructor(e,t){let i=t.ResizeObserver||G.ResizeObserver;t.ResizeObserver===null&&(i=!1);const r=zt({createEl:!i,reportTouchActivity:!1},t);super(e,r),this.ResizeObserver=t.ResizeObserver||G.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=L3(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let a=this.unloadListener_=function(){pi(this,"resize",s),pi(this,"unload",a),a=null};vr(this.el_.contentWindow,"unload",a),vr(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}xe.registerComponent("ResizeManager",yre);const bre={trackingThreshold:20,liveTolerance:15};class vre extends xe{constructor(e,t){const i=zt(bre,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=r=>this.handlePlay(r),this.handleFirstTimeupdate_=r=>this.handleFirstTimeupdate(r),this.handleSeeked_=r=>this.handleSeeked(r),this.seekToLiveEdge_=r=>this.seekToLiveEdge(r),this.reset_(),this.on(this.player_,"durationchange",r=>this.handleDurationchange(r)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(G.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;const r=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||r===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Yr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}xe.registerComponent("LiveTracker",vre);class wre extends xe{constructor(e,t){super(e,t),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:ot("div",{className:"vjs-title-bar-title",id:"vjs-title-bar-title-".concat(da())}),description:ot("div",{className:"vjs-title-bar-description",id:"vjs-title-bar-description-".concat(da())})},ot("div",{className:"vjs-title-bar"},{},m3(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(r=>{const s=this.state[r],a=this.els[r],o=i[r];X0(a),s&&Ko(a,s),t&&(t.removeAttribute(o),s&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}xe.registerComponent("TitleBar",wre);const cE=n=>{const e=n.el();if(e.hasAttribute("src"))return n.triggerSourceset(e.src),!0;const t=n.$$("source"),i=[];let r="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const a=t[s].src;a&&i.indexOf(a)===-1&&i.push(a)}return i.length?(i.length===1&&(r=i[0]),n.triggerSourceset(r),!0):!1},xre=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){const e=De.createElement(this.nodeName.toLowerCase());e.innerHTML=n;const t=De.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",G.Element.prototype.appendChild.call(this,t),this.innerHTML}}),v$=(n,e)=>{let t={};for(let i=0;i<n.length&&(t=Object.getOwnPropertyDescriptor(n[i],e),!(t&&t.set&&t.get));i++);return t.enumerable=!0,t.configurable=!0,t},Ere=n=>v$([n.el(),G.HTMLMediaElement.prototype,G.Element.prototype,xre],"innerHTML"),uN=function(n){const e=n.el();if(e.resetSourceWatch_)return;const t={},i=Ere(n),r=s=>(...a)=>{const o=s.apply(e,a);return cE(n),o};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(t[s]=e[s],e[s]=r(t[s]))}),Object.defineProperty(e,"innerHTML",zt(i,{set:r(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",i)},n.one("sourceset",e.resetSourceWatch_)},Tre=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?W3(G.Element.prototype.getAttribute.call(this,"src")):""},set(n){return G.Element.prototype.setAttribute.call(this,"src",n),n}}),Sre=n=>v$([n.el(),G.HTMLMediaElement.prototype,Tre],"src"),_re=function(n){if(!n.featuresSourceset)return;const e=n.el();if(e.resetSourceset_)return;const t=Sre(n),i=e.setAttribute,r=e.load;Object.defineProperty(e,"src",zt(t,{set:s=>{const a=t.set.call(e,s);return n.triggerSourceset(e.src),a}})),e.setAttribute=(s,a)=>{const o=i.call(e,s,a);return/src/i.test(s)&&n.triggerSourceset(e.src),o},e.load=()=>{const s=r.call(e);return cE(n)||(n.triggerSourceset(""),uN(n)),s},e.currentSrc?n.triggerSourceset(e.currentSrc):cE(n)||uN(n),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=i,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Be extends st{constructor(e,t){super(e,t);const i=e.source;let r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let a=s.length;const o=[];for(;a--;){const l=s[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!r&&!this.el_.hasAttribute("crossorigin")&&tb(l.src)&&(r=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&gt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Nf||W0)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Be.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){_re(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const i=()=>{t=[];for(let s=0;s<e.length;s++){const a=e[s];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));const r=()=>{for(let s=0;s<t.length;s++){const a=t[s];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",r)})}overrideNative_(e,t){if(t!==this["featuresNative".concat(e,"Tracks")])return;const i=e.toLowerCase();this["".concat(i,"TracksListeners_")]&&Object.keys(this["".concat(i,"TracksListeners_")]).forEach(r=>{this.el()["".concat(i,"Tracks")].removeEventListener(r,this["".concat(i,"TracksListeners_")][r])}),this["featuresNative".concat(e,"Tracks")]=!t,this["".concat(i,"TracksListeners_")]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Vr[e],i=this.el()[t.getterName],r=this[t.getterName]();if(!this["featuresNative".concat(t.capitalName,"Tracks")]||!i||!i.addEventListener)return;const s={change:o=>{const l={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(l),e==="text"&&this[sd.remoteText.getterName]().trigger(l)},addtrack(o){r.addTrack(o.track)},removetrack(o){r.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<r.length;l++){let c=!1;for(let u=0;u<i.length;u++)if(i[u]===r[l]){c=!0;break}c||o.push(r[l])}for(;o.length;)r.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(o=>{const l=s[o];i.addEventListener(o,l),this.on("dispose",c=>i.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){Vr.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),Be.disposeMediaElement(e),e=i}else{e=De.createElement("video");const i=this.options_.tag&&vo(this.options_.tag),r=zt({},i);(!Nf||this.options_.nativeControlsForTouch!==!0)&&delete r.controls,T3(e,Object.assign(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&td(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){const r=t[i],s=this.options_[r];typeof s<"u"&&(s?td(e,r,r):K0(e,r),e[r]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1;const r=function(){i=!0};this.on("loadstart",r);const s=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",s),i||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&G0?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){gt(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&ca&&ua&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Js(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}reset(){Be.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=De.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let i=t.length;for(;i--;)(e===t[i]||e===t[i].track)&&this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),G.performance&&(e.creationTime=G.performance.now()),e}}z0(Be,"TEST_VID",function(){if(!Td())return;const n=De.createElement("video"),e=De.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n});Be.isSupported=function(){try{Be.TEST_VID.volume=.5}catch(n){return!1}return!!(Be.TEST_VID&&Be.TEST_VID.canPlayType)};Be.canPlayType=function(n){return Be.TEST_VID.canPlayType(n)};Be.canPlaySource=function(n,e){return Be.canPlayType(n.type)};Be.canControlVolume=function(){try{const n=Be.TEST_VID.volume;Be.TEST_VID.volume=n/2+.1;const e=n!==Be.TEST_VID.volume;return e&&Mi?(G.setTimeout(()=>{Be&&Be.prototype&&(Be.prototype.featuresVolumeControl=n!==Be.TEST_VID.volume)}),!1):e}catch(n){return!1}};Be.canMuteVolume=function(){try{const n=Be.TEST_VID.muted;return Be.TEST_VID.muted=!n,Be.TEST_VID.muted?td(Be.TEST_VID,"muted","muted"):K0(Be.TEST_VID,"muted","muted"),n!==Be.TEST_VID.muted}catch(n){return!1}};Be.canControlPlaybackRate=function(){if(ca&&ua&&V0<58)return!1;try{const n=Be.TEST_VID.playbackRate;return Be.TEST_VID.playbackRate=n/2+.1,n!==Be.TEST_VID.playbackRate}catch(n){return!1}};Be.canOverrideAttributes=function(){try{const n=()=>{};Object.defineProperty(De.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(De.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(De.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(De.createElement("audio"),"innerHTML",{get:n,set:n})}catch(n){return!1}return!0};Be.supportsNativeTextTracks=function(){return G0||Mi&&ua};Be.supportsNativeVideoTracks=function(){return!!(Be.TEST_VID&&Be.TEST_VID.videoTracks)};Be.supportsNativeAudioTracks=function(){return!!(Be.TEST_VID&&Be.TEST_VID.audioTracks)};Be.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,e]){z0(Be.prototype,n,()=>Be[e](),!0)});Be.prototype.featuresVolumeControl=Be.canControlVolume();Be.prototype.movingMediaElementInDOM=!Mi;Be.prototype.featuresFullscreenResize=!0;Be.prototype.featuresProgressEvents=!0;Be.prototype.featuresTimeupdateEvents=!0;Be.prototype.featuresVideoFrameCallback=!!(Be.TEST_VID&&Be.TEST_VID.requestVideoFrameCallback);Be.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch(e){}}()}};Be.resetMediaElement=function(n){if(!n)return;const e=n.querySelectorAll("source");let t=e.length;for(;t--;)n.removeChild(e[t]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch(i){}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){Be.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){Be.prototype["set"+bn(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){Be.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){Be.prototype["set"+bn(n)]=function(e){this.el_[n]=e}});["pause","load","play"].forEach(function(n){Be.prototype[n]=function(){return this.el_[n]()}});st.withSourceHandlers(Be);Be.nativeSourceHandler={};Be.nativeSourceHandler.canPlayType=function(n){try{return Be.TEST_VID.canPlayType(n)}catch(e){return""}};Be.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return Be.nativeSourceHandler.canPlayType(n.type);if(n.src){const t=nS(n.src);return Be.nativeSourceHandler.canPlayType("video/".concat(t))}return""};Be.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)};Be.nativeSourceHandler.dispose=function(){};Be.registerSourceHandler(Be.nativeSourceHandler);st.registerTech("Html5",Be);const w$=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],hw={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},uE=["tiny","xsmall","small","medium","large","xlarge","huge"],Qm={};uE.forEach(n=>{const e=n.charAt(0)==="x"?"x-".concat(n.substring(1)):n;Qm[n]="vjs-layout-".concat(e)});const Cre={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Wt extends xe{constructor(e,t,i){if(e.id=e.id||t.id||"vjs_video_".concat(da()),t=Object.assign(Wt.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.isFullscreen_=!1,this.log=h3(this.id_),this.fsApi_=cy,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&vo(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=Wt.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error('plugin "'.concat(a,'" does not exist'))}),this.scrubbing_=!1,this.el_=this.createEl(),J1(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(vr(De,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const r=zt(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new G.DOMParser().parseFromString(Yie,"image/svg+xml");if(o.querySelector("parsererror"))gt.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const c=o.documentElement;c.style.display="none",this.el_.appendChild(c),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Nf&&this.addClass("vjs-touch-enabled"),Mi||this.addClass("vjs-workinghover"),Wt.players[this.id_]=this;const s=c3.split(".")[0];this.addClass("vjs-v".concat(s)),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),pi(De,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),pi(De,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Wt.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Wie(this),ki.names.forEach(e=>{const t=ki[e],i=this[t.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const r=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:r||(t=this.el_=super.createEl("div"));const s=vo(e);if(r){for(t=this.el_=e,e=this.tag=De.createElement("video");t.children.length;)e.appendChild(t.firstChild);Vh(t,"video-js")||Bl(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(o=>{try{e[o]=t[o]}catch(l){}})}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",ua&&H0&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(o){r&&o==="class"||t.setAttribute(o,s[o]),r&&e.setAttribute(o,s[o])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),G.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=O3("vjs-styles-dimensions");const o=zo(".vjs-styles-defaults"),l=zo("head");l.insertBefore(this.styleEl_,o?o.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const a=e.getElementsByTagName("a");for(let o=0;o<a.length;o++){const l=a.item(o);Bl(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),tE(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){gt.warn('crossOrigin must be null,  "anonymous" or "use-credentials", given "'.concat(e,'"'));return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const i=e+"_";if(t===void 0)return this[i]||0;if(t===""||t==="auto"){this[i]=void 0,this.updateStyleEl_();return}const r=parseFloat(t);if(isNaN(r)){gt.error('Improper value "'.concat(t,'" supplied for for ').concat(e));return}this[i]=r,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Ua(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Eie(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(G.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(o>=0&&(c.width=o),l>=0&&(c.height=l));return}let e,t,i,r;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";const s=i.split(":"),a=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?r="dimensions-"+this.id():r=this.id()+"-dimensions",this.addClass(r),M3(this.styleEl_,"\n      .".concat(r," {\n        width: ").concat(e,"px;\n        height: ").concat(t,"px;\n      }\n\n      .").concat(r,".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ").concat(a*100,"%;\n      }\n    "))}loadTech_(e,t){this.tech_&&this.unloadTech_();const i=bn(e),r=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(st.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const a={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:"".concat(this.id(),"_").concat(r,"_api"),playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ki.names.forEach(l=>{const c=ki[l];a[c.getterName]=this[c.privateName]}),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[r]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=st.getTech(e);if(!o)throw new Error("No Tech named '".concat(i,"' exists! '").concat(i,"' should be registered using videojs.registerTech()'"));this.tech_=new o(a),this.tech_.ready(Ht(this,this.handleTechReady_),!0),Hk.jsonToTextTracks(this.textTracksJson_||[],this.tech_),w$.forEach(l=>{this.on(this.tech_,l,c=>this["handleTech".concat(bn(l),"_")](c))}),Object.keys(hw).forEach(l=>{this.on(this.tech_,l,c=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this["handleTech".concat(hw[l],"_")].bind(this),event:c});return}this["handleTech".concat(hw[l],"_")](c)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,c)=>this.handleTechFullscreenChange_(l,c)),this.on(this.tech_,"fullscreenerror",(l,c)=>this.handleTechFullscreenError_(l,c)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&tE(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ki.names.forEach(e=>{const t=ki[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=Hk.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&gt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const r=this.muted();this.muted(!0);const s=()=>{this.muted(r)};this.playTerminatedQueue_.push(s);const a=this.play();if(Wh(a))return a.catch(o=>{throw s(),new Error("Rejection at manualAutoplay. Restoring muted value. ".concat(o||""))})};let i;if(e==="any"&&!this.muted()?(i=this.play(),Wh(i)&&(i=i.catch(t))):e==="muted"&&!this.muted()?i=t():i=this.play(),!!Wh(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,i="";typeof t!="string"&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=Kie(this,t)),this.cache_.source=zt({},e,{src:t,type:i});const r=this.cache_.sources.filter(l=>l.src&&l.src===t),s=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const c=vo(a[l]);s.push(c),c.src&&c.src===t&&o.push(c.src)}o.length&&!r.length?this.cache_.sources=s:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(t=()=>{}),t(r),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Js(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const i=this.el();let r=De[this.fsApi_.fullscreenElement]===i;!r&&i.matches&&(r=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in Vie)return jie(this.middleware_,this.tech_,e,t);if(e in Yk)return Kk(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw gt(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in zie)return Uie(this.middleware_,this.tech_,e);if(e in Yk)return Kk(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(gt("Video.js: ".concat(e," method not defined for ").concat(this.techName_," playback technology."),t),t):t.name==="TypeError"?(gt("Video.js: ".concat(e," unavailable on ").concat(this.techName_," playback technology element."),t),this.tech_.isReady_=!1,t):(gt(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Js){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(G0||Mi);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&i&&this.load();return}const r=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),r===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||oa(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=oa(0,0)),e}bufferedPercent(){return V3(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((i,r)=>{function s(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){s(),i()}function o(c,u){s(),r(u)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(s,s),l.then(i,r))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,i)=>{function r(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){r(),t()}function a(l,c){r(),i(c)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(r,r),o.then(t,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=De[this.fsApi_.exitFullscreen]();return e&&Js(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=De.documentElement.style.overflow,vr(De,"keydown",this.boundFullWindowOnEscKey_),De.documentElement.style.overflow="hidden",Bl(De.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){rt.isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,pi(De,"keydown",this.boundFullWindowOnEscKey_),De.documentElement.style.overflow=this.docOrigOverflow,Q0(De.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&G.documentPictureInPicture){const e=De.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(ot("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),G.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(P3(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),t.addEventListener("pagehide",i=>{const r=i.target.querySelector(".video-js");e.parentNode.replaceChild(r,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in De&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(G.documentPictureInPicture&&G.documentPictureInPicture.window)return G.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in De)return De.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(r=>{const s=r.tagName.toLowerCase();if(r.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?a.indexOf(r.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=a=>rt.isEventKey(a,"f"),muteKey:r=a=>rt.isEventKey(a,"m"),playPauseKey:s=a=>rt.isEventKey(a,"k")||rt.isEventKey(a,"Space")}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const a=xe.getComponent("FullscreenToggle");De[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),xe.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),xe.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let i=0,r=this.options_.techOrder;i<r.length;i++){const s=r[i];let a=st.getTech(s);if(a||(a=xe.getComponent(s)),!a){gt.error('The "'.concat(s,'" tech is undefined. Skipped browser support check for that tech.'));continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,st.getTech(o)]).filter(([o,l])=>l?l.isSupported():(gt.error('The "'.concat(o,'" tech is undefined. Skipped browser support check for that tech.')),!1)),i=function(o,l,c){let u;return o.some(d=>l.some(h=>{if(u=c(d,h),u)return!0})),u};let r;const s=o=>(l,c)=>o(c,l),a=([o,l],c)=>{if(l.canPlaySource(c,this.options_[o.toLowerCase()]))return{source:c,tech:o}};return this.options_.sourceOrder?r=i(e,t,s(a)):r=i(t,e,a),r||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=K3(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),Fie(this,i[0],(r,s)=>{if(this.middleware_=s,t||(this.cache_.sources=i),this.updateSourceCaches_(r),this.src_(r)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}qie(s,this.tech_)}),i.length>1){const r=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},s=()=>{this.off("error",r)};this.one("error",r),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",r),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?q3(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Js(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ua(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:i,remainingTimeDisplay:r}=this.controlBar||{},{seekBar:s}=i||{};e&&e.updateContent(),t&&t.updateContent(),r&&r.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(jo("beforeerror").forEach(t=>{const i=t(this,e);if(!(la(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Pi(e),this.addClass("vjs-error"),gt.error("(CODE:".concat(this.error_.code," ").concat(Pi.errorTypes[this.error_.code],")"),this.error_.message,this.error_),this.trigger("error"),jo("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i;const r=Ht(this,this.reportUserActivity),s=function(d){(d.screenX!==t||d.screenY!==i)&&(t=d.screenX,i=d.screenY,r())},a=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},o=function(d){r(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",s),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!Mi&&!ca&&(l.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r);let c;const u=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(c);const d=this.options_.inactivityTimeout;d<=0||(c=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))};this.setInterval(u,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach(r=>{r!==t&&r.el_&&!r.hasClass("vjs-hidden")&&(r.hide(),this.audioOnlyCache_.hiddenChildren.push(r))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Ua(this)&&this.trigger("languagechange"))}languages(){return zt(Wt.prototype.options_.languages,this.languages_)}toJSON(){const e=zt(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let r=t[i];r=zt(r),r.player=void 0,e.tracks[i]=r}return e}createModal(e,t){t=t||{},t.content=e||"";const i=new Cd(this,t);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<uE.length;i++){const r=uE[i],s=this.breakpoints_[r];if(t<=s){if(e===r)return;e&&this.removeClass(Qm[e]),this.addClass(Qm[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},Cre,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Qm[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=zt(e);const{artist:r,artwork:s,description:a,poster:o,src:l,textTracks:c,title:u}=this.cache_.media;!s&&o&&(this.cache_.media.artwork=[{src:o,type:my(o)}]),i&&this.crossOrigin(i),l&&this.src(l),o&&this.poster(o),Array.isArray(c)&&c.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:u,description:a||r||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),r={src:t,textTracks:i};return e&&(r.poster=e,r.artwork=[{src:r.poster,type:my(r.poster)}]),r}return zt(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},i=vo(e),r=i["data-setup"];if(Vh(e,"vjs-fill")&&(i.fill=!0),Vh(e,"vjs-fluid")&&(i.fluid=!0),r!==null){const[s,a]=lee(r||"{}");s&&gt.error(s),Object.assign(i,a)}if(Object.assign(t,i),e.hasChildNodes()){const s=e.childNodes;for(let a=0,o=s.length;a<o;a++){const l=s[a],c=l.nodeName.toLowerCase();c==="source"?t.sources.push(vo(l)):c==="track"&&t.tracks.push(vo(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}ki.names.forEach(function(n){const e=ki[n];Wt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Wt.prototype.crossorigin=Wt.prototype.crossOrigin;Wt.players={};const uh=G.navigator;Wt.prototype.options_={techOrder:st.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:uh&&(uh.languages&&uh.languages[0]||uh.userLanguage||uh.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(n){Wt.prototype[n]=function(){return this.techGet_(n)}});w$.forEach(function(n){Wt.prototype["handleTech".concat(bn(n),"_")]=function(){return this.trigger(n)}});xe.registerComponent("Player",Wt);const gy="plugin",Nu="activePlugins_",du={},yy=n=>du.hasOwnProperty(n),Km=n=>yy(n)?du[n]:void 0,x$=(n,e)=>{n[Nu]=n[Nu]||{},n[Nu][e]=!0},by=(n,e,t)=>{const i=(t?"before":"")+"pluginsetup";n.trigger(i,e),n.trigger(i+":"+e.name,e)},Are=function(n,e){const t=function(){by(this,{name:n,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return x$(this,n),by(this,{name:n,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},dN=(n,e)=>(e.prototype.name=n,function(...t){by(this,{name:n,plugin:e,instance:null},!0);const i=new e(this,...t);return this[n]=()=>i,by(this,i.getEventHash()),i});class Zi{constructor(e){if(this.constructor===Zi)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),J1(this),delete this.trigger,F3(this,this.constructor.defaultState),x$(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return _d(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Nu][e]=!1,this.player=this.state=null,t[e]=dN(e,du[e])}static isBasic(e){const t=typeof e=="string"?Km(e):e;return typeof t=="function"&&!Zi.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error('Illegal plugin name, "'.concat(e,'", must be a string, was ').concat(typeof e,"."));if(yy(e))gt.warn('A plugin named "'.concat(e,'" already exists. You may want to avoid re-registering plugins!'));else if(Wt.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'.concat(e,'", cannot share a name with an existing player method!'));if(typeof t!="function")throw new Error('Illegal plugin for "'.concat(e,'", must be a function, was ').concat(typeof t,"."));return du[e]=t,e!==gy&&(Zi.isBasic(t)?Wt.prototype[e]=Are(e,t):Wt.prototype[e]=dN(e,t)),t}static deregisterPlugin(e){if(e===gy)throw new Error("Cannot de-register base plugin.");yy(e)&&(delete du[e],delete Wt.prototype[e])}static getPlugins(e=Object.keys(du)){let t;return e.forEach(i=>{const r=Km(i);r&&(t=t||{},t[i]=r)}),t}static getPluginVersion(e){const t=Km(e);return t&&t.VERSION||""}}Zi.getPlugin=Km;Zi.BASE_PLUGIN_NAME=gy;Zi.registerPlugin(gy,Zi);Wt.prototype.usingPlugin=function(n){return!!this[Nu]&&this[Nu][n]===!0};Wt.prototype.hasPlugin=function(n){return!!yy(n)};function kre(n,e){let t=!1;return function(...i){return t||gt.warn(n),t=!0,e.apply(this,i)}}function Ns(n,e,t,i){return kre("".concat(e," is deprecated and will be removed in ").concat(n,".0; please use ").concat(t," instead."),i)}const E$=n=>n.indexOf("#")===0?n.slice(1):n;function ge(n,e,t){let i=ge.getPlayer(n);if(i)return e&&gt.warn('Player "'.concat(n,'" is already initialised. Options will not be applied.')),t&&i.ready(t),i;const r=typeof n=="string"?zo("#"+E$(n)):n;if(!Sd(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in r?r.getRootNode()instanceof G.ShadowRoot:!1)?r.getRootNode():r.ownerDocument.body;(!r.ownerDocument.defaultView||!a.contains(r))&&gt.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),jo("beforesetup").forEach(l=>{const c=l(r,zt(e));if(!la(c)||Array.isArray(c)){gt.error("please return an object in beforesetup hooks");return}e=zt(e,c)});const o=xe.getComponent("Player");return i=new o(r,e,t),jo("setup").forEach(l=>l(i)),i}ge.hooks_=Da;ge.hooks=jo;ge.hook=lie;ge.hookOnce=cie;ge.removeHook=u3;if(G.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Td()){let n=zo(".vjs-styles-defaults");if(!n){n=O3("vjs-styles-defaults");const e=zo("head");e&&e.insertBefore(n,e.firstChild),M3(n,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}iE(1,ge);ge.VERSION=c3;ge.options=Wt.prototype.options_;ge.getPlayers=()=>Wt.players;ge.getPlayer=n=>{const e=Wt.players;let t;if(typeof n=="string"){const i=E$(n),r=e[i];if(r)return r;t=zo("#"+i)}else t=n;if(Sd(t)){const{player:i,playerId:r}=t;if(i||e[r])return i||e[r]}};ge.getAllPlayers=()=>Object.keys(Wt.players).map(n=>Wt.players[n]).filter(Boolean);ge.players=Wt.players;ge.getComponent=xe.getComponent;ge.registerComponent=(n,e)=>(st.isTech(e)&&gt.warn("The ".concat(n," tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")),xe.registerComponent.call(xe,n,e));ge.getTech=st.getTech;ge.registerTech=st.registerTech;ge.use=Bie;Object.defineProperty(ge,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(ge.middleware,"TERMINATOR",{value:py,writeable:!1,enumerable:!0});ge.browser=fie;ge.obj=hie;ge.mergeOptions=Ns(9,"videojs.mergeOptions","videojs.obj.merge",zt);ge.defineLazyProperty=Ns(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",z0);ge.bind=Ns(9,"videojs.bind","native Function.prototype.bind",Ht);ge.registerPlugin=Zi.registerPlugin;ge.deregisterPlugin=Zi.deregisterPlugin;ge.plugin=(n,e)=>(gt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Zi.registerPlugin(n,e));ge.getPlugins=Zi.getPlugins;ge.getPlugin=Zi.getPlugin;ge.getPluginVersion=Zi.getPluginVersion;ge.addLanguage=function(n,e){return n=(""+n).toLowerCase(),ge.options.languages=zt(ge.options.languages,{[n]:e}),ge.options.languages[n]};ge.log=gt;ge.createLogger=h3;ge.time=Aie;ge.createTimeRange=Ns(9,"videojs.createTimeRange","videojs.time.createTimeRanges",oa);ge.createTimeRanges=Ns(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",oa);ge.formatTime=Ns(9,"videojs.formatTime","videojs.time.formatTime",nc);ge.setFormatTime=Ns(9,"videojs.setFormatTime","videojs.time.setFormatTime",j3);ge.resetFormatTime=Ns(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",z3);ge.parseUrl=Ns(9,"videojs.parseUrl","videojs.url.parseUrl",tS);ge.isCrossOrigin=Ns(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",tb);ge.EventTarget=Xr;ge.any=X1;ge.on=vr;ge.one=Z0;ge.off=pi;ge.trigger=_d;ge.xhr=fL;ge.TextTrack=lp;ge.AudioTrack=G3;ge.VideoTrack=Q3;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{ge[n]=function(){return gt.warn("videojs.".concat(n,"() is deprecated; use videojs.dom.").concat(n,"() instead")),I3[n].apply(null,arguments)}});ge.computedStyle=Ns(9,"videojs.computedStyle","videojs.dom.computedStyle",id);ge.dom=I3;ge.fn=xie;ge.num=rre;ge.str=_ie;ge.url=Lie;/*! @name videojs-contrib-quality-levels @version 4.0.0 @license Apache-2.0 */class Nre{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(i){t.enabled_(i)}}),t}}class vy extends ge.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const i=this.levels_.length;return t=new Nre(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){const r=this[t];if(r.id===e)return r}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}vy.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const n in vy.prototype.allowedEvents_)vy.prototype["on"+n]=null;var T$="4.0.0";const Dre=function(n,e){const t=n.qualityLevels,i=new vy,r=function(){i.dispose(),n.qualityLevels=t,n.off("dispose",r)};return n.on("dispose",r),n.qualityLevels=()=>i,n.qualityLevels.VERSION=T$,i},S$=function(n){return Dre(this,ge.obj.merge({},n))};ge.registerPlugin("qualityLevels",S$);S$.VERSION=T$;/*! @name @videojs/http-streaming @version 3.5.3 @license Apache-2.0 */const gs=Xee,wy=(n,e)=>e&&e.responseURL&&n!==e.responseURL?e.responseURL:n,Ds=n=>ge.log.debug?ge.log.debug.bind(ge,"VHS:","".concat(n," >")):function(){};function Bt(...n){const e=ge.obj||ge;return(e.merge||e.mergeOptions).apply(e,n)}function fi(...n){const e=ge.time||ge;return(e.createTimeRanges||e.createTimeRanges).apply(e,n)}const Vo=1/30,Zs=Vo*3,_$=function(n,e){const t=[];let i;if(n&&n.length)for(i=0;i<n.length;i++)e(n.start(i),n.end(i))&&t.push([n.start(i),n.end(i)]);return fi(t)},hu=function(n,e){return _$(n,function(t,i){return t-Zs<=e&&i+Zs>=e})},xm=function(n,e){return _$(n,function(t){return t-Vo>=e})},Pre=function(n){if(n.length<2)return fi();const e=[];for(let t=1;t<n.length;t++){const i=n.end(t-1),r=n.start(t);e.push([i,r])}return fi(e)},Ire=function(n,e){let t=null,i=null,r=0;const s=[],a=[];if(!n||!n.length||!e||!e.length)return fi();let o=n.length;for(;o--;)s.push({time:n.start(o),type:"start"}),s.push({time:n.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,c){return l.time-c.time}),o=0;o<s.length;o++)s[o].type==="start"?(r++,r===2&&(t=s[o].time)):s[o].type==="end"&&(r--,r===1&&(i=s[o].time)),t!==null&&i!==null&&(a.push([t,i]),t=null,i=null);return fi(a)},C$=n=>{const e=[];if(!n||!n.length)return"";for(let t=0;t<n.length;t++)e.push(n.start(t)+" => "+n.end(t));return e.join(", ")},Rre=function(n,e,t=1){return((n.length?n.end(n.length-1):0)-e)/t},Nl=n=>{const e=[];for(let t=0;t<n.length;t++)e.push({start:n.start(t),end:n.end(t)});return e},Ore=function(n,e){if(n===e)return!1;if(!n&&e||!e&&n||n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n.start(t)!==e.start(t)||n.end(t)!==e.end(t))return!0;return!1},hN=function(n){if(!(!n||!n.length||!n.end))return n.end(n.length-1)},vS=function(n,e){let t=0;if(!n||!n.length)return t;for(let i=0;i<n.length;i++){const r=n.start(i),s=n.end(i);if(!(e>s)){if(e>r&&e<=s){t+=s-e;continue}t+=s-r}}return t},wS=(n,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(i){t+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(t+=n.partTargetDuration)}),t},dE=n=>(n.segments||[]).reduce((e,t,i)=>(t.parts?t.parts.forEach(function(r,s){e.push({duration:r.duration,segmentIndex:i,partIndex:s,part:r,segment:t})}):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e),[]),A$=n=>{const e=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return e&&e.parts||[]},k$=({preloadSegment:n})=>{if(!n)return;const{parts:e,preloadHints:t}=n;let i=(t||[]).reduce((r,s)=>r+(s.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},N$=(n,e)=>{if(e.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;const t=A$(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},Mre=function(n,e){let t=0,i=e-n.mediaSequence,r=n.segments[i];if(r){if(typeof r.start<"u")return{result:r.start,precise:!0};if(typeof r.end<"u")return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=n.segments[i],typeof r.end<"u")return{result:t+r.end,precise:!0};if(t+=wS(n,r),typeof r.start<"u")return{result:t+r.start,precise:!0}}return{result:t,precise:!1}},Lre=function(n,e){let t=0,i,r=e-n.mediaSequence;for(;r<n.segments.length;r++){if(i=n.segments[r],typeof i.start<"u")return{result:i.start-t,precise:!0};if(t+=wS(n,i),typeof i.end<"u")return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}},D$=function(n,e,t){if(typeof e>"u"&&(e=n.mediaSequence+n.segments.length),e<n.mediaSequence)return 0;const i=Mre(n,e);if(i.precise)return i.result;const r=Lre(n,e);return r.precise?r.result:i.result+t},P$=function(n,e,t){if(!n)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(n.totalDuration)return n.totalDuration;if(!n.endList)return G.Infinity}return D$(n,e,t)},Gh=function({defaultDuration:n,durationList:e,startIndex:t,endIndex:i}){let r=0;if(t>i&&([t,i]=[i,t]),t<0){for(let s=t;s<Math.min(0,i);s++)r+=n;t=0}for(let s=t;s<i;s++)r+=e[s].duration;return r},I$=function(n,e,t,i){if(!n||!n.segments)return null;if(n.endList)return P$(n);if(e===null)return null;e=e||0;let r=D$(n,n.mediaSequence+n.segments.length,e);return t&&(i=typeof i=="number"?i:N$(null,n),r-=i),Math.max(0,r)},$re=function(n,e,t){const r=e||0,s=I$(n,e,!0,t);return s===null?fi():fi(r,s)},Bre=function({playlist:n,currentTime:e,startingSegmentIndex:t,startingPartIndex:i,startTime:r,exactManifestTimings:s}){let a=e-r;const o=dE(n);let l=0;for(let c=0;c<o.length;c++){const u=o[c];if(t===u.segmentIndex&&!(typeof i=="number"&&typeof u.partIndex=="number"&&i!==u.partIndex)){l=c;break}}if(a<0){if(l>0)for(let c=l-1;c>=0;c--){const u=o[c];if(a+=u.duration,s){if(a<0)continue}else if(a+Vo<=0)continue;return{partIndex:u.partIndex,segmentIndex:u.segmentIndex,startTime:r-Gh({defaultDuration:n.targetDuration,durationList:o,startIndex:l,endIndex:c})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let c=l;c<0;c++)if(a-=n.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let c=l;c<o.length;c++){const u=o[c];if(a-=u.duration,s){if(a>0)continue}else if(a-Vo>=0)continue;return{partIndex:u.partIndex,segmentIndex:u.segmentIndex,startTime:r+Gh({defaultDuration:n.targetDuration,durationList:o,startIndex:l,endIndex:c})}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},R$=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},xS=function(n){return n.excludeUntil&&n.excludeUntil===1/0},rb=function(n){const e=R$(n);return!n.disabled&&!e},Fre=function(n){return n.disabled},qre=function(n){for(let e=0;e<n.segments.length;e++)if(n.segments[e].key)return!0;return!1},O$=function(n,e){return e.attributes&&e.attributes[n]},Ure=function(n,e,t,i=0){return O$("BANDWIDTH",t)?(n*t.attributes.BANDWIDTH-i*8)/e:NaN},hE=(n,e)=>{if(n.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return n.playlists.filter(i=>rb(i)?(i.attributes.BANDWIDTH||0)<t:!1).length===0},ES=(n,e)=>!n&&!e||!n&&e||n&&!e?!1:!!(n===e||n.id&&e.id&&n.id===e.id||n.resolvedUri&&e.resolvedUri&&n.resolvedUri===e.resolvedUri||n.uri&&e.uri&&n.uri===e.uri),fN=function(n,e){const t=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{};let i=!1;for(const r in t){for(const s in t[r])if(i=e(t[r][s]),i)break;if(i)break}return!!i},hp=n=>{if(!n||!n.playlists||!n.playlists.length)return fN(n,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<n.playlists.length;e++){const t=n.playlists[e],i=t.attributes&&t.attributes.CODECS;if(!(i&&i.split(",").every(s=>vL(s))||fN(n,s=>ES(t,s))))return!1}return!0};var Gi={liveEdgeDelay:N$,duration:P$,seekable:$re,getMediaInfoForTime:Bre,isEnabled:rb,isDisabled:Fre,isExcluded:R$,isIncompatible:xS,playlistEnd:I$,isAes:qre,hasAttribute:O$,estimateSegmentRequestTime:Ure,isLowestEnabledRendition:hE,isAudioOnly:hp,playlistMatch:ES,segmentDurationWithParts:wS};const{log:M$}=ge,TS=(n,e)=>"".concat(n,"-").concat(e),jre=(n,e,t)=>"placeholder-uri-".concat(n,"-").concat(e,"-").concat(t),zre=({onwarn:n,oninfo:e,manifestString:t,customTagParsers:i=[],customTagMappers:r=[],llhls:s})=>{const a=new ste;n&&a.on("warn",n),e&&a.on("info",e),i.forEach(c=>a.addParser(c)),r.forEach(c=>a.addTagMapper(c)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(c){o.hasOwnProperty(c)&&delete o[c]}),o.segments&&o.segments.forEach(function(c){["parts","preloadHints"].forEach(function(u){c.hasOwnProperty(u)&&delete c[u]})})),!o.targetDuration){let c=10;o.segments&&o.segments.length&&(c=o.segments.reduce((u,d)=>Math.max(u,d.duration),0)),n&&n("manifest has no targetDuration defaulting to ".concat(c)),o.targetDuration=c}const l=A$(o);if(l.length&&!o.partTargetDuration){const c=l.reduce((u,d)=>Math.max(u,d.duration),0);n&&(n("manifest has no partTargetDuration defaulting to ".concat(c)),M$.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=c}return o},Nd=(n,e)=>{n.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(n.mediaGroups[t])for(const i in n.mediaGroups[t])for(const r in n.mediaGroups[t][i]){const s=n.mediaGroups[t][i][r];e(s,t,i,r)}})},L$=({playlist:n,uri:e,id:t})=>{n.id=t,n.playlistErrors_=0,e&&(n.uri=e),n.attributes=n.attributes||{}},Vre=n=>{let e=n.playlists.length;for(;e--;){const t=n.playlists[e];L$({playlist:t,id:TS(e,t.uri)}),t.resolvedUri=gs(n.uri,t.uri),n.playlists[t.id]=t,n.playlists[t.uri]=t,t.attributes.BANDWIDTH||M$.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Hre=n=>{Nd(n,e=>{e.uri&&(e.resolvedUri=gs(n.uri,e.uri))})},Wre=(n,e)=>{const t=TS(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:G.location.href,resolvedUri:G.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return i.playlists[t]=i.playlists[0],i.playlists[e]=i.playlists[0],i},$$=(n,e,t=jre)=>{n.uri=e;for(let r=0;r<n.playlists.length;r++)if(!n.playlists[r].uri){const s="placeholder-uri-".concat(r);n.playlists[r].uri=s}const i=hp(n);Nd(n,(r,s,a,o)=>{if(!r.playlists||!r.playlists.length){if(i&&s==="AUDIO"&&!r.uri)for(let l=0;l<n.playlists.length;l++){const c=n.playlists[l];if(c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===a)return}r.playlists=[Sn({},r)]}r.playlists.forEach(function(l,c){const u=t(s,a,o,l),d=TS(c,u);l.uri?l.resolvedUri=l.resolvedUri||gs(n.uri,l.uri):(l.uri=c===0?u:d,l.resolvedUri=l.uri),l.id=l.id||d,l.attributes=l.attributes||{},n.playlists[l.id]=l,n.playlists[l.uri]=l})}),Vre(n),Hre(n)};class pN{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,i=t.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((r,s)=>(r.set(s.id,s),r),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((i,r)=>{if(!this.processedDateRanges_.has(r)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),t.push(i),!!i.class))if(e[i.class]){const s=e[i.class].push(i);i.classListIndex=s-1}else e[i.class]=[i],i.classListIndex=0});for(const i of t){const r=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&r[i.classListIndex+1]?i.endTime=r[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,r)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(r)})}}const{EventTarget:Gre}=ge,Qre=(n,e)=>{if(e.endList||!e.serverControl)return n;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:i}=e;let r=e.mediaSequence+e.segments.length;if(i){const s=i.parts||[],a=k$(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&r--}t._HLS_msn=r}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const i=new G.URL(n);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(r){t.hasOwnProperty(r)&&i.searchParams.set(r,t[r])}),n=i.toString()}return n},Kre=(n,e)=>{if(!n)return e;const t=Bt(n,e);if(n.preloadHints&&!e.preloadHints&&delete t.preloadHints,n.parts&&!e.parts)delete t.parts;else if(n.parts&&e.parts)for(let i=0;i<e.parts.length;i++)n.parts&&n.parts[i]&&(t.parts[i]=Bt(n.parts[i],e.parts[i]));return!n.skipped&&e.skipped&&(t.skipped=!1),n.preload&&!e.preload&&(t.preload=!1),t},Yre=(n,e,t)=>{const i=n.slice(),r=e.slice();t=t||0;const s=[];let a;for(let o=0;o<r.length;o++){const l=i[o+t],c=r[o];l?(a=l.map||a,s.push(Kre(l,c))):(a&&!c.map&&(c.map=a),s.push(c))}return s},B$=(n,e)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=gs(e,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=gs(e,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=gs(e,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=gs(e,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=gs(e,t.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=gs(e,t.uri))})},F$=function(n){const e=n.segments||[],t=n.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let i=0;i<t.preloadHints.length;i++)if(t.preloadHints[i].type==="MAP")return e}t.duration=n.targetDuration,t.preload=!0,e.push(t)}return e},q$=(n,e)=>n===e||n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence&&n.preloadSegment===e.preloadSegment,fE=(n,e,t=q$)=>{const i=Bt(n,{}),r=i.playlists[e.id];if(!r||t(r,e))return null;e.segments=F$(e);const s=Bt(r,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=Yre(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}s.segments.forEach(a=>{B$(a,s.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===e.id&&(i.playlists[a]=s);return i.playlists[e.id]=s,i.playlists[e.uri]=s,Nd(n,(a,o,l,c)=>{if(a.playlists)for(let u=0;u<a.playlists.length;u++)e.id===a.playlists[u].id&&(a.playlists[u]=s)}),i},pE=(n,e)=>{const t=n.segments||[],i=t[t.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],s=r&&r.duration||i&&i.duration;return e&&s?s*1e3:(n.partTargetDuration||n.targetDuration||10)*500};class fu extends Gre{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Ds("PlaylistLoader");const{withCredentials:r=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=r,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new pN,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=gs(this.main.uri,e.uri);this.llhls&&(t=Qre(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},(i,r)=>{if(this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,i){const{uri:r,id:s}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[s],status:e.status,message:"HLS playlist request error at URL: ".concat(r,"."),responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return zre({onwarn:({message:i})=>this.logger_("m3u8-parser warn for ".concat(e,": ").concat(i)),oninfo:({message:i})=>this.logger_("m3u8-parser info for ".concat(e,": ").concat(i)),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:i,id:r}){this.request=null,this.state="HAVE_METADATA";const s=t||this.parseManifest_({url:i,manifestString:e});s.lastRequest=Date.now(),L$({playlist:s,uri:i,id:r});const a=fE(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,a?(this.main=a,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(pE(this.media(),!!a)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),G.clearTimeout(this.mediaUpdateTimeout),G.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new pN,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(G.clearTimeout(this.finalRenditionTimeout),t){const a=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=G.setTimeout(this.media.bind(this,e,!1),a);return}const i=this.state,r=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(pE(e,!0)),!!r){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(a,o)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=wy(e.resolvedUri,o),a)return this.playlistRequestError(this.request,e,i);this.haveMetadata({playlistString:o.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}pause(){this.mediaUpdateTimeout&&(G.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(G.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const i=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=G.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(G.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=G.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=G.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:"HLS playlist request error at URL: ".concat(this.src,"."),responseText:t.responseText,code:2},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.src=wy(this.src,t);const i=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,$$(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=F$(i),i.segments.forEach(r=>{B$(r,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||G.location.href;this.main=Wre(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:Xre}=ge,mE=function(n,e,t,i){const r=n.responseType==="arraybuffer"?n.response:n.responseText;!e&&r&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=r.byteLength||r.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),t.headers&&(n.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(n.timedout=!0),!e&&!n.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(n&&(r||n.responseText)))),i(e,n)},Jre=(n,e)=>{if(!n||!n.size)return;let t=e;return n.forEach(i=>{t=i(t)}),t},Zre=(n,e,t,i)=>{!n||!n.size||n.forEach(r=>{r(e,t,i)})},U$=function(){const n=function e(t,i){t=Bt({timeout:45e3},t);const r=e.beforeRequest||ge.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||ge.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||ge.Vhs.xhr._responseCallbackSet;r&&typeof r=="function"&&(ge.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(r));const o=ge.Vhs.xhr.original===!0?Xre:ge.Vhs.xhr,l=Jre(s,t);s.delete(r);const c=o(l||t,function(d,h){return Zre(a,c,d,h),mE(c,d,h,i)}),u=c.abort;return c.abort=function(){return c.aborted=!0,u.apply(c,arguments)},c.uri=t.uri,c.requestTime=Date.now(),c};return n.original=!0,n},ese=function(n){let e;const t=n.offset;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=G.BigInt(n.offset)+G.BigInt(n.length)-G.BigInt(1):e=n.offset+n.length-1,"bytes="+t+"-"+e},gE=function(n){const e={};return n.byterange&&(e.Range=ese(n.byterange)),e},tse=function(n,e){return n.start(e)+"-"+n.end(e)},nse=function(n,e){const t=n.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},ise=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},j$=function(n){const e={};return Object.keys(n).forEach(t=>{const i=n[t];xL(i)?e[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[t]=i}),e},xy=function(n){const e=n.byterange||{length:1/0,offset:0};return[e.length,e.offset,n.resolvedUri].join(",")},z$=function(n){return n.resolvedUri},V$=n=>{const e=Array.prototype.slice.call(n),t=16;let i="",r,s;for(let a=0;a<e.length/t;a++)r=e.slice(a*t,a*t+t).map(nse).join(""),s=e.slice(a*t,a*t+t).map(ise).join(""),i+=r+" "+s+"\n";return i},rse=({bytes:n})=>V$(n),sse=n=>{let e="",t;for(t=0;t<n.length;t++)e+=tse(n,t)+" ";return e};var ase=Object.freeze({__proto__:null,createTransferableMessage:j$,initSegmentId:xy,segmentKeyId:z$,hexDump:V$,tagDump:rse,textRanges:sse});const H$=.25,ose=(n,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,r=e.videoTimingInfo.transmuxedPresentationStart+t,s=n-r;return new Date(e.dateTimeObject.getTime()+s*1e3)},lse=n=>n.transmuxedPresentationEnd-n.transmuxedPresentationStart-n.transmuxerPrependedSeconds,cse=(n,e)=>{let t;try{t=new Date(n)}catch(l){return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(t<new Date(i.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){i=e.segments[l];const c=new Date(e.segments[l+1].dateTimeObject);if(t<c)break}const r=e.segments[e.segments.length-1],s=r.dateTimeObject,a=r.videoTimingInfo?lse(r.videoTimingInfo):r.duration+r.duration*H$,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Gi.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},use=(n,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,i;for(let s=0;s<e.segments.length&&(i=e.segments[s],t=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:t+i.duration,!(n<=t));s++);const r=e.segments[e.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<n)return null;if(n>t){if(n>t+r.duration*H$)return null;i=r}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:t-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},dse=(n,e)=>{let t,i;try{t=new Date(n),i=new Date(e)}catch(a){}const r=t.getTime();return(i.getTime()-r)/1e3},hse=n=>{if(!n.segments||n.segments.length===0)return!1;for(let e=0;e<n.segments.length;e++)if(!n.segments[e].dateTimeObject)return!1;return!0},fse=({playlist:n,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const i=use(e,n);if(!i)return t({message:"valid programTime was not found"});if(i.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const r={mediaSeconds:e},s=ose(e,i.segment);return s&&(r.programDateTime=s.toISOString()),t(null,r)},W$=({programTime:n,playlist:e,retryCount:t=2,seekTo:i,pauseAfterSeek:r=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof n>"u"||!e||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!hse(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=cse(n,e);if(!o)return a({message:"".concat(n," was not found in the stream")});const l=o.segment,c=dse(l.dateTimeObject,n);if(o.type==="estimate"){if(t===0)return a({message:"".concat(n," is not buffered yet. Try again")});i(o.estimatedStart+c),s.one("seeked",()=>{W$({programTime:n,playlist:e,retryCount:t-1,seekTo:i,pauseAfterSeek:r,tech:s,callback:a})});return}const u=l.start+c,d=()=>a(null,s.currentTime());s.one("seeked",d),r&&s.pause(),i(u)},fw=(n,e)=>{if(n.readyState===4)return e()},pse=(n,e,t)=>{let i=[],r,s=!1;const a=function(u,d,h,f){return d.abort(),s=!0,t(u,d,h,f)},o=function(u,d){if(s)return;if(u)return a(u,d,"",i);const h=d.responseText.substring(i&&i.byteLength||0,d.responseText.length);if(i=yte(i,EL(h,!0)),r=r||_h(i),i.length<10||r&&i.length<r+2)return fw(d,()=>a(u,d,"",i));const f=j1(i);return f==="ts"&&i.length<188?fw(d,()=>a(u,d,"",i)):!f&&i.length<376?fw(d,()=>a(u,d,"",i)):a(null,d,f,i)},c=e({uri:n,beforeSend(u){u.overrideMimeType("text/plain; charset=x-user-defined"),u.addEventListener("progress",function({total:d,loaded:h}){return mE(u,null,{statusCode:u.status},o)})}},function(u,d){return mE(c,u,d,o)});return c},{EventTarget:mse}=ge,mN=function(n,e){if(!q$(n,e)||n.sidx&&e.sidx&&(n.sidx.offset!==e.sidx.offset||n.sidx.length!==e.sidx.length))return!1;if(!n.sidx&&e.sidx||n.sidx&&!e.sidx||n.segments&&!e.segments||!n.segments&&e.segments)return!1;if(!n.segments&&!e.segments)return!0;for(let t=0;t<n.segments.length;t++){const i=n.segments[t],r=e.segments[t];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;const s=i.byterange,a=r.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},gse=(n,e,t,i)=>{const r=i.attributes.NAME||t;return"placeholder-uri-".concat(n,"-").concat(e,"-").concat(r)},yse=({mainXml:n,srcUrl:e,clientOffset:t,sidxMapping:i,previousManifest:r})=>{const s=qne(n,{manifestUri:e,clientOffset:t,sidxMapping:i,previousManifest:r});return $$(s,e,gse),s},bse=(n,e)=>{Nd(n,(t,i,r,s)=>{s in e.mediaGroups[i][r]||delete n.mediaGroups[i][r][s]})},vse=(n,e,t)=>{let i=!0,r=Bt(n,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=q0(a.sidx);t&&t[l]&&t[l].sidx&&F1(a,t[l].sidx,a.sidx.resolvedUri)}const o=fE(r,a,mN);o&&(r=o,i=!1)}return Nd(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const c=s.playlists[0].id,u=fE(r,s.playlists[0],mN);u&&(r=u,l in r.mediaGroups[a][o]||(r.mediaGroups[a][o][l]=s),r.mediaGroups[a][o][l].playlists[0]=r.playlists[c],i=!1)}}),bse(r,e),e.minimumUpdatePeriod!==n.minimumUpdatePeriod&&(i=!1),i?null:r},wse=(n,e)=>(!n.map&&!e.map||!!(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length,gN=(n,e)=>{const t={};for(const i in n){const s=n[i].sidx;if(s){const a=q0(s);if(!e[a])break;const o=e[a].sidxInfo;wse(o,s)&&(t[a]=e[a])}}return t},xse=(n,e)=>{let i=gN(n.playlists,e);return Nd(n,(r,s,a,o)=>{if(r.playlists&&r.playlists.length){const l=r.playlists;i=Bt(i,gN(l,e))}}),i};class yE extends mse{constructor(e,t,i={},r){super(),this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);const{withCredentials:s=!1}=i;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Ds("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,t,i){const r=e.sidx&&q0(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r]){this.mediaRequest_=G.setTimeout(()=>i(!1),0);return}const s=wy(e.sidx.resolvedUri),a=(o,l)=>{if(this.requestErrored_(o,l,t))return;const c=this.mainPlaylistLoader_.sidxMapping_;let u;try{u=Wne(Qe(l.response).subarray(8))}catch(d){this.requestErrored_(d,l,t);return}return c[r]={sidxInfo:e.sidx,sidx:u},F1(e,u,e.sidx.resolvedUri),i(!0)};this.request=pse(s,this.vhs_.xhr,(o,l,c,u)=>{if(o)return a(o,l);if(!c||c!=="mp4")return a({status:l.status,message:"Unsupported ".concat(c||"unknown"," container type for sidx segment at URL: ").concat(s),response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},l);const{offset:d,length:h}=e.sidx.byterange;if(u.length>=h+d)return a(o,{response:u.subarray(d,d+h),status:l.status,uri:l.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:gE({byterange:e.sidx.byterange})},a)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},G.clearTimeout(this.minimumUpdatePeriodTimeout_),G.clearTimeout(this.mediaRequest_),G.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,r=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),G.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(G.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){G.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const i=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=G.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=G.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(t,i)=>{if(this.requestErrored_(t,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}const r=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=wy(this.mainPlaylistLoader_.srcUrl,i),r){this.handleMain_(),this.syncClientServerClock_(()=>e(i,r));return}return e(i,r)})}syncClientServerClock_(e){const t=Une(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:gs(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},(i,r)=>{if(!this.request)return;if(i)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let s;t.method==="HEAD"?!r.responseHeaders||!r.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(r.responseHeaders.date):s=Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=yse({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=vse(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(t),!!t}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(G.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_("found invalid minimumUpdatePeriod of ".concat(t,", not setting a timeout"));return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=G.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=xse(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const r=()=>{this.media().endList||(this.mediaUpdateTimeout=G.setTimeout(()=>{this.trigger("mediaupdatetimeout"),r()},pE(this.media(),!!i)))};r()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}}var jn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Ese=n=>{const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer},G$=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},Tse=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch(e){const t=new BlobBuilder;return t.append(n),URL.createObjectURL(t.getBlob())}},Q$=function(n){return function(){const e=Tse(n),t=G$(new Worker(e));t.objURL=e;const i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},K$=function(n){return"var browserWorkerPolyFill = ".concat(G$.toString(),";\n")+"browserWorkerPolyFill(self);\n"+n},Y$=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},Sse=K$(Y$(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var p={};this.on=function(b,E){p[b]||(p[b]=[]),p[b]=p[b].concat(E)},this.off=function(b,E){var w;return p[b]?(w=p[b].indexOf(E),p[b]=p[b].slice(),p[b].splice(w,1),w>-1):!1},this.trigger=function(b){var E,w,C,D;if(E=p[b],!!E)if(arguments.length===2)for(C=E.length,w=0;w<C;++w)E[w].call(this,arguments[1]);else{for(D=[],w=arguments.length,w=1;w<arguments.length;++w)D.push(arguments[w]);for(C=E.length,w=0;w<C;++w)E[w].apply(this,D)}},this.dispose=function(){p={}}}};e.prototype.pipe=function(p){return this.on("data",function(b){p.push(b)}),this.on("done",function(b){p.flush(b)}),this.on("partialdone",function(b){p.partialFlush(b)}),this.on("endedtimeline",function(b){p.endTimeline(b)}),this.on("reset",function(b){p.reset(b)}),p},e.prototype.push=function(p){this.trigger("data",p)},e.prototype.flush=function(p){this.trigger("done",p)},e.prototype.partialFlush=function(p){this.trigger("partialdone",p)},e.prototype.endTimeline=function(p){this.trigger("endedtimeline",p)},e.prototype.reset=function(p){this.trigger("reset",p)};var t=e,i=Math.pow(2,32),r=function(p){var b=new DataView(p.buffer,p.byteOffset,p.byteLength),E;return b.getBigUint64?(E=b.getBigUint64(0),E<Number.MAX_SAFE_INTEGER?Number(E):E):b.getUint32(0)*i+b.getUint32(4)},s={getUint64:r,MAX_UINT32:i},a=s.MAX_UINT32,o,l,c,u,d,h,f,m,g,_,v,y,T,N,P,F,$,B,M,Z,O,K,z,te,ue,ye,be,de,he,ee,le,Te,$e,qe,Ve,Je;(function(){var p;if(z={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(p in z)z.hasOwnProperty(p)&&(z[p]=[p.charCodeAt(0),p.charCodeAt(1),p.charCodeAt(2),p.charCodeAt(3)]);te=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),ye=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ue=new Uint8Array([0,0,0,1]),be=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),de=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),he={video:be,audio:de},Te=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),le=new Uint8Array([0,0,0,0,0,0,0,0]),$e=new Uint8Array([0,0,0,0,0,0,0,0]),qe=$e,Ve=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Je=$e,ee=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(p){var b=[],E=0,w,C,D;for(w=1;w<arguments.length;w++)b.push(arguments[w]);for(w=b.length;w--;)E+=b[w].byteLength;for(C=new Uint8Array(E+8),D=new DataView(C.buffer,C.byteOffset,C.byteLength),D.setUint32(0,C.byteLength),C.set(p,4),w=0,E=8;w<b.length;w++)C.set(b[w],E),E+=b[w].byteLength;return C},l=function(){return o(z.dinf,o(z.dref,Te))},c=function(p){return o(z.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,p.audioobjecttype<<3|p.samplingfrequencyindex>>>1,p.samplingfrequencyindex<<7|p.channelcount<<3,6,1,2]))},u=function(){return o(z.ftyp,te,ue,te,ye)},F=function(p){return o(z.hdlr,he[p])},d=function(p){return o(z.mdat,p)},P=function(p){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,p.duration>>>24&255,p.duration>>>16&255,p.duration>>>8&255,p.duration&255,85,196,0,0]);return p.samplerate&&(b[12]=p.samplerate>>>24&255,b[13]=p.samplerate>>>16&255,b[14]=p.samplerate>>>8&255,b[15]=p.samplerate&255),o(z.mdhd,b)},N=function(p){return o(z.mdia,P(p),F(p.type),f(p))},h=function(p){return o(z.mfhd,new Uint8Array([0,0,0,0,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255]))},f=function(p){return o(z.minf,p.type==="video"?o(z.vmhd,ee):o(z.smhd,le),l(),B(p))},m=function(p,b){for(var E=[],w=b.length;w--;)E[w]=Z(b[w]);return o.apply(null,[z.moof,h(p)].concat(E))},g=function(p){for(var b=p.length,E=[];b--;)E[b]=y(p[b]);return o.apply(null,[z.moov,v(4294967295)].concat(E).concat(_(p)))},_=function(p){for(var b=p.length,E=[];b--;)E[b]=O(p[b]);return o.apply(null,[z.mvex].concat(E))},v=function(p){var b=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(z.mvhd,b)},$=function(p){var b=p.samples||[],E=new Uint8Array(4+b.length),w,C;for(C=0;C<b.length;C++)w=b[C].flags,E[C+4]=w.dependsOn<<4|w.isDependedOn<<2|w.hasRedundancy;return o(z.sdtp,E)},B=function(p){return o(z.stbl,M(p),o(z.stts,Je),o(z.stsc,qe),o(z.stsz,Ve),o(z.stco,$e))},function(){var p,b;M=function(E){return o(z.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),E.type==="video"?p(E):b(E))},p=function(E){var w=E.sps||[],C=E.pps||[],D=[],q=[],j,V;for(j=0;j<w.length;j++)D.push((w[j].byteLength&65280)>>>8),D.push(w[j].byteLength&255),D=D.concat(Array.prototype.slice.call(w[j]));for(j=0;j<C.length;j++)q.push((C[j].byteLength&65280)>>>8),q.push(C[j].byteLength&255),q=q.concat(Array.prototype.slice.call(C[j]));if(V=[z.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(E.width&65280)>>8,E.width&255,(E.height&65280)>>8,E.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(z.avcC,new Uint8Array([1,E.profileIdc,E.profileCompatibility,E.levelIdc,255].concat([w.length],D,[C.length],q))),o(z.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],E.sarRatio){var Q=E.sarRatio[0],ie=E.sarRatio[1];V.push(o(z.pasp,new Uint8Array([(Q&4278190080)>>24,(Q&16711680)>>16,(Q&65280)>>8,Q&255,(ie&4278190080)>>24,(ie&16711680)>>16,(ie&65280)>>8,ie&255])))}return o.apply(null,V)},b=function(E){return o(z.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(E.channelcount&65280)>>8,E.channelcount&255,(E.samplesize&65280)>>8,E.samplesize&255,0,0,0,0,(E.samplerate&65280)>>8,E.samplerate&255,0,0]),c(E))}}(),T=function(p){var b=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,0,(p.duration&4278190080)>>24,(p.duration&16711680)>>16,(p.duration&65280)>>8,p.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(p.width&65280)>>8,p.width&255,0,0,(p.height&65280)>>8,p.height&255,0,0]);return o(z.tkhd,b)},Z=function(p){var b,E,w,C,D,q,j;return b=o(z.tfhd,new Uint8Array([0,0,0,58,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),q=Math.floor(p.baseMediaDecodeTime/a),j=Math.floor(p.baseMediaDecodeTime%a),E=o(z.tfdt,new Uint8Array([1,0,0,0,q>>>24&255,q>>>16&255,q>>>8&255,q&255,j>>>24&255,j>>>16&255,j>>>8&255,j&255])),D=32+20+8+16+8+8,p.type==="audio"?(w=K(p,D),o(z.traf,b,E,w)):(C=$(p),w=K(p,C.length+D),o(z.traf,b,E,w,C))},y=function(p){return p.duration=p.duration||4294967295,o(z.trak,T(p),N(p))},O=function(p){var b=new Uint8Array([0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return p.type!=="video"&&(b[b.length-1]=0),o(z.trex,b)},function(){var p,b,E;E=function(w,C){var D=0,q=0,j=0,V=0;return w.length&&(w[0].duration!==void 0&&(D=1),w[0].size!==void 0&&(q=2),w[0].flags!==void 0&&(j=4),w[0].compositionTimeOffset!==void 0&&(V=8)),[0,0,D|q|j|V,1,(w.length&4278190080)>>>24,(w.length&16711680)>>>16,(w.length&65280)>>>8,w.length&255,(C&4278190080)>>>24,(C&16711680)>>>16,(C&65280)>>>8,C&255]},b=function(w,C){var D,q,j,V,Q,ie;for(V=w.samples||[],C+=8+12+16*V.length,j=E(V,C),q=new Uint8Array(j.length+V.length*16),q.set(j),D=j.length,ie=0;ie<V.length;ie++)Q=V[ie],q[D++]=(Q.duration&4278190080)>>>24,q[D++]=(Q.duration&16711680)>>>16,q[D++]=(Q.duration&65280)>>>8,q[D++]=Q.duration&255,q[D++]=(Q.size&4278190080)>>>24,q[D++]=(Q.size&16711680)>>>16,q[D++]=(Q.size&65280)>>>8,q[D++]=Q.size&255,q[D++]=Q.flags.isLeading<<2|Q.flags.dependsOn,q[D++]=Q.flags.isDependedOn<<6|Q.flags.hasRedundancy<<4|Q.flags.paddingValue<<1|Q.flags.isNonSyncSample,q[D++]=Q.flags.degradationPriority&61440,q[D++]=Q.flags.degradationPriority&15,q[D++]=(Q.compositionTimeOffset&4278190080)>>>24,q[D++]=(Q.compositionTimeOffset&16711680)>>>16,q[D++]=(Q.compositionTimeOffset&65280)>>>8,q[D++]=Q.compositionTimeOffset&255;return o(z.trun,q)},p=function(w,C){var D,q,j,V,Q,ie;for(V=w.samples||[],C+=8+12+8*V.length,j=E(V,C),D=new Uint8Array(j.length+V.length*8),D.set(j),q=j.length,ie=0;ie<V.length;ie++)Q=V[ie],D[q++]=(Q.duration&4278190080)>>>24,D[q++]=(Q.duration&16711680)>>>16,D[q++]=(Q.duration&65280)>>>8,D[q++]=Q.duration&255,D[q++]=(Q.size&4278190080)>>>24,D[q++]=(Q.size&16711680)>>>16,D[q++]=(Q.size&65280)>>>8,D[q++]=Q.size&255;return o(z.trun,D)},K=function(w,C){return w.type==="audio"?p(w,C):b(w,C)}}();var it={ftyp:u,mdat:d,moof:m,moov:g,initSegment:function(p){var b=u(),E=g(p),w;return w=new Uint8Array(b.byteLength+E.byteLength),w.set(b),w.set(E,b.byteLength),w}},qt=function(p){var b,E,w=[],C=[];for(C.byteLength=0,C.nalCount=0,C.duration=0,w.byteLength=0,b=0;b<p.length;b++)E=p[b],E.nalUnitType==="access_unit_delimiter_rbsp"?(w.length&&(w.duration=E.dts-w.dts,C.byteLength+=w.byteLength,C.nalCount+=w.length,C.duration+=w.duration,C.push(w)),w=[E],w.byteLength=E.data.byteLength,w.pts=E.pts,w.dts=E.dts):(E.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(w.keyFrame=!0),w.duration=E.dts-w.dts,w.byteLength+=E.data.byteLength,w.push(E));return C.length&&(!w.duration||w.duration<=0)&&(w.duration=C[C.length-1].duration),C.byteLength+=w.byteLength,C.nalCount+=w.length,C.duration+=w.duration,C.push(w),C},Jt=function(p){var b,E,w=[],C=[];for(w.byteLength=0,w.nalCount=0,w.duration=0,w.pts=p[0].pts,w.dts=p[0].dts,C.byteLength=0,C.nalCount=0,C.duration=0,C.pts=p[0].pts,C.dts=p[0].dts,b=0;b<p.length;b++)E=p[b],E.keyFrame?(w.length&&(C.push(w),C.byteLength+=w.byteLength,C.nalCount+=w.nalCount,C.duration+=w.duration),w=[E],w.nalCount=E.length,w.byteLength=E.byteLength,w.pts=E.pts,w.dts=E.dts,w.duration=E.duration):(w.duration+=E.duration,w.nalCount+=E.length,w.byteLength+=E.byteLength,w.push(E));return C.length&&w.duration<=0&&(w.duration=C[C.length-1].duration),C.byteLength+=w.byteLength,C.nalCount+=w.nalCount,C.duration+=w.duration,C.push(w),C},Yn=function(p){var b;return!p[0][0].keyFrame&&p.length>1&&(b=p.shift(),p.byteLength-=b.byteLength,p.nalCount-=b.nalCount,p[0][0].dts=b.dts,p[0][0].pts=b.pts,p[0][0].duration+=b.duration),p},Bn=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},hn=function(p,b){var E=Bn();return E.dataOffset=b,E.compositionTimeOffset=p.pts-p.dts,E.duration=p.duration,E.size=4*p.length,E.size+=p.byteLength,p.keyFrame&&(E.flags.dependsOn=2,E.flags.isNonSyncSample=0),E},wi=function(p,b){var E,w,C,D,q,j=b||0,V=[];for(E=0;E<p.length;E++)for(D=p[E],w=0;w<D.length;w++)q=D[w],C=hn(q,j),j+=C.size,V.push(C);return V},Ut=function(p){var b,E,w,C,D,q,j=0,V=p.byteLength,Q=p.nalCount,ie=V+4*Q,me=new Uint8Array(ie),Le=new DataView(me.buffer);for(b=0;b<p.length;b++)for(C=p[b],E=0;E<C.length;E++)for(D=C[E],w=0;w<D.length;w++)q=D[w],Le.setUint32(j,q.data.byteLength),j+=4,me.set(q.data,j),j+=q.data.byteLength;return me},Jr=function(p,b){var E,w=b||0,C=[];return E=hn(p,w),C.push(E),C},Ps=function(p){var b,E,w=0,C=p.byteLength,D=p.length,q=C+4*D,j=new Uint8Array(q),V=new DataView(j.buffer);for(b=0;b<p.length;b++)E=p[b],V.setUint32(w,E.data.byteLength),w+=4,j.set(E.data,w),w+=E.data.byteLength;return j},Zr={groupNalsIntoFrames:qt,groupFramesIntoGops:Jt,extendFirstKeyFrame:Yn,generateSampleTable:wi,concatenateNalData:Ut,generateSampleTableForFrame:Jr,concatenateNalDataForFrame:Ps},We=[33,16,5,32,164,27],xt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],lt=function(p){for(var b=[];p--;)b.push(0);return b},_n=function(p){return Object.keys(p).reduce(function(b,E){return b[E]=new Uint8Array(p[E].reduce(function(w,C){return w.concat(C)},[])),b},{})},Zt,xi=function(){if(!Zt){var p={96e3:[We,[227,64],lt(154),[56]],88200:[We,[231],lt(170),[56]],64e3:[We,[248,192],lt(240),[56]],48e3:[We,[255,192],lt(268),[55,148,128],lt(54),[112]],44100:[We,[255,192],lt(268),[55,163,128],lt(84),[112]],32e3:[We,[255,192],lt(268),[55,234],lt(226),[112]],24e3:[We,[255,192],lt(268),[55,255,128],lt(268),[111,112],lt(126),[224]],16e3:[We,[255,192],lt(268),[55,255,128],lt(268),[111,255],lt(269),[223,108],lt(195),[1,192]],12e3:[xt,lt(268),[3,127,248],lt(268),[6,255,240],lt(268),[13,255,224],lt(268),[27,253,128],lt(259),[56]],11025:[xt,lt(268),[3,127,248],lt(268),[6,255,240],lt(268),[13,255,224],lt(268),[27,255,192],lt(268),[55,175,128],lt(108),[112]],8e3:[xt,lt(268),[3,121,16],lt(47),[7]]};Zt=_n(p)}return Zt},ae=9e4,we,ke,R,S,k,L,W;we=function(p){return p*ae},ke=function(p,b){return p*b},R=function(p){return p/ae},S=function(p,b){return p/b},k=function(p,b){return we(S(p,b))},L=function(p,b){return ke(R(p),b)},W=function(p,b,E){return R(E?p:p-b)};var Y={ONE_SECOND_IN_TS:ae,secondsToVideoTs:we,secondsToAudioTs:ke,videoTsToSeconds:R,audioTsToSeconds:S,audioTsToVideoTs:k,videoTsToAudioTs:L,metadataTsToSeconds:W},ce=xi,Ie=Y,Re=function(p){var b,E,w=0;for(b=0;b<p.length;b++)E=p[b],w+=E.data.byteLength;return w},bt=function(p,b,E,w){var C,D=0,q=0,j=0,V=0,Q,ie,me;if(b.length&&(C=Ie.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),D=Math.ceil(Ie.ONE_SECOND_IN_TS/(p.samplerate/1024)),E&&w&&(q=C-Math.max(E,w),j=Math.floor(q/D),V=j*D),!(j<1||V>Ie.ONE_SECOND_IN_TS/2))){for(Q=ce()[p.samplerate],Q||(Q=b[0].data),ie=0;ie<j;ie++)me=b[0],b.splice(0,0,{data:Q,dts:me.dts-D,pts:me.pts-D});return p.baseMediaDecodeTime-=Math.floor(Ie.videoTsToAudioTs(V,p.samplerate)),V}},It=function(p,b,E){return b.minSegmentDts>=E?p:(b.minSegmentDts=1/0,p.filter(function(w){return w.dts>=E?(b.minSegmentDts=Math.min(b.minSegmentDts,w.dts),b.minSegmentPts=b.minSegmentDts,!0):!1}))},ct=function(p){var b,E,w=[];for(b=0;b<p.length;b++)E=p[b],w.push({size:E.data.byteLength,duration:1024});return w},Pd=function(p){var b,E,w=0,C=new Uint8Array(Re(p));for(b=0;b<p.length;b++)E=p[b],C.set(E.data,w),w+=E.data.byteLength;return C},_r={prefixWithSilence:bt,trimAdtsFramesByEarliestDts:It,generateSampleTable:ct,concatenateFrameData:Pd},fc=Y.ONE_SECOND_IN_TS,Se=function(p,b){typeof b.pts=="number"&&(p.timelineStartInfo.pts===void 0&&(p.timelineStartInfo.pts=b.pts),p.minSegmentPts===void 0?p.minSegmentPts=b.pts:p.minSegmentPts=Math.min(p.minSegmentPts,b.pts),p.maxSegmentPts===void 0?p.maxSegmentPts=b.pts:p.maxSegmentPts=Math.max(p.maxSegmentPts,b.pts)),typeof b.dts=="number"&&(p.timelineStartInfo.dts===void 0&&(p.timelineStartInfo.dts=b.dts),p.minSegmentDts===void 0?p.minSegmentDts=b.dts:p.minSegmentDts=Math.min(p.minSegmentDts,b.dts),p.maxSegmentDts===void 0?p.maxSegmentDts=b.dts:p.maxSegmentDts=Math.max(p.maxSegmentDts,b.dts))},Yo=function(p){delete p.minSegmentDts,delete p.maxSegmentDts,delete p.minSegmentPts,delete p.maxSegmentPts},Fn=function(p,b){var E,w,C=p.minSegmentDts;return b||(C-=p.timelineStartInfo.dts),E=p.timelineStartInfo.baseMediaDecodeTime,E+=C,E=Math.max(0,E),p.type==="audio"&&(w=p.samplerate/fc,E*=w,E=Math.floor(E)),E},ga={clearDtsInfo:Yo,calculateTrackBaseMediaDecodeTime:Fn,collectDtsInfo:Se},no=4,pc=128,ri=function(p){for(var b=0,E={payloadType:-1,payloadSize:0},w=0,C=0;b<p.byteLength&&p[b]!==pc;){for(;p[b]===255;)w+=255,b++;for(w+=p[b++];p[b]===255;)C+=255,b++;if(C+=p[b++],!E.payload&&w===no){var D=String.fromCharCode(p[b+3],p[b+4],p[b+5],p[b+6]);if(D==="GA94"){E.payloadType=w,E.payloadSize=C,E.payload=p.subarray(b,b+C);break}else E.payload=void 0}b+=C,w=0,C=0}return E},Xo=function(p){return p.payload[0]!==181||(p.payload[1]<<8|p.payload[2])!==49||String.fromCharCode(p.payload[3],p.payload[4],p.payload[5],p.payload[6])!=="GA94"||p.payload[7]!==3?null:p.payload.subarray(8,p.payload.length-1)},Id=function(p,b){var E=[],w,C,D,q;if(!(b[0]&64))return E;for(C=b[0]&31,w=0;w<C;w++)D=w*3,q={type:b[D+2]&3,pts:p},b[D+2]&4&&(q.ccData=b[D+3]<<8|b[D+4],E.push(q));return E},Jo=function(p){for(var b=p.byteLength,E=[],w=1,C,D;w<b-2;)p[w]===0&&p[w+1]===0&&p[w+2]===3?(E.push(w+2),w+=2):w++;if(E.length===0)return p;C=b-E.length,D=new Uint8Array(C);var q=0;for(w=0;w<C;q++,w++)q===E[0]&&(q++,E.shift()),D[w]=p[q];return D},Ei={parseSei:ri,parseUserData:Xo,parseCaptionPackets:Id,discardEmulationPreventionBytes:Jo,USER_DATA_REGISTERED_ITU_T_T35:no},ya=t,Is=Ei,Rt=function(p){p=p||{},Rt.prototype.init.call(this),this.parse708captions_=typeof p.parse708captions=="boolean"?p.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Et(0,0),new Et(0,1),new Et(1,0),new Et(1,1)],this.parse708captions_&&(this.cc708Stream_=new ut({captionServices:p.captionServices})),this.reset(),this.ccStreams_.forEach(function(b){b.on("data",this.trigger.bind(this,"data")),b.on("partialdone",this.trigger.bind(this,"partialdone")),b.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Rt.prototype=new ya,Rt.prototype.push=function(p){var b,E,w;if(p.nalUnitType==="sei_rbsp"&&(b=Is.parseSei(p.escapedRBSP),!!b.payload&&b.payloadType===Is.USER_DATA_REGISTERED_ITU_T_T35&&(E=Is.parseUserData(b),!!E))){if(p.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(p.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}w=Is.parseCaptionPackets(p.pts,E),this.captionPackets_=this.captionPackets_.concat(w),this.latestDts_!==p.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=p.dts}},Rt.prototype.flushCCStreams=function(p){this.ccStreams_.forEach(function(b){return p==="flush"?b.flush():b.partialFlush()},this)},Rt.prototype.flushStream=function(p){if(!this.captionPackets_.length){this.flushCCStreams(p);return}this.captionPackets_.forEach(function(b,E){b.presortIndex=E}),this.captionPackets_.sort(function(b,E){return b.pts===E.pts?b.presortIndex-E.presortIndex:b.pts-E.pts}),this.captionPackets_.forEach(function(b){b.type<2?this.dispatchCea608Packet(b):this.dispatchCea708Packet(b)},this),this.captionPackets_.length=0,this.flushCCStreams(p)},Rt.prototype.flush=function(){return this.flushStream("flush")},Rt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Rt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(p){p.reset()})},Rt.prototype.dispatchCea608Packet=function(p){this.setsTextOrXDSActive(p)?this.activeCea608Channel_[p.type]=null:this.setsChannel1Active(p)?this.activeCea608Channel_[p.type]=0:this.setsChannel2Active(p)&&(this.activeCea608Channel_[p.type]=1),this.activeCea608Channel_[p.type]!==null&&this.ccStreams_[(p.type<<1)+this.activeCea608Channel_[p.type]].push(p)},Rt.prototype.setsChannel1Active=function(p){return(p.ccData&30720)===4096},Rt.prototype.setsChannel2Active=function(p){return(p.ccData&30720)===6144},Rt.prototype.setsTextOrXDSActive=function(p){return(p.ccData&28928)===256||(p.ccData&30974)===4138||(p.ccData&30974)===6186},Rt.prototype.dispatchCea708Packet=function(p){this.parse708captions_&&this.cc708Stream_.push(p)};var mc={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Rd=function(p){var b=mc[p]||p;return p&4096&&p===b?"":String.fromCharCode(b)},Rs=function(p){return 32<=p&&p<=127||160<=p&&p<=255},Ti=function(p){this.windowNum=p,this.reset()};Ti.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ti.prototype.getText=function(){return this.rows.join("\n")},Ti.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ti.prototype.newLine=function(p){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(p),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ti.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ti.prototype.addText=function(p){this.rows[this.rowIdx]+=p},Ti.prototype.backspace=function(){if(!this.isEmpty()){var p=this.rows[this.rowIdx];this.rows[this.rowIdx]=p.substr(0,p.length-1)}};var es=function(p,b,E){this.serviceNum=p,this.text="",this.currentWindow=new Ti(-1),this.windows=[],this.stream=E,typeof b=="string"&&this.createTextDecoder(b)};es.prototype.init=function(p,b){this.startPts=p;for(var E=0;E<8;E++)this.windows[E]=new Ti(E),typeof b=="function"&&(this.windows[E].beforeRowOverflow=b)},es.prototype.setCurrentWindow=function(p){this.currentWindow=this.windows[p]},es.prototype.createTextDecoder=function(p){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(p)}catch(b){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+p+" encoding. "+b})}};var ut=function(p){p=p||{},ut.prototype.init.call(this);var b=this,E=p.captionServices||{},w={},C;Object.keys(E).forEach(D=>{C=E[D],/^SERVICE/.test(D)&&(w[D]=C.encoding)}),this.serviceEncodings=w,this.current708Packet=null,this.services={},this.push=function(D){D.type===3?(b.new708Packet(),b.add708Bytes(D)):(b.current708Packet===null&&b.new708Packet(),b.add708Bytes(D))}};ut.prototype=new ya,ut.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ut.prototype.add708Bytes=function(p){var b=p.ccData,E=b>>>8,w=b&255;this.current708Packet.ptsVals.push(p.pts),this.current708Packet.data.push(E),this.current708Packet.data.push(w)},ut.prototype.push708Packet=function(){var p=this.current708Packet,b=p.data,E=null,w=null,C=0,D=b[C++];for(p.seq=D>>6,p.sizeCode=D&63;C<b.length;C++)D=b[C++],E=D>>5,w=D&31,E===7&&w>0&&(D=b[C++],E=D),this.pushServiceBlock(E,C,w),w>0&&(C+=w-1)},ut.prototype.pushServiceBlock=function(p,b,E){var w,C=b,D=this.current708Packet.data,q=this.services[p];for(q||(q=this.initService(p,C));C<b+E&&C<D.length;C++)w=D[C],Rs(w)?C=this.handleText(C,q):w===24?C=this.multiByteCharacter(C,q):w===16?C=this.extendedCommands(C,q):128<=w&&w<=135?C=this.setCurrentWindow(C,q):152<=w&&w<=159?C=this.defineWindow(C,q):w===136?C=this.clearWindows(C,q):w===140?C=this.deleteWindows(C,q):w===137?C=this.displayWindows(C,q):w===138?C=this.hideWindows(C,q):w===139?C=this.toggleWindows(C,q):w===151?C=this.setWindowAttributes(C,q):w===144?C=this.setPenAttributes(C,q):w===145?C=this.setPenColor(C,q):w===146?C=this.setPenLocation(C,q):w===143?q=this.reset(C,q):w===8?q.currentWindow.backspace():w===12?q.currentWindow.clearText():w===13?q.currentWindow.pendingNewLine=!0:w===14?q.currentWindow.clearText():w===141&&C++},ut.prototype.extendedCommands=function(p,b){var E=this.current708Packet.data,w=E[++p];return Rs(w)&&(p=this.handleText(p,b,{isExtended:!0})),p},ut.prototype.getPts=function(p){return this.current708Packet.ptsVals[Math.floor(p/2)]},ut.prototype.initService=function(p,b){var w="SERVICE"+p,E=this,w,C;return w in this.serviceEncodings&&(C=this.serviceEncodings[w]),this.services[p]=new es(p,C,E),this.services[p].init(this.getPts(b),function(D){E.flushDisplayed(D,E.services[p])}),this.services[p]},ut.prototype.handleText=function(p,b,E){var w=E&&E.isExtended,C=E&&E.isMultiByte,D=this.current708Packet.data,q=w?4096:0,j=D[p],V=D[p+1],Q=b.currentWindow,ie,me;return b.textDecoder_&&!w?(C?(me=[j,V],p++):me=[j],ie=b.textDecoder_.decode(new Uint8Array(me))):ie=Rd(q|j),Q.pendingNewLine&&!Q.isEmpty()&&Q.newLine(this.getPts(p)),Q.pendingNewLine=!1,Q.addText(ie),p},ut.prototype.multiByteCharacter=function(p,b){var E=this.current708Packet.data,w=E[p+1],C=E[p+2];return Rs(w)&&Rs(C)&&(p=this.handleText(++p,b,{isMultiByte:!0})),p},ut.prototype.setCurrentWindow=function(p,b){var E=this.current708Packet.data,w=E[p],C=w&7;return b.setCurrentWindow(C),p},ut.prototype.defineWindow=function(p,b){var E=this.current708Packet.data,w=E[p],C=w&7;b.setCurrentWindow(C);var D=b.currentWindow;return w=E[++p],D.visible=(w&32)>>5,D.rowLock=(w&16)>>4,D.columnLock=(w&8)>>3,D.priority=w&7,w=E[++p],D.relativePositioning=(w&128)>>7,D.anchorVertical=w&127,w=E[++p],D.anchorHorizontal=w,w=E[++p],D.anchorPoint=(w&240)>>4,D.rowCount=w&15,w=E[++p],D.columnCount=w&63,w=E[++p],D.windowStyle=(w&56)>>3,D.penStyle=w&7,D.virtualRowCount=D.rowCount+1,p},ut.prototype.setWindowAttributes=function(p,b){var E=this.current708Packet.data,w=E[p],C=b.currentWindow.winAttr;return w=E[++p],C.fillOpacity=(w&192)>>6,C.fillRed=(w&48)>>4,C.fillGreen=(w&12)>>2,C.fillBlue=w&3,w=E[++p],C.borderType=(w&192)>>6,C.borderRed=(w&48)>>4,C.borderGreen=(w&12)>>2,C.borderBlue=w&3,w=E[++p],C.borderType+=(w&128)>>5,C.wordWrap=(w&64)>>6,C.printDirection=(w&48)>>4,C.scrollDirection=(w&12)>>2,C.justify=w&3,w=E[++p],C.effectSpeed=(w&240)>>4,C.effectDirection=(w&12)>>2,C.displayEffect=w&3,p},ut.prototype.flushDisplayed=function(p,b){for(var E=[],w=0;w<8;w++)b.windows[w].visible&&!b.windows[w].isEmpty()&&E.push(b.windows[w].getText());b.endPts=p,b.text=E.join("\n\n"),this.pushCaption(b),b.startPts=p},ut.prototype.pushCaption=function(p){p.text!==""&&(this.trigger("data",{startPts:p.startPts,endPts:p.endPts,text:p.text,stream:"cc708_"+p.serviceNum}),p.text="",p.startPts=p.endPts)},ut.prototype.displayWindows=function(p,b){var E=this.current708Packet.data,w=E[++p],C=this.getPts(p);this.flushDisplayed(C,b);for(var D=0;D<8;D++)w&1<<D&&(b.windows[D].visible=1);return p},ut.prototype.hideWindows=function(p,b){var E=this.current708Packet.data,w=E[++p],C=this.getPts(p);this.flushDisplayed(C,b);for(var D=0;D<8;D++)w&1<<D&&(b.windows[D].visible=0);return p},ut.prototype.toggleWindows=function(p,b){var E=this.current708Packet.data,w=E[++p],C=this.getPts(p);this.flushDisplayed(C,b);for(var D=0;D<8;D++)w&1<<D&&(b.windows[D].visible^=1);return p},ut.prototype.clearWindows=function(p,b){var E=this.current708Packet.data,w=E[++p],C=this.getPts(p);this.flushDisplayed(C,b);for(var D=0;D<8;D++)w&1<<D&&b.windows[D].clearText();return p},ut.prototype.deleteWindows=function(p,b){var E=this.current708Packet.data,w=E[++p],C=this.getPts(p);this.flushDisplayed(C,b);for(var D=0;D<8;D++)w&1<<D&&b.windows[D].reset();return p},ut.prototype.setPenAttributes=function(p,b){var E=this.current708Packet.data,w=E[p],C=b.currentWindow.penAttr;return w=E[++p],C.textTag=(w&240)>>4,C.offset=(w&12)>>2,C.penSize=w&3,w=E[++p],C.italics=(w&128)>>7,C.underline=(w&64)>>6,C.edgeType=(w&56)>>3,C.fontStyle=w&7,p},ut.prototype.setPenColor=function(p,b){var E=this.current708Packet.data,w=E[p],C=b.currentWindow.penColor;return w=E[++p],C.fgOpacity=(w&192)>>6,C.fgRed=(w&48)>>4,C.fgGreen=(w&12)>>2,C.fgBlue=w&3,w=E[++p],C.bgOpacity=(w&192)>>6,C.bgRed=(w&48)>>4,C.bgGreen=(w&12)>>2,C.bgBlue=w&3,w=E[++p],C.edgeRed=(w&48)>>4,C.edgeGreen=(w&12)>>2,C.edgeBlue=w&3,p},ut.prototype.setPenLocation=function(p,b){var E=this.current708Packet.data,w=E[p],C=b.currentWindow.penLoc;return b.currentWindow.pendingNewLine=!0,w=E[++p],C.row=w&15,w=E[++p],C.column=w&63,p},ut.prototype.reset=function(p,b){var E=this.getPts(p);return this.flushDisplayed(E,b),this.initService(b.serviceNum,p)};var Os={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ms=function(p){return p===null?"":(p=Os[p]||p,String.fromCharCode(p))},ba=14,gc=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Cr=function(){for(var p=[],b=ba+1;b--;)p.push({text:"",indent:0,offset:0});return p},Et=function(p,b){Et.prototype.init.call(this),this.field_=p||0,this.dataChannel_=b||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(E){var w,C,D,q,j;if(w=E.ccData&32639,w===this.lastControlCode_){this.lastControlCode_=null;return}if((w&61440)===4096?this.lastControlCode_=w:w!==this.PADDING_&&(this.lastControlCode_=null),D=w>>>8,q=w&255,w!==this.PADDING_)if(w===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(w===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(E.pts),this.flushDisplayed(E.pts),C=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=C,this.startPts_=E.pts;else if(w===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(E.pts);else if(w===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(E.pts);else if(w===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(E.pts);else if(w===this.CARRIAGE_RETURN_)this.clearFormatting(E.pts),this.flushDisplayed(E.pts),this.shiftRowsUp_(),this.startPts_=E.pts;else if(w===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(w===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(E.pts),this.displayed_=Cr();else if(w===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Cr();else if(w===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(E.pts),this.displayed_=Cr()),this.mode_="paintOn",this.startPts_=E.pts;else if(this.isSpecialCharacter(D,q))D=(D&3)<<8,j=Ms(D|q),this[this.mode_](E.pts,j),this.column_++;else if(this.isExtCharacter(D,q))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),D=(D&3)<<8,j=Ms(D|q),this[this.mode_](E.pts,j),this.column_++;else if(this.isMidRowCode(D,q))this.clearFormatting(E.pts),this[this.mode_](E.pts," "),this.column_++,(q&14)===14&&this.addFormatting(E.pts,["i"]),(q&1)===1&&this.addFormatting(E.pts,["u"]);else if(this.isOffsetControlCode(D,q)){const Q=q&3;this.nonDisplayed_[this.row_].offset=Q,this.column_+=Q}else if(this.isPAC(D,q)){var V=gc.indexOf(w&7968);if(this.mode_==="rollUp"&&(V-this.rollUpRows_+1<0&&(V=this.rollUpRows_-1),this.setRollUp(E.pts,V)),V!==this.row_&&(this.clearFormatting(E.pts),this.row_=V),q&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(E.pts,["u"]),(w&16)===16){const Q=(w&14)>>1;this.column_=Q*4,this.nonDisplayed_[this.row_].indent+=Q}this.isColorPAC(q)&&(q&14)===14&&this.addFormatting(E.pts,["i"])}else this.isNormalChar(D)&&(q===0&&(q=null),j=Ms(D),j+=Ms(q),this[this.mode_](E.pts,j),this.column_+=j.length)}};Et.prototype=new ya,Et.prototype.flushDisplayed=function(p){const b=w=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+w+"."})},E=[];this.displayed_.forEach((w,C)=>{if(w&&w.text&&w.text.length){try{w.text=w.text.trim()}catch(D){b(C)}w.text.length&&E.push({text:w.text,line:C+1,position:10+Math.min(70,w.indent*10)+w.offset*2.5})}else w==null&&b(C)}),E.length&&this.trigger("data",{startPts:this.startPts_,endPts:p,content:E,stream:this.name_})},Et.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Cr(),this.nonDisplayed_=Cr(),this.lastControlCode_=null,this.column_=0,this.row_=ba,this.rollUpRows_=2,this.formatting_=[]},Et.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Et.prototype.isSpecialCharacter=function(p,b){return p===this.EXT_&&b>=48&&b<=63},Et.prototype.isExtCharacter=function(p,b){return(p===this.EXT_+1||p===this.EXT_+2)&&b>=32&&b<=63},Et.prototype.isMidRowCode=function(p,b){return p===this.EXT_&&b>=32&&b<=47},Et.prototype.isOffsetControlCode=function(p,b){return p===this.OFFSET_&&b>=33&&b<=35},Et.prototype.isPAC=function(p,b){return p>=this.BASE_&&p<this.BASE_+8&&b>=64&&b<=127},Et.prototype.isColorPAC=function(p){return p>=64&&p<=79||p>=96&&p<=127},Et.prototype.isNormalChar=function(p){return p>=32&&p<=127},Et.prototype.setRollUp=function(p,b){if(this.mode_!=="rollUp"&&(this.row_=ba,this.mode_="rollUp",this.flushDisplayed(p),this.nonDisplayed_=Cr(),this.displayed_=Cr()),b!==void 0&&b!==this.row_)for(var E=0;E<this.rollUpRows_;E++)this.displayed_[b-E]=this.displayed_[this.row_-E],this.displayed_[this.row_-E]={text:"",indent:0,offset:0};b===void 0&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},Et.prototype.addFormatting=function(p,b){this.formatting_=this.formatting_.concat(b);var E=b.reduce(function(w,C){return w+"<"+C+">"},"");this[this.mode_](p,E)},Et.prototype.clearFormatting=function(p){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(E,w){return E+"</"+w+">"},"");this.formatting_=[],this[this.mode_](p,b)}},Et.prototype.popOn=function(p,b){var E=this.nonDisplayed_[this.row_].text;E+=b,this.nonDisplayed_[this.row_].text=E},Et.prototype.rollUp=function(p,b){var E=this.displayed_[this.row_].text;E+=b,this.displayed_[this.row_].text=E},Et.prototype.shiftRowsUp_=function(){var p;for(p=0;p<this.topRow_;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.row_+1;p<ba+1;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.topRow_;p<this.row_;p++)this.displayed_[p]=this.displayed_[p+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Et.prototype.paintOn=function(p,b){var E=this.displayed_[this.row_].text;E+=b,this.displayed_[this.row_].text=E};var Zo={CaptionStream:Rt,Cea608Stream:Et,Cea708Stream:ut},Ar={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Od=t,va=8589934592,pe=4294967296,Pe="shared",Ue=function(p,b){var E=1;for(p>b&&(E=-1);Math.abs(b-p)>pe;)p+=E*va;return p},jt=function(p){var b,E;jt.prototype.init.call(this),this.type_=p||Pe,this.push=function(w){this.type_!==Pe&&w.type!==this.type_||(E===void 0&&(E=w.dts),w.dts=Ue(w.dts,E),w.pts=Ue(w.pts,E),b=w.dts,this.trigger("data",w))},this.flush=function(){E=b,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){E=void 0,b=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};jt.prototype=new Od;var fn={TimestampRolloverStream:jt,handleRollover:Ue},Xn=(p,b,E)=>{if(!p)return-1;for(var w=E;w<p.length;w++)if(p[w]===b)return w;return-1},kr={typedArrayIndexOf:Xn},el=kr.typedArrayIndexOf,Ls={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},yc=function(p,b,E){var w,C="";for(w=b;w<E;w++)C+="%"+("00"+p[w].toString(16)).slice(-2);return C},Dt=function(p,b,E){return decodeURIComponent(yc(p,b,E))},ts=function(p,b,E){return unescape(yc(p,b,E))},$s=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},nr={APIC:function(p){var b=1,E,w,C="-->";p.data[0]===Ls.Utf8&&(E=el(p.data,0,b),!(E<0)&&(p.mimeType=ts(p.data,b,E),b=E+1,p.pictureType=p.data[b],b++,w=el(p.data,0,b),!(w<0)&&(p.description=Dt(p.data,b,w),b=w+1,p.mimeType===C?p.url=ts(p.data,b,p.data.length):p.pictureData=p.data.subarray(b,p.data.length))))},"T*":function(p){p.data[0]===Ls.Utf8&&(p.value=Dt(p.data,1,p.data.length).replace(/\0*$/,""),p.values=p.value.split("\0"))},TXXX:function(p){var b;p.data[0]===Ls.Utf8&&(b=el(p.data,0,1),b!==-1&&(p.description=Dt(p.data,1,b),p.value=Dt(p.data,b+1,p.data.length).replace(/\0*$/,""),p.data=p.value))},"W*":function(p){p.url=ts(p.data,0,p.data.length).replace(/\0.*$/,"")},WXXX:function(p){var b;p.data[0]===Ls.Utf8&&(b=el(p.data,0,1),b!==-1&&(p.description=Dt(p.data,1,b),p.url=ts(p.data,b+1,p.data.length).replace(/\0.*$/,"")))},PRIV:function(p){var b;for(b=0;b<p.data.length;b++)if(p.data[b]===0){p.owner=ts(p.data,0,b);break}p.privateData=p.data.subarray(b+1),p.data=p.privateData}},bc=function(p){var b,E,w=10,C=0,D=[];if(!(p.length<10||p[0]!=="I".charCodeAt(0)||p[1]!=="D".charCodeAt(0)||p[2]!=="3".charCodeAt(0))){C=$s(p.subarray(6,10)),C+=10;var q=p[5]&64;q&&(w+=4,w+=$s(p.subarray(10,14)),C-=$s(p.subarray(16,20)));do{if(b=$s(p.subarray(w+4,w+8)),b<1)break;E=String.fromCharCode(p[w],p[w+1],p[w+2],p[w+3]);var j={id:E,data:p.subarray(w+10,w+b+10)};j.key=j.id,nr[j.id]?nr[j.id](j):j.id[0]==="T"?nr["T*"](j):j.id[0]==="W"&&nr["W*"](j),D.push(j),w+=10,w+=b}while(w<C);return D}},tl={parseId3Frames:bc,parseSyncSafeInteger:$s,frameParsers:nr},vc=t,ir=Ar,Nr=tl,nl;nl=function(p){var b={descriptor:p&&p.descriptor},E=0,w=[],C=0,D;if(nl.prototype.init.call(this),this.dispatchType=ir.METADATA_STREAM_TYPE.toString(16),b.descriptor)for(D=0;D<b.descriptor.length;D++)this.dispatchType+=("00"+b.descriptor[D].toString(16)).slice(-2);this.push=function(q){var j,V,Q,ie,me,Le;if(q.type==="timed-metadata"){if(q.dataAlignmentIndicator&&(C=0,w.length=0),w.length===0&&(q.data.length<10||q.data[0]!=="I".charCodeAt(0)||q.data[1]!=="D".charCodeAt(0)||q.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(w.push(q),C+=q.data.byteLength,w.length===1&&(E=Nr.parseSyncSafeInteger(q.data.subarray(6,10)),E+=10),!(C<E)){for(j={data:new Uint8Array(E),frames:[],pts:w[0].pts,dts:w[0].dts},me=0;me<E;)j.data.set(w[0].data.subarray(0,E-me),me),me+=w[0].data.byteLength,C-=w[0].data.byteLength,w.shift();V=10,j.data[5]&64&&(V+=4,V+=Nr.parseSyncSafeInteger(j.data.subarray(10,14)),E-=Nr.parseSyncSafeInteger(j.data.subarray(16,20)));do{if(Q=Nr.parseSyncSafeInteger(j.data.subarray(V+4,V+8)),Q<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Le=String.fromCharCode(j.data[V],j.data[V+1],j.data[V+2],j.data[V+3]),ie={id:Le,data:j.data.subarray(V+10,V+Q+10)},ie.key=ie.id,Nr.frameParsers[ie.id]?Nr.frameParsers[ie.id](ie):ie.id[0]==="T"?Nr.frameParsers["T*"](ie):ie.id[0]==="W"&&Nr.frameParsers["W*"](ie),ie.owner==="com.apple.streaming.transportStreamTimestamp"){var Ce=ie.data,Ze=(Ce[3]&1)<<30|Ce[4]<<22|Ce[5]<<14|Ce[6]<<6|Ce[7]>>>2;Ze*=4,Ze+=Ce[7]&3,ie.timeStamp=Ze,j.pts===void 0&&j.dts===void 0&&(j.pts=ie.timeStamp,j.dts=ie.timeStamp),this.trigger("timestamp",ie)}j.frames.push(ie),V+=10,V+=Q}while(V<E);this.trigger("data",j)}}}},nl.prototype=new vc;var ub=nl,il=t,wc=Zo,Si=Ar,mp=fn.TimestampRolloverStream,io,Bi,ro,Bs=188,wa=71;io=function(){var p=new Uint8Array(Bs),b=0;io.prototype.init.call(this),this.push=function(E){var w=0,C=Bs,D;for(b?(D=new Uint8Array(E.byteLength+b),D.set(p.subarray(0,b)),D.set(E,b),b=0):D=E;C<D.byteLength;){if(D[w]===wa&&D[C]===wa){this.trigger("data",D.subarray(w,C)),w+=Bs,C+=Bs;continue}w++,C++}w<D.byteLength&&(p.set(D.subarray(w),0),b=D.byteLength-w)},this.flush=function(){b===Bs&&p[0]===wa&&(this.trigger("data",p),b=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){b=0,this.trigger("reset")}},io.prototype=new il,Bi=function(){var p,b,E,w;Bi.prototype.init.call(this),w=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,p=function(C,D){var q=0;D.payloadUnitStartIndicator&&(q+=C[q]+1),D.type==="pat"?b(C.subarray(q),D):E(C.subarray(q),D)},b=function(C,D){D.section_number=C[7],D.last_section_number=C[8],w.pmtPid=(C[10]&31)<<8|C[11],D.pmtPid=w.pmtPid},E=function(C,D){var q,j,V,Q;if(C[5]&1){for(w.programMapTable={video:null,audio:null,"timed-metadata":{}},q=(C[1]&15)<<8|C[2],j=3+q-4,V=(C[10]&15)<<8|C[11],Q=12+V;Q<j;){var ie=C[Q],me=(C[Q+1]&31)<<8|C[Q+2];ie===Si.H264_STREAM_TYPE&&w.programMapTable.video===null?w.programMapTable.video=me:ie===Si.ADTS_STREAM_TYPE&&w.programMapTable.audio===null?w.programMapTable.audio=me:ie===Si.METADATA_STREAM_TYPE&&(w.programMapTable["timed-metadata"][me]=ie),Q+=((C[Q+3]&15)<<8|C[Q+4])+5}D.programMapTable=w.programMapTable}},this.push=function(C){var D={},q=4;if(D.payloadUnitStartIndicator=!!(C[1]&64),D.pid=C[1]&31,D.pid<<=8,D.pid|=C[2],(C[3]&48)>>>4>1&&(q+=C[q]+1),D.pid===0)D.type="pat",p(C.subarray(q),D),this.trigger("data",D);else if(D.pid===this.pmtPid)for(D.type="pmt",p(C.subarray(q),D),this.trigger("data",D);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([C,q,D]):this.processPes_(C,q,D)},this.processPes_=function(C,D,q){q.pid===this.programMapTable.video?q.streamType=Si.H264_STREAM_TYPE:q.pid===this.programMapTable.audio?q.streamType=Si.ADTS_STREAM_TYPE:q.streamType=this.programMapTable["timed-metadata"][q.pid],q.type="pes",q.data=C.subarray(D),this.trigger("data",q)}},Bi.prototype=new il,Bi.STREAM_TYPES={h264:27,adts:15},ro=function(){var p=this,b=!1,E={data:[],size:0},w={data:[],size:0},C={data:[],size:0},D,q=function(V,Q){var ie;const me=V[0]<<16|V[1]<<8|V[2];Q.data=new Uint8Array,me===1&&(Q.packetLength=6+(V[4]<<8|V[5]),Q.dataAlignmentIndicator=(V[6]&4)!==0,ie=V[7],ie&192&&(Q.pts=(V[9]&14)<<27|(V[10]&255)<<20|(V[11]&254)<<12|(V[12]&255)<<5|(V[13]&254)>>>3,Q.pts*=4,Q.pts+=(V[13]&6)>>>1,Q.dts=Q.pts,ie&64&&(Q.dts=(V[14]&14)<<27|(V[15]&255)<<20|(V[16]&254)<<12|(V[17]&255)<<5|(V[18]&254)>>>3,Q.dts*=4,Q.dts+=(V[18]&6)>>>1)),Q.data=V.subarray(9+V[8]))},j=function(V,Q,ie){var me=new Uint8Array(V.size),Le={type:Q},Ce=0,Ze=0,nt=!1,In;if(!(!V.data.length||V.size<9)){for(Le.trackId=V.data[0].pid,Ce=0;Ce<V.data.length;Ce++)In=V.data[Ce],me.set(In.data,Ze),Ze+=In.data.byteLength;q(me,Le),nt=Q==="video"||Le.packetLength<=V.size,(ie||nt)&&(V.size=0,V.data.length=0),nt&&p.trigger("data",Le)}};ro.prototype.init.call(this),this.push=function(V){({pat:function(){},pes:function(){var Q,ie;switch(V.streamType){case Si.H264_STREAM_TYPE:Q=E,ie="video";break;case Si.ADTS_STREAM_TYPE:Q=w,ie="audio";break;case Si.METADATA_STREAM_TYPE:Q=C,ie="timed-metadata";break;default:return}V.payloadUnitStartIndicator&&j(Q,ie,!0),Q.data.push(V),Q.size+=V.data.byteLength},pmt:function(){var Q={type:"metadata",tracks:[]};D=V.programMapTable,D.video!==null&&Q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+D.video,codec:"avc",type:"video"}),D.audio!==null&&Q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+D.audio,codec:"adts",type:"audio"}),b=!0,p.trigger("data",Q)}})[V.type]()},this.reset=function(){E.size=0,E.data.length=0,w.size=0,w.data.length=0,this.trigger("reset")},this.flushStreams_=function(){j(E,"video"),j(w,"audio"),j(C,"timed-metadata")},this.flush=function(){if(!b&&D){var V={type:"metadata",tracks:[]};D.video!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+D.video,codec:"avc",type:"video"}),D.audio!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+D.audio,codec:"adts",type:"audio"}),p.trigger("data",V)}b=!1,this.flushStreams_(),this.trigger("done")}},ro.prototype=new il;var xc={PAT_PID:0,MP2T_PACKET_LENGTH:Bs,TransportPacketStream:io,TransportParseStream:Bi,ElementaryStream:ro,TimestampRolloverStream:mp,CaptionStream:wc.CaptionStream,Cea608Stream:wc.Cea608Stream,Cea708Stream:wc.Cea708Stream,MetadataStream:ub};for(var Md in Si)Si.hasOwnProperty(Md)&&(xc[Md]=Si[Md]);var gp=xc,db=t,yp=Y.ONE_SECOND_IN_TS,xa,rl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];xa=function(p){var b,E=0;xa.prototype.init.call(this),this.skipWarn_=function(w,C){this.trigger("log",{level:"warn",message:"adts skiping bytes ".concat(w," to ").concat(C," in frame ").concat(E," outside syncword")})},this.push=function(w){var C=0,D,q,j,V,Q;if(p||(E=0),w.type==="audio"){b&&b.length?(j=b,b=new Uint8Array(j.byteLength+w.data.byteLength),b.set(j),b.set(w.data,j.byteLength)):b=w.data;for(var ie;C+7<b.length;){if(b[C]!==255||(b[C+1]&246)!==240){typeof ie!="number"&&(ie=C),C++;continue}if(typeof ie=="number"&&(this.skipWarn_(ie,C),ie=null),q=(~b[C+1]&1)*2,D=(b[C+3]&3)<<11|b[C+4]<<3|(b[C+5]&224)>>5,V=((b[C+6]&3)+1)*1024,Q=V*yp/rl[(b[C+2]&60)>>>2],b.byteLength-C<D)break;this.trigger("data",{pts:w.pts+E*Q,dts:w.dts+E*Q,sampleCount:V,audioobjecttype:(b[C+2]>>>6&3)+1,channelcount:(b[C+2]&1)<<2|(b[C+3]&192)>>>6,samplerate:rl[(b[C+2]&60)>>>2],samplingfrequencyindex:(b[C+2]&60)>>>2,samplesize:16,data:b.subarray(C+7+q,C+D)}),E++,C+=D}typeof ie=="number"&&(this.skipWarn_(ie,C),ie=null),b=b.subarray(C)}},this.flush=function(){E=0,this.trigger("done")},this.reset=function(){b=void 0,this.trigger("reset")},this.endTimeline=function(){b=void 0,this.trigger("endedtimeline")}},xa.prototype=new db;var bp=xa,so;so=function(p){var b=p.byteLength,E=0,w=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+w},this.loadWord=function(){var C=p.byteLength-b,D=new Uint8Array(4),q=Math.min(4,b);if(q===0)throw new Error("no bytes available");D.set(p.subarray(C,C+q)),E=new DataView(D.buffer).getUint32(0),w=q*8,b-=q},this.skipBits=function(C){var D;w>C?(E<<=C,w-=C):(C-=w,D=Math.floor(C/8),C-=D*8,b-=D,this.loadWord(),E<<=C,w-=C)},this.readBits=function(C){var D=Math.min(w,C),q=E>>>32-D;return w-=D,w>0?E<<=D:b>0&&this.loadWord(),D=C-D,D>0?q<<D|this.readBits(D):q},this.skipLeadingZeros=function(){var C;for(C=0;C<w;++C)if(E&2147483648>>>C)return E<<=C,w-=C,C;return this.loadWord(),C+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var C=this.skipLeadingZeros();return this.readBits(C+1)-1},this.readExpGolomb=function(){var C=this.readUnsignedExpGolomb();return 1&C?1+C>>>1:-1*(C>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var sl=so,ns=t,Ec=sl,al,x,A;x=function(){var p=0,b,E;x.prototype.init.call(this),this.push=function(w){var C;E?(C=new Uint8Array(E.byteLength+w.data.byteLength),C.set(E),C.set(w.data,E.byteLength),E=C):E=w.data;for(var D=E.byteLength;p<D-3;p++)if(E[p+2]===1){b=p+5;break}for(;b<D;)switch(E[b]){case 0:if(E[b-1]!==0){b+=2;break}else if(E[b-2]!==0){b++;break}p+3!==b-2&&this.trigger("data",E.subarray(p+3,b-2));do b++;while(E[b]!==1&&b<D);p=b-2,b+=3;break;case 1:if(E[b-1]!==0||E[b-2]!==0){b+=3;break}this.trigger("data",E.subarray(p+3,b-2)),p=b-2,b+=3;break;default:b+=3;break}E=E.subarray(p),b-=p,p=0},this.reset=function(){E=null,p=0,this.trigger("reset")},this.flush=function(){E&&E.byteLength>3&&this.trigger("data",E.subarray(p+3)),E=null,p=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},x.prototype=new ns,A={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},al=function(){var p=new x,b,E,w,C,D,q,j;al.prototype.init.call(this),b=this,this.push=function(V){V.type==="video"&&(E=V.trackId,w=V.pts,C=V.dts,p.push(V))},p.on("data",function(V){var Q={trackId:E,pts:w,dts:C,data:V,nalUnitTypeCode:V[0]&31};switch(Q.nalUnitTypeCode){case 5:Q.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Q.nalUnitType="sei_rbsp",Q.escapedRBSP=D(V.subarray(1));break;case 7:Q.nalUnitType="seq_parameter_set_rbsp",Q.escapedRBSP=D(V.subarray(1)),Q.config=q(Q.escapedRBSP);break;case 8:Q.nalUnitType="pic_parameter_set_rbsp";break;case 9:Q.nalUnitType="access_unit_delimiter_rbsp";break}b.trigger("data",Q)}),p.on("done",function(){b.trigger("done")}),p.on("partialdone",function(){b.trigger("partialdone")}),p.on("reset",function(){b.trigger("reset")}),p.on("endedtimeline",function(){b.trigger("endedtimeline")}),this.flush=function(){p.flush()},this.partialFlush=function(){p.partialFlush()},this.reset=function(){p.reset()},this.endTimeline=function(){p.endTimeline()},j=function(V,Q){var ie=8,me=8,Le,Ce;for(Le=0;Le<V;Le++)me!==0&&(Ce=Q.readExpGolomb(),me=(ie+Ce+256)%256),ie=me===0?ie:me},D=function(V){for(var Q=V.byteLength,ie=[],me=1,Le,Ce;me<Q-2;)V[me]===0&&V[me+1]===0&&V[me+2]===3?(ie.push(me+2),me+=2):me++;if(ie.length===0)return V;Le=Q-ie.length,Ce=new Uint8Array(Le);var Ze=0;for(me=0;me<Le;Ze++,me++)Ze===ie[0]&&(Ze++,ie.shift()),Ce[me]=V[Ze];return Ce},q=function(V){var Q=0,ie=0,me=0,Le=0,Ce,Ze,nt,In,Dr,dl,KS,YS,XS,Pb,JS,wn=[1,1],ZS,hl;if(Ce=new Ec(V),Ze=Ce.readUnsignedByte(),In=Ce.readUnsignedByte(),nt=Ce.readUnsignedByte(),Ce.skipUnsignedExpGolomb(),A[Ze]&&(Dr=Ce.readUnsignedExpGolomb(),Dr===3&&Ce.skipBits(1),Ce.skipUnsignedExpGolomb(),Ce.skipUnsignedExpGolomb(),Ce.skipBits(1),Ce.readBoolean()))for(JS=Dr!==3?8:12,hl=0;hl<JS;hl++)Ce.readBoolean()&&(hl<6?j(16,Ce):j(64,Ce));if(Ce.skipUnsignedExpGolomb(),dl=Ce.readUnsignedExpGolomb(),dl===0)Ce.readUnsignedExpGolomb();else if(dl===1)for(Ce.skipBits(1),Ce.skipExpGolomb(),Ce.skipExpGolomb(),KS=Ce.readUnsignedExpGolomb(),hl=0;hl<KS;hl++)Ce.skipExpGolomb();if(Ce.skipUnsignedExpGolomb(),Ce.skipBits(1),YS=Ce.readUnsignedExpGolomb(),XS=Ce.readUnsignedExpGolomb(),Pb=Ce.readBits(1),Pb===0&&Ce.skipBits(1),Ce.skipBits(1),Ce.readBoolean()&&(Q=Ce.readUnsignedExpGolomb(),ie=Ce.readUnsignedExpGolomb(),me=Ce.readUnsignedExpGolomb(),Le=Ce.readUnsignedExpGolomb()),Ce.readBoolean()&&Ce.readBoolean()){switch(ZS=Ce.readUnsignedByte(),ZS){case 1:wn=[1,1];break;case 2:wn=[12,11];break;case 3:wn=[10,11];break;case 4:wn=[16,11];break;case 5:wn=[40,33];break;case 6:wn=[24,11];break;case 7:wn=[20,11];break;case 8:wn=[32,11];break;case 9:wn=[80,33];break;case 10:wn=[18,11];break;case 11:wn=[15,11];break;case 12:wn=[64,33];break;case 13:wn=[160,99];break;case 14:wn=[4,3];break;case 15:wn=[3,2];break;case 16:wn=[2,1];break;case 255:{wn=[Ce.readUnsignedByte()<<8|Ce.readUnsignedByte(),Ce.readUnsignedByte()<<8|Ce.readUnsignedByte()];break}}wn&&wn[0]/wn[1]}return{profileIdc:Ze,levelIdc:nt,profileCompatibility:In,width:(YS+1)*16-Q*2-ie*2,height:(2-Pb)*(XS+1)*16-me*2-Le*2,sarRatio:wn}}},al.prototype=new ns;var I={H264Stream:al,NalByteStream:x},U=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],X=function(p,b){var E=p[b+6]<<21|p[b+7]<<14|p[b+8]<<7|p[b+9],w=p[b+5],C=(w&16)>>4;return E=E>=0?E:0,C?E+20:E+10},ve=function(p,b){return p.length-b<10||p[b]!=="I".charCodeAt(0)||p[b+1]!=="D".charCodeAt(0)||p[b+2]!=="3".charCodeAt(0)?b:(b+=X(p,b),ve(p,b))},Ee=function(p){var b=ve(p,0);return p.length>=b+2&&(p[b]&255)===255&&(p[b+1]&240)===240&&(p[b+1]&22)===16},tt=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},Tt=function(p,b,E){var w,C="";for(w=b;w<E;w++)C+="%"+("00"+p[w].toString(16)).slice(-2);return C},mt=function(p,b,E){return unescape(Tt(p,b,E))},on=function(p,b){var E=(p[b+5]&224)>>5,w=p[b+4]<<3,C=p[b+3]&6144;return C|w|E},is=function(p,b){return p[b]==="I".charCodeAt(0)&&p[b+1]==="D".charCodeAt(0)&&p[b+2]==="3".charCodeAt(0)?"timed-metadata":p[b]&!0&&(p[b+1]&240)===240?"audio":null},vp=function(p){for(var b=0;b+5<p.length;){if(p[b]!==255||(p[b+1]&246)!==240){b++;continue}return U[(p[b+2]&60)>>>2]}return null},hb=function(p){var b,E,w,C;b=10,p[5]&64&&(b+=4,b+=tt(p.subarray(10,14)));do{if(E=tt(p.subarray(b+4,b+8)),E<1)return null;if(C=String.fromCharCode(p[b],p[b+1],p[b+2],p[b+3]),C==="PRIV"){w=p.subarray(b+10,b+E+10);for(var D=0;D<w.byteLength;D++)if(w[D]===0){var q=mt(w,0,D);if(q==="com.apple.streaming.transportStreamTimestamp"){var j=w.subarray(D+1),V=(j[3]&1)<<30|j[4]<<22|j[5]<<14|j[6]<<6|j[7]>>>2;return V*=4,V+=j[7]&3,V}break}}b+=10,b+=E}while(b<p.byteLength);return null},Tc={isLikelyAacData:Ee,parseId3TagSize:X,parseAdtsSize:on,parseType:is,parseSampleRate:vp,parseAacTimestamp:hb},fb=t,Ld=Tc,Sc;Sc=function(){var p=new Uint8Array,b=0;Sc.prototype.init.call(this),this.setTimestamp=function(E){b=E},this.push=function(E){var w=0,C=0,D,q,j,V;for(p.length?(V=p.length,p=new Uint8Array(E.byteLength+V),p.set(p.subarray(0,V)),p.set(E,V)):p=E;p.length-C>=3;){if(p[C]==="I".charCodeAt(0)&&p[C+1]==="D".charCodeAt(0)&&p[C+2]==="3".charCodeAt(0)){if(p.length-C<10||(w=Ld.parseId3TagSize(p,C),C+w>p.length))break;q={type:"timed-metadata",data:p.subarray(C,C+w)},this.trigger("data",q),C+=w;continue}else if((p[C]&255)===255&&(p[C+1]&240)===240){if(p.length-C<7||(w=Ld.parseAdtsSize(p,C),C+w>p.length))break;j={type:"audio",data:p.subarray(C,C+w),pts:b,dts:b},this.trigger("data",j),C+=w;continue}C++}D=p.length-C,D>0?p=p.subarray(C):p=new Uint8Array},this.reset=function(){p=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){p=new Uint8Array,this.trigger("endedtimeline")}},Sc.prototype=new fb;var pb=Sc,mb=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],gb=mb,yb=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],bb=yb,_c=t,ol=it,ao=Zr,Cc=_r,rr=ga,rs=gp,Ac=Y,wp=bp,vb=I.H264Stream,wb=pb,xp=Tc.isLikelyAacData,xb=Y.ONE_SECOND_IN_TS,$d=gb,Bd=bb,ll,oo,kc,Fs,Eb=function(p,b){b.stream=p,this.trigger("log",b)},Ep=function(p,b){for(var E=Object.keys(b),w=0;w<E.length;w++){var C=E[w];C==="headOfPipeline"||!b[C].on||b[C].on("log",Eb.bind(p,C))}},Tp=function(p,b){var E;if(p.length!==b.length)return!1;for(E=0;E<p.length;E++)if(p[E]!==b[E])return!1;return!0},lo=function(p,b,E,w,C,D){var q=E-b,j=w-b,V=C-E;return{start:{dts:p,pts:p+q},end:{dts:p+j,pts:p+V},prependedContentDuration:D,baseMediaDecodeTime:p}};oo=function(p,b){var E=[],w,C=0,D=0,q=1/0;b=b||{},w=b.firstSequenceNumber||0,oo.prototype.init.call(this),this.push=function(j){rr.collectDtsInfo(p,j),p&&$d.forEach(function(V){p[V]=j[V]}),E.push(j)},this.setEarliestDts=function(j){C=j},this.setVideoBaseMediaDecodeTime=function(j){q=j},this.setAudioAppendStart=function(j){D=j},this.flush=function(){var j,V,Q,ie,me,Le,Ce;if(E.length===0){this.trigger("done","AudioSegmentStream");return}j=Cc.trimAdtsFramesByEarliestDts(E,p,C),p.baseMediaDecodeTime=rr.calculateTrackBaseMediaDecodeTime(p,b.keepOriginalTimestamps),Ce=Cc.prefixWithSilence(p,j,D,q),p.samples=Cc.generateSampleTable(j),Q=ol.mdat(Cc.concatenateFrameData(j)),E=[],V=ol.moof(w,[p]),ie=new Uint8Array(V.byteLength+Q.byteLength),w++,ie.set(V),ie.set(Q,V.byteLength),rr.clearDtsInfo(p),me=Math.ceil(xb*1024/p.samplerate),j.length&&(Le=j.length*me,this.trigger("segmentTimingInfo",lo(Ac.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),j[0].dts,j[0].pts,j[0].dts+Le,j[0].pts+Le,Ce||0)),this.trigger("timingInfo",{start:j[0].pts,end:j[0].pts+Le})),this.trigger("data",{track:p,boxes:ie}),this.trigger("done","AudioSegmentStream")},this.reset=function(){rr.clearDtsInfo(p),E=[],this.trigger("reset")}},oo.prototype=new _c,ll=function(p,b){var E,w=[],C=[],D,q;b=b||{},E=b.firstSequenceNumber||0,ll.prototype.init.call(this),delete p.minPTS,this.gopCache_=[],this.push=function(j){rr.collectDtsInfo(p,j),j.nalUnitType==="seq_parameter_set_rbsp"&&!D&&(D=j.config,p.sps=[j.data],Bd.forEach(function(V){p[V]=D[V]},this)),j.nalUnitType==="pic_parameter_set_rbsp"&&!q&&(q=j.data,p.pps=[j.data]),w.push(j)},this.flush=function(){for(var j,V,Q,ie,me,Le,Ce=0,Ze,nt;w.length&&w[0].nalUnitType!=="access_unit_delimiter_rbsp";)w.shift();if(w.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(j=ao.groupNalsIntoFrames(w),Q=ao.groupFramesIntoGops(j),Q[0][0].keyFrame||(V=this.getGopForFusion_(w[0],p),V?(Ce=V.duration,Q.unshift(V),Q.byteLength+=V.byteLength,Q.nalCount+=V.nalCount,Q.pts=V.pts,Q.dts=V.dts,Q.duration+=V.duration):Q=ao.extendFirstKeyFrame(Q)),C.length){var In;if(b.alignGopsAtEnd?In=this.alignGopsAtEnd_(Q):In=this.alignGopsAtStart_(Q),!In){this.gopCache_.unshift({gop:Q.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),w=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}rr.clearDtsInfo(p),Q=In}rr.collectDtsInfo(p,Q),p.samples=ao.generateSampleTable(Q),me=ol.mdat(ao.concatenateNalData(Q)),p.baseMediaDecodeTime=rr.calculateTrackBaseMediaDecodeTime(p,b.keepOriginalTimestamps),this.trigger("processedGopsInfo",Q.map(function(Dr){return{pts:Dr.pts,dts:Dr.dts,byteLength:Dr.byteLength}})),Ze=Q[0],nt=Q[Q.length-1],this.trigger("segmentTimingInfo",lo(p.baseMediaDecodeTime,Ze.dts,Ze.pts,nt.dts+nt.duration,nt.pts+nt.duration,Ce)),this.trigger("timingInfo",{start:Q[0].pts,end:Q[Q.length-1].pts+Q[Q.length-1].duration}),this.gopCache_.unshift({gop:Q.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),w=[],this.trigger("baseMediaDecodeTime",p.baseMediaDecodeTime),this.trigger("timelineStartInfo",p.timelineStartInfo),ie=ol.moof(E,[p]),Le=new Uint8Array(ie.byteLength+me.byteLength),E++,Le.set(ie),Le.set(me,ie.byteLength),this.trigger("data",{track:p,boxes:Le}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),w=[],this.gopCache_.length=0,C.length=0,this.trigger("reset")},this.resetStream_=function(){rr.clearDtsInfo(p),D=void 0,q=void 0},this.getGopForFusion_=function(j){var V=45e3,Q=1e4,ie=1/0,me,Le,Ce,Ze,nt;for(nt=0;nt<this.gopCache_.length;nt++)Ze=this.gopCache_[nt],Ce=Ze.gop,!(!(p.pps&&Tp(p.pps[0],Ze.pps[0]))||!(p.sps&&Tp(p.sps[0],Ze.sps[0])))&&(Ce.dts<p.timelineStartInfo.dts||(me=j.dts-Ce.dts-Ce.duration,me>=-Q&&me<=V&&(!Le||ie>me)&&(Le=Ze,ie=me)));return Le?Le.gop:null},this.alignGopsAtStart_=function(j){var V,Q,ie,me,Le,Ce,Ze,nt;for(Le=j.byteLength,Ce=j.nalCount,Ze=j.duration,V=Q=0;V<C.length&&Q<j.length&&(ie=C[V],me=j[Q],ie.pts!==me.pts);){if(me.pts>ie.pts){V++;continue}Q++,Le-=me.byteLength,Ce-=me.nalCount,Ze-=me.duration}return Q===0?j:Q===j.length?null:(nt=j.slice(Q),nt.byteLength=Le,nt.duration=Ze,nt.nalCount=Ce,nt.pts=nt[0].pts,nt.dts=nt[0].dts,nt)},this.alignGopsAtEnd_=function(j){var V,Q,ie,me,Le,Ce;for(V=C.length-1,Q=j.length-1,Le=null,Ce=!1;V>=0&&Q>=0;){if(ie=C[V],me=j[Q],ie.pts===me.pts){Ce=!0;break}if(ie.pts>me.pts){V--;continue}V===C.length-1&&(Le=Q),Q--}if(!Ce&&Le===null)return null;var Ze;if(Ce?Ze=Q:Ze=Le,Ze===0)return j;var nt=j.slice(Ze),In=nt.reduce(function(Dr,dl){return Dr.byteLength+=dl.byteLength,Dr.duration+=dl.duration,Dr.nalCount+=dl.nalCount,Dr},{byteLength:0,duration:0,nalCount:0});return nt.byteLength=In.byteLength,nt.duration=In.duration,nt.nalCount=In.nalCount,nt.pts=nt[0].pts,nt.dts=nt[0].dts,nt},this.alignGopsWith=function(j){C=j}},ll.prototype=new _c,Fs=function(p,b){this.numberOfTracks=0,this.metadataStream=b,p=p||{},typeof p.remux<"u"?this.remuxTracks=!!p.remux:this.remuxTracks=!0,typeof p.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=p.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Fs.prototype.init.call(this),this.push=function(E){if(E.content||E.text)return this.pendingCaptions.push(E);if(E.frames)return this.pendingMetadata.push(E);this.pendingTracks.push(E.track),this.pendingBytes+=E.boxes.byteLength,E.track.type==="video"&&(this.videoTrack=E.track,this.pendingBoxes.push(E.boxes)),E.track.type==="audio"&&(this.audioTrack=E.track,this.pendingBoxes.unshift(E.boxes))}},Fs.prototype=new _c,Fs.prototype.flush=function(p){var b=0,E={captions:[],captionStreams:{},metadata:[],info:{}},w,C,D,q=0,j;if(this.pendingTracks.length<this.numberOfTracks){if(p!=="VideoSegmentStream"&&p!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(q=this.videoTrack.timelineStartInfo.pts,Bd.forEach(function(V){E.info[V]=this.videoTrack[V]},this)):this.audioTrack&&(q=this.audioTrack.timelineStartInfo.pts,$d.forEach(function(V){E.info[V]=this.audioTrack[V]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?E.type=this.pendingTracks[0].type:E.type="combined",this.emittedTracks+=this.pendingTracks.length,D=ol.initSegment(this.pendingTracks),E.initSegment=new Uint8Array(D.byteLength),E.initSegment.set(D),E.data=new Uint8Array(this.pendingBytes),j=0;j<this.pendingBoxes.length;j++)E.data.set(this.pendingBoxes[j],b),b+=this.pendingBoxes[j].byteLength;for(j=0;j<this.pendingCaptions.length;j++)w=this.pendingCaptions[j],w.startTime=Ac.metadataTsToSeconds(w.startPts,q,this.keepOriginalTimestamps),w.endTime=Ac.metadataTsToSeconds(w.endPts,q,this.keepOriginalTimestamps),E.captionStreams[w.stream]=!0,E.captions.push(w);for(j=0;j<this.pendingMetadata.length;j++)C=this.pendingMetadata[j],C.cueTime=Ac.metadataTsToSeconds(C.pts,q,this.keepOriginalTimestamps),E.metadata.push(C);for(E.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",E),j=0;j<E.captions.length;j++)w=E.captions[j],this.trigger("caption",w);for(j=0;j<E.metadata.length;j++)C=E.metadata[j],this.trigger("id3Frame",C)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Fs.prototype.setRemux=function(p){this.remuxTracks=p},kc=function(p){var b=this,E=!0,w,C;kc.prototype.init.call(this),p=p||{},this.baseMediaDecodeTime=p.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var D={};this.transmuxPipeline_=D,D.type="aac",D.metadataStream=new rs.MetadataStream,D.aacStream=new wb,D.audioTimestampRolloverStream=new rs.TimestampRolloverStream("audio"),D.timedMetadataTimestampRolloverStream=new rs.TimestampRolloverStream("timed-metadata"),D.adtsStream=new wp,D.coalesceStream=new Fs(p,D.metadataStream),D.headOfPipeline=D.aacStream,D.aacStream.pipe(D.audioTimestampRolloverStream).pipe(D.adtsStream),D.aacStream.pipe(D.timedMetadataTimestampRolloverStream).pipe(D.metadataStream).pipe(D.coalesceStream),D.metadataStream.on("timestamp",function(q){D.aacStream.setTimestamp(q.timeStamp)}),D.aacStream.on("data",function(q){q.type!=="timed-metadata"&&q.type!=="audio"||D.audioSegmentStream||(C=C||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},codec:"adts",type:"audio"},D.coalesceStream.numberOfTracks++,D.audioSegmentStream=new oo(C,p),D.audioSegmentStream.on("log",b.getLogTrigger_("audioSegmentStream")),D.audioSegmentStream.on("timingInfo",b.trigger.bind(b,"audioTimingInfo")),D.adtsStream.pipe(D.audioSegmentStream).pipe(D.coalesceStream),b.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!w}))}),D.coalesceStream.on("data",this.trigger.bind(this,"data")),D.coalesceStream.on("done",this.trigger.bind(this,"done")),Ep(this,D)},this.setupTsPipeline=function(){var D={};this.transmuxPipeline_=D,D.type="ts",D.metadataStream=new rs.MetadataStream,D.packetStream=new rs.TransportPacketStream,D.parseStream=new rs.TransportParseStream,D.elementaryStream=new rs.ElementaryStream,D.timestampRolloverStream=new rs.TimestampRolloverStream,D.adtsStream=new wp,D.h264Stream=new vb,D.captionStream=new rs.CaptionStream(p),D.coalesceStream=new Fs(p,D.metadataStream),D.headOfPipeline=D.packetStream,D.packetStream.pipe(D.parseStream).pipe(D.elementaryStream).pipe(D.timestampRolloverStream),D.timestampRolloverStream.pipe(D.h264Stream),D.timestampRolloverStream.pipe(D.adtsStream),D.timestampRolloverStream.pipe(D.metadataStream).pipe(D.coalesceStream),D.h264Stream.pipe(D.captionStream).pipe(D.coalesceStream),D.elementaryStream.on("data",function(q){var j;if(q.type==="metadata"){for(j=q.tracks.length;j--;)!w&&q.tracks[j].type==="video"?(w=q.tracks[j],w.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):!C&&q.tracks[j].type==="audio"&&(C=q.tracks[j],C.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime);w&&!D.videoSegmentStream&&(D.coalesceStream.numberOfTracks++,D.videoSegmentStream=new ll(w,p),D.videoSegmentStream.on("log",b.getLogTrigger_("videoSegmentStream")),D.videoSegmentStream.on("timelineStartInfo",function(V){C&&!p.keepOriginalTimestamps&&(C.timelineStartInfo=V,D.audioSegmentStream.setEarliestDts(V.dts-b.baseMediaDecodeTime))}),D.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),D.videoSegmentStream.on("segmentTimingInfo",b.trigger.bind(b,"videoSegmentTimingInfo")),D.videoSegmentStream.on("baseMediaDecodeTime",function(V){C&&D.audioSegmentStream.setVideoBaseMediaDecodeTime(V)}),D.videoSegmentStream.on("timingInfo",b.trigger.bind(b,"videoTimingInfo")),D.h264Stream.pipe(D.videoSegmentStream).pipe(D.coalesceStream)),C&&!D.audioSegmentStream&&(D.coalesceStream.numberOfTracks++,D.audioSegmentStream=new oo(C,p),D.audioSegmentStream.on("log",b.getLogTrigger_("audioSegmentStream")),D.audioSegmentStream.on("timingInfo",b.trigger.bind(b,"audioTimingInfo")),D.audioSegmentStream.on("segmentTimingInfo",b.trigger.bind(b,"audioSegmentTimingInfo")),D.adtsStream.pipe(D.audioSegmentStream).pipe(D.coalesceStream)),b.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!w})}}),D.coalesceStream.on("data",this.trigger.bind(this,"data")),D.coalesceStream.on("id3Frame",function(q){q.dispatchType=D.metadataStream.dispatchType,b.trigger("id3Frame",q)}),D.coalesceStream.on("caption",this.trigger.bind(this,"caption")),D.coalesceStream.on("done",this.trigger.bind(this,"done")),Ep(this,D)},this.setBaseMediaDecodeTime=function(D){var q=this.transmuxPipeline_;p.keepOriginalTimestamps||(this.baseMediaDecodeTime=D),C&&(C.timelineStartInfo.dts=void 0,C.timelineStartInfo.pts=void 0,rr.clearDtsInfo(C),q.audioTimestampRolloverStream&&q.audioTimestampRolloverStream.discontinuity()),w&&(q.videoSegmentStream&&(q.videoSegmentStream.gopCache_=[]),w.timelineStartInfo.dts=void 0,w.timelineStartInfo.pts=void 0,rr.clearDtsInfo(w),q.captionStream.reset()),q.timestampRolloverStream&&q.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(D){C&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(D)},this.setRemux=function(D){var q=this.transmuxPipeline_;p.remux=D,q&&q.coalesceStream&&q.coalesceStream.setRemux(D)},this.alignGopsWith=function(D){w&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(D)},this.getLogTrigger_=function(D){var q=this;return function(j){j.stream=D,q.trigger("log",j)}},this.push=function(D){if(E){var q=xp(D);q&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!q&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),E=!1}this.transmuxPipeline_.headOfPipeline.push(D)},this.flush=function(){E=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},kc.prototype=new _c;var Sp={Transmuxer:kc,VideoSegmentStream:ll,AudioSegmentStream:oo,AUDIO_PROPERTIES:$d,VIDEO_PROPERTIES:Bd,generateSegmentTimingInfo:lo},Tb=function(p){return p>>>0},oe=function(p){return("00"+p.toString(16)).slice(-2)},Ae={toUnsigned:Tb,toHexString:oe},He=function(p){var b="";return b+=String.fromCharCode(p[0]),b+=String.fromCharCode(p[1]),b+=String.fromCharCode(p[2]),b+=String.fromCharCode(p[3]),b},et=He,dt=Ae.toUnsigned,At=et,sr=function(p,b){var E=[],w,C,D,q,j;if(!b.length)return null;for(w=0;w<p.byteLength;)C=dt(p[w]<<24|p[w+1]<<16|p[w+2]<<8|p[w+3]),D=At(p.subarray(w+4,w+8)),q=C>1?w+C:p.byteLength,D===b[0]&&(b.length===1?E.push(p.subarray(w+8,q)):(j=sr(p.subarray(w+8,q),b.slice(1)),j.length&&(E=E.concat(j)))),w=q;return E},si=sr,Fi=Ae.toUnsigned,qi=s.getUint64,cl=function(p){var b={version:p[0],flags:new Uint8Array(p.subarray(1,4))};return b.version===1?b.baseMediaDecodeTime=qi(p.subarray(4)):b.baseMediaDecodeTime=Fi(p[4]<<24|p[5]<<16|p[6]<<8|p[7]),b},qs=cl,Sb=function(p){return{isLeading:(p[0]&12)>>>2,dependsOn:p[0]&3,isDependedOn:(p[1]&192)>>>6,hasRedundancy:(p[1]&48)>>>4,paddingValue:(p[1]&14)>>>1,isNonSyncSample:p[1]&1,degradationPriority:p[2]<<8|p[3]}},U4=Sb,RS=U4,j4=function(p){var b={version:p[0],flags:new Uint8Array(p.subarray(1,4)),samples:[]},E=new DataView(p.buffer,p.byteOffset,p.byteLength),w=b.flags[2]&1,C=b.flags[2]&4,D=b.flags[1]&1,q=b.flags[1]&2,j=b.flags[1]&4,V=b.flags[1]&8,Q=E.getUint32(4),ie=8,me;for(w&&(b.dataOffset=E.getInt32(ie),ie+=4),C&&Q&&(me={flags:RS(p.subarray(ie,ie+4))},ie+=4,D&&(me.duration=E.getUint32(ie),ie+=4),q&&(me.size=E.getUint32(ie),ie+=4),V&&(b.version===1?me.compositionTimeOffset=E.getInt32(ie):me.compositionTimeOffset=E.getUint32(ie),ie+=4),b.samples.push(me),Q--);Q--;)me={},D&&(me.duration=E.getUint32(ie),ie+=4),q&&(me.size=E.getUint32(ie),ie+=4),j&&(me.flags=RS(p.subarray(ie,ie+4)),ie+=4),V&&(b.version===1?me.compositionTimeOffset=E.getInt32(ie):me.compositionTimeOffset=E.getUint32(ie),ie+=4),b.samples.push(me);return b},OS=j4,z4=function(p){var b=new DataView(p.buffer,p.byteOffset,p.byteLength),E={version:p[0],flags:new Uint8Array(p.subarray(1,4)),trackId:b.getUint32(4)},w=E.flags[2]&1,C=E.flags[2]&2,D=E.flags[2]&8,q=E.flags[2]&16,j=E.flags[2]&32,V=E.flags[0]&65536,Q=E.flags[0]&131072,ie;return ie=8,w&&(ie+=4,E.baseDataOffset=b.getUint32(12),ie+=4),C&&(E.sampleDescriptionIndex=b.getUint32(ie),ie+=4),D&&(E.defaultSampleDuration=b.getUint32(ie),ie+=4),q&&(E.defaultSampleSize=b.getUint32(ie),ie+=4),j&&(E.defaultSampleFlags=b.getUint32(ie)),V&&(E.durationIsEmpty=!0),!w&&Q&&(E.baseDataOffsetIsMoof=!0),E},MS=z4,Fd;typeof window<"u"?Fd=window:typeof n<"u"?Fd=n:typeof self<"u"?Fd=self:Fd={};var LS=Fd,V4=Ei.discardEmulationPreventionBytes,H4=Zo.CaptionStream,qd=si,W4=qs,G4=OS,Q4=MS,$S=LS,K4=function(p,b){for(var E=p,w=0;w<b.length;w++){var C=b[w];if(E<C.size)return C;E-=C.size}return null},Y4=function(p,b,E){var w=new DataView(p.buffer,p.byteOffset,p.byteLength),C={logs:[],seiNals:[]},D,q,j,V;for(q=0;q+4<p.length;q+=j)if(j=w.getUint32(q),q+=4,!(j<=0))switch(p[q]&31){case 6:var Q=p.subarray(q+1,q+1+j),ie=K4(q,b);if(D={nalUnitType:"sei_rbsp",size:j,data:Q,escapedRBSP:V4(Q),trackId:E},ie)D.pts=ie.pts,D.dts=ie.dts,V=ie;else if(V)D.pts=V.pts,D.dts=V.dts;else{C.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+q+" for trackId "+E+". See mux.js#223."});break}C.seiNals.push(D);break}return C},X4=function(p,b,E){var w=b,C=E.defaultSampleDuration||0,D=E.defaultSampleSize||0,q=E.trackId,j=[];return p.forEach(function(V){var Q=G4(V),ie=Q.samples;ie.forEach(function(me){me.duration===void 0&&(me.duration=C),me.size===void 0&&(me.size=D),me.trackId=q,me.dts=w,me.compositionTimeOffset===void 0&&(me.compositionTimeOffset=0),typeof w=="bigint"?(me.pts=w+$S.BigInt(me.compositionTimeOffset),w+=$S.BigInt(me.duration)):(me.pts=w+me.compositionTimeOffset,w+=me.duration)}),j=j.concat(ie)}),j},J4=function(p,b){var E=qd(p,["moof","traf"]),w=qd(p,["mdat"]),C={},D=[];return w.forEach(function(q,j){var V=E[j];D.push({mdat:q,traf:V})}),D.forEach(function(q){var j=q.mdat,V=q.traf,Q=qd(V,["tfhd"]),ie=Q4(Q[0]),me=ie.trackId,Le=qd(V,["tfdt"]),Ce=Le.length>0?W4(Le[0]).baseMediaDecodeTime:0,Ze=qd(V,["trun"]),nt,In;b===me&&Ze.length>0&&(nt=X4(Ze,Ce,ie),In=Y4(j,nt,me),C[me]||(C[me]={seiNals:[],logs:[]}),C[me].seiNals=C[me].seiNals.concat(In.seiNals),C[me].logs=C[me].logs.concat(In.logs))}),C},Z4=function(p,b,E){var w;if(b===null)return null;w=J4(p,b);var C=w[b]||{};return{seiNals:C.seiNals,logs:C.logs,timescale:E}},e6=function(){var p=!1,b,E,w,C,D,q;this.isInitialized=function(){return p},this.init=function(j){b=new H4,p=!0,q=j?j.isPartial:!1,b.on("data",function(V){V.startTime=V.startPts/C,V.endTime=V.endPts/C,D.captions.push(V),D.captionStreams[V.stream]=!0}),b.on("log",function(V){D.logs.push(V)})},this.isNewInit=function(j,V){return j&&j.length===0||V&&typeof V=="object"&&Object.keys(V).length===0?!1:w!==j[0]||C!==V[w]},this.parse=function(j,V,Q){var ie;if(this.isInitialized()){if(!V||!Q)return null;if(this.isNewInit(V,Q))w=V[0],C=Q[w];else if(w===null||!C)return E.push(j),null}else return null;for(;E.length>0;){var me=E.shift();this.parse(me,V,Q)}return ie=Z4(j,w,C),ie&&ie.logs&&(D.logs=D.logs.concat(ie.logs)),ie===null||!ie.seiNals?D.logs.length?{logs:D.logs,captions:[],captionStreams:[]}:null:(this.pushNals(ie.seiNals),this.flushStream(),D)},this.pushNals=function(j){if(!this.isInitialized()||!j||j.length===0)return null;j.forEach(function(V){b.push(V)})},this.flushStream=function(){if(!this.isInitialized())return null;q?b.partialFlush():b.flush()},this.clearParsedCaptions=function(){D.captions=[],D.captionStreams={},D.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;b.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){E=[],w=null,C=null,D?this.clearParsedCaptions():D={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},t6=e6,n6=function(p){for(var b=0,E=String.fromCharCode(p[b]),w="";E!=="\0";)w+=E,b++,E=String.fromCharCode(p[b]);return w+=E,w},i6={uint8ToCString:n6},_p=i6.uint8ToCString,r6=s.getUint64,s6=function(p){var b=4,E=p[0],w,C,D,q,j,V,Q,ie;if(E===0){w=_p(p.subarray(b)),b+=w.length,C=_p(p.subarray(b)),b+=C.length;var me=new DataView(p.buffer);D=me.getUint32(b),b+=4,j=me.getUint32(b),b+=4,V=me.getUint32(b),b+=4,Q=me.getUint32(b),b+=4}else if(E===1){var me=new DataView(p.buffer);D=me.getUint32(b),b+=4,q=r6(p.subarray(b)),b+=8,V=me.getUint32(b),b+=4,Q=me.getUint32(b),b+=4,w=_p(p.subarray(b)),b+=w.length,C=_p(p.subarray(b)),b+=C.length}ie=new Uint8Array(p.subarray(b,p.byteLength));var Le={scheme_id_uri:w,value:C,timescale:D||1,presentation_time:q,presentation_time_delta:j,event_duration:V,id:Q,message_data:ie};return o6(E,Le)?Le:void 0},a6=function(p,b,E,w){return p||p===0?p/b:w+E/b},o6=function(p,b){var E=b.scheme_id_uri!=="\0",w=p===0&&BS(b.presentation_time_delta)&&E,C=p===1&&BS(b.presentation_time)&&E;return!(p>1)&&w||C},BS=function(p){return p!==void 0||p!==null},l6={parseEmsgBox:s6,scaleTime:a6},Cp=Ae.toUnsigned,Ud=Ae.toHexString,vn=si,Nc=et,_b=l6,c6=MS,u6=OS,d6=qs,h6=s.getUint64,FS,qS,US,jS,zS,Cb,VS,Ab=LS,f6=tl.parseId3Frames;FS=function(p){var b={},E=vn(p,["moov","trak"]);return E.reduce(function(w,C){var D,q,j,V,Q;return D=vn(C,["tkhd"])[0],!D||(q=D[0],j=q===0?12:20,V=Cp(D[j]<<24|D[j+1]<<16|D[j+2]<<8|D[j+3]),Q=vn(C,["mdia","mdhd"])[0],!Q)?null:(q=Q[0],j=q===0?12:20,w[V]=Cp(Q[j]<<24|Q[j+1]<<16|Q[j+2]<<8|Q[j+3]),w)},b)},qS=function(p,b){var E;E=vn(b,["moof","traf"]);var w=E.reduce(function(C,D){var q=vn(D,["tfhd"])[0],j=Cp(q[4]<<24|q[5]<<16|q[6]<<8|q[7]),V=p[j]||9e4,Q=vn(D,["tfdt"])[0],ie=new DataView(Q.buffer,Q.byteOffset,Q.byteLength),me;Q[0]===1?me=h6(Q.subarray(4,12)):me=ie.getUint32(4);let Le;return typeof me=="bigint"?Le=me/Ab.BigInt(V):typeof me=="number"&&!isNaN(me)&&(Le=me/V),Le<Number.MAX_SAFE_INTEGER&&(Le=Number(Le)),Le<C&&(C=Le),C},1/0);return typeof w=="bigint"||isFinite(w)?w:0},US=function(p,b){var E=vn(b,["moof","traf"]),w=0,C=0,D;if(E&&E.length){var q=vn(E[0],["tfhd"])[0],j=vn(E[0],["trun"])[0],V=vn(E[0],["tfdt"])[0];if(q){var Q=c6(q);D=Q.trackId}if(V){var ie=d6(V);w=ie.baseMediaDecodeTime}if(j){var me=u6(j);me.samples&&me.samples.length&&(C=me.samples[0].compositionTimeOffset||0)}}var Le=p[D]||9e4;typeof w=="bigint"&&(C=Ab.BigInt(C),Le=Ab.BigInt(Le));var Ce=(w+C)/Le;return typeof Ce=="bigint"&&Ce<Number.MAX_SAFE_INTEGER&&(Ce=Number(Ce)),Ce},jS=function(p){var b=vn(p,["moov","trak"]),E=[];return b.forEach(function(w){var C=vn(w,["mdia","hdlr"]),D=vn(w,["tkhd"]);C.forEach(function(q,j){var V=Nc(q.subarray(8,12)),Q=D[j],ie,me,Le;V==="vide"&&(ie=new DataView(Q.buffer,Q.byteOffset,Q.byteLength),me=ie.getUint8(0),Le=me===0?ie.getUint32(12):ie.getUint32(20),E.push(Le))})}),E},Cb=function(p){var b=p[0],E=b===0?12:20;return Cp(p[E]<<24|p[E+1]<<16|p[E+2]<<8|p[E+3])},zS=function(p){var b=vn(p,["moov","trak"]),E=[];return b.forEach(function(w){var C={},D=vn(w,["tkhd"])[0],q,j;D&&(q=new DataView(D.buffer,D.byteOffset,D.byteLength),j=q.getUint8(0),C.id=j===0?q.getUint32(12):q.getUint32(20));var V=vn(w,["mdia","hdlr"])[0];if(V){var Q=Nc(V.subarray(8,12));Q==="vide"?C.type="video":Q==="soun"?C.type="audio":C.type=Q}var ie=vn(w,["mdia","minf","stbl","stsd"])[0];if(ie){var me=ie.subarray(8);C.codec=Nc(me.subarray(4,8));var Le=vn(me,[C.codec])[0],Ce,Ze;Le&&(/^[asm]vc[1-9]$/i.test(C.codec)?(Ce=Le.subarray(78),Ze=Nc(Ce.subarray(4,8)),Ze==="avcC"&&Ce.length>11?(C.codec+=".",C.codec+=Ud(Ce[9]),C.codec+=Ud(Ce[10]),C.codec+=Ud(Ce[11])):C.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(C.codec)?(Ce=Le.subarray(28),Ze=Nc(Ce.subarray(4,8)),Ze==="esds"&&Ce.length>20&&Ce[19]!==0?(C.codec+="."+Ud(Ce[19]),C.codec+="."+Ud(Ce[20]>>>2&63).replace(/^0/,"")):C.codec="mp4a.40.2"):C.codec=C.codec.toLowerCase())}var nt=vn(w,["mdia","mdhd"])[0];nt&&(C.timescale=Cb(nt)),E.push(C)}),E},VS=function(p,b=0){var E=vn(p,["emsg"]);return E.map(w=>{var C=_b.parseEmsgBox(new Uint8Array(w)),D=f6(C.message_data);return{cueTime:_b.scaleTime(C.presentation_time,C.timescale,C.presentation_time_delta,b),duration:_b.scaleTime(C.event_duration,C.timescale),frames:D}})};var kb={findBox:vn,parseType:Nc,timescale:FS,startTime:qS,compositionStartTime:US,videoTrackIds:jS,tracks:zS,getTimescaleFromMediaHeader:Cb,getEmsgID3:VS},Nb=Ar,HS=function(p){var b=p[1]&31;return b<<=8,b|=p[2],b},Ap=function(p){return!!(p[1]&64)},kp=function(p){var b=0;return(p[3]&48)>>>4>1&&(b+=p[4]+1),b},p6=function(p,b){var E=HS(p);return E===0?"pat":E===b?"pmt":b?"pes":null},m6=function(p){var b=Ap(p),E=4+kp(p);return b&&(E+=p[E]+1),(p[E+10]&31)<<8|p[E+11]},g6=function(p){var b={},E=Ap(p),w=4+kp(p);if(E&&(w+=p[w]+1),!!(p[w+5]&1)){var C,D,q;C=(p[w+1]&15)<<8|p[w+2],D=3+C-4,q=(p[w+10]&15)<<8|p[w+11];for(var j=12+q;j<D;){var V=w+j;b[(p[V+1]&31)<<8|p[V+2]]=p[V],j+=((p[V+3]&15)<<8|p[V+4])+5}return b}},y6=function(p,b){var E=HS(p),w=b[E];switch(w){case Nb.H264_STREAM_TYPE:return"video";case Nb.ADTS_STREAM_TYPE:return"audio";case Nb.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},b6=function(p){var b=Ap(p);if(!b)return null;var E=4+kp(p);if(E>=p.byteLength)return null;var w=null,C;return C=p[E+7],C&192&&(w={},w.pts=(p[E+9]&14)<<27|(p[E+10]&255)<<20|(p[E+11]&254)<<12|(p[E+12]&255)<<5|(p[E+13]&254)>>>3,w.pts*=4,w.pts+=(p[E+13]&6)>>>1,w.dts=w.pts,C&64&&(w.dts=(p[E+14]&14)<<27|(p[E+15]&255)<<20|(p[E+16]&254)<<12|(p[E+17]&255)<<5|(p[E+18]&254)>>>3,w.dts*=4,w.dts+=(p[E+18]&6)>>>1)),w},Db=function(p){switch(p){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},v6=function(p){for(var b=4+kp(p),E=p.subarray(b),w=0,C=0,D=!1,q;C<E.byteLength-3;C++)if(E[C+2]===1){w=C+5;break}for(;w<E.byteLength;)switch(E[w]){case 0:if(E[w-1]!==0){w+=2;break}else if(E[w-2]!==0){w++;break}C+3!==w-2&&(q=Db(E[C+3]&31),q==="slice_layer_without_partitioning_rbsp_idr"&&(D=!0));do w++;while(E[w]!==1&&w<E.length);C=w-2,w+=3;break;case 1:if(E[w-1]!==0||E[w-2]!==0){w+=3;break}q=Db(E[C+3]&31),q==="slice_layer_without_partitioning_rbsp_idr"&&(D=!0),C=w-2,w+=3;break;default:w+=3;break}return E=E.subarray(C),w-=C,C=0,E&&E.byteLength>3&&(q=Db(E[C+3]&31),q==="slice_layer_without_partitioning_rbsp_idr"&&(D=!0)),D},w6={parseType:p6,parsePat:m6,parsePmt:g6,parsePayloadUnitStartIndicator:Ap,parsePesType:y6,parsePesTime:b6,videoPacketContainsKeyFrame:v6},WS=Ar,Dc=fn.handleRollover,Ot={};Ot.ts=w6,Ot.aac=Tc;var ul=Y.ONE_SECOND_IN_TS,_i=188,Us=71,x6=function(p,b){for(var E=0,w=_i,C,D;w<p.byteLength;){if(p[E]===Us&&p[w]===Us){switch(C=p.subarray(E,w),D=Ot.ts.parseType(C,b.pid),D){case"pat":b.pid=Ot.ts.parsePat(C);break;case"pmt":var q=Ot.ts.parsePmt(C);b.table=b.table||{},Object.keys(q).forEach(function(j){b.table[j]=q[j]});break}E+=_i,w+=_i;continue}E++,w++}},GS=function(p,b,E){for(var w=0,C=_i,D,q,j,V,Q,ie=!1;C<=p.byteLength;){if(p[w]===Us&&(p[C]===Us||C===p.byteLength)){switch(D=p.subarray(w,C),q=Ot.ts.parseType(D,b.pid),q){case"pes":j=Ot.ts.parsePesType(D,b.table),V=Ot.ts.parsePayloadUnitStartIndicator(D),j==="audio"&&V&&(Q=Ot.ts.parsePesTime(D),Q&&(Q.type="audio",E.audio.push(Q),ie=!0));break}if(ie)break;w+=_i,C+=_i;continue}w++,C++}for(C=p.byteLength,w=C-_i,ie=!1;w>=0;){if(p[w]===Us&&(p[C]===Us||C===p.byteLength)){switch(D=p.subarray(w,C),q=Ot.ts.parseType(D,b.pid),q){case"pes":j=Ot.ts.parsePesType(D,b.table),V=Ot.ts.parsePayloadUnitStartIndicator(D),j==="audio"&&V&&(Q=Ot.ts.parsePesTime(D),Q&&(Q.type="audio",E.audio.push(Q),ie=!0));break}if(ie)break;w-=_i,C-=_i;continue}w--,C--}},E6=function(p,b,E){for(var w=0,C=_i,D,q,j,V,Q,ie,me,Le,Ce=!1,Ze={data:[],size:0};C<p.byteLength;){if(p[w]===Us&&p[C]===Us){switch(D=p.subarray(w,C),q=Ot.ts.parseType(D,b.pid),q){case"pes":if(j=Ot.ts.parsePesType(D,b.table),V=Ot.ts.parsePayloadUnitStartIndicator(D),j==="video"&&(V&&!Ce&&(Q=Ot.ts.parsePesTime(D),Q&&(Q.type="video",E.video.push(Q),Ce=!0)),!E.firstKeyFrame)){if(V&&Ze.size!==0){for(ie=new Uint8Array(Ze.size),me=0;Ze.data.length;)Le=Ze.data.shift(),ie.set(Le,me),me+=Le.byteLength;if(Ot.ts.videoPacketContainsKeyFrame(ie)){var nt=Ot.ts.parsePesTime(ie);nt?(E.firstKeyFrame=nt,E.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Ze.size=0}Ze.data.push(D),Ze.size+=D.byteLength}break}if(Ce&&E.firstKeyFrame)break;w+=_i,C+=_i;continue}w++,C++}for(C=p.byteLength,w=C-_i,Ce=!1;w>=0;){if(p[w]===Us&&p[C]===Us){switch(D=p.subarray(w,C),q=Ot.ts.parseType(D,b.pid),q){case"pes":j=Ot.ts.parsePesType(D,b.table),V=Ot.ts.parsePayloadUnitStartIndicator(D),j==="video"&&V&&(Q=Ot.ts.parsePesTime(D),Q&&(Q.type="video",E.video.push(Q),Ce=!0));break}if(Ce)break;w-=_i,C-=_i;continue}w--,C--}},T6=function(p,b){if(p.audio&&p.audio.length){var E=b;(typeof E>"u"||isNaN(E))&&(E=p.audio[0].dts),p.audio.forEach(function(D){D.dts=Dc(D.dts,E),D.pts=Dc(D.pts,E),D.dtsTime=D.dts/ul,D.ptsTime=D.pts/ul})}if(p.video&&p.video.length){var w=b;if((typeof w>"u"||isNaN(w))&&(w=p.video[0].dts),p.video.forEach(function(D){D.dts=Dc(D.dts,w),D.pts=Dc(D.pts,w),D.dtsTime=D.dts/ul,D.ptsTime=D.pts/ul}),p.firstKeyFrame){var C=p.firstKeyFrame;C.dts=Dc(C.dts,w),C.pts=Dc(C.pts,w),C.dtsTime=C.dts/ul,C.ptsTime=C.pts/ul}}},S6=function(p){for(var b=!1,E=0,w=null,C=null,D=0,q=0,j;p.length-q>=3;){var V=Ot.aac.parseType(p,q);switch(V){case"timed-metadata":if(p.length-q<10){b=!0;break}if(D=Ot.aac.parseId3TagSize(p,q),D>p.length){b=!0;break}C===null&&(j=p.subarray(q,q+D),C=Ot.aac.parseAacTimestamp(j)),q+=D;break;case"audio":if(p.length-q<7){b=!0;break}if(D=Ot.aac.parseAdtsSize(p,q),D>p.length){b=!0;break}w===null&&(j=p.subarray(q,q+D),w=Ot.aac.parseSampleRate(j)),E++,q+=D;break;default:q++;break}if(b)return null}if(w===null||C===null)return null;var Q=ul/w,ie={audio:[{type:"audio",dts:C,pts:C},{type:"audio",dts:C+E*1024*Q,pts:C+E*1024*Q}]};return ie},_6=function(p){var b={pid:null,table:null},E={};x6(p,b);for(var w in b.table)if(b.table.hasOwnProperty(w)){var C=b.table[w];switch(C){case WS.H264_STREAM_TYPE:E.video=[],E6(p,b,E),E.video.length===0&&delete E.video;break;case WS.ADTS_STREAM_TYPE:E.audio=[],GS(p,b,E),E.audio.length===0&&delete E.audio;break}}return E},C6=function(p,b){var E=Ot.aac.isLikelyAacData(p),w;return E?w=S6(p):w=_6(p),!w||!w.audio&&!w.video?null:(T6(w,b),w)},A6={inspect:C6,parseAudioPes_:GS};const k6=function(p,b){b.on("data",function(E){const w=E.initSegment;E.initSegment={data:w.buffer,byteOffset:w.byteOffset,byteLength:w.byteLength};const C=E.data;E.data=C.buffer,p.postMessage({action:"data",segment:E,byteOffset:C.byteOffset,byteLength:C.byteLength},[E.data])}),b.on("done",function(E){p.postMessage({action:"done"})}),b.on("gopInfo",function(E){p.postMessage({action:"gopInfo",gopInfo:E})}),b.on("videoSegmentTimingInfo",function(E){const w={start:{decode:Y.videoTsToSeconds(E.start.dts),presentation:Y.videoTsToSeconds(E.start.pts)},end:{decode:Y.videoTsToSeconds(E.end.dts),presentation:Y.videoTsToSeconds(E.end.pts)},baseMediaDecodeTime:Y.videoTsToSeconds(E.baseMediaDecodeTime)};E.prependedContentDuration&&(w.prependedContentDuration=Y.videoTsToSeconds(E.prependedContentDuration)),p.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:w})}),b.on("audioSegmentTimingInfo",function(E){const w={start:{decode:Y.videoTsToSeconds(E.start.dts),presentation:Y.videoTsToSeconds(E.start.pts)},end:{decode:Y.videoTsToSeconds(E.end.dts),presentation:Y.videoTsToSeconds(E.end.pts)},baseMediaDecodeTime:Y.videoTsToSeconds(E.baseMediaDecodeTime)};E.prependedContentDuration&&(w.prependedContentDuration=Y.videoTsToSeconds(E.prependedContentDuration)),p.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:w})}),b.on("id3Frame",function(E){p.postMessage({action:"id3Frame",id3Frame:E})}),b.on("caption",function(E){p.postMessage({action:"caption",caption:E})}),b.on("trackinfo",function(E){p.postMessage({action:"trackinfo",trackInfo:E})}),b.on("audioTimingInfo",function(E){p.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Y.videoTsToSeconds(E.start),end:Y.videoTsToSeconds(E.end)}})}),b.on("videoTimingInfo",function(E){p.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Y.videoTsToSeconds(E.start),end:Y.videoTsToSeconds(E.end)}})}),b.on("log",function(E){p.postMessage({action:"log",log:E})})};class QS{constructor(b,E){this.options=E||{},this.self=b,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Sp.Transmuxer(this.options),k6(this.self,this.transmuxer)}pushMp4Captions(b){this.captionParser||(this.captionParser=new t6,this.captionParser.init());const E=new Uint8Array(b.data,b.byteOffset,b.byteLength),w=this.captionParser.parse(E,b.trackIds,b.timescales);this.self.postMessage({action:"mp4Captions",captions:w&&w.captions||[],logs:w&&w.logs||[],data:E.buffer},[E.buffer])}probeMp4StartTime({timescales:b,data:E}){const w=kb.startTime(b,E);this.self.postMessage({action:"probeMp4StartTime",startTime:w,data:E},[E.buffer])}probeMp4Tracks({data:b}){const E=kb.tracks(b);this.self.postMessage({action:"probeMp4Tracks",tracks:E,data:b},[b.buffer])}probeEmsgID3({data:b,offset:E}){const w=kb.getEmsgID3(b,E);this.self.postMessage({action:"probeEmsgID3",id3Frames:w,emsgData:b},[b.buffer])}probeTs({data:b,baseStartTime:E}){const w=typeof E=="number"&&!isNaN(E)?E*Y.ONE_SECOND_IN_TS:void 0,C=A6.inspect(b,w);let D=null;C&&(D={hasVideo:C.video&&C.video.length===2||!1,hasAudio:C.audio&&C.audio.length===2||!1},D.hasVideo&&(D.videoStart=C.video[0].ptsTime),D.hasAudio&&(D.audioStart=C.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:D,data:b},[b.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(b){const E=new Uint8Array(b.data,b.byteOffset,b.byteLength);this.transmuxer.push(E)}reset(){this.transmuxer.reset()}setTimestampOffset(b){const E=b.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Y.secondsToVideoTs(E)))}setAudioAppendStart(b){this.transmuxer.setAudioAppendStart(Math.ceil(Y.secondsToVideoTs(b.appendStart)))}setRemux(b){this.transmuxer.setRemux(b.remux)}flush(b){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(b){this.transmuxer.alignGopsWith(b.gopsToAlignWith.slice())}}self.onmessage=function(p){if(p.data.action==="init"&&p.data.options){this.messageHandlers=new QS(self,p.data.options);return}this.messageHandlers||(this.messageHandlers=new QS(self)),p.data&&p.data.action&&p.data.action!=="init"&&this.messageHandlers[p.data.action]&&this.messageHandlers[p.data.action](p.data)}}));var _se=Q$(Sse);const Cse=(n,e,t)=>{const{type:i,initSegment:r,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:c}=n.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const u=n.data.segment.boxes||{data:n.data.segment.data},d={type:i,data:new Uint8Array(u.data,u.data.byteOffset,u.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};typeof l<"u"&&(d.videoFrameDtsTime=l),typeof c<"u"&&(d.videoFramePtsTime=c),t(d)},Ase=({transmuxedData:n,callback:e})=>{n.buffer=[],e(n)},kse=(n,e)=>{e.gopInfo=n.data.gopInfo},X$=n=>{const{transmuxer:e,bytes:t,audioAppendStart:i,gopsToAlignWith:r,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:c,onVideoSegmentTimingInfo:u,onAudioSegmentTimingInfo:d,onId3:h,onCaptions:f,onDone:m,onEndedTimeline:g,onTransmuxerLog:_,isEndOfTimeline:v}=n,y={buffer:[]};let T=v;const N=P=>{e.currentTransmux===n&&(P.data.action==="data"&&Cse(P,y,a),P.data.action==="trackinfo"&&o(P.data.trackInfo),P.data.action==="gopInfo"&&kse(P,y),P.data.action==="audioTimingInfo"&&l(P.data.audioTimingInfo),P.data.action==="videoTimingInfo"&&c(P.data.videoTimingInfo),P.data.action==="videoSegmentTimingInfo"&&u(P.data.videoSegmentTimingInfo),P.data.action==="audioSegmentTimingInfo"&&d(P.data.audioSegmentTimingInfo),P.data.action==="id3Frame"&&h([P.data.id3Frame],P.data.id3Frame.dispatchType),P.data.action==="caption"&&f(P.data.caption),P.data.action==="endedtimeline"&&(T=!1,g()),P.data.action==="log"&&_(P.data.log),P.data.type==="transmuxed"&&(T||(e.onmessage=null,Ase({transmuxedData:y,callback:m}),J$(e))))};if(e.onmessage=N,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const P=t instanceof ArrayBuffer?t:t.buffer,F=t instanceof ArrayBuffer?0:t.byteOffset;e.postMessage({action:"push",data:P,byteOffset:F,byteLength:t.byteLength},[P])}v&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},J$=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),typeof n.currentTransmux=="function"?n.currentTransmux():X$(n.currentTransmux))},yN=(n,e)=>{n.postMessage({action:e}),J$(n)},Z$=(n,e)=>{if(!e.currentTransmux){e.currentTransmux=n,yN(e,n);return}e.transmuxQueue.push(yN.bind(null,e,n))},Nse=n=>{Z$("reset",n)},Dse=n=>{Z$("endTimeline",n)},e4=n=>{if(!n.transmuxer.currentTransmux){n.transmuxer.currentTransmux=n,X$(n);return}n.transmuxer.transmuxQueue.push(n)},Pse=n=>{const e=new _se;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:n}),e};var pw={reset:Nse,endTimeline:Dse,transmux:e4,createTransmuxer:Pse};const Qh=function(n){const e=n.transmuxer,t=n.endAction||n.action,i=n.callback,r=Sn({},n,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,n.byteOffset||0,n.byteLength||a.data.data.byteLength),n.data&&(n.data=a.data.data)),i(a.data))};if(e.addEventListener("message",s),n.data){const a=n.data instanceof ArrayBuffer;r.byteOffset=a?0:n.data.byteOffset,r.byteLength=n.data.byteLength;const o=[a?n.data:n.data.buffer];e.postMessage(r,o)}else e.postMessage(r)},ea={FAILURE:2,TIMEOUT:-101,ABORTED:-102},bE=n=>{n.forEach(e=>{e.abort()})},Ise=n=>({bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}),Rse=n=>{const e=n.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=n.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},SS=(n,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:ea.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:ea.ABORTED,xhr:e}:n?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:ea.FAILURE,xhr:e}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:ea.FAILURE,xhr:e}:null,bN=(n,e,t)=>(i,r)=>{const s=r.response,a=SS(i,r);if(a)return t(a,n);if(s.byteLength!==16)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:ea.FAILURE,xhr:r},n);const o=new DataView(s),l=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]);for(let c=0;c<e.length;c++)e[c].bytes=l;return t(null,n)},t4=(n,e)=>{const t=j1(n.map.bytes);if(t!=="mp4"){const i=n.map.resolvedUri||n.map.uri;return e({internal:!0,message:"Found unsupported ".concat(t||"unknown"," container for initialization segment at URL: ").concat(i),code:ea.FAILURE})}Qh({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:i,data:r})=>(n.map.bytes=r,i.forEach(function(s){n.map.tracks=n.map.tracks||{},!n.map.tracks[s.type]&&(n.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[s.id]=s.timescale))}),e(null))})},Ose=({segment:n,finishProcessingFn:e})=>(t,i)=>{const r=SS(t,i);if(r)return e(r,n);const s=new Uint8Array(i.response);if(n.map.key)return n.map.encryptedBytes=s,e(null,n);n.map.bytes=s,t4(n,function(a){if(a)return a.xhr=i,a.status=i.status,e(a,n);e(null,n)})},Mse=({segment:n,finishProcessingFn:e,responseType:t})=>(i,r)=>{const s=SS(i,r);if(s)return e(s,n);const a=t==="arraybuffer"||!r.responseText?r.response:Ese(r.responseText.substring(n.lastReachedChar||0));return n.stats=Ise(r),n.key?n.encryptedBytes=new Uint8Array(a):n.bytes=new Uint8Array(a),e(null,n)},Lse=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})=>{const f=n.map&&n.map.tracks||{},m=!!(f.audio&&f.video);let g=i.bind(null,n,"audio","start");const _=i.bind(null,n,"audio","end");let v=i.bind(null,n,"video","start");const y=i.bind(null,n,"video","end"),T=()=>e4({bytes:e,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:m,onData:N=>{N.type=N.type==="combined"?"video":N.type,u(n,N)},onTrackInfo:N=>{t&&(m&&(N.isMuxed=!0),t(n,N))},onAudioTimingInfo:N=>{g&&typeof N.start<"u"&&(g(N.start),g=null),_&&typeof N.end<"u"&&_(N.end)},onVideoTimingInfo:N=>{v&&typeof N.start<"u"&&(v(N.start),v=null),y&&typeof N.end<"u"&&y(N.end)},onVideoSegmentTimingInfo:N=>{r(N)},onAudioSegmentTimingInfo:N=>{s(N)},onId3:(N,P)=>{a(n,N,P)},onCaptions:N=>{o(n,[N])},isEndOfTimeline:l,onEndedTimeline:()=>{c()},onTransmuxerLog:h,onDone:N=>{d&&(N.type=N.type==="combined"?"video":N.type,d(null,n,N))}});Qh({action:"probeTs",transmuxer:n.transmuxer,data:e,baseStartTime:n.baseStartTime,callback:N=>{n.bytes=e=N.data;const P=N.result;P&&(t(n,{hasAudio:P.hasAudio,hasVideo:P.hasVideo,isMuxed:m}),t=null,P.hasAudio&&!m&&g(P.audioStart),P.hasVideo&&v(P.videoStart),g=null,v=null),T()}})},n4=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})=>{let f=new Uint8Array(e);if(oie(f)){n.isFmp4=!0;const{tracks:m}=n.map,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&m.audio.codec!=="enca"&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&m.video.codec!=="encv"&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),t(n,g);const _=(v,y)=>{u(n,{data:f,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),y&&y.length&&a(n,y),v&&v.length&&o(n,v),d(null,n,{})};Qh({action:"probeMp4StartTime",timescales:n.map.timescales,data:f,transmuxer:n.transmuxer,callback:({data:v,startTime:y})=>{e=v.buffer,n.bytes=f=v,g.hasAudio&&!g.isMuxed&&i(n,"audio","start",y),g.hasVideo&&i(n,"video","start",y),Qh({action:"probeEmsgID3",data:f,transmuxer:n.transmuxer,offset:y,callback:({emsgData:T,id3Frames:N})=>{if(e=T.buffer,n.bytes=f=T,!m.video||!v.byteLength||!n.transmuxer){_(void 0,N);return}Qh({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:f,timescales:n.map.timescales,trackIds:[m.video.id],callback:P=>{e=P.data.buffer,n.bytes=f=P.data,P.logs.forEach(function(F){h(Bt(F,{stream:"mp4CaptionParser"}))}),_(P.captions,N)}})}})}});return}if(!n.transmuxer){d(null,n,{});return}if(typeof n.container>"u"&&(n.container=j1(f)),n.container!=="ts"&&n.container!=="aac"){t(n,{hasAudio:!1,hasVideo:!1}),d(null,n,{});return}Lse({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})},i4=function({id:n,key:e,encryptedBytes:t,decryptionWorker:i},r){const s=o=>{if(o.data.source===n){i.removeEventListener("message",s);const l=o.data.decrypted;r(new Uint8Array(l.bytes,l.byteOffset,l.byteLength))}};i.addEventListener("message",s);let a;e.bytes.slice?a=e.bytes.slice():a=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(j$({source:n,encrypted:t,key:a,iv:e.iv}),[t.buffer,a.buffer])},$se=({decryptionWorker:n,segment:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})=>{i4({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:n},f=>{e.bytes=f,n4({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})})},Bse=({activeXhrs:n,decryptionWorker:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})=>{let f=0,m=!1;return(g,_)=>{if(!m){if(g)return m=!0,bE(n),d(g,_);if(f+=1,f===n.length){const v=function(){if(_.encryptedBytes)return $se({decryptionWorker:e,segment:_,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h});n4({segment:_,bytes:_.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})};if(_.endOfAllRequests=Date.now(),_.map&&_.map.encryptedBytes&&!_.map.bytes)return i4({decryptionWorker:e,id:_.requestId+"-init",encryptedBytes:_.map.encryptedBytes,key:_.map.key},y=>{_.map.bytes=y,t4(_,T=>{if(T)return bE(n),d(T,_);v()})});v()}}}},Fse=({loadendState:n,abortFn:e})=>t=>{t.target.aborted&&e&&!n.calledAbortFn&&(e(),n.calledAbortFn=!0)},qse=({segment:n,progressFn:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u})=>d=>{if(!d.target.aborted)return n.stats=Bt(n.stats,Rse(d)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),e(d,n)},Use=({xhr:n,xhrOptions:e,decryptionWorker:t,segment:i,abortFn:r,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:f,dataFn:m,doneFn:g,onTransmuxerLog:_})=>{const v=[],y=Bse({activeXhrs:v,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:f,dataFn:m,doneFn:g,onTransmuxerLog:_});if(i.key&&!i.key.bytes){const $=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&$.push(i.map.key);const B=Bt(e,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),M=bN(i,$,y),Z=n(B,M);v.push(Z)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const O=Bt(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),K=bN(i,[i.map.key],y),z=n(O,K);v.push(z)}const B=Bt(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:gE(i.map)}),M=Ose({segment:i,finishProcessingFn:y}),Z=n(B,M);v.push(Z)}const T=Bt(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:gE(i)}),N=Mse({segment:i,finishProcessingFn:y,responseType:T.responseType}),P=n(T,N);P.addEventListener("progress",qse({segment:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:f,dataFn:m})),v.push(P);const F={};return v.forEach($=>{$.addEventListener("loadend",Fse({loadendState:F,abortFn:r}))}),()=>bE(v)},jse=Ds("CodecUtils"),zse=function(n){const e=n.attributes||{};if(e.CODECS)return Vs(e.CODECS)},r4=(n,e)=>{const t=e.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&t.AUDIO&&n.mediaGroups.AUDIO[t.AUDIO]},Vse=(n,e)=>{if(!r4(n,e))return!0;const t=e.attributes||{},i=n.mediaGroups.AUDIO[t.AUDIO];for(const r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1},Ey=function(n){const e={};return n.forEach(({mediaType:t,type:i,details:r})=>{e[t]=e[t]||[],e[t].push(bL("".concat(i).concat(r)))}),Object.keys(e).forEach(function(t){if(e[t].length>1){jse("multiple ".concat(t," codecs found as attributes: ").concat(e[t].join(", "),". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.")),e[t]=null;return}e[t]=e[t][0]}),e},vN=function(n){let e=0;return n.audio&&e++,n.video&&e++,e},Kh=function(n,e){const t=e.attributes||{},i=Ey(zse(e)||[]);if(r4(n,e)&&!i.audio&&!Vse(n,e)){const r=Ey(ote(n,t.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},Em=Ds("PlaylistSelector"),wN=function(n){if(!n||!n.playlist)return;const e=n.playlist;return JSON.stringify({id:e.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:e.attributes&&e.attributes.CODECS||""})},Ty=function(n,e){if(!n)return"";const t=G.getComputedStyle(n);return t?t[e]:""},Du=function(n,e){const t=n.slice();n.sort(function(i,r){const s=e(i,r);return s===0?t.indexOf(i)-t.indexOf(r):s})},_S=function(n,e){let t,i;return n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH),t=t||G.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||G.Number.MAX_VALUE,t-i},Hse=function(n,e){let t,i;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(t=n.attributes.RESOLUTION.width),t=t||G.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||G.Number.MAX_VALUE,t===i&&n.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?n.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-i};let s4=function(n,e,t,i,r,s){if(!n)return;const a={bandwidth:e,width:t,height:i,limitRenditionByPlayerDimensions:r};let o=n.playlists;Gi.isAudioOnly(n)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(P=>{let F;const $=P.attributes&&P.attributes.RESOLUTION&&P.attributes.RESOLUTION.width,B=P.attributes&&P.attributes.RESOLUTION&&P.attributes.RESOLUTION.height;return F=P.attributes&&P.attributes.BANDWIDTH,F=F||G.Number.MAX_VALUE,{bandwidth:F,width:$,height:B,playlist:P}});Du(l,(P,F)=>P.bandwidth-F.bandwidth),l=l.filter(P=>!Gi.isIncompatible(P.playlist));let c=l.filter(P=>Gi.isEnabled(P.playlist));c.length||(c=l.filter(P=>!Gi.isDisabled(P.playlist)));const u=c.filter(P=>P.bandwidth*jn.BANDWIDTH_VARIANCE<e);let d=u[u.length-1];const h=u.filter(P=>P.bandwidth===d.bandwidth)[0];if(r===!1){const P=h||c[0]||l[0];if(P&&P.playlist){let F="sortedPlaylistReps";return h&&(F="bandwidthBestRep"),c[0]&&(F="enabledPlaylistReps"),Em("choosing ".concat(wN(P)," using ").concat(F," with options"),a),P.playlist}return Em("could not choose a playlist with options",a),null}const f=u.filter(P=>P.width&&P.height);Du(f,(P,F)=>P.width-F.width);const m=f.filter(P=>P.width===t&&P.height===i);d=m[m.length-1];const g=m.filter(P=>P.bandwidth===d.bandwidth)[0];let _,v,y;g||(_=f.filter(P=>P.width>t||P.height>i),v=_.filter(P=>P.width===_[0].width&&P.height===_[0].height),d=v[v.length-1],y=v.filter(P=>P.bandwidth===d.bandwidth)[0]);let T;if(s.leastPixelDiffSelector){const P=f.map(F=>(F.pixelDiff=Math.abs(F.width-t)+Math.abs(F.height-i),F));Du(P,(F,$)=>F.pixelDiff===$.pixelDiff?$.bandwidth-F.bandwidth:F.pixelDiff-$.pixelDiff),T=P[0]}const N=T||y||g||h||c[0]||l[0];if(N&&N.playlist){let P="sortedPlaylistReps";return T?P="leastPixelDiffRep":y?P="resolutionPlusOneRep":g?P="resolutionBestRep":h?P="bandwidthBestRep":c[0]&&(P="enabledPlaylistReps"),Em("choosing ".concat(wN(N)," using ").concat(P," with options"),a),N.playlist}return Em("could not choose a playlist with options",a),null};const xN=function(){const n=this.useDevicePixelRatio&&G.devicePixelRatio||1;return s4(this.playlists.main,this.systemBandwidth,parseInt(Ty(this.tech_.el(),"width"),10)*n,parseInt(Ty(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)},Wse=function(n){let e=-1,t=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const i=this.useDevicePixelRatio&&G.devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=n*this.systemBandwidth+(1-n)*e,t=this.systemBandwidth),s4(this.playlists.main,e,parseInt(Ty(this.tech_.el(),"width"),10)*i,parseInt(Ty(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},Gse=function(n){const{main:e,currentTime:t,bandwidth:i,duration:r,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=n,c=e.playlists.filter(m=>!Gi.isIncompatible(m));let u=c.filter(Gi.isEnabled);u.length||(u=c.filter(m=>!Gi.isDisabled(m)));const h=u.filter(Gi.hasAttribute.bind(null,"BANDWIDTH")).map(m=>{const _=l.getSyncPoint(m,r,o,t)?1:2,y=Gi.estimateSegmentRequestTime(s,i,m)*_-a;return{playlist:m,rebufferingImpact:y}}),f=h.filter(m=>m.rebufferingImpact<=0);return Du(f,(m,g)=>_S(g.playlist,m.playlist)),f.length?f[0]:(Du(h,(m,g)=>m.rebufferingImpact-g.rebufferingImpact),h[0]||null)},Qse=function(){const n=this.playlists.main.playlists.filter(Gi.isEnabled);return Du(n,(t,i)=>_S(t,i)),n.filter(t=>!!Kh(this.playlists.main,t).video)[0]||null},Kse=n=>{let e=0,t;return n.bytes&&(t=new Uint8Array(n.bytes),n.segments.forEach(i=>{t.set(i,e),e+=i.byteLength})),t},Yse=function(n,e,t){if(!n[t]){e.trigger({type:"usage",name:"vhs-608"});let i=t;/^cc708_/.test(t)&&(i="SERVICE"+t.split("_")[1]);const r=e.textTracks().getTrackById(i);if(r)n[t]=r;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const c=s[i];c&&(a=c.label,o=c.language,l=c.default),n[t]=e.addRemoteTextTrack({kind:"captions",id:i,default:l,label:a,language:o},!1).track}}},Xse=function({inbandTextTracks:n,captionArray:e,timestampOffset:t}){if(!e)return;const i=G.WebKitDataCue||G.VTTCue;e.forEach(r=>{const s=r.stream;r.content?r.content.forEach(a=>{const o=new i(r.startTime+t,r.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",n[s].addCue(o)}):n[s].addCue(new i(r.startTime+t,r.endTime+t,r.text))})},Jse=function(n){Object.defineProperties(n.frame,{id:{get(){return ge.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key}},value:{get(){return ge.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data}},privateData:{get(){return ge.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data}}})},Zse=({inbandTextTracks:n,metadataArray:e,timestampOffset:t,videoDuration:i})=>{if(!e)return;const r=G.WebKitDataCue||G.VTTCue,s=n.metadataTrack_;if(!s||(e.forEach(u=>{const d=u.cueTime+t;typeof d!="number"||G.isNaN(d)||d<0||!(d<1/0)||!u.frames||!u.frames.length||u.frames.forEach(h=>{const f=new r(d,d,h.value||h.url||h.data||"");f.frame=h,f.value=h,Jse(f),s.addCue(f)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let u=0;u<a.length;u++)a[u]&&o.push(a[u]);const l=o.reduce((u,d)=>{const h=u[d.startTime]||[];return h.push(d),u[d.startTime]=h,u},{}),c=Object.keys(l).sort((u,d)=>Number(u)-Number(d));c.forEach((u,d)=>{const h=l[u],f=isFinite(i)?i:0,m=Number(c[d+1])||f;h.forEach(g=>{g.endTime=m})})},eae={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},tae=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),nae=({inbandTextTracks:n,dateRanges:e})=>{const t=n.metadataTrack_;if(!t)return;const i=G.WebKitDataCue||G.VTTCue;e.forEach(r=>{for(const s of Object.keys(r)){if(tae.has(s))continue;const a=new i(r.startTime,r.endTime,"");a.id=r.id,a.type="com.apple.quicktime.HLS",a.value={key:eae[s],data:r[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}r.processDateRange()})},EN=(n,e,t)=>{n.metadataTrack_||(n.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,ge.browser.IS_ANY_SAFARI||(n.metadataTrack_.inBandMetadataTrackDispatchType=e))},Ah=function(n,e,t){let i,r;if(t&&t.cues)for(i=t.cues.length;i--;)r=t.cues[i],r.startTime>=n&&r.endTime<=e&&t.removeCue(r)},iae=function(n){const e=n.cues;if(!e)return;const t={};for(let i=e.length-1;i>=0;i--){const r=e[i],s="".concat(r.startTime,"-").concat(r.endTime,"-").concat(r.text);t[s]?n.removeCue(r):t[s]=r}},rae=(n,e,t)=>{if(typeof e>"u"||e===null||!n.length)return[];const i=Math.ceil((e-t+3)*ly.ONE_SECOND_IN_TS);let r;for(r=0;r<n.length&&!(n[r].pts>i);r++);return n.slice(r)},sae=(n,e,t)=>{if(!e.length)return n;if(t)return e.slice();const i=e[0].pts;let r=0;for(r;r<n.length&&!(n[r].pts>=i);r++);return n.slice(0,r).concat(e)},aae=(n,e,t,i)=>{const r=Math.ceil((e-i)*ly.ONE_SECOND_IN_TS),s=Math.ceil((t-i)*ly.ONE_SECOND_IN_TS),a=n.slice();let o=n.length;for(;o--&&!(n[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(n[l].pts<=r););return l=Math.max(l,0),a.splice(l,o-l+1),a},oae=function(n,e){if(!n&&!e||!n&&e||n&&!e)return!1;if(n===e)return!0;const t=Object.keys(n).sort(),i=Object.keys(e).sort();if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(s!==i[r]||n[s]!==e[s])return!1}return!0},a4=22,lae=function(n,e,t){e=e||[];const i=[];let r=0;for(let s=0;s<e.length;s++){const a=e[s];if(n===a.timeline&&(i.push(s),r+=a.duration,r>t))return s}return i.length===0?0:i[i.length-1]},dh=1,cae=500,TN=n=>typeof n=="number"&&isFinite(n),Tm=1/60,uae=(n,e,t)=>n!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,dae=(n,e,t)=>{let i=e-jn.BACK_BUFFER_LENGTH;n.length&&(i=Math.max(i,n.start(0)));const r=e-t;return Math.min(r,i)},zc=n=>{const{startOfSegment:e,duration:t,segment:i,part:r,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:c,timeline:u}=n,d=o.length-1;let h="mediaIndex/partIndex increment";n.getMediaInfoForTime?h="getMediaInfoForTime (".concat(n.getMediaInfoForTime,")"):n.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(h+=" with independent ".concat(n.independent));const f=typeof c=="number",m=n.segment.uri?"segment":"pre-segment",g=f?k$({preloadSegment:i})-1:0;return"".concat(m," [").concat(s+l,"/").concat(s+d,"]")+(f?" part [".concat(c,"/").concat(g,"]"):"")+" segment start/end [".concat(i.start," => ").concat(i.end,"]")+(f?" part start/end [".concat(r.start," => ").concat(r.end,"]"):"")+" startOfSegment [".concat(e,"]")+" duration [".concat(t,"]")+" timeline [".concat(u,"]")+" selected by [".concat(h,"]")+" playlist [".concat(a,"]")},SN=n=>"".concat(n,"TimingInfo"),hae=({segmentTimeline:n,currentTimeline:e,startOfSegment:t,buffered:i,overrideCheck:r})=>!r&&n===e?null:n<e?t:i.length?i.end(i.length-1):t,_N=({timelineChangeController:n,currentTimeline:e,segmentTimeline:t,loaderType:i,audioDisabled:r})=>{if(e===t)return!1;if(i==="audio"){const s=n.lastTimelineChange({type:"main"});return!s||s.to!==t}if(i==="main"&&r){const s=n.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},fae=n=>{let e=0;return["video","audio"].forEach(function(t){const i=n["".concat(t,"TimingInfo")];if(!i)return;const{start:r,end:s}=i;let a;typeof r=="bigint"||typeof s=="bigint"?a=G.BigInt(s)-G.BigInt(r):typeof r=="number"&&typeof s=="number"&&(a=s-r),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},CN=({segmentDuration:n,maxDuration:e})=>n?Math.round(n)>e+Vo:!1,pae=(n,e)=>{if(e!=="hls")return null;const t=fae({audioTimingInfo:n.audioTimingInfo,videoTimingInfo:n.videoTimingInfo});if(!t)return null;const i=n.playlist.targetDuration,r=CN({segmentDuration:t,maxDuration:i*2}),s=CN({segmentDuration:t,maxDuration:i}),a="Segment with index ".concat(n.mediaIndex," ")+"from playlist ".concat(n.playlist.id," ")+"has a duration of ".concat(t," ")+"when the reported duration is ".concat(n.duration," ")+"and the target duration is ".concat(i,". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return r||s?{severity:r?"warn":"info",message:a}:null};class vE extends ge.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.replaceSegmentsUntil_=-1,this.logger_=Ds("SegmentLoader[".concat(this.loaderType_,"]")),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_("".concat(this.state_," -> ").concat(i)),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return pw.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&G.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,G.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&pw.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return fi();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:i,isMuxed:r}=e;if(i&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const i=xy(e);let r=this.initSegments_[i];return t&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,t=!1){if(!e)return null;const i=z$(e);let r=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[i]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(r||e).resolvedUri};return r&&(s.bytes=r.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(i&&(i.id?s=i.id:i.uri&&(s=i.uri)),this.logger_("playlist update [".concat(s," => ").concat(e.id||e.uri,"]")),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-i.mediaSequence;if(this.logger_("live window shift [".concat(a,"]")),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_("currently processing part (index ".concat(this.partIndex,") no longer exists.")),this.resetLoader(),this.mediaIndex=l}}r&&(r.mediaIndex-=a,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(G.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetLoaderProperties(){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0}}resetEverything(e){this.resetLoaderProperties(),this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&pw.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=()=>{},r=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&i()};(r||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(r||this.loaderType_==="main")&&(this.gopBuffer_=aae(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)Ah(e,t,this.inbandTextTracks_[o]);Ah(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&G.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=G.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&G.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=G.setTimeout(this.monitorBufferTick_.bind(this),cae)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;const r=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!r||!r.parts||i+1===r.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=hN(e)||0,i=vS(e,this.currentTime_()),r=!this.hasPlayed_()&&i>=1,s=i>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||r||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=lae(this.currentTimeline_,a,t);else if(this.mediaIndex!==null){const h=a[this.mediaIndex],f=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=h.end?h.end:t,h.parts&&h.parts[f+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=f+1):o.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:h,startTime:f,partIndex:m}=Gi.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});o.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd ".concat(t):"currentTime ".concat(this.currentTime_()),o.mediaIndex=h,o.startOfSegment=f,o.partIndex=m}const l=a[o.mediaIndex];let c=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!c)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,c=l.parts[0]);const u=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&c&&!u&&!c.independent)if(o.partIndex===0){const h=a[o.mediaIndex-1],f=h.parts&&h.parts.length&&h.parts[h.parts.length-1];f&&f.independent&&(o.mediaIndex-=1,o.partIndex=h.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&d&&!this.seeking_()?null:this.generateSegmentInfo_(o)}generateSegmentInfo_(e){const{independent:t,playlist:i,mediaIndex:r,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:c}=e,u=i.segments[r],d=typeof o=="number"&&u.parts[o],h={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||u.resolvedUri,mediaIndex:r,partIndex:d?o:null,isSyncRequest:a,startOfSegment:s,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:d&&d.duration||u.duration,segment:u,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:c,independent:t},f=typeof l<"u"?l:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:f});const m=hN(this.sourceUpdater_.audioBuffered());return typeof m=="number"&&(h.audioAppendStart=m-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=rae(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h}timestampOffsetForSegment_(e){return hae(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),i=e.bandwidth,r=this.pendingSegment_.duration,s=Gi.estimateSegmentRequestTime(r,i,this.playlist_,e.bytesReceived),a=Rre(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=Gse({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const c=s-a-o.rebufferingImpact;let u=.5;a<=Vo&&(u=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||c<u)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*jn.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_("Aborting ".concat(zc(e))),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},oae(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,t,i,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=SN(t);s[a]=s[a]||{},s[a][i]=r,this.logger_("timinginfo: ".concat(t," - ").concat(i," - ").concat(r)),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const r=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+r),o.endTime=Math.max(o.endTime,a.endTime+r),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:c}=s[a],u=this.inbandTextTracks_;this.logger_("adding cues from ".concat(o," -> ").concat(l," for ").concat(a)),Yse(u,this.vhs_.tech_,a),Ah(o,l,u[a]),Xse({captionArray:c,inbandTextTracks:u,timestampOffset:r})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));return}this.addMetadataToTextTrack(i,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!_N({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:i,hasVideo:r,isMuxed:s}=t;return!(r&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||_N({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,t));return}const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[SN(t.type)].start;else{const r=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&r&&r.hasVideo;let a;s&&(a=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const r=this.chooseNextRequest_();if(r.mediaIndex!==i.mediaIndex||r.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:r}){if(i){const s=xy(i);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},r){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Nl(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Nl(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,c=a.length?a.start(0):0,u=a.length?a.end(a.length-1):0;if(l-o<=dh&&u-c<=dh){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+"Appended byte length: ".concat(i.byteLength,", ")+"audio buffer: ".concat(Nl(s).join(", "),", ")+"video buffer: ".concat(Nl(a).join(", "),", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));const h=this.currentTime_()-dh;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ".concat(h)),this.remove(0,h,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in ".concat(dh,"s")),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=G.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},dh*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},r){if(r){if(r.code===a4){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error("".concat(t," append of ").concat(i.length,"b failed for segment ")+"#".concat(e.mediaIndex," in playlist ").concat(e.playlist.id)),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:r,bytes:s}){if(!s){const a=[r];let o=r.byteLength;i&&(a.unshift(i),o+=i.byteLength),s=Kse({bytes:o,segments:a})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const r=this.pendingSegment_.segment,s="".concat(e,"TimingInfo");r[s]||(r[s]={}),r[s].transmuxerPrependedSeconds=i.prependedContentDuration||0,r[s].transmuxedPresentationStart=i.start.presentation,r[s].transmuxedDecodeStart=i.start.decode,r[s].transmuxedPresentationEnd=i.end.presentation,r[s].transmuxedDecodeEnd=i.end.decode,r[s].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){const{type:i,data:r}=t;if(!r||!r.byteLength||i==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:s,data:r})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{const t=Sn({},e,{forceTimestampOffset:!0});Sn(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=i||r&&s;this.logger_("Requesting ".concat(zc(e))),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Use({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:c})=>{this.logger_("".concat(zc(e)," logged from transmuxer stream ").concat(c," as a ").concat(l,": ").concat(o))}})}trimBackBuffer_(e){const t=dae(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,i=e.part,r={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},s=e.playlist.segments[e.mediaIndex-1];if(s&&s.timeline===t.timeline&&(s.videoTimingInfo?r.baseStartTime=s.videoTimingInfo.transmuxedDecodeEnd:s.audioTimingInfo&&(r.baseStartTime=s.audioTimingInfo.transmuxedDecodeEnd)),t.key){const a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(t.key),r.key.iv=a}return t.map&&(r.map=this.initSegmentForMap(t.map)),r}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Tm){this.logger_("Ignoring segment's bandwidth because its duration of ".concat(e)+" is less than the min to record ".concat(Tm));return}this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===ea.ABORTED)return;if(this.pause(),e.code===ea.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=sae(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const c=t.segments[i-1];return i===0||!c||typeof c.start>"u"||c.end!==r+s?r:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:i,hasVideo:r,isMuxed:s}=t,a=this.loaderType_==="main"&&r,o=!this.audioDisabled_&&i&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=uae(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),r=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;r&&(e.timingInfo.end=typeof r.end=="number"?r.end:r.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=pae(e,this.sourceType_);if(t&&(t.severity==="warn"?ge.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_("Throwing away un-appended sync request ".concat(zc(e)));return}this.logger_("Appended ".concat(zc(e))),this.addSegmentMetadataCue_(e),this.currentTime_()>=this.replaceSegmentsUntil_&&(this.replaceSegmentsUntil_=-1,this.fetchAtBuffer_=!0),this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,r=e.part,s=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,a=r&&r.end&&this.currentTime_()-r.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_("bad ".concat(s?"segment":"part"," ").concat(zc(e))),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Tm){this.logger_("Ignoring segment's throughput because its duration of ".concat(e.duration)+" is less than the min to record ".concat(Tm));return}const t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,i=t.start,r=t.end;if(!TN(i)||!TN(r))return;Ah(i,r,this.segmentMetadataTrack_);const s=G.WebKitDataCue||G.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:r},o=JSON.stringify(a),l=new s(i,r,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}set replaceSegmentsUntil(e){this.logger_("Replacing currently buffered segments until ".concat(e)),this.replaceSegmentsUntil_=e}}function Pa(){}const o4=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},mae=["video","audio"],wE=(n,e)=>{const t=e["".concat(n,"Buffer")];return t&&t.updating||e.queuePending[n]},gae=(n,e)=>{for(let t=0;t<e.length;t++){const i=e[t];if(i.type==="mediaSource")return null;if(i.type===n)return t}return null},Pu=(n,e)=>{if(e.queue.length===0)return;let t=0,i=e.queue[t];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),Pu("audio",e),Pu("video",e));return}if(n!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||wE(n,e))){if(i.type!==n){if(t=gae(n,e.queue),t===null)return;i=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[n]=i,i.action(n,e),!i.doneFn){e.queuePending[n]=null,Pu(n,e);return}}},l4=(n,e)=>{const t=e["".concat(n,"Buffer")],i=o4(n);t&&(t.removeEventListener("updateend",e["on".concat(i,"UpdateEnd_")]),t.removeEventListener("error",e["on".concat(i,"Error_")]),e.codecs[n]=null,e["".concat(n,"Buffer")]=null)},Hs=(n,e)=>n&&e&&Array.prototype.indexOf.call(n.sourceBuffers,e)!==-1,ar={appendBuffer:(n,e,t)=>(i,r)=>{const s=r["".concat(i,"Buffer")];if(Hs(r.mediaSource,s)){r.logger_("Appending segment ".concat(e.mediaIndex,"'s ").concat(n.length," bytes to ").concat(i,"Buffer"));try{s.appendBuffer(n)}catch(a){r.logger_("Error with code ".concat(a.code," ")+(a.code===a4?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment ".concat(e.mediaIndex," to ").concat(i,"Buffer")),r.queuePending[i]=null,t(a)}}},remove:(n,e)=>(t,i)=>{const r=i["".concat(t,"Buffer")];if(Hs(i.mediaSource,r)){i.logger_("Removing ".concat(n," to ").concat(e," from ").concat(t,"Buffer"));try{r.remove(n,e)}catch(s){i.logger_("Remove ".concat(n," to ").concat(e," from ").concat(t,"Buffer failed"))}}},timestampOffset:n=>(e,t)=>{const i=t["".concat(e,"Buffer")];Hs(t.mediaSource,i)&&(t.logger_("Setting ".concat(e,"timestampOffset to ").concat(n)),i.timestampOffset=n)},callback:n=>(e,t)=>{n()},endOfStream:n=>e=>{if(e.mediaSource.readyState==="open"){e.logger_("Calling mediaSource endOfStream(".concat(n||"",")"));try{e.mediaSource.endOfStream(n)}catch(t){ge.log.warn("Failed to call media source endOfStream",t)}}},duration:n=>e=>{e.logger_("Setting mediaSource duration to ".concat(n));try{e.mediaSource.duration=n}catch(t){ge.log.warn("Failed to set media source duration",t)}},abort:()=>(n,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e["".concat(n,"Buffer")];if(Hs(e.mediaSource,t)){e.logger_("calling abort on ".concat(n,"Buffer"));try{t.abort()}catch(i){ge.log.warn("Failed to abort on ".concat(n,"Buffer"),i)}}},addSourceBuffer:(n,e)=>t=>{const i=o4(n),r=Sf(e);t.logger_("Adding ".concat(n,"Buffer with codec ").concat(e," to mediaSource"));const s=t.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",t["on".concat(i,"UpdateEnd_")]),s.addEventListener("error",t["on".concat(i,"Error_")]),t.codecs[n]=e,t["".concat(n,"Buffer")]=s},removeSourceBuffer:n=>e=>{const t=e["".concat(n,"Buffer")];if(l4(n,e),!!Hs(e.mediaSource,t)){e.logger_("Removing ".concat(n,"Buffer with codec ").concat(e.codecs[n]," from mediaSource"));try{e.mediaSource.removeSourceBuffer(t)}catch(i){ge.log.warn("Failed to removeSourceBuffer ".concat(n,"Buffer"),i)}}},changeType:n=>(e,t)=>{const i=t["".concat(e,"Buffer")],r=Sf(n);Hs(t.mediaSource,i)&&t.codecs[e]!==n&&(t.logger_("changing ".concat(e,"Buffer codec from ").concat(t.codecs[e]," to ").concat(n)),i.changeType(r),t.codecs[e]=n)}},or=({type:n,sourceUpdater:e,action:t,doneFn:i,name:r})=>{e.queue.push({type:n,action:t,doneFn:i,name:r}),Pu(n,e)},AN=(n,e)=>t=>{if(e.queuePending[n]){const i=e.queuePending[n].doneFn;e.queuePending[n]=null,i&&i(e["".concat(n,"Error_")])}Pu(n,e)};class c4 extends ge.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Pu("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Ds("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=AN("video",this),this.onAudioUpdateEnd_=AN("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){or({type:"mediaSource",sourceUpdater:this,action:ar.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){or({type:e,sourceUpdater:this,action:ar.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){ge.log.error("removeSourceBuffer is not supported!");return}or({type:"mediaSource",sourceUpdater:this,action:ar.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!ge.browser.IS_FIREFOX&&G.MediaSource&&G.MediaSource.prototype&&typeof G.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return G.SourceBuffer&&G.SourceBuffer.prototype&&typeof G.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){ge.log.error("changeType is not supported!");return}or({type:e,sourceUpdater:this,action:ar.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)})}appendBuffer(e,t){const{segmentInfo:i,type:r,bytes:s}=e;if(this.processedAppend_=!0,r==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_("delayed audio append of ".concat(s.length," until video append"));return}const a=t;if(or({type:r,sourceUpdater:this,action:ar.appendBuffer(s,i||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),r==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio ".concat(o.length," appendBuffers")),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return Hs(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:fi()}videoBuffered(){return Hs(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:fi()}buffered(){const e=Hs(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Hs(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():Ire(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Pa){or({type:"mediaSource",sourceUpdater:this,action:ar.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Pa){typeof e!="string"&&(e=void 0),or({type:"mediaSource",sourceUpdater:this,action:ar.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=Pa){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}or({type:"audio",sourceUpdater:this,action:ar.remove(e,t),doneFn:i,name:"remove"})}removeVideo(e,t,i=Pa){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}or({type:"video",sourceUpdater:this,action:ar.remove(e,t),doneFn:i,name:"remove"})}updating(){return!!(wE("audio",this)||wE("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(or({type:"audio",sourceUpdater:this,action:ar.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(or({type:"video",sourceUpdater:this,action:ar.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&or({type:"audio",sourceUpdater:this,action:ar.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&or({type:"video",sourceUpdater:this,action:ar.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),mae.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this["".concat(e,"QueueCallback")](()=>l4(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const kN=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),NN=new Uint8Array("\n\n".split("").map(n=>n.charCodeAt(0)));class yae extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class bae extends vE{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return fi();const e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return fi([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;const i=xy(e);let r=this.initSegments_[i];if(t&&!r&&e.bytes){const s=NN.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(NN,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){Ah(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===ea.TIMEOUT&&this.handleTimeout_(),e.code===ea.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=r.segment;if(s.map&&(s.map.bytes=t.map.bytes),r.bytes=t.bytes,typeof G.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(r)}catch(a){this.stopForError({message:a.message});return}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,r.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new G.VTTCue(a.startTime,a.endTime,a.text):a)}),iae(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,i=!1;if(typeof G.WebVTT!="function")throw new yae;typeof G.TextDecoder=="function"?t=new G.TextDecoder("utf8"):(t=G.WebVTT.StringDecoder(),i=!0);const r=new G.WebVTT.Parser(G,G.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=a=>{e.timestampmap=a},r.onparsingerror=a=>{ge.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;i&&(a=kN(a)),r.parse(a)}let s=e.bytes;i&&(s=kN(s)),r.parse(s),r.flush()}updateTimeMapping_(e,t,i){const r=e.segment;if(!t)return;if(!e.cues.length){r.empty=!0;return}const s=e.timestampmap,a=s.MPEGTS/ly.ONE_SECOND_IN_TS-s.LOCAL+t.mapping;if(e.cues.forEach(o=>{o.startTime+=a,o.endTime+=a}),!i.syncInfo){const o=e.cues[0].startTime,l=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(o,l-r.duration)}}}}const vae=function(n,e){const t=n.cues;for(let i=0;i<t.length;i++){const r=t[i];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},wae=function(n,e,t=0){if(!n.segments)return;let i=t,r;for(let s=0;s<n.segments.length;s++){const a=n.segments[s];if(r||(r=vae(e,i+a.duration/2)),r){if("cueIn"in a){r.endTime=i,r.adEndTime=i,i+=a.duration,r=null;continue}if(i<r.endTime){i+=a.duration;continue}r.endTime+=a.duration}else if("cueOut"in a&&(r=new G.VTTCue(i,i+a.duration,a.cueOut),r.adStartTime=i,r.adEndTime=i+parseFloat(a.cueOut),e.addCue(r)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);r=new G.VTTCue(i,i+a.duration,""),r.adStartTime=i-o,r.adEndTime=r.adStartTime+l,e.addCue(r)}i+=a.duration}},xae=86400,DN=[{name:"VOD",run:(n,e,t,i,r)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(n,e,t,i,r)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=dE(e);r=r||0;for(let l=0;l<o.length;l++){const c=e.endList||r===0?l:o.length-(l+1),u=o[c],d=u.segment,h=n.timelineToDatetimeMappings[d.timeline];if(!h||!d.dateTimeObject)continue;let m=d.dateTimeObject.getTime()/1e3+h;if(d.parts&&typeof u.partIndex=="number")for(let _=0;_<u.partIndex;_++)m+=d.parts[_].duration;const g=Math.abs(r-m);if(a!==null&&(g===0||a<g))break;a=g,s={time:m,segmentIndex:u.segmentIndex,partIndex:u.partIndex}}return s}},{name:"Segment",run:(n,e,t,i,r)=>{let s=null,a=null;r=r||0;const o=dE(e);for(let l=0;l<o.length;l++){const c=e.endList||r===0?l:o.length-(l+1),u=o[c],d=u.segment,h=u.part&&u.part.start||d&&d.start;if(d.timeline===i&&typeof h<"u"){const f=Math.abs(r-h);if(a!==null&&a<f)break;(!s||a===null||a>=f)&&(a=f,s={time:h,segmentIndex:u.segmentIndex,partIndex:u.partIndex})}}return s}},{name:"Discontinuity",run:(n,e,t,i,r)=>{let s=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],c=e.discontinuitySequence+o+1,u=n.discontinuities[c];if(u){const d=Math.abs(r-u.time);if(a!==null&&a<d)break;(!s||a===null||a>=d)&&(a=d,s={time:u.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(n,e,t,i,r)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class Eae extends ge.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=Ds("SyncController")}getSyncPoint(e,t,i,r){const s=this.runStrategies_(e,t,i,r);return s.length?this.selectSyncPoint_(s,{key:"time",value:r}):null}getExpiredTime(e,t){if(!e||!e.segments)return null;const i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;const r=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+Gh({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,r){const s=[];for(let a=0;a<DN.length;a++){const o=DN[a],l=o.run(this,e,t,i,r);l&&(l.strategy=o.name,s.push({strategy:o.name,syncPoint:l}))}return s}selectSyncPoint_(e,t){let i=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<r&&(r=o,i=e[a].syncPoint,s=e[a].strategy)}return this.logger_("syncPoint for [".concat(t.key,": ").concat(t.value,"] chosen with strategy")+" [".concat(s,"]: [time:").concat(i.time,",")+" segmentIndex:".concat(i.segmentIndex)+(typeof i.partIndex=="number"?",partIndex:".concat(i.partIndex):"")+"]"),i}saveExpiredSegmentInfo(e,t){const i=t.mediaSequence-e.mediaSequence;if(i>xae){ge.log.warn("Not saving expired segment info. Media sequence gap ".concat(i," is too large."));return}for(let r=i-1;r>=0;r--){const s=e.segments[r];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+r,time:s.start},this.logger_("playlist refresh sync: [time:".concat(t.syncInfo.time,",")+" mediaSequence: ".concat(t.syncInfo.mediaSequence,"]")),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),r=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));const s=r.dateTimeObject;r.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[r.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){const r=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_("time mapping for timeline ".concat(e.timeline,": ")+"[time: ".concat(a.time,"] [mapping: ").concat(a.mapping,"]"))),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!r.start||o<r.start)&&(r.start=o),r.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let r=0;r<t.discontinuityStarts.length;r++){const s=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let c;o<0?c=i.start-Gh({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):c=i.end+Gh({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:c,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class Tae extends ge.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Sae=K$(Y$(function(){var n=function(){function g(){this.listeners={}}var _=g.prototype;return _.on=function(y,T){this.listeners[y]||(this.listeners[y]=[]),this.listeners[y].push(T)},_.off=function(y,T){if(!this.listeners[y])return!1;var N=this.listeners[y].indexOf(T);return this.listeners[y]=this.listeners[y].slice(0),this.listeners[y].splice(N,1),N>-1},_.trigger=function(y){var T=this.listeners[y];if(T)if(arguments.length===2)for(var N=T.length,P=0;P<N;++P)T[P].call(this,arguments[1]);else for(var F=Array.prototype.slice.call(arguments,1),$=T.length,B=0;B<$;++B)T[B].apply(this,F)},_.dispose=function(){this.listeners={}},_.pipe=function(y){this.on("data",function(T){y.push(T)})},g}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(g){return g.subarray(0,g.byteLength-g[g.byteLength-1])}/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */const t=function(){const g=[[[],[],[],[],[]],[[],[],[],[],[]]],_=g[0],v=g[1],y=_[4],T=v[4];let N,P,F;const $=[],B=[];let M,Z,O,K,z,te;for(N=0;N<256;N++)B[($[N]=N<<1^(N>>7)*283)^N]=N;for(P=F=0;!y[P];P^=M||1,F=B[F]||1)for(K=F^F<<1^F<<2^F<<3^F<<4,K=K>>8^K&255^99,y[P]=K,T[K]=P,O=$[Z=$[M=$[P]]],te=O*16843009^Z*65537^M*257^P*16843008,z=$[K]*257^K*16843008,N=0;N<4;N++)_[N][P]=z=z<<24^z>>>8,v[N][K]=te=te<<24^te>>>8;for(N=0;N<5;N++)_[N]=_[N].slice(0),v[N]=v[N].slice(0);return g};let i=null;class r{constructor(_){i||(i=t()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let v,y,T;const N=this._tables[0][4],P=this._tables[1],F=_.length;let $=1;if(F!==4&&F!==6&&F!==8)throw new Error("Invalid aes key size");const B=_.slice(0),M=[];for(this._key=[B,M],v=F;v<4*F+28;v++)T=B[v-1],(v%F===0||F===8&&v%F===4)&&(T=N[T>>>24]<<24^N[T>>16&255]<<16^N[T>>8&255]<<8^N[T&255],v%F===0&&(T=T<<8^T>>>24^$<<24,$=$<<1^($>>7)*283)),B[v]=B[v-F]^T;for(y=0;v;y++,v--)T=B[y&3?v:v-4],v<=4||y<4?M[y]=T:M[y]=P[0][N[T>>>24]]^P[1][N[T>>16&255]]^P[2][N[T>>8&255]]^P[3][N[T&255]]}decrypt(_,v,y,T,N,P){const F=this._key[1];let $=_^F[0],B=T^F[1],M=y^F[2],Z=v^F[3],O,K,z;const te=F.length/4-2;let ue,ye=4;const be=this._tables[1],de=be[0],he=be[1],ee=be[2],le=be[3],Te=be[4];for(ue=0;ue<te;ue++)O=de[$>>>24]^he[B>>16&255]^ee[M>>8&255]^le[Z&255]^F[ye],K=de[B>>>24]^he[M>>16&255]^ee[Z>>8&255]^le[$&255]^F[ye+1],z=de[M>>>24]^he[Z>>16&255]^ee[$>>8&255]^le[B&255]^F[ye+2],Z=de[Z>>>24]^he[$>>16&255]^ee[B>>8&255]^le[M&255]^F[ye+3],ye+=4,$=O,B=K,M=z;for(ue=0;ue<4;ue++)N[(3&-ue)+P]=Te[$>>>24]<<24^Te[B>>16&255]<<16^Te[M>>8&255]<<8^Te[Z&255]^F[ye++],O=$,$=B,B=M,M=Z,Z=O}}class s extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(_){this.jobs.push(_),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(g){return g<<24|(g&65280)<<8|(g&16711680)>>8|g>>>24},o=function(g,_,v){const y=new Int32Array(g.buffer,g.byteOffset,g.byteLength>>2),T=new r(Array.prototype.slice.call(_)),N=new Uint8Array(g.byteLength),P=new Int32Array(N.buffer);let F,$,B,M,Z,O,K,z,te;for(F=v[0],$=v[1],B=v[2],M=v[3],te=0;te<y.length;te+=4)Z=a(y[te]),O=a(y[te+1]),K=a(y[te+2]),z=a(y[te+3]),T.decrypt(Z,O,K,z,P,te),P[te]=a(P[te]^F),P[te+1]=a(P[te+1]^$),P[te+2]=a(P[te+2]^B),P[te+3]=a(P[te+3]^M),F=Z,$=O,B=K,M=z;return N};class l{constructor(_,v,y,T){const N=l.STEP,P=new Int32Array(_.buffer),F=new Uint8Array(_.byteLength);let $=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(P.subarray($,$+N),v,y,F)),$=N;$<P.length;$+=N)y=new Uint32Array([a(P[$-4]),a(P[$-3]),a(P[$-2]),a(P[$-1])]),this.asyncStream_.push(this.decryptChunk_(P.subarray($,$+N),v,y,F));this.asyncStream_.push(function(){T(null,e(F))})}static get STEP(){return 32e3}decryptChunk_(_,v,y,T){return function(){const N=o(_,v,y);T.set(N,_.byteOffset)}}}var c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},u;typeof window<"u"?u=window:typeof c<"u"?u=c:typeof self<"u"?u=self:u={};var d=u,h=function(_){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(_):_&&_.buffer instanceof ArrayBuffer},f=d.BigInt||Number;f("0x1"),f("0x100"),f("0x10000"),f("0x1000000"),f("0x100000000"),f("0x10000000000"),f("0x1000000000000"),f("0x100000000000000"),f("0x10000000000000000"),function(){var g=new Uint16Array([65484]),_=new Uint8Array(g.buffer,g.byteOffset,g.byteLength);return _[0]===255?"big":_[0]===204?"little":"unknown"}();const m=function(g){const _={};return Object.keys(g).forEach(v=>{const y=g[v];h(y)?_[v]={bytes:y.buffer,byteOffset:y.byteOffset,byteLength:y.byteLength}:_[v]=y}),_};self.onmessage=function(g){const _=g.data,v=new Uint8Array(_.encrypted.bytes,_.encrypted.byteOffset,_.encrypted.byteLength),y=new Uint32Array(_.key.bytes,_.key.byteOffset,_.key.byteLength/4),T=new Uint32Array(_.iv.bytes,_.iv.byteOffset,_.iv.byteLength/4);new l(v,y,T,function(N,P){self.postMessage(m({source:_.source,decrypted:P}),[P.buffer])})}}));var _ae=Q$(Sae);const Cae=n=>{let e=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},Sy=(n,e)=>{n.abort(),n.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},xE=(n,e)=>{e.activePlaylistLoader=n,n.load()},Aae=(n,e)=>()=>{const{segmentLoaders:{[n]:t,main:i},mediaTypes:{[n]:r}}=e,s=r.activeTrack(),a=r.getActiveGroup(),o=r.activePlaylistLoader,l=r.lastGroup_;if(!(a&&l&&a.id===l.id)&&(r.lastGroup_=a,r.lastTrack_=s,Sy(t,r),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&i.resetEverything();return}t.resyncLoader(),xE(a.playlistLoader,r)}},kae=(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:i}}=e;i.lastGroup_=null,t.abort(),t.pause()},Nae=(n,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[n]:i,main:r},mediaTypes:{[n]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,c=s.lastTrack_;if(!(c&&a&&c.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,Sy(i,s),!!o)){if(o.isMainPlaylist){if(!a||!c||a.id===c.id)return;const u=e.vhs.playlistController_,d=u.selectPlaylist();if(u.media()===d)return;s.logger_("track change. Switching main audio from ".concat(c.id," to ").concat(a.id)),t.pause(),r.resetEverything(),u.fastQualityChange_(d);return}if(n==="AUDIO"){if(!o.playlistLoader){r.setAudio(!0),r.resetEverything();return}i.setAudio(!0),r.setAudio(!1)}if(l===o.playlistLoader){xE(o.playlistLoader,s);return}i.track&&i.track(a),i.resetEverything(),xE(o.playlistLoader,s)}},_y={AUDIO:(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:i},excludePlaylist:r}=e;Sy(t,i);const s=i.activeTrack(),a=i.activeGroup(),o=(a.filter(c=>c.default)[0]||a[0]).id,l=i.tracks[o];if(s===l){r({error:{message:"Problem encountered loading the default audio track."}});return}ge.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const c in i.tracks)i.tracks[c].enabled=i.tracks[c]===l;i.onTrackChanged()},SUBTITLES:(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:i}}=e;ge.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Sy(t,i);const r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}},PN={AUDIO:(n,e,t)=>{if(!e)return;const{tech:i,requestOptions:r,segmentLoaders:{[n]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,r),(!i.paused()||a.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),r),i.paused()||s.load()}),e.on("error",_y[n](n,t))},SUBTITLES:(n,e,t)=>{const{tech:i,requestOptions:r,segmentLoaders:{[n]:s},mediaTypes:{[n]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,r),s.track(a.activeTrack()),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),r),i.paused()||s.load()}),e.on("error",_y[n](n,t))}},Dae={AUDIO:(n,e)=>{const{vhs:t,sourceType:i,segmentLoaders:{[n]:r},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[n]:{groups:o,tracks:l,logger_:c}},mainPlaylistLoader:u}=e,d=hp(u.main);(!a[n]||Object.keys(a[n]).length===0)&&(a[n]={main:{default:{default:!0}}},d&&(a[n].main.default.playlists=u.main.playlists));for(const h in a[n]){o[h]||(o[h]=[]);for(const f in a[n][h]){let m=a[n][h][f],g;if(d?(c("AUDIO group '".concat(h,"' label '").concat(f,"' is a main playlist")),m.isMainPlaylist=!0,g=null):i==="vhs-json"&&m.playlists?g=new fu(m.playlists[0],t,s):m.resolvedUri?g=new fu(m.resolvedUri,t,s):m.playlists&&i==="dash"?g=new yE(m.playlists[0],t,s,u):g=null,m=Bt({id:f,playlistLoader:g},m),PN[n](n,m.playlistLoader,e),o[h].push(m),typeof l[f]>"u"){const _=new ge.AudioTrack({id:f,kind:Cae(m),enabled:!1,language:m.language,default:m.default,label:f});l[f]=_}}}r.on("error",_y[n](n,e))},SUBTITLES:(n,e)=>{const{tech:t,vhs:i,sourceType:r,segmentLoaders:{[n]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[n]:{groups:l,tracks:c}},mainPlaylistLoader:u}=e;for(const d in o[n]){l[d]||(l[d]=[]);for(const h in o[n][d]){if(!i.options_.useForcedSubtitles&&o[n][d][h].forced)continue;let f=o[n][d][h],m;if(r==="hls")m=new fu(f.resolvedUri,i,a);else if(r==="dash"){if(!f.playlists.filter(_=>_.excludeUntil!==1/0).length)return;m=new yE(f.playlists[0],i,a,u)}else r==="vhs-json"&&(m=new fu(f.playlists?f.playlists[0]:f.resolvedUri,i,a));if(f=Bt({id:h,playlistLoader:m},f),PN[n](n,f.playlistLoader,e),l[d].push(f),typeof c[h]>"u"){const g=t.addRemoteTextTrack({id:h,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:h},!1).track;c[h]=g}}}s.on("error",_y[n](n,e))},"CLOSED-CAPTIONS":(n,e)=>{const{tech:t,main:{mediaGroups:i},mediaTypes:{[n]:{groups:r,tracks:s}}}=e;for(const a in i[n]){r[a]||(r[a]=[]);for(const o in i[n][a]){const l=i[n][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const c=t.options_.vhs&&t.options_.vhs.captionServices||{};let u={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(c[u.instreamId]&&(u=Bt(u,c[u.instreamId])),u.default===void 0&&delete u.default,r[a].push(Bt({id:o},l)),typeof s[o]>"u"){const d=t.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default,language:u.language,label:u.label},!1).track;s[o]=d}}}}},u4=(n,e)=>{for(let t=0;t<n.length;t++)if(ES(e,n[t])||n[t].playlists&&u4(n[t].playlists,e))return!0;return!1},Pae=(n,e)=>t=>{const{mainPlaylistLoader:i,mediaTypes:{[n]:{groups:r}}}=e,s=i.media();if(!s)return null;let a=null;s.attributes[n]&&(a=r[s.attributes[n]]);const o=Object.keys(r);if(!a)if(n==="AUDIO"&&o.length>1&&hp(e.main))for(let l=0;l<o.length;l++){const c=r[o[l]];if(u4(c,s)){a=c;break}}else r.main?a=r.main:o.length===1&&(a=r[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},Iae={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const i in t)if(t[i].enabled)return t[i];return null},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const i in t)if(t[i].mode==="showing"||t[i].mode==="hidden")return t[i];return null}},Rae=(n,{mediaTypes:e})=>()=>{const t=e[n].activeTrack();return t?e[n].activeGroup(t):null},Oae=n=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(c=>{Dae[c](c,n)});const{mediaTypes:e,mainPlaylistLoader:t,tech:i,vhs:r,segmentLoaders:{["AUDIO"]:s,main:a}}=n;["AUDIO","SUBTITLES"].forEach(c=>{e[c].activeGroup=Pae(c,n),e[c].activeTrack=Iae[c](c,n),e[c].onGroupChanged=Aae(c,n),e[c].onGroupChanging=kae(c,n),e[c].onTrackChanged=Nae(c,n),e[c].getActiveGroup=Rae(c,n)});const o=e.AUDIO.activeGroup();if(o){const c=(o.filter(d=>d.default)[0]||o[0]).id;e.AUDIO.tracks[c].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(c=>e[c].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(c=>e[c].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const c in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[c])},Mae=()=>{const n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Pa,activeTrack:Pa,getActiveGroup:Pa,onGroupChanged:Pa,onTrackChanged:Pa,lastTrack_:null,logger_:Ds("MediaGroups[".concat(e,"]"))}}),n},Lae=10;let Sa;const $ae=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Bae=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]},Fae=function({currentPlaylist:n,buffered:e,currentTime:t,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!i)return ge.log.warn("We received no playlist to switch to. Please check your stream."),!1;const c="allowing switch ".concat(n&&n.id||"null"," -> ").concat(i.id);if(!n)return l("".concat(c," as current playlist is not set")),!0;if(i.id===n.id)return!1;const u=!!hu(e,t).length;if(!n.endList)return!u&&typeof n.partTargetDuration=="number"?(l("not ".concat(c," as current playlist is live llhls, but currentTime isn't in buffered.")),!1):(l("".concat(c," as current playlist is live")),!0);const d=vS(e,t),h=o?jn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:jn.MAX_BUFFER_LOW_WATER_LINE;if(a<h)return l("".concat(c," as duration < max low water line (").concat(a," < ").concat(h,")")),!0;const f=i.attributes.BANDWIDTH,m=n.attributes.BANDWIDTH;if(f<m&&(!o||d<s)){let g="".concat(c," as next bandwidth < current bandwidth (").concat(f," < ").concat(m,")");return o&&(g+=" and forwardBuffer < bufferHighWaterLine (".concat(d," < ").concat(s,")")),l(g),!0}if((!o||f>m)&&d>=r){let g="".concat(c," as forwardBuffer >= bufferLowWaterLine (").concat(d," >= ").concat(r,")");return o&&(g+=" and next bandwidth > current bandwidth (".concat(f," > ").concat(m,")")),l(g),!0}return l("not ".concat(c," as no switching criteria met")),!1};class qae extends ge.EventTarget{constructor(e){super();const{src:t,withCredentials:i,tech:r,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:c,sourceType:u,cacheEncryptionKeys:d,bufferBasedABR:h,leastPixelDiffSelector:f,captionServices:m}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:g}=e;(g===null||typeof g>"u")&&(g=1/0),Sa=a,this.bufferBasedABR=!!h,this.leastPixelDiffSelector=!!f,this.withCredentials=i,this.tech_=r,this.vhs_=r.vhs,this.sourceType_=u,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=g,this.enableLowInitialPlaylist=c,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:g,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=Mae(),this.mediaSource=new G.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=fi(),this.hasPlayed_=!1,this.syncController_=new Eae(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new _ae,this.sourceUpdater_=new c4(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Tae;const _={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:m,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new yE(t,this.vhs_,Bt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new fu(t,this.vhs_,Bt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new vE(Bt(_,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new vE(Bt(_,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new bae(Bt(_,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((y,T)=>{function N(){r.off("vttjserror",P),y()}function P(){r.off("vttjsloaded",N),T()}r.one("vttjsloaded",N),r.one("vttjserror",P),r.addWebVttScript_()})}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),$ae.forEach(y=>{this[y+"_"]=Bae.bind(this,y)}),this.logger_=Ds("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const v=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(v,()=>{const y=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-y,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){const r=this.media(),s=r&&(r.id||r.uri),a=e.id||e.uri;s&&s!==a&&(this.logger_("switch media ".concat(s," -> ").concat(a," from ").concat(t)),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-".concat(t)})),this.mainPlaylistLoader_.media(e,i)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=G.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(G.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const i=e.mediaGroups.AUDIO,r=Object.keys(i);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=i.main||r.length&&i[r[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in i)if(i[o][s.label]){const l=i[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let c=0;c<e.playlists.length;c++){const u=e.playlists[c];u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===o&&a.push(u)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),t=e.targetDuration*1.5*1e3;hE(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),Oae({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){this.excludeUnsupportedVariants_();let t;if(this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t)||(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),t=e.targetDuration*1.5*1e3;hE(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();if(e.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const i=e.mediaGroups||{};let r=!0;const s=Object.keys(i.AUDIO);for(const a in i.AUDIO)for(const o in i.AUDIO[a])i.AUDIO[a][o].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Sa.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(i.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),r=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return Fae({buffered:a,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const t=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",t=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:Lae}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const t=this.getCodecsOrExclude_();t&&this.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){if(e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.resetMainLoaderReplaceSegments()}resetMainLoaderReplaceSegments(){const e=this.tech_.buffered(),t=e.end(e.length-1);this.mainSegmentLoader_.replaceSegmentsUntil=t,this.mainSegmentLoader_.resetLoaderProperties(),this.mainSegmentLoader_.resetLoader()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const i=t.end(0);let r=i;if(e.start){const s=e.start.timeOffset;s<0?r=Math.max(i+s,t.start(0)):r=Math.min(i,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(r)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;const r=Sa.Playlist.playlistEnd(e,i),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return r-s<=Zs;const o=a.end(a.length-1);return o-s<=Zs&&r-o<=Zs}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const r=this.mainPlaylistLoader_.main.playlists,s=r.filter(rb),a=s.length===1&&s[0]===e;if(r.length===1&&i!==1/0)return ge.log.warn("Problem encountered with playlist ".concat(e.id,". ")+"Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){let f=!1;r.forEach(m=>{if(m===e)return;const g=m.excludeUntil;typeof g<"u"&&g!==1/0&&(f=!0,delete m.excludeUntil)}),f&&(ge.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+i*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const c=t.internal?this.logger_:ge.log.warn,u=t.message?" "+t.message:"";c("".concat(t.internal?"Internal problem":"Problem"," encountered with playlist ").concat(e.id,".")+"".concat(u," Switching to playlist ").concat(l.id,".")),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const d=l.targetDuration/2*1e3||5*1e3,h=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",a||h)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const i=[],r=e==="all";(r||e==="main")&&i.push(this.mainPlaylistLoader_);const s=[];(r||e==="audio")&&s.push("AUDIO"),(r||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&i.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this["".concat(a,"SegmentLoader_")];o&&(e===a||e==="all")&&i.push(o)}),i.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=hu(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.resetEverything(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.resetEverything(),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Sa.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let i=this.syncController_.getExpiredTime(t,this.duration());if(i===null)return;const r=this.mainPlaylistLoader_.main,s=Sa.Playlist.seekable(t,i,Sa.Playlist.liveEdgeDelay(r,t));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),i=this.syncController_.getExpiredTime(t,this.duration()),i===null||(e=Sa.Playlist.seekable(t,i,Sa.Playlist.liveEdgeDelay(r,t)),e.length===0)))return;let a,o;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=fi([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)&&(this.logger_("seekable updated [".concat(C$(this.seekable_),"]")),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const r=this.seekable();if(!r.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<r.end(r.length-1))&&this.sourceUpdater_.setDuration(r.end(r.length-1));return}const t=this.tech_.buffered();let i=Sa.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const i in t)t[i].forEach(r=>{r.playlistLoader&&r.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=Kh(this.main(),t),r={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=i.video||e.main.videoCodec||cte),e.main.isMuxed&&(r.video+=",".concat(i.audio||e.main.audioCodec||pk)),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(r.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||pk,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(c,u)=>c?Wm(u):Zv(u),o={};let l;if(["video","audio"].forEach(function(c){if(r.hasOwnProperty(c)&&!a(e[c].isFmp4,r[c])){const u=e[c].isFmp4?"browser":"muxer";o[u]=o[u]||[],o[u].push(r[c]),c==="audio"&&(l=u)}}),s&&l&&t.attributes.AUDIO){const c=t.attributes.AUDIO;this.main().playlists.forEach(u=>{(u.attributes&&u.attributes.AUDIO)===c&&u!==t&&(u.excludeUntil=1/0)}),this.logger_("excluding audio group ".concat(c," as ").concat(l,' does not support codec(s): "').concat(r.audio,'"'))}if(Object.keys(o).length){const c=Object.keys(o).reduce((u,d)=>(u&&(u+=", "),u+="".concat(d,' does not support codec(s): "').concat(o[d].join(","),'"'),u),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:c},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const c=[];if(["video","audio"].forEach(u=>{const d=(Vs(this.sourceUpdater_.codecs[u]||"")[0]||{}).type,h=(Vs(r[u]||"")[0]||{}).type;d&&h&&d.toLowerCase()!==h.toLowerCase()&&c.push('"'.concat(this.sourceUpdater_.codecs[u],'" -> "').concat(r[u],'"'))}),c.length){this.excludePlaylist({playlistToExclude:t,error:{message:"Codec switching not supported: ".concat(c.join(", "),"."),internal:!0},playlistExclusionDuration:1/0});return}}return r}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(i=>{const r=e[i];if(t.indexOf(r.id)!==-1)return;t.push(r.id);const s=Kh(this.main,r),a=[];s.audio&&!Zv(s.audio)&&!Wm(s.audio)&&a.push("audio codec ".concat(s.audio)),s.video&&!Zv(s.video)&&!Wm(s.video)&&a.push("video codec ".concat(s.video)),s.text&&s.text==="stpp.ttml.im1t"&&a.push("text codec ".concat(s.text)),a.length&&(r.excludeUntil=1/0,this.logger_("excluding ".concat(r.id," for unsupported: ").concat(a.join(", "))))})}excludeIncompatibleVariants_(e){const t=[],i=this.main().playlists,r=Ey(Vs(e)),s=vN(r),a=r.video&&Vs(r.video)[0]||null,o=r.audio&&Vs(r.audio)[0]||null;Object.keys(i).forEach(l=>{const c=i[l];if(t.indexOf(c.id)!==-1||c.excludeUntil===1/0)return;t.push(c.id);const u=[],d=Kh(this.mainPlaylistLoader_.main,c),h=vN(d);if(!(!d.audio&&!d.video)){if(h!==s&&u.push('codec count "'.concat(h,'" !== "').concat(s,'"')),!this.sourceUpdater_.canChangeType()){const f=d.video&&Vs(d.video)[0]||null,m=d.audio&&Vs(d.audio)[0]||null;f&&a&&f.type.toLowerCase()!==a.type.toLowerCase()&&u.push('video codec "'.concat(f.type,'" !== "').concat(a.type,'"')),m&&o&&m.type.toLowerCase()!==o.type.toLowerCase()&&u.push('audio codec "'.concat(m.type,'" !== "').concat(o.type,'"'))}u.length&&(c.excludeUntil=1/0,this.logger_("excluding ".concat(c.id,": ").concat(u.join(" && "))))}})}updateAdCues_(e){let t=0;const i=this.seekable();i.length&&(t=i.start(0)),wae(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=jn.GOAL_BUFFER_LENGTH,i=jn.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,jn.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,r)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=jn.BUFFER_LOW_WATER_LINE,i=jn.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,jn.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,jn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?s:r)}bufferHighWaterLine(){return jn.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){EN(this.inbandTextTracks_,"com.apple.streaming",this.tech_),nae({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,i){const r=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();EN(this.inbandTextTracks_,e,this.tech_),Zse({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:i})}}const Uae=(n,e,t)=>i=>{const r=n.main.playlists[e],s=xS(r),a=rb(r);return typeof i>"u"?a:(i?delete r.disabled:r.disabled=!0,i!==a&&!s&&(t(),i?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),i)};class jae{constructor(e,t,i){const{playlistController_:r}=e,s=r.fastQualityChange_.bind(r);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Kh(r.main(),t),this.playlist=t,this.id=i,this.enabled=Uae(e.playlists,t.id,s)}}const zae=function(n){n.representations=()=>{const e=n.playlistController_.main(),t=hp(e)?n.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(i=>!xS(i)).map((i,r)=>new jae(n,i,i.id)):[]}},IN=["seeking","seeked","pause","playing","error"];class Vae{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ds("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(u=>{l[u]={reset:()=>this.resetSegmentDownloads_(u),updateend:()=>this.checkSegmentDownloads_(u)},a["".concat(u,"SegmentLoader_")].on("appendsdone",l[u].updateend),a["".concat(u,"SegmentLoader_")].on("playlistupdate",l[u].reset),this.tech_.on(["seeked","seeking"],l[u].reset)});const c=u=>{["main","audio"].forEach(d=>{a["".concat(d,"SegmentLoader_")][u]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=()=>c("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(IN,s),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(IN,s),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(u=>{a["".concat(u,"SegmentLoader_")].off("appendsdone",l[u].updateend),a["".concat(u,"SegmentLoader_")].off("playlistupdate",l[u].reset),this.tech_.off(["seeked","seeking"],l[u].reset)}),this.checkCurrentTimeTimeout_&&G.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&G.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=G.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_["".concat(e,"SegmentLoader_")];this["".concat(e,"StalledDownloads_")]>0&&this.logger_("resetting possible stalled download count for ".concat(e," loader")),this["".concat(e,"StalledDownloads_")]=0,this["".concat(e,"Buffered_")]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,i=t["".concat(e,"SegmentLoader_")],r=i.buffered_(),s=Ore(this["".concat(e,"Buffered_")],r);if(this["".concat(e,"Buffered_")]=r,s){this.resetSegmentDownloads_(e);return}this["".concat(e,"StalledDownloads_")]++,this.logger_("found #".concat(this["".concat(e,"StalledDownloads_")]," ").concat(e," appends that did not increase buffer (possible stalled download)"),{playlistId:i.playlist_&&i.playlist_.id,buffered:Nl(r)}),!(this["".concat(e,"StalledDownloads_")]<10)&&(this.logger_("".concat(e," loader stalled download exclusion")),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-".concat(e,"-download-exclusion")}),e!=="subtitle"&&t.excludePlaylist({error:{message:"Excessive ".concat(e," segment downloading detected.")},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Zs>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),i=this.tech_.currentTime(),r=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(r&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){const m=t.start(0);s=m+(m===t.end(0)?0:Zs)}if(typeof s<"u")return this.logger_("Trying to seek outside of seekable at time ".concat(i," with ")+"seekable range ".concat(C$(t),". Seeking to ")+"".concat(s,".")),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,c=a.videoBuffer?a.videoBuffered():null,u=this.media(),d=u.partTargetDuration?u.partTargetDuration:(u.targetDuration-Vo)*2,h=[l,c];for(let m=0;m<h.length;m++){if(!h[m])continue;if(vS(h[m],i)<d)return!1}const f=xm(o,i);return f.length===0?!1:(s=f.start(0)+Zs,this.logger_("Buffered region starts (".concat(f.start(0),") ")+" just beyond seek point (".concat(i,"). Seeking to ").concat(s,".")),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),i=hu(t,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at ".concat(e," while inside a buffered region ")+"[".concat(i.start(0)," -> ").concat(i.end(0),"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_("Fell out of live window at time ".concat(t,". Seeking to ")+"live point (seekable end) ".concat(o)),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=xm(r,t);return a.length>0?(this.logger_("Stopped at ".concat(t," and seeking to ").concat(a.start(0))),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,i,r=!1){if(!e.length)return!1;let s=e.end(e.length-1)+Zs;const a=!i.endList,o=typeof i.partTargetDuration=="number";return a&&(o||r)&&(s=e.end(e.length-1)+i.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let r;if(e.length&&t.length){const s=hu(e,i-3),a=hu(e,i),o=hu(t,i);o.length&&!a.length&&s.length&&(r={start:s.end(0),end:o.end(0)})}else xm(e,i).length||(r=this.gapFromVideoUnderflow_(e,i));return r?(this.logger_("Encountered a gap in video from ".concat(r.start," to ").concat(r.end,". ")+"Seeking to current time ".concat(i)),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),i=this.tech_.currentTime(),r=xm(t,i);this.resetTimeUpdate_(),!(r.length===0||i!==e)&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+Vo),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const i=Pre(e);for(let r=0;r<i.length;r++){const s=i.start(r),a=i.end(r);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}}const Hae={errorInterval:30,getSource(n){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return n(t)}},d4=function(n,e){let t=0,i=0;const r=Bt(Hae,e);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){i&&n.currentTime(i)},a=function(u){u!=null&&(i=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(u),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},o=function(){if(Date.now()-t<r.errorInterval*1e3){n.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!r.getSource||typeof r.getSource!="function"){ge.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),r.getSource.call(n,a)},l=function(){n.off("loadedmetadata",s),n.off("error",o),n.off("dispose",l)},c=function(u){l(),d4(n,u)};n.on("error",o),n.on("dispose",l),n.reloadSourceOnError=c},Wae=function(n){d4(this,n)};var h4="3.5.3",Gae="7.0.0",Qae="1.1.1",Kae="7.1.0",Yae="4.0.1";const cn={PlaylistLoader:fu,Playlist:Gi,utils:ase,STANDARD_PLAYLIST_SELECTOR:xN,INITIAL_PLAYLIST_SELECTOR:Qse,lastBandwidthSelector:xN,movingAverageBandwidthSelector:Wse,comparePlaylistBandwidth:_S,comparePlaylistResolution:Hse,xhr:U$()};Object.keys(jn).forEach(n=>{Object.defineProperty(cn,n,{get(){return ge.log.warn("using Vhs.".concat(n," is UNSAFE be sure you know what you are doing")),jn[n]},set(e){if(ge.log.warn("using Vhs.".concat(n," is UNSAFE be sure you know what you are doing")),typeof e!="number"||e<0){ge.log.warn("value of Vhs.".concat(n," must be greater than or equal to 0"));return}jn[n]=e}})});const f4="videojs-vhs",p4=function(n,e){const t=e.media();let i=-1;for(let r=0;r<n.length;r++)if(n[r].id===t.id){i=r;break}n.selectedIndex_=i,n.trigger({selectedIndex:i,type:"change"})},Xae=function(n,e){e.representations().forEach(t=>{n.addQualityLevel(t)}),p4(n,e.playlists)};cn.canPlaySource=function(){return ge.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Jae=(n,e,t)=>{if(!n)return n;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=Ey(Vs(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(i.audio=t.attributes.CODECS);const r=Sf(i.video),s=Sf(i.audio),a={};for(const o in n)a[o]={},s&&(a[o].audioContentType=s),r&&(a[o].videoContentType=r),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof n[o]=="string"&&(a[o].url=n[o]);return Bt(n,a)},Zae=(n,e)=>n.reduce((t,i)=>{if(!i.contentProtection)return t;const r=e.reduce((s,a)=>{const o=i.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(r).length&&t.push(r),t},[]),eoe=({player:n,sourceKeySystems:e,audioMedia:t,mainPlaylists:i})=>{if(!n.eme.initializeMediaKeys)return Promise.resolve();const r=t?i.concat([t]):i,s=Zae(r,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((c,u)=>{n.tech_.one("keysessioncreated",c)})),a.push(new Promise((c,u)=>{n.eme.initializeMediaKeys({keySystems:l},d=>{if(d){u(d);return}c()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},toe=({player:n,sourceKeySystems:e,media:t,audioMedia:i})=>{const r=Jae(e,t,i);return r?(n.currentSource().keySystems=r,r&&!n.eme?(ge.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},m4=()=>{if(!G.localStorage)return null;const n=G.localStorage.getItem(f4);if(!n)return null;try{return JSON.parse(n)}catch(e){return null}},noe=n=>{if(!G.localStorage)return!1;let e=m4();e=e?Bt(e,n):n;try{G.localStorage.setItem(f4,JSON.stringify(e))}catch(t){return!1}return e},ioe=n=>n.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(n.substring(n.indexOf(",")+1)):n,g4=(n,e)=>{n._requestCallbackSet||(n._requestCallbackSet=new Set),n._requestCallbackSet.add(e)},y4=(n,e)=>{n._responseCallbackSet||(n._responseCallbackSet=new Set),n._responseCallbackSet.add(e)},b4=(n,e)=>{n._requestCallbackSet&&(n._requestCallbackSet.delete(e),n._requestCallbackSet.size||delete n._requestCallbackSet)},v4=(n,e)=>{n._responseCallbackSet&&(n._responseCallbackSet.delete(e),n._responseCallbackSet.size||delete n._responseCallbackSet)};cn.supportsNativeHls=function(){if(!De||!De.createElement)return!1;const n=De.createElement("video");return ge.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))}):!1}();cn.supportsNativeDash=function(){return!De||!De.createElement||!ge.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(De.createElement("video").canPlayType("application/dash+xml"))}();cn.supportsTypeNatively=n=>n==="hls"?cn.supportsNativeHls:n==="dash"?cn.supportsNativeDash:!1;cn.isSupported=function(){return ge.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};cn.xhr.onRequest=function(n){g4(cn.xhr,n)};cn.xhr.onResponse=function(n){y4(cn.xhr,n)};cn.xhr.offRequest=function(n){b4(cn.xhr,n)};cn.xhr.offResponse=function(n){v4(cn.xhr,n)};const roe=ge.getComponent("Component");class w4 extends roe{constructor(e,t,i){if(super(t,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=Ds("VhsHandler"),t.options_&&t.options_.playerId){const r=ge.getPlayer(t.options_.playerId);this.player_=r}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(De,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],r=>{const s=De.fullscreenElement||De.webkitFullscreenElement||De.mozFullScreenElement||De.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const e=m4();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=jn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===jn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{typeof this.source_[e]<"u"&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=ioe(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=cn,this.options_.sourceType=wL(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.playlistController_=new qae(this.options_);const i=Bt({liveRangeSafeTimeDelta:Zs},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Vae(i),this.playlistController_.on("error",()=>{const s=ge.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const r=this.options_.bufferBasedABR?cn.movingAverageBandwidthSelector(.55):cn.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=cn.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=G.navigator.connection||G.navigator.mozConnection||G.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){ge.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Nl(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Nl(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&noe({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{zae(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=G.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),eoe({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=toe({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{if(i.status!=="output-restricted")return;const r=this.playlistController_.main();if(!r||!r.playlists)return;const s=[];r.playlists.forEach(a=>{a&&a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height>=720&&(!a.excludeUntil||a.excludeUntil<1/0)&&(a.excludeUntil=1/0,s.push(a))}),s.length&&(ge.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...s),this.playlistController_.mainSegmentLoader_.resetEverything(),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=ge.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{Xae(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{p4(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":h4,"mux.js":Gae,"mpd-parser":Qae,"m3u8-parser":Kae,"aes-decrypter":Yae}}version(){return this.constructor.version()}canChangeType(){return c4.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&G.URL.revokeObjectURL&&(G.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return fse({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,r=2){return W$({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{g4(this.xhr,e)},this.xhr.onResponse=e=>{y4(this.xhr,e)},this.xhr.offRequest=e=>{b4(this.xhr,e)},this.xhr.offResponse=e=>{v4(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}}const Cy={name:"videojs-http-streaming",VERSION:h4,canHandleSource(n,e={}){const t=Bt(ge.options,e);return Cy.canPlayType(n.type,t)},handleSource(n,e,t={}){const i=Bt(ge.options,t);return e.vhs=new w4(n,e,i),e.vhs.xhr=U$(),e.vhs.setupXhrHooks_(),e.vhs.src(n.src,n.type),e.vhs},canPlayType(n,e){const t=wL(n);if(!t)return"";const i=Cy.getOverrideNative(e);return!cn.supportsTypeNatively(t)||i?"maybe":""},getOverrideNative(n={}){const{vhs:e={}}=n,t=!(ge.browser.IS_ANY_SAFARI||ge.browser.IS_IOS),{overrideNative:i=t}=e;return i}},soe=()=>Wm("avc1.4d400d,mp4a.40.2");soe()&&ge.getTech("Html5").registerSourceHandler(Cy,0);ge.VhsHandler=w4;ge.VhsSourceHandler=Cy;ge.Vhs=cn;ge.use||ge.registerComponent("Vhs",cn);ge.options.vhs=ge.options.vhs||{};(!ge.getPlugin||!ge.getPlugin("reloadSourceOnError"))&&ge.registerPlugin("reloadSourceOnError",Wae);const aoe=n=>{const e=fe.useRef(null),t=fe.useRef(null),{options:i,onReady:r}=n;return fe.useEffect(()=>{if(t.current){const s=t.current;s.autoplay(i.autoplay),s.src(i.sources)}else{const s=document.createElement("video-js");s.classList.add("vjs-big-play-centered"),e.current.appendChild(s);const a=t.current=ge(s,i,()=>{ge.log("player is ready"),r&&r(a)})}},[i,e]),fe.useEffect(()=>{const s=t.current;return()=>{s&&!s.isDisposed()&&(s.dispose(),t.current=null)}},[t]),ne.jsx("div",{"data-vjs-player":!0,children:ne.jsx("div",{ref:e})})};function ooe({isOpen:n,setIsOpen:e}){const t=fe.useRef(null),i={autoplay:!1,controls:!1,responsive:!0,fluid:!0,sources:[{src:"/assets/icons/Step_jacks_wo_bounce0030-0150.mp4",type:"video/mp4"}]},r=s=>{t.current=s,s.on("waiting",()=>{videojs.log("player is waiting")}),s.on("dispose",()=>{videojs.log("player will dispose")})};return ze.useState({temporary_url:"https://brenopolanski.github.io/html5-video-webvtt-example/MIB2.mp4"}),ne.jsxs(w0,{children:[ne.jsx(Uo,{children:ne.jsx(zu,{children:ne.jsx(wf,{children:"Inline Modal"})})}),ne.jsx(ju,{className:"ion-padding",children:ne.jsxs(eH,{isOpen:n,children:[ne.jsx(Uo,{children:ne.jsxs(zu,{children:[ne.jsx(wf,{children:"Description"}),ne.jsx(Hf,{slot:"end",children:ne.jsx(Hi,{onClick:()=>e(!1),children:"Close"})})]})}),ne.jsx(ju,{className:"ion-padding",children:ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{children:"Some exercises"}),ne.jsx(aoe,{options:i,onReady:r}),ne.jsx("div",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni illum quidem recusandae ducimus quos reprehenderit. Veniam, molestias quos, dolorum consequuntur nisi deserunt omnis id illo sit cum qui. Eaque, dicta."})]})})]})})]})}const loe=()=>{Jl.getPlatform();const[n,e]=ze.useState(!1);return ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{children:[ne.jsx(zg,{children:ne.jsx(Rl,{children:ne.jsxs(Ks,{class:"ion-no-padding",children:[ne.jsx("p",{className:"track__exercises",children:"Biceps Curls"}),ne.jsx("div",{className:"ion-text-uppercase",children:ne.jsx("p",{className:"track__category",children:"Track: Upper Body"})})]})})}),ne.jsxs(oL,{modules:[eee,ZZ,nee],slidesPerView:1,loop:!0,pagination:{clickable:!0},simulateTouch:!1,touchRatio:0,speed:800,observer:!0,observeParents:!0,observeSlideChildren:!0,className:"mySwiper",children:[ne.jsx(Hm,{children:ne.jsx(Ev,{src:"/assets/icons/step_000.jpg",alt:"img",className:"swiper__image"})}),ne.jsx(Hm,{children:ne.jsx(Ev,{src:"/assets/icons/step_015.jpg",alt:"img",className:"swiper__image"})}),ne.jsx(Hm,{children:ne.jsx(Ev,{src:"/assets/icons/step_030.jpg",alt:"img",className:"swiper__image"})}),ne.jsx(iee,{})]}),ne.jsx(zg,{children:ne.jsxs(Rl,{children:[ne.jsx(Ks,{children:ne.jsx(Hi,{expand:"full",onClick:()=>e(!0),children:"EXPLAIN"})}),ne.jsx(Ks,{children:ne.jsx(Hi,{expand:"full",children:"MARK DOWN"})}),ne.jsx(Ks,{children:ne.jsx(Hi,{expand:"full",children:"SKIP"})})]})})]}),n?ne.jsx(ooe,{isOpen:n,setIsOpen:e}):null]})},coe=()=>{const[n,e]=ze.useState(!0),{timerInterval:t,timerStatus:i,timerKey:r,timerDuration:s,timerPausedTime:a,setTimerStatus:o,setTimerDuration:l,setTimerPausedTime:c,unsetTimer:u}=Tf(),d=()=>{o("pause"),c(),_J()},h=()=>{a?(l(a),ek(a)):(l(t*1e3),ek(t*1e3)),o("running")};return ne.jsxs(ne.Fragment,{children:[ne.jsx(HM,{}),ne.jsxs(w0,{id:"main-content",children:[ne.jsx(Uo,{children:ne.jsx(Uo,{children:ne.jsxs(zu,{color:"warning",children:[ne.jsx(Hf,{slot:"start",children:ne.jsx(iO,{})}),ne.jsx(wf,{children:"Timer"})]})})}),ne.jsx(ju,{children:n?ne.jsx(loe,{}):ne.jsxs(zg,{children:[ne.jsx(Rl,{children:ne.jsx(Ks,{className:"timer-content",children:ne.jsx(EJ,{timerKey:r,timerInterval:t,timerDuration:a?Date.now()+a:s,timerActive:i==="running",unsetTimer:u})})}),ne.jsxs(Rl,{className:"ion-text-center",children:[ne.jsx(Ks,{children:ne.jsx(TJ,{timerHandler:i==="running"?d:h,timerStatus:i})}),ne.jsx(Ks,{children:ne.jsx(SJ,{unsetTimer:u,timerStatus:i})})]})]})}),ne.jsx(WM,{})]})]})};function x4(n,e){return function(){return n.apply(e,arguments)}}const{toString:uoe}=Object.prototype,{getPrototypeOf:CS}=Object,sb=(n=>e=>{const t=uoe.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ma=n=>(n=n.toLowerCase(),e=>sb(e)===n),ab=n=>e=>typeof e===n,{isArray:Dd}=Array,If=ab("undefined");function doe(n){return n!==null&&!If(n)&&n.constructor!==null&&!If(n.constructor)&&Hr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const E4=ma("ArrayBuffer");function hoe(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&E4(n.buffer),e}const foe=ab("string"),Hr=ab("function"),T4=ab("number"),ob=n=>n!==null&&typeof n=="object",poe=n=>n===!0||n===!1,Ym=n=>{if(sb(n)!=="object")return!1;const e=CS(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},moe=ma("Date"),goe=ma("File"),yoe=ma("Blob"),boe=ma("FileList"),voe=n=>ob(n)&&Hr(n.pipe),woe=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Hr(n.append)&&((e=sb(n))==="formdata"||e==="object"&&Hr(n.toString)&&n.toString()==="[object FormData]"))},xoe=ma("URLSearchParams"),Eoe=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fp(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),Dd(n))for(i=0,r=n.length;i<r;i++)e.call(null,n[i],i,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length;let o;for(i=0;i<a;i++)o=s[i],e.call(null,n[o],o,n)}}function S4(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,r;for(;i-- >0;)if(r=t[i],e===r.toLowerCase())return r;return null}const _4=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),C4=n=>!If(n)&&n!==_4;function EE(){const{caseless:n}=C4(this)&&this||{},e={},t=(i,r)=>{const s=n&&S4(e,r)||r;Ym(e[s])&&Ym(i)?e[s]=EE(e[s],i):Ym(i)?e[s]=EE({},i):Dd(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&fp(arguments[i],t);return e}const Toe=(n,e,t,{allOwnKeys:i}={})=>(fp(e,(r,s)=>{t&&Hr(r)?n[s]=x4(r,t):n[s]=r},{allOwnKeys:i}),n),Soe=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),_oe=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Coe=(n,e,t,i)=>{let r,s,a;const o={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)a=r[s],(!i||i(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&CS(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Aoe=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},koe=n=>{if(!n)return null;if(Dd(n))return n;let e=n.length;if(!T4(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Noe=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&CS(Uint8Array)),Doe=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(n,s[0],s[1])}},Poe=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},Ioe=ma("HTMLFormElement"),Roe=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),RN=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Ooe=ma("RegExp"),A4=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};fp(t,(r,s)=>{let a;(a=e(r,s,n))!==!1&&(i[s]=a||r)}),Object.defineProperties(n,i)},Moe=n=>{A4(n,(e,t)=>{if(Hr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(Hr(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Loe=(n,e)=>{const t={},i=r=>{r.forEach(s=>{t[s]=!0})};return Dd(n)?i(n):i(String(n).split(e)),t},$oe=()=>{},Boe=(n,e)=>(n=+n,Number.isFinite(n)?n:e),mw="abcdefghijklmnopqrstuvwxyz",ON="0123456789",k4={DIGIT:ON,ALPHA:mw,ALPHA_DIGIT:mw+mw.toUpperCase()+ON},Foe=(n=16,e=k4.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function qoe(n){return!!(n&&Hr(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const Uoe=n=>{const e=new Array(10),t=(i,r)=>{if(ob(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=Dd(i)?[]:{};return fp(i,(a,o)=>{const l=t(a,r+1);!If(l)&&(s[o]=l)}),e[r]=void 0,s}}return i};return t(n,0)},joe=ma("AsyncFunction"),zoe=n=>n&&(ob(n)||Hr(n))&&Hr(n.then)&&Hr(n.catch),_e={isArray:Dd,isArrayBuffer:E4,isBuffer:doe,isFormData:woe,isArrayBufferView:hoe,isString:foe,isNumber:T4,isBoolean:poe,isObject:ob,isPlainObject:Ym,isUndefined:If,isDate:moe,isFile:goe,isBlob:yoe,isRegExp:Ooe,isFunction:Hr,isStream:voe,isURLSearchParams:xoe,isTypedArray:Noe,isFileList:boe,forEach:fp,merge:EE,extend:Toe,trim:Eoe,stripBOM:Soe,inherits:_oe,toFlatObject:Coe,kindOf:sb,kindOfTest:ma,endsWith:Aoe,toArray:koe,forEachEntry:Doe,matchAll:Poe,isHTMLForm:Ioe,hasOwnProperty:RN,hasOwnProp:RN,reduceDescriptors:A4,freezeMethods:Moe,toObjectSet:Loe,toCamelCase:Roe,noop:$oe,toFiniteNumber:Boe,findKey:S4,global:_4,isContextDefined:C4,ALPHABET:k4,generateString:Foe,isSpecCompliantForm:qoe,toJSONObject:Uoe,isAsyncFn:joe,isThenable:zoe};function St(n,e,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r)}_e.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_e.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const N4=St.prototype,D4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{D4[n]={value:n}});Object.defineProperties(St,D4);Object.defineProperty(N4,"isAxiosError",{value:!0});St.from=(n,e,t,i,r,s)=>{const a=Object.create(N4);return _e.toFlatObject(n,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),St.call(a,n.message,e,t,i,r),a.cause=n,a.name=n.name,s&&Object.assign(a,s),a};const Voe=null;function TE(n){return _e.isPlainObject(n)||_e.isArray(n)}function P4(n){return _e.endsWith(n,"[]")?n.slice(0,-2):n}function MN(n,e,t){return n?n.concat(e).map(function(r,s){return r=P4(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function Hoe(n){return _e.isArray(n)&&!n.some(TE)}const Woe=_e.toFlatObject(_e,{},null,function(e){return/^is[A-Z]/.test(e)});function lb(n,e,t){if(!_e.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=_e.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,_){return!_e.isUndefined(_[g])});const i=t.metaTokens,r=t.visitor||u,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&_e.isSpecCompliantForm(e);if(!_e.isFunction(r))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(_e.isDate(m))return m.toISOString();if(!l&&_e.isBlob(m))throw new St("Blob is not supported. Use a Buffer instead.");return _e.isArrayBuffer(m)||_e.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,_){let v=m;if(m&&!_&&typeof m=="object"){if(_e.endsWith(g,"{}"))g=i?g:g.slice(0,-2),m=JSON.stringify(m);else if(_e.isArray(m)&&Hoe(m)||(_e.isFileList(m)||_e.endsWith(g,"[]"))&&(v=_e.toArray(m)))return g=P4(g),v.forEach(function(T,N){!(_e.isUndefined(T)||T===null)&&e.append(a===!0?MN([g],N,s):a===null?g:g+"[]",c(T))}),!1}return TE(m)?!0:(e.append(MN(_,g,s),c(m)),!1)}const d=[],h=Object.assign(Woe,{defaultVisitor:u,convertValue:c,isVisitable:TE});function f(m,g){if(!_e.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(m),_e.forEach(m,function(v,y){(!(_e.isUndefined(v)||v===null)&&r.call(e,v,_e.isString(y)?y.trim():y,g,h))===!0&&f(v,g?g.concat(y):[y])}),d.pop()}}if(!_e.isObject(n))throw new TypeError("data must be an object");return f(n),e}function LN(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function AS(n,e){this._pairs=[],n&&lb(n,this,e)}const I4=AS.prototype;I4.append=function(e,t){this._pairs.push([e,t])};I4.toString=function(e){const t=e?function(i){return e.call(this,i,LN)}:LN;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function Goe(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function R4(n,e,t){if(!e)return n;const i=t&&t.encode||Goe,r=t&&t.serialize;let s;if(r?s=r(e,t):s=_e.isURLSearchParams(e)?e.toString():new AS(e,t).toString(i),s){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class Qoe{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_e.forEach(this.handlers,function(i){i!==null&&e(i)})}}const $N=Qoe,O4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Koe=typeof URLSearchParams<"u"?URLSearchParams:AS,Yoe=typeof FormData<"u"?FormData:null,Xoe=typeof Blob<"u"?Blob:null,Joe=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Zoe=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),vs={isBrowser:!0,classes:{URLSearchParams:Koe,FormData:Yoe,Blob:Xoe},isStandardBrowserEnv:Joe,isStandardBrowserWebWorkerEnv:Zoe,protocols:["http","https","file","blob","url","data"]};function ele(n,e){return lb(n,new vs.classes.URLSearchParams,Object.assign({visitor:function(t,i,r,s){return vs.isNode&&_e.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function tle(n){return _e.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function nle(n){const e={},t=Object.keys(n);let i;const r=t.length;let s;for(i=0;i<r;i++)s=t[i],e[s]=n[s];return e}function M4(n){function e(t,i,r,s){let a=t[s++];const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&_e.isArray(r)?r.length:a,l?(_e.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!o):((!r[a]||!_e.isObject(r[a]))&&(r[a]=[]),e(t,i,r[a],s)&&_e.isArray(r[a])&&(r[a]=nle(r[a])),!o)}if(_e.isFormData(n)&&_e.isFunction(n.entries)){const t={};return _e.forEachEntry(n,(i,r)=>{e(tle(i),r,t,0)}),t}return null}function ile(n,e,t){if(_e.isString(n))try{return(e||JSON.parse)(n),_e.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const kS={transitional:O4,adapter:vs.isNode?"http":"xhr",transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=_e.isObject(e);if(s&&_e.isHTMLForm(e)&&(e=new FormData(e)),_e.isFormData(e))return r&&r?JSON.stringify(M4(e)):e;if(_e.isArrayBuffer(e)||_e.isBuffer(e)||_e.isStream(e)||_e.isFile(e)||_e.isBlob(e))return e;if(_e.isArrayBufferView(e))return e.buffer;if(_e.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ele(e,this.formSerializer).toString();if((o=_e.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return lb(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),ile(e)):e}],transformResponse:[function(e){const t=this.transitional||kS.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(e&&_e.isString(e)&&(i&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?St.from(o,St.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vs.classes.FormData,Blob:vs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_e.forEach(["delete","get","head","post","put","patch"],n=>{kS.headers[n]={}});const NS=kS,rle=_e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sle=n=>{const e={};let t,i,r;return n&&n.split("\n").forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!t||e[t]&&rle[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},BN=Symbol("internals");function hh(n){return n&&String(n).trim().toLowerCase()}function Xm(n){return n===!1||n==null?n:_e.isArray(n)?n.map(Xm):String(n)}function ale(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const ole=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function gw(n,e,t,i,r){if(_e.isFunction(i))return i.call(this,e,t);if(r&&(e=t),!!_e.isString(e)){if(_e.isString(i))return e.indexOf(i)!==-1;if(_e.isRegExp(i))return i.test(e)}}function lle(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function cle(n,e){const t=_e.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(r,s,a){return this[i].call(this,e,r,s,a)},configurable:!0})})}class cb{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function s(o,l,c){const u=hh(l);if(!u)throw new Error("header name must be a non-empty string");const d=_e.findKey(r,u);(!d||r[d]===void 0||c===!0||c===void 0&&r[d]!==!1)&&(r[d||l]=Xm(o))}const a=(o,l)=>_e.forEach(o,(c,u)=>s(c,u,l));return _e.isPlainObject(e)||e instanceof this.constructor?a(e,t):_e.isString(e)&&(e=e.trim())&&!ole(e)?a(sle(e),t):e!=null&&s(t,e,i),this}get(e,t){if(e=hh(e),e){const i=_e.findKey(this,e);if(i){const r=this[i];if(!t)return r;if(t===!0)return ale(r);if(_e.isFunction(t))return t.call(this,r,i);if(_e.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=hh(e),e){const i=_e.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||gw(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let r=!1;function s(a){if(a=hh(a),a){const o=_e.findKey(i,a);o&&(!t||gw(i,i[o],o,t))&&(delete i[o],r=!0)}}return _e.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const s=t[i];(!e||gw(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,i={};return _e.forEach(this,(r,s)=>{const a=_e.findKey(i,s);if(a){t[a]=Xm(r),delete t[s];return}const o=e?lle(s):String(s).trim();o!==s&&delete t[s],t[o]=Xm(r),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return _e.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=e&&_e.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[BN]=this[BN]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=hh(a);i[o]||(cle(r,a),i[o]=!0)}return _e.isArray(e)?e.forEach(s):s(e),this}}cb.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_e.reduceDescriptors(cb.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});_e.freezeMethods(cb);const ja=cb;function yw(n,e){const t=this||NS,i=e||t,r=ja.from(i.headers);let s=i.data;return _e.forEach(n,function(o){s=o.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function L4(n){return!!(n&&n.__CANCEL__)}function pp(n,e,t){St.call(this,n==null?"canceled":n,St.ERR_CANCELED,e,t),this.name="CanceledError"}_e.inherits(pp,St,{__CANCEL__:!0});function ule(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new St("Request failed with status code "+t.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const dle=vs.isStandardBrowserEnv?function(){return{write:function(t,i,r,s,a,o){const l=[];l.push(t+"="+encodeURIComponent(i)),_e.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),_e.isString(s)&&l.push("path="+s),_e.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){const i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function hle(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function fle(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function $4(n,e){return n&&!hle(e)?fle(n,e):e}const ple=vs.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function r(s){let a=s;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(a){const o=_e.isString(a)?r(a):a;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function mle(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function gle(n,e){n=n||10;const t=new Array(n),i=new Array(n);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[s];a||(a=c),t[r]=l,i[r]=c;let d=s,h=0;for(;d!==r;)h+=t[d++],d=d%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),c-a<e)return;const f=u&&c-u;return f?Math.round(h*1e3/f):void 0}}function FN(n,e){let t=0;const i=gle(50,250);return r=>{const s=r.loaded,a=r.lengthComputable?r.total:void 0,o=s-t,l=i(o),c=s<=a;t=s;const u={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&c?(a-s)/l:void 0,event:r};u[e?"download":"upload"]=!0,n(u)}}const yle=typeof XMLHttpRequest<"u",ble=yle&&function(n){return new Promise(function(t,i){let r=n.data;const s=ja.from(n.headers).normalize(),a=n.responseType;let o;function l(){n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}_e.isFormData(r)&&(vs.isStandardBrowserEnv||vs.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(n.auth){const f=n.auth.username||"",m=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(f+":"+m))}const u=$4(n.baseURL,n.url);c.open(n.method.toUpperCase(),R4(u,n.params,n.paramsSerializer),!0),c.timeout=n.timeout;function d(){if(!c)return;const f=ja.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),g={data:!a||a==="text"||a==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:f,config:n,request:c};ule(function(v){t(v),l()},function(v){i(v),l()},g),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(i(new St("Request aborted",St.ECONNABORTED,n,c)),c=null)},c.onerror=function(){i(new St("Network Error",St.ERR_NETWORK,n,c)),c=null},c.ontimeout=function(){let m=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const g=n.transitional||O4;n.timeoutErrorMessage&&(m=n.timeoutErrorMessage),i(new St(m,g.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,n,c)),c=null},vs.isStandardBrowserEnv){const f=(n.withCredentials||ple(u))&&n.xsrfCookieName&&dle.read(n.xsrfCookieName);f&&s.set(n.xsrfHeaderName,f)}r===void 0&&s.setContentType(null),"setRequestHeader"in c&&_e.forEach(s.toJSON(),function(m,g){c.setRequestHeader(g,m)}),_e.isUndefined(n.withCredentials)||(c.withCredentials=!!n.withCredentials),a&&a!=="json"&&(c.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&c.addEventListener("progress",FN(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",FN(n.onUploadProgress)),(n.cancelToken||n.signal)&&(o=f=>{c&&(i(!f||f.type?new pp(null,n,c):f),c.abort(),c=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const h=mle(u);if(h&&vs.protocols.indexOf(h)===-1){i(new St("Unsupported protocol "+h+":",St.ERR_BAD_REQUEST,n));return}c.send(r||null)})},Jm={http:Voe,xhr:ble};_e.forEach(Jm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch(t){}Object.defineProperty(n,"adapterName",{value:e})}});const B4={getAdapter:n=>{n=_e.isArray(n)?n:[n];const{length:e}=n;let t,i;for(let r=0;r<e&&(t=n[r],!(i=_e.isString(t)?Jm[t.toLowerCase()]:t));r++);if(!i)throw i===!1?new St("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT"):new Error(_e.hasOwnProp(Jm,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"));if(!_e.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:Jm};function bw(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new pp(null,n)}function qN(n){return bw(n),n.headers=ja.from(n.headers),n.data=yw.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),B4.getAdapter(n.adapter||NS.adapter)(n).then(function(i){return bw(n),i.data=yw.call(n,n.transformResponse,i),i.headers=ja.from(i.headers),i},function(i){return L4(i)||(bw(n),i&&i.response&&(i.response.data=yw.call(n,n.transformResponse,i.response),i.response.headers=ja.from(i.response.headers))),Promise.reject(i)})}const UN=n=>n instanceof ja?n.toJSON():n;function ad(n,e){e=e||{};const t={};function i(c,u,d){return _e.isPlainObject(c)&&_e.isPlainObject(u)?_e.merge.call({caseless:d},c,u):_e.isPlainObject(u)?_e.merge({},u):_e.isArray(u)?u.slice():u}function r(c,u,d){if(_e.isUndefined(u)){if(!_e.isUndefined(c))return i(void 0,c,d)}else return i(c,u,d)}function s(c,u){if(!_e.isUndefined(u))return i(void 0,u)}function a(c,u){if(_e.isUndefined(u)){if(!_e.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function o(c,u,d){if(d in e)return i(c,u);if(d in n)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u)=>r(UN(c),UN(u),!0)};return _e.forEach(Object.keys(Object.assign({},n,e)),function(u){const d=l[u]||r,h=d(n[u],e[u],u);_e.isUndefined(h)&&d!==o||(t[u]=h)}),t}const F4="1.5.0",DS={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{DS[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const jN={};DS.transitional=function(e,t,i){function r(s,a){return"[Axios v"+F4+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,o)=>{if(e===!1)throw new St(r(a," has been removed"+(t?" in "+t:"")),St.ERR_DEPRECATED);return t&&!jN[a]&&(jN[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,o):!0}};function vle(n,e,t){if(typeof n!="object")throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],a=e[s];if(a){const o=n[s],l=o===void 0||a(o,s,n);if(l!==!0)throw new St("option "+s+" must be "+l,St.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new St("Unknown option "+s,St.ERR_BAD_OPTION)}}const SE={assertOptions:vle,validators:DS},mo=SE.validators;class Ay{constructor(e){this.defaults=e,this.interceptors={request:new $N,response:new $N}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ad(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&SE.assertOptions(i,{silentJSONParsing:mo.transitional(mo.boolean),forcedJSONParsing:mo.transitional(mo.boolean),clarifyTimeoutError:mo.transitional(mo.boolean)},!1),r!=null&&(_e.isFunction(r)?t.paramsSerializer={serialize:r}:SE.assertOptions(r,{encode:mo.function,serialize:mo.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&_e.merge(s.common,s[t.method]);s&&_e.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),t.headers=ja.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(l=l&&g.synchronous,o.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,d=0,h;if(!l){const m=[qN.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,c),h=m.length,u=Promise.resolve(t);d<h;)u=u.then(m[d++],m[d++]);return u}h=o.length;let f=t;for(d=0;d<h;){const m=o[d++],g=o[d++];try{f=m(f)}catch(_){g.call(this,_);break}}try{u=qN.call(this,f)}catch(m){return Promise.reject(m)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=ad(this.defaults,e);const t=$4(e.baseURL,e.url);return R4(t,e.params,e.paramsSerializer)}}_e.forEach(["delete","get","head","options"],function(e){Ay.prototype[e]=function(t,i){return this.request(ad(i||{},{method:e,url:t,data:(i||{}).data}))}});_e.forEach(["post","put","patch"],function(e){function t(i){return function(s,a,o){return this.request(ad(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ay.prototype[e]=t(),Ay.prototype[e+"Form"]=t(!0)});const Zm=Ay;class PS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{i.subscribe(o),s=o}).then(r);return a.cancel=function(){i.unsubscribe(s)},a},e(function(s,a,o){i.reason||(i.reason=new pp(s,a,o),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new PS(function(r){e=r}),cancel:e}}}const wle=PS;function xle(n){return function(t){return n.apply(null,t)}}function Ele(n){return _e.isObject(n)&&n.isAxiosError===!0}const _E={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_E).forEach(([n,e])=>{_E[e]=n});const Tle=_E;function q4(n){const e=new Zm(n),t=x4(Zm.prototype.request,e);return _e.extend(t,Zm.prototype,e,{allOwnKeys:!0}),_e.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return q4(ad(n,r))},t}const Pn=q4(NS);Pn.Axios=Zm;Pn.CanceledError=pp;Pn.CancelToken=wle;Pn.isCancel=L4;Pn.VERSION=F4;Pn.toFormData=lb;Pn.AxiosError=St;Pn.Cancel=Pn.CanceledError;Pn.all=function(e){return Promise.all(e)};Pn.spread=xle;Pn.isAxiosError=Ele;Pn.mergeConfig=ad;Pn.AxiosHeaders=ja;Pn.formToJSON=n=>M4(_e.isHTMLForm(n)?new FormData(n):n);Pn.getAdapter=B4.getAdapter;Pn.HttpStatusCode=Tle;Pn.default=Pn;const Sle=Pn,_le=()=>{const[n,e]=ze.useState(!1),[t,i]=ze.useState(""),[r,s]=ze.useState(),a=(c,u)=>{i(c),s(()=>u),e(!0)},o=()=>{r&&r(),e(!1)},l=()=>{e(!1)};return{showConfirmationAlert:a,ConfirmationAlert:ne.jsx(aO,{isOpen:n,message:t,buttons:[{text:"Cancel",role:"cancel",handler:l},{text:"Confirm",handler:o}]})}};var Rf;(function(n){n.Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE"})(Rf||(Rf={}));var zN;(function(n){n.UTF8="utf8",n.ASCII="ascii",n.UTF16="utf16"})(zN||(zN={}));const IS=Wf("Filesystem",{web:()=>ci(()=>import("./web-56f881ed.js"),[]).then(n=>new n.FilesystemWeb)});async function Cle(n){const e=await fetch(n).then(t=>t.blob());return new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onerror=i,r.onload=()=>{typeof r.result=="string"?t(r.result):i("base64 format isn't string")}})}const Ale=async(n,e)=>{try{const t=await Cle(n),i=await IS.writeFile({path:"".concat(e),data:t,directory:Rf.Data});return XV("hybrid")?(console.log("Base64 file for hybrid platform"),{filePath:i.uri,webviewPath:Jl.convertFileSrc(i.uri)}):(console.log("Base64 file for web platform"),{filePath:e,webviewPath:"".concat(e)})}catch(t){console.log("Error with writing base64 file ",t)}},kle=async n=>{try{const e=await IS.readFile({path:n,directory:Rf.Data});return console.log("*********** read"),e.data}catch(e){return console.error("Error with reading",e),null}},Nle=async n=>{try{await IS.deleteFile({path:n,directory:Rf.Data}),console.log("Track was removed successfully")}catch(e){console.log("Error with removing track ",e)}},Dle=()=>{const n="track.mp4",e="/assets/icons/Step_jacks_wo_bounce0030-0150.mp4",[t,i]=ze.useState();ze.useEffect(()=>{},[]);const r=()=>kle(n).then(g=>i(g)),[s,a]=ze.useState("");ze.useState();const{showConfirmationAlert:o,ConfirmationAlert:l}=_le(),[c,u]=ze.useState();ze.useEffect(()=>{d()},[]);const d=async()=>{var v;const g=(v=Ol.connection)==null?void 0:v.getRepository(Fa),_=await(g==null?void 0:g.find({}));u(_)},h=e,f=async()=>{var y;const g=await Sle.request({url:h,method:"get",responseType:"arraybuffer"}),_=(y=Ol.connection)==null?void 0:y.getRepository(Fa);await(_==null?void 0:_.save({id:Date.now().toString(),isActive:!0,isActive2:!1,name:s,jsonTest:JSON.stringify({id:Math.random(),nest:{nested:!0}}),file:Buffer.from(g.data).toString("base64")}));const v=await(_==null?void 0:_.find({}));u(v)},m=async g=>{var _;try{const v=(_=Ol.connection)==null?void 0:_.getRepository(Fa);if(v){const T=await v.findOne({where:{id:g}});T?await v.remove(T):console.log("can't rename input:",T.id)}else console.log("Connection to DB is absent");const y=await(v==null?void 0:v.find({}));u(y)}catch(v){alert(v.message)}};return ne.jsxs(ne.Fragment,{children:[ne.jsx(HM,{}),ne.jsxs(w0,{id:"main-content",children:[ne.jsx(Uo,{children:ne.jsx(Uo,{children:ne.jsxs(zu,{color:"warning",children:[ne.jsx(Hf,{slot:"start",children:ne.jsx(iO,{})}),ne.jsx(wf,{children:"Home"})]})})}),ne.jsxs(ju,{fullscreen:!0,className:"ion-padding",children:[ne.jsx(Eo,{children:ne.jsx("iframe",{width:"560",height:"315",src:"data:video/mp4;base64, "+t,title:"TestFitRem",allowFullScreen:!0})}),ne.jsxs(Eo,{children:[ne.jsx(WV,{type:"text",value:s,onIonInput:g=>a(g.target.value)}),ne.jsx(Hi,{slot:"end",onClick:f,disabled:s.trim()==="",children:"ADD"}),ne.jsx(Hi,{slot:"end",onClick:()=>Ale(e,n),children:"ADD TRACK"}),ne.jsx(Hi,{slot:"end",onClick:()=>Nle(n),children:"DELETE"}),ne.jsx(Hi,{slot:"end",onClick:r,children:"READ"})]}),ne.jsx("h3",{children:"THE SQLITE DATA"}),c==null?void 0:c.map(g=>ne.jsxs(Eo,{children:[ne.jsx("iframe",{width:"300",height:"315",src:"data:video/mp4;base64, "+g.file,title:"TestFitRem",allowFullScreen:!0}),ne.jsx(Hi,{onClick:()=>m(g==null?void 0:g.id),children:"DELETE"})]},g==null?void 0:g.id)),l]}),ne.jsx(WM,{})]})]})};_H();const Ple=()=>{const{rehydrated:n}=Tf();return ne.jsx(lH,{children:n?ne.jsx(LH,{children:ne.jsxs(gH,{children:[ne.jsx(yh,{exact:!0,path:"/home",children:ne.jsx(Dle,{})}),ne.jsx(yh,{exact:!0,path:"/timer",children:ne.jsx(coe,{})}),ne.jsx(yh,{exact:!0,path:"/timer-configuration",children:ne.jsx(vY,{})}),ne.jsx(yh,{exact:!0,path:"/",children:ne.jsx(lF,{to:"/home"})})]})}):ne.jsx(YV,{className:"spinner"})})};window.addEventListener("DOMContentLoaded",async()=>{try{const n=document.getElementById("root");rI(n).render(ne.jsx(Ple,{}))}catch(n){console.log(n)}});window.Buffer=o1.Buffer;export{zN as E,_R as K,yO as W,Rle as __vite_legacy_guard,Vi as a,Gl as b,h0 as c,xu as d,oq as e,TR as f,lq as g,Sx as h,Bm as i,On as j,r2 as k,Kle as l,bi as m,Ole as n,Iu as o,Mle as p,ht as q,mf as r,Qle as s,Lle as t,LW as u,Qr as w};
