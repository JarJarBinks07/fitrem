var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{d as doc,n as now,p as pointerCoord}from"./index-1329dee8.js";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const startTapClick=__name(config=>{if(doc===void 0)return;let lastTouch=-MOUSE_WAIT*10,lastActivated=0,activatableEle,activeRipple,activeDefer;const useRippleEffect=config.getBoolean("animated",!0)&&config.getBoolean("rippleEffect",!0),clearDefers=new WeakMap,onTouchStart=__name(ev=>{lastTouch=now(ev),pointerDown(ev)},"onTouchStart"),onTouchEnd=__name(ev=>{lastTouch=now(ev),pointerUp(ev)},"onTouchEnd"),onMouseDown=__name(ev=>{if(ev.button===2)return;const t=now(ev)-MOUSE_WAIT;lastTouch<t&&pointerDown(ev)},"onMouseDown"),onMouseUp=__name(ev=>{const t=now(ev)-MOUSE_WAIT;lastTouch<t&&pointerUp(ev)},"onMouseUp"),cancelActive=__name(()=>{activeDefer&&clearTimeout(activeDefer),activeDefer=void 0,activatableEle&&(removeActivated(!1),activatableEle=void 0)},"cancelActive"),pointerDown=__name(ev=>{activatableEle||setActivatedElement(getActivatableTarget(ev),ev)},"pointerDown"),pointerUp=__name(ev=>{setActivatedElement(void 0,ev)},"pointerUp"),setActivatedElement=__name((el,ev)=>{if(el&&el===activatableEle)return;activeDefer&&clearTimeout(activeDefer),activeDefer=void 0;const{x,y}=pointerCoord(ev);if(activatableEle){if(clearDefers.has(activatableEle))throw new Error("internal error");activatableEle.classList.contains(ACTIVATED)||addActivated(activatableEle,x,y),removeActivated(!0)}if(el){const deferId=clearDefers.get(el);deferId&&(clearTimeout(deferId),clearDefers.delete(el)),el.classList.remove(ACTIVATED);const callback=__name(()=>{addActivated(el,x,y),activeDefer=void 0},"callback");isInstant(el)?callback():activeDefer=setTimeout(callback,ADD_ACTIVATED_DEFERS)}activatableEle=el},"setActivatedElement"),addActivated=__name((el,x,y)=>{if(lastActivated=Date.now(),el.classList.add(ACTIVATED),!useRippleEffect)return;const rippleEffect=getRippleEffect(el);rippleEffect!==null&&(removeRipple(),activeRipple=rippleEffect.addRipple(x,y))},"addActivated"),removeRipple=__name(()=>{activeRipple!==void 0&&(activeRipple.then(remove=>remove()),activeRipple=void 0)},"removeRipple"),removeActivated=__name(smooth=>{removeRipple();const active=activatableEle;if(!active)return;const time=CLEAR_STATE_DEFERS-Date.now()+lastActivated;if(smooth&&time>0&&!isInstant(active)){const deferId=setTimeout(()=>{active.classList.remove(ACTIVATED),clearDefers.delete(active)},CLEAR_STATE_DEFERS);clearDefers.set(active,deferId)}else active.classList.remove(ACTIVATED)},"removeActivated");doc.addEventListener("ionGestureCaptured",cancelActive),doc.addEventListener("touchstart",onTouchStart,!0),doc.addEventListener("touchcancel",onTouchEnd,!0),doc.addEventListener("touchend",onTouchEnd,!0),doc.addEventListener("pointercancel",cancelActive,!0),doc.addEventListener("mousedown",onMouseDown,!0),doc.addEventListener("mouseup",onMouseUp,!0)},"startTapClick"),getActivatableTarget=__name(ev=>{if(ev.composedPath!==void 0){const path=ev.composedPath();for(let i=0;i<path.length-2;i++){const el=path[i];if(!(el instanceof ShadowRoot)&&el.classList.contains("ion-activatable"))return el}}else return ev.target.closest(".ion-activatable")},"getActivatableTarget"),isInstant=__name(el=>el.classList.contains("ion-activatable-instant"),"isInstant"),getRippleEffect=__name(el=>{if(el.shadowRoot){const ripple=el.shadowRoot.querySelector("ion-ripple-effect");if(ripple)return ripple}return el.querySelector("ion-ripple-effect")},"getRippleEffect"),ACTIVATED="ion-activated",ADD_ACTIVATED_DEFERS=100,CLEAR_STATE_DEFERS=150,MOUSE_WAIT=2500;export{startTapClick};
