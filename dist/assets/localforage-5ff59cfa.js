var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{q as getDefaultExportFromCjs,t as commonjsGlobal}from"./index-2413ce97.js";function _mergeNamespaces(n,m){for(var i=0;i<m.length;i++){const e=m[i];if(typeof e!="string"&&!Array.isArray(e)){for(const k in e)if(k!=="default"&&!(k in n)){const d=Object.getOwnPropertyDescriptor(e,k);d&&Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:()=>e[k]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}__name(_mergeNamespaces,"_mergeNamespaces");function commonjsRequire(path){throw new Error('Could not dynamically require "'+path+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}__name(commonjsRequire,"commonjsRequire");var localforage$2={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(module,exports){(function(f){module.exports=f()})(function(){return __name(function e(t,n,r){function s(o2,u){if(!n[o2]){if(!t[o2]){var a=typeof commonjsRequire=="function"&&commonjsRequire;if(!u&&a)return a(o2,!0);if(i)return i(o2,!0);var f=new Error("Cannot find module '"+o2+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o2]={exports:{}};t[o2][0].call(l.exports,function(e2){var n2=t[o2][1][e2];return s(n2||e2)},l,l.exports,e,t,n,r)}return n[o2].exports}__name(s,"s");for(var i=typeof commonjsRequire=="function"&&commonjsRequire,o=0;o<r.length;o++)s(r[o]);return s},"e")({1:[function(_dereq_,module2,exports2){(function(global){var Mutation=global.MutationObserver||global.WebKitMutationObserver,scheduleDrain;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=__name(function(){element.data=called=++called%2},"scheduleDrain")}else if(!global.setImmediate&&typeof global.MessageChannel<"u"){var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=__name(function(){channel.port2.postMessage(0)},"scheduleDrain")}else"document"in global&&"onreadystatechange"in global.document.createElement("script")?scheduleDrain=__name(function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){nextTick(),scriptEl.onreadystatechange=null,scriptEl.parentNode.removeChild(scriptEl),scriptEl=null},global.document.documentElement.appendChild(scriptEl)},"scheduleDrain"):scheduleDrain=__name(function(){setTimeout(nextTick,0)},"scheduleDrain");var draining,queue=[];function nextTick(){draining=!0;for(var i,oldQueue,len=queue.length;len;){for(oldQueue=queue,queue=[],i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}__name(nextTick,"nextTick"),module2.exports=immediate;function immediate(task){queue.push(task)===1&&!draining&&scheduleDrain()}__name(immediate,"immediate")}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(_dereq_,module2,exports2){var immediate=_dereq_(1);function INTERNAL(){}__name(INTERNAL,"INTERNAL");var handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];module2.exports=Promise2;function Promise2(resolver){if(typeof resolver!="function")throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}__name(Promise2,"Promise"),Promise2.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise2.prototype.then=function(onFulfilled,onRejected){if(typeof onFulfilled!="function"&&this.state===FULFILLED||typeof onRejected!="function"&&this.state===REJECTED)return this;var promise=new this.constructor(INTERNAL);if(this.state!==PENDING){var resolver=this.state===FULFILLED?onFulfilled:onRejected;unwrap(promise,resolver,this.outcome)}else this.queue.push(new QueueItem(promise,onFulfilled,onRejected));return promise};function QueueItem(promise,onFulfilled,onRejected){this.promise=promise,typeof onFulfilled=="function"&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled),typeof onRejected=="function"&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}__name(QueueItem,"QueueItem"),QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)},QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)},QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)},QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)};function unwrap(promise,func,value){immediate(function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,new TypeError("Cannot resolve promise with itself")):handlers.resolve(promise,returnValue)})}__name(unwrap,"unwrap"),handlers.resolve=function(self2,value){var result=tryCatch(getThen,value);if(result.status==="error")return handlers.reject(self2,result.value);var thenable=result.value;if(thenable)safelyResolveThenable(self2,thenable);else{self2.state=FULFILLED,self2.outcome=value;for(var i=-1,len=self2.queue.length;++i<len;)self2.queue[i].callFulfilled(value)}return self2},handlers.reject=function(self2,error){self2.state=REJECTED,self2.outcome=error;for(var i=-1,len=self2.queue.length;++i<len;)self2.queue[i].callRejected(error);return self2};function getThen(obj){var then=obj&&obj.then;if(obj&&(typeof obj=="object"||typeof obj=="function")&&typeof then=="function")return __name(function(){then.apply(obj,arguments)},"appyThen")}__name(getThen,"getThen");function safelyResolveThenable(self2,thenable){var called=!1;function onError(value){called||(called=!0,handlers.reject(self2,value))}__name(onError,"onError");function onSuccess(value){called||(called=!0,handlers.resolve(self2,value))}__name(onSuccess,"onSuccess");function tryToUnwrap(){thenable(onSuccess,onError)}__name(tryToUnwrap,"tryToUnwrap");var result=tryCatch(tryToUnwrap);result.status==="error"&&onError(result.value)}__name(safelyResolveThenable,"safelyResolveThenable");function tryCatch(func,value){var out={};try{out.value=func(value),out.status="success"}catch(e){out.status="error",out.value=e}return out}__name(tryCatch,"tryCatch"),Promise2.resolve=resolve;function resolve(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)}__name(resolve,"resolve"),Promise2.reject=reject;function reject(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)}__name(reject,"reject"),Promise2.all=all;function all(iterable){var self2=this;if(Object.prototype.toString.call(iterable)!=="[object Array]")return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=new Array(len),resolved=0,i=-1,promise=new this(INTERNAL);++i<len;)allResolver(iterable[i],i);return promise;function allResolver(value,i2){self2.resolve(value).then(resolveFromAll,function(error){called||(called=!0,handlers.reject(promise,error))});function resolveFromAll(outValue){values[i2]=outValue,++resolved===len&&!called&&(called=!0,handlers.resolve(promise,values))}__name(resolveFromAll,"resolveFromAll")}}__name(all,"all"),Promise2.race=race;function race(iterable){var self2=this;if(Object.prototype.toString.call(iterable)!=="[object Array]")return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var i=-1,promise=new this(INTERNAL);++i<len;)resolver(iterable[i]);return promise;function resolver(value){self2.resolve(value).then(function(response){called||(called=!0,handlers.resolve(promise,response))},function(error){called||(called=!0,handlers.reject(promise,error))})}}__name(race,"race")},{1:1}],3:[function(_dereq_,module2,exports2){(function(global){typeof global.Promise!="function"&&(global.Promise=_dereq_(2))}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(_dereq_,module2,exports2){var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol=="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck,"_classCallCheck");function getIDB(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(e){return}}__name(getIDB,"getIDB");var idb=getIDB();function isIndexedDBValid(){try{if(!idb||!idb.open)return!1;var isSafari=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),hasFetch=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!isSafari||hasFetch)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(e){return!1}}__name(isIndexedDBValid,"isIndexedDBValid");function createBlob(parts,properties){parts=parts||[],properties=properties||{};try{return new Blob(parts,properties)}catch(e){if(e.name!=="TypeError")throw e;for(var Builder=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,builder=new Builder,i=0;i<parts.length;i+=1)builder.append(parts[i]);return builder.getBlob(properties.type)}}__name(createBlob,"createBlob"),typeof Promise>"u"&&_dereq_(3);var Promise$1=Promise;function executeCallback(promise,callback){callback&&promise.then(function(result){callback(null,result)},function(error){callback(error)})}__name(executeCallback,"executeCallback");function executeTwoCallbacks(promise,callback,errorCallback){typeof callback=="function"&&promise.then(callback),typeof errorCallback=="function"&&promise.catch(errorCallback)}__name(executeTwoCallbacks,"executeTwoCallbacks");function normalizeKey(key2){return typeof key2!="string"&&(console.warn(key2+" used as a key, but it is not a string."),key2=String(key2)),key2}__name(normalizeKey,"normalizeKey");function getCallback(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}__name(getCallback,"getCallback");var DETECT_BLOB_SUPPORT_STORE="local-forage-detect-blob-support",supportsBlobs=void 0,dbContexts={},toString=Object.prototype.toString,READ_ONLY="readonly",READ_WRITE="readwrite";function _binStringToArrayBuffer(bin){for(var length2=bin.length,buf=new ArrayBuffer(length2),arr=new Uint8Array(buf),i=0;i<length2;i++)arr[i]=bin.charCodeAt(i);return buf}__name(_binStringToArrayBuffer,"_binStringToArrayBuffer");function _checkBlobSupportWithoutCaching(idb2){return new Promise$1(function(resolve){var txn=idb2.transaction(DETECT_BLOB_SUPPORT_STORE,READ_WRITE),blob=createBlob([""]);txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob,"key"),txn.onabort=function(e){e.preventDefault(),e.stopPropagation(),resolve(!1)},txn.oncomplete=function(){var matchedChrome=navigator.userAgent.match(/Chrome\/(\d+)/),matchedEdge=navigator.userAgent.match(/Edge\//);resolve(matchedEdge||!matchedChrome||parseInt(matchedChrome[1],10)>=43)}}).catch(function(){return!1})}__name(_checkBlobSupportWithoutCaching,"_checkBlobSupportWithoutCaching");function _checkBlobSupport(idb2){return typeof supportsBlobs=="boolean"?Promise$1.resolve(supportsBlobs):_checkBlobSupportWithoutCaching(idb2).then(function(value){return supportsBlobs=value,supportsBlobs})}__name(_checkBlobSupport,"_checkBlobSupport");function _deferReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation={};deferredOperation.promise=new Promise$1(function(resolve,reject){deferredOperation.resolve=resolve,deferredOperation.reject=reject}),dbContext.deferredOperations.push(deferredOperation),dbContext.dbReady?dbContext.dbReady=dbContext.dbReady.then(function(){return deferredOperation.promise}):dbContext.dbReady=deferredOperation.promise}__name(_deferReadiness,"_deferReadiness");function _advanceReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation=dbContext.deferredOperations.pop();if(deferredOperation)return deferredOperation.resolve(),deferredOperation.promise}__name(_advanceReadiness,"_advanceReadiness");function _rejectReadiness(dbInfo,err){var dbContext=dbContexts[dbInfo.name],deferredOperation=dbContext.deferredOperations.pop();if(deferredOperation)return deferredOperation.reject(err),deferredOperation.promise}__name(_rejectReadiness,"_rejectReadiness");function _getConnection(dbInfo,upgradeNeeded){return new Promise$1(function(resolve,reject){if(dbContexts[dbInfo.name]=dbContexts[dbInfo.name]||createDbContext(),dbInfo.db)if(upgradeNeeded)_deferReadiness(dbInfo),dbInfo.db.close();else return resolve(dbInfo.db);var dbArgs=[dbInfo.name];upgradeNeeded&&dbArgs.push(dbInfo.version);var openreq=idb.open.apply(idb,dbArgs);upgradeNeeded&&(openreq.onupgradeneeded=function(e){var db=openreq.result;try{db.createObjectStore(dbInfo.storeName),e.oldVersion<=1&&db.createObjectStore(DETECT_BLOB_SUPPORT_STORE)}catch(ex){if(ex.name==="ConstraintError")console.warn('The database "'+dbInfo.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+dbInfo.storeName+'" already exists.');else throw ex}}),openreq.onerror=function(e){e.preventDefault(),reject(openreq.error)},openreq.onsuccess=function(){var db=openreq.result;db.onversionchange=function(e){e.target.close()},resolve(db),_advanceReadiness(dbInfo)}})}__name(_getConnection,"_getConnection");function _getOriginalConnection(dbInfo){return _getConnection(dbInfo,!1)}__name(_getOriginalConnection,"_getOriginalConnection");function _getUpgradedConnection(dbInfo){return _getConnection(dbInfo,!0)}__name(_getUpgradedConnection,"_getUpgradedConnection");function _isUpgradeNeeded(dbInfo,defaultVersion){if(!dbInfo.db)return!0;var isNewStore=!dbInfo.db.objectStoreNames.contains(dbInfo.storeName),isDowngrade=dbInfo.version<dbInfo.db.version,isUpgrade=dbInfo.version>dbInfo.db.version;if(isDowngrade&&(dbInfo.version!==defaultVersion&&console.warn('The database "'+dbInfo.name+"\" can't be downgraded from version "+dbInfo.db.version+" to version "+dbInfo.version+"."),dbInfo.version=dbInfo.db.version),isUpgrade||isNewStore){if(isNewStore){var incVersion=dbInfo.db.version+1;incVersion>dbInfo.version&&(dbInfo.version=incVersion)}return!0}return!1}__name(_isUpgradeNeeded,"_isUpgradeNeeded");function _encodeBlob(blob){return new Promise$1(function(resolve,reject){var reader=new FileReader;reader.onerror=reject,reader.onloadend=function(e){var base64=btoa(e.target.result||"");resolve({__local_forage_encoded_blob:!0,data:base64,type:blob.type})},reader.readAsBinaryString(blob)})}__name(_encodeBlob,"_encodeBlob");function _decodeBlob(encodedBlob){var arrayBuff=_binStringToArrayBuffer(atob(encodedBlob.data));return createBlob([arrayBuff],{type:encodedBlob.type})}__name(_decodeBlob,"_decodeBlob");function _isEncodedBlob(value){return value&&value.__local_forage_encoded_blob}__name(_isEncodedBlob,"_isEncodedBlob");function _fullyReady(callback){var self2=this,promise=self2._initReady().then(function(){var dbContext=dbContexts[self2._dbInfo.name];if(dbContext&&dbContext.dbReady)return dbContext.dbReady});return executeTwoCallbacks(promise,callback,callback),promise}__name(_fullyReady,"_fullyReady");function _tryReconnect(dbInfo){_deferReadiness(dbInfo);for(var dbContext=dbContexts[dbInfo.name],forages=dbContext.forages,i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db&&(forage._dbInfo.db.close(),forage._dbInfo.db=null)}return dbInfo.db=null,_getOriginalConnection(dbInfo).then(function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo)?_getUpgradedConnection(dbInfo):db}).then(function(db){dbInfo.db=dbContext.db=db;for(var i2=0;i2<forages.length;i2++)forages[i2]._dbInfo.db=db}).catch(function(err){throw _rejectReadiness(dbInfo,err),err})}__name(_tryReconnect,"_tryReconnect");function createTransaction(dbInfo,mode,callback,retries){retries===void 0&&(retries=1);try{var tx=dbInfo.db.transaction(dbInfo.storeName,mode);callback(null,tx)}catch(err){if(retries>0&&(!dbInfo.db||err.name==="InvalidStateError"||err.name==="NotFoundError"))return Promise$1.resolve().then(function(){if(!dbInfo.db||err.name==="NotFoundError"&&!dbInfo.db.objectStoreNames.contains(dbInfo.storeName)&&dbInfo.version<=dbInfo.db.version)return dbInfo.db&&(dbInfo.version=dbInfo.db.version+1),_getUpgradedConnection(dbInfo)}).then(function(){return _tryReconnect(dbInfo).then(function(){createTransaction(dbInfo,mode,callback,retries-1)})}).catch(callback);callback(err)}}__name(createTransaction,"createTransaction");function createDbContext(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}__name(createDbContext,"createDbContext");function _initStorage(options){var self2=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=options[i];var dbContext=dbContexts[dbInfo.name];dbContext||(dbContext=createDbContext(),dbContexts[dbInfo.name]=dbContext),dbContext.forages.push(self2),self2._initReady||(self2._initReady=self2.ready,self2.ready=_fullyReady);var initPromises=[];function ignoreErrors(){return Promise$1.resolve()}__name(ignoreErrors,"ignoreErrors");for(var j=0;j<dbContext.forages.length;j++){var forage=dbContext.forages[j];forage!==self2&&initPromises.push(forage._initReady().catch(ignoreErrors))}var forages=dbContext.forages.slice(0);return Promise$1.all(initPromises).then(function(){return dbInfo.db=dbContext.db,_getOriginalConnection(dbInfo)}).then(function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo,self2._defaultConfig.version)?_getUpgradedConnection(dbInfo):db}).then(function(db){dbInfo.db=dbContext.db=db,self2._dbInfo=dbInfo;for(var k=0;k<forages.length;k++){var forage2=forages[k];forage2!==self2&&(forage2._dbInfo.db=dbInfo.db,forage2._dbInfo.version=dbInfo.version)}})}__name(_initStorage,"_initStorage");function getItem(key2,callback){var self2=this;key2=normalizeKey(key2);var promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){createTransaction(self2._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self2._dbInfo.storeName),req=store.get(key2);req.onsuccess=function(){var value=req.result;value===void 0&&(value=null),_isEncodedBlob(value)&&(value=_decodeBlob(value)),resolve(value)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}__name(getItem,"getItem");function iterate(iterator,callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){createTransaction(self2._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self2._dbInfo.storeName),req=store.openCursor(),iterationNumber=1;req.onsuccess=function(){var cursor=req.result;if(cursor){var value=cursor.value;_isEncodedBlob(value)&&(value=_decodeBlob(value));var result=iterator(value,cursor.key,iterationNumber++);result!==void 0?resolve(result):cursor.continue()}else resolve()},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}__name(iterate,"iterate");function setItem(key2,value,callback){var self2=this;key2=normalizeKey(key2);var promise=new Promise$1(function(resolve,reject){var dbInfo;self2.ready().then(function(){return dbInfo=self2._dbInfo,toString.call(value)==="[object Blob]"?_checkBlobSupport(dbInfo.db).then(function(blobSupport){return blobSupport?value:_encodeBlob(value)}):value}).then(function(value2){createTransaction(self2._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self2._dbInfo.storeName);value2===null&&(value2=void 0);var req=store.put(value2,key2);transaction.oncomplete=function(){value2===void 0&&(value2=null),resolve(value2)},transaction.onabort=transaction.onerror=function(){var err2=req.error?req.error:req.transaction.error;reject(err2)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}__name(setItem,"setItem");function removeItem(key2,callback){var self2=this;key2=normalizeKey(key2);var promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){createTransaction(self2._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self2._dbInfo.storeName),req=store.delete(key2);transaction.oncomplete=function(){resolve()},transaction.onerror=function(){reject(req.error)},transaction.onabort=function(){var err2=req.error?req.error:req.transaction.error;reject(err2)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}__name(removeItem,"removeItem");function clear(callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){createTransaction(self2._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self2._dbInfo.storeName),req=store.clear();transaction.oncomplete=function(){resolve()},transaction.onabort=transaction.onerror=function(){var err2=req.error?req.error:req.transaction.error;reject(err2)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}__name(clear,"clear");function length(callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){createTransaction(self2._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self2._dbInfo.storeName),req=store.count();req.onsuccess=function(){resolve(req.result)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}__name(length,"length");function key(n,callback){var self2=this,promise=new Promise$1(function(resolve,reject){if(n<0){resolve(null);return}self2.ready().then(function(){createTransaction(self2._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self2._dbInfo.storeName),advanced=!1,req=store.openKeyCursor();req.onsuccess=function(){var cursor=req.result;if(!cursor){resolve(null);return}n===0||advanced?resolve(cursor.key):(advanced=!0,cursor.advance(n))},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}__name(key,"key");function keys(callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){createTransaction(self2._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self2._dbInfo.storeName),req=store.openKeyCursor(),keys2=[];req.onsuccess=function(){var cursor=req.result;if(!cursor){resolve(keys2);return}keys2.push(cursor.key),cursor.continue()},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}__name(keys,"keys");function dropInstance(options,callback){callback=getCallback.apply(this,arguments);var currentConfig=this.config();options=typeof options!="function"&&options||{},options.name||(options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName);var self2=this,promise;if(!options.name)promise=Promise$1.reject("Invalid arguments");else{var isCurrentDb=options.name===currentConfig.name&&self2._dbInfo.db,dbPromise=isCurrentDb?Promise$1.resolve(self2._dbInfo.db):_getOriginalConnection(options).then(function(db){var dbContext=dbContexts[options.name],forages=dbContext.forages;dbContext.db=db;for(var i=0;i<forages.length;i++)forages[i]._dbInfo.db=db;return db});options.storeName?promise=dbPromise.then(function(db){if(db.objectStoreNames.contains(options.storeName)){var newVersion=db.version+1;_deferReadiness(options);var dbContext=dbContexts[options.name],forages=dbContext.forages;db.close();for(var i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db=null,forage._dbInfo.version=newVersion}var dropObjectPromise=new Promise$1(function(resolve,reject){var req=idb.open(options.name,newVersion);req.onerror=function(err){var db2=req.result;db2.close(),reject(err)},req.onupgradeneeded=function(){var db2=req.result;db2.deleteObjectStore(options.storeName)},req.onsuccess=function(){var db2=req.result;db2.close(),resolve(db2)}});return dropObjectPromise.then(function(db2){dbContext.db=db2;for(var j=0;j<forages.length;j++){var _forage2=forages[j];_forage2._dbInfo.db=db2,_advanceReadiness(_forage2._dbInfo)}}).catch(function(err){throw(_rejectReadiness(options,err)||Promise$1.resolve()).catch(function(){}),err})}}):promise=dbPromise.then(function(db){_deferReadiness(options);var dbContext=dbContexts[options.name],forages=dbContext.forages;db.close();for(var i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db=null}var dropDBPromise=new Promise$1(function(resolve,reject){var req=idb.deleteDatabase(options.name);req.onerror=function(){var db2=req.result;db2&&db2.close(),reject(req.error)},req.onblocked=function(){console.warn('dropInstance blocked for database "'+options.name+'" until all open connections are closed')},req.onsuccess=function(){var db2=req.result;db2&&db2.close(),resolve(db2)}});return dropDBPromise.then(function(db2){dbContext.db=db2;for(var i2=0;i2<forages.length;i2++){var _forage=forages[i2];_advanceReadiness(_forage._dbInfo)}}).catch(function(err){throw(_rejectReadiness(options,err)||Promise$1.resolve()).catch(function(){}),err})})}return executeCallback(promise,callback),promise}__name(dropInstance,"dropInstance");var asyncStorage={_driver:"asyncStorage",_initStorage,_support:isIndexedDBValid(),iterate,getItem,setItem,removeItem,clear,length,key,keys,dropInstance};function isWebSQLValid(){return typeof openDatabase=="function"}__name(isWebSQLValid,"isWebSQLValid");var BASE_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BLOB_TYPE_PREFIX="~~local_forage_type~",BLOB_TYPE_PREFIX_REGEX=/^~~local_forage_type~([^~]+)~/,SERIALIZED_MARKER="__lfsc__:",SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER.length,TYPE_ARRAYBUFFER="arbf",TYPE_BLOB="blob",TYPE_INT8ARRAY="si08",TYPE_UINT8ARRAY="ui08",TYPE_UINT8CLAMPEDARRAY="uic8",TYPE_INT16ARRAY="si16",TYPE_INT32ARRAY="si32",TYPE_UINT16ARRAY="ur16",TYPE_UINT32ARRAY="ui32",TYPE_FLOAT32ARRAY="fl32",TYPE_FLOAT64ARRAY="fl64",TYPE_SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER_LENGTH+TYPE_ARRAYBUFFER.length,toString$1=Object.prototype.toString;function stringToBuffer(serializedString){var bufferLength=serializedString.length*.75,len=serializedString.length,i,p=0,encoded1,encoded2,encoded3,encoded4;serializedString[serializedString.length-1]==="="&&(bufferLength--,serializedString[serializedString.length-2]==="="&&bufferLength--);var buffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(buffer);for(i=0;i<len;i+=4)encoded1=BASE_CHARS.indexOf(serializedString[i]),encoded2=BASE_CHARS.indexOf(serializedString[i+1]),encoded3=BASE_CHARS.indexOf(serializedString[i+2]),encoded4=BASE_CHARS.indexOf(serializedString[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(encoded2&15)<<4|encoded3>>2,bytes[p++]=(encoded3&3)<<6|encoded4&63;return buffer}__name(stringToBuffer,"stringToBuffer");function bufferToString(buffer){var bytes=new Uint8Array(buffer),base64String="",i;for(i=0;i<bytes.length;i+=3)base64String+=BASE_CHARS[bytes[i]>>2],base64String+=BASE_CHARS[(bytes[i]&3)<<4|bytes[i+1]>>4],base64String+=BASE_CHARS[(bytes[i+1]&15)<<2|bytes[i+2]>>6],base64String+=BASE_CHARS[bytes[i+2]&63];return bytes.length%3===2?base64String=base64String.substring(0,base64String.length-1)+"=":bytes.length%3===1&&(base64String=base64String.substring(0,base64String.length-2)+"=="),base64String}__name(bufferToString,"bufferToString");function serialize(value,callback){var valueType="";if(value&&(valueType=toString$1.call(value)),value&&(valueType==="[object ArrayBuffer]"||value.buffer&&toString$1.call(value.buffer)==="[object ArrayBuffer]")){var buffer,marker=SERIALIZED_MARKER;value instanceof ArrayBuffer?(buffer=value,marker+=TYPE_ARRAYBUFFER):(buffer=value.buffer,valueType==="[object Int8Array]"?marker+=TYPE_INT8ARRAY:valueType==="[object Uint8Array]"?marker+=TYPE_UINT8ARRAY:valueType==="[object Uint8ClampedArray]"?marker+=TYPE_UINT8CLAMPEDARRAY:valueType==="[object Int16Array]"?marker+=TYPE_INT16ARRAY:valueType==="[object Uint16Array]"?marker+=TYPE_UINT16ARRAY:valueType==="[object Int32Array]"?marker+=TYPE_INT32ARRAY:valueType==="[object Uint32Array]"?marker+=TYPE_UINT32ARRAY:valueType==="[object Float32Array]"?marker+=TYPE_FLOAT32ARRAY:valueType==="[object Float64Array]"?marker+=TYPE_FLOAT64ARRAY:callback(new Error("Failed to get type for BinaryArray"))),callback(marker+bufferToString(buffer))}else if(valueType==="[object Blob]"){var fileReader=new FileReader;fileReader.onload=function(){var str=BLOB_TYPE_PREFIX+value.type+"~"+bufferToString(this.result);callback(SERIALIZED_MARKER+TYPE_BLOB+str)},fileReader.readAsArrayBuffer(value)}else try{callback(JSON.stringify(value))}catch(e){console.error("Couldn't convert value into a JSON string: ",value),callback(null,e)}}__name(serialize,"serialize");function deserialize(value){if(value.substring(0,SERIALIZED_MARKER_LENGTH)!==SERIALIZED_MARKER)return JSON.parse(value);var serializedString=value.substring(TYPE_SERIALIZED_MARKER_LENGTH),type=value.substring(SERIALIZED_MARKER_LENGTH,TYPE_SERIALIZED_MARKER_LENGTH),blobType;if(type===TYPE_BLOB&&BLOB_TYPE_PREFIX_REGEX.test(serializedString)){var matcher=serializedString.match(BLOB_TYPE_PREFIX_REGEX);blobType=matcher[1],serializedString=serializedString.substring(matcher[0].length)}var buffer=stringToBuffer(serializedString);switch(type){case TYPE_ARRAYBUFFER:return buffer;case TYPE_BLOB:return createBlob([buffer],{type:blobType});case TYPE_INT8ARRAY:return new Int8Array(buffer);case TYPE_UINT8ARRAY:return new Uint8Array(buffer);case TYPE_UINT8CLAMPEDARRAY:return new Uint8ClampedArray(buffer);case TYPE_INT16ARRAY:return new Int16Array(buffer);case TYPE_UINT16ARRAY:return new Uint16Array(buffer);case TYPE_INT32ARRAY:return new Int32Array(buffer);case TYPE_UINT32ARRAY:return new Uint32Array(buffer);case TYPE_FLOAT32ARRAY:return new Float32Array(buffer);case TYPE_FLOAT64ARRAY:return new Float64Array(buffer);default:throw new Error("Unkown type: "+type)}}__name(deserialize,"deserialize");var localforageSerializer={serialize,deserialize,stringToBuffer,bufferToString};function createDbTable(t,dbInfo,callback,errorCallback){t.executeSql("CREATE TABLE IF NOT EXISTS "+dbInfo.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],callback,errorCallback)}__name(createDbTable,"createDbTable");function _initStorage$1(options){var self2=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=typeof options[i]!="string"?options[i].toString():options[i];var dbInfoPromise=new Promise$1(function(resolve,reject){try{dbInfo.db=openDatabase(dbInfo.name,String(dbInfo.version),dbInfo.description,dbInfo.size)}catch(e){return reject(e)}dbInfo.db.transaction(function(t){createDbTable(t,dbInfo,function(){self2._dbInfo=dbInfo,resolve()},function(t2,error){reject(error)})},reject)});return dbInfo.serializer=localforageSerializer,dbInfoPromise}__name(_initStorage$1,"_initStorage$1");function tryExecuteSql(t,dbInfo,sqlStatement,args,callback,errorCallback){t.executeSql(sqlStatement,args,callback,function(t2,error){error.code===error.SYNTAX_ERR?t2.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[dbInfo.storeName],function(t3,results){results.rows.length?errorCallback(t3,error):createDbTable(t3,dbInfo,function(){t3.executeSql(sqlStatement,args,callback,errorCallback)},errorCallback)},errorCallback):errorCallback(t2,error)},errorCallback)}__name(tryExecuteSql,"tryExecuteSql");function getItem$1(key2,callback){var self2=this;key2=normalizeKey(key2);var promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){var dbInfo=self2._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT * FROM "+dbInfo.storeName+" WHERE key = ? LIMIT 1",[key2],function(t2,results){var result=results.rows.length?results.rows.item(0).value:null;result&&(result=dbInfo.serializer.deserialize(result)),resolve(result)},function(t2,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}__name(getItem$1,"getItem$1");function iterate$1(iterator,callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){var dbInfo=self2._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT * FROM "+dbInfo.storeName,[],function(t2,results){for(var rows=results.rows,length2=rows.length,i=0;i<length2;i++){var item=rows.item(i),result=item.value;if(result&&(result=dbInfo.serializer.deserialize(result)),result=iterator(result,item.key,i+1),result!==void 0){resolve(result);return}}resolve()},function(t2,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}__name(iterate$1,"iterate$1");function _setItem(key2,value,callback,retriesLeft){var self2=this;key2=normalizeKey(key2);var promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){value===void 0&&(value=null);var originalValue=value,dbInfo=self2._dbInfo;dbInfo.serializer.serialize(value,function(value2,error){error?reject(error):dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"INSERT OR REPLACE INTO "+dbInfo.storeName+" (key, value) VALUES (?, ?)",[key2,value2],function(){resolve(originalValue)},function(t2,error2){reject(error2)})},function(sqlError){if(sqlError.code===sqlError.QUOTA_ERR){if(retriesLeft>0){resolve(_setItem.apply(self2,[key2,originalValue,callback,retriesLeft-1]));return}reject(sqlError)}})})}).catch(reject)});return executeCallback(promise,callback),promise}__name(_setItem,"_setItem");function setItem$1(key2,value,callback){return _setItem.apply(this,[key2,value,callback,1])}__name(setItem$1,"setItem$1");function removeItem$1(key2,callback){var self2=this;key2=normalizeKey(key2);var promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){var dbInfo=self2._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"DELETE FROM "+dbInfo.storeName+" WHERE key = ?",[key2],function(){resolve()},function(t2,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}__name(removeItem$1,"removeItem$1");function clear$1(callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){var dbInfo=self2._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"DELETE FROM "+dbInfo.storeName,[],function(){resolve()},function(t2,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}__name(clear$1,"clear$1");function length$1(callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){var dbInfo=self2._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT COUNT(key) as c FROM "+dbInfo.storeName,[],function(t2,results){var result=results.rows.item(0).c;resolve(result)},function(t2,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}__name(length$1,"length$1");function key$1(n,callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){var dbInfo=self2._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT key FROM "+dbInfo.storeName+" WHERE id = ? LIMIT 1",[n+1],function(t2,results){var result=results.rows.length?results.rows.item(0).key:null;resolve(result)},function(t2,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}__name(key$1,"key$1");function keys$1(callback){var self2=this,promise=new Promise$1(function(resolve,reject){self2.ready().then(function(){var dbInfo=self2._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT key FROM "+dbInfo.storeName,[],function(t2,results){for(var keys2=[],i=0;i<results.rows.length;i++)keys2.push(results.rows.item(i).key);resolve(keys2)},function(t2,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}__name(keys$1,"keys$1");function getAllStoreNames(db){return new Promise$1(function(resolve,reject){db.transaction(function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t2,results){for(var storeNames=[],i=0;i<results.rows.length;i++)storeNames.push(results.rows.item(i).name);resolve({db,storeNames})},function(t2,error){reject(error)})},function(sqlError){reject(sqlError)})})}__name(getAllStoreNames,"getAllStoreNames");function dropInstance$1(options,callback){callback=getCallback.apply(this,arguments);var currentConfig=this.config();options=typeof options!="function"&&options||{},options.name||(options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName);var self2=this,promise;return options.name?promise=new Promise$1(function(resolve){var db;options.name===currentConfig.name?db=self2._dbInfo.db:db=openDatabase(options.name,"","",0),options.storeName?resolve({db,storeNames:[options.storeName]}):resolve(getAllStoreNames(db))}).then(function(operationInfo){return new Promise$1(function(resolve,reject){operationInfo.db.transaction(function(t){function dropTable(storeName){return new Promise$1(function(resolve2,reject2){t.executeSql("DROP TABLE IF EXISTS "+storeName,[],function(){resolve2()},function(t2,error){reject2(error)})})}__name(dropTable,"dropTable");for(var operations=[],i=0,len=operationInfo.storeNames.length;i<len;i++)operations.push(dropTable(operationInfo.storeNames[i]));Promise$1.all(operations).then(function(){resolve()}).catch(function(e){reject(e)})},function(sqlError){reject(sqlError)})})}):promise=Promise$1.reject("Invalid arguments"),executeCallback(promise,callback),promise}__name(dropInstance$1,"dropInstance$1");var webSQLStorage={_driver:"webSQLStorage",_initStorage:_initStorage$1,_support:isWebSQLValid(),iterate:iterate$1,getItem:getItem$1,setItem:setItem$1,removeItem:removeItem$1,clear:clear$1,length:length$1,key:key$1,keys:keys$1,dropInstance:dropInstance$1};function isLocalStorageValid(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}__name(isLocalStorageValid,"isLocalStorageValid");function _getKeyPrefix(options,defaultConfig){var keyPrefix=options.name+"/";return options.storeName!==defaultConfig.storeName&&(keyPrefix+=options.storeName+"/"),keyPrefix}__name(_getKeyPrefix,"_getKeyPrefix");function checkIfLocalStorageThrows(){var localStorageTestKey="_localforage_support_test";try{return localStorage.setItem(localStorageTestKey,!0),localStorage.removeItem(localStorageTestKey),!1}catch(e){return!0}}__name(checkIfLocalStorageThrows,"checkIfLocalStorageThrows");function _isLocalStorageUsable(){return!checkIfLocalStorageThrows()||localStorage.length>0}__name(_isLocalStorageUsable,"_isLocalStorageUsable");function _initStorage$2(options){var self2=this,dbInfo={};if(options)for(var i in options)dbInfo[i]=options[i];return dbInfo.keyPrefix=_getKeyPrefix(options,self2._defaultConfig),_isLocalStorageUsable()?(self2._dbInfo=dbInfo,dbInfo.serializer=localforageSerializer,Promise$1.resolve()):Promise$1.reject()}__name(_initStorage$2,"_initStorage$2");function clear$2(callback){var self2=this,promise=self2.ready().then(function(){for(var keyPrefix=self2._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var key2=localStorage.key(i);key2.indexOf(keyPrefix)===0&&localStorage.removeItem(key2)}});return executeCallback(promise,callback),promise}__name(clear$2,"clear$2");function getItem$2(key2,callback){var self2=this;key2=normalizeKey(key2);var promise=self2.ready().then(function(){var dbInfo=self2._dbInfo,result=localStorage.getItem(dbInfo.keyPrefix+key2);return result&&(result=dbInfo.serializer.deserialize(result)),result});return executeCallback(promise,callback),promise}__name(getItem$2,"getItem$2");function iterate$2(iterator,callback){var self2=this,promise=self2.ready().then(function(){for(var dbInfo=self2._dbInfo,keyPrefix=dbInfo.keyPrefix,keyPrefixLength=keyPrefix.length,length2=localStorage.length,iterationNumber=1,i=0;i<length2;i++){var key2=localStorage.key(i);if(key2.indexOf(keyPrefix)===0){var value=localStorage.getItem(key2);if(value&&(value=dbInfo.serializer.deserialize(value)),value=iterator(value,key2.substring(keyPrefixLength),iterationNumber++),value!==void 0)return value}}});return executeCallback(promise,callback),promise}__name(iterate$2,"iterate$2");function key$2(n,callback){var self2=this,promise=self2.ready().then(function(){var dbInfo=self2._dbInfo,result;try{result=localStorage.key(n)}catch(error){result=null}return result&&(result=result.substring(dbInfo.keyPrefix.length)),result});return executeCallback(promise,callback),promise}__name(key$2,"key$2");function keys$2(callback){var self2=this,promise=self2.ready().then(function(){for(var dbInfo=self2._dbInfo,length2=localStorage.length,keys2=[],i=0;i<length2;i++){var itemKey=localStorage.key(i);itemKey.indexOf(dbInfo.keyPrefix)===0&&keys2.push(itemKey.substring(dbInfo.keyPrefix.length))}return keys2});return executeCallback(promise,callback),promise}__name(keys$2,"keys$2");function length$2(callback){var self2=this,promise=self2.keys().then(function(keys2){return keys2.length});return executeCallback(promise,callback),promise}__name(length$2,"length$2");function removeItem$2(key2,callback){var self2=this;key2=normalizeKey(key2);var promise=self2.ready().then(function(){var dbInfo=self2._dbInfo;localStorage.removeItem(dbInfo.keyPrefix+key2)});return executeCallback(promise,callback),promise}__name(removeItem$2,"removeItem$2");function setItem$2(key2,value,callback){var self2=this;key2=normalizeKey(key2);var promise=self2.ready().then(function(){value===void 0&&(value=null);var originalValue=value;return new Promise$1(function(resolve,reject){var dbInfo=self2._dbInfo;dbInfo.serializer.serialize(value,function(value2,error){if(error)reject(error);else try{localStorage.setItem(dbInfo.keyPrefix+key2,value2),resolve(originalValue)}catch(e){(e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&reject(e),reject(e)}})})});return executeCallback(promise,callback),promise}__name(setItem$2,"setItem$2");function dropInstance$2(options,callback){if(callback=getCallback.apply(this,arguments),options=typeof options!="function"&&options||{},!options.name){var currentConfig=this.config();options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName}var self2=this,promise;return options.name?promise=new Promise$1(function(resolve){options.storeName?resolve(_getKeyPrefix(options,self2._defaultConfig)):resolve(options.name+"/")}).then(function(keyPrefix){for(var i=localStorage.length-1;i>=0;i--){var key2=localStorage.key(i);key2.indexOf(keyPrefix)===0&&localStorage.removeItem(key2)}}):promise=Promise$1.reject("Invalid arguments"),executeCallback(promise,callback),promise}__name(dropInstance$2,"dropInstance$2");var localStorageWrapper={_driver:"localStorageWrapper",_initStorage:_initStorage$2,_support:isLocalStorageValid(),iterate:iterate$2,getItem:getItem$2,setItem:setItem$2,removeItem:removeItem$2,clear:clear$2,length:length$2,key:key$2,keys:keys$2,dropInstance:dropInstance$2},sameValue=__name(function(x,y){return x===y||typeof x=="number"&&typeof y=="number"&&isNaN(x)&&isNaN(y)},"sameValue"),includes=__name(function(array,searchElement){for(var len=array.length,i=0;i<len;){if(sameValue(array[i],searchElement))return!0;i++}return!1},"includes"),isArray=Array.isArray||function(arg){return Object.prototype.toString.call(arg)==="[object Array]"},DefinedDrivers={},DriverSupport={},DefaultDrivers={INDEXEDDB:asyncStorage,WEBSQL:webSQLStorage,LOCALSTORAGE:localStorageWrapper},DefaultDriverOrder=[DefaultDrivers.INDEXEDDB._driver,DefaultDrivers.WEBSQL._driver,DefaultDrivers.LOCALSTORAGE._driver],OptionalDriverMethods=["dropInstance"],LibraryMethods=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(OptionalDriverMethods),DefaultConfig={description:"",driver:DefaultDriverOrder.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function callWhenReady(localForageInstance,libraryMethod){localForageInstance[libraryMethod]=function(){var _args=arguments;return localForageInstance.ready().then(function(){return localForageInstance[libraryMethod].apply(localForageInstance,_args)})}}__name(callWhenReady,"callWhenReady");function extend(){for(var i=1;i<arguments.length;i++){var arg=arguments[i];if(arg)for(var _key in arg)arg.hasOwnProperty(_key)&&(isArray(arg[_key])?arguments[0][_key]=arg[_key].slice():arguments[0][_key]=arg[_key])}return arguments[0]}__name(extend,"extend");var LocalForage=function(){function LocalForage2(options){_classCallCheck(this,LocalForage2);for(var driverTypeKey in DefaultDrivers)if(DefaultDrivers.hasOwnProperty(driverTypeKey)){var driver=DefaultDrivers[driverTypeKey],driverName=driver._driver;this[driverTypeKey]=driverName,DefinedDrivers[driverName]||this.defineDriver(driver)}this._defaultConfig=extend({},DefaultConfig),this._config=extend({},this._defaultConfig,options),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return __name(LocalForage2,"LocalForage"),LocalForage2.prototype.config=__name(function(options){if((typeof options>"u"?"undefined":_typeof(options))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in options){if(i==="storeName"&&(options[i]=options[i].replace(/\W/g,"_")),i==="version"&&typeof options[i]!="number")return new Error("Database version must be a number.");this._config[i]=options[i]}return"driver"in options&&options.driver?this.setDriver(this._config.driver):!0}else return typeof options=="string"?this._config[options]:this._config},"config"),LocalForage2.prototype.defineDriver=__name(function(driverObject,callback,errorCallback){var promise=new Promise$1(function(resolve,reject){try{var driverName=driverObject._driver,complianceError=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!driverObject._driver){reject(complianceError);return}for(var driverMethods=LibraryMethods.concat("_initStorage"),i=0,len=driverMethods.length;i<len;i++){var driverMethodName=driverMethods[i],isRequired=!includes(OptionalDriverMethods,driverMethodName);if((isRequired||driverObject[driverMethodName])&&typeof driverObject[driverMethodName]!="function"){reject(complianceError);return}}var configureMissingMethods=__name(function(){for(var methodNotImplementedFactory=__name(function(methodName){return function(){var error=new Error("Method "+methodName+" is not implemented by the current driver"),promise2=Promise$1.reject(error);return executeCallback(promise2,arguments[arguments.length-1]),promise2}},"methodNotImplementedFactory"),_i=0,_len=OptionalDriverMethods.length;_i<_len;_i++){var optionalDriverMethod=OptionalDriverMethods[_i];driverObject[optionalDriverMethod]||(driverObject[optionalDriverMethod]=methodNotImplementedFactory(optionalDriverMethod))}},"configureMissingMethods");configureMissingMethods();var setDriverSupport=__name(function(support){DefinedDrivers[driverName]&&console.info("Redefining LocalForage driver: "+driverName),DefinedDrivers[driverName]=driverObject,DriverSupport[driverName]=support,resolve()},"setDriverSupport");"_support"in driverObject?driverObject._support&&typeof driverObject._support=="function"?driverObject._support().then(setDriverSupport,reject):setDriverSupport(!!driverObject._support):setDriverSupport(!0)}catch(e){reject(e)}});return executeTwoCallbacks(promise,callback,errorCallback),promise},"defineDriver"),LocalForage2.prototype.driver=__name(function(){return this._driver||null},"driver"),LocalForage2.prototype.getDriver=__name(function(driverName,callback,errorCallback){var getDriverPromise=DefinedDrivers[driverName]?Promise$1.resolve(DefinedDrivers[driverName]):Promise$1.reject(new Error("Driver not found."));return executeTwoCallbacks(getDriverPromise,callback,errorCallback),getDriverPromise},"getDriver"),LocalForage2.prototype.getSerializer=__name(function(callback){var serializerPromise=Promise$1.resolve(localforageSerializer);return executeTwoCallbacks(serializerPromise,callback),serializerPromise},"getSerializer"),LocalForage2.prototype.ready=__name(function(callback){var self2=this,promise=self2._driverSet.then(function(){return self2._ready===null&&(self2._ready=self2._initDriver()),self2._ready});return executeTwoCallbacks(promise,callback,callback),promise},"ready"),LocalForage2.prototype.setDriver=__name(function(drivers,callback,errorCallback){var self2=this;isArray(drivers)||(drivers=[drivers]);var supportedDrivers=this._getSupportedDrivers(drivers);function setDriverToConfig(){self2._config.driver=self2.driver()}__name(setDriverToConfig,"setDriverToConfig");function extendSelfWithDriver(driver){return self2._extend(driver),setDriverToConfig(),self2._ready=self2._initStorage(self2._config),self2._ready}__name(extendSelfWithDriver,"extendSelfWithDriver");function initDriver(supportedDrivers2){return function(){var currentDriverIndex=0;function driverPromiseLoop(){for(;currentDriverIndex<supportedDrivers2.length;){var driverName=supportedDrivers2[currentDriverIndex];return currentDriverIndex++,self2._dbInfo=null,self2._ready=null,self2.getDriver(driverName).then(extendSelfWithDriver).catch(driverPromiseLoop)}setDriverToConfig();var error=new Error("No available storage method found.");return self2._driverSet=Promise$1.reject(error),self2._driverSet}return __name(driverPromiseLoop,"driverPromiseLoop"),driverPromiseLoop()}}__name(initDriver,"initDriver");var oldDriverSetDone=this._driverSet!==null?this._driverSet.catch(function(){return Promise$1.resolve()}):Promise$1.resolve();return this._driverSet=oldDriverSetDone.then(function(){var driverName=supportedDrivers[0];return self2._dbInfo=null,self2._ready=null,self2.getDriver(driverName).then(function(driver){self2._driver=driver._driver,setDriverToConfig(),self2._wrapLibraryMethodsWithReady(),self2._initDriver=initDriver(supportedDrivers)})}).catch(function(){setDriverToConfig();var error=new Error("No available storage method found.");return self2._driverSet=Promise$1.reject(error),self2._driverSet}),executeTwoCallbacks(this._driverSet,callback,errorCallback),this._driverSet},"setDriver"),LocalForage2.prototype.supports=__name(function(driverName){return!!DriverSupport[driverName]},"supports"),LocalForage2.prototype._extend=__name(function(libraryMethodsAndProperties){extend(this,libraryMethodsAndProperties)},"_extend"),LocalForage2.prototype._getSupportedDrivers=__name(function(drivers){for(var supportedDrivers=[],i=0,len=drivers.length;i<len;i++){var driverName=drivers[i];this.supports(driverName)&&supportedDrivers.push(driverName)}return supportedDrivers},"_getSupportedDrivers"),LocalForage2.prototype._wrapLibraryMethodsWithReady=__name(function(){for(var i=0,len=LibraryMethods.length;i<len;i++)callWhenReady(this,LibraryMethods[i])},"_wrapLibraryMethodsWithReady"),LocalForage2.prototype.createInstance=__name(function(options){return new LocalForage2(options)},"createInstance"),LocalForage2}(),localforage_js=new LocalForage;module2.exports=localforage_js},{3:3}]},{},[4])(4)})})(localforage$2);var localforageExports=localforage$2.exports;const localforage=getDefaultExportFromCjs(localforageExports),localforage$1=_mergeNamespaces({__proto__:null,default:localforage},[localforageExports]);export{localforage$1 as l};
