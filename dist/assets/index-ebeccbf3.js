var JA=Object.defineProperty;var XA=(i,e,t)=>e in i?JA(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var us=(i,e,t)=>(XA(i,typeof e!="symbol"?e+"":e,t),t);function u8(){import.meta.url,import("_").catch(()=>1);async function*i(){}}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ra(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var hE={exports:{}},eh={},fE={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sc=Symbol.for("react.element"),ZA=Symbol.for("react.portal"),eN=Symbol.for("react.fragment"),tN=Symbol.for("react.strict_mode"),nN=Symbol.for("react.profiler"),iN=Symbol.for("react.provider"),rN=Symbol.for("react.context"),sN=Symbol.for("react.forward_ref"),aN=Symbol.for("react.suspense"),oN=Symbol.for("react.memo"),lN=Symbol.for("react.lazy"),ob=Symbol.iterator;function cN(i){return i===null||typeof i!="object"?null:(i=ob&&i[ob]||i["@@iterator"],typeof i=="function"?i:null)}var pE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mE=Object.assign,gE={};function Qo(i,e,t){this.props=i,this.context=e,this.refs=gE,this.updater=t||pE}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Qo.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function yE(){}yE.prototype=Qo.prototype;function Zm(i,e,t){this.props=i,this.context=e,this.refs=gE,this.updater=t||pE}var eg=Zm.prototype=new yE;eg.constructor=Zm;mE(eg,Qo.prototype);eg.isPureReactComponent=!0;var lb=Array.isArray,bE=Object.prototype.hasOwnProperty,tg={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function wE(i,e,t){var n,r={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)bE.call(e,n)&&!vE.hasOwnProperty(n)&&(r[n]=e[n]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(i&&i.defaultProps)for(n in o=i.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:Sc,type:i,key:s,ref:a,props:r,_owner:tg.current}}function uN(i,e){return{$$typeof:Sc,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function ng(i){return typeof i=="object"&&i!==null&&i.$$typeof===Sc}function dN(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var cb=/\/+/g;function yf(i,e){return typeof i=="object"&&i!==null&&i.key!=null?dN(""+i.key):e.toString(36)}function Mu(i,e,t,n,r){var s=typeof i;(s==="undefined"||s==="boolean")&&(i=null);var a=!1;if(i===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(i.$$typeof){case Sc:case ZA:a=!0}}if(a)return a=i,r=r(a),i=n===""?"."+yf(a,0):n,lb(r)?(t="",i!=null&&(t=i.replace(cb,"$&/")+"/"),Mu(r,e,t,"",function(c){return c})):r!=null&&(ng(r)&&(r=uN(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(cb,"$&/")+"/")+i)),e.push(r)),1;if(a=0,n=n===""?".":n+":",lb(i))for(var o=0;o<i.length;o++){s=i[o];var l=n+yf(s,o);a+=Mu(s,e,t,l,r)}else if(l=cN(i),typeof l=="function")for(i=l.call(i),o=0;!(s=i.next()).done;)s=s.value,l=n+yf(s,o++),a+=Mu(s,e,t,l,r);else if(s==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Jc(i,e,t){if(i==null)return i;var n=[],r=0;return Mu(i,n,"","",function(s){return e.call(t,s,r++)}),n}function hN(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var Yn={current:null},Lu={transition:null},fN={ReactCurrentDispatcher:Yn,ReactCurrentBatchConfig:Lu,ReactCurrentOwner:tg};mt.Children={map:Jc,forEach:function(i,e,t){Jc(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return Jc(i,function(){e++}),e},toArray:function(i){return Jc(i,function(e){return e})||[]},only:function(i){if(!ng(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};mt.Component=Qo;mt.Fragment=eN;mt.Profiler=nN;mt.PureComponent=Zm;mt.StrictMode=tN;mt.Suspense=aN;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fN;mt.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=mE({},i.props),r=i.key,s=i.ref,a=i._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=tg.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var o=i.type.defaultProps;for(l in e)bE.call(e,l)&&!vE.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Sc,type:i.type,key:r,ref:s,props:n,_owner:a}};mt.createContext=function(i){return i={$$typeof:rN,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:iN,_context:i},i.Consumer=i};mt.createElement=wE;mt.createFactory=function(i){var e=wE.bind(null,i);return e.type=i,e};mt.createRef=function(){return{current:null}};mt.forwardRef=function(i){return{$$typeof:sN,render:i}};mt.isValidElement=ng;mt.lazy=function(i){return{$$typeof:lN,_payload:{_status:-1,_result:i},_init:hN}};mt.memo=function(i,e){return{$$typeof:oN,type:i,compare:e===void 0?null:e}};mt.startTransition=function(i){var e=Lu.transition;Lu.transition={};try{i()}finally{Lu.transition=e}};mt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};mt.useCallback=function(i,e){return Yn.current.useCallback(i,e)};mt.useContext=function(i){return Yn.current.useContext(i)};mt.useDebugValue=function(){};mt.useDeferredValue=function(i){return Yn.current.useDeferredValue(i)};mt.useEffect=function(i,e){return Yn.current.useEffect(i,e)};mt.useId=function(){return Yn.current.useId()};mt.useImperativeHandle=function(i,e,t){return Yn.current.useImperativeHandle(i,e,t)};mt.useInsertionEffect=function(i,e){return Yn.current.useInsertionEffect(i,e)};mt.useLayoutEffect=function(i,e){return Yn.current.useLayoutEffect(i,e)};mt.useMemo=function(i,e){return Yn.current.useMemo(i,e)};mt.useReducer=function(i,e,t){return Yn.current.useReducer(i,e,t)};mt.useRef=function(i){return Yn.current.useRef(i)};mt.useState=function(i){return Yn.current.useState(i)};mt.useSyncExternalStore=function(i,e,t){return Yn.current.useSyncExternalStore(i,e,t)};mt.useTransition=function(){return Yn.current.useTransition()};mt.version="18.2.0";fE.exports=mt;var ut=fE.exports;const Te=Ra(ut);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=ut,mN=Symbol.for("react.element"),gN=Symbol.for("react.fragment"),yN=Object.prototype.hasOwnProperty,bN=pN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vN={key:!0,ref:!0,__self:!0,__source:!0};function EE(i,e,t){var n,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)yN.call(e,n)&&!vN.hasOwnProperty(n)&&(r[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:mN,type:i,key:s,ref:a,props:r,_owner:bN.current}}eh.Fragment=gN;eh.jsx=EE;eh.jsxs=EE;hE.exports=eh;var xe=hE.exports,xE={exports:{}},xi={},TE={exports:{}},SE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(de,ne){var Y=de.length;de.push(ne);e:for(;0<Y;){var F=Y-1>>>1,H=de[F];if(0<r(H,ne))de[F]=ne,de[Y]=H,Y=F;else break e}}function t(de){return de.length===0?null:de[0]}function n(de){if(de.length===0)return null;var ne=de[0],Y=de.pop();if(Y!==ne){de[0]=Y;e:for(var F=0,H=de.length,_e=H>>>1;F<_e;){var we=2*(F+1)-1,ye=de[we],Ve=we+1,Ke=de[Ve];if(0>r(ye,Y))Ve<H&&0>r(Ke,ye)?(de[F]=Ke,de[Ve]=Y,F=Ve):(de[F]=ye,de[we]=Y,F=we);else if(Ve<H&&0>r(Ke,Y))de[F]=Ke,de[Ve]=Y,F=Ve;else break e}}return ne}function r(de,ne){var Y=de.sortIndex-ne.sortIndex;return Y!==0?Y:de.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(de){for(var ne=t(c);ne!==null;){if(ne.callback===null)n(c);else if(ne.startTime<=de)n(c),ne.sortIndex=ne.expirationTime,e(l,ne);else break;ne=t(c)}}function _(de){if(p=!1,E(de),!m)if(t(l)!==null)m=!0,ve(k);else{var ne=t(c);ne!==null&&re(_,ne.startTime-de)}}function k(de,ne){m=!1,p&&(p=!1,y(O),O=-1),f=!0;var Y=h;try{for(E(ne),d=t(l);d!==null&&(!(d.expirationTime>ne)||de&&!$());){var F=d.callback;if(typeof F=="function"){d.callback=null,h=d.priorityLevel;var H=F(d.expirationTime<=ne);ne=i.unstable_now(),typeof H=="function"?d.callback=H:d===t(l)&&n(l),E(ne)}else n(l);d=t(l)}if(d!==null)var _e=!0;else{var we=t(c);we!==null&&re(_,we.startTime-ne),_e=!1}return _e}finally{d=null,h=Y,f=!1}}var B=!1,D=null,O=-1,R=5,Q=-1;function $(){return!(i.unstable_now()-Q<R)}function P(){if(D!==null){var de=i.unstable_now();Q=de;var ne=!0;try{ne=D(!0,de)}finally{ne?q():(B=!1,D=null)}}else B=!1}var q;if(typeof b=="function")q=function(){b(P)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Z=S.port2;S.port1.onmessage=P,q=function(){Z.postMessage(null)}}else q=function(){w(P,0)};function ve(de){D=de,B||(B=!0,q())}function re(de,ne){O=w(function(){de(i.unstable_now())},ne)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(de){de.callback=null},i.unstable_continueExecution=function(){m||f||(m=!0,ve(k))},i.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<de?Math.floor(1e3/de):5},i.unstable_getCurrentPriorityLevel=function(){return h},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(de){switch(h){case 1:case 2:case 3:var ne=3;break;default:ne=h}var Y=h;h=ne;try{return de()}finally{h=Y}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(de,ne){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Y=h;h=de;try{return ne()}finally{h=Y}},i.unstable_scheduleCallback=function(de,ne,Y){var F=i.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?F+Y:F):Y=F,de){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Y+H,de={id:u++,callback:ne,priorityLevel:de,startTime:Y,expirationTime:H,sortIndex:-1},Y>F?(de.sortIndex=Y,e(c,de),t(l)===null&&de===t(c)&&(p?(y(O),O=-1):p=!0,re(_,Y-F))):(de.sortIndex=H,e(l,de),m||f||(m=!0,ve(k))),de},i.unstable_shouldYield=$,i.unstable_wrapCallback=function(de){var ne=h;return function(){var Y=h;h=ne;try{return de.apply(this,arguments)}finally{h=Y}}}})(SE);TE.exports=SE;var wN=TE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE=ut,Ei=wN;function Me(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AE=new Set,Xl={};function Pa(i,e){Do(i,e),Do(i+"Capture",e)}function Do(i,e){for(Xl[i]=e,i=0;i<e.length;i++)AE.add(e[i])}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kp=Object.prototype.hasOwnProperty,EN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ub={},db={};function xN(i){return kp.call(db,i)?!0:kp.call(ub,i)?!1:EN.test(i)?db[i]=!0:(ub[i]=!0,!1)}function TN(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function SN(i,e,t,n){if(e===null||typeof e>"u"||TN(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jn(i,e,t,n,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Pn[i]=new Jn(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Pn[e]=new Jn(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Pn[i]=new Jn(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Pn[i]=new Jn(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Pn[i]=new Jn(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Pn[i]=new Jn(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Pn[i]=new Jn(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Pn[i]=new Jn(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Pn[i]=new Jn(i,5,!1,i.toLowerCase(),null,!1,!1)});var ig=/[\-:]([a-z])/g;function rg(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ig,rg);Pn[e]=new Jn(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ig,rg);Pn[e]=new Jn(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ig,rg);Pn[e]=new Jn(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Pn[i]=new Jn(i,1,!1,i.toLowerCase(),null,!1,!1)});Pn.xlinkHref=new Jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Pn[i]=new Jn(i,1,!1,i.toLowerCase(),null,!0,!0)});function sg(i,e,t,n){var r=Pn.hasOwnProperty(e)?Pn[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SN(e,t,r,n)&&(t=null),n||r===null?xN(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var ss=CE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xc=Symbol.for("react.element"),lo=Symbol.for("react.portal"),co=Symbol.for("react.fragment"),ag=Symbol.for("react.strict_mode"),_p=Symbol.for("react.profiler"),NE=Symbol.for("react.provider"),kE=Symbol.for("react.context"),og=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Pp=Symbol.for("react.suspense_list"),lg=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),_E=Symbol.for("react.offscreen"),hb=Symbol.iterator;function ml(i){return i===null||typeof i!="object"?null:(i=hb&&i[hb]||i["@@iterator"],typeof i=="function"?i:null)}var Xt=Object.assign,bf;function Rl(i){if(bf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);bf=e&&e[1]||""}return"\n"+bf+i}var vf=!1;function wf(i,e){if(!i||vf)return"";vf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(i,[],e)}else{try{e.call()}catch(c){n=c}i.call(e.prototype)}else{try{throw Error()}catch(c){n=c}i()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var r=c.stack.split("\n"),s=n.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=a&&0<=o);break}}}finally{vf=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?Rl(i):""}function CN(i){switch(i.tag){case 5:return Rl(i.type);case 16:return Rl("Lazy");case 13:return Rl("Suspense");case 19:return Rl("SuspenseList");case 0:case 2:case 15:return i=wf(i.type,!1),i;case 11:return i=wf(i.type.render,!1),i;case 1:return i=wf(i.type,!0),i;default:return""}}function Ip(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case co:return"Fragment";case lo:return"Portal";case _p:return"Profiler";case ag:return"StrictMode";case Rp:return"Suspense";case Pp:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case kE:return(i.displayName||"Context")+".Consumer";case NE:return(i._context.displayName||"Context")+".Provider";case og:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case lg:return e=i.displayName||null,e!==null?e:Ip(i.type)||"Memo";case bs:e=i._payload,i=i._init;try{return Ip(i(e))}catch(t){}}return null}function AN(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ip(e);case 8:return e===ag?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ms(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function RE(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NN(i){var e=RE(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Zc(i){i._valueTracker||(i._valueTracker=NN(i))}function PE(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=RE(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function sd(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch(e){return i.body}}function $p(i,e){var t=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:i._wrapperState.initialChecked})}function fb(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Ms(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IE(i,e){e=e.checked,e!=null&&sg(i,"checked",e,!1)}function Op(i,e){IE(i,e);var t=Ms(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?Dp(i,e.type,t):e.hasOwnProperty("defaultValue")&&Dp(i,e.type,Ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function pb(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function Dp(i,e,t){(e!=="number"||sd(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var Pl=Array.isArray;function Eo(i,e,t,n){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&n&&(i[t].defaultSelected=!0)}else{for(t=""+Ms(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,n&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function Mp(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Me(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function mb(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Me(92));if(Pl(t)){if(1<t.length)throw Error(Me(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:Ms(t)}}function $E(i,e){var t=Ms(e.value),n=Ms(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function gb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function OE(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lp(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?OE(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var eu,DE=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(eu=eu||document.createElement("div"),eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eu.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function Zl(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var Bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kN=["Webkit","ms","Moz","O"];Object.keys(Bl).forEach(function(i){kN.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),Bl[e]=Bl[i]})});function ME(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Bl.hasOwnProperty(i)&&Bl[i]?(""+e).trim():e+"px"}function LE(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=ME(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,r):i[t]=r}}var _N=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bp(i,e){if(e){if(_N[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Me(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Me(62))}}function qp(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fp=null;function cg(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var jp=null,xo=null,To=null;function yb(i){if(i=Nc(i)){if(typeof jp!="function")throw Error(Me(280));var e=i.stateNode;e&&(e=sh(e),jp(i.stateNode,i.type,e))}}function BE(i){xo?To?To.push(i):To=[i]:xo=i}function qE(){if(xo){var i=xo,e=To;if(To=xo=null,yb(i),e)for(i=0;i<e.length;i++)yb(e[i])}}function FE(i,e){return i(e)}function jE(){}var Ef=!1;function UE(i,e,t){if(Ef)return i(e,t);Ef=!0;try{return FE(i,e,t)}finally{Ef=!1,(xo!==null||To!==null)&&(jE(),qE())}}function ec(i,e){var t=i.stateNode;if(t===null)return null;var n=sh(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Me(231,e,typeof t));return t}var Up=!1;if(Zr)try{var gl={};Object.defineProperty(gl,"passive",{get:function(){Up=!0}}),window.addEventListener("test",gl,gl),window.removeEventListener("test",gl,gl)}catch(i){Up=!1}function RN(i,e,t,n,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var ql=!1,ad=null,od=!1,zp=null,PN={onError:function(i){ql=!0,ad=i}};function IN(i,e,t,n,r,s,a,o,l){ql=!1,ad=null,RN.apply(PN,arguments)}function $N(i,e,t,n,r,s,a,o,l){if(IN.apply(this,arguments),ql){if(ql){var c=ad;ql=!1,ad=null}else throw Error(Me(198));od||(od=!0,zp=c)}}function Ia(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function zE(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function bb(i){if(Ia(i)!==i)throw Error(Me(188))}function ON(i){var e=i.alternate;if(!e){if(e=Ia(i),e===null)throw Error(Me(188));return e!==i?null:i}for(var t=i,n=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return bb(r),i;if(s===n)return bb(r),e;s=s.sibling}throw Error(Me(188))}if(t.return!==n.return)t=r,n=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,n=s;break}if(o===n){a=!0,n=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=r;break}if(o===n){a=!0,n=s,t=r;break}o=o.sibling}if(!a)throw Error(Me(189))}}if(t.alternate!==n)throw Error(Me(190))}if(t.tag!==3)throw Error(Me(188));return t.stateNode.current===t?i:e}function VE(i){return i=ON(i),i!==null?WE(i):null}function WE(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=WE(i);if(e!==null)return e;i=i.sibling}return null}var HE=Ei.unstable_scheduleCallback,vb=Ei.unstable_cancelCallback,DN=Ei.unstable_shouldYield,MN=Ei.unstable_requestPaint,ln=Ei.unstable_now,LN=Ei.unstable_getCurrentPriorityLevel,ug=Ei.unstable_ImmediatePriority,QE=Ei.unstable_UserBlockingPriority,ld=Ei.unstable_NormalPriority,BN=Ei.unstable_LowPriority,GE=Ei.unstable_IdlePriority,th=null,Ar=null;function qN(i){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(th,i,void 0,(i.current.flags&128)===128)}catch(e){}}var sr=Math.clz32?Math.clz32:UN,FN=Math.log,jN=Math.LN2;function UN(i){return i>>>=0,i===0?32:31-(FN(i)/jN|0)|0}var tu=64,nu=4194304;function Il(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function cd(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,r=i.suspendedLanes,s=i.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?n=Il(o):(s&=a,s!==0&&(n=Il(s)))}else a=t&~r,a!==0?n=Il(a):s!==0&&(n=Il(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-sr(e),r=1<<t,n|=i[t],e&=~r;return n}function zN(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VN(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,r=i.expirationTimes,s=i.pendingLanes;0<s;){var a=31-sr(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&n)&&(r[a]=zN(o,e)):l<=e&&(i.expiredLanes|=o),s&=~o}}function Vp(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function KE(){var i=tu;return tu<<=1,!(tu&4194240)&&(tu=64),i}function xf(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function Cc(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-sr(e),i[e]=t}function WN(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-sr(t),s=1<<r;e[r]=0,n[r]=-1,i[r]=-1,t&=~s}}function dg(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-sr(t),r=1<<n;r&e|i[n]&e&&(i[n]|=e),t&=~r}}var It=0;function YE(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var JE,hg,XE,ZE,ex,Wp=!1,iu=[],ks=null,_s=null,Rs=null,tc=new Map,nc=new Map,Es=[],HN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wb(i,e){switch(i){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":tc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(e.pointerId)}}function yl(i,e,t,n,r,s){return i===null||i.nativeEvent!==s?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Nc(e),e!==null&&hg(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function QN(i,e,t,n,r){switch(e){case"focusin":return ks=yl(ks,i,e,t,n,r),!0;case"dragenter":return _s=yl(_s,i,e,t,n,r),!0;case"mouseover":return Rs=yl(Rs,i,e,t,n,r),!0;case"pointerover":var s=r.pointerId;return tc.set(s,yl(tc.get(s)||null,i,e,t,n,r)),!0;case"gotpointercapture":return s=r.pointerId,nc.set(s,yl(nc.get(s)||null,i,e,t,n,r)),!0}return!1}function tx(i){var e=aa(i.target);if(e!==null){var t=Ia(e);if(t!==null){if(e=t.tag,e===13){if(e=zE(t),e!==null){i.blockedOn=e,ex(i.priority,function(){XE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Bu(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=Hp(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);Fp=n,t.target.dispatchEvent(n),Fp=null}else return e=Nc(t),e!==null&&hg(e),i.blockedOn=t,!1;e.shift()}return!0}function Eb(i,e,t){Bu(i)&&t.delete(e)}function GN(){Wp=!1,ks!==null&&Bu(ks)&&(ks=null),_s!==null&&Bu(_s)&&(_s=null),Rs!==null&&Bu(Rs)&&(Rs=null),tc.forEach(Eb),nc.forEach(Eb)}function bl(i,e){i.blockedOn===e&&(i.blockedOn=null,Wp||(Wp=!0,Ei.unstable_scheduleCallback(Ei.unstable_NormalPriority,GN)))}function ic(i){function e(r){return bl(r,i)}if(0<iu.length){bl(iu[0],i);for(var t=1;t<iu.length;t++){var n=iu[t];n.blockedOn===i&&(n.blockedOn=null)}}for(ks!==null&&bl(ks,i),_s!==null&&bl(_s,i),Rs!==null&&bl(Rs,i),tc.forEach(e),nc.forEach(e),t=0;t<Es.length;t++)n=Es[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Es.length&&(t=Es[0],t.blockedOn===null);)tx(t),t.blockedOn===null&&Es.shift()}var So=ss.ReactCurrentBatchConfig,ud=!0;function KN(i,e,t,n){var r=It,s=So.transition;So.transition=null;try{It=1,fg(i,e,t,n)}finally{It=r,So.transition=s}}function YN(i,e,t,n){var r=It,s=So.transition;So.transition=null;try{It=4,fg(i,e,t,n)}finally{It=r,So.transition=s}}function fg(i,e,t,n){if(ud){var r=Hp(i,e,t,n);if(r===null)If(i,e,n,dd,t),wb(i,n);else if(QN(r,i,e,t,n))n.stopPropagation();else if(wb(i,n),e&4&&-1<HN.indexOf(i)){for(;r!==null;){var s=Nc(r);if(s!==null&&JE(s),s=Hp(i,e,t,n),s===null&&If(i,e,n,dd,t),s===r)break;r=s}r!==null&&n.stopPropagation()}else If(i,e,n,null,t)}}var dd=null;function Hp(i,e,t,n){if(dd=null,i=cg(n),i=aa(i),i!==null)if(e=Ia(i),e===null)i=null;else if(t=e.tag,t===13){if(i=zE(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return dd=i,null}function nx(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LN()){case ug:return 1;case QE:return 4;case ld:case BN:return 16;case GE:return 536870912;default:return 16}default:return 16}}var Ss=null,pg=null,qu=null;function ix(){if(qu)return qu;var i,e=pg,t=e.length,n,r="value"in Ss?Ss.value:Ss.textContent,s=r.length;for(i=0;i<t&&e[i]===r[i];i++);var a=t-i;for(n=1;n<=a&&e[t-n]===r[s-n];n++);return qu=r.slice(i,1<n?1-n:void 0)}function Fu(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function ru(){return!0}function xb(){return!1}function Ti(i){function e(t,n,r,s,a){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in i)i.hasOwnProperty(o)&&(t=i[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ru:xb,this.isPropagationStopped=xb,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),e}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mg=Ti(Go),Ac=Xt({},Go,{view:0,detail:0}),JN=Ti(Ac),Tf,Sf,vl,nh=Xt({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vl&&(vl&&i.type==="mousemove"?(Tf=i.screenX-vl.screenX,Sf=i.screenY-vl.screenY):Sf=Tf=0,vl=i),Tf)},movementY:function(i){return"movementY"in i?i.movementY:Sf}}),Tb=Ti(nh),XN=Xt({},nh,{dataTransfer:0}),ZN=Ti(XN),ek=Xt({},Ac,{relatedTarget:0}),Cf=Ti(ek),tk=Xt({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),nk=Ti(tk),ik=Xt({},Go,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rk=Ti(ik),sk=Xt({},Go,{data:0}),Sb=Ti(sk),ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ok={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ck(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=lk[i])?!!e[i]:!1}function gg(){return ck}var uk=Xt({},Ac,{key:function(i){if(i.key){var e=ak[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=Fu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ok[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gg,charCode:function(i){return i.type==="keypress"?Fu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),dk=Ti(uk),hk=Xt({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cb=Ti(hk),fk=Xt({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gg}),pk=Ti(fk),mk=Xt({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),gk=Ti(mk),yk=Xt({},nh,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),bk=Ti(yk),vk=[9,13,27,32],yg=Zr&&"CompositionEvent"in window,Fl=null;Zr&&"documentMode"in document&&(Fl=document.documentMode);var wk=Zr&&"TextEvent"in window&&!Fl,rx=Zr&&(!yg||Fl&&8<Fl&&11>=Fl),Ab=String.fromCharCode(32),Nb=!1;function sx(i,e){switch(i){case"keyup":return vk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ax(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var uo=!1;function Ek(i,e){switch(i){case"compositionend":return ax(e);case"keypress":return e.which!==32?null:(Nb=!0,Ab);case"textInput":return i=e.data,i===Ab&&Nb?null:i;default:return null}}function xk(i,e){if(uo)return i==="compositionend"||!yg&&sx(i,e)?(i=ix(),qu=pg=Ss=null,uo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rx&&e.locale!=="ko"?null:e.data;default:return null}}var Tk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kb(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!Tk[i.type]:e==="textarea"}function ox(i,e,t,n){BE(n),e=hd(e,"onChange"),0<e.length&&(t=new mg("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var jl=null,rc=null;function Sk(i){bx(i,0)}function ih(i){var e=po(i);if(PE(e))return i}function Ck(i,e){if(i==="change")return e}var lx=!1;if(Zr){var Af;if(Zr){var Nf="oninput"in document;if(!Nf){var _b=document.createElement("div");_b.setAttribute("oninput","return;"),Nf=typeof _b.oninput=="function"}Af=Nf}else Af=!1;lx=Af&&(!document.documentMode||9<document.documentMode)}function Rb(){jl&&(jl.detachEvent("onpropertychange",cx),rc=jl=null)}function cx(i){if(i.propertyName==="value"&&ih(rc)){var e=[];ox(e,rc,i,cg(i)),UE(Sk,e)}}function Ak(i,e,t){i==="focusin"?(Rb(),jl=e,rc=t,jl.attachEvent("onpropertychange",cx)):i==="focusout"&&Rb()}function Nk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ih(rc)}function kk(i,e){if(i==="click")return ih(e)}function _k(i,e){if(i==="input"||i==="change")return ih(e)}function Rk(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var hr=typeof Object.is=="function"?Object.is:Rk;function sc(i,e){if(hr(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!kp.call(e,r)||!hr(i[r],e[r]))return!1}return!0}function Pb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ib(i,e){var t=Pb(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Pb(t)}}function ux(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?ux(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function dx(){for(var i=window,e=sd();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch(n){t=!1}if(t)i=e.contentWindow;else break;e=sd(i.document)}return e}function bg(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Pk(i){var e=dx(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&ux(t.ownerDocument.documentElement,t)){if(n!==null&&bg(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!i.extend&&s>n&&(r=n,n=s,s=r),r=Ib(t,s);var a=Ib(t,n);r&&a&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==a.node||i.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),s>n?(i.addRange(e),i.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Ik=Zr&&"documentMode"in document&&11>=document.documentMode,ho=null,Qp=null,Ul=null,Gp=!1;function $b(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Gp||ho==null||ho!==sd(n)||(n=ho,"selectionStart"in n&&bg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ul&&sc(Ul,n)||(Ul=n,n=hd(Qp,"onSelect"),0<n.length&&(e=new mg("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=ho)))}function su(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var fo={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},kf={},hx={};Zr&&(hx=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function rh(i){if(kf[i])return kf[i];if(!fo[i])return i;var e=fo[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in hx)return kf[i]=e[t];return i}var fx=rh("animationend"),px=rh("animationiteration"),mx=rh("animationstart"),gx=rh("transitionend"),yx=new Map,Ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(i,e){yx.set(i,e),Pa(e,[i])}for(var _f=0;_f<Ob.length;_f++){var Rf=Ob[_f],$k=Rf.toLowerCase(),Ok=Rf[0].toUpperCase()+Rf.slice(1);Fs($k,"on"+Ok)}Fs(fx,"onAnimationEnd");Fs(px,"onAnimationIteration");Fs(mx,"onAnimationStart");Fs("dblclick","onDoubleClick");Fs("focusin","onFocus");Fs("focusout","onBlur");Fs(gx,"onTransitionEnd");Do("onMouseEnter",["mouseout","mouseover"]);Do("onMouseLeave",["mouseout","mouseover"]);Do("onPointerEnter",["pointerout","pointerover"]);Do("onPointerLeave",["pointerout","pointerover"]);Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dk=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function Db(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,$N(n,e,void 0,i),i.currentTarget=null}function bx(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Db(r,o,c),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Db(r,o,c),s=l}}}if(od)throw i=zp,od=!1,zp=null,i}function qt(i,e){var t=e[Zp];t===void 0&&(t=e[Zp]=new Set);var n=i+"__bubble";t.has(n)||(vx(e,i,2,!1),t.add(n))}function Pf(i,e,t){var n=0;e&&(n|=4),vx(t,i,n,e)}var au="_reactListening"+Math.random().toString(36).slice(2);function ac(i){if(!i[au]){i[au]=!0,AE.forEach(function(t){t!=="selectionchange"&&(Dk.has(t)||Pf(t,!1,i),Pf(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[au]||(e[au]=!0,Pf("selectionchange",!1,e))}}function vx(i,e,t,n){switch(nx(e)){case 1:var r=KN;break;case 4:r=YN;break;default:r=fg}t=r.bind(null,e,t,i),r=void 0,!Up||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function If(i,e,t,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=aa(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}UE(function(){var c=s,u=cg(t),d=[];e:{var h=yx.get(i);if(h!==void 0){var f=mg,m=i;switch(i){case"keypress":if(Fu(t)===0)break e;case"keydown":case"keyup":f=dk;break;case"focusin":m="focus",f=Cf;break;case"focusout":m="blur",f=Cf;break;case"beforeblur":case"afterblur":f=Cf;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Tb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ZN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=pk;break;case fx:case px:case mx:f=nk;break;case gx:f=gk;break;case"scroll":f=JN;break;case"wheel":f=bk;break;case"copy":case"cut":case"paste":f=rk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Cb}var p=(e&4)!==0,w=!p&&i==="scroll",y=p?h!==null?h+"Capture":null:h;p=[];for(var b=c,E;b!==null;){E=b;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,y!==null&&(_=ec(b,y),_!=null&&p.push(oc(b,_,E)))),w)break;b=b.return}0<p.length&&(h=new f(h,m,null,t,u),d.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=i==="mouseover"||i==="pointerover",f=i==="mouseout"||i==="pointerout",h&&t!==Fp&&(m=t.relatedTarget||t.fromElement)&&(aa(m)||m[es]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=c,m=m?aa(m):null,m!==null&&(w=Ia(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(p=Tb,_="onMouseLeave",y="onMouseEnter",b="mouse",(i==="pointerout"||i==="pointerover")&&(p=Cb,_="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:po(f),E=m==null?h:po(m),h=new p(_,b+"leave",f,t,u),h.target=w,h.relatedTarget=E,_=null,aa(u)===c&&(p=new p(y,b+"enter",m,t,u),p.target=E,p.relatedTarget=w,_=p),w=_,f&&m)t:{for(p=f,y=m,b=0,E=p;E;E=Ga(E))b++;for(E=0,_=y;_;_=Ga(_))E++;for(;0<b-E;)p=Ga(p),b--;for(;0<E-b;)y=Ga(y),E--;for(;b--;){if(p===y||y!==null&&p===y.alternate)break t;p=Ga(p),y=Ga(y)}p=null}else p=null;f!==null&&Mb(d,h,f,p,!1),m!==null&&w!==null&&Mb(d,w,m,p,!0)}}e:{if(h=c?po(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=Ck;else if(kb(h))if(lx)k=_k;else{k=Nk;var B=Ak}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=kk);if(k&&(k=k(i,c))){ox(d,k,t,u);break e}B&&B(i,h,c),i==="focusout"&&(B=h._wrapperState)&&B.controlled&&h.type==="number"&&Dp(h,"number",h.value)}switch(B=c?po(c):window,i){case"focusin":(kb(B)||B.contentEditable==="true")&&(ho=B,Qp=c,Ul=null);break;case"focusout":Ul=Qp=ho=null;break;case"mousedown":Gp=!0;break;case"contextmenu":case"mouseup":case"dragend":Gp=!1,$b(d,t,u);break;case"selectionchange":if(Ik)break;case"keydown":case"keyup":$b(d,t,u)}var D;if(yg)e:{switch(i){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else uo?sx(i,t)&&(O="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(O="onCompositionStart");O&&(rx&&t.locale!=="ko"&&(uo||O!=="onCompositionStart"?O==="onCompositionEnd"&&uo&&(D=ix()):(Ss=u,pg="value"in Ss?Ss.value:Ss.textContent,uo=!0)),B=hd(c,O),0<B.length&&(O=new Sb(O,i,null,t,u),d.push({event:O,listeners:B}),D?O.data=D:(D=ax(t),D!==null&&(O.data=D)))),(D=wk?Ek(i,t):xk(i,t))&&(c=hd(c,"onBeforeInput"),0<c.length&&(u=new Sb("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=D))}bx(d,e)})}function oc(i,e,t){return{instance:i,listener:e,currentTarget:t}}function hd(i,e){for(var t=e+"Capture",n=[];i!==null;){var r=i,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ec(i,t),s!=null&&n.unshift(oc(i,s,r)),s=ec(i,e),s!=null&&n.push(oc(i,s,r))),i=i.return}return n}function Ga(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Mb(i,e,t,n,r){for(var s=e._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,r?(l=ec(t,s),l!=null&&a.unshift(oc(t,l,o))):r||(l=ec(t,s),l!=null&&a.push(oc(t,l,o)))),t=t.return}a.length!==0&&i.push({event:e,listeners:a})}var Mk=/\r\n?/g,Lk=/\u0000|\uFFFD/g;function Lb(i){return(typeof i=="string"?i:""+i).replace(Mk,"\n").replace(Lk,"")}function ou(i,e,t){if(e=Lb(e),Lb(i)!==e&&t)throw Error(Me(425))}function fd(){}var Kp=null,Yp=null;function Jp(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xp=typeof setTimeout=="function"?setTimeout:void 0,Bk=typeof clearTimeout=="function"?clearTimeout:void 0,Bb=typeof Promise=="function"?Promise:void 0,qk=typeof queueMicrotask=="function"?queueMicrotask:typeof Bb<"u"?function(i){return Bb.resolve(null).then(i).catch(Fk)}:Xp;function Fk(i){setTimeout(function(){throw i})}function $f(i,e){var t=e,n=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){i.removeChild(r),ic(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);ic(e)}function Ps(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function qb(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),wr="__reactFiber$"+Ko,lc="__reactProps$"+Ko,es="__reactContainer$"+Ko,Zp="__reactEvents$"+Ko,jk="__reactListeners$"+Ko,Uk="__reactHandles$"+Ko;function aa(i){var e=i[wr];if(e)return e;for(var t=i.parentNode;t;){if(e=t[es]||t[wr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=qb(i);i!==null;){if(t=i[wr])return t;i=qb(i)}return e}i=t,t=i.parentNode}return null}function Nc(i){return i=i[wr]||i[es],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function po(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Me(33))}function sh(i){return i[lc]||null}var em=[],mo=-1;function js(i){return{current:i}}function Ut(i){0>mo||(i.current=em[mo],em[mo]=null,mo--)}function Bt(i,e){mo++,em[mo]=i.current,i.current=e}var Ls={},zn=js(Ls),ai=js(!1),ba=Ls;function Mo(i,e){var t=i.type.contextTypes;if(!t)return Ls;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function oi(i){return i=i.childContextTypes,i!=null}function pd(){Ut(ai),Ut(zn)}function Fb(i,e,t){if(zn.current!==Ls)throw Error(Me(168));Bt(zn,e),Bt(ai,t)}function wx(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(Me(108,AN(i)||"Unknown",r));return Xt({},t,n)}function md(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ls,ba=zn.current,Bt(zn,i),Bt(ai,ai.current),!0}function jb(i,e,t){var n=i.stateNode;if(!n)throw Error(Me(169));t?(i=wx(i,e,ba),n.__reactInternalMemoizedMergedChildContext=i,Ut(ai),Ut(zn),Bt(zn,i)):Ut(ai),Bt(ai,t)}var jr=null,ah=!1,Of=!1;function Ex(i){jr===null?jr=[i]:jr.push(i)}function zk(i){ah=!0,Ex(i)}function Us(){if(!Of&&jr!==null){Of=!0;var i=0,e=It;try{var t=jr;for(It=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}jr=null,ah=!1}catch(r){throw jr!==null&&(jr=jr.slice(i+1)),HE(ug,Us),r}finally{It=e,Of=!1}}return null}var go=[],yo=0,gd=null,yd=0,$i=[],Oi=0,va=null,Vr=1,Wr="";function ia(i,e){go[yo++]=yd,go[yo++]=gd,gd=i,yd=e}function xx(i,e,t){$i[Oi++]=Vr,$i[Oi++]=Wr,$i[Oi++]=va,va=i;var n=Vr;i=Wr;var r=32-sr(n)-1;n&=~(1<<r),t+=1;var s=32-sr(e)+r;if(30<s){var a=r-r%5;s=(n&(1<<a)-1).toString(32),n>>=a,r-=a,Vr=1<<32-sr(e)+r|t<<r|n,Wr=s+i}else Vr=1<<s|t<<r|n,Wr=i}function vg(i){i.return!==null&&(ia(i,1),xx(i,1,0))}function wg(i){for(;i===gd;)gd=go[--yo],go[yo]=null,yd=go[--yo],go[yo]=null;for(;i===va;)va=$i[--Oi],$i[Oi]=null,Wr=$i[--Oi],$i[Oi]=null,Vr=$i[--Oi],$i[Oi]=null}var vi=null,bi=null,Qt=!1,Xi=null;function Tx(i,e){var t=Li(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function Ub(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,vi=i,bi=Ps(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,vi=i,bi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=va!==null?{id:Vr,overflow:Wr}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Li(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,vi=i,bi=null,!0):!1;default:return!1}}function tm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function nm(i){if(Qt){var e=bi;if(e){var t=e;if(!Ub(i,e)){if(tm(i))throw Error(Me(418));e=Ps(t.nextSibling);var n=vi;e&&Ub(i,e)?Tx(n,t):(i.flags=i.flags&-4097|2,Qt=!1,vi=i)}}else{if(tm(i))throw Error(Me(418));i.flags=i.flags&-4097|2,Qt=!1,vi=i}}}function zb(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;vi=i}function lu(i){if(i!==vi)return!1;if(!Qt)return zb(i),Qt=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Jp(i.type,i.memoizedProps)),e&&(e=bi)){if(tm(i))throw Sx(),Error(Me(418));for(;e;)Tx(i,e),e=Ps(e.nextSibling)}if(zb(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Me(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){bi=Ps(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}bi=null}}else bi=vi?Ps(i.stateNode.nextSibling):null;return!0}function Sx(){for(var i=bi;i;)i=Ps(i.nextSibling)}function Lo(){bi=vi=null,Qt=!1}function Eg(i){Xi===null?Xi=[i]:Xi.push(i)}var Vk=ss.ReactCurrentBatchConfig;function Gi(i,e){if(i&&i.defaultProps){e=Xt({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}var bd=js(null),vd=null,bo=null,xg=null;function Tg(){xg=bo=vd=null}function Sg(i){var e=bd.current;Ut(bd),i._currentValue=e}function im(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function Co(i,e){vd=i,xg=bo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(ri=!0),i.firstContext=null)}function ji(i){var e=i._currentValue;if(xg!==i)if(i={context:i,memoizedValue:e,next:null},bo===null){if(vd===null)throw Error(Me(308));bo=i,vd.dependencies={lanes:0,firstContext:i}}else bo=bo.next=i;return e}var oa=null;function Cg(i){oa===null?oa=[i]:oa.push(i)}function Cx(i,e,t,n){var r=e.interleaved;return r===null?(t.next=t,Cg(e)):(t.next=r.next,r.next=t),e.interleaved=t,ts(i,n)}function ts(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var vs=!1;function Ag(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ax(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Yr(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Is(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,xt&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,ts(i,t)}return r=n.interleaved,r===null?(e.next=e,Cg(n)):(e.next=r.next,r.next=e),n.interleaved=e,ts(i,t)}function ju(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,dg(i,t)}}function Vb(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function wd(i,e,t,n){var r=i.updateQueue;vs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=i.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,u=c=l=null,o=s;do{var h=o.lane,f=o.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=i,p=o;switch(h=e,f=t,p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=Xt({},d,h);break e;case 2:vs=!0}}o.callback!==null&&o.lane!==0&&(i.flags|=64,h=r.effects,h===null?r.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,a|=h;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;h=o,o=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ea|=a,i.lanes=a,i.memoizedState=d}}function Wb(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(Me(191,r));r.call(n)}}}var Nx=new CE.Component().refs;function rm(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:Xt({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var oh={isMounted:function(i){return(i=i._reactInternals)?Ia(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=Qn(),r=Os(i),s=Yr(n,r);s.payload=e,t!=null&&(s.callback=t),e=Is(i,s,r),e!==null&&(ar(e,i,r,n),ju(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=Qn(),r=Os(i),s=Yr(n,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Is(i,s,r),e!==null&&(ar(e,i,r,n),ju(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=Qn(),n=Os(i),r=Yr(t,n);r.tag=2,e!=null&&(r.callback=e),e=Is(i,r,n),e!==null&&(ar(e,i,n,t),ju(e,i,n))}};function Hb(i,e,t,n,r,s,a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!sc(t,n)||!sc(r,s):!0}function kx(i,e,t){var n=!1,r=Ls,s=e.contextType;return typeof s=="object"&&s!==null?s=ji(s):(r=oi(e)?ba:zn.current,n=e.contextTypes,s=(n=n!=null)?Mo(i,r):Ls),e=new e(t,s),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oh,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=s),e}function Qb(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&oh.enqueueReplaceState(e,e.state,null)}function sm(i,e,t,n){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs=Nx,Ag(i);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ji(s):(s=oi(e)?ba:zn.current,r.context=Mo(i,s)),r.state=i.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rm(i,e,s,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&oh.enqueueReplaceState(r,r.state,null),wd(i,t,r,n),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function wl(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Me(309));var n=t.stateNode}if(!n)throw Error(Me(147,i));var r=n,s=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;o===Nx&&(o=r.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof i!="string")throw Error(Me(284));if(!t._owner)throw Error(Me(290,i))}return i}function cu(i,e){throw i=Object.prototype.toString.call(e),Error(Me(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function Gb(i){var e=i._init;return e(i._payload)}function _x(i){function e(y,b){if(i){var E=y.deletions;E===null?(y.deletions=[b],y.flags|=16):E.push(b)}}function t(y,b){if(!i)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function r(y,b){return y=Ds(y,b),y.index=0,y.sibling=null,y}function s(y,b,E){return y.index=E,i?(E=y.alternate,E!==null?(E=E.index,E<b?(y.flags|=2,b):E):(y.flags|=2,b)):(y.flags|=1048576,b)}function a(y){return i&&y.alternate===null&&(y.flags|=2),y}function o(y,b,E,_){return b===null||b.tag!==6?(b=jf(E,y.mode,_),b.return=y,b):(b=r(b,E),b.return=y,b)}function l(y,b,E,_){var k=E.type;return k===co?u(y,b,E.props.children,_,E.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===bs&&Gb(k)===b.type)?(_=r(b,E.props),_.ref=wl(y,b,E),_.return=y,_):(_=Qu(E.type,E.key,E.props,null,y.mode,_),_.ref=wl(y,b,E),_.return=y,_)}function c(y,b,E,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=Uf(E,y.mode,_),b.return=y,b):(b=r(b,E.children||[]),b.return=y,b)}function u(y,b,E,_,k){return b===null||b.tag!==7?(b=ga(E,y.mode,_,k),b.return=y,b):(b=r(b,E),b.return=y,b)}function d(y,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=jf(""+b,y.mode,E),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xc:return E=Qu(b.type,b.key,b.props,null,y.mode,E),E.ref=wl(y,null,b),E.return=y,E;case lo:return b=Uf(b,y.mode,E),b.return=y,b;case bs:var _=b._init;return d(y,_(b._payload),E)}if(Pl(b)||ml(b))return b=ga(b,y.mode,E,null),b.return=y,b;cu(y,b)}return null}function h(y,b,E,_){var k=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return k!==null?null:o(y,b,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Xc:return E.key===k?l(y,b,E,_):null;case lo:return E.key===k?c(y,b,E,_):null;case bs:return k=E._init,h(y,b,k(E._payload),_)}if(Pl(E)||ml(E))return k!==null?null:u(y,b,E,_,null);cu(y,E)}return null}function f(y,b,E,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(E)||null,o(b,y,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Xc:return y=y.get(_.key===null?E:_.key)||null,l(b,y,_,k);case lo:return y=y.get(_.key===null?E:_.key)||null,c(b,y,_,k);case bs:var B=_._init;return f(y,b,E,B(_._payload),k)}if(Pl(_)||ml(_))return y=y.get(E)||null,u(b,y,_,k,null);cu(b,_)}return null}function m(y,b,E,_){for(var k=null,B=null,D=b,O=b=0,R=null;D!==null&&O<E.length;O++){D.index>O?(R=D,D=null):R=D.sibling;var Q=h(y,D,E[O],_);if(Q===null){D===null&&(D=R);break}i&&D&&Q.alternate===null&&e(y,D),b=s(Q,b,O),B===null?k=Q:B.sibling=Q,B=Q,D=R}if(O===E.length)return t(y,D),Qt&&ia(y,O),k;if(D===null){for(;O<E.length;O++)D=d(y,E[O],_),D!==null&&(b=s(D,b,O),B===null?k=D:B.sibling=D,B=D);return Qt&&ia(y,O),k}for(D=n(y,D);O<E.length;O++)R=f(D,y,O,E[O],_),R!==null&&(i&&R.alternate!==null&&D.delete(R.key===null?O:R.key),b=s(R,b,O),B===null?k=R:B.sibling=R,B=R);return i&&D.forEach(function($){return e(y,$)}),Qt&&ia(y,O),k}function p(y,b,E,_){var k=ml(E);if(typeof k!="function")throw Error(Me(150));if(E=k.call(E),E==null)throw Error(Me(151));for(var B=k=null,D=b,O=b=0,R=null,Q=E.next();D!==null&&!Q.done;O++,Q=E.next()){D.index>O?(R=D,D=null):R=D.sibling;var $=h(y,D,Q.value,_);if($===null){D===null&&(D=R);break}i&&D&&$.alternate===null&&e(y,D),b=s($,b,O),B===null?k=$:B.sibling=$,B=$,D=R}if(Q.done)return t(y,D),Qt&&ia(y,O),k;if(D===null){for(;!Q.done;O++,Q=E.next())Q=d(y,Q.value,_),Q!==null&&(b=s(Q,b,O),B===null?k=Q:B.sibling=Q,B=Q);return Qt&&ia(y,O),k}for(D=n(y,D);!Q.done;O++,Q=E.next())Q=f(D,y,O,Q.value,_),Q!==null&&(i&&Q.alternate!==null&&D.delete(Q.key===null?O:Q.key),b=s(Q,b,O),B===null?k=Q:B.sibling=Q,B=Q);return i&&D.forEach(function(P){return e(y,P)}),Qt&&ia(y,O),k}function w(y,b,E,_){if(typeof E=="object"&&E!==null&&E.type===co&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Xc:e:{for(var k=E.key,B=b;B!==null;){if(B.key===k){if(k=E.type,k===co){if(B.tag===7){t(y,B.sibling),b=r(B,E.props.children),b.return=y,y=b;break e}}else if(B.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===bs&&Gb(k)===B.type){t(y,B.sibling),b=r(B,E.props),b.ref=wl(y,B,E),b.return=y,y=b;break e}t(y,B);break}else e(y,B);B=B.sibling}E.type===co?(b=ga(E.props.children,y.mode,_,E.key),b.return=y,y=b):(_=Qu(E.type,E.key,E.props,null,y.mode,_),_.ref=wl(y,b,E),_.return=y,y=_)}return a(y);case lo:e:{for(B=E.key;b!==null;){if(b.key===B)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){t(y,b.sibling),b=r(b,E.children||[]),b.return=y,y=b;break e}else{t(y,b);break}else e(y,b);b=b.sibling}b=Uf(E,y.mode,_),b.return=y,y=b}return a(y);case bs:return B=E._init,w(y,b,B(E._payload),_)}if(Pl(E))return m(y,b,E,_);if(ml(E))return p(y,b,E,_);cu(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(t(y,b.sibling),b=r(b,E),b.return=y,y=b):(t(y,b),b=jf(E,y.mode,_),b.return=y,y=b),a(y)):t(y,b)}return w}var Bo=_x(!0),Rx=_x(!1),kc={},Nr=js(kc),cc=js(kc),uc=js(kc);function la(i){if(i===kc)throw Error(Me(174));return i}function Ng(i,e){switch(Bt(uc,e),Bt(cc,i),Bt(Nr,kc),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lp(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=Lp(e,i)}Ut(Nr),Bt(Nr,e)}function qo(){Ut(Nr),Ut(cc),Ut(uc)}function Px(i){la(uc.current);var e=la(Nr.current),t=Lp(e,i.type);e!==t&&(Bt(cc,i),Bt(Nr,t))}function kg(i){cc.current===i&&(Ut(Nr),Ut(cc))}var Yt=js(0);function Ed(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Df=[];function _g(){for(var i=0;i<Df.length;i++)Df[i]._workInProgressVersionPrimary=null;Df.length=0}var Uu=ss.ReactCurrentDispatcher,Mf=ss.ReactCurrentBatchConfig,wa=0,Jt=null,mn=null,wn=null,xd=!1,zl=!1,dc=0,Wk=0;function Mn(){throw Error(Me(321))}function Rg(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!hr(i[t],e[t]))return!1;return!0}function Pg(i,e,t,n,r,s){if(wa=s,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uu.current=i===null||i.memoizedState===null?Kk:Yk,i=t(n,r),zl){s=0;do{if(zl=!1,dc=0,25<=s)throw Error(Me(301));s+=1,wn=mn=null,e.updateQueue=null,Uu.current=Jk,i=t(n,r)}while(zl)}if(Uu.current=Td,e=mn!==null&&mn.next!==null,wa=0,wn=mn=Jt=null,xd=!1,e)throw Error(Me(300));return i}function Ig(){var i=dc!==0;return dc=0,i}function br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Jt.memoizedState=wn=i:wn=wn.next=i,wn}function Ui(){if(mn===null){var i=Jt.alternate;i=i!==null?i.memoizedState:null}else i=mn.next;var e=wn===null?Jt.memoizedState:wn.next;if(e!==null)wn=e,mn=i;else{if(i===null)throw Error(Me(310));mn=i,i={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},wn===null?Jt.memoizedState=wn=i:wn=wn.next=i}return wn}function hc(i,e){return typeof e=="function"?e(i):e}function Lf(i){var e=Ui(),t=e.queue;if(t===null)throw Error(Me(311));t.lastRenderedReducer=i;var n=mn,r=n.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,n=n.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((wa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:i(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,Jt.lanes|=u,Ea|=u}c=c.next}while(c!==null&&c!==s);l===null?a=n:l.next=o,hr(n,e.memoizedState)||(ri=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,t.lastRenderedState=n}if(i=t.interleaved,i!==null){r=i;do s=r.lane,Jt.lanes|=s,Ea|=s,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Bf(i){var e=Ui(),t=e.queue;if(t===null)throw Error(Me(311));t.lastRenderedReducer=i;var n=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=i(s,a.action),a=a.next;while(a!==r);hr(s,e.memoizedState)||(ri=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function Ix(){}function $x(i,e){var t=Jt,n=Ui(),r=e(),s=!hr(n.memoizedState,r);if(s&&(n.memoizedState=r,ri=!0),n=n.queue,$g(Mx.bind(null,t,n,i),[i]),n.getSnapshot!==e||s||wn!==null&&wn.memoizedState.tag&1){if(t.flags|=2048,fc(9,Dx.bind(null,t,n,r,e),void 0,null),En===null)throw Error(Me(349));wa&30||Ox(t,e,r)}return r}function Ox(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function Dx(i,e,t,n){e.value=t,e.getSnapshot=n,Lx(e)&&Bx(i)}function Mx(i,e,t){return t(function(){Lx(e)&&Bx(i)})}function Lx(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!hr(i,t)}catch(n){return!0}}function Bx(i){var e=ts(i,1);e!==null&&ar(e,i,1,-1)}function Kb(i){var e=br();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:i},e.queue=i,i=i.dispatch=Gk.bind(null,Jt,i),[e.memoizedState,i]}function fc(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function qx(){return Ui().memoizedState}function zu(i,e,t,n){var r=br();Jt.flags|=i,r.memoizedState=fc(1|e,t,void 0,n===void 0?null:n)}function lh(i,e,t,n){var r=Ui();n=n===void 0?null:n;var s=void 0;if(mn!==null){var a=mn.memoizedState;if(s=a.destroy,n!==null&&Rg(n,a.deps)){r.memoizedState=fc(e,t,s,n);return}}Jt.flags|=i,r.memoizedState=fc(1|e,t,s,n)}function Yb(i,e){return zu(8390656,8,i,e)}function $g(i,e){return lh(2048,8,i,e)}function Fx(i,e){return lh(4,2,i,e)}function jx(i,e){return lh(4,4,i,e)}function Ux(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function zx(i,e,t){return t=t!=null?t.concat([i]):null,lh(4,4,Ux.bind(null,e,i),t)}function Og(){}function Vx(i,e){var t=Ui();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Rg(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function Wx(i,e){var t=Ui();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Rg(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function Hx(i,e,t){return wa&21?(hr(t,e)||(t=KE(),Jt.lanes|=t,Ea|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,ri=!0),i.memoizedState=t)}function Hk(i,e){var t=It;It=t!==0&&4>t?t:4,i(!0);var n=Mf.transition;Mf.transition={};try{i(!1),e()}finally{It=t,Mf.transition=n}}function Qx(){return Ui().memoizedState}function Qk(i,e,t){var n=Os(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},Gx(i))Kx(e,t);else if(t=Cx(i,e,t,n),t!==null){var r=Qn();ar(t,i,n,r),Yx(t,e,n)}}function Gk(i,e,t){var n=Os(i),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(Gx(i))Kx(e,r);else{var s=i.alternate;if(i.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,hr(o,a)){var l=e.interleaved;l===null?(r.next=r,Cg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch(c){}finally{}t=Cx(i,e,r,n),t!==null&&(r=Qn(),ar(t,i,n,r),Yx(t,e,n))}}function Gx(i){var e=i.alternate;return i===Jt||e!==null&&e===Jt}function Kx(i,e){zl=xd=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function Yx(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,dg(i,t)}}var Td={readContext:ji,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},Kk={readContext:ji,useCallback:function(i,e){return br().memoizedState=[i,e===void 0?null:e],i},useContext:ji,useEffect:Yb,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,zu(4194308,4,Ux.bind(null,e,i),t)},useLayoutEffect:function(i,e){return zu(4194308,4,i,e)},useInsertionEffect:function(i,e){return zu(4,2,i,e)},useMemo:function(i,e){var t=br();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=br();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=Qk.bind(null,Jt,i),[n.memoizedState,i]},useRef:function(i){var e=br();return i={current:i},e.memoizedState=i},useState:Kb,useDebugValue:Og,useDeferredValue:function(i){return br().memoizedState=i},useTransition:function(){var i=Kb(!1),e=i[0];return i=Hk.bind(null,i[1]),br().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=Jt,r=br();if(Qt){if(t===void 0)throw Error(Me(407));t=t()}else{if(t=e(),En===null)throw Error(Me(349));wa&30||Ox(n,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Yb(Mx.bind(null,n,s,i),[i]),n.flags|=2048,fc(9,Dx.bind(null,n,s,t,e),void 0,null),t},useId:function(){var i=br(),e=En.identifierPrefix;if(Qt){var t=Wr,n=Vr;t=(n&~(1<<32-sr(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=dc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Wk++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Yk={readContext:ji,useCallback:Vx,useContext:ji,useEffect:$g,useImperativeHandle:zx,useInsertionEffect:Fx,useLayoutEffect:jx,useMemo:Wx,useReducer:Lf,useRef:qx,useState:function(){return Lf(hc)},useDebugValue:Og,useDeferredValue:function(i){var e=Ui();return Hx(e,mn.memoizedState,i)},useTransition:function(){var i=Lf(hc)[0],e=Ui().memoizedState;return[i,e]},useMutableSource:Ix,useSyncExternalStore:$x,useId:Qx,unstable_isNewReconciler:!1},Jk={readContext:ji,useCallback:Vx,useContext:ji,useEffect:$g,useImperativeHandle:zx,useInsertionEffect:Fx,useLayoutEffect:jx,useMemo:Wx,useReducer:Bf,useRef:qx,useState:function(){return Bf(hc)},useDebugValue:Og,useDeferredValue:function(i){var e=Ui();return mn===null?e.memoizedState=i:Hx(e,mn.memoizedState,i)},useTransition:function(){var i=Bf(hc)[0],e=Ui().memoizedState;return[i,e]},useMutableSource:Ix,useSyncExternalStore:$x,useId:Qx,unstable_isNewReconciler:!1};function Fo(i,e){try{var t="",n=e;do t+=CN(n),n=n.return;while(n);var r=t}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:i,source:e,stack:r,digest:null}}function qf(i,e,t){return{value:i,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function am(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Xk=typeof WeakMap=="function"?WeakMap:Map;function Jx(i,e,t){t=Yr(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){Cd||(Cd=!0,gm=n),am(i,e)},t}function Xx(i,e,t){t=Yr(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){am(i,e)}}var s=i.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){am(i,e),typeof n!="function"&&($s===null?$s=new Set([this]):$s.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function Jb(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new Xk;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),i=h_.bind(null,i,e,t),e.then(i,i))}function Xb(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Zb(i,e,t,n,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Yr(-1,1),e.tag=2,Is(t,e,1))),t.lanes|=1),i)}var Zk=ss.ReactCurrentOwner,ri=!1;function Wn(i,e,t,n){e.child=i===null?Rx(e,null,t,n):Bo(e,i.child,t,n)}function e0(i,e,t,n,r){t=t.render;var s=e.ref;return Co(e,r),n=Pg(i,e,t,n,s,r),t=Ig(),i!==null&&!ri?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,ns(i,e,r)):(Qt&&t&&vg(e),e.flags|=1,Wn(i,e,n,r),e.child)}function t0(i,e,t,n,r){if(i===null){var s=t.type;return typeof s=="function"&&!Ug(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Zx(i,e,s,n,r)):(i=Qu(t.type,null,n,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(s=i.child,!(i.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:sc,t(a,n)&&i.ref===e.ref)return ns(i,e,r)}return e.flags|=1,i=Ds(s,n),i.ref=e.ref,i.return=e,e.child=i}function Zx(i,e,t,n,r){if(i!==null){var s=i.memoizedProps;if(sc(s,n)&&i.ref===e.ref)if(ri=!1,e.pendingProps=n=s,(i.lanes&r)!==0)i.flags&131072&&(ri=!0);else return e.lanes=i.lanes,ns(i,e,r)}return om(i,e,t,n,r)}function e1(i,e,t){var n=e.pendingProps,r=n.children,s=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(wo,pi),pi|=t;else{if(!(t&1073741824))return i=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Bt(wo,pi),pi|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,Bt(wo,pi),pi|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,Bt(wo,pi),pi|=n;return Wn(i,e,r,t),e.child}function t1(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function om(i,e,t,n,r){var s=oi(t)?ba:zn.current;return s=Mo(e,s),Co(e,r),t=Pg(i,e,t,n,s,r),n=Ig(),i!==null&&!ri?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,ns(i,e,r)):(Qt&&n&&vg(e),e.flags|=1,Wn(i,e,t,r),e.child)}function n0(i,e,t,n,r){if(oi(t)){var s=!0;md(e)}else s=!1;if(Co(e,r),e.stateNode===null)Vu(i,e),kx(e,t,n),sm(e,t,n,r),n=!0;else if(i===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=ji(c):(c=oi(t)?ba:zn.current,c=Mo(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&Qb(e,a,n,c),vs=!1;var h=e.memoizedState;a.state=h,wd(e,n,a,r),l=e.memoizedState,o!==n||h!==l||ai.current||vs?(typeof u=="function"&&(rm(e,t,u,n),l=e.memoizedState),(o=vs||Hb(e,t,o,n,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,Ax(i,e),o=e.memoizedProps,c=e.type===e.elementType?o:Gi(e.type,o),a.props=c,d=e.pendingProps,h=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=ji(l):(l=oi(t)?ba:zn.current,l=Mo(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&Qb(e,a,n,l),vs=!1,h=e.memoizedState,a.state=h,wd(e,n,a,r);var m=e.memoizedState;o!==d||h!==m||ai.current||vs?(typeof f=="function"&&(rm(e,t,f,n),m=e.memoizedState),(c=vs||Hb(e,t,c,n,h,m,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&h===i.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&h===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),a.props=n,a.state=m,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&h===i.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&h===i.memoizedState||(e.flags|=1024),n=!1)}return lm(i,e,t,n,s,r)}function lm(i,e,t,n,r,s){t1(i,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&jb(e,t,!1),ns(i,e,s);n=e.stateNode,Zk.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&a?(e.child=Bo(e,i.child,null,s),e.child=Bo(e,null,o,s)):Wn(i,e,o,s),e.memoizedState=n.state,r&&jb(e,t,!0),e.child}function n1(i){var e=i.stateNode;e.pendingContext?Fb(i,e.pendingContext,e.pendingContext!==e.context):e.context&&Fb(i,e.context,!1),Ng(i,e.containerInfo)}function i0(i,e,t,n,r){return Lo(),Eg(r),e.flags|=256,Wn(i,e,t,n),e.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function um(i){return{baseLanes:i,cachePool:null,transitions:null}}function i1(i,e,t){var n=e.pendingProps,r=Yt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=i!==null&&i.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),Bt(Yt,r&1),i===null)return nm(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,i=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=dh(a,n,0,null),i=ga(i,n,t,null),s.return=e,i.return=e,s.sibling=i,e.child=s,e.child.memoizedState=um(t),e.memoizedState=cm,i):Dg(e,a));if(r=i.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return e_(i,e,a,n,o,r,t);if(s){s=n.fallback,a=e.mode,r=i.child,o=r.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ds(r,l),n.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=Ds(o,s):(s=ga(s,a,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=i.child.memoizedState,a=a===null?um(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=i.childLanes&~t,e.memoizedState=cm,n}return s=i.child,i=s.sibling,n=Ds(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function Dg(i,e){return e=dh({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function uu(i,e,t,n){return n!==null&&Eg(n),Bo(e,i.child,null,t),i=Dg(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function e_(i,e,t,n,r,s,a){if(t)return e.flags&256?(e.flags&=-257,n=qf(Error(Me(422))),uu(i,e,a,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=dh({mode:"visible",children:n.children},r,0,null),s=ga(s,r,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Bo(e,i.child,null,a),e.child.memoizedState=um(a),e.memoizedState=cm,s);if(!(e.mode&1))return uu(i,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Me(419)),n=qf(s,n,void 0),uu(i,e,a,n)}if(o=(a&i.childLanes)!==0,ri||o){if(n=En,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ts(i,r),ar(n,i,r,-1))}return jg(),n=qf(Error(Me(421))),uu(i,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=f_.bind(null,i),r._reactRetry=e,null):(i=s.treeContext,bi=Ps(r.nextSibling),vi=e,Qt=!0,Xi=null,i!==null&&($i[Oi++]=Vr,$i[Oi++]=Wr,$i[Oi++]=va,Vr=i.id,Wr=i.overflow,va=e),e=Dg(e,n.children),e.flags|=4096,e)}function r0(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),im(i.return,e,t)}function Ff(i,e,t,n,r){var s=i.memoizedState;s===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=r)}function r1(i,e,t){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(Wn(i,e,n.children,t),n=Yt.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&r0(i,t,e);else if(i.tag===19)r0(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Bt(Yt,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&Ed(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Ff(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&Ed(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}Ff(e,!0,t,null,s);break;case"together":Ff(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vu(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function ns(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),Ea|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Me(153));if(e.child!==null){for(i=e.child,t=Ds(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=Ds(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function t_(i,e,t){switch(e.tag){case 3:n1(e),Lo();break;case 5:Px(e);break;case 1:oi(e.type)&&md(e);break;case 4:Ng(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Bt(bd,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Bt(Yt,Yt.current&1),e.flags|=128,null):t&e.child.childLanes?i1(i,e,t):(Bt(Yt,Yt.current&1),i=ns(i,e,t),i!==null?i.sibling:null);Bt(Yt,Yt.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return r1(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Bt(Yt,Yt.current),n)break;return null;case 22:case 23:return e.lanes=0,e1(i,e,t)}return ns(i,e,t)}var s1,dm,a1,o1;s1=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};dm=function(){};a1=function(i,e,t,n){var r=i.memoizedProps;if(r!==n){i=e.stateNode,la(Nr.current);var s=null;switch(t){case"input":r=$p(i,r),n=$p(i,n),s=[];break;case"select":r=Xt({},r,{value:void 0}),n=Xt({},n,{value:void 0}),s=[];break;case"textarea":r=Mp(i,r),n=Mp(i,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=fd)}Bp(t,n);var a;t=null;for(c in r)if(!n.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var o=r[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(o=r!=null?r[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qt("scroll",i),s||o===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};o1=function(i,e,t,n){t!==n&&(e.flags|=4)};function El(i,e){if(!Qt)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Ln(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function n_(i,e,t){var n=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(e),null;case 1:return oi(e.type)&&pd(),Ln(e),null;case 3:return n=e.stateNode,qo(),Ut(ai),Ut(zn),_g(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(lu(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xi!==null&&(vm(Xi),Xi=null))),dm(i,e),Ln(e),null;case 5:kg(e);var r=la(uc.current);if(t=e.type,i!==null&&e.stateNode!=null)a1(i,e,t,n,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Me(166));return Ln(e),null}if(i=la(Nr.current),lu(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[wr]=e,n[lc]=s,i=(e.mode&1)!==0,t){case"dialog":qt("cancel",n),qt("close",n);break;case"iframe":case"object":case"embed":qt("load",n);break;case"video":case"audio":for(r=0;r<$l.length;r++)qt($l[r],n);break;case"source":qt("error",n);break;case"img":case"image":case"link":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"input":fb(n,s),qt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},qt("invalid",n);break;case"textarea":mb(n,s),qt("invalid",n)}Bp(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&ou(n.textContent,o,i),r=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&ou(n.textContent,o,i),r=["children",""+o]):Xl.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&qt("scroll",n)}switch(t){case"input":Zc(n),pb(n,s,!0);break;case"textarea":Zc(n),gb(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=fd)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=OE(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=a.createElement(t,{is:n.is}):(i=a.createElement(t),t==="select"&&(a=i,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):i=a.createElementNS(i,t),i[wr]=e,i[lc]=n,s1(i,e,!1,!1),e.stateNode=i;e:{switch(a=qp(t,n),t){case"dialog":qt("cancel",i),qt("close",i),r=n;break;case"iframe":case"object":case"embed":qt("load",i),r=n;break;case"video":case"audio":for(r=0;r<$l.length;r++)qt($l[r],i);r=n;break;case"source":qt("error",i),r=n;break;case"img":case"image":case"link":qt("error",i),qt("load",i),r=n;break;case"details":qt("toggle",i),r=n;break;case"input":fb(i,n),r=$p(i,n),qt("invalid",i);break;case"option":r=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},r=Xt({},n,{value:void 0}),qt("invalid",i);break;case"textarea":mb(i,n),r=Mp(i,n),qt("invalid",i);break;default:r=n}Bp(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?LE(i,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DE(i,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Zl(i,l):typeof l=="number"&&Zl(i,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qt("scroll",i):l!=null&&sg(i,s,l,a))}switch(t){case"input":Zc(i),pb(i,n,!1);break;case"textarea":Zc(i),gb(i);break;case"option":n.value!=null&&i.setAttribute("value",""+Ms(n.value));break;case"select":i.multiple=!!n.multiple,s=n.value,s!=null?Eo(i,!!n.multiple,s,!1):n.defaultValue!=null&&Eo(i,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=fd)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ln(e),null;case 6:if(i&&e.stateNode!=null)o1(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Me(166));if(t=la(uc.current),la(Nr.current),lu(e)){if(n=e.stateNode,t=e.memoizedProps,n[wr]=e,(s=n.nodeValue!==t)&&(i=vi,i!==null))switch(i.tag){case 3:ou(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ou(n.nodeValue,t,(i.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[wr]=e,e.stateNode=n}return Ln(e),null;case 13:if(Ut(Yt),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Qt&&bi!==null&&e.mode&1&&!(e.flags&128))Sx(),Lo(),e.flags|=98560,s=!1;else if(s=lu(e),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(Me(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Me(317));s[wr]=e}else Lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ln(e),s=!1}else Xi!==null&&(vm(Xi),Xi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||Yt.current&1?gn===0&&(gn=3):jg())),e.updateQueue!==null&&(e.flags|=4),Ln(e),null);case 4:return qo(),dm(i,e),i===null&&ac(e.stateNode.containerInfo),Ln(e),null;case 10:return Sg(e.type._context),Ln(e),null;case 17:return oi(e.type)&&pd(),Ln(e),null;case 19:if(Ut(Yt),s=e.memoizedState,s===null)return Ln(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)El(s,!1);else{if(gn!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(a=Ed(i),a!==null){for(e.flags|=128,El(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,i=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,i=a.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Bt(Yt,Yt.current&1|2),e.child}i=i.sibling}s.tail!==null&&ln()>jo&&(e.flags|=128,n=!0,El(s,!1),e.lanes=4194304)}else{if(!n)if(i=Ed(a),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),El(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Qt)return Ln(e),null}else 2*ln()-s.renderingStartTime>jo&&t!==1073741824&&(e.flags|=128,n=!0,El(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ln(),e.sibling=null,t=Yt.current,Bt(Yt,n?t&1|2:t&1),e):(Ln(e),null);case 22:case 23:return Fg(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?pi&1073741824&&(Ln(e),e.subtreeFlags&6&&(e.flags|=8192)):Ln(e),null;case 24:return null;case 25:return null}throw Error(Me(156,e.tag))}function i_(i,e){switch(wg(e),e.tag){case 1:return oi(e.type)&&pd(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return qo(),Ut(ai),Ut(zn),_g(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return kg(e),null;case 13:if(Ut(Yt),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Me(340));Lo()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return Ut(Yt),null;case 4:return qo(),null;case 10:return Sg(e.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var du=!1,Bn=!1,r_=typeof WeakSet=="function"?WeakSet:Set,He=null;function vo(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){nn(i,e,n)}else t.current=null}function hm(i,e,t){try{t()}catch(n){nn(i,e,n)}}var s0=!1;function s_(i,e){if(Kp=ud,i=dx(),bg(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch(_){t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=i,h=null;t:for(;;){for(var f;d!==t||r!==0&&d.nodeType!==3||(o=a+r),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===i)break t;if(h===t&&++c===r&&(o=a),h===s&&++u===n&&(l=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Yp={focusedElem:i,selectionRange:t},ud=!1,He=e;He!==null;)if(e=He,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,He=i;else for(;He!==null;){e=He;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,w=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?p:Gi(e.type,p),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(_){nn(e,e.return,_)}if(i=e.sibling,i!==null){i.return=e.return,He=i;break}He=e.return}return m=s0,s0=!1,m}function Vl(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&i)===i){var s=r.destroy;r.destroy=void 0,s!==void 0&&hm(e,t,s)}r=r.next}while(r!==n)}}function ch(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function fm(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function l1(i){var e=i.alternate;e!==null&&(i.alternate=null,l1(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[wr],delete e[lc],delete e[Zp],delete e[jk],delete e[Uk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function c1(i){return i.tag===5||i.tag===3||i.tag===4}function a0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||c1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function pm(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=fd));else if(n!==4&&(i=i.child,i!==null))for(pm(i,e,t),i=i.sibling;i!==null;)pm(i,e,t),i=i.sibling}function mm(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(mm(i,e,t),i=i.sibling;i!==null;)mm(i,e,t),i=i.sibling}var _n=null,Ki=!1;function ds(i,e,t){for(t=t.child;t!==null;)u1(i,e,t),t=t.sibling}function u1(i,e,t){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(th,t)}catch(o){}switch(t.tag){case 5:Bn||vo(t,e);case 6:var n=_n,r=Ki;_n=null,ds(i,e,t),_n=n,Ki=r,_n!==null&&(Ki?(i=_n,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):_n.removeChild(t.stateNode));break;case 18:_n!==null&&(Ki?(i=_n,t=t.stateNode,i.nodeType===8?$f(i.parentNode,t):i.nodeType===1&&$f(i,t),ic(i)):$f(_n,t.stateNode));break;case 4:n=_n,r=Ki,_n=t.stateNode.containerInfo,Ki=!0,ds(i,e,t),_n=n,Ki=r;break;case 0:case 11:case 14:case 15:if(!Bn&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&hm(t,e,a),r=r.next}while(r!==n)}ds(i,e,t);break;case 1:if(!Bn&&(vo(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){nn(t,e,o)}ds(i,e,t);break;case 21:ds(i,e,t);break;case 22:t.mode&1?(Bn=(n=Bn)||t.memoizedState!==null,ds(i,e,t),Bn=n):ds(i,e,t);break;default:ds(i,e,t)}}function o0(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new r_),e.forEach(function(n){var r=p_.bind(null,i,n);t.has(n)||(t.add(n),n.then(r,r))})}}function Vi(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var s=i,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:_n=o.stateNode,Ki=!1;break e;case 3:_n=o.stateNode.containerInfo,Ki=!0;break e;case 4:_n=o.stateNode.containerInfo,Ki=!0;break e}o=o.return}if(_n===null)throw Error(Me(160));u1(s,a,r),_n=null,Ki=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){nn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d1(e,i),e=e.sibling}function d1(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Vi(e,i),yr(i),n&4){try{Vl(3,i,i.return),ch(3,i)}catch(p){nn(i,i.return,p)}try{Vl(5,i,i.return)}catch(p){nn(i,i.return,p)}}break;case 1:Vi(e,i),yr(i),n&512&&t!==null&&vo(t,t.return);break;case 5:if(Vi(e,i),yr(i),n&512&&t!==null&&vo(t,t.return),i.flags&32){var r=i.stateNode;try{Zl(r,"")}catch(p){nn(i,i.return,p)}}if(n&4&&(r=i.stateNode,r!=null)){var s=i.memoizedProps,a=t!==null?t.memoizedProps:s,o=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&IE(r,s),qp(o,a);var c=qp(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?LE(r,d):u==="dangerouslySetInnerHTML"?DE(r,d):u==="children"?Zl(r,d):sg(r,u,d,c)}switch(o){case"input":Op(r,s);break;case"textarea":$E(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Eo(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Eo(r,!!s.multiple,s.defaultValue,!0):Eo(r,!!s.multiple,s.multiple?[]:"",!1))}r[lc]=s}catch(p){nn(i,i.return,p)}}break;case 6:if(Vi(e,i),yr(i),n&4){if(i.stateNode===null)throw Error(Me(162));r=i.stateNode,s=i.memoizedProps;try{r.nodeValue=s}catch(p){nn(i,i.return,p)}}break;case 3:if(Vi(e,i),yr(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{ic(e.containerInfo)}catch(p){nn(i,i.return,p)}break;case 4:Vi(e,i),yr(i);break;case 13:Vi(e,i),yr(i),r=i.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Bg=ln())),n&4&&o0(i);break;case 22:if(u=t!==null&&t.memoizedState!==null,i.mode&1?(Bn=(c=Bn)||u,Vi(e,i),Bn=c):Vi(e,i),yr(i),n&8192){if(c=i.memoizedState!==null,(i.stateNode.isHidden=c)&&!u&&i.mode&1)for(He=i,u=i.child;u!==null;){for(d=He=u;He!==null;){switch(h=He,f=h.child,h.tag){case 0:case 11:case 14:case 15:Vl(4,h,h.return);break;case 1:vo(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,t=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){nn(n,t,p)}}break;case 5:vo(h,h.return);break;case 22:if(h.memoizedState!==null){c0(d);continue}}f!==null?(f.return=h,He=f):c0(d)}u=u.sibling}e:for(u=null,d=i;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=ME("display",a))}catch(p){nn(i,i.return,p)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(p){nn(i,i.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===i)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vi(e,i),yr(i),n&4&&o0(i);break;case 21:break;default:Vi(e,i),yr(i)}}function yr(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(c1(t)){var n=t;break e}t=t.return}throw Error(Me(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Zl(r,""),n.flags&=-33);var s=a0(i);mm(i,s,r);break;case 3:case 4:var a=n.stateNode.containerInfo,o=a0(i);pm(i,o,a);break;default:throw Error(Me(161))}}catch(l){nn(i,i.return,l)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function a_(i,e,t){He=i,h1(i)}function h1(i,e,t){for(var n=(i.mode&1)!==0;He!==null;){var r=He,s=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||du;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||Bn;o=du;var c=Bn;if(du=a,(Bn=l)&&!c)for(He=r;He!==null;)a=He,l=a.child,a.tag===22&&a.memoizedState!==null?u0(r):l!==null?(l.return=a,He=l):u0(r);for(;s!==null;)He=s,h1(s),s=s.sibling;He=r,du=o,Bn=c}l0(i)}else r.subtreeFlags&8772&&s!==null?(s.return=r,He=s):l0(i)}}function l0(i){for(;He!==null;){var e=He;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bn||ch(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Bn)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Gi(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Wb(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Wb(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ic(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}Bn||e.flags&512&&fm(e)}catch(h){nn(e,e.return,h)}}if(e===i){He=null;break}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}}function c0(i){for(;He!==null;){var e=He;if(e===i){He=null;break}var t=e.sibling;if(t!==null){t.return=e.return,He=t;break}He=e.return}}function u0(i){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{ch(4,e)}catch(l){nn(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(l){nn(e,r,l)}}var s=e.return;try{fm(e)}catch(l){nn(e,s,l)}break;case 5:var a=e.return;try{fm(e)}catch(l){nn(e,a,l)}}}catch(l){nn(e,e.return,l)}if(e===i){He=null;break}var o=e.sibling;if(o!==null){o.return=e.return,He=o;break}He=e.return}}var o_=Math.ceil,Sd=ss.ReactCurrentDispatcher,Mg=ss.ReactCurrentOwner,qi=ss.ReactCurrentBatchConfig,xt=0,En=null,hn=null,Rn=0,pi=0,wo=js(0),gn=0,pc=null,Ea=0,uh=0,Lg=0,Wl=null,ti=null,Bg=0,jo=1/0,Fr=null,Cd=!1,gm=null,$s=null,hu=!1,Cs=null,Ad=0,Hl=0,ym=null,Wu=-1,Hu=0;function Qn(){return xt&6?ln():Wu!==-1?Wu:Wu=ln()}function Os(i){return i.mode&1?xt&2&&Rn!==0?Rn&-Rn:Vk.transition!==null?(Hu===0&&(Hu=KE()),Hu):(i=It,i!==0||(i=window.event,i=i===void 0?16:nx(i.type)),i):1}function ar(i,e,t,n){if(50<Hl)throw Hl=0,ym=null,Error(Me(185));Cc(i,t,n),(!(xt&2)||i!==En)&&(i===En&&(!(xt&2)&&(uh|=t),gn===4&&xs(i,Rn)),li(i,n),t===1&&xt===0&&!(e.mode&1)&&(jo=ln()+500,ah&&Us()))}function li(i,e){var t=i.callbackNode;VN(i,e);var n=cd(i,i===En?Rn:0);if(n===0)t!==null&&vb(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&vb(t),e===1)i.tag===0?zk(d0.bind(null,i)):Ex(d0.bind(null,i)),qk(function(){!(xt&6)&&Us()}),t=null;else{switch(YE(n)){case 1:t=ug;break;case 4:t=QE;break;case 16:t=ld;break;case 536870912:t=GE;break;default:t=ld}t=w1(t,f1.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function f1(i,e){if(Wu=-1,Hu=0,xt&6)throw Error(Me(327));var t=i.callbackNode;if(Ao()&&i.callbackNode!==t)return null;var n=cd(i,i===En?Rn:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=Nd(i,n);else{e=n;var r=xt;xt|=2;var s=m1();(En!==i||Rn!==e)&&(Fr=null,jo=ln()+500,ma(i,e));do try{u_();break}catch(o){p1(i,o)}while(1);Tg(),Sd.current=s,xt=r,hn!==null?e=0:(En=null,Rn=0,e=gn)}if(e!==0){if(e===2&&(r=Vp(i),r!==0&&(n=r,e=bm(i,r))),e===1)throw t=pc,ma(i,0),xs(i,n),li(i,ln()),t;if(e===6)xs(i,n);else{if(r=i.current.alternate,!(n&30)&&!l_(r)&&(e=Nd(i,n),e===2&&(s=Vp(i),s!==0&&(n=s,e=bm(i,s))),e===1))throw t=pc,ma(i,0),xs(i,n),li(i,ln()),t;switch(i.finishedWork=r,i.finishedLanes=n,e){case 0:case 1:throw Error(Me(345));case 2:ra(i,ti,Fr);break;case 3:if(xs(i,n),(n&130023424)===n&&(e=Bg+500-ln(),10<e)){if(cd(i,0)!==0)break;if(r=i.suspendedLanes,(r&n)!==n){Qn(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=Xp(ra.bind(null,i,ti,Fr),e);break}ra(i,ti,Fr);break;case 4:if(xs(i,n),(n&4194240)===n)break;for(e=i.eventTimes,r=-1;0<n;){var a=31-sr(n);s=1<<a,a=e[a],a>r&&(r=a),n&=~s}if(n=r,n=ln()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*o_(n/1960))-n,10<n){i.timeoutHandle=Xp(ra.bind(null,i,ti,Fr),n);break}ra(i,ti,Fr);break;case 5:ra(i,ti,Fr);break;default:throw Error(Me(329))}}}return li(i,ln()),i.callbackNode===t?f1.bind(null,i):null}function bm(i,e){var t=Wl;return i.current.memoizedState.isDehydrated&&(ma(i,e).flags|=256),i=Nd(i,e),i!==2&&(e=ti,ti=t,e!==null&&vm(e)),i}function vm(i){ti===null?ti=i:ti.push.apply(ti,i)}function l_(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],s=r.getSnapshot;r=r.value;try{if(!hr(s(),r))return!1}catch(a){return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xs(i,e){for(e&=~Lg,e&=~uh,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-sr(e),n=1<<t;i[t]=-1,e&=~n}}function d0(i){if(xt&6)throw Error(Me(327));Ao();var e=cd(i,0);if(!(e&1))return li(i,ln()),null;var t=Nd(i,e);if(i.tag!==0&&t===2){var n=Vp(i);n!==0&&(e=n,t=bm(i,n))}if(t===1)throw t=pc,ma(i,0),xs(i,e),li(i,ln()),t;if(t===6)throw Error(Me(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,ra(i,ti,Fr),li(i,ln()),null}function qg(i,e){var t=xt;xt|=1;try{return i(e)}finally{xt=t,xt===0&&(jo=ln()+500,ah&&Us())}}function xa(i){Cs!==null&&Cs.tag===0&&!(xt&6)&&Ao();var e=xt;xt|=1;var t=qi.transition,n=It;try{if(qi.transition=null,It=1,i)return i()}finally{It=n,qi.transition=t,xt=e,!(xt&6)&&Us()}}function Fg(){pi=wo.current,Ut(wo)}function ma(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,Bk(t)),hn!==null)for(t=hn.return;t!==null;){var n=t;switch(wg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&pd();break;case 3:qo(),Ut(ai),Ut(zn),_g();break;case 5:kg(n);break;case 4:qo();break;case 13:Ut(Yt);break;case 19:Ut(Yt);break;case 10:Sg(n.type._context);break;case 22:case 23:Fg()}t=t.return}if(En=i,hn=i=Ds(i.current,null),Rn=pi=e,gn=0,pc=null,Lg=uh=Ea=0,ti=Wl=null,oa!==null){for(e=0;e<oa.length;e++)if(t=oa[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,n.next=a}t.pending=n}oa=null}return i}function p1(i,e){do{var t=hn;try{if(Tg(),Uu.current=Td,xd){for(var n=Jt.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}xd=!1}if(wa=0,wn=mn=Jt=null,zl=!1,dc=0,Mg.current=null,t===null||t.return===null){gn=1,pc=e,hn=null;break}e:{var s=i,a=t.return,o=t,l=e;if(e=Rn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Xb(a);if(f!==null){f.flags&=-257,Zb(f,a,o,s,e),f.mode&1&&Jb(s,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var p=new Set;p.add(l),e.updateQueue=p}else m.add(l);break e}else{if(!(e&1)){Jb(s,c,e),jg();break e}l=Error(Me(426))}}else if(Qt&&o.mode&1){var w=Xb(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Zb(w,a,o,s,e),Eg(Fo(l,o));break e}}s=l=Fo(l,o),gn!==4&&(gn=2),Wl===null?Wl=[s]:Wl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Jx(s,l,e);Vb(s,y);break e;case 1:o=l;var b=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&($s===null||!$s.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=Xx(s,o,e);Vb(s,_);break e}}s=s.return}while(s!==null)}y1(t)}catch(k){e=k,hn===t&&t!==null&&(hn=t=t.return);continue}break}while(1)}function m1(){var i=Sd.current;return Sd.current=Td,i===null?Td:i}function jg(){(gn===0||gn===3||gn===2)&&(gn=4),En===null||!(Ea&268435455)&&!(uh&268435455)||xs(En,Rn)}function Nd(i,e){var t=xt;xt|=2;var n=m1();(En!==i||Rn!==e)&&(Fr=null,ma(i,e));do try{c_();break}catch(r){p1(i,r)}while(1);if(Tg(),xt=t,Sd.current=n,hn!==null)throw Error(Me(261));return En=null,Rn=0,gn}function c_(){for(;hn!==null;)g1(hn)}function u_(){for(;hn!==null&&!DN();)g1(hn)}function g1(i){var e=v1(i.alternate,i,pi);i.memoizedProps=i.pendingProps,e===null?y1(i):hn=e,Mg.current=null}function y1(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=i_(t,e),t!==null){t.flags&=32767,hn=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{gn=6,hn=null;return}}else if(t=n_(t,e,pi),t!==null){hn=t;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=i}while(e!==null);gn===0&&(gn=5)}function ra(i,e,t){var n=It,r=qi.transition;try{qi.transition=null,It=1,d_(i,e,t,n)}finally{qi.transition=r,It=n}return null}function d_(i,e,t,n){do Ao();while(Cs!==null);if(xt&6)throw Error(Me(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Me(177));i.callbackNode=null,i.callbackPriority=0;var s=t.lanes|t.childLanes;if(WN(i,s),i===En&&(hn=En=null,Rn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||hu||(hu=!0,w1(ld,function(){return Ao(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=qi.transition,qi.transition=null;var a=It;It=1;var o=xt;xt|=4,Mg.current=null,s_(i,t),d1(t,i),Pk(Yp),ud=!!Kp,Yp=Kp=null,i.current=t,a_(t),MN(),xt=o,It=a,qi.transition=s}else i.current=t;if(hu&&(hu=!1,Cs=i,Ad=r),s=i.pendingLanes,s===0&&($s=null),qN(t.stateNode),li(i,ln()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(Cd)throw Cd=!1,i=gm,gm=null,i;return Ad&1&&i.tag!==0&&Ao(),s=i.pendingLanes,s&1?i===ym?Hl++:(Hl=0,ym=i):Hl=0,Us(),null}function Ao(){if(Cs!==null){var i=YE(Ad),e=qi.transition,t=It;try{if(qi.transition=null,It=16>i?16:i,Cs===null)var n=!1;else{if(i=Cs,Cs=null,Ad=0,xt&6)throw Error(Me(331));var r=xt;for(xt|=4,He=i.current;He!==null;){var s=He,a=s.child;if(He.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(He=c;He!==null;){var u=He;switch(u.tag){case 0:case 11:case 15:Vl(8,u,s)}var d=u.child;if(d!==null)d.return=u,He=d;else for(;He!==null;){u=He;var h=u.sibling,f=u.return;if(l1(u),u===c){He=null;break}if(h!==null){h.return=f,He=h;break}He=f}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var w=p.sibling;p.sibling=null,p=w}while(p!==null)}}He=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,He=a;else e:for(;He!==null;){if(s=He,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vl(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,He=y;break e}He=s.return}}var b=i.current;for(He=b;He!==null;){a=He;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,He=E;else e:for(a=b;He!==null;){if(o=He,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ch(9,o)}}catch(k){nn(o,o.return,k)}if(o===a){He=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,He=_;break e}He=o.return}}if(xt=r,Us(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(th,i)}catch(k){}n=!0}return n}finally{It=t,qi.transition=e}}return!1}function h0(i,e,t){e=Fo(t,e),e=Jx(i,e,1),i=Is(i,e,1),e=Qn(),i!==null&&(Cc(i,1,e),li(i,e))}function nn(i,e,t){if(i.tag===3)h0(i,i,t);else for(;e!==null;){if(e.tag===3){h0(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($s===null||!$s.has(n))){i=Fo(t,i),i=Xx(e,i,1),e=Is(e,i,1),i=Qn(),e!==null&&(Cc(e,1,i),li(e,i));break}}e=e.return}}function h_(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=Qn(),i.pingedLanes|=i.suspendedLanes&t,En===i&&(Rn&t)===t&&(gn===4||gn===3&&(Rn&130023424)===Rn&&500>ln()-Bg?ma(i,0):Lg|=t),li(i,e)}function b1(i,e){e===0&&(i.mode&1?(e=nu,nu<<=1,!(nu&130023424)&&(nu=4194304)):e=1);var t=Qn();i=ts(i,e),i!==null&&(Cc(i,e,t),li(i,t))}function f_(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),b1(i,t)}function p_(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(Me(314))}n!==null&&n.delete(e),b1(i,t)}var v1;v1=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||ai.current)ri=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return ri=!1,t_(i,e,t);ri=!!(i.flags&131072)}else ri=!1,Qt&&e.flags&1048576&&xx(e,yd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Vu(i,e),i=e.pendingProps;var r=Mo(e,zn.current);Co(e,t),r=Pg(null,e,n,i,r,t);var s=Ig();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oi(n)?(s=!0,md(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ag(e),r.updater=oh,e.stateNode=r,r._reactInternals=e,sm(e,n,i,t),e=lm(null,e,n,!0,s,t)):(e.tag=0,Qt&&s&&vg(e),Wn(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Vu(i,e),i=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=g_(n),i=Gi(n,i),r){case 0:e=om(null,e,n,i,t);break e;case 1:e=n0(null,e,n,i,t);break e;case 11:e=e0(null,e,n,i,t);break e;case 14:e=t0(null,e,n,Gi(n.type,i),t);break e}throw Error(Me(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gi(n,r),om(i,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gi(n,r),n0(i,e,n,r,t);case 3:e:{if(n1(e),i===null)throw Error(Me(387));n=e.pendingProps,s=e.memoizedState,r=s.element,Ax(i,e),wd(e,n,null,t);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Fo(Error(Me(423)),e),e=i0(i,e,n,t,r);break e}else if(n!==r){r=Fo(Error(Me(424)),e),e=i0(i,e,n,t,r);break e}else for(bi=Ps(e.stateNode.containerInfo.firstChild),vi=e,Qt=!0,Xi=null,t=Rx(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Lo(),n===r){e=ns(i,e,t);break e}Wn(i,e,n,t)}e=e.child}return e;case 5:return Px(e),i===null&&nm(e),n=e.type,r=e.pendingProps,s=i!==null?i.memoizedProps:null,a=r.children,Jp(n,r)?a=null:s!==null&&Jp(n,s)&&(e.flags|=32),t1(i,e),Wn(i,e,a,t),e.child;case 6:return i===null&&nm(e),null;case 13:return i1(i,e,t);case 4:return Ng(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Bo(e,null,n,t):Wn(i,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gi(n,r),e0(i,e,n,r,t);case 7:return Wn(i,e,e.pendingProps,t),e.child;case 8:return Wn(i,e,e.pendingProps.children,t),e.child;case 12:return Wn(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Bt(bd,n._currentValue),n._currentValue=a,s!==null)if(hr(s.value,a)){if(s.children===r.children&&!ai.current){e=ns(i,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Yr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),im(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Me(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),im(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Wn(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Co(e,t),r=ji(r),n=n(r),e.flags|=1,Wn(i,e,n,t),e.child;case 14:return n=e.type,r=Gi(n,e.pendingProps),r=Gi(n.type,r),t0(i,e,n,r,t);case 15:return Zx(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gi(n,r),Vu(i,e),e.tag=1,oi(n)?(i=!0,md(e)):i=!1,Co(e,t),kx(e,n,r),sm(e,n,r,t),lm(null,e,n,!0,i,t);case 19:return r1(i,e,t);case 22:return e1(i,e,t)}throw Error(Me(156,e.tag))};function w1(i,e){return HE(i,e)}function m_(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(i,e,t,n){return new m_(i,e,t,n)}function Ug(i){return i=i.prototype,!(!i||!i.isReactComponent)}function g_(i){if(typeof i=="function")return Ug(i)?1:0;if(i!=null){if(i=i.$$typeof,i===og)return 11;if(i===lg)return 14}return 2}function Ds(i,e){var t=i.alternate;return t===null?(t=Li(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function Qu(i,e,t,n,r,s){var a=2;if(n=i,typeof i=="function")Ug(i)&&(a=1);else if(typeof i=="string")a=5;else e:switch(i){case co:return ga(t.children,r,s,e);case ag:a=8,r|=8;break;case _p:return i=Li(12,t,e,r|2),i.elementType=_p,i.lanes=s,i;case Rp:return i=Li(13,t,e,r),i.elementType=Rp,i.lanes=s,i;case Pp:return i=Li(19,t,e,r),i.elementType=Pp,i.lanes=s,i;case _E:return dh(t,r,s,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case NE:a=10;break e;case kE:a=9;break e;case og:a=11;break e;case lg:a=14;break e;case bs:a=16,n=null;break e}throw Error(Me(130,i==null?i:typeof i,""))}return e=Li(a,t,e,r),e.elementType=i,e.type=n,e.lanes=s,e}function ga(i,e,t,n){return i=Li(7,i,n,e),i.lanes=t,i}function dh(i,e,t,n){return i=Li(22,i,n,e),i.elementType=_E,i.lanes=t,i.stateNode={isHidden:!1},i}function jf(i,e,t){return i=Li(6,i,null,e),i.lanes=t,i}function Uf(i,e,t){return e=Li(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function y_(i,e,t,n,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xf(0),this.expirationTimes=xf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xf(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zg(i,e,t,n,r,s,a,o,l){return i=new y_(i,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Li(3,null,null,e),i.current=s,s.stateNode=i,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ag(s),i}function b_(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lo,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function E1(i){if(!i)return Ls;i=i._reactInternals;e:{if(Ia(i)!==i||i.tag!==1)throw Error(Me(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Me(171))}if(i.tag===1){var t=i.type;if(oi(t))return wx(i,t,e)}return e}function x1(i,e,t,n,r,s,a,o,l){return i=zg(t,n,!0,i,r,s,a,o,l),i.context=E1(null),t=i.current,n=Qn(),r=Os(t),s=Yr(n,r),s.callback=e!=null?e:null,Is(t,s,r),i.current.lanes=r,Cc(i,r,n),li(i,n),i}function hh(i,e,t,n){var r=e.current,s=Qn(),a=Os(r);return t=E1(t),e.context===null?e.context=t:e.pendingContext=t,e=Yr(s,a),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Is(r,e,a),i!==null&&(ar(i,r,a,s),ju(i,r,a)),a}function kd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function f0(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function Vg(i,e){f0(i,e),(i=i.alternate)&&f0(i,e)}function v_(){return null}var T1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Wg(i){this._internalRoot=i}fh.prototype.render=Wg.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Me(409));hh(i,e,null,null)};fh.prototype.unmount=Wg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;xa(function(){hh(null,i,null,null)}),e[es]=null}};function fh(i){this._internalRoot=i}fh.prototype.unstable_scheduleHydration=function(i){if(i){var e=ZE();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Es.length&&e!==0&&e<Es[t].priority;t++);Es.splice(t,0,i),t===0&&tx(i)}};function Hg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ph(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function p0(){}function w_(i,e,t,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var c=kd(a);s.call(c)}}var a=x1(e,n,i,0,null,!1,!1,"",p0);return i._reactRootContainer=a,i[es]=a.current,ac(i.nodeType===8?i.parentNode:i),xa(),a}for(;r=i.lastChild;)i.removeChild(r);if(typeof n=="function"){var o=n;n=function(){var c=kd(l);o.call(c)}}var l=zg(i,0,!1,null,null,!1,!1,"",p0);return i._reactRootContainer=l,i[es]=l.current,ac(i.nodeType===8?i.parentNode:i),xa(function(){hh(e,l,t,n)}),l}function mh(i,e,t,n,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=kd(a);o.call(l)}}hh(e,a,i,r)}else a=w_(t,e,i,r,n);return kd(a)}JE=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=Il(e.pendingLanes);t!==0&&(dg(e,t|1),li(e,ln()),!(xt&6)&&(jo=ln()+500,Us()))}break;case 13:xa(function(){var n=ts(i,1);if(n!==null){var r=Qn();ar(n,i,1,r)}}),Vg(i,1)}};hg=function(i){if(i.tag===13){var e=ts(i,134217728);if(e!==null){var t=Qn();ar(e,i,134217728,t)}Vg(i,134217728)}};XE=function(i){if(i.tag===13){var e=Os(i),t=ts(i,e);if(t!==null){var n=Qn();ar(t,i,e,n)}Vg(i,e)}};ZE=function(){return It};ex=function(i,e){var t=It;try{return It=i,e()}finally{It=t}};jp=function(i,e,t){switch(e){case"input":if(Op(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var r=sh(n);if(!r)throw Error(Me(90));PE(n),Op(n,r)}}}break;case"textarea":$E(i,t);break;case"select":e=t.value,e!=null&&Eo(i,!!t.multiple,e,!1)}};FE=qg;jE=xa;var E_={usingClientEntryPoint:!1,Events:[Nc,po,sh,BE,qE,qg]},xl={findFiberByHostInstance:aa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},x_={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=VE(i),i===null?null:i.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance||v_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{th=fu.inject(x_),Ar=fu}catch(i){}}xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E_;xi.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hg(e))throw Error(Me(200));return b_(i,e,null,t)};xi.createRoot=function(i,e){if(!Hg(i))throw Error(Me(299));var t=!1,n="",r=T1;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=zg(i,1,!1,null,null,t,!1,n,r),i[es]=e.current,ac(i.nodeType===8?i.parentNode:i),new Wg(e)};xi.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Me(188)):(i=Object.keys(i).join(","),Error(Me(268,i)));return i=VE(e),i=i===null?null:i.stateNode,i};xi.flushSync=function(i){return xa(i)};xi.hydrate=function(i,e,t){if(!ph(e))throw Error(Me(200));return mh(null,i,e,!0,t)};xi.hydrateRoot=function(i,e,t){if(!Hg(i))throw Error(Me(405));var n=t!=null&&t.hydratedSources||null,r=!1,s="",a=T1;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=x1(e,null,i,1,t!=null?t:null,r,!1,s,a),i[es]=e.current,ac(i),n)for(i=0;i<n.length;i++)t=n[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new fh(e)};xi.render=function(i,e,t){if(!ph(e))throw Error(Me(200));return mh(null,i,e,!1,t)};xi.unmountComponentAtNode=function(i){if(!ph(i))throw Error(Me(40));return i._reactRootContainer?(xa(function(){mh(null,null,i,!1,function(){i._reactRootContainer=null,i[es]=null})}),!0):!1};xi.unstable_batchedUpdates=qg;xi.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!ph(t))throw Error(Me(200));if(i==null||i._reactInternals===void 0)throw Error(Me(38));return mh(i,e,t,!1,n)};xi.version="18.2.0-next-9e3b772b8-20220608";function S1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S1)}catch(i){console.error(i)}}S1(),xE.exports=xi;var Qg=xE.exports;const T_=Ra(Qg);var C1,m0=Qg;C1=m0.createRoot,m0.hydrateRoot;function wm(i,e){return wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},wm(i,e)}function Bs(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,wm(i,e)}var A1={exports:{}},S_="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",C_=S_,A_=C_;function N1(){}function k1(){}k1.resetWarningCache=N1;var N_=function(){function i(n,r,s,a,o,l){if(l!==A_){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}i.isRequired=i;function e(){return i}var t={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:k1,resetWarningCache:N1};return t.PropTypes=t,t};A1.exports=N_();var k_=A1.exports;const g0=Ra(k_);function ci(){return ci=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ci.apply(this,arguments)}function pu(i){return i.charAt(0)==="/"}function zf(i,e){for(var t=e,n=t+1,r=i.length;n<r;t+=1,n+=1)i[t]=i[n];i.pop()}function __(i,e){e===void 0&&(e="");var t=i&&i.split("/")||[],n=e&&e.split("/")||[],r=i&&pu(i),s=e&&pu(e),a=r||s;if(i&&pu(i)?n=t:t.length&&(n.pop(),n=n.concat(t)),!n.length)return"/";var o;if(n.length){var l=n[n.length-1];o=l==="."||l===".."||l===""}else o=!1;for(var c=0,u=n.length;u>=0;u--){var d=n[u];d==="."?zf(n,u):d===".."?(zf(n,u),c++):c&&(zf(n,u),c--)}if(!a)for(;c--;c)n.unshift("..");a&&n[0]!==""&&(!n[0]||!pu(n[0]))&&n.unshift("");var h=n.join("/");return o&&h.substr(-1)!=="/"&&(h+="/"),h}function y0(i){return i.valueOf?i.valueOf():Object.prototype.valueOf.call(i)}function Gu(i,e){if(i===e)return!0;if(i==null||e==null)return!1;if(Array.isArray(i))return Array.isArray(e)&&i.length===e.length&&i.every(function(r,s){return Gu(r,e[s])});if(typeof i=="object"||typeof e=="object"){var t=y0(i),n=y0(e);return t!==i||n!==e?Gu(t,n):Object.keys(Object.assign({},i,e)).every(function(r){return Gu(i[r],e[r])})}return!1}var R_=!0,Vf="Invariant failed";function $a(i,e){if(!i){if(R_)throw new Error(Vf);var t=typeof e=="function"?e():e,n=t?"".concat(Vf,": ").concat(t):Vf;throw new Error(n)}}function Ql(i){return i.charAt(0)==="/"?i:"/"+i}function b0(i){return i.charAt(0)==="/"?i.substr(1):i}function P_(i,e){return i.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(i.charAt(e.length))!==-1}function _1(i,e){return P_(i,e)?i.substr(e.length):i}function R1(i){return i.charAt(i.length-1)==="/"?i.slice(0,-1):i}function I_(i){var e=i||"/",t="",n="",r=e.indexOf("#");r!==-1&&(n=e.substr(r),e=e.substr(0,r));var s=e.indexOf("?");return s!==-1&&(t=e.substr(s),e=e.substr(0,s)),{pathname:e,search:t==="?"?"":t,hash:n==="#"?"":n}}function Ri(i){var e=i.pathname,t=i.search,n=i.hash,r=e||"/";return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function si(i,e,t,n){var r;typeof i=="string"?(r=I_(i),r.state=e):(r=ci({},i),r.pathname===void 0&&(r.pathname=""),r.search?r.search.charAt(0)!=="?"&&(r.search="?"+r.search):r.search="",r.hash?r.hash.charAt(0)!=="#"&&(r.hash="#"+r.hash):r.hash="",e!==void 0&&r.state===void 0&&(r.state=e));try{r.pathname=decodeURI(r.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return t&&(r.key=t),n?r.pathname?r.pathname.charAt(0)!=="/"&&(r.pathname=__(r.pathname,n.pathname)):r.pathname=n.pathname:r.pathname||(r.pathname="/"),r}function $_(i,e){return i.pathname===e.pathname&&i.search===e.search&&i.hash===e.hash&&i.key===e.key&&Gu(i.state,e.state)}function Gg(){var i=null;function e(a){return i=a,function(){i===a&&(i=null)}}function t(a,o,l,c){if(i!=null){var u=typeof i=="function"?i(a,o):i;typeof u=="string"?typeof l=="function"?l(u,c):c(!0):c(u!==!1)}else c(!0)}var n=[];function r(a){var o=!0;function l(){o&&a.apply(void 0,arguments)}return n.push(l),function(){o=!1,n=n.filter(function(c){return c!==l})}}function s(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];n.forEach(function(c){return c.apply(void 0,o)})}return{setPrompt:e,confirmTransitionTo:t,appendListener:r,notifyListeners:s}}var P1=!!(typeof window<"u"&&window.document&&window.document.createElement);function I1(i,e){e(window.confirm(i))}function O_(){var i=window.navigator.userAgent;return(i.indexOf("Android 2.")!==-1||i.indexOf("Android 4.0")!==-1)&&i.indexOf("Mobile Safari")!==-1&&i.indexOf("Chrome")===-1&&i.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function D_(){return window.navigator.userAgent.indexOf("Trident")===-1}function M_(){return window.navigator.userAgent.indexOf("Firefox")===-1}function L_(i){return i.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var v0="popstate",w0="hashchange";function E0(){try{return window.history.state||{}}catch(i){return{}}}function B_(i){i===void 0&&(i={}),P1||$a(!1);var e=window.history,t=O_(),n=!D_(),r=i,s=r.forceRefresh,a=s===void 0?!1:s,o=r.getUserConfirmation,l=o===void 0?I1:o,c=r.keyLength,u=c===void 0?6:c,d=i.basename?R1(Ql(i.basename)):"";function h(ne){var Y=ne||{},F=Y.key,H=Y.state,_e=window.location,we=_e.pathname,ye=_e.search,Ve=_e.hash,Ke=we+ye+Ve;return d&&(Ke=_1(Ke,d)),si(Ke,H,F)}function f(){return Math.random().toString(36).substr(2,u)}var m=Gg();function p(ne){ci(de,ne),de.length=e.length,m.notifyListeners(de.location,de.action)}function w(ne){L_(ne)||E(h(ne.state))}function y(){E(h(E0()))}var b=!1;function E(ne){if(b)b=!1,p();else{var Y="POP";m.confirmTransitionTo(ne,Y,l,function(F){F?p({action:Y,location:ne}):_(ne)})}}function _(ne){var Y=de.location,F=B.indexOf(Y.key);F===-1&&(F=0);var H=B.indexOf(ne.key);H===-1&&(H=0);var _e=F-H;_e&&(b=!0,Q(_e))}var k=h(E0()),B=[k.key];function D(ne){return d+Ri(ne)}function O(ne,Y){var F="PUSH",H=si(ne,Y,f(),de.location);m.confirmTransitionTo(H,F,l,function(_e){if(_e){var we=D(H),ye=H.key,Ve=H.state;if(t)if(e.pushState({key:ye,state:Ve},null,we),a)window.location.href=we;else{var Ke=B.indexOf(de.location.key),Ye=B.slice(0,Ke+1);Ye.push(H.key),B=Ye,p({action:F,location:H})}else window.location.href=we}})}function R(ne,Y){var F="REPLACE",H=si(ne,Y,f(),de.location);m.confirmTransitionTo(H,F,l,function(_e){if(_e){var we=D(H),ye=H.key,Ve=H.state;if(t)if(e.replaceState({key:ye,state:Ve},null,we),a)window.location.replace(we);else{var Ke=B.indexOf(de.location.key);Ke!==-1&&(B[Ke]=H.key),p({action:F,location:H})}else window.location.replace(we)}})}function Q(ne){e.go(ne)}function $(){Q(-1)}function P(){Q(1)}var q=0;function S(ne){q+=ne,q===1&&ne===1?(window.addEventListener(v0,w),n&&window.addEventListener(w0,y)):q===0&&(window.removeEventListener(v0,w),n&&window.removeEventListener(w0,y))}var Z=!1;function ve(ne){ne===void 0&&(ne=!1);var Y=m.setPrompt(ne);return Z||(S(1),Z=!0),function(){return Z&&(Z=!1,S(-1)),Y()}}function re(ne){var Y=m.appendListener(ne);return S(1),function(){S(-1),Y()}}var de={length:e.length,action:"POP",location:k,createHref:D,push:O,replace:R,go:Q,goBack:$,goForward:P,block:ve,listen:re};return de}var x0="hashchange",q_={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+b0(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:b0,decodePath:Ql},slash:{encodePath:Ql,decodePath:Ql}};function $1(i){var e=i.indexOf("#");return e===-1?i:i.slice(0,e)}function Tl(){var i=window.location.href,e=i.indexOf("#");return e===-1?"":i.substring(e+1)}function F_(i){window.location.hash=i}function Wf(i){window.location.replace($1(window.location.href)+"#"+i)}function j_(i){i===void 0&&(i={}),P1||$a(!1);var e=window.history;M_();var t=i,n=t.getUserConfirmation,r=n===void 0?I1:n,s=t.hashType,a=s===void 0?"slash":s,o=i.basename?R1(Ql(i.basename)):"",l=q_[a],c=l.encodePath,u=l.decodePath;function d(){var Y=u(Tl());return o&&(Y=_1(Y,o)),si(Y)}var h=Gg();function f(Y){ci(ne,Y),ne.length=e.length,h.notifyListeners(ne.location,ne.action)}var m=!1,p=null;function w(Y,F){return Y.pathname===F.pathname&&Y.search===F.search&&Y.hash===F.hash}function y(){var Y=Tl(),F=c(Y);if(Y!==F)Wf(F);else{var H=d(),_e=ne.location;if(!m&&w(_e,H)||p===Ri(H))return;p=null,b(H)}}function b(Y){if(m)m=!1,f();else{var F="POP";h.confirmTransitionTo(Y,F,r,function(H){H?f({action:F,location:Y}):E(Y)})}}function E(Y){var F=ne.location,H=D.lastIndexOf(Ri(F));H===-1&&(H=0);var _e=D.lastIndexOf(Ri(Y));_e===-1&&(_e=0);var we=H-_e;we&&(m=!0,$(we))}var _=Tl(),k=c(_);_!==k&&Wf(k);var B=d(),D=[Ri(B)];function O(Y){var F=document.querySelector("base"),H="";return F&&F.getAttribute("href")&&(H=$1(window.location.href)),H+"#"+c(o+Ri(Y))}function R(Y,F){var H="PUSH",_e=si(Y,void 0,void 0,ne.location);h.confirmTransitionTo(_e,H,r,function(we){if(we){var ye=Ri(_e),Ve=c(o+ye),Ke=Tl()!==Ve;if(Ke){p=ye,F_(Ve);var Ye=D.lastIndexOf(Ri(ne.location)),Xe=D.slice(0,Ye+1);Xe.push(ye),D=Xe,f({action:H,location:_e})}else f()}})}function Q(Y,F){var H="REPLACE",_e=si(Y,void 0,void 0,ne.location);h.confirmTransitionTo(_e,H,r,function(we){if(we){var ye=Ri(_e),Ve=c(o+ye),Ke=Tl()!==Ve;Ke&&(p=ye,Wf(Ve));var Ye=D.indexOf(Ri(ne.location));Ye!==-1&&(D[Ye]=ye),f({action:H,location:_e})}})}function $(Y){e.go(Y)}function P(){$(-1)}function q(){$(1)}var S=0;function Z(Y){S+=Y,S===1&&Y===1?window.addEventListener(x0,y):S===0&&window.removeEventListener(x0,y)}var ve=!1;function re(Y){Y===void 0&&(Y=!1);var F=h.setPrompt(Y);return ve||(Z(1),ve=!0),function(){return ve&&(ve=!1,Z(-1)),F()}}function de(Y){var F=h.appendListener(Y);return Z(1),function(){Z(-1),F()}}var ne={length:e.length,action:"POP",location:B,createHref:O,push:R,replace:Q,go:$,goBack:P,goForward:q,block:re,listen:de};return ne}function T0(i,e,t){return Math.min(Math.max(i,e),t)}function U_(i){i===void 0&&(i={});var e=i,t=e.getUserConfirmation,n=e.initialEntries,r=n===void 0?["/"]:n,s=e.initialIndex,a=s===void 0?0:s,o=e.keyLength,l=o===void 0?6:o,c=Gg();function u(O){ci(D,O),D.length=D.entries.length,c.notifyListeners(D.location,D.action)}function d(){return Math.random().toString(36).substr(2,l)}var h=T0(a,0,r.length-1),f=r.map(function(O){return typeof O=="string"?si(O,void 0,d()):si(O,void 0,O.key||d())}),m=Ri;function p(O,R){var Q="PUSH",$=si(O,R,d(),D.location);c.confirmTransitionTo($,Q,t,function(P){if(P){var q=D.index,S=q+1,Z=D.entries.slice(0);Z.length>S?Z.splice(S,Z.length-S,$):Z.push($),u({action:Q,location:$,index:S,entries:Z})}})}function w(O,R){var Q="REPLACE",$=si(O,R,d(),D.location);c.confirmTransitionTo($,Q,t,function(P){P&&(D.entries[D.index]=$,u({action:Q,location:$}))})}function y(O){var R=T0(D.index+O,0,D.entries.length-1),Q="POP",$=D.entries[R];c.confirmTransitionTo($,Q,t,function(P){P?u({action:Q,location:$,index:R}):u()})}function b(){y(-1)}function E(){y(1)}function _(O){var R=D.index+O;return R>=0&&R<D.entries.length}function k(O){return O===void 0&&(O=!1),c.setPrompt(O)}function B(O){return c.appendListener(O)}var D={length:f.length,action:"POP",location:f[h],index:h,entries:f,createHref:m,push:p,replace:w,go:y,goBack:b,goForward:E,canGo:_,block:k,listen:B};return D}var Yo={exports:{}},z_=Array.isArray||function(i){return Object.prototype.toString.call(i)=="[object Array]"},_d=z_;Yo.exports=M1;Yo.exports.parse=Kg;Yo.exports.compile=W_;Yo.exports.tokensToFunction=O1;Yo.exports.tokensToRegExp=D1;var V_=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Kg(i,e){for(var t=[],n=0,r=0,s="",a=e&&e.delimiter||"/",o;(o=V_.exec(i))!=null;){var l=o[0],c=o[1],u=o.index;if(s+=i.slice(r,u),r=u+l.length,c){s+=c[1];continue}var d=i[r],h=o[2],f=o[3],m=o[4],p=o[5],w=o[6],y=o[7];s&&(t.push(s),s="");var b=h!=null&&d!=null&&d!==h,E=w==="+"||w==="*",_=w==="?"||w==="*",k=o[2]||a,B=m||p;t.push({name:f||n++,prefix:h||"",delimiter:k,optional:_,repeat:E,partial:b,asterisk:!!y,pattern:B?G_(B):y?".*":"[^"+Ku(k)+"]+?"})}return r<i.length&&(s+=i.substr(r)),s&&t.push(s),t}function W_(i,e){return O1(Kg(i,e),e)}function H_(i){return encodeURI(i).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Q_(i){return encodeURI(i).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function O1(i,e){for(var t=new Array(i.length),n=0;n<i.length;n++)typeof i[n]=="object"&&(t[n]=new RegExp("^(?:"+i[n].pattern+")$",Jg(e)));return function(r,s){for(var a="",o=r||{},l=s||{},c=l.pretty?H_:encodeURIComponent,u=0;u<i.length;u++){var d=i[u];if(typeof d=="string"){a+=d;continue}var h=o[d.name],f;if(h==null)if(d.optional){d.partial&&(a+=d.prefix);continue}else throw new TypeError('Expected "'+d.name+'" to be defined');if(_d(h)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(h.length===0){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var m=0;m<h.length;m++){if(f=c(h[m]),!t[u].test(f))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(m===0?d.prefix:d.delimiter)+f}continue}if(f=d.asterisk?Q_(h):c(h),!t[u].test(f))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+f+'"');a+=d.prefix+f}return a}}function Ku(i){return i.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function G_(i){return i.replace(/([=!:$\/()])/g,"\\$1")}function Yg(i,e){return i.keys=e,i}function Jg(i){return i&&i.sensitive?"":"i"}function K_(i,e){var t=i.source.match(/\((?!\?)/g);if(t)for(var n=0;n<t.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Yg(i,e)}function Y_(i,e,t){for(var n=[],r=0;r<i.length;r++)n.push(M1(i[r],e,t).source);var s=new RegExp("(?:"+n.join("|")+")",Jg(t));return Yg(s,e)}function J_(i,e,t){return D1(Kg(i,t),e,t)}function D1(i,e,t){_d(e)||(t=e||t,e=[]),t=t||{};for(var n=t.strict,r=t.end!==!1,s="",a=0;a<i.length;a++){var o=i[a];if(typeof o=="string")s+=Ku(o);else{var l=Ku(o.prefix),c="(?:"+o.pattern+")";e.push(o),o.repeat&&(c+="(?:"+l+c+")*"),o.optional?o.partial?c=l+"("+c+")?":c="(?:"+l+"("+c+"))?":c=l+"("+c+")",s+=c}}var u=Ku(t.delimiter||"/"),d=s.slice(-u.length)===u;return n||(s=(d?s.slice(0,-u.length):s)+"(?:"+u+"(?=$))?"),r?s+="$":s+=n&&d?"":"(?="+u+"|$)",Yg(new RegExp("^"+s,Jg(t)),e)}function M1(i,e,t){return _d(e)||(t=e||t,e=[]),t=t||{},i instanceof RegExp?K_(i,e):_d(i)?Y_(i,e,t):J_(i,e,t)}var X_=Yo.exports;const L1=Ra(X_);var Ot={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sn=typeof Symbol=="function"&&Symbol.for,Xg=Sn?Symbol.for("react.element"):60103,Zg=Sn?Symbol.for("react.portal"):60106,gh=Sn?Symbol.for("react.fragment"):60107,yh=Sn?Symbol.for("react.strict_mode"):60108,bh=Sn?Symbol.for("react.profiler"):60114,vh=Sn?Symbol.for("react.provider"):60109,wh=Sn?Symbol.for("react.context"):60110,ey=Sn?Symbol.for("react.async_mode"):60111,Eh=Sn?Symbol.for("react.concurrent_mode"):60111,xh=Sn?Symbol.for("react.forward_ref"):60112,Th=Sn?Symbol.for("react.suspense"):60113,Z_=Sn?Symbol.for("react.suspense_list"):60120,Sh=Sn?Symbol.for("react.memo"):60115,Ch=Sn?Symbol.for("react.lazy"):60116,eR=Sn?Symbol.for("react.block"):60121,tR=Sn?Symbol.for("react.fundamental"):60117,nR=Sn?Symbol.for("react.responder"):60118,iR=Sn?Symbol.for("react.scope"):60119;function Si(i){if(typeof i=="object"&&i!==null){var e=i.$$typeof;switch(e){case Xg:switch(i=i.type,i){case ey:case Eh:case gh:case bh:case yh:case Th:return i;default:switch(i=i&&i.$$typeof,i){case wh:case xh:case Ch:case Sh:case vh:return i;default:return e}}case Zg:return e}}}function B1(i){return Si(i)===Eh}Ot.AsyncMode=ey;Ot.ConcurrentMode=Eh;Ot.ContextConsumer=wh;Ot.ContextProvider=vh;Ot.Element=Xg;Ot.ForwardRef=xh;Ot.Fragment=gh;Ot.Lazy=Ch;Ot.Memo=Sh;Ot.Portal=Zg;Ot.Profiler=bh;Ot.StrictMode=yh;Ot.Suspense=Th;Ot.isAsyncMode=function(i){return B1(i)||Si(i)===ey};Ot.isConcurrentMode=B1;Ot.isContextConsumer=function(i){return Si(i)===wh};Ot.isContextProvider=function(i){return Si(i)===vh};Ot.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===Xg};Ot.isForwardRef=function(i){return Si(i)===xh};Ot.isFragment=function(i){return Si(i)===gh};Ot.isLazy=function(i){return Si(i)===Ch};Ot.isMemo=function(i){return Si(i)===Sh};Ot.isPortal=function(i){return Si(i)===Zg};Ot.isProfiler=function(i){return Si(i)===bh};Ot.isStrictMode=function(i){return Si(i)===yh};Ot.isSuspense=function(i){return Si(i)===Th};Ot.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===gh||i===Eh||i===bh||i===yh||i===Th||i===Z_||typeof i=="object"&&i!==null&&(i.$$typeof===Ch||i.$$typeof===Sh||i.$$typeof===vh||i.$$typeof===wh||i.$$typeof===xh||i.$$typeof===tR||i.$$typeof===nR||i.$$typeof===iR||i.$$typeof===eR)};Ot.typeOf=Si;function q1(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}var F1={exports:{}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cn=typeof Symbol=="function"&&Symbol.for,ty=Cn?Symbol.for("react.element"):60103,ny=Cn?Symbol.for("react.portal"):60106,Ah=Cn?Symbol.for("react.fragment"):60107,Nh=Cn?Symbol.for("react.strict_mode"):60108,kh=Cn?Symbol.for("react.profiler"):60114,_h=Cn?Symbol.for("react.provider"):60109,Rh=Cn?Symbol.for("react.context"):60110,iy=Cn?Symbol.for("react.async_mode"):60111,Ph=Cn?Symbol.for("react.concurrent_mode"):60111,Ih=Cn?Symbol.for("react.forward_ref"):60112,$h=Cn?Symbol.for("react.suspense"):60113,rR=Cn?Symbol.for("react.suspense_list"):60120,Oh=Cn?Symbol.for("react.memo"):60115,Dh=Cn?Symbol.for("react.lazy"):60116,sR=Cn?Symbol.for("react.block"):60121,aR=Cn?Symbol.for("react.fundamental"):60117,oR=Cn?Symbol.for("react.responder"):60118,lR=Cn?Symbol.for("react.scope"):60119;function Ci(i){if(typeof i=="object"&&i!==null){var e=i.$$typeof;switch(e){case ty:switch(i=i.type,i){case iy:case Ph:case Ah:case kh:case Nh:case $h:return i;default:switch(i=i&&i.$$typeof,i){case Rh:case Ih:case Dh:case Oh:case _h:return i;default:return e}}case ny:return e}}}function j1(i){return Ci(i)===Ph}$t.AsyncMode=iy;$t.ConcurrentMode=Ph;$t.ContextConsumer=Rh;$t.ContextProvider=_h;$t.Element=ty;$t.ForwardRef=Ih;$t.Fragment=Ah;$t.Lazy=Dh;$t.Memo=Oh;$t.Portal=ny;$t.Profiler=kh;$t.StrictMode=Nh;$t.Suspense=$h;$t.isAsyncMode=function(i){return j1(i)||Ci(i)===iy};$t.isConcurrentMode=j1;$t.isContextConsumer=function(i){return Ci(i)===Rh};$t.isContextProvider=function(i){return Ci(i)===_h};$t.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===ty};$t.isForwardRef=function(i){return Ci(i)===Ih};$t.isFragment=function(i){return Ci(i)===Ah};$t.isLazy=function(i){return Ci(i)===Dh};$t.isMemo=function(i){return Ci(i)===Oh};$t.isPortal=function(i){return Ci(i)===ny};$t.isProfiler=function(i){return Ci(i)===kh};$t.isStrictMode=function(i){return Ci(i)===Nh};$t.isSuspense=function(i){return Ci(i)===$h};$t.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===Ah||i===Ph||i===kh||i===Nh||i===$h||i===rR||typeof i=="object"&&i!==null&&(i.$$typeof===Dh||i.$$typeof===Oh||i.$$typeof===_h||i.$$typeof===Rh||i.$$typeof===Ih||i.$$typeof===aR||i.$$typeof===oR||i.$$typeof===lR||i.$$typeof===sR)};$t.typeOf=Ci;F1.exports=$t;var cR=F1.exports,ry=cR,uR={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},dR={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},hR={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},U1={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sy={};sy[ry.ForwardRef]=hR;sy[ry.Memo]=U1;function S0(i){return ry.isMemo(i)?U1:sy[i.$$typeof]||uR}var fR=Object.defineProperty,pR=Object.getOwnPropertyNames,C0=Object.getOwnPropertySymbols,mR=Object.getOwnPropertyDescriptor,gR=Object.getPrototypeOf,A0=Object.prototype;function z1(i,e,t){if(typeof e!="string"){if(A0){var n=gR(e);n&&n!==A0&&z1(i,n,t)}var r=pR(e);C0&&(r=r.concat(C0(e)));for(var s=S0(i),a=S0(e),o=0;o<r.length;++o){var l=r[o];if(!dR[l]&&!(t&&t[l])&&!(a&&a[l])&&!(s&&s[l])){var c=mR(e,l);try{fR(i,l,c)}catch(u){}}}}return i}var yR=z1;const bR=Ra(yR);var Hf=1073741823,N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function vR(){var i="__global_unique_id__";return N0[i]=(N0[i]||0)+1}function wR(i,e){return i===e?i!==0||1/i===1/e:i!==i&&e!==e}function ER(i){var e=[];return{on:function(n){e.push(n)},off:function(n){e=e.filter(function(r){return r!==n})},get:function(){return i},set:function(n,r){i=n,e.forEach(function(s){return s(i,r)})}}}function xR(i){return Array.isArray(i)?i[0]:i}function TR(i,e){var t,n,r="__create-react-context-"+vR()+"__",s=function(o){Bs(l,o);function l(){for(var u,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return u=o.call.apply(o,[this].concat(h))||this,u.emitter=ER(u.props.value),u}var c=l.prototype;return c.getChildContext=function(){var d;return d={},d[r]=this.emitter,d},c.componentWillReceiveProps=function(d){if(this.props.value!==d.value){var h=this.props.value,f=d.value,m;wR(h,f)?m=0:(m=typeof e=="function"?e(h,f):Hf,m|=0,m!==0&&this.emitter.set(d.value,m))}},c.render=function(){return this.props.children},l}(Te.Component);s.childContextTypes=(t={},t[r]=g0.object.isRequired,t);var a=function(o){Bs(l,o);function l(){for(var u,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return u=o.call.apply(o,[this].concat(h))||this,u.observedBits=void 0,u.state={value:u.getValue()},u.onUpdate=function(m,p){var w=u.observedBits|0;w&p&&u.setState({value:u.getValue()})},u}var c=l.prototype;return c.componentWillReceiveProps=function(d){var h=d.observedBits;this.observedBits=h==null?Hf:h},c.componentDidMount=function(){this.context[r]&&this.context[r].on(this.onUpdate);var d=this.props.observedBits;this.observedBits=d==null?Hf:d},c.componentWillUnmount=function(){this.context[r]&&this.context[r].off(this.onUpdate)},c.getValue=function(){return this.context[r]?this.context[r].get():i},c.render=function(){return xR(this.props.children)(this.state.value)},l}(Te.Component);return a.contextTypes=(n={},n[r]=g0.object,n),{Provider:s,Consumer:a}}var SR=Te.createContext||TR,V1=function(e){var t=SR();return t.displayName=e,t},CR=V1("Router-History"),Uo=V1("Router"),_c=function(i){Bs(e,i),e.computeRootMatch=function(r){return{path:"/",url:"/",params:{},isExact:r==="/"}};function e(n){var r;return r=i.call(this,n)||this,r.state={location:n.history.location},r._isMounted=!1,r._pendingLocation=null,n.staticContext||(r.unlisten=n.history.listen(function(s){r._pendingLocation=s})),r}var t=e.prototype;return t.componentDidMount=function(){var r=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(s){r._isMounted&&r.setState({location:s})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},t.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},t.render=function(){return Te.createElement(Uo.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},Te.createElement(CR.Provider,{children:this.props.children||null,value:this.props.history}))},e}(Te.Component);Te.Component;var AR=function(i){Bs(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},t.componentDidUpdate=function(r){this.props.onUpdate&&this.props.onUpdate.call(this,this,r)},t.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},t.render=function(){return null},e}(Te.Component),Qf={},NR=1e4,k0=0;function kR(i){if(Qf[i])return Qf[i];var e=L1.compile(i);return k0<NR&&(Qf[i]=e,k0++),e}function _0(i,e){return i===void 0&&(i="/"),e===void 0&&(e={}),i==="/"?i:kR(i)(e,{pretty:!0})}function _R(i){var e=i.computedMatch,t=i.to,n=i.push,r=n===void 0?!1:n;return Te.createElement(Uo.Consumer,null,function(s){s||$a(!1);var a=s.history,o=s.staticContext,l=r?a.push:a.replace,c=si(e?typeof t=="string"?_0(t,e.params):ci({},t,{pathname:_0(t.pathname,e.params)}):t);return o?(l(c),null):Te.createElement(AR,{onMount:function(){l(c)},onUpdate:function(d,h){var f=si(h.to);$_(f,ci({},c,{key:f.key}))||l(c)},to:t})})}var R0={},RR=1e4,P0=0;function PR(i,e){var t=""+e.end+e.strict+e.sensitive,n=R0[t]||(R0[t]={});if(n[i])return n[i];var r=[],s=L1(i,r,e),a={regexp:s,keys:r};return P0<RR&&(n[i]=a,P0++),a}function Ta(i,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var t=e,n=t.path,r=t.exact,s=r===void 0?!1:r,a=t.strict,o=a===void 0?!1:a,l=t.sensitive,c=l===void 0?!1:l,u=[].concat(n);return u.reduce(function(d,h){if(!h&&h!=="")return null;if(d)return d;var f=PR(h,{end:s,strict:o,sensitive:c}),m=f.regexp,p=f.keys,w=m.exec(i);if(!w)return null;var y=w[0],b=w.slice(1),E=i===y;return s&&!E?null:{path:h,url:h==="/"&&y===""?"/":y,isExact:E,params:p.reduce(function(_,k,B){return _[k.name]=b[B],_},{})}},null)}function IR(i){return Te.Children.count(i)===0}var Ol=function(i){Bs(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var r=this;return Te.createElement(Uo.Consumer,null,function(s){s||$a(!1);var a=r.props.location||s.location,o=r.props.computedMatch?r.props.computedMatch:r.props.path?Ta(a.pathname,r.props):s.match,l=ci({},s,{location:a,match:o}),c=r.props,u=c.children,d=c.component,h=c.render;return Array.isArray(u)&&IR(u)&&(u=null),Te.createElement(Uo.Provider,{value:l},l.match?u?typeof u=="function"?u(l):u:d?Te.createElement(d,l):h?h(l):null:typeof u=="function"?u(l):null)})},e}(Te.Component);function ay(i){return i.charAt(0)==="/"?i:"/"+i}function $R(i,e){return i?ci({},e,{pathname:ay(i)+e.pathname}):e}function OR(i,e){if(!i)return e;var t=ay(i);return e.pathname.indexOf(t)!==0?e:ci({},e,{pathname:e.pathname.substr(t.length)})}function I0(i){return typeof i=="string"?i:Ri(i)}function Gf(i){return function(){$a(!1)}}function $0(){}Te.Component;Te.Component;function DR(i){var e="withRouter("+(i.displayName||i.name)+")",t=function(r){var s=r.wrappedComponentRef,a=q1(r,["wrappedComponentRef"]);return Te.createElement(Uo.Consumer,null,function(o){return o||$a(!1),Te.createElement(i,ci({},a,o,{ref:s}))})};return t.displayName=e,t.WrappedComponent=i,bR(t,i)}Te.useContext;const MR="modulepreload",LR=function(i){return"/"+i},O0={},ni=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=LR(s),s in O0)return;O0[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!n)for(let u=r.length-1;u>=0;u--){const d=r[u];if(d.href===s&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(s,'"]').concat(o)))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":MR,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error("Unable to preload CSS for ".concat(s))))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},eo={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,patchPseudoShadowDom:!1};let to,W1,Mh,H1=!1,Rd=!1,oy=!1,mi=!1,D0=null,Em=!1;const BR={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},qR=i=>{const e=new URL(i,Tn.$resourcesUrl$);return e.origin!==Pc.location.origin?e.href:e.pathname},Sa=(i,e="")=>()=>{},M0="http://www.w3.org/1999/xlink",L0={},FR="http://www.w3.org/2000/svg",jR="http://www.w3.org/1999/xhtml",UR=i=>i!=null,ly=i=>(i=typeof i,i==="object"||i==="function");function zR(i){var e,t,n;return(n=(t=(e=i.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&n!==void 0?n:void 0}const he=(i,e,...t)=>{let n=null,r=null,s=null,a=!1,o=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)n=d[h],Array.isArray(n)?c(n):n!=null&&typeof n!="boolean"&&((a=typeof i!="function"&&!ly(n))&&(n=String(n)),a&&o?l[l.length-1].$text$+=n:l.push(a?Pd(null,n):n),o=a)};if(c(t),e){e.key&&(r=e.key),e.name&&(s=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof i=="function")return i(e===null?{}:e,l,WR);const u=Pd(i,null);return u.$attrs$=e,l.length>0&&(u.$children$=l),u.$key$=r,u.$name$=s,u},Pd=(i,e)=>{const t={$flags$:0,$tag$:i,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},Nt={},VR=i=>i&&i.$tag$===Nt,WR={forEach:(i,e)=>i.map(B0).forEach(e),map:(i,e)=>i.map(B0).map(e).map(HR)},B0=i=>({vattrs:i.$attrs$,vchildren:i.$children$,vkey:i.$key$,vname:i.$name$,vtag:i.$tag$,vtext:i.$text$}),HR=i=>{if(typeof i.vtag=="function"){const t=Object.assign({},i.vattrs);return i.vkey&&(t.key=i.vkey),i.vname&&(t.name=i.vname),he(i.vtag,t,...i.vchildren||[])}const e=Pd(i.vtag,i.vtext);return e.$attrs$=i.vattrs,e.$children$=i.vchildren,e.$key$=i.vkey,e.$name$=i.vname,e},QR=i=>iT.map(e=>e(i)).find(e=>!!e),GR=i=>iT.push(i),KR=i=>Jo(i).$modeName$,YR=(i,e)=>i!=null&&!ly(i)?e&4?i==="false"?!1:i===""||!!i:e&2?parseFloat(i):e&1?String(i):i:i,JR=i=>i,tt=(i,e,t)=>{const n=JR(i);return{emit:r=>XR(n,e,{bubbles:!!(t&4),composed:!!(t&2),cancelable:!!(t&1),detail:r})}},XR=(i,e,t)=>{const n=Tn.ce(e,t);return i.dispatchEvent(n),n},q0=new WeakMap,ZR=(i,e,t)=>{let n=$d.get(i);CP&&t?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,$d.set(i,n)},eP=(i,e,t)=>{var n;const r=Q1(e,t),s=$d.get(r);if(i=i.nodeType===11?i:or,s)if(typeof s=="string"){i=i.head||i;let a=q0.get(i),o;if(a||q0.set(i,a=new Set),!a.has(r)){{o=or.createElement("style"),o.innerHTML=s;const l=(n=Tn.$nonce$)!==null&&n!==void 0?n:zR(or);l!=null&&o.setAttribute("nonce",l),i.insertBefore(o,i.querySelector("link"))}a&&a.add(r)}}else i.adoptedStyleSheets.includes(s)||(i.adoptedStyleSheets=[...i.adoptedStyleSheets,s]);return r},tP=i=>{const e=i.$cmpMeta$,t=i.$hostElement$,n=e.$flags$,r=Sa("attachStyles",e.$tagName$),s=eP(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,i.$modeName$);n&10&&(t["s-sc"]=s,t.classList.add(s+"-h"),n&2&&t.classList.add(s+"-s")),r()},Q1=(i,e)=>"sc-"+(e&&i.$flags$&32?i.$tagName$+"-"+e:i.$tagName$),F0=(i,e,t,n,r,s)=>{if(t!==n){let a=W0(i,e),o=e.toLowerCase();if(e==="class"){const l=i.classList,c=j0(t),u=j0(n);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in t)(!n||n[l]==null)&&(l.includes("-")?i.style.removeProperty(l):i.style[l]="");for(const l in n)(!t||n[l]!==t[l])&&(l.includes("-")?i.style.setProperty(l,n[l]):i.style[l]=n[l])}else if(e!=="key")if(e==="ref")n&&n(i);else if(!i.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):W0(Pc,o)?e=o.slice(2):e=o[2]+e.slice(3),t&&Tn.rel(i,e,t,!1),n&&Tn.ael(i,e,n,!1);else{const l=ly(n);if((a||l&&n!==null)&&!r)try{if(i.tagName.includes("-"))i[e]=n;else{const u=n==null?"":n;e==="list"?a=!1:(t==null||i[e]!=u)&&(i[e]=u)}}catch(u){}let c=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,c=!0),n==null||n===!1?(n!==!1||i.getAttribute(e)==="")&&(c?i.removeAttributeNS(M0,e):i.removeAttribute(e)):(!a||s&4||r)&&!l&&(n=n===!0?"":n,c?i.setAttributeNS(M0,e,n):i.setAttribute(e,n))}}},nP=/\s/,j0=i=>i?i.split(nP):[],G1=(i,e,t,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=i&&i.$attrs$||L0,a=e.$attrs$||L0;for(n in s)n in a||F0(r,n,s[n],void 0,t,e.$flags$);for(n in a)F0(r,n,s[n],a[n],t,e.$flags$)},Id=(i,e,t,n)=>{const r=e.$children$[t];let s=0,a,o,l;if(H1||(oy=!0,r.$tag$==="slot"&&(to&&n.classList.add(to+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=or.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=or.createTextNode("");else{if(mi||(mi=r.$tag$==="svg"),a=r.$elm$=or.createElementNS(mi?FR:jR,r.$flags$&2?"slot-fb":r.$tag$),mi&&r.$tag$==="foreignObject"&&(mi=!1),G1(null,r,mi),UR(to)&&a["s-si"]!==to&&a.classList.add(a["s-si"]=to),r.$children$)for(s=0;s<r.$children$.length;++s)o=Id(i,r,s,a),o&&a.appendChild(o);r.$tag$==="svg"?mi=!1:a.tagName==="foreignObject"&&(mi=!0)}return a["s-hn"]=Mh,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=W1,a["s-sn"]=r.$name$||"",l=i&&i.$children$&&i.$children$[t],l&&l.$tag$===r.$tag$&&i.$elm$&&mc(i.$elm$,!1)),a},mc=(i,e)=>{Tn.$flags$|=1;const t=i.childNodes;for(let n=t.length-1;n>=0;n--){const r=t[n];r["s-hn"]!==Mh&&r["s-ol"]&&(J1(r).insertBefore(r,cy(r)),r["s-ol"].remove(),r["s-ol"]=void 0,oy=!0),e&&mc(r,e)}Tn.$flags$&=-2},K1=(i,e,t,n,r,s)=>{let a=i["s-cr"]&&i["s-cr"].parentNode||i,o;for(a.shadowRoot&&a.tagName===Mh&&(a=a.shadowRoot);r<=s;++r)n[r]&&(o=Id(null,t,r,i),o&&(n[r].$elm$=o,a.insertBefore(o,cy(e))))},Y1=(i,e,t)=>{for(let n=e;n<=t;++n){const r=i[n];if(r){const s=r.$elm$;eT(r),s&&(Rd=!0,s["s-ol"]?s["s-ol"].remove():mc(s,!0),s.remove())}}},iP=(i,e,t,n)=>{let r=0,s=0,a=0,o=0,l=e.length-1,c=e[0],u=e[l],d=n.length-1,h=n[0],f=n[d],m,p;for(;r<=l&&s<=d;)if(c==null)c=e[++r];else if(u==null)u=e[--l];else if(h==null)h=n[++s];else if(f==null)f=n[--d];else if(mu(c,h))no(c,h),c=e[++r],h=n[++s];else if(mu(u,f))no(u,f),u=e[--l],f=n[--d];else if(mu(c,f))(c.$tag$==="slot"||f.$tag$==="slot")&&mc(c.$elm$.parentNode,!1),no(c,f),i.insertBefore(c.$elm$,u.$elm$.nextSibling),c=e[++r],f=n[--d];else if(mu(u,h))(c.$tag$==="slot"||f.$tag$==="slot")&&mc(u.$elm$.parentNode,!1),no(u,h),i.insertBefore(u.$elm$,c.$elm$),u=e[--l],h=n[++s];else{for(a=-1,o=r;o<=l;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===h.$key$){a=o;break}a>=0?(p=e[a],p.$tag$!==h.$tag$?m=Id(e&&e[s],t,a,i):(no(p,h),e[a]=void 0,m=p.$elm$),h=n[++s]):(m=Id(e&&e[s],t,s,i),h=n[++s]),m&&J1(c.$elm$).insertBefore(m,cy(c.$elm$))}r>l?K1(i,n[d+1]==null?null:n[d+1].$elm$,t,n,s,d):s>d&&Y1(e,r,l)},mu=(i,e)=>i.$tag$===e.$tag$?i.$tag$==="slot"?i.$name$===e.$name$:i.$key$===e.$key$:!1,cy=i=>i&&i["s-ol"]||i,J1=i=>(i["s-ol"]?i["s-ol"]:i).parentNode,no=(i,e)=>{const t=e.$elm$=i.$elm$,n=i.$children$,r=e.$children$,s=e.$tag$,a=e.$text$;let o;a===null?(mi=s==="svg"?!0:s==="foreignObject"?!1:mi,s==="slot"||G1(i,e,mi),n!==null&&r!==null?iP(t,n,e,r):r!==null?(i.$text$!==null&&(t.textContent=""),K1(t,null,e,r,0,r.length-1)):n!==null&&Y1(n,0,n.length-1),mi&&s==="svg"&&(mi=!1)):(o=t["s-cr"])?o.parentNode.textContent=a:i.$text$!==a&&(t.data=a)},X1=i=>{const e=i.childNodes;let t,n,r,s,a,o;for(n=0,r=e.length;n<r;n++)if(t=e[n],t.nodeType===1){if(t["s-sr"]){for(a=t["s-sn"],t.hidden=!1,s=0;s<r;s++)if(o=e[s].nodeType,e[s]["s-hn"]!==t["s-hn"]||a!==""){if(o===1&&a===e[s].getAttribute("slot")){t.hidden=!0;break}}else if(o===1||o===3&&e[s].textContent.trim()!==""){t.hidden=!0;break}}X1(t)}},Zi=[],Z1=i=>{let e,t,n,r,s,a,o=0;const l=i.childNodes,c=l.length;for(;o<c;o++){if(e=l[o],e["s-sr"]&&(t=e["s-cr"])&&t.parentNode)for(n=t.parentNode.childNodes,r=e["s-sn"],a=n.length-1;a>=0;a--)t=n[a],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==e["s-hn"]&&(U0(t,r)?(s=Zi.find(u=>u.$nodeToRelocate$===t),Rd=!0,t["s-sn"]=t["s-sn"]||r,s?s.$slotRefNode$=e:Zi.push({$slotRefNode$:e,$nodeToRelocate$:t}),t["s-sr"]&&Zi.map(u=>{U0(u.$nodeToRelocate$,t["s-sn"])&&(s=Zi.find(d=>d.$nodeToRelocate$===t),s&&!u.$slotRefNode$&&(u.$slotRefNode$=s.$slotRefNode$))})):Zi.some(u=>u.$nodeToRelocate$===t)||Zi.push({$nodeToRelocate$:t}));e.nodeType===1&&Z1(e)}},U0=(i,e)=>i.nodeType===1?i.getAttribute("slot")===null&&e===""||i.getAttribute("slot")===e:i["s-sn"]===e?!0:e==="",eT=i=>{i.$attrs$&&i.$attrs$.ref&&i.$attrs$.ref(null),i.$children$&&i.$children$.map(eT)},rP=(i,e,t=!1)=>{const n=i.$hostElement$,r=i.$cmpMeta$,s=i.$vnode$||Pd(null,null),a=VR(e)?e:he(null,null,e);if(Mh=n.tagName,r.$attrsToReflect$&&(a.$attrs$=a.$attrs$||{},r.$attrsToReflect$.map(([o,l])=>a.$attrs$[l]=n[o])),t&&a.$attrs$)for(const o of Object.keys(a.$attrs$))n.hasAttribute(o)&&!["key","ref","style","class"].includes(o)&&(a.$attrs$[o]=n[o]);a.$tag$=null,a.$flags$|=4,i.$vnode$=a,a.$elm$=s.$elm$=n.shadowRoot||n,to=n["s-sc"],W1=n["s-cr"],H1=(r.$flags$&1)!==0,Rd=!1,no(s,a);{if(Tn.$flags$|=1,oy){Z1(a.$elm$);let o,l,c,u,d,h,f=0;for(;f<Zi.length;f++)o=Zi[f],l=o.$nodeToRelocate$,l["s-ol"]||(c=or.createTextNode(""),c["s-nr"]=l,l.parentNode.insertBefore(l["s-ol"]=c,l));for(f=0;f<Zi.length;f++)if(o=Zi[f],l=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,d=o.$slotRefNode$.nextSibling,c=l["s-ol"];c=c.previousSibling;)if(h=c["s-nr"],h&&h["s-sn"]===l["s-sn"]&&u===h.parentNode&&(h=h.nextSibling,!h||!h["s-nr"])){d=h;break}(!d&&u!==l.parentNode||l.nextSibling!==d)&&l!==d&&(!l["s-hn"]&&l["s-ol"]&&(l["s-hn"]=l["s-ol"].parentNode.nodeName),u.insertBefore(l,d))}else l.nodeType===1&&(l.hidden=!0)}Rd&&X1(a.$elm$),Tn.$flags$&=-2,Zi.length=0}},sP=(i,e)=>{},uy=(i,e)=>(i.$flags$|=16,sP(i,i.$ancestorComponent$),_r(()=>aP(i,e))),aP=(i,e)=>{const t=i.$hostElement$,n=Sa("scheduleUpdate",i.$cmpMeta$.$tagName$),r=t;let s;return e?s=No(r,"componentWillLoad"):s=No(r,"componentWillUpdate"),s=z0(s,()=>No(r,"componentWillRender")),n(),z0(s,()=>lP(i,r,e))},z0=(i,e)=>oP(i)?i.then(e):e(),oP=i=>i instanceof Promise||i&&i.then&&typeof i.then=="function",lP=async(i,e,t)=>{const n=i.$hostElement$,r=Sa("update",i.$cmpMeta$.$tagName$);n["s-rc"],t&&tP(i);const s=Sa("render",i.$cmpMeta$.$tagName$);cP(i,e,n,t),s(),r(),uP(i)},cP=(i,e,t,n)=>{try{D0=e,e=e.render&&e.render(),i.$flags$&=-17,i.$flags$|=2,(eo.hasRenderFn||eo.reflect)&&(eo.vdomRender||eo.reflect)&&(eo.hydrateServerSide||rP(i,e,n))}catch(l){Rc(l,i.$hostElement$)}return D0=null,null},uP=i=>{const e=i.$cmpMeta$.$tagName$,t=i.$hostElement$,n=Sa("postUpdate",e),r=t;i.$ancestorComponent$,No(r,"componentDidRender"),i.$flags$&64?(No(r,"componentDidUpdate"),n()):(i.$flags$|=64,No(r,"componentDidLoad"),n())},qs=i=>{{const e=Jo(i),t=e.$hostElement$.isConnected;return t&&(e.$flags$&18)===2&&uy(e,!1),t}},No=(i,e,t)=>{if(i&&i[e])try{return i[e](t)}catch(n){Rc(n)}},dP=(i,e)=>Jo(i).$instanceValues$.get(e),hP=(i,e,t,n)=>{const r=Jo(i),s=i,a=r.$instanceValues$.get(e),o=r.$flags$,l=s;t=YR(t,n.$members$[e][0]);const c=Number.isNaN(a)&&Number.isNaN(t);if(t!==a&&!c){r.$instanceValues$.set(e,t);{if(n.$watchers$&&o&128){const d=n.$watchers$[e];d&&d.map(h=>{try{l[h](t,a,e)}catch(f){Rc(f,s)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(t,a,e)===!1)return;uy(r,!1)}}}},fP=(i,e,t)=>{if(e.$members$){i.watchers&&(e.$watchers$=i.watchers);const n=Object.entries(e.$members$),r=i.prototype;n.map(([s,[a]])=>{(a&31||a&32)&&Object.defineProperty(r,s,{get(){return dP(this,s)},set(o){hP(this,s,o,e)},configurable:!0,enumerable:!0})});{const s=new Map;r.attributeChangedCallback=function(a,o,l){Tn.jmp(()=>{const c=s.get(a);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(r.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},i.observedAttributes=n.filter(([a,o])=>o[0]&15).map(([a,o])=>{const l=o[1]||a;return s.set(l,a),o[0]&512&&e.$attrsToReflect$.push([a,l]),l})}}return i},pP=async(i,e,t,n,r)=>{if(!(e.$flags$&32)&&(e.$flags$|=32,r=i.constructor,customElements.whenDefined(t.$tagName$).then(()=>e.$flags$|=128),r.style)){let a=r.style;typeof a!="string"&&(a=a[e.$modeName$=QR(i)]);const o=Q1(t,e.$modeName$);if(!$d.has(o)){const l=Sa("registerStyles",t.$tagName$);ZR(o,a,!!(t.$flags$&1)),l()}}e.$ancestorComponent$,(()=>uy(e,!0))()},V0=i=>{},mP=i=>{if(!(Tn.$flags$&1)){const e=Jo(i),t=e.$cmpMeta$,n=Sa("connectedCallback",t.$tagName$);e.$flags$&1?(tT(i,e,t.$listeners$),e!=null&&e.$lazyInstance$?V0(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>V0(e.$lazyInstance$))):(e.$flags$|=1,t.$flags$&12&&gP(i),t.$members$&&Object.entries(t.$members$).map(([r,[s]])=>{if(s&31&&i.hasOwnProperty(r)){const a=i[r];delete i[r],i[r]=a}}),pP(i,e,t)),n()}},gP=i=>{const e=i["s-cr"]=or.createComment("");e["s-cn"]=!0,i.insertBefore(e,i.firstChild)},yP=async i=>{if(!(Tn.$flags$&1)){const e=Jo(i);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}},kt=(i,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=i.$watchers$,t.$attrsToReflect$=[];const n=i.prototype.connectedCallback,r=i.prototype.disconnectedCallback;return Object.assign(i.prototype,{__registerHost(){EP(this,t)},connectedCallback(){mP(this),n&&n.call(this)},disconnectedCallback(){yP(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)})}}),i.is=t.$tagName$,fP(i,t)},tT=(i,e,t,n)=>{t&&t.map(([r,s,a])=>{const o=vP(i,r),l=bP(e,a),c=wP(r);Tn.ael(o,s,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Tn.rel(o,s,l,c))})},bP=(i,e)=>t=>{try{eo.lazyLoad||i.$hostElement$[e](t)}catch(n){Rc(n)}},vP=(i,e)=>e&4?or:e&8?Pc:e&16?or.body:i,wP=i=>TP?{passive:(i&1)!==0,capture:(i&2)!==0}:(i&2)!==0,nT=new WeakMap,Jo=i=>nT.get(i),EP=(i,e)=>{const t={$flags$:0,$hostElement$:i,$cmpMeta$:e,$instanceValues$:new Map};return tT(i,t,e.$listeners$),nT.set(i,t)},W0=(i,e)=>e in i,Rc=(i,e)=>(0,console.error)(i,e),$d=new Map,iT=[],Pc=typeof window<"u"?window:{},or=Pc.document||{head:{}},_t=Pc.HTMLElement||class{},Tn={$flags$:0,$resourcesUrl$:"",jmp:i=>i(),raf:i=>requestAnimationFrame(i),ael:(i,e,t,n)=>i.addEventListener(e,t,n),rel:(i,e,t,n)=>i.removeEventListener(e,t,n),ce:(i,e)=>new CustomEvent(i,e)},xP=i=>{Object.assign(Tn,i)},TP=(()=>{let i=!1;try{or.addEventListener("e",null,Object.defineProperty({},"passive",{get(){i=!0}}))}catch(e){}return i})(),SP=i=>Promise.resolve(i),CP=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(i){}return!1})(),xm=[],rT=[],sT=(i,e)=>t=>{i.push(t),Em||(Em=!0,e&&Tn.$flags$&4?AP(Tm):Tn.raf(Tm))},H0=i=>{for(let e=0;e<i.length;e++)try{i[e](performance.now())}catch(t){Rc(t)}i.length=0},Tm=()=>{H0(xm),H0(rT),(Em=xm.length>0)&&Tn.raf(Tm)},AP=i=>SP().then(i),gc=sT(xm,!1),_r=sT(rT,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cn=typeof window<"u"?window:void 0,ko=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ca=(i,e)=>{i.componentOnReady?i.componentOnReady().then(t=>e(t)):yi(()=>e(i))},NP=i=>i.componentOnReady!==void 0,Ic=(i,e=[])=>{const t={};return e.forEach(n=>{i.hasAttribute(n)&&(i.getAttribute(n)!==null&&(t[n]=i.getAttribute(n)),i.removeAttribute(n))}),t},kP=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Oa=(i,e)=>{let t=kP;return e&&e.length>0&&(t=t.filter(n=>!e.includes(n))),Ic(i,t)},_P=(i,e,t,n)=>{var r;if(typeof window<"u"){const s=window,a=(r=s==null?void 0:s.Ionic)===null||r===void 0?void 0:r.config;if(a){const o=a.get("_ael");if(o)return o(i,e,t,n);if(a._ael)return a._ael(i,e,t,n)}}return i.addEventListener(e,t,n)},RP=(i,e,t,n)=>{var r;if(typeof window<"u"){const s=window,a=(r=s==null?void 0:s.Ionic)===null||r===void 0?void 0:r.config;if(a){const o=a.get("_rel");if(o)return o(i,e,t,n);if(a._rel)return a._rel(i,e,t,n)}}return i.removeEventListener(e,t,n)},PP=(i,e=i)=>i.shadowRoot||e,yi=i=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(i):typeof requestAnimationFrame=="function"?requestAnimationFrame(i):setTimeout(i),aT=i=>!!i.shadowRoot&&!!i.attachShadow,dy=i=>{const e=i.closest("ion-item");return e?e.querySelector("ion-label"):null},IP=i=>{if(i.focus(),i.classList.contains("ion-focusable")){const e=i.closest("ion-app");e&&e.setFocus([i])}},$P=(i,e)=>{let t;const n=i.getAttribute("aria-labelledby"),r=i.id;let s=n!==null&&n.trim()!==""?n:e+"-lbl",a=n!==null&&n.trim()!==""?document.getElementById(n):dy(i);return a?(n===null&&(a.id=s),t=a.textContent,a.setAttribute("aria-hidden","true")):r.trim()!==""&&(a=document.querySelector('label[for="'.concat(r,'"]')),a&&(a.id!==""?s=a.id:a.id=s="".concat(r,"-lbl"),t=a.textContent)),{label:a,labelId:s,labelText:t}},Q0=(i,e,t,n,r)=>{if(i||aT(e)){let s=e.querySelector("input.aux-input");s||(s=e.ownerDocument.createElement("input"),s.type="hidden",s.classList.add("aux-input"),e.appendChild(s)),s.disabled=r,s.name=t,s.value=n||""}},Er=(i,e,t)=>Math.max(i,Math.min(e,t)),on=(i,e)=>{if(!i){const t="ASSERT: "+e;console.error(t);debugger;throw new Error(t)}},d8=i=>i.timeStamp||Date.now(),h8=i=>{if(i){const e=i.changedTouches;if(e&&e.length>0){const t=e[0];return{x:t.clientX,y:t.clientY}}if(i.pageX!==void 0)return{x:i.pageX,y:i.pageY}}return{x:0,y:0}},G0=i=>{const e=document.dir==="rtl";switch(i){case"start":return e;case"end":return!e;default:throw new Error('"'.concat(i,'" is not a valid value for [side]. Use "start" or "end" instead.'))}},oT=(i,e)=>{const t=i._original||i;return{_original:i,emit:OP(t.emit.bind(t),e)}},OP=(i,e=0)=>{let t;return(...n)=>{clearTimeout(t),t=setTimeout(i,e,...n)}},lT=(i,e)=>{if(i!=null||(i={}),e!=null||(e={}),i===e)return!0;const t=Object.keys(i);if(t.length!==Object.keys(e).length)return!1;for(const n of t)if(!(n in e)||i[n]!==e[n])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Kf;const DP=i=>(i.forEach(e=>{for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];if(t==="easing"){const r="animation-timing-function";e[r]=n,delete e[t]}else{const r=MP(t);r!==t&&(e[r]=n,delete e[t])}}}),i),MP=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hy=i=>{if(Kf===void 0){const e=i.style.animationName!==void 0,t=i.style.webkitAnimationName!==void 0;Kf=!e&&t?"-webkit-":""}return Kf},Wt=(i,e,t)=>{const n=e.startsWith("animation")?hy(i):"";i.style.setProperty(n+e,t)},Wi=(i,e)=>{const t=e.startsWith("animation")?hy(i):"";i.style.removeProperty(t+e)},LP=(i,e)=>{let t;const n={passive:!0},r=()=>{t&&t()},s=a=>{i===a.target&&(r(),e(a))};return i&&(i.addEventListener("webkitAnimationEnd",s,n),i.addEventListener("animationend",s,n),t=()=>{i.removeEventListener("webkitAnimationEnd",s,n),i.removeEventListener("animationend",s,n)}),r},BP=(i=[])=>i.map(e=>{const t=e.offset,n=[];for(const r in e)e.hasOwnProperty(r)&&r!=="offset"&&n.push("".concat(r,": ").concat(e[r],";"));return"".concat(t*100,"% { ").concat(n.join(" ")," }")}).join(" "),K0=[],qP=i=>{let e=K0.indexOf(i);return e<0&&(e=K0.push(i)-1),"ion-animation-".concat(e)},FP=i=>{const e=i.getRootNode!==void 0?i.getRootNode():i;return e.head||e},jP=(i,e,t)=>{var n;const r=FP(t),s=hy(t),a=r.querySelector("#"+i);if(a)return a;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createElement("style");return o.id=i,o.textContent="@".concat(s,"keyframes ").concat(i," { ").concat(e," } @").concat(s,"keyframes ").concat(i,"-alt { ").concat(e," }"),r.appendChild(o),o},gu=(i=[],e)=>{if(e!==void 0){const t=Array.isArray(e)?e:[e];return[...i,...t]}return i},fn=i=>{let e,t,n,r,s,a,o=[],l=[],c=[],u=!1,d,h={},f=[],m=[],p={},w=0,y=!1,b=!1,E,_,k,B,D=!0,O=!1,R=!0,Q,$,P=!1;const q=i,S=[],Z=[],ve=[],re=[],de=[],ne=[],Y=[],F=[],H=[],_e=[],we=typeof AnimationEffect=="function"||cn!==void 0&&typeof cn.AnimationEffect=="function",ye=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&we,Ve=100,Ke=()=>_e,Ye=me=>(re.forEach(Be=>{Be.destroy(me)}),Xe(me),ve.length=0,re.length=0,o.length=0,Dt(),u=!1,R=!0,$),Xe=me=>{C(),me&&be()},ft=()=>{y=!1,b=!1,R=!0,_=void 0,k=void 0,B=void 0,w=0,O=!1,D=!0,P=!1},ct=()=>w!==0&&!P,Tt=(me,Be)=>((Be!=null&&Be.oneTimeCallback?Z:S).push({c:me,o:Be}),$),Dt=()=>(S.length=0,Z.length=0,$),C=()=>{if(ye)_e.forEach(me=>{me.cancel()}),_e.length=0;else{const me=ve.slice();yi(()=>{me.forEach(Be=>{Wi(Be,"animation-name"),Wi(Be,"animation-duration"),Wi(Be,"animation-timing-function"),Wi(Be,"animation-iteration-count"),Wi(Be,"animation-delay"),Wi(Be,"animation-play-state"),Wi(Be,"animation-fill-mode"),Wi(Be,"animation-direction")})})}},be=()=>{de.forEach(me=>{me!=null&&me.parentNode&&me.parentNode.removeChild(me)}),de.length=0},ge=me=>(ne.push(me),$),z=me=>(Y.push(me),$),L=me=>(F.push(me),$),ie=me=>(H.push(me),$),Ne=me=>(l=gu(l,me),$),Se=me=>(c=gu(c,me),$),ce=(me={})=>(h=me,$),$e=(me=[])=>{for(const Be of me)h[Be]="";return $},G=me=>(f=gu(f,me),$),X=me=>(m=gu(m,me),$),pe=(me={})=>(p=me,$),A=(me=[])=>{for(const Be of me)p[Be]="";return $},v=()=>s!==void 0?s:d?d.getFill():"both",x=()=>_!==void 0?_:a!==void 0?a:d?d.getDirection():"normal",M=()=>y?"linear":n!==void 0?n:d?d.getEasing():"linear",V=()=>b?0:k!==void 0?k:t!==void 0?t:d?d.getDuration():0,ee=()=>r!==void 0?r:d?d.getIterations():1,oe=()=>B!==void 0?B:e!==void 0?e:d?d.getDelay():0,Fe=()=>o,je=me=>(a=me,On(!0),$),it=me=>(s=me,On(!0),$),yt=me=>(e=me,On(!0),$),at=me=>(n=me,On(!0),$),zs=me=>(!ye&&me===0&&(me=1),t=me,On(!0),$),sn=me=>(r=me,On(!0),$),$r=me=>(d=me,$),Ce=me=>{if(me!=null)if(me.nodeType===1)ve.push(me);else if(me.length>=0)for(let Be=0;Be<me.length;Be++)ve.push(me[Be]);else console.error("Invalid addElement value");return $},di=me=>{if(me!=null)if(Array.isArray(me))for(const Be of me)Be.parent($),re.push(Be);else me.parent($),re.push(me);return $},bn=me=>{const Be=o!==me;return o=me,Be&&Or(o),$},Or=me=>{ye?Ke().forEach(Be=>{if(Be.effect.setKeyframes)Be.effect.setKeyframes(me);else{const Qe=new KeyframeEffect(Be.effect.target,me,Be.effect.getTiming());Be.effect=Qe}}):Ws()},Vs=()=>{ne.forEach(Mt=>Mt()),Y.forEach(Mt=>Mt());const me=l,Be=c,Qe=h;ve.forEach(Mt=>{const Gt=Mt.classList;me.forEach(Nn=>Gt.add(Nn)),Be.forEach(Nn=>Gt.remove(Nn));for(const Nn in Qe)Qe.hasOwnProperty(Nn)&&Wt(Mt,Nn,Qe[Nn])})},Fa=()=>{pr(),F.forEach(Gt=>Gt()),H.forEach(Gt=>Gt());const me=D?1:0,Be=f,Qe=m,Mt=p;ve.forEach(Gt=>{const Nn=Gt.classList;Be.forEach(Ai=>Nn.add(Ai)),Qe.forEach(Ai=>Nn.remove(Ai));for(const Ai in Mt)Mt.hasOwnProperty(Ai)&&Wt(Gt,Ai,Mt[Ai])}),S.forEach(Gt=>Gt.c(me,$)),Z.forEach(Gt=>Gt.c(me,$)),Z.length=0,R=!0,D&&(O=!0),D=!0},$n=()=>{w!==0&&(w--,w===0&&(Fa(),d&&d.animationFinish()))},Ws=(me=!0)=>{be();const Be=DP(o);ve.forEach(Qe=>{if(Be.length>0){const Mt=BP(Be);Q=i!==void 0?i:qP(Mt);const Gt=jP(Q,Mt,Qe);de.push(Gt),Wt(Qe,"animation-duration","".concat(V(),"ms")),Wt(Qe,"animation-timing-function",M()),Wt(Qe,"animation-delay","".concat(oe(),"ms")),Wt(Qe,"animation-fill-mode",v()),Wt(Qe,"animation-direction",x());const Nn=ee()===1/0?"infinite":ee().toString();Wt(Qe,"animation-iteration-count",Nn),Wt(Qe,"animation-play-state","paused"),me&&Wt(Qe,"animation-name","".concat(Gt.id,"-alt")),yi(()=>{Wt(Qe,"animation-name",Gt.id||null)})}})},ol=()=>{ve.forEach(me=>{const Be=me.animate(o,{id:q,delay:oe(),duration:V(),easing:M(),iterations:ee(),fill:v(),direction:x()});Be.pause(),_e.push(Be)}),_e.length>0&&(_e[0].onfinish=()=>{$n()})},Hs=(me=!0)=>{Vs(),o.length>0&&(ye?ol():Ws(me)),u=!0},Xn=me=>{if(me=Math.min(Math.max(me,0),.9999),ye)_e.forEach(Be=>{Be.currentTime=Be.effect.getComputedTiming().delay+V()*me,Be.pause()});else{const Be="-".concat(V()*me,"ms");ve.forEach(Qe=>{o.length>0&&(Wt(Qe,"animation-delay",Be),Wt(Qe,"animation-play-state","paused"))})}},Qs=me=>{_e.forEach(Be=>{Be.effect.updateTiming({delay:oe(),duration:V(),easing:M(),iterations:ee(),fill:v(),direction:x()})}),me!==void 0&&Xn(me)},os=(me=!0,Be)=>{yi(()=>{ve.forEach(Qe=>{Wt(Qe,"animation-name",Q||null),Wt(Qe,"animation-duration","".concat(V(),"ms")),Wt(Qe,"animation-timing-function",M()),Wt(Qe,"animation-delay",Be!==void 0?"-".concat(Be*V(),"ms"):"".concat(oe(),"ms")),Wt(Qe,"animation-fill-mode",v()||null),Wt(Qe,"animation-direction",x()||null);const Mt=ee()===1/0?"infinite":ee().toString();Wt(Qe,"animation-iteration-count",Mt),me&&Wt(Qe,"animation-name","".concat(Q,"-alt")),yi(()=>{Wt(Qe,"animation-name",Q||null)})})})},On=(me=!1,Be=!0,Qe)=>(me&&re.forEach(Mt=>{Mt.update(me,Be,Qe)}),ye?Qs(Qe):os(Be,Qe),$),ja=(me=!1,Be)=>(re.forEach(Qe=>{Qe.progressStart(me,Be)}),Ks(),y=me,u||Hs(),On(!1,!0,Be),$),ll=me=>(re.forEach(Be=>{Be.progressStep(me)}),Xn(me),$),Gs=(me,Be,Qe)=>(y=!1,re.forEach(Mt=>{Mt.progressEnd(me,Be,Qe)}),Qe!==void 0&&(k=Qe),O=!1,D=!0,me===0?(_=x()==="reverse"?"normal":"reverse",_==="reverse"&&(D=!1),ye?(On(),Xn(1-Be)):(B=(1-Be)*V()*-1,On(!1,!1))):me===1&&(ye?(On(),Xn(Be)):(B=Be*V()*-1,On(!1,!1))),me!==void 0&&(Tt(()=>{k=void 0,_=void 0,B=void 0},{oneTimeCallback:!0}),d||mr()),$),Ks=()=>{u&&(ye?_e.forEach(me=>{me.pause()}):ve.forEach(me=>{Wt(me,"animation-play-state","paused")}),P=!0)},ls=()=>(re.forEach(me=>{me.pause()}),Ks(),$),Zn=()=>{E=void 0,$n()},pr=()=>{E&&clearTimeout(E)},Ys=()=>{if(pr(),yi(()=>{ve.forEach(me=>{o.length>0&&Wt(me,"animation-play-state","running")})}),o.length===0||ve.length===0)$n();else{const me=oe()||0,Be=V()||0,Qe=ee()||1;isFinite(Qe)&&(E=setTimeout(Zn,me+Be*Qe+Ve)),LP(ve[0],()=>{pr(),yi(()=>{Ua(),yi($n)})})}},Ua=()=>{ve.forEach(me=>{Wi(me,"animation-duration"),Wi(me,"animation-delay"),Wi(me,"animation-play-state")})},za=()=>{_e.forEach(me=>{me.play()}),(o.length===0||ve.length===0)&&$n()},Va=()=>{ye?(Xn(0),Qs()):os()},mr=me=>new Promise(Be=>{me!=null&&me.sync&&(b=!0,Tt(()=>b=!1,{oneTimeCallback:!0})),u||Hs(),O&&(Va(),O=!1),R&&(w=re.length+1,R=!1),Tt(()=>Be(),{oneTimeCallback:!0}),re.forEach(Qe=>{Qe.play()}),ye?za():Ys(),P=!1}),Wa=()=>{re.forEach(me=>{me.stop()}),u&&(C(),u=!1),ft()},Dr=(me,Be)=>{const Qe=o[0];return Qe!==void 0&&(Qe.offset===void 0||Qe.offset===0)?Qe[me]=Be:o=[{offset:0,[me]:Be},...o],$};return $={parentAnimation:d,elements:ve,childAnimations:re,id:q,animationFinish:$n,from:Dr,to:(me,Be)=>{const Qe=o[o.length-1];return Qe!==void 0&&(Qe.offset===void 0||Qe.offset===1)?Qe[me]=Be:o=[...o,{offset:1,[me]:Be}],$},fromTo:(me,Be,Qe)=>Dr(me,Be).to(me,Qe),parent:$r,play:mr,pause:ls,stop:Wa,destroy:Ye,keyframes:bn,addAnimation:di,addElement:Ce,update:On,fill:it,direction:je,iterations:sn,duration:zs,easing:at,delay:yt,getWebAnimations:Ke,getKeyframes:Fe,getFill:v,getDirection:x,getDelay:oe,getIterations:ee,getEasing:M,getDuration:V,afterAddRead:L,afterAddWrite:ie,afterClearStyles:A,afterStyles:pe,afterRemoveClass:X,afterAddClass:G,beforeAddRead:ge,beforeAddWrite:z,beforeClearStyles:$e,beforeStyles:ce,beforeRemoveClass:Se,beforeAddClass:Ne,onFinish:Tt,isRunning:ct,progressStart:ja,progressStep:ll,progressEnd:Gs}},UP="ionViewWillEnter",zP="ionViewDidEnter",cT="ionViewWillLeave",uT="ionViewDidLeave",Yf="ionViewWillUnload",VP=()=>ni(()=>import("./ios.transition-2a9c8cd3.js"),[]),WP=()=>ni(()=>import("./md.transition-4b6a303d.js"),[]),dT=i=>new Promise((e,t)=>{_r(()=>{HP(i),QP(i).then(n=>{n.animation&&n.animation.destroy(),Y0(i),e(n)},n=>{Y0(i),t(n)})})}),HP=i=>{const e=i.enteringEl,t=i.leavingEl;ZP(e,t,i.direction),i.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),Cm(e,!1),e.style.setProperty("pointer-events","none"),t&&(Cm(t,!1),t.style.setProperty("pointer-events","none"))},QP=async i=>{const e=await GP(i);return e&&BR.isBrowser?KP(e,i):YP(i)},Y0=i=>{const e=i.enteringEl,t=i.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),t!==void 0&&(t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"))},GP=async i=>!i.leavingEl||!i.animated||i.duration===0?void 0:i.animationBuilder?i.animationBuilder:i.mode==="ios"?(await VP()).iosTransitionAnimation:(await WP()).mdTransitionAnimation,KP=async(i,e)=>{await hT(e,!0);const t=i(e.baseEl,e);fT(e.enteringEl,e.leavingEl);const n=await XP(t,e);return e.progressCallback&&e.progressCallback(void 0),n&&pT(e.enteringEl,e.leavingEl),{hasCompleted:n,animation:t}},YP=async i=>{const e=i.enteringEl,t=i.leavingEl;return await hT(i,!1),fT(e,t),pT(e,t),{hasCompleted:!0}},hT=async(i,e)=>{(i.deepWait!==void 0?i.deepWait:e)&&await Promise.all([Sm(i.enteringEl),Sm(i.leavingEl)]),await JP(i.viewIsReady,i.enteringEl)},JP=async(i,e)=>{i&&await i(e)},XP=(i,e)=>{const t=e.progressCallback,n=new Promise(r=>{i.onFinish(s=>r(s===1))});return t?(i.progressStart(!0),t(i)):i.play(),n},fT=(i,e)=>{zr(e,cT),zr(i,UP)},pT=(i,e)=>{zr(i,zP),zr(e,uT)},zr=(i,e)=>{if(i){const t=new CustomEvent(e,{bubbles:!1,cancelable:!1});i.dispatchEvent(t)}},Sm=async i=>{const e=i;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(n=>yi(n));return}await Promise.all(Array.from(e.children).map(Sm))}},Cm=(i,e)=>{e?(i.setAttribute("aria-hidden","true"),i.classList.add("ion-page-hidden")):(i.hidden=!1,i.removeAttribute("aria-hidden"),i.classList.remove("ion-page-hidden"))},ZP=(i,e,t)=>{i!==void 0&&(i.style.zIndex=t==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},f8=i=>{if(i.classList.contains("ion-page"))return i;const e=i.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||i};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yc=(i,e,t,n,r)=>tI(i[1],e[1],t[1],n[1],r).map(s=>eI(i[0],e[0],t[0],n[0],s)),eI=(i,e,t,n,r)=>{const s=3*e*Math.pow(r-1,2),a=-3*t*r+3*t+n*r,o=i*Math.pow(r-1,3);return r*(s+r*a)-o},tI=(i,e,t,n,r)=>(i-=r,e-=r,t-=r,n-=r,iI(n-3*t+3*e-i,3*t-6*e+3*i,3*e-3*i,i).filter(a=>a>=0&&a<=1)),nI=(i,e,t)=>{const n=e*e-4*i*t;return n<0?[]:[(-e+Math.sqrt(n))/(2*i),(-e-Math.sqrt(n))/(2*i)]},iI=(i,e,t,n)=>{if(i===0)return nI(e,t,n);e/=i,t/=i,n/=i;const r=(3*t-e*e)/3,s=(2*e*e*e-9*e*t+27*n)/27;if(r===0)return[Math.pow(-s,1/3)];if(s===0)return[Math.sqrt(-r),-Math.sqrt(-r)];const a=Math.pow(s/2,2)+Math.pow(r/3,3);if(a===0)return[Math.pow(s/2,1/2)-e/3];if(a>0)return[Math.pow(-(s/2)+Math.sqrt(a),1/3)-Math.pow(s/2+Math.sqrt(a),1/3)-e/3];const o=Math.sqrt(Math.pow(-(r/3),3)),l=Math.acos(-(s/(2*Math.sqrt(Math.pow(-(r/3),3))))),c=2*Math.pow(o,1/3);return[c*Math.cos(l/3)-e/3,c*Math.cos((l+2*Math.PI)/3)-e/3,c*Math.cos((l+4*Math.PI)/3)-e/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class rI{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){var t;return new sI(this,this.newID(),e.name,(t=e.priority)!==null&&t!==void 0?t:0,!!e.disableScroll)}createBlocker(e={}){return new aI(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,n){return this.canStart(e)?(this.requestedStart.set(t,n),!0):(this.requestedStart.delete(t),!1)}capture(e,t,n){if(!this.start(e,t,n))return!1;const r=this.requestedStart;let s=-1e4;if(r.forEach(a=>{s=Math.max(s,a)}),s===n){this.capturedId=t,r.clear();const a=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(a),!0}return r.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let n=this.disabledGestures.get(e);n===void 0&&(n=new Set,this.disabledGestures.set(e,n)),n.add(t)}enableGesture(e,t){const n=this.disabledGestures.get(e);n!==void 0&&n.delete(t)}disableScroll(e){this.disabledScroll.add(e),this.disabledScroll.size===1&&document.body.classList.add(J0)}enableScroll(e){this.disabledScroll.delete(e),this.disabledScroll.size===0&&document.body.classList.remove(J0)}canStart(e){return!(this.capturedId!==void 0||this.isDisabled(e))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}}class sI{constructor(e,t,n,r,s){this.id=t,this.name=n,this.disableScroll=s,this.priority=r*1e6+t,this.ctrl=e}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class aI{constructor(e,t,n,r){this.id=t,this.disable=n,this.disableScroll=r,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const J0="backdrop-no-scroll",Lh=new rI;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ea=(i,e,t,n)=>{const r=oI(i)?{capture:!!n.capture,passive:!!n.passive}:!!n.capture;let s,a;return i.__zone_symbol__addEventListener?(s="__zone_symbol__addEventListener",a="__zone_symbol__removeEventListener"):(s="addEventListener",a="removeEventListener"),i[s](e,t,r),()=>{i[a](e,t,r)}},oI=i=>{if(yu===void 0)try{const e=Object.defineProperty({},"passive",{get:()=>{yu=!0}});i.addEventListener("optsTest",()=>{},e)}catch(e){yu=!1}return!!yu};let yu;const lI=2e3,cI=(i,e,t,n,r)=>{let s,a,o,l,c,u,d,h=0;const f=B=>{h=Date.now()+lI,e(B)&&(!a&&t&&(a=ea(i,"touchmove",t,r)),o||(o=ea(B.target,"touchend",p,r)),l||(l=ea(B.target,"touchcancel",p,r)))},m=B=>{h>Date.now()||e(B)&&(!u&&t&&(u=ea(X0(i),"mousemove",t,r)),d||(d=ea(X0(i),"mouseup",w,r)))},p=B=>{y(),n&&n(B)},w=B=>{b(),n&&n(B)},y=()=>{a&&a(),o&&o(),l&&l(),a=o=l=void 0},b=()=>{u&&u(),d&&d(),u=d=void 0},E=()=>{y(),b()},_=(B=!0)=>{B?(s||(s=ea(i,"touchstart",f,r)),c||(c=ea(i,"mousedown",m,r))):(s&&s(),c&&c(),s=c=void 0,E())};return{enable:_,stop:E,destroy:()=>{_(!1),n=t=e=void 0}}},X0=i=>i instanceof Document?i:i.ownerDocument,uI=(i,e,t)=>{const n=t*(Math.PI/180),r=i==="x",s=Math.cos(n),a=e*e;let o=0,l=0,c=!1,u=0;return{start(d,h){o=d,l=h,u=0,c=!0},detect(d,h){if(!c)return!1;const f=d-o,m=h-l,p=f*f+m*m;if(p<a)return!1;const w=Math.sqrt(p),y=(r?f:m)/w;return y>s?u=1:y<-s?u=-1:u=0,c=!1,!0},isGesture(){return u!==0},getDirection(){return u}}},mT=i=>{let e=!1,t=!1,n=!0,r=!1;const s=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},i),a=s.canStart,o=s.onWillStart,l=s.onStart,c=s.onEnd,u=s.notCaptured,d=s.onMove,h=s.threshold,f=s.passive,m=s.blurOnStart,p={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},w=uI(s.direction,s.threshold,s.maxAngle),y=Lh.createGesture({name:i.gestureName,priority:i.gesturePriority,disableScroll:i.disableScroll}),b=P=>{const q=yT(P);return t||!n||(gT(P,p),p.startX=p.currentX,p.startY=p.currentY,p.startTime=p.currentTime=q,p.velocityX=p.velocityY=p.deltaX=p.deltaY=0,p.event=P,a&&a(p)===!1)||(y.release(),!y.start())?!1:(t=!0,h===0?k():(w.start(p.startX,p.startY),!0))},E=P=>{if(e){!r&&n&&(r=!0,Jf(p,P),requestAnimationFrame(_));return}Jf(p,P),w.detect(p.currentX,p.currentY)&&(!w.isGesture()||!k())&&$()},_=()=>{e&&(r=!1,d&&d(p))},k=()=>y.capture()?(e=!0,n=!1,p.startX=p.currentX,p.startY=p.currentY,p.startTime=p.currentTime,o?o(p).then(D):D(),!0):!1,B=()=>{if(typeof document<"u"){const P=document.activeElement;P!=null&&P.blur&&P.blur()}},D=()=>{m&&B(),l&&l(p),n=!0},O=()=>{e=!1,t=!1,r=!1,n=!0,y.release()},R=P=>{const q=e,S=n;if(O(),!!S){if(Jf(p,P),q){c&&c(p);return}u&&u(p)}},Q=cI(s.el,b,E,R,{capture:!1,passive:f}),$=()=>{O(),Q.stop(),u&&u(p)};return{enable(P=!0){P||(e&&R(void 0),O()),Q.enable(P)},destroy(){y.destroy(),Q.destroy()}}},Jf=(i,e)=>{if(!e)return;const t=i.currentX,n=i.currentY,r=i.currentTime;gT(e,i);const s=i.currentX,a=i.currentY,l=(i.currentTime=yT(e))-r;if(l>0&&l<100){const c=(s-t)/l,u=(a-n)/l;i.velocityX=c*.7+i.velocityX*.3,i.velocityY=u*.7+i.velocityY*.3}i.deltaX=s-i.startX,i.deltaY=a-i.startY,i.event=e},gT=(i,e)=>{let t=0,n=0;if(i){const r=i.changedTouches;if(r&&r.length>0){const s=r[0];t=s.clientX,n=s.clientY}else i.pageX!==void 0&&(t=i.pageX,n=i.pageY)}e.currentX=t,e.currentY=n},yT=i=>i.timeStamp||Date.now(),bT=Object.freeze(Object.defineProperty({__proto__:null,GESTURE_CONTROLLER:Lh,createGesture:mT},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class dI{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const n=this.m.get(e);return n!==void 0?n:t}getBoolean(e,t=!1){const n=this.m.get(e);return n===void 0?t:typeof n=="string"?n==="true":!!n}getNumber(e,t){const n=parseFloat(this.m.get(e));return isNaN(n)?t!==void 0?t:NaN:n}set(e,t){this.m.set(e,t)}}const Et=new dI,hI=i=>{try{const e=i.sessionStorage.getItem(vT);return e!==null?JSON.parse(e):{}}catch(e){return{}}},fI=(i,e)=>{try{i.sessionStorage.setItem(vT,JSON.stringify(e))}catch(t){return}},pI=i=>{const e={};return i.location.search.slice(1).split("&").map(t=>t.split("=")).map(([t,n])=>[decodeURIComponent(t),decodeURIComponent(n)]).filter(([t])=>mI(t,Z0)).map(([t,n])=>[t.slice(Z0.length),n]).forEach(([t,n])=>{e[t]=n}),e},mI=(i,e)=>i.substr(0,e.length)===e,Z0="ionic:",vT="ionic-persist-config",gI=i=>wT(i),As=(i,e)=>(typeof i=="string"&&(e=i,i=void 0),gI(i).includes(e)),wT=(i=window)=>{if(typeof i>"u")return[];i.Ionic=i.Ionic||{};let e=i.Ionic.platforms;return e==null&&(e=i.Ionic.platforms=yI(i),e.forEach(t=>i.document.documentElement.classList.add("plt-".concat(t)))),e},yI=i=>{const e=Et.get("platform");return Object.keys(ev).filter(t=>{const n=e==null?void 0:e[t];return typeof n=="function"?n(i):ev[t](i)})},bI=i=>Bh(i)&&!xT(i),fy=i=>!!(Aa(i,/iPad/i)||Aa(i,/Macintosh/i)&&Bh(i)),vI=i=>Aa(i,/iPhone/i),wI=i=>Aa(i,/iPhone|iPod/i)||fy(i),ET=i=>Aa(i,/android|sink/i),EI=i=>ET(i)&&!Aa(i,/mobile/i),xI=i=>{const e=i.innerWidth,t=i.innerHeight,n=Math.min(e,t),r=Math.max(e,t);return n>390&&n<520&&r>620&&r<800},TI=i=>{const e=i.innerWidth,t=i.innerHeight,n=Math.min(e,t),r=Math.max(e,t);return fy(i)||EI(i)||n>460&&n<820&&r>780&&r<1400},Bh=i=>NI(i,"(any-pointer:coarse)"),SI=i=>!Bh(i),xT=i=>TT(i)||ST(i),TT=i=>!!(i.cordova||i.phonegap||i.PhoneGap),ST=i=>{const e=i.Capacitor;return!!(e!=null&&e.isNative)},CI=i=>Aa(i,/electron/i),AI=i=>{var e;return!!(!((e=i.matchMedia)===null||e===void 0)&&e.call(i,"(display-mode: standalone)").matches||i.navigator.standalone)},Aa=(i,e)=>e.test(i.navigator.userAgent),NI=(i,e)=>{var t;return(t=i.matchMedia)===null||t===void 0?void 0:t.call(i,e).matches},ev={ipad:fy,iphone:vI,ios:wI,android:ET,phablet:xI,tablet:TI,cordova:TT,capacitor:ST,electron:CI,pwa:AI,mobile:Bh,mobileweb:bI,desktop:SI,hybrid:xT};let io;const nt=i=>i&&KR(i)||io,kI=(i={})=>{if(typeof window>"u")return;const e=window.document,t=window,n=t.Ionic=t.Ionic||{},r={};i._ael&&(r.ael=i._ael),i._rel&&(r.rel=i._rel),i._ce&&(r.ce=i._ce),xP(r);const s=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hI(t)),{persistConfig:!1}),n.config),pI(t)),i);Et.reset(s),Et.getBoolean("persistConfig")&&fI(t,s),wT(t),n.config=Et,n.mode=io=Et.get("mode",e.documentElement.getAttribute("mode")||(As(t,"ios")?"ios":"md")),Et.set("mode",io),e.documentElement.setAttribute("mode",io),e.documentElement.classList.add(io),Et.getBoolean("_testing")&&Et.set("animated",!1);const a=l=>{var c;return(c=l.tagName)===null||c===void 0?void 0:c.startsWith("ION-")},o=l=>["ios","md"].includes(l);GR(l=>{for(;l;){const c=l.mode||l.getAttribute("mode");if(c){if(o(c))return c;a(l)&&console.warn('Invalid ionic mode: "'+c+'", expected: "ios" or "md"')}l=l.parentElement}return io})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _I=i=>{try{if(i instanceof $I)return i.value;if(!RI()||typeof i!="string"||i==="")return i;if(i.includes("onload="))return"";const e=document.createDocumentFragment(),t=document.createElement("div");e.appendChild(t),t.innerHTML=i,II.forEach(a=>{const o=e.querySelectorAll(a);for(let l=o.length-1;l>=0;l--){const c=o[l];c.parentNode?c.parentNode.removeChild(c):e.removeChild(c);const u=Nm(c);for(let d=0;d<u.length;d++)Am(u[d])}});const n=Nm(e);for(let a=0;a<n.length;a++)Am(n[a]);const r=document.createElement("div");r.appendChild(e);const s=r.querySelector("div");return s!==null?s.innerHTML:r.innerHTML}catch(e){return console.error(e),""}},Am=i=>{if(i.nodeType&&i.nodeType!==1)return;if(typeof NamedNodeMap<"u"&&!(i.attributes instanceof NamedNodeMap)){i.remove();return}for(let t=i.attributes.length-1;t>=0;t--){const n=i.attributes.item(t),r=n.name;if(!PI.includes(r.toLowerCase())){i.removeAttribute(r);continue}const s=n.value,a=i[r];(s!=null&&s.toLowerCase().includes("javascript:")||a!=null&&a.toLowerCase().includes("javascript:"))&&i.removeAttribute(r)}const e=Nm(i);for(let t=0;t<e.length;t++)Am(e[t])},Nm=i=>i.children!=null?i.children:i.childNodes,RI=()=>{var i;const e=window,t=(i=e==null?void 0:e.Ionic)===null||i===void 0?void 0:i.config;return t?t.get?t.get("sanitizerEnabled",!0):t.sanitizerEnabled===!0||t.sanitizerEnabled===void 0:!0},PI=["class","id","href","src","name","slot"],II=["script","style","iframe","meta","link","object","embed"];class $I{constructor(e){this.value=e}}const OI=!1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const DI=()=>{document.addEventListener("backbutton",()=>{})},MI=()=>{const i=document;let e=!1;i.addEventListener("backbutton",()=>{if(e)return;let t=0,n=[];const r=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(o,l){n.push({priority:o,handler:l,id:t++})}}});i.dispatchEvent(r);const s=async o=>{try{if(o!=null&&o.handler){const l=o.handler(a);l!=null&&await l}}catch(l){console.error(l)}},a=()=>{if(n.length>0){let o={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};n.forEach(l=>{l.priority>=o.priority&&(o=l)}),e=!0,n=n.filter(l=>l.id!==o.id),s(o).then(()=>e=!1)}};a()})},CT=100,AT=99,LI=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:AT,OVERLAY_BACK_BUTTON_PRIORITY:CT,blockHardwareBackButton:DI,startHardwareBackButton:MI},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const py=i=>fn().duration(i?400:300),BI=i=>{let e,t;const n=i.width+8,r=fn(),s=fn();i.isEndSide?(e=n+"px",t="0px"):(e=-n+"px",t="0px"),r.addElement(i.menuInnerEl).fromTo("transform","translateX(".concat(e,")"),"translateX(".concat(t,")"));const o=nt(i)==="ios",l=o?.2:.25;return s.addElement(i.backdropEl).fromTo("opacity",.01,l),py(o).addAnimation([r,s])},qI=i=>{let e,t;const n=nt(i),r=i.width;i.isEndSide?(e=-r+"px",t=r+"px"):(e=r+"px",t=-r+"px");const s=fn().addElement(i.menuInnerEl).fromTo("transform","translateX(".concat(t,")"),"translateX(0px)"),a=fn().addElement(i.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(e,")")),o=fn().addElement(i.backdropEl).fromTo("opacity",.01,.32);return py(n==="ios").addAnimation([s,a,o])},FI=i=>{const e=nt(i),t=i.width*(i.isEndSide?-1:1)+"px",n=fn().addElement(i.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(t,")"));return py(e==="ios").addAnimation(n)},jI=()=>{const i=new Map,e=[],t=async O=>{const R=await c(O);return R?R.open():!1},n=async O=>{const R=await(O!==void 0?c(O):u());return R!==void 0?R.close():!1},r=async O=>{const R=await c(O);return R?R.toggle():!1},s=async(O,R)=>{const Q=await c(R);return Q&&(Q.disabled=!O),Q},a=async(O,R)=>{const Q=await c(R);return Q&&(Q.swipeGesture=O),Q},o=async O=>{if(O!=null){const R=await c(O);return R!==void 0&&R.isOpen()}else return await u()!==void 0},l=async O=>{const R=await c(O);return R?!R.disabled:!1},c=async O=>{if(await D(),O==="start"||O==="end"){const Q=B($=>$.side===O&&!$.disabled);return Q||B($=>$.side===O)}else if(O!=null)return B(Q=>Q.menuId===O);const R=B(Q=>!Q.disabled);return R||(e.length>0?e[0].el:void 0)},u=async()=>(await D(),E()),d=async()=>(await D(),_()),h=async()=>(await D(),k()),f=(O,R)=>{i.set(O,R)},m=O=>{e.indexOf(O)<0&&(O.disabled||w(O),e.push(O))},p=O=>{const R=e.indexOf(O);R>-1&&e.splice(R,1)},w=O=>{const R=O.side;e.filter(Q=>Q.side===R&&Q!==O).forEach(Q=>Q.disabled=!0)},y=async(O,R,Q)=>{if(k())return!1;if(R){const $=await u();$&&O.el!==$&&await $.setOpen(!1,!1)}return O._setOpen(R,Q)},b=(O,R)=>{const Q=i.get(O);if(!Q)throw new Error("animation not registered");return Q(R)},E=()=>B(O=>O._isOpen),_=()=>e.map(O=>O.el),k=()=>e.some(O=>O.isAnimating),B=O=>{const R=e.find(O);if(R!==void 0)return R.el},D=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(O=>new Promise(R=>Ca(O,R))));return f("reveal",FI),f("push",qI),f("overlay",BI),typeof document<"u"&&document.addEventListener("ionBackButton",O=>{const R=E();R&&O.detail.register(AT,()=>R.close())}),{registerAnimation:f,get:c,getMenus:d,getOpen:u,isEnabled:l,swipeGesture:a,isAnimating:h,isOpen:o,enable:s,toggle:r,close:n,open:t,_getOpenSync:E,_createAnimation:b,_register:m,_unregister:p,_setOpen:y,_setActiveMenu:w}},Ur=jI();/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const NT=async(i,e,t,n,r,s)=>{var a;if(i)return i.attachViewToDom(e,t,r,n);if(!s&&typeof t!="string"&&!(t instanceof HTMLElement))throw new Error("framework delegate is missing");const o=typeof t=="string"?(a=e.ownerDocument)===null||a===void 0?void 0:a.createElement(t):t;return n&&n.forEach(l=>o.classList.add(l)),r&&Object.assign(o,r),e.appendChild(o),await new Promise(l=>Ca(o,l)),o},UI=(i,e)=>{if(e){if(i){const t=e.parentElement;return i.removeViewFromDom(t,e)}e.remove()}return Promise.resolve()},zI=()=>{let i,e;return{attachViewToDom:async(r,s,a={},o=[])=>{var l,c;if(i=r,s){const d=typeof s=="string"?(l=i.ownerDocument)===null||l===void 0?void 0:l.createElement(s):s;o.forEach(h=>d.classList.add(h)),Object.assign(d,a),i.appendChild(d),await new Promise(h=>Ca(d,h))}else if(i.children.length>0&&(i.tagName==="ION-MODAL"||i.tagName==="ION-POPOVER")&&!i.children[0].classList.contains("ion-delegate-host")){const h=(c=i.ownerDocument)===null||c===void 0?void 0:c.createElement("div");h.classList.add("ion-delegate-host"),o.forEach(f=>h.classList.add(f)),h.append(...i.children),i.appendChild(h)}const u=document.querySelector("ion-app")||document.body;return e=document.createComment("ionic teleport"),i.parentNode.insertBefore(e,i),u.appendChild(i),i},removeViewFromDom:()=>(i&&e&&(e.parentNode.insertBefore(i,e),e.remove()),Promise.resolve())}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qn=(i,...e)=>console.warn("[Ionic Warning]: ".concat(i),...e),kT=(i,...e)=>console.error("[Ionic Error]: ".concat(i),...e),VI=(i,...e)=>console.error("<".concat(i.tagName.toLowerCase(),"> must be used inside ").concat(e.join(" or "),"."));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let km=0,WI=0;const _m=new WeakMap,HI=i=>{typeof document<"u"&&YI(document);const e=km++;i.overlayIndex=e},QI=i=>(i.hasAttribute("id")||(i.id="ion-overlay-".concat(++WI)),i.id),bc='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',tv=(i,e)=>{let t=i.querySelector(bc);const n=t==null?void 0:t.shadowRoot;n&&(t=n.querySelector(bc)||t),t?IP(t):e.focus()},GI=i=>i.classList.contains("overlay-hidden"),nv=(i,e)=>{const t=Array.from(i.querySelectorAll(bc));let n=t.length>0?t[t.length-1]:null;const r=n==null?void 0:n.shadowRoot;r&&(n=r.querySelector(bc)||n),n?n.focus():e.focus()},KI=(i,e)=>{const t=Od(e,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),n=i.target;if(!t||!n||t.classList.contains("ion-disable-focus-trap"))return;const r=()=>{if(t===n)t.lastFocus=void 0;else{const a=PP(t);if(!a.contains(n))return;const o=a.querySelector(".ion-overlay-wrapper");if(!o)return;if(o.contains(n)||n===a.querySelector("ion-backdrop"))t.lastFocus=n;else{const l=t.lastFocus;tv(o,t),l===e.activeElement&&nv(o,t),t.lastFocus=e.activeElement}}},s=()=>{if(t.contains(n))t.lastFocus=n;else{const a=t.lastFocus;tv(t,t),a===e.activeElement&&nv(t,t),t.lastFocus=e.activeElement}};t.shadowRoot?s():r()},YI=i=>{km===0&&(km=1,i.addEventListener("focus",e=>{KI(e,i)},!0),i.addEventListener("ionBackButton",e=>{const t=Od(i);t!=null&&t.backdropDismiss&&e.detail.register(CT,()=>t.dismiss(void 0,Dd))}),i.addEventListener("keydown",e=>{if(e.key==="Escape"){const t=Od(i);t!=null&&t.backdropDismiss&&t.dismiss(void 0,Dd)}}))},JI=(i,e)=>(e===void 0&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(i.querySelectorAll(e)).filter(t=>t.overlayIndex>0)),Od=(i,e,t)=>{const n=JI(i,e).filter(r=>!GI(r));return t===void 0?n[n.length-1]:n.find(r=>r.id===t)},_T=(i=!1)=>{const t=t$(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(i?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},XI=async(i,e,t,n,r)=>{var s,a;if(i.presented)return;_T(!0),i.presented=!0,i.willPresent.emit(),(s=i.willPresentShorthand)===null||s===void 0||s.emit();const o=nt(i),l=i.enterAnimation?i.enterAnimation:Et.get(e,o==="ios"?t:n);await RT(i,l,i.el,r)&&(i.didPresent.emit(),(a=i.didPresentShorthand)===null||a===void 0||a.emit()),i.el.tagName!=="ION-TOAST"&&ZI(i.el),i.keyboardClose&&(document.activeElement===null||!i.el.contains(document.activeElement))&&i.el.focus()},ZI=async i=>{let e=document.activeElement;if(!e)return;const t=e==null?void 0:e.shadowRoot;t&&(e=t.querySelector(bc)||e),await i.onDidDismiss(),e.focus()},e$=async(i,e,t,n,r,s,a)=>{var o,l;if(!i.presented)return!1;_T(!1),i.presented=!1;try{i.el.style.setProperty("pointer-events","none"),i.willDismiss.emit({data:e,role:t}),(o=i.willDismissShorthand)===null||o===void 0||o.emit({data:e,role:t});const c=nt(i),u=i.leaveAnimation?i.leaveAnimation:Et.get(n,c==="ios"?r:s);t!==r$&&await RT(i,u,i.el,a),i.didDismiss.emit({data:e,role:t}),(l=i.didDismissShorthand)===null||l===void 0||l.emit({data:e,role:t}),_m.delete(i),i.el.classList.add("overlay-hidden"),i.el.style.removeProperty("pointer-events"),i.el.lastFocus!==void 0&&(i.el.lastFocus=void 0)}catch(c){console.error(c)}return i.el.remove(),!0},t$=i=>i.querySelector("ion-app")||i.body,RT=async(i,e,t,n)=>{t.classList.remove("overlay-hidden");const r=i.el,s=e(r,n);(!i.animated||!Et.getBoolean("animated",!0))&&s.duration(0),i.keyboardClose&&s.beforeAddWrite(()=>{const o=t.ownerDocument.activeElement;o!=null&&o.matches("input,ion-input, ion-textarea")&&o.blur()});const a=_m.get(i)||[];return _m.set(i,[...a,s]),await s.play(),!0},iv=(i,e)=>{let t;const n=new Promise(r=>t=r);return n$(i,e,r=>{t(r.detail)}),n},n$=(i,e,t)=>{const n=r=>{RP(i,e,n),t(r)};_P(i,e,n)},rv=i=>i==="cancel"||i===Dd,i$=i=>i(),Xf=(i,e)=>{if(typeof i=="function")return Et.get("_zoneGate",i$)(()=>{try{return i(e)}catch(n){throw n}})},Dd="backdrop",r$="gesture",s$=i=>{let e=!1,t;const n=zI(),r=(o=!1)=>{if(t&&!o)return{delegate:t,inline:e};const{el:l,hasController:c,delegate:u}=i;return e=l.parentNode!==null&&!c,t=e?u||n:u,{inline:e,delegate:t}};return{attachViewToDom:async o=>{const{delegate:l}=r(!0);if(l)return await l.attachViewToDom(i.el,o);const{hasController:c}=i;if(c&&o!==void 0)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:o}=r();o&&i.el!==void 0&&o.removeViewFromDom(i.el.parentElement,i.el)}}},a$=()=>{let i;const e=()=>{i&&(i(),i=void 0)};return{addClickListener:(n,r)=>{e();const s=r!==void 0?document.getElementById(r):null;if(!s){qn('A trigger element with the ID "'.concat(r,'" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.'),n);return}i=((o,l)=>{const c=()=>{l.present()};return o.addEventListener("click",c),()=>{o.removeEventListener("click",c)}})(s,n)},removeClickListener:e}};function In(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const o$="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",l$="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",sv="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",av="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",ov="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",c$="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",u$="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Zf;const d$=()=>{if(typeof window>"u")return new Map;if(!Zf){const i=window;i.Ionicons=i.Ionicons||{},Zf=i.Ionicons.map=i.Ionicons.map||new Map}return Zf},h$=i=>{let e=ep(i.src);return e||(e=PT(i.name,i.icon,i.mode,i.ios,i.md),e?f$(e):i.icon&&(e=ep(i.icon),e||(e=ep(i.icon[i.mode]),e))?e:null)},f$=i=>{const e=d$().get(i);return e||qR("svg/".concat(i,".svg"))},PT=(i,e,t,n,r)=>(t=(t&&bu(t))==="ios"?"ios":"md",n&&t==="ios"?i=bu(n):r&&t==="md"?i=bu(r):(!i&&e&&!IT(e)&&(i=e),Md(i)&&(i=bu(i))),!Md(i)||i.trim()===""||i.replace(/[a-z]|-|\d/gi,"")!==""?null:i),ep=i=>Md(i)&&(i=i.trim(),IT(i))?i:null,IT=i=>i.length>0&&/(\/|\.)/.test(i),Md=i=>typeof i=="string",bu=i=>i.toLowerCase(),p$=(i,e=[])=>{const t={};return e.forEach(n=>{i.hasAttribute(n)&&(i.getAttribute(n)!==null&&(t[n]=i.getAttribute(n)),i.removeAttribute(n))}),t},m$=i=>i&&i.dir!==""?i.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",g$=i=>{const e=document.createElement("div");e.innerHTML=i;for(let n=e.childNodes.length-1;n>=0;n--)e.childNodes[n].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[n]);const t=e.firstElementChild;if(t&&t.nodeName.toLowerCase()==="svg"){const n=t.getAttribute("class")||"";if(t.setAttribute("class",(n+" s-ion-icon").trim()),$T(t))return e.innerHTML}return""},$T=i=>{if(i.nodeType===1){if(i.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<i.attributes.length;e++){const t=i.attributes[e].name;if(Md(t)&&t.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<i.childNodes.length;e++)if(!$T(i.childNodes[e]))return!1}return!0},y$=i=>i.startsWith("data:image/svg+xml"),b$=i=>i.indexOf(";utf8,")!==-1,ca=new Map,lv=new Map;let tp;const v$=(i,e)=>{let t=lv.get(i);if(!t)if(typeof fetch<"u"&&typeof document<"u")if(y$(i)&&b$(i)){tp||(tp=new DOMParser);const r=tp.parseFromString(i,"text/html").querySelector("svg");return r&&ca.set(i,r.outerHTML),Promise.resolve()}else t=fetch(i).then(n=>{if(n.ok)return n.text().then(r=>{r&&e!==!1&&(r=g$(r)),ca.set(i,r||"")});ca.set(i,"")}),lv.set(i,t);else return ca.set(i,""),Promise.resolve();return t},w$=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",E$=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=x$(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=p$(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const r=this.io=new window.IntersectionObserver(s=>{s[0].isIntersecting&&(r.disconnect(),this.io=void 0,n())},{rootMargin:t});r.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=h$(this);e&&(ca.has(e)?this.svgContent=ca.get(e):v$(e,this.sanitize).then(()=>this.svgContent=ca.get(e)))}this.iconName=PT(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{iconName:e,el:t,inheritedAttributes:n}=this,r=this.mode||"md",s=this.flipRtl||e&&(e.indexOf("arrow")>-1||e.indexOf("chevron")>-1)&&this.flipRtl!==!1;return he(Nt,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},T$(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":!!s&&m$(t)})},n),this.svgContent?he("div",{class:"icon-inner",innerHTML:this.svgContent}):he("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return w$}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),x$=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",T$=i=>i?{"ion-color":!0,["ion-color-".concat(i)]:!0}:null;function my(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,E$);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const S$=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",C$=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",A$=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=tt(this,"ionBackdropTap",7),this.blocker=Lh.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(e){this.emitTap(e)}emitTap(e){this.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const e=nt(this);return he(Nt,{tabindex:"-1","aria-hidden":"true",class:{[e]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:S$,md:C$}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function OT(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(e=>{switch(e){case"ion-backdrop":customElements.get(e)||customElements.define(e,A$);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xn=(i,e)=>e.closest(i)!==null,Kn=(i,e)=>typeof i=="string"&&i.length>0?Object.assign({"ion-color":!0,["ion-color-".concat(i)]:!0},e):e,N$=i=>i!==void 0?(Array.isArray(i)?i:i.split(" ")).filter(t=>t!=null).map(t=>t.trim()).filter(t=>t!==""):[],_o=i=>{const e={};return N$(i).forEach(t=>e[t]=!0),e},k$=/^[a-z][a-z0-9+\-.]*:/,gy=async(i,e,t,n)=>{if(i!=null&&i[0]!=="#"&&!k$.test(i)){const r=document.querySelector("ion-router");if(r)return e!=null&&e.preventDefault(),r.push(i,t,n)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _$=":host{--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff);--padding-top:3px;--padding-end:8px;--padding-bottom:3px;--padding-start:8px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:inline-block;min-width:10px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:13px;font-weight:bold;line-height:1;text-align:center;white-space:nowrap;contain:content;vertical-align:baseline}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(:empty){display:none}:host{border-radius:10px}",R$=":host{--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff);--padding-top:3px;--padding-end:8px;--padding-bottom:3px;--padding-start:8px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:inline-block;min-width:10px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:13px;font-weight:bold;line-height:1;text-align:center;white-space:nowrap;contain:content;vertical-align:baseline}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(:empty){display:none}:host{--padding-top:3px;--padding-end:4px;--padding-bottom:4px;--padding-start:4px;border-radius:4px}",P$=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=nt(this);return he(Nt,{class:Kn(this.color,{[e]:!0})},he("slot",null))}static get style(){return{ios:_$,md:R$}}},[33,"ion-badge",{color:[513]}]);function I$(){if(typeof customElements>"u")return;["ion-badge"].forEach(e=>{switch(e){case"ion-badge":customElements.get(e)||customElements.define(e,P$);break}})}const $$=I$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const O$=".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-ios-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:28px;line-height:0.67}",D$=".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-md-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:48px;height:48px}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}",M$=kt(class extends _t{constructor(){super(),this.__registerHost(),this.collapse=!1}render(){const e=nt(this);return he(Nt,{class:{[e]:!0,"buttons-collapse":this.collapse}})}static get style(){return{ios:O$,md:D$}}},[34,"ion-buttons",{collapse:[4]}]);function L$(){if(typeof customElements>"u")return;["ion-buttons"].forEach(e=>{switch(e){case"ion-buttons":customElements.get(e)||customElements.define(e,M$);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const B$=L$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const DT=i=>{const e=i;let t;return{hasLegacyControl:()=>{if(t===void 0){const r=e.label!==void 0||q$(e),s=e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby")&&e.shadowRoot===null,a=dy(e);t=e.legacy===!0||!r&&!s&&a!==null}return t}}},q$=i=>i.shadowRoot===null?!1:!!(F$.includes(i.tagName)&&i.querySelector('[slot="label"]')!==null||j$.includes(i.tagName)&&i.textContent!==""),F$=["ION-RANGE"],j$=["ION-TOGGLE","ION-CHECKBOX","ION-RADIO"];/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const U$=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",z$=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,t){return new Promise(n=>{gc(()=>{const r=this.el.getBoundingClientRect(),s=r.width,a=r.height,o=Math.sqrt(s*s+a*a),l=Math.max(a,s),c=this.unbounded?l:o+W$,u=Math.floor(l*H$),d=c/u;let h=e-r.left,f=t-r.top;this.unbounded&&(h=s*.5,f=a*.5);const m=h-u*.5,p=f-u*.5,w=s*.5-h,y=a*.5-f;_r(()=>{const b=document.createElement("div");b.classList.add("ripple-effect");const E=b.style;E.top=p+"px",E.left=m+"px",E.width=E.height=u+"px",E.setProperty("--final-scale","".concat(d)),E.setProperty("--translate-end","".concat(w,"px, ").concat(y,"px")),(this.el.shadowRoot||this.el).appendChild(b),setTimeout(()=>{n(()=>{V$(b)})},225+100)})})})}get unbounded(){return this.type==="unbounded"}render(){const e=nt(this);return he(Nt,{role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return U$}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),V$=i=>{i.classList.add("fade-out"),setTimeout(()=>{i.remove()},200)},W$=10,H$=.5;function qh(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(e=>{switch(e){case"ion-ripple-effect":customElements.get(e)||customElements.define(e,z$);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Q$={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},G$=i=>{if(i===void 0||i==="")return!0;if(window.matchMedia){const e=Q$[i];return window.matchMedia(e).matches}return!1},K$=":host{-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}",vu=typeof window<"u"?window:void 0,cv=vu&&!!(vu.CSS&&vu.CSS.supports&&vu.CSS.supports("--a: 0")),Y$=["","xs","sm","md","lg","xl"],J$=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.offset=void 0,this.offsetXs=void 0,this.offsetSm=void 0,this.offsetMd=void 0,this.offsetLg=void 0,this.offsetXl=void 0,this.pull=void 0,this.pullXs=void 0,this.pullSm=void 0,this.pullMd=void 0,this.pullLg=void 0,this.pullXl=void 0,this.push=void 0,this.pushXs=void 0,this.pushSm=void 0,this.pushMd=void 0,this.pushLg=void 0,this.pushXl=void 0,this.size=void 0,this.sizeXs=void 0,this.sizeSm=void 0,this.sizeMd=void 0,this.sizeLg=void 0,this.sizeXl=void 0}onResize(){qs(this)}getColumns(e){let t;for(const n of Y$){const r=G$(n),s=this[e+n.charAt(0).toUpperCase()+n.slice(1)];r&&s!==void 0&&(t=s)}return t}calculateSize(){const e=this.getColumns("size");if(!e||e==="")return;const t=e==="auto"?"auto":cv?"calc(calc(".concat(e," / var(--ion-grid-columns, 12)) * 100%)"):e/12*100+"%";return{flex:"0 0 ".concat(t),width:"".concat(t),"max-width":"".concat(t)}}calculatePosition(e,t){const n=this.getColumns(e);if(!n)return;const r=cv?"calc(calc(".concat(n," / var(--ion-grid-columns, 12)) * 100%)"):n>0&&n<12?n/12*100+"%":"auto";return{[t]:r}}calculateOffset(e){return this.calculatePosition("offset",e?"margin-right":"margin-left")}calculatePull(e){return this.calculatePosition("pull",e?"left":"right")}calculatePush(e){return this.calculatePosition("push",e?"right":"left")}render(){const e=document.dir==="rtl",t=nt(this);return he(Nt,{class:{[t]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(e)),this.calculatePull(e)),this.calculatePush(e)),this.calculateSize())},he("slot",null))}static get style(){return K$}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]);function X$(){if(typeof customElements>"u")return;["ion-col"].forEach(e=>{switch(e){case"ion-col":customElements.get(e)||customElements.define(e,J$);break}})}const Z$=X$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Yu=i=>i&&i.dir!==""?i.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const e2=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',t2=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=tt(this,"ionScrollStart",7),this.ionScroll=tt(this,"ionScroll",7),this.ionScrollEnd=tt(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,t=nt(this);return e===void 0?t==="ios"&&As("ios"):e}resize(){this.fullscreen?gc(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,qs(this))}readDimensions(){const e=i2(this.el),t=Math.max(this.el.offsetTop,0),n=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||n!==this.cBottom)&&(this.cTop=t,this.cBottom=n,qs(this))}onScroll(e){const t=Date.now(),n=!this.isScrolling;this.lastScroll=t,n&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,gc(r=>{this.queued=!1,this.detail.event=e,r2(this.detail,this.scrollEl,r,n),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(e=>Ca(this.el,e)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(e=>Ca(this.el,e)),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const t=await this.getScrollElement(),n=t.scrollHeight-t.clientHeight;return this.scrollToPoint(void 0,n,e)}async scrollByPoint(e,t,n){const r=await this.getScrollElement();return this.scrollToPoint(e+r.scrollLeft,t+r.scrollTop,n)}async scrollToPoint(e,t,n=0){const r=await this.getScrollElement();if(n<32){t!=null&&(r.scrollTop=t),e!=null&&(r.scrollLeft=e);return}let s,a=0;const o=new Promise(f=>s=f),l=r.scrollTop,c=r.scrollLeft,u=t!=null?t-l:0,d=e!=null?e-c:0,h=f=>{const m=Math.min(1,(f-a)/n)-1,p=Math.pow(m,3)+1;u!==0&&(r.scrollTop=Math.floor(p*u+l)),d!==0&&(r.scrollLeft=Math.floor(p*d+c)),p<1?requestAnimationFrame(h):s()};return requestAnimationFrame(f=>{a=f,h(f)}),o}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:t,scrollY:n,el:r}=this,s=Yu(r)?"rtl":"ltr",a=nt(this),o=this.shouldForceOverscroll(),l=a==="ios",c=e?"main":"div";return this.resize(),he(Nt,{class:Kn(this.color,{[a]:!0,"content-sizing":xn("ion-popover",this.el),overscroll:o,["content-".concat(s)]:!0}),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},he("div",{ref:u=>this.backgroundContentEl=u,id:"background-content",part:"background"}),he(c,{class:{"inner-scroll":!0,"scroll-x":t,"scroll-y":n,overscroll:(t||n)&&o},ref:u=>this.scrollEl=u,onScroll:this.scrollEvents?u=>this.onScroll(u):void 0,part:"scroll"},he("slot",null)),l?he("div",{class:"transition-effect"},he("div",{class:"transition-cover"}),he("div",{class:"transition-shadow"})):null,he("slot",{name:"fixed"}))}get el(){return this}static get style(){return e2}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),n2=i=>{var e;return i.parentElement?i.parentElement:!((e=i.parentNode)===null||e===void 0)&&e.host?i.parentNode.host:null},i2=i=>{const e=i.closest("ion-tabs");if(e)return e;const t=i.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return t||n2(i)},r2=(i,e,t,n)=>{const r=i.currentX,s=i.currentY,a=i.currentTime,o=e.scrollLeft,l=e.scrollTop,c=t-a;if(n&&(i.startTime=t,i.startX=o,i.startY=l,i.velocityX=i.velocityY=0),i.currentTime=t,i.currentX=i.scrollLeft=o,i.currentY=i.scrollTop=l,i.deltaX=o-i.startX,i.deltaY=l-i.startY,c>0&&c<100){const u=(o-r)/c,d=(l-s)/c;i.velocityX=u*.7+i.velocityX*.3,i.velocityY=d*.7+i.velocityY*.3}};function s2(){if(typeof customElements>"u")return;["ion-content"].forEach(e=>{switch(e){case"ion-content":customElements.get(e)||customElements.define(e,t2);break}})}const a2=s2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const o2=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:16px;font-weight:500;letter-spacing:0}:host(.in-buttons){font-size:17px;font-weight:400}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:13px}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',l2=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:20px}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:13px}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}',c2=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=tt(this,"ionFocus",7),this.ionBlur=tt(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=e=>{const{el:t}=this;this.type==="button"?gy(this.href,e,this.routerDirection,this.routerAnimation):aT(t)&&this.submitForm(e)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:e}=this;this.formButtonEl&&(this.formButtonEl.disabled=e)}renderHiddenButton(){const e=this.formEl=this.findForm();if(e){const{formButtonEl:t}=this;if(t!==null&&e.contains(t))return;const n=this.formButtonEl=document.createElement("button");n.type=this.type,n.style.display="none",n.disabled=this.disabled,e.appendChild(n)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=Oa(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if(typeof e=="string"){const t=document.getElementById(e);return t?t instanceof HTMLFormElement?t:(qn('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is attached to a <form> element.'),this.el),null):(qn('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is correct and the form is rendered in the DOM.'),this.el),null)}return e!==void 0?(qn('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(e){this.formEl&&this.formButtonEl&&(e.preventDefault(),this.formButtonEl.click())}render(){const e=nt(this),{buttonType:t,type:n,disabled:r,rel:s,target:a,size:o,href:l,color:c,expand:u,hasIconOnly:d,shape:h,strong:f,inheritedAttributes:m}=this,p=o===void 0&&this.inItem?"small":o,w=l===void 0?"button":"a",y=w==="button"?{type:n}:{download:this.download,href:l,rel:s,target:a};let b=this.fill;return b==null&&(b=this.inToolbar||this.inListHeader?"clear":"solid"),n!=="button"&&this.renderHiddenButton(),he(Nt,{onClick:this.handleClick,"aria-disabled":r?"true":null,class:Kn(c,{[e]:!0,[t]:!0,["".concat(t,"-").concat(u)]:u!==void 0,["".concat(t,"-").concat(p)]:p!==void 0,["".concat(t,"-").concat(h)]:h!==void 0,["".concat(t,"-").concat(b)]:!0,["".concat(t,"-strong")]:f,"in-toolbar":xn("ion-toolbar",this.el),"in-toolbar-color":xn("ion-toolbar[color]",this.el),"in-buttons":xn("ion-buttons",this.el),"button-has-icon-only":d,"button-disabled":r,"ion-activatable":!0,"ion-focusable":!0})},he(w,Object.assign({},y,{class:"button-native",part:"native",disabled:r,onFocus:this.onFocus,onBlur:this.onBlur},m),he("span",{class:"button-inner"},he("slot",{name:"icon-only"}),he("slot",{name:"start"}),he("slot",null),he("slot",{name:"end"})),e==="md"&&he("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:o2,md:l2}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]}]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const u2=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));--color:var(--ion-item-color, var(--ion-text-color, #000));--highlight-height:0px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--bottom-padding-start:0px;font-size:16px}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-interactive){--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px;--show-inset-highlight:0}.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus) .item-highlight{border-top:none;border-right:none;border-left:none}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:1px;--padding-bottom:1px;--padding-start:.5em;--padding-end:.5em;min-height:24px;font-size:13px}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:0}',d2=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;--highlight-height:1px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);font-size:16px;font-weight:normal;text-transform:none}:host(.item-fill-outline){--highlight-height:2px}:host(.item-fill-none.item-interactive.ion-focus) .item-highlight,:host(.item-fill-none.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-none.item-interactive.ion-focus) .item-native,:host(.item-fill-none.item-interactive.item-has-focus) .item-native,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-highlight{border-width:var(--full-highlight-height);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-native{border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-highlight,:host(.item-fill-solid.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-native,:host(.item-fill-solid.item-interactive.item-has-focus) .item-native,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-has-focus) .item-native{caret-color:var(--highlight-background)}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-full){--border-width:0 0 1px 0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0;--show-inset-highlight:0}:host(.item-fill-outline) .item-highlight{--position-offset:calc(-1 * var(--border-width));top:var(--position-offset);width:calc(100% + 2 * var(--border-width));height:calc(100% + 2 * var(--border-width));-webkit-transition:none;transition:none}@supports (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{inset-inline-start:var(--position-offset)}}@supports not (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{left:var(--position-offset)}:host-context([dir=rtl]):host(.item-fill-outline) .item-highlight,:host-context([dir=rtl]).item-fill-outline .item-highlight{left:unset;right:unset;right:var(--position-offset)}@supports selector(:dir(rtl)){:host(.item-fill-outline) .item-highlight:dir(rtl){left:unset;right:unset;right:var(--position-offset)}}}:host(.item-fill-outline.ion-focused) .item-native,:host(.item-fill-outline.item-has-focus) .item-native{border-color:transparent}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted([slot=end]){-webkit-margin-start:32px;margin-inline-start:32px}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){-webkit-margin-end:8px;margin-inline-end:8px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]:not([slot=helper]):not([slot=error])){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){-webkit-padding-end:16px;padding-inline-end:16px}::slotted(ion-note[slot=end]){-webkit-padding-start:16px;padding-inline-start:16px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:8px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:2px;--padding-bottom:2px;--padding-start:.6em;--padding-end:.6em;min-height:25px;font-size:12px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #3880ff)}:host(.ion-color){--highlight-color-focused:var(--ion-color-contrast)}:host(.item-label-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid.ion-color),:host(.item-fill-outline.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid){--background:var(--ion-color-step-50, #f2f2f2);--background-hover:var(--ion-color-step-100, #e6e6e6);--background-focused:var(--ion-color-step-150, #d9d9d9);--border-width:0 0 1px 0;--inner-border-width:0;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid),:host-context([dir=rtl]).item-fill-solid{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid):dir(rtl){border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.item-fill-solid) .item-native{--border-color:var(--ion-color-step-500, gray)}:host(.item-fill-solid.ion-focused) .item-native,:host(.item-fill-solid.item-has-focus) .item-native{--background:var(--background-focused)}:host(.item-fill-solid.item-shape-round){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid.item-shape-round),:host-context([dir=rtl]).item-fill-solid.item-shape-round{border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid.item-shape-round):dir(rtl){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}}@media (any-hover: hover){:host(.item-fill-solid:hover) .item-native{--background:var(--background-hover);--border-color:var(--ion-color-step-750, #404040)}}:host(.item-fill-outline){--ripple-color:transparent;--background-focused:transparent;--background-hover:transparent;--border-color:var(--ion-color-step-500, gray);--border-width:1px;border:none;overflow:visible}:host(.item-fill-outline) .item-native{--native-padding-left:16px;border-radius:4px}:host(.item-fill-outline.item-shape-round) .item-native{--inner-padding-start:16px;border-radius:28px}:host(.item-fill-outline.item-shape-round) .item-bottom{-webkit-padding-start:32px;padding-inline-start:32px}:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-textarea:not(:first-child)){-webkit-transform:translateY(-14px);transform:translateY(-14px)}@media (any-hover: hover){:host(.item-fill-outline:hover) .item-native{--border-color:var(--ion-color-step-750, #404040)}}.item-counter{letter-spacing:0.0333333333em}',h2=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.color=void 0,this.button=!1,this.detail=void 0,this.detailIcon=sv,this.disabled=!1,this.download=void 0,this.fill=void 0,this.shape=void 0,this.href=void 0,this.rel=void 0,this.lines=void 0,this.counter=!1,this.routerAnimation=void 0,this.routerDirection="forward",this.target=void 0,this.type="button",this.counterFormatter=void 0,this.counterString=void 0}counterFormatterChanged(){this.updateCounterOutput(this.getFirstInput())}handleIonInput(e){this.counter&&e.target===this.getFirstInput()&&this.updateCounterOutput(e.target)}labelColorChanged(e){const{color:t}=this;t===void 0&&(this.labelColorStyles=e.detail)}itemStyle(e){e.stopPropagation();const t=e.target.tagName,n=e.detail,r={},s=this.itemStyles.get(t)||{};let a=!1;Object.keys(n).forEach(o=>{if(n[o]){const l="item-".concat(o);s[l]||(a=!0),r[l]=!0}}),!a&&Object.keys(r).length!==Object.keys(s).length&&(a=!0),a&&(this.itemStyles.set(t,r),qs(this))}connectedCallback(){this.counter&&this.updateCounterOutput(this.getFirstInput()),this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=Ic(this.el,["aria-label"])}componentDidLoad(){const{el:e,counter:t,counterFormatter:n,fill:r,shape:s}=this;e.querySelector('[slot="helper"]')!==null&&qn('The "helper" slot has been deprecated in favor of using the "helperText" property on ion-input or ion-textarea.',e),e.querySelector('[slot="error"]')!==null&&qn('The "error" slot has been deprecated in favor of using the "errorText" property on ion-input or ion-textarea.',e),t===!0&&qn('The "counter" property has been deprecated in favor of using the "counter" property on ion-input or ion-textarea.',e),n!==void 0&&qn('The "counterFormatter" property has been deprecated in favor of using the "counterFormatter" property on ion-input or ion-textarea.',e),r!==void 0&&qn('The "fill" property has been deprecated in favor of using the "fill" property on ion-input or ion-textarea.',e),s!==void 0&&qn('The "shape" property has been deprecated in favor of using the "shape" property on ion-input or ion-textarea.',e),yi(()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()})}setMultipleInputs(){const e=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),t=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),n=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=e.length+t.length>1||e.length+n.length>1||e.length>0&&this.isClickable()}hasCover(){return this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length===1&&!this.multipleInputs}isClickable(){return this.href!==void 0||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const e=this.el.querySelector(".ion-focusable");return this.canActivate()||e!==null}getFirstInput(){return this.el.querySelectorAll("ion-input, ion-textarea")[0]}updateCounterOutput(e){var t,n;const{counter:r,counterFormatter:s,defaultCounterFormatter:a}=this;if(r&&!this.multipleInputs&&(e==null?void 0:e.maxlength)!==void 0){const o=(n=(t=e==null?void 0:e.value)===null||t===void 0?void 0:t.toString().length)!==null&&n!==void 0?n:0;if(s===void 0)this.counterString=a(o,e.maxlength);else try{this.counterString=s(o,e.maxlength)}catch(l){kT("Exception in provided `counterFormatter`.",l),this.counterString=a(o,e.maxlength)}}}defaultCounterFormatter(e,t){return"".concat(e," / ").concat(t)}hasStartEl(){this.el.querySelector('[slot="start"]')!==null&&this.el.classList.add("item-has-start-slot")}render(){const{counterString:e,detail:t,detailIcon:n,download:r,fill:s,labelColorStyles:a,lines:o,disabled:l,href:c,rel:u,shape:d,target:h,routerAnimation:f,routerDirection:m,inheritedAriaAttributes:p}=this,w={},y=nt(this),b=this.isClickable(),E=this.canActivate(),_=b?c===void 0?"button":"a":"div",k=_==="button"?{type:this.type}:{download:r,href:c,rel:u,target:h},B=b?{onClick:$=>{gy(c,$,m,f)}}:{},D=t!==void 0?t:y==="ios"&&b;this.itemStyles.forEach($=>{Object.assign(w,$)});const O=l||w["item-interactive-disabled"]?"true":null,R=s||"none",Q=xn("ion-list",this.el)&&!xn("ion-radio-group",this.el);return he(Nt,{"aria-disabled":O,class:Object.assign(Object.assign(Object.assign({},w),a),Kn(this.color,{item:!0,[y]:!0,"item-lines-default":o===void 0,["item-lines-".concat(o)]:o!==void 0,["item-fill-".concat(R)]:!0,["item-shape-".concat(d)]:d!==void 0,"item-disabled":l,"in-list":Q,"item-multiple-inputs":this.multipleInputs,"ion-activatable":E,"ion-focusable":this.focusable,"item-rtl":document.dir==="rtl"})),role:Q?"listitem":null},he(_,Object.assign({},k,p,{class:"item-native",part:"native",disabled:l},B),he("slot",{name:"start"}),he("div",{class:"item-inner"},he("div",{class:"input-wrapper"},he("slot",null)),he("slot",{name:"end"}),D&&he("ion-icon",{icon:n,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":n===sv}),he("div",{class:"item-inner-highlight"})),E&&y==="md"&&he("ion-ripple-effect",null),he("div",{class:"item-highlight"})),he("div",{class:"item-bottom"},he("slot",{name:"error"}),he("slot",{name:"helper"}),e&&he("ion-note",{class:"item-counter"},e)))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{counterFormatter:["counterFormatterChanged"]}}static get style(){return{ios:u2,md:d2}}},[49,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[4],download:[1],fill:[1],shape:[1],href:[1],rel:[1],lines:[1],counter:[4],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],counterFormatter:[16],multipleInputs:[32],focusable:[32],counterString:[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const f2=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",p2='.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}',m2=kt(class extends _t{constructor(){super(),this.__registerHost(),this.ionColor=tt(this,"ionColor",7),this.ionStyle=tt(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:e}=this;this.ionColor.emit({"item-label-color":e!==void 0,["ion-color-".concat(e)]:e!==void 0})}emitStyle(){const{inRange:e,position:t}=this;e||this.ionStyle.emit({label:!0,["label-".concat(t)]:t!==void 0})}render(){const e=this.position,t=nt(this);return he(Nt,{class:Kn(this.color,{[t]:!0,"in-item-color":xn("ion-item.ion-color",this.el),["label-".concat(e)]:e!==void 0,"label-no-animate":this.noAnimate,"label-rtl":document.dir==="rtl"})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:f2,md:p2}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function g2(){if(typeof customElements>"u")return;["ion-label"].forEach(e=>{switch(e){case"ion-label":customElements.get(e)||customElements.define(e,m2);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ju=()=>{if(cn!==void 0)return cn.Capacitor};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Rm;(function(i){i.Heavy="HEAVY",i.Medium="MEDIUM",i.Light="LIGHT"})(Rm||(Rm={}));var uv;(function(i){i.Success="SUCCESS",i.Warning="WARNING",i.Error="ERROR"})(uv||(uv={}));const Fh={getEngine(){const i=window.TapticEngine;if(i)return i;const e=Ju();if(e!=null&&e.isPluginAvailable("Haptics"))return e.Plugins.Haptics},available(){if(!this.getEngine())return!1;const e=Ju();return(e==null?void 0:e.getPlatform())==="web"?typeof navigator<"u"&&navigator.vibrate!==void 0:!0},isCordova(){return window.TapticEngine!==void 0},isCapacitor(){return Ju()!==void 0},impact(i){const e=this.getEngine();if(!e)return;const t=this.isCapacitor()?i.style:i.style.toLowerCase();e.impact({style:t})},notification(i){const e=this.getEngine();if(!e)return;const t=this.isCapacitor()?i.type:i.type.toLowerCase();e.notification({type:t})},selection(){const i=this.isCapacitor()?Rm.Light:"light";this.impact({style:i})},selectionStart(){const i=this.getEngine();i&&(this.isCapacitor()?i.selectionStart():i.gestureSelectionStart())},selectionChanged(){const i=this.getEngine();i&&(this.isCapacitor()?i.selectionChanged():i.gestureSelectionChanged())},selectionEnd(){const i=this.getEngine();i&&(this.isCapacitor()?i.selectionEnd():i.gestureSelectionEnd())}},yy=()=>Fh.available(),y2=()=>{yy()&&Fh.selectionStart()},b2=()=>{yy()&&Fh.selectionChanged()},v2=()=>{yy()&&Fh.selectionEnd()};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const w2="ION-CONTENT",MT="ion-content",LT=".ion-content-scroll-host",BT="".concat(MT,", ").concat(LT),$c=i=>i.tagName===w2,dv=async i=>$c(i)?(await new Promise(e=>Ca(i,e)),i.getScrollElement()):i,hv=i=>{const e=i.querySelector(LT);return e||i.querySelector(BT)},E2=i=>i.closest(BT),S8=(i,e)=>$c(i)?i.scrollToTop(e):Promise.resolve(i.scrollTo({top:0,left:0,behavior:e>0?"smooth":"auto"})),C8=(i,e,t,n)=>$c(i)?i.scrollByPoint(e,t,n):Promise.resolve(i.scrollBy({top:t,left:e,behavior:n>0?"smooth":"auto"})),fv=i=>VI(i,MT),x2=i=>{if($c(i)){const e=i,t=e.scrollY;return e.scrollY=!1,t}else return i.style.setProperty("overflow","hidden"),!0},T2=(i,e)=>{$c(i)?i.scrollY=e:i.style.removeProperty("overflow")};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Pm;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(Pm||(Pm={}));var Im;(function(i){i.Body="body",i.Ionic="ionic",i.Native="native",i.None="none"})(Im||(Im={}));const S2={getEngine(){const i=Ju();if(i!=null&&i.isPluginAvailable("Keyboard"))return i.Plugins.Keyboard},getResizeMode(){const i=this.getEngine();return i!=null&&i.getResizeMode?i.getResizeMode().catch(e=>{if(e.code!==Pm.Unimplemented)throw e}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qT=i=>{if(ko===void 0||i===Im.None||i===void 0)return null;const e=ko.querySelector("ion-app");return e!=null?e:ko.body},pv=i=>{const e=qT(i);return e===null?0:e.clientHeight},C2=async i=>{let e,t,n,r;const s=async()=>{const u=await S2.getResizeMode(),d=u===void 0?void 0:u.mode;e=()=>{r===void 0&&(r=pv(d)),n=!0,a(n,d)},t=()=>{n=!1,a(n,d)},cn==null||cn.addEventListener("keyboardWillShow",e),cn==null||cn.addEventListener("keyboardWillHide",t)},a=(u,d)=>{i&&i(u,o(d))},o=u=>{if(r===0||r===pv(u))return;const d=qT(u);if(d!==null)return new Promise(h=>{const f=()=>{d.clientHeight===r&&(m.disconnect(),h())},m=new ResizeObserver(f);m.observe(d)})},l=()=>{cn==null||cn.removeEventListener("keyboardWillShow",e),cn==null||cn.removeEventListener("keyboardWillHide",t),e=t=void 0},c=()=>n;return await s(),{init:s,destroy:l,isKeyboardVisible:c}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const A2=":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}",N2=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const e=nt(this);return he(Nt,{class:{[e]:!0,"grid-fixed":this.fixed}},he("slot",null))}static get style(){return A2}},[1,"ion-grid",{fixed:[4]}]);function k2(){if(typeof customElements>"u")return;["ion-grid"].forEach(e=>{switch(e){case"ion-grid":customElements.get(e)||customElements.define(e,N2);break}})}const _2=k2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const R2="all 0.2s ease-in-out",mv=i=>{const e=document.querySelector("".concat(i,".ion-cloned-element"));if(e!==null)return e;const t=document.createElement(i);return t.classList.add("ion-cloned-element"),t.style.setProperty("display","none"),document.body.appendChild(t),t},gv=i=>{if(!i)return;const e=i.querySelectorAll("ion-toolbar");return{el:i,toolbars:Array.from(e).map(t=>{const n=t.querySelector("ion-title");return{el:t,background:t.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:n,innerTitleEl:n?n.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(t.querySelectorAll("ion-buttons"))}})}},P2=(i,e,t)=>{gc(()=>{const n=i.scrollTop,r=Er(1,1+-n/500,1.1);t.querySelector("ion-refresher.refresher-native")===null&&_r(()=>{O2(e.toolbars,r)})})},by=(i,e)=>{i.collapse!=="fade"&&(e===void 0?i.style.removeProperty("--opacity-scale"):i.style.setProperty("--opacity-scale",e.toString()))},I2=(i,e,t)=>{if(!i[0].isIntersecting)return;const n=i[0].intersectionRatio>.9||t<=0?0:(1-i[0].intersectionRatio)*100/75;by(e.el,n===1?void 0:n)},$2=(i,e,t,n)=>{_r(()=>{const r=n.scrollTop;I2(i,e,r);const s=i[0],a=s.intersectionRect,o=a.width*a.height,l=s.rootBounds.width*s.rootBounds.height,c=o===0&&l===0,u=Math.abs(a.left-s.boundingClientRect.left),d=Math.abs(a.right-s.boundingClientRect.right),h=o>0&&(u>=5||d>=5);c||h||(s.isIntersecting?(Dl(e,!1),Dl(t)):(a.x===0&&a.y===0||a.width!==0&&a.height!==0)&&r>0&&(Dl(e),Dl(t,!1),by(e.el)))})},Dl=(i,e=!0)=>{const t=i.el;e?(t.classList.remove("header-collapse-condense-inactive"),t.removeAttribute("aria-hidden")):(t.classList.add("header-collapse-condense-inactive"),t.setAttribute("aria-hidden","true"))},O2=(i=[],e=1,t=!1)=>{i.forEach(n=>{const r=n.ionTitleEl,s=n.innerTitleEl;!r||r.size!=="large"||(s.style.transition=t?R2:"",s.style.transform="scale3d(".concat(e,", ").concat(e,", 1)"))})},yv=(i,e,t)=>{gc(()=>{const n=i.scrollTop,r=e.clientHeight,s=t?t.clientHeight:0;if(t!==null&&n<s){e.style.setProperty("--opacity-scale","0"),i.style.setProperty("clip-path","inset(".concat(r,"px 0px 0px 0px)"));return}const a=n-s,l=Er(0,a/10,1);_r(()=>{i.style.removeProperty("clip-path"),e.style.setProperty("--opacity-scale",l.toString())})})},D2="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:1px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",M2="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",L2=kt(class extends _t{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(e,t)=>{const n=this.scrollEl=await dv(e);this.contentScrollCallback=()=>{yv(this.scrollEl,this.el,t)},n.addEventListener("scroll",this.contentScrollCallback),yv(this.scrollEl,this.el,t)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=Oa(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(nt(this)!=="ios")return;const{collapse:t}=this,n=t==="condense",r=t==="fade";if(this.destroyCollapsibleHeader(),n){const s=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),a=s?hv(s):null;_r(()=>{const o=mv("ion-title");o.size="large",mv("ion-back-button")}),await this.setupCondenseHeader(a,s)}else if(r){const s=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),a=s?hv(s):null;if(!a){fv(this.el);return}const o=a.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(a,o)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,t){if(!e||!t){fv(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await dv(e);const n=t.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(n).find(o=>o.collapse!=="condense"),!this.collapsibleMainHeader)return;const r=gv(this.collapsibleMainHeader),s=gv(this.el);if(!r||!s)return;Dl(r,!1),by(r.el,0);const a=o=>{$2(o,r,s,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(a,{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(s.toolbars[s.toolbars.length-1].el),this.contentScrollCallback=()=>{P2(this.scrollEl,s,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),_r(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:e,inheritedAttributes:t}=this,n=nt(this),r=this.collapse||"none",s=xn("ion-menu",this.el)?"none":"banner";return he(Nt,Object.assign({role:s,class:{[n]:!0,["header-".concat(n)]:!0,"header-translucent":this.translucent,["header-collapse-".concat(r)]:!0,["header-translucent-".concat(n)]:this.translucent}},t),n==="ios"&&e&&he("div",{class:"header-background"}),he("slot",null))}get el(){return this}static get style(){return{ios:D2,md:M2}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);function B2(){if(typeof customElements>"u")return;["ion-header"].forEach(e=>{switch(e){case"ion-header":customElements.get(e)||customElements.define(e,L2);break}})}const q2=B2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const F2=":host{display:block;-o-object-fit:contain;object-fit:contain}img{display:block;width:100%;height:100%;-o-object-fit:inherit;object-fit:inherit;-o-object-position:inherit;object-position:inherit}",j2=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionImgWillLoad=tt(this,"ionImgWillLoad",7),this.ionImgDidLoad=tt(this,"ionImgDidLoad",7),this.ionError=tt(this,"ionError",7),this.inheritedAttributes={},this.onLoad=()=>{this.ionImgDidLoad.emit()},this.onError=()=>{this.ionError.emit()},this.loadSrc=void 0,this.loadError=void 0,this.alt=void 0,this.src=void 0}srcChanged(){this.addIO()}componentWillLoad(){this.inheritedAttributes=Ic(this.el,["draggable"])}componentDidLoad(){this.addIO()}addIO(){this.src!==void 0&&(typeof window<"u"&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype?(this.removeIO(),this.io=new IntersectionObserver(e=>{e[e.length-1].isIntersecting&&(this.load(),this.removeIO())}),this.io.observe(this.el)):setTimeout(()=>this.load(),200))}load(){this.loadError=this.onError,this.loadSrc=this.src,this.ionImgWillLoad.emit()}removeIO(){this.io&&(this.io.disconnect(),this.io=void 0)}render(){const{loadSrc:e,alt:t,onLoad:n,loadError:r,inheritedAttributes:s}=this,{draggable:a}=s;return he(Nt,{class:nt(this)},he("img",{decoding:"async",src:e,alt:t,onLoad:n,onError:r,part:"image",draggable:U2(a)}))}get el(){return this}static get watchers(){return{src:["srcChanged"]}}static get style(){return F2}},[1,"ion-img",{alt:[1],src:[1],loadSrc:[32],loadError:[32]}]),U2=i=>{switch(i){case"true":return!0;case"false":return!1;default:return}};function z2(){if(typeof customElements>"u")return;["ion-img"].forEach(e=>{switch(e){case"ion-img":customElements.get(e)||customElements.define(e,j2);break}})}const V2=z2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const W2=(i,e,t)=>{let n;const r=()=>!(e()===void 0||i.label!==void 0||t()===null),s=()=>{r()&&yi(()=>{a()})},a=()=>{const l=e();if(l===void 0)return;if(!r()){l.style.removeProperty("width");return}const c=t().scrollWidth;if(c===0&&l.offsetParent===null&&cn!==void 0&&"IntersectionObserver"in cn){if(n!==void 0)return;const u=n=new IntersectionObserver(d=>{d[0].intersectionRatio===1&&(a(),u.disconnect(),n=void 0)},{threshold:.01,root:i});u.observe(l);return}l.style.setProperty("width","".concat(c*.75,"px"))};return{calculateNotchWidth:s,destroy:()=>{n&&(n.disconnect(),n=void 0)}}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const H2=(i,e,t)=>{let n,r;cn!==void 0&&"MutationObserver"in cn&&(n=new MutationObserver(l=>{for(const c of l)for(const u of c.addedNodes)if(u.nodeType===Node.ELEMENT_NODE&&u.slot===e){t(),yi(()=>s(u));return}}),n.observe(i,{childList:!0}));const s=l=>{var c;r&&(r.disconnect(),r=void 0),r=new MutationObserver(u=>{t();for(const d of u)for(const h of d.removedNodes)h.nodeType===Node.ELEMENT_NODE&&h.slot===e&&o()}),r.observe((c=l.parentElement)!==null&&c!==void 0?c:l,{subtree:!0,childList:!0})},a=()=>{n&&(n.disconnect(),n=void 0),o()},o=()=>{r&&(r.disconnect(),r=void 0)};return{destroy:a}},Q2=(i,e,t)=>{const n=i==null?0:i.toString().length,r=G2(n,e);if(t===void 0)return r;try{return t(n,e)}catch(s){return kT("Exception in provided `counterFormatter`.",s),r}},G2=(i,e)=>"".concat(i," / ").concat(e);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const K2=".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:0.6;--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}.legacy-input.sc-ion-input-ios-h{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;background:var(--background)}.legacy-input.sc-ion-input-ios-h .native-input.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius)}ion-item.sc-ion-input-ios-h:not(.item-label):not(.item-has-modern-input),ion-item:not(.item-label):not(.item-has-modern-input) .sc-ion-input-ios-h{--padding-start:0}ion-item[slot=start].sc-ion-input-ios-h,ion-item [slot=start].sc-ion-input-ios-h,ion-item[slot=end].sc-ion-input-ios-h,ion-item [slot=end].sc-ion-input-ios-h{width:auto}.legacy-input.ion-color.sc-ion-input-ios-h{color:var(--ion-color-base)}.ion-color.sc-ion-input-ios-h{--highlight-color-focused:var(--ion-color-base)}.native-input.sc-ion-input-ios{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.cloned-input.sc-ion-input-ios{top:0;bottom:0;position:absolute;pointer-events:none}@supports (inset-inline-start: 0){.cloned-input.sc-ion-input-ios{inset-inline-start:0}}@supports not (inset-inline-start: 0){.cloned-input.sc-ion-input-ios{left:0}[dir=rtl].sc-ion-input-ios-h .cloned-input.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-ios .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.cloned-input.sc-ion-input-ios:dir(rtl){left:unset;right:unset;right:0}}}.cloned-input.sc-ion-input-ios:disabled{opacity:1}.legacy-input.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.input-clear-icon.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, #666666);visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{color:inherit}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.has-focus.sc-ion-input-ios-h{pointer-events:none}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h a.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h button.sc-ion-input-ios{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-ios-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-ios-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.input-wrapper.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;width:100%}.ion-touched.ion-invalid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:12px}.has-focus.ion-valid.sc-ion-input-ios-h,.ion-touched.ion-invalid.sc-ion-input-ios-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:block;color:var(--ion-color-step-550, #737373)}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:block}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:none}.input-bottom.sc-ion-input-ios .counter.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-ios,.sc-ion-input-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-ios,.input-outline-notch-hidden.sc-ion-input-ios{display:none}.input-wrapper.sc-ion-input-ios input.sc-ion-input-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text.sc-ion-input-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios:dir(rtl),.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-ios-h input.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:1}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.has-focus.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));font-size:inherit}.legacy-input.sc-ion-input-ios-h{--padding-top:10px;--padding-end:8px;--padding-bottom:10px;--padding-start:0}.item-label-stacked.sc-ion-input-ios-h,.item-label-stacked .sc-ion-input-ios-h,.item-label-floating.sc-ion-input-ios-h,.item-label-floating .sc-ion-input-ios-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0px}.input-clear-icon.sc-ion-input-ios ion-icon.sc-ion-input-ios{width:18px;height:18px}.sc-ion-input-ios-h:not(.legacy-input){min-height:44px}.input-label-placement-floating.sc-ion-input-ios-h,.input-label-placement-stacked.sc-ion-input-ios-h{min-height:56px}.legacy-input.sc-ion-input-ios-h .native-input[disabled].sc-ion-input-ios,.input-disabled.sc-ion-input-ios-h{opacity:0.3}",Y2=".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:0.6;--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}.legacy-input.sc-ion-input-md-h{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;background:var(--background)}.legacy-input.sc-ion-input-md-h .native-input.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius)}ion-item.sc-ion-input-md-h:not(.item-label):not(.item-has-modern-input),ion-item:not(.item-label):not(.item-has-modern-input) .sc-ion-input-md-h{--padding-start:0}ion-item[slot=start].sc-ion-input-md-h,ion-item [slot=start].sc-ion-input-md-h,ion-item[slot=end].sc-ion-input-md-h,ion-item [slot=end].sc-ion-input-md-h{width:auto}.legacy-input.ion-color.sc-ion-input-md-h{color:var(--ion-color-base)}.ion-color.sc-ion-input-md-h{--highlight-color-focused:var(--ion-color-base)}.native-input.sc-ion-input-md{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.cloned-input.sc-ion-input-md{top:0;bottom:0;position:absolute;pointer-events:none}@supports (inset-inline-start: 0){.cloned-input.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.cloned-input.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h .cloned-input.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-md .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.cloned-input.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.cloned-input.sc-ion-input-md:disabled{opacity:1}.legacy-input.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.input-clear-icon.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, #666666);visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{color:inherit}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.has-focus.sc-ion-input-md-h{pointer-events:none}.has-focus.sc-ion-input-md-h input.sc-ion-input-md,.has-focus.sc-ion-input-md-h a.sc-ion-input-md,.has-focus.sc-ion-input-md-h button.sc-ion-input-md{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-md-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-md-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.input-wrapper.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;width:100%}.ion-touched.ion-invalid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:12px}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:block;color:var(--ion-color-step-550, #737373)}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:block}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:none}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-md-h input.sc-ion-input-md{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-md,.sc-ion-input-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-md,.input-outline-notch-hidden.sc-ion-input-md{display:none}.input-wrapper.sc-ion-input-md input.sc-ion-input-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text.sc-ion-input-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl),.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:1}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.input-fill-solid.sc-ion-input-md-h{--background:var(--ion-color-step-50, #f2f2f2);--border-color:var(--ion-color-step-500, gray);--border-radius:4px;--padding-start:16px;--padding-end:16px}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.input-fill-solid.ion-valid.sc-ion-input-md-h,.input-fill-solid.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-fill-solid.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}@media (any-hover: hover){.input-fill-solid.sc-ion-input-md-h:hover{--background:var(--ion-color-step-100, #e6e6e6);--border-color:var(--ion-color-step-750, #404040)}}.input-fill-solid.has-focus.sc-ion-input-md-h{--background:var(--ion-color-step-150, #d9d9d9);--border-color:var(--ion-color-step-750, #404040)}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl].input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}@supports selector(:dir(rtl)){.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}}.input-fill-solid.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{max-width:calc(100% / 0.75)}.input-fill-outline.sc-ion-input-md-h{--border-color:var(--ion-color-step-300, #b3b3b3);--border-radius:4px;--padding-start:16px;--padding-end:16px}.input-fill-outline.input-shape-round.sc-ion-input-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h,.input-fill-outline.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.input-fill-outline.sc-ion-input-md-h:hover{--border-color:var(--ion-color-step-750, #404040)}}.input-fill-outline.has-focus.sc-ion-input-md-h{--border-width:2px;--border-color:var(--highlight-color)}.input-fill-outline.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}.input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl),.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{position:relative}.has-focus.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}.input-fill-outline.sc-ion-input-md-h .input-outline-container.sc-ion-input-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{pointer-events:none}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.input-fill-outline.sc-ion-input-md-h .notch-spacer.sc-ion-input-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl].input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl] .input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px}@supports selector(:dir(rtl)){.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md:dir(rtl){border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px}}.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px;-ms-flex-positive:1;flex-grow:1}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl].input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl] .input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius)}@supports selector(:dir(rtl)){.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius)}}.has-focus.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.has-value.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{border-top:none}.sc-ion-input-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));font-size:inherit}.legacy-input.sc-ion-input-md-h{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:8px}.item-label-stacked.sc-ion-input-md-h,.item-label-stacked .sc-ion-input-md-h,.item-label-floating.sc-ion-input-md-h,.item-label-floating .sc-ion-input-md-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0}.input-clear-icon.sc-ion-input-md ion-icon.sc-ion-input-md{width:22px;height:22px}.legacy-input.sc-ion-input-md-h .native-input[disabled].sc-ion-input-md,.input-disabled.sc-ion-input-md-h{opacity:0.38}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{letter-spacing:0.0333333333em}.sc-ion-input-md-h:not(.legacy-input){min-height:56px}.input-label-placement-floating.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.has-focus.input-label-placement-floating.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-stacked.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.input-highlight.sc-ion-input-md{bottom:-1px;position:absolute;width:100%;height:2px;-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}@supports (inset-inline-start: 0){.input-highlight.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.input-highlight.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-md .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.input-highlight.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.has-focus.sc-ion-input-md-h .input-highlight.sc-ion-input-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{bottom:0}@supports (inset-inline-start: 0){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h -no-combinator.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl].in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.input-shape-round.sc-ion-input-md-h{--border-radius:16px}",J2=kt(class extends _t{constructor(){super(),this.__registerHost(),this.ionInput=tt(this,"ionInput",7),this.ionChange=tt(this,"ionChange",7),this.ionBlur=tt(this,"ionBlur",7),this.ionFocus=tt(this,"ionFocus",7),this.ionStyle=tt(this,"ionStyle",7),this.inputId="ion-input-".concat(X2++),this.inheritedAttributes={},this.isComposing=!1,this.hasLoggedDeprecationWarning=!1,this.didInputClearOnEdit=!1,this.onInput=e=>{const t=e.target;t&&(this.value=t.value||""),this.emitInputChange(e)},this.onChange=e=>{this.emitValueChange(e)},this.onBlur=e=>{this.hasFocus=!1,this.emitStyle(),this.focusedValue!==this.value&&this.emitValueChange(e),this.didInputClearOnEdit=!1,this.ionBlur.emit(e)},this.onFocus=e=>{this.hasFocus=!0,this.focusedValue=this.value,this.emitStyle(),this.ionFocus.emit(e)},this.onKeydown=e=>{this.checkClearOnEdit(e)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=e=>{this.clearInput&&!this.readonly&&!this.disabled&&e&&(e.preventDefault(),e.stopPropagation(),this.setFocus()),this.value="",this.emitInputChange(e)},this.hasFocus=!1,this.color=void 0,this.accept=void 0,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.clearOnEdit=void 0,this.counter=!1,this.counterFormatter=void 0,this.debounce=void 0,this.disabled=!1,this.enterkeyhint=void 0,this.errorText=void 0,this.fill=void 0,this.inputmode=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.legacy=void 0,this.max=void 0,this.maxlength=void 0,this.min=void 0,this.minlength=void 0,this.multiple=void 0,this.name=this.inputId,this.pattern=void 0,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.shape=void 0,this.spellcheck=!1,this.step=void 0,this.size=void 0,this.type="text",this.value=""}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:n}=this;this.ionInput=t===void 0?n!=null?n:e:oT(e,t)}disabledChanged(){this.emitStyle()}placeholderChanged(){this.emitStyle()}valueChanged(){const e=this.nativeInput,t=this.getValue();e&&e.value!==t&&!this.isComposing&&(e.value=t),this.emitStyle()}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},Oa(this.el)),Ic(this.el,["tabindex","title","data-form-type"]))}connectedCallback(){const{el:e}=this;this.legacyFormController=DT(e),this.slotMutationController=H2(e,"label",()=>qs(this)),this.notchController=W2(e,()=>this.notchSpacerEl,()=>this.labelSlot),this.emitStyle(),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){this.originalIonInput=this.ionInput}componentDidRender(){var e;(e=this.notchController)===null||e===void 0||e.calculateNotchWidth()}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}async setFocus(){this.nativeInput&&this.nativeInput.focus()}getInputElement(){return Promise.resolve(this.nativeInput)}emitValueChange(e){const{value:t}=this,n=t==null?t:t.toString();this.focusedValue=n,this.ionChange.emit({value:n,event:e})}emitInputChange(e){const{value:t}=this,n=t==null?t:t.toString();this.ionInput.emit({value:n,event:e})}shouldClearOnEdit(){const{type:e,clearOnEdit:t}=this;return t===void 0?e==="password":t}getValue(){return typeof this.value=="number"?this.value.toString():(this.value||"").toString()}emitStyle(){this.legacyFormController.hasLegacyControl()&&this.ionStyle.emit({interactive:!0,input:!0,"has-placeholder":this.placeholder!==void 0,"has-value":this.hasValue(),"has-focus":this.hasFocus,"interactive-disabled":this.disabled})}checkClearOnEdit(e){this.shouldClearOnEdit()&&(!this.didInputClearOnEdit&&this.hasValue()&&e.key!=="Enter"&&e.key!=="Tab"&&(this.value="",this.emitInputChange(e)),this.didInputClearOnEdit=!0)}hasValue(){return this.getValue().length>0}renderHintText(){const{helperText:e,errorText:t}=this;return[he("div",{class:"helper-text"},e),he("div",{class:"error-text"},t)]}renderCounter(){const{counter:e,maxlength:t,counterFormatter:n,value:r}=this;if(!(e!==!0||t===void 0))return he("div",{class:"counter"},Q2(r,t,n))}renderBottomContent(){const{counter:e,helperText:t,errorText:n,maxlength:r}=this;if(!(!(t||n)&&!(e===!0&&r!==void 0)))return he("div",{class:"input-bottom"},this.renderHintText(),this.renderCounter())}renderLabel(){const{label:e}=this;return he("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},e===void 0?he("slot",{name:"label"}):he("div",{class:"label-text"},e))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return this.label!==void 0||this.labelSlot!==null}renderLabelContainer(){return nt(this)==="md"&&this.fill==="outline"?[he("div",{class:"input-outline-container"},he("div",{class:"input-outline-start"}),he("div",{class:{"input-outline-notch":!0,"input-outline-notch-hidden":!this.hasLabel}},he("div",{class:"notch-spacer","aria-hidden":"true",ref:n=>this.notchSpacerEl=n},this.label)),he("div",{class:"input-outline-end"})),this.renderLabel()]:this.renderLabel()}renderInput(){const{disabled:e,fill:t,readonly:n,shape:r,inputId:s,labelPlacement:a}=this,o=nt(this),l=this.getValue(),c=xn("ion-item",this.el),u=o==="md"&&t!=="outline"&&!c;return he(Nt,{class:Kn(this.color,{[o]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus,["input-fill-".concat(t)]:t!==void 0,["input-shape-".concat(r)]:r!==void 0,["input-label-placement-".concat(a)]:!0,"in-item":c,"in-item-color":xn("ion-item.ion-color",this.el),"input-disabled":e})},he("label",{class:"input-wrapper"},this.renderLabelContainer(),he("div",{class:"native-wrapper"},he("input",Object.assign({class:"native-input",ref:d=>this.nativeInput=d,id:s,disabled:e,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:n,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:l,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown,onCompositionstart:this.onCompositionStart,onCompositionend:this.onCompositionEnd},this.inheritedAttributes)),this.clearInput&&!n&&!e&&he("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:d=>{d.preventDefault()},onClick:this.clearTextInput},he("ion-icon",{"aria-hidden":"true",icon:o==="ios"?av:ov}))),u&&he("div",{class:"input-highlight"})),this.renderBottomContent())}renderLegacyInput(){this.hasLoggedDeprecationWarning||(qn('ion-input now requires providing a label with either the "label" property or the "aria-label" attribute. To migrate, remove any usage of "ion-label" and pass the label text to either the "label" property or the "aria-label" attribute.\n\nExample: <ion-input label="Email"></ion-input>\nExample with aria-label: <ion-input aria-label="Email"></ion-input>\n\nFor inputs that do not render the label immediately next to the input, developers may continue to use "ion-label" but must manually associate the label with the input by using "aria-labelledby".\n\nDevelopers can use the "legacy" property to continue using the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.',this.el),this.legacy&&qn('ion-input is being used with the "legacy" property enabled which will forcibly enable the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.\n\nDevelopers can dismiss this warning by removing their usage of the "legacy" property and using the new input syntax.',this.el),this.hasLoggedDeprecationWarning=!0);const e=nt(this),t=this.getValue(),n=this.inputId+"-lbl",r=dy(this.el);return r&&(r.id=n),he(Nt,{"aria-disabled":this.disabled?"true":null,class:Kn(this.color,{[e]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus,"legacy-input":!0,"in-item-color":xn("ion-item.ion-color",this.el)})},he("input",Object.assign({class:"native-input",ref:s=>this.nativeInput=s,"aria-labelledby":r?r.id:null,disabled:this.disabled,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:t,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown},this.inheritedAttributes)),this.clearInput&&!this.readonly&&!this.disabled&&he("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:s=>{s.preventDefault()},onClick:this.clearTextInput},he("ion-icon",{"aria-hidden":"true",icon:e==="ios"?av:ov})))}render(){const{legacyFormController:e}=this;return e.hasLegacyControl()?this.renderLegacyInput():this.renderInput()}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],placeholder:["placeholderChanged"],value:["valueChanged"]}}static get style(){return{ios:K2,md:Y2}}},[38,"ion-input",{color:[513],accept:[1],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearOnEdit:[4,"clear-on-edit"],counter:[4],counterFormatter:[16],debounce:[2],disabled:[4],enterkeyhint:[1],errorText:[1,"error-text"],fill:[1],inputmode:[1],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],legacy:[4],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[4],required:[4],shape:[1],spellcheck:[4],step:[1],size:[2],type:[1],value:[1032],hasFocus:[32],setFocus:[64],getInputElement:[64]}]);let X2=0;function Z2(){if(typeof customElements>"u")return;["ion-input","ion-icon"].forEach(e=>{switch(e){case"ion-input":customElements.get(e)||customElements.define(e,J2);break;case"ion-icon":customElements.get(e)||my();break}})}const eO=Z2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const tO=g2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const nO="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}.list-ios.list-inset ion-item:last-child{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-ios-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 0.55px 0}.list-ios-lines-inset .item-lines-default{--inner-border-width:0 0 0.55px 0;--border-width:0px}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",iO="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}@supports (inset-inline-start: 0){.list-md>.input:last-child::after{inset-inline-start:0}}@supports not (inset-inline-start: 0){.list-md>.input:last-child::after{left:0}:host-context([dir=rtl]) .list-md>.input:last-child::after{left:unset;right:unset;right:0}[dir=rtl] .list-md>.input:last-child::after{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.list-md>.input:last-child::after:dir(rtl){left:unset;right:unset;right:0}}}.list-md.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}.list-md.list-inset ion-item:first-child{--border-radius:2px 2px 0 0}.list-md.list-inset ion-item:last-child{--border-radius:0 0 2px, 2px;--border-width:0;--inner-border-width:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-md-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 1px 0}.list-md-lines-inset .item-lines-default{--inner-border-width:0 0 1px 0;--border-width:0px}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",rO=kt(class extends _t{constructor(){super(),this.__registerHost(),this.lines=void 0,this.inset=!1}async closeSlidingItems(){const e=this.el.querySelector("ion-item-sliding");return e!=null&&e.closeOpened?e.closeOpened():!1}render(){const e=nt(this),{lines:t,inset:n}=this;return he(Nt,{role:"list",class:{[e]:!0,["list-".concat(e)]:!0,"list-inset":n,["list-lines-".concat(t)]:t!==void 0,["list-".concat(e,"-lines-").concat(t)]:t!==void 0}})}get el(){return this}static get style(){return{ios:nO,md:iO}}},[32,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);function sO(){if(typeof customElements>"u")return;["ion-list"].forEach(e=>{switch(e){case"ion-list":customElements.get(e)||customElements.define(e,rO);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const aO=sO,oO=":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{-webkit-transform:translateX(-9999px);transform:translateX(-9999px);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{inset-inline-start:0;inset-inline-end:auto}}@supports not (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{left:0;right:auto}:host-context([dir=rtl]):host(.menu-side-start) .menu-inner,:host-context([dir=rtl]).menu-side-start .menu-inner{left:unset;right:unset;left:auto;right:0}@supports selector(:dir(rtl)){:host(.menu-side-start) .menu-inner:dir(rtl){left:unset;right:unset;left:auto;right:0}}}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{inset-inline-start:auto;inset-inline-end:0}}@supports not (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{left:auto;right:0}:host-context([dir=rtl]):host(.menu-side-end) .menu-inner,:host-context([dir=rtl]).menu-side-end .menu-inner{left:unset;right:unset;left:0;right:auto}@supports selector(:dir(rtl)){:host(.menu-side-end) .menu-inner:dir(rtl){left:unset;right:unset;left:0;right:auto}}}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){width:var(--width);min-width:var(--min-width);max-width:var(--max-width)}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none !important;transform:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}:host(.menu-pane-visible) ion-backdrop{display:hidden !important;}:host(.menu-type-push){z-index:1000}:host(.menu-type-push) .show-backdrop{display:block}",lO=":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{-webkit-transform:translateX(-9999px);transform:translateX(-9999px);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{inset-inline-start:0;inset-inline-end:auto}}@supports not (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{left:0;right:auto}:host-context([dir=rtl]):host(.menu-side-start) .menu-inner,:host-context([dir=rtl]).menu-side-start .menu-inner{left:unset;right:unset;left:auto;right:0}@supports selector(:dir(rtl)){:host(.menu-side-start) .menu-inner:dir(rtl){left:unset;right:unset;left:auto;right:0}}}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{inset-inline-start:auto;inset-inline-end:0}}@supports not (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{left:auto;right:0}:host-context([dir=rtl]):host(.menu-side-end) .menu-inner,:host-context([dir=rtl]).menu-side-end .menu-inner{left:unset;right:unset;left:0;right:auto}@supports selector(:dir(rtl)){:host(.menu-side-end) .menu-inner:dir(rtl){left:unset;right:unset;left:0;right:auto}}}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){width:var(--width);min-width:var(--min-width);max-width:var(--max-width)}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none !important;transform:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}:host(.menu-pane-visible) ion-backdrop{display:hidden !important;}:host(.menu-type-overlay) .menu-inner{-webkit-box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18);box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18)}",cO="cubic-bezier(0.32,0.72,0,1)",uO="cubic-bezier(0.0,0.0,0.2,1)",dO="cubic-bezier(1, 0, 0.68, 0.28)",hO="cubic-bezier(0.4, 0, 0.6, 1)",bv='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',fO=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionWillOpen=tt(this,"ionWillOpen",7),this.ionWillClose=tt(this,"ionWillClose",7),this.ionDidOpen=tt(this,"ionDidOpen",7),this.ionDidClose=tt(this,"ionDidClose",7),this.ionMenuChange=tt(this,"ionMenuChange",7),this.lastOnEnd=0,this.blocker=Lh.createBlocker({disableScroll:!0}),this.didLoad=!1,this.isAnimating=!1,this._isOpen=!1,this.inheritedAttributes={},this.handleFocus=e=>{const t=Od(document);t&&!t.contains(this.el)||this.trapKeyboardFocus(e,document)},this.isPaneVisible=!1,this.isEndSide=!1,this.contentId=void 0,this.menuId=void 0,this.type=void 0,this.disabled=!1,this.side="start",this.swipeGesture=!0,this.maxEdgeStart=50}typeChanged(e,t){const n=this.contentEl;n&&(t!==void 0&&n.classList.remove("menu-content-".concat(t)),n.classList.add("menu-content-".concat(e)),n.removeAttribute("style")),this.menuInnerEl&&this.menuInnerEl.removeAttribute("style"),this.animation=void 0}disabledChanged(){this.updateState(),this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}sideChanged(){this.isEndSide=G0(this.side),this.animation=void 0}swipeGestureChanged(){this.updateState()}async connectedCallback(){typeof customElements<"u"&&customElements!=null&&await customElements.whenDefined("ion-menu"),this.type===void 0&&(this.type=Et.get("menuType","overlay"));const e=this.contentId!==void 0?document.getElementById(this.contentId):null;if(e===null){console.error('Menu: must have a "content" element to listen for drag events on.');return}this.el.contains(e)&&console.error('Menu: "contentId" should refer to the main view\'s ion-content, not the ion-content inside of the ion-menu.'),this.contentEl=e,e.classList.add("menu-content"),this.typeChanged(this.type,void 0),this.sideChanged(),Ur._register(this),this.menuChanged(),this.gesture=(await ni(()=>Promise.resolve().then(()=>bT),void 0)).createGesture({el:document,gestureName:"menu-swipe",gesturePriority:30,threshold:10,blurOnStart:!0,canStart:t=>this.canStart(t),onWillStart:()=>this.onWillStart(),onStart:()=>this.onStart(),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.updateState()}componentWillLoad(){this.inheritedAttributes=Oa(this.el)}async componentDidLoad(){this.didLoad=!0,this.menuChanged(),this.updateState()}menuChanged(){this.didLoad&&this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}async disconnectedCallback(){await this.close(!1),this.blocker.destroy(),Ur._unregister(this),this.animation&&this.animation.destroy(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.animation=void 0,this.contentEl=void 0}onSplitPaneChanged(e){this.isPaneVisible=e.detail.isPane(this.el),this.updateState()}onBackdropClick(e){this._isOpen&&this.lastOnEnd<e.timeStamp-100&&(e.composedPath&&!e.composedPath().includes(this.menuInnerEl))&&(e.preventDefault(),e.stopPropagation(),this.close())}onKeydown(e){e.key==="Escape"&&this.close()}isOpen(){return Promise.resolve(this._isOpen)}isActive(){return Promise.resolve(this._isActive())}open(e=!0){return this.setOpen(!0,e)}close(e=!0){return this.setOpen(!1,e)}toggle(e=!0){return this.setOpen(!this._isOpen,e)}setOpen(e,t=!0){return Ur._setOpen(this,e,t)}focusFirstDescendant(){const{el:e}=this,t=e.querySelector(bv);t?t.focus():e.focus()}focusLastDescendant(){const{el:e}=this,t=Array.from(e.querySelectorAll(bv)),n=t.length>0?t[t.length-1]:null;n?n.focus():e.focus()}trapKeyboardFocus(e,t){const n=e.target;n&&(this.el.contains(n)?this.lastFocus=n:(this.focusFirstDescendant(),this.lastFocus===t.activeElement&&this.focusLastDescendant()))}async _setOpen(e,t=!0){return!this._isActive()||this.isAnimating||e===this._isOpen?!1:(this.beforeAnimation(e),await this.loadAnimation(),await this.startAnimation(e,t),this.afterAnimation(e),!0)}async loadAnimation(){const e=this.menuInnerEl.offsetWidth,t=G0(this.side);e===this.width&&this.animation!==void 0&&t===this.isEndSide||(this.width=e,this.isEndSide=t,this.animation&&(this.animation.destroy(),this.animation=void 0),this.animation=await Ur._createAnimation(this.type,this),Et.getBoolean("animated",!0)||this.animation.duration(0),this.animation.fill("both"))}async startAnimation(e,t){const n=!e,r=nt(this),s=r==="ios"?cO:uO,a=r==="ios"?dO:hO,o=this.animation.direction(n?"reverse":"normal").easing(n?a:s).onFinish(()=>{o.getDirection()==="reverse"&&o.direction("normal")});t?await o.play():o.play({sync:!0})}_isActive(){return!this.disabled&&!this.isPaneVisible}canSwipe(){return this.swipeGesture&&!this.isAnimating&&this._isActive()}canStart(e){return!!document.querySelector("ion-modal.show-modal")||!this.canSwipe()?!1:this._isOpen?!0:Ur._getOpenSync()?!1:pO(window,e.currentX,this.isEndSide,this.maxEdgeStart)}onWillStart(){return this.beforeAnimation(!this._isOpen),this.loadAnimation()}onStart(){if(!this.isAnimating||!this.animation){on(!1,"isAnimating has to be true");return}this.animation.progressStart(!0,this._isOpen?1:0)}onMove(e){if(!this.isAnimating||!this.animation){on(!1,"isAnimating has to be true");return}const n=vv(e.deltaX,this._isOpen,this.isEndSide)/this.width;this.animation.progressStep(this._isOpen?1-n:n)}onEnd(e){if(!this.isAnimating||!this.animation){on(!1,"isAnimating has to be true");return}const t=this._isOpen,n=this.isEndSide,r=vv(e.deltaX,t,n),s=this.width,a=r/s,o=e.velocityX,l=s/2,c=o>=0&&(o>.2||e.deltaX>l),u=o<=0&&(o<-.2||e.deltaX<-l),d=t?n?c:u:n?u:c;let h=!t&&d;t&&!d&&(h=!0),this.lastOnEnd=e.currentTime;let f=d?.001:-.001;const m=a<0?.01:a;f+=yc([0,0],[.4,0],[.6,1],[1,1],Er(0,m,.9999))[0]||0;const p=this._isOpen?!d:d;this.animation.easing("cubic-bezier(0.4, 0.0, 0.6, 1)").onFinish(()=>this.afterAnimation(h),{oneTimeCallback:!0}).progressEnd(p?1:0,this._isOpen?1-f:f,300)}beforeAnimation(e){on(!this.isAnimating,"_before() should not be called while animating"),this.el.classList.add(wv),this.el.setAttribute("tabindex","0"),this.backdropEl&&this.backdropEl.classList.add(Ev),this.contentEl&&(this.contentEl.classList.add(xv),this.contentEl.setAttribute("aria-hidden","true")),this.blocker.block(),this.isAnimating=!0,e?this.ionWillOpen.emit():this.ionWillClose.emit()}afterAnimation(e){var t;on(this.isAnimating,"_before() should be called while animating"),this._isOpen=e,this.isAnimating=!1,this._isOpen||this.blocker.unblock(),e?(this.ionDidOpen.emit(),((t=document.activeElement)===null||t===void 0?void 0:t.closest("ion-menu"))!==this.el&&this.el.focus(),document.addEventListener("focus",this.handleFocus,!0)):(this.el.classList.remove(wv),this.el.removeAttribute("tabindex"),this.contentEl&&(this.contentEl.classList.remove(xv),this.contentEl.removeAttribute("aria-hidden")),this.backdropEl&&this.backdropEl.classList.remove(Ev),this.animation&&this.animation.stop(),this.ionDidClose.emit(),document.removeEventListener("focus",this.handleFocus,!0))}updateState(){const e=this._isActive();this.gesture&&this.gesture.enable(e&&this.swipeGesture),!e&&this._isOpen&&this.forceClosing(),ko!=null&&ko.contains(this.el)&&(this.disabled||Ur._setActiveMenu(this)),on(!this.isAnimating,"can not be animating")}forceClosing(){on(this._isOpen,"menu cannot be closed"),this.isAnimating=!0,this.animation.direction("reverse").play({sync:!0}),this.afterAnimation(!1)}render(){const{type:e,disabled:t,isPaneVisible:n,inheritedAttributes:r,side:s}=this,a=nt(this);return he(Nt,{role:"navigation","aria-label":r["aria-label"]||"menu",class:{[a]:!0,["menu-type-".concat(e)]:!0,"menu-enabled":!t,["menu-side-".concat(s)]:!0,"menu-pane-visible":n}},he("div",{class:"menu-inner",part:"container",ref:o=>this.menuInnerEl=o},he("slot",null)),he("ion-backdrop",{ref:o=>this.backdropEl=o,class:"menu-backdrop",tappable:!1,stopPropagation:!1,part:"backdrop"}))}get el(){return this}static get watchers(){return{type:["typeChanged"],disabled:["disabledChanged"],side:["sideChanged"],swipeGesture:["swipeGestureChanged"]}}static get style(){return{ios:oO,md:lO}}},[33,"ion-menu",{contentId:[513,"content-id"],menuId:[513,"menu-id"],type:[1025],disabled:[1028],side:[513],swipeGesture:[4,"swipe-gesture"],maxEdgeStart:[2,"max-edge-start"],isPaneVisible:[32],isEndSide:[32],isOpen:[64],isActive:[64],open:[64],close:[64],toggle:[64],setOpen:[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]]),vv=(i,e,t)=>Math.max(0,e!==t?-i:i),pO=(i,e,t,n)=>t?e>=i.innerWidth-n:e<=n,wv="show-menu",Ev="show-backdrop",xv="menu-content-open";function mO(){if(typeof customElements>"u")return;["ion-menu","ion-backdrop"].forEach(e=>{switch(e){case"ion-menu":customElements.get(e)||customElements.define(e,fO);break;case"ion-backdrop":customElements.get(e)||OT();break}})}const gO=mO;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const FT=async i=>{const e=await Ur.get(i);return!!(e&&await e.isActive())};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yO=':host{--background:transparent;--color-focused:currentColor;--border-radius:initial;--padding-top:0;--padding-bottom:0;color:var(--color);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;pointer-events:none}:host(.menu-button-hidden){display:none}:host(.menu-button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity, 0)}}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #3880ff);--padding-start:5px;--padding-end:5px;height:32px;font-size:31px}:host(.ion-activated){opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',bO=':host{--background:transparent;--color-focused:currentColor;--border-radius:initial;--padding-top:0;--padding-bottom:0;color:var(--color);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;pointer-events:none}:host(.menu-button-hidden){display:none}:host(.menu-button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity, 0)}}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:.04;--border-radius:50%;--color:initial;--padding-start:8px;--padding-end:8px;width:48px;height:48px;font-size:24px}:host(.ion-color.ion-focused)::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}',vO=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.onClick=async()=>Ur.toggle(this.menu),this.visible=!1,this.color=void 0,this.disabled=!1,this.menu=void 0,this.autoHide=!0,this.type="button"}componentWillLoad(){this.inheritedAttributes=Oa(this.el)}componentDidLoad(){this.visibilityChanged()}async visibilityChanged(){this.visible=await FT(this.menu)}render(){const{color:e,disabled:t,inheritedAttributes:n}=this,r=nt(this),s=Et.get("menuIcon",r==="ios"?c$:u$),a=this.autoHide&&!this.visible,o={type:this.type},l=n["aria-label"]||"menu";return he(Nt,{onClick:this.onClick,"aria-disabled":t?"true":null,"aria-hidden":a?"true":null,class:Kn(e,{[r]:!0,button:!0,"menu-button-hidden":a,"menu-button-disabled":t,"in-toolbar":xn("ion-toolbar",this.el),"in-toolbar-color":xn("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0})},he("button",Object.assign({},o,{disabled:t,class:"button-native",part:"native","aria-label":l}),he("span",{class:"button-inner"},he("slot",null,he("ion-icon",{part:"icon",icon:s,mode:r,lazy:!1,"aria-hidden":"true"}))),r==="md"&&he("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:yO,md:bO}}},[33,"ion-menu-button",{color:[513],disabled:[4],menu:[1],autoHide:[4,"auto-hide"],type:[1],visible:[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]);function wO(){if(typeof customElements>"u")return;["ion-menu-button","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-menu-button":customElements.get(e)||customElements.define(e,vO);break;case"ion-icon":customElements.get(e)||my();break;case"ion-ripple-effect":customElements.get(e)||qh();break}})}const EO=wO;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xO=":host(.menu-toggle-hidden){display:none}",TO=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.onClick=()=>Ur.toggle(this.menu),this.visible=!1,this.menu=void 0,this.autoHide=!0}connectedCallback(){this.visibilityChanged()}async visibilityChanged(){this.visible=await FT(this.menu)}render(){const e=nt(this),t=this.autoHide&&!this.visible;return he(Nt,{onClick:this.onClick,"aria-hidden":t?"true":null,class:{[e]:!0,"menu-toggle-hidden":t}},he("slot",null))}static get style(){return xO}},[1,"ion-menu-toggle",{menu:[1],autoHide:[4,"auto-hide"],visible:[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]);function SO(){if(typeof customElements>"u")return;["ion-menu-toggle"].forEach(e=>{switch(e){case"ion-menu-toggle":customElements.get(e)||customElements.define(e,TO);break}})}const CO=SO,jT=1,UT=2,Ld=3;class $m{constructor(e,t){this.component=e,this.params=t,this.state=jT}async init(e){if(this.state=UT,!this.element){const t=this.component;this.element=await NT(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){on(this.state!==Ld,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=Ld}}const Tv=(i,e,t)=>!i||i.component!==e?!1:lT(i.params,t),Sv=(i,e)=>i?i instanceof $m?i:new $m(i,e):null,AO=i=>i.map(e=>e instanceof $m?e:"component"in e?Sv(e.component,e.componentProps===null?void 0:e.componentProps):Sv(e,void 0)).filter(e=>e!==null),NO=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",kO=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=tt(this,"ionNavWillLoad",7),this.ionNavWillChange=tt(this,"ionNavWillChange",3),this.ionNavDidChange=tt(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const e=nt(this);this.swipeGesture=Et.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await ni(()=>import("./swipe-back-28febc37.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)zr(e.element,Yf),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,t,n,r){return this.insert(-1,e,t,n,r)}insert(e,t,n,r,s){return this.insertPages(e,[{component:t,componentProps:n}],r,s)}insertPages(e,t,n,r){return this.queueTrns({insertStart:e,insertViews:t,opts:n},r)}pop(e,t){return this.removeIndex(-1,1,e,t)}popTo(e,t,n){const r={removeStart:-1,removeCount:-1,opts:t};return typeof e=="object"&&e.component?(r.removeView=e,r.removeStart=1):typeof e=="number"&&(r.removeStart=e+1),this.queueTrns(r,n)}popToRoot(e,t){return this.removeIndex(1,-1,e,t)}removeIndex(e,t=1,n,r){return this.queueTrns({removeStart:e,removeCount:t,opts:n},r)}setRoot(e,t,n,r){return this.setPages([{component:e,componentProps:t}],n,r)}setPages(e,t,n){return t!=null||(t={}),t.animated!==!0&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},n)}setRouteId(e,t,n,r){const s=this.getActiveSync();if(Tv(s,e,t))return Promise.resolve({changed:!1,element:s.element});let a;const o=new Promise(u=>a=u);let l;const c={updateURL:!1,viewIsReady:u=>{let d;const h=new Promise(f=>d=f);return a({changed:!0,element:u,markVisible:async()=>{d(),await l}}),h}};if(n==="root")l=this.setRoot(e,t,c);else{const u=this.views.find(d=>Tv(d,e,t));u?l=this.popTo(u,Object.assign(Object.assign({},c),{direction:"back",animationBuilder:r})):n==="forward"?l=this.push(e,t,Object.assign(Object.assign({},c),{animationBuilder:r})):n==="back"&&(l=this.setRoot(e,t,Object.assign(Object.assign({},c),{direction:"back",animated:!0,animationBuilder:r})))}return o}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const t=this.views,n=t.indexOf(e);return n>0?t[n-1]:void 0}async queueTrns(e,t){var n,r;if(this.isTransitioning&&(!((n=e.opts)===null||n===void 0)&&n.skipIfBusy))return!1;const s=new Promise((a,o)=>{e.resolve=a,e.reject=o});if(e.done=t,e.opts&&e.opts.updateURL!==!1&&this.useRouter){const a=document.querySelector("ion-router");if(a){const o=await a.canTransition();if(o===!1)return!1;if(typeof o=="string")return a.push(o,e.opts.direction||"back"),!1}}return((r=e.insertViews)===null||r===void 0?void 0:r.length)===0&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),s}success(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),t.opts.updateURL!==!1&&this.useRouter){const n=document.querySelector("ion-router");if(n){const r=e.direction==="back"?"back":"forward";n.navChanged(r)}}}failed(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}this.transInstr.length=0,this.fireError(e,t)}fireError(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return e?(this.runTransition(e),!0):!1}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const t=this.getActiveSync(),n=this.getEnteringView(e,t);if(!t&&!n)throw new Error("no views in the stack to be removed");n&&n.state===jT&&await n.init(this.el),this.postViewInit(n,t,e);const r=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&n!==t;r&&e.opts&&t&&(e.opts.direction==="back"&&(e.opts.animationBuilder=e.opts.animationBuilder||(n==null?void 0:n.animationBuilder)),t.animationBuilder=e.opts.animationBuilder);let s;r?s=await this.transition(n,t,e):s={hasCompleted:!0,requiresTransition:!1},this.success(s,e),this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var t,n,r;const s=this.views.length;if((t=e.opts)!==null&&t!==void 0||(e.opts={}),(n=(r=e.opts).delegate)!==null&&n!==void 0||(r.delegate=this.delegate),e.removeView!==void 0){on(e.removeStart!==void 0,"removeView needs removeStart"),on(e.removeCount!==void 0,"removeView needs removeCount");const l=this.views.indexOf(e.removeView);if(l<0)throw new Error("removeView was not found");e.removeStart+=l}e.removeStart!==void 0&&(e.removeStart<0&&(e.removeStart=s-1),e.removeCount<0&&(e.removeCount=s-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===s),e.insertViews&&((e.insertStart<0||e.insertStart>s)&&(e.insertStart=s),e.enteringRequiresTransition=e.insertStart===s);const a=e.insertViews;if(!a)return;on(a.length>0,"length can not be zero");const o=AO(a);if(o.length===0)throw new Error("invalid views to insert");for(const l of o){l.delegate=e.opts.delegate;const c=l.nav;if(c&&c!==this)throw new Error("inserted view was already inserted");if(l.state===Ld)throw new Error("inserted view was already destroyed")}e.insertViews=o}getEnteringView(e,t){const n=e.insertViews;if(n!==void 0)return n[n.length-1];const r=e.removeStart;if(r!==void 0){const s=this.views,a=r+e.removeCount;for(let o=s.length-1;o>=0;o--){const l=s[o];if((o<r||o>=a)&&l!==t)return l}}}postViewInit(e,t,n){var r,s,a;on(t||e,"Both leavingView and enteringView are null"),on(n.resolve,"resolve must be valid"),on(n.reject,"reject must be valid");const o=n.opts,{insertViews:l,removeStart:c,removeCount:u}=n;let d;if(c!==void 0&&u!==void 0){on(c>=0,"removeStart can not be negative"),on(u>=0,"removeCount can not be negative"),d=[];for(let f=c;f<c+u;f++){const m=this.views[f];m!==void 0&&m!==e&&m!==t&&d.push(m)}(r=o.direction)!==null&&r!==void 0||(o.direction="back")}const h=this.views.length+((s=l==null?void 0:l.length)!==null&&s!==void 0?s:0)-(u!=null?u:0);if(on(h>=0,"final balance can not be negative"),h===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(l){let f=n.insertStart;for(const m of l)this.insertViewAt(m,f),f++;n.enteringRequiresTransition&&((a=o.direction)!==null&&a!==void 0||(o.direction="forward"))}if(d&&d.length>0){for(const f of d)zr(f.element,cT),zr(f.element,uT),zr(f.element,Yf);for(const f of d)this.destroyView(f)}}async transition(e,t,n){const r=n.opts,s=r.progressAnimation?d=>{d!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,d.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0}),d.progressEnd(0,0,0)):this.sbAni=d}:void 0,a=nt(this),o=e.element,l=t&&t.element,c=Object.assign(Object.assign({mode:a,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:s,animated:this.animated&&Et.getBoolean("animated",!0),enteringEl:o,leavingEl:l},r),{animationBuilder:r.animationBuilder||this.animation||Et.get("navAnimation")}),{hasCompleted:u}=await dT(c);return this.transitionFinish(u,e,t,r)}transitionFinish(e,t,n,r){const s=e?t:n;return s&&this.unmountInactiveViews(s),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:n,direction:r.direction}}insertViewAt(e,t){const n=this.views,r=n.indexOf(e);r>-1?(on(e.nav===this,"view is not part of the nav"),n.splice(r,1),n.splice(t,0,e)):(on(!e.nav,"nav is used"),e.nav=this,n.splice(t,0,e))}removeView(e){on(e.state===UT||e.state===Ld,"view state should be loaded or destroyed");const t=this.views,n=t.indexOf(e);on(n>-1,"view must be part of the stack"),n>=0&&t.splice(n,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const t=this.views,n=t.indexOf(e);for(let r=t.length-1;r>=0;r--){const s=t[r],a=s.element;a&&(r>n?(zr(a,Yf),this.destroyView(s)):r<n&&Cm(a,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,t,n){if(this.sbAni){this.sbAni.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0});let r=e?-.001:.001;e?r+=yc([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=yc([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,r,n)}else this.gestureOrAnimationInProgress=!1}render(){return he("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return NO}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);function _O(){if(typeof customElements>"u")return;["ion-nav"].forEach(e=>{switch(e){case"ion-nav":customElements.get(e)||customElements.define(e,kO);break}})}const RO=_O;function PO(i){return i%1===0?0:i.toString().split(".")[1].length}function IO(i,...e){const t=Math.max(...e.map(n=>PO(n)));return Number(i.toFixed(t))}const $O=":host{--knob-handle-size:calc(var(--knob-size) * 2);display:-ms-flexbox;display:flex;position:relative;-ms-flex:3;flex:3;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.range-disabled){pointer-events:none}::slotted(ion-label){-ms-flex:initial;flex:initial}::slotted(ion-icon[slot]){font-size:24px}.range-slider{position:relative;-ms-flex:1;flex:1;width:100%;height:var(--height);contain:size layout style;cursor:-webkit-grab;cursor:grab;-ms-touch-action:pan-y;touch-action:pan-y}:host(.range-pressed) .range-slider{cursor:-webkit-grabbing;cursor:grabbing}.range-pin{position:absolute;background:var(--ion-color-base);color:var(--ion-color-contrast);text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.range-knob-handle{top:calc((var(--height) - var(--knob-handle-size)) / 2);-webkit-margin-start:calc(0px - var(--knob-handle-size) / 2);margin-inline-start:calc(0px - var(--knob-handle-size) / 2);position:absolute;width:var(--knob-handle-size);height:var(--knob-handle-size);text-align:center}@supports (inset-inline-start: 0){.range-knob-handle{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob-handle{left:0}:host-context([dir=rtl]) .range-knob-handle{left:unset;right:unset;right:0}[dir=rtl] .range-knob-handle{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-knob-handle{left:unset}[dir=rtl] .range-knob-handle{left:unset}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset}}.range-knob-handle:active,.range-knob-handle:focus{outline:none}.range-bar-container{border-radius:var(--bar-border-radius);top:calc((var(--height) - var(--bar-height)) / 2);position:absolute;width:100%;height:var(--bar-height)}@supports (inset-inline-start: 0){.range-bar-container{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-bar-container{left:0}:host-context([dir=rtl]) .range-bar-container{left:unset;right:unset;right:0}[dir=rtl] .range-bar-container{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-bar-container{left:unset}[dir=rtl] .range-bar-container{left:unset}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset}}.range-bar{border-radius:var(--bar-border-radius);position:absolute;width:100%;height:var(--bar-height);background:var(--bar-background);pointer-events:none}.range-knob{border-radius:var(--knob-border-radius);top:calc(50% - var(--knob-size) / 2);position:absolute;width:var(--knob-size);height:var(--knob-size);background:var(--knob-background);-webkit-box-shadow:var(--knob-box-shadow);box-shadow:var(--knob-box-shadow);z-index:2;pointer-events:none}@supports (inset-inline-start: 0){.range-knob{inset-inline-start:calc(50% - var(--knob-size) / 2)}}@supports not (inset-inline-start: 0){.range-knob{left:calc(50% - var(--knob-size) / 2)}:host-context([dir=rtl]) .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}[dir=rtl] .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}}}:host-context([dir=rtl]) .range-knob{left:unset}[dir=rtl] .range-knob{left:unset}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset}}:host(.range-pressed) .range-bar-active{will-change:left, right}:host(.in-item){width:100%}:host([slot=start]),:host([slot=end]){width:auto}:host(.in-item) ::slotted(ion-label){-ms-flex-item-align:center;align-self:center}.range-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit}::slotted([slot=label]){max-width:200px;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}:host(.range-label-placement-start) .range-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.range-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-end) .range-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.range-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host{--knob-border-radius:50%;--knob-background:#ffffff;--knob-box-shadow:0px 0.5px 4px rgba(0, 0, 0, 0.12), 0px 6px 13px rgba(0, 0, 0, 0.12);--knob-size:26px;--bar-height:4px;--bar-background:var(--ion-color-step-900, #e6e6e6);--bar-background-active:var(--ion-color-primary, #3880ff);--bar-border-radius:2px;--height:42px}:host(.legacy-range){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:8px;padding-bottom:8px}:host(.ion-color) .range-bar-active,:host(.ion-color) .range-tick-active{background:var(--ion-color-base)}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-has-pin){padding-top:20px}.range-bar-active{bottom:0;width:auto;background:var(--bar-background-active)}.range-bar-active.has-ticks{border-radius:0;-webkit-margin-start:-2px;margin-inline-start:-2px;-webkit-margin-end:-2px;margin-inline-end:-2px}.range-tick{-webkit-margin-start:-2px;margin-inline-start:-2px;border-radius:0;position:absolute;top:17px;width:4px;height:8px;background:var(--ion-color-step-900, #e6e6e6);pointer-events:none}.range-tick-active{background:var(--bar-background-active)}.range-pin{-webkit-transform:translate3d(0,  28px,  0) scale(0.01);transform:translate3d(0,  28px,  0) scale(0.01);-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;display:inline-block;position:relative;top:-20px;min-width:28px;-webkit-transition:-webkit-transform 120ms ease;transition:-webkit-transform 120ms ease;transition:transform 120ms ease;transition:transform 120ms ease, -webkit-transform 120ms ease;background:transparent;color:var(--ion-text-color, #000);font-size:12px;text-align:center}.range-knob-pressed .range-pin,.range-knob-handle.ion-focused .range-pin{-webkit-transform:translate3d(0,  0,  0) scale(1);transform:translate3d(0,  0,  0) scale(1)}:host(.range-disabled){opacity:0.3}",OO=':host{--knob-handle-size:calc(var(--knob-size) * 2);display:-ms-flexbox;display:flex;position:relative;-ms-flex:3;flex:3;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.range-disabled){pointer-events:none}::slotted(ion-label){-ms-flex:initial;flex:initial}::slotted(ion-icon[slot]){font-size:24px}.range-slider{position:relative;-ms-flex:1;flex:1;width:100%;height:var(--height);contain:size layout style;cursor:-webkit-grab;cursor:grab;-ms-touch-action:pan-y;touch-action:pan-y}:host(.range-pressed) .range-slider{cursor:-webkit-grabbing;cursor:grabbing}.range-pin{position:absolute;background:var(--ion-color-base);color:var(--ion-color-contrast);text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.range-knob-handle{top:calc((var(--height) - var(--knob-handle-size)) / 2);-webkit-margin-start:calc(0px - var(--knob-handle-size) / 2);margin-inline-start:calc(0px - var(--knob-handle-size) / 2);position:absolute;width:var(--knob-handle-size);height:var(--knob-handle-size);text-align:center}@supports (inset-inline-start: 0){.range-knob-handle{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob-handle{left:0}:host-context([dir=rtl]) .range-knob-handle{left:unset;right:unset;right:0}[dir=rtl] .range-knob-handle{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-knob-handle{left:unset}[dir=rtl] .range-knob-handle{left:unset}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset}}.range-knob-handle:active,.range-knob-handle:focus{outline:none}.range-bar-container{border-radius:var(--bar-border-radius);top:calc((var(--height) - var(--bar-height)) / 2);position:absolute;width:100%;height:var(--bar-height)}@supports (inset-inline-start: 0){.range-bar-container{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-bar-container{left:0}:host-context([dir=rtl]) .range-bar-container{left:unset;right:unset;right:0}[dir=rtl] .range-bar-container{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-bar-container{left:unset}[dir=rtl] .range-bar-container{left:unset}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset}}.range-bar{border-radius:var(--bar-border-radius);position:absolute;width:100%;height:var(--bar-height);background:var(--bar-background);pointer-events:none}.range-knob{border-radius:var(--knob-border-radius);top:calc(50% - var(--knob-size) / 2);position:absolute;width:var(--knob-size);height:var(--knob-size);background:var(--knob-background);-webkit-box-shadow:var(--knob-box-shadow);box-shadow:var(--knob-box-shadow);z-index:2;pointer-events:none}@supports (inset-inline-start: 0){.range-knob{inset-inline-start:calc(50% - var(--knob-size) / 2)}}@supports not (inset-inline-start: 0){.range-knob{left:calc(50% - var(--knob-size) / 2)}:host-context([dir=rtl]) .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}[dir=rtl] .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}}}:host-context([dir=rtl]) .range-knob{left:unset}[dir=rtl] .range-knob{left:unset}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset}}:host(.range-pressed) .range-bar-active{will-change:left, right}:host(.in-item){width:100%}:host([slot=start]),:host([slot=end]){width:auto}:host(.in-item) ::slotted(ion-label){-ms-flex-item-align:center;align-self:center}.range-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit}::slotted([slot=label]){max-width:200px;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}:host(.range-label-placement-start) .range-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.range-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-end) .range-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.range-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host{--knob-border-radius:50%;--knob-background:var(--bar-background-active);--knob-box-shadow:none;--knob-size:18px;--bar-height:2px;--bar-background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.26);--bar-background-active:var(--ion-color-primary, #3880ff);--bar-border-radius:0;--height:42px;--pin-background:var(--ion-color-primary, #3880ff);--pin-color:var(--ion-color-primary-contrast, #fff);font-size:12px}::slotted([slot=label]),.label-text{font-size:initial}:host(.legacy-range){-webkit-padding-start:14px;padding-inline-start:14px;-webkit-padding-end:14px;padding-inline-end:14px;padding-top:8px;padding-bottom:8px}:host(.ion-color) .range-bar{background:rgba(var(--ion-color-base-rgb), 0.26)}:host(.ion-color) .range-bar-active,:host(.ion-color) .range-knob,:host(.ion-color) .range-knob::before,:host(.ion-color) .range-pin,:host(.ion-color) .range-pin::before,:host(.ion-color) .range-tick{background:var(--ion-color-base);color:var(--ion-color-contrast)}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:14px;margin-inline-end:14px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:14px;margin-inline-start:14px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-has-pin){padding-top:28px}.range-bar-active{bottom:0;width:auto;background:var(--bar-background-active)}.range-knob{-webkit-transform:scale(0.67);transform:scale(0.67);-webkit-transition-duration:120ms;transition-duration:120ms;-webkit-transition-property:background-color, border, -webkit-transform;transition-property:background-color, border, -webkit-transform;transition-property:transform, background-color, border;transition-property:transform, background-color, border, -webkit-transform;-webkit-transition-timing-function:ease;transition-timing-function:ease;z-index:2}.range-knob::before{border-radius:50%;position:absolute;width:var(--knob-size);height:var(--knob-size);-webkit-transform:scale(1);transform:scale(1);-webkit-transition:0.267s cubic-bezier(0, 0, 0.58, 1);transition:0.267s cubic-bezier(0, 0, 0.58, 1);background:var(--knob-background);content:"";opacity:0.13;pointer-events:none}@supports (inset-inline-start: 0){.range-knob::before{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob::before{left:0}:host-context([dir=rtl]) .range-knob::before{left:unset;right:unset;right:0}[dir=rtl] .range-knob::before{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob::before:dir(rtl){left:unset;right:unset;right:0}}}.range-tick{position:absolute;top:calc((var(--height) - var(--bar-height)) / 2);width:var(--bar-height);height:var(--bar-height);background:var(--bar-background-active);z-index:1;pointer-events:none}.range-tick-active{background:transparent}.range-pin{padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;border-radius:50%;-webkit-transform:translate3d(0,  0,  0) scale(0.01);transform:translate3d(0,  0,  0) scale(0.01);display:inline-block;position:relative;min-width:28px;height:28px;-webkit-transition:background 120ms ease, -webkit-transform 120ms ease;transition:background 120ms ease, -webkit-transform 120ms ease;transition:transform 120ms ease, background 120ms ease;transition:transform 120ms ease, background 120ms ease, -webkit-transform 120ms ease;background:var(--pin-background);color:var(--pin-color);text-align:center}.range-pin::before{top:3px;-webkit-margin-start:-13px;margin-inline-start:-13px;border-radius:50% 50% 50% 0;position:absolute;width:26px;height:26px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transition:background 120ms ease;transition:background 120ms ease;background:var(--pin-background);content:"";z-index:-1}@supports (inset-inline-start: 0){.range-pin::before{inset-inline-start:50%}}@supports not (inset-inline-start: 0){.range-pin::before{left:50%}:host-context([dir=rtl]) .range-pin::before{left:unset;right:unset;right:50%}[dir=rtl] .range-pin::before{left:unset;right:unset;right:50%}@supports selector(:dir(rtl)){.range-pin::before:dir(rtl){left:unset;right:unset;right:50%}}}:host-context([dir=rtl]) .range-pin::before{left:unset}[dir=rtl] .range-pin::before{left:unset}@supports selector(:dir(rtl)){.range-pin::before:dir(rtl){left:unset}}.range-knob-pressed .range-pin,.range-knob-handle.ion-focused .range-pin{-webkit-transform:translate3d(0,  -24px,  0) scale(1);transform:translate3d(0,  -24px,  0) scale(1)}@media (any-hover: hover){.range-knob-handle:hover .range-knob:before{-webkit-transform:scale(2);transform:scale(2);opacity:0.13}}.range-knob-handle.ion-activated .range-knob:before,.range-knob-handle.ion-focused .range-knob:before,.range-knob-handle.range-knob-pressed .range-knob:before{-webkit-transform:scale(2);transform:scale(2)}.range-knob-handle.ion-focused .range-knob::before{opacity:0.13}.range-knob-handle.ion-activated .range-knob::before,.range-knob-handle.range-knob-pressed .range-knob::before{opacity:0.25}:host(:not(.range-has-pin)) .range-knob-pressed .range-knob,:host(:not(.range-has-pin)) .range-knob-handle.ion-focused .range-knob{-webkit-transform:scale(1);transform:scale(1)}:host(.range-disabled) .range-bar-active,:host(.range-disabled) .range-bar,:host(.range-disabled) .range-tick{background-color:var(--ion-color-step-250, #bfbfbf)}:host(.range-disabled) .range-knob{-webkit-transform:scale(0.55);transform:scale(0.55);outline:5px solid #fff;background-color:var(--ion-color-step-250, #bfbfbf)}:host(.range-disabled) .label-text-wrapper,:host(.range-disabled) ::slotted([slot=start]),:host(.range-disabled) ::slotted([slot=end]){opacity:0.38}',DO=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=tt(this,"ionChange",7),this.ionInput=tt(this,"ionInput",7),this.ionStyle=tt(this,"ionStyle",7),this.ionFocus=tt(this,"ionFocus",7),this.ionBlur=tt(this,"ionBlur",7),this.ionKnobMoveStart=tt(this,"ionKnobMoveStart",7),this.ionKnobMoveEnd=tt(this,"ionKnobMoveEnd",7),this.rangeId="ion-r-".concat(MO++),this.didLoad=!1,this.noUpdate=!1,this.hasFocus=!1,this.inheritedAttributes={},this.contentEl=null,this.initialContentScrollY=!0,this.hasLoggedDeprecationWarning=!1,this.clampBounds=e=>Er(this.min,e,this.max),this.ensureValueInBounds=e=>this.dualKnobs?{lower:this.clampBounds(e.lower),upper:this.clampBounds(e.upper)}:this.clampBounds(e),this.setupGesture=async()=>{const e=this.rangeSlider;e&&(this.gesture=(await ni(()=>Promise.resolve().then(()=>bT),void 0)).createGesture({el:e,gestureName:"range",gesturePriority:100,threshold:0,onStart:t=>this.onStart(t),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.gesture.enable(!this.disabled))},this.handleKeyboard=(e,t)=>{const{ensureValueInBounds:n}=this;let r=this.step;r=r>0?r:1,r=r/(this.max-this.min),t||(r*=-1),e==="A"?this.ratioA=Er(0,this.ratioA+r,1):this.ratioB=Er(0,this.ratioB+r,1),this.ionKnobMoveStart.emit({value:n(this.value)}),this.updateValue(),this.emitValueChange(),this.ionKnobMoveEnd.emit({value:n(this.value)})},this.onBlur=()=>{this.hasFocus&&(this.hasFocus=!1,this.ionBlur.emit(),this.emitStyle())},this.onFocus=()=>{this.hasFocus||(this.hasFocus=!0,this.ionFocus.emit(),this.emitStyle())},this.ratioA=0,this.ratioB=0,this.pressedKnob=void 0,this.color=void 0,this.debounce=void 0,this.name=this.rangeId,this.label=void 0,this.dualKnobs=!1,this.min=0,this.max=100,this.pin=!1,this.pinFormatter=e=>Math.round(e),this.snaps=!1,this.step=1,this.ticks=!0,this.activeBarStart=void 0,this.disabled=!1,this.value=0,this.labelPlacement="start",this.legacy=void 0}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:n}=this;this.ionInput=t===void 0?n!=null?n:e:oT(e,t)}minChanged(){this.noUpdate||this.updateRatio()}maxChanged(){this.noUpdate||this.updateRatio()}activeBarStartChanged(){const{activeBarStart:e}=this;e!==void 0&&(e>this.max?(qn("Range: The value of activeBarStart (".concat(e,") is greater than the max (").concat(this.max,"). Valid values are greater than or equal to the min value and less than or equal to the max value."),this.el),this.activeBarStart=this.max):e<this.min&&(qn("Range: The value of activeBarStart (".concat(e,") is less than the min (").concat(this.min,"). Valid values are greater than or equal to the min value and less than or equal to the max value."),this.el),this.activeBarStart=this.min))}disabledChanged(){this.gesture&&this.gesture.enable(!this.disabled),this.emitStyle()}valueChanged(){this.noUpdate||this.updateRatio()}componentWillLoad(){this.el.hasAttribute("id")&&(this.rangeId=this.el.getAttribute("id")),this.inheritedAttributes=Oa(this.el)}componentDidLoad(){this.originalIonInput=this.ionInput,this.setupGesture(),this.didLoad=!0}connectedCallback(){const{el:e}=this;this.legacyFormController=DT(e),this.updateRatio(),this.debounceChanged(),this.disabledChanged(),this.activeBarStartChanged(),this.didLoad&&this.setupGesture(),this.contentEl=E2(this.el)}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}getValue(){var e;const t=(e=this.value)!==null&&e!==void 0?e:0;return this.dualKnobs?typeof t=="object"?t:{lower:0,upper:t}:typeof t=="object"?t.upper:t}emitStyle(){this.legacyFormController.hasLegacyControl()&&this.ionStyle.emit({interactive:!0,"interactive-disabled":this.disabled})}emitValueChange(){this.value=this.ensureValueInBounds(this.value),this.ionChange.emit({value:this.value})}onStart(e){const{contentEl:t}=this;t&&(this.initialContentScrollY=x2(t));const n=this.rect=this.rangeSlider.getBoundingClientRect(),r=e.currentX;let s=Er(0,(r-n.left)/n.width,1);Yu(this.el)&&(s=1-s),this.pressedKnob=!this.dualKnobs||Math.abs(this.ratioA-s)<Math.abs(this.ratioB-s)?"A":"B",this.setFocus(this.pressedKnob),this.update(r),this.ionKnobMoveStart.emit({value:this.ensureValueInBounds(this.value)})}onMove(e){this.update(e.currentX)}onEnd(e){const{contentEl:t,initialContentScrollY:n}=this;t&&T2(t,n),this.update(e.currentX),this.pressedKnob=void 0,this.emitValueChange(),this.ionKnobMoveEnd.emit({value:this.ensureValueInBounds(this.value)})}update(e){const t=this.rect;let n=Er(0,(e-t.left)/t.width,1);Yu(this.el)&&(n=1-n),this.snaps&&(n=Ka(np(n,this.min,this.max,this.step),this.min,this.max)),this.pressedKnob==="A"?this.ratioA=n:this.ratioB=n,this.updateValue()}get valA(){return np(this.ratioA,this.min,this.max,this.step)}get valB(){return np(this.ratioB,this.min,this.max,this.step)}get ratioLower(){if(this.dualKnobs)return Math.min(this.ratioA,this.ratioB);const{activeBarStart:e}=this;return e==null?0:Ka(e,this.min,this.max)}get ratioUpper(){return this.dualKnobs?Math.max(this.ratioA,this.ratioB):this.ratioA}updateRatio(){const e=this.getValue(),{min:t,max:n}=this;this.dualKnobs?(this.ratioA=Ka(e.lower,t,n),this.ratioB=Ka(e.upper,t,n)):this.ratioA=Ka(e,t,n)}updateValue(){this.noUpdate=!0;const{valA:e,valB:t}=this;this.value=this.dualKnobs?{lower:Math.min(e,t),upper:Math.max(e,t)}:e,this.ionInput.emit({value:this.value}),this.noUpdate=!1}setFocus(e){if(this.el.shadowRoot){const t=this.el.shadowRoot.querySelector(e==="A"?".range-knob-a":".range-knob-b");t&&t.focus()}}renderLegacyRange(){this.hasLoggedDeprecationWarning||(qn('ion-range now requires providing a label with either the label slot or the "aria-label" attribute. To migrate, remove any usage of "ion-label" and pass the label text to either the component or the "aria-label" attribute.\n\nExample: <ion-range><div slot="label">Volume</div></ion-range>\nExample with aria-label: <ion-range aria-label="Volume"></ion-range>\n\nDevelopers can use the "legacy" property to continue using the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.',this.el),this.legacy&&qn('ion-range is being used with the "legacy" property enabled which will forcibly enable the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.\n\nDevelopers can dismiss this warning by removing their usage of the "legacy" property and using the new range syntax.',this.el),this.hasLoggedDeprecationWarning=!0);const{el:e,pressedKnob:t,disabled:n,pin:r,rangeId:s}=this,a=nt(this);return Q0(!0,e,this.name,JSON.stringify(this.getValue()),n),he(Nt,{onFocusin:this.onFocus,onFocusout:this.onBlur,id:s,class:Kn(this.color,{[a]:!0,"in-item":xn("ion-item",e),"range-disabled":n,"range-pressed":t!==void 0,"range-has-pin":r,"legacy-range":!0})},he("slot",{name:"start"}),this.renderRangeSlider(),he("slot",{name:"end"}))}renderRange(){const{disabled:e,el:t,rangeId:n,pin:r,pressedKnob:s,labelPlacement:a,label:o}=this,l=nt(this);return Q0(!0,t,this.name,JSON.stringify(this.getValue()),e),he(Nt,{onFocusin:this.onFocus,onFocusout:this.onBlur,id:n,class:Kn(this.color,{[l]:!0,"in-item":xn("ion-item",t),"range-disabled":e,"range-pressed":s!==void 0,"range-has-pin":r,["range-label-placement-".concat(a)]:!0})},he("label",{class:"range-wrapper",id:"range-label"},he("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},o!==void 0?he("div",{class:"label-text"},o):he("slot",{name:"label"})),he("div",{class:"native-wrapper"},he("slot",{name:"start"}),this.renderRangeSlider(),he("slot",{name:"end"}))))}get hasLabel(){return this.label!==void 0||this.el.querySelector('[slot="label"]')!==null}renderRangeSlider(){var e;const{min:t,max:n,step:r,el:s,handleKeyboard:a,pressedKnob:o,disabled:l,pin:c,ratioLower:u,ratioUpper:d,inheritedAttributes:h,rangeId:f,pinFormatter:m}=this;let{labelText:p}=$P(s,f);p==null&&(p=h["aria-label"]);let w="".concat(u*100,"%"),y="".concat(100-d*100,"%");const b=Yu(this.el),E=b?"right":"left",_=b?"left":"right",k=R=>({[E]:R[E]});this.dualKnobs===!1&&(this.valA<((e=this.activeBarStart)!==null&&e!==void 0?e:this.min)?(w="".concat(d*100,"%"),y="".concat(100-u*100,"%")):(w="".concat(u*100,"%"),y="".concat(100-d*100,"%")));const B={[E]:w,[_]:y},D=[];if(this.snaps&&this.ticks)for(let R=t;R<=n;R+=r){const Q=Ka(R,t,n),$=Math.min(u,d),P=Math.max(u,d),q={ratio:Q,active:Q>=$&&Q<=P};q[E]="".concat(Q*100,"%"),D.push(q)}let O;return!this.legacyFormController.hasLegacyControl()&&this.hasLabel&&(O="range-label"),he("div",{class:"range-slider",ref:R=>this.rangeSlider=R},D.map(R=>he("div",{style:k(R),role:"presentation",class:{"range-tick":!0,"range-tick-active":R.active},part:R.active?"tick-active":"tick"})),he("div",{class:"range-bar-container"},he("div",{class:"range-bar",role:"presentation",part:"bar"}),he("div",{class:{"range-bar":!0,"range-bar-active":!0,"has-ticks":D.length>0},role:"presentation",style:B,part:"bar-active"})),Cv(b,{knob:"A",pressed:o==="A",value:this.valA,ratio:this.ratioA,pin:c,pinFormatter:m,disabled:l,handleKeyboard:a,min:t,max:n,labelText:p,labelledBy:O}),this.dualKnobs&&Cv(b,{knob:"B",pressed:o==="B",value:this.valB,ratio:this.ratioB,pin:c,pinFormatter:m,disabled:l,handleKeyboard:a,min:t,max:n,labelText:p,labelledBy:O}))}render(){const{legacyFormController:e}=this;return e.hasLegacyControl()?this.renderLegacyRange():this.renderRange()}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],min:["minChanged"],max:["maxChanged"],activeBarStart:["activeBarStartChanged"],disabled:["disabledChanged"],value:["valueChanged"]}}static get style(){return{ios:$O,md:OO}}},[33,"ion-range",{color:[513],debounce:[2],name:[1],label:[1],dualKnobs:[4,"dual-knobs"],min:[2],max:[2],pin:[4],pinFormatter:[16],snaps:[4],step:[2],ticks:[4],activeBarStart:[1026,"active-bar-start"],disabled:[4],value:[1026],labelPlacement:[1,"label-placement"],legacy:[4],ratioA:[32],ratioB:[32],pressedKnob:[32]}]),Cv=(i,{knob:e,value:t,ratio:n,min:r,max:s,disabled:a,pressed:o,pin:l,handleKeyboard:c,labelText:u,labelledBy:d,pinFormatter:h})=>{const f=i?"right":"left";return he("div",{onKeyDown:p=>{const w=p.key;w==="ArrowLeft"||w==="ArrowDown"?(c(e,!1),p.preventDefault(),p.stopPropagation()):(w==="ArrowRight"||w==="ArrowUp")&&(c(e,!0),p.preventDefault(),p.stopPropagation())},class:{"range-knob-handle":!0,"range-knob-a":e==="A","range-knob-b":e==="B","range-knob-pressed":o,"range-knob-min":t===r,"range-knob-max":t===s,"ion-activatable":!0,"ion-focusable":!0},style:(()=>{const p={};return p[f]="".concat(n*100,"%"),p})(),role:"slider",tabindex:a?-1:0,"aria-label":d===void 0?u:null,"aria-labelledby":d!==void 0?d:null,"aria-valuemin":r,"aria-valuemax":s,"aria-disabled":a?"true":null,"aria-valuenow":t},l&&he("div",{class:"range-pin",role:"presentation",part:"pin"},h(t)),he("div",{class:"range-knob",role:"presentation",part:"knob"}))},np=(i,e,t,n)=>{let r=(t-e)*i;n>0&&(r=Math.round(r/n)*n+e);const s=Er(e,r,t);return IO(s,e,t,n)},Ka=(i,e,t)=>Er(0,(i-e)/(t-e),1);let MO=0;function LO(){if(typeof customElements>"u")return;["ion-range"].forEach(e=>{switch(e){case"ion-range":customElements.get(e)||customElements.define(e,DO);break}})}const BO=LO;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qO=":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}",FO=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return he(Nt,{class:nt(this)},he("slot",null))}static get style(){return qO}},[1,"ion-row"]);function jO(){if(typeof customElements>"u")return;["ion-row"].forEach(e=>{switch(e){case"ion-row":customElements.get(e)||customElements.define(e,FO);break}})}const UO=jO;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const zO=(i,e)=>{let t,n;const r=(o,l,c)=>{if(typeof document>"u")return;const u=document.elementFromPoint(o,l);if(!u||!e(u)){a();return}u!==t&&(a(),s(u,c))},s=(o,l)=>{t=o,n||(n=t);const c=t;_r(()=>c.classList.add("ion-activated")),l()},a=(o=!1)=>{if(!t)return;const l=t;_r(()=>l.classList.remove("ion-activated")),o&&n!==t&&t.click(),t=void 0};return mT({el:i,gestureName:"buttonActiveDrag",threshold:0,onStart:o=>r(o.currentX,o.currentY,y2),onMove:o=>r(o.currentX,o.currentY,b2),onEnd:()=>{a(!0),v2(),n=void 0}})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const VO=i=>{const e=fn(),t=fn(),n=fn();return t.addElement(i.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),n.addElement(i.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),e.addElement(i).easing("ease-in-out").duration(200).addAnimation([t,n])},WO=i=>{const e=fn(),t=fn(),n=fn();return t.addElement(i.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),n.addElement(i.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),e.addElement(i).easing("ease-in-out").duration(200).addAnimation([t,n])},HO=i=>{const e=fn(),t=fn(),n=fn();return t.addElement(i.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),n.addElement(i.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),e.addElement(i).easing("ease-in-out").duration(150).addAnimation([t,n])},QO=i=>{const e=fn(),t=fn(),n=fn();return t.addElement(i.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),n.addElement(i.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),e.addElement(i).easing("ease-in-out").duration(150).addAnimation([t,n])},GO=".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, #f9f9f9));--max-width:270px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:14px}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;-webkit-box-shadow:none;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:7px;text-align:center}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:17px;font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, #666666);font-size:14px}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:13px;text-align:center}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:4px;margin-top:10px;-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:6px;padding-bottom:6px;border:0.55px solid var(--ion-color-step-250, #bfbfbf);background-color:var(--ion-background-color, #fff);-webkit-appearance:none;-moz-appearance:none;appearance:none}.alert-input.sc-ion-alert-ios::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{min-height:44px}.alert-radio-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;color:var(--ion-text-color, #000)}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #3880ff)}.alert-radio-icon.sc-ion-alert-ios{position:relative;-ms-flex-order:1;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{top:-7px;position:absolute;width:6px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #3880ff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{inset-inline-start:7px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:7px}[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios:dir(rtl){left:unset;right:unset;right:7px}}}.alert-checkbox-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-text-color, #000)}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px;margin-top:10px;margin-bottom:10px;position:relative;width:24px;height:24px;border-width:1px;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{top:4px;position:absolute;width:5px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:1px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{inset-inline-start:9px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:9px}[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios:dir(rtl){left:unset;right:unset;right:9px}}}.alert-button-group.sc-ion-alert-ios{-webkit-margin-end:-0.55px;margin-inline-end:-0.55px;-ms-flex-wrap:wrap;flex-wrap:wrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;-ms-flex:1 1 auto;flex:1 1 auto;min-width:50%;height:44px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #3880ff);font-size:17px;overflow:hidden}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child{border-right:0}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:first-child:dir(rtl){border-right:0}}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #eb445a)}",KO=".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:14px}.alert-wrapper.sc-ion-alert-md{border-radius:4px;-webkit-box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px;padding-top:20px;padding-bottom:15px;text-align:start}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:20px;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:16px}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, #737373)}.alert-message.sc-ion-alert-md{max-height:266px;font-size:16px}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #3880ff)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;max-height:266px;border-top:1px solid var(--ion-color-step-150, #d9d9d9);border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);overflow:auto}.alert-tappable.sc-ion-alert-md{position:relative;min-height:48px}.alert-radio-label.sc-ion-alert-md{-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px}.alert-radio-icon.sc-ion-alert-md{top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373)}@supports (inset-inline-start: 0){.alert-radio-icon.sc-ion-alert-md{inset-inline-start:26px}}@supports not (inset-inline-start: 0){.alert-radio-icon.sc-ion-alert-md{left:26px}[dir=rtl].sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[dir=rtl].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}@supports selector(:dir(rtl)){.alert-radio-icon.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:26px}}}.alert-radio-inner.sc-ion-alert-md{top:3px;border-radius:50%;position:absolute;width:10px;height:10px;-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #3880ff)}@supports (inset-inline-start: 0){.alert-radio-inner.sc-ion-alert-md{inset-inline-start:3px}}@supports not (inset-inline-start: 0){.alert-radio-inner.sc-ion-alert-md{left:3px}[dir=rtl].sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[dir=rtl].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}@supports selector(:dir(rtl)){.alert-radio-inner.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:3px}}}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, #262626)}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px}.alert-checkbox-icon.sc-ion-alert-md{top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373);contain:strict}@supports (inset-inline-start: 0){.alert-checkbox-icon.sc-ion-alert-md{inset-inline-start:26px}}@supports not (inset-inline-start: 0){.alert-checkbox-icon.sc-ion-alert-md{left:26px}[dir=rtl].sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[dir=rtl].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}@supports selector(:dir(rtl)){.alert-checkbox-icon.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:26px}}}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{top:0;position:absolute;width:6px;height:10px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{inset-inline-start:3px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:3px}[dir=rtl].sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[dir=rtl].sc-ion-alert-md [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:3px}}}.alert-button-group.sc-ion-alert-md{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;-ms-flex-pack:end;justify-content:flex-end}.alert-button.sc-ion-alert-md{border-radius:2px;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:0;margin-bottom:0;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #3880ff);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}.alert-button-inner.sc-ion-alert-md{-ms-flex-pack:end;justify-content:flex-end}",YO=kt(class extends _t{constructor(){super(),this.__registerHost(),this.didPresent=tt(this,"ionAlertDidPresent",7),this.willPresent=tt(this,"ionAlertWillPresent",7),this.willDismiss=tt(this,"ionAlertWillDismiss",7),this.didDismiss=tt(this,"ionAlertDidDismiss",7),this.didPresentShorthand=tt(this,"didPresent",7),this.willPresentShorthand=tt(this,"willPresent",7),this.willDismissShorthand=tt(this,"willDismiss",7),this.didDismissShorthand=tt(this,"didDismiss",7),this.delegateController=s$(this),this.triggerController=a$(),this.customHTMLEnabled=Et.get("innerHTMLTemplatesEnabled",OI),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Dd)},this.dispatchCancelHandler=e=>{const t=e.detail.role;if(rv(t)){const n=this.processedButtons.find(r=>r.role==="cancel");this.callButtonHandler(n)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.header=void 0,this.subHeader=void 0,this.message=void 0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:n}=this;e&&n.addClickListener(t,e)}onKeydown(e){if(!new Set(this.processedInputs.map(o=>o.type)).has("radio")||e.target&&!this.el.contains(e.target)||e.target.classList.contains("alert-button"))return;const n=this.el.querySelectorAll(".alert-radio"),r=Array.from(n).filter(o=>!o.disabled),s=r.findIndex(o=>o.id===e.target.id);let a;if(["ArrowDown","ArrowRight"].includes(e.key)&&(a=s===r.length-1?r[0]:r[s+1]),["ArrowUp","ArrowLeft"].includes(e.key)&&(a=s===0?r[r.length-1]:r[s-1]),a&&r.includes(a)){const o=this.processedInputs.find(l=>l.id===(a==null?void 0:a.id));o&&(this.rbClick(o),a.focus())}}buttonsChanged(){const e=this.buttons;this.processedButtons=e.map(t=>typeof t=="string"?{text:t,role:t.toLowerCase()==="cancel"?"cancel":void 0}:t)}inputsChanged(){const e=this.inputs,t=e.find(a=>!a.disabled),r=e.find(a=>a.checked&&!a.disabled)||t,s=new Set(e.map(a=>a.type));s.has("checkbox")&&s.has("radio")&&console.warn("Alert cannot mix input types: ".concat(Array.from(s.values()).join("/"),". Please see alert docs for more info.")),this.inputType=s.values().next().value,this.processedInputs=e.map((a,o)=>{var l;return{type:a.type||"text",name:a.name||"".concat(o),placeholder:a.placeholder||"",value:a.value,label:a.label,checked:!!a.checked,disabled:!!a.disabled,id:a.id||"alert-input-".concat(this.overlayIndex,"-").concat(o),handler:a.handler,min:a.min,max:a.max,cssClass:(l=a.cssClass)!==null&&l!==void 0?l:"",attributes:a.attributes||{},tabindex:a.type==="radio"&&a!==r?-1:0}})}connectedCallback(){HI(this.el),this.triggerChanged()}componentWillLoad(){QI(this.el),this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){!this.gesture&&nt(this)==="ios"&&this.wrapperEl&&(this.gesture=zO(this.wrapperEl,e=>e.classList.contains("alert-button")),this.gesture.enable(!0)),this.isOpen===!0&&yi(()=>this.present())}async present(){this.currentTransition!==void 0&&await this.currentTransition,await this.delegateController.attachViewToDom(),this.currentTransition=XI(this,"alertEnter",VO,HO),await this.currentTransition,this.currentTransition=void 0}async dismiss(e,t){this.currentTransition=e$(this,e,t,"alertLeave",WO,QO);const n=await this.currentTransition;return n&&this.delegateController.removeViewFromDom(),n}onDidDismiss(){return iv(this.el,"ionAlertDidDismiss")}onWillDismiss(){return iv(this.el,"ionAlertWillDismiss")}rbClick(e){for(const t of this.processedInputs)t.checked=t===e,t.tabindex=t===e?0:-1;this.activeId=e.id,Xf(e.handler,e),qs(this)}cbClick(e){e.checked=!e.checked,Xf(e.handler,e),qs(this)}async buttonClick(e){const t=e.role,n=this.getValues();if(rv(t))return this.dismiss({values:n},t);const r=await this.callButtonHandler(e,n);return r!==!1?this.dismiss(Object.assign({values:n},r),e.role):!1}async callButtonHandler(e,t){if(e!=null&&e.handler){const n=await Xf(e.handler,t);if(n===!1)return!1;if(typeof n=="object")return n}return{}}getValues(){if(this.processedInputs.length===0)return;if(this.inputType==="radio"){const t=this.processedInputs.find(n=>!!n.checked);return t?t.value:void 0}if(this.inputType==="checkbox")return this.processedInputs.filter(t=>t.checked).map(t=>t.value);const e={};return this.processedInputs.forEach(t=>{e[t.name]=t.value||""}),e}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const e=this.processedInputs,t=nt(this);return e.length===0?null:he("div",{class:"alert-checkbox-group"},e.map(n=>he("button",{type:"button",onClick:()=>this.cbClick(n),"aria-checked":"".concat(n.checked),id:n.id,disabled:n.disabled,tabIndex:n.tabindex,role:"checkbox",class:Object.assign(Object.assign({},_o(n.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":n.disabled||!1})},he("div",{class:"alert-button-inner"},he("div",{class:"alert-checkbox-icon"},he("div",{class:"alert-checkbox-inner"})),he("div",{class:"alert-checkbox-label"},n.label)),t==="md"&&he("ion-ripple-effect",null))))}renderRadio(){const e=this.processedInputs;return e.length===0?null:he("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},e.map(t=>he("button",{type:"button",onClick:()=>this.rbClick(t),"aria-checked":"".concat(t.checked),disabled:t.disabled,id:t.id,tabIndex:t.tabindex,class:Object.assign(Object.assign({},_o(t.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":t.disabled||!1}),role:"radio"},he("div",{class:"alert-button-inner"},he("div",{class:"alert-radio-icon"},he("div",{class:"alert-radio-inner"})),he("div",{class:"alert-radio-label"},t.label)))))}renderInput(){const e=this.processedInputs;return e.length===0?null:he("div",{class:"alert-input-group"},e.map(t=>{var n,r,s,a;return t.type==="textarea"?he("div",{class:"alert-input-wrapper"},he("textarea",Object.assign({placeholder:t.placeholder,value:t.value,id:t.id,tabIndex:t.tabindex},t.attributes,{disabled:(r=(n=t.attributes)===null||n===void 0?void 0:n.disabled)!==null&&r!==void 0?r:t.disabled,class:Av(t),onInput:o=>{var l;t.value=o.target.value,!((l=t.attributes)===null||l===void 0)&&l.onInput&&t.attributes.onInput(o)}}))):he("div",{class:"alert-input-wrapper"},he("input",Object.assign({placeholder:t.placeholder,type:t.type,min:t.min,max:t.max,value:t.value,id:t.id,tabIndex:t.tabindex},t.attributes,{disabled:(a=(s=t.attributes)===null||s===void 0?void 0:s.disabled)!==null&&a!==void 0?a:t.disabled,class:Av(t),onInput:o=>{var l;t.value=o.target.value,!((l=t.attributes)===null||l===void 0)&&l.onInput&&t.attributes.onInput(o)}})))}))}renderAlertButtons(){const e=this.processedButtons,t=nt(this),n={"alert-button-group":!0,"alert-button-group-vertical":e.length>2};return he("div",{class:n},e.map(r=>he("button",Object.assign({},r.htmlAttributes,{type:"button",id:r.id,class:JO(r),tabIndex:0,onClick:()=>this.buttonClick(r)}),he("span",{class:"alert-button-inner"},r.text),t==="md"&&he("ion-ripple-effect",null))))}renderAlertMessage(e){const{customHTMLEnabled:t,message:n}=this;return t?he("div",{id:e,class:"alert-message",innerHTML:_I(n)}):he("div",{id:e,class:"alert-message"},n)}render(){const{overlayIndex:e,header:t,subHeader:n,message:r,htmlAttributes:s}=this,a=nt(this),o="alert-".concat(e,"-hdr"),l="alert-".concat(e,"-sub-hdr"),c="alert-".concat(e,"-msg"),u=this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert";return he(Nt,Object.assign({role:u,"aria-modal":"true","aria-labelledby":t?o:n?l:null,"aria-describedby":r!==void 0?c:null,tabindex:"-1"},s,{style:{zIndex:"".concat(2e4+e)},class:Object.assign(Object.assign({},_o(this.cssClass)),{[a]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),he("ion-backdrop",{tappable:this.backdropDismiss}),he("div",{tabindex:"0"}),he("div",{class:"alert-wrapper ion-overlay-wrapper",ref:h=>this.wrapperEl=h},he("div",{class:"alert-head"},t&&he("h2",{id:o,class:"alert-title"},t),n&&he("h2",{id:l,class:"alert-sub-title"},n)),this.renderAlertMessage(c),this.renderAlertInputs(),this.renderAlertButtons()),he("div",{tabindex:"0"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}}static get style(){return{ios:GO,md:KO}}},[34,"ion-alert",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],header:[1],subHeader:[1,"sub-header"],message:[1],buttons:[16],inputs:[1040],backdropDismiss:[4,"backdrop-dismiss"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},[[4,"keydown","onKeydown"]]]),Av=i=>{var e,t,n;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":((t=(e=i.attributes)===null||e===void 0?void 0:e.disabled)!==null&&t!==void 0?t:i.disabled)||!1},_o(i.cssClass)),_o(i.attributes?(n=i.attributes.class)===null||n===void 0?void 0:n.toString():""))},JO=i=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,["alert-button-role-".concat(i.role)]:i.role!==void 0},_o(i.cssClass));function XO(){if(typeof customElements>"u")return;["ion-alert","ion-backdrop","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-alert":customElements.get(e)||customElements.define(e,YO);break;case"ion-backdrop":customElements.get(e)||OT();break;case"ion-ripple-effect":customElements.get(e)||qh();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ZO=":host(.ion-color){color:var(--ion-color-base)}",eD=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=nt(this);return he(Nt,{class:Kn(this.color,{[e]:!0})},he("slot",null))}static get style(){return ZO}},[1,"ion-text",{color:[513]}]);function tD(){if(typeof customElements>"u")return;["ion-text"].forEach(e=>{switch(e){case"ion-text":customElements.get(e)||customElements.define(e,eD);break}})}const nD=tD;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const iD=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host:dir(rtl){left:unset;right:unset;right:0}}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large) .toolbar-title:dir(rtl){-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",rD=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}",sD=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=tt(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({["title-".concat(e)]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const e=nt(this),t=this.getSize();return he(Nt,{class:Kn(this.color,{[e]:!0,["title-".concat(t)]:!0,"title-rtl":document.dir==="rtl"})},he("div",{class:"toolbar-title"},he("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:iD,md:rD}}},[33,"ion-title",{color:[513],size:[1]}]);function aD(){if(typeof customElements>"u")return;["ion-title"].forEach(e=>{switch(e){case"ion-title":customElements.get(e)||customElements.define(e,sD);break}})}const oD=aD;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const lD=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large){padding-bottom:7px}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",cD=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",uD=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),t=e.find(s=>s.slot==="start");t&&t.classList.add("buttons-first-slot");const n=e.reverse(),r=n.find(s=>s.slot==="end")||n.find(s=>s.slot==="primary")||n.find(s=>s.slot==="secondary");r&&r.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const t=e.target.tagName,n=e.detail,r={},s=this.childrenStyles.get(t)||{};let a=!1;Object.keys(n).forEach(o=>{const l="toolbar-".concat(o),c=n[o];c!==s[l]&&(a=!0),c&&(r[l]=!0)}),a&&(this.childrenStyles.set(t,r),qs(this))}render(){const e=nt(this),t={};return this.childrenStyles.forEach(n=>{Object.assign(t,n)}),he(Nt,{class:Object.assign(Object.assign({},t),Kn(this.color,{[e]:!0,"in-toolbar":xn("ion-toolbar",this.el)}))},he("div",{class:"toolbar-background"}),he("div",{class:"toolbar-container"},he("slot",{name:"start"}),he("slot",{name:"secondary"}),he("div",{class:"toolbar-content"},he("slot",null)),he("slot",{name:"primary"}),he("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:lD,md:cD}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function dD(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(e=>{switch(e){case"ion-toolbar":customElements.get(e)||customElements.define(e,uD);break}})}const hD=dD;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const fD=c2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const pD=h2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const mD=XO;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Nv;(function(i){i.Dark="DARK",i.Light="LIGHT",i.Default="DEFAULT"})(Nv||(Nv={}));const gD="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",yD=kt(class extends _t{constructor(){super(),this.__registerHost()}componentDidLoad(){vD(async()=>{const e=As(window,"hybrid");if(Et.getBoolean("_testing")||ni(()=>import("./index9-644c5986.js"),[]).then(n=>n.startTapClick(Et)),Et.getBoolean("statusTap",e)&&ni(()=>import("./status-tap-58076bf5.js"),[]).then(n=>n.startStatusTap()),Et.getBoolean("inputShims",bD())){const n=As(window,"ios")?"ios":"android";ni(()=>import("./input-shims-301e6f8f.js"),[]).then(r=>r.startInputShims(Et,n))}const t=await ni(()=>Promise.resolve().then(()=>LI),void 0);Et.getBoolean("hardwareBackButton",e)?t.startHardwareBackButton():t.blockHardwareBackButton(),typeof window<"u"&&ni(()=>import("./keyboard2-e16f16a6.js"),[]).then(n=>n.startKeyboardAssist(window)),ni(()=>import("./focus-visible-9c13edeb.js"),[]).then(n=>this.focusVisible=n.startFocusVisible())})}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=nt(this);return he(Nt,{class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":Et.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return gD}},[0,"ion-app",{setFocus:[64]}]),bD=()=>!!(As(window,"ios")&&As(window,"mobile")||As(window,"android")&&As(window,"mobileweb")),vD=i=>{"requestIdleCallback"in window?window.requestIdleCallback(i):setTimeout(i,32)};function wD(){if(typeof customElements>"u")return;["ion-app"].forEach(e=>{switch(e){case"ion-app":customElements.get(e)||customElements.define(e,yD);break}})}const ED=wD;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xD=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-hover:transparent;--background-hover-opacity:1;--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #3880ff);--icon-margin-end:1px;--icon-margin-start:-4px;--icon-font-size:1.6em;--min-height:32px;font-size:17px}.button-native{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:visible;z-index:99}:host(.ion-activated) .button-native{opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',TD=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--border-radius:4px;--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:0.04;--color:currentColor;--icon-margin-end:0;--icon-margin-start:0;--icon-font-size:24px;--icon-font-weight:normal;--min-height:32px;--min-width:44px;--padding-start:12px;--padding-end:12px;font-size:14px;font-weight:500;text-transform:uppercase}:host(.back-button-has-icon-only){--border-radius:50%;min-width:48px;height:48px}.button-native{-webkit-box-shadow:none;box-shadow:none}.button-text{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:0;padding-bottom:0}ion-icon{line-height:0.67;text-align:start}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}',SD=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.onClick=async e=>{const t=this.el.closest("ion-nav");return e.preventDefault(),t&&await t.canGoBack()?t.pop({animationBuilder:this.routerAnimation,skipIfBusy:!0}):gy(this.defaultHref,e,"back",this.routerAnimation)},this.color=void 0,this.defaultHref=void 0,this.disabled=!1,this.icon=void 0,this.text=void 0,this.type="button",this.routerAnimation=void 0}componentWillLoad(){this.inheritedAttributes=Oa(this.el),this.defaultHref===void 0&&(this.defaultHref=Et.get("backButtonDefaultHref"))}get backButtonIcon(){const e=this.icon;return e!=null?e:nt(this)==="ios"?Et.get("backButtonIcon",l$):Et.get("backButtonIcon",o$)}get backButtonText(){const e=nt(this)==="ios"?"Back":null;return this.text!=null?this.text:Et.get("backButtonText",e)}get hasIconOnly(){return this.backButtonIcon&&!this.backButtonText}get rippleType(){return this.hasIconOnly?"unbounded":"bounded"}render(){const{color:e,defaultHref:t,disabled:n,type:r,hasIconOnly:s,backButtonIcon:a,backButtonText:o,icon:l,inheritedAttributes:c}=this,u=t!==void 0,d=nt(this),h=c["aria-label"]||o||"back";return he(Nt,{onClick:this.onClick,class:Kn(e,{[d]:!0,button:!0,"back-button-disabled":n,"back-button-has-icon-only":s,"in-toolbar":xn("ion-toolbar",this.el),"in-toolbar-color":xn("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0,"show-back-button":u})},he("button",{type:r,disabled:n,class:"button-native",part:"native","aria-label":h},he("span",{class:"button-inner"},a&&he("ion-icon",{part:"icon",icon:a,"aria-hidden":"true",lazy:!1,"flip-rtl":l===void 0}),o&&he("span",{part:"text","aria-hidden":"true",class:"button-text"},o)),d==="md"&&he("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get style(){return{ios:xD,md:TD}}},[33,"ion-back-button",{color:[513],defaultHref:[1025,"default-href"],disabled:[516],icon:[1],text:[1],type:[1],routerAnimation:[16]}]);function CD(){if(typeof customElements>"u")return;["ion-back-button","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-back-button":customElements.get(e)||customElements.define(e,SD);break;case"ion-icon":customElements.get(e)||my();break;case"ion-ripple-effect":customElements.get(e)||qh();break}})}const AD=CD,ND=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",kD=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=tt(this,"ionNavWillLoad",7),this.ionNavWillChange=tt(this,"ionNavWillChange",3),this.ionNavDidChange=tt(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=nt(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await ni(()=>import("./swipe-back-28febc37.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>e(),t=>{var n;return(n=this.ani)===null||n===void 0?void 0:n.progressStep(t)},(t,n,r)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(t)},{oneTimeCallback:!0});let s=t?-.001:.001;t?s+=yc([0,0],[.32,.72],[0,1],[1,1],n)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),s+=yc([0,0],[1,0],[.68,.28],[1,1],n)[0]),this.ani.progressEnd(t?1:0,s,r)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,t,n){const r=await this.lock();let s=!1;try{s=await this.transition(e,t,n)}catch(a){console.error(a)}return r(),s}async setRouteId(e,t,n,r){return{changed:await this.setRoot(e,t,{duration:n==="root"?0:void 0,direction:n==="back"?"back":"forward",animationBuilder:r}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,t,n){if(this.activeComponent===e&&lT(t,this.activeParams))return!1;const r=this.activeEl,s=await NT(this.delegate,this.el,e,["ion-page","ion-page-invisible"],t);return this.activeComponent=e,this.activeEl=s,this.activeParams=t,await this.commit(s,r,n),await UI(this.delegate,r),!0}async transition(e,t,n={}){if(t===e)return!1;this.ionNavWillChange.emit();const{el:r,mode:s}=this,a=this.animated&&Et.getBoolean("animated",!0),o=n.animationBuilder||this.animation||Et.get("navAnimation");return await dT(Object.assign(Object.assign({mode:s,animated:a,enteringEl:e,leavingEl:t,baseEl:r,deepWait:NP(r),progressCallback:n.progressAnimation?l=>{l!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,l.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),l.progressEnd(0,0,0)):this.ani=l}:void 0},n),{animationBuilder:o})),this.ionNavDidChange.emit(),!0}async lock(){const e=this.waitPromise;let t;return this.waitPromise=new Promise(n=>t=n),e!==void 0&&await e,t}render(){return he("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return ND}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);function _D(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(e=>{switch(e){case"ion-router-outlet":customElements.get(e)||customElements.define(e,kD);break}})}const RD=_D;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const PD=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",ID=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",$D=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=tt(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await C2(async(e,t)=>{e===!1&&t!==void 0&&await t,this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:e,translucent:t,keyboardVisible:n}=this,r=nt(this),s=n&&this.el.getAttribute("slot")!=="top";return he(Nt,{role:"tablist","aria-hidden":s?"true":null,class:Kn(e,{[r]:!0,"tab-bar-translucent":t,"tab-bar-hidden":s})},he("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:PD,md:ID}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);function OD(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(e=>{switch(e){case"ion-tab-bar":customElements.get(e)||customElements.define(e,$D);break}})}const DD=OD;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const MD=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',LD=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',BD=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=tt(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{(e.key==="Enter"||e.key===" ")&&this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const t=e.target,n=this.el.parentElement;(e.composedPath().includes(n)||t!=null&&t.contains(this.el))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},Ic(this.el,["aria-label"])),this.layout===void 0&&(this.layout=Et.get("tabButtonLayout","icon-top"))}selectTab(e){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:t,hasLabel:n,href:r,rel:s,target:a,layout:o,selected:l,tab:c,inheritedAttributes:u}=this,d=nt(this),h={download:this.download,href:r,rel:s,target:a};return he(Nt,{onClick:this.onClick,onKeyup:this.onKeyUp,id:c!==void 0?"tab-button-".concat(c):null,class:{[d]:!0,"tab-selected":l,"tab-disabled":e,"tab-has-label":n,"tab-has-icon":t,"tab-has-label-only":n&&!t,"tab-has-icon-only":t&&!n,["tab-layout-".concat(o)]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},he("a",Object.assign({},h,{class:"button-native",part:"native",role:"tab","aria-selected":l?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},u),he("span",{class:"button-inner"},he("slot",null)),d==="md"&&he("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:MD,md:LD}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function qD(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,BD);break;case"ion-ripple-effect":customElements.get(e)||qh();break}})}const FD=qD,ro={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let so,zT,jh,VT=!1,Bd=!1,vy=!1,gi=!1,kv=null,Om=!1;const jD=i=>{const e=new URL(i,Vn.$resourcesUrl$);return e.origin!==Dc.location.origin?e.href:e.pathname},Na=(i,e="")=>()=>{},_v="http://www.w3.org/1999/xlink",Rv={},UD="http://www.w3.org/2000/svg",zD="http://www.w3.org/1999/xhtml",VD=i=>i!=null,wy=i=>(i=typeof i,i==="object"||i==="function");function WD(i){var e,t,n;return(n=(t=(e=i.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&n!==void 0?n:void 0}const Gl=(i,e,...t)=>{let n=null,r=null,s=null,a=!1,o=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)n=d[h],Array.isArray(n)?c(n):n!=null&&typeof n!="boolean"&&((a=typeof i!="function"&&!wy(n))&&(n=String(n)),a&&o?l[l.length-1].$text$+=n:l.push(a?qd(null,n):n),o=a)};if(c(t),e){e.key&&(r=e.key),e.name&&(s=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof i=="function")return i(e===null?{}:e,l,QD);const u=qd(i,null);return u.$attrs$=e,l.length>0&&(u.$children$=l),u.$key$=r,u.$name$=s,u},qd=(i,e)=>{const t={$flags$:0,$tag$:i,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},WT={},HD=i=>i&&i.$tag$===WT,QD={forEach:(i,e)=>i.map(Pv).forEach(e),map:(i,e)=>i.map(Pv).map(e).map(GD)},Pv=i=>({vattrs:i.$attrs$,vchildren:i.$children$,vkey:i.$key$,vname:i.$name$,vtag:i.$tag$,vtext:i.$text$}),GD=i=>{if(typeof i.vtag=="function"){const t=Object.assign({},i.vattrs);return i.vkey&&(t.key=i.vkey),i.vname&&(t.name=i.vname),Gl(i.vtag,t,...i.vchildren||[])}const e=qd(i.vtag,i.vtext);return e.$attrs$=i.vattrs,e.$children$=i.vchildren,e.$key$=i.vkey,e.$name$=i.vname,e},KD=i=>EM.map(e=>e(i)).find(e=>!!e),YD=(i,e)=>i!=null&&!wy(i)?e&4?i==="false"?!1:i===""||!!i:e&2?parseFloat(i):e&1?String(i):i:i,Iv=new WeakMap,JD=(i,e,t)=>{let n=jd.get(i);CM&&t?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,jd.set(i,n)},XD=(i,e,t,n)=>{var r;let s=HT(e,t);const a=jd.get(s);if(i=i.nodeType===11?i:lr,a)if(typeof a=="string"){i=i.head||i;let o=Iv.get(i),l;if(o||Iv.set(i,o=new Set),!o.has(s)){{l=lr.createElement("style"),l.innerHTML=a;const c=(r=Vn.$nonce$)!==null&&r!==void 0?r:WD(lr);c!=null&&l.setAttribute("nonce",c),i.insertBefore(l,i.querySelector("link"))}o&&o.add(s)}}else i.adoptedStyleSheets.includes(a)||(i.adoptedStyleSheets=[...i.adoptedStyleSheets,a]);return s},ZD=i=>{const e=i.$cmpMeta$,t=i.$hostElement$,n=e.$flags$,r=Na("attachStyles",e.$tagName$),s=XD(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,i.$modeName$);n&10&&(t["s-sc"]=s,t.classList.add(s+"-h"),n&2&&t.classList.add(s+"-s")),r()},HT=(i,e)=>"sc-"+(e&&i.$flags$&32?i.$tagName$+"-"+e:i.$tagName$),$v=(i,e,t,n,r,s)=>{if(t!==n){let a=Lv(i,e),o=e.toLowerCase();if(e==="class"){const l=i.classList,c=Ov(t),u=Ov(n);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in t)(!n||n[l]==null)&&(l.includes("-")?i.style.removeProperty(l):i.style[l]="");for(const l in n)(!t||n[l]!==t[l])&&(l.includes("-")?i.style.setProperty(l,n[l]):i.style[l]=n[l])}else if(e!=="key")if(e==="ref")n&&n(i);else if(!i.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):Lv(Dc,o)?e=o.slice(2):e=o[2]+e.slice(3),t&&Vn.rel(i,e,t,!1),n&&Vn.ael(i,e,n,!1);else{const l=wy(n);if((a||l&&n!==null)&&!r)try{if(i.tagName.includes("-"))i[e]=n;else{const u=n==null?"":n;e==="list"?a=!1:(t==null||i[e]!=u)&&(i[e]=u)}}catch(u){}let c=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,c=!0),n==null||n===!1?(n!==!1||i.getAttribute(e)==="")&&(c?i.removeAttributeNS(_v,e):i.removeAttribute(e)):(!a||s&4||r)&&!l&&(n=n===!0?"":n,c?i.setAttributeNS(_v,e,n):i.setAttribute(e,n))}}},eM=/\s/,Ov=i=>i?i.split(eM):[],QT=(i,e,t,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=i&&i.$attrs$||Rv,a=e.$attrs$||Rv;for(n in s)n in a||$v(r,n,s[n],void 0,t,e.$flags$);for(n in a)$v(r,n,s[n],a[n],t,e.$flags$)},Fd=(i,e,t,n)=>{const r=e.$children$[t];let s=0,a,o,l;if(VT||(vy=!0,r.$tag$==="slot"&&(so&&n.classList.add(so+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=lr.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=lr.createTextNode("");else{if(gi||(gi=r.$tag$==="svg"),a=r.$elm$=lr.createElementNS(gi?UD:zD,r.$flags$&2?"slot-fb":r.$tag$),gi&&r.$tag$==="foreignObject"&&(gi=!1),QT(null,r,gi),VD(so)&&a["s-si"]!==so&&a.classList.add(a["s-si"]=so),r.$children$)for(s=0;s<r.$children$.length;++s)o=Fd(i,r,s,a),o&&a.appendChild(o);r.$tag$==="svg"?gi=!1:a.tagName==="foreignObject"&&(gi=!0)}return a["s-hn"]=jh,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=zT,a["s-sn"]=r.$name$||"",l=i&&i.$children$&&i.$children$[t],l&&l.$tag$===r.$tag$&&i.$elm$&&vc(i.$elm$,!1)),a},vc=(i,e)=>{Vn.$flags$|=1;const t=i.childNodes;for(let n=t.length-1;n>=0;n--){const r=t[n];r["s-hn"]!==jh&&r["s-ol"]&&(YT(r).insertBefore(r,Ey(r)),r["s-ol"].remove(),r["s-ol"]=void 0,vy=!0),e&&vc(r,e)}Vn.$flags$&=-2},GT=(i,e,t,n,r,s)=>{let a=i["s-cr"]&&i["s-cr"].parentNode||i,o;for(a.shadowRoot&&a.tagName===jh&&(a=a.shadowRoot);r<=s;++r)n[r]&&(o=Fd(null,t,r,i),o&&(n[r].$elm$=o,a.insertBefore(o,Ey(e))))},KT=(i,e,t,n,r)=>{for(;e<=t;++e)(n=i[e])&&(r=n.$elm$,ZT(n),Bd=!0,r["s-ol"]?r["s-ol"].remove():vc(r,!0),r.remove())},tM=(i,e,t,n)=>{let r=0,s=0,a=0,o=0,l=e.length-1,c=e[0],u=e[l],d=n.length-1,h=n[0],f=n[d],m,p;for(;r<=l&&s<=d;)if(c==null)c=e[++r];else if(u==null)u=e[--l];else if(h==null)h=n[++s];else if(f==null)f=n[--d];else if(wu(c,h))ao(c,h),c=e[++r],h=n[++s];else if(wu(u,f))ao(u,f),u=e[--l],f=n[--d];else if(wu(c,f))(c.$tag$==="slot"||f.$tag$==="slot")&&vc(c.$elm$.parentNode,!1),ao(c,f),i.insertBefore(c.$elm$,u.$elm$.nextSibling),c=e[++r],f=n[--d];else if(wu(u,h))(c.$tag$==="slot"||f.$tag$==="slot")&&vc(u.$elm$.parentNode,!1),ao(u,h),i.insertBefore(u.$elm$,c.$elm$),u=e[--l],h=n[++s];else{for(a=-1,o=r;o<=l;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===h.$key$){a=o;break}a>=0?(p=e[a],p.$tag$!==h.$tag$?m=Fd(e&&e[s],t,a,i):(ao(p,h),e[a]=void 0,m=p.$elm$),h=n[++s]):(m=Fd(e&&e[s],t,s,i),h=n[++s]),m&&YT(c.$elm$).insertBefore(m,Ey(c.$elm$))}r>l?GT(i,n[d+1]==null?null:n[d+1].$elm$,t,n,s,d):s>d&&KT(e,r,l)},wu=(i,e)=>i.$tag$===e.$tag$?i.$tag$==="slot"?i.$name$===e.$name$:i.$key$===e.$key$:!1,Ey=i=>i&&i["s-ol"]||i,YT=i=>(i["s-ol"]?i["s-ol"]:i).parentNode,ao=(i,e)=>{const t=e.$elm$=i.$elm$,n=i.$children$,r=e.$children$,s=e.$tag$,a=e.$text$;let o;a===null?(gi=s==="svg"?!0:s==="foreignObject"?!1:gi,s==="slot"||QT(i,e,gi),n!==null&&r!==null?tM(t,n,e,r):r!==null?(i.$text$!==null&&(t.textContent=""),GT(t,null,e,r,0,r.length-1)):n!==null&&KT(n,0,n.length-1),gi&&s==="svg"&&(gi=!1)):(o=t["s-cr"])?o.parentNode.textContent=a:i.$text$!==a&&(t.data=a)},JT=i=>{const e=i.childNodes;let t,n,r,s,a,o;for(n=0,r=e.length;n<r;n++)if(t=e[n],t.nodeType===1){if(t["s-sr"]){for(a=t["s-sn"],t.hidden=!1,s=0;s<r;s++)if(o=e[s].nodeType,e[s]["s-hn"]!==t["s-hn"]||a!==""){if(o===1&&a===e[s].getAttribute("slot")){t.hidden=!0;break}}else if(o===1||o===3&&e[s].textContent.trim()!==""){t.hidden=!0;break}}JT(t)}},er=[],XT=i=>{let e,t,n,r,s,a,o=0;const l=i.childNodes,c=l.length;for(;o<c;o++){if(e=l[o],e["s-sr"]&&(t=e["s-cr"])&&t.parentNode)for(n=t.parentNode.childNodes,r=e["s-sn"],a=n.length-1;a>=0;a--)t=n[a],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==e["s-hn"]&&(Dv(t,r)?(s=er.find(u=>u.$nodeToRelocate$===t),Bd=!0,t["s-sn"]=t["s-sn"]||r,s?s.$slotRefNode$=e:er.push({$slotRefNode$:e,$nodeToRelocate$:t}),t["s-sr"]&&er.map(u=>{Dv(u.$nodeToRelocate$,t["s-sn"])&&(s=er.find(d=>d.$nodeToRelocate$===t),s&&!u.$slotRefNode$&&(u.$slotRefNode$=s.$slotRefNode$))})):er.some(u=>u.$nodeToRelocate$===t)||er.push({$nodeToRelocate$:t}));e.nodeType===1&&XT(e)}},Dv=(i,e)=>i.nodeType===1?i.getAttribute("slot")===null&&e===""||i.getAttribute("slot")===e:i["s-sn"]===e?!0:e==="",ZT=i=>{i.$attrs$&&i.$attrs$.ref&&i.$attrs$.ref(null),i.$children$&&i.$children$.map(ZT)},nM=(i,e)=>{const t=i.$hostElement$,n=i.$cmpMeta$,r=i.$vnode$||qd(null,null),s=HD(e)?e:Gl(null,null,e);jh=t.tagName,n.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},n.$attrsToReflect$.map(([a,o])=>s.$attrs$[o]=t[a])),s.$tag$=null,s.$flags$|=4,i.$vnode$=s,s.$elm$=r.$elm$=t.shadowRoot||t,so=t["s-sc"],zT=t["s-cr"],VT=(n.$flags$&1)!==0,Bd=!1,ao(r,s);{if(Vn.$flags$|=1,vy){XT(s.$elm$);let a,o,l,c,u,d,h=0;for(;h<er.length;h++)a=er[h],o=a.$nodeToRelocate$,o["s-ol"]||(l=lr.createTextNode(""),l["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=l,o));for(h=0;h<er.length;h++)if(a=er[h],o=a.$nodeToRelocate$,a.$slotRefNode$){for(c=a.$slotRefNode$.parentNode,u=a.$slotRefNode$.nextSibling,l=o["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===o["s-sn"]&&c===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){u=d;break}(!u&&c!==o.parentNode||o.nextSibling!==u)&&o!==u&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),c.insertBefore(o,u))}else o.nodeType===1&&(o.hidden=!0)}Bd&&JT(s.$elm$),Vn.$flags$&=-2,er.length=0}},iM=(i,e)=>{},eS=(i,e)=>(i.$flags$|=16,iM(i,i.$ancestorComponent$),kM(()=>rM(i,e))),rM=(i,e)=>{const t=i.$hostElement$,n=Na("scheduleUpdate",i.$cmpMeta$.$tagName$),r=t;let s;return e?s=Ro(r,"componentWillLoad"):s=Ro(r,"componentWillUpdate"),s=Mv(s,()=>Ro(r,"componentWillRender")),n(),Mv(s,()=>sM(i,r,e))},sM=async(i,e,t)=>{const n=i.$hostElement$,r=Na("update",i.$cmpMeta$.$tagName$);n["s-rc"],t&&ZD(i);const s=Na("render",i.$cmpMeta$.$tagName$);aM(i,e,n),s(),r(),oM(i)},aM=(i,e,t)=>{try{kv=e,e=e.render&&e.render(),i.$flags$&=-17,i.$flags$|=2,(ro.hasRenderFn||ro.reflect)&&(ro.vdomRender||ro.reflect)&&(ro.hydrateServerSide||nM(i,e))}catch(o){Oc(o,i.$hostElement$)}return kv=null,null},oM=i=>{const e=i.$cmpMeta$.$tagName$,t=i.$hostElement$,n=Na("postUpdate",e),r=t;i.$ancestorComponent$,Ro(r,"componentDidRender"),i.$flags$&64?(Ro(r,"componentDidUpdate"),n()):(i.$flags$|=64,Ro(r,"componentDidLoad"),n())},Ro=(i,e,t)=>{if(i&&i[e])try{return i[e](t)}catch(n){Oc(n)}},Mv=(i,e)=>i&&i.then?i.then(e):e(),lM=(i,e)=>Uh(i).$instanceValues$.get(e),cM=(i,e,t,n)=>{const r=Uh(i),s=i,a=r.$instanceValues$.get(e),o=r.$flags$,l=s;t=YD(t,n.$members$[e][0]);const c=Number.isNaN(a)&&Number.isNaN(t);if(t!==a&&!c){r.$instanceValues$.set(e,t);{if(n.$watchers$&&o&128){const d=n.$watchers$[e];d&&d.map(h=>{try{l[h](t,a,e)}catch(f){Oc(f,s)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(t,a,e)===!1)return;eS(r,!1)}}}},uM=(i,e,t)=>{if(e.$members$){i.watchers&&(e.$watchers$=i.watchers);const n=Object.entries(e.$members$),r=i.prototype;n.map(([s,[a]])=>{(a&31||a&32)&&Object.defineProperty(r,s,{get(){return lM(this,s)},set(o){cM(this,s,o,e)},configurable:!0,enumerable:!0})});{const s=new Map;r.attributeChangedCallback=function(a,o,l){Vn.jmp(()=>{const c=s.get(a);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(r.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},i.observedAttributes=n.filter(([a,o])=>o[0]&15).map(([a,o])=>{const l=o[1]||a;return s.set(l,a),o[0]&512&&e.$attrsToReflect$.push([a,l]),l})}}return i},dM=async(i,e,t,n,r)=>{if(!(e.$flags$&32)&&(r=i.constructor,e.$flags$|=32,customElements.whenDefined(t.$tagName$).then(()=>e.$flags$|=128),r.style)){let a=r.style;typeof a!="string"&&(a=a[e.$modeName$=KD(i)]);const o=HT(t,e.$modeName$);if(!jd.has(o)){const l=Na("registerStyles",t.$tagName$);JD(o,a,!!(t.$flags$&1)),l()}}e.$ancestorComponent$,(()=>eS(e,!0))()},hM=i=>{},fM=i=>{if(!(Vn.$flags$&1)){const e=Uh(i),t=e.$cmpMeta$,n=Na("connectedCallback",t.$tagName$);e.$flags$&1?(tS(i,e,t.$listeners$),hM(e.$lazyInstance$)):(e.$flags$|=1,t.$flags$&12&&pM(i),t.$members$&&Object.entries(t.$members$).map(([r,[s]])=>{if(s&31&&i.hasOwnProperty(r)){const a=i[r];delete i[r],i[r]=a}}),dM(i,e,t)),n()}},pM=i=>{const e=i["s-cr"]=lr.createComment("");e["s-cn"]=!0,i.insertBefore(e,i.firstChild)},mM=i=>{if(!(Vn.$flags$&1)){const e=Uh(i);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}},gM=(i,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=i.$watchers$,t.$attrsToReflect$=[];const n=i.prototype.connectedCallback,r=i.prototype.disconnectedCallback;return Object.assign(i.prototype,{__registerHost(){wM(this,t)},connectedCallback(){fM(this),n&&n.call(this)},disconnectedCallback(){mM(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)})}}),i.is=t.$tagName$,uM(i,t)},tS=(i,e,t,n)=>{t&&t.map(([r,s,a])=>{const o=bM(i,r),l=yM(e,a),c=vM(r);Vn.ael(o,s,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Vn.rel(o,s,l,c))})},yM=(i,e)=>t=>{try{ro.lazyLoad||i.$hostElement$[e](t)}catch(n){Oc(n)}},bM=(i,e)=>e&4?lr:e&8?Dc:e&16?lr.body:i,vM=i=>TM?{passive:(i&1)!==0,capture:(i&2)!==0}:(i&2)!==0,nS=new WeakMap,Uh=i=>nS.get(i),wM=(i,e)=>{const t={$flags$:0,$hostElement$:i,$cmpMeta$:e,$instanceValues$:new Map};return tS(i,t,e.$listeners$),nS.set(i,t)},Lv=(i,e)=>e in i,Oc=(i,e)=>(0,console.error)(i,e),jd=new Map,EM=[],Dc=typeof window<"u"?window:{},lr=Dc.document||{head:{}},xM=Dc.HTMLElement||class{},Vn={$flags$:0,$resourcesUrl$:"",jmp:i=>i(),raf:i=>requestAnimationFrame(i),ael:(i,e,t,n)=>i.addEventListener(e,t,n),rel:(i,e,t,n)=>i.removeEventListener(e,t,n),ce:(i,e)=>new CustomEvent(i,e)},TM=(()=>{let i=!1;try{lr.addEventListener("e",null,Object.defineProperty({},"passive",{get(){i=!0}}))}catch(e){}return i})(),SM=i=>Promise.resolve(i),CM=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(i){}return!1})(),Bv=[],iS=[],AM=(i,e)=>t=>{i.push(t),Om||(Om=!0,e&&Vn.$flags$&4?NM(Dm):Vn.raf(Dm))},qv=i=>{for(let e=0;e<i.length;e++)try{i[e](performance.now())}catch(t){Oc(t)}i.length=0},Dm=()=>{qv(Bv),qv(iS),(Om=Bv.length>0)&&Vn.raf(Dm)},NM=i=>SM().then(i),kM=AM(iS,!0);let ip;const _M=()=>{if(typeof window>"u")return new Map;if(!ip){const i=window;i.Ionicons=i.Ionicons||{},ip=i.Ionicons.map=i.Ionicons.map||new Map}return ip},RM=i=>{let e=rp(i.src);return e||(e=rS(i.name,i.icon,i.mode,i.ios,i.md),e?PM(e):i.icon&&(e=rp(i.icon),e||(e=rp(i.icon[i.mode]),e))?e:null)},PM=i=>{const e=_M().get(i);return e||jD("svg/".concat(i,".svg"))},rS=(i,e,t,n,r)=>(t=(t&&Eu(t))==="ios"?"ios":"md",n&&t==="ios"?i=Eu(n):r&&t==="md"?i=Eu(r):(!i&&e&&!sS(e)&&(i=e),Ud(i)&&(i=Eu(i))),!Ud(i)||i.trim()===""||i.replace(/[a-z]|-|\d/gi,"")!==""?null:i),rp=i=>Ud(i)&&(i=i.trim(),sS(i))?i:null,sS=i=>i.length>0&&/(\/|\.)/.test(i),Ud=i=>typeof i=="string",Eu=i=>i.toLowerCase(),IM=(i,e=[])=>{const t={};return e.forEach(n=>{i.hasAttribute(n)&&(i.getAttribute(n)!==null&&(t[n]=i.getAttribute(n)),i.removeAttribute(n))}),t},$M=i=>i&&i.dir!==""?i.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",OM=i=>{const e=document.createElement("div");e.innerHTML=i;for(let n=e.childNodes.length-1;n>=0;n--)e.childNodes[n].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[n]);const t=e.firstElementChild;if(t&&t.nodeName.toLowerCase()==="svg"){const n=t.getAttribute("class")||"";if(t.setAttribute("class",(n+" s-ion-icon").trim()),aS(t))return e.innerHTML}return""},aS=i=>{if(i.nodeType===1){if(i.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<i.attributes.length;e++){const t=i.attributes[e].name;if(Ud(t)&&t.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<i.childNodes.length;e++)if(!aS(i.childNodes[e]))return!1}return!0},DM=i=>i.startsWith("data:image/svg+xml"),MM=i=>i.indexOf(";utf8,")!==-1,ua=new Map,Fv=new Map;let sp;const LM=(i,e)=>{let t=Fv.get(i);if(!t)if(typeof fetch<"u"&&typeof document<"u")if(DM(i)&&MM(i)){sp||(sp=new DOMParser);const r=sp.parseFromString(i,"text/html").querySelector("svg");return r&&ua.set(i,r.outerHTML),Promise.resolve()}else t=fetch(i).then(n=>{if(n.ok)return n.text().then(r=>{r&&e!==!1&&(r=OM(r)),ua.set(i,r||"")});ua.set(i,"")}),Fv.set(i,t);else return ua.set(i,""),Promise.resolve();return t},BM=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",qM=gM(class extends xM{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=FM(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=IM(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(i,e,t){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const n=this.io=new window.IntersectionObserver(r=>{r[0].isIntersecting&&(n.disconnect(),this.io=void 0,t())},{rootMargin:e});n.observe(i)}else t()}loadIcon(){if(this.isVisible){const i=RM(this);i&&(ua.has(i)?this.svgContent=ua.get(i):LM(i,this.sanitize).then(()=>this.svgContent=ua.get(i)))}this.iconName=rS(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:i,iconName:e,inheritedAttributes:t,el:n}=this,r=this.mode||"md",s=e?(e.includes("arrow")||e.includes("chevron"))&&i!==!1:!1,a=i||s;return Gl(WT,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},jM(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":a,"icon-rtl":a&&$M(n)})},t),this.svgContent?Gl("div",{class:"icon-inner",innerHTML:this.svgContent}):Gl("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return BM}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),FM=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",jM=i=>i?{"ion-color":!0,["ion-color-".concat(i)]:!0}:null;function UM(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,qM);break}})}const zM=UM,xy=Te.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),VM=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(i){if(i.id){const e=this.ionViewWillEnterCallbacks.findIndex(t=>t.id===i.id);e>-1?this.ionViewWillEnterCallbacks[e]=i:this.ionViewWillEnterCallbacks.push(i)}else this.ionViewWillEnterCallbacks.push(i)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(i=>i())}onIonViewDidEnter(i){if(i.id){const e=this.ionViewDidEnterCallbacks.findIndex(t=>t.id===i.id);e>-1?this.ionViewDidEnterCallbacks[e]=i:this.ionViewDidEnterCallbacks.push(i)}else this.ionViewDidEnterCallbacks.push(i)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(i=>i())}onIonViewWillLeave(i){if(i.id){const e=this.ionViewWillLeaveCallbacks.findIndex(t=>t.id===i.id);e>-1?this.ionViewWillLeaveCallbacks[e]=i:this.ionViewWillLeaveCallbacks.push(i)}else this.ionViewWillLeaveCallbacks.push(i)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(i=>i())}onIonViewDidLeave(i){if(i.id){const e=this.ionViewDidLeaveCallbacks.findIndex(t=>t.id===i.id);e>-1?this.ionViewDidLeaveCallbacks[e]=i:this.ionViewDidLeaveCallbacks.push(i)}else this.ionViewDidLeaveCallbacks.push(i)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(i=>i()),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(i){this.componentCanBeDestroyedCallback=i}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},Pr=Te.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:i=>{typeof window<"u"&&(typeof i=="string"?window.location.pathname=i:window.history.back())},navigate:i=>{typeof window<"u"&&(window.location.pathname=i)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(i,e)=>{typeof window<"u"&&(window.location.pathname=e)},resetTab:(i,e)=>{typeof window<"u"&&(window.location.pathname=e)}}),Ty=i=>i.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),zh=i=>i.replace(/([A-Z])/g,e=>"-".concat(e[0].toLowerCase())),Sy=(i,e,t={})=>{if(i instanceof Element){const n=WM(i.classList,e,t);n!==""&&(i.className=n),Object.keys(e).forEach(r=>{if(!(r==="children"||r==="style"||r==="ref"||r==="class"||r==="className"||r==="forwardedRef"))if(r.indexOf("on")===0&&r[2]===r[2].toUpperCase()){const s=r.substring(2),a=s[0].toLowerCase()+s.substring(1);Mc(a)||QM(i,a,e[r])}else i[r]=e[r],typeof e[r]==="string"&&i.setAttribute(zh(r),e[r])})}},WM=(i,e,t)=>{const n=e.className||e.class,r=t.className||t.class,s=ap(i),a=ap(n?n.split(" "):[]),o=ap(r?r.split(" "):[]),l=[];return s.forEach(c=>{a.has(c)?(l.push(c),a.delete(c)):o.has(c)||l.push(c)}),a.forEach(c=>l.push(c)),l.join(" ")},HM=i=>{switch(i){case"doubleclick":return"dblclick"}return i};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const Mc=i=>{if(typeof document>"u")return!0;{const e="on"+HM(i);let t=e in document;if(!t){const n=document.createElement("div");n.setAttribute(e,"return;"),t=typeof n[e]=="function"}return t}},QM=(i,e,t)=>{const n=i.__events||(i.__events={}),r=n[e];r&&i.removeEventListener(e,r),i.addEventListener(e,n[e]=function(a){t&&t.call(this,a)})},ap=i=>{const e=new Map;return i.forEach(t=>e.set(t,t)),e},GM=(i,e)=>{typeof i=="function"?i(e):i!=null&&(i.current=e)},Vh=(...i)=>e=>{i.forEach(t=>{GM(t,e)})},KM=(i,e)=>{const t=(n,r)=>Te.createElement(i,Object.assign({},n,{forwardedRef:r}));return t.displayName=e,Te.forwardRef(t)},YM=(i,e)=>{e!==void 0&&typeof customElements<"u"&&!customElements.get(i)&&customElements.define(i,e)},zt=(i,e,t,n)=>{n!==void 0&&n();const r=Ty(i),s=class extends Te.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){Sy(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:l,style:c,className:u,ref:d}=a,h=In(a,["children","forwardedRef","style","className","ref"]);let f=Object.keys(h).reduce((p,w)=>{const y=h[w];if(w.indexOf("on")===0&&w[2]===w[2].toUpperCase()){const b=w.substring(2).toLowerCase();typeof document<"u"&&Mc(b)&&(p[w]=y)}else{const b=typeof y;(b==="string"||b==="boolean"||b==="number")&&(p[zh(w)]=y)}return p},{});t&&(f=t(this.props,f));const m=Object.assign(Object.assign({},f),{ref:Vh(l,this.setComponentElRef),style:c});return ut.createElement(i,m,o)}static get displayName(){return r}};return e&&(s.contextType=e),KM(s,r)},JM=zt("ion-badge",void 0,void 0,$$),Wh=zt("ion-buttons",void 0,void 0,B$),Po=zt("ion-col",void 0,void 0,Z$),Hh=zt("ion-content",void 0,void 0,a2),oS=zt("ion-grid",void 0,void 0,_2),zo=zt("ion-header",void 0,void 0,q2),XM=zt("ion-img",void 0,void 0,V2),ZM=zt("ion-input",void 0,void 0,eO),Jr=zt("ion-label",void 0,void 0,tO),eL=zt("ion-list",void 0,void 0,aO),tL=zt("ion-menu",void 0,void 0,gO),lS=zt("ion-menu-button",void 0,void 0,EO),Sl=zt("ion-menu-toggle",void 0,void 0,CO),nL=zt("ion-range",void 0,void 0,BO),Kl=zt("ion-row",void 0,void 0,UO),op=zt("ion-text",void 0,void 0,nD),Cy=zt("ion-title",void 0,void 0,oD),Qh=zt("ion-toolbar",void 0,void 0,hD),Da=(i,e)=>{const t=(n,r)=>Te.createElement(i,Object.assign({},n,{forwardedRef:r}));return t.displayName=e,Te.forwardRef(t)},Ay=()=>{if(typeof window<"u"){const i=window.Ionic;if(i&&i.config)return i.config}return null},cS=(i,e)=>{YM(i,e);const t=Ty(i),n=class extends Te.Component{constructor(r){super(r),this.handleClick=s=>{const{routerLink:a,routerDirection:o,routerOptions:l,routerAnimation:c}=this.props;a!==void 0&&(s.preventDefault(),this.context.navigate(a,o,void 0,c,l))},this.ref=Te.createRef(),this.stableMergedRefs=Vh(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(r){const s=this.ref.current;Sy(s,this.props,r)}render(){const r=this.props,{children:s,forwardedRef:a,style:o,className:l,ref:c}=r,u=In(r,["children","forwardedRef","style","className","ref"]),d=Object.keys(u).reduce((f,m)=>{if(m.indexOf("on")===0&&m[2]===m[2].toUpperCase()){const p=m.substring(2).toLowerCase();Mc(p)&&(f[m]=u[m])}else["string","boolean","number"].includes(typeof u[m])&&(f[zh(m)]=u[m]);return f},{}),h=Object.assign(Object.assign({},d),{ref:this.stableMergedRefs,style:o});if(this.props.routerLink&&!this.props.href&&(h.href=this.props.routerLink),h.onClick){const f=h.onClick;h.onClick=m=>{f(m),m.defaultPrevented||this.handleClick(m)}}else h.onClick=this.handleClick;return ut.createElement(i,h,s)}static get displayName(){return t}static get contextType(){return Pr}};return Da(n,t)},ka=cS("ion-button",fD),sa=cS("ion-item",pD),iL=(i,e)=>{i instanceof Element&&Object.keys(e).forEach(t=>{if(t.indexOf("on")===0&&t[2]===t[2].toUpperCase()){const n=t.substring(2),r=n[0].toLowerCase()+n.substring(1);Mc(r)||rL(i,r)}})},rL=(i,e)=>{const t=i.__events||(i.__events={}),n=t[e];n&&(i.removeEventListener(e,n),t[e]=void 0)},sL=(i,e,t)=>{e&&e();const n=Ty(i),r=class extends Te.Component{constructor(s){super(s),this.handleIonMount=()=>{this.setState({isOpen:!0})},this.handleWillPresent=a=>{this.setState({isOpen:!0}),this.props.onWillPresent&&this.props.onWillPresent(a)},this.handleDidDismiss=a=>{const o=this.wrapperRef.current,l=this.ref.current;o&&l&&(l.append(o),this.setState({isOpen:!1})),this.props.onDidDismiss&&this.props.onDidDismiss(a)},this.ref=Te.createRef(),this.stableMergedRefs=Vh(this.ref,this.props.forwardedRef),this.state={isOpen:!1},this.wrapperRef=Te.createRef()}componentDidMount(){var s,a,o;this.componentDidUpdate(this.props),(s=this.ref.current)===null||s===void 0||s.addEventListener("ionMount",this.handleIonMount),(a=this.ref.current)===null||a===void 0||a.addEventListener("willPresent",this.handleWillPresent),(o=this.ref.current)===null||o===void 0||o.addEventListener("didDismiss",this.handleDidDismiss)}componentDidUpdate(s){const a=this.ref.current,o=this.props,l=In(o,["onDidDismiss","onWillPresent"]);Sy(a,l,s)}componentWillUnmount(){const s=this.ref.current;s&&this.state.isOpen&&(s.removeEventListener("didDismiss",this.handleDidDismiss),s.remove(),iL(s,this.props))}render(){const s=this.props,{children:a,forwardedRef:o,style:l,className:c,ref:u}=s,d=In(s,["children","forwardedRef","style","className","ref"]),h=Object.keys(d).reduce((p,w)=>{if(w.indexOf("on")===0&&w[2]===w[2].toUpperCase()){const y=w.substring(2).toLowerCase();Mc(y)&&(p[w]=d[w])}else["string","boolean","number"].includes(typeof d[w])&&(p[zh(w)]=d[w]);return p},{}),f=Object.assign(Object.assign({},h),{ref:this.stableMergedRefs,style:l}),m=()=>t?"".concat(jv," ion-page"):jv;return ut.createElement("template",{},ut.createElement(i,f,this.state.isOpen||this.props.keepContentsMounted?ut.createElement("div",{ref:this.wrapperRef,className:m()},a):null))}static get displayName(){return n}};return Da(r,n)},jv="ion-delegate-host",uS=sL("ion-alert",mD),aL=Te.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),oL=({onAddOverlay:i,onRemoveOverlay:e})=>{const[t,n]=ut.useState({}),r=ut.useRef({});r.current=t,ut.useEffect(()=>{i(s),e(a)},[]);const s=(l,c,u)=>{const d=Object.assign({},r.current);d[l]={component:c,containerElement:u},n(d)},a=l=>{const c=Object.assign({},r.current);delete c[l],n(c)},o=Object.keys(t);return Te.createElement(Te.Fragment,null,o.map(l=>{const c=t[l];return T_.createPortal(c.component,c.containerElement,"overlay-".concat(l))}))},lL=zt("ion-tab-button",void 0,void 0,FD),cL=zt("ion-tab-bar",void 0,void 0,DD),uL=zt("ion-back-button",void 0,void 0,AD),Mm=zt("ion-router-outlet",void 0,void 0,RD),dL=zt("ion-app",void 0,void 0,ED),hL=zt("ion-icon",void 0,void 0,zM),fL=(()=>class extends Te.Component{constructor(i){super(i),this.ionContext={addOverlay:(e,t,n)=>{this.addOverlayCallback&&this.addOverlayCallback(e,t,n)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return Te.createElement(aL.Provider,{value:this.ionContext},Te.createElement(dL,Object.assign({},this.props),this.props.children),Te.createElement(oL,{onAddOverlay:i=>{this.addOverlayCallback=i},onRemoveOverlay:i=>{this.removeOverlayCallback=i}}))}static get displayName(){return"IonApp"}})(),Ny=Te.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class dS extends Te.PureComponent{constructor(e){super(e),this.ionPageElementRef=Te.createRef(),this.stableMergedRefs=Vh(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:t,children:n,routeInfo:r,forwardedRef:s}=e,a=In(e,["className","children","routeInfo","forwardedRef"]);return Te.createElement(xy.Consumer,null,o=>(this.ionLifeCycleContext=o,Te.createElement("div",Object.assign({className:t?"".concat(t," ion-page"):"ion-page",ref:this.stableMergedRefs},a),n)))}static get contextType(){return Ny}}class pL extends Te.Component{constructor(e){super(e)}render(){const e=this.props,{className:t,children:n,forwardedRef:r}=e,s=In(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?Te.createElement(dS,Object.assign({className:t?"".concat(t):"",routeInfo:this.context.routeInfo,forwardedRef:r},s),n):Te.createElement("div",Object.assign({className:t?"ion-page ".concat(t):"ion-page",ref:r},s),n)}static get displayName(){return"IonPage"}static get contextType(){return Pr}}const ky=Da(pL,"IonPage"),mL=(i,e)=>{const t=new WeakMap;return{attachViewToDom:async(s,a,o,l)=>{const c=document.createElement("div");l&&c.classList.add(...l),s.appendChild(c);const u=a(o),d=Qg.createPortal(u,c);return t.set(c,d),i(d),Promise.resolve(c)},removeViewFromDom:(s,a)=>{const o=t.get(a);return o&&e(o),a.remove(),Promise.resolve()}}},gL=zt("ion-nav",void 0,void 0,RO),yL=i=>{var{children:e,forwardedRef:t}=i,n=In(i,["children","forwardedRef"]);const[r,s]=ut.useState([]),a=c=>s(u=>[...u,c]),o=c=>s(u=>u.filter(d=>d!==c)),l=ut.useMemo(()=>mL(a,o),[]);return Te.createElement(gL,Object.assign({delegate:l,ref:t},n),r)};Da(yL,"IonNav");Te.createContext({activeTab:void 0,selectTab:()=>!1});const bL=typeof HTMLElement<"u"?HTMLElement:class{};class vL extends Te.Component{constructor(e){super(e),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||Ca(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:t,children:n,routeInfo:r}=e,s=In(e,["StackManager","children","routeInfo"]);return Te.createElement(xy.Consumer,null,a=>(this.ionLifeCycleContext=a,Te.createElement(t,{routeInfo:r},Te.createElement(Mm,Object.assign({setRef:o=>this.ionRouterOutlet=o},s),n))))}static get contextType(){return Ny}}class wL extends Te.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),t=this.props,{children:n,forwardedRef:r}=t,s=In(t,["children","forwardedRef"]);return this.context.hasIonicRouter()?s.ionPage?Te.createElement(vL,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},s),n):Te.createElement(e,{routeInfo:this.context.routeInfo},Te.createElement(Mm,Object.assign({},s,{forwardedRef:r}),n)):Te.createElement(Mm,Object.assign({ref:r},this.props),this.props.children)}static get contextType(){return Pr}}const EL=Da(wL,"IonRouterOutlet"),Io=(()=>class extends Te.Component{constructor(i){super(i),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const i=this.props,e=In(i,["onClick"]);return Te.createElement(lL,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}})();class xL extends Te.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=n=>{};const t={};Te.Children.forEach(e.children,n=>{var r,s,a,o;n!=null&&typeof n=="object"&&n.props&&(n.type===Io||n.type.isTabButton)&&(t[n.props.tab]={originalHref:n.props.href,currentHref:n.props.href,originalRouteOptions:n.props.href===((r=e.routeInfo)===null||r===void 0?void 0:r.pathname)?(s=e.routeInfo)===null||s===void 0?void 0:s.routeOptions:void 0,currentRouteOptions:n.props.href===((a=e.routeInfo)===null||a===void 0?void 0:a.pathname)?(o=e.routeInfo)===null||o===void 0?void 0:o.routeOptions:void 0})}),this.state={tabs:t},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,n=Object.keys(e).find(r=>{const s=e[r].originalHref;return this.props.routeInfo.pathname.startsWith(s)});n&&this.setState({activeTab:n})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const t=this.state.tabs[e];return t?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(e,t){var n,r,s;const a=Object.assign({},t.tabs),l=Object.keys(t.tabs).find(u=>{const d=t.tabs[u].originalHref;return e.routeInfo.pathname.startsWith(d)});Te.Children.forEach(e.children,u=>{if(u!=null&&typeof u=="object"&&u.props&&(u.type===Io||u.type.isTabButton)){const d=a[u.props.tab];(!d||d.originalHref!==u.props.href)&&(a[u.props.tab]={originalHref:u.props.href,currentHref:u.props.href,originalRouteOptions:u.props.routeOptions,currentRouteOptions:u.props.routeOptions})}});const{activeTab:c}=t;if(l&&c){const u=t.tabs[c].currentHref,d=t.tabs[c].currentRouteOptions;(l!==c||u!==((n=e.routeInfo)===null||n===void 0?void 0:n.pathname)||d!==((r=e.routeInfo)===null||r===void 0?void 0:r.routeOptions))&&(a[l]={originalHref:a[l].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:a[l].originalRouteOptions,currentRouteOptions:(s=e.routeInfo)===null||s===void 0?void 0:s.routeOptions},e.routeInfo.routeAction==="pop"&&l!==c&&(a[c]={originalHref:a[c].originalHref,currentHref:a[c].originalHref,originalRouteOptions:a[c].originalRouteOptions,currentRouteOptions:a[c].currentRouteOptions}))}return l&&e.onSetCurrentTab(l,e.routeInfo),{activeTab:l,tabs:a}}onTabButtonClick(e,t){const n=this.state.tabs[e.detail.tab],r=n.originalHref,s=e.detail.href,{activeTab:a}=this.state;t&&t(e),a===e.detail.tab?r!==s&&this.context.resetTab(e.detail.tab,r,n.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,s,e.detail.routeOptions))}renderTabButton(e){return t=>{var n,r;if(t!=null&&t.props&&(t.type===Io||t.type.isTabButton)){const s=t.props.tab===e?(n=this.props.routeInfo)===null||n===void 0?void 0:n.pathname:this.state.tabs[t.props.tab].currentHref,a=t.props.tab===e?(r=this.props.routeInfo)===null||r===void 0?void 0:r.routeOptions:this.state.tabs[t.props.tab].currentRouteOptions;return Te.cloneElement(t,{href:s,routeOptions:a,onClick:o=>this.onTabButtonClick(o,t.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return Te.createElement(cL,Object.assign({},this.props,{selectedTab:e}),Te.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return Pr}}const TL=Te.memo(i=>{var{forwardedRef:e}=i,t=In(i,["forwardedRef"]);const n=ut.useContext(Pr);return Te.createElement(xL,Object.assign({ref:e},t,{routeInfo:t.routeInfo||n.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:n.setCurrentTab}),t.children)}),SL=Da(TL,"IonTabBar");class CL extends bL{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",CL));const AL=(()=>class extends Te.Component{constructor(){super(...arguments),this.clickButton=i=>{if(i.target&&i.target.closest("ion-nav")!==null)return;const{defaultHref:e,routerAnimation:t}=this.props;this.context.hasIonicRouter()?(i.stopPropagation(),this.context.goBack(e,t)):e!==void 0&&(window.location.href=e)}}render(){return Te.createElement(uL,Object.assign({onClick:this.clickButton},this.props))}static get displayName(){return"IonBackButton"}static get contextType(){return Pr}})();class NL extends Te.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,t;const n=this.props,{icon:r,ios:s,md:a,mode:o}=n,l=In(n,["icon","ios","md","mode"]);let c;const u=Ay(),d=o||(u==null?void 0:u.get("mode"));return s||a?d==="ios"?c=(e=s!=null?s:a)!==null&&e!==void 0?e:r:c=(t=a!=null?a:s)!==null&&t!==void 0?t:r:c=r,Te.createElement(hL,Object.assign({ref:this.props.forwardedRef,icon:c},l),this.props.children)}static get contextType(){return Pr}}const tr=Da(NL,"IonIcon");class _y extends Te.PureComponent{render(){const e=this.context.getIonRoute();return!this.context.hasIonicRouter()||!_y?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):Te.createElement(e,Object.assign({},this.props))}static get contextType(){return Pr}}class hS extends Te.PureComponent{render(){const e=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!hS?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):Te.createElement(e,Object.assign({},this.props))}static get contextType(){return Pr}}const kL=Te.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class H8 extends Te.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=fn(e.id)}setupAnimation(e){const t=this.animation;this.nodes.size>0&&t.addElement(Array.from(this.nodes.values())),Uv(t,e),zv(t,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const t=this.animation,n=this.props;Uv(t,n,e),_L(t,n,e),zv(t,n,e)}render(){const{children:e}=this.props;return Te.createElement(Te.Fragment,null,Te.Children.map(e,(t,n)=>Te.cloneElement(t,{ref:r=>this.nodes.set(n,r)})))}}const Uv=(i,e={},t={})=>{const n=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const l in e)e.hasOwnProperty(l)&&!n.includes(l)&&e[l]!==t[l]&&i[l](e[l]);const r=e.from;r&&r!==t.from&&(Array.isArray(r)?r:[r]).forEach(c=>i.from(c.property,c.value));const s=e.to;s&&s!==t.to&&(Array.isArray(s)?s:[s]).forEach(c=>i.to(c.property,c.value));const a=e.fromTo;a&&a!==t.fromTo&&(Array.isArray(a)?a:[a]).forEach(c=>i.fromTo(c.property,c.fromValue,c.toValue));const o=e.onFinish;o&&o!==t.onFinish&&(Array.isArray(o)?o:[o]).forEach(c=>i.onFinish(c.callback,c.opts))},_L=(i,e={},t={})=>{var n,r,s,a,o;const{progressStart:l,progressStep:c,progressEnd:u}=e;l&&(((n=t.progressStart)===null||n===void 0?void 0:n.forceLinearEasing)!==(l==null?void 0:l.forceLinearEasing)||((r=t.progressStart)===null||r===void 0?void 0:r.step)!==(l==null?void 0:l.step))&&i.progressStart(l.forceLinearEasing,l.step),c&&((s=t.progressStep)===null||s===void 0?void 0:s.step)!==(c==null?void 0:c.step)&&i.progressStep(c.step),u&&(((a=t.progressEnd)===null||a===void 0?void 0:a.playTo)!==(u==null?void 0:u.playTo)||((o=t.progressEnd)===null||o===void 0?void 0:o.step)!==(u==null?void 0:u.step)||(t==null?void 0:t.dur)!==(u==null?void 0:u.dur))&&i.progressEnd(u.playTo,u.step,u.dur)},zv=(i,e={},t={})=>{!t.play&&e.play&&i.play(),!t.pause&&e.pause&&i.pause(),!t.stop&&e.stop&&i.stop(),!t.destroy&&e.destroy&&i.destroy()},Vv={main:0},zd=(i="main")=>{var e;const t=((e=Vv[i])!==null&&e!==void 0?e:0)+1;return Vv[i]=t,t.toString()},RL=(i={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),kI(Object.assign({},i))},fS=Te.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class Wv extends Te.Component{constructor(e){super(e),this.ionLifeCycleContext=new VM,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return Te.createElement(xy.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class PL{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){e.routeAction==="push"||e.routeAction==null?this._add(e):e.routeAction==="pop"?this._pop(e):e.routeAction==="replace"&&this._replace(e),e.routeDirection==="root"&&(this._clear(),this._add(e))}clearTabStack(e){const t=this._getRouteInfosByKey(e);t&&(t.forEach(n=>{this.locationHistory=this.locationHistory.filter(r=>r.id!==n.id)}),this.tabHistory[e]=[])}update(e){const t=this.locationHistory.findIndex(r=>r.id===e.id);t>-1&&this.locationHistory.splice(t,1,e);const n=this.tabHistory[e.tab||""];if(n){const r=n.findIndex(s=>s.id===e.id);r>-1?n.splice(r,1,e):n.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const t=this._getRouteInfosByKey(e.tab);t&&(this._areRoutesEqual(t[t.length-1],e)&&t.pop(),t.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,t){return!e||!t?!1:e.pathname===t.pathname&&e.search===t.search}_pop(e){const t=this._getRouteInfosByKey(e.tab);t&&(t.pop(),t.pop(),t.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const t=this._getRouteInfosByKey(e.tab);t&&t.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach(t=>this.tabHistory[t]=[]),this.locationHistory=[]}_getRouteInfosByKey(e){let t;return e&&(t=this.tabHistory[e],t||(t=this.tabHistory[e]=[])),t}getFirstRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[0]}getCurrentRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[t.length-1]}findLastLocation(e){const t=this._getRouteInfosByKey(e.tab);if(t)for(let n=t.length-2;n>=0;n--){const r=t[n];if(r&&r.pathname===e.pushedByRoute)return r}for(let n=this.locationHistory.length-2;n>=0;n--){const r=this.locationHistory[n];if(r&&r.pathname===e.pushedByRoute)return r}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class IL extends Te.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(t,n,r,s,a)=>{this.navigate(t,n,r,a,s)},back:t=>{this.goBack(void 0,t)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,t=>{this.nativeGoBack(),t()})}goBack(e,t){this.props.onNavigateBack(e,t)}nativeGoBack(){this.props.onNativeBack()}navigate(e,t="forward",n="push",r,s,a){this.props.onNavigate(e,n,t,r,s,a)}getPageManager(){return dS}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return Te.createElement(Pr.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},Te.createElement(kL.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class $L{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:t}=e;this.viewStacks[t]?this.viewStacks[t].push(e):this.viewStacks[t]=[e]}clear(e){return setTimeout(()=>{delete this.viewStacks[e]},500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:t}=e,n=this.viewStacks[t];if(n){const r=n.find(s=>s.id===e.id);r&&(r.mount=!1,this.viewStacks[t]=n.filter(s=>s.id!==r.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),t=[];return e.forEach(n=>{t.push(...this.viewStacks[n])}),t}}class OL extends Te.PureComponent{render(){return Te.createElement(Ol,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},this.props.computedMatch!==void 0?{computedMatch:this.props.computedMatch}:{}))}}class DL extends $L{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,t,n,r){const s={id:zd("viewItem"),outletId:e,ionPageElement:r,reactElement:t,mount:!0,ionRoute:!1},a={exact:t.props.exact,path:t.props.path||t.props.from,component:t.props.component},o=Ta(n.pathname,a);return t.type===_y&&(s.ionRoute=!0,s.disableIonPageManagement=t.props.disableIonPageManagement),s.routeData={match:o,childProps:t.props},s}getChildrenToRender(e,t,n){const r=this.getViewItemsForOutlet(e);return Te.Children.forEach(t.props.children,a=>{const o=r.find(l=>Hv(a,l.routeData.childProps.path||l.routeData.childProps.from));o&&(o.reactElement=a)}),r.map(a=>{let o;if(a.ionRoute&&!a.disableIonPageManagement)o=Te.createElement(Wv,{key:"view-".concat(a.id),mount:a.mount,removeView:()=>this.remove(a)},Te.cloneElement(a.reactElement,{computedMatch:a.routeData.match}));else{const l=Hv(a.reactElement,n.pathname);o=Te.createElement(Wv,{key:"view-".concat(a.id),mount:a.mount,removeView:()=>this.remove(a)},Te.cloneElement(a.reactElement,{computedMatch:a.routeData.match})),!l&&a.routeData.match&&(a.routeData.match=void 0,a.mount=!1)}return o})}findViewItemByRouteInfo(e,t,n){const{viewItem:r,match:s}=this.findViewItemByPath(e.pathname,t);return(n===void 0||n===!0)&&r&&s&&(r.routeData.match=s),r}findLeavingViewItemByRouteInfo(e,t,n=!0){const{viewItem:r}=this.findViewItemByPath(e.lastPathname,t,!1,n);return r}findViewItemByPathname(e,t){const{viewItem:n}=this.findViewItemByPath(e,t);return n}findViewItemByPath(e,t,n,r){let s,a,o;if(t)o=this.getViewItemsForOutlet(t),o.some(l),s||o.some(c);else{const u=this.getAllViewItems();u.some(l),s||u.some(c)}return{viewItem:s,match:a};function l(u){if(r&&!u.ionRoute)return!1;const d={exact:n?!0:u.routeData.childProps.exact,path:u.routeData.childProps.path||u.routeData.childProps.from,component:u.routeData.childProps.component},h=Ta(e,d);return h?(s=u,a=h,!0):!1}function c(u){return!u.routeData.childProps.path&&!u.routeData.childProps.from?(a={path:e,url:e,isExact:!0,params:{}},s=u,!0):!1}}}function Hv(i,e,t){const n={exact:t?!0:i.props.exact,path:i.props.path||i.props.from,component:i.props.component};return Ta(e,n)}function ML(i){let e;if(typeof i=="string"?e=i:e=i.outerHTML,document){const t=document.createElement("div");t.innerHTML=e,t.style.zIndex="";const n=t.getElementsByTagName("ion-back-button");return n[0]&&n[0].remove(),t.firstChild}}const Qv=i=>!i.classList.contains("ion-page-invisible")&&!i.classList.contains("ion-page-hidden");class LL extends Te.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=zd("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:t}=this.props.routeInfo,{pathname:n}=e.routeInfo;t!==n?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var t,n;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let r=this.context.findViewItemByRouteInfo(e,this.id),s=this.context.findLeavingViewItemByRouteInfo(e,this.id);!s&&e.prevRouteLastPathname&&(s=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),s&&(e.routeAction==="replace"?s.mount=!1:e.routeAction==="push"&&e.routeDirection==="forward"?!((t=e.routeOptions)===null||t===void 0)&&t.unmount&&(s.mount=!1):e.routeDirection!=="none"&&r!==s&&(s.mount=!1));const a=BL((n=this.ionRouterOutlet)===null||n===void 0?void 0:n.props.children,e);if(r?r.reactElement=a:a&&(r=this.context.createViewItem(this.id,a,e),this.context.addViewItem(r)),r&&r.ionPageElement){if(r===s&&r.routeData.match.url!==e.pathname||(!s&&this.props.routeInfo.prevRouteLastPathname&&(s=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),Qv(r.ionPageElement)&&s!==void 0&&!Qv(s.ionPageElement)))return;this.transitionPage(e,r,s)}else s&&!a&&!r&&s.ionPageElement&&(s.ionPageElement.classList.add("ion-page-hidden"),s.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(e,t){const n=this.context.findViewItemByRouteInfo(t,this.id);if(n){const r=n.ionPageElement;if(n.ionPageElement=e,n.ionRoute=!0,r===e)return}this.handlePageTransition(t)}async setupRouterOutlet(e){const t=()=>{const s=Ay();if(!(s&&s.get("swipeBackEnabled",e.mode==="ios")))return!1;const{routeInfo:o}=this.props,l=this.prevProps&&this.prevProps.routeInfo.pathname===o.pushedByRoute?this.prevProps.routeInfo:{pathname:o.pushedByRoute||""},c=this.context.findViewItemByRouteInfo(l,this.id,!1);return!!c&&c.mount&&c.routeData.match.path!==o.pathname},n=async()=>{const{routeInfo:s}=this.props,a=this.prevProps&&this.prevProps.routeInfo.pathname===s.pushedByRoute?this.prevProps.routeInfo:{pathname:s.pushedByRoute||""},o=this.context.findViewItemByRouteInfo(a,this.id,!1),l=this.context.findViewItemByRouteInfo(s,this.id,!1);return o&&l&&await this.transitionPage(s,o,l,"back",!0),Promise.resolve()},r=s=>{if(s)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:a}=this.props,o=this.prevProps&&this.prevProps.routeInfo.pathname===a.pushedByRoute?this.prevProps.routeInfo:{pathname:a.pushedByRoute||""},l=this.context.findViewItemByRouteInfo(o,this.id,!1),c=this.context.findViewItemByRouteInfo(a,this.id,!1);if(l!==c&&(l==null?void 0:l.ionPageElement)!==void 0){const{ionPageElement:u}=l;u.setAttribute("aria-hidden","true"),u.classList.add("ion-page-hidden")}}};e.swipeHandler={canStart:t,onStart:n,onEnd:r}}async transitionPage(e,t,n,r,s=!1){const a=async(u,d)=>{const h=this.skipTransition;h?this.skipTransition=!1:(u.classList.add("ion-page"),u.classList.add("ion-page-invisible")),await o.commit(u,d,{duration:h||c===void 0?0:void 0,direction:c,showGoBack:!!e.pushedByRoute,progressAnimation:s,animationBuilder:e.routeAnimation})},o=this.routerOutletElement,l=e.routeDirection==="none"||e.routeDirection==="root"?void 0:e.routeDirection,c=r!=null?r:l;if(t&&t.ionPageElement&&this.routerOutletElement)if(n&&n.ionPageElement&&t===n)if(qL(n.reactElement,e.pathname,!0)){const d=ML(n.ionPageElement.outerHTML);d&&(this.routerOutletElement.appendChild(d),await a(t.ionPageElement,d),this.routerOutletElement.removeChild(d))}else await a(t.ionPageElement,void 0);else await a(t.ionPageElement,n==null?void 0:n.ionPageElement),n&&n.ionPageElement&&!s&&(n.ionPageElement.classList.add("ion-page-hidden"),n.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,t=Te.Children.only(e);this.ionRouterOutlet=t;const n=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return Te.createElement(Ny.Provider,{value:this.stackContextValue},Te.cloneElement(t,{ref:r=>{t.props.setRef&&t.props.setRef(r),t.props.forwardedRef&&(t.props.forwardedRef.current=r),this.routerOutletElement=r;const{ref:s}=t;typeof s=="function"&&s(r)}},n))}static get contextType(){return fS}}function BL(i,e){let t;return Te.Children.forEach(i,n=>{const r={exact:n.props.exact,path:n.props.path||n.props.from,component:n.props.component};Ta(e.pathname,r)&&(t=n)}),t||(Te.Children.forEach(i,n=>{n.props.path||n.props.from||(t=n)}),t)}function qL(i,e,t){const n={exact:t?!0:i.props.exact,path:i.props.path||i.props.from,component:i.props.component};return Ta(e,n)}class FL extends Te.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new PL,this.viewStack=new DL,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const t={id:zd("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(t),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:t}}handleChangeTab(e,t,n){if(!t)return;const r=this.locationHistory.getCurrentRouteInfoForTab(e),[s,a]=t.split("?");r?(this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"push",routeDirection:"none"}),r.pathname===s?(this.incomingRouteParams.routeOptions=n,this.props.history.push(r.pathname+(r.search||""))):(this.incomingRouteParams.pathname=s,this.incomingRouteParams.search=a?"?"+a:void 0,this.incomingRouteParams.routeOptions=n,this.props.history.push(s+(a?"?"+a:"")))):this.handleNavigate(s,"push","none",void 0,n,e)}handleHistoryChange(e,t){var n,r,s;let a;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?a=this.locationHistory.previous():a=this.locationHistory.current():a=this.locationHistory.current(),a.pathname+a.search!==e.pathname){if(!this.incomingRouteParams){if(t==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),t==="POP"){const c=this.locationHistory.current();if(c&&c.pushedByRoute){const u=this.locationHistory.findLastLocation(c);this.incomingRouteParams=Object.assign(Object.assign({},u),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:((n=e.state)===null||n===void 0?void 0:n.direction)||"forward",routeOptions:(r=e.state)===null||r===void 0?void 0:r.routerOptions,tab:this.currentTab})}let l;if(!((s=this.incomingRouteParams)===null||s===void 0)&&s.id)l=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:a.pathname}),this.locationHistory.add(l);else{const c=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(l=Object.assign(Object.assign({id:zd("routeInfo")},this.incomingRouteParams),{lastPathname:a.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:a.lastPathname}),c)l.tab=a.tab,l.pushedByRoute=a.pathname;else if(l.routeAction==="pop"){const u=this.locationHistory.findLastLocation(l);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="push"&&l.tab!==a.tab){const u=this.locationHistory.getCurrentRouteInfoForTab(l.tab);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="replace"){const u=this.locationHistory.current(),d=u==null?void 0:u.pushedByRoute,h=d!==void 0&&d!==l.pathname?d:l.pushedByRoute;l.lastPathname=(u==null?void 0:u.pathname)||l.lastPathname,l.prevRouteLastPathname=u==null?void 0:u.lastPathname,l.pushedByRoute=h,l.routeDirection=(u==null?void 0:u.routeDirection)||l.routeDirection,l.routeAnimation=(u==null?void 0:u.routeAnimation)||l.routeAnimation}this.locationHistory.add(l)}this.setState({routeInfo:l})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,t,n,r,s,a){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:t,routeDirection:n,routeOptions:s,routeAnimation:r,tab:a}),t==="push"?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",t){const n=Ay();e=e||n&&n.get("backButtonDefaultHref");const r=this.locationHistory.current();if(r&&r.pushedByRoute){const s=this.locationHistory.findLastLocation(r);if(s)if(this.incomingRouteParams=Object.assign(Object.assign({},s),{routeAction:"pop",routeDirection:"back",routeAnimation:t||r.routeAnimation}),r.lastPathname===r.pushedByRoute||s.pathname===r.pushedByRoute&&r.tab===""&&s.tab===""){const a=this.props.history;(a.goBack||a.back)()}else this.handleNavigate(s.pathname+(s.search||""),"pop","back",t);else this.handleNavigate(e,"pop","back",t)}else this.handleNavigate(e,"pop","back",t)}handleResetTab(e,t,n){const r=this.locationHistory.getFirstRouteInfoForTab(e);if(r){const s=Object.assign({},r);s.pathname=t,s.routeOptions=n,this.incomingRouteParams=Object.assign(Object.assign({},s),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(s.pathname+(s.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const t=Object.assign({},this.locationHistory.current());t.tab!==e&&(t.tab=e,this.locationHistory.update(t))}render(){return Te.createElement(fS.Provider,{value:this.routeMangerContextState},Te.createElement(IL,{ionRoute:OL,ionRedirect:{},stackManager:LL,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const Gh=DR(FL);Gh.displayName="IonRouter";class jL extends Te.Component{constructor(e){super(e);const{history:t}=e,n=In(e,["history"]);this.history=t||B_(n),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const n=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,n=In(e,["children"]);return Te.createElement(_c,Object.assign({history:this.history},n),Te.createElement(Gh,{registerHistoryListener:this.registerHistoryListener},t))}}class Q8 extends Te.Component{constructor(e){super(e),this.history=e.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const n=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,n=In(e,["children"]);return Te.createElement(_c,Object.assign({},n),Te.createElement(Gh,{registerHistoryListener:this.registerHistoryListener},t))}}class G8 extends Te.Component{constructor(e){super(e);const{history:t}=e,n=In(e,["history"]);this.history=t||j_(n),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const n=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,n=In(e,["children"]);return Te.createElement(_c,Object.assign({history:this.history},n),Te.createElement(Gh,{registerHistoryListener:this.registerHistoryListener},t))}}const UL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 80a176 176 0 10176 176A176 176 0 00256 80z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296' stroke-linecap='round' stroke-miterlimit='10' stroke-width='28' class='ionicon-fill-none'/><circle cx='250' cy='348' r='20'/></svg>",zL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M261.56 101.28a8 8 0 00-11.06 0L66.4 277.15a8 8 0 00-2.47 5.79L63.9 448a32 32 0 0032 32H192a16 16 0 0016-16V328a8 8 0 018-8h80a8 8 0 018 8v136a16 16 0 0016 16h96.06a32 32 0 0032-32V282.94a8 8 0 00-2.47-5.79z'/><path d='M490.91 244.15l-74.8-71.56V64a16 16 0 00-16-16h-48a16 16 0 00-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0043 267.56L250.5 69.28a8 8 0 0111.06 0l207.52 198.28a16 16 0 0022.59-.44c6.14-6.36 5.63-16.86-.76-22.97z'/></svg>",VL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M480 257.35c0-123.7-100.3-224-224-224s-224 100.3-224 224c0 111.8 81.9 204.47 189 221.29V322.12h-56.89v-64.77H221V208c0-56.13 33.45-87.16 84.61-87.16 24.51 0 50.15 4.38 50.15 4.38v55.13H327.5c-27.81 0-36.51 17.26-36.51 35v42h62.12l-9.92 64.77H291v156.54c107.1-16.81 189-109.48 189-221.31z' fill-rule='evenodd'/></svg>",WL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M349.33 69.33a93.62 93.62 0 0193.34 93.34v186.66a93.62 93.62 0 01-93.34 93.34H162.67a93.62 93.62 0 01-93.34-93.34V162.67a93.62 93.62 0 0193.34-93.34h186.66m0-37.33H162.67C90.8 32 32 90.8 32 162.67v186.66C32 421.2 90.8 480 162.67 480h186.66C421.2 480 480 421.2 480 349.33V162.67C480 90.8 421.2 32 349.33 32z'/><path d='M377.33 162.67a28 28 0 1128-28 27.94 27.94 0 01-28 28zM256 181.33A74.67 74.67 0 11181.33 256 74.75 74.75 0 01256 181.33m0-37.33a112 112 0 10112 112 112 112 0 00-112-112z'/></svg>",HL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448.67 154.45L274.1 68.2a41.1 41.1 0 00-36.2 0L63.33 154.45A55.6 55.6 0 0032 204.53v184.61c0 30.88 25.42 56 56.67 56h334.66c31.25 0 56.67-25.12 56.67-56V204.53a55.6 55.6 0 00-31.33-50.08zM252.38 96.82a8.22 8.22 0 017.24 0L429 180.48l-172 85a8.22 8.22 0 01-7.24 0L80.35 181.81z'/></svg>",QL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M224 432h-80V80h80zM368 432h-80V80h80z'/></svg>",GL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M96 448l320-192L96 64v384z'/></svg>",KL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><path d='M470.39 300l-.47-.38-31.56-24.75a16.11 16.11 0 01-6.1-13.33v-11.56a16 16 0 016.11-13.22L469.92 212l.47-.38a26.68 26.68 0 005.9-34.06l-42.71-73.9a1.59 1.59 0 01-.13-.22A26.86 26.86 0 00401 92.14l-.35.13-37.1 14.93a15.94 15.94 0 01-14.47-1.29q-4.92-3.1-10-5.86a15.94 15.94 0 01-8.19-11.82l-5.59-39.59-.12-.72A27.22 27.22 0 00298.76 26h-85.52a26.92 26.92 0 00-26.45 22.39l-.09.56-5.57 39.67a16 16 0 01-8.13 11.82 175.21 175.21 0 00-10 5.82 15.92 15.92 0 01-14.43 1.27l-37.13-15-.35-.14a26.87 26.87 0 00-32.48 11.34l-.13.22-42.77 73.95a26.71 26.71 0 005.9 34.1l.47.38 31.56 24.75a16.11 16.11 0 016.1 13.33v11.56a16 16 0 01-6.11 13.22L42.08 300l-.47.38a26.68 26.68 0 00-5.9 34.06l42.71 73.9a1.59 1.59 0 01.13.22 26.86 26.86 0 0032.45 11.3l.35-.13 37.07-14.93a15.94 15.94 0 0114.47 1.29q4.92 3.11 10 5.86a15.94 15.94 0 018.19 11.82l5.56 39.59.12.72A27.22 27.22 0 00213.24 486h85.52a26.92 26.92 0 0026.45-22.39l.09-.56 5.57-39.67a16 16 0 018.18-11.82c3.42-1.84 6.76-3.79 10-5.82a15.92 15.92 0 0114.43-1.27l37.13 14.95.35.14a26.85 26.85 0 0032.48-11.34 2.53 2.53 0 01.13-.22l42.71-73.89a26.7 26.7 0 00-5.89-34.11zm-134.48-40.24a80 80 0 11-83.66-83.67 80.21 80.21 0 0183.66 83.67z'/></svg>",pS="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='16'/><path d='M280 81.5V72a24 24 0 00-48 0v9.5a191 191 0 00-84.43 32.13L137 103a24 24 0 00-34 34l8.6 8.6A191.17 191.17 0 0064 272c0 105.87 86.13 192 192 192s192-86.13 192-192c0-97.74-73.42-178.66-168-190.5zM256 320a48 48 0 01-16-93.25V152a16 16 0 0132 0v74.75A48 48 0 01256 320z'/></svg>",YL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M434.67 285.59v-29.8c0-98.73-80.24-178.79-179.2-178.79a179 179 0 00-140.14 67.36m-38.53 82v29.8C76.8 355 157 435 256 435a180.45 180.45 0 00140-66.92' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M32 256l44-44 46 44M480 256l-44 44-46-44' class='ionicon-fill-none ionicon-stroke-width'/></svg>",JL="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z'/></svg>",Gv=i=>{let e;const t=new Set,n=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const d=e;e=(c!=null?c:typeof u!="object")?u:Object.assign({},e,u),t.forEach(h=>h(e,d))}},r=()=>e,o={setState:n,getState:r,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{t.clear()}};return e=i(n,r,o),o},XL=i=>i?Gv(i):Gv;var mS={exports:{}},gS={},yS={exports:{}},bS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vo=ut;function ZL(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var e3=typeof Object.is=="function"?Object.is:ZL,t3=Vo.useState,n3=Vo.useEffect,i3=Vo.useLayoutEffect,r3=Vo.useDebugValue;function s3(i,e){var t=e(),n=t3({inst:{value:t,getSnapshot:e}}),r=n[0].inst,s=n[1];return i3(function(){r.value=t,r.getSnapshot=e,lp(r)&&s({inst:r})},[i,t,e]),n3(function(){return lp(r)&&s({inst:r}),i(function(){lp(r)&&s({inst:r})})},[i]),r3(t),t}function lp(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!e3(i,t)}catch(n){return!0}}function a3(i,e){return e()}var o3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?a3:s3;bS.useSyncExternalStore=Vo.useSyncExternalStore!==void 0?Vo.useSyncExternalStore:o3;yS.exports=bS;var l3=yS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh=ut,c3=l3;function u3(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var d3=typeof Object.is=="function"?Object.is:u3,h3=c3.useSyncExternalStore,f3=Kh.useRef,p3=Kh.useEffect,m3=Kh.useMemo,g3=Kh.useDebugValue;gS.useSyncExternalStoreWithSelector=function(i,e,t,n,r){var s=f3(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=m3(function(){function l(f){if(!c){if(c=!0,u=f,f=n(f),r!==void 0&&a.hasValue){var m=a.value;if(r(m,f))return d=m}return d=f}if(m=d,d3(u,f))return m;var p=n(f);return r!==void 0&&r(m,p)?m:(u=f,d=p)}var c=!1,u,d,h=t===void 0?null:t;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,t,n,r]);var o=h3(i,s[0],s[1]);return p3(function(){a.hasValue=!0,a.value=o},[o]),g3(o),o};mS.exports=gS;var y3=mS.exports;const b3=Ra(y3),{useSyncExternalStoreWithSelector:v3}=b3;function w3(i,e=i.getState,t){const n=v3(i.subscribe,i.getState,i.getServerState||i.getState,e,t);return ut.useDebugValue(n),n}const Kv=i=>{const e=typeof i=="function"?XL(i):i,t=(n,r)=>w3(e,n,r);return Object.assign(t,e),t},E3=i=>i?Kv(i):Kv,Lm=new Map,xu=i=>{const e=Lm.get(i);return e?Object.fromEntries(Object.entries(e.stores).map(([t,n])=>[t,n.getState()])):{}},x3=(i,e,t)=>{if(i===void 0)return{type:"untracked",connection:e.connect(t)};const n=Lm.get(t.name);if(n)return{type:"tracked",store:i,...n};const r={connection:e.connect(t),stores:{}};return Lm.set(t.name,r),{type:"tracked",store:i,...r}},T3=(i,e={})=>(t,n,r)=>{const{enabled:s,anonymousActionType:a,store:o,...l}=e;let c;try{c=(s!=null?s:!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(p){}if(!c)return i(t,n,r);const{connection:u,...d}=x3(o,c,l);let h=!0;r.setState=(p,w,y)=>{const b=t(p,w);if(!h)return b;const E=y===void 0?{type:a||"anonymous"}:typeof y=="string"?{type:y}:y;return o===void 0?(u==null||u.send(E,n()),b):(u==null||u.send({...E,type:"".concat(o,"/").concat(E.type)},{...xu(l.name),[o]:r.getState()}),b)};const f=(...p)=>{const w=h;h=!1,t(...p),h=w},m=i(r.setState,n,r);if(d.type==="untracked"?u==null||u.init(m):(d.stores[d.store]=r,u==null||u.init(Object.fromEntries(Object.entries(d.stores).map(([p,w])=>[p,p===d.store?m:w.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let p=!1;const w=r.dispatch;r.dispatch=(...y)=>{w(...y)}}return u.subscribe(p=>{var w;switch(p.type){case"ACTION":if(typeof p.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return cp(p.payload,y=>{if(y.type==="__setState"){if(o===void 0){f(y.state);return}Object.keys(y.state).length!==1&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const b=y.state[o];if(b==null)return;JSON.stringify(r.getState())!==JSON.stringify(b)&&f(b);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(y)});case"DISPATCH":switch(p.payload.type){case"RESET":return f(m),o===void 0?u==null?void 0:u.init(r.getState()):u==null?void 0:u.init(xu(l.name));case"COMMIT":if(o===void 0){u==null||u.init(r.getState());return}return u==null?void 0:u.init(xu(l.name));case"ROLLBACK":return cp(p.state,y=>{if(o===void 0){f(y),u==null||u.init(r.getState());return}f(y[o]),u==null||u.init(xu(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return cp(p.state,y=>{if(o===void 0){f(y);return}JSON.stringify(r.getState())!==JSON.stringify(y[o])&&f(y[o])});case"IMPORT_STATE":{const{nextLiftedState:y}=p.payload,b=(w=y.computedStates.slice(-1)[0])==null?void 0:w.state;if(!b)return;f(o===void 0?b:b[o]),u==null||u.send(null,y);return}case"PAUSE_RECORDING":return h=!h}return}}),m},S3=T3,cp=(i,e)=>{let t;try{t=JSON.parse(i)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}t!==void 0&&e(t)};function C3(i,e){let t;try{t=i()}catch(r){return}return{getItem:r=>{var s;const a=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),o=(s=t.getItem(r))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(r,s)=>t.setItem(r,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:r=>t.removeItem(r)}}const wc=i=>e=>{try{const t=i(e);return t instanceof Promise?t:{then(n){return wc(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return wc(n)(t)}}}},A3=(i,e)=>(t,n,r)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,y)=>({...y,...w}),...e},a=!1;const o=new Set,l=new Set;let c;try{c=s.getStorage()}catch(w){}if(!c)return i((...w)=>{console.warn("[zustand persist middleware] Unable to update item '".concat(s.name,"', the given storage is currently unavailable.")),t(...w)},n,r);const u=wc(s.serialize),d=()=>{const w=s.partialize({...n()});let y;const b=u({state:w,version:s.version}).then(E=>c.setItem(s.name,E)).catch(E=>{y=E});if(y)throw y;return b},h=r.setState;r.setState=(w,y)=>{h(w,y),d()};const f=i((...w)=>{t(...w),d()},n,r);let m;const p=()=>{var w;if(!c)return;a=!1,o.forEach(b=>b(n()));const y=((w=s.onRehydrateStorage)==null?void 0:w.call(s,n()))||void 0;return wc(c.getItem.bind(c))(s.name).then(b=>{if(b)return s.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var E;return m=s.merge(b,(E=n())!=null?E:f),t(m,!0),d()}).then(()=>{y==null||y(m,void 0),a=!0,l.forEach(b=>b(m))}).catch(b=>{y==null||y(void 0,b)})};return r.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(c=w.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>a,onHydrate:w=>(o.add(w),()=>{o.delete(w)}),onFinishHydration:w=>(l.add(w),()=>{l.delete(w)})},p(),m||f},N3=(i,e)=>(t,n,r)=>{let s={storage:C3(()=>localStorage),partialize:p=>p,version:0,merge:(p,w)=>({...w,...p}),...e},a=!1;const o=new Set,l=new Set;let c=s.storage;if(!c)return i((...p)=>{console.warn("[zustand persist middleware] Unable to update item '".concat(s.name,"', the given storage is currently unavailable.")),t(...p)},n,r);const u=()=>{const p=s.partialize({...n()});return c.setItem(s.name,{state:p,version:s.version})},d=r.setState;r.setState=(p,w)=>{d(p,w),u()};const h=i((...p)=>{t(...p),u()},n,r);let f;const m=()=>{var p,w;if(!c)return;a=!1,o.forEach(b=>{var E;return b((E=n())!=null?E:h)});const y=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(p=n())!=null?p:h))||void 0;return wc(c.getItem.bind(c))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var E;return f=s.merge(b,(E=n())!=null?E:h),t(f,!0),u()}).then(()=>{y==null||y(f,void 0),f=n(),a=!0,l.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return r.persist={setOptions:p=>{s={...s,...p},p.storage&&(c=p.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:p=>(o.add(p),()=>{o.delete(p)}),onFinishHydration:p=>(l.add(p),()=>{l.delete(p)})},s.skipHydration||m(),f||h},k3=(i,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?A3(i,e):N3(i,e),_3=k3,R3=i=>({}),P3=i=>({timerInterval:25,setTimerInterval:e=>i(()=>({timerInterval:e}),!1,"setTimerInterval"),timerStatus:"idle",setTimerStatus:e=>i(()=>({timerStatus:e}),!1,"setTimerStatus"),timerKey:Date.now(),setTimerKey:()=>i(()=>({timerKey:Date.now()}),!1,"setTimerKey"),timerDuration:0,setTimerDuration:e=>i(()=>({timerDuration:Date.now()+e}),!1,"setTimerDuration"),timerPausedTime:0,setTimerPausedTime:()=>i(e=>({timerPausedTime:e.timerDuration-Date.now()}),!1,"setTimerPausedTime"),unsetTimer:()=>i(()=>({timerKey:Date.now(),timerStatus:"idle",timerDuration:0,timerPausedTime:0}),!1,"unsetTimer")}),I3=["timerStatus"],Vd=E3()(S3(_3((...i)=>({...R3(...i),...P3(...i)}),{name:"combineStore",partialize:i=>Object.fromEntries(Object.entries(i).filter(([e])=>!I3.includes(e)))})));function $3({isOpen:i,setIsOpen:e}){return xe.jsx(uS,{isOpen:i,header:"",subHeader:"Nice choice",message:"Let's do it!",buttons:["OK"],onDidDismiss:()=>{e(!1),history.back()}})}const O3=()=>{const{unsetTimer:i}=Vd(),{timerInterval:e,setTimerInterval:t}=Vd(),[n,r]=ut.useState(e),[s,a]=ut.useState(!1),o=()=>{t(n),a(!0),i()};return xe.jsxs(ky,{id:"main-content",children:[xe.jsx(zo,{children:xe.jsx(Qh,{color:"warning",children:xe.jsx(Wh,{slot:"start",children:xe.jsx(AL,{defaultHref:"/timer"})})})}),xe.jsxs(Hh,{children:[xe.jsxs(oS,{children:[xe.jsx(Kl,{children:xe.jsxs(Po,{children:[xe.jsxs(op,{children:[xe.jsx("h2",{children:"Timer Settings"}),xe.jsxs("p",{children:["Your timer is set to ring in ",n.toString()," seconds.",xe.jsx(tr,{slot:"icon-only",icon:UL,color:"primary"})]})]}),xe.jsxs(nL,{min:5,max:60,step:5,snaps:!0,color:"primary",value:n,onIonChange:l=>r(l.detail.value),children:[xe.jsx(Jr,{slot:"start",children:"5 sec"}),xe.jsx(Jr,{slot:"end",children:"60 sec"})]}),xe.jsx(op,{children:xe.jsx("small",{children:"If you wish to change the settings drag the nob to the desired time interval (5 to 60 seconds)."})})]})}),xe.jsx(Kl,{children:xe.jsx(Po,{children:xe.jsx(op,{})})}),xe.jsx(Kl,{children:xe.jsx(Po,{children:xe.jsx(ka,{expand:"block",onClick:o,children:"Save"})})})]}),xe.jsx($3,{isOpen:s,setIsOpen:a})]})]})};var Yv=typeof window>"u"?ut.useEffect:ut.useLayoutEffect,D3=({isPlaying:i,duration:e,startAt:t=0,updateInterval:n=0,onComplete:r,onUpdate:s})=>{let[a,o]=ut.useState(t),l=ut.useRef(0),c=ut.useRef(t),u=ut.useRef(t*-1e3),d=ut.useRef(null),h=ut.useRef(null),f=ut.useRef(null),m=y=>{let b=y/1e3;if(h.current===null){h.current=b,d.current=requestAnimationFrame(m);return}let E=b-h.current,_=l.current+E;h.current=b,l.current=_;let k=c.current+(n===0?_:(_/n|0)*n),B=c.current+_,D=typeof e=="number"&&B>=e;o(D?e:k),D||(d.current=requestAnimationFrame(m))},p=()=>{d.current&&cancelAnimationFrame(d.current),f.current&&clearTimeout(f.current),h.current=null},w=ut.useCallback(y=>{p(),l.current=0;let b=typeof y=="number"?y:t;c.current=b,o(b),i&&(d.current=requestAnimationFrame(m))},[i,t]);return Yv(()=>{if(s==null||s(a),e&&a>=e){u.current+=e*1e3;let{shouldRepeat:y=!1,delay:b=0,newStartAt:E}=(r==null?void 0:r(u.current/1e3))||{};y&&(f.current=setTimeout(()=>w(E),b*1e3))}},[a,e]),Yv(()=>(i&&(d.current=requestAnimationFrame(m)),p),[i,e,n]),{elapsedTime:a,reset:w}},M3=(i,e,t)=>{let n=i/2,r=e/2,s=n-r,a=2*s,o=t==="clockwise"?"1,0":"0,1",l=2*Math.PI*s;return{path:"m ".concat(n,",").concat(r," a ").concat(s,",").concat(s," 0 ").concat(o," 0,").concat(a," a ").concat(s,",").concat(s," 0 ").concat(o," 0,-").concat(a),pathLength:l}},Jv=(i,e)=>i===0||i===e?0:typeof e=="number"?i-e:0,L3=i=>({position:"relative",width:i,height:i}),B3={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},vS=(i,e,t,n,r)=>{if(n===0)return e;let s=(r?n-i:i)/n;return e+t*s},Xv=i=>{var e,t;return(t=(e=i.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,s,a)=>"#".concat(r).concat(r).concat(s).concat(s).concat(a).concat(a)).substring(1).match(/.{2}/g))==null?void 0:e.map(n=>parseInt(n,16)))!=null?t:[]},q3=(i,e)=>{var t;let{colors:n,colorsTime:r,isSmoothColorTransition:s=!0}=i;if(typeof n=="string")return n;let a=(t=r==null?void 0:r.findIndex((h,f)=>h>=e&&e>=r[f+1]))!=null?t:-1;if(!r||a===-1)return n[0];if(!s)return n[a];let o=r[a]-e,l=r[a]-r[a+1],c=Xv(n[a]),u=Xv(n[a+1]),d=!!i.isGrowing;return"rgb(".concat(c.map((h,f)=>vS(o,h,u[f]-h,l,d)|0).join(","),")")},F3=i=>{let{duration:e,initialRemainingTime:t,updateInterval:n,size:r=180,strokeWidth:s=12,trailStrokeWidth:a,isPlaying:o=!1,isGrowing:l=!1,rotation:c="clockwise",onComplete:u,onUpdate:d}=i,h=ut.useRef(),f=Math.max(s,a!=null?a:0),{path:m,pathLength:p}=M3(r,f,c),{elapsedTime:w}=D3({isPlaying:o,duration:e,startAt:Jv(e,t),updateInterval:n,onUpdate:typeof d=="function"?b=>{let E=Math.ceil(e-b);E!==h.current&&(h.current=E,d(E))}:void 0,onComplete:typeof u=="function"?b=>{var E;let{shouldRepeat:_,delay:k,newInitialRemainingTime:B}=(E=u(b))!=null?E:{};if(_)return{shouldRepeat:_,delay:k,newStartAt:Jv(e,B)}}:void 0}),y=e-w;return{elapsedTime:w,path:m,pathLength:p,remainingTime:Math.ceil(y),rotation:c,size:r,stroke:q3(i,y),strokeDashoffset:vS(w,0,p,e,l),strokeWidth:s}},wS=i=>{let{children:e,strokeLinecap:t,trailColor:n,trailStrokeWidth:r}=i,{path:s,pathLength:a,stroke:o,strokeDashoffset:l,remainingTime:c,elapsedTime:u,size:d,strokeWidth:h}=F3(i);return Te.createElement("div",{style:L3(d)},Te.createElement("svg",{viewBox:"0 0 ".concat(d," ").concat(d),width:d,height:d,xmlns:"http://www.w3.org/2000/svg"},Te.createElement("path",{d:s,fill:"none",stroke:n!=null?n:"#d9d9d9",strokeWidth:r!=null?r:h}),Te.createElement("path",{d:s,fill:"none",stroke:o,strokeLinecap:t!=null?t:"round",strokeWidth:h,strokeDasharray:a,strokeDashoffset:l})),typeof e=="function"&&Te.createElement("div",{style:B3},e({remainingTime:c,elapsedTime:u,color:o})))};wS.displayName="CountdownCircleTimer";class Ma extends Error{}class j3 extends Ma{constructor(e){super("Invalid DateTime: ".concat(e.toMessage()))}}class U3 extends Ma{constructor(e){super("Invalid Interval: ".concat(e.toMessage()))}}class z3 extends Ma{constructor(e){super("Invalid Duration: ".concat(e.toMessage()))}}class Ml extends Ma{}class ES extends Ma{constructor(e){super("Invalid unit ".concat(e))}}class Di extends Ma{}class hs extends Ma{constructor(){super("Zone is an abstract class")}}const ze="numeric",fr="short",wi="long",Wd={year:ze,month:ze,day:ze},xS={year:ze,month:fr,day:ze},V3={year:ze,month:fr,day:ze,weekday:fr},TS={year:ze,month:wi,day:ze},SS={year:ze,month:wi,day:ze,weekday:wi},CS={hour:ze,minute:ze},AS={hour:ze,minute:ze,second:ze},NS={hour:ze,minute:ze,second:ze,timeZoneName:fr},kS={hour:ze,minute:ze,second:ze,timeZoneName:wi},_S={hour:ze,minute:ze,hourCycle:"h23"},RS={hour:ze,minute:ze,second:ze,hourCycle:"h23"},PS={hour:ze,minute:ze,second:ze,hourCycle:"h23",timeZoneName:fr},IS={hour:ze,minute:ze,second:ze,hourCycle:"h23",timeZoneName:wi},$S={year:ze,month:ze,day:ze,hour:ze,minute:ze},OS={year:ze,month:ze,day:ze,hour:ze,minute:ze,second:ze},DS={year:ze,month:fr,day:ze,hour:ze,minute:ze},MS={year:ze,month:fr,day:ze,hour:ze,minute:ze,second:ze},W3={year:ze,month:fr,day:ze,weekday:fr,hour:ze,minute:ze},LS={year:ze,month:wi,day:ze,hour:ze,minute:ze,timeZoneName:fr},BS={year:ze,month:wi,day:ze,hour:ze,minute:ze,second:ze,timeZoneName:fr},qS={year:ze,month:wi,day:ze,weekday:wi,hour:ze,minute:ze,timeZoneName:wi},FS={year:ze,month:wi,day:ze,weekday:wi,hour:ze,minute:ze,second:ze,timeZoneName:wi};class Lc{get type(){throw new hs}get name(){throw new hs}get ianaName(){return this.name}get isUniversal(){throw new hs}offsetName(e,t){throw new hs}formatOffset(e,t){throw new hs}offset(e){throw new hs}equals(e){throw new hs}get isValid(){throw new hs}}let up=null;class Yh extends Lc{static get instance(){return up===null&&(up=new Yh),up}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return US(e,t,n)}formatOffset(e,t){return Jl(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Xu={};function H3(i){return Xu[i]||(Xu[i]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Xu[i]}const Q3={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function G3(i,e){const t=i.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,r,s,a,o,l,c,u]=n;return[a,r,s,o,l,c,u]}function K3(i,e){const t=i.formatToParts(e),n=[];for(let r=0;r<t.length;r++){const{type:s,value:a}=t[r],o=Q3[s];s==="era"?n[o]=a:gt(o)||(n[o]=parseInt(a,10))}return n}let Tu={};class is extends Lc{static create(e){return Tu[e]||(Tu[e]=new is(e)),Tu[e]}static resetCache(){Tu={},Xu={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=is.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return US(e,t,n,this.name)}formatOffset(e,t){return Jl(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=H3(this.name);let[r,s,a,o,l,c,u]=n.formatToParts?K3(n,t):G3(n,t);o==="BC"&&(r=-Math.abs(r)+1);const h=Xh({year:r,month:s,day:a,hour:l===24?0:l,minute:c,second:u,millisecond:0});let f=+t;const m=f%1e3;return f-=m>=0?m:1e3+m,(h-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Zv={};function Y3(i,e={}){const t=JSON.stringify([i,e]);let n=Zv[t];return n||(n=new Intl.ListFormat(i,e),Zv[t]=n),n}let Bm={};function qm(i,e={}){const t=JSON.stringify([i,e]);let n=Bm[t];return n||(n=new Intl.DateTimeFormat(i,e),Bm[t]=n),n}let Fm={};function J3(i,e={}){const t=JSON.stringify([i,e]);let n=Fm[t];return n||(n=new Intl.NumberFormat(i,e),Fm[t]=n),n}let jm={};function X3(i,e={}){const{base:t,...n}=e,r=JSON.stringify([i,n]);let s=jm[r];return s||(s=new Intl.RelativeTimeFormat(i,e),jm[r]=s),s}let Ll=null;function Z3(){return Ll||(Ll=new Intl.DateTimeFormat().resolvedOptions().locale,Ll)}function eB(i){const e=i.indexOf("-x-");e!==-1&&(i=i.substring(0,e));const t=i.indexOf("-u-");if(t===-1)return[i];{let n,r;try{n=qm(i).resolvedOptions(),r=i}catch(o){const l=i.substring(0,t);n=qm(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:a}=n;return[r,s,a]}}function tB(i,e,t){return(t||e)&&(i.includes("-u-")||(i+="-u"),t&&(i+="-ca-".concat(t)),e&&(i+="-nu-".concat(e))),i}function nB(i){const e=[];for(let t=1;t<=12;t++){const n=lt.utc(2009,t,1);e.push(i(n))}return e}function iB(i){const e=[];for(let t=1;t<=7;t++){const n=lt.utc(2016,11,13+t);e.push(i(n))}return e}function Su(i,e,t,n){const r=i.listingMode();return r==="error"?null:r==="en"?t(e):n(e)}function rB(i){return i.numberingSystem&&i.numberingSystem!=="latn"?!1:i.numberingSystem==="latn"||!i.locale||i.locale.startsWith("en")||new Intl.DateTimeFormat(i.intl).resolvedOptions().numberingSystem==="latn"}class sB{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:s,...a}=n;if(!t||Object.keys(a).length>0){const o={useGrouping:!1,...n};n.padTo>0&&(o.minimumIntegerDigits=n.padTo),this.inf=J3(e,o)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):Py(e,3);return dn(t,this.padTo)}}}class aB{constructor(e,t,n){this.opts=n,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),o=a>=0?"Etc/GMT+".concat(a):"Etc/GMT".concat(a);e.offset!==0&&is.create(o).valid?(r=o,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=qm(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:n}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class oB{constructor(e,t,n){this.opts={style:"long",...n},!t&&jS()&&(this.rtf=X3(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):SB(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}class Ft{static fromOpts(e){return Ft.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,n,r=!1){const s=e||un.defaultLocale,a=s||(r?"en-US":Z3()),o=t||un.defaultNumberingSystem,l=n||un.defaultOutputCalendar;return new Ft(a,o,l,s)}static resetCache(){Ll=null,Bm={},Fm={},jm={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n}={}){return Ft.create(e,t,n)}constructor(e,t,n,r){const[s,a,o]=eB(e);this.locale=s,this.numberingSystem=t||a||null,this.outputCalendar=n||o||null,this.intl=tB(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=rB(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Ft.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Su(this,e,WS,()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=nB(s=>this.extract(s,n,"month"))),this.monthsCache[r][e]})}weekdays(e,t=!1){return Su(this,e,GS,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=iB(s=>this.extract(s,n,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return Su(this,void 0,()=>KS,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[lt.utc(2016,11,13,9),lt.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Su(this,e,YS,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[lt.utc(-40,1,1),lt.utc(2017,1,1)].map(n=>this.extract(n,t,"era"))),this.eraCache[e]})}extract(e,t,n){const r=this.dtFormatter(e,t),s=r.formatToParts(),a=s.find(o=>o.type.toLowerCase()===n);return a?a.value:null}numberFormatter(e={}){return new sB(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new aB(e,this.intl,t)}relFormatter(e={}){return new oB(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Y3(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let dp=null;class Hn extends Lc{static get utcInstance(){return dp===null&&(dp=new Hn(0)),dp}static instance(e){return e===0?Hn.utcInstance:new Hn(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Hn(Zh(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":"UTC".concat(Jl(this.fixed,"narrow"))}get ianaName(){return this.fixed===0?"Etc/UTC":"Etc/GMT".concat(Jl(-this.fixed,"narrow"))}offsetName(){return this.name}formatOffset(e,t){return Jl(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class lB extends Lc{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ts(i,e){if(gt(i)||i===null)return e;if(i instanceof Lc)return i;if(cB(i)){const t=i.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Yh.instance:t==="utc"||t==="gmt"?Hn.utcInstance:Hn.parseSpecifier(t)||is.create(i)}else return ya(i)?Hn.instance(i):typeof i=="object"&&"offset"in i&&typeof i.offset=="function"?i:new lB(i)}let ew=()=>Date.now(),tw="system",nw=null,iw=null,rw=null,sw=60,aw;class un{static get now(){return ew}static set now(e){ew=e}static set defaultZone(e){tw=e}static get defaultZone(){return Ts(tw,Yh.instance)}static get defaultLocale(){return nw}static set defaultLocale(e){nw=e}static get defaultNumberingSystem(){return iw}static set defaultNumberingSystem(e){iw=e}static get defaultOutputCalendar(){return rw}static set defaultOutputCalendar(e){rw=e}static get twoDigitCutoffYear(){return sw}static set twoDigitCutoffYear(e){sw=e%100}static get throwOnInvalid(){return aw}static set throwOnInvalid(e){aw=e}static resetCaches(){Ft.resetCache(),is.resetCache()}}function gt(i){return typeof i>"u"}function ya(i){return typeof i=="number"}function Jh(i){return typeof i=="number"&&i%1===0}function cB(i){return typeof i=="string"}function uB(i){return Object.prototype.toString.call(i)==="[object Date]"}function jS(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch(i){return!1}}function dB(i){return Array.isArray(i)?i:[i]}function ow(i,e,t){if(i.length!==0)return i.reduce((n,r)=>{const s=[e(r),r];return n&&t(n[0],s[0])===n[0]?n:s},null)[1]}function hB(i,e){return e.reduce((t,n)=>(t[n]=i[n],t),{})}function Wo(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Hr(i,e,t){return Jh(i)&&i>=e&&i<=t}function fB(i,e){return i-e*Math.floor(i/e)}function dn(i,e=2){const t=i<0;let n;return t?n="-"+(""+-i).padStart(e,"0"):n=(""+i).padStart(e,"0"),n}function ws(i){if(!(gt(i)||i===null||i===""))return parseInt(i,10)}function ta(i){if(!(gt(i)||i===null||i===""))return parseFloat(i)}function Ry(i){if(!(gt(i)||i===null||i==="")){const e=parseFloat("0."+i)*1e3;return Math.floor(e)}}function Py(i,e,t=!1){const n=10**e;return(t?Math.trunc:Math.round)(i*n)/n}function Bc(i){return i%4===0&&(i%100!==0||i%400===0)}function Yl(i){return Bc(i)?366:365}function Hd(i,e){const t=fB(e-1,12)+1,n=i+(e-t)/12;return t===2?Bc(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Xh(i){let e=Date.UTC(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond);return i.year<100&&i.year>=0&&(e=new Date(e),e.setUTCFullYear(i.year,i.month-1,i.day)),+e}function Qd(i){const e=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7,t=i-1,n=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return e===4||n===3?53:52}function Um(i){return i>99?i:i>un.twoDigitCutoffYear?1900+i:2e3+i}function US(i,e,t,n=null){const r=new Date(i),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);const a={timeZoneName:e,...s},o=new Intl.DateTimeFormat(t,a).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return o?o.value:null}function Zh(i,e){let t=parseInt(i,10);Number.isNaN(t)&&(t=0);const n=parseInt(e,10)||0,r=t<0||Object.is(t,-0)?-n:n;return t*60+r}function zS(i){const e=Number(i);if(typeof i=="boolean"||i===""||Number.isNaN(e))throw new Di("Invalid unit value ".concat(i));return e}function Gd(i,e){const t={};for(const n in i)if(Wo(i,n)){const r=i[n];if(r==null)continue;t[e(n)]=zS(r)}return t}function Jl(i,e){const t=Math.trunc(Math.abs(i/60)),n=Math.trunc(Math.abs(i%60)),r=i>=0?"+":"-";switch(e){case"short":return"".concat(r).concat(dn(t,2),":").concat(dn(n,2));case"narrow":return"".concat(r).concat(t).concat(n>0?":".concat(n):"");case"techie":return"".concat(r).concat(dn(t,2)).concat(dn(n,2));default:throw new RangeError("Value format ".concat(e," is out of range for property format"))}}function ef(i){return hB(i,["hour","minute","second","millisecond"])}const pB=["January","February","March","April","May","June","July","August","September","October","November","December"],VS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mB=["J","F","M","A","M","J","J","A","S","O","N","D"];function WS(i){switch(i){case"narrow":return[...mB];case"short":return[...VS];case"long":return[...pB];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const HS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],QS=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],gB=["M","T","W","T","F","S","S"];function GS(i){switch(i){case"narrow":return[...gB];case"short":return[...QS];case"long":return[...HS];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const KS=["AM","PM"],yB=["Before Christ","Anno Domini"],bB=["BC","AD"],vB=["B","A"];function YS(i){switch(i){case"narrow":return[...vB];case"short":return[...bB];case"long":return[...yB];default:return null}}function wB(i){return KS[i.hour<12?0:1]}function EB(i,e){return GS(e)[i.weekday-1]}function xB(i,e){return WS(e)[i.month-1]}function TB(i,e){return YS(e)[i.year<0?0:1]}function SB(i,e,t="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(i)===-1;if(t==="auto"&&s){const d=i==="days";switch(e){case 1:return d?"tomorrow":"next ".concat(r[i][0]);case-1:return d?"yesterday":"last ".concat(r[i][0]);case 0:return d?"today":"this ".concat(r[i][0])}}const a=Object.is(e,-0)||e<0,o=Math.abs(e),l=o===1,c=r[i],u=n?l?c[1]:c[2]||c[1]:l?r[i][0]:i;return a?"".concat(o," ").concat(u," ago"):"in ".concat(o," ").concat(u)}function lw(i,e){let t="";for(const n of i)n.literal?t+=n.val:t+=e(n.val);return t}const CB={D:Wd,DD:xS,DDD:TS,DDDD:SS,t:CS,tt:AS,ttt:NS,tttt:kS,T:_S,TT:RS,TTT:PS,TTTT:IS,f:$S,ff:DS,fff:LS,ffff:qS,F:OS,FF:MS,FFF:BS,FFFF:FS};class Fn{static create(e,t={}){return new Fn(e,t)}static parseFormat(e){let t=null,n="",r=!1;const s=[];for(let a=0;a<e.length;a++){const o=e.charAt(a);o==="'"?(n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||o===t?n+=o:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=o,t=o)}return n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return CB[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return dn(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,m)=>this.loc.extract(e,f,m),a=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",o=()=>n?wB(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,m)=>n?xB(e,f):s(m?{month:f}:{month:f,day:"numeric"},"month"),c=(f,m)=>n?EB(e,f):s(m?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const m=Fn.macroTokenToFormatOpts(f);return m?this.formatWithSystemDefault(e,m):f},d=f=>n?TB(e,f):s({era:f},"era"),h=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(f)}};return lw(Fn.parseFormat(t),h)}formatDurationFromString(e,t){const n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const u=n(c);return u?this.num(l.get(u),c.length):c},s=Fn.parseFormat(t),a=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),o=e.shiftTo(...a.map(n).filter(l=>l));return lw(s,r(o))}}class ir{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?"".concat(this.reason,": ").concat(this.explanation):this.reason}}const JS=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Xo(...i){const e=i.reduce((t,n)=>t+n.source,"");return RegExp("^".concat(e,"$"))}function Zo(...i){return e=>i.reduce(([t,n,r],s)=>{const[a,o,l]=s(e,r);return[{...t,...a},o||n,l]},[{},null,1]).slice(0,2)}function el(i,...e){if(i==null)return[null,null];for(const[t,n]of e){const r=t.exec(i);if(r)return n(r)}return[null,null]}function XS(...i){return(e,t)=>{const n={};let r;for(r=0;r<i.length;r++)n[i[r]]=ws(e[t+r]);return[n,null,t+r]}}const ZS=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,AB="(?:".concat(ZS.source,"?(?:\\[(").concat(JS.source,")\\])?)?"),Iy=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,eC=RegExp("".concat(Iy.source).concat(AB)),$y=RegExp("(?:T".concat(eC.source,")?")),NB=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,kB=/(\d{4})-?W(\d\d)(?:-?(\d))?/,_B=/(\d{4})-?(\d{3})/,RB=XS("weekYear","weekNumber","weekDay"),PB=XS("year","ordinal"),IB=/(\d{4})-(\d\d)-(\d\d)/,tC=RegExp("".concat(Iy.source," ?(?:").concat(ZS.source,"|(").concat(JS.source,"))?")),$B=RegExp("(?: ".concat(tC.source,")?"));function $o(i,e,t){const n=i[e];return gt(n)?t:ws(n)}function OB(i,e){return[{year:$o(i,e),month:$o(i,e+1,1),day:$o(i,e+2,1)},null,e+3]}function tl(i,e){return[{hours:$o(i,e,0),minutes:$o(i,e+1,0),seconds:$o(i,e+2,0),milliseconds:Ry(i[e+3])},null,e+4]}function qc(i,e){const t=!i[e]&&!i[e+1],n=Zh(i[e+1],i[e+2]),r=t?null:Hn.instance(n);return[{},r,e+3]}function Fc(i,e){const t=i[e]?is.create(i[e]):null;return[{},t,e+1]}const DB=RegExp("^T?".concat(Iy.source,"$")),MB=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function LB(i){const[e,t,n,r,s,a,o,l,c]=i,u=e[0]==="-",d=l&&l[0]==="-",h=(f,m=!1)=>f!==void 0&&(m||f&&u)?-f:f;return[{years:h(ta(t)),months:h(ta(n)),weeks:h(ta(r)),days:h(ta(s)),hours:h(ta(a)),minutes:h(ta(o)),seconds:h(ta(l),l==="-0"),milliseconds:h(Ry(c),d)}]}const BB={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Oy(i,e,t,n,r,s,a){const o={year:e.length===2?Um(ws(e)):ws(e),month:VS.indexOf(t)+1,day:ws(n),hour:ws(r),minute:ws(s)};return a&&(o.second=ws(a)),i&&(o.weekday=i.length>3?HS.indexOf(i)+1:QS.indexOf(i)+1),o}const qB=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function FB(i){const[,e,t,n,r,s,a,o,l,c,u,d]=i,h=Oy(e,r,n,t,s,a,o);let f;return l?f=BB[l]:c?f=0:f=Zh(u,d),[h,new Hn(f)]}function jB(i){return i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const UB=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,zB=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,VB=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function cw(i){const[,e,t,n,r,s,a,o]=i;return[Oy(e,r,n,t,s,a,o),Hn.utcInstance]}function WB(i){const[,e,t,n,r,s,a,o]=i;return[Oy(e,o,t,n,r,s,a),Hn.utcInstance]}const HB=Xo(NB,$y),QB=Xo(kB,$y),GB=Xo(_B,$y),KB=Xo(eC),nC=Zo(OB,tl,qc,Fc),YB=Zo(RB,tl,qc,Fc),JB=Zo(PB,tl,qc,Fc),XB=Zo(tl,qc,Fc);function ZB(i){return el(i,[HB,nC],[QB,YB],[GB,JB],[KB,XB])}function eq(i){return el(jB(i),[qB,FB])}function tq(i){return el(i,[UB,cw],[zB,cw],[VB,WB])}function nq(i){return el(i,[MB,LB])}const iq=Zo(tl);function rq(i){return el(i,[DB,iq])}const sq=Xo(IB,$B),aq=Xo(tC),oq=Zo(tl,qc,Fc);function lq(i){return el(i,[sq,nC],[aq,oq])}const uw="Invalid Duration",iC={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},cq={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...iC},_i=146097/400,Ya=146097/4800,uq={years:{quarters:4,months:12,weeks:_i/7,days:_i,hours:_i*24,minutes:_i*24*60,seconds:_i*24*60*60,milliseconds:_i*24*60*60*1e3},quarters:{months:3,weeks:_i/28,days:_i/4,hours:_i*24/4,minutes:_i*24*60/4,seconds:_i*24*60*60/4,milliseconds:_i*24*60*60*1e3/4},months:{weeks:Ya/7,days:Ya,hours:Ya*24,minutes:Ya*24*60,seconds:Ya*24*60*60,milliseconds:Ya*24*60*60*1e3},...iC},da=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],dq=da.slice(0).reverse();function fs(i,e,t=!1){const n={values:t?e.values:{...i.values,...e.values||{}},loc:i.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||i.conversionAccuracy,matrix:e.matrix||i.matrix};return new wt(n)}function rC(i,e){var n;let t=(n=e.milliseconds)!=null?n:0;for(const r of dq.slice(1))e[r]&&(t+=e[r]*i[r].milliseconds);return t}function dw(i,e){const t=rC(i,e)<0?-1:1;da.reduceRight((n,r)=>{if(gt(e[r]))return n;if(n){const s=e[n]*t,a=i[r][n],o=Math.floor(s/a);e[r]+=o*t,e[n]-=o*a*t}return r},null),da.reduce((n,r)=>{if(gt(e[r]))return n;if(n){const s=e[n]%1;e[n]-=s,e[r]+=s*i[n][r]}return r},null)}function hq(i){const e={};for(const[t,n]of Object.entries(i))n!==0&&(e[t]=n);return e}class wt{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let n=t?uq:cq;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Ft.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return wt.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Di("Duration.fromObject: argument expected to be an object, got ".concat(e===null?"null":typeof e));return new wt({values:Gd(e,wt.normalizeUnit),loc:Ft.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(ya(e))return wt.fromMillis(e);if(wt.isDuration(e))return e;if(typeof e=="object")return wt.fromObject(e);throw new Di("Unknown duration argument ".concat(e," of type ").concat(typeof e))}static fromISO(e,t){const[n]=nq(e);return n?wt.fromObject(n,t):wt.invalid("unparsable",'the input "'.concat(e,"\" can't be parsed as ISO 8601"))}static fromISOTime(e,t){const[n]=rq(e);return n?wt.fromObject(n,t):wt.invalid("unparsable",'the input "'.concat(e,"\" can't be parsed as ISO 8601"))}static invalid(e,t=null){if(!e)throw new Di("need to specify a reason the Duration is invalid");const n=e instanceof ir?e:new ir(e,t);if(un.throwOnInvalid)throw new z3(n);return new wt({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new ES(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Fn.create(this.loc,n).formatDurationFromString(this,e):uw}toHuman(e={}){if(!this.isValid)return uw;const t=da.map(n=>{const r=this.values[n];return gt(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(r)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Py(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},lt.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?rC(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=wt.fromDurationLike(e),n={};for(const r of da)(Wo(t.values,r)||Wo(this.values,r))&&(n[r]=t.get(r)+this.get(r));return fs(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=wt.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=zS(e(this.values[n],n));return fs(this,{values:t},!0)}get(e){return this[wt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Gd(e,wt.normalizeUnit)};return fs(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n};return fs(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return dw(this.matrix,e),fs(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=hq(this.normalize().shiftToAll().toObject());return fs(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>wt.normalizeUnit(a));const t={},n={},r=this.toObject();let s;for(const a of da)if(e.indexOf(a)>=0){s=a;let o=0;for(const c in n)o+=this.matrix[c][a]*n[c],n[c]=0;ya(r[a])&&(o+=r[a]);const l=Math.trunc(o);t[a]=l,n[a]=(o*1e3-l*1e3)/1e3}else ya(r[a])&&(n[a]=r[a]);for(const a in n)n[a]!==0&&(t[s]+=a===s?n[a]:n[a]/this.matrix[s][a]);return dw(this.matrix,t),fs(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return fs(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(n,r){return n===void 0||n===0?r===void 0||r===0:n===r}for(const n of da)if(!t(this.values[n],e.values[n]))return!1;return!0}}const Ja="Invalid Interval";function fq(i,e){return!i||!i.isValid?Zt.invalid("missing or invalid start"):!e||!e.isValid?Zt.invalid("missing or invalid end"):e<i?Zt.invalid("end before start","The end of an interval must be after its start, but you had start=".concat(i.toISO()," and end=").concat(e.toISO())):null}class Zt{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Di("need to specify a reason the Interval is invalid");const n=e instanceof ir?e:new ir(e,t);if(un.throwOnInvalid)throw new U3(n);return new Zt({invalid:n})}static fromDateTimes(e,t){const n=Al(e),r=Al(t),s=fq(n,r);return s==null?new Zt({start:n,end:r}):s}static after(e,t){const n=wt.fromDurationLike(t),r=Al(e);return Zt.fromDateTimes(r,r.plus(n))}static before(e,t){const n=wt.fromDurationLike(t),r=Al(e);return Zt.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let s,a;try{s=lt.fromISO(n,t),a=s.isValid}catch(c){a=!1}let o,l;try{o=lt.fromISO(r,t),l=o.isValid}catch(c){l=!1}if(a&&l)return Zt.fromDateTimes(s,o);if(a){const c=wt.fromISO(r,t);if(c.isValid)return Zt.after(s,c)}else if(l){const c=wt.fromISO(n,t);if(c.isValid)return Zt.before(o,c)}}return Zt.invalid("unparsable",'the input "'.concat(e,"\" can't be parsed as ISO 8601"))}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const t=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(t,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Zt.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Al).filter(a=>this.contains(a)).sort(),n=[];let{s:r}=this,s=0;for(;r<this.e;){const a=t[s]||this.e,o=+a>+this.e?this.e:a;n.push(Zt.fromDateTimes(r,o)),r=o,s+=1}return n}splitBy(e){const t=wt.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:n}=this,r=1,s;const a=[];for(;n<this.e;){const o=this.start.plus(t.mapUnits(l=>l*r));s=+o>+this.e?this.e:o,a.push(Zt.fromDateTimes(n,s)),n=s,r+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:Zt.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Zt.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((r,s)=>r.s-s.s).reduce(([r,s],a)=>s?s.overlaps(a)||s.abutsStart(a)?[r,s.union(a)]:[r.concat([s]),a]:[r,a],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),a=Array.prototype.concat(...s),o=a.sort((l,c)=>l.time-c.time);for(const l of o)n+=l.type==="s"?1:-1,n===1?t=l.time:(t&&+t!=+l.time&&r.push(Zt.fromDateTimes(t,l.time)),t=null);return Zt.merge(r)}difference(...e){return Zt.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?"[".concat(this.s.toISO(),"  ").concat(this.e.toISO(),")"):Ja}toLocaleString(e=Wd,t={}){return this.isValid?Fn.create(this.s.loc.clone(t),e).formatInterval(this):Ja}toISO(e){return this.isValid?"".concat(this.s.toISO(e),"/").concat(this.e.toISO(e)):Ja}toISODate(){return this.isValid?"".concat(this.s.toISODate(),"/").concat(this.e.toISODate()):Ja}toISOTime(e){return this.isValid?"".concat(this.s.toISOTime(e),"/").concat(this.e.toISOTime(e)):Ja}toFormat(e,{separator:t="  "}={}){return this.isValid?"".concat(this.s.toFormat(e)).concat(t).concat(this.e.toFormat(e)):Ja}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):wt.invalid(this.invalidReason)}mapEndpoints(e){return Zt.fromDateTimes(e(this.s),e(this.e))}}class Cu{static hasDST(e=un.defaultZone){const t=lt.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return is.isValidZone(e)}static normalizeZone(e){return Ts(e,un.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||Ft.create(t,n,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||Ft.create(t,n,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Ft.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Ft.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Ft.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Ft.create(t,null,"gregory").eras(e)}static features(){return{relative:jS()}}}function hw(i,e){const t=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=t(e)-t(i);return Math.floor(wt.fromMillis(n).as("days"))}function pq(i,e,t){const n=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=hw(l,c);return(u-u%7)/7}],["days",hw]],r={},s=i;let a,o;for(const[l,c]of n)t.indexOf(l)>=0&&(a=l,r[l]=c(i,e),o=s.plus(r),o>e?(r[l]--,i=s.plus(r),i>e&&(o=i,r[l]--,i=s.plus(r))):i=o);return[i,r,o,a]}function mq(i,e,t,n){let[r,s,a,o]=pq(i,e,t);const l=e-r,c=t.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(a<e&&(a=r.plus({[o]:1})),a!==r&&(s[o]=(s[o]||0)+l/(a-r)));const u=wt.fromObject(s,n);return c.length>0?wt.fromMillis(l,n).shiftTo(...c).plus(u):u}const Dy={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},fw={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gq=Dy.hanidec.replace(/[\[|\]]/g,"").split("");function yq(i){let e=parseInt(i,10);if(isNaN(e)){e="";for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);if(i[t].search(Dy.hanidec)!==-1)e+=gq.indexOf(i[t]);else for(const r in fw){const[s,a]=fw[r];n>=s&&n<=a&&(e+=n-s)}}return parseInt(e,10)}else return e}function Hi({numberingSystem:i},e=""){return new RegExp("".concat(Dy[i||"latn"]).concat(e))}const bq="missing Intl.DateTimeFormat.formatToParts support";function At(i,e=t=>t){return{regex:i,deser:([t])=>e(yq(t))}}const vq=String.fromCharCode(160),sC="[ ".concat(vq,"]"),aC=new RegExp(sC,"g");function wq(i){return i.replace(/\./g,"\\.?").replace(aC,sC)}function pw(i){return i.replace(/\./g,"").replace(aC," ").toLowerCase()}function Qi(i,e){return i===null?null:{regex:RegExp(i.map(wq).join("|")),deser:([t])=>i.findIndex(n=>pw(t)===pw(n))+e}}function mw(i,e){return{regex:i,deser:([,t,n])=>Zh(t,n),groups:e}}function Au(i){return{regex:i,deser:([e])=>e}}function Eq(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function xq(i,e){const t=Hi(e),n=Hi(e,"{2}"),r=Hi(e,"{3}"),s=Hi(e,"{4}"),a=Hi(e,"{6}"),o=Hi(e,"{1,2}"),l=Hi(e,"{1,3}"),c=Hi(e,"{1,6}"),u=Hi(e,"{1,9}"),d=Hi(e,"{2,4}"),h=Hi(e,"{4,6}"),f=w=>({regex:RegExp(Eq(w.val)),deser:([y])=>y,literal:!0}),p=(w=>{if(i.literal)return f(w);switch(w.val){case"G":return Qi(e.eras("short"),0);case"GG":return Qi(e.eras("long"),0);case"y":return At(c);case"yy":return At(d,Um);case"yyyy":return At(s);case"yyyyy":return At(h);case"yyyyyy":return At(a);case"M":return At(o);case"MM":return At(n);case"MMM":return Qi(e.months("short",!0),1);case"MMMM":return Qi(e.months("long",!0),1);case"L":return At(o);case"LL":return At(n);case"LLL":return Qi(e.months("short",!1),1);case"LLLL":return Qi(e.months("long",!1),1);case"d":return At(o);case"dd":return At(n);case"o":return At(l);case"ooo":return At(r);case"HH":return At(n);case"H":return At(o);case"hh":return At(n);case"h":return At(o);case"mm":return At(n);case"m":return At(o);case"q":return At(o);case"qq":return At(n);case"s":return At(o);case"ss":return At(n);case"S":return At(l);case"SSS":return At(r);case"u":return Au(u);case"uu":return Au(o);case"uuu":return At(t);case"a":return Qi(e.meridiems(),0);case"kkkk":return At(s);case"kk":return At(d,Um);case"W":return At(o);case"WW":return At(n);case"E":case"c":return At(t);case"EEE":return Qi(e.weekdays("short",!1),1);case"EEEE":return Qi(e.weekdays("long",!1),1);case"ccc":return Qi(e.weekdays("short",!0),1);case"cccc":return Qi(e.weekdays("long",!0),1);case"Z":case"ZZ":return mw(new RegExp("([+-]".concat(o.source,")(?::(").concat(n.source,"))?")),2);case"ZZZ":return mw(new RegExp("([+-]".concat(o.source,")(").concat(n.source,")?")),2);case"z":return Au(/[a-z_+-/]{1,256}?/i);case" ":return Au(/[^\S\n\r]/);default:return f(w)}})(i)||{invalidReason:bq};return p.token=i,p}const Tq={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Sq(i,e,t){const{type:n,value:r}=i;if(n==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=e[n];let a=n;n==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=t.hour12?"hour12":"hour24");let o=Tq[a];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function Cq(i){const e=i.map(t=>t.regex).reduce((t,n)=>"".concat(t,"(").concat(n.source,")"),"");return["^".concat(e,"$"),i]}function Aq(i,e,t){const n=i.match(e);if(n){const r={};let s=1;for(const a in t)if(Wo(t,a)){const o=t[a],l=o.groups?o.groups+1:1;!o.literal&&o.token&&(r[o.token.val[0]]=o.deser(n.slice(s,s+l))),s+=l}return[n,r]}else return[n,{}]}function Nq(i){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,n;return gt(i.z)||(t=is.create(i.z)),gt(i.Z)||(t||(t=new Hn(i.Z)),n=i.Z),gt(i.q)||(i.M=(i.q-1)*3+1),gt(i.h)||(i.h<12&&i.a===1?i.h+=12:i.h===12&&i.a===0&&(i.h=0)),i.G===0&&i.y&&(i.y=-i.y),gt(i.u)||(i.S=Ry(i.u)),[Object.keys(i).reduce((s,a)=>{const o=e(a);return o&&(s[o]=i[a]),s},{}),t,n]}let hp=null;function kq(){return hp||(hp=lt.fromMillis(1555555555555)),hp}function _q(i,e){if(i.literal)return i;const t=Fn.macroTokenToFormatOpts(i.val),n=cC(t,e);return n==null||n.includes(void 0)?i:n}function oC(i,e){return Array.prototype.concat(...i.map(t=>_q(t,e)))}function lC(i,e,t){const n=oC(Fn.parseFormat(t),i),r=n.map(a=>xq(a,i)),s=r.find(a=>a.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{const[a,o]=Cq(r),l=RegExp(a,"i"),[c,u]=Aq(e,l,o),[d,h,f]=u?Nq(u):[null,null,void 0];if(Wo(u,"a")&&Wo(u,"H"))throw new Ml("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:l,rawMatches:c,matches:u,result:d,zone:h,specificOffset:f}}}function Rq(i,e,t){const{result:n,zone:r,specificOffset:s,invalidReason:a}=lC(i,e,t);return[n,r,s,a]}function cC(i,e){if(!i)return null;const n=Fn.create(e,i).dtFormatter(kq()),r=n.formatToParts(),s=n.resolvedOptions();return r.map(a=>Sq(a,i,s))}const uC=[0,31,59,90,120,151,181,212,243,273,304,334],dC=[0,31,60,91,121,152,182,213,244,274,305,335];function Bi(i,e){return new ir("unit out of range","you specified ".concat(e," (of type ").concat(typeof e,") as a ").concat(i,", which is invalid"))}function hC(i,e,t){const n=new Date(Date.UTC(i,e-1,t));i<100&&i>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return r===0?7:r}function fC(i,e,t){return t+(Bc(i)?dC:uC)[e-1]}function pC(i,e){const t=Bc(i)?dC:uC,n=t.findIndex(s=>s<e),r=e-t[n];return{month:n+1,day:r}}function zm(i){const{year:e,month:t,day:n}=i,r=fC(e,t,n),s=hC(e,t,n);let a=Math.floor((r-s+10)/7),o;return a<1?(o=e-1,a=Qd(o)):a>Qd(e)?(o=e+1,a=1):o=e,{weekYear:o,weekNumber:a,weekday:s,...ef(i)}}function gw(i){const{weekYear:e,weekNumber:t,weekday:n}=i,r=hC(e,1,4),s=Yl(e);let a=t*7+n-r-3,o;a<1?(o=e-1,a+=Yl(o)):a>s?(o=e+1,a-=Yl(e)):o=e;const{month:l,day:c}=pC(o,a);return{year:o,month:l,day:c,...ef(i)}}function fp(i){const{year:e,month:t,day:n}=i,r=fC(e,t,n);return{year:e,ordinal:r,...ef(i)}}function yw(i){const{year:e,ordinal:t}=i,{month:n,day:r}=pC(e,t);return{year:e,month:n,day:r,...ef(i)}}function Pq(i){const e=Jh(i.weekYear),t=Hr(i.weekNumber,1,Qd(i.weekYear)),n=Hr(i.weekday,1,7);return e?t?n?!1:Bi("weekday",i.weekday):Bi("week",i.week):Bi("weekYear",i.weekYear)}function Iq(i){const e=Jh(i.year),t=Hr(i.ordinal,1,Yl(i.year));return e?t?!1:Bi("ordinal",i.ordinal):Bi("year",i.year)}function mC(i){const e=Jh(i.year),t=Hr(i.month,1,12),n=Hr(i.day,1,Hd(i.year,i.month));return e?t?n?!1:Bi("day",i.day):Bi("month",i.month):Bi("year",i.year)}function gC(i){const{hour:e,minute:t,second:n,millisecond:r}=i,s=Hr(e,0,23)||e===24&&t===0&&n===0&&r===0,a=Hr(t,0,59),o=Hr(n,0,59),l=Hr(r,0,999);return s?a?o?l?!1:Bi("millisecond",r):Bi("second",n):Bi("minute",t):Bi("hour",e)}const pp="Invalid DateTime",bw=864e13;function Nu(i){return new ir("unsupported zone",'the zone "'.concat(i.name,'" is not supported'))}function mp(i){return i.weekData===null&&(i.weekData=zm(i.c)),i.weekData}function na(i,e){const t={ts:i.ts,zone:i.zone,c:i.c,o:i.o,loc:i.loc,invalid:i.invalid};return new lt({...t,...e,old:t})}function yC(i,e,t){let n=i-e*60*1e3;const r=t.offset(n);if(e===r)return[n,e];n-=(r-e)*60*1e3;const s=t.offset(n);return r===s?[n,r]:[i-Math.min(r,s)*60*1e3,Math.max(r,s)]}function ku(i,e){i+=e*60*1e3;const t=new Date(i);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Zu(i,e,t){return yC(Xh(i),e,t)}function vw(i,e){const t=i.o,n=i.c.year+Math.trunc(e.years),r=i.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...i.c,year:n,month:r,day:Math.min(i.c.day,Hd(n,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=wt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=Xh(s);let[l,c]=yC(o,t,i.zone);return a!==0&&(l+=a,c=i.zone.offset(l)),{ts:l,o:c}}function Cl(i,e,t,n,r,s){const{setZone:a,zone:o}=t;if(i&&Object.keys(i).length!==0||e){const l=e||o,c=lt.fromObject(i,{...t,zone:l,specificOffset:s});return a?c:c.setZone(o)}else return lt.invalid(new ir("unparsable",'the input "'.concat(r,"\" can't be parsed as ").concat(n)))}function _u(i,e,t=!0){return i.isValid?Fn.create(Ft.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(i,e):null}function gp(i,e){const t=i.c.year>9999||i.c.year<0;let n="";return t&&i.c.year>=0&&(n+="+"),n+=dn(i.c.year,t?6:4),e?(n+="-",n+=dn(i.c.month),n+="-",n+=dn(i.c.day)):(n+=dn(i.c.month),n+=dn(i.c.day)),n}function ww(i,e,t,n,r,s){let a=dn(i.c.hour);return e?(a+=":",a+=dn(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(a+=":")):a+=dn(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(a+=dn(i.c.second),(i.c.millisecond!==0||!n)&&(a+=".",a+=dn(i.c.millisecond,3))),r&&(i.isOffsetFixed&&i.offset===0&&!s?a+="Z":i.o<0?(a+="-",a+=dn(Math.trunc(-i.o/60)),a+=":",a+=dn(Math.trunc(-i.o%60))):(a+="+",a+=dn(Math.trunc(i.o/60)),a+=":",a+=dn(Math.trunc(i.o%60)))),s&&(a+="["+i.zone.ianaName+"]"),a}const bC={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},$q={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Oq={ordinal:1,hour:0,minute:0,second:0,millisecond:0},vC=["year","month","day","hour","minute","second","millisecond"],Dq=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Mq=["year","ordinal","hour","minute","second","millisecond"];function Ew(i){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[i.toLowerCase()];if(!e)throw new ES(i);return e}function xw(i,e){const t=Ts(e.zone,un.defaultZone),n=Ft.fromObject(e),r=un.now();let s,a;if(gt(i.year))s=r;else{for(const c of vC)gt(i[c])&&(i[c]=bC[c]);const o=mC(i)||gC(i);if(o)return lt.invalid(o);const l=t.offset(r);[s,a]=Zu(i,l,t)}return new lt({ts:s,zone:t,loc:n,o:a})}function Tw(i,e,t){const n=gt(t.round)?!0:t.round,r=(a,o)=>(a=Py(a,n||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(a,o)),s=a=>t.calendary?e.hasSame(i,a)?0:e.startOf(a).diff(i.startOf(a),a).get(a):e.diff(i,a).get(a);if(t.unit)return r(s(t.unit),t.unit);for(const a of t.units){const o=s(a);if(Math.abs(o)>=1)return r(o,a)}return r(i>e?-0:0,t.units[t.units.length-1])}function Sw(i){let e={},t;return i.length>0&&typeof i[i.length-1]=="object"?(e=i[i.length-1],t=Array.from(i).slice(0,i.length-1)):t=Array.from(i),[e,t]}class lt{constructor(e){const t=e.zone||un.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new ir("invalid input"):null)||(t.isValid?null:Nu(t));this.ts=gt(e.ts)?un.now():e.ts;let r=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,s]=[e.old.c,e.old.o];else{const o=t.offset(this.ts);r=ku(this.ts,o),n=Number.isNaN(r.year)?new ir("invalid input"):null,r=n?null:r,s=n?null:o}this._zone=t,this.loc=e.loc||Ft.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new lt({})}static local(){const[e,t]=Sw(arguments),[n,r,s,a,o,l,c]=t;return xw({year:n,month:r,day:s,hour:a,minute:o,second:l,millisecond:c},e)}static utc(){const[e,t]=Sw(arguments),[n,r,s,a,o,l,c]=t;return e.zone=Hn.utcInstance,xw({year:n,month:r,day:s,hour:a,minute:o,second:l,millisecond:c},e)}static fromJSDate(e,t={}){const n=uB(e)?e.valueOf():NaN;if(Number.isNaN(n))return lt.invalid("invalid input");const r=Ts(t.zone,un.defaultZone);return r.isValid?new lt({ts:n,zone:r,loc:Ft.fromObject(t)}):lt.invalid(Nu(r))}static fromMillis(e,t={}){if(ya(e))return e<-bw||e>bw?lt.invalid("Timestamp out of range"):new lt({ts:e,zone:Ts(t.zone,un.defaultZone),loc:Ft.fromObject(t)});throw new Di("fromMillis requires a numerical input, but received a ".concat(typeof e," with value ").concat(e))}static fromSeconds(e,t={}){if(ya(e))return new lt({ts:e*1e3,zone:Ts(t.zone,un.defaultZone),loc:Ft.fromObject(t)});throw new Di("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=Ts(t.zone,un.defaultZone);if(!n.isValid)return lt.invalid(Nu(n));const r=un.now(),s=gt(t.specificOffset)?n.offset(r):t.specificOffset,a=Gd(e,Ew),o=!gt(a.ordinal),l=!gt(a.year),c=!gt(a.month)||!gt(a.day),u=l||c,d=a.weekYear||a.weekNumber,h=Ft.fromObject(t);if((u||o)&&d)throw new Ml("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Ml("Can't mix ordinal dates with month/day");const f=d||a.weekday&&!u;let m,p,w=ku(r,s);f?(m=Dq,p=$q,w=zm(w)):o?(m=Mq,p=Oq,w=fp(w)):(m=vC,p=bC);let y=!1;for(const O of m){const R=a[O];gt(R)?y?a[O]=p[O]:a[O]=w[O]:y=!0}const b=f?Pq(a):o?Iq(a):mC(a),E=b||gC(a);if(E)return lt.invalid(E);const _=f?gw(a):o?yw(a):a,[k,B]=Zu(_,s,n),D=new lt({ts:k,zone:n,o:B,loc:h});return a.weekday&&u&&e.weekday!==D.weekday?lt.invalid("mismatched weekday","you can't specify both a weekday of ".concat(a.weekday," and a date of ").concat(D.toISO())):D}static fromISO(e,t={}){const[n,r]=ZB(e);return Cl(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,r]=eq(e);return Cl(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,r]=tq(e);return Cl(n,r,t,"HTTP",t)}static fromFormat(e,t,n={}){if(gt(e)||gt(t))throw new Di("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=n,a=Ft.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[o,l,c,u]=Rq(a,e,t);return u?lt.invalid(u):Cl(o,l,n,"format ".concat(t),e,c)}static fromString(e,t,n={}){return lt.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,r]=lq(e);return Cl(n,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Di("need to specify a reason the DateTime is invalid");const n=e instanceof ir?e:new ir(e,t);if(un.throwOnInvalid)throw new j3(n);return new lt({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=cC(e,Ft.fromObject(t));return n?n.map(r=>r?r.val:null).join(""):null}static expandFormat(e,t={}){return oC(Fn.parseFormat(e),Ft.fromObject(t)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?mp(this).weekYear:NaN}get weekNumber(){return this.isValid?mp(this).weekNumber:NaN}get weekday(){return this.isValid?mp(this).weekday:NaN}get ordinal(){return this.isValid?fp(this.c).ordinal:NaN}get monthShort(){return this.isValid?Cu.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Cu.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Cu.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Cu.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Xh(this.c),r=this.zone.offset(n-e),s=this.zone.offset(n+e),a=this.zone.offset(n-r*t),o=this.zone.offset(n-s*t);if(a===o)return[this];const l=n-a*t,c=n-o*t,u=ku(l,a),d=ku(c,o);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[na(this,{ts:l}),na(this,{ts:c})]:[this]}get isInLeapYear(){return Bc(this.year)}get daysInMonth(){return Hd(this.year,this.month)}get daysInYear(){return this.isValid?Yl(this.year):NaN}get weeksInWeekYear(){return this.isValid?Qd(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:r}=Fn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(Hn.instance(e),t)}toLocal(){return this.setZone(un.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=Ts(e,un.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const s=e.offset(this.ts),a=this.toObject();[r]=Zu(a,s,e)}return na(this,{ts:r,zone:e})}else return lt.invalid(Nu(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const r=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return na(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Gd(e,Ew),n=!gt(t.weekYear)||!gt(t.weekNumber)||!gt(t.weekday),r=!gt(t.ordinal),s=!gt(t.year),a=!gt(t.month)||!gt(t.day),o=s||a,l=t.weekYear||t.weekNumber;if((o||r)&&l)throw new Ml("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&r)throw new Ml("Can't mix ordinal dates with month/day");let c;n?c=gw({...zm(this.c),...t}):gt(t.ordinal)?(c={...this.toObject(),...t},gt(t.day)&&(c.day=Math.min(Hd(c.year,c.month),c.day))):c=yw({...fp(this.c),...t});const[u,d]=Zu(c,this.o,this.zone);return na(this,{ts:u,o:d})}plus(e){if(!this.isValid)return this;const t=wt.fromDurationLike(e);return na(this,vw(this,t))}minus(e){if(!this.isValid)return this;const t=wt.fromDurationLike(e).negate();return na(this,vw(this,t))}startOf(e){if(!this.isValid)return this;const t={},n=wt.normalizeUnit(e);switch(n){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0;break}if(n==="weeks"&&(t.weekday=1),n==="quarters"){const r=Math.ceil(this.month/3);t.month=(r-1)*3+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?Fn.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):pp}toLocaleString(e=Wd,t={}){return this.isValid?Fn.create(this.loc.clone(t),e).formatDateTime(this):pp}toLocaleParts(e={}){return this.isValid?Fn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const a=e==="extended";let o=gp(this,a);return o+="T",o+=ww(this,a,t,n,r,s),o}toISODate({format:e="extended"}={}){return this.isValid?gp(this,e==="extended"):null}toISOWeekDate(){return _u(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:s=!1,format:a="extended"}={}){return this.isValid?(r?"T":"")+ww(this,a==="extended",t,e,n,s):null}toRFC2822(){return _u(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return _u(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?gp(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),_u(this,r,!0)}toSQL(e={}){return this.isValid?"".concat(this.toSQLDate()," ").concat(this.toSQLTime(e)):null}toString(){return this.isValid?this.toISO():pp}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return wt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=dB(t).map(wt.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,l=a?e:this,c=mq(o,l,s,r);return a?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(lt.now(),e,t)}until(e){return this.isValid?Zt.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;const n=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(t)<=n&&n<=r.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||lt.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),Tw(t,this.plus(n),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?Tw(e.base||lt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(lt.isDateTime))throw new Di("min requires all arguments be DateTimes");return ow(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(lt.isDateTime))throw new Di("max requires all arguments be DateTimes");return ow(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:r=null,numberingSystem:s=null}=n,a=Ft.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return lC(a,e,t)}static fromStringExplain(e,t,n={}){return lt.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return Wd}static get DATE_MED(){return xS}static get DATE_MED_WITH_WEEKDAY(){return V3}static get DATE_FULL(){return TS}static get DATE_HUGE(){return SS}static get TIME_SIMPLE(){return CS}static get TIME_WITH_SECONDS(){return AS}static get TIME_WITH_SHORT_OFFSET(){return NS}static get TIME_WITH_LONG_OFFSET(){return kS}static get TIME_24_SIMPLE(){return _S}static get TIME_24_WITH_SECONDS(){return RS}static get TIME_24_WITH_SHORT_OFFSET(){return PS}static get TIME_24_WITH_LONG_OFFSET(){return IS}static get DATETIME_SHORT(){return $S}static get DATETIME_SHORT_WITH_SECONDS(){return OS}static get DATETIME_MED(){return DS}static get DATETIME_MED_WITH_SECONDS(){return MS}static get DATETIME_MED_WITH_WEEKDAY(){return W3}static get DATETIME_FULL(){return LS}static get DATETIME_FULL_WITH_SECONDS(){return BS}static get DATETIME_HUGE(){return qS}static get DATETIME_HUGE_WITH_SECONDS(){return FS}}function Al(i){if(lt.isDateTime(i))return i;if(i&&i.valueOf&&ya(i.valueOf()))return lt.fromJSDate(i);if(i&&typeof i=="object")return lt.fromObject(i);throw new Di("Unknown datetime argument: ".concat(i,", of type ").concat(typeof i))}const Lq=({timerInterval:i,timerKey:e,timerDuration:t,timerActive:n,unsetTimer:r})=>{const a=t?(t-Date.now())/1e3:i*1,o=(l,c)=>{const u=wt.fromMillis(l*1e3).toFormat("mm:ss");return xe.jsxs("div",{className:"time-wrapper",children:[xe.jsx("div",{children:c?"NEXT BREAK IS IN":"CLICK PLAY BUTTON"}),xe.jsx("div",{className:"timer-digits",children:xe.jsx("div",{children:u})})]})};return xe.jsx(wS,{isPlaying:n,size:300,strokeWidth:22,colors:["#004777","#F7B801","#A30000","#A30000"],colorsTime:[7,5,2,0],rotation:"clockwise",duration:i*1,initialRemainingTime:a>0?a:i*1,onComplete:()=>{r()},children:({remainingTime:l})=>o(l,n)},e)},Bq=({timerStatus:i,timerHandler:e})=>xe.jsx(ka,{color:"success",expand:"full",onClick:e,children:xe.jsx(tr,{icon:i==="running"?QL:GL,size:"large"})});const wC=()=>{const i=()=>{window.location.href="https://backpackgym.com"};return xe.jsxs(tL,{contentId:"main-content",children:[xe.jsx(zo,{children:xe.jsx(Qh,{color:"tertiary",children:xe.jsx(Cy,{children:"Menu"})})}),xe.jsxs(Hh,{className:"ion-padding",children:[xe.jsxs(eL,{children:[xe.jsx(Sl,{children:xe.jsxs(sa,{lines:"full",button:!0,routerLink:"/timer",children:[xe.jsx(tr,{slot:"start",icon:pS}),xe.jsx(Jr,{children:"Start Your Workout"})]})}),xe.jsx(Sl,{children:xe.jsxs(sa,{lines:"full",button:!0,href:"https://backpackgym.com/contact",children:[xe.jsx(tr,{slot:"start",icon:JL}),xe.jsx(Jr,{children:"Video Tutorial"})]})}),xe.jsx(Sl,{children:xe.jsxs(sa,{lines:"full",button:!0,href:"https://backpackgym.com/contact",children:[xe.jsx(tr,{slot:"start",icon:HL}),xe.jsx(Jr,{children:"Contact"})]})}),xe.jsx(Sl,{children:xe.jsx(sa,{lines:"none",children:xe.jsxs(Wh,{slot:"end",children:[xe.jsx(ka,{href:"https://facebook.com/backpackgym",children:xe.jsx(tr,{slot:"icon-only",icon:VL})}),xe.jsx(ka,{href:"https://facebook.com/backpackgym",children:xe.jsx(tr,{slot:"icon-only",icon:WL})})]})})}),xe.jsx(Sl,{children:xe.jsx(sa,{className:"bpg-block",onClick:i})})]}),xe.jsx("div",{slot:"fixed",className:"app-info",children:xe.jsxs("p",{children:["Presented by Backpack Gym ",xe.jsx("br",{}),"App version 1.0.1"]})})]})]})};const EC=()=>xe.jsxs(SL,{slot:"bottom",color:"warning",children:[xe.jsxs(Io,{className:"my-tab-button",tab:"home",href:"/home",children:[xe.jsx(tr,{icon:zL}),xe.jsx(Jr,{children:"Home"}),xe.jsx(JM,{color:"danger",children:"1"})]}),xe.jsxs(Io,{className:"my-tab-button",tab:"timer",href:"/timer",children:[xe.jsx(tr,{icon:pS}),xe.jsx(Jr,{children:"Timer"})]}),xe.jsxs(Io,{className:"my-tab-button",tab:"settings",href:"/timer-configuration",children:[xe.jsx(tr,{icon:KL}),xe.jsx(Jr,{children:"Settings"})]})]}),qq=({timerStatus:i,unsetTimer:e})=>xe.jsx(ka,{color:"danger",expand:"full",disabled:i==="running",onClick:e,children:xe.jsx(tr,{icon:YL,size:"large"})});/*! Capacitor: https://capacitorjs.com/ - MIT License */const Fq=i=>{const e=new Map;e.set("web",{name:"web"});const t=i.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(s,a)=>{t.platforms.set(s,a)},r=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=n,t.setPlatform=r,t},jq=i=>i.CapacitorPlatforms=Fq(i),xC=jq(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});xC.addPlatform;xC.setPlatform;var Ho;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(Ho||(Ho={}));class yp extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Uq=i=>{var e,t;return i!=null&&i.androidBridge?"android":!((t=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},zq=i=>{var e,t,n,r,s;const a=i.CapacitorCustomPlatform||null,o=i.Capacitor||{},l=o.Plugins=o.Plugins||{},c=i.CapacitorPlatforms,u=()=>a!==null?a.name:Uq(i),d=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||u,h=()=>d()!=="web",f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||h,m=D=>{const O=_.get(D);return!!(O!=null&&O.platforms.has(d())||y(D))},p=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||m,w=D=>{var O;return(O=o.PluginHeaders)===null||O===void 0?void 0:O.find(R=>R.name===D)},y=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||w,b=D=>i.console.error(D),E=(D,O,R)=>Promise.reject("".concat(R,' does not have an implementation of "').concat(O,'".')),_=new Map,k=(D,O={})=>{const R=_.get(D);if(R)return console.warn('Capacitor plugin "'.concat(D,'" already registered. Cannot register plugins twice.')),R.proxy;const Q=d(),$=y(D);let P;const q=async()=>(!P&&Q in O?P=typeof O[Q]=="function"?P=await O[Q]():P=O[Q]:a!==null&&!P&&"web"in O&&(P=typeof O.web=="function"?P=await O.web():P=O.web),P),S=(Y,F)=>{var H,_e;if($){const we=$==null?void 0:$.methods.find(ye=>F===ye.name);if(we)return we.rtype==="promise"?ye=>o.nativePromise(D,F.toString(),ye):(ye,Ve)=>o.nativeCallback(D,F.toString(),ye,Ve);if(Y)return(H=Y[F])===null||H===void 0?void 0:H.bind(Y)}else{if(Y)return(_e=Y[F])===null||_e===void 0?void 0:_e.bind(Y);throw new yp('"'.concat(D,'" plugin is not implemented on ').concat(Q),Ho.Unimplemented)}},Z=Y=>{let F;const H=(..._e)=>{const we=q().then(ye=>{const Ve=S(ye,Y);if(Ve){const Ke=Ve(..._e);return F=Ke==null?void 0:Ke.remove,Ke}else throw new yp('"'.concat(D,".").concat(Y,'()" is not implemented on ').concat(Q),Ho.Unimplemented)});return Y==="addListener"&&(we.remove=async()=>F()),we};return H.toString=()=>"".concat(Y.toString(),"() { [capacitor code] }"),Object.defineProperty(H,"name",{value:Y,writable:!1,configurable:!1}),H},ve=Z("addListener"),re=Z("removeListener"),de=(Y,F)=>{const H=ve({eventName:Y},F),_e=async()=>{const ye=await H;re({eventName:Y,callbackId:ye},F)},we=new Promise(ye=>H.then(()=>ye({remove:_e})));return we.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await _e()},we},ne=new Proxy({},{get(Y,F){switch(F){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return $?de:ve;case"removeListener":return re;default:return Z(F)}}});return l[D]=ne,_.set(D,{name:D,proxy:ne,platforms:new Set([...Object.keys(O),...$?[Q]:[]])}),ne},B=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||k;return o.convertFileSrc||(o.convertFileSrc=D=>D),o.getPlatform=d,o.handleError=b,o.isNativePlatform=f,o.isPluginAvailable=p,o.pluginMethodNoop=E,o.registerPlugin=B,o.Exception=yp,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},Vq=i=>i.Capacitor=zq(i),Ec=Vq(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),tf=Ec.registerPlugin;Ec.Plugins;class TC{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn('Capacitor WebPlugin "'.concat(e.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const s=async()=>this.removeListener(e,t),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new Ec.Exception(e,Ho.Unimplemented)}unavailable(e="not available"){return new Ec.Exception(e,Ho.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Cw=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Aw=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Wq extends TC{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[r,s]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=Aw(r).trim(),s=Aw(s).trim(),t[r]=s}),t}async setCookie(e){try{const t=Cw(e.key),n=Cw(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(r,"; path=").concat(s,"; ").concat(a,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}tf("CapacitorCookies",{web:()=>new Wq});const Hq=async i=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const r=n.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},n.onerror=r=>t(r),n.readAsDataURL(i)}),Qq=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(r=>r.toLocaleLowerCase()).reduce((r,s,a)=>(r[s]=i[e[a]],r),{})},Gq=(i,e=!0)=>i?Object.entries(i).reduce((n,r)=>{const[s,a]=r;let o,l;return Array.isArray(a)?(l="",a.forEach(c=>{o=e?encodeURIComponent(c):c,l+="".concat(s,"=").concat(o,"&")}),l.slice(0,-1)):(o=e?encodeURIComponent(a):a,l="".concat(s,"=").concat(o)),"".concat(n,"&").concat(l)},"").substr(1):null,Kq=(i,e={})=>{const t=Object.assign({method:i.method||"GET",headers:i.headers},e),r=Qq(i.headers)["content-type"]||"";if(typeof i.data=="string")t.body=i.data;else if(r.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,o]of Object.entries(i.data||{}))s.set(a,o);t.body=s.toString()}else if(r.includes("multipart/form-data")){const s=new FormData;if(i.data instanceof FormData)i.data.forEach((o,l)=>{s.append(l,o)});else for(const o of Object.keys(i.data))s.append(o,i.data[o]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(r.includes("application/json")||typeof i.data=="object")&&(t.body=JSON.stringify(i.data));return t};class Yq extends TC{async request(e){const t=Kq(e,e.webFetchExtra),n=Gq(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,s=await fetch(r,t),a=s.headers.get("content-type")||"";let{responseType:o="text"}=s.ok?e:{};a.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await s.blob(),l=await Hq(c);break;case"json":l=await s.json();break;case"document":case"text":default:l=await s.text()}const u={};return s.headers.forEach((d,h)=>{u[h]=d}),{data:l,headers:u,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}tf("CapacitorHttp",{web:()=>new Yq});var Nw;(function(i){i[i.Sunday=1]="Sunday",i[i.Monday=2]="Monday",i[i.Tuesday=3]="Tuesday",i[i.Wednesday=4]="Wednesday",i[i.Thursday=5]="Thursday",i[i.Friday=6]="Friday",i[i.Saturday=7]="Saturday"})(Nw||(Nw={}));const Vm=tf("LocalNotifications",{web:()=>ni(()=>import("./web-e9bb4084.js"),[]).then(i=>new i.LocalNotificationsWeb)}),kw=async i=>{try{if((await Vm.requestPermissions()).display!=="granted")throw new Error("Permissions haven't been granted");await Vm.schedule({notifications:[{title:"Friendly Reminder",body:"Get up and workout",id:1,schedule:{at:new Date(Date.now()+i)},extra:{data:"Pass data to your handler"},iconColor:"#FF7F50",sound:"birds.wav"}]})}catch(e){console.log(e)}},Jq=async()=>{Vm.cancel({notifications:[{id:1}]})},Xq=()=>{const{timerInterval:i,timerStatus:e,timerKey:t,timerDuration:n,timerPausedTime:r,setTimerStatus:s,setTimerDuration:a,setTimerPausedTime:o,unsetTimer:l}=Vd(),c=()=>{s("pause"),o(),Jq()},u=()=>{r?(a(r),kw(r)):(a(i*1e3),kw(i*1e3)),s("running")};return xe.jsxs(xe.Fragment,{children:[xe.jsx(wC,{}),xe.jsxs(ky,{id:"main-content",children:[xe.jsx(zo,{children:xe.jsx(zo,{children:xe.jsxs(Qh,{color:"warning",children:[xe.jsx(Wh,{slot:"start",children:xe.jsx(lS,{})}),xe.jsx(Cy,{children:"Timer"})]})})}),xe.jsx(Hh,{children:xe.jsxs(oS,{children:[xe.jsx(Kl,{children:xe.jsx(Po,{className:"timer-content",children:xe.jsx(Lq,{timerKey:t,timerInterval:i,timerDuration:r?Date.now()+r:n,timerActive:e==="running",unsetTimer:l})})}),xe.jsxs(Kl,{className:"ion-text-center",children:[xe.jsx(Po,{children:xe.jsx(Bq,{timerHandler:e==="running"?c:u,timerStatus:e})}),xe.jsx(Po,{children:xe.jsx(qq,{unsetTimer:l,timerStatus:e})})]})]})}),xe.jsx(EC,{})]})]})};const Zq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAABgGlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAKJF1kc8rRFEUxz/zhogRxUKxmITV+F0TG2UklDSNUX5tZt78UvPj9d6bJFtlO0WJjV8L/gK2ylopIiUrC2tig57z5qmRzLmdez73e+853XsuKOG0mjEqeiGTNfXQeMA7N7/grXqilkYUemiJqIY2EgxOUdbeb3HZ8brLrlX+3L9WG4sbKriqhYdVTTeFJ4SnVkzN5i3hJjUViQmfCPt0uaDwja1HHX62Oenwp816ODQKSoOwN/mLo79YTekZYXk57Zl0Xv25j/0STzw7OyOxTbwVgxDjBPAyyRij+OljSGY/XfTTLSvK5PcW86fJSa4qs8YqOsskSWHiEzUv1eMSE6LHZaRZtfv/t69GYqDfqe4JQOWjZb12QNUmfBUs6+PAsr4Owf0A59lSfm4fBt9EL5S09j2oX4fTi5IW3YazDWi+1yJ6pCi5xZVEAl6OoW4eGq+gZtHp2c8+R3cQXpOvuoSdXeiU8/VL31yqZ+FnYKX/AAAACXBIWXMAABYlAAAWJQFJUiTwAAALc0lEQVRoge1aeUxcxxn/5r2397LLLiwL7AksGLANPgiH7eAjPvCRxLKcNI6UNInTJK0iVc5RKW1Vua3SSI1UNVHaJk2iNm0uuY3jyG1kN23sGjvhMmDAGHs59oSFhb132eu96R+LHxjW7HKkKJK/v2a+mW/m+72Z75iZhzDG8G0mYqUVWCrdAbDSdAfAStMdACtN33oA1PIPiSEaoYPeWMgXDXpjACCScoQSrkjK4fJIQMs821IB2MyOLz9vGjRan3nuSDTAMXW7+ztd4WA8aWcOnyzeIC+qkKuKJQS5PFDQUlKJ9ubeHzx8nKEZACjL31JTvSkWoZ3WoC/oisRD0Xjo4e/vtlzzNjV2cEgBjxKIRdJslZDDIykKlW/K2bhbJRAv9QsuST7oDye0BwDzeHcN1F250umPTLAdaBrHY0ww4gZwA8CoDwYcKIOXnZWhikaZnsbRqr3qym25HO7iTXHxkmPW4I3/YA7JS1RDUe+YOZgl0qYQw9gfdpqcnW2trQSFWj63fvCLzjFrcNFqLBKAsX3i5G97oxFGlVnOMs2Ovhy1NM0RZMJ8hsYtzW1Oe+jkb64a2ydSyySjhdsAhpYztrazw4AAMAxeHb1gfC/RIuFnH2p4ormpORTzJjgk4lAEh8F0spkRzcQO77RIxOGmzkcValHVnvzqBvVC3dSCV6CrcbTt7DAAMDSOhWl1YZZBUUMgAgB84XHXSChbrGM70ziWVHsMOE5HygoCh/Z9NGiTXR36ytQ70XZ2uLtxdKH6LMyIrX3ei5+aAYCOM8arlhHfDQ7BK1ZtKFSuP9/3XjQ+abb3GwpXWdwpxmGYeIaQPnb0469aGr5slQNg00Q7t7+m8VNTppKvWZXuPoQFrYDXGT7zp34EQMeYLxo/axo6YZ7o7Hc2n7nyZnDSt069HwAsrq4MOZdPiecZBwNmgHnh6IVASPr7E2tYptHR6h0Ln3nnhnc8/I0AuPCJOR5jMMY2o8fhNU4rhHGb+VRxmY5L8t2hYd9EhN1FKNmOppn4ww3WAl33q3+8Nz5jfzGY7jG2hgLxCydMyw/AbvRZ+7yYwXQcO3zGWa2ReCjgiYp4MgAwm005ufLbjcNgZq0hcF/Dx+9++IjdyZnVGqMjmMHWGz670becADCGS6csiEAAQJJIyJ29RxFCAjEVpScBwOLqkir4PFKYdKgMUeSHT3zU+PX+8+2Zc1u31OwYtQRDvmjjSXOa3jEtAOZez7g9hBmcULa0vJhLCWZ20MvXBzzRYMQDAOMBU8gXyxJr5o6DgX7xyXNef/Zbfyuf1UQAQRHcptaL5vHOoQGLa2TScs2zbAAGr7gIYno3EyQ6UPu9LLEGARAEuUq5eUvtju6Bize1BNOgTZGjmKM9PrK3X5N//ddv7Y8z03wEiCI4JMFhDcYdskdC8f6OtEJbajfKMHio280w0ytKcogMOa+h/kGSQAFvdNA0cPbCJ07/ENthwNlUVnmEM8CLM1GWWVni3b/rxBt/fsbholjVCUQlYsgsGreHjO0TO44UIiJFYEsNwDEUiEzODkaIQBwu2Xjp3OB429xY7graomE6S6Qd9fcnONKM2LOPvX/+4n0XOyUJDoFIApFJ3RQAuPwjKlriMAXyCjPmVy/1FrIbfSjZLE1NTQPO1qSZCAa4ca1fochJVBHCzx89M+HOe/tkKQAgICiCSyLqdtoDgC88xtCM7UZqX5R6BQKeKEKzU6aOtq4+x4V5pAacLWvWrzpY2QAIyejf5ecO/OiVpxgGUQSF0vhqGDPhYDzoiabsmRpA0BtlbtX+yuXeK7Yz80sVFhU+9XMpMf4+RG2k59OPTh8f90Qogkw5HUuRSdrriqTslsYKuKMwQ/+ejhsd1n+klPrxr/ZzBg5BeAgAgMra9t0Dp/99KqUUlxLyqKkAgjEOupdjBWYecM83fmGa6GCrIl5mwvfPJWV+BK7f9EvxCbmgicbJD8ozadeBLfueLEmUvz5tHR0KpBRJDYAvokL+GAC0NLfM1D5TkLt944OfXXqDwcxcKecIT83XQ9gEAECKeLanf/L01rdP1LA+NCmdOnn61MmpcqmqrrQ6O6V6qe1JLOMmvIXV3c0yEUCFao80m6+UGJJK/fKl0xH9J3HlsbjyWEx8kMFURfl/f/PT148e7Odx00oSeEJSLOel7EYeP358/h72fr9reBJjkGKDaaKDdUc2z9VMepWAK7V7eudKOcZsf333Aod5PMLZ8tKLo509NTr1ZLbMaii4ek9d/2RQO2hPniyxVKArLFgt06+RLRXAuC00POAHDJIsnpK71jzelThkYcxYXJ1q2Wq752pSQQbj9p5mBbfCMxZyuMLnvi4dG1tbXGDLlIxsrLhcvdZnsWknvMl3FAKiyGAoWCtTGSRLBYAA9TU7E2WxjJcnWGN29tBMHAAwYLu3V8zPisYnk8pizORQFUKedNxvJRBpGRH+q3EjF6n02oEsmW17XbM2R9w3kBOOzo5oMkFunkpZvVedkWoXpbaB3EIxTzDtvxVa8Z4NR/kc0U0VcTA6X9ponejN0YgAIGHrsTj64J8lL7z8XEfPPQjh2qrPX/vZmxLhbDeQJdZQHCK3YL6TXboACALp18pmZqNZ+cI9VU8IuFOLq5Ovmw+Aq4vDJ6UCJYPj+GZAGfdwXn2n/pU3nh8eK+3pq/GHbglwCJBSLy5af8ukiwcAAEWV8pnZKADIlIK91Y8pxLryvG1xOkm8ZGcORj1OSyBbrMWAZ91QdPdnvPjKQ3/4sJYiuCSaTqflQhWXTxVVZqWjW1oAdOWZ2SrhrMxWks3fv/M7kXjI6u5hmTxKWJpbv3vNM1p5Jcs0O67naMUAwGAawy0fAmMUjhIAQCCCJDhb7rpHL99QZDDI8wS68iRHtkUCQAg23a/FzGz/3dLcOuBsYasGRc2RA8/W1tbmGyQzAVhcXTwhJeErACBh/clnAdTcfkldLBNJuXcf0iVNgRcJAADUJRLNKunMRehqv9Y7co6tamRrN2+qZ6vaYgVJTLlIX9jpdoSyRToAwMBgSBK5E8QheJjB6hKJqjiF91wwAACoP6yjOETiw1zvsrRbTrNNSknRts170IyPxuGRuZIStmq2DeRopo4mt1sEhIhSQ6Ugg7P1AX36Wi0AgFTBb3jcgAH8rkjT4McsXy5S7dx0kKRmD6WVV7Bli7tLkMERc+WQuNhKdt9YmLtOquDtO1oiVfC/EQAAoCmVbj6opePT1kCR3F11D3L4SRJ9vSGfXRNX0O53TV94zbVmrbwyrzBjy0GdpnQB94oLBgAAlfW52x8qJG4eTXiUSCCefT811SSklBlFbNVkMrGX7wntCUQCAElQpfoqbVlm1e78ivrcheqz8PcBBHX3afJyp867oaiHid/WKDWy6V1kdXeJpFwhZwpDtkhXv/VuIVdaUX5Xjlq065Gi6n0LvluHRT9wlFRMvcRgjD23v4vVF2pZlZwB06Q/yu4i9+QwANpQVZmdLzx0bHXxxrTC1lxa5BuZvkjFln2eQFaeMOlNoEjKzRJrxwMWAMAYmwbtak2+dzInW6zXlEoZBlfv01RuX9Ib2SIB6GYAKNo5WV6gvNbsjEcZgkCzkg6trCIBAACsrq7V6ws2yNdRFCqry6nak387+0mfFgmgwKBmy3bb8NMv6Dbdr7UbfUM97sEr7slAjG3V6QrbrVNlh8+oXyMr35SjMkhIanneiZdhBUaHJwCApJC2TKotk249rI9G6KA3GvTGgt4oAFy2qi1mGyQyarlDW1q8HJpP0SIBCEX8ex/Y3nX5ur5IdfjRhlvaEHD5JJcvkCmnbrB33V/77ut/BwCEkFC0gCCVDi3ppT5N8rr9r738F7VOuWNf3UzrXxb6fwD4Rulb/7vNHQArTXcArDTdAbDSdAfAStP/AFtNwoeUbqKBAAAAAElFTkSuQmCC",e6=()=>{const[i,e]=ut.useState(!1),[t,n]=ut.useState(""),[r,s]=ut.useState(),a=(c,u)=>{n(c),s(()=>u),e(!0)},o=()=>{r&&r(),e(!1)},l=()=>{e(!1)};return{showConfirmationAlert:a,ConfirmationAlert:xe.jsx(uS,{isOpen:i,message:t,buttons:[{text:"Cancel",role:"cancel",handler:l},{text:"Confirm",handler:o}]})}};class SC{constructor(e){this.sqlite=e,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(e){return Promise.reject(e)}}async saveToStore(e){try{return await this.sqlite.saveToStore({database:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToLocalDisk(e){try{return await this.sqlite.saveToLocalDisk({database:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async getFromLocalDiskToStore(e){const t=e!=null?e:!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async echo(e){try{const t=await this.sqlite.echo({value:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isSecretStored(){try{const e=await this.sqlite.isSecretStored();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async setEncryptionSecret(e){try{return await this.sqlite.setEncryptionSecret({passphrase:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async changeEncryptionSecret(e,t){try{return await this.sqlite.changeEncryptionSecret({passphrase:e,oldpassphrase:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(e){return Promise.reject(e)}}async checkEncryptionSecret(e){try{const t=await this.sqlite.checkEncryptionSecret({passphrase:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async addUpgradeStatement(e,t,n){const r={toVersion:t,statements:n};try{return e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:e,upgrade:[r]}),Promise.resolve()}catch(s){return Promise.reject(s)}}async createConnection(e,t,n,r,s){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.createConnection({database:e,encrypted:t,mode:n,version:r,readonly:s});const a=new _w(e,s,this.sqlite),o=s?"RO_".concat(e):"RW_".concat(e);return this._connectionDict.set(o,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(e,t){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.closeConnection({database:e,readonly:t});const n=t?"RO_".concat(e):"RW_".concat(e);return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isConnection(e,t){const n={};e.endsWith(".db")&&(e=e.slice(0,-3));const r=t?"RO_".concat(e):"RW_".concat(e);return n.result=this._connectionDict.has(r),Promise.resolve(n)}async retrieveConnection(e,t){e.endsWith(".db")&&(e=e.slice(0,-3));const n=t?"RO_".concat(e):"RW_".concat(e);if(this._connectionDict.has(n)){const r=this._connectionDict.get(n);return typeof r<"u"?Promise.resolve(r):Promise.reject("Connection ".concat(e," is undefined"))}else return Promise.reject("Connection ".concat(e," does not exist"))}async getNCDatabasePath(e,t){try{const n=await this.sqlite.getNCDatabasePath({path:e,database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async createNCConnection(e,t){try{await this.sqlite.createNCConnection({databasePath:e,version:t});const n=new _w(e,!0,this.sqlite),r="RO_".concat(e,")");return this._connectionDict.set(r,n),Promise.resolve(n)}catch(n){return Promise.reject(n)}}async closeNCConnection(e){try{await this.sqlite.closeNCConnection({databasePath:e});const t="RO_".concat(e,")");return this._connectionDict.delete(t),Promise.resolve()}catch(t){return Promise.reject(t)}}async isNCConnection(e){const t={},n="RO_".concat(e,")");return t.result=this._connectionDict.has(n),Promise.resolve(t)}async retrieveNCConnection(e){if(this._connectionDict.has(e)){const t="RO_".concat(e,")"),n=this._connectionDict.get(t);return typeof n<"u"?Promise.resolve(n):Promise.reject("Connection ".concat(e," is undefined"))}else return Promise.reject("Connection ".concat(e," does not exist"))}async isNCDatabase(e){try{const t=await this.sqlite.isNCDatabase({databasePath:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const e=new Map;try{for(const t of this._connectionDict.keys()){const n=t.substring(3),r=t.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:n,readonly:r}),e.set(t,null)}for(const t of e.keys())this._connectionDict.delete(t);return Promise.resolve()}catch(t){return Promise.reject(t)}}async checkConnectionsConsistency(){try{const e=[...this._connectionDict.keys()],t=[],n=[];for(const s of e)t.push(s.substring(0,2)),n.push(s.substring(3));const r=await this.sqlite.checkConnectionsConsistency({dbNames:n,openModes:t});return r.result||(this._connectionDict=new Map),Promise.resolve(r)}catch(e){return this._connectionDict=new Map,Promise.reject(e)}}async importFromJson(e){try{const t=await this.sqlite.importFromJson({jsonstring:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isJsonValid(e){try{const t=await this.sqlite.isJsonValid({jsonstring:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async copyFromAssets(e){const t=e!=null?e:!0;try{return await this.sqlite.copyFromAssets({overwrite:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromHTTPRequest(e,t){const n=t!=null?t:!0;try{return await this.sqlite.getFromHTTPRequest({url:e,overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async isDatabaseEncrypted(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const t=await this.sqlite.isDatabaseEncrypted({database:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigEncryption(){try{const e=await this.sqlite.isInConfigEncryption();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isInConfigBiometricAuth(){try{const e=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isDatabase(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const t=await this.sqlite.isDatabase({database:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getDatabaseList(){try{const t=(await this.sqlite.getDatabaseList()).values;t.sort();const n={values:t};return Promise.resolve(n)}catch(e){return Promise.reject(e)}}async getMigratableDbList(e){if(!e||e.length===0)return Promise.reject("You must provide a folder path");try{const t=await this.sqlite.getMigratableDbList({folderPath:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async addSQLiteSuffix(e,t){const n=e||"default",r=t||[];try{const s=await this.sqlite.addSQLiteSuffix({folderPath:n,dbNameList:r});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteOldDatabases(e,t){const n=e||"default",r=t||[];try{const s=await this.sqlite.deleteOldDatabases({folderPath:n,dbNameList:r});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async moveDatabasesAndAddSuffix(e,t){const n=e||"default",r=t||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:n,dbNameList:r})}}class _w{constructor(e,t,n){this.dbName=e,this.readonly=t,this.sqlite=n}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async beginTransaction(){try{const e=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async commitTransaction(){try{const e=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async rollbackTransaction(){try{const e=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTransactionActive(){try{const e=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async loadExtension(e){try{return await this.sqlite.loadExtension({database:this.dbName,path:e,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async enableLoadExtension(e){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:e,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async getUrl(){try{const e=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getVersion(){try{const e=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getTableList(){try{const e=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async execute(e,t=!0,n=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const r=await this.sqlite.execute({database:this.dbName,statements:e,transaction:t,readonly:!1,isSQL92:n});return Promise.resolve(r)}}catch(r){return Promise.reject(r)}}async query(e,t,n=!0){let r;try{return t&&t.length>0?r=await this.sqlite.query({database:this.dbName,statement:e,values:t,readonly:this.readonly,isSql92:!0}):r=await this.sqlite.query({database:this.dbName,statement:e,values:[],readonly:this.readonly,isSQL92:n}),r=await this.reorderRows(r),Promise.resolve(r)}catch(s){return Promise.reject(s)}}async run(e,t,n=!0,r="no",s=!0){let a;try{if(this.readonly)return Promise.reject("not allowed in read-only mode");if(t&&t.length>0){const o=e.toUpperCase().includes("RETURNING")?r:"no";a=await this.sqlite.run({database:this.dbName,statement:e,values:t,transaction:n,readonly:!1,returnMode:o,isSQL92:!0})}else{const o=e.toUpperCase().includes("RETURNING")?r:"no";a=await this.sqlite.run({database:this.dbName,statement:e,values:[],transaction:n,readonly:!1,returnMode:o,isSQL92:s})}return a.changes=await this.reorderRows(a.changes),Promise.resolve(a)}catch(o){return Promise.reject(o)}}async executeSet(e,t=!0,n="no",r=!0){let s;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(s=await this.sqlite.executeSet({database:this.dbName,set:e,transaction:t,readonly:!1,returnMode:n,isSQL92:r}),s.changes=await this.reorderRows(s.changes),Promise.resolve(s))}catch(a){return Promise.reject(a)}}async isExists(){try{const e=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTable(e){try{const t=await this.sqlite.isTableExists({database:this.dbName,table:e,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDBOpen(){try{const e=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const e=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(e)}}catch(e){return Promise.reject(e)}}async setSyncDate(e){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:e,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async getSyncDate(){try{const e=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let t="";return e.syncDate>0&&(t=new Date(e.syncDate*1e3).toISOString()),Promise.resolve(t)}catch(e){return Promise.reject(e)}}async exportToJson(e,t=!1){try{const n=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:e,readonly:this.readonly,encrypted:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async executeTransaction(e,t=!0){let n=0,r=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");try{if(await this.sqlite.beginTransaction({database:this.dbName}),r=await this.sqlite.isTransactionActive({database:this.dbName}),!r)return Promise.reject("After Begin Transaction, no transaction active")}catch(s){return Promise.reject(s)}try{for(const a of e)if(a.values&&a.values.length>0){const o=a.statement.toUpperCase().includes("RETURNING")?"all":"no",l=await this.sqlite.run({database:this.dbName,statement:a.statement,values:a.values,transaction:!1,readonly:!1,returnMode:o,isSQL92:t});if(l.changes.changes<=0)throw new Error("Error in transaction method run ");n+=l.changes.changes}else{const o=await this.sqlite.execute({database:this.dbName,statements:a.statement,transaction:!1,readonly:!1});if(r=await this.sqlite.isTransactionActive({database:this.dbName}),o.changes.changes<0)throw new Error("Error in transaction method execute ");n+=o.changes.changes}if(r=await this.sqlite.isTransactionActive({database:this.dbName}),r){const a=await this.sqlite.commitTransaction({database:this.dbName});n+=a.changes.changes}const s={changes:{changes:n}};return Promise.resolve(s)}catch(s){const a=s.message?s.message:s;return r=await this.sqlite.isTransactionActive({database:this.dbName}),r&&await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(a)}}async reorderRows(e){const t=e;if(e!=null&&e.values&&typeof e.values[0]=="object"&&Object.keys(e.values[0]).includes("ios_columns")){const n=e.values[0].ios_columns,r=[];for(let s=1;s<e.values.length;s++){const a=e.values[s],o={};for(const l of n)o[l]=a[l];r.push(o)}t.values=r}return Promise.resolve(t)}}const Wm=tf("CapacitorSQLite",{web:()=>ni(()=>import("./web-bd1d1816.js"),[]).then(i=>new i.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite});/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Rw;(function(i){(function(e){var t=typeof ab=="object"?ab:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=r(i);typeof t.Reflect>"u"?t.Reflect=i:n=r(t.Reflect,n),e(n);function r(s,a){return function(o,l){typeof s[o]!="function"&&Object.defineProperty(s,o,{configurable:!0,writable:!0,value:l}),a&&a(o,l)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",r=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",o={__proto__:[]}instanceof Array,l=!a&&!o,c={create:a?function(){return $e(Object.create(null))}:o?function(){return $e({__proto__:null})}:function(){return $e({})},has:l?function(G,X){return t.call(G,X)}:function(G,X){return X in G},get:l?function(G,X){return t.call(G,X)?G[X]:void 0}:function(G,X){return G[X]}},u=Object.getPrototypeOf(Function),d=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",h=!d&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ne(),f=!d&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Se(),m=!d&&typeof WeakMap=="function"?WeakMap:ce(),p=new m;function w(G,X,pe,A){if(F(pe)){if(!ft(G))throw new TypeError;if(!Tt(X))throw new TypeError;return Q(G,X)}else{if(!ft(G))throw new TypeError;if(!we(X))throw new TypeError;if(!we(A)&&!F(A)&&!H(A))throw new TypeError;return H(A)&&(A=void 0),pe=Xe(pe),$(G,X,pe,A)}}e("decorate",w);function y(G,X){function pe(A,v){if(!we(A))throw new TypeError;if(!F(v)&&!Dt(v))throw new TypeError;re(G,X,A,v)}return pe}e("metadata",y);function b(G,X,pe,A){if(!we(pe))throw new TypeError;return F(A)||(A=Xe(A)),re(G,X,pe,A)}e("defineMetadata",b);function E(G,X,pe){if(!we(X))throw new TypeError;return F(pe)||(pe=Xe(pe)),q(G,X,pe)}e("hasMetadata",E);function _(G,X,pe){if(!we(X))throw new TypeError;return F(pe)||(pe=Xe(pe)),S(G,X,pe)}e("hasOwnMetadata",_);function k(G,X,pe){if(!we(X))throw new TypeError;return F(pe)||(pe=Xe(pe)),Z(G,X,pe)}e("getMetadata",k);function B(G,X,pe){if(!we(X))throw new TypeError;return F(pe)||(pe=Xe(pe)),ve(G,X,pe)}e("getOwnMetadata",B);function D(G,X){if(!we(G))throw new TypeError;return F(X)||(X=Xe(X)),de(G,X)}e("getMetadataKeys",D);function O(G,X){if(!we(G))throw new TypeError;return F(X)||(X=Xe(X)),ne(G,X)}e("getOwnMetadataKeys",O);function R(G,X,pe){if(!we(X))throw new TypeError;F(pe)||(pe=Xe(pe));var A=P(X,pe,!1);if(F(A)||!A.delete(G))return!1;if(A.size>0)return!0;var v=p.get(X);return v.delete(pe),v.size>0||p.delete(X),!0}e("deleteMetadata",R);function Q(G,X){for(var pe=G.length-1;pe>=0;--pe){var A=G[pe],v=A(X);if(!F(v)&&!H(v)){if(!Tt(v))throw new TypeError;X=v}}return X}function $(G,X,pe,A){for(var v=G.length-1;v>=0;--v){var x=G[v],M=x(X,pe,A);if(!F(M)&&!H(M)){if(!we(M))throw new TypeError;A=M}}return A}function P(G,X,pe){var A=p.get(G);if(F(A)){if(!pe)return;A=new h,p.set(G,A)}var v=A.get(X);if(F(v)){if(!pe)return;v=new h,A.set(X,v)}return v}function q(G,X,pe){var A=S(G,X,pe);if(A)return!0;var v=ie(X);return H(v)?!1:q(G,v,pe)}function S(G,X,pe){var A=P(X,pe,!1);return F(A)?!1:Ke(A.has(G))}function Z(G,X,pe){var A=S(G,X,pe);if(A)return ve(G,X,pe);var v=ie(X);if(!H(v))return Z(G,v,pe)}function ve(G,X,pe){var A=P(X,pe,!1);if(!F(A))return A.get(G)}function re(G,X,pe,A){var v=P(pe,A,!0);v.set(G,X)}function de(G,X){var pe=ne(G,X),A=ie(G);if(A===null)return pe;var v=de(A,X);if(v.length<=0)return pe;if(pe.length<=0)return v;for(var x=new f,M=[],V=0,ee=pe;V<ee.length;V++){var oe=ee[V],Fe=x.has(oe);Fe||(x.add(oe),M.push(oe))}for(var je=0,it=v;je<it.length;je++){var oe=it[je],Fe=x.has(oe);Fe||(x.add(oe),M.push(oe))}return M}function ne(G,X){var pe=[],A=P(G,X,!1);if(F(A))return pe;for(var v=A.keys(),x=be(v),M=0;;){var V=z(x);if(!V)return pe.length=M,pe;var ee=ge(V);try{pe[M]=ee}catch(oe){try{L(x)}finally{throw oe}}M++}}function Y(G){if(G===null)return 1;switch(typeof G){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return G===null?1:6;default:return 6}}function F(G){return G===void 0}function H(G){return G===null}function _e(G){return typeof G=="symbol"}function we(G){return typeof G=="object"?G!==null:typeof G=="function"}function ye(G,X){switch(Y(G)){case 0:return G;case 1:return G;case 2:return G;case 3:return G;case 4:return G;case 5:return G}var pe=X===3?"string":X===5?"number":"default",A=C(G,r);if(A!==void 0){var v=A.call(G,pe);if(we(v))throw new TypeError;return v}return Ve(G,pe==="default"?"number":pe)}function Ve(G,X){if(X==="string"){var pe=G.toString;if(ct(pe)){var A=pe.call(G);if(!we(A))return A}var v=G.valueOf;if(ct(v)){var A=v.call(G);if(!we(A))return A}}else{var v=G.valueOf;if(ct(v)){var A=v.call(G);if(!we(A))return A}var x=G.toString;if(ct(x)){var A=x.call(G);if(!we(A))return A}}throw new TypeError}function Ke(G){return!!G}function Ye(G){return""+G}function Xe(G){var X=ye(G,3);return _e(X)?X:Ye(X)}function ft(G){return Array.isArray?Array.isArray(G):G instanceof Object?G instanceof Array:Object.prototype.toString.call(G)==="[object Array]"}function ct(G){return typeof G=="function"}function Tt(G){return typeof G=="function"}function Dt(G){switch(Y(G)){case 3:return!0;case 4:return!0;default:return!1}}function C(G,X){var pe=G[X];if(pe!=null){if(!ct(pe))throw new TypeError;return pe}}function be(G){var X=C(G,s);if(!ct(X))throw new TypeError;var pe=X.call(G);if(!we(pe))throw new TypeError;return pe}function ge(G){return G.value}function z(G){var X=G.next();return X.done?!1:X}function L(G){var X=G.return;X&&X.call(G)}function ie(G){var X=Object.getPrototypeOf(G);if(typeof G!="function"||G===u||X!==u)return X;var pe=G.prototype,A=pe&&Object.getPrototypeOf(pe);if(A==null||A===Object.prototype)return X;var v=A.constructor;return typeof v!="function"||v===G?X:v}function Ne(){var G={},X=[],pe=function(){function M(V,ee,oe){this._index=0,this._keys=V,this._values=ee,this._selector=oe}return M.prototype["@@iterator"]=function(){return this},M.prototype[s]=function(){return this},M.prototype.next=function(){var V=this._index;if(V>=0&&V<this._keys.length){var ee=this._selector(this._keys[V],this._values[V]);return V+1>=this._keys.length?(this._index=-1,this._keys=X,this._values=X):this._index++,{value:ee,done:!1}}return{value:void 0,done:!0}},M.prototype.throw=function(V){throw this._index>=0&&(this._index=-1,this._keys=X,this._values=X),V},M.prototype.return=function(V){return this._index>=0&&(this._index=-1,this._keys=X,this._values=X),{value:V,done:!0}},M}();return function(){function M(){this._keys=[],this._values=[],this._cacheKey=G,this._cacheIndex=-2}return Object.defineProperty(M.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),M.prototype.has=function(V){return this._find(V,!1)>=0},M.prototype.get=function(V){var ee=this._find(V,!1);return ee>=0?this._values[ee]:void 0},M.prototype.set=function(V,ee){var oe=this._find(V,!0);return this._values[oe]=ee,this},M.prototype.delete=function(V){var ee=this._find(V,!1);if(ee>=0){for(var oe=this._keys.length,Fe=ee+1;Fe<oe;Fe++)this._keys[Fe-1]=this._keys[Fe],this._values[Fe-1]=this._values[Fe];return this._keys.length--,this._values.length--,V===this._cacheKey&&(this._cacheKey=G,this._cacheIndex=-2),!0}return!1},M.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=G,this._cacheIndex=-2},M.prototype.keys=function(){return new pe(this._keys,this._values,A)},M.prototype.values=function(){return new pe(this._keys,this._values,v)},M.prototype.entries=function(){return new pe(this._keys,this._values,x)},M.prototype["@@iterator"]=function(){return this.entries()},M.prototype[s]=function(){return this.entries()},M.prototype._find=function(V,ee){return this._cacheKey!==V&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=V)),this._cacheIndex<0&&ee&&(this._cacheIndex=this._keys.length,this._keys.push(V),this._values.push(void 0)),this._cacheIndex},M}();function A(M,V){return M}function v(M,V){return V}function x(M,V){return[M,V]}}function Se(){return function(){function G(){this._map=new h}return Object.defineProperty(G.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),G.prototype.has=function(X){return this._map.has(X)},G.prototype.add=function(X){return this._map.set(X,X),this},G.prototype.delete=function(X){return this._map.delete(X)},G.prototype.clear=function(){this._map.clear()},G.prototype.keys=function(){return this._map.keys()},G.prototype.values=function(){return this._map.values()},G.prototype.entries=function(){return this._map.entries()},G.prototype["@@iterator"]=function(){return this.keys()},G.prototype[s]=function(){return this.keys()},G}()}function ce(){var G=16,X=c.create(),pe=A();return function(){function ee(){this._key=A()}return ee.prototype.has=function(oe){var Fe=v(oe,!1);return Fe!==void 0?c.has(Fe,this._key):!1},ee.prototype.get=function(oe){var Fe=v(oe,!1);return Fe!==void 0?c.get(Fe,this._key):void 0},ee.prototype.set=function(oe,Fe){var je=v(oe,!0);return je[this._key]=Fe,this},ee.prototype.delete=function(oe){var Fe=v(oe,!1);return Fe!==void 0?delete Fe[this._key]:!1},ee.prototype.clear=function(){this._key=A()},ee}();function A(){var ee;do ee="@@WeakMap@@"+V();while(c.has(X,ee));return X[ee]=!0,ee}function v(ee,oe){if(!t.call(ee,pe)){if(!oe)return;Object.defineProperty(ee,pe,{value:c.create()})}return ee[pe]}function x(ee,oe){for(var Fe=0;Fe<oe;++Fe)ee[Fe]=Math.random()*255|0;return ee}function M(ee){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(ee)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(ee)):x(new Uint8Array(ee),ee):x(new Array(ee),ee)}function V(){var ee=M(G);ee[6]=ee[6]&79|64,ee[8]=ee[8]&191|128;for(var oe="",Fe=0;Fe<G;++Fe){var je=ee[Fe];(Fe===4||Fe===6||Fe===8)&&(oe+="-"),je<16&&(oe+="0"),oe+=je.toString(16).toLowerCase()}return oe}}function $e(G){return G.__=void 0,delete G.__,G}})})(Rw||(Rw={}));class ed{static getInheritanceTree(e){const t=[e],n=r=>{const s=Object.getPrototypeOf(r);s&&s.name&&(t.push(s),n(s))};return n(e),t}static isInherited(e,t){return e.prototype instanceof t}static filterByTarget(e,t){return t?e.filter(n=>n.target&&t.indexOf(n.target)!==-1):e}}class CC{constructor(){this.tables=[],this.trees=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.uniques=[],this.checks=[],this.exclusions=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}filterTables(e){return this.filterByTarget(this.tables,e)}filterColumns(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)}findGenerated(e,t){return this.generations.find(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.propertyName===t)}findTree(e){return this.trees.find(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterRelations(e){return this.filterByTargetAndWithoutDuplicateRelationProperties(this.relations,e)}filterRelationIds(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)}filterRelationCounts(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)}filterIndices(e){return this.indices.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterUniques(e){return this.uniques.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterChecks(e){return this.checks.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterExclusions(e){return this.exclusions.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterListeners(e){return this.filterByTarget(this.entityListeners,e)}filterEmbeddeds(e){return this.filterByTargetAndWithoutDuplicateEmbeddedProperties(this.embeddeds,e)}findJoinTable(e,t){return this.joinTables.find(n=>n.target===e&&n.propertyName===t)}filterJoinColumns(e,t){return this.joinColumns.filter(n=>n.target===e&&n.propertyName===t)}filterSubscribers(e){return this.filterByTarget(this.entitySubscribers,e)}filterNamingStrategies(e){return this.filterByTarget(this.namingStrategies,e)}filterTransactionEntityManagers(e,t){return this.transactionEntityManagers.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterTransactionRepository(e,t){return this.transactionRepositories.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterSingleTableChildren(e){return this.tables.filter(t=>typeof t.target=="function"&&typeof e=="function"&&ed.isInherited(t.target,e)&&t.type==="entity-child")}findInheritanceType(e){return this.inheritances.find(t=>t.target===e)}findDiscriminatorValue(e){return this.discriminatorValues.find(t=>t.target===e)}filterByTarget(e,t){return e.filter(n=>Array.isArray(t)?t.indexOf(n.target)!==-1:n.target===t)}filterByTargetAndWithoutDuplicateProperties(e,t){const n=[];return e.forEach(r=>{(Array.isArray(t)?t.indexOf(r.target)!==-1:r.target===t)&&(n.find(a=>a.propertyName===r.propertyName)||n.push(r))}),n}filterByTargetAndWithoutDuplicateRelationProperties(e,t){const n=[];return e.forEach(r=>{if(Array.isArray(t)?t.indexOf(r.target)!==-1:r.target===t){const a=n.findIndex(o=>o.propertyName===r.propertyName);if(Array.isArray(t)&&a!==-1&&t.indexOf(r.target)<t.indexOf(n[a].target)){const o=Object.create(n[a]);o.type=r.type,n[a]=o}else a===-1&&n.push(r)}}),n}filterByTargetAndWithoutDuplicateEmbeddedProperties(e,t){const n=[];return e.forEach(r=>{(Array.isArray(t)?t.indexOf(r.target)!==-1:r.target===t)&&(n.find(o=>o.prefix===r.prefix&&o.propertyName===r.propertyName)||n.push(r))}),n}}class jt{static getGlobalVariable(){return typeof window<"u"?window:global}static load(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: require("'.concat(e,'").'));return""}static pathNormalize(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: path.normalize("'.concat(e,'").'));return""}static pathExtname(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: path.extname("'.concat(e,'").'));return""}static pathResolve(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: path.resolve("'.concat(e,'").'));return""}static fileExist(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.existsSync("'.concat(e,'").'));return!1}static dotenv(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: dotenv.config({ path: "'.concat(e,'" }).'))}static getEnvVariable(e){}static readFileSync(e){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("'.concat(e,'").'));return null}static appendFileSync(e,t){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("'.concat(e,'").'))}static writeFile(e,t){if(this.type==="browser")throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.writeFile("'.concat(e,'").'));return Promise.reject(null)}static highlightSql(e){return e}static highlightJson(e){return e}static logInfo(e,t){console.info(e+" ",t)}static logError(e,t){console.error(e+" ",t)}static logWarn(e,t){console.warn(e+" ",t)}static log(e){console.log(e)}static warn(e){return e}}jt.type="browser";typeof window<"u"&&typeof require<"u"&&(window.Buffer=require("buffer/").Buffer);typeof global<"u"&&typeof require<"u"&&(global.Buffer=require("buffer/").Buffer);class ps{static sha1(e){let t=function(k,B){return k<<B|k>>>32-B},n=function(k){let B="",D,O;for(D=7;D>=0;D--)O=k>>>D*4&15,B+=O.toString(16);return B},r,s,a,o=new Array(80),l=1732584193,c=4023233417,u=2562383102,d=271733878,h=3285377520,f,m,p,w,y,b;e=encodeURIComponent(e);let E=e.length,_=[];for(s=0;s<E-3;s+=4)a=e.charCodeAt(s)<<24|e.charCodeAt(s+1)<<16|e.charCodeAt(s+2)<<8|e.charCodeAt(s+3),_.push(a);switch(E%4){case 0:s=2147483648;break;case 1:s=e.charCodeAt(E-1)<<24|8388608;break;case 2:s=e.charCodeAt(E-2)<<24|e.charCodeAt(E-1)<<16|32768;break;case 3:s=e.charCodeAt(E-3)<<24|e.charCodeAt(E-2)<<16|e.charCodeAt(E-1)<<8|128;break}for(_.push(s);_.length%16!==14;)_.push(0);for(_.push(E>>>29),_.push(E<<3&4294967295),r=0;r<_.length;r+=16){for(s=0;s<16;s++)o[s]=_[r+s];for(s=16;s<=79;s++)o[s]=t(o[s-3]^o[s-8]^o[s-14]^o[s-16],1);for(f=l,m=c,p=u,w=d,y=h,s=0;s<=19;s++)b=t(f,5)+(m&p|~m&w)+y+o[s]+1518500249&4294967295,y=w,w=p,p=t(m,30),m=f,f=b;for(s=20;s<=39;s++)b=t(f,5)+(m^p^w)+y+o[s]+1859775393&4294967295,y=w,w=p,p=t(m,30),m=f,f=b;for(s=40;s<=59;s++)b=t(f,5)+(m&p|m&w|p&w)+y+o[s]+2400959708&4294967295,y=w,w=p,p=t(m,30),m=f,f=b;for(s=60;s<=79;s++)b=t(f,5)+(m^p^w)+y+o[s]+3395469782&4294967295,y=w,w=p,p=t(m,30),m=f,f=b;l=l+f&4294967295,c=c+m&4294967295,u=u+p&4294967295,d=d+w&4294967295,h=h+y&4294967295}return b=n(l)+n(c)+n(u)+n(d)+n(h),b.toLowerCase()}}var AC={exports:{}},Hm={exports:{}};typeof Object.create=="function"?Hm.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Hm.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var nl=Hm.exports,Qm={exports:{}},My={},nf={};nf.byteLength=i6;nf.toByteArray=s6;nf.fromByteArray=l6;var xr=[],Pi=[],t6=typeof Uint8Array<"u"?Uint8Array:Array,bp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xa=0,n6=bp.length;Xa<n6;++Xa)xr[Xa]=bp[Xa],Pi[bp.charCodeAt(Xa)]=Xa;Pi["-".charCodeAt(0)]=62;Pi["_".charCodeAt(0)]=63;function NC(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function i6(i){var e=NC(i),t=e[0],n=e[1];return(t+n)*3/4-n}function r6(i,e,t){return(e+t)*3/4-t}function s6(i){var e,t=NC(i),n=t[0],r=t[1],s=new t6(r6(i,n,r)),a=0,o=r>0?n-4:n,l;for(l=0;l<o;l+=4)e=Pi[i.charCodeAt(l)]<<18|Pi[i.charCodeAt(l+1)]<<12|Pi[i.charCodeAt(l+2)]<<6|Pi[i.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=Pi[i.charCodeAt(l)]<<2|Pi[i.charCodeAt(l+1)]>>4,s[a++]=e&255),r===1&&(e=Pi[i.charCodeAt(l)]<<10|Pi[i.charCodeAt(l+1)]<<4|Pi[i.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function a6(i){return xr[i>>18&63]+xr[i>>12&63]+xr[i>>6&63]+xr[i&63]}function o6(i,e,t){for(var n,r=[],s=e;s<t;s+=3)n=(i[s]<<16&16711680)+(i[s+1]<<8&65280)+(i[s+2]&255),r.push(a6(n));return r.join("")}function l6(i){for(var e,t=i.length,n=t%3,r=[],s=16383,a=0,o=t-n;a<o;a+=s)r.push(o6(i,a,a+s>o?o:a+s));return n===1?(e=i[t-1],r.push(xr[e>>2]+xr[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],r.push(xr[e>>10]+xr[e>>4&63]+xr[e<<2&63]+"=")),r.join("")}var Ly={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ly.read=function(i,e,t,n,r){var s,a,o=r*8-n-1,l=(1<<o)-1,c=l>>1,u=-7,d=t?r-1:0,h=t?-1:1,f=i[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=s*256+i[e+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=a*256+i[e+d],d+=h,u-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-c}return(f?-1:1)*a*Math.pow(2,s-n)};Ly.write=function(i,e,t,n,r,s){var a,o,l,c=s*8-r-1,u=(1<<c)-1,d=u>>1,h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,m=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?e+=h/l:e+=h*Math.pow(2,1-d),e*l>=2&&(a++,l/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(e*l-1)*Math.pow(2,r),a=a+d):(o=e*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;i[t+f]=o&255,f+=m,o/=256,r-=8);for(a=a<<r|o,c+=r;c>0;i[t+f]=a&255,f+=m,a/=256,c-=8);i[t+f-m]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=nf,t=Ly,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=o,i.SlowBuffer=b,i.INSPECT_MAX_BYTES=50;const r=2147483647;i.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const A=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(A,v),A.foo()===42}catch(A){return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(A){if(A>r)throw new RangeError('The value "'+A+'" is invalid for option "size"');const v=new Uint8Array(A);return Object.setPrototypeOf(v,o.prototype),v}function o(A,v,x){if(typeof A=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(A)}return l(A,v,x)}o.poolSize=8192;function l(A,v,x){if(typeof A=="string")return h(A,v);if(ArrayBuffer.isView(A))return m(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(ce(A,ArrayBuffer)||A&&ce(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ce(A,SharedArrayBuffer)||A&&ce(A.buffer,SharedArrayBuffer)))return p(A,v,x);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const M=A.valueOf&&A.valueOf();if(M!=null&&M!==A)return o.from(M,v,x);const V=w(A);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return o.from(A[Symbol.toPrimitive]("string"),v,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}o.from=function(A,v,x){return l(A,v,x)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function c(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function u(A,v,x){return c(A),A<=0?a(A):v!==void 0?typeof x=="string"?a(A).fill(v,x):a(A).fill(v):a(A)}o.alloc=function(A,v,x){return u(A,v,x)};function d(A){return c(A),a(A<0?0:y(A)|0)}o.allocUnsafe=function(A){return d(A)},o.allocUnsafeSlow=function(A){return d(A)};function h(A,v){if((typeof v!="string"||v==="")&&(v="utf8"),!o.isEncoding(v))throw new TypeError("Unknown encoding: "+v);const x=E(A,v)|0;let M=a(x);const V=M.write(A,v);return V!==x&&(M=M.slice(0,V)),M}function f(A){const v=A.length<0?0:y(A.length)|0,x=a(v);for(let M=0;M<v;M+=1)x[M]=A[M]&255;return x}function m(A){if(ce(A,Uint8Array)){const v=new Uint8Array(A);return p(v.buffer,v.byteOffset,v.byteLength)}return f(A)}function p(A,v,x){if(v<0||A.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<v+(x||0))throw new RangeError('"length" is outside of buffer bounds');let M;return v===void 0&&x===void 0?M=new Uint8Array(A):x===void 0?M=new Uint8Array(A,v):M=new Uint8Array(A,v,x),Object.setPrototypeOf(M,o.prototype),M}function w(A){if(o.isBuffer(A)){const v=y(A.length)|0,x=a(v);return x.length===0||A.copy(x,0,0,v),x}if(A.length!==void 0)return typeof A.length!="number"||$e(A.length)?a(0):f(A);if(A.type==="Buffer"&&Array.isArray(A.data))return f(A.data)}function y(A){if(A>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return A|0}function b(A){return+A!=A&&(A=0),o.alloc(+A)}o.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==o.prototype},o.compare=function(v,x){if(ce(v,Uint8Array)&&(v=o.from(v,v.offset,v.byteLength)),ce(x,Uint8Array)&&(x=o.from(x,x.offset,x.byteLength)),!o.isBuffer(v)||!o.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===x)return 0;let M=v.length,V=x.length;for(let ee=0,oe=Math.min(M,V);ee<oe;++ee)if(v[ee]!==x[ee]){M=v[ee],V=x[ee];break}return M<V?-1:V<M?1:0},o.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(v,x){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return o.alloc(0);let M;if(x===void 0)for(x=0,M=0;M<v.length;++M)x+=v[M].length;const V=o.allocUnsafe(x);let ee=0;for(M=0;M<v.length;++M){let oe=v[M];if(ce(oe,Uint8Array))ee+oe.length>V.length?(o.isBuffer(oe)||(oe=o.from(oe)),oe.copy(V,ee)):Uint8Array.prototype.set.call(V,oe,ee);else if(o.isBuffer(oe))oe.copy(V,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=oe.length}return V};function E(A,v){if(o.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||ce(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const x=A.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&x===0)return 0;let V=!1;for(;;)switch(v){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return z(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return Ne(A).length;default:if(V)return M?-1:z(A).length;v=(""+v).toLowerCase(),V=!0}}o.byteLength=E;function _(A,v,x){let M=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,v>>>=0,x<=v))return"";for(A||(A="utf8");;)switch(A){case"hex":return ne(this,v,x);case"utf8":case"utf-8":return S(this,v,x);case"ascii":return re(this,v,x);case"latin1":case"binary":return de(this,v,x);case"base64":return q(this,v,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,v,x);default:if(M)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),M=!0}}o.prototype._isBuffer=!0;function k(A,v,x){const M=A[v];A[v]=A[x],A[x]=M}o.prototype.swap16=function(){const v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<v;x+=2)k(this,x,x+1);return this},o.prototype.swap32=function(){const v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<v;x+=4)k(this,x,x+3),k(this,x+1,x+2);return this},o.prototype.swap64=function(){const v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<v;x+=8)k(this,x,x+7),k(this,x+1,x+6),k(this,x+2,x+5),k(this,x+3,x+4);return this},o.prototype.toString=function(){const v=this.length;return v===0?"":arguments.length===0?S(this,0,v):_.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(v){if(!o.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:o.compare(this,v)===0},o.prototype.inspect=function(){let v="";const x=i.INSPECT_MAX_BYTES;return v=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(v+=" ... "),"<Buffer "+v+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(v,x,M,V,ee){if(ce(v,Uint8Array)&&(v=o.from(v,v.offset,v.byteLength)),!o.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(x===void 0&&(x=0),M===void 0&&(M=v?v.length:0),V===void 0&&(V=0),ee===void 0&&(ee=this.length),x<0||M>v.length||V<0||ee>this.length)throw new RangeError("out of range index");if(V>=ee&&x>=M)return 0;if(V>=ee)return-1;if(x>=M)return 1;if(x>>>=0,M>>>=0,V>>>=0,ee>>>=0,this===v)return 0;let oe=ee-V,Fe=M-x;const je=Math.min(oe,Fe),it=this.slice(V,ee),yt=v.slice(x,M);for(let at=0;at<je;++at)if(it[at]!==yt[at]){oe=it[at],Fe=yt[at];break}return oe<Fe?-1:Fe<oe?1:0};function B(A,v,x,M,V){if(A.length===0)return-1;if(typeof x=="string"?(M=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,$e(x)&&(x=V?0:A.length-1),x<0&&(x=A.length+x),x>=A.length){if(V)return-1;x=A.length-1}else if(x<0)if(V)x=0;else return-1;if(typeof v=="string"&&(v=o.from(v,M)),o.isBuffer(v))return v.length===0?-1:D(A,v,x,M,V);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(A,v,x):Uint8Array.prototype.lastIndexOf.call(A,v,x):D(A,[v],x,M,V);throw new TypeError("val must be string, number or Buffer")}function D(A,v,x,M,V){let ee=1,oe=A.length,Fe=v.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(A.length<2||v.length<2)return-1;ee=2,oe/=2,Fe/=2,x/=2}function je(yt,at){return ee===1?yt[at]:yt.readUInt16BE(at*ee)}let it;if(V){let yt=-1;for(it=x;it<oe;it++)if(je(A,it)===je(v,yt===-1?0:it-yt)){if(yt===-1&&(yt=it),it-yt+1===Fe)return yt*ee}else yt!==-1&&(it-=it-yt),yt=-1}else for(x+Fe>oe&&(x=oe-Fe),it=x;it>=0;it--){let yt=!0;for(let at=0;at<Fe;at++)if(je(A,it+at)!==je(v,at)){yt=!1;break}if(yt)return it}return-1}o.prototype.includes=function(v,x,M){return this.indexOf(v,x,M)!==-1},o.prototype.indexOf=function(v,x,M){return B(this,v,x,M,!0)},o.prototype.lastIndexOf=function(v,x,M){return B(this,v,x,M,!1)};function O(A,v,x,M){x=Number(x)||0;const V=A.length-x;M?(M=Number(M),M>V&&(M=V)):M=V;const ee=v.length;M>ee/2&&(M=ee/2);let oe;for(oe=0;oe<M;++oe){const Fe=parseInt(v.substr(oe*2,2),16);if($e(Fe))return oe;A[x+oe]=Fe}return oe}function R(A,v,x,M){return Se(z(v,A.length-x),A,x,M)}function Q(A,v,x,M){return Se(L(v),A,x,M)}function $(A,v,x,M){return Se(Ne(v),A,x,M)}function P(A,v,x,M){return Se(ie(v,A.length-x),A,x,M)}o.prototype.write=function(v,x,M,V){if(x===void 0)V="utf8",M=this.length,x=0;else if(M===void 0&&typeof x=="string")V=x,M=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(M)?(M=M>>>0,V===void 0&&(V="utf8")):(V=M,M=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ee=this.length-x;if((M===void 0||M>ee)&&(M=ee),v.length>0&&(M<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");let oe=!1;for(;;)switch(V){case"hex":return O(this,v,x,M);case"utf8":case"utf-8":return R(this,v,x,M);case"ascii":case"latin1":case"binary":return Q(this,v,x,M);case"base64":return $(this,v,x,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,v,x,M);default:if(oe)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),oe=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(A,v,x){return v===0&&x===A.length?e.fromByteArray(A):e.fromByteArray(A.slice(v,x))}function S(A,v,x){x=Math.min(A.length,x);const M=[];let V=v;for(;V<x;){const ee=A[V];let oe=null,Fe=ee>239?4:ee>223?3:ee>191?2:1;if(V+Fe<=x){let je,it,yt,at;switch(Fe){case 1:ee<128&&(oe=ee);break;case 2:je=A[V+1],(je&192)===128&&(at=(ee&31)<<6|je&63,at>127&&(oe=at));break;case 3:je=A[V+1],it=A[V+2],(je&192)===128&&(it&192)===128&&(at=(ee&15)<<12|(je&63)<<6|it&63,at>2047&&(at<55296||at>57343)&&(oe=at));break;case 4:je=A[V+1],it=A[V+2],yt=A[V+3],(je&192)===128&&(it&192)===128&&(yt&192)===128&&(at=(ee&15)<<18|(je&63)<<12|(it&63)<<6|yt&63,at>65535&&at<1114112&&(oe=at))}}oe===null?(oe=65533,Fe=1):oe>65535&&(oe-=65536,M.push(oe>>>10&1023|55296),oe=56320|oe&1023),M.push(oe),V+=Fe}return ve(M)}const Z=4096;function ve(A){const v=A.length;if(v<=Z)return String.fromCharCode.apply(String,A);let x="",M=0;for(;M<v;)x+=String.fromCharCode.apply(String,A.slice(M,M+=Z));return x}function re(A,v,x){let M="";x=Math.min(A.length,x);for(let V=v;V<x;++V)M+=String.fromCharCode(A[V]&127);return M}function de(A,v,x){let M="";x=Math.min(A.length,x);for(let V=v;V<x;++V)M+=String.fromCharCode(A[V]);return M}function ne(A,v,x){const M=A.length;(!v||v<0)&&(v=0),(!x||x<0||x>M)&&(x=M);let V="";for(let ee=v;ee<x;++ee)V+=G[A[ee]];return V}function Y(A,v,x){const M=A.slice(v,x);let V="";for(let ee=0;ee<M.length-1;ee+=2)V+=String.fromCharCode(M[ee]+M[ee+1]*256);return V}o.prototype.slice=function(v,x){const M=this.length;v=~~v,x=x===void 0?M:~~x,v<0?(v+=M,v<0&&(v=0)):v>M&&(v=M),x<0?(x+=M,x<0&&(x=0)):x>M&&(x=M),x<v&&(x=v);const V=this.subarray(v,x);return Object.setPrototypeOf(V,o.prototype),V};function F(A,v,x){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+v>x)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(v,x,M){v=v>>>0,x=x>>>0,M||F(v,x,this.length);let V=this[v],ee=1,oe=0;for(;++oe<x&&(ee*=256);)V+=this[v+oe]*ee;return V},o.prototype.readUintBE=o.prototype.readUIntBE=function(v,x,M){v=v>>>0,x=x>>>0,M||F(v,x,this.length);let V=this[v+--x],ee=1;for(;x>0&&(ee*=256);)V+=this[v+--x]*ee;return V},o.prototype.readUint8=o.prototype.readUInt8=function(v,x){return v=v>>>0,x||F(v,1,this.length),this[v]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(v,x){return v=v>>>0,x||F(v,2,this.length),this[v]|this[v+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(v,x){return v=v>>>0,x||F(v,2,this.length),this[v]<<8|this[v+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(v,x){return v=v>>>0,x||F(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(v,x){return v=v>>>0,x||F(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},o.prototype.readBigUInt64LE=X(function(v){v=v>>>0,Dt(v,"offset");const x=this[v],M=this[v+7];(x===void 0||M===void 0)&&C(v,this.length-8);const V=x+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,ee=this[++v]+this[++v]*2**8+this[++v]*2**16+M*2**24;return BigInt(V)+(BigInt(ee)<<BigInt(32))}),o.prototype.readBigUInt64BE=X(function(v){v=v>>>0,Dt(v,"offset");const x=this[v],M=this[v+7];(x===void 0||M===void 0)&&C(v,this.length-8);const V=x*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],ee=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+M;return(BigInt(V)<<BigInt(32))+BigInt(ee)}),o.prototype.readIntLE=function(v,x,M){v=v>>>0,x=x>>>0,M||F(v,x,this.length);let V=this[v],ee=1,oe=0;for(;++oe<x&&(ee*=256);)V+=this[v+oe]*ee;return ee*=128,V>=ee&&(V-=Math.pow(2,8*x)),V},o.prototype.readIntBE=function(v,x,M){v=v>>>0,x=x>>>0,M||F(v,x,this.length);let V=x,ee=1,oe=this[v+--V];for(;V>0&&(ee*=256);)oe+=this[v+--V]*ee;return ee*=128,oe>=ee&&(oe-=Math.pow(2,8*x)),oe},o.prototype.readInt8=function(v,x){return v=v>>>0,x||F(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},o.prototype.readInt16LE=function(v,x){v=v>>>0,x||F(v,2,this.length);const M=this[v]|this[v+1]<<8;return M&32768?M|4294901760:M},o.prototype.readInt16BE=function(v,x){v=v>>>0,x||F(v,2,this.length);const M=this[v+1]|this[v]<<8;return M&32768?M|4294901760:M},o.prototype.readInt32LE=function(v,x){return v=v>>>0,x||F(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},o.prototype.readInt32BE=function(v,x){return v=v>>>0,x||F(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},o.prototype.readBigInt64LE=X(function(v){v=v>>>0,Dt(v,"offset");const x=this[v],M=this[v+7];(x===void 0||M===void 0)&&C(v,this.length-8);const V=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(M<<24);return(BigInt(V)<<BigInt(32))+BigInt(x+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)}),o.prototype.readBigInt64BE=X(function(v){v=v>>>0,Dt(v,"offset");const x=this[v],M=this[v+7];(x===void 0||M===void 0)&&C(v,this.length-8);const V=(x<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(V)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+M)}),o.prototype.readFloatLE=function(v,x){return v=v>>>0,x||F(v,4,this.length),t.read(this,v,!0,23,4)},o.prototype.readFloatBE=function(v,x){return v=v>>>0,x||F(v,4,this.length),t.read(this,v,!1,23,4)},o.prototype.readDoubleLE=function(v,x){return v=v>>>0,x||F(v,8,this.length),t.read(this,v,!0,52,8)},o.prototype.readDoubleBE=function(v,x){return v=v>>>0,x||F(v,8,this.length),t.read(this,v,!1,52,8)};function H(A,v,x,M,V,ee){if(!o.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>V||v<ee)throw new RangeError('"value" argument is out of bounds');if(x+M>A.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(v,x,M,V){if(v=+v,x=x>>>0,M=M>>>0,!V){const Fe=Math.pow(2,8*M)-1;H(this,v,x,M,Fe,0)}let ee=1,oe=0;for(this[x]=v&255;++oe<M&&(ee*=256);)this[x+oe]=v/ee&255;return x+M},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(v,x,M,V){if(v=+v,x=x>>>0,M=M>>>0,!V){const Fe=Math.pow(2,8*M)-1;H(this,v,x,M,Fe,0)}let ee=M-1,oe=1;for(this[x+ee]=v&255;--ee>=0&&(oe*=256);)this[x+ee]=v/oe&255;return x+M},o.prototype.writeUint8=o.prototype.writeUInt8=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,1,255,0),this[x]=v&255,x+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,2,65535,0),this[x]=v&255,this[x+1]=v>>>8,x+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,2,65535,0),this[x]=v>>>8,this[x+1]=v&255,x+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,4,4294967295,0),this[x+3]=v>>>24,this[x+2]=v>>>16,this[x+1]=v>>>8,this[x]=v&255,x+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,4,4294967295,0),this[x]=v>>>24,this[x+1]=v>>>16,this[x+2]=v>>>8,this[x+3]=v&255,x+4};function _e(A,v,x,M,V){Tt(v,M,V,A,x,7);let ee=Number(v&BigInt(4294967295));A[x++]=ee,ee=ee>>8,A[x++]=ee,ee=ee>>8,A[x++]=ee,ee=ee>>8,A[x++]=ee;let oe=Number(v>>BigInt(32)&BigInt(4294967295));return A[x++]=oe,oe=oe>>8,A[x++]=oe,oe=oe>>8,A[x++]=oe,oe=oe>>8,A[x++]=oe,x}function we(A,v,x,M,V){Tt(v,M,V,A,x,7);let ee=Number(v&BigInt(4294967295));A[x+7]=ee,ee=ee>>8,A[x+6]=ee,ee=ee>>8,A[x+5]=ee,ee=ee>>8,A[x+4]=ee;let oe=Number(v>>BigInt(32)&BigInt(4294967295));return A[x+3]=oe,oe=oe>>8,A[x+2]=oe,oe=oe>>8,A[x+1]=oe,oe=oe>>8,A[x]=oe,x+8}o.prototype.writeBigUInt64LE=X(function(v,x=0){return _e(this,v,x,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=X(function(v,x=0){return we(this,v,x,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(v,x,M,V){if(v=+v,x=x>>>0,!V){const je=Math.pow(2,8*M-1);H(this,v,x,M,je-1,-je)}let ee=0,oe=1,Fe=0;for(this[x]=v&255;++ee<M&&(oe*=256);)v<0&&Fe===0&&this[x+ee-1]!==0&&(Fe=1),this[x+ee]=(v/oe>>0)-Fe&255;return x+M},o.prototype.writeIntBE=function(v,x,M,V){if(v=+v,x=x>>>0,!V){const je=Math.pow(2,8*M-1);H(this,v,x,M,je-1,-je)}let ee=M-1,oe=1,Fe=0;for(this[x+ee]=v&255;--ee>=0&&(oe*=256);)v<0&&Fe===0&&this[x+ee+1]!==0&&(Fe=1),this[x+ee]=(v/oe>>0)-Fe&255;return x+M},o.prototype.writeInt8=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,1,127,-128),v<0&&(v=255+v+1),this[x]=v&255,x+1},o.prototype.writeInt16LE=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,2,32767,-32768),this[x]=v&255,this[x+1]=v>>>8,x+2},o.prototype.writeInt16BE=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,2,32767,-32768),this[x]=v>>>8,this[x+1]=v&255,x+2},o.prototype.writeInt32LE=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,4,2147483647,-2147483648),this[x]=v&255,this[x+1]=v>>>8,this[x+2]=v>>>16,this[x+3]=v>>>24,x+4},o.prototype.writeInt32BE=function(v,x,M){return v=+v,x=x>>>0,M||H(this,v,x,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[x]=v>>>24,this[x+1]=v>>>16,this[x+2]=v>>>8,this[x+3]=v&255,x+4},o.prototype.writeBigInt64LE=X(function(v,x=0){return _e(this,v,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=X(function(v,x=0){return we(this,v,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ye(A,v,x,M,V,ee){if(x+M>A.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function Ve(A,v,x,M,V){return v=+v,x=x>>>0,V||ye(A,v,x,4),t.write(A,v,x,M,23,4),x+4}o.prototype.writeFloatLE=function(v,x,M){return Ve(this,v,x,!0,M)},o.prototype.writeFloatBE=function(v,x,M){return Ve(this,v,x,!1,M)};function Ke(A,v,x,M,V){return v=+v,x=x>>>0,V||ye(A,v,x,8),t.write(A,v,x,M,52,8),x+8}o.prototype.writeDoubleLE=function(v,x,M){return Ke(this,v,x,!0,M)},o.prototype.writeDoubleBE=function(v,x,M){return Ke(this,v,x,!1,M)},o.prototype.copy=function(v,x,M,V){if(!o.isBuffer(v))throw new TypeError("argument should be a Buffer");if(M||(M=0),!V&&V!==0&&(V=this.length),x>=v.length&&(x=v.length),x||(x=0),V>0&&V<M&&(V=M),V===M||v.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(M<0||M>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),v.length-x<V-M&&(V=v.length-x+M);const ee=V-M;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,M,V):Uint8Array.prototype.set.call(v,this.subarray(M,V),x),ee},o.prototype.fill=function(v,x,M,V){if(typeof v=="string"){if(typeof x=="string"?(V=x,x=0,M=this.length):typeof M=="string"&&(V=M,M=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!o.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(v.length===1){const oe=v.charCodeAt(0);(V==="utf8"&&oe<128||V==="latin1")&&(v=oe)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(x<0||this.length<x||this.length<M)throw new RangeError("Out of range index");if(M<=x)return this;x=x>>>0,M=M===void 0?this.length:M>>>0,v||(v=0);let ee;if(typeof v=="number")for(ee=x;ee<M;++ee)this[ee]=v;else{const oe=o.isBuffer(v)?v:o.from(v,V),Fe=oe.length;if(Fe===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(ee=0;ee<M-x;++ee)this[ee+x]=oe[ee%Fe]}return this};const Ye={};function Xe(A,v,x){Ye[A]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:v.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(A,"]"),this.stack,delete this.name}get code(){return A}set code(V){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:V,writable:!0})}toString(){return"".concat(this.name," [").concat(A,"]: ").concat(this.message)}}}Xe("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?"".concat(A," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Xe("ERR_INVALID_ARG_TYPE",function(A,v){return'The "'.concat(A,'" argument must be of type number. Received type ').concat(typeof v)},TypeError),Xe("ERR_OUT_OF_RANGE",function(A,v,x){let M='The value of "'.concat(A,'" is out of range.'),V=x;return Number.isInteger(x)&&Math.abs(x)>2**32?V=ft(String(x)):typeof x=="bigint"&&(V=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(V=ft(V)),V+="n"),M+=" It must be ".concat(v,". Received ").concat(V),M},RangeError);function ft(A){let v="",x=A.length;const M=A[0]==="-"?1:0;for(;x>=M+4;x-=3)v="_".concat(A.slice(x-3,x)).concat(v);return"".concat(A.slice(0,x)).concat(v)}function ct(A,v,x){Dt(v,"offset"),(A[v]===void 0||A[v+x]===void 0)&&C(v,A.length-(x+1))}function Tt(A,v,x,M,V,ee){if(A>x||A<v){const oe=typeof v=="bigint"?"n":"";let Fe;throw ee>3?v===0||v===BigInt(0)?Fe=">= 0".concat(oe," and < 2").concat(oe," ** ").concat((ee+1)*8).concat(oe):Fe=">= -(2".concat(oe," ** ").concat((ee+1)*8-1).concat(oe,") and < 2 ** ")+"".concat((ee+1)*8-1).concat(oe):Fe=">= ".concat(v).concat(oe," and <= ").concat(x).concat(oe),new Ye.ERR_OUT_OF_RANGE("value",Fe,A)}ct(M,V,ee)}function Dt(A,v){if(typeof A!="number")throw new Ye.ERR_INVALID_ARG_TYPE(v,"number",A)}function C(A,v,x){throw Math.floor(A)!==A?(Dt(A,x),new Ye.ERR_OUT_OF_RANGE(x||"offset","an integer",A)):v<0?new Ye.ERR_BUFFER_OUT_OF_BOUNDS:new Ye.ERR_OUT_OF_RANGE(x||"offset",">= ".concat(x?1:0," and <= ").concat(v),A)}const be=/[^+/0-9A-Za-z-_]/g;function ge(A){if(A=A.split("=")[0],A=A.trim().replace(be,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function z(A,v){v=v||1/0;let x;const M=A.length;let V=null;const ee=[];for(let oe=0;oe<M;++oe){if(x=A.charCodeAt(oe),x>55295&&x<57344){if(!V){if(x>56319){(v-=3)>-1&&ee.push(239,191,189);continue}else if(oe+1===M){(v-=3)>-1&&ee.push(239,191,189);continue}V=x;continue}if(x<56320){(v-=3)>-1&&ee.push(239,191,189),V=x;continue}x=(V-55296<<10|x-56320)+65536}else V&&(v-=3)>-1&&ee.push(239,191,189);if(V=null,x<128){if((v-=1)<0)break;ee.push(x)}else if(x<2048){if((v-=2)<0)break;ee.push(x>>6|192,x&63|128)}else if(x<65536){if((v-=3)<0)break;ee.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((v-=4)<0)break;ee.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return ee}function L(A){const v=[];for(let x=0;x<A.length;++x)v.push(A.charCodeAt(x)&255);return v}function ie(A,v){let x,M,V;const ee=[];for(let oe=0;oe<A.length&&!((v-=2)<0);++oe)x=A.charCodeAt(oe),M=x>>8,V=x%256,ee.push(V),ee.push(M);return ee}function Ne(A){return e.toByteArray(ge(A))}function Se(A,v,x,M){let V;for(V=0;V<M&&!(V+x>=v.length||V>=A.length);++V)v[V+x]=A[V];return V}function ce(A,v){return A instanceof v||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===v.name}function $e(A){return A!==A}const G=function(){const A="0123456789abcdef",v=new Array(256);for(let x=0;x<16;++x){const M=x*16;for(let V=0;V<16;++V)v[M+V]=A[x]+A[V]}return v}();function X(A){return typeof BigInt>"u"?pe:A}function pe(){throw new Error("BigInt not supported")}})(My);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(i,e){var t=My,n=t.Buffer;function r(a,o){for(var l in a)o[l]=a[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?i.exports=t:(r(t,e),e.Buffer=s);function s(a,o,l){return n(a,o,l)}s.prototype=Object.create(n.prototype),r(n,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=n(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(Qm,Qm.exports);var La=Qm.exports,kC=La.Buffer;function rf(i,e){this._block=kC.alloc(i),this._finalSize=e,this._blockSize=i,this._len=0}rf.prototype.update=function(i,e){typeof i=="string"&&(e=e||"utf8",i=kC.from(i,e));for(var t=this._block,n=this._blockSize,r=i.length,s=this._len,a=0;a<r;){for(var o=s%n,l=Math.min(r-a,n-o),c=0;c<l;c++)t[o+c]=i[a+c];s+=l,a+=l,s%n===0&&this._update(t)}return this._len+=r,this};rf.prototype.digest=function(i){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var t=this._len*8;if(t<=4294967295)this._block.writeUInt32BE(t,this._blockSize-4);else{var n=(t&4294967295)>>>0,r=(t-n)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return i?s.toString(i):s};rf.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var il=rf,c6=nl,_C=il,u6=La.Buffer,d6=[1518500249,1859775393,-1894007588,-899497514],h6=new Array(80);function jc(){this.init(),this._w=h6,_C.call(this,64,56)}c6(jc,_C);jc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function f6(i){return i<<5|i>>>27}function p6(i){return i<<30|i>>>2}function m6(i,e,t,n){return i===0?e&t|~e&n:i===2?e&t|e&n|t&n:e^t^n}jc.prototype._update=function(i){for(var e=this._w,t=this._a|0,n=this._b|0,r=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=i.readInt32BE(o*4);for(;o<80;++o)e[o]=e[o-3]^e[o-8]^e[o-14]^e[o-16];for(var l=0;l<80;++l){var c=~~(l/20),u=f6(t)+m6(c,n,r,s)+a+e[l]+d6[c]|0;a=s,s=r,r=p6(n),n=t,t=u}this._a=t+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};jc.prototype._hash=function(){var i=u6.allocUnsafe(20);return i.writeInt32BE(this._a|0,0),i.writeInt32BE(this._b|0,4),i.writeInt32BE(this._c|0,8),i.writeInt32BE(this._d|0,12),i.writeInt32BE(this._e|0,16),i};var g6=jc,y6=nl,RC=il,b6=La.Buffer,v6=[1518500249,1859775393,-1894007588,-899497514],w6=new Array(80);function Uc(){this.init(),this._w=w6,RC.call(this,64,56)}y6(Uc,RC);Uc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function E6(i){return i<<1|i>>>31}function x6(i){return i<<5|i>>>27}function T6(i){return i<<30|i>>>2}function S6(i,e,t,n){return i===0?e&t|~e&n:i===2?e&t|e&n|t&n:e^t^n}Uc.prototype._update=function(i){for(var e=this._w,t=this._a|0,n=this._b|0,r=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=i.readInt32BE(o*4);for(;o<80;++o)e[o]=E6(e[o-3]^e[o-8]^e[o-14]^e[o-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=x6(t)+S6(c,n,r,s)+a+e[l]+v6[c]|0;a=s,s=r,r=T6(n),n=t,t=u}this._a=t+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};Uc.prototype._hash=function(){var i=b6.allocUnsafe(20);return i.writeInt32BE(this._a|0,0),i.writeInt32BE(this._b|0,4),i.writeInt32BE(this._c|0,8),i.writeInt32BE(this._d|0,12),i.writeInt32BE(this._e|0,16),i};var C6=Uc,A6=nl,PC=il,N6=La.Buffer,k6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_6=new Array(64);function zc(){this.init(),this._w=_6,PC.call(this,64,56)}A6(zc,PC);zc.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function R6(i,e,t){return t^i&(e^t)}function P6(i,e,t){return i&e|t&(i|e)}function I6(i){return(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10)}function $6(i){return(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7)}function O6(i){return(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3}function D6(i){return(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10}zc.prototype._update=function(i){for(var e=this._w,t=this._a|0,n=this._b|0,r=this._c|0,s=this._d|0,a=this._e|0,o=this._f|0,l=this._g|0,c=this._h|0,u=0;u<16;++u)e[u]=i.readInt32BE(u*4);for(;u<64;++u)e[u]=D6(e[u-2])+e[u-7]+O6(e[u-15])+e[u-16]|0;for(var d=0;d<64;++d){var h=c+$6(a)+R6(a,o,l)+k6[d]+e[d]|0,f=I6(t)+P6(t,n,r)|0;c=l,l=o,o=a,a=s+h|0,s=r,r=n,n=t,t=h+f|0}this._a=t+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=o+this._f|0,this._g=l+this._g|0,this._h=c+this._h|0};zc.prototype._hash=function(){var i=N6.allocUnsafe(32);return i.writeInt32BE(this._a,0),i.writeInt32BE(this._b,4),i.writeInt32BE(this._c,8),i.writeInt32BE(this._d,12),i.writeInt32BE(this._e,16),i.writeInt32BE(this._f,20),i.writeInt32BE(this._g,24),i.writeInt32BE(this._h,28),i};var IC=zc,M6=nl,L6=IC,B6=il,q6=La.Buffer,F6=new Array(64);function sf(){this.init(),this._w=F6,B6.call(this,64,56)}M6(sf,L6);sf.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};sf.prototype._hash=function(){var i=q6.allocUnsafe(28);return i.writeInt32BE(this._a,0),i.writeInt32BE(this._b,4),i.writeInt32BE(this._c,8),i.writeInt32BE(this._d,12),i.writeInt32BE(this._e,16),i.writeInt32BE(this._f,20),i.writeInt32BE(this._g,24),i};var j6=sf,U6=nl,$C=il,z6=La.Buffer,Pw=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],V6=new Array(160);function Vc(){this.init(),this._w=V6,$C.call(this,128,112)}U6(Vc,$C);Vc.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Iw(i,e,t){return t^i&(e^t)}function $w(i,e,t){return i&e|t&(i|e)}function Ow(i,e){return(i>>>28|e<<4)^(e>>>2|i<<30)^(e>>>7|i<<25)}function Dw(i,e){return(i>>>14|e<<18)^(i>>>18|e<<14)^(e>>>9|i<<23)}function W6(i,e){return(i>>>1|e<<31)^(i>>>8|e<<24)^i>>>7}function H6(i,e){return(i>>>1|e<<31)^(i>>>8|e<<24)^(i>>>7|e<<25)}function Q6(i,e){return(i>>>19|e<<13)^(e>>>29|i<<3)^i>>>6}function G6(i,e){return(i>>>19|e<<13)^(e>>>29|i<<3)^(i>>>6|e<<26)}function vn(i,e){return i>>>0<e>>>0?1:0}Vc.prototype._update=function(i){for(var e=this._w,t=this._ah|0,n=this._bh|0,r=this._ch|0,s=this._dh|0,a=this._eh|0,o=this._fh|0,l=this._gh|0,c=this._hh|0,u=this._al|0,d=this._bl|0,h=this._cl|0,f=this._dl|0,m=this._el|0,p=this._fl|0,w=this._gl|0,y=this._hl|0,b=0;b<32;b+=2)e[b]=i.readInt32BE(b*4),e[b+1]=i.readInt32BE(b*4+4);for(;b<160;b+=2){var E=e[b-30],_=e[b-15*2+1],k=W6(E,_),B=H6(_,E);E=e[b-2*2],_=e[b-2*2+1];var D=Q6(E,_),O=G6(_,E),R=e[b-7*2],Q=e[b-7*2+1],$=e[b-16*2],P=e[b-16*2+1],q=B+Q|0,S=k+R+vn(q,B)|0;q=q+O|0,S=S+D+vn(q,O)|0,q=q+P|0,S=S+$+vn(q,P)|0,e[b]=S,e[b+1]=q}for(var Z=0;Z<160;Z+=2){S=e[Z],q=e[Z+1];var ve=$w(t,n,r),re=$w(u,d,h),de=Ow(t,u),ne=Ow(u,t),Y=Dw(a,m),F=Dw(m,a),H=Pw[Z],_e=Pw[Z+1],we=Iw(a,o,l),ye=Iw(m,p,w),Ve=y+F|0,Ke=c+Y+vn(Ve,y)|0;Ve=Ve+ye|0,Ke=Ke+we+vn(Ve,ye)|0,Ve=Ve+_e|0,Ke=Ke+H+vn(Ve,_e)|0,Ve=Ve+q|0,Ke=Ke+S+vn(Ve,q)|0;var Ye=ne+re|0,Xe=de+ve+vn(Ye,ne)|0;c=l,y=w,l=o,w=p,o=a,p=m,m=f+Ve|0,a=s+Ke+vn(m,f)|0,s=r,f=h,r=n,h=d,n=t,d=u,u=Ve+Ye|0,t=Ke+Xe+vn(u,Ve)|0}this._al=this._al+u|0,this._bl=this._bl+d|0,this._cl=this._cl+h|0,this._dl=this._dl+f|0,this._el=this._el+m|0,this._fl=this._fl+p|0,this._gl=this._gl+w|0,this._hl=this._hl+y|0,this._ah=this._ah+t+vn(this._al,u)|0,this._bh=this._bh+n+vn(this._bl,d)|0,this._ch=this._ch+r+vn(this._cl,h)|0,this._dh=this._dh+s+vn(this._dl,f)|0,this._eh=this._eh+a+vn(this._el,m)|0,this._fh=this._fh+o+vn(this._fl,p)|0,this._gh=this._gh+l+vn(this._gl,w)|0,this._hh=this._hh+c+vn(this._hl,y)|0};Vc.prototype._hash=function(){var i=z6.allocUnsafe(64);function e(t,n,r){i.writeInt32BE(t,r),i.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),i};var OC=Vc,K6=nl,Y6=OC,J6=il,X6=La.Buffer,Z6=new Array(160);function af(){this.init(),this._w=Z6,J6.call(this,128,112)}K6(af,Y6);af.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};af.prototype._hash=function(){var i=X6.allocUnsafe(48);function e(t,n,r){i.writeInt32BE(t,r),i.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),i};var eF=af,Ba=AC.exports=function(e){e=e.toLowerCase();var t=Ba[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};Ba.sha=g6;Ba.sha1=C6;Ba.sha224=j6;Ba.sha256=IC;Ba.sha384=eF;Ba.sha512=OC;var tF=AC.exports;const nF=Ra(tF);function vp(i,e=!1){return e&&(i=" "+i),i.replace(/^([A-Z])|[\s-_](\w)/g,function(t,n,r){return r?r.toUpperCase():n.toLowerCase()})}function Mw(i){return i.replace(/([A-Z])([A-Z])([a-z])/g,"$1_$2$3").replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase()}function iF(i){return i.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}function DC(i,e={}){const{segmentLength:t=4,separator:n="__",termLength:r=2}=e;return i.split(n).reduce((o,l)=>{const c=l.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),u=c.length>1?r:t,d=c.map(h=>h.substr(0,u)).join("");return o.push(d),o},[]).join(n)}function rF(i,e={}){const t=nF("sha1");t.update(i,"utf8");const n=t.digest("hex");return e.length?n.slice(0,e.length):n}class sF{constructor(){this.nestedSetColumnNames={left:"nsleft",right:"nsright"},this.materializedPathColumnName="mpath"}getTableName(e){return typeof e!="string"&&(e=e.name),e.split(".").pop()}tableName(e,t){return t||Mw(e)}closureJunctionTableName(e){return e+"_closure"}columnName(e,t,n){const r=t||e;return n.length?vp(n.join("_"))+iF(r):r}relationName(e){return e}primaryKeyName(e,t){const n=[...t];n.sort();const s=this.getTableName(e).replace(".","_"),a="".concat(s,"_").concat(n.join("_"));return"PK_"+ps.sha1(a).substr(0,27)}uniqueConstraintName(e,t){const n=[...t];n.sort();const s=this.getTableName(e).replace(".","_"),a="".concat(s,"_").concat(n.join("_"));return"UQ_"+ps.sha1(a).substr(0,27)}relationConstraintName(e,t,n){const r=[...t];r.sort();const a=this.getTableName(e).replace(".","_");let o="".concat(a,"_").concat(r.join("_"));return n&&(o+="_".concat(n)),"REL_"+ps.sha1(o).substr(0,26)}defaultConstraintName(e,t){const r=this.getTableName(e).replace(".","_"),s="".concat(r,"_").concat(t);return"DF_"+ps.sha1(s).substr(0,27)}foreignKeyName(e,t,n,r){const s=[...t];s.sort();const o=this.getTableName(e).replace(".","_"),l="".concat(o,"_").concat(s.join("_"));return"FK_"+ps.sha1(l).substr(0,27)}indexName(e,t,n){const r=[...t];r.sort();const a=this.getTableName(e).replace(".","_");let o="".concat(a,"_").concat(r.join("_"));return n&&(o+="_".concat(n)),"IDX_"+ps.sha1(o).substr(0,26)}checkConstraintName(e,t,n){const s=this.getTableName(e).replace(".","_"),a="".concat(s,"_").concat(t),o="CHK_"+ps.sha1(a).substr(0,26);return n?"".concat(o,"_ENUM"):o}exclusionConstraintName(e,t){const r=this.getTableName(e).replace(".","_"),s="".concat(r,"_").concat(t);return"XCL_"+ps.sha1(s).substr(0,26)}joinColumnName(e,t){return vp(e+"_"+t)}joinTableName(e,t,n,r){return Mw(e+"_"+n.replace(/\./gi,"_")+"_"+t)}joinTableColumnDuplicationPrefix(e,t){return e+"_"+t}joinTableColumnName(e,t,n){return vp(e+"_"+(n||t))}joinTableInverseColumnName(e,t,n){return this.joinTableColumnName(e,t,n)}prefixTableName(e,t){return e+t}eagerJoinRelationAlias(e,t){return e+"_"+t.replace(".","_")}}class te extends Error{get name(){return this.constructor.name}constructor(e){super(e),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class Ru extends te{constructor(e){super("Internal error. Subject ".concat(e.metadata.targetName," must have an identifier to perform operation."))}}class aF extends te{constructor(e){super('Cannot create a "'.concat(e,'" connection because connection to the database already established.'))}}class Za extends te{constructor(){super("Locking not supported on given driver.")}}class oF extends te{constructor(e,t){super();const n=e.primaryColumns.reduce((r,s,a)=>(s.setEntityValue(r,a+1),r),{});this.message='Cannot use given entity id "'.concat(t,'" because "').concat(e.targetName,'" contains multiple primary columns, you must provide object in following form: ').concat(JSON.stringify(n)," as an id.")}}class lF extends te{constructor(e){super("Cannot ".concat(e,", given value must be instance of entity class, ")+"instead object literal is given. Or you must specify an entity target to method call.")}}class cF extends te{constructor(e){super("Tree repositories are not supported in ".concat(e.options.type," driver."))}}class MC extends te{constructor(e){super("Custom repository ".concat(typeof e=="function"?e.name:e.constructor.name," was not found. ")+"Did you forgot to put @EntityRepository decorator on it?")}}class zi extends te{constructor(){super("Transaction is not started yet, start transaction before committing or rolling it back.")}}class uF extends te{constructor(){super("Transaction already started for the given connection, commit current transaction before starting a new one.")}}class ht{static isObject(e){return e!==null&&typeof e=="object"}static isObjectWithName(e){return e!==null&&typeof e=="object"&&e.name!==void 0}static assign(e,...t){for(const n of t)for(const r of Object.getOwnPropertyNames(n))e[r]=n[r]}static mixedListToArray(e){return e!==null&&typeof e=="object"?Object.keys(e).map(t=>e[t]):e}}class ue{static isMssqlParameter(e){return this.check(e,"MssqlParameter")}static isEntityMetadata(e){return this.check(e,"EntityMetadata")}static isColumnMetadata(e){return this.check(e,"ColumnMetadata")}static isSelectQueryBuilder(e){return this.check(e,"SelectQueryBuilder")}static isInsertQueryBuilder(e){return this.check(e,"InsertQueryBuilder")}static isDeleteQueryBuilder(e){return this.check(e,"DeleteQueryBuilder")}static isUpdateQueryBuilder(e){return this.check(e,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(e){return this.check(e,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(e){return this.check(e,"RelationQueryBuilder")}static isBrackets(e){return this.check(e,"Brackets")||this.check(e,"NotBrackets")}static isNotBrackets(e){return this.check(e,"NotBrackets")}static isSubject(e){return this.check(e,"Subject")}static isRdbmsSchemaBuilder(e){return this.check(e,"RdbmsSchemaBuilder")}static isMongoEntityManager(e){return this.check(e,"MongoEntityManager")}static isSqljsEntityManager(e){return this.check(e,"SqljsEntityManager")}static isEntitySchema(e){return this.check(e,"EntitySchema")}static isBaseEntityConstructor(e){return typeof e=="function"&&typeof e.hasId=="function"&&typeof e.save=="function"&&typeof e.useDataSource=="function"}static isFindOperator(e){return this.check(e,"FindOperator")||this.check(e,"EqualOperator")}static isEqualOperator(e){return this.check(e,"EqualOperator")}static isQuery(e){return this.check(e,"Query")}static isTable(e){return this.check(e,"Table")}static isTableCheck(e){return this.check(e,"TableCheck")}static isTableColumn(e){return this.check(e,"TableColumn")}static isTableExclusion(e){return this.check(e,"TableExclusion")}static isTableForeignKey(e){return this.check(e,"TableForeignKey")}static isTableIndex(e){return this.check(e,"TableIndex")}static isTableUnique(e){return this.check(e,"TableUnique")}static isView(e){return this.check(e,"View")}static isDataSource(e){return this.check(e,"DataSource")}static check(e,t){return typeof e=="object"&&e!==null&&e["@instanceof"]===Symbol.for(t)}}class Gm extends te{constructor(e,t){super(),this.message='Could not find any entity of type "'.concat(this.stringifyTarget(e),'" ')+"matching: ".concat(this.stringifyCriteria(t))}stringifyTarget(e){return ue.isEntitySchema(e)?e.options.name:typeof e=="function"||ht.isObject(e)&&"name"in e?e.name:e}stringifyCriteria(e){try{return JSON.stringify(e,null,4)}catch(t){}return""+e}}class dF extends te{constructor(e){super(),this.message='No metadata for "'.concat(this.stringifyTarget(e),'" was found.')}stringifyTarget(e){return ue.isEntitySchema(e)?e.options.name:typeof e=="function"||ht.isObject(e)&&"name"in e?e.name:e}}class hF extends te{constructor(e,t){super("Cannot ".concat(e,', given value must be an entity, instead "').concat(t,'" is given.'))}}class Lw extends te{constructor(e,t,n){super("The optimistic lock on entity ".concat(e," failed, version ").concat(t," was expected, but is actually ").concat(n,"."))}}class fF extends te{constructor(e,t){super("Primary column ".concat(e.constructor.name,"#").concat(t," cannot be nullable. ")+"Its not allowed for primary keys. Try to remove nullable option.")}}class pF extends te{constructor(e){super("Custom entity repository ".concat(typeof e=="function"?e.name:e.constructor.name," ")+" cannot inherit Repository class without entity being set in the @EntityRepository decorator.")}}class LC extends te{constructor(){super("Database connection provided by a query runner was already released, cannot continue to use its querying methods anymore.")}}class Bw extends te{constructor(e){super('Cannot attach entity "'.concat(e,'" to its parent. Please make sure parent ')+"is saved in the database before saving children nodes.")}}class wp extends te{constructor(e){super("Custom repository ".concat(typeof e=="function"?e.name:e.constructor.name," does not have managed entity. ")+"Did you forget to specify entity for it @EntityRepository(MyEntity)? ")}}class mF extends te{constructor(e){super("Circular relations detected: ".concat(e,". To resolve this issue you need to ")+"set nullable: true somewhere in this dependency structure.")}}class gF extends te{constructor(e){super('Entity "'.concat(e.name,'" does not have a primary column. Primary column is required to ')+"have in all your entities. Use @PrimaryColumn decorator to add a primary column to your entity.")}}class Tr extends te{constructor(e,t){super(e),Object.setPrototypeOf(this,Tr.prototype),this.message='Property "'.concat(e,'" was not found in "').concat(t.targetName,'". Make sure your query is correct.')}}class yF extends te{constructor(e,t=[]){super('Wrong driver: "'.concat(e,'" given. Supported drivers are: ')+"".concat(t.map(n=>'"'.concat(n,'"')).join(", "),"."))}}class rl extends te{constructor(e,t){super("".concat(e," package has not been found installed. ")+"Try to install it: npm install ".concat(t," --save"))}}class bF extends te{constructor(e){super("Entity ".concat(e," does not have version or update date columns."))}}class Nl extends te{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class vF extends te{constructor(e){super("Driver option (".concat(e,") is not set. ")+"Please set it to perform connection to the database.")}}class wF extends te{constructor(e){super(),e.length===1?this.message='Relation "'.concat(e[0],'" was not found; please check if it is correct and really exists in your entity.'):this.message="Relations ".concat(e.map(t=>'"'.concat(t,'"')).join(", ")," were not found; please check if relations are correct and they exist in your entities.")}}class EF extends te{constructor(){super("An open transaction is required for pessimistic lock.")}}class xF extends te{constructor(e,t,n){super();const r=typeof t=="string"?t:t.name;this.message='Data type "'.concat(r,'" in "').concat(e.entityMetadata.targetName,".").concat(e.propertyName,'" is not supported by "').concat(n,'" database.')}}class TF extends te{constructor(e){super("Array initializations are not allowed in entity relations. "+'Please remove array initialization (= []) from "'.concat(e.entityMetadata.targetName,"#").concat(e.propertyPath,'". ')+"This is ORM requirement to make relations to work properly. Refer docs for more information.")}}class kr extends te{constructor(e,t,n){if(super(n.toString().replace(/^error: /,"").replace(/^Error: /,"").replace(/^Request/,"")),this.query=e,this.parameters=t,this.driverError=n,n){const{name:r,...s}=n;ht.assign(this,{...s})}}}class SF extends te{constructor(){super("Entity manager is not using single database connection and cannot be released. Only entity managers created by connection#createEntityManagerWithSingleDatabaseConnection methods have a single database connection and they should be released.")}}class CF extends te{constructor(e){super('Removed entity "'.concat(e.metadata.name,'" is also scheduled for update operation. ')+"Make sure you are not updating and removing same object (note that update or remove may be executed by cascade operations).")}}class BC extends te{constructor(e,t){super("Column type for ".concat(e.constructor.name,"#").concat(t," is not defined and cannot be guessed. ")+'Make sure you have turned on an "emitDecoratorMetadata": true option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application (before any entity imported).If you are using JavaScript instead of TypeScript you must explicitly provide a column type.')}}class Gn extends te{constructor(){super("Query runner already released. Cannot run queries anymore.")}}class AF extends te{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class kl extends te{constructor(e){super('Cannot execute operation on "'.concat(e,'" connection because connection is not yet established.'))}}class NF extends te{constructor(e){super('Option "'.concat(e,'" is not set in your connection options, please ')+'define "'.concat(e,'" option in your connection options or ormconfig.json'))}}class kF extends te{constructor(e){const t=e.map(n=>'"'.concat(n.name,'"'));super("Migrations ".concat(t.join(", "),' override the transaction mode, but the global transaction mode is "all"'))}}class ii{constructor(e){this["@instanceof"]=Symbol.for("TableColumn"),this.isNullable=!1,this.isGenerated=!1,this.isPrimary=!1,this.isUnique=!1,this.isArray=!1,this.length="",this.zerofill=!1,this.unsigned=!1,e&&(this.name=e.name,this.type=e.type||"",this.length=e.length||"",this.width=e.width,this.charset=e.charset,this.collation=e.collation,this.precision=e.precision,this.scale=e.scale,this.zerofill=e.zerofill||!1,this.unsigned=this.zerofill?!0:e.unsigned||!1,this.default=e.default,this.onUpdate=e.onUpdate,this.isNullable=e.isNullable||!1,this.isGenerated=e.isGenerated||!1,this.generationStrategy=e.generationStrategy,this.generatedIdentity=e.generatedIdentity,this.isPrimary=e.isPrimary||!1,this.isUnique=e.isUnique||!1,this.isArray=e.isArray||!1,this.comment=e.comment,this.enum=e.enum,this.enumName=e.enumName,this.primaryKeyConstraintName=e.primaryKeyConstraintName,this.asExpression=e.asExpression,this.generatedType=e.generatedType,this.spatialFeatureType=e.spatialFeatureType,this.srid=e.srid)}clone(){return new ii({name:this.name,type:this.type,length:this.length,width:this.width,charset:this.charset,collation:this.collation,precision:this.precision,scale:this.scale,zerofill:this.zerofill,unsigned:this.unsigned,enum:this.enum,enumName:this.enumName,primaryKeyConstraintName:this.primaryKeyConstraintName,asExpression:this.asExpression,generatedType:this.generatedType,default:this.default,onUpdate:this.onUpdate,isNullable:this.isNullable,isGenerated:this.isGenerated,generationStrategy:this.generationStrategy,generatedIdentity:this.generatedIdentity,isPrimary:this.isPrimary,isUnique:this.isUnique,isArray:this.isArray,comment:this.comment,spatialFeatureType:this.spatialFeatureType,srid:this.srid})}}class rn{constructor(e){this["@instanceof"]=Symbol.for("TableIndex"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.isUnique=!!e.isUnique,this.isSpatial=!!e.isSpatial,this.isFulltext=!!e.isFulltext,this.isNullFiltered=!!e.isNullFiltered,this.parser=e.parser,this.where=e.where?e.where:""}clone(){return new rn({name:this.name,columnNames:[...this.columnNames],isUnique:this.isUnique,isSpatial:this.isSpatial,isFulltext:this.isFulltext,isNullFiltered:this.isNullFiltered,parser:this.parser,where:this.where})}static create(e){return new rn({name:e.name,columnNames:e.columns.map(t=>t.databaseName),isUnique:e.isUnique,isSpatial:e.isSpatial,isFulltext:e.isFulltext,isNullFiltered:e.isNullFiltered,parser:e.parser,where:e.where})}}class Fi{constructor(e){this["@instanceof"]=Symbol.for("TableForeignKey"),this.columnNames=[],this.referencedColumnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.referencedColumnNames=e.referencedColumnNames,this.referencedDatabase=e.referencedDatabase,this.referencedSchema=e.referencedSchema,this.referencedTableName=e.referencedTableName,this.onDelete=e.onDelete,this.onUpdate=e.onUpdate,this.deferrable=e.deferrable}clone(){return new Fi({name:this.name,columnNames:[...this.columnNames],referencedColumnNames:[...this.referencedColumnNames],referencedDatabase:this.referencedDatabase,referencedSchema:this.referencedSchema,referencedTableName:this.referencedTableName,onDelete:this.onDelete,onUpdate:this.onUpdate,deferrable:this.deferrable})}static create(e,t){return new Fi({name:e.name,columnNames:e.columnNames,referencedColumnNames:e.referencedColumnNames,referencedDatabase:e.referencedEntityMetadata.database,referencedSchema:e.referencedEntityMetadata.schema,referencedTableName:e.referencedTablePath,onDelete:e.onDelete,onUpdate:e.onUpdate,deferrable:e.deferrable})}}class td{static createTableColumnOptions(e,t){return{name:e.databaseName,length:t.getColumnLength(e),width:e.width,charset:e.charset,collation:e.collation,precision:e.precision,scale:e.scale,zerofill:e.zerofill,unsigned:e.unsigned,asExpression:e.asExpression,generatedType:e.generatedType,default:t.normalizeDefault(e),onUpdate:e.onUpdate,comment:e.comment,isGenerated:e.isGenerated,generationStrategy:e.generationStrategy,generatedIdentity:e.generatedIdentity,isNullable:e.isNullable,type:t.normalizeType(e),isPrimary:e.isPrimary,isUnique:t.normalizeIsUnique(e),isArray:e.isArray||!1,enum:e.enum?e.enum.map(n=>n+""):e.enum,enumName:e.enumName,primaryKeyConstraintName:e.primaryKeyConstraintName,spatialFeatureType:e.spatialFeatureType,srid:e.srid}}}class Un{constructor(e){this["@instanceof"]=Symbol.for("TableUnique"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.deferrable=e.deferrable}clone(){return new Un({name:this.name,columnNames:[...this.columnNames],deferrable:this.deferrable})}static create(e){return new Un({name:e.name,columnNames:e.columns.map(t=>t.databaseName),deferrable:e.deferrable})}}class cr{constructor(e){this["@instanceof"]=Symbol.for("TableCheck"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.expression=e.expression}clone(){return new cr({name:this.name,columnNames:this.columnNames?[...this.columnNames]:[],expression:this.expression})}static create(e){return new cr({name:e.name,expression:e.expression})}}class _a{constructor(e){this["@instanceof"]=Symbol.for("TableExclusion"),this.name=e.name,this.expression=e.expression}clone(){return new _a({name:this.name,expression:this.expression})}static create(e){return new _a({name:e.name,expression:e.expression})}}class Ht{constructor(e){this["@instanceof"]=Symbol.for("Table"),this.columns=[],this.indices=[],this.foreignKeys=[],this.uniques=[],this.checks=[],this.exclusions=[],this.justCreated=!1,this.withoutRowid=!1,e&&(this.database=e.database,this.schema=e.schema,this.name=e.name,e.columns&&(this.columns=e.columns.map(t=>new ii(t))),e.indices&&(this.indices=e.indices.map(t=>new rn(t))),e.foreignKeys&&(this.foreignKeys=e.foreignKeys.map(t=>new Fi({...t,referencedDatabase:(t==null?void 0:t.referencedDatabase)||e.database,referencedSchema:(t==null?void 0:t.referencedSchema)||e.schema}))),e.uniques&&(this.uniques=e.uniques.map(t=>new Un(t))),e.checks&&(this.checks=e.checks.map(t=>new cr(t))),e.exclusions&&(this.exclusions=e.exclusions.map(t=>new _a(t))),e.justCreated!==void 0&&(this.justCreated=e.justCreated),e.withoutRowid&&(this.withoutRowid=e.withoutRowid),this.engine=e.engine)}get primaryColumns(){return this.columns.filter(e=>e.isPrimary)}clone(){return new Ht({schema:this.schema,database:this.database,name:this.name,columns:this.columns.map(e=>e.clone()),indices:this.indices.map(e=>e.clone()),foreignKeys:this.foreignKeys.map(e=>e.clone()),uniques:this.uniques.map(e=>e.clone()),checks:this.checks.map(e=>e.clone()),exclusions:this.exclusions.map(e=>e.clone()),justCreated:this.justCreated,withoutRowid:this.withoutRowid,engine:this.engine})}addColumn(e){this.columns.push(e)}removeColumn(e){const t=this.columns.find(n=>n.name===e.name);t&&this.columns.splice(this.columns.indexOf(t),1)}addUniqueConstraint(e){if(this.uniques.push(e),e.columnNames.length===1){const t=this.columns.find(n=>n.name===e.columnNames[0]);t&&(t.isUnique=!0)}}removeUniqueConstraint(e){const t=this.uniques.find(n=>n.name===e.name);if(t&&(this.uniques.splice(this.uniques.indexOf(t),1),t.columnNames.length===1)){const n=this.columns.find(r=>r.name===t.columnNames[0]);n&&(n.isUnique=!1)}}addCheckConstraint(e){this.checks.push(e)}removeCheckConstraint(e){const t=this.checks.find(n=>n.name===e.name);t&&this.checks.splice(this.checks.indexOf(t),1)}addExclusionConstraint(e){this.exclusions.push(e)}removeExclusionConstraint(e){const t=this.exclusions.find(n=>n.name===e.name);t&&this.exclusions.splice(this.exclusions.indexOf(t),1)}addForeignKey(e){this.foreignKeys.push(e)}removeForeignKey(e){const t=this.foreignKeys.find(n=>n.name===e.name);t&&this.foreignKeys.splice(this.foreignKeys.indexOf(t),1)}addIndex(e,t=!1){if(this.indices.push(e),e.columnNames.length===1&&e.isUnique&&t){const n=this.columns.find(r=>r.name===e.columnNames[0]);n&&(n.isUnique=!0)}}removeIndex(e,t=!1){const n=this.indices.find(r=>r.name===e.name);if(n&&(this.indices.splice(this.indices.indexOf(n),1),n.columnNames.length===1&&n.isUnique&&t)){const r=this.columns.find(s=>s.name===n.columnNames[0]);r&&(r.isUnique=this.indices.some(s=>s.columnNames.length===1&&s.columnNames[0]===r.name&&!!n.isUnique))}}findColumnByName(e){return this.columns.find(t=>t.name===e)}findColumnIndices(e){return this.indices.filter(t=>!!t.columnNames.find(n=>n===e.name))}findColumnForeignKeys(e){return this.foreignKeys.filter(t=>!!t.columnNames.find(n=>n===e.name))}findColumnUniques(e){return this.uniques.filter(t=>!!t.columnNames.find(n=>n===e.name))}findColumnChecks(e){return this.checks.filter(t=>!!t.columnNames.find(n=>n===e.name))}static create(e,t){const n=e.database===t.database?void 0:e.database,r=e.schema===t.options.schema?void 0:e.schema,s={database:e.database,schema:e.schema,name:t.buildTableName(e.tableName,r,n),withoutRowid:e.withoutRowid,engine:e.engine,columns:e.columns.filter(a=>a&&!a.isVirtualProperty).map(a=>td.createTableColumnOptions(a,t)),indices:e.indices.filter(a=>a.synchronize===!0).map(a=>rn.create(a)),uniques:e.uniques.map(a=>Un.create(a)),checks:e.checks.map(a=>cr.create(a)),exclusions:e.exclusions.map(a=>_a.create(a))};return new Ht(s)}}class qw{constructor(e,t,n,r,s){this.id=e,this.timestamp=t,this.name=n,this.instance=r,this.transaction=s}}class Yi{constructor(e,t,...n){this.value=e,this.type=t,this["@instanceof"]=Symbol.for("MssqlParameter"),this.params=[],this.params=n||[]}}class Ep{constructor(e,t){this.connection=e,this.queryRunner=t,this.transaction="all";const{schema:n}=this.connection.driver.options,r=this.connection.driver.database;this.migrationsDatabase=r,this.migrationsSchema=n,this.migrationsTableName=e.options.migrationsTableName||"migrations",this.migrationsTable=this.connection.driver.buildTableName(this.migrationsTableName,n,r)}async executeMigration(e){return this.withQueryRunner(async t=>{await this.createMigrationsTableIfNotExist(t);const n=this.connection.driver.createSchemaBuilder();return ue.isRdbmsSchemaBuilder(n)&&await n.createMetadataTableIfNecessary(t),await t.beforeMigration(),await e.instance.up(t),await t.afterMigration(),await this.insertExecutedMigration(t,e),e})}async getAllMigrations(){return Promise.resolve(this.getMigrations())}async getExecutedMigrations(){return this.withQueryRunner(async e=>(await this.createMigrationsTableIfNotExist(e),await this.loadExecutedMigrations(e)))}async getPendingMigrations(){const e=await this.getAllMigrations(),t=await this.getExecutedMigrations();return e.filter(n=>!t.find(r=>r.name===n.name))}insertMigration(e){return this.withQueryRunner(t=>this.insertExecutedMigration(t,e))}deleteMigration(e){return this.withQueryRunner(t=>this.deleteExecutedMigration(t,e))}async showMigrations(){let e=!1;const t=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(t);const n=await this.loadExecutedMigrations(t),r=this.getMigrations();for(const s of r){const a=n.find(o=>o.name===s.name);a?this.connection.logger.logSchemaBuild("[X] ".concat(a.id," ").concat(s.name)):(e=!0,this.connection.logger.logSchemaBuild("[ ] ".concat(s.name)))}return this.queryRunner||await t.release(),e}async executePendingMigrations(){const e=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(e);const t=this.connection.driver.createSchemaBuilder();ue.isRdbmsSchemaBuilder(t)&&await t.createMetadataTableIfNecessary(e);const n=await this.loadExecutedMigrations(e);let r=this.getLatestTimestampMigration(n);const s=this.getMigrations(),a=[],o=s.filter(u=>!n.find(h=>h.name===u.name));if(!o.length)return this.connection.logger.logSchemaBuild("No migrations are pending"),this.queryRunner||await e.release(),[];if(this.connection.logger.logSchemaBuild("".concat(n.length," migrations are already loaded in the database.")),this.connection.logger.logSchemaBuild("".concat(s.length," migrations were found in the source code.")),r&&this.connection.logger.logSchemaBuild("".concat(r.name," is the last executed migration. It was executed on ").concat(new Date(r.timestamp).toString(),".")),this.connection.logger.logSchemaBuild("".concat(o.length," migrations are new migrations must be executed.")),this.transaction==="all"){const u=o.filter(d=>{var h;return((h=d.instance)===null||h===void 0?void 0:h.transaction)!==void 0});if(u.length>0){const d=new kF(u);throw this.connection.logger.logMigration("Migrations failed, error: ".concat(d.message)),d}}const l={each:!0,none:!1,all:!1}[this.transaction];for(const u of o)if(u.instance){const d=u.instance.transaction;d===void 0?u.transaction=l:u.transaction=d}let c=!1;this.transaction==="all"&&!e.isTransactionActive&&(await e.beforeMigration(),await e.startTransaction(),c=!0);try{for(const u of o){if(this.fake){await this.insertExecutedMigration(e,u);continue}u.transaction&&!e.isTransactionActive&&(await e.beforeMigration(),await e.startTransaction(),c=!0),await u.instance.up(e).catch(d=>{throw this.connection.logger.logMigration('Migration "'.concat(u.name,'" failed, error: ').concat(d==null?void 0:d.message)),d}).then(async()=>{await this.insertExecutedMigration(e,u),u.transaction&&c&&(await e.commitTransaction(),await e.afterMigration())}).then(()=>{a.push(u),this.connection.logger.logSchemaBuild("Migration ".concat(u.name," has been ").concat(this.fake?"(fake)":""," executed successfully."))})}this.transaction==="all"&&c&&(await e.commitTransaction(),await e.afterMigration())}catch(u){if(c)try{await e.rollbackTransaction()}catch(d){}throw u}finally{this.queryRunner||await e.release()}return a}async undoLastMigration(){const e=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(e);const t=this.connection.driver.createSchemaBuilder();ue.isRdbmsSchemaBuilder(t)&&await t.createMetadataTableIfNecessary(e);const n=await this.loadExecutedMigrations(e);let r=this.getLatestExecutedMigration(n);if(!r){this.connection.logger.logSchemaBuild("No migrations were found in the database. Nothing to revert!");return}const a=this.getMigrations().find(l=>l.name===r.name);if(!a)throw new te("No migration ".concat(r.name," was found in the source code. Make sure you have this migration in your codebase and its included in the connection options."));this.connection.logger.logSchemaBuild("".concat(n.length," migrations are already loaded in the database.")),this.connection.logger.logSchemaBuild("".concat(r.name," is the last executed migration. It was executed on ").concat(new Date(r.timestamp).toString(),".")),this.connection.logger.logSchemaBuild("Now reverting it...");let o=!1;this.transaction!=="none"&&!e.isTransactionActive&&(await e.startTransaction(),o=!0);try{this.fake||(await e.beforeMigration(),await a.instance.down(e),await e.afterMigration()),await this.deleteExecutedMigration(e,a),this.connection.logger.logSchemaBuild("Migration ".concat(a.name," has been ").concat(this.fake?"(fake)":""," reverted successfully.")),o&&await e.commitTransaction()}catch(l){if(o)try{await e.rollbackTransaction()}catch(c){}throw l}finally{this.queryRunner||await e.release()}}async createMigrationsTableIfNotExist(e){if(this.connection.driver.options.type==="mongodb")return;await e.hasTable(this.migrationsTable)||await e.createTable(new Ht({database:this.migrationsDatabase,schema:this.migrationsSchema,name:this.migrationsTable,columns:[{name:"id",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationId}),isGenerated:!0,generationStrategy:"increment",isPrimary:!0,isNullable:!1},{name:"timestamp",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp}),isPrimary:!1,isNullable:!1},{name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}),isNullable:!1}]}))}async loadExecutedMigrations(e){return this.connection.driver.options.type==="mongodb"?e.cursor(this.migrationsTableName,{}).sort({_id:-1}).toArray():(await this.connection.manager.createQueryBuilder(e).select().orderBy(this.connection.driver.escape("id"),"DESC").from(this.migrationsTable,this.migrationsTableName).getRawMany()).map(n=>new qw(parseInt(n.id),parseInt(n.timestamp),n.name))}getMigrations(){const e=this.connection.migrations.map(t=>{const n=t.name||t.constructor.name,r=parseInt(n.substr(-13),10);if(!r||isNaN(r))throw new te("".concat(n," migration name is wrong. Migration class name should have a JavaScript timestamp appended."));return new qw(void 0,r,n,t)});return this.checkForDuplicateMigrations(e),e.sort((t,n)=>t.timestamp-n.timestamp)}checkForDuplicateMigrations(e){const t=e.map(r=>r.name),n=Array.from(new Set(t.filter((r,s)=>t.indexOf(r)<s)));if(n.length>0)throw Error("Duplicate migrations: ".concat(n.join(", ")))}getLatestTimestampMigration(e){const t=e.map(n=>n).sort((n,r)=>(n.timestamp-r.timestamp)*-1);return t.length>0?t[0]:void 0}getLatestExecutedMigration(e){return e.length>0?e[0]:void 0}async insertExecutedMigration(e,t){const n={};this.connection.driver.options.type==="mssql"?(n.timestamp=new Yi(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),n.name=new Yi(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))):(n.timestamp=t.timestamp,n.name=t.name),this.connection.driver.options.type==="mongodb"?await e.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).insertOne(n):await e.manager.createQueryBuilder().insert().into(this.migrationsTable).values(n).execute()}async deleteExecutedMigration(e,t){const n={};if(this.connection.driver.options.type==="mssql"?(n.timestamp=new Yi(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),n.name=new Yi(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))):(n.timestamp=t.timestamp,n.name=t.name),this.connection.driver.options.type==="mongodb")await e.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).deleteOne(n);else{const r=e.manager.createQueryBuilder();await r.delete().from(this.migrationsTable).where("".concat(r.escape("timestamp")," = :timestamp")).andWhere("".concat(r.escape("name")," = :name")).setParameters(n).execute()}}async withQueryRunner(e){const t=this.queryRunner||this.connection.createQueryRunner();try{return await e(t)}finally{this.queryRunner||await t.release()}}}function Pu(i,e,t){let n=[],r={};return function s(a){r[a]=!0,n.push(a),i[a].forEach(function(o){if(!r[o])s(o);else if(n.indexOf(o)>=0)throw n.push(o),new te("Dependency Cycle Found: ".concat(n.join(" -> ")))}),n.pop(),(!e||i[a].length===0)&&t.indexOf(a)===-1&&t.push(a)}}class _F{constructor(){this.nodes={},this.outgoingEdges={},this.incomingEdges={}}addNode(e,t){this.hasNode(e)||(arguments.length===2?this.nodes[e]=t:this.nodes[e]=e,this.outgoingEdges[e]=[],this.incomingEdges[e]=[])}removeNode(e){this.hasNode(e)&&(delete this.nodes[e],delete this.outgoingEdges[e],delete this.incomingEdges[e],[this.incomingEdges,this.outgoingEdges].forEach(function(t){Object.keys(t).forEach(function(n){let r=t[n].indexOf(e);r>=0&&t[n].splice(r,1)},this)}))}hasNode(e){return this.nodes.hasOwnProperty(e)}getNodeData(e){if(this.hasNode(e))return this.nodes[e];throw new te("Node does not exist: ".concat(e))}setNodeData(e,t){if(this.hasNode(e))this.nodes[e]=t;else throw new te("Node does not exist: ".concat(e))}addDependency(e,t){if(!this.hasNode(e))throw new te("Node does not exist: ".concat(e));if(!this.hasNode(t))throw new te("Node does not exist: ".concat(t));return this.outgoingEdges[e].indexOf(t)===-1&&this.outgoingEdges[e].push(t),this.incomingEdges[t].indexOf(e)===-1&&this.incomingEdges[t].push(e),!0}removeDependency(e,t){let n;this.hasNode(e)&&(n=this.outgoingEdges[e].indexOf(t),n>=0&&this.outgoingEdges[e].splice(n,1)),this.hasNode(t)&&(n=this.incomingEdges[t].indexOf(e),n>=0&&this.incomingEdges[t].splice(n,1))}dependenciesOf(e,t){if(this.hasNode(e)){let n=[];Pu(this.outgoingEdges,t,n)(e);let s=n.indexOf(e);return s>=0&&n.splice(s,1),n}else throw new te("Node does not exist: ".concat(e))}dependantsOf(e,t){if(this.hasNode(e)){let n=[];Pu(this.incomingEdges,t,n)(e);let s=n.indexOf(e);return s>=0&&n.splice(s,1),n}else throw new te("Node does not exist: ".concat(e))}overallOrder(e){let t=this,n=[],r=Object.keys(this.nodes);if(r.length===0)return n;{let s=Pu(this.outgoingEdges,!1,[]);r.forEach(function(o){s(o)});let a=Pu(this.outgoingEdges,e,n);return r.filter(function(o){return t.incomingEdges[o].length===0}).forEach(function(o){a(o)}),n}}}class qC{static isGreaterOrEqual(e,t){const n=Fw(e),r=Fw(t);return n[0]>r[0]||n[0]===r[0]&&n[1]>r[1]||n[0]===r[0]&&n[1]===r[1]&&n[2]>=r[2]}}function Fw(i=""){const e=[0,0,0];return i.split(".").forEach((t,n)=>e[n]=parseInt(t,10)),e}class Ue{static isSQLiteFamily(e){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(e.options.type)}static isMySQLFamily(e){return["mysql","mariadb"].includes(e.options.type)}static isReleaseVersionOrGreater(e,t){return e.version!=null&&qC.isGreaterOrEqual(e.version,t)}static isPostgresFamily(e){return["postgres","aurora-postgres","cockroachdb"].includes(e.options.type)}static buildDriverOptions(e,t){if(e.url){const n=this.parseConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const r of Object.keys(n))typeof n[r]>"u"&&delete n[r];return Object.assign({},e,n)}return Object.assign({},e)}static buildMongoDBDriverOptions(e,t){if(e.url){const n=this.parseMongoDBConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const r of Object.keys(n))typeof n[r]>"u"&&delete n[r];return Object.assign({},e,n)}return Object.assign({},e)}static buildAlias({maxAliasLength:e},t,...n){const r=n.length===1?n[0]:n.join(t&&t.joiner?t.joiner:"_");if(e&&e>0&&r.length>e){if(t&&t.shorten===!0){const s=DC(r);if(s.length<e)return s}return rF(r,{length:e})}return r}static buildColumnAlias({maxAliasLength:e},t,...n){return typeof t=="string"?(n.unshift(t),t={shorten:!1,joiner:"_"}):t=Object.assign({shorten:!1,joiner:"_"},t),this.buildAlias({maxAliasLength:e},t,...n)}static parseConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),r=e.substr(n+2),s=r.indexOf("/"),a=s!==-1?r.substr(0,s):r;let o=s!==-1?r.substr(s+1):void 0;o&&o.indexOf("?")!==-1&&(o=o.substr(0,o.indexOf("?")));const l=a.lastIndexOf("@"),c=a.substr(0,l),u=a.substr(l+1);let d=c,h="";const f=c.indexOf(":");f!==-1&&(d=c.substr(0,f),h=c.substr(f+1));const[m,p]=u.split(":");return{type:t,host:m,username:decodeURIComponent(d),password:decodeURIComponent(h),port:p?parseInt(p):void 0,database:o||void 0}}static parseMongoDBConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),r=e.substr(n+2),s=r.indexOf("/"),a=s!==-1?r.substr(0,s):r;let o=s!==-1?r.substr(s+1):void 0,l="",c,u,d,h,f={};if(o&&o.indexOf("?")!==-1){l=o.substr(o.indexOf("?")+1,o.length);const k=l.split("&");let B,D;k.forEach(O=>{B=O.split("=")[0],D=O.split("=")[1],f[B]=D}),h=f.replicaSet,o=o.substr(0,o.indexOf("?"))}const m=a.lastIndexOf("@"),p=a.substr(0,m),w=a.substr(m+1);let y=p,b="";const E=p.indexOf(":");E!==-1&&(y=p.substr(0,E),b=p.substr(E+1)),h?d=w:[c,u]=w.split(":");let _={type:t,host:c,hostReplicaSet:d,username:decodeURIComponent(y),password:decodeURIComponent(b),port:u?parseInt(u):void 0,database:o||void 0};for(const[k,B]of Object.entries(f))_[k]=B;return _}}class RF{validateMany(e,t){e.forEach(n=>this.validate(n,e,t)),this.validateDependencies(e),this.validateEagerRelations(e)}validate(e,t,n){if(!e.primaryColumns.length&&!e.isJunction)throw new gF(e);if(e.primaryColumns.length>1&&!e.primaryColumns.every((a,o,l)=>a.primaryKeyConstraintName===l[0].primaryKeyConstraintName))throw new te("Entity ".concat(e.name," has multiple primary columns with different constraint names. Constraint names should be the equal."));if(e.inheritancePattern==="STI"||e.tableType==="entity-child"){if(!e.discriminatorColumn)throw new te("Entity ".concat(e.name," using single-table inheritance, it should also have a discriminator column. Did you forget to put discriminator column options?"));if(typeof e.discriminatorValue>"u")throw new te("Entity ".concat(e.name," has an undefined discriminator value. Discriminator value should be defined."));const s=t.find(a=>a!==e&&(a.inheritancePattern==="STI"||a.tableType==="entity-child")&&a.tableName===e.tableName&&a.discriminatorValue===e.discriminatorValue&&a.inheritanceTree.some(o=>e.inheritanceTree.indexOf(o)!==-1));if(s)throw new te("Entities ".concat(e.name," and ").concat(s.name," have the same discriminator values. Make sure they are different while using the @ChildEntity decorator."))}if(e.relationCounts.forEach(s=>{if(s.relation.isManyToOne||s.relation.isOneToOne)throw new te("Relation count can not be implemented on ManyToOne or OneToOne relations.")}),n.options.type!=="mongodb"&&e.columns.filter(s=>!s.isVirtualProperty).forEach(s=>{const a=n.normalizeType(s);if(n.supportedDataTypes.indexOf(a)===-1)throw new xF(s,a,n.options.type);if(s.length&&n.withLengthColumnTypes.indexOf(a)===-1)throw new te("Column ".concat(s.propertyName," of Entity ").concat(e.name," does not support length property."));if(s.type==="enum"&&!s.enum&&!s.enumName)throw new te('Column "'.concat(s.propertyName,'" of Entity "').concat(e.name,'" is defined as enum, but missing "enum" or "enumName" properties.'))}),(Ue.isMySQLFamily(n)||n.options.type==="aurora-mysql")&&e.columns.filter(a=>a.isGenerated&&a.generationStrategy!=="uuid").length>1)throw new te("Error in ".concat(e.name," entity. There can be only one auto-increment column in MySql table."));if(Ue.isMySQLFamily(n)&&t.filter(a=>a.database).length===0&&!n.database)throw new NF("database");if(n.options.type==="mssql"&&e.columns.filter(a=>a.charset).length>1)throw new te("Character set specifying is not supported in Sql Server");if(n.options.type==="postgres"){const s=e.columns.find(a=>a.asExpression&&(!a.generatedType||a.generatedType==="VIRTUAL"));if(s)throw new te('Column "'.concat(s.propertyName,'" of Entity "').concat(e.name,'" is defined as VIRTUAL, but Postgres supports only STORED generated columns.'))}const r=e.create(void 0,{fromDeserializer:!0});e.relations.forEach(s=>{if(s.isManyToMany||s.isOneToMany){if(s.persistenceEnabled===!1)return;const a=s.getEntityValue(r);if(Array.isArray(a))throw new TF(s)}}),e.relations.forEach(s=>{if(n.supportedOnDeleteTypes&&s.onDelete&&!n.supportedOnDeleteTypes.includes(s.onDelete))throw new te('OnDeleteType "'.concat(s.onDelete,'" is not supported for ').concat(n.options.type,"!"));if(n.supportedOnUpdateTypes&&s.onUpdate&&!n.supportedOnUpdateTypes.includes(s.onUpdate))throw new te('OnUpdateType "'.concat(s.onUpdate,'" is not valid for ').concat(n.options.type,"!"))}),e.relations.forEach(s=>{if(s.isCascadeRemove&&s.inverseRelation&&s.inverseRelation.isCascadeRemove)throw new te("Relation ".concat(e.name,"#").concat(s.propertyName," and ").concat(s.inverseRelation.entityMetadata.name,"#").concat(s.inverseRelation.propertyName," both has cascade remove set. ")+"This may lead to unexpected circular removals. Please set cascade remove only from one side of relationship.")}),e.eagerRelations.forEach(s=>{})}validateDependencies(e){const t=new _F;e.forEach(n=>{t.addNode(n.name)}),e.forEach(n=>{n.relationsWithJoinColumns.filter(r=>!r.isNullable).forEach(r=>{t.addDependency(n.name,r.inverseEntityMetadata.name)})});try{t.overallOrder()}catch(n){throw new mF(n.toString().replace("Error: Dependency Cycle Found: ",""))}}validateEagerRelations(e){e.forEach(t=>{t.eagerRelations.forEach(n=>{if(n.inverseRelation&&n.inverseRelation.isEager)throw new te("Circular eager relations are disallowed. "+"".concat(t.targetName,"#").concat(n.propertyPath,' contains "eager: true", and its inverse side ')+"".concat(n.inverseEntityMetadata.targetName,"#").concat(n.inverseRelation.propertyPath,' contains "eager: true" as well.')+' Remove "eager: true" from one side of the relation.')})})}}class PF{}class IF{}class $F{}class FC{}class OF{}class DF{}class MF{}class jw{}class LF{}class BF{}class qF{}class jn{static isFindOneOptions(e){const t=e;return t&&(Array.isArray(t.select)||Array.isArray(t.relations)||typeof t.select=="object"||typeof t.relations=="object"||typeof t.where=="object"||typeof t.join=="object"||typeof t.order=="object"||typeof t.cache=="object"||typeof t.cache=="boolean"||typeof t.cache=="number"||typeof t.comment=="string"||typeof t.lock=="object"||typeof t.loadRelationIds=="object"||typeof t.loadRelationIds=="boolean"||typeof t.loadEagerRelations=="boolean"||typeof t.withDeleted=="boolean"||typeof t.relationLoadStrategy=="string"||typeof t.transaction=="boolean")}static isFindManyOptions(e){const t=e;return t&&(this.isFindOneOptions(t)||typeof t.skip=="number"||typeof t.take=="number"||typeof t.skip=="string"||typeof t.take=="string")}static extractFindManyOptionsAlias(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias}static applyOptionsToTreeQueryBuilder(e,t){if(t!=null&&t.relations){const n=[...t.relations];if(jn.applyRelationsRecursively(e,n,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),n.length>0)throw new wF(n)}return e}static applyRelationsRecursively(e,t,n,r,s){let a=[];if(s){const o=new RegExp("^"+s.replace(".","\\.")+"\\.");a=t.filter(l=>l.match(o)).map(l=>r.findRelationWithPropertyPath(l.replace(o,""))).filter(l=>l)}else a=t.map(o=>r.findRelationWithPropertyPath(o)).filter(o=>o);a.forEach(o=>{let l=Ue.buildAlias(e.connection.driver,{joiner:"__"},n,o.propertyPath);const c=n+"."+o.propertyPath;e.expressionMap.relationLoadStrategy==="query"?e.concatRelationMetadata(o):e.leftJoinAndSelect(c,l),t.splice(t.indexOf(s?s+"."+o.propertyPath:o.propertyPath),1);let u,d;if(e.expressionMap.relationLoadStrategy==="query")u=o.inverseEntityMetadata,d=l;else{const h=e.expressionMap.joinAttributes.find(f=>f.entityOrProperty===c);u=h.metadata,d=h.alias.name}if(!d||!u)throw new Tr(o.propertyPath,r);if(this.applyRelationsRecursively(e,t,d,u,s?s+"."+o.propertyPath:o.propertyPath),e.expressionMap.relationLoadStrategy==="join"){const h=r.relations.find(f=>f.propertyName===o.propertyPath);h&&this.joinEagerRelations(e,l,h.inverseEntityMetadata)}})}static joinEagerRelations(e,t,n){n.eagerRelations.forEach(r=>{let s=Ue.buildAlias(e.connection.driver,{joiner:"__"},t,r.propertyPath),a=!0;for(const c of e.expressionMap.joinAttributes)if(!(c.condition!==void 0||c.mapToProperty!==void 0||c.isMappingMany!==void 0||c.direction!=="LEFT"||c.entityOrProperty!=="".concat(t,".").concat(r.propertyPath))){a=!1,s=c.alias.name;break}const o=!!e.expressionMap.joinAttributes.find(c=>c.alias.name===s);a&&!o&&e.leftJoin(t+"."+r.propertyPath,s);let l=!0;for(const c of e.expressionMap.selects)if(!(c.aliasName!==void 0||c.virtual!==void 0||c.selection!==s)){l=!1;break}l&&e.addSelect(s),this.joinEagerRelations(e,s,r.inverseEntityMetadata)})}}class ha{static createRelationMaps(e,t,n,r){return r.map(s=>{var a;const o=t.treeParentRelation.joinColumns[0],l=(a=o.referencedColumn)!==null&&a!==void 0?a:t.primaryColumns[0],c=o.givenDatabaseName||o.databaseName,u=l.givenDatabaseName||l.databaseName,d=s[n+"_"+u],h=s[n+"_"+c];return{id:e.connection.driver.prepareHydratedValue(d,l),parentId:e.connection.driver.prepareHydratedValue(h,o)}})}static buildChildrenEntityTree(e,t,n,r,s){var a;const o=e.treeChildrenRelation.propertyName;if(s.depth===0){t[o]=[];return}const c=(a=e.treeParentRelation.joinColumns[0].referencedColumn)!==null&&a!==void 0?a:e.primaryColumns[0],u=c.getEntityValue(t),d=r.filter(f=>f.parentId===u),h=new Set(d.map(f=>f.id));t[o]=n.filter(f=>h.has(c.getEntityValue(f))),t[o].forEach(f=>{ha.buildChildrenEntityTree(e,f,n,r,{...s,depth:s.depth-1})})}static buildParentEntityTree(e,t,n,r){var s;const a=e.treeParentRelation.propertyName,l=(s=e.treeParentRelation.joinColumns[0].referencedColumn)!==null&&s!==void 0?s:e.primaryColumns[0],c=l.getEntityValue(t),u=r.find(h=>h.id===c),d=n.find(h=>u?l.getEntityValue(h)===u.parentId:!1);d&&(t[a]=d,ha.buildParentEntityTree(e,t[a],n,r))}}class jC{get metadata(){return this.manager.connection.getMetadata(this.target)}constructor(e,t,n){this.target=e,this.manager=t,this.queryRunner=n}createQueryBuilder(e,t){return this.manager.createQueryBuilder(this.metadata.target,e||this.metadata.targetName,t||this.queryRunner)}hasId(e){return this.manager.hasId(this.metadata.target,e)}getId(e){return this.manager.getId(this.metadata.target,e)}create(e){return this.manager.create(this.metadata.target,e)}merge(e,...t){return this.manager.merge(this.metadata.target,e,...t)}preload(e){return this.manager.preload(this.metadata.target,e)}save(e,t){return this.manager.save(this.metadata.target,e,t)}remove(e,t){return this.manager.remove(this.metadata.target,e,t)}softRemove(e,t){return this.manager.softRemove(this.metadata.target,e,t)}recover(e,t){return this.manager.recover(this.metadata.target,e,t)}insert(e){return this.manager.insert(this.metadata.target,e)}update(e,t){return this.manager.update(this.metadata.target,e,t)}upsert(e,t){return this.manager.upsert(this.metadata.target,e,t)}delete(e){return this.manager.delete(this.metadata.target,e)}softDelete(e){return this.manager.softDelete(this.metadata.target,e)}restore(e){return this.manager.restore(this.metadata.target,e)}exist(e){return this.manager.exists(this.metadata.target,e)}count(e){return this.manager.count(this.metadata.target,e)}countBy(e){return this.manager.countBy(this.metadata.target,e)}sum(e,t){return this.manager.sum(this.metadata.target,e,t)}average(e,t){return this.manager.average(this.metadata.target,e,t)}minimum(e,t){return this.manager.minimum(this.metadata.target,e,t)}maximum(e,t){return this.manager.maximum(this.metadata.target,e,t)}async find(e){return this.manager.find(this.metadata.target,e)}async findBy(e){return this.manager.findBy(this.metadata.target,e)}findAndCount(e){return this.manager.findAndCount(this.metadata.target,e)}findAndCountBy(e){return this.manager.findAndCountBy(this.metadata.target,e)}async findByIds(e){return this.manager.findByIds(this.metadata.target,e)}async findOne(e){return this.manager.findOne(this.metadata.target,e)}async findOneBy(e){return this.manager.findOneBy(this.metadata.target,e)}async findOneById(e){return this.manager.findOneById(this.metadata.target,e)}async findOneOrFail(e){return this.manager.findOneOrFail(this.metadata.target,e)}async findOneByOrFail(e){return this.manager.findOneByOrFail(this.metadata.target,e)}query(e,t){return this.manager.query(e,t)}clear(){return this.manager.clear(this.metadata.target)}increment(e,t,n){return this.manager.increment(this.metadata.target,e,t,n)}decrement(e,t,n){return this.manager.decrement(this.metadata.target,e,t,n)}extend(e){const t=this.constructor,{target:n,manager:r,queryRunner:s}=this,a=new class extends t{}(n,r,s);return Object.assign(a,e),a}}class FF extends jC{async findTrees(e){const t=await this.findRoots(e);return await Promise.all(t.map(n=>this.findDescendantsTree(n,e))),t}findRoots(e){const t=o=>this.manager.connection.driver.escape(o),n=o=>this.manager.connection.driver.escape(o),r=this.metadata.treeParentRelation.joinColumns[0],s=r.givenDatabaseName||r.databaseName,a=this.createQueryBuilder("treeEntity");return jn.applyOptionsToTreeQueryBuilder(a,e),a.where("".concat(t("treeEntity"),".").concat(n(s)," IS NULL")).getMany()}findDescendants(e,t){const n=this.createDescendantsQueryBuilder("treeEntity","treeClosure",e);return jn.applyOptionsToTreeQueryBuilder(n,t),n.getMany()}async findDescendantsTree(e,t){const n=this.createDescendantsQueryBuilder("treeEntity","treeClosure",e);jn.applyOptionsToTreeQueryBuilder(n,t);const r=await n.getRawAndEntities(),s=ha.createRelationMaps(this.manager,this.metadata,"treeEntity",r.raw);return ha.buildChildrenEntityTree(this.metadata,e,r.entities,s,{depth:-1,...t}),e}countDescendants(e){return this.createDescendantsQueryBuilder("treeEntity","treeClosure",e).getCount()}createDescendantsQueryBuilder(e,t,n){const r=s=>this.manager.connection.driver.escape(s);if(this.metadata.treeType==="closure-table"){const s=this.metadata.closureJunctionTable.descendantColumns.map(l=>r(t)+"."+r(l.propertyPath)+" = "+r(e)+"."+r(l.referencedColumn.propertyPath)).join(" AND "),a={},o=this.metadata.closureJunctionTable.ancestorColumns.map(l=>(a[l.referencedColumn.propertyName]=l.referencedColumn.getEntityValue(n),r(t)+"."+r(l.propertyPath)+" = :"+l.referencedColumn.propertyName)).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,s).where(o).setParameters(a)}else if(this.metadata.treeType==="nested-set"){const s=e+"."+this.metadata.nestedSetLeftColumn.propertyPath+" BETWEEN joined."+this.metadata.nestedSetLeftColumn.propertyPath+" AND joined."+this.metadata.nestedSetRightColumn.propertyPath,a={},o=this.metadata.treeParentRelation.joinColumns.map(l=>{const c=l.referencedColumn.propertyPath.replace(".","_");return a[c]=l.referencedColumn.getEntityValue(n),"joined."+l.referencedColumn.propertyPath+" = :"+c}).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.targetName,"joined",s).where(o,a)}else if(this.metadata.treeType==="materialized-path")return this.createQueryBuilder(e).where(s=>{const a=s.subQuery().select("".concat(this.metadata.targetName,".").concat(this.metadata.materializedPathColumn.propertyPath),"path").from(this.metadata.target,this.metadata.targetName).whereInIds(this.metadata.getEntityIdMap(n));return Ue.isSQLiteFamily(this.manager.connection.driver)?"".concat(e,".").concat(this.metadata.materializedPathColumn.propertyPath," LIKE ").concat(a.getQuery()," || '%'"):"".concat(e,".").concat(this.metadata.materializedPathColumn.propertyPath," LIKE NULLIF(CONCAT(").concat(a.getQuery(),", '%'), '%')")});throw new te("Supported only in tree entities")}findAncestors(e,t){const n=this.createAncestorsQueryBuilder("treeEntity","treeClosure",e);return jn.applyOptionsToTreeQueryBuilder(n,t),n.getMany()}async findAncestorsTree(e,t){const n=this.createAncestorsQueryBuilder("treeEntity","treeClosure",e);jn.applyOptionsToTreeQueryBuilder(n,t);const r=await n.getRawAndEntities(),s=ha.createRelationMaps(this.manager,this.metadata,"treeEntity",r.raw);return ha.buildParentEntityTree(this.metadata,e,r.entities,s),e}countAncestors(e){return this.createAncestorsQueryBuilder("treeEntity","treeClosure",e).getCount()}createAncestorsQueryBuilder(e,t,n){if(this.metadata.treeType==="closure-table"){const r=this.metadata.closureJunctionTable.ancestorColumns.map(o=>t+"."+o.propertyPath+" = "+e+"."+o.referencedColumn.propertyPath).join(" AND "),s={},a=this.metadata.closureJunctionTable.descendantColumns.map(o=>(s[o.referencedColumn.propertyName]=o.referencedColumn.getEntityValue(n),t+"."+o.propertyPath+" = :"+o.referencedColumn.propertyName)).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,r).where(a).setParameters(s)}else if(this.metadata.treeType==="nested-set"){const r="joined."+this.metadata.nestedSetLeftColumn.propertyPath+" BETWEEN "+e+"."+this.metadata.nestedSetLeftColumn.propertyPath+" AND "+e+"."+this.metadata.nestedSetRightColumn.propertyPath,s={},a=this.metadata.treeParentRelation.joinColumns.map(o=>{const l=o.referencedColumn.propertyPath.replace(".","_");return s[l]=o.referencedColumn.getEntityValue(n),"joined."+o.referencedColumn.propertyPath+" = :"+l}).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.targetName,"joined",r).where(a,s)}else if(this.metadata.treeType==="materialized-path")return this.createQueryBuilder(e).where(r=>{const s=r.subQuery().select("".concat(this.metadata.targetName,".").concat(this.metadata.materializedPathColumn.propertyPath),"path").from(this.metadata.target,this.metadata.targetName).whereInIds(this.metadata.getEntityIdMap(n));return Ue.isSQLiteFamily(this.manager.connection.driver)?"".concat(s.getQuery()," LIKE ").concat(e,".").concat(this.metadata.materializedPathColumn.propertyPath," || '%'"):"".concat(s.getQuery()," LIKE CONCAT(").concat(e,".").concat(this.metadata.materializedPathColumn.propertyPath,", '%')")});throw new te("Supported only in tree entities")}}class jF{transform(e,t,n,r=!1){return this.groupAndTransform(e,t,n,r),e}groupAndTransform(e,t,n,r=!1){n.nonVirtualColumns.forEach(s=>{const a=s.getEntityValue(t);a!==void 0&&s.setEntityValue(e,a)}),n.relations.length&&n.relations.forEach(s=>{let a=s.getEntityValue(e);const o=s.getEntityValue(t,r);if(o!==void 0)if(s.isOneToMany||s.isManyToMany){if(!Array.isArray(o))return;a||(a=[],s.setEntityValue(e,a)),o.forEach(l=>{let c=a.find(d=>s.inverseEntityMetadata.compareEntities(l,d));const u=s.inverseEntityMetadata.findInheritanceMetadata(l);c||(c=u.create(void 0,{fromDeserializer:!0}),a.push(c)),this.groupAndTransform(c,l,u,r)})}else{if(!ht.isObject(o)){ht.isObject(a)||s.setEntityValue(e,o);return}const l=s.inverseEntityMetadata.findInheritanceMetadata(o);a||(a=l.create(void 0,{fromDeserializer:!0}),s.setEntityValue(e,a)),this.groupAndTransform(a,o,l,r)}})}}class UF{constructor(e,t,n,r){this.plainEntity=e,this.metadata=t,this.parentLoadMapItem=n,this.relation=r}get target(){return this.metadata.target}get id(){return this.metadata.getEntityIdMixedMap(this.plainEntity)}}class zF{constructor(){this.loadMapItems=[]}get mainLoadMapItem(){return this.loadMapItems.find(e=>!e.relation&&!e.parentLoadMapItem)}addLoadMap(e){this.loadMapItems.find(n=>n.target===e.target&&n.id===e.id)||this.loadMapItems.push(e)}fillEntities(e,t){t.forEach(n=>{const r=this.loadMapItems.find(s=>s.target===e&&s.metadata.compareEntities(n,s.plainEntity));r&&(r.entity=n)})}groupByTargetIds(){const e=[];return this.loadMapItems.forEach(t=>{let n=e.find(r=>r.target===t.target);n||(n={target:t.target,ids:[]},e.push(n)),n.ids.push(t.id)}),e}}class VF{constructor(e){this.manager=e}async transform(e,t){if(!t.hasAllPrimaryKeys(e))return Promise.reject("Given object does not have a primary column, cannot transform it to database entity.");const n=new zF,r=(s,a,o,l)=>{const c=new UF(s,a,o,l);n.addLoadMap(c),a.extractRelationValuesFromEntity(s,t.relations).filter(u=>u!=null).forEach(([u,d,h])=>r(d,h,c,u))};return r(e,t),await Promise.all(n.groupByTargetIds().map(s=>this.manager.findByIds(s.target,s.ids).then(a=>n.fillEntities(s.target,a)))),n.loadMapItems.forEach(s=>{!s.relation||!s.entity||!s.parentLoadMapItem||!s.parentLoadMapItem.entity||(s.relation.isManyToMany||s.relation.isOneToMany?(s.parentLoadMapItem.entity[s.relation.propertyName]||(s.parentLoadMapItem.entity[s.relation.propertyName]=[]),s.parentLoadMapItem.entity[s.relation.propertyName].push(s.entity)):s.parentLoadMapItem.entity[s.relation.propertyName]=s.entity)}),n.mainLoadMapItem?n.mainLoadMapItem.entity:void 0}}class WF{get repository(){const e=this.getCustomRepositoryTarget(this);if(!e)throw new wp(this.constructor);return this.manager.getRepository(e)}get treeRepository(){const e=this.getCustomRepositoryTarget(this);if(!e)throw new wp(this.constructor);return this.manager.getTreeRepository(e)}createQueryBuilder(e){const t=this.getCustomRepositoryTarget(this.constructor);if(!t)throw new wp(this.constructor);return this.manager.getRepository(t).createQueryBuilder(e)}createQueryBuilderFor(e,t){return this.getRepositoryFor(e).createQueryBuilder(t)}getRepositoryFor(e){return this.manager.getRepository(e)}getTreeRepositoryFor(e){return this.manager.getTreeRepository(e)}getCustomRepositoryTarget(e){const t=rr().entityRepositories.find(n=>n.target===(typeof e=="function"?e:e.constructor));if(!t)throw new MC(e);return t.entity}}class Uw{constructor(e){this.subjects=[...e],this.metadatas=this.getUniqueMetadatas(this.subjects)}sort(e){if(!this.metadatas.length)return this.subjects;const t=[];if(e==="delete"){const o=this.subjects.filter(l=>!l.entity&&!l.databaseEntity);t.push(...o),this.removeAlreadySorted(o)}const n=this.getNonNullableDependencies();let r=this.toposort(n);e==="insert"&&(r=r.reverse()),r.forEach(o=>{const l=this.subjects.filter(c=>c.metadata.targetName===o||c.metadata.inheritanceTree.some(u=>u.name===o));t.push(...l),this.removeAlreadySorted(l)});const s=this.getDependencies();let a=this.toposort(s);return e==="insert"&&(a=a.reverse()),a.forEach(o=>{const l=this.subjects.filter(c=>c.metadata.targetName===o);t.push(...l),this.removeAlreadySorted(l)}),t.push(...this.subjects),t}removeAlreadySorted(e){e.forEach(t=>{this.subjects.splice(this.subjects.indexOf(t),1)})}getUniqueMetadatas(e){const t=[];return e.forEach(n=>{t.indexOf(n.metadata)===-1&&t.push(n.metadata)}),t}getNonNullableDependencies(){return this.metadatas.reduce((e,t)=>(t.relationsWithJoinColumns.forEach(n=>{n.isNullable||e.push([t.targetName,n.inverseEntityMetadata.targetName])}),e),[])}getDependencies(){return this.metadatas.reduce((e,t)=>(t.relationsWithJoinColumns.forEach(n=>{n.inverseEntityMetadata!==t&&e.push([t.targetName,n.inverseEntityMetadata.targetName])}),e),[])}toposort(e){function t(c){let u=[];for(let d=0,h=c.length;d<h;d++){let f=c[d];u.indexOf(f[0])<0&&u.push(f[0]),u.indexOf(f[1])<0&&u.push(f[1])}return u}const n=t(e);let r=n.length,s=new Array(r),a={},o=r;for(;o--;)a[o]||l(n[o],o,[]);function l(c,u,d){if(d.indexOf(c)>=0)throw new te("Cyclic dependency: "+JSON.stringify(c));if(!~n.indexOf(c))throw new te("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(a[u])return;a[u]=!0;let h=e.filter(function(f){return f[0]===c});if(u=h.length){let f=d.concat(c);do{let m=h[--u][1];l(m,n.indexOf(m),f)}while(u)}s[--r]=c}return s}}function HF(i){if(i===null||i===!0||i===!1)return NaN;var e=Number(i);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function QF(i,e){if(e.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+e.length+" present")}var UC=6e4,zC=36e5;function GF(i,e){var t;QF(1,arguments);var n=HF((t=e==null?void 0:e.additionalDigits)!==null&&t!==void 0?t:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof i=="string"||Object.prototype.toString.call(i)==="[object String]"))return new Date(NaN);var r=XF(i),s;if(r.date){var a=ZF(r.date,n);s=e4(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var o=s.getTime(),l=0,c;if(r.time&&(l=t4(r.time),isNaN(l)))return new Date(NaN);if(r.timezone){if(c=n4(r.timezone),isNaN(c))return new Date(NaN)}else{var u=new Date(o+l),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return new Date(o+l+c)}var Iu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},KF=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,YF=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,JF=/^([+-])(\d{2})(?::?(\d{2}))?$/;function XF(i){var e={},t=i.split(Iu.dateTimeDelimiter),n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],Iu.timeZoneDelimiter.test(e.date)&&(e.date=i.split(Iu.timeZoneDelimiter)[0],n=i.substr(e.date.length,i.length))),n){var r=Iu.timezone.exec(n);r?(e.time=n.replace(r[1],""),e.timezone=r[1]):e.time=n}return e}function ZF(i,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=i.match(t);if(!n)return{year:NaN,restDateString:""};var r=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?r:s*100,restDateString:i.slice((n[1]||n[2]).length)}}function e4(i,e){if(e===null)return new Date(NaN);var t=i.match(KF);if(!t)return new Date(NaN);var n=!!t[4],r=_l(t[1]),s=_l(t[2])-1,a=_l(t[3]),o=_l(t[4]),l=_l(t[5])-1;if(n)return o4(e,o,l)?i4(e,o,l):new Date(NaN);var c=new Date(0);return!s4(e,s,a)||!a4(e,r)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(r,a)),c)}function _l(i){return i?parseInt(i):1}function t4(i){var e=i.match(YF);if(!e)return NaN;var t=xp(e[1]),n=xp(e[2]),r=xp(e[3]);return l4(t,n,r)?t*zC+n*UC+r*1e3:NaN}function xp(i){return i&&parseFloat(i.replace(",","."))||0}function n4(i){if(i==="Z")return 0;var e=i.match(JF);if(!e)return 0;var t=e[1]==="+"?-1:1,n=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return c4(n,r)?t*(n*zC+r*UC):NaN}function i4(i,e,t){var n=new Date(0);n.setUTCFullYear(i,0,4);var r=n.getUTCDay()||7,s=(e-1)*7+t+1-r;return n.setUTCDate(n.getUTCDate()+s),n}var r4=[31,null,31,30,31,30,31,31,30,31,30,31];function VC(i){return i%400===0||i%4===0&&i%100!==0}function s4(i,e,t){return e>=0&&e<=11&&t>=1&&t<=(r4[e]||(VC(i)?29:28))}function a4(i,e){return e>=1&&e<=(VC(i)?366:365)}function o4(i,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function l4(i,e,t){return i===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&i>=0&&i<25}function c4(i,e){return e>=0&&e<=59}class et{static normalizeHydratedDate(e){return e&&(typeof e=="string"?new Date(e):e)}static mixedDateToDateString(e){return e instanceof Date?this.formatZerolessValue(e.getFullYear(),4)+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate()):e}static mixedDateToDate(e,t=!1,n=!0){let r=typeof e=="string"?GF(e):e;return t&&(r=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())),n||r.setUTCMilliseconds(0),r}static mixedDateToTimeString(e,t=!1){return e instanceof Date?this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+(t?"":":"+this.formatZerolessValue(e.getSeconds())):e}static mixedTimeToDate(e){if(typeof e=="string"){const[t,n,r]=e.split(":"),s=new Date;return t&&s.setHours(parseInt(t)),n&&s.setMinutes(parseInt(n)),r&&s.setSeconds(parseInt(r)),s}return e}static mixedTimeToString(e,t=!1){return e=e instanceof Date?e.getHours()+":"+e.getMinutes()+(t?"":":"+e.getSeconds()):e,typeof e=="string"?e.split(":").map(n=>n.length===1?"0"+n:n).join(":"):e}static mixedDateToDatetimeString(e,t){if(typeof e=="string"&&(e=new Date(e)),e instanceof Date){let n=this.formatZerolessValue(e.getFullYear(),4)+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate())+" "+this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+":"+this.formatZerolessValue(e.getSeconds());t&&(n+=".".concat(this.formatMilliseconds(e.getMilliseconds()))),e=n}return e}static mixedDateToUtcDatetimeString(e){return typeof e=="string"&&(e=new Date(e)),e instanceof Date?this.formatZerolessValue(e.getUTCFullYear(),4)+"-"+this.formatZerolessValue(e.getUTCMonth()+1)+"-"+this.formatZerolessValue(e.getUTCDate())+" "+this.formatZerolessValue(e.getUTCHours())+":"+this.formatZerolessValue(e.getUTCMinutes())+":"+this.formatZerolessValue(e.getUTCSeconds())+"."+this.formatMilliseconds(e.getUTCMilliseconds()):e}static simpleArrayToString(e){return Array.isArray(e)?e.map(t=>String(t)).join(","):e}static stringToSimpleArray(e){return typeof e=="string"?e.length>0?e.split(","):[]:e}static simpleJsonToString(e){return JSON.stringify(e)}static stringToSimpleJson(e){return typeof e=="string"?JSON.parse(e):e}static simpleEnumToString(e){return""+e}static stringToSimpleEnum(e,t){return t.enum&&!isNaN(e)&&t.enum.indexOf(parseInt(e))>=0&&(e=parseInt(e)),e}static formatZerolessValue(e,t=2){const n="0".repeat(t);return String("".concat(n).concat(e)).slice(-t)}static formatMilliseconds(e){return e<10?"00"+e:e<100?"0"+e:String(e)}}class We{static chunk(e,t){return Array.from(Array(Math.ceil(e.length/t)),(n,r)=>e.slice(r*t,r*t+t))}static splitClassesAndStrings(e){return[e.filter(t=>typeof t!="string"),e.filter(t=>typeof t=="string")]}static groupBy(e,t){return e.reduce((n,r)=>{const s=t(r);let a=n.find(o=>o.id===s);return a||(a={id:s,items:[]},n.push(a)),a.items.push(r),n},[])}static uniq(e,t){return e.reduce((n,r)=>{let s=!1;if(typeof t=="function"){const a=t(r);s=!!n.find(o=>t(o)===a)}else typeof t=="string"?s=!!n.find(a=>a[t]===r[t]):s=n.indexOf(r)!==-1;return s||n.push(r),n},[])}static isPlainObject(e){return e==null?!1:!e.constructor||e.constructor===Object}static mergeArrayKey(e,t,n,r){if(r.has(n)){e[t]=r.get(n);return}if(!(n instanceof Promise)){if(!this.isPlainObject(n)&&!Array.isArray(n)){e[t]=n;return}e[t]||(e[t]=Array.isArray(n)?[]:{}),r.set(n,e[t]),this.merge(e[t],n,r),r.delete(n)}}static mergeObjectKey(e,t,n,r){if(r.has(n)){Object.assign(e,{[t]:r.get(n)});return}if(!(n instanceof Promise)){if(!this.isPlainObject(n)&&!Array.isArray(n)){Object.assign(e,{[t]:n});return}e[t]||Object.assign(e,{[t]:Array.isArray(n)?[]:{}}),r.set(n,e[t]),this.merge(e[t],n,r),r.delete(n)}}static merge(e,t,n=new Map){if(this.isPlainObject(e)&&this.isPlainObject(t))for(const r of Object.keys(t))r!=="__proto__"&&this.mergeObjectKey(e,r,t[r],n);if(Array.isArray(e)&&Array.isArray(t))for(let r=0;r<t.length;r++)this.mergeArrayKey(e,r,t[r],n)}static mergeDeep(e,...t){if(!t.length)return e;for(const n of t)We.merge(e,n);return e}static deepCompare(...e){let t,n,r,s;if(arguments.length<1)return!0;for(t=1,n=arguments.length;t<n;t++)if(r=[],s=[],!this.compare2Objects(r,s,arguments[0],arguments[t]))return!1;return!0}static deepValue(e,t){const n=t.split(".");for(let r=0,s=n.length;r<s;r++)e=e[n[r]];return e}static replaceEmptyObjectsWithBooleans(e){for(let t in e)e[t]&&typeof e[t]=="object"&&(Object.keys(e[t]).length===0?e[t]=!0:this.replaceEmptyObjectsWithBooleans(e[t]))}static propertyPathsToTruthyObject(e){let t={};for(let n of e){const r=n.split(".");if(!r.length)continue;(!t[r[0]]||t[r[0]]===!0)&&(t[r[0]]={});let s=t[r[0]];for(let[a,o]of r.entries())a!==0&&(s[o]?s=s[o]:a===r.length-1?(s[o]={},s=null):(s[o]={},s=s[o]))}return this.replaceEmptyObjectsWithBooleans(t),t}static compareIds(e,t){return e==null||t===void 0||t===null?!1:(typeof e.id=="string"&&typeof t.id=="string"||typeof e.id=="number"&&typeof t.id=="number")&&Object.keys(e).length===1&&Object.keys(t).length===1?e.id===t.id:We.deepCompare(e,t)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e==="true"||e==="1":typeof e=="number"?e>0:!1}static zipObject(e,t){return e.reduce((n,r,s)=>(n[r]=t[s],n),{})}static isArraysEqual(e,t){return e.length!==t.length?!1:e.every(n=>t.indexOf(n)!==-1)}static areMutuallyExclusive(...e){return!e.some(n=>{const r=e.filter(s=>s!==n);return n.some(s=>r.some(a=>a.includes(s)))})}static compare2Objects(e,t,n,r){let s;if(Number.isNaN(n)&&Number.isNaN(r)||n===r)return!0;if(n===null||r===null||n===void 0||r===void 0)return!1;if((typeof n.equals=="function"||typeof n.equals=="function")&&n.equals(r))return!0;if(typeof n=="function"&&typeof r=="function"||n instanceof Date&&r instanceof Date||n instanceof RegExp&&r instanceof RegExp||typeof n=="string"&&typeof r=="string"||typeof n=="number"&&typeof r=="number")return n.toString()===r.toString();if(!(typeof n=="object"&&typeof r=="object")||Object.prototype.isPrototypeOf.call(n,r)||Object.prototype.isPrototypeOf.call(r,n)||n.constructor!==r.constructor||n.prototype!==r.prototype||e.indexOf(n)>-1||t.indexOf(r)>-1)return!1;for(s in r){if(r.hasOwnProperty(s)!==n.hasOwnProperty(s))return!1;if(typeof r[s]!=typeof n[s])return!1}for(s in n){if(r.hasOwnProperty(s)!==n.hasOwnProperty(s))return!1;if(typeof r[s]!=typeof n[s])return!1;switch(typeof n[s]){case"object":case"function":if(e.push(n),t.push(r),!this.compare2Objects(e,t,n[s],r[s]))return!1;e.pop(),t.pop();break;default:if(n[s]!==r[s])return!1;break}}return!0}}class yn{static transformFrom(e,t){return Array.isArray(e)?e.slice().reverse().reduce((r,s)=>s.from(r),t):e.from(t)}static transformTo(e,t){return Array.isArray(e)?e.reduce((n,r)=>r.to(n),t):e.to(t)}}class u4{compute(e){e.forEach(t=>{this.computeDiffColumns(t),this.computeDiffRelationalColumns(e,t)})}computeDiffColumns(e){e.entity&&e.metadata.columns.forEach(t=>{if(t.isVirtual||t.isDiscriminator)return;const n=e.changeMaps.find(s=>s.column===t);n&&e.changeMaps.splice(e.changeMaps.indexOf(n),1);const r=t.getEntityValue(e.entity);if(r!==void 0){if(e.databaseEntity){const s=t.type!=="json"&&t.type!=="jsonb";let a=t.getEntityValue(e.databaseEntity,s);if(t.relationMetadata){const l=t.relationMetadata.getEntityValue(e.entity);if(l!=null)return}let o=r;if(r!==null){switch(t.type){case"date":o=et.mixedDateToDateString(r);break;case"time":case"time with time zone":case"time without time zone":case"timetz":o=et.mixedDateToTimeString(r);break;case"datetime":case"datetime2":case Date:case"timestamp":case"timestamp without time zone":case"timestamp with time zone":case"timestamp with local time zone":case"timestamptz":o=et.mixedDateToUtcDatetimeString(r),a=et.mixedDateToUtcDatetimeString(a);break;case"json":case"jsonb":if(We.deepCompare(r,a))return;break;case"simple-array":o=et.simpleArrayToString(r),a=et.simpleArrayToString(a);break;case"simple-enum":o=et.simpleEnumToString(r),a=et.simpleEnumToString(a);break;case"simple-json":o=et.simpleJsonToString(r),a=et.simpleJsonToString(a);break}t.transformer&&(o=yn.transformTo(t.transformer,r))}if(Buffer.isBuffer(o)&&Buffer.isBuffer(a)){if(o.equals(a))return}else if(o===a)return}e.diffColumns.includes(t)||e.diffColumns.push(t),e.changeMaps.push({column:t,value:r})}})}computeDiffRelationalColumns(e,t){t.entity&&t.metadata.relationsWithJoinColumns.forEach(n=>{let r=n.getEntityValue(t.entity);if(r===void 0)return;if(t.databaseEntity){let o=r;o!==null&&ht.isObject(o)&&(o=n.getRelationIdMap(o));const l=n.getEntityValue(t.databaseEntity);if(We.compareIds(o,l))return;t.diffRelations.push(n)}const s=e.find(o=>o.mustBeInserted&&o.entity===r);s&&(r=s);const a=t.changeMaps.find(o=>o.relation===n);a?a.value=r:t.changeMaps.push({relation:n,value:r})})}}class Km{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class zw extends te{constructor(){super("Nested sets do not support multiple root entities.")}}class Tp{constructor(e){this.queryRunner=e}async insert(e){const t=c=>this.queryRunner.connection.driver.escape(c),n=this.getTableName(e.metadata.tablePath),r=t(e.metadata.nestedSetLeftColumn.databaseName),s=t(e.metadata.nestedSetRightColumn.databaseName);let a=e.metadata.treeParentRelation.getEntityValue(e.entity);!a&&e.parentSubject&&e.parentSubject.entity&&(a=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity);const o=e.metadata.getEntityIdMap(a);let l;if(o&&(l=await this.queryRunner.manager.createQueryBuilder().select(e.metadata.targetName+"."+e.metadata.nestedSetRightColumn.propertyPath,"right").from(e.metadata.target,e.metadata.targetName).whereInIds(o).getRawOne().then(c=>{const u=c?c.right:void 0;return typeof u=="string"?parseInt(u):u})),l!==void 0)await this.queryRunner.query("UPDATE ".concat(n," SET ")+"".concat(r," = CASE WHEN ").concat(r," > ").concat(l," THEN ").concat(r," + 2 ELSE ").concat(r," END,")+"".concat(s," = ").concat(s," + 2 ")+"WHERE ".concat(s," >= ").concat(l)),We.mergeDeep(e.insertedValueSet,e.metadata.nestedSetLeftColumn.createValueMap(l),e.metadata.nestedSetRightColumn.createValueMap(l+1));else{if(!await this.isUniqueRootEntity(e,a))throw new zw;We.mergeDeep(e.insertedValueSet,e.metadata.nestedSetLeftColumn.createValueMap(1),e.metadata.nestedSetRightColumn.createValueMap(2))}}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;if(!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find(o=>Object.entries(e.identifier).every(([l,c])=>o[l]===c))),n===void 0||t===void 0)return;const r=e.metadata.treeParentRelation.getEntityValue(n),s=e.metadata.getEntityIdMap(r),a=e.metadata.getEntityIdMap(t);if(!We.compareIds(s,a)){if(t){const o=m=>this.queryRunner.connection.driver.escape(m),l=this.getTableName(e.metadata.tablePath),c=o(e.metadata.nestedSetLeftColumn.databaseName),u=o(e.metadata.nestedSetRightColumn.databaseName),d=e.metadata.getEntityIdMap(n);let h;d&&(h=(await this.getNestedSetIds(e.metadata,d))[0]);let f;if(a&&(f=(await this.getNestedSetIds(e.metadata,a))[0]),h!==void 0&&f!==void 0){const m=f.left>h.left,p=h.right-h.left+1;let w;m?w=f.left-h.right:w=f.right-h.left;const y="WHEN ".concat(c," >= ").concat(h.left," AND ")+"".concat(c," < ").concat(h.right," ")+"THEN ".concat(c," + ").concat(w," "),b="WHEN ".concat(u," > ").concat(h.left," AND ")+"".concat(u," <= ").concat(h.right," ")+"THEN ".concat(u," + ").concat(w," ");m?await this.queryRunner.query("UPDATE ".concat(l," ")+"SET ".concat(c," = CASE ")+"WHEN ".concat(c," > ").concat(h.right," AND ")+"".concat(c," <= ").concat(f.left," ")+"THEN ".concat(c," - ").concat(p," ")+y+"ELSE ".concat(c," ")+"END, "+"".concat(u," = CASE ")+"WHEN ".concat(u," > ").concat(h.right," AND ")+"".concat(u," < ").concat(f.left," ")+"THEN ".concat(u," - ").concat(p," ")+b+"ELSE ".concat(u," ")+"END"):await this.queryRunner.query("UPDATE ".concat(l," ")+"SET ".concat(c," = CASE ")+"WHEN ".concat(c," < ").concat(h.left," AND ")+"".concat(c," > ").concat(f.right," ")+"THEN ".concat(c," + ").concat(p," ")+y+"ELSE ".concat(c," ")+"END, "+"".concat(u," = CASE ")+"WHEN ".concat(u," < ").concat(h.left," AND ")+"".concat(u," >= ").concat(f.right," ")+"THEN ".concat(u," + ").concat(p," ")+b+"ELSE ".concat(u," ")+"END")}}else if(!await this.isUniqueRootEntity(e,t))throw new zw}}async remove(e){Array.isArray(e)||(e=[e]);const t=e[0].metadata,n=c=>this.queryRunner.connection.driver.escape(c),r=this.getTableName(t.tablePath),s=n(t.nestedSetLeftColumn.databaseName),a=n(t.nestedSetRightColumn.databaseName);let o=[];for(const c of e){const u=t.getEntityIdMap(c.entity);u&&o.push(u)}let l=await this.getNestedSetIds(t,o);for(const c of l){const u=c.right-c.left+1;await this.queryRunner.query("UPDATE ".concat(r," ")+"SET ".concat(s," = CASE ")+"WHEN ".concat(s," > ").concat(c.left," THEN ").concat(s," - ").concat(u," ")+"ELSE ".concat(s," ")+"END, "+"".concat(a," = CASE ")+"WHEN ".concat(a," > ").concat(c.right," THEN ").concat(a," - ").concat(u," ")+"ELSE ".concat(a," ")+"END")}}getNestedSetIds(e,t){const n={left:"".concat(e.targetName,".").concat(e.nestedSetLeftColumn.propertyPath),right:"".concat(e.targetName,".").concat(e.nestedSetRightColumn.propertyPath)},r=this.queryRunner.manager.createQueryBuilder();return Object.entries(n).forEach(([s,a])=>{r.addSelect(a,s)}),r.from(e.target,e.targetName).whereInIds(t).orderBy(n.right,"DESC").getRawMany().then(s=>{const a=[];for(const o of s){const l={};for(const c of Object.keys(n)){const u=o?o[c]:void 0;l[c]=typeof u=="string"?parseInt(u):u}a.push(l)}return a})}async isUniqueRootEntity(e,t){const n=c=>this.queryRunner.connection.driver.escape(c),r=this.getTableName(e.metadata.tablePath),s=[],a=e.metadata.treeParentRelation.joinColumns.map(c=>{const u=n(c.databaseName),d=c.getEntityValue(t);if(d==null)return"".concat(u," IS NULL");s.push(d);const h=this.queryRunner.connection.driver.createParameter("entity_"+c.databaseName,s.length-1);return"".concat(u," = ").concat(h)}).join(" AND "),o="count",l=await this.queryRunner.query("SELECT COUNT(1) AS ".concat(n(o)," FROM ").concat(r," WHERE ").concat(a),s,!0);return parseInt(l.records[0][o])===0}getTableName(e){return e.split(".").map(t=>t===""?t:this.queryRunner.connection.driver.escape(t)).join(".")}}class Sp{constructor(e){this.queryRunner=e}async insert(e){const t={};e.metadata.closureJunctionTable.ancestorColumns.forEach(r=>{t[r.databaseName]=e.identifier}),e.metadata.closureJunctionTable.descendantColumns.forEach(r=>{t[r.databaseName]=e.identifier}),await this.queryRunner.manager.createQueryBuilder().insert().into(e.metadata.closureJunctionTable.tablePath).values(t).updateEntity(!1).callListeners(!1).execute();let n=e.metadata.treeParentRelation.getEntityValue(e.entity);if(!n&&e.parentSubject&&e.parentSubject.entity&&(n=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity),n){const r=d=>this.queryRunner.connection.driver.escape(d),s=this.getTableName(e.metadata.closureJunctionTable.tablePath),a=[],o=e.metadata.closureJunctionTable.ancestorColumns.map(d=>r(d.databaseName)),l=e.metadata.closureJunctionTable.descendantColumns.map(d=>r(d.databaseName)),c=e.metadata.primaryColumns.map(d=>(a.push(d.getEntityValue(e.insertedValueSet?e.insertedValueSet:e.entity)),this.queryRunner.connection.driver.createParameter("child_entity_"+d.databaseName,a.length-1))),u=e.metadata.closureJunctionTable.descendantColumns.map(d=>{const h=r(d.databaseName),f=d.referencedColumn.getEntityValue(n);if(!f)throw new Bw(e.metadata.name);a.push(f);const m=this.queryRunner.connection.driver.createParameter("parent_entity_"+d.referencedColumn.databaseName,a.length-1);return"".concat(h," = ").concat(m)});await this.queryRunner.query("INSERT INTO ".concat(s," (").concat([...o,...l].join(", "),") ")+"SELECT ".concat(o.join(", "),", ").concat(c.join(", ")," FROM ").concat(s," WHERE ").concat(u.join(" AND ")),a)}}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;if(!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find(f=>Object.entries(e.identifier).every(([m,p])=>f[m]===p))),n===void 0||t===void 0)return;const r=e.metadata.treeParentRelation.getEntityValue(n),s=e.metadata.getEntityIdMap(r),a=e.metadata.getEntityIdMap(t);if(We.compareIds(s,a))return;const o=f=>this.queryRunner.connection.driver.escape(f),l=e.metadata.closureJunctionTable,c=l.ancestorColumns.map(f=>o(f.databaseName)),u=l.descendantColumns.map(f=>o(f.databaseName)),d=(f,m)=>{const p="sub".concat(m),w=f.createQueryBuilder().select(u.join(", ")).from(l.tablePath,p);for(const y of l.ancestorColumns)w.andWhere("".concat(o(p),".").concat(o(y.databaseName)," = :value_").concat(y.referencedColumn.databaseName));return f.createQueryBuilder().select(u.join(", ")).from("(".concat(w.getQuery(),")"),m).setParameters(w.getParameters()).getQuery()},h={};for(const f of e.metadata.primaryColumns)h["value_".concat(f.databaseName)]=n[f.databaseName];if(await this.queryRunner.manager.createQueryBuilder().delete().from(l.tablePath).where(f=>"(".concat(u.join(", "),") IN (").concat(d(f,"descendant"),")")).andWhere(f=>"(".concat(c.join(", "),") NOT IN (").concat(d(f,"ancestor"),")")).setParameters(h).execute(),t){const f=[],m=this.getTableName(l.tablePath),p=o("supertree"),w=o("subtree"),y=[...c.map(_=>"".concat(p,".").concat(_)),...u.map(_=>"".concat(w,".").concat(_))],b=e.metadata.closureJunctionTable.ancestorColumns.map(_=>{const k=o(_.databaseName),B=_.referencedColumn.getEntityValue(n);f.push(B);const D=this.queryRunner.connection.driver.createParameter("entity_"+_.referencedColumn.databaseName,f.length-1);return"".concat(w,".").concat(k," = ").concat(D)}),E=e.metadata.closureJunctionTable.descendantColumns.map(_=>{const k=o(_.databaseName),B=_.referencedColumn.getEntityValue(t);if(!B)throw new Bw(e.metadata.name);f.push(B);const D=this.queryRunner.connection.driver.createParameter("parent_entity_"+_.referencedColumn.databaseName,f.length-1);return"".concat(p,".").concat(k," = ").concat(D)});await this.queryRunner.query("INSERT INTO ".concat(m," (").concat([...c,...u].join(", "),") ")+"SELECT ".concat(y.join(", ")," ")+"FROM ".concat(m," AS ").concat(p,", ").concat(m," AS ").concat(w," ")+"WHERE ".concat([...b,...E].join(" AND ")),f)}}async remove(e){if(this.queryRunner.connection.driver.options.type!=="mssql")return;Array.isArray(e)||(e=[e]);const t=l=>this.queryRunner.connection.driver.escape(l),n=e.map(l=>l.identifier),r=e[0].metadata.closureJunctionTable,s=l=>l.map(c=>{const u=n.map(d=>d[c.referencedColumn.databaseName]);return"".concat(t(c.databaseName)," IN (").concat(u.join(", "),")")}).join(" AND "),a=s(r.ancestorColumns),o=s(r.descendantColumns);await this.queryRunner.manager.createQueryBuilder().delete().from(r.tablePath).where(a).orWhere(o).execute()}getTableName(e){return e.split(".").map(t=>t===""?t:this.queryRunner.connection.driver.escape(t)).join(".")}}class ur{constructor(e){this["@instanceof"]=Symbol.for("EntityMetadata"),this.childEntityMetadatas=[],this.inheritanceTree=[],this.tableType="regular",this.withoutRowid=!1,this.synchronize=!0,this.hasNonNullableRelations=!1,this.isJunction=!1,this.isAlwaysUsingConstructor=!0,this.isClosureJunction=!1,this.hasMultiplePrimaryKeys=!1,this.hasUUIDGeneratedColumns=!1,this.ownColumns=[],this.columns=[],this.ancestorColumns=[],this.descendantColumns=[],this.nonVirtualColumns=[],this.ownerColumns=[],this.inverseColumns=[],this.generatedColumns=[],this.primaryColumns=[],this.ownRelations=[],this.relations=[],this.eagerRelations=[],this.lazyRelations=[],this.oneToOneRelations=[],this.ownerOneToOneRelations=[],this.oneToManyRelations=[],this.manyToOneRelations=[],this.manyToManyRelations=[],this.ownerManyToManyRelations=[],this.relationsWithJoinColumns=[],this.relationIds=[],this.relationCounts=[],this.foreignKeys=[],this.embeddeds=[],this.allEmbeddeds=[],this.ownIndices=[],this.indices=[],this.uniques=[],this.ownUniques=[],this.checks=[],this.exclusions=[],this.ownListeners=[],this.listeners=[],this.afterLoadListeners=[],this.beforeInsertListeners=[],this.afterInsertListeners=[],this.beforeUpdateListeners=[],this.afterUpdateListeners=[],this.beforeRemoveListeners=[],this.beforeSoftRemoveListeners=[],this.beforeRecoverListeners=[],this.afterRemoveListeners=[],this.afterSoftRemoveListeners=[],this.afterRecoverListeners=[],this.connection=e.connection,this.inheritanceTree=e.inheritanceTree||[],this.inheritancePattern=e.inheritancePattern,this.treeType=e.tableTree?e.tableTree.type:void 0,this.treeOptions=e.tableTree?e.tableTree.options:void 0,this.parentClosureEntityMetadata=e.parentClosureEntityMetadata,this.tableMetadataArgs=e.args,this.target=this.tableMetadataArgs.target,this.tableType=this.tableMetadataArgs.type,this.expression=this.tableMetadataArgs.expression,this.withoutRowid=this.tableMetadataArgs.withoutRowid,this.dependsOn=this.tableMetadataArgs.dependsOn}create(e,t){const n=!!(t&&t.pojo===!0);let r;return typeof this.target=="function"&&!n?!(t!=null&&t.fromDeserializer)||this.isAlwaysUsingConstructor?r=new this.target:r=Object.create(this.target.prototype):r={},this.connection.options.typename&&(r[this.connection.options.typename]=this.targetName),this.lazyRelations.forEach(s=>this.connection.relationLoader.enableLazyLoad(s,r,e)),r}hasId(e){return e?this.primaryColumns.every(t=>{const n=t.getEntityValue(e);return n!=null&&n!==""}):!1}hasAllPrimaryKeys(e){return this.primaryColumns.every(t=>{const n=t.getEntityValue(e);return n!=null})}ensureEntityIdMap(e){if(ht.isObject(e))return e;if(this.hasMultiplePrimaryKeys)throw new oF(this,e);return this.primaryColumns[0].createValueMap(e)}getEntityIdMap(e){if(e)return ur.getValueMap(e,this.primaryColumns,{skipNulls:!0})}getEntityIdMixedMap(e){if(!e)return e;const t=this.getEntityIdMap(e);return this.hasMultiplePrimaryKeys?t:t&&this.primaryColumns[0].getEntityValue(t)}compareEntities(e,t){const n=this.getEntityIdMap(e);if(!n)return!1;const r=this.getEntityIdMap(t);return r?We.compareIds(n,r):!1}findColumnWithPropertyName(e){return this.columns.find(t=>t.propertyName===e)}findColumnWithDatabaseName(e){return this.columns.find(t=>t.databaseName===e)}hasColumnWithPropertyPath(e){return this.columns.some(n=>n.propertyPath===e)||this.hasRelationWithPropertyPath(e)}findColumnWithPropertyPath(e){const t=this.columns.find(r=>r.propertyPath===e);if(t)return t;const n=this.relations.find(r=>r.propertyPath===e);if(n&&n.joinColumns.length===1)return n.joinColumns[0]}findColumnWithPropertyPathStrict(e){return this.columns.find(t=>t.propertyPath===e)}findColumnsWithPropertyPath(e){const t=this.columns.find(r=>r.propertyPath===e);if(t)return[t];const n=this.findRelationWithPropertyPath(e);return n&&n.joinColumns?n.joinColumns:[]}hasRelationWithPropertyPath(e){return this.relations.some(t=>t.propertyPath===e)}findRelationWithPropertyPath(e){return this.relations.find(t=>t.propertyPath===e)}hasEmbeddedWithPropertyPath(e){return this.allEmbeddeds.some(t=>t.propertyPath===e)}findEmbeddedWithPropertyPath(e){return this.allEmbeddeds.find(t=>t.propertyPath===e)}mapPropertyPathsToColumns(e){return e.map(t=>{const n=this.findColumnWithPropertyPath(t);if(n==null)throw new Tr(t,this);return n})}extractRelationValuesFromEntity(e,t){const n=[];return t.forEach(r=>{const s=r.getEntityValue(e);Array.isArray(s)?s.forEach(a=>n.push([r,a,ur.getInverseEntityMetadata(a,r)])):s&&n.push([r,s,ur.getInverseEntityMetadata(s,r)])}),n}findInheritanceMetadata(e){if(this.inheritancePattern==="STI"&&this.childEntityMetadatas.length>0){let t;return this.discriminatorColumn&&(t=e[this.discriminatorColumn.propertyName]),this.childEntityMetadatas.find(n=>t===n.discriminatorValue||e.constructor===n.target)||this}return this}static getInverseEntityMetadata(e,t){return t.inverseEntityMetadata.findInheritanceMetadata(e)}static createPropertyPath(e,t,n=""){const r=[];return Object.keys(t).forEach(s=>{const a=n?n+"."+s:s;if(e.hasEmbeddedWithPropertyPath(a)){const o=this.createPropertyPath(e,t[s],a);r.push(...o)}else{const o=n?n+"."+s:s;r.push(o)}}),r}static difference(e,t){return e.filter(n=>!t.find(r=>We.compareIds(n,r)))}static getValueMap(e,t,n){return t.reduce((r,s)=>{const a=s.getEntityValueMap(e,n);if(!(r===void 0||a===null||a===void 0))return We.mergeDeep(r,a)},{})}build(){var e;const t=this.connection.namingStrategy,n=this.connection.options.entityPrefix,r=this.connection.options.entitySkipConstructor;this.engine=this.tableMetadataArgs.engine,this.database=this.tableMetadataArgs.type==="entity-child"&&this.parentEntityMetadata?this.parentEntityMetadata.database:this.tableMetadataArgs.database,this.tableMetadataArgs.schema?this.schema=this.tableMetadataArgs.schema:this.tableMetadataArgs.type==="entity-child"&&this.parentEntityMetadata?this.schema=this.parentEntityMetadata.schema:!((e=this.connection.options)===null||e===void 0)&&e.hasOwnProperty("schema")&&(this.schema=this.connection.options.schema),this.givenTableName=this.tableMetadataArgs.type==="entity-child"&&this.parentEntityMetadata?this.parentEntityMetadata.givenTableName:this.tableMetadataArgs.name,this.synchronize=this.tableMetadataArgs.synchronize!==!1,this.targetName=typeof this.tableMetadataArgs.target=="function"?this.tableMetadataArgs.target.name:this.tableMetadataArgs.target,this.tableMetadataArgs.type==="closure-junction"?this.tableNameWithoutPrefix=t.closureJunctionTableName(this.givenTableName):this.tableMetadataArgs.type==="entity-child"&&this.parentEntityMetadata?this.tableNameWithoutPrefix=t.tableName(this.parentEntityMetadata.targetName,this.parentEntityMetadata.givenTableName):(this.tableNameWithoutPrefix=t.tableName(this.targetName,this.givenTableName),this.tableMetadataArgs.type==="junction"&&this.connection.driver.maxAliasLength&&this.connection.driver.maxAliasLength>0&&this.tableNameWithoutPrefix.length>this.connection.driver.maxAliasLength&&(this.tableNameWithoutPrefix=DC(this.tableNameWithoutPrefix,{separator:"_",segmentLength:3}))),this.tableName=n?t.prefixTableName(n,this.tableNameWithoutPrefix):this.tableNameWithoutPrefix,this.target=this.target?this.target:this.tableName,this.name=this.targetName?this.targetName:this.tableName,this.expression=this.tableMetadataArgs.expression,this.withoutRowid=this.tableMetadataArgs.withoutRowid===!0,this.tablePath=this.connection.driver.buildTableName(this.tableName,this.schema,this.database),this.orderBy=typeof this.tableMetadataArgs.orderBy=="function"?this.tableMetadataArgs.orderBy(this.propertiesMap):this.tableMetadataArgs.orderBy,r!==void 0&&(this.isAlwaysUsingConstructor=!r),this.isJunction=this.tableMetadataArgs.type==="closure-junction"||this.tableMetadataArgs.type==="junction",this.isClosureJunction=this.tableMetadataArgs.type==="closure-junction"}registerColumn(e){this.ownColumns.indexOf(e)===-1&&(this.ownColumns.push(e),this.columns=this.embeddeds.reduce((t,n)=>t.concat(n.columnsFromTree),this.ownColumns),this.primaryColumns=this.columns.filter(t=>t.isPrimary),this.hasMultiplePrimaryKeys=this.primaryColumns.length>1,this.hasUUIDGeneratedColumns=this.columns.filter(t=>t.isGenerated||t.generationStrategy==="uuid").length>0,this.propertiesMap=this.createPropertiesMap(),this.childEntityMetadatas&&this.childEntityMetadatas.forEach(t=>t.registerColumn(e)))}createPropertiesMap(){const e={};return this.columns.forEach(t=>We.mergeDeep(e,t.createValueMap(t.propertyPath))),this.relations.forEach(t=>We.mergeDeep(e,t.createValueMap(t.propertyPath))),e}getInsertionReturningColumns(){return this.columns.filter(e=>e.default!==void 0||e.isGenerated||e.isCreateDate||e.isUpdateDate||e.isDeleteDate||e.isVersion)}}class Kd{constructor(e){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=e}}class Vw{constructor(e){this.queryRunner=e}async insert(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity);const n=e.metadata.getEntityIdMap(t);let r="";n&&(r=await this.getEntityPath(e,n));const s=e.metadata.treeParentRelation.joinColumns.map(a=>a.referencedColumn.getEntityValue(e.insertedValueSet)).join("_");await this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set({[e.metadata.materializedPathColumn.propertyPath]:r+s+"."}).where(e.identifier).execute()}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find(d=>Object.entries(e.identifier).every(([h,f])=>d[h]===f)));const r=e.metadata.treeParentRelation.getEntityValue(n),s=this.getEntityParentReferencedColumnMap(e,r),a=this.getEntityParentReferencedColumnMap(e,t);if(We.compareIds(s,a))return;let o="";a&&(o=await this.getEntityPath(e,a));let l="";s&&(l=await this.getEntityPath(e,s)||"");const c=e.metadata.treeParentRelation.joinColumns.map(d=>d.referencedColumn.getEntityValue(n)).join("_"),u=e.metadata.materializedPathColumn.propertyPath;await this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set({[u]:()=>"REPLACE(".concat(this.queryRunner.connection.driver.escape(u),", '").concat(l).concat(c,".', '").concat(o).concat(c,".')")}).where("".concat(u," LIKE :path"),{path:"".concat(l).concat(c,".%")}).execute()}getEntityParentReferencedColumnMap(e,t){if(t)return ur.getValueMap(t,e.metadata.treeParentRelation.joinColumns.map(n=>n.referencedColumn).filter(n=>n!=null),{skipNulls:!0})}getEntityPath(e,t){const n=e.metadata,r=(Array.isArray(t)?t:[t]).map(s=>n.ensureEntityIdMap(s));return this.queryRunner.manager.createQueryBuilder().select(e.metadata.targetName+"."+e.metadata.materializedPathColumn.propertyPath,"path").from(e.metadata.target,e.metadata.targetName).where(new Kd(s=>{for(const a of r)s.orWhere(new Kd(o=>o.where(a)))})).getRawOne().then(s=>s?s.path:"")}}class d4{constructor(e,t,n){this.hasExecutableOperations=!1,this.insertSubjects=[],this.updateSubjects=[],this.removeSubjects=[],this.softRemoveSubjects=[],this.recoverSubjects=[],this.queryRunner=e,this.allSubjects=t,this.options=n,this.validate(),this.recompute()}async execute(){let e;(!this.options||this.options.listeners!==!1)&&(e=this.broadcastBeforeEventsForAll(),e.promises.length>0&&await Promise.all(e.promises)),e&&e.count>0&&(this.insertSubjects.forEach(t=>t.recompute()),this.updateSubjects.forEach(t=>t.recompute()),this.removeSubjects.forEach(t=>t.recompute()),this.softRemoveSubjects.forEach(t=>t.recompute()),this.recoverSubjects.forEach(t=>t.recompute()),this.recompute()),this.insertSubjects=new Uw(this.insertSubjects).sort("insert"),await this.executeInsertOperations(),this.updateSubjects=this.allSubjects.filter(t=>t.mustBeUpdated),await this.executeUpdateOperations(),this.removeSubjects=new Uw(this.removeSubjects).sort("delete"),await this.executeRemoveOperations(),this.softRemoveSubjects=this.allSubjects.filter(t=>t.mustBeSoftRemoved),await this.executeSoftRemoveOperations(),this.recoverSubjects=this.allSubjects.filter(t=>t.mustBeRecovered),await this.executeRecoverOperations(),await this.updateSpecialColumnsInPersistedEntities(),(!this.options||this.options.listeners!==!1)&&(e=this.broadcastAfterEventsForAll(),e.promises.length>0&&await Promise.all(e.promises))}validate(){this.allSubjects.forEach(e=>{if(e.mustBeUpdated&&e.mustBeRemoved)throw new CF(e)})}recompute(){new u4().compute(this.allSubjects),this.insertSubjects=this.allSubjects.filter(e=>e.mustBeInserted),this.updateSubjects=this.allSubjects.filter(e=>e.mustBeUpdated),this.removeSubjects=this.allSubjects.filter(e=>e.mustBeRemoved),this.softRemoveSubjects=this.allSubjects.filter(e=>e.mustBeSoftRemoved),this.recoverSubjects=this.allSubjects.filter(e=>e.mustBeRecovered),this.hasExecutableOperations=this.insertSubjects.length>0||this.updateSubjects.length>0||this.removeSubjects.length>0||this.softRemoveSubjects.length>0||this.recoverSubjects.length>0}broadcastBeforeEventsForAll(){const e=new Km;return this.insertSubjects.length&&this.insertSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeInsertEvent(e,t.metadata,t.entity)),this.updateSubjects.length&&this.updateSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeUpdateEvent(e,t.metadata,t.entity,t.databaseEntity,t.diffColumns,t.diffRelations)),this.removeSubjects.length&&this.removeSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),this.softRemoveSubjects.length&&this.softRemoveSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeSoftRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),this.recoverSubjects.length&&this.recoverSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastBeforeRecoverEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),e}broadcastAfterEventsForAll(){const e=new Km;return this.insertSubjects.length&&this.insertSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterInsertEvent(e,t.metadata,t.entity)),this.updateSubjects.length&&this.updateSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterUpdateEvent(e,t.metadata,t.entity,t.databaseEntity,t.diffColumns,t.diffRelations)),this.removeSubjects.length&&this.removeSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),this.softRemoveSubjects.length&&this.softRemoveSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterSoftRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),this.recoverSubjects.length&&this.recoverSubjects.forEach(t=>this.queryRunner.broadcaster.broadcastAfterRecoverEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier)),e}async executeInsertOperations(){const[e,t]=this.groupBulkSubjects(this.insertSubjects,"insert");for(const n of t){const r=e[n],s=[],a=[],o=[];if(this.queryRunner.connection.driver.options.type==="mongodb"?r.forEach(l=>{l.metadata.createDateColumn&&l.entity&&(l.entity[l.metadata.createDateColumn.databaseName]=new Date),l.metadata.updateDateColumn&&l.entity&&(l.entity[l.metadata.updateDateColumn.databaseName]=new Date),l.createValueSetAndPopChangeMap(),a.push(l),s.push(l.entity)}):this.queryRunner.connection.driver.options.type==="oracle"?r.forEach(l=>{o.push(l)}):r.forEach(l=>{l.changeMaps.length===0||l.metadata.treeType||this.queryRunner.connection.driver.options.type==="oracle"||this.queryRunner.connection.driver.options.type==="sap"?o.push(l):(a.push(l),s.push(l.createValueSetAndPopChangeMap()))}),ue.isMongoEntityManager(this.queryRunner.manager)){const l=await this.queryRunner.manager.insert(r[0].metadata.target,s);r.forEach((c,u)=>{c.identifier=l.identifiers[u],c.generatedMap=l.generatedMaps[u],c.insertedValueSet=s[u]})}else{if(s.length>0){const l=await this.queryRunner.manager.createQueryBuilder().insert().into(r[0].metadata.target).values(s).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1).execute();a.forEach((c,u)=>{c.identifier=l.identifiers[u],c.generatedMap=l.generatedMaps[u],c.insertedValueSet=s[u]})}if(o.length>0)for(const l of o)l.insertedValueSet=l.createValueSetAndPopChangeMap(),l.metadata.treeType==="nested-set"&&await new Tp(this.queryRunner).insert(l),await this.queryRunner.manager.createQueryBuilder().insert().into(l.metadata.target).values(l.insertedValueSet).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1).execute().then(c=>{l.identifier=c.identifiers[0],l.generatedMap=c.generatedMaps[0]}),l.metadata.treeType==="closure-table"?await new Sp(this.queryRunner).insert(l):l.metadata.treeType==="materialized-path"&&await new Vw(this.queryRunner).insert(l)}r.forEach(l=>{l.generatedMap&&l.metadata.columns.forEach(c=>{const u=c.getEntityValue(l.generatedMap);if(u!=null){const d=this.queryRunner.connection.driver.prepareHydratedValue(u,c);c.setEntityValue(l.generatedMap,d)}})})}}async executeUpdateOperations(){const e=async s=>{if(!s.identifier)throw new Ru(s);if(ue.isMongoEntityManager(this.queryRunner.manager)){const a=this.cloneMongoSubjectEntity(s);s.metadata.objectIdColumn&&s.metadata.objectIdColumn.propertyName&&delete a[s.metadata.objectIdColumn.propertyName],s.metadata.createDateColumn&&s.metadata.createDateColumn.propertyName&&delete a[s.metadata.createDateColumn.propertyName],s.metadata.updateDateColumn&&s.metadata.updateDateColumn.propertyName&&(a[s.metadata.updateDateColumn.propertyName]=new Date),await this.queryRunner.manager.update(s.metadata.target,s.identifier,a)}else{const a=s.createValueSetAndPopChangeMap();switch(s.metadata.treeType){case"nested-set":await new Tp(this.queryRunner).update(s);break;case"closure-table":await new Sp(this.queryRunner).update(s);break;case"materialized-path":await new Vw(this.queryRunner).update(s);break}const o=this.queryRunner.manager.createQueryBuilder().update(s.metadata.target).set(a).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1);s.entity?o.whereEntity(s.identifier):o.where(s.identifier);let c=(await o.execute()).generatedMaps[0];c&&(s.metadata.columns.forEach(u=>{const d=u.getEntityValue(c);if(d!=null){const h=this.queryRunner.connection.driver.prepareHydratedValue(d,u);u.setEntityValue(c,h)}}),s.generatedMap||(s.generatedMap={}),Object.assign(s.generatedMap,c))}},t=[],n=[];for(const s of this.updateSubjects)s.metadata.treeType==="nested-set"?t.push(s):n.push(s);const r=new Promise(async(s,a)=>{for(const o of t)try{await e(o)}catch(l){a(l)}s()});await Promise.all([...n.map(e),r])}async executeRemoveOperations(){const[e,t]=this.groupBulkSubjects(this.removeSubjects,"delete");for(const n of t){const r=e[n],s=r.map(a=>{if(!a.identifier)throw new Ru(a);return a.identifier});if(ue.isMongoEntityManager(this.queryRunner.manager))await this.queryRunner.manager.delete(r[0].metadata.target,s);else{switch(r[0].metadata.treeType){case"nested-set":await new Tp(this.queryRunner).remove(r);break;case"closure-table":await new Sp(this.queryRunner).remove(r);break}await this.queryRunner.manager.createQueryBuilder().delete().from(r[0].metadata.target).where(s).callListeners(!1).execute()}}}cloneMongoSubjectEntity(e){const t={};if(e.entity)for(const n of e.metadata.columns)We.mergeDeep(t,n.getEntityValueMap(e.entity));return t}async executeSoftRemoveOperations(){await Promise.all(this.softRemoveSubjects.map(async e=>{if(!e.identifier)throw new Ru(e);let t;if(ue.isMongoEntityManager(this.queryRunner.manager)){const n=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete n[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete n[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(n[e.metadata.updateDateColumn.propertyName]=new Date),e.metadata.deleteDateColumn&&e.metadata.deleteDateColumn.propertyName&&(n[e.metadata.deleteDateColumn.propertyName]=new Date),t=await this.queryRunner.manager.update(e.metadata.target,e.identifier,n)}else{const n=this.queryRunner.manager.createQueryBuilder().softDelete().from(e.metadata.target).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1);e.entity?n.whereEntity(e.identifier):n.where(e.identifier),t=await n.execute()}e.generatedMap=t.generatedMaps[0],e.generatedMap&&e.metadata.columns.forEach(n=>{const r=n.getEntityValue(e.generatedMap);if(r!=null){const s=this.queryRunner.connection.driver.prepareHydratedValue(r,n);n.setEntityValue(e.generatedMap,s)}})}))}async executeRecoverOperations(){await Promise.all(this.recoverSubjects.map(async e=>{if(!e.identifier)throw new Ru(e);let t;if(ue.isMongoEntityManager(this.queryRunner.manager)){const n=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete n[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete n[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(n[e.metadata.updateDateColumn.propertyName]=new Date),e.metadata.deleteDateColumn&&e.metadata.deleteDateColumn.propertyName&&(n[e.metadata.deleteDateColumn.propertyName]=null),t=await this.queryRunner.manager.update(e.metadata.target,e.identifier,n)}else{const n=this.queryRunner.manager.createQueryBuilder().restore().from(e.metadata.target).updateEntity(!(this.options&&this.options.reload===!1)).callListeners(!1);e.entity?n.whereEntity(e.identifier):n.where(e.identifier),t=await n.execute()}e.generatedMap=t.generatedMaps[0],e.generatedMap&&e.metadata.columns.forEach(n=>{const r=n.getEntityValue(e.generatedMap);if(r!=null){const s=this.queryRunner.connection.driver.prepareHydratedValue(r,n);n.setEntityValue(e.generatedMap,s)}})}))}updateSpecialColumnsInPersistedEntities(){this.insertSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.insertSubjects),this.updateSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.updateSubjects),this.softRemoveSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.softRemoveSubjects),this.recoverSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.recoverSubjects),this.removeSubjects.length&&this.removeSubjects.forEach(e=>{e.entity&&e.metadata.primaryColumns.forEach(t=>{t.setEntityValue(e.entity,void 0)})}),this.allSubjects.forEach(e=>{e.entity&&(e.metadata.relationIds.forEach(t=>{t.setValue(e.entity)}),ue.isMongoEntityManager(this.queryRunner.manager)&&e.metadata.objectIdColumn&&e.metadata.objectIdColumn.databaseName&&e.metadata.objectIdColumn.databaseName!==e.metadata.objectIdColumn.propertyName&&delete e.entity[e.metadata.objectIdColumn.databaseName])})}updateSpecialColumnsInInsertedAndUpdatedEntities(e){e.forEach(t=>{t.entity&&(t.metadata.columns.forEach(n=>{t.metadata.childEntityMetadatas.length>0&&t.metadata.childEntityMetadatas.map(r=>r.target).indexOf(n.target)!==-1||n.isVirtual||(n.isNullable&&n.getEntityValue(t.entity)===void 0&&n.setEntityValue(t.entity,null),t.updatedRelationMaps.length>0&&t.updatedRelationMaps.forEach(r=>{r.relation.joinColumns.forEach(s=>{s.isVirtual!==!0&&s.setEntityValue(t.entity,ht.isObject(r.value)?s.referencedColumn.getEntityValue(r.value):r.value)})}))}),t.generatedMap&&this.queryRunner.manager.merge(t.metadata.target,t.entity,t.generatedMap))})}groupBulkSubjects(e,t){const n={},r=[],s=e.some(o=>o.metadata.getInsertionReturningColumns().length>0),a=t==="delete"||this.queryRunner.connection.driver.isReturningSqlSupported("insert")||s===!1;return e.forEach((o,l)=>{const c=a||o.metadata.isJunction?o.metadata.name:o.metadata.name+"_"+l;n[c]?n[c].push(o):(n[c]=[o],r.push(c))}),[n,r]}}class Xr{constructor(e){this["@instanceof"]=Symbol.for("Subject"),this.identifier=void 0,this.entityWithFulfilledIds=void 0,this.databaseEntityLoaded=!1,this.changeMaps=[],this.canBeInserted=!1,this.canBeUpdated=!1,this.mustBeRemoved=!1,this.canBeSoftRemoved=!1,this.canBeRecovered=!1,this.updatedRelationMaps=[],this.diffColumns=[],this.diffRelations=[],this.metadata=e.metadata,this.entity=e.entity,this.parentSubject=e.parentSubject,e.canBeInserted!==void 0&&(this.canBeInserted=e.canBeInserted),e.canBeUpdated!==void 0&&(this.canBeUpdated=e.canBeUpdated),e.mustBeRemoved!==void 0&&(this.mustBeRemoved=e.mustBeRemoved),e.canBeSoftRemoved!==void 0&&(this.canBeSoftRemoved=e.canBeSoftRemoved),e.canBeRecovered!==void 0&&(this.canBeRecovered=e.canBeRecovered),e.identifier!==void 0&&(this.identifier=e.identifier),e.changeMaps!==void 0&&this.changeMaps.push(...e.changeMaps),this.recompute()}get mustBeInserted(){return this.canBeInserted&&!this.databaseEntity}get mustBeUpdated(){return this.canBeUpdated&&this.identifier&&(this.databaseEntityLoaded===!1||this.databaseEntityLoaded&&this.databaseEntity)&&this.changeMaps.length>0}get mustBeSoftRemoved(){return this.canBeSoftRemoved&&this.identifier&&(this.databaseEntityLoaded===!1||this.databaseEntityLoaded&&this.databaseEntity)}get mustBeRecovered(){return this.canBeRecovered&&this.identifier&&(this.databaseEntityLoaded===!1||this.databaseEntityLoaded&&this.databaseEntity)}createValueSetAndPopChangeMap(){const e=[],t=this.changeMaps.reduce((n,r)=>{let s=r.value;ue.isSubject(s)&&(s=s.insertedValueSet?s.insertedValueSet:s.entity);let a;if(this.metadata.isJunction&&r.column)a=r.column.createValueMap(r.column.referencedColumn.getEntityValue(s));else if(r.column)a=r.column.createValueMap(s);else if(r.relation)if(ht.isObject(s)&&!Buffer.isBuffer(s)){const o=r.relation.getRelationIdMap(s);if(o===void 0)return e.push(r),this.canBeUpdated=!0,n;a=r.relation.createValueMap(o),this.updatedRelationMaps.push({relation:r.relation,value:o})}else a=r.relation.createValueMap(s),this.updatedRelationMaps.push({relation:r.relation,value:s});return We.mergeDeep(n,a),n},{});return this.changeMaps=e,t}recompute(){this.entity?(this.entityWithFulfilledIds=Object.assign({},this.entity),this.parentSubject&&this.metadata.primaryColumns.forEach(e=>{if(e.relationMetadata&&e.relationMetadata.inverseEntityMetadata===this.parentSubject.metadata){const t=e.referencedColumn.getEntityValue(this.parentSubject.entity);e.setEntityValue(this.entityWithFulfilledIds,t)}}),this.identifier=this.metadata.getEntityIdMap(this.entityWithFulfilledIds)):this.databaseEntity&&(this.identifier=this.metadata.getEntityIdMap(this.databaseEntity))}}class h4{constructor(e){this.subjects=e}build(){this.subjects.forEach(e=>{e.metadata.oneToManyRelations.forEach(t=>{t.persistenceEnabled!==!1&&this.buildForSubjectRelation(e,t)})})}buildForSubjectRelation(e,t){var n;let r=[];if(e.databaseEntity){const o=t.getEntityValue(e.databaseEntity);o&&(r=o.map(l=>t.inverseEntityMetadata.getEntityIdMap(l)))}let s=t.getEntityValue(e.entity);if(s===null&&(s=[]),s===void 0)return;const a=[];s.forEach(o=>{let l=t.inverseEntityMetadata.getEntityIdMap(o),c=this.subjects.find(d=>d.entity===o);if(c&&(l=c.identifier),!l){if(!c)return;c.changeMaps.push({relation:t.inverseRelation,value:e});return}r.find(d=>We.compareIds(l,d))||(c||(c=new Xr({metadata:t.inverseEntityMetadata,parentSubject:e,canBeUpdated:!0,identifier:l}),this.subjects.push(c)),c.changeMaps.push({relation:t.inverseRelation,value:e})),a.push(l)}),((n=t.inverseRelation)===null||n===void 0?void 0:n.orphanedRowAction)!=="disable"&&ur.difference(r,a).forEach(o=>{const l=new Xr({metadata:t.inverseEntityMetadata,parentSubject:e,identifier:o});!t.inverseRelation||t.inverseRelation.orphanedRowAction==="nullify"?(l.canBeUpdated=!0,l.changeMaps=[{relation:t.inverseRelation,value:null}]):t.inverseRelation.orphanedRowAction==="delete"?l.mustBeRemoved=!0:t.inverseRelation.orphanedRowAction==="soft-delete"&&(l.canBeSoftRemoved=!0),this.subjects.push(l)})}}class f4{constructor(e){this.subjects=e}build(){this.subjects.forEach(e=>{e.metadata.oneToOneRelations.forEach(t=>{t.isOwning||t.persistenceEnabled===!1||this.buildForSubjectRelation(e,t)})})}buildForSubjectRelation(e,t){let n;e.databaseEntity&&(n=t.getEntityValue(e.databaseEntity));let r=t.getEntityValue(e.entity);if(r===void 0)return;if(r===null){if(n){const l=new Xr({metadata:t.inverseEntityMetadata,parentSubject:e,canBeUpdated:!0,identifier:n,changeMaps:[{relation:t.inverseRelation,value:null}]});this.subjects.push(l)}return}let s=t.inverseEntityMetadata.getEntityIdMap(r),a=this.subjects.find(l=>!!l.entity&&l.entity===r);if(a&&(s=a.identifier),!s){if(!a)return;a.changeMaps.push({relation:t.inverseRelation,value:e})}n&&We.compareIds(s,n)||(a||(a=new Xr({metadata:t.inverseEntityMetadata,canBeUpdated:!0,identifier:s}),this.subjects.push(a)),a.changeMaps.push({relation:t.inverseRelation,value:e}))}}class Ww{constructor(e){this.subjects=e}build(){this.subjects.forEach(e=>{e.entity&&e.metadata.manyToManyRelations.forEach(t=>{t.persistenceEnabled!==!1&&this.buildForSubjectRelation(e,t)})})}buildForAllRemoval(e){e.databaseEntity&&e.metadata.manyToManyRelations.forEach(t=>{if(t.persistenceEnabled===!1)return;t.getEntityValue(e.databaseEntity).forEach(r=>{const s=new Xr({metadata:t.junctionEntityMetadata,parentSubject:e,mustBeRemoved:!0,identifier:this.buildJunctionIdentifier(e,t,r)});this.subjects.push(s)})})}buildForSubjectRelation(e,t){let n=[];e.databaseEntity&&(n=t.getEntityValue(e.databaseEntity));let r=t.getEntityValue(e.entity);if(r===null&&(r=[]),!Array.isArray(r))return;r.forEach(o=>{let l=t.inverseEntityMetadata.getEntityIdMap(o);const c=this.subjects.find(m=>m.entity===o);if(c&&(l=c.identifier),!l&&!c||n.find(m=>We.compareIds(m,l)))return;const d=t.isOwning?e:c||o,h=t.isOwning?c||o:e,f=new Xr({metadata:t.junctionEntityMetadata,parentSubject:e,canBeInserted:!0});this.subjects.push(f),t.junctionEntityMetadata.ownerColumns.forEach(m=>{f.changeMaps.push({column:m,value:d})}),t.junctionEntityMetadata.inverseColumns.forEach(m=>{f.changeMaps.push({column:m,value:h})})});const s=[];r.forEach(o=>{let l=t.inverseEntityMetadata.getEntityIdMap(o);const c=this.subjects.find(u=>u.entity===o);c&&(l=c.identifier),l!=null&&s.push(l)}),n.filter(o=>!s.find(l=>We.compareIds(l,o))).forEach(o=>{const l=new Xr({metadata:t.junctionEntityMetadata,parentSubject:e,mustBeRemoved:!0,identifier:this.buildJunctionIdentifier(e,t,o)});this.subjects.push(l)})}buildJunctionIdentifier(e,t,n){const r=t.isOwning?e.entity:n,s=t.isOwning?n:e.entity,a={};return t.junctionEntityMetadata.ownerColumns.forEach(o=>{We.mergeDeep(a,o.createValueMap(o.referencedColumn.getEntityValue(r)))}),t.junctionEntityMetadata.inverseColumns.forEach(o=>{We.mergeDeep(a,o.createValueMap(o.referencedColumn.getEntityValue(s)))}),a}}class p4{constructor(e,t){this.queryRunner=e,this.subjects=t}async load(e){const t=this.groupByEntityTargets().map(async n=>{const r=[],s=[];if(n.subjects.forEach(c=>{c.databaseEntity||!c.identifier||(r.push(c.identifier),s.push(c))}),!r.length)return;const a=[];e==="save"||e==="soft-remove"||e==="recover"?n.subjects.forEach(c=>{c.metadata.relations.forEach(u=>{u.getEntityValue(c.entityWithFulfilledIds)!==void 0&&a.indexOf(u.propertyPath)===-1&&a.push(u.propertyPath)})}):a.push(...n.subjects[0].metadata.manyToManyRelations.map(c=>c.propertyPath));const o={loadEagerRelations:!1,loadRelationIds:{relations:a,disableMixedMap:!0},withDeleted:!0};let l=[];this.queryRunner.connection.driver.options.type==="mongodb"?l=await this.queryRunner.manager.getRepository(n.target).findByIds(r,o):l=await this.queryRunner.manager.getRepository(n.target).createQueryBuilder().setFindOptions(o).whereInIds(r).getMany(),l.forEach(c=>{this.findByPersistEntityLike(n.target,c).forEach(d=>{d.databaseEntity=c,d.identifier||(d.identifier=d.metadata.hasAllPrimaryKeys(c)?d.metadata.getEntityIdMap(c):void 0)})});for(let c of s)c.databaseEntityLoaded=!0});await Promise.all(t)}findByPersistEntityLike(e,t){return this.subjects.filter(n=>n.entity?n.entity===t?!0:n.metadata.target===e&&n.metadata.compareEntities(n.entityWithFulfilledIds,t):!1)}groupByEntityTargets(){return this.subjects.reduce((e,t)=>{let n=e.find(r=>r.target===t.metadata.target);return n||(n={target:t.metadata.target,subjects:[]},e.push(n)),n.subjects.push(t),e},[])}}class m4{constructor(e){this.allSubjects=e}build(e,t){e.metadata.extractRelationValuesFromEntity(e.entity,e.metadata.relations).forEach(([n,r,s])=>{if(r==null||!n.isCascadeInsert&&!n.isCascadeUpdate&&!n.isCascadeSoftRemove&&!n.isCascadeRecover||!ht.isObject(r))return;const a=this.findByPersistEntityLike(s.target,r);if(a){a.canBeInserted===!1&&(a.canBeInserted=n.isCascadeInsert===!0&&t==="save"),a.canBeUpdated===!1&&(a.canBeUpdated=n.isCascadeUpdate===!0&&t==="save"),a.canBeSoftRemoved===!1&&(a.canBeSoftRemoved=n.isCascadeSoftRemove===!0&&t==="soft-remove"),a.canBeRecovered===!1&&(a.canBeRecovered=n.isCascadeRecover===!0&&t==="recover");return}const o=new Xr({metadata:s,parentSubject:e,entity:r,canBeInserted:n.isCascadeInsert===!0&&t==="save",canBeUpdated:n.isCascadeUpdate===!0&&t==="save",canBeSoftRemoved:n.isCascadeSoftRemove===!0&&t==="soft-remove",canBeRecovered:n.isCascadeRecover===!0&&t==="recover"});this.allSubjects.push(o),this.build(o,t)})}findByPersistEntityLike(e,t){return this.allSubjects.find(n=>n.entity?n.entity===t?!0:n.metadata.target===e&&n.metadata.compareEntities(n.entityWithFulfilledIds,t):!1)}}class $u{constructor(e,t,n,r,s,a){this.connection=e,this.queryRunner=t,this.mode=n,this.target=r,this.entity=s,this.options=a}async execute(){if(!this.entity||typeof this.entity!="object")return Promise.reject(new hF(this.mode,this.entity));await Promise.resolve();const e=this.queryRunner||this.connection.createQueryRunner();let t=e.data;this.options&&this.options.data&&(e.data=this.options.data);try{const n=Array.isArray(this.entity)?this.entity:[this.entity],r=this.options&&this.options.chunk&&this.options.chunk>0?We.chunk(n,this.options.chunk):[n],a=(await Promise.all(r.map(async l=>{const c=[];l.forEach(d=>{const h=this.target?this.target:d.constructor;if(h===Object)throw new lF(this.mode);let f=this.connection.getMetadata(h).findInheritanceMetadata(d);c.push(new Xr({metadata:f,entity:d,canBeInserted:this.mode==="save",canBeUpdated:this.mode==="save",mustBeRemoved:this.mode==="remove",canBeSoftRemoved:this.mode==="soft-remove",canBeRecovered:this.mode==="recover"}))});const u=new m4(c);return c.forEach(d=>{u.build(d,this.mode)}),await new p4(e,c).load(this.mode),this.mode==="save"||this.mode==="soft-remove"||this.mode==="recover"?(new h4(c).build(),new f4(c).build(),new Ww(c).build()):c.forEach(d=>{d.mustBeRemoved&&new Ww(c).buildForAllRemoval(d)}),new d4(e,c,this.options)}))).filter(l=>l.hasExecutableOperations);if(a.length===0)return;let o=!1;try{e.isTransactionActive||this.connection.driver.transactionSupport!=="none"&&(!this.options||this.options.transaction!==!1)&&(o=!0,await e.startTransaction());for(const l of a)await l.execute();o===!0&&await e.commitTransaction()}catch(l){if(o)try{await e.rollbackTransaction()}catch(c){}throw l}}finally{e.data=t,this.queryRunner||await e.release()}}}class WC{constructor(e,t){this["@instanceof"]=Symbol.for("EntityManager"),this.repositories=new Map,this.treeRepositories=[],this.plainObjectToEntityTransformer=new jF,this.connection=e,t&&(this.queryRunner=t,ht.assign(this.queryRunner,{manager:this}))}async transaction(e,t){const n=typeof e=="string"?e:void 0,r=typeof e=="function"?e:t;if(!r)throw new te("Transaction method requires callback in second parameter if isolation level is supplied.");if(this.queryRunner&&this.queryRunner.isReleased)throw new LC;const s=this.queryRunner||this.connection.createQueryRunner();try{await s.startTransaction(n);const a=await r(s.manager);return await s.commitTransaction(),a}catch(a){try{await s.rollbackTransaction()}catch(o){}throw a}finally{this.queryRunner||await s.release()}}async query(e,t){return this.connection.query(e,t,this.queryRunner)}createQueryBuilder(e,t,n){return t?this.connection.createQueryBuilder(e,t,n||this.queryRunner):this.connection.createQueryBuilder(e||n||this.queryRunner)}hasId(e,t){const n=arguments.length===2?e:e.constructor,r=arguments.length===2?t:e;return this.connection.getMetadata(n).hasId(r)}getId(e,t){const n=arguments.length===2?e:e.constructor,r=arguments.length===2?t:e;return this.connection.getMetadata(n).getEntityIdMixedMap(r)}create(e,t){const n=this.connection.getMetadata(e);if(!t)return n.create(this.queryRunner);if(Array.isArray(t))return t.map(s=>this.create(e,s));const r=n.create(this.queryRunner);return this.plainObjectToEntityTransformer.transform(r,t,n,!0),r}merge(e,t,...n){const r=this.connection.getMetadata(e);return n.forEach(s=>this.plainObjectToEntityTransformer.transform(t,s,r)),t}async preload(e,t){const n=this.connection.getMetadata(e),s=await new VF(this.connection.manager).transform(t,n);if(s)return this.merge(e,s,t)}save(e,t,n){let r=arguments.length>1&&(typeof e=="function"||ue.isEntitySchema(e)||typeof e=="string")?e:void 0;const s=r?t:e,a=r?n:t;return ue.isEntitySchema(r)&&(r=r.options.name),Array.isArray(s)&&s.length===0?Promise.resolve(s):new $u(this.connection,this.queryRunner,"save",r,s,a).execute().then(()=>s)}remove(e,t,n){const r=arguments.length>1&&(typeof e=="function"||ue.isEntitySchema(e)||typeof e=="string")?e:void 0,s=r?t:e,a=r?n:t;return Array.isArray(s)&&s.length===0?Promise.resolve(s):new $u(this.connection,this.queryRunner,"remove",r,s,a).execute().then(()=>s)}softRemove(e,t,n){let r=arguments.length>1&&(typeof e=="function"||ue.isEntitySchema(e)||typeof e=="string")?e:void 0;const s=r?t:e,a=r?n:t;return ue.isEntitySchema(r)&&(r=r.options.name),Array.isArray(s)&&s.length===0?Promise.resolve(s):new $u(this.connection,this.queryRunner,"soft-remove",r,s,a).execute().then(()=>s)}recover(e,t,n){let r=arguments.length>1&&(typeof e=="function"||ue.isEntitySchema(e)||typeof e=="string")?e:void 0;const s=r?t:e,a=r?n:t;return ue.isEntitySchema(r)&&(r=r.options.name),Array.isArray(s)&&s.length===0?Promise.resolve(s):new $u(this.connection,this.queryRunner,"recover",r,s,a).execute().then(()=>s)}async insert(e,t){return this.createQueryBuilder().insert().into(e).values(t).execute()}async upsert(e,t,n){const r=this.connection.getMetadata(e);let s;Array.isArray(n)?s={conflictPaths:n}:s=n;let a;Array.isArray(t)?a=t:a=[t];const o=r.mapPropertyPathsToColumns(Array.isArray(s.conflictPaths)?s.conflictPaths:Object.keys(s.conflictPaths)),l=r.columns.filter(c=>!o.includes(c)&&a.some(u=>typeof c.getEntityValue(u)<"u"));return this.createQueryBuilder().insert().into(e).values(a).orUpdate([...o,...l].map(c=>c.databaseName),o.map(c=>c.databaseName),{skipUpdateIfNoValuesChanged:s.skipUpdateIfNoValuesChanged,indexPredicate:s.indexPredicate,upsertType:s.upsertType||this.connection.driver.supportedUpsertTypes[0]}).execute()}update(e,t,n){return t==null||t===""||Array.isArray(t)&&t.length===0?Promise.reject(new te("Empty criteria(s) are not allowed for the update method.")):typeof t=="string"||typeof t=="number"||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().update(e).set(n).whereInIds(t).execute():this.createQueryBuilder().update(e).set(n).where(t).execute()}delete(e,t){return t==null||t===""||Array.isArray(t)&&t.length===0?Promise.reject(new te("Empty criteria(s) are not allowed for the delete method.")):typeof t=="string"||typeof t=="number"||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().delete().from(e).whereInIds(t).execute():this.createQueryBuilder().delete().from(e).where(t).execute()}softDelete(e,t){return t==null||t===""||Array.isArray(t)&&t.length===0?Promise.reject(new te("Empty criteria(s) are not allowed for the delete method.")):typeof t=="string"||typeof t=="number"||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().softDelete().from(e).whereInIds(t).execute():this.createQueryBuilder().softDelete().from(e).where(t).execute()}restore(e,t){return t==null||t===""||Array.isArray(t)&&t.length===0?Promise.reject(new te("Empty criteria(s) are not allowed for the delete method.")):typeof t=="string"||typeof t=="number"||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().restore().from(e).whereInIds(t).execute():this.createQueryBuilder().restore().from(e).where(t).execute()}exists(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,jn.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getExists()}count(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,jn.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getCount()}countBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getCount()}sum(e,t,n){return this.callAggregateFun(e,"SUM",t,n)}average(e,t,n){return this.callAggregateFun(e,"AVG",t,n)}minimum(e,t,n){return this.callAggregateFun(e,"MIN",t,n)}maximum(e,t,n){return this.callAggregateFun(e,"MAX",t,n)}async callAggregateFun(e,t,n,r={}){const s=this.connection.getMetadata(e),a=await this.createQueryBuilder(e,s.name).setFindOptions({where:r}).select("".concat(t,"(").concat(this.connection.driver.escape(String(n)),")"),t).getRawOne();return a[t]===null?null:parseFloat(a[t])}async find(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,jn.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getMany()}async findBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getMany()}findAndCount(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,jn.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getManyAndCount()}findAndCountBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getManyAndCount()}async findByIds(e,t){if(!t.length)return Promise.resolve([]);const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).andWhereInIds(t).getMany()}async findOne(e,t){let r=this.connection.getMetadata(e).name;if(t&&t.join&&(r=t.join.alias),!t.where)throw new Error("You must provide selection conditions in order to find a single row.");return this.createQueryBuilder(e,r).setFindOptions({...t,take:1}).getOne()}async findOneBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t,take:1}).getOne()}async findOneById(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({take:1}).whereInIds(n.ensureEntityIdMap(t)).getOne()}async findOneOrFail(e,t){return this.findOne(e,t).then(n=>n===null?Promise.reject(new Gm(e,t)):Promise.resolve(n))}async findOneByOrFail(e,t){return this.findOneBy(e,t).then(n=>n===null?Promise.reject(new Gm(e,t)):Promise.resolve(n))}async clear(e){const t=this.connection.getMetadata(e),n=this.queryRunner||this.connection.createQueryRunner();try{return await n.clearTable(t.tablePath)}finally{this.queryRunner||await n.release()}}async increment(e,t,n,r){const s=this.connection.getMetadata(e),a=s.findColumnWithPropertyPath(n);if(!a)throw new te("Column ".concat(n," was not found in ").concat(s.targetName," entity."));if(isNaN(Number(r)))throw new te('Value "'.concat(r,'" is not a number.'));const o=n.split(".").reduceRight((l,c)=>({[c]:l}),()=>this.connection.driver.escape(a.databaseName)+" + "+r);return this.createQueryBuilder(e,"entity").update(e).set(o).where(t).execute()}async decrement(e,t,n,r){const s=this.connection.getMetadata(e),a=s.findColumnWithPropertyPath(n);if(!a)throw new te("Column ".concat(n," was not found in ").concat(s.targetName," entity."));if(isNaN(Number(r)))throw new te('Value "'.concat(r,'" is not a number.'));const o=n.split(".").reduceRight((l,c)=>({[c]:l}),()=>this.connection.driver.escape(a.databaseName)+" - "+r);return this.createQueryBuilder(e,"entity").update(e).set(o).where(t).execute()}getRepository(e){const t=this.repositories.get(e);if(t)return t;if(this.connection.driver.options.type==="mongodb"){const n=new $F(e,this,this.queryRunner);return this.repositories.set(e,n),n}else{const n=new jC(e,this,this.queryRunner);return this.repositories.set(e,n),n}}getTreeRepository(e){if(this.connection.driver.treeSupport===!1)throw new cF(this.connection.driver);const t=this.treeRepositories.find(r=>r.target===e);if(t)return t;const n=new FF(e,this,this.queryRunner);return this.treeRepositories.push(n),n}getMongoRepository(e){return this.connection.getMongoRepository(e)}withRepository(e){const t=e.constructor,{target:n,manager:r,queryRunner:s,...a}=e;return Object.assign(new t(e.target,this),{...a})}getCustomRepository(e){const t=rr().entityRepositories.find(s=>s.target===(typeof e=="function"?e:e.constructor));if(!t)throw new MC(e);const n=t.entity?this.connection.getMetadata(t.entity):void 0,r=new t.target(this,n);if(r instanceof WF)r.manager||(r.manager=this);else{if(!n)throw new pF(e);r.manager=this,r.metadata=n}return r}async release(){if(!this.queryRunner)throw new SF;return this.queryRunner.release()}}class g4 extends WC{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SqljsEntityManager"),this.driver=e.driver}async loadDatabase(e){await this.driver.load(e)}async saveDatabase(e){await this.driver.save(e)}exportDatabase(){return this.driver.export()}}class y4{create(e,t){return e.driver.options.type==="mongodb"?new IF(e):e.driver.options.type==="sqljs"?new g4(e,t):new WC(e,t)}}class rs{constructor(e){this["@instanceof"]=Symbol.for("View"),this.indices=[],e&&(this.database=e.database,this.schema=e.schema,this.name=e.name,this.expression=e.expression,this.materialized=!!e.materialized)}clone(){return new rs({database:this.database,schema:this.schema,name:this.name,expression:this.expression,materialized:this.materialized})}addIndex(e){this.indices.push(e)}removeIndex(e){const t=this.indices.find(n=>n.name===e.name);t&&this.indices.splice(this.indices.indexOf(t),1)}static create(e,t){const n={database:e.database,schema:e.schema,name:t.buildTableName(e.tableName,e.schema,e.database),expression:e.expression,materialized:e.tableMetadataArgs.materialized};return new rs(n)}}class Hw{static viewMetadataCmp(e,t){return!e||!t?0:e.dependsOn&&(e.dependsOn.has(t.target)||e.dependsOn.has(t.name))?1:t.dependsOn&&(t.dependsOn.has(e.target)||t.dependsOn.has(e.name))?-1:0}}class of{constructor(e){this.connection=e,this["@instanceof"]=Symbol.for("RdbmsSchemaBuilder")}async build(){this.queryRunner=this.connection.createQueryRunner(),this.currentDatabase=this.connection.driver.database,this.currentSchema=this.connection.driver.schema;const e=this.connection.driver.options.type!=="cockroachdb"&&this.connection.driver.options.type!=="spanner"&&this.connection.options.migrationsTransactionMode!=="none";await this.queryRunner.beforeMigration(),e&&await this.queryRunner.startTransaction();try{await this.createMetadataTableIfNecessary(this.queryRunner);const t=this.entityToSyncMetadatas.map(r=>this.getTablePath(r)),n=this.viewEntityToSyncMetadatas.map(r=>this.getTablePath(r));await this.queryRunner.getTables(t),await this.queryRunner.getViews(n),await this.executeSchemaSyncOperationsInProperOrder(),this.connection.queryResultCache&&await this.connection.queryResultCache.synchronize(this.queryRunner),e&&await this.queryRunner.commitTransaction()}catch(t){try{e&&await this.queryRunner.rollbackTransaction()}catch(n){}throw t}finally{await this.queryRunner.afterMigration(),await this.queryRunner.release()}}async createMetadataTableIfNecessary(e){(this.viewEntityToSyncMetadatas.length>0||this.hasGeneratedColumns())&&await this.createTypeormMetadataTable(e)}async log(){this.queryRunner=this.connection.createQueryRunner();try{const e=this.entityToSyncMetadatas.map(n=>this.getTablePath(n)),t=this.viewEntityToSyncMetadatas.map(n=>this.getTablePath(n));return await this.queryRunner.getTables(e),await this.queryRunner.getViews(t),this.queryRunner.enableSqlMemory(),await this.executeSchemaSyncOperationsInProperOrder(),this.connection.queryResultCache&&await this.connection.queryResultCache.synchronize(this.queryRunner),this.queryRunner.getMemorySql()}finally{this.queryRunner.disableSqlMemory(),await this.queryRunner.release()}}get entityToSyncMetadatas(){return this.connection.entityMetadatas.filter(e=>e.synchronize&&e.tableType!=="entity-child"&&e.tableType!=="view")}get viewEntityToSyncMetadatas(){return this.connection.entityMetadatas.filter(e=>e.tableType==="view"&&e.synchronize).sort(Hw.viewMetadataCmp)}hasGeneratedColumns(){return this.connection.entityMetadatas.some(e=>e.columns.some(t=>t.generatedType))}async executeSchemaSyncOperationsInProperOrder(){await this.dropOldViews(),await this.dropOldForeignKeys(),await this.dropOldIndices(),await this.dropOldChecks(),await this.dropOldExclusions(),await this.dropCompositeUniqueConstraints(),await this.renameColumns(),await this.createNewTables(),await this.dropRemovedColumns(),await this.addNewColumns(),await this.updatePrimaryKeys(),await this.updateExistColumns(),await this.createNewIndices(),await this.createNewChecks(),await this.createNewExclusions(),await this.createCompositeUniqueConstraints(),await this.createForeignKeys(),await this.createViews(),await this.createNewViewIndices()}getTablePath(e){const t=this.connection.driver.parseTableName(e);return this.connection.driver.buildTableName(t.tableName,t.schema||this.currentSchema,t.database||this.currentDatabase)}async dropOldForeignKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=t.foreignKeys.filter(r=>{const s=e.foreignKeys.find(a=>r.name===a.name&&this.getTablePath(r)===this.getTablePath(a.referencedEntityMetadata));return!s||s.onDelete&&s.onDelete!==r.onDelete||s.onUpdate&&s.onUpdate!==r.onUpdate});n.length!==0&&(this.connection.logger.logSchemaBuild("dropping old foreign keys of ".concat(t.name,": ").concat(n.map(r=>r.name).join(", "))),await this.queryRunner.dropForeignKeys(t,n))}}async renameTables(){}async renameColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(a=>this.getTablePath(a)===this.getTablePath(e));if(!t||e.columns.length!==t.columns.length)continue;const n=e.columns.filter(a=>!a.isVirtualProperty).filter(a=>!t.columns.find(o=>o.name===a.databaseName&&o.type===this.connection.driver.normalizeType(a)&&o.isNullable===a.isNullable&&o.isUnique===this.connection.driver.normalizeIsUnique(a)));if(n.length===0||n.length>1)continue;const r=t.columns.filter(a=>!e.columns.find(o=>!o.isVirtualProperty&&o.databaseName===a.name&&this.connection.driver.normalizeType(o)===a.type&&o.isNullable===a.isNullable&&this.connection.driver.normalizeIsUnique(o)===a.isUnique));if(r.length===0||r.length>1)continue;const s=r[0].clone();s.name=n[0].databaseName,this.connection.logger.logSchemaBuild('renaming column "'.concat(r[0].name,'" in "').concat(t.name,'" to "').concat(s.name,'"')),await this.queryRunner.renameColumn(t,r[0],s)}}async dropOldIndices(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=t.indices.filter(r=>{const s=e.indices.find(a=>a.name===r.name);return s?s.synchronize===!1?!1:s.isUnique!==r.isUnique||s.isSpatial!==r.isSpatial||this.connection.driver.isFullTextColumnTypeSupported()&&s.isFulltext!==r.isFulltext||s.columns.length!==r.columnNames.length?!0:!s.columns.every(a=>r.columnNames.indexOf(a.databaseName)!==-1):!0}).map(async r=>{this.connection.logger.logSchemaBuild('dropping an index: "'.concat(r.name,'" from table ').concat(t.name)),await this.queryRunner.dropIndex(t,r)});await Promise.all(n)}if(this.connection.options.type==="postgres"){const e=this.queryRunner;for(const t of this.viewEntityToSyncMetadatas){const n=this.queryRunner.loadedViews.find(s=>this.getTablePath(s)===this.getTablePath(t));if(!n)continue;const r=n.indices.filter(s=>{const a=t.indices.find(o=>o.name===s.name);return a?a.synchronize===!1?!1:a.isUnique!==s.isUnique||a.isSpatial!==s.isSpatial||this.connection.driver.isFullTextColumnTypeSupported()&&a.isFulltext!==s.isFulltext||a.columns.length!==s.columnNames.length?!0:!a.columns.every(o=>s.columnNames.indexOf(o.databaseName)!==-1):!0}).map(async s=>{this.connection.logger.logSchemaBuild('dropping an index: "'.concat(s.name,'" from view ').concat(n.name)),await e.dropViewIndex(n,s)});await Promise.all(r)}}}async dropOldChecks(){if(!(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"))for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=t.checks.filter(r=>!e.checks.find(s=>s.name===r.name));n.length!==0&&(this.connection.logger.logSchemaBuild("dropping old check constraint: ".concat(n.map(r=>'"'.concat(r.name,'"')).join(", "),' from table "').concat(t.name,'"')),await this.queryRunner.dropCheckConstraints(t,n))}}async dropCompositeUniqueConstraints(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=t.uniques.filter(r=>r.columnNames.length>1&&!e.uniques.find(s=>s.name===r.name));n.length!==0&&(this.connection.logger.logSchemaBuild("dropping old unique constraint: ".concat(n.map(r=>'"'.concat(r.name,'"')).join(", "),' from table "').concat(t.name,'"')),await this.queryRunner.dropUniqueConstraints(t,n))}}async dropOldExclusions(){if(this.connection.driver.options.type==="postgres")for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=t.exclusions.filter(r=>!e.exclusions.find(s=>s.name===r.name));n.length!==0&&(this.connection.logger.logSchemaBuild("dropping old exclusion constraint: ".concat(n.map(r=>'"'.concat(r.name,'"')).join(", "),' from table "').concat(t.name,'"')),await this.queryRunner.dropExclusionConstraints(t,n))}}async createNewTables(){for(const e of this.entityToSyncMetadatas){if(this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e)))continue;this.connection.logger.logSchemaBuild("creating a new table: ".concat(this.getTablePath(e)));const n=Ht.create(e,this.connection.driver);await this.queryRunner.createTable(n,!1,!1),this.queryRunner.loadedTables.push(n)}}async createViews(){for(const e of this.viewEntityToSyncMetadatas){if(this.queryRunner.loadedViews.find(r=>{const s=typeof r.expression=="string"?r.expression.trim():r.expression(this.connection).getQuery(),a=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.getTablePath(r)===this.getTablePath(e)&&s===a}))continue;this.connection.logger.logSchemaBuild("creating a new view: ".concat(this.getTablePath(e)));const n=rs.create(e,this.connection.driver);await this.queryRunner.createView(n,!0),this.queryRunner.loadedViews.push(n)}}async dropOldViews(){const e=[],t=this.viewEntityToSyncMetadatas,n=new Map;for(const a of this.queryRunner.loadedViews){const o=t.find(l=>this.getTablePath(a)===this.getTablePath(l));o&&n.set(a,o)}for(const a of this.queryRunner.loadedViews){const o=n.get(a);if(!o)continue;const l=typeof a.expression=="string"?a.expression.trim():a.expression(this.connection).getQuery(),c=typeof o.expression=="string"?o.expression.trim():o.expression(this.connection).getQuery();l!==c&&(this.connection.logger.logSchemaBuild("dropping an old view: ".concat(a.name)),e.push(a))}const r=a=>{const o=n.get(a);let l=[a];if(!o)return l;for(const[c,u]of n.entries())c!==a&&u.dependsOn&&(u.dependsOn.has(o.target)||u.dependsOn.has(o.name))&&(l=l.concat(r(c)));return l},s=new Set(e.map(a=>r(a)).reduce((a,o)=>a.concat(o),[]).sort((a,o)=>Hw.viewMetadataCmp(n.get(a),n.get(o))).reverse());for(const a of s)await this.queryRunner.dropView(a);this.queryRunner.loadedViews=this.queryRunner.loadedViews.filter(a=>!s.has(a))}async dropRemovedColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=t.columns.filter(r=>!e.columns.find(s=>s.isVirtualProperty||s.databaseName===r.name));n.length!==0&&(this.connection.logger.logSchemaBuild("columns dropped in ".concat(t.name,": ")+n.map(r=>r.name).join(", ")),await this.queryRunner.dropColumns(t,n))}}async addNewColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(a=>this.getTablePath(a)===this.getTablePath(e));if(!t)continue;const n=e.columns.filter(a=>!a.isVirtualProperty&&!t.columns.find(o=>o.name===a.databaseName));if(n.length===0)continue;const s=this.metadataColumnsToTableColumnOptions(n).map(a=>new ii(a));s.length!==0&&(this.connection.logger.logSchemaBuild("new columns added: "+n.map(a=>a.databaseName).join(", ")),await this.queryRunner.addColumns(t,s))}}async updatePrimaryKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===this.getTablePath(e));if(!t)continue;const n=e.columns.filter(s=>s.isPrimary);if(t.columns.filter(s=>s.isPrimary).length!==n.length&&n.length>1){const s=n.map(a=>new ii(td.createTableColumnOptions(a,this.connection.driver)));await this.queryRunner.updatePrimaryKeys(t,s)}}}async updateExistColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===this.getTablePath(e));if(!t)continue;const n=this.connection.driver.findChangedColumns(t.columns,e.columns);if(n.length===0)continue;for(const s of n)await this.dropColumnReferencedForeignKeys(this.getTablePath(e),s.databaseName);for(const s of n)await this.dropColumnCompositeIndices(this.getTablePath(e),s.databaseName);if(!(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="spanner"))for(const s of n)await this.dropColumnCompositeUniques(this.getTablePath(e),s.databaseName);const r=n.map(s=>{const a=t.columns.find(c=>c.name===s.databaseName),o=td.createTableColumnOptions(s,this.connection.driver),l=new ii(o);return{oldColumn:a,newColumn:l}});r.length!==0&&(this.connection.logger.logSchemaBuild('columns changed in "'.concat(t.name,'". updating: ')+n.map(s=>s.databaseName).join(", ")),await this.queryRunner.changeColumns(t,r))}}async createNewIndices(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=e.indices.filter(r=>!t.indices.find(s=>s.name===r.name)&&r.synchronize===!0).map(r=>rn.create(r));n.length!==0&&(this.connection.logger.logSchemaBuild("adding new indices ".concat(n.map(r=>'"'.concat(r.name,'"')).join(", "),' in table "').concat(t.name,'"')),await this.queryRunner.createIndices(t,n))}}async createNewViewIndices(){if(this.connection.options.type!=="postgres"||!Ue.isPostgresFamily(this.connection.driver))return;const e=this.queryRunner;for(const t of this.viewEntityToSyncMetadatas){const n=this.queryRunner.loadedViews.find(s=>{const a=typeof s.expression=="string"?s.expression.trim():s.expression(this.connection).getQuery(),o=typeof t.expression=="string"?t.expression.trim():t.expression(this.connection).getQuery();return this.getTablePath(s)===this.getTablePath(t)&&a===o});if(!n||!n.materialized)continue;const r=t.indices.filter(s=>!n.indices.find(a=>a.name===s.name)&&s.synchronize===!0).map(s=>rn.create(s));r.length!==0&&(this.connection.logger.logSchemaBuild("adding new indices ".concat(r.map(s=>'"'.concat(s.name,'"')).join(", "),' in view "').concat(n.name,'"')),await e.createViewIndices(n,r))}}async createNewChecks(){if(!(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"))for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=e.checks.filter(r=>!t.checks.find(s=>s.name===r.name)).map(r=>cr.create(r));n.length!==0&&(this.connection.logger.logSchemaBuild("adding new check constraints: ".concat(n.map(r=>'"'.concat(r.name,'"')).join(", "),' in table "').concat(t.name,'"')),await this.queryRunner.createCheckConstraints(t,n))}}async createCompositeUniqueConstraints(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=e.uniques.filter(r=>r.columns.length>1&&!t.uniques.find(s=>s.name===r.name)).map(r=>Un.create(r));n.length!==0&&(this.connection.logger.logSchemaBuild("adding new unique constraints: ".concat(n.map(r=>'"'.concat(r.name,'"')).join(", "),' in table "').concat(t.name,'"')),await this.queryRunner.createUniqueConstraints(t,n))}}async createNewExclusions(){if(this.connection.driver.options.type==="postgres")for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(r=>this.getTablePath(r)===this.getTablePath(e));if(!t)continue;const n=e.exclusions.filter(r=>!t.exclusions.find(s=>s.name===r.name)).map(r=>_a.create(r));n.length!==0&&(this.connection.logger.logSchemaBuild("adding new exclusion constraints: ".concat(n.map(r=>'"'.concat(r.name,'"')).join(", "),' in table "').concat(t.name,'"')),await this.queryRunner.createExclusionConstraints(t,n))}}async createForeignKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===this.getTablePath(e));if(!t)continue;const n=e.foreignKeys.filter(s=>!t.foreignKeys.find(a=>a.name===s.name&&this.getTablePath(a)===this.getTablePath(s.referencedEntityMetadata)));if(n.length===0)continue;const r=n.map(s=>Fi.create(s,this.connection.driver));this.connection.logger.logSchemaBuild("creating a foreign keys: ".concat(n.map(s=>s.name).join(", "),' on table "').concat(t.name,'"')),await this.queryRunner.createForeignKeys(t,r)}}async dropColumnReferencedForeignKeys(e,t){const n=this.queryRunner.loadedTables.find(a=>this.getTablePath(a)===e);if(!n)return;const r=[],s=n.foreignKeys.find(a=>a.columnNames.indexOf(t)!==-1);if(s){const a=n.clone();a.foreignKeys=[s],r.push(a),n.removeForeignKey(s)}for(const a of this.queryRunner.loadedTables){const o=a.foreignKeys.filter(l=>this.getTablePath(l)===e&&l.referencedColumnNames.indexOf(t)!==-1);if(o.length>0){const l=a.clone();l.foreignKeys=o,r.push(l),o.forEach(c=>a.removeForeignKey(c))}}if(r.length>0)for(const a of r)this.connection.logger.logSchemaBuild("dropping related foreign keys of ".concat(a.name,": ").concat(a.foreignKeys.map(o=>o.name).join(", "))),await this.queryRunner.dropForeignKeys(a,a.foreignKeys)}async dropColumnCompositeIndices(e,t){const n=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===e);if(!n)return;const r=n.indices.filter(s=>s.columnNames.length>1&&s.columnNames.indexOf(t)!==-1);r.length!==0&&(this.connection.logger.logSchemaBuild('dropping related indices of "'.concat(e,'"."').concat(t,'": ').concat(r.map(s=>s.name).join(", "))),await this.queryRunner.dropIndices(n,r))}async dropColumnCompositeUniques(e,t){const n=this.queryRunner.loadedTables.find(s=>this.getTablePath(s)===e);if(!n)return;const r=n.uniques.filter(s=>s.columnNames.length>1&&s.columnNames.indexOf(t)!==-1);r.length!==0&&(this.connection.logger.logSchemaBuild('dropping related unique constraints of "'.concat(e,'"."').concat(t,'": ').concat(r.map(s=>s.name).join(", "))),await this.queryRunner.dropUniqueConstraints(n,r))}metadataColumnsToTableColumnOptions(e){return e.map(t=>td.createTableColumnOptions(t,this.connection.driver))}async createTypeormMetadataTable(e){const t=this.currentSchema,n=this.currentDatabase,r=this.connection.driver.buildTableName(this.connection.metadataTableName,t,n),s=this.connection.driver.options.type==="spanner";await e.createTable(new Ht({database:n,schema:t,name:r,columns:[{name:"type",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataType}),isNullable:!1,isPrimary:s},{name:"database",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataDatabase}),isNullable:!0,isPrimary:s},{name:"schema",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataSchema}),isNullable:!0,isPrimary:s},{name:"table",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataTable}),isNullable:!0,isPrimary:s},{name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataName}),isNullable:!0,isPrimary:s},{name:"value",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataValue}),isNullable:!0,isPrimary:s}]}),!0)}}class Wc{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["int","integer","tinyint","smallint","mediumint","bigint","unsigned big int","int2","int8","integer","character","varchar","varying character","nchar","native character","nvarchar","text","clob","text","blob","real","double","double precision","float","real","numeric","decimal","boolean","date","time","datetime","json"],this.supportedUpsertTypes=["on-conflict-do-update"],this.withLengthColumnTypes=["character","varchar","varying character","nchar","native character","nvarchar","text","blob","clob"],this.spatialTypes=[],this.withPrecisionColumnTypes=["real","double","double precision","float","real","numeric","decimal","date","time","datetime"],this.withScaleColumnTypes=["real","double","double precision","float","real","numeric","decimal"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"datetime('now')",updateDate:"datetime",updateDateDefault:"datetime('now')",deleteDate:"datetime",deleteDateNullable:!0,version:"integer",treeLevel:"integer",migrationId:"integer",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.cteCapabilities={enabled:!0,requiresRecursiveHint:!0},this.attachedDatabases={},this.connection=e,this.options=e.options,this.database=Ue.buildDriverOptions(this.options).database}async connect(){this.databaseConnection=await this.createDatabaseConnection()}afterConnect(){return Promise.resolve()}async disconnect(){return new Promise((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close(n=>n?t(n):e())})}hasAttachedDatabases(){return!!Object.keys(this.attachedDatabases).length}getAttachedDatabaseHandleByRelativePath(e){var t,n;return(n=(t=this.attachedDatabases)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.attachHandle}getAttachedDatabasePathRelativeByHandle(e){var t;return(t=Object.values(this.attachedDatabases).find(({attachHandle:n})=>e===n))===null||t===void 0?void 0:t.attachFilepathRelative}createSchemaBuilder(){return new of(this.connection)}preparePersistentValue(e,t){return t.transformer&&(e=yn.transformTo(t.transformer,e)),e==null?e:t.type===Boolean||t.type==="boolean"?e===!0?1:0:t.type==="date"?et.mixedDateToDateString(e):t.type==="time"?et.mixedDateToTimeString(e):t.type==="datetime"||t.type===Date?et.mixedDateToUtcDatetimeString(e):t.type==="json"||t.type==="simple-json"?et.simpleJsonToString(e):t.type==="simple-array"?et.simpleArrayToString(e):t.type==="simple-enum"?et.simpleEnumToString(e):e}prepareHydratedValue(e,t){return e==null?t.transformer?yn.transformFrom(t.transformer,e):e:(t.type===Boolean||t.type==="boolean"?e=!!e:t.type==="datetime"||t.type===Date?(e&&typeof e=="string"&&(/^\d\d\d\d-\d\d-\d\d \d\d:\d\d/.test(e)&&(e=e.replace(" ","T")),/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d(:\d\d(\.\d\d\d)?)?$/.test(e)&&(e+="Z")),e=et.normalizeHydratedDate(e)):t.type==="date"?e=et.mixedDateToDateString(e):t.type==="time"?e=et.mixedTimeToString(e):t.type==="json"||t.type==="simple-json"?e=et.stringToSimpleJson(e):t.type==="simple-array"?e=et.stringToSimpleArray(e):t.type==="simple-enum"?e=et.stringToSimpleEnum(e,t):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=yn.transformFrom(t.transformer,e)),e)}escapeQueryWithParameters(e,t,n){const r=Object.keys(n).map(s=>typeof n[s]=="boolean"?n[s]===!0?1:0:n[s]instanceof Date?et.mixedDateToUtcDatetimeString(n[s]):n[s]);return!t||!Object.keys(t).length?[e,r]:(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o)=>{if(!t.hasOwnProperty(o))return s;let l=t[o];return a?l.map(c=>(r.push(c),this.createParameter(o,r.length-1))).join(", "):typeof l=="function"?l():typeof l=="number"?String(l):typeof l=="boolean"?(r.push(+l),this.createParameter(o,r.length-1)):l instanceof Date?(r.push(et.mixedDateToUtcDatetimeString(l)),this.createParameter(o,r.length-1)):(r.push(l),this.createParameter(o,r.length-1))}),[e,r])}escape(e){return'"'+e+'"'}buildTableName(e,t,n){return e}parseTableName(e){var t;const n=this.database,r=void 0;if(ue.isTable(e)||ue.isView(e)){const a=this.parseTableName(e.schema?'"'.concat(e.schema,'"."').concat(e.name,'"'):e.name);return{database:e.database||a.database||n,schema:e.schema||a.schema||r,tableName:a.tableName}}if(ue.isTableForeignKey(e)){const a=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||a.database||n,schema:e.referencedSchema||a.schema||r,tableName:a.tableName}}if(ue.isEntityMetadata(e))return{database:e.database||n,schema:e.schema||r,tableName:e.tableName};const s=e.split(".");return s.length===3?{database:s[0]||n,schema:s[1]||r,tableName:s[2]}:s.length===2?{database:(t=this.getAttachedDatabasePathRelativeByHandle(s[0]))!==null&&t!==void 0?t:n,schema:s[0],tableName:s[1]}:{database:n,schema:r,tableName:e}}normalizeType(e){return e.type===Number||e.type==="int"?"integer":e.type===String?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":e.type==="uuid"?"varchar":e.type==="simple-array"||e.type==="simple-json"?"text":e.type==="simple-enum"?"varchar":e.type||""}normalizeDefault(e){const t=e.default;if(typeof t=="number")return""+t;if(typeof t=="boolean")return t?"1":"0";if(typeof t=="function")return t();if(typeof t=="string")return"'".concat(t,"'");if(t!=null)return"".concat(t)}normalizeIsUnique(e){return e.entityMetadata.uniques.some(t=>t.columns.length===1&&t.columns[0]===e)}getColumnLength(e){return e.length?e.length.toString():""}createFullType(e){let t=e.type;return e.enum?"varchar":(e.length?t+="("+e.length+")":e.precision!==null&&e.precision!==void 0&&e.scale!==null&&e.scale!==void 0?t+="("+e.precision+","+e.scale+")":e.precision!==null&&e.precision!==void 0&&(t+="("+e.precision+")"),e.isArray&&(t+=" array"),t)}obtainMasterConnection(){return Promise.resolve()}obtainSlaveConnection(){return Promise.resolve()}createGeneratedMap(e,t,n,r){const s=e.generatedColumns.reduce((a,o)=>{let l;return o.generationStrategy==="increment"&&t&&(l=t-r+n+1),l?We.mergeDeep(a,o.createValueMap(l)):a},{});return Object.keys(s).length>0?s:void 0}findChangedColumns(e,t){return t.filter(n=>{const r=e.find(a=>a.name===n.databaseName);return r?r.name!==n.databaseName||r.type!==this.normalizeType(n)||r.length!==n.length||r.precision!==n.precision||r.scale!==n.scale||this.normalizeDefault(n)!==r.default||r.isPrimary!==n.isPrimary||r.isNullable!==n.isNullable||r.generatedType!==n.generatedType||r.asExpression!==n.asExpression||r.isUnique!==this.normalizeIsUnique(n)||r.enum&&n.enum&&!We.isArraysEqual(r.enum,n.enum.map(a=>a+""))||n.generationStrategy!=="uuid"&&r.isGenerated!==n.isGenerated:!1})}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"?"}createDatabaseConnection(){throw new te("Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers")}loadDependencies(){}}class W{constructor(e,t){this.query=e,this.parameters=t,this["@instanceof"]=Symbol.for("Query")}}class Ou{constructor(){this.upQueries=[],this.downQueries=[]}}class lf{constructor(){this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.loadedTables=[],this.loadedViews=[],this.sqlMemoryMode=!1,this.sqlInMemory=new Ou,this.transactionDepth=0,this.cachedTablePaths={}}async beforeMigration(){}async afterMigration(){}async getTable(e){return this.loadedTables=await this.loadTables([e]),this.loadedTables.length>0?this.loadedTables[0]:void 0}async getTables(e){return e?(this.loadedTables=await this.loadTables(e),this.loadedTables):await this.loadTables(e)}async getView(e){return this.loadedViews=await this.loadViews([e]),this.loadedViews.length>0?this.loadedViews[0]:void 0}async getViews(e){return this.loadedViews=await this.loadViews(e),this.loadedViews}enableSqlMemory(){this.sqlInMemory=new Ou,this.sqlMemoryMode=!0}disableSqlMemory(){this.sqlInMemory=new Ou,this.sqlMemoryMode=!1}clearSqlMemory(){this.sqlInMemory=new Ou}getMemorySql(){return this.sqlInMemory}async executeMemoryUpSql(){for(const{query:e,parameters:t}of this.sqlInMemory.upQueries)await this.query(e,t)}async executeMemoryDownSql(){for(const{query:e,parameters:t}of this.sqlInMemory.downQueries.reverse())await this.query(e,t)}getReplicationMode(){return this.mode}async getCachedView(e){const t=this.loadedViews.find(r=>r.name===e);if(t)return t;const n=await this.loadViews([e]);if(n.length>0)return this.loadedViews.push(n[0]),n[0];throw new te('View "'.concat(e,'" does not exist.'))}async getCachedTable(e){if(e in this.cachedTablePaths){const n=this.cachedTablePaths[e],r=this.loadedTables.find(s=>this.getTablePath(s)===n);if(r)return r}const t=await this.loadTables([e]);if(t.length>0){const n=this.getTablePath(t[0]),r=this.loadedTables.find(s=>this.getTablePath(s)===n);return r||(this.cachedTablePaths[e]=this.getTablePath(t[0]),this.loadedTables.push(t[0]),t[0])}else throw new te('Table "'.concat(e,'" does not exist.'))}replaceCachedTable(e,t){const n=this.getTablePath(e),r=this.loadedTables.find(s=>this.getTablePath(s)===n);for(const[s,a]of Object.entries(this.cachedTablePaths))a===n&&(this.cachedTablePaths[s]=this.getTablePath(t));r&&(r.database=t.database,r.schema=t.schema,r.name=t.name,r.columns=t.columns,r.indices=t.indices,r.foreignKeys=t.foreignKeys,r.uniques=t.uniques,r.checks=t.checks,r.justCreated=t.justCreated,r.engine=t.engine)}getTablePath(e){const t=this.connection.driver.parseTableName(e);return this.connection.driver.buildTableName(t.tableName,t.schema,t.database)}getTypeormMetadataTableName(){const e=this.connection.driver.options;return this.connection.driver.buildTableName(this.connection.metadataTableName,e.schema,e.database)}selectTypeormMetadataSql({database:e,schema:t,table:n,type:r,name:s}){const a=this.connection.createQueryBuilder(),o=a.select().from(this.getTypeormMetadataTableName(),"t").where("".concat(a.escape("type")," = :type"),{type:r}).andWhere("".concat(a.escape("name")," = :name"),{name:s});e&&o.andWhere("".concat(a.escape("database")," = :database"),{database:e}),t&&o.andWhere("".concat(a.escape("schema")," = :schema"),{schema:t}),n&&o.andWhere("".concat(a.escape("table")," = :table"),{table:n});const[l,c]=o.getQueryAndParameters();return new W(l,c)}insertTypeormMetadataSql({database:e,schema:t,table:n,type:r,name:s,value:a}){const[o,l]=this.connection.createQueryBuilder().insert().into(this.getTypeormMetadataTableName()).values({database:e,schema:t,table:n,type:r,name:s,value:a}).getQueryAndParameters();return new W(o,l)}deleteTypeormMetadataSql({database:e,schema:t,table:n,type:r,name:s}){const a=this.connection.createQueryBuilder(),o=a.delete().from(this.getTypeormMetadataTableName()).where("".concat(a.escape("type")," = :type"),{type:r}).andWhere("".concat(a.escape("name")," = :name"),{name:s});e&&o.andWhere("".concat(a.escape("database")," = :database"),{database:e}),t&&o.andWhere("".concat(a.escape("schema")," = :schema"),{schema:t}),n&&o.andWhere("".concat(a.escape("table")," = :table"),{table:n});const[l,c]=o.getQueryAndParameters();return new W(l,c)}isColumnChanged(e,t,n,r,s=!0){return e.charset!==t.charset||e.collation!==t.collation||e.precision!==t.precision||e.scale!==t.scale||e.width!==t.width||e.zerofill!==t.zerofill||e.unsigned!==t.unsigned||e.asExpression!==t.asExpression||n&&e.default!==t.default||e.onUpdate!==t.onUpdate||e.isNullable!==t.isNullable||r&&e.comment!==t.comment||s&&this.isEnumChanged(e,t)}isEnumChanged(e,t){return!We.isArraysEqual(e.enum||[],t.enum||[])}isDefaultColumnLength(e,t,n){if(this.connection.hasMetadata(e.name)){const s=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(s&&this.connection.driver.getColumnLength(s))return!1}return this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].length?this.connection.driver.dataTypeDefaults[t.type].length.toString()===n.toString():!1}isDefaultColumnPrecision(e,t,n){if(this.connection.hasMetadata(e.name)){const s=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(s&&s.precision!==null&&s.precision!==void 0)return!1}return this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].precision!==null&&this.connection.driver.dataTypeDefaults[t.type].precision!==void 0?this.connection.driver.dataTypeDefaults[t.type].precision===n:!1}isDefaultColumnScale(e,t,n){if(this.connection.hasMetadata(e.name)){const s=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(s&&s.scale!==null&&s.scale!==void 0)return!1}return this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].scale!==null&&this.connection.driver.dataTypeDefaults[t.type].scale!==void 0?this.connection.driver.dataTypeDefaults[t.type].scale===n:!1}async executeQueries(e,t){if(ue.isQuery(e)&&(e=[e]),ue.isQuery(t)&&(t=[t]),this.sqlInMemory.upQueries.push(...e),this.sqlInMemory.downQueries.push(...t),this.sqlMemoryMode===!0)return Promise.resolve();for(const{query:n,parameters:r}of e)await this.query(n,r)}generateIndexName(e,t){return this.connection.namingStrategy.indexName(e,t.columnNames,t.where)}}var Ze;(function(i){i.VIEW="VIEW",i.MATERIALIZED_VIEW="MATERIALIZED_VIEW",i.GENERATED_COLUMN="GENERATED_COLUMN"})(Ze||(Ze={}));class sl extends lf{constructor(){super(),this.transactionPromise=null}connect(){return Promise.resolve(this.driver.databaseConnection)}release(){return this.loadedTables=[],this.clearSqlMemory(),Promise.resolve()}async startTransaction(e){if(this.driver.transactionSupport==="none")throw new te("Transactions aren't supported by ".concat(this.connection.driver.options.type,"."));if(this.isTransactionActive&&this.driver.transactionSupport==="simple")throw new uF;if(e&&e!=="READ UNCOMMITTED"&&e!=="SERIALIZABLE")throw new te("SQLite only supports SERIALIZABLE and READ UNCOMMITTED isolation");this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}this.transactionDepth===0?(e&&(e==="READ UNCOMMITTED"?await this.query("PRAGMA read_uncommitted = true"):await this.query("PRAGMA read_uncommitted = false")),await this.query("BEGIN TRANSACTION")):await this.query("SAVEPOINT typeorm_".concat(this.transactionDepth)),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new zi;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.query("COMMIT"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new zi;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.query("ROLLBACK"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}stream(e,t,n,r){throw new te("Stream is not supported by sqlite driver.")}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){return Promise.resolve(!1)}async getCurrentDatabase(){return Promise.resolve(void 0)}async hasSchema(e){throw new te("This driver does not support table schemas")}async getCurrentSchema(){return Promise.resolve(void 0)}async hasTable(e){const t=ue.isTable(e)?e.name:e,n='SELECT * FROM "sqlite_master" WHERE "type" = \'table\' AND "name" = \''.concat(t,"'");return!!(await this.query(n)).length}async hasColumn(e,t){const n=ue.isTable(e)?e.name:e,r="PRAGMA table_xinfo(".concat(this.escapePath(n),")");return!!(await this.query(r)).find(a=>a.name===t)}async createDatabase(e,t){return Promise.resolve()}async dropDatabase(e,t){return Promise.resolve()}async createSchema(e,t){return Promise.resolve()}async dropSchema(e,t){return Promise.resolve()}async createTable(e,t=!1,n=!0,r=!0){const s=[],a=[];if(t&&await this.hasTable(e))return Promise.resolve();s.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),r&&e.indices.forEach(l=>{l.name||(l.name=this.connection.namingStrategy.indexName(e,l.columnNames,l.where)),s.push(this.createIndexSql(e,l)),a.push(this.dropIndexSql(l))});const o=e.columns.filter(l=>l.generatedType&&l.asExpression);for(const l of o){const c=this.insertTypeormMetadataSql({table:e.name,type:Ze.GENERATED_COLUMN,name:l.name,value:l.asExpression}),u=this.deleteTypeormMetadataSql({table:e.name,type:Ze.GENERATED_COLUMN,name:l.name});s.push(c),a.push(u)}await this.executeQueries(s,a)}async dropTable(e,t,n=!0,r=!0){if(t&&!await this.hasTable(e))return Promise.resolve();const s=n,a=ue.isTable(e)?e:await this.getCachedTable(e),o=[],l=[];r&&a.indices.forEach(u=>{o.push(this.dropIndexSql(u)),l.push(this.createIndexSql(a,u))}),o.push(this.dropTableSql(a,t)),l.push(this.createTableSql(a,s));const c=a.columns.filter(u=>u.generatedType&&u.asExpression);for(const u of c){const d=this.deleteTypeormMetadataSql({table:a.name,type:Ze.GENERATED_COLUMN,name:u.name}),h=this.insertTypeormMetadataSql({table:a.name,type:Ze.GENERATED_COLUMN,name:u.name,value:u.asExpression});o.push(d),l.push(h)}await this.executeQueries(o,l)}async createView(e,t=!1){const n=[],r=[];n.push(this.createViewSql(e)),t&&n.push(this.insertViewDefinitionSql(e)),r.push(this.dropViewSql(e)),t&&r.push(this.deleteViewDefinitionSql(e)),await this.executeQueries(n,r)}async dropView(e){const t=ue.isView(e)?e.name:e,n=await this.getCachedView(t),r=[],s=[];r.push(this.deleteViewDefinitionSql(n)),r.push(this.dropViewSql(n)),s.push(this.insertViewDefinitionSql(n)),s.push(this.createViewSql(n)),await this.executeQueries(r,s)}async renameTable(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();r.name=t;const s=new W("ALTER TABLE ".concat(this.escapePath(n.name)," RENAME TO ").concat(this.escapePath(t))),a=new W("ALTER TABLE ".concat(this.escapePath(t)," RENAME TO ").concat(this.escapePath(n.name)));await this.executeQueries(s,a),r.uniques.forEach(o=>{const l=this.connection.namingStrategy.uniqueConstraintName(n,o.columnNames);o.name===l&&(o.name=this.connection.namingStrategy.uniqueConstraintName(r,o.columnNames))}),r.foreignKeys.forEach(o=>{const l=this.connection.namingStrategy.foreignKeyName(n,o.columnNames,this.getTablePath(o),o.referencedColumnNames);o.name===l&&(o.name=this.connection.namingStrategy.foreignKeyName(r,o.columnNames,this.getTablePath(o),o.referencedColumnNames))}),r.indices.forEach(o=>{const l=this.connection.namingStrategy.indexName(n,o.columnNames,o.where);o.name===l&&(o.name=this.connection.namingStrategy.indexName(r,o.columnNames,o.where))}),n.name=r.name,await this.recreateTable(r,n)}async addColumn(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);return this.addColumns(n,[t])}async addColumns(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>r.addColumn(s)),await this.recreateTable(r,n)}async renameColumn(e,t,n){const r=ue.isTable(e)?e:await this.getCachedTable(e),s=ue.isTableColumn(t)?t:r.columns.find(o=>o.name===t);if(!s)throw new te('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));let a;return ue.isTableColumn(n)?a=n:(a=s.clone(),a.name=n),this.changeColumn(r,s,a)}async changeColumn(e,t,n){const r=ue.isTable(e)?e:await this.getCachedTable(e),s=ue.isTableColumn(t)?t:r.columns.find(a=>a.name===t);if(!s)throw new te('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));await this.changeColumns(r,[{oldColumn:s,newColumn:n}])}async changeColumns(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>{s.newColumn.name!==s.oldColumn.name&&(r.findColumnUniques(s.oldColumn).forEach(o=>{const l=this.connection.namingStrategy.uniqueConstraintName(n,o.columnNames);o.columnNames.splice(o.columnNames.indexOf(s.oldColumn.name),1),o.columnNames.push(s.newColumn.name),o.name===l&&(o.name=this.connection.namingStrategy.uniqueConstraintName(r,o.columnNames))}),r.findColumnForeignKeys(s.oldColumn).forEach(o=>{const l=this.connection.namingStrategy.foreignKeyName(n,o.columnNames,this.getTablePath(o),o.referencedColumnNames);o.columnNames.splice(o.columnNames.indexOf(s.oldColumn.name),1),o.columnNames.push(s.newColumn.name),o.name===l&&(o.name=this.connection.namingStrategy.foreignKeyName(r,o.columnNames,this.getTablePath(o),o.referencedColumnNames))}),r.findColumnIndices(s.oldColumn).forEach(o=>{const l=this.connection.namingStrategy.indexName(n,o.columnNames,o.where);o.columnNames.splice(o.columnNames.indexOf(s.oldColumn.name),1),o.columnNames.push(s.newColumn.name),o.name===l&&(o.name=this.connection.namingStrategy.indexName(r,o.columnNames,o.where))}));const a=r.columns.find(o=>o.name===s.oldColumn.name);a&&(r.columns[r.columns.indexOf(a)]=s.newColumn)}),await this.recreateTable(r,n)}async dropColumn(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableColumn(t)?t:n.findColumnByName(t);if(!r)throw new te('Column "'.concat(t,'" was not found in table "').concat(n.name,'"'));await this.dropColumns(n,[r])}async dropColumns(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>{const a=ue.isTableColumn(s)?s:n.findColumnByName(s);if(!a)throw new Error('Column "'.concat(s,'" was not found in table "').concat(n.name,'"'));r.removeColumn(a),r.findColumnUniques(a).forEach(o=>r.removeUniqueConstraint(o)),r.findColumnIndices(a).forEach(o=>r.removeIndex(o)),r.findColumnForeignKeys(a).forEach(o=>r.removeForeignKey(o))}),await this.recreateTable(r,n)}async createPrimaryKey(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();r.columns.forEach(s=>{t.find(a=>a===s.name)&&(s.isPrimary=!0)}),await this.recreateTable(r,n),n.columns.forEach(s=>{t.find(a=>a===s.name)&&(s.isPrimary=!0)})}async updatePrimaryKeys(e,t){await Promise.resolve()}async dropPrimaryKey(e){const t=ue.isTable(e)?e:await this.getCachedTable(e),n=t.clone();n.primaryColumns.forEach(r=>{r.isPrimary=!1}),await this.recreateTable(n,t),t.primaryColumns.forEach(r=>{r.isPrimary=!1})}async createUniqueConstraint(e,t){await this.createUniqueConstraints(e,[t])}async createUniqueConstraints(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>r.addUniqueConstraint(s)),await this.recreateTable(r,n)}async dropUniqueConstraint(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableUnique(t)?t:n.uniques.find(s=>s.name===t);if(!r)throw new te("Supplied unique constraint was not found in table ".concat(n.name));await this.dropUniqueConstraints(n,[r])}async dropUniqueConstraints(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>r.removeUniqueConstraint(s)),await this.recreateTable(r,n)}async createCheckConstraint(e,t){await this.createCheckConstraints(e,[t])}async createCheckConstraints(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>r.addCheckConstraint(s)),await this.recreateTable(r,n)}async dropCheckConstraint(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableCheck(t)?t:n.checks.find(s=>s.name===t);if(!r)throw new te("Supplied check constraint was not found in table ".concat(n.name));await this.dropCheckConstraints(n,[r])}async dropCheckConstraints(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>r.removeCheckConstraint(s)),await this.recreateTable(r,n)}async createExclusionConstraint(e,t){throw new te("Sqlite does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new te("Sqlite does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new te("Sqlite does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new te("Sqlite does not support exclusion constraints.")}async createForeignKey(e,t){await this.createForeignKeys(e,[t])}async createForeignKeys(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>r.addForeignKey(s)),await this.recreateTable(r,n)}async dropForeignKey(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableForeignKey(t)?t:n.foreignKeys.find(s=>s.name===t);if(!r)throw new te("Supplied foreign key was not found in table ".concat(n.name));await this.dropForeignKeys(e,[r])}async dropForeignKeys(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach(s=>r.removeForeignKey(s)),await this.recreateTable(r,n)}async createIndex(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createIndexSql(n,t),s=this.dropIndexSql(t);await this.executeQueries(r,s),n.addIndex(t)}async createIndices(e,t){const n=t.map(r=>this.createIndex(e,r));await Promise.all(n)}async dropIndex(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableIndex(t)?t:n.indices.find(o=>o.name===t);if(!r)throw new te("Supplied index ".concat(t," was not found in table ").concat(n.name));r.name||(r.name=this.generateIndexName(n,r));const s=this.dropIndexSql(r),a=this.createIndexSql(n,r);await this.executeQueries(s,a),n.removeIndex(r)}async dropIndices(e,t){const n=t.map(r=>this.dropIndex(e,r));await Promise.all(n)}async clearTable(e){await this.query("DELETE FROM ".concat(this.escapePath(e)))}async clearDatabase(e){let t;e&&this.driver.getAttachedDatabaseHandleByRelativePath(e)&&(t=this.driver.getAttachedDatabaseHandleByRelativePath(e)),await this.query("PRAGMA foreign_keys = OFF");const n=this.isTransactionActive;n||await this.startTransaction();try{const r=t?"SELECT 'DROP VIEW \"".concat(t,'"."\' || name || \'";\' as query FROM "').concat(t,'"."sqlite_master" WHERE "type" = \'view\''):"SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",s=await this.query(r);await Promise.all(s.map(l=>this.query(l.query)));const a=t?"SELECT 'DROP TABLE \"".concat(t,'"."\' || name || \'";\' as query FROM "').concat(t,'"."sqlite_master" WHERE "type" = \'table\' AND "name" != \'sqlite_sequence\''):"SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",o=await this.query(a);await Promise.all(o.map(l=>this.query(l.query))),n||await this.commitTransaction()}catch(r){try{n||await this.rollbackTransaction()}catch(s){}throw r}finally{await this.query("PRAGMA foreign_keys = ON")}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const n=e.map(a=>"'"+a+"'").join(", ");let r='SELECT "t".* FROM "'.concat(this.getTypeormMetadataTableName(),'" "t" INNER JOIN "sqlite_master" s ON "s"."name" = "t"."name" AND "s"."type" = \'view\' WHERE "t"."type" = \'').concat(Ze.VIEW,"'");return n.length>0&&(r+=' AND "t"."name" IN ('.concat(n,")")),(await this.query(r)).map(a=>{const o=new rs;return o.name=a.name,o.expression=a.value,o})}async loadTableRecords(e,t){let n;const[r,s]=this.splitTablePath(e);return r&&this.driver.getAttachedDatabasePathRelativeByHandle(r)&&(n=this.driver.getAttachedDatabasePathRelativeByHandle(r)),this.query("SELECT ".concat(n?"'".concat(n,"'"):null," as database, ").concat(r?"'".concat(r,"'"):null," as schema, * FROM ").concat(r?'"'.concat(r,'".'):"").concat(this.escapePath("sqlite_master"),' WHERE "type" = \'').concat(t,"' AND \"").concat(t==="table"?"name":"tbl_name","\" IN ('").concat(s,"')"))}async loadPragmaRecords(e,t){const[,n]=this.splitTablePath(e);return this.query("PRAGMA ".concat(t,'("').concat(n,'")'))}async loadTables(e){if(e&&e.length===0)return[];let t=[],n;if(e){const r=e.filter(o=>o.split(".").length===1).map(o=>"'".concat(o,"'")),s=e.filter(o=>o.split(".").length>1),a=o=>{const l=[...s.map(c=>this.loadTableRecords(c,o))];return r.length&&l.push(this.query('SELECT * FROM "sqlite_master" WHERE "type" = \''.concat(o,"' AND \"").concat(o==="table"?"name":"tbl_name",'" IN (').concat(r,")"))),l};t=(await Promise.all(a("table"))).reduce((o,l)=>[...o,...l],[]).filter(Boolean),n=(await Promise.all(a("index"))).reduce((o,l)=>[...o,...l],[]).filter(Boolean)}else{const r='SELECT * FROM "sqlite_master" WHERE "type" = \'table\'';t.push(...await this.query(r));const s=t.map(({name:a})=>"'".concat(a,"'")).join(", ");n=await this.query('SELECT * FROM "sqlite_master" WHERE "type" = \'index\' AND "tbl_name" IN ('.concat(s,")"))}return t.length===0?[]:Promise.all(t.map(async r=>{const s=r.database&&this.driver.getAttachedDatabaseHandleByRelativePath(r.database)?"".concat(this.driver.getAttachedDatabaseHandleByRelativePath(r.database),".").concat(r.name):r.name,a=r.sql,o=a.includes("WITHOUT ROWID"),l=new Ht({name:s,withoutRowid:o}),[c,u,d]=await Promise.all([this.loadPragmaRecords(s,"table_xinfo"),this.loadPragmaRecords(s,"index_list"),this.loadPragmaRecords(s,"foreign_key_list")]);let h;const f=r.sql;let m=f.toUpperCase().indexOf("AUTOINCREMENT");if(m!==-1){h=f.substr(0,m);const $=h.lastIndexOf(","),P=h.lastIndexOf("(");$!==-1?(h=h.substr($),h=h.substr(0,h.lastIndexOf('"')),h=h.substr(h.indexOf('"')+1)):P!==-1&&(h=h.substr(P),h=h.substr(0,h.lastIndexOf('"')),h=h.substr(h.indexOf('"')+1))}l.columns=await Promise.all(c.map(async $=>{const P=new ii;if(P.name=$.name,P.type=$.type.toLowerCase(),P.default=$.dflt_value!==null&&$.dflt_value!==void 0?$.dflt_value:void 0,P.isNullable=$.notnull===0,P.isPrimary=$.pk>0,P.comment="",P.isGenerated=h===$.name,P.isGenerated&&(P.generationStrategy="increment"),$.hidden===2||$.hidden===3){P.generatedType=$.hidden===2?"VIRTUAL":"STORED";const S=await this.selectTypeormMetadataSql({table:l.name,type:Ze.GENERATED_COLUMN,name:P.name}),Z=await this.query(S.query,S.parameters);Z[0]&&Z[0].value?P.asExpression=Z[0].value:P.asExpression=""}if(P.type==="varchar"){const S=a.match(new RegExp('"('+P.name+")\" varchar CHECK\\s*\\(\\s*\"\\1\"\\s+IN\\s*\\(('[^']+'(?:\\s*,\\s*'[^']+')+)\\s*\\)\\s*\\)"));S&&(P.enum=S[2].substr(1,S[2].length-2).split("','"))}let q=P.type.indexOf("(");if(q!==-1){const S=P.type;let Z=S.substr(0,q);if(this.driver.withLengthColumnTypes.find(ve=>ve===Z)){let ve=parseInt(S.substring(q+1,S.length-1));ve&&(P.length=ve.toString(),P.type=Z)}if(this.driver.withPrecisionColumnTypes.find(ve=>ve===Z)){const ve=new RegExp("^".concat(Z,"\\((\\d+),?\\s?(\\d+)?\\)")),re=S.match(ve);re&&re[1]&&(P.precision=+re[1]),this.driver.withScaleColumnTypes.find(de=>de===Z)&&re&&re[2]&&(P.scale=+re[2]),P.type=Z}}return P}));let p;const w=[],y=/CONSTRAINT "([^"]*)" FOREIGN KEY ?\((.*?)\) REFERENCES "([^"]*)"/g;for(;(p=y.exec(a))!==null;)w.push({name:p[1],columns:p[2].substr(1,p[2].length-2).split('", "'),referencedTableName:p[3]});const b=We.uniq(d,$=>$.id);l.foreignKeys=b.map($=>{const P=d.filter(ve=>ve.id===$.id&&ve.table===$.table),q=P.map(ve=>ve.from),S=P.map(ve=>ve.to),Z=w.find(ve=>ve.referencedTableName===$.table&&ve.columns.every(re=>q.indexOf(re)!==-1));return new Fi({name:Z==null?void 0:Z.name,columnNames:q,referencedTableName:$.table,referencedColumnNames:S,onDelete:$.on_delete,onUpdate:$.on_update})});let E;const _=[],k=/CONSTRAINT "([^"]*)" UNIQUE ?\((.*?)\)/g;for(;(E=k.exec(a))!==null;)_.push({name:E[1],columns:E[2].substr(1,E[2].length-2).split('", "')});const B=u.filter($=>$.origin==="u").map($=>$.name).filter(($,P,q)=>q.indexOf($)===P).map(async $=>{const P=u.find(ve=>ve.name===$),S=(await this.query('PRAGMA index_info("'.concat(P.name,'")'))).sort((ve,re)=>parseInt(ve.seqno)-parseInt(re.seqno)).map(ve=>ve.name);if(S.length===1){const ve=l.columns.find(re=>!!S.find(de=>de===re.name));ve&&(ve.isUnique=!0)}const Z=_.find(ve=>ve.columns.every(re=>S.indexOf(re)!==-1));return new Un({name:Z?Z.name:this.connection.namingStrategy.uniqueConstraintName(l,S),columnNames:S})});l.uniques=await Promise.all(B);let D;const O=/CONSTRAINT "([^"]*)" CHECK ?(\(.*?\))([,]|[)]$)/g;for(;(D=O.exec(a))!==null;)l.checks.push(new cr({name:D[1],expression:D[2]}));const R=u.filter($=>$.origin==="c").map($=>$.name).filter(($,P,q)=>q.indexOf($)===P).map(async $=>{const P=n.find(ne=>ne.name===$),q=/WHERE (.*)/.exec(P.sql),S=u.find(ne=>ne.name===$),ve=(await this.query('PRAGMA index_info("'.concat(S.name,'")'))).sort((ne,Y)=>parseInt(ne.seqno)-parseInt(Y.seqno)).map(ne=>ne.name),re="".concat(r.database?"".concat(r.database,"."):"").concat(S.name),de=S.unique==="1"||S.unique===1;return new rn({table:l,name:re,columnNames:ve,isUnique:de,where:q?q[1]:void 0})}),Q=await Promise.all(R);return l.indices=Q.filter($=>!!$),l}))}createTableSql(e,t,n){const r=e.columns.filter(f=>f.isPrimary),s=r.find(f=>f.isGenerated&&f.generationStrategy==="increment"),a=r.length>1;if(a&&s)throw new te("Sqlite does not support AUTOINCREMENT on composite primary key");const o=e.columns.map(f=>this.buildCreateColumnSql(f,a)).join(", "),[l]=this.splitTablePath(e.name);let c="CREATE TABLE ".concat(this.escapePath(e.name)," (").concat(o),[u,d]=this.splitTablePath(e.name);const h=n?"".concat(u?"".concat(u,"."):"").concat(d.replace(/^temporary_/,"")):e.name;if(e.columns.filter(f=>f.isUnique).forEach(f=>{e.uniques.some(p=>p.columnNames.length===1&&p.columnNames[0]===f.name)||e.uniques.push(new Un({name:this.connection.namingStrategy.uniqueConstraintName(e,[f.name]),columnNames:[f.name]}))}),e.uniques.length>0){const f=e.uniques.map(m=>{const p=m.name?m.name:this.connection.namingStrategy.uniqueConstraintName(h,m.columnNames),w=m.columnNames.map(y=>'"'.concat(y,'"')).join(", ");return'CONSTRAINT "'.concat(p,'" UNIQUE (').concat(w,")")}).join(", ");c+=", ".concat(f)}if(e.checks.length>0){const f=e.checks.map(m=>{const p=m.name?m.name:this.connection.namingStrategy.checkConstraintName(h,m.expression);return'CONSTRAINT "'.concat(p,'" CHECK (').concat(m.expression,")")}).join(", ");c+=", ".concat(f)}if(e.foreignKeys.length>0&&t){const f=e.foreignKeys.filter(m=>{const[p]=this.splitTablePath(m.referencedTableName);return p===l}).map(m=>{const[,p]=this.splitTablePath(m.referencedTableName),w=m.columnNames.map(E=>'"'.concat(E,'"')).join(", ");m.name||(m.name=this.connection.namingStrategy.foreignKeyName(h,m.columnNames,this.getTablePath(m),m.referencedColumnNames));const y=m.referencedColumnNames.map(E=>'"'.concat(E,'"')).join(", ");let b='CONSTRAINT "'.concat(m.name,'" FOREIGN KEY (').concat(w,') REFERENCES "').concat(p,'" (').concat(y,")");return m.onDelete&&(b+=" ON DELETE ".concat(m.onDelete)),m.onUpdate&&(b+=" ON UPDATE ".concat(m.onUpdate)),m.deferrable&&(b+=" DEFERRABLE ".concat(m.deferrable)),b}).join(", ");c+=", ".concat(f)}if(r.length>1){const f=r.map(m=>'"'.concat(m.name,'"')).join(", ");c+=", PRIMARY KEY (".concat(f,")")}return c+=")",e.withoutRowid&&(c+=" WITHOUT ROWID"),new W(c)}dropTableSql(e,t){const n=ue.isTable(e)?e.name:e,r=t?"DROP TABLE IF EXISTS ".concat(this.escapePath(n)):"DROP TABLE ".concat(this.escapePath(n));return new W(r)}createViewSql(e){return typeof e.expression=="string"?new W('CREATE VIEW "'.concat(e.name,'" AS ').concat(e.expression)):new W('CREATE VIEW "'.concat(e.name,'" AS ').concat(e.expression(this.connection).getQuery()))}insertViewDefinitionSql(e){const t=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:Ze.VIEW,name:e.name,value:t})}dropViewSql(e){const t=ue.isView(e)?e.name:e;return new W('DROP VIEW "'.concat(t,'"'))}deleteViewDefinitionSql(e){const t=ue.isView(e)?e.name:e;return this.deleteTypeormMetadataSql({type:Ze.VIEW,name:t})}createIndexSql(e,t){const n=t.columnNames.map(a=>'"'.concat(a,'"')).join(", "),[r,s]=this.splitTablePath(e.name);return new W("CREATE ".concat(t.isUnique?"UNIQUE ":"","INDEX ").concat(r?'"'.concat(r,'".'):"").concat(this.escapePath(t.name),' ON "').concat(s,'" (').concat(n,") ").concat(t.where?"WHERE "+t.where:""))}dropIndexSql(e){let t=ue.isTableIndex(e)?e.name:e;return new W("DROP INDEX ".concat(this.escapePath(t)))}buildCreateColumnSql(e,t){let n='"'+e.name+'"';return ue.isColumnMetadata(e)?n+=" "+this.driver.normalizeType(e):n+=" "+this.connection.driver.createFullType(e),e.enum&&(n+=' CHECK( "'+e.name+'" IN ('+e.enum.map(r=>"'"+r+"'").join(",")+") )"),e.isPrimary&&!t&&(n+=" PRIMARY KEY"),e.isGenerated===!0&&e.generationStrategy==="increment"&&(n+=" AUTOINCREMENT"),e.collation&&(n+=" COLLATE "+e.collation),e.isNullable!==!0&&(n+=" NOT NULL"),e.asExpression?n+=" AS (".concat(e.asExpression,") ").concat(e.generatedType?e.generatedType:"VIRTUAL"):e.default!==void 0&&e.default!==null&&(n+=" DEFAULT ("+e.default+")"),n}async recreateTable(e,t,n=!0){const r=[],s=[];t.indices.forEach(c=>{r.push(this.dropIndexSql(c)),s.push(this.createIndexSql(t,c))});let[a,o]=this.splitTablePath(e.name),[,l]=this.splitTablePath(t.name);if(e.name=o="".concat(a?"".concat(a,"."):"","temporary_").concat(o),r.push(this.createTableSql(e,!0,!0)),s.push(this.dropTableSql(e)),n){let c=e.columns.filter(d=>!d.generatedType).map(d=>'"'.concat(d.name,'"')),u=t.columns.filter(d=>!d.generatedType).map(d=>'"'.concat(d.name,'"'));u.length<c.length?c=e.columns.filter(d=>{const h=t.columns.find(f=>f.name===d.name);return h&&h.generatedType?!1:!d.generatedType&&h}).map(d=>'"'.concat(d.name,'"')):u.length>c.length&&(u=t.columns.filter(d=>!d.generatedType&&e.columns.find(h=>h.name===d.name)).map(d=>'"'.concat(d.name,'"'))),r.push(new W("INSERT INTO ".concat(this.escapePath(e.name),"(").concat(c.join(", "),") SELECT ").concat(u.join(", ")," FROM ").concat(this.escapePath(t.name)))),s.push(new W("INSERT INTO ".concat(this.escapePath(t.name),"(").concat(u.join(", "),") SELECT ").concat(c.join(", ")," FROM ").concat(this.escapePath(e.name))))}r.push(this.dropTableSql(t)),s.push(this.createTableSql(t,!0)),r.push(new W("ALTER TABLE ".concat(this.escapePath(e.name)," RENAME TO ").concat(this.escapePath(l)))),s.push(new W("ALTER TABLE ".concat(this.escapePath(t.name)," RENAME TO ").concat(this.escapePath(o)))),e.name=t.name,e.indices.forEach(c=>{c.name||(c.name=this.connection.namingStrategy.indexName(e,c.columnNames,c.where)),r.push(this.createIndexSql(e,c)),s.push(this.dropIndexSql(c))}),t.columns.filter(c=>{const u=e.columns.find(d=>d.name===c.name);return c.generatedType&&c.asExpression&&(!u||!u.generatedType&&!u.asExpression)}).forEach(c=>{const u=this.deleteTypeormMetadataSql({table:t.name,type:Ze.GENERATED_COLUMN,name:c.name}),d=this.insertTypeormMetadataSql({table:t.name,type:Ze.GENERATED_COLUMN,name:c.name,value:c.asExpression});r.push(u),s.push(d)}),e.columns.filter(c=>c.generatedType&&c.asExpression&&!t.columns.some(u=>u.name===c.name)).forEach(c=>{const u=this.insertTypeormMetadataSql({table:e.name,type:Ze.GENERATED_COLUMN,name:c.name,value:c.asExpression}),d=this.deleteTypeormMetadataSql({table:e.name,type:Ze.GENERATED_COLUMN,name:c.name});r.push(u),s.push(d)}),e.columns.filter(c=>c.generatedType&&c.asExpression).forEach(c=>{const u=t.columns.find(p=>p.name===c.name&&p.generatedType&&c.generatedType&&p.asExpression!==c.asExpression);if(!u)return;const d=this.deleteTypeormMetadataSql({table:t.name,type:Ze.GENERATED_COLUMN,name:u.name}),h=this.insertTypeormMetadataSql({table:e.name,type:Ze.GENERATED_COLUMN,name:c.name,value:c.asExpression});r.push(d),r.push(h);const f=this.insertTypeormMetadataSql({table:e.name,type:Ze.GENERATED_COLUMN,name:u.name,value:u.asExpression}),m=this.deleteTypeormMetadataSql({table:t.name,type:Ze.GENERATED_COLUMN,name:c.name});s.push(f),s.push(m)}),await this.executeQueries(r,s),this.replaceCachedTable(t,e)}splitTablePath(e){return e.indexOf(".")!==-1?e.split("."):[void 0,e]}escapePath(e,t){return(ue.isTable(e)||ue.isView(e)?e.name:e).replace(/^\.+|\.+$/g,"").split(".").map(r=>t?r:'"'.concat(r,'"')).join(".")}}class as{constructor(e){this.queryRunner=e}async broadcast(e,...t){const n=new Km,r=this["broadcast".concat(e,"Event")];typeof r=="function"&&r.call(this,n,...t),await n.wait()}broadcastBeforeInsertEvent(e,t,n){n&&t.beforeInsertListeners.length&&t.beforeInsertListeners.forEach(r=>{if(r.isAllowed(n)){const s=r.execute(n);s instanceof Promise&&e.promises.push(s),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(r=>{if(this.isAllowedSubscriber(r,t.target)&&r.beforeInsert){const s=r.beforeInsert({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t});s instanceof Promise&&e.promises.push(s),e.count++}})}broadcastBeforeUpdateEvent(e,t,n,r,s,a){n&&t.beforeUpdateListeners.length&&t.beforeUpdateListeners.forEach(o=>{if(o.isAllowed(n)){const l=o.execute(n);l instanceof Promise&&e.promises.push(l),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(o=>{if(this.isAllowedSubscriber(o,t.target)&&o.beforeUpdate){const l=o.beforeUpdate({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,updatedColumns:s||[],updatedRelations:a||[]});l instanceof Promise&&e.promises.push(l),e.count++}})}broadcastBeforeRemoveEvent(e,t,n,r,s){n&&t.beforeRemoveListeners.length&&t.beforeRemoveListeners.forEach(a=>{if(a.isAllowed(n)){const o=a.execute(n);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeRemove){const o=a.beforeRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastBeforeSoftRemoveEvent(e,t,n,r,s){n&&t.beforeSoftRemoveListeners.length&&t.beforeSoftRemoveListeners.forEach(a=>{if(a.isAllowed(n)){const o=a.execute(n);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeSoftRemove){const o=a.beforeSoftRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastBeforeRecoverEvent(e,t,n,r,s){n&&t.beforeRecoverListeners.length&&t.beforeRecoverListeners.forEach(a=>{if(a.isAllowed(n)){const o=a.execute(n);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeRecover){const o=a.beforeRecover({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastAfterInsertEvent(e,t,n){n&&t.afterInsertListeners.length&&t.afterInsertListeners.forEach(r=>{if(r.isAllowed(n)){const s=r.execute(n);s instanceof Promise&&e.promises.push(s),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(r=>{if(this.isAllowedSubscriber(r,t.target)&&r.afterInsert){const s=r.afterInsert({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t});s instanceof Promise&&e.promises.push(s),e.count++}})}broadcastBeforeTransactionStartEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.beforeTransactionStart){const n=t.beforeTransactionStart({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}})}broadcastAfterTransactionStartEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.afterTransactionStart){const n=t.afterTransactionStart({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}})}broadcastBeforeTransactionCommitEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.beforeTransactionCommit){const n=t.beforeTransactionCommit({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}})}broadcastAfterTransactionCommitEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.afterTransactionCommit){const n=t.afterTransactionCommit({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}})}broadcastBeforeTransactionRollbackEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.beforeTransactionRollback){const n=t.beforeTransactionRollback({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}})}broadcastAfterTransactionRollbackEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(t=>{if(t.afterTransactionRollback){const n=t.afterTransactionRollback({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}})}broadcastAfterUpdateEvent(e,t,n,r,s,a){n&&t.afterUpdateListeners.length&&t.afterUpdateListeners.forEach(o=>{if(o.isAllowed(n)){const l=o.execute(n);l instanceof Promise&&e.promises.push(l),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(o=>{if(this.isAllowedSubscriber(o,t.target)&&o.afterUpdate){const l=o.afterUpdate({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,updatedColumns:s||[],updatedRelations:a||[]});l instanceof Promise&&e.promises.push(l),e.count++}})}broadcastAfterRemoveEvent(e,t,n,r,s){n&&t.afterRemoveListeners.length&&t.afterRemoveListeners.forEach(a=>{if(a.isAllowed(n)){const o=a.execute(n);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterRemove){const o=a.afterRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastAfterSoftRemoveEvent(e,t,n,r,s){n&&t.afterSoftRemoveListeners.length&&t.afterSoftRemoveListeners.forEach(a=>{if(a.isAllowed(n)){const o=a.execute(n);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterSoftRemove){const o=a.afterSoftRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastAfterRecoverEvent(e,t,n,r,s){n&&t.afterRecoverListeners.length&&t.afterRecoverListeners.forEach(a=>{if(a.isAllowed(n)){const o=a.execute(n);o instanceof Promise&&e.promises.push(o),e.count++}}),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach(a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterRecover){const o=a.afterRecover({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r!=null?r:s)});o instanceof Promise&&e.promises.push(o),e.count++}})}broadcastLoadEventsForAll(e,t,n){return this.broadcastLoadEvent(e,t,n)}broadcastLoadEvent(e,t,n){const r=this.queryRunner.connection.subscribers.filter(s=>this.isAllowedSubscriber(s,t.target)&&s.afterLoad);if(t.relations.length||t.afterLoadListeners.length||r.length){const s=n.filter(a=>!(a instanceof Promise));t.relations.length&&t.relations.forEach(a=>{s.forEach(o=>{if(a.isLazy&&!o.hasOwnProperty(a.propertyName))return;const l=a.getEntityValue(o);ht.isObject(l)&&this.broadcastLoadEvent(e,a.inverseEntityMetadata,Array.isArray(l)?l:[l])})}),t.afterLoadListeners.length&&t.afterLoadListeners.forEach(a=>{s.forEach(o=>{if(a.isAllowed(o)){const l=a.execute(o);l instanceof Promise&&e.promises.push(l),e.count++}})}),r.forEach(a=>{s.forEach(o=>{const l=a.afterLoad(o,{entity:o,metadata:t,connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});l instanceof Promise&&e.promises.push(l),e.count++})})}}isAllowedSubscriber(e,t){return!e.listenTo||!e.listenTo()||e.listenTo()===Object||e.listenTo()===t||e.listenTo().isPrototypeOf(t)}}class Ir{constructor(){this.records=[]}}class b4 extends sl{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new as(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async query(e,t,n=!1){if(this.isReleased)throw new Gn;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const s=+new Date;try{const a=await new Promise(async(d,h)=>{r.executeSql(e,t,f=>d(f),f=>h(f))}),o=this.driver.options.maxQueryExecutionTime,c=+new Date-s;o&&c>o&&this.driver.connection.logger.logQuerySlow(c,e,t,this);const u=new Ir;if(e.substr(0,11)==="INSERT INTO")u.raw=a.insertId;else{let d=[];for(let h=0;h<a.rows.length;h++)d.push(a.rows.item(h));u.records=d,u.raw=d}return n?u:u.raw}catch(a){throw this.driver.connection.logger.logQueryError(a,e,t,this),new kr(e,t,a)}}async startTransaction(){throw new te("Transactions are not supported by the Cordova driver")}async commitTransaction(){throw new te("Transactions are not supported by the Cordova driver")}async rollbackTransaction(){throw new te("Transactions are not supported by the Cordova driver")}async clearDatabase(){await this.query("PRAGMA foreign_keys = OFF");try{const e="SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",t=await this.query(e),n="SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",r=await this.query(n);await Promise.all(t.map(s=>this.query(s.query))),await Promise.all(r.map(s=>this.query(s.query)))}finally{await this.query("PRAGMA foreign_keys = ON")}}parametrize(e,t=0){return Object.keys(e).map((n,r)=>'"'.concat(n,'"')+"=?")}}class v4 extends Wc{constructor(e){super(e),this.transactionSupport="none",this.database=this.options.database,this.loadDependencies()}async disconnect(){return this.queryRunner=void 0,new Promise((e,t)=>{this.databaseConnection.close(e,t)})}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new b4(this)),this.queryRunner}async createDatabaseConnection(){const e=Object.assign({},{name:this.options.database,location:this.options.location},this.options.extra||{}),t=await new Promise(n=>{this.sqlite.openDatabase(e,r=>n(r))});return await new Promise((n,r)=>{t.executeSql("PRAGMA foreign_keys = ON",[],()=>n(),s=>r(s))}),t}loadDependencies(){try{const e=this.options.driver||window.sqlitePlugin;this.sqlite=e}catch(e){throw new rl("Cordova-SQLite","cordova-sqlite-storage")}}}class w4 extends sl{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new as(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}query(e,t,n=!1){if(this.isReleased)throw new Gn;return new Promise(async(r,s)=>{const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=+new Date;a.executeSql(e,t,l=>{const c=this.driver.options.maxQueryExecutionTime,d=+new Date-o;c&&d>c&&this.driver.connection.logger.logQuerySlow(d,e,t,this);const h=new Ir;if(l!=null&&l.hasOwnProperty("rowsAffected")&&(h.affected=l.rowsAffected),l!=null&&l.hasOwnProperty("rows")){let f=[];for(let m=0;m<l.rows.length;m++)f.push(l.rows.item(m));h.raw=f,h.records=f}e.substr(0,11)==="INSERT INTO"&&(h.raw=l.insertId),r(n?h:h.raw)},l=>{this.driver.connection.logger.logQueryError(l,e,t,this),s(new kr(e,t,l))})})}parametrize(e,t=0){return Object.keys(e).map((n,r)=>'"'.concat(n,'"')+"=?")}}class E4{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["int","integer","tinyint","smallint","mediumint","bigint","unsigned big int","int2","int8","integer","character","varchar","varying character","nchar","native character","nvarchar","text","clob","text","blob","real","double","double precision","float","real","numeric","decimal","boolean","date","time","datetime"],this.supportedUpsertTypes=["on-conflict-do-update"],this.withLengthColumnTypes=["character","varchar","varying character","nchar","native character","nvarchar","text","blob","clob"],this.spatialTypes=[],this.withPrecisionColumnTypes=["real","double","double precision","float","real","numeric","decimal","date","time","datetime"],this.withScaleColumnTypes=["real","double","double precision","float","real","numeric","decimal"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"datetime('now')",updateDate:"datetime",updateDateDefault:"datetime('now')",deleteDate:"datetime",deleteDateNullable:!0,version:"integer",treeLevel:"integer",migrationId:"integer",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.cteCapabilities={enabled:!0,requiresRecursiveHint:!0},this.attachedDatabases={},this.connection=e,this.options=e.options,this.database=this.options.database,this.loadDependencies()}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new w4(this)),this.queryRunner}async connect(){this.databaseConnection=await this.createDatabaseConnection()}afterConnect(){return Promise.resolve()}async disconnect(){return new Promise((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close(e,t)})}hasAttachedDatabases(){return!!Object.keys(this.attachedDatabases).length}getAttachedDatabaseHandleByRelativePath(e){var t,n;return(n=(t=this.attachedDatabases)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.attachHandle}getAttachedDatabasePathRelativeByHandle(e){var t;return(t=Object.values(this.attachedDatabases).find(({attachHandle:n})=>e===n))===null||t===void 0?void 0:t.attachFilepathRelative}createSchemaBuilder(){return new of(this.connection)}preparePersistentValue(e,t){return t.transformer&&(e=yn.transformTo(t.transformer,e)),e==null?e:t.type===Boolean||t.type==="boolean"?e===!0?1:0:t.type==="date"?et.mixedDateToDateString(e):t.type==="time"?et.mixedDateToTimeString(e):t.type==="datetime"||t.type===Date?et.mixedDateToUtcDatetimeString(e):t.type==="simple-array"?et.simpleArrayToString(e):t.type==="simple-json"?et.simpleJsonToString(e):t.type==="simple-enum"?et.simpleEnumToString(e):e}prepareHydratedValue(e,t){return e==null?t.transformer?yn.transformFrom(t.transformer,e):e:(t.type===Boolean||t.type==="boolean"?e=!!e:t.type==="datetime"||t.type===Date?(e&&typeof e=="string"&&(/^\d\d\d\d-\d\d-\d\d \d\d:\d\d/.test(e)&&(e=e.replace(" ","T")),/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d(:\d\d(\.\d\d\d)?)?$/.test(e)&&(e+="Z")),e=et.normalizeHydratedDate(e)):t.type==="date"?e=et.mixedDateToDateString(e):t.type==="time"?e=et.mixedTimeToString(e):t.type==="simple-array"?e=et.stringToSimpleArray(e):t.type==="simple-json"?e=et.stringToSimpleJson(e):t.type==="simple-enum"?e=et.stringToSimpleEnum(e,t):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=yn.transformFrom(t.transformer,e)),e)}escapeQueryWithParameters(e,t,n){const r=Object.keys(n).map(s=>typeof n[s]=="boolean"?n[s]===!0?1:0:n[s]instanceof Date?et.mixedDateToUtcDatetimeString(n[s]):n[s]);return!t||!Object.keys(t).length?[e,r]:(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o)=>{if(!t.hasOwnProperty(o))return s;let l=t[o];return a?l.map(c=>(r.push(c),this.createParameter(o,r.length-1))).join(", "):typeof l=="function"?l():typeof l=="number"?String(l):typeof l=="boolean"?(r.push(+l),this.createParameter(o,r.length-1)):l instanceof Date?(r.push(et.mixedDateToUtcDatetimeString(l)),this.createParameter(o,r.length-1)):(r.push(l),this.createParameter(o,r.length-1))}),[e,r])}escape(e){return'"'+e+'"'}buildTableName(e,t,n){return e}parseTableName(e){var t;const n=this.database,r=void 0;if(ue.isTable(e)||ue.isView(e)){const a=this.parseTableName(e.schema?'"'.concat(e.schema,'"."').concat(e.name,'"'):e.name);return{database:e.database||a.database||n,schema:e.schema||a.schema||r,tableName:a.tableName}}if(ue.isTableForeignKey(e)){const a=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||a.database||n,schema:e.referencedSchema||a.schema||r,tableName:a.tableName}}if(ue.isEntityMetadata(e))return{database:e.database||n,schema:e.schema||r,tableName:e.tableName};const s=e.split(".");return s.length===3?{database:s[0]||n,schema:s[1]||r,tableName:s[2]}:s.length===2?{database:(t=this.getAttachedDatabasePathRelativeByHandle(s[0]))!==null&&t!==void 0?t:n,schema:s[0],tableName:s[1]}:{database:n,schema:r,tableName:e}}normalizeType(e){return e.type===Number||e.type==="int"?"integer":e.type===String?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":e.type==="uuid"?"varchar":e.type==="simple-array"||e.type==="simple-json"?"text":e.type==="simple-enum"?"varchar":e.type||""}normalizeDefault(e){const t=e.default;if(typeof t=="number")return""+t;if(typeof t=="boolean")return t?"1":"0";if(typeof t=="function")return t();if(typeof t=="string")return"'".concat(t,"'");if(t!=null)return"".concat(t)}normalizeIsUnique(e){return e.entityMetadata.uniques.some(t=>t.columns.length===1&&t.columns[0]===e)}getColumnLength(e){return e.length?e.length.toString():""}createFullType(e){let t=e.type;return e.enum?"varchar":(e.length?t+="("+e.length+")":e.precision!==null&&e.precision!==void 0&&e.scale!==null&&e.scale!==void 0?t+="("+e.precision+","+e.scale+")":e.precision!==null&&e.precision!==void 0&&(t+="("+e.precision+")"),e.isArray&&(t+=" array"),t)}obtainMasterConnection(){return Promise.resolve()}obtainSlaveConnection(){return Promise.resolve()}createGeneratedMap(e,t,n,r){const s=e.generatedColumns.reduce((a,o)=>{let l;return o.generationStrategy==="increment"&&t&&(l=t-r+n+1),l?We.mergeDeep(a,o.createValueMap(l)):a},{});return Object.keys(s).length>0?s:void 0}findChangedColumns(e,t){return t.filter(n=>{const r=e.find(a=>a.name===n.databaseName);return r?r.name!==n.databaseName||r.type!==this.normalizeType(n)||r.length!==n.length||r.precision!==n.precision||r.scale!==n.scale||this.normalizeDefault(n)!==r.default||r.isPrimary!==n.isPrimary||r.isNullable!==n.isNullable||r.generatedType!==n.generatedType||r.asExpression!==n.asExpression||r.isUnique!==this.normalizeIsUnique(n)||r.enum&&n.enum&&!We.isArraysEqual(r.enum,n.enum.map(a=>a+""))||n.generationStrategy!=="uuid"&&r.isGenerated!==n.isGenerated:!1})}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"?"}createDatabaseConnection(){return new Promise((e,t)=>{const n=Object.assign({},{name:this.options.database,location:this.options.location},this.options.extra||{});this.sqlite.openDatabase(n,r=>{const s=r;s.executeSql("PRAGMA foreign_keys = ON",[],a=>{e(s)},a=>{t(a)})},r=>{t(r)})})}loadDependencies(){try{const e=this.options.driver||require("react-native-sqlite-storage");this.sqlite=e}catch(e){throw new rl("React-Native","react-native-sqlite-storage")}}}class x4 extends sl{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new as(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async query(e,t,n=!1){if(this.isReleased)throw new Gn;const r=this.driver.connection;return new Promise(async(s,a)=>{const o=await this.connect(),l=e.substr(0,11)==="INSERT INTO";r.logger.logQuery(e,t,this);const c=(d,h)=>{const f=this.driver.options.maxQueryExecutionTime,p=+new Date-u;f&&p>f&&r.logger.logQuerySlow(p,e,t,this),d&&(r.logger.logQueryError(d,e,t,this),a(new kr(e,t,d)));const w=new Ir;w.raw=h,!l&&Array.isArray(h)&&(w.records=h),s(n?w:w.raw)},u=+new Date;l?o.execSQL(e,t,c):o.all(e,t,c)})}parametrize(e,t=0){return Object.keys(e).map((n,r)=>'"'.concat(n,'"')+"=?")}}class T4 extends Wc{constructor(e){super(e),this.connection=e,this.options=e.options,this.database=this.options.database,this.driver=this.options.driver,this.loadDependencies()}async disconnect(){return new Promise((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close().then(e).catch(t)})}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new x4(this)),this.queryRunner}normalizeType(e){return e.type===Buffer?"blob":super.normalizeType(e)}createDatabaseConnection(){return new Promise((e,t)=>{const n=Object.assign({},{readOnly:this.options.readOnly,key:this.options.key,multithreading:this.options.multithreading,migrate:this.options.migrate,iosFlags:this.options.iosFlags,androidFlags:this.options.androidFlags},this.options.extra||{});new this.sqlite(this.options.database,n,(r,s)=>{if(r)return t(r);s.resultType(this.sqlite.RESULTSASOBJECT),s.execSQL("PRAGMA foreign_keys = ON",[],(a,o)=>{if(a)return t(a);e(s)})})})}loadDependencies(){if(this.sqlite=this.driver,!this.driver)throw new rl("Nativescript","nativescript-sqlite")}}class S4 extends sl{constructor(e){super(),this.isDirty=!1,this.driver=e,this.connection=e.connection,this.broadcaster=new as(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async flush(){this.isDirty&&(await this.driver.autoSave(),this.isDirty=!1)}async release(){return await this.flush(),super.release()}async commitTransaction(){await super.commitTransaction(),this.isTransactionActive||await this.flush()}async query(e,t=[],n=!1){if(this.isReleased)throw new Gn;const r=e.trim().split(" ",1)[0],s=this.driver.databaseConnection;this.driver.connection.logger.logQuery(e,t,this);const a=+new Date;let o;try{o=s.prepare(e),t&&(t=t.map(f=>typeof f<"u"?f:null),o.bind(t));const l=this.driver.options.maxQueryExecutionTime,u=+new Date-a;l&&u>l&&this.driver.connection.logger.logQuerySlow(u,e,t,this);const d=[];for(;o.step();)d.push(o.getAsObject());const h=new Ir;return h.affected=s.getRowsModified(),h.records=d,h.raw=d,o.free(),r!=="SELECT"&&(this.isDirty=!0),n?h:h.raw}catch(l){throw o&&o.free(),this.driver.connection.logger.logQueryError(l,e,t,this),new kr(e,t,l)}}}class C4 extends Wc{constructor(e){if(super(e),this.options.autoSave&&!this.options.location&&!this.options.autoSaveCallback)throw new vF("location or autoSaveCallback");this.loadDependencies()}async connect(){this.databaseConnection=await this.createDatabaseConnection()}async disconnect(){this.queryRunner=void 0,this.databaseConnection.close()}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new S4(this)),this.queryRunner}async load(e,t=!0){if(typeof e=="string")if(jt.type==="node")if(jt.fileExist(e)){const n=jt.readFileSync(e);return this.createDatabaseConnectionWithImport(n)}else{if(t)throw new te("File ".concat(e," does not exist"));return this.createDatabaseConnectionWithImport()}else{let n=null;if(this.options.useLocalForage)if(window.localforage)n=await window.localforage.getItem(e);else throw new te("localforage is not defined - please import localforage.js into your site");else n=jt.getGlobalVariable().localStorage.getItem(e);if(n!=null)return this.createDatabaseConnectionWithImport(JSON.parse(n));if(t)throw new te("File ".concat(e," does not exist"));return this.createDatabaseConnectionWithImport()}else return this.createDatabaseConnectionWithImport(e)}async save(e){if(!e&&!this.options.location)throw new te("No location is set, specify a location parameter or add the location option to your configuration");let t="";if(e?t=e:this.options.location&&(t=this.options.location),jt.type==="node")try{const n=Buffer.from(this.databaseConnection.export());await jt.writeFile(t,n)}catch(n){throw new te("Could not save database, error: ".concat(n))}else{const n=this.databaseConnection.export(),r=[].slice.call(n);if(this.options.useLocalForage)if(window.localforage)await window.localforage.setItem(t,JSON.stringify(r));else throw new te("localforage is not defined - please import localforage.js into your site");else jt.getGlobalVariable().localStorage.setItem(t,JSON.stringify(r))}}async autoSave(){var e;this.options.autoSave&&!(!((e=this.queryRunner)===null||e===void 0)&&e.isTransactionActive)&&(this.options.autoSaveCallback?await this.options.autoSaveCallback(this.export()):await this.save())}export(){return this.databaseConnection.export()}createGeneratedMap(e,t){const n=e.generatedColumns.reduce((r,s)=>{if(s.isPrimary&&s.generationStrategy==="increment"){const a="SELECT last_insert_rowid()";try{let o=this.databaseConnection.exec(a);return this.connection.logger.logQuery(a),We.mergeDeep(r,s.createValueMap(o[0].values[0][0]))}catch(o){this.connection.logger.logQueryError(o,a,[])}}return r},{});return Object.keys(n).length>0?n:void 0}createDatabaseConnection(){return this.options.location?this.load(this.options.location,!1):this.createDatabaseConnectionWithImport(this.options.database)}async createDatabaseConnectionWithImport(e){const n=typeof this.sqlite.Database=="function"?this.sqlite:await this.sqlite(this.options.sqlJsConfig);return e&&e.length>0?this.databaseConnection=new n.Database(e):this.databaseConnection=new n.Database,this.databaseConnection.exec("PRAGMA foreign_keys = ON"),this.databaseConnection}loadDependencies(){if(jt.type==="browser"){const e=this.options.driver||window.SQL;this.sqlite=e}else try{const e=this.options.driver||jt.load("sql.js");this.sqlite=e}catch(e){throw new rl("sql.js","sql.js")}}}class A4 extends sl{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new as(this)}async startTransaction(){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive&&typeof this.transaction>"u")throw new zi;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transaction=void 0,this.isTransactionActive=!1,this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive&&typeof this.transaction>"u")throw new zi;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transaction=void 0,this.isTransactionActive=!1,this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async beforeMigration(){const e=await this.connect();return new Promise((t,n)=>{e.exec([{sql:"PRAGMA foreign_keys = OFF",args:[]}],!1,r=>r?n(r):t())})}async afterMigration(){const e=await this.connect();return new Promise((t,n)=>{e.exec([{sql:"PRAGMA foreign_keys = ON",args:[]}],!1,r=>r?n(r):t())})}async query(e,t,n=!1){if(this.isReleased)throw new Gn;return new Promise(async(r,s)=>{const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=+new Date;a.transaction(async l=>{typeof this.transaction>"u"&&(await this.startTransaction(),this.transaction=l),this.transaction.executeSql(e,t,(c,u)=>{const d=this.driver.options.maxQueryExecutionTime,f=+new Date-o;d&&f>d&&this.driver.connection.logger.logQuerySlow(f,e,t,this);const m=new Ir;if(u!=null&&u.hasOwnProperty("rowsAffected")&&(m.affected=u.rowsAffected),u!=null&&u.hasOwnProperty("rows")){let p=[];for(let w=0;w<u.rows.length;w++)p.push(u.rows.item(w));m.raw=p,m.records=p}e.startsWith("INSERT INTO")&&(m.raw=u.insertId),r(n?m:m.raw)},(c,u)=>{this.driver.connection.logger.logQueryError(u,e,t,this),s(new kr(e,t,u))})},async l=>{await this.rollbackTransaction(),s(l)},()=>{this.isTransactionActive=!1,this.transaction=void 0})})}}class N4 extends Wc{constructor(e){super(e),this.database=this.options.database,this.sqlite=this.options.driver}async disconnect(){return new Promise((e,t)=>{try{this.queryRunner=void 0,this.databaseConnection._db.close(),this.databaseConnection=void 0,e()}catch(n){t(n)}})}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new A4(this)),this.queryRunner}createDatabaseConnection(){return new Promise((e,t)=>{try{const n=this.sqlite.openDatabase(this.options.database);n.transaction(r=>{r.executeSql("PRAGMA foreign_keys = ON",[],(s,a)=>{e(n)},(s,a)=>{t({transaction:s,error:a})})},r=>{t(r)})}catch(n){t(n)}})}}class k4 extends lf{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.client=t,this.broadcaster=new as(this)}async connect(){return{}}release(){return this.isReleased=!0,this.databaseConnection&&this.databaseConnection.release(),Promise.resolve()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}this.transactionDepth===0?await this.client.startTransaction():await this.query("SAVEPOINT typeorm_".concat(this.transactionDepth)),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new zi;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.client.commitTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new zi;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.client.rollbackTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new Gn;const r=await this.client.query(e,t),s=new Ir;return s.raw=r,r!=null&&r.hasOwnProperty("records")&&Array.isArray(r.records)&&(s.records=r.records),r!=null&&r.hasOwnProperty("numberOfRecordsUpdated")&&(s.affected=r.numberOfRecordsUpdated),n?s:s.raw}stream(e,t,n,r){if(this.isReleased)throw new Gn;return new Promise(async(s,a)=>{try{const l=(await this.connect()).query(e,t);n&&l.on("end",n),r&&l.on("error",r),s(l)}catch(o){a(o)}})}async getDatabases(){return Promise.resolve([])}async getSchemas(e){throw new te("MySql driver does not support table schemas")}async hasDatabase(e){return!!(await this.query("SELECT * FROM `INFORMATION_SCHEMA`.`SCHEMATA` WHERE `SCHEMA_NAME` = '".concat(e,"'"))).length}async getCurrentDatabase(){return(await this.query("SELECT DATABASE() AS `db_name`"))[0].db_name}async hasSchema(e){throw new te("MySql driver does not support table schemas")}async getCurrentSchema(){return(await this.query("SELECT SCHEMA() AS `schema_name`"))[0].schema_name}async hasTable(e){const t=this.driver.parseTableName(e),n="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_SCHEMA` = '".concat(t.database,"' AND `TABLE_NAME` = '").concat(t.tableName,"'");return!!(await this.query(n)).length}async hasColumn(e,t){const n=this.driver.parseTableName(e),r=ue.isTableColumn(t)?t.name:t,s="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_SCHEMA` = '".concat(n.database,"' AND `TABLE_NAME` = '").concat(n.tableName,"' AND `COLUMN_NAME` = '").concat(r,"'");return!!(await this.query(s)).length}async createDatabase(e,t){const n=t?"CREATE DATABASE IF NOT EXISTS `".concat(e,"`"):"CREATE DATABASE `".concat(e,"`"),r="DROP DATABASE `".concat(e,"`");await this.executeQueries(new W(n),new W(r))}async dropDatabase(e,t){const n=t?"DROP DATABASE IF EXISTS `".concat(e,"`"):"DROP DATABASE `".concat(e,"`"),r="CREATE DATABASE `".concat(e,"`");await this.executeQueries(new W(n),new W(r))}async createSchema(e,t){throw new te("Schema create queries are not supported by MySql driver.")}async dropSchema(e,t){throw new te("Schema drop queries are not supported by MySql driver.")}async createTable(e,t=!1,n=!0){if(t&&await this.hasTable(e))return Promise.resolve();const r=[],s=[];return r.push(this.createTableSql(e,n)),s.push(this.dropTableSql(e)),e.indices.forEach(a=>s.push(this.dropIndexSql(e,a))),n&&e.foreignKeys.forEach(a=>s.push(this.dropForeignKeySql(e,a))),this.executeQueries(r,s)}async dropTable(e,t,n=!0){if(t&&!await this.hasTable(e))return Promise.resolve();const r=n,s=this.getTablePath(e),a=await this.getCachedTable(s),o=[],l=[];n&&a.foreignKeys.forEach(c=>o.push(this.dropForeignKeySql(a,c))),a.indices.forEach(c=>o.push(this.dropIndexSql(a,c))),o.push(this.dropTableSql(a)),l.push(this.createTableSql(a,r)),await this.executeQueries(o,l)}async createView(e,t=!1){const n=[],r=[];n.push(this.createViewSql(e)),t&&n.push(await this.insertViewDefinitionSql(e)),r.push(this.dropViewSql(e)),t&&r.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(n,r)}async dropView(e){const t=ue.isView(e)?e.name:e,n=await this.getCachedView(t),r=[],s=[];r.push(await this.deleteViewDefinitionSql(n)),r.push(this.dropViewSql(n)),s.push(await this.insertViewDefinitionSql(n)),s.push(this.createViewSql(n)),await this.executeQueries(r,s)}async renameTable(e,t){const n=[],r=[],s=ue.isTable(e)?e:await this.getCachedTable(e),a=s.clone(),{database:o}=this.driver.parseTableName(s);a.name=o?"".concat(o,".").concat(t):t,n.push(new W("RENAME TABLE ".concat(this.escapePath(s)," TO ").concat(this.escapePath(a)))),r.push(new W("RENAME TABLE ".concat(this.escapePath(a)," TO ").concat(this.escapePath(s)))),a.indices.forEach(l=>{const c=l.columnNames.map(h=>"`".concat(h,"`")).join(", "),u=this.connection.namingStrategy.indexName(a,l.columnNames,l.where);let d="";l.isUnique&&(d+="UNIQUE "),l.isSpatial&&(d+="SPATIAL "),l.isFulltext&&(d+="FULLTEXT "),n.push(new W("ALTER TABLE ".concat(this.escapePath(a)," DROP INDEX `").concat(l.name,"`, ADD ").concat(d,"INDEX `").concat(u,"` (").concat(c,")"))),r.push(new W("ALTER TABLE ".concat(this.escapePath(a)," DROP INDEX `").concat(u,"`, ADD ").concat(d,"INDEX `").concat(l.name,"` (").concat(c,")"))),l.name=u}),a.foreignKeys.forEach(l=>{const c=l.columnNames.map(m=>"`".concat(m,"`")).join(", "),u=l.referencedColumnNames.map(m=>"`".concat(m,"`")).join(","),d=this.connection.namingStrategy.foreignKeyName(a,l.columnNames);let h="ALTER TABLE ".concat(this.escapePath(a)," DROP FOREIGN KEY `").concat(l.name,"`, ADD CONSTRAINT `").concat(d,"` FOREIGN KEY (").concat(c,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(l)),"(").concat(u,")");l.onDelete&&(h+=" ON DELETE ".concat(l.onDelete)),l.onUpdate&&(h+=" ON UPDATE ".concat(l.onUpdate));let f="ALTER TABLE ".concat(this.escapePath(a)," DROP FOREIGN KEY `").concat(d,"`, ADD CONSTRAINT `").concat(l.name,"` FOREIGN KEY (").concat(c,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(l)),"(").concat(u,")");l.onDelete&&(f+=" ON DELETE ".concat(l.onDelete)),l.onUpdate&&(f+=" ON UPDATE ".concat(l.onUpdate)),n.push(new W(h)),r.push(new W(f)),l.name=d}),await this.executeQueries(n,r),s.name=a.name,this.replaceCachedTable(s,a)}async addColumn(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),s=[],a=[],o=r.primaryColumns.length>0;if(s.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD ").concat(this.buildCreateColumnSql(t,o,!1)))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP COLUMN `").concat(t.name,"`"))),t.isPrimary&&o){const c=r.columns.find(h=>h.isGenerated&&h.generationStrategy==="increment");if(c){const h=c.clone();h.isGenerated=!1,h.generationStrategy=void 0,s.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(t.name,"` ").concat(this.buildCreateColumnSql(h,!0)))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(t,!0))))}const u=r.primaryColumns;let d=u.map(h=>"`".concat(h.name,"`")).join(", ");if(s.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP PRIMARY KEY"))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD PRIMARY KEY (").concat(d,")"))),u.push(t),d=u.map(h=>"`".concat(h.name,"`")).join(", "),s.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD PRIMARY KEY (").concat(d,")"))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP PRIMARY KEY"))),c){const h=c.clone();h.isGenerated=!1,h.generationStrategy=void 0,s.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(t,!0)))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(t.name,"` ").concat(this.buildCreateColumnSql(h,!0))))}}const l=r.indices.find(c=>c.columnNames.length===1&&c.columnNames[0]===t.name);if(l)s.push(this.createIndexSql(n,l)),a.push(this.dropIndexSql(n,l));else if(t.isUnique){const c=new rn({name:this.connection.namingStrategy.indexName(n,[t.name]),columnNames:[t.name],isUnique:!0});r.indices.push(c),r.uniques.push(new Un({name:c.name,columnNames:c.columnNames})),s.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD UNIQUE INDEX `").concat(c.name,"` (`").concat(t.name,"`)"))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP INDEX `").concat(c.name,"`")))}await this.executeQueries(s,a),r.addColumn(t),this.replaceCachedTable(n,r)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const r=ue.isTable(e)?e:await this.getCachedTable(e),s=ue.isTableColumn(t)?t:r.columns.find(o=>o.name===t);if(!s)throw new te('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));let a;ue.isTableColumn(n)?a=n:(a=s.clone(),a.name=n),await this.changeColumn(r,s,a)}async changeColumn(e,t,n){const r=ue.isTable(e)?e:await this.getCachedTable(e);let s=r.clone();const a=[],o=[],l=ue.isTableColumn(t)?t:r.columns.find(c=>c.name===t);if(!l)throw new te('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));if(n.isGenerated!==l.isGenerated&&n.generationStrategy!=="uuid"||l.type!==n.type||l.length!==n.length||l.generatedType!==n.generatedType)await this.dropColumn(r,l),await this.addColumn(r,n),s=r.clone();else{if(n.name!==l.name){a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(l.name,"` `").concat(n.name,"` ").concat(this.buildCreateColumnSql(l,!0,!0)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(n.name,"` `").concat(l.name,"` ").concat(this.buildCreateColumnSql(l,!0,!0)))),s.findColumnIndices(l).forEach(u=>{u.columnNames.splice(u.columnNames.indexOf(l.name),1),u.columnNames.push(n.name);const d=u.columnNames.map(m=>"`".concat(m,"`")).join(", "),h=this.connection.namingStrategy.indexName(s,u.columnNames,u.where);let f="";u.isUnique&&(f+="UNIQUE "),u.isSpatial&&(f+="SPATIAL "),u.isFulltext&&(f+="FULLTEXT "),a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," DROP INDEX `").concat(u.name,"`, ADD ").concat(f,"INDEX `").concat(h,"` (").concat(d,")"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," DROP INDEX `").concat(h,"`, ADD ").concat(f,"INDEX `").concat(u.name,"` (").concat(d,")"))),u.name=h}),s.findColumnForeignKeys(l).forEach(u=>{u.columnNames.splice(u.columnNames.indexOf(l.name),1),u.columnNames.push(n.name);const d=u.columnNames.map(w=>"`".concat(w,"`")).join(", "),h=u.referencedColumnNames.map(w=>"`".concat(w,"`")).join(","),f=this.connection.namingStrategy.foreignKeyName(s,u.columnNames);let m="ALTER TABLE ".concat(this.escapePath(r)," DROP FOREIGN KEY `").concat(u.name,"`, ADD CONSTRAINT `").concat(f,"` FOREIGN KEY (").concat(d,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(u)),"(").concat(h,")");u.onDelete&&(m+=" ON DELETE ".concat(u.onDelete)),u.onUpdate&&(m+=" ON UPDATE ".concat(u.onUpdate));let p="ALTER TABLE ".concat(this.escapePath(r)," DROP FOREIGN KEY `").concat(f,"`, ADD CONSTRAINT `").concat(u.name,"` FOREIGN KEY (").concat(d,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(u)),"(").concat(h,")");u.onDelete&&(p+=" ON DELETE ".concat(u.onDelete)),u.onUpdate&&(p+=" ON UPDATE ".concat(u.onUpdate)),a.push(new W(m)),o.push(new W(p)),u.name=f});const c=s.columns.find(u=>u.name===l.name);s.columns[s.columns.indexOf(c)].name=n.name,l.name=n.name}if(this.isColumnChanged(l,n,!0)&&(a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(l.name,"` ").concat(this.buildCreateColumnSql(n,!0)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(n.name,"` ").concat(this.buildCreateColumnSql(l,!0))))),n.isPrimary!==l.isPrimary){const c=s.columns.find(d=>d.isGenerated&&d.generationStrategy==="increment");if(c){const d=c.clone();d.isGenerated=!1,d.generationStrategy=void 0,a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(c.name,"` ").concat(this.buildCreateColumnSql(d,!0)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(d.name,"` ").concat(this.buildCreateColumnSql(c,!0))))}const u=s.primaryColumns;if(u.length>0){const d=u.map(h=>"`".concat(h.name,"`")).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," DROP PRIMARY KEY"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," ADD PRIMARY KEY (").concat(d,")")))}if(n.isPrimary===!0){u.push(n);const d=s.columns.find(f=>f.name===n.name);d.isPrimary=!0;const h=u.map(f=>"`".concat(f.name,"`")).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," ADD PRIMARY KEY (").concat(h,")"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," DROP PRIMARY KEY")))}else{const d=u.find(f=>f.name===n.name);u.splice(u.indexOf(d),1);const h=s.columns.find(f=>f.name===n.name);if(h.isPrimary=!1,u.length>0){const f=u.map(m=>"`".concat(m.name,"`")).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," ADD PRIMARY KEY (").concat(f,")"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," DROP PRIMARY KEY")))}}if(c){const d=c.clone();d.isGenerated=!1,d.generationStrategy=void 0,a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(d.name,"` ").concat(this.buildCreateColumnSql(c,!0)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," CHANGE `").concat(c.name,"` ").concat(this.buildCreateColumnSql(d,!0))))}}if(n.isUnique!==l.isUnique)if(n.isUnique===!0){const c=new rn({name:this.connection.namingStrategy.indexName(r,[n.name]),columnNames:[n.name],isUnique:!0});s.indices.push(c),s.uniques.push(new Un({name:c.name,columnNames:c.columnNames})),a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," ADD UNIQUE INDEX `").concat(c.name,"` (`").concat(n.name,"`)"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," DROP INDEX `").concat(c.name,"`")))}else{const c=s.indices.find(d=>d.columnNames.length===1&&d.isUnique===!0&&!!d.columnNames.find(h=>h===n.name));s.indices.splice(s.indices.indexOf(c),1);const u=s.uniques.find(d=>d.name===c.name);s.uniques.splice(s.uniques.indexOf(u),1),a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," DROP INDEX `").concat(c.name,"`"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," ADD UNIQUE INDEX `").concat(c.name,"` (`").concat(n.name,"`)")))}}await this.executeQueries(a,o),this.replaceCachedTable(r,s)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:r}of t)await this.changeColumn(e,n,r)}async dropColumn(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableColumn(t)?t:n.findColumnByName(t);if(!r)throw new te('Column "'.concat(t,'" was not found in table "').concat(n.name,'"'));const s=n.clone(),a=[],o=[];if(r.isPrimary){const c=s.columns.find(h=>h.isGenerated&&h.generationStrategy==="increment");if(c){const h=c.clone();h.isGenerated=!1,h.generationStrategy=void 0,a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(c.name,"` ").concat(this.buildCreateColumnSql(h,!0)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(c,!0))))}const u=s.primaryColumns.map(h=>"`".concat(h.name,"`")).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(s)," DROP PRIMARY KEY"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(s)," ADD PRIMARY KEY (").concat(u,")")));const d=s.findColumnByName(r.name);if(d.isPrimary=!1,s.primaryColumns.length>0){const h=s.primaryColumns.map(f=>"`".concat(f.name,"`")).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(s)," ADD PRIMARY KEY (").concat(h,")"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(s)," DROP PRIMARY KEY")))}if(c&&c.name!==r.name){const h=c.clone();h.isGenerated=!1,h.generationStrategy=void 0,a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(c,!0)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(c.name,"` ").concat(this.buildCreateColumnSql(h,!0))))}}const l=s.indices.find(c=>c.columnNames.length===1&&c.columnNames[0]===r.name);if(l)s.indices.splice(s.indices.indexOf(l),1),a.push(this.dropIndexSql(n,l)),o.push(this.createIndexSql(n,l));else if(r.isUnique){const c=this.connection.namingStrategy.uniqueConstraintName(n,[r.name]),u=s.uniques.find(f=>f.name===c);u&&s.uniques.splice(s.uniques.indexOf(u),1);const d=this.connection.namingStrategy.indexName(n,[r.name]),h=s.indices.find(f=>f.name===d);h&&s.indices.splice(s.indices.indexOf(h),1),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP INDEX `").concat(d,"`"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD UNIQUE INDEX `").concat(d,"` (`").concat(r.name,"`)")))}a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP COLUMN `").concat(r.name,"`"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD ").concat(this.buildCreateColumnSql(r,!0)))),await this.executeQueries(a,o),s.removeColumn(r),this.replaceCachedTable(n,s)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),s=this.createPrimaryKeySql(n,t),a=this.dropPrimaryKeySql(n);await this.executeQueries(s,a),r.columns.forEach(o=>{t.find(l=>l===o.name)&&(o.isPrimary=!0)}),this.replaceCachedTable(n,r)}async updatePrimaryKeys(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),s=t.map(h=>h.name),a=[],o=[],l=r.columns.find(h=>h.isGenerated&&h.generationStrategy==="increment");if(l){const h=l.clone();h.isGenerated=!1,h.generationStrategy=void 0,a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(l.name,"` ").concat(this.buildCreateColumnSql(h,!0)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(l,!0))))}const c=r.primaryColumns;if(c.length>0){const h=c.map(f=>"`".concat(f.name,"`")).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP PRIMARY KEY"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD PRIMARY KEY (").concat(h,")")))}r.columns.filter(h=>s.indexOf(h.name)!==-1).forEach(h=>h.isPrimary=!0);const u=s.map(h=>"`".concat(h,"`")).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD PRIMARY KEY (").concat(u,")"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP PRIMARY KEY")));const d=l||t.find(h=>h.isGenerated&&h.generationStrategy==="increment");if(d){const h=d.clone();h.isGenerated=!1,h.generationStrategy=void 0,a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(h.name,"` ").concat(this.buildCreateColumnSql(d,!0)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," CHANGE `").concat(d.name,"` ").concat(this.buildCreateColumnSql(h,!0))));const f=r.columns.find(m=>m.name===d.name);f.isGenerated=!0,f.generationStrategy="increment"}await this.executeQueries(a,o),this.replaceCachedTable(n,r)}async dropPrimaryKey(e){const t=ue.isTable(e)?e:await this.getCachedTable(e),n=this.dropPrimaryKeySql(t),r=this.createPrimaryKeySql(t,t.primaryColumns.map(s=>s.name));await this.executeQueries(n,r),t.primaryColumns.forEach(s=>{s.isPrimary=!1})}async createUniqueConstraint(e,t){throw new te("MySql does not support unique constraints. Use unique index instead.")}async createUniqueConstraints(e,t){throw new te("MySql does not support unique constraints. Use unique index instead.")}async dropUniqueConstraint(e,t){throw new te("MySql does not support unique constraints. Use unique index instead.")}async dropUniqueConstraints(e,t){throw new te("MySql does not support unique constraints. Use unique index instead.")}async createCheckConstraint(e,t){throw new te("MySql does not support check constraints.")}async createCheckConstraints(e,t){throw new te("MySql does not support check constraints.")}async dropCheckConstraint(e,t){throw new te("MySql does not support check constraints.")}async dropCheckConstraints(e,t){throw new te("MySql does not support check constraints.")}async createExclusionConstraint(e,t){throw new te("MySql does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new te("MySql does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new te("MySql does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new te("MySql does not support exclusion constraints.")}async createForeignKey(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames));const r=this.createForeignKeySql(n,t),s=this.dropForeignKeySql(n,t);await this.executeQueries(r,s),n.addForeignKey(t)}async createForeignKeys(e,t){const n=t.map(r=>this.createForeignKey(e,r));await Promise.all(n)}async dropForeignKey(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableForeignKey(t)?t:n.foreignKeys.find(o=>o.name===t);if(!r)throw new te("Supplied foreign key was not found in table ".concat(n.name));const s=this.dropForeignKeySql(n,r),a=this.createForeignKeySql(n,r);await this.executeQueries(s,a),n.removeForeignKey(r)}async dropForeignKeys(e,t){const n=t.map(r=>this.dropForeignKey(e,r));await Promise.all(n)}async createIndex(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createIndexSql(n,t),s=this.dropIndexSql(n,t);await this.executeQueries(r,s),n.addIndex(t,!0)}async createIndices(e,t){const n=t.map(r=>this.createIndex(e,r));await Promise.all(n)}async dropIndex(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableIndex(t)?t:n.indices.find(o=>o.name===t);if(!r)throw new te("Supplied index ".concat(t," was not found in table ").concat(n.name));r.name||(r.name=this.generateIndexName(n,r));const s=this.dropIndexSql(n,r),a=this.createIndexSql(n,r);await this.executeQueries(s,a),n.removeIndex(r,!0)}async dropIndices(e,t){const n=t.map(r=>this.dropIndex(e,r));await Promise.all(n)}async clearTable(e){await this.query("TRUNCATE TABLE ".concat(this.escapePath(e)))}async clearDatabase(e){const t=e||this.driver.database;if(t){if(!await this.hasDatabase(t))return Promise.resolve()}else throw new te("Can not clear database. No database is specified");const n=this.isTransactionActive;n||await this.startTransaction();try{const r="SELECT concat('DROP VIEW IF EXISTS `', table_schema, '`.`', table_name, '`') AS `query` FROM `INFORMATION_SCHEMA`.`VIEWS` WHERE `TABLE_SCHEMA` = '".concat(t,"'"),s=await this.query(r);await Promise.all(s.map(u=>this.query(u.query)));const a="SET FOREIGN_KEY_CHECKS = 0;",o="SELECT concat('DROP TABLE IF EXISTS `', table_schema, '`.`', table_name, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_SCHEMA` = '".concat(t,"'"),l="SET FOREIGN_KEY_CHECKS = 1;";await this.query(a);const c=await this.query(o);await Promise.all(c.map(u=>this.query(u.query))),await this.query(l),n||await this.commitTransaction()}catch(r){try{n||await this.rollbackTransaction()}catch(s){}throw r}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const n=await this.getCurrentDatabase(),r=e.map(o=>{let{database:l,tableName:c}=this.driver.parseTableName(o);return l||(l=n),"(`t`.`schema` = '".concat(l,"' AND `t`.`name` = '").concat(c,"')")}).join(" OR "),s="SELECT `t`.*, `v`.`check_option` FROM ".concat(this.escapePath(this.getTypeormMetadataTableName())," `t` ")+"INNER JOIN `information_schema`.`views` `v` ON `v`.`table_schema` = `t`.`schema` AND `v`.`table_name` = `t`.`name` WHERE `t`.`type` = '".concat(Ze.VIEW,"' ").concat(r?"AND (".concat(r,")"):"");return(await this.query(s)).map(o=>{const l=new rs,c=o.schema===n?void 0:o.schema;return l.database=o.schema,l.name=this.driver.buildTableName(o.name,void 0,c),l.expression=o.value,l})}async loadTables(e){if(e&&e.length===0)return[];const t=[],n=await this.getCurrentDatabase();if(e){const b="SELECT TABLE_NAME, TABLE_SCHEMA FROM `INFORMATION_SCHEMA`.`TABLES` WHERE "+e.map(E=>{let[_,k]=E.split(".");return k||(k=_,_=this.driver.database||n),"(`TABLE_SCHEMA` = '".concat(_,"' AND `TABLE_NAME` = '").concat(k,"')")}).join(" OR ");t.push(...await this.query(b))}else{const y="SELECT TABLE_NAME, TABLE_SCHEMA FROM `INFORMATION_SCHEMA`.`TABLES`";t.push(...await this.query(y))}if(t.length===0)return[];const r=t.map(({TABLE_NAME:y,TABLE_SCHEMA:b})=>"(`TABLE_SCHEMA` = '".concat(b,"' AND `TABLE_NAME` = '").concat(y,"')")).join(" OR "),s="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE "+r,a="SELECT * FROM `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` WHERE `CONSTRAINT_NAME` = 'PRIMARY' AND (".concat(r,")"),o="SELECT `SCHEMA_NAME`, `DEFAULT_CHARACTER_SET_NAME` as `CHARSET`, `DEFAULT_COLLATION_NAME` AS `COLLATION` FROM `INFORMATION_SCHEMA`.`SCHEMATA`",l=t.map(({TABLE_NAME:y,TABLE_SCHEMA:b})=>"(`s`.`TABLE_SCHEMA` = '".concat(b,"' AND `s`.`TABLE_NAME` = '").concat(y,"')")).join(" OR "),c="SELECT `s`.* FROM `INFORMATION_SCHEMA`.`STATISTICS` `s` LEFT JOIN `INFORMATION_SCHEMA`.`REFERENTIAL_CONSTRAINTS` `rc` ON `s`.`INDEX_NAME` = `rc`.`CONSTRAINT_NAME` "+"WHERE (".concat(l,") AND `s`.`INDEX_NAME` != 'PRIMARY' AND `rc`.`CONSTRAINT_NAME` IS NULL"),d="SELECT `kcu`.`TABLE_SCHEMA`, `kcu`.`TABLE_NAME`, `kcu`.`CONSTRAINT_NAME`, `kcu`.`COLUMN_NAME`, `kcu`.`REFERENCED_TABLE_SCHEMA`, `kcu`.`REFERENCED_TABLE_NAME`, `kcu`.`REFERENCED_COLUMN_NAME`, `rc`.`DELETE_RULE` `ON_DELETE`, `rc`.`UPDATE_RULE` `ON_UPDATE` FROM `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` `kcu` INNER JOIN `INFORMATION_SCHEMA`.`REFERENTIAL_CONSTRAINTS` `rc` ON `rc`.`constraint_name` = `kcu`.`constraint_name` WHERE "+t.map(({TABLE_NAME:y,TABLE_SCHEMA:b})=>"(`kcu`.`TABLE_SCHEMA` = '".concat(b,"' AND `kcu`.`TABLE_NAME` = '").concat(y,"')")).join(" OR "),[h,f,m,p,w]=await Promise.all([this.query(s),this.query(a),this.query(o),this.query(c),this.query(d)]);return Promise.all(t.map(async y=>{const b=new Ht,E=m.find(R=>R.SCHEMA_NAME===y.TABLE_SCHEMA),_=E.COLLATION,k=E.CHARSET,B=y.TABLE_SCHEMA===n?void 0:y.TABLE_SCHEMA;b.database=y.TABLE_SCHEMA,b.name=this.driver.buildTableName(y.TABLE_NAME,void 0,B),b.columns=h.filter(R=>R.TABLE_NAME===y.TABLE_NAME&&R.TABLE_SCHEMA===y.TABLE_SCHEMA).map(R=>{const Q=p.filter(Z=>Z.TABLE_NAME===y.TABLE_NAME&&Z.TABLE_SCHEMA===y.TABLE_SCHEMA&&Z.COLUMN_NAME===R.COLUMN_NAME&&parseInt(Z.NON_UNIQUE,10)===0),$=this.connection.entityMetadatas.find(Z=>this.getTablePath(b)===this.getTablePath(Z)),P=Q.length>0&&$&&$.indices.some(Z=>Q.some(ve=>Z.name===ve.INDEX_NAME&&Z.synchronize===!1)),q=Q.every(Z=>p.some(ve=>ve.INDEX_NAME===Z.INDEX_NAME&&ve.COLUMN_NAME!==R.COLUMN_NAME)),S=new ii;if(S.name=R.COLUMN_NAME,S.type=R.DATA_TYPE.toLowerCase(),S.unsigned=S.zerofill?!0:R.COLUMN_TYPE.indexOf("unsigned")!==-1,this.driver.withWidthColumnTypes.indexOf(S.type)!==-1){const Z=R.COLUMN_TYPE.substring(R.COLUMN_TYPE.indexOf("(")+1,R.COLUMN_TYPE.indexOf(")"));S.width=Z&&!this.isDefaultColumnWidth(b,S,parseInt(Z))?parseInt(Z):void 0}if(R.COLUMN_DEFAULT===null||R.COLUMN_DEFAULT===void 0?S.default=void 0:S.default=R.COLUMN_DEFAULT==="CURRENT_TIMESTAMP"?R.COLUMN_DEFAULT:"'".concat(R.COLUMN_DEFAULT,"'"),R.EXTRA.indexOf("on update")!==-1&&(S.onUpdate=R.EXTRA.substring(R.EXTRA.indexOf("on update")+10)),R.GENERATION_EXPRESSION&&(S.asExpression=R.GENERATION_EXPRESSION,S.generatedType=R.EXTRA.indexOf("VIRTUAL")!==-1?"VIRTUAL":"STORED"),S.isUnique=Q.length>0&&!P&&!q,S.isNullable=R.IS_NULLABLE==="YES",S.isPrimary=f.some(Z=>Z.TABLE_NAME===R.TABLE_NAME&&Z.TABLE_SCHEMA===R.TABLE_SCHEMA&&Z.COLUMN_NAME===R.COLUMN_NAME),S.zerofill=R.COLUMN_TYPE.indexOf("zerofill")!==-1,S.isGenerated=R.EXTRA.indexOf("auto_increment")!==-1,S.isGenerated&&(S.generationStrategy="increment"),S.comment=typeof R.COLUMN_COMMENT=="string"&&R.COLUMN_COMMENT.length===0?void 0:R.COLUMN_COMMENT,R.CHARACTER_SET_NAME&&(S.charset=R.CHARACTER_SET_NAME===k?void 0:R.CHARACTER_SET_NAME),R.COLLATION_NAME&&(S.collation=R.COLLATION_NAME===_?void 0:R.COLLATION_NAME),this.driver.withLengthColumnTypes.indexOf(S.type)!==-1&&R.CHARACTER_MAXIMUM_LENGTH){const Z=R.CHARACTER_MAXIMUM_LENGTH.toString();S.length=this.isDefaultColumnLength(b,S,Z)?"":Z}if((S.type==="decimal"||S.type==="double"||S.type==="float")&&(R.NUMERIC_PRECISION!==null&&!this.isDefaultColumnPrecision(b,S,R.NUMERIC_PRECISION)&&(S.precision=parseInt(R.NUMERIC_PRECISION)),R.NUMERIC_SCALE!==null&&!this.isDefaultColumnScale(b,S,R.NUMERIC_SCALE)&&(S.scale=parseInt(R.NUMERIC_SCALE))),S.type==="enum"||S.type==="simple-enum"||S.type==="set"){const Z=R.COLUMN_TYPE,ve=Z.substring(Z.indexOf("(")+1,Z.lastIndexOf(")")).split(",");S.enum=ve.map(re=>re.substring(1,re.length-1)),S.length=""}return(S.type==="datetime"||S.type==="time"||S.type==="timestamp")&&R.DATETIME_PRECISION!==null&&R.DATETIME_PRECISION!==void 0&&!this.isDefaultColumnPrecision(b,S,parseInt(R.DATETIME_PRECISION))&&(S.precision=parseInt(R.DATETIME_PRECISION)),S});const D=We.uniq(w.filter(R=>R.TABLE_NAME===y.TABLE_NAME&&R.TABLE_SCHEMA===y.TABLE_SCHEMA),R=>R.CONSTRAINT_NAME);b.foreignKeys=D.map(R=>{const Q=w.filter(q=>q.CONSTRAINT_NAME===R.CONSTRAINT_NAME),$=R.REFERENCED_TABLE_SCHEMA===n?void 0:R.REFERENCED_TABLE_SCHEMA,P=this.driver.buildTableName(R.REFERENCED_TABLE_NAME,void 0,$);return new Fi({name:R.CONSTRAINT_NAME,columnNames:Q.map(q=>q.COLUMN_NAME),referencedDatabase:R.REFERENCED_TABLE_SCHEMA,referencedTableName:P,referencedColumnNames:Q.map(q=>q.REFERENCED_COLUMN_NAME),onDelete:R.ON_DELETE,onUpdate:R.ON_UPDATE})});const O=We.uniq(p.filter(R=>R.TABLE_NAME===y.TABLE_NAME&&R.TABLE_SCHEMA===y.TABLE_SCHEMA),R=>R.INDEX_NAME);return b.indices=O.map(R=>{const Q=p.filter(P=>P.TABLE_SCHEMA===R.TABLE_SCHEMA&&P.TABLE_NAME===R.TABLE_NAME&&P.INDEX_NAME===R.INDEX_NAME),$=parseInt(R.NON_UNIQUE,10);return new rn({table:b,name:R.INDEX_NAME,columnNames:Q.map(P=>P.COLUMN_NAME),isUnique:$===0,isSpatial:R.INDEX_TYPE==="SPATIAL",isFulltext:R.INDEX_TYPE==="FULLTEXT"})}),b}))}createTableSql(e,t){const n=e.columns.map(s=>this.buildCreateColumnSql(s,!0)).join(", ");let r="CREATE TABLE ".concat(this.escapePath(e)," (").concat(n);if(e.columns.filter(s=>s.isUnique).forEach(s=>{const a=e.indices.some(l=>l.columnNames.length===1&&!!l.isUnique&&l.columnNames.indexOf(s.name)!==-1),o=e.uniques.some(l=>l.columnNames.length===1&&l.columnNames.indexOf(s.name)!==-1);!a&&!o&&e.indices.push(new rn({name:this.connection.namingStrategy.uniqueConstraintName(e,[s.name]),columnNames:[s.name],isUnique:!0}))}),e.uniques.length>0&&e.uniques.forEach(s=>{e.indices.some(o=>o.name===s.name)||e.indices.push(new rn({name:s.name,columnNames:s.columnNames,isUnique:!0}))}),e.indices.length>0){const s=e.indices.map(a=>{const o=a.columnNames.map(c=>"`".concat(c,"`")).join(", ");a.name||(a.name=this.connection.namingStrategy.indexName(e,a.columnNames,a.where));let l="";return a.isUnique&&(l+="UNIQUE "),a.isSpatial&&(l+="SPATIAL "),a.isFulltext&&(l+="FULLTEXT "),"".concat(l,"INDEX `").concat(a.name,"` (").concat(o,")")}).join(", ");r+=", ".concat(s)}if(e.foreignKeys.length>0&&t){const s=e.foreignKeys.map(a=>{const o=a.columnNames.map(u=>"`".concat(u,"`")).join(", ");a.name||(a.name=this.connection.namingStrategy.foreignKeyName(e,a.columnNames));const l=a.referencedColumnNames.map(u=>"`".concat(u,"`")).join(", ");let c="CONSTRAINT `".concat(a.name,"` FOREIGN KEY (").concat(o,") REFERENCES ").concat(this.escapePath(this.getTablePath(a))," (").concat(l,")");return a.onDelete&&(c+=" ON DELETE ".concat(a.onDelete)),a.onUpdate&&(c+=" ON UPDATE ".concat(a.onUpdate)),c}).join(", ");r+=", ".concat(s)}if(e.primaryColumns.length>0){const s=e.primaryColumns.map(a=>"`".concat(a.name,"`")).join(", ");r+=", PRIMARY KEY (".concat(s,")")}return r+=") ENGINE=".concat(e.engine||"InnoDB"),new W(r)}dropTableSql(e){return new W("DROP TABLE ".concat(this.escapePath(e)))}createViewSql(e){return typeof e.expression=="string"?new W("CREATE VIEW ".concat(this.escapePath(e)," AS ").concat(e.expression)):new W("CREATE VIEW ".concat(this.escapePath(e)," AS ").concat(e.expression(this.connection).getQuery()))}async insertViewDefinitionSql(e){const t=await this.getCurrentDatabase(),n=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:Ze.VIEW,schema:t,name:e.name,value:n})}dropViewSql(e){return new W("DROP VIEW ".concat(this.escapePath(e)))}async deleteViewDefinitionSql(e){const t=await this.getCurrentDatabase(),n=ue.isView(e)?e.name:e;return this.deleteTypeormMetadataSql({type:Ze.VIEW,schema:t,name:n})}createIndexSql(e,t){const n=t.columnNames.map(s=>"`".concat(s,"`")).join(", ");let r="";return t.isUnique&&(r+="UNIQUE "),t.isSpatial&&(r+="SPATIAL "),t.isFulltext&&(r+="FULLTEXT "),new W("CREATE ".concat(r,"INDEX `").concat(t.name,"` ON ").concat(this.escapePath(e)," (").concat(n,")"))}dropIndexSql(e,t){let n=ue.isTableIndex(t)?t.name:t;return new W("DROP INDEX `".concat(n,"` ON ").concat(this.escapePath(e)))}createPrimaryKeySql(e,t){const n=t.map(r=>"`".concat(r,"`")).join(", ");return new W("ALTER TABLE ".concat(this.escapePath(e)," ADD PRIMARY KEY (").concat(n,")"))}dropPrimaryKeySql(e){return new W("ALTER TABLE ".concat(this.escapePath(e)," DROP PRIMARY KEY"))}createForeignKeySql(e,t){const n=t.columnNames.map(a=>"`".concat(a,"`")).join(", "),r=t.referencedColumnNames.map(a=>"`".concat(a,"`")).join(",");let s="ALTER TABLE ".concat(this.escapePath(e)," ADD CONSTRAINT `").concat(t.name,"` FOREIGN KEY (").concat(n,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(t)),"(").concat(r,")");return t.onDelete&&(s+=" ON DELETE ".concat(t.onDelete)),t.onUpdate&&(s+=" ON UPDATE ".concat(t.onUpdate)),new W(s)}dropForeignKeySql(e,t){const n=ue.isTableForeignKey(t)?t.name:t;return new W("ALTER TABLE ".concat(this.escapePath(e)," DROP FOREIGN KEY `").concat(n,"`"))}escapeComment(e){return!e||e.length===0?"''":(e=e.replace(/\\/g,"\\\\").replace(/'/g,"''").replace(/\u0000/g,""),"'".concat(e,"'"))}escapePath(e){const{database:t,tableName:n}=this.driver.parseTableName(e);return t&&t!==this.driver.database?"`".concat(t,"`.`").concat(n,"`"):"`".concat(n,"`")}buildCreateColumnSql(e,t,n=!1){let r="";return n?r=this.connection.driver.createFullType(e):r="`".concat(e.name,"` ").concat(this.connection.driver.createFullType(e)),e.asExpression&&(r+=" AS (".concat(e.asExpression,") ").concat(e.generatedType?e.generatedType:"VIRTUAL")),e.zerofill?r+=" ZEROFILL":e.unsigned&&(r+=" UNSIGNED"),e.enum&&(r+=" (".concat(e.enum.map(s=>"'"+s+"'").join(", "),")")),e.charset&&(r+=' CHARACTER SET "'.concat(e.charset,'"')),e.collation&&(r+=' COLLATE "'.concat(e.collation,'"')),e.isNullable||(r+=" NOT NULL"),e.isNullable&&(r+=" NULL"),e.isPrimary&&!t&&(r+=" PRIMARY KEY"),e.isGenerated&&e.generationStrategy==="increment"&&(r+=" AUTO_INCREMENT"),e.comment&&(r+=" COMMENT ".concat(this.escapeComment(e.comment))),e.default!==void 0&&e.default!==null&&(r+=" DEFAULT ".concat(e.default)),e.onUpdate&&(r+=" ON UPDATE ".concat(e.onUpdate)),r}isDefaultColumnWidth(e,t,n){if(this.connection.hasMetadata(e.name)){const a=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(a&&a.width)return!1}const r=this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].width;if(r){const a=["int","tinyint","smallint","mediumint"].indexOf(t.type)!==-1;return t.unsigned&&a?r-1===n:r===n}return!1}}class _4{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["bit","int","integer","tinyint","smallint","mediumint","bigint","float","double","double precision","real","decimal","dec","numeric","fixed","bool","boolean","date","datetime","timestamp","time","year","char","nchar","national char","varchar","nvarchar","national varchar","blob","text","tinyblob","tinytext","mediumblob","mediumtext","longblob","longtext","enum","set","binary","varbinary","json","geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","geometrycollection"],this.supportedUpsertTypes=["on-duplicate-key-update"],this.spatialTypes=["geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","geometrycollection"],this.withLengthColumnTypes=["char","varchar","nvarchar","binary","varbinary"],this.withWidthColumnTypes=["bit","tinyint","smallint","mediumint","int","integer","bigint"],this.withPrecisionColumnTypes=["decimal","dec","numeric","fixed","float","double","double precision","real","time","datetime","timestamp"],this.withScaleColumnTypes=["decimal","dec","numeric","fixed","float","double","double precision","real"],this.unsignedAndZerofillTypes=["int","integer","smallint","tinyint","mediumint","bigint","decimal","dec","numeric","fixed","float","double","double precision","real"],this.mappedDataTypes={createDate:"datetime",createDatePrecision:6,createDateDefault:"CURRENT_TIMESTAMP(6)",updateDate:"datetime",updateDatePrecision:6,updateDateDefault:"CURRENT_TIMESTAMP(6)",deleteDate:"datetime",deleteDatePrecision:6,deleteDateNullable:!0,version:"int",treeLevel:"int",migrationId:"int",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.dataTypeDefaults={varchar:{length:255},nvarchar:{length:255},"national varchar":{length:255},char:{length:1},binary:{length:1},varbinary:{length:255},decimal:{precision:10,scale:0},dec:{precision:10,scale:0},numeric:{precision:10,scale:0},fixed:{precision:10,scale:0},float:{precision:12},double:{precision:22},time:{precision:0},datetime:{precision:0},timestamp:{precision:0},bit:{width:1},int:{width:11},integer:{width:11},tinyint:{width:4},smallint:{width:6},mediumint:{width:9},bigint:{width:20}},this.maxAliasLength=63,this.cteCapabilities={enabled:!1},this.connection=e,this.options=e.options,this.loadDependencies(),this.client=new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,(t,n)=>this.connection.logger.logQuery(t,n),this.options.serviceConfigOptions,this.options.formatOptions),this.database=Ue.buildDriverOptions(this.options).database}async connect(){if(!this.database){const e=await this.createQueryRunner("master");this.database=await e.getCurrentDatabase(),await e.release()}}afterConnect(){return Promise.resolve()}async disconnect(){}createSchemaBuilder(){return new of(this.connection)}createQueryRunner(e){return new k4(this,new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,(t,n)=>this.connection.logger.logQuery(t,n),this.options.serviceConfigOptions,this.options.formatOptions))}escapeQueryWithParameters(e,t,n){const r=Object.keys(n).map(s=>n[s]);return!t||!Object.keys(t).length?[e,r]:(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o)=>{if(!t.hasOwnProperty(o))return s;let l=t[o];return a?l.map(c=>(r.push(c),this.createParameter(o,r.length-1))).join(", "):typeof l=="function"?l():(r.push(l),this.createParameter(o,r.length-1))}),[e,r])}escape(e){return"`"+e+"`"}buildTableName(e,t,n){let r=[e];return n&&r.unshift(n),r.join(".")}parseTableName(e){const t=this.database,n=void 0;if(ue.isTable(e)||ue.isView(e)){const s=this.parseTableName(e.name);return{database:e.database||s.database||t,schema:e.schema||s.schema||n,tableName:s.tableName}}if(ue.isTableForeignKey(e)){const s=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||s.database||t,schema:e.referencedSchema||s.schema||n,tableName:s.tableName}}if(ue.isEntityMetadata(e))return{database:e.database||t,schema:e.schema||n,tableName:e.tableName};const r=e.split(".");return{database:(r.length>1?r[0]:void 0)||t,schema:n,tableName:r.length>1?r[1]:r[0]}}preparePersistentValue(e,t){return t.transformer&&(e=yn.transformTo(t.transformer,e)),!this.options.formatOptions||this.options.formatOptions.castParameters!==!1?this.client.preparePersistentValue(e,t):e==null?e:t.type===Boolean?e===!0?1:0:t.type==="date"?et.mixedDateToDateString(e):t.type==="time"?et.mixedDateToTimeString(e):t.type==="json"?JSON.stringify(e):t.type==="timestamp"||t.type==="datetime"||t.type===Date?et.mixedDateToDate(e):t.type==="simple-array"||t.type==="set"?et.simpleArrayToString(e):t.type==="simple-json"?et.simpleJsonToString(e):t.type==="enum"||t.type==="simple-enum"?""+e:e}prepareHydratedValue(e,t){return e==null?t.transformer?yn.transformFrom(t.transformer,e):e:!this.options.formatOptions||this.options.formatOptions.castParameters!==!1?this.client.prepareHydratedValue(e,t):(t.type===Boolean||t.type==="bool"||t.type==="boolean"?e=!!e:t.type==="datetime"||t.type===Date?e=et.normalizeHydratedDate(e):t.type==="date"?e=et.mixedDateToDateString(e):t.type==="json"?e=typeof e=="string"?JSON.parse(e):e:t.type==="time"?e=et.mixedTimeToString(e):t.type==="simple-array"||t.type==="set"?e=et.stringToSimpleArray(e):t.type==="simple-json"?e=et.stringToSimpleJson(e):(t.type==="enum"||t.type==="simple-enum")&&t.enum&&!isNaN(e)&&t.enum.indexOf(parseInt(e))>=0?e=parseInt(e):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=yn.transformFrom(t.transformer,e)),e)}normalizeType(e){return e.type===Number||e.type==="integer"?"int":e.type===String?"varchar":e.type===Date?"datetime":e.type===Buffer?"blob":e.type===Boolean?"tinyint":e.type==="uuid"?"varchar":e.type==="simple-array"||e.type==="simple-json"?"text":e.type==="simple-enum"?"enum":e.type==="double precision"||e.type==="real"?"double":e.type==="dec"||e.type==="numeric"||e.type==="fixed"?"decimal":e.type==="bool"||e.type==="boolean"?"tinyint":e.type==="nvarchar"||e.type==="national varchar"?"varchar":e.type==="nchar"||e.type==="national char"?"char":e.type||""}normalizeDefault(e){const t=e.default;if(t!==null){if((e.type==="enum"||e.type==="simple-enum")&&t!==void 0)return"'".concat(t,"'");if(e.type==="set"&&t!==void 0)return"'".concat(et.simpleArrayToString(t),"'");if(typeof t=="number")return"".concat(t);if(typeof t=="boolean")return t?"1":"0";if(typeof t=="function")return t();if(typeof t=="string")return"'".concat(t,"'");if(t!==void 0)return"".concat(t)}}normalizeIsUnique(e){return e.entityMetadata.indices.some(t=>t.isUnique&&t.columns.length===1&&t.columns[0]===e)}getColumnLength(e){if(e.length)return e.length.toString();if(e.generationStrategy==="uuid")return"36";switch(e.type){case String:case"varchar":case"nvarchar":case"national varchar":return"255";case"varbinary":return"255";default:return""}}createFullType(e){let t=e.type;return this.getColumnLength(e)?t+="(".concat(this.getColumnLength(e),")"):e.width?t+="(".concat(e.width,")"):e.precision!==null&&e.precision!==void 0&&e.scale!==null&&e.scale!==void 0?t+="(".concat(e.precision,",").concat(e.scale,")"):e.precision!==null&&e.precision!==void 0&&(t+="(".concat(e.precision,")")),e.isArray&&(t+=" array"),t}obtainMasterConnection(){return new Promise((e,t)=>{this.poolCluster?this.poolCluster.getConnection("MASTER",(n,r)=>{n?t(n):e(this.prepareDbConnection(r))}):this.pool?this.pool.getConnection((n,r)=>{n?t(n):e(this.prepareDbConnection(r))}):t(new te("Connection is not established with mysql database"))})}obtainSlaveConnection(){return this.poolCluster?new Promise((e,t)=>{this.poolCluster.getConnection("SLAVE*",(n,r)=>{n?t(n):e(this.prepareDbConnection(r))})}):this.obtainMasterConnection()}createGeneratedMap(e,t,n){const r=e.generatedColumns.reduce((s,a)=>{let o;return a.generationStrategy==="increment"&&t.insertId&&(o=t.insertId+n),We.mergeDeep(s,a.createValueMap(o))},{});return Object.keys(r).length>0?r:void 0}findChangedColumns(e,t){return t.filter(n=>{const r=e.find(a=>a.name===n.databaseName);if(!r)return!1;let s=n.length;return!s&&n.generationStrategy==="uuid"&&(s=this.getColumnLength(n)),r.name!==n.databaseName||r.type!==this.normalizeType(n)||r.length!==s||r.width!==n.width||r.precision!==n.precision||r.scale!==n.scale||r.zerofill!==n.zerofill||r.unsigned!==n.unsigned||r.asExpression!==n.asExpression||r.generatedType!==n.generatedType||r.comment!==this.escapeComment(n.comment)||!this.compareDefaultValues(this.normalizeDefault(n),r.default)||r.enum&&n.enum&&!We.isArraysEqual(r.enum,n.enum.map(a=>a+""))||r.onUpdate!==n.onUpdate||r.isPrimary!==n.isPrimary||r.isNullable!==n.isNullable||r.isUnique!==this.normalizeIsUnique(n)||n.generationStrategy!=="uuid"&&r.isGenerated!==n.isGenerated})}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!0}createParameter(e,t){return"?"}loadDependencies(){const e=this.options.driver||jt.load("typeorm-aurora-data-api-driver");this.DataApiDriver=e,this.DataApiDriver=this.DataApiDriver.default||this.DataApiDriver}createConnectionOptions(e,t){return t=Object.assign({},t,Ue.buildDriverOptions(t)),Object.assign({},{resourceArn:e.resourceArn,secretArn:e.secretArn,database:e.database,region:e.region,type:e.type},{host:t.host,user:t.username,password:t.password,database:t.database,port:t.port,ssl:e.ssl},e.extra||{})}async createPool(e){return{}}prepareDbConnection(e){const{logger:t}=this.connection;return e.listeners("error").length===0&&e.on("error",n=>t.log("warn","MySQL connection raised an error. ".concat(n))),e}compareDefaultValues(e,t){return typeof e=="string"&&typeof t=="string"&&(e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t}escapeComment(e){return e&&(e=e.replace(/\u0000/g,""),e)}}class R4 extends lf{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.mode=t,this.broadcaster=new as(this)}connect(){return this.databaseConnection?Promise.resolve(this.databaseConnection):this.databaseConnectionPromise?this.databaseConnectionPromise:(this.mode==="slave"&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then(([e,t])=>{this.driver.connectedQueryRunners.push(this),this.databaseConnection=e;const n=r=>this.releasePostgresConnection(r);return this.releaseCallback=r=>{this.databaseConnection.removeListener("error",n),t(r)},this.databaseConnection.on("error",n),this.databaseConnection}):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then(([e,t])=>{this.driver.connectedQueryRunners.push(this),this.databaseConnection=e;const n=r=>this.releasePostgresConnection(r);return this.releaseCallback=r=>{this.databaseConnection.removeListener("error",n),t(r)},this.databaseConnection.on("error",n),this.databaseConnection}),this.databaseConnectionPromise)}async releasePostgresConnection(e){if(this.isReleased)return;this.isReleased=!0,this.releaseCallback&&(this.releaseCallback(e),this.releaseCallback=void 0);const t=this.driver.connectedQueryRunners.indexOf(this);t!==-1&&this.driver.connectedQueryRunners.splice(t,1)}release(){return this.releasePostgresConnection()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}this.transactionDepth===0?(await this.query("START TRANSACTION"),e&&await this.query("SET TRANSACTION ISOLATION LEVEL "+e)):await this.query("SAVEPOINT typeorm_".concat(this.transactionDepth)),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new zi;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.query("COMMIT"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new zi;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.query("ROLLBACK"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new Gn;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);try{const s=+new Date,a=await r.query(e,t),o=this.driver.options.maxQueryExecutionTime,c=+new Date-s;o&&c>o&&this.driver.connection.logger.logQuerySlow(c,e,t,this);const u=new Ir;if(a){switch(a.hasOwnProperty("rows")&&(u.records=a.rows),a.hasOwnProperty("rowCount")&&(u.affected=a.rowCount),a.command){case"DELETE":case"UPDATE":u.raw=[a.rows,a.rowCount];break;default:u.raw=a.rows}if(!n)return u.raw}return u}catch(s){throw this.driver.connection.logger.logQueryError(s,e,t,this),new kr(e,t,s)}}async stream(e,t,n,r){const s=this.driver.loadStreamDependency();if(this.isReleased)throw new Gn;const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=a.query(new s(e,t));return n&&o.on("end",n),r&&o.on("error",r),o}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){return!!(await this.query("SELECT * FROM pg_database WHERE datname='".concat(e,"';"))).length}async getCurrentDatabase(){return(await this.query("SELECT * FROM current_database()"))[0].current_database}async hasSchema(e){return!!(await this.query('SELECT * FROM "information_schema"."schemata" WHERE "schema_name" = \''.concat(e,"'"))).length}async getCurrentSchema(){return(await this.query("SELECT * FROM current_schema()"))[0].current_schema}async hasTable(e){const t=this.driver.parseTableName(e);t.schema||(t.schema=await this.getCurrentSchema());const n='SELECT * FROM "information_schema"."tables" WHERE "table_schema" = \''.concat(t.schema,"' AND \"table_name\" = '").concat(t.tableName,"'");return!!(await this.query(n)).length}async hasColumn(e,t){const n=this.driver.parseTableName(e);n.schema||(n.schema=await this.getCurrentSchema());const r='SELECT * FROM "information_schema"."columns" WHERE "table_schema" = \''.concat(n.schema,"' AND \"table_name\" = '").concat(n.tableName,"' AND \"column_name\" = '").concat(t,"'");return!!(await this.query(r)).length}async createDatabase(e,t){if(t&&await this.hasDatabase(e))return Promise.resolve();const n='CREATE DATABASE "'.concat(e,'"'),r='DROP DATABASE "'.concat(e,'"');await this.executeQueries(new W(n),new W(r))}async dropDatabase(e,t){const n=t?'DROP DATABASE IF EXISTS "'.concat(e,'"'):'DROP DATABASE "'.concat(e,'"'),r='CREATE DATABASE "'.concat(e,'"');await this.executeQueries(new W(n),new W(r))}async createSchema(e,t){const n=e.indexOf(".")===-1?e:e.split(".")[1],r=t?'CREATE SCHEMA IF NOT EXISTS "'.concat(n,'"'):'CREATE SCHEMA "'.concat(n,'"'),s='DROP SCHEMA "'.concat(n,'" CASCADE');await this.executeQueries(new W(r),new W(s))}async dropSchema(e,t,n){const r=e.indexOf(".")===-1?e:e.split(".")[1],s=t?'DROP SCHEMA IF EXISTS "'.concat(r,'" ').concat(n?"CASCADE":""):'DROP SCHEMA "'.concat(r,'" ').concat(n?"CASCADE":""),a='CREATE SCHEMA "'.concat(r,'"');await this.executeQueries(new W(s),new W(a))}async createTable(e,t=!1,n=!0,r=!0){if(t&&await this.hasTable(e))return Promise.resolve();const s=[],a=[],o=e.columns.filter(u=>u.type==="enum"||u.type==="simple-enum"),l=[];for(const u of o){const d=await this.hasEnumType(e,u),h=this.buildEnumName(e,u);!d&&l.indexOf(h)===-1&&(l.push(h),s.push(this.createEnumTypeSql(e,u,h)),a.push(this.dropEnumTypeSql(e,u,h)))}const c=e.columns.filter(u=>u.generatedType==="STORED"&&u.asExpression);for(const u of c){const d=(await this.getTableNameWithSchema(e.name)).split("."),h=d[1],f=d[0],m=this.insertTypeormMetadataSql({database:this.driver.database,schema:f,table:h,type:Ze.GENERATED_COLUMN,name:u.name,value:u.asExpression}),p=this.deleteTypeormMetadataSql({database:this.driver.database,schema:f,table:h,type:Ze.GENERATED_COLUMN,name:u.name});s.push(m),a.push(p)}s.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),n&&e.foreignKeys.forEach(u=>a.push(this.dropForeignKeySql(e,u))),r&&e.indices.forEach(u=>{u.name||(u.name=this.connection.namingStrategy.indexName(e,u.columnNames,u.where)),s.push(this.createIndexSql(e,u)),a.push(this.dropIndexSql(e,u))}),await this.executeQueries(s,a)}async dropTable(e,t,n=!0,r=!0){if(t&&!await this.hasTable(e))return Promise.resolve();const s=n,a=this.getTablePath(e),o=await this.getCachedTable(a),l=[],c=[];r&&o.indices.forEach(d=>{l.push(this.dropIndexSql(o,d)),c.push(this.createIndexSql(o,d))}),n&&o.foreignKeys.forEach(d=>l.push(this.dropForeignKeySql(o,d))),l.push(this.dropTableSql(o)),c.push(this.createTableSql(o,s));const u=o.columns.filter(d=>d.generatedType&&d.asExpression);for(const d of u){const h=(await this.getTableNameWithSchema(o.name)).split("."),f=h[1],m=h[0],p=this.deleteTypeormMetadataSql({database:this.driver.database,schema:m,table:f,type:Ze.GENERATED_COLUMN,name:d.name}),w=this.insertTypeormMetadataSql({database:this.driver.database,schema:m,table:f,type:Ze.GENERATED_COLUMN,name:d.name,value:d.asExpression});l.push(p),c.push(w)}await this.executeQueries(l,c)}async createView(e,t=!1){const n=[],r=[];n.push(this.createViewSql(e)),t&&n.push(await this.insertViewDefinitionSql(e)),r.push(this.dropViewSql(e)),t&&r.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(n,r)}async dropView(e){const t=ue.isView(e)?e.name:e,n=await this.getCachedView(t),r=[],s=[];r.push(await this.deleteViewDefinitionSql(n)),r.push(this.dropViewSql(n)),s.push(await this.insertViewDefinitionSql(n)),s.push(this.createViewSql(n)),await this.executeQueries(r,s)}async renameTable(e,t){const n=[],r=[],s=ue.isTable(e)?e:await this.getCachedTable(e),a=s.clone(),{schema:o,tableName:l}=this.driver.parseTableName(s);if(a.name=o?"".concat(o,".").concat(t):t,n.push(new W("ALTER TABLE ".concat(this.escapePath(s),' RENAME TO "').concat(t,'"'))),r.push(new W("ALTER TABLE ".concat(this.escapePath(a),' RENAME TO "').concat(l,'"'))),a.primaryColumns.length>0&&!a.primaryColumns[0].primaryKeyConstraintName){const u=a.primaryColumns.map(f=>f.name),d=this.connection.namingStrategy.primaryKeyName(s,u),h=this.connection.namingStrategy.primaryKeyName(a,u);n.push(new W("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(d,'" TO "').concat(h,'"'))),r.push(new W("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(h,'" TO "').concat(d,'"')))}a.columns.map(u=>{if(u.isGenerated&&u.generationStrategy==="increment"){const d=this.buildSequencePath(s,u.name),h=this.buildSequenceName(s,u.name),f=this.buildSequencePath(a,u.name),m=this.buildSequenceName(a,u.name),p="ALTER SEQUENCE ".concat(this.escapePath(d),' RENAME TO "').concat(m,'"'),w="ALTER SEQUENCE ".concat(this.escapePath(f),' RENAME TO "').concat(h,'"');n.push(new W(p)),r.push(new W(w))}}),a.uniques.forEach(u=>{const d=this.connection.namingStrategy.uniqueConstraintName(s,u.columnNames);if(u.name!==d)return;const h=this.connection.namingStrategy.uniqueConstraintName(a,u.columnNames);n.push(new W("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(u.name,'" TO "').concat(h,'"'))),r.push(new W("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(h,'" TO "').concat(u.name,'"'))),u.name=h}),a.indices.forEach(u=>{const d=this.connection.namingStrategy.indexName(s,u.columnNames,u.where);if(u.name!==d)return;const{schema:h}=this.driver.parseTableName(a),f=this.connection.namingStrategy.indexName(a,u.columnNames,u.where),m=h?'ALTER INDEX "'.concat(h,'"."').concat(u.name,'" RENAME TO "').concat(f,'"'):'ALTER INDEX "'.concat(u.name,'" RENAME TO "').concat(f,'"'),p=h?'ALTER INDEX "'.concat(h,'"."').concat(f,'" RENAME TO "').concat(u.name,'"'):'ALTER INDEX "'.concat(f,'" RENAME TO "').concat(u.name,'"');n.push(new W(m)),r.push(new W(p)),u.name=f}),a.foreignKeys.forEach(u=>{const d=this.connection.namingStrategy.foreignKeyName(s,u.columnNames,this.getTablePath(u),u.referencedColumnNames);if(u.name!==d)return;const h=this.connection.namingStrategy.foreignKeyName(a,u.columnNames,this.getTablePath(u),u.referencedColumnNames);n.push(new W("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(u.name,'" TO "').concat(h,'"'))),r.push(new W("ALTER TABLE ".concat(this.escapePath(a),' RENAME CONSTRAINT "').concat(h,'" TO "').concat(u.name,'"'))),u.name=h});const c=a.columns.filter(u=>u.type==="enum"||u.type==="simple-enum");for(let u of c){if(u.enumName)continue;const d=await this.getUserDefinedTypeName(s,u);n.push(new W('ALTER TYPE "'.concat(d.schema,'"."').concat(d.name,'" RENAME TO ').concat(this.buildEnumName(a,u,!1)))),r.push(new W("ALTER TYPE ".concat(this.buildEnumName(a,u),' RENAME TO "').concat(d.name,'"')))}await this.executeQueries(n,r)}async addColumn(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),s=[],a=[];if((t.type==="enum"||t.type==="simple-enum")&&(await this.hasEnumType(n,t)||(s.push(this.createEnumTypeSql(n,t)),a.push(this.dropEnumTypeSql(n,t)))),s.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD ").concat(this.buildCreateColumnSql(n,t)))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n),' DROP COLUMN "').concat(t.name,'"'))),t.isPrimary){const l=r.primaryColumns;if(l.length>0){const d=l[0].primaryKeyConstraintName?l[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,l.map(f=>f.name)),h=l.map(f=>'"'.concat(f.name,'"')).join(", ");s.push(new W("ALTER TABLE ".concat(this.escapePath(n),' DROP CONSTRAINT "').concat(d,'"'))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n),' ADD CONSTRAINT "').concat(d,'" PRIMARY KEY (').concat(h,")")))}l.push(t);const c=l[0].primaryKeyConstraintName?l[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,l.map(d=>d.name)),u=l.map(d=>'"'.concat(d.name,'"')).join(", ");s.push(new W("ALTER TABLE ".concat(this.escapePath(n),' ADD CONSTRAINT "').concat(c,'" PRIMARY KEY (').concat(u,")"))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n),' DROP CONSTRAINT "').concat(c,'"')))}const o=r.indices.find(l=>l.columnNames.length===1&&l.columnNames[0]===t.name);if(o&&(s.push(this.createIndexSql(n,o)),a.push(this.dropIndexSql(n,o))),t.isUnique){const l=new Un({name:this.connection.namingStrategy.uniqueConstraintName(n,[t.name]),columnNames:[t.name]});r.uniques.push(l),s.push(new W("ALTER TABLE ".concat(this.escapePath(n),' ADD CONSTRAINT "').concat(l.name,'" UNIQUE ("').concat(t.name,'")'))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n),' DROP CONSTRAINT "').concat(l.name,'"')))}if(t.generatedType==="STORED"&&t.asExpression){const l=(await this.getTableNameWithSchema(n.name)).split("."),c=l[1],u=l[0],d=this.insertTypeormMetadataSql({database:this.driver.database,schema:u,table:c,type:Ze.GENERATED_COLUMN,name:t.name,value:t.asExpression}),h=this.deleteTypeormMetadataSql({database:this.driver.database,schema:u,table:c,type:Ze.GENERATED_COLUMN,name:t.name});s.push(d),a.push(h)}t.comment&&(s.push(new W("COMMENT ON COLUMN ".concat(this.escapePath(n),'."').concat(t.name,'" IS ').concat(this.escapeComment(t.comment)))),a.push(new W("COMMENT ON COLUMN ".concat(this.escapePath(n),'."').concat(t.name,'" IS ').concat(this.escapeComment(t.comment))))),await this.executeQueries(s,a),r.addColumn(t),this.replaceCachedTable(n,r)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const r=ue.isTable(e)?e:await this.getCachedTable(e),s=ue.isTableColumn(t)?t:r.columns.find(o=>o.name===t);if(!s)throw new te('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));let a;return ue.isTableColumn(n)?a=n:(a=s.clone(),a.name=n),this.changeColumn(r,s,a)}async changeColumn(e,t,n){const r=ue.isTable(e)?e:await this.getCachedTable(e);let s=r.clone();const a=[],o=[];let l=!1;const c=ue.isTableColumn(t)?t:r.columns.find(u=>u.name===t);if(!c)throw new te('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));if(c.type!==n.type||c.length!==n.length||n.isArray!==c.isArray||!c.generatedType&&n.generatedType==="STORED"||c.asExpression!==n.asExpression&&n.generatedType==="STORED")await this.dropColumn(r,c),await this.addColumn(r,n),s=r.clone();else{if(c.name!==n.name){if(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME COLUMN "').concat(c.name,'" TO "').concat(n.name,'"'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME COLUMN "').concat(n.name,'" TO "').concat(c.name,'"'))),c.type==="enum"||c.type==="simple-enum"){const d=await this.getUserDefinedTypeName(r,c);a.push(new W('ALTER TYPE "'.concat(d.schema,'"."').concat(d.name,'" RENAME TO ').concat(this.buildEnumName(r,n,!1)))),o.push(new W("ALTER TYPE ".concat(this.buildEnumName(r,n),' RENAME TO "').concat(d.name,'"')))}if(c.isPrimary===!0&&!c.primaryKeyConstraintName){const h=s.primaryColumns.map(p=>p.name),f=this.connection.namingStrategy.primaryKeyName(s,h);h.splice(h.indexOf(c.name),1),h.push(n.name);const m=this.connection.namingStrategy.primaryKeyName(s,h);a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(f,'" TO "').concat(m,'"'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(m,'" TO "').concat(f,'"')))}if(c.isGenerated===!0&&n.generationStrategy==="increment"){const d=this.buildSequencePath(r,c.name),h=this.buildSequenceName(r,c.name),f=this.buildSequencePath(r,n.name),m=this.buildSequenceName(r,n.name),p="ALTER SEQUENCE ".concat(this.escapePath(d),' RENAME TO "').concat(m,'"'),w="ALTER SEQUENCE ".concat(this.escapePath(f),' RENAME TO "').concat(h,'"');a.push(new W(p)),o.push(new W(w))}s.findColumnUniques(c).forEach(d=>{const h=this.connection.namingStrategy.uniqueConstraintName(s,d.columnNames);if(d.name!==h)return;d.columnNames.splice(d.columnNames.indexOf(c.name),1),d.columnNames.push(n.name);const f=this.connection.namingStrategy.uniqueConstraintName(s,d.columnNames);a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(d.name,'" TO "').concat(f,'"'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(f,'" TO "').concat(d.name,'"'))),d.name=f}),s.findColumnIndices(c).forEach(d=>{const h=this.connection.namingStrategy.indexName(s,d.columnNames,d.where);if(d.name!==h)return;d.columnNames.splice(d.columnNames.indexOf(c.name),1),d.columnNames.push(n.name);const{schema:f}=this.driver.parseTableName(r),m=this.connection.namingStrategy.indexName(s,d.columnNames,d.where),p=f?'ALTER INDEX "'.concat(f,'"."').concat(d.name,'" RENAME TO "').concat(m,'"'):'ALTER INDEX "'.concat(d.name,'" RENAME TO "').concat(m,'"'),w=f?'ALTER INDEX "'.concat(f,'"."').concat(m,'" RENAME TO "').concat(d.name,'"'):'ALTER INDEX "'.concat(m,'" RENAME TO "').concat(d.name,'"');a.push(new W(p)),o.push(new W(w)),d.name=m}),s.findColumnForeignKeys(c).forEach(d=>{const h=this.connection.namingStrategy.foreignKeyName(s,d.columnNames,this.getTablePath(d),d.referencedColumnNames);if(d.name!==h)return;d.columnNames.splice(d.columnNames.indexOf(c.name),1),d.columnNames.push(n.name);const f=this.connection.namingStrategy.foreignKeyName(s,d.columnNames,this.getTablePath(d),d.referencedColumnNames);a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(d.name,'" TO "').concat(f,'"'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME CONSTRAINT "').concat(f,'" TO "').concat(d.name,'"'))),d.name=f});const u=s.columns.find(d=>d.name===c.name);s.columns[s.columns.indexOf(u)].name=n.name,c.name=n.name}if((n.precision!==c.precision||n.scale!==c.scale)&&(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" TYPE ').concat(this.driver.createFullType(n)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" TYPE ').concat(this.driver.createFullType(c))))),(n.type==="enum"||n.type==="simple-enum")&&(c.type==="enum"||c.type==="simple-enum")&&(!We.isArraysEqual(n.enum,c.enum)||n.enumName!==c.enumName)){const u=n.isArray?"[]":"",d=this.buildEnumName(r,n),h=this.buildEnumName(r,c),f=this.buildEnumName(r,c,!1),m=this.buildEnumName(r,c,!0,!1,!0),p=this.buildEnumName(r,c,!1,!1,!0);a.push(new W("ALTER TYPE ".concat(h," RENAME TO ").concat(p))),o.push(new W("ALTER TYPE ".concat(m," RENAME TO ").concat(f))),a.push(this.createEnumTypeSql(r,n,d)),o.push(this.dropEnumTypeSql(r,n,d)),c.default!==null&&c.default!==void 0&&(l=!0,a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" DROP DEFAULT'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" SET DEFAULT ').concat(c.default))));const w="".concat(d).concat(u,' USING "').concat(n.name,'"::"text"::').concat(d).concat(u),y="".concat(m).concat(u,' USING "').concat(n.name,'"::"text"::').concat(m).concat(u);a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" TYPE ').concat(w))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" TYPE ').concat(y))),n.default!==null&&n.default!==void 0&&(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" SET DEFAULT ').concat(n.default))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" DROP DEFAULT')))),a.push(this.dropEnumTypeSql(r,c,m)),o.push(this.createEnumTypeSql(r,c,m))}if(c.isNullable!==n.isNullable&&(n.isNullable?(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" DROP NOT NULL'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" SET NOT NULL')))):(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" SET NOT NULL'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" DROP NOT NULL'))))),c.comment!==n.comment&&(a.push(new W("COMMENT ON COLUMN ".concat(this.escapePath(r),'."').concat(c.name,'" IS ').concat(this.escapeComment(n.comment)))),o.push(new W("COMMENT ON COLUMN ".concat(this.escapePath(r),'."').concat(n.name,'" IS ').concat(this.escapeComment(c.comment))))),n.isPrimary!==c.isPrimary){const u=s.primaryColumns;if(u.length>0){const d=u[0].primaryKeyConstraintName?u[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,u.map(f=>f.name)),h=u.map(f=>'"'.concat(f.name,'"')).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(d,'"'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(d,'" PRIMARY KEY (').concat(h,")")))}if(n.isPrimary===!0){u.push(n);const d=s.columns.find(m=>m.name===n.name);d.isPrimary=!0;const h=u[0].primaryKeyConstraintName?u[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,u.map(m=>m.name)),f=u.map(m=>'"'.concat(m.name,'"')).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(h,'" PRIMARY KEY (').concat(f,")"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(h,'"')))}else{const d=u.find(f=>f.name===n.name);u.splice(u.indexOf(d),1);const h=s.columns.find(f=>f.name===n.name);if(h.isPrimary=!1,u.length>0){const f=u[0].primaryKeyConstraintName?u[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,u.map(p=>p.name)),m=u.map(p=>'"'.concat(p.name,'"')).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(f,'" PRIMARY KEY (').concat(m,")"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(f,'"')))}}}if(n.isUnique!==c.isUnique)if(n.isUnique===!0){const u=new Un({name:this.connection.namingStrategy.uniqueConstraintName(r,[n.name]),columnNames:[n.name]});s.uniques.push(u),a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(u.name,'" UNIQUE ("').concat(n.name,'")'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(u.name,'"')))}else{const u=s.uniques.find(d=>d.columnNames.length===1&&!!d.columnNames.find(h=>h===n.name));s.uniques.splice(s.uniques.indexOf(u),1),a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(u.name,'"'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(u.name,'" UNIQUE ("').concat(n.name,'")')))}if(c.isGenerated!==n.isGenerated&&(c.isGenerated&&(c.generationStrategy==="uuid"?(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" DROP DEFAULT'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(c.name,'" SET DEFAULT ').concat(this.driver.uuidGenerator)))):c.generationStrategy==="increment"&&(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" DROP DEFAULT'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,"\" SET DEFAULT nextval('").concat(this.escapePath(this.buildSequencePath(r,n)),"')"))),a.push(new W("DROP SEQUENCE ".concat(this.escapePath(this.buildSequencePath(r,n))))),o.push(new W("CREATE SEQUENCE IF NOT EXISTS ".concat(this.escapePath(this.buildSequencePath(r,n))," OWNED BY ").concat(this.escapePath(r),'."').concat(n.name,'"'))))),n.generationStrategy==="uuid"?n.isGenerated===!0?(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" SET DEFAULT ').concat(this.driver.uuidGenerator))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" DROP DEFAULT')))):(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" DROP DEFAULT'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" SET DEFAULT ').concat(this.driver.uuidGenerator)))):n.generationStrategy==="increment"&&(n.isGenerated===!0?(a.push(new W("CREATE SEQUENCE IF NOT EXISTS ".concat(this.escapePath(this.buildSequencePath(r,n))," OWNED BY ").concat(this.escapePath(r),'."').concat(n.name,'"'))),o.push(new W("DROP SEQUENCE ".concat(this.escapePath(this.buildSequencePath(r,n))))),a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,"\" SET DEFAULT nextval('").concat(this.escapePath(this.buildSequencePath(r,n)),"')"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" DROP DEFAULT')))):(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" DROP DEFAULT'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,"\" SET DEFAULT nextval('").concat(this.escapePath(this.buildSequencePath(r,n)),"')"))),a.push(new W("DROP SEQUENCE ".concat(this.escapePath(this.buildSequencePath(r,n))))),o.push(new W("CREATE SEQUENCE IF NOT EXISTS ".concat(this.escapePath(this.buildSequencePath(r,n))," OWNED BY ").concat(this.escapePath(r),'."').concat(n.name,'"')))))),n.default!==c.default&&!l&&(n.default!==null&&n.default!==void 0?(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" SET DEFAULT ').concat(n.default))),c.default!==null&&c.default!==void 0?o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" SET DEFAULT ').concat(c.default))):o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" DROP DEFAULT')))):c.default!==null&&c.default!==void 0&&(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" DROP DEFAULT'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" SET DEFAULT ').concat(c.default))))),((n.spatialFeatureType||"").toLowerCase()!==(c.spatialFeatureType||"").toLowerCase()||n.srid!==c.srid)&&(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" TYPE ').concat(this.driver.createFullType(n)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" TYPE ').concat(this.driver.createFullType(c))))),n.generatedType!==c.generatedType&&(!n.generatedType||n.generatedType==="VIRTUAL")){const u=(await this.getTableNameWithSchema(r.name)).split("."),d=u[1],h=u[0];a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' RENAME COLUMN "').concat(c.name,'" TO "TEMP_OLD_').concat(c.name,'"'))),a.push(new W("ALTER TABLE ".concat(this.escapePath(r)," ADD ").concat(this.buildCreateColumnSql(r,n)))),a.push(new W("UPDATE ".concat(this.escapePath(r),' SET "').concat(n.name,'" = "TEMP_OLD_').concat(c.name,'"'))),a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP COLUMN "TEMP_OLD_').concat(c.name,'"'))),a.push(this.deleteTypeormMetadataSql({database:this.driver.database,schema:h,table:d,type:Ze.GENERATED_COLUMN,name:c.name})),o.push(this.insertTypeormMetadataSql({database:this.driver.database,schema:h,table:d,type:Ze.GENERATED_COLUMN,name:c.name,value:c.asExpression})),o.push(new W("ALTER TABLE ".concat(this.escapePath(r)," ADD ").concat(this.buildCreateColumnSql(r,c)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP COLUMN "').concat(n.name,'"')))}}await this.executeQueries(a,o),this.replaceCachedTable(r,s)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:r}of t)await this.changeColumn(e,n,r)}async dropColumn(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableColumn(t)?t:n.findColumnByName(t);if(!r)throw new te('Column "'.concat(t,'" was not found in table "').concat(n.name,'"'));const s=n.clone(),a=[],o=[];if(r.isPrimary){const d=r.primaryKeyConstraintName?r.primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,s.primaryColumns.map(m=>m.name)),h=s.primaryColumns.map(m=>'"'.concat(m.name,'"')).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(s),' DROP CONSTRAINT "').concat(d,'"'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(s),' ADD CONSTRAINT "').concat(d,'" PRIMARY KEY (').concat(h,")")));const f=s.findColumnByName(r.name);if(f.isPrimary=!1,s.primaryColumns.length>0){const m=s.primaryColumns[0].primaryKeyConstraintName?s.primaryColumns[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,s.primaryColumns.map(w=>w.name)),p=s.primaryColumns.map(w=>'"'.concat(w.name,'"')).join(", ");a.push(new W("ALTER TABLE ".concat(this.escapePath(s),' ADD CONSTRAINT "').concat(m,'" PRIMARY KEY (').concat(p,")"))),o.push(new W("ALTER TABLE ".concat(this.escapePath(s),' DROP CONSTRAINT "').concat(m,'"')))}}const l=s.indices.find(d=>d.columnNames.length===1&&d.columnNames[0]===r.name);l&&(s.indices.splice(s.indices.indexOf(l),1),a.push(this.dropIndexSql(n,l)),o.push(this.createIndexSql(n,l)));const c=s.checks.find(d=>!!d.columnNames&&d.columnNames.length===1&&d.columnNames[0]===r.name);c&&(s.checks.splice(s.checks.indexOf(c),1),a.push(this.dropCheckConstraintSql(n,c)),o.push(this.createCheckConstraintSql(n,c)));const u=s.uniques.find(d=>d.columnNames.length===1&&d.columnNames[0]===r.name);if(u&&(s.uniques.splice(s.uniques.indexOf(u),1),a.push(this.dropUniqueConstraintSql(n,u)),o.push(this.createUniqueConstraintSql(n,u))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n),' DROP COLUMN "').concat(r.name,'"'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD ").concat(this.buildCreateColumnSql(n,r)))),(r.type==="enum"||r.type==="simple-enum")&&await this.hasEnumType(n,r)){const h=await this.getUserDefinedTypeName(n,r),f='"'.concat(h.schema,'"."').concat(h.name,'"');a.push(this.dropEnumTypeSql(n,r,f)),o.push(this.createEnumTypeSql(n,r,f))}if(r.generatedType==="STORED"){const d=(await this.getTableNameWithSchema(n.name)).split("."),h=d[1],f=d[0],m=this.deleteTypeormMetadataSql({database:this.driver.database,schema:f,table:h,type:Ze.GENERATED_COLUMN,name:r.name}),p=this.insertTypeormMetadataSql({database:this.driver.database,schema:f,table:h,type:Ze.GENERATED_COLUMN,name:r.name,value:r.asExpression});a.push(m),o.push(p)}await this.executeQueries(a,o),s.removeColumn(r),this.replaceCachedTable(n,s)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t,n){const r=ue.isTable(e)?e:await this.getCachedTable(e),s=r.clone(),a=this.createPrimaryKeySql(r,t,n);s.columns.forEach(l=>{t.find(c=>c===l.name)&&(l.isPrimary=!0)});const o=this.dropPrimaryKeySql(s);await this.executeQueries(a,o),this.replaceCachedTable(r,s)}async updatePrimaryKeys(e,t){var n;const r=ue.isTable(e)?e:await this.getCachedTable(e),s=r.clone(),a=t.map(h=>h.name),o=[],l=[],c=s.primaryColumns;if(c.length>0){const h=c[0].primaryKeyConstraintName?c[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,c.map(m=>m.name)),f=c.map(m=>'"'.concat(m.name,'"')).join(", ");o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(h,'"'))),l.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(h,'" PRIMARY KEY (').concat(f,")")))}s.columns.filter(h=>a.indexOf(h.name)!==-1).forEach(h=>h.isPrimary=!0);const u=!((n=c[0])===null||n===void 0)&&n.primaryKeyConstraintName?c[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(s,a),d=a.map(h=>'"'.concat(h,'"')).join(", ");o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ADD CONSTRAINT "').concat(u,'" PRIMARY KEY (').concat(d,")"))),l.push(new W("ALTER TABLE ".concat(this.escapePath(r),' DROP CONSTRAINT "').concat(u,'"'))),await this.executeQueries(o,l),this.replaceCachedTable(r,s)}async dropPrimaryKey(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=this.dropPrimaryKeySql(n),s=this.createPrimaryKeySql(n,n.primaryColumns.map(a=>a.name),t);await this.executeQueries(r,s),n.primaryColumns.forEach(a=>{a.isPrimary=!1})}async createUniqueConstraint(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.uniqueConstraintName(n,t.columnNames));const r=this.createUniqueConstraintSql(n,t),s=this.dropUniqueConstraintSql(n,t);await this.executeQueries(r,s),n.addUniqueConstraint(t)}async createUniqueConstraints(e,t){for(const n of t)await this.createUniqueConstraint(e,n)}async dropUniqueConstraint(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableUnique(t)?t:n.uniques.find(o=>o.name===t);if(!r)throw new te("Supplied unique constraint was not found in table ".concat(n.name));const s=this.dropUniqueConstraintSql(n,r),a=this.createUniqueConstraintSql(n,r);await this.executeQueries(s,a),n.removeUniqueConstraint(r)}async dropUniqueConstraints(e,t){for(const n of t)await this.dropUniqueConstraint(e,n)}async createCheckConstraint(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.checkConstraintName(n,t.expression));const r=this.createCheckConstraintSql(n,t),s=this.dropCheckConstraintSql(n,t);await this.executeQueries(r,s),n.addCheckConstraint(t)}async createCheckConstraints(e,t){const n=t.map(r=>this.createCheckConstraint(e,r));await Promise.all(n)}async dropCheckConstraint(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableCheck(t)?t:n.checks.find(o=>o.name===t);if(!r)throw new te("Supplied check constraint was not found in table ".concat(n.name));const s=this.dropCheckConstraintSql(n,r),a=this.createCheckConstraintSql(n,r);await this.executeQueries(s,a),n.removeCheckConstraint(r)}async dropCheckConstraints(e,t){const n=t.map(r=>this.dropCheckConstraint(e,r));await Promise.all(n)}async createExclusionConstraint(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.exclusionConstraintName(n,t.expression));const r=this.createExclusionConstraintSql(n,t),s=this.dropExclusionConstraintSql(n,t);await this.executeQueries(r,s),n.addExclusionConstraint(t)}async createExclusionConstraints(e,t){const n=t.map(r=>this.createExclusionConstraint(e,r));await Promise.all(n)}async dropExclusionConstraint(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableExclusion(t)?t:n.exclusions.find(o=>o.name===t);if(!r)throw new te("Supplied exclusion constraint was not found in table ".concat(n.name));const s=this.dropExclusionConstraintSql(n,r),a=this.createExclusionConstraintSql(n,r);await this.executeQueries(s,a),n.removeExclusionConstraint(r)}async dropExclusionConstraints(e,t){const n=t.map(r=>this.dropExclusionConstraint(e,r));await Promise.all(n)}async createForeignKey(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const r=this.createForeignKeySql(n,t),s=this.dropForeignKeySql(n,t);await this.executeQueries(r,s),n.addForeignKey(t)}async createForeignKeys(e,t){for(const n of t)await this.createForeignKey(e,n)}async dropForeignKey(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableForeignKey(t)?t:n.foreignKeys.find(o=>o.name===t);if(!r)throw new te("Supplied foreign key was not found in table ".concat(n.name));r.name||(r.name=this.connection.namingStrategy.foreignKeyName(n,r.columnNames,this.getTablePath(r),r.referencedColumnNames));const s=this.dropForeignKeySql(n,r),a=this.createForeignKeySql(n,r);await this.executeQueries(s,a),n.removeForeignKey(r)}async dropForeignKeys(e,t){for(const n of t)await this.dropForeignKey(e,n)}async createIndex(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createIndexSql(n,t),s=this.dropIndexSql(n,t);await this.executeQueries(r,s),n.addIndex(t)}async createViewIndex(e,t){const n=ue.isView(e)?e:await this.getCachedView(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createViewIndexSql(n,t),s=this.dropIndexSql(n,t);await this.executeQueries(r,s),n.addIndex(t)}async createIndices(e,t){for(const n of t)await this.createIndex(e,n)}async createViewIndices(e,t){for(const n of t)await this.createViewIndex(e,n)}async dropIndex(e,t){const n=ue.isTable(e)?e:await this.getCachedTable(e),r=ue.isTableIndex(t)?t:n.indices.find(o=>o.name===t);if(!r)throw new te("Supplied index ".concat(t," was not found in table ").concat(n.name));r.name||(r.name=this.generateIndexName(n,r));const s=this.dropIndexSql(n,r),a=this.createIndexSql(n,r);await this.executeQueries(s,a),n.removeIndex(r)}async dropViewIndex(e,t){const n=ue.isView(e)?e:await this.getCachedView(e),r=ue.isTableIndex(t)?t:n.indices.find(o=>o.name===t);if(!r)throw new te("Supplied index ".concat(t," was not found in view ").concat(n.name));r.name||(r.name=this.generateIndexName(n,r));const s=this.dropIndexSql(n,r),a=this.createViewIndexSql(n,r);await this.executeQueries(s,a),n.removeIndex(r)}async dropIndices(e,t){for(const n of t)await this.dropIndex(e,n)}async clearTable(e){await this.query("TRUNCATE TABLE ".concat(this.escapePath(e)))}async clearDatabase(){const e=[];this.connection.entityMetadatas.filter(r=>r.schema).forEach(r=>{!!e.find(a=>a===r.schema)||e.push(r.schema)}),e.push(this.driver.options.schema||"current_schema()");const t=e.map(r=>r==="current_schema()"?r:"'"+r+"'").join(", "),n=this.isTransactionActive;n||await this.startTransaction();try{const r=await this.getVersion(),s="SELECT 'DROP VIEW IF EXISTS \"' || schemaname || '\".\"' || viewname || '\" CASCADE;' as \"query\" "+'FROM "pg_views" WHERE "schemaname" IN ('.concat(t,") AND \"viewname\" NOT IN ('geography_columns', 'geometry_columns', 'raster_columns', 'raster_overviews')"),a=await this.query(s);if(await Promise.all(a.map(c=>this.query(c.query))),qC.isGreaterOrEqual(r,"9.3")){const c="SELECT 'DROP MATERIALIZED VIEW IF EXISTS \"' || schemaname || '\".\"' || matviewname || '\" CASCADE;' as \"query\" "+'FROM "pg_matviews" WHERE "schemaname" IN ('.concat(t,")"),u=await this.query(c);await Promise.all(u.map(d=>this.query(d.query)))}const o='SELECT \'DROP TABLE IF EXISTS "\' || schemaname || \'"."\' || tablename || \'" CASCADE;\' as "query" FROM "pg_tables" WHERE "schemaname" IN ('.concat(t,") AND \"tablename\" NOT IN ('spatial_ref_sys')"),l=await this.query(o);await Promise.all(l.map(c=>this.query(c.query))),await this.dropEnumTypes(t),n||await this.commitTransaction()}catch(r){try{n||await this.rollbackTransaction()}catch(s){}throw r}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const n=await this.getCurrentDatabase(),r=await this.getCurrentSchema(),s=e.length===0?"1=1":e.map(d=>this.driver.parseTableName(d)).map(({schema:d,tableName:h})=>(d||(d=this.driver.options.schema||r),'("t"."schema" = \''.concat(d,'\' AND "t"."name" = \'').concat(h,"')"))).join(" OR "),a=e.length===0?"1=1":e.map(d=>this.driver.parseTableName(d)).map(({schema:d,tableName:h})=>(d||(d=this.driver.options.schema||r),'("ns"."nspname" = \''.concat(d,'\' AND "t"."relname" = \'').concat(h,"')"))).join(" OR "),o='SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN \'t\' THEN \'TRUE\' ELSE\'FALSE\' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" '+'WHERE "t"."relkind" IN (\'m\') AND "cnst"."contype" IS NULL AND ('.concat(a,")"),l='SELECT "t".* FROM '.concat(this.escapePath(this.getTypeormMetadataTableName()),' "t" ')+'INNER JOIN "pg_catalog"."pg_class" "c" ON "c"."relname" = "t"."name" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "c"."relnamespace" AND "n"."nspname" = "t"."schema" '+'WHERE "t"."type" IN (\''.concat(Ze.VIEW,"', '").concat(Ze.MATERIALIZED_VIEW,"') ").concat(s?"AND (".concat(s,")"):""),c=await this.query(l),u=await this.query(o);return c.map(d=>{const h=We.uniq(u.filter(p=>p.table_name===d.name&&p.table_schema===d.schema),p=>p.constraint_name),f=new rs,m=d.schema===r&&!this.driver.options.schema?void 0:d.schema;return f.database=n,f.schema=d.schema,f.name=this.driver.buildTableName(d.name,m),f.expression=d.value,f.materialized=d.type===Ze.MATERIALIZED_VIEW,f.indices=h.map(p=>{const w=u.filter(y=>y.table_schema===p.table_schema&&y.table_name===p.table_name&&y.constraint_name===p.constraint_name);return new rn({view:f,name:p.constraint_name,columnNames:w.map(y=>y.column_name),isUnique:p.is_unique==="TRUE",where:p.condition,isFulltext:!1})}),f})}async loadTables(e){if(e&&e.length===0)return[];const t=await this.getCurrentSchema(),n=await this.getCurrentDatabase(),r=[];if(e){const E='SELECT "table_schema", "table_name" FROM "information_schema"."tables" WHERE '+e.map(_=>this.driver.parseTableName(_)).map(({schema:_,tableName:k})=>'("table_schema" = \''.concat(_||t,"' AND \"table_name\" = '").concat(k,"')")).join(" OR ");r.push(...await this.query(E))}else{const b='SELECT "table_schema", "table_name" FROM "information_schema"."tables"';r.push(...await this.query(b))}if(r.length===0)return[];const a='SELECT columns.*, pg_catalog.col_description((\'"\' || table_catalog || \'"."\' || table_schema || \'"."\' || table_name || \'"\')::regclass::oid, ordinal_position) AS description, (\'"\' || "udt_schema" || \'"."\' || "udt_name" || \'"\')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE '+r.map(({table_schema:b,table_name:E})=>'("table_schema" = \''.concat(b,"' AND \"table_name\" = '").concat(E,"')")).join(" OR "),o=r.map(({table_schema:b,table_name:E})=>'("ns"."nspname" = \''.concat(b,'\' AND "t"."relname" = \'').concat(E,"')")).join(" OR "),l='SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN \'p\' THEN \'PRIMARY\' WHEN \'u\' THEN \'UNIQUE\' WHEN \'c\' THEN \'CHECK\' WHEN \'x\' THEN \'EXCLUDE\' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") '+"WHERE \"t\".\"relkind\" IN ('r', 'p') AND (".concat(o,")"),c='SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN \'t\' THEN \'TRUE\' ELSE\'FALSE\' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" '+'WHERE "t"."relkind" IN (\'r\', \'p\') AND "cnst"."contype" IS NULL AND ('.concat(o,")"),u=r.map(({table_schema:b,table_name:E})=>'("ns"."nspname" = \''.concat(b,'\' AND "cl"."relname" = \'').concat(E,"')")).join(" OR "),h=await this.hasSupportForPartitionedTables()?' AND "cl"."relispartition" = \'f\'':"",f='SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN \'INITIALLY DEFERRED\' ELSE \'INITIALLY IMMEDIATE\' END as condeferred, CASE "con1"."confdeltype" WHEN \'a\' THEN \'NO ACTION\' WHEN \'r\' THEN \'RESTRICT\' WHEN \'c\' THEN \'CASCADE\' WHEN \'n\' THEN \'SET NULL\' WHEN \'d\' THEN \'SET DEFAULT\' END as "confdeltype", CASE "con1"."confupdtype" WHEN \'a\' THEN \'NO ACTION\' WHEN \'r\' THEN \'RESTRICT\' WHEN \'c\' THEN \'CASCADE\' WHEN \'n\' THEN \'SET NULL\' WHEN \'d\' THEN \'SET DEFAULT\' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" '+'WHERE "con1"."contype" = \'f\' AND ('.concat(u,") ")+') "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" '+'INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid" '.concat(h)+'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"',[m,p,w,y]=await Promise.all([this.query(a),this.query(l),this.query(c),this.query(f)]);return Promise.all(r.map(async b=>{const E=new Ht,_=($,P)=>$[P]===t&&(!this.driver.options.schema||this.driver.options.schema===t)?void 0:$[P],k=_(b,"table_schema");E.database=n,E.schema=b.table_schema,E.name=this.driver.buildTableName(b.table_name,k),E.columns=await Promise.all(m.filter($=>$.table_name===b.table_name&&$.table_schema===b.table_schema).map(async $=>{const P=p.filter(re=>re.table_name===$.table_name&&re.table_schema===$.table_schema&&re.column_name===$.column_name),q=new ii;if(q.name=$.column_name,q.type=$.regtype.toLowerCase(),(q.type==="numeric"||q.type==="decimal"||q.type==="float")&&($.numeric_precision!==null&&!this.isDefaultColumnPrecision(E,q,$.numeric_precision)?q.precision=$.numeric_precision:$.numeric_scale!==null&&!this.isDefaultColumnScale(E,q,$.numeric_scale)&&(q.precision=void 0),$.numeric_scale!==null&&!this.isDefaultColumnScale(E,q,$.numeric_scale)?q.scale=$.numeric_scale:$.numeric_precision!==null&&!this.isDefaultColumnPrecision(E,q,$.numeric_precision)&&(q.scale=void 0)),(q.type==="interval"||q.type==="time without time zone"||q.type==="time with time zone"||q.type==="timestamp without time zone"||q.type==="timestamp with time zone")&&(q.precision=this.isDefaultColumnPrecision(E,q,$.datetime_precision)?void 0:$.datetime_precision),$.data_type==="USER-DEFINED"||$.data_type==="ARRAY"){const{name:re}=await this.getUserDefinedTypeName(E,q),ne=this.buildEnumName(E,q,!1,!0)!==re?re:void 0,Y='SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" '+'WHERE "n"."nspname" = \''.concat(b.table_schema,'\' AND "t"."typname" = \'').concat(ne||re,"'"),F=await this.query(Y);if(F.length&&(q.type="enum",q.enum=F.map(H=>H.value),q.enumName=ne),$.data_type==="ARRAY"){q.isArray=!0;const H=q.type.replace("[]","");q.type=this.connection.driver.normalizeType({type:H})}}if(q.type==="geometry"||q.type==="geography"){const re='SELECT * FROM (SELECT "f_table_schema" "table_schema", "f_table_name" "table_name", '+'"f_'.concat(q.type,'_column" "column_name", "srid", "type" ')+'FROM "'.concat(q.type,'_columns"')+") AS _ "+'WHERE "column_name" = \''.concat($.column_name,"' AND ")+'"table_schema" = \''.concat($.table_schema,"' AND ")+'"table_name" = \''.concat($.table_name,"'"),de=await this.query(re);de.length>0&&(q.spatialFeatureType=de[0].type,q.srid=de[0].srid)}if(this.driver.withLengthColumnTypes.indexOf(q.type)!==-1){let re;if(q.isArray){const de=/\((\d+)\)/.exec($.format_type);re=de?de[1]:void 0}else $.character_maximum_length&&(re=$.character_maximum_length.toString());re&&(q.length=this.isDefaultColumnLength(E,q,re)?"":re)}q.isNullable=$.is_nullable==="YES";const S=P.find(re=>re.constraint_type==="PRIMARY");if(S){q.isPrimary=!0;const de=p.filter(Y=>Y.table_name===$.table_name&&Y.table_schema===$.table_schema&&Y.column_name!==$.column_name&&Y.constraint_type==="PRIMARY").map(Y=>Y.column_name);de.push($.column_name);const ne=this.connection.namingStrategy.primaryKeyName(E,de);S.constraint_name!==ne&&(q.primaryKeyConstraintName=S.constraint_name)}const Z=P.filter(re=>re.constraint_type==="UNIQUE"),ve=Z.every(re=>p.some(de=>de.constraint_type==="UNIQUE"&&de.constraint_name===re.constraint_name&&de.column_name!==$.column_name));if(q.isUnique=Z.length>0&&!ve,$.is_identity==="YES")q.isGenerated=!0,q.generationStrategy="identity",q.generatedIdentity=$.identity_generation;else if($.column_default!==null&&$.column_default!==void 0){const re="nextval('".concat(this.buildSequenceName(E,$.column_name),"'::regclass)"),de="nextval('".concat(this.buildSequencePath(E,$.column_name),"'::regclass)"),ne=$.column_default.replace(/"/g,"");ne===re||ne===de?(q.isGenerated=!0,q.generationStrategy="increment"):$.column_default==="gen_random_uuid()"||/^uuid_generate_v\d\(\)/.test($.column_default)?q.type==="uuid"?(q.isGenerated=!0,q.generationStrategy="uuid"):q.default=$.column_default:$.column_default==="now()"||$.column_default.indexOf("'now'::text")!==-1?q.default=$.column_default:(q.default=$.column_default.replace(/::[\w\s.\[\]\-"]+/g,""),q.default=q.default.replace(/^(-?\d+)$/,"'$1'"))}if($.is_generated==="ALWAYS"&&$.generation_expression){q.generatedType="STORED";const re=await this.selectTypeormMetadataSql({database:n,schema:b.table_schema,table:b.table_name,type:Ze.GENERATED_COLUMN,name:q.name}),de=await this.query(re.query,re.parameters);de[0]&&de[0].value?q.asExpression=de[0].value:q.asExpression=""}return q.comment=$.description?$.description:void 0,$.character_set_name&&(q.charset=$.character_set_name),$.collation_name&&(q.collation=$.collation_name),q}));const B=We.uniq(p.filter($=>$.table_name===b.table_name&&$.table_schema===b.table_schema&&$.constraint_type==="UNIQUE"),$=>$.constraint_name);E.uniques=B.map($=>{const P=p.filter(q=>q.constraint_name===$.constraint_name);return new Un({name:$.constraint_name,columnNames:P.map(q=>q.column_name),deferrable:$.deferrable?$.deferred:void 0})});const D=We.uniq(p.filter($=>$.table_name===b.table_name&&$.table_schema===b.table_schema&&$.constraint_type==="CHECK"),$=>$.constraint_name);E.checks=D.map($=>{const P=p.filter(q=>q.constraint_name===$.constraint_name);return new cr({name:$.constraint_name,columnNames:P.map(q=>q.column_name),expression:$.expression.replace(/^\s*CHECK\s*\((.*)\)\s*$/i,"$1")})});const O=We.uniq(p.filter($=>$.table_name===b.table_name&&$.table_schema===b.table_schema&&$.constraint_type==="EXCLUDE"),$=>$.constraint_name);E.exclusions=O.map($=>new _a({name:$.constraint_name,expression:$.expression.substring(8)}));const R=We.uniq(y.filter($=>$.table_name===b.table_name&&$.table_schema===b.table_schema),$=>$.constraint_name);E.foreignKeys=R.map($=>{const P=y.filter(Z=>Z.constraint_name===$.constraint_name),q=_($,"referenced_table_schema"),S=this.driver.buildTableName($.referenced_table_name,q);return new Fi({name:$.constraint_name,columnNames:P.map(Z=>Z.column_name),referencedSchema:$.referenced_table_schema,referencedTableName:S,referencedColumnNames:P.map(Z=>Z.referenced_column_name),onDelete:$.on_delete,onUpdate:$.on_update,deferrable:$.deferrable?$.deferred:void 0})});const Q=We.uniq(w.filter($=>$.table_name===b.table_name&&$.table_schema===b.table_schema),$=>$.constraint_name);return E.indices=Q.map($=>{const P=w.filter(q=>q.table_schema===$.table_schema&&q.table_name===$.table_name&&q.constraint_name===$.constraint_name);return new rn({table:E,name:$.constraint_name,columnNames:P.map(q=>q.column_name),isUnique:$.is_unique==="TRUE",where:$.condition,isSpatial:P.every(q=>this.driver.spatialTypes.indexOf(q.type_name)>=0),isFulltext:!1})}),E}))}createTableSql(e,t){const n=e.columns.map(a=>this.buildCreateColumnSql(e,a)).join(", ");let r="CREATE TABLE ".concat(this.escapePath(e)," (").concat(n);if(e.columns.filter(a=>a.isUnique).forEach(a=>{e.uniques.some(l=>l.columnNames.length===1&&l.columnNames[0]===a.name)||e.uniques.push(new Un({name:this.connection.namingStrategy.uniqueConstraintName(e,[a.name]),columnNames:[a.name]}))}),e.uniques.length>0){const a=e.uniques.map(o=>{const l=o.name?o.name:this.connection.namingStrategy.uniqueConstraintName(e,o.columnNames),c=o.columnNames.map(d=>'"'.concat(d,'"')).join(", ");let u='CONSTRAINT "'.concat(l,'" UNIQUE (').concat(c,")");return o.deferrable&&(u+=" DEFERRABLE ".concat(o.deferrable)),u}).join(", ");r+=", ".concat(a)}if(e.checks.length>0){const a=e.checks.map(o=>{const l=o.name?o.name:this.connection.namingStrategy.checkConstraintName(e,o.expression);return'CONSTRAINT "'.concat(l,'" CHECK (').concat(o.expression,")")}).join(", ");r+=", ".concat(a)}if(e.exclusions.length>0){const a=e.exclusions.map(o=>{const l=o.name?o.name:this.connection.namingStrategy.exclusionConstraintName(e,o.expression);return'CONSTRAINT "'.concat(l,'" EXCLUDE ').concat(o.expression)}).join(", ");r+=", ".concat(a)}if(e.foreignKeys.length>0&&t){const a=e.foreignKeys.map(o=>{const l=o.columnNames.map(d=>'"'.concat(d,'"')).join(", ");o.name||(o.name=this.connection.namingStrategy.foreignKeyName(e,o.columnNames,this.getTablePath(o),o.referencedColumnNames));const c=o.referencedColumnNames.map(d=>'"'.concat(d,'"')).join(", ");let u='CONSTRAINT "'.concat(o.name,'" FOREIGN KEY (').concat(l,") REFERENCES ").concat(this.escapePath(this.getTablePath(o))," (").concat(c,")");return o.onDelete&&(u+=" ON DELETE ".concat(o.onDelete)),o.onUpdate&&(u+=" ON UPDATE ".concat(o.onUpdate)),o.deferrable&&(u+=" DEFERRABLE ".concat(o.deferrable)),u}).join(", ");r+=", ".concat(a)}const s=e.columns.filter(a=>a.isPrimary);if(s.length>0){const a=s[0].primaryKeyConstraintName?s[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(e,s.map(l=>l.name)),o=s.map(l=>'"'.concat(l.name,'"')).join(", ");r+=', CONSTRAINT "'.concat(a,'" PRIMARY KEY (').concat(o,")")}return r+=")",e.columns.filter(a=>a.comment).forEach(a=>r+="; COMMENT ON COLUMN ".concat(this.escapePath(e),'."').concat(a.name,'" IS ').concat(this.escapeComment(a.comment))),new W(r)}async getVersion(){return(await this.query("SELECT version()"))[0].version.replace(/^PostgreSQL ([\d\.]+) .*$/,"$1")}dropTableSql(e){return new W("DROP TABLE ".concat(this.escapePath(e)))}createViewSql(e){const t=e.materialized?"MATERIALIZED ":"",n=this.escapePath(e);return typeof e.expression=="string"?new W("CREATE ".concat(t,"VIEW ").concat(n," AS ").concat(e.expression)):new W("CREATE ".concat(t,"VIEW ").concat(n," AS ").concat(e.expression(this.connection).getQuery()))}async insertViewDefinitionSql(e){const t=await this.getCurrentSchema();let{schema:n,tableName:r}=this.driver.parseTableName(e);n||(n=t);const s=e.materialized?Ze.MATERIALIZED_VIEW:Ze.VIEW,a=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:s,schema:n,name:r,value:a})}dropViewSql(e){const t=e.materialized?"MATERIALIZED ":"";return new W("DROP ".concat(t,"VIEW ").concat(this.escapePath(e)))}async deleteViewDefinitionSql(e){const t=await this.getCurrentSchema();let{schema:n,tableName:r}=this.driver.parseTableName(e);n||(n=t);const s=e.materialized?Ze.MATERIALIZED_VIEW:Ze.VIEW;return this.deleteTypeormMetadataSql({type:s,schema:n,name:r})}async dropEnumTypes(e){const t='SELECT \'DROP TYPE IF EXISTS "\' || n.nspname || \'"."\' || t.typname || \'" CASCADE;\' as "query" FROM "pg_type" "t" INNER JOIN "pg_enum" "e" ON "e"."enumtypid" = "t"."oid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" '+'WHERE "n"."nspname" IN ('.concat(e,') GROUP BY "n"."nspname", "t"."typname"'),n=await this.query(t);await Promise.all(n.map(r=>this.query(r.query)))}async hasEnumType(e,t){let{schema:n}=this.driver.parseTableName(e);n||(n=await this.getCurrentSchema());const r=this.buildEnumName(e,t,!1,!0),s='SELECT "n"."nspname", "t"."typname" FROM "pg_type" "t" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" '+'WHERE "n"."nspname" = \''.concat(n,'\' AND "t"."typname" = \'').concat(r,"'");return!!(await this.query(s)).length}createEnumTypeSql(e,t,n){n||(n=this.buildEnumName(e,t));const r=t.enum.map(s=>"'".concat(s.replace("'","''"),"'")).join(", ");return new W("CREATE TYPE ".concat(n," AS ENUM(").concat(r,")"))}dropEnumTypeSql(e,t,n){return n||(n=this.buildEnumName(e,t)),new W("DROP TYPE ".concat(n))}createIndexSql(e,t){const n=t.columnNames.map(r=>'"'.concat(r,'"')).join(", ");return new W("CREATE ".concat(t.isUnique?"UNIQUE ":"",'INDEX "').concat(t.name,'" ON ').concat(this.escapePath(e)," ").concat(t.isSpatial?"USING GiST ":"","(").concat(n,") ").concat(t.where?"WHERE "+t.where:""))}createViewIndexSql(e,t){const n=t.columnNames.map(r=>'"'.concat(r,'"')).join(", ");return new W("CREATE ".concat(t.isUnique?"UNIQUE ":"",'INDEX "').concat(t.name,'" ON ').concat(this.escapePath(e)," (").concat(n,") ").concat(t.where?"WHERE "+t.where:""))}dropIndexSql(e,t){let n=ue.isTableIndex(t)?t.name:t;const{schema:r}=this.driver.parseTableName(e);return r?new W('DROP INDEX "'.concat(r,'"."').concat(n,'"')):new W('DROP INDEX "'.concat(n,'"'))}createPrimaryKeySql(e,t,n){const r=n||this.connection.namingStrategy.primaryKeyName(e,t),s=t.map(a=>'"'.concat(a,'"')).join(", ");return new W("ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(r,'" PRIMARY KEY (').concat(s,")"))}dropPrimaryKeySql(e){if(!e.primaryColumns.length)throw new te("Table ".concat(e," has no primary keys."));const t=e.primaryColumns.map(s=>s.name),n=e.primaryColumns[0].primaryKeyConstraintName,r=n||this.connection.namingStrategy.primaryKeyName(e,t);return new W("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(r,'"'))}createUniqueConstraintSql(e,t){const n=t.columnNames.map(s=>'"'+s+'"').join(", ");let r="ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(t.name,'" UNIQUE (').concat(n,")");return t.deferrable&&(r+=" DEFERRABLE ".concat(t.deferrable)),new W(r)}dropUniqueConstraintSql(e,t){const n=ue.isTableUnique(t)?t.name:t;return new W("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(n,'"'))}createCheckConstraintSql(e,t){return new W("ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(t.name,'" CHECK (').concat(t.expression,")"))}dropCheckConstraintSql(e,t){const n=ue.isTableCheck(t)?t.name:t;return new W("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(n,'"'))}createExclusionConstraintSql(e,t){return new W("ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(t.name,'" EXCLUDE ').concat(t.expression))}dropExclusionConstraintSql(e,t){const n=ue.isTableExclusion(t)?t.name:t;return new W("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(n,'"'))}createForeignKeySql(e,t){const n=t.columnNames.map(a=>'"'+a+'"').join(", "),r=t.referencedColumnNames.map(a=>'"'+a+'"').join(",");let s="ALTER TABLE ".concat(this.escapePath(e),' ADD CONSTRAINT "').concat(t.name,'" FOREIGN KEY (').concat(n,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(t)),"(").concat(r,")");return t.onDelete&&(s+=" ON DELETE ".concat(t.onDelete)),t.onUpdate&&(s+=" ON UPDATE ".concat(t.onUpdate)),t.deferrable&&(s+=" DEFERRABLE ".concat(t.deferrable)),new W(s)}dropForeignKeySql(e,t){const n=ue.isTableForeignKey(t)?t.name:t;return new W("ALTER TABLE ".concat(this.escapePath(e),' DROP CONSTRAINT "').concat(n,'"'))}buildSequenceName(e,t){const{tableName:n}=this.driver.parseTableName(e),r=ue.isTableColumn(t)?t.name:t;let s="".concat(n,"_").concat(r,"_seq");return s.length>this.connection.driver.maxAliasLength&&(s="".concat(n.substring(0,29),"_").concat(r.substring(0,Math.max(29,63-e.name.length-5)),"_seq")),s}buildSequencePath(e,t){const{schema:n}=this.driver.parseTableName(e);return n?"".concat(n,".").concat(this.buildSequenceName(e,t)):this.buildSequenceName(e,t)}buildEnumName(e,t,n=!0,r,s){const{schema:a,tableName:o}=this.driver.parseTableName(e);let l=t.enumName?t.enumName:"".concat(o,"_").concat(t.name.toLowerCase(),"_enum");return a&&n&&(l="".concat(a,".").concat(l)),s&&(l=l+"_old"),l.split(".").map(c=>r?c:'"'.concat(c,'"')).join(".")}async getUserDefinedTypeName(e,t){let{schema:n,tableName:r}=this.driver.parseTableName(e);n||(n=await this.getCurrentSchema());const s=await this.query('SELECT "udt_schema", "udt_name" '+'FROM "information_schema"."columns" WHERE "table_schema" = \''.concat(n,"' AND \"table_name\" = '").concat(r,"' AND \"column_name\"='").concat(t.name,"'"));let a=s[0].udt_name;return a.indexOf("_")===0&&(a=a.substr(1,a.length)),{schema:s[0].udt_schema,name:a}}escapeComment(e){return!e||e.length===0?"NULL":(e=e.replace(/'/g,"''").replace(/\u0000/g,""),"'".concat(e,"'"))}escapePath(e){const{schema:t,tableName:n}=this.driver.parseTableName(e);return t&&t!==this.driver.searchSchema?'"'.concat(t,'"."').concat(n,'"'):'"'.concat(n,'"')}async getTableNameWithSchema(e){const t=ue.isTable(e)?e.name:e;if(t.indexOf(".")===-1){const r=(await this.query("SELECT current_schema()"))[0].current_schema;return"".concat(r,".").concat(t)}else return"".concat(t.split(".")[0],".").concat(t.split(".")[1])}buildCreateColumnSql(e,t){let n='"'+t.name+'"';if(t.isGenerated===!0&&t.generationStrategy!=="uuid")if(t.generationStrategy==="identity"){const r=t.generatedIdentity||"BY DEFAULT";n+=" ".concat(t.type," GENERATED ").concat(r," AS IDENTITY")}else(t.type==="integer"||t.type==="int"||t.type==="int4")&&(n+=" SERIAL"),(t.type==="smallint"||t.type==="int2")&&(n+=" SMALLSERIAL"),(t.type==="bigint"||t.type==="int8")&&(n+=" BIGSERIAL");return t.type==="enum"||t.type==="simple-enum"?(n+=" "+this.buildEnumName(e,t),t.isArray&&(n+=" array")):(!t.isGenerated||t.type==="uuid")&&(n+=" "+this.connection.driver.createFullType(t)),t.generatedType==="STORED"&&t.asExpression&&(n+=" GENERATED ALWAYS AS (".concat(t.asExpression,") STORED")),t.charset&&(n+=' CHARACTER SET "'+t.charset+'"'),t.collation&&(n+=' COLLATE "'+t.collation+'"'),t.isNullable!==!0&&(n+=" NOT NULL"),t.default!==void 0&&t.default!==null&&(n+=" DEFAULT "+t.default),t.isGenerated&&t.generationStrategy==="uuid"&&!t.default&&(n+=" DEFAULT ".concat(this.driver.uuidGenerator)),n}async hasSupportForPartitionedTables(){return!!(await this.query("SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'")).length}}class P4 extends R4{constructor(e,t){super(e,t)}}class I4 extends P4{constructor(e,t,n){super(e,n),this.client=t}connect(){return this.databaseConnection?Promise.resolve(this.databaseConnection):this.databaseConnectionPromise?this.databaseConnectionPromise:(this.mode==="slave"&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then(([e,t])=>(this.driver.connectedQueryRunners.push(this),this.databaseConnection=e,this.releaseCallback=t,this.databaseConnection)):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then(([e,t])=>(this.driver.connectedQueryRunners.push(this),this.databaseConnection=e,this.releaseCallback=t,this.databaseConnection)),this.databaseConnectionPromise)}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}this.transactionDepth===0?await this.client.startTransaction():await this.query("SAVEPOINT typeorm_".concat(this.transactionDepth)),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new zi;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.client.commitTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new zi;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_".concat(this.transactionDepth-1)):(await this.client.rollbackTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new Gn;const r=await this.client.query(e,t),s=new Ir;return s.raw=r,r!=null&&r.hasOwnProperty("records")&&Array.isArray(r.records)&&(s.records=r.records),r!=null&&r.hasOwnProperty("numberOfRecordsUpdated")&&(s.affected=r.numberOfRecordsUpdated),n?s:s.raw}}class $4 extends FC{}class O4 extends $4{constructor(e){super(),this.transactionSupport="nested",this.connection=e,this.options=e.options,this.isReplicated=!1,this.loadDependencies(),this.client=new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,(t,n)=>this.connection.logger.logQuery(t,n),this.options.serviceConfigOptions,this.options.formatOptions),this.database=Ue.buildDriverOptions(this.options).database}async connect(){}async disconnect(){}createQueryRunner(e){return new I4(this,new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,(t,n)=>this.connection.logger.logQuery(t,n),this.options.serviceConfigOptions,this.options.formatOptions),e)}preparePersistentValue(e,t){return this.options.formatOptions&&this.options.formatOptions.castParameters===!1?super.preparePersistentValue(e,t):(t.transformer&&(e=yn.transformTo(t.transformer,e)),this.client.preparePersistentValue(e,t))}prepareHydratedValue(e,t){return this.options.formatOptions&&this.options.formatOptions.castParameters===!1?super.prepareHydratedValue(e,t):(t.transformer&&(e=yn.transformFrom(t.transformer,e)),this.client.prepareHydratedValue(e,t))}loadDependencies(){const e=this.options.driver||jt.load("typeorm-aurora-data-api-driver"),{pg:t}=e;this.DataApiDriver=t}executeQuery(e,t){return this.connection.query(t)}async afterConnect(){const e=await this.checkMetadataForExtensions();return e.hasExtensions&&await this.enableExtensions(e,this.connection),Promise.resolve()}}class D4 extends sl{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new as(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async executeSet(e){if(this.isReleased)throw new Gn;return(await this.connect()).executeSet(e,!1)}async query(e,t,n=!1){if(this.isReleased)throw new Gn;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const s=e.substr(0,e.indexOf(" "));try{let a;["BEGIN","ROLLBACK","COMMIT","CREATE","ALTER","DROP"].indexOf(s)!==-1?a=await r.execute(e,!1):["INSERT","UPDATE","DELETE"].indexOf(s)!==-1?a=await r.run(e,t,!1):a=await r.query(e,t||[]);const o=new Ir;return a!=null&&a.hasOwnProperty("values")&&(o.raw=a.values,o.records=a.values),a!=null&&a.hasOwnProperty("changes")&&(o.affected=a.changes.changes,o.raw=a.changes.lastId||a.changes.changes),n?o:o.raw}catch(a){throw this.driver.connection.logger.logQueryError(a,e,t,this),new kr(e,t,a)}}parametrize(e){return Object.keys(e).map(t=>'"'.concat(t,'"')+"=?")}}class M4 extends Wc{constructor(e){super(e),this.database=this.options.database,this.driver=this.options.driver,this.sqlite=this.options.driver}async connect(){this.databaseConnection=this.createDatabaseConnection(),await this.databaseConnection}async disconnect(){return this.queryRunner=void 0,(await this.databaseConnection).close().then(()=>{this.databaseConnection=void 0})}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new D4(this)),this.queryRunner}async createDatabaseConnection(){const e=this.options.mode||"no-encryption",t=e!=="no-encryption",n=typeof this.options.version>"u"?1:this.options.version,r=await this.sqlite.createConnection(this.options.database,t,e,n);return await r.open(),await r.query("PRAGMA foreign_keys = ON"),this.options.journalMode&&["DELETE","TRUNCATE","PERSIST","MEMORY","WAL","OFF"].indexOf(this.options.journalMode)!==-1&&await r.query("PRAGMA journal_mode = ".concat(this.options.journalMode)),r}loadDependencies(){if(this.sqlite=this.driver,!this.driver)throw new rl("Capacitor","@capacitor-community/sqlite")}}class L4 extends lf{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.mode=t,this.broadcaster=new as(this)}async connect(){if(this.session)return Promise.resolve(this.session);const[e]=await this.driver.instanceDatabase.createSession({});return this.session=e,this.sessionTransaction=await e.transaction(),this.session}async release(){return this.isReleased=!0,this.session&&await this.session.delete(),this.session=void 0,Promise.resolve()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}await this.connect(),await this.sessionTransaction.begin(),this.connection.logger.logQuery("START TRANSACTION"),await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive||!this.sessionTransaction)throw new zi;await this.broadcaster.broadcast("BeforeTransactionCommit"),await this.sessionTransaction.commit(),this.connection.logger.logQuery("COMMIT"),this.isTransactionActive=!1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive||!this.sessionTransaction)throw new zi;await this.broadcaster.broadcast("BeforeTransactionRollback"),await this.sessionTransaction.rollback(),this.connection.logger.logQuery("ROLLBACK"),this.isTransactionActive=!1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new Gn;try{const r=+new Date;await this.connect();let s;const a=e.startsWith("SELECT"),o=a&&!this.isTransactionActive?this.driver.instanceDatabase:this.sessionTransaction;!this.isTransactionActive&&!a&&await this.sessionTransaction.begin();try{this.driver.connection.logger.logQuery(e,t,this),s=await o.run({sql:e,params:t?t.reduce((h,f,m)=>(h["param"+m]=f,h),{}):void 0,json:!0}),!this.isTransactionActive&&!a&&await this.sessionTransaction.commit()}catch(h){try{!this.isTransactionActive&&!a&&await this.sessionTransaction.rollback()}catch(f){}throw h}const l=this.driver.options.maxQueryExecutionTime,u=+new Date-r;l&&u>l&&this.driver.connection.logger.logQuerySlow(u,e,t,this);const d=new Ir;return d.raw=s,d.records=s?s[0]:[],s&&s[1]&&s[1].rowCountExact&&(d.affected=parseInt(s[1].rowCountExact)),n?d:d.records}catch(r){throw this.driver.connection.logger.logQueryError(r,e,t,this),new kr(e,t,r)}finally{}}async updateDDL(e,t){if(this.isReleased)throw new Gn;this.driver.connection.logger.logQuery(e,t,this);try{const n=+new Date,[r]=await this.driver.instanceDatabase.updateSchema(e);await r.promise();const s=this.driver.options.maxQueryExecutionTime,o=+new Date-n;s&&o>s&&this.driver.connection.logger.logQuerySlow(o,e,t,this)}catch(n){throw this.driver.connection.logger.logQueryError(n,e,t,this),new kr(e,t,n)}}async stream(e,t,n,r){if(this.isReleased)throw new Gn;try{this.driver.connection.logger.logQuery(e,t,this);const s={sql:e,params:t?t.reduce((o,l,c)=>(o["param"+c]=l,o),{}):void 0,json:!0},a=this.driver.instanceDatabase.runStream(s);return n&&a.on("end",n),r&&a.on("error",r),a}catch(s){throw this.driver.connection.logger.logQueryError(s,e,t,this),new kr(e,t,s)}}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){throw new te("Check database queries are not supported by Spanner driver.")}async getCurrentDatabase(){throw new te("Check database queries are not supported by Spanner driver.")}async hasSchema(e){return!!(await this.query('SELECT * FROM "information_schema"."schemata" WHERE "schema_name" = \''.concat(e,"'"))).length}async getCurrentSchema(){throw new te("Check schema queries are not supported by Spanner driver.")}async hasTable(e){const t=e instanceof Ht?e.name:e,n="SELECT * FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE' "+"AND `TABLE_NAME` = '".concat(t,"'");return!!(await this.query(n)).length}async hasColumn(e,t){const n=e instanceof Ht?e.name:e,r="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' "+"AND `TABLE_NAME` = '".concat(n,"' AND `COLUMN_NAME` = '").concat(t,"'");return!!(await this.query(r)).length}async createDatabase(e,t){if(t&&await this.hasDatabase(e))return Promise.resolve();const n='CREATE DATABASE "'.concat(e,'"'),r='DROP DATABASE "'.concat(e,'"');await this.executeQueries(new W(n),new W(r))}async dropDatabase(e,t){const n=t?'DROP DATABASE IF EXISTS "'.concat(e,'"'):'DROP DATABASE "'.concat(e,'"'),r='CREATE DATABASE "'.concat(e,'"');await this.executeQueries(new W(n),new W(r))}async createSchema(e,t){return Promise.resolve()}async dropSchema(e,t,n){return Promise.resolve()}async createTable(e,t=!1,n=!0,r=!0){if(t&&await this.hasTable(e))return Promise.resolve();const s=[],a=[];s.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),n&&e.foreignKeys.forEach(l=>a.push(this.dropForeignKeySql(e,l))),r&&e.indices.forEach(l=>{l.name||(l.name=this.connection.namingStrategy.indexName(e,l.columnNames,l.where)),s.push(this.createIndexSql(e,l)),a.push(this.dropIndexSql(e,l))});const o=e.columns.filter(l=>l.generatedType&&l.asExpression);for(const l of o){const c=this.insertTypeormMetadataSql({table:e.name,type:Ze.GENERATED_COLUMN,name:l.name,value:l.asExpression}),u=this.deleteTypeormMetadataSql({table:e.name,type:Ze.GENERATED_COLUMN,name:l.name});s.push(c),a.push(u)}await this.executeQueries(s,a)}async dropTable(e,t,n=!0,r=!0){if(t&&!await this.hasTable(e))return Promise.resolve();const s=n,a=this.getTablePath(e),o=await this.getCachedTable(a),l=[],c=[];r&&o.indices.forEach(d=>{l.push(this.dropIndexSql(o,d)),c.push(this.createIndexSql(o,d))}),n&&o.foreignKeys.forEach(d=>l.push(this.dropForeignKeySql(o,d))),l.push(this.dropTableSql(o)),c.push(this.createTableSql(o,s));const u=o.columns.filter(d=>d.generatedType&&d.asExpression);for(const d of u){const h=this.deleteTypeormMetadataSql({table:o.name,type:Ze.GENERATED_COLUMN,name:d.name}),f=this.insertTypeormMetadataSql({table:o.name,type:Ze.GENERATED_COLUMN,name:d.name,value:d.asExpression});l.push(h),c.push(f)}await this.executeQueries(l,c)}async createView(e){const t=[],n=[];t.push(this.createViewSql(e)),t.push(await this.insertViewDefinitionSql(e)),n.push(this.dropViewSql(e)),n.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(t,n)}async dropView(e){const t=e instanceof rs?e.name:e,n=await this.getCachedView(t),r=[],s=[];r.push(await this.deleteViewDefinitionSql(n)),r.push(this.dropViewSql(n)),s.push(await this.insertViewDefinitionSql(n)),s.push(this.createViewSql(n)),await this.executeQueries(r,s)}async renameTable(e,t){throw new te("Rename table queries are not supported by Spanner driver.")}async addColumn(e,t){const n=e instanceof Ht?e:await this.getCachedTable(e),r=n.clone(),s=[],a=[];s.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD ").concat(this.buildCreateColumnSql(t)))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP COLUMN ").concat(this.driver.escape(t.name))));const o=r.indices.find(l=>l.columnNames.length===1&&l.columnNames[0]===t.name);if(o)s.push(this.createIndexSql(n,o)),a.push(this.dropIndexSql(n,o));else if(t.isUnique){const l=new rn({name:this.connection.namingStrategy.indexName(n,[t.name]),columnNames:[t.name],isUnique:!0});r.indices.push(l),r.uniques.push(new Un({name:l.name,columnNames:l.columnNames})),s.push(this.createIndexSql(n,l)),a.push(this.dropIndexSql(n,l))}if(t.generatedType&&t.asExpression){const l=this.insertTypeormMetadataSql({table:n.name,type:Ze.GENERATED_COLUMN,name:t.name,value:t.asExpression}),c=this.deleteTypeormMetadataSql({table:n.name,type:Ze.GENERATED_COLUMN,name:t.name});s.push(l),a.push(c)}await this.executeQueries(s,a),r.addColumn(t),this.replaceCachedTable(n,r)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const r=e instanceof Ht?e:await this.getCachedTable(e),s=t instanceof ii?t:r.columns.find(o=>o.name===t);if(!s)throw new te('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));let a;return n instanceof ii?a=n:(a=s.clone(),a.name=n),this.changeColumn(r,s,a)}async changeColumn(e,t,n){const r=e instanceof Ht?e:await this.getCachedTable(e);let s=r.clone();const a=[],o=[],l=t instanceof ii?t:r.columns.find(c=>c.name===t);if(!l)throw new te('Column "'.concat(t,'" was not found in the "').concat(r.name,'" table.'));if(l.name!==n.name||l.type!==n.type||l.length!==n.length||l.isArray!==n.isArray||l.generatedType!==n.generatedType||l.asExpression!==n.asExpression)await this.dropColumn(r,l),await this.addColumn(r,n),s=r.clone();else if((n.precision!==l.precision||n.scale!==l.scale)&&(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" TYPE ').concat(this.driver.createFullType(n)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(n.name,'" TYPE ').concat(this.driver.createFullType(l))))),l.isNullable!==n.isNullable&&(n.isNullable?(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(l.name,'" DROP NOT NULL'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(l.name,'" SET NOT NULL')))):(a.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(l.name,'" SET NOT NULL'))),o.push(new W("ALTER TABLE ".concat(this.escapePath(r),' ALTER COLUMN "').concat(l.name,'" DROP NOT NULL'))))),n.isUnique!==l.isUnique)if(n.isUnique===!0){const c=new rn({name:this.connection.namingStrategy.indexName(r,[n.name]),columnNames:[n.name],isUnique:!0});s.indices.push(c),s.uniques.push(new Un({name:c.name,columnNames:c.columnNames})),a.push(this.createIndexSql(r,c)),o.push(this.dropIndexSql(r,c))}else{const c=s.indices.find(d=>d.columnNames.length===1&&d.isUnique===!0&&!!d.columnNames.find(h=>h===n.name));s.indices.splice(s.indices.indexOf(c),1);const u=s.uniques.find(d=>d.name===c.name);s.uniques.splice(s.uniques.indexOf(u),1),a.push(this.dropIndexSql(r,c)),o.push(this.createIndexSql(r,c))}await this.executeQueries(a,o),this.replaceCachedTable(r,s)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:r}of t)await this.changeColumn(e,n,r)}async dropColumn(e,t){const n=e instanceof Ht?e:await this.getCachedTable(e),r=t instanceof ii?t:n.findColumnByName(t);if(!r)throw new te('Column "'.concat(t,'" was not found in table "').concat(n.name,'"'));const s=n.clone(),a=[],o=[],l=s.indices.find(u=>u.columnNames.length===1&&u.columnNames[0]===r.name);l&&(s.indices.splice(s.indices.indexOf(l),1),a.push(this.dropIndexSql(n,l)),o.push(this.createIndexSql(n,l)));const c=s.checks.find(u=>!!u.columnNames&&u.columnNames.length===1&&u.columnNames[0]===r.name);if(c&&(s.checks.splice(s.checks.indexOf(c),1),a.push(this.dropCheckConstraintSql(n,c)),o.push(this.createCheckConstraintSql(n,c))),a.push(new W("ALTER TABLE ".concat(this.escapePath(n)," DROP COLUMN ").concat(this.driver.escape(r.name)))),o.push(new W("ALTER TABLE ".concat(this.escapePath(n)," ADD ").concat(this.buildCreateColumnSql(r)))),r.generatedType&&r.asExpression){const u=this.deleteTypeormMetadataSql({table:n.name,type:Ze.GENERATED_COLUMN,name:r.name}),d=this.insertTypeormMetadataSql({table:n.name,type:Ze.GENERATED_COLUMN,name:r.name,value:r.asExpression});a.push(u),o.push(d)}await this.executeQueries(a,o),s.removeColumn(r),this.replaceCachedTable(n,s)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async updatePrimaryKeys(e,t){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async dropPrimaryKey(e){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async createUniqueConstraint(e,t){throw new te("Spanner does not support unique constraints. Use unique index instead.")}async createUniqueConstraints(e,t){throw new te("Spanner does not support unique constraints. Use unique index instead.")}async dropUniqueConstraint(e,t){throw new te("Spanner does not support unique constraints. Use unique index instead.")}async dropUniqueConstraints(e,t){throw new te("Spanner does not support unique constraints. Use unique index instead.")}async createCheckConstraint(e,t){const n=e instanceof Ht?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.checkConstraintName(n,t.expression));const r=this.createCheckConstraintSql(n,t),s=this.dropCheckConstraintSql(n,t);await this.executeQueries(r,s),n.addCheckConstraint(t)}async createCheckConstraints(e,t){const n=t.map(r=>this.createCheckConstraint(e,r));await Promise.all(n)}async dropCheckConstraint(e,t){const n=e instanceof Ht?e:await this.getCachedTable(e),r=t instanceof cr?t:n.checks.find(o=>o.name===t);if(!r)throw new te("Supplied check constraint was not found in table ".concat(n.name));const s=this.dropCheckConstraintSql(n,r),a=this.createCheckConstraintSql(n,r);await this.executeQueries(s,a),n.removeCheckConstraint(r)}async dropCheckConstraints(e,t){const n=t.map(r=>this.dropCheckConstraint(e,r));await Promise.all(n)}async createExclusionConstraint(e,t){throw new te("Spanner does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new te("Spanner does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new te("Spanner does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new te("Spanner does not support exclusion constraints.")}async createForeignKey(e,t){const n=e instanceof Ht?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const r=this.createForeignKeySql(n,t),s=this.dropForeignKeySql(n,t);await this.executeQueries(r,s),n.addForeignKey(t)}async createForeignKeys(e,t){for(const n of t)await this.createForeignKey(e,n)}async dropForeignKey(e,t){const n=e instanceof Ht?e:await this.getCachedTable(e),r=t instanceof Fi?t:n.foreignKeys.find(o=>o.name===t);if(!r)throw new te("Supplied foreign key was not found in table ".concat(n.name));const s=this.dropForeignKeySql(n,r),a=this.createForeignKeySql(n,r);await this.executeQueries(s,a),n.removeForeignKey(r)}async dropForeignKeys(e,t){for(const n of t)await this.dropForeignKey(e,n)}async createIndex(e,t){const n=e instanceof Ht?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createIndexSql(n,t),s=this.dropIndexSql(n,t);await this.executeQueries(r,s),n.addIndex(t)}async createIndices(e,t){for(const n of t)await this.createIndex(e,n)}async dropIndex(e,t){const n=e instanceof Ht?e:await this.getCachedTable(e),r=t instanceof rn?t:n.indices.find(o=>o.name===t);if(!r)throw new te("Supplied index ".concat(t," was not found in table ").concat(n.name));r.name||(r.name=this.generateIndexName(n,r));const s=this.dropIndexSql(n,r),a=this.createIndexSql(n,r);await this.executeQueries(s,a),n.removeIndex(r)}async dropIndices(e,t){for(const n of t)await this.dropIndex(e,n)}async clearTable(e){await this.query("DELETE FROM ".concat(this.escapePath(e)," WHERE true"))}async clearDatabase(){const e="SELECT concat('DROP INDEX `', INDEX_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`INDEXES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `INDEX_TYPE` = 'INDEX' AND `SPANNER_IS_MANAGED` = false",t=await this.query(e),n="SELECT concat('ALTER TABLE `', TABLE_NAME, '`', ' DROP CONSTRAINT `', CONSTRAINT_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `CONSTRAINT_TYPE` = 'FOREIGN KEY'",r=await this.query(n),s="SELECT concat('DROP TABLE `', TABLE_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE'",a=await this.query(s);if(!t.length&&!r.length&&!a.length)return;const o=this.isTransactionActive;o||await this.startTransaction();try{for(let l of t)await this.updateDDL(l.query);for(let l of r)await this.updateDDL(l.query);for(let l of a)await this.updateDDL(l.query);await this.commitTransaction()}catch(l){try{o||await this.rollbackTransaction()}catch(c){}throw l}}async executeMemoryUpSql(){for(const{query:e,parameters:t}of this.sqlInMemory.upQueries)this.isDMLQuery(e)?await this.query(e,t):await this.updateDDL(e,t)}async executeMemoryDownSql(){for(const{query:e,parameters:t}of this.sqlInMemory.downQueries.reverse())this.isDMLQuery(e)?await this.query(e,t):await this.updateDDL(e,t)}async loadViews(e){return Promise.resolve([])}async loadTables(e){if(e&&e.length===0)return[];const t=[];if(!e||!e.length){const m="SELECT `TABLE_NAME` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE'";t.push(...await this.query(m))}else{const m="SELECT `TABLE_NAME` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE' "+"AND `TABLE_NAME` IN (".concat(e.map(p=>"'".concat(p,"'")).join(", "),")");t.push(...await this.query(m))}if(!t.length)return[];const n=t.map(m=>"'".concat(m.TABLE_NAME,"'")).join(", "),r="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_NAME` IN (".concat(n,")"),s="SELECT `KCU`.`TABLE_NAME`, `KCU`.`COLUMN_NAME` FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` `TC` INNER JOIN `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` `KCU` ON `KCU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` WHERE `TC`.`TABLE_CATALOG` = '' AND `TC`.`TABLE_SCHEMA` = '' AND `TC`.`CONSTRAINT_TYPE` = 'PRIMARY KEY' "+"AND `TC`.`TABLE_NAME` IN (".concat(n,")"),a="SELECT `I`.`TABLE_NAME`, `I`.`INDEX_NAME`, `I`.`IS_UNIQUE`, `I`.`IS_NULL_FILTERED`, `IC`.`COLUMN_NAME` FROM `INFORMATION_SCHEMA`.`INDEXES` `I` INNER JOIN `INFORMATION_SCHEMA`.`INDEX_COLUMNS` `IC` ON `IC`.`INDEX_NAME` = `I`.`INDEX_NAME` AND `IC`.`TABLE_NAME` = `I`.`TABLE_NAME` "+"WHERE `I`.`TABLE_CATALOG` = '' AND `I`.`TABLE_SCHEMA` = '' AND `I`.`TABLE_NAME` IN (".concat(n,") ")+"AND `I`.`INDEX_TYPE` = 'INDEX' AND `I`.`SPANNER_IS_MANAGED` = false",o="SELECT `TC`.`TABLE_NAME`, `TC`.`CONSTRAINT_NAME`, `CC`.`CHECK_CLAUSE`, `CCU`.`COLUMN_NAME`FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` `TC` INNER JOIN `INFORMATION_SCHEMA`.`CONSTRAINT_COLUMN_USAGE` `CCU` ON `CCU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` INNER JOIN `INFORMATION_SCHEMA`.`CHECK_CONSTRAINTS` `CC` ON `CC`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` WHERE `TC`.`TABLE_CATALOG` = '' AND `TC`.`TABLE_SCHEMA` = '' AND `TC`.`CONSTRAINT_TYPE` = 'CHECK' "+"AND `TC`.`TABLE_NAME` IN (".concat(n,") AND `TC`.`CONSTRAINT_NAME` NOT LIKE 'CK_IS_NOT_NULL%'"),l="SELECT `TC`.`TABLE_NAME`, `TC`.`CONSTRAINT_NAME`, `KCU`.`COLUMN_NAME`, `CTU`.`TABLE_NAME` AS `REFERENCED_TABLE_NAME`, `CCU`.`COLUMN_NAME` AS `REFERENCED_COLUMN_NAME`, `RC`.`UPDATE_RULE`, `RC`.`DELETE_RULE` FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` `TC` INNER JOIN `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` `KCU` ON `KCU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` INNER JOIN `INFORMATION_SCHEMA`.`CONSTRAINT_TABLE_USAGE` `CTU` ON `CTU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` INNER JOIN `INFORMATION_SCHEMA`.`REFERENTIAL_CONSTRAINTS` `RC` ON `RC`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` INNER JOIN `INFORMATION_SCHEMA`.`CONSTRAINT_COLUMN_USAGE` `CCU` ON `CCU`.`CONSTRAINT_NAME` = `TC`.`CONSTRAINT_NAME` WHERE `TC`.`TABLE_CATALOG` = '' AND `TC`.`TABLE_SCHEMA` = '' AND `TC`.`CONSTRAINT_TYPE` = 'FOREIGN KEY' "+"AND `TC`.`TABLE_NAME` IN (".concat(n,")"),[c,u,d,h,f]=await Promise.all([this.query(r),this.query(s),this.query(a),this.query(o),this.query(l)]);return Promise.all(t.map(async m=>{const p=new Ht;p.name=this.driver.buildTableName(m.TABLE_NAME),p.columns=await Promise.all(c.filter(E=>E.TABLE_NAME===m.TABLE_NAME).map(async E=>{const _=d.filter(Q=>Q.TABLE_NAME===m.TABLE_NAME&&Q.COLUMN_NAME===E.COLUMN_NAME&&Q.IS_UNIQUE===!0),k=this.connection.entityMetadatas.find(Q=>this.getTablePath(p)===this.getTablePath(Q)),B=_.length>0&&k&&k.indices.some(Q=>_.some($=>Q.name===$.INDEX_NAME&&Q.synchronize===!1)),D=_.every(Q=>d.some($=>$.INDEX_NAME===Q.INDEX_NAME&&$.COLUMN_NAME!==E.COLUMN_NAME)),O=new ii;O.name=E.COLUMN_NAME;let R=E.SPANNER_TYPE.toLowerCase();if(R.indexOf("array")!==-1&&(O.isArray=!0,R=R.substring(R.indexOf("<")+1,R.indexOf(">"))),R.indexOf("(")!==-1?O.type=R.substring(0,R.indexOf("(")):O.type=R,this.driver.withLengthColumnTypes.indexOf(O.type)!==-1&&(O.length=R.substring(R.indexOf("(")+1,R.indexOf(")"))),E.IS_GENERATED==="ALWAYS"){O.asExpression=E.GENERATION_EXPRESSION,O.generatedType="STORED";const Q=await this.selectTypeormMetadataSql({table:m.TABLE_NAME,type:Ze.GENERATED_COLUMN,name:O.name}),$=await this.query(Q.query,Q.parameters);$[0]&&$[0].value?O.asExpression=$[0].value:O.asExpression=""}return O.isUnique=_.length>0&&!B&&!D,O.isNullable=E.IS_NULLABLE==="YES",O.isPrimary=u.some(Q=>Q.TABLE_NAME===E.TABLE_NAME&&Q.COLUMN_NAME===E.COLUMN_NAME),O}));const w=f.filter(E=>E.TABLE_NAME===m.TABLE_NAME);p.foreignKeys=We.uniq(w,E=>E.CONSTRAINT_NAME).map(E=>{const _=w.filter(k=>k.CONSTRAINT_NAME===E.CONSTRAINT_NAME);return new Fi({name:E.CONSTRAINT_NAME,columnNames:We.uniq(_.map(k=>k.COLUMN_NAME)),referencedDatabase:E.REFERENCED_TABLE_SCHEMA,referencedTableName:E.REFERENCED_TABLE_NAME,referencedColumnNames:We.uniq(_.map(k=>k.REFERENCED_COLUMN_NAME)),onDelete:E.DELETE_RULE,onUpdate:E.UPDATE_RULE})});const y=d.filter(E=>E.TABLE_NAME===m.TABLE_NAME);p.indices=We.uniq(y,E=>E.INDEX_NAME).map(E=>{const _=y.filter(k=>k.INDEX_NAME===E.INDEX_NAME);return new rn({table:p,name:E.INDEX_NAME,columnNames:_.map(k=>k.COLUMN_NAME),isUnique:E.IS_UNIQUE,isNullFiltered:E.IS_NULL_FILTERED})});const b=h.filter(E=>E.TABLE_NAME===m.TABLE_NAME);return p.checks=We.uniq(b,E=>E.CONSTRAINT_NAME).map(E=>{const _=b.filter(k=>k.CONSTRAINT_NAME===E.CONSTRAINT_NAME);return new cr({name:E.CONSTRAINT_NAME,columnNames:_.map(k=>k.COLUMN_NAME),expression:E.CHECK_CLAUSE})}),p}))}createTableSql(e,t){const n=e.columns.map(a=>this.buildCreateColumnSql(a)).join(", ");let r="CREATE TABLE ".concat(this.escapePath(e)," (").concat(n);if(e.columns.filter(a=>a.isUnique).forEach(a=>{const o=e.indices.some(c=>c.columnNames.length===1&&!!c.isUnique&&c.columnNames.indexOf(a.name)!==-1),l=e.uniques.some(c=>c.columnNames.length===1&&c.columnNames.indexOf(a.name)!==-1);!o&&!l&&e.indices.push(new rn({name:this.connection.namingStrategy.uniqueConstraintName(e,[a.name]),columnNames:[a.name],isUnique:!0}))}),e.uniques.length>0&&e.uniques.forEach(a=>{e.indices.some(l=>l.name===a.name)||e.indices.push(new rn({name:a.name,columnNames:a.columnNames,isUnique:!0}))}),e.checks.length>0){const a=e.checks.map(o=>{const l=o.name?o.name:this.connection.namingStrategy.checkConstraintName(e,o.expression);return"CONSTRAINT `".concat(l,"` CHECK (").concat(o.expression,")")}).join(", ");r+=", ".concat(a)}if(e.foreignKeys.length>0&&t){const a=e.foreignKeys.map(o=>{const l=o.columnNames.map(u=>"`".concat(u,"`")).join(", ");o.name||(o.name=this.connection.namingStrategy.foreignKeyName(e,o.columnNames,this.getTablePath(o),o.referencedColumnNames));const c=o.referencedColumnNames.map(u=>"`".concat(u,"`")).join(", ");return"CONSTRAINT `".concat(o.name,"` FOREIGN KEY (").concat(l,") REFERENCES ").concat(this.escapePath(this.getTablePath(o))," (").concat(c,")")}).join(", ");r+=", ".concat(a)}r+=")";const s=e.columns.filter(a=>a.isPrimary);if(s.length>0){const a=s.map(o=>this.driver.escape(o.name)).join(", ");r+=" PRIMARY KEY (".concat(a,")")}return new W(r)}dropTableSql(e){return new W("DROP TABLE ".concat(this.escapePath(e)))}createViewSql(e){const t=e.materialized?"MATERIALIZED ":"",n=this.escapePath(e),r=typeof e.expression=="string"?e.expression:e.expression(this.connection).getQuery();return new W("CREATE ".concat(t,"VIEW ").concat(n," SQL SECURITY INVOKER AS ").concat(r))}async insertViewDefinitionSql(e){let{schema:t,tableName:n}=this.driver.parseTableName(e);const r=e.materialized?Ze.MATERIALIZED_VIEW:Ze.VIEW,s=typeof e.expression=="string"?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:r,schema:t,name:n,value:s})}dropViewSql(e){const t=e.materialized?"MATERIALIZED ":"";return new W("DROP ".concat(t,"VIEW ").concat(this.escapePath(e)))}async deleteViewDefinitionSql(e){let{schema:t,tableName:n}=this.driver.parseTableName(e);const r=e.materialized?Ze.MATERIALIZED_VIEW:Ze.VIEW;return this.deleteTypeormMetadataSql({type:r,schema:t,name:n})}createIndexSql(e,t){const n=t.columnNames.map(s=>this.driver.escape(s)).join(", ");let r="";return t.isUnique&&(r+="UNIQUE "),t.isNullFiltered&&(r+="NULL_FILTERED "),new W("CREATE ".concat(r,"INDEX `").concat(t.name,"` ON ").concat(this.escapePath(e)," (").concat(n,")"))}dropIndexSql(e,t){let n=t instanceof rn?t.name:t;return new W("DROP INDEX `".concat(n,"`"))}createCheckConstraintSql(e,t){return new W("ALTER TABLE ".concat(this.escapePath(e)," ADD CONSTRAINT `").concat(t.name,"` CHECK (").concat(t.expression,")"))}dropCheckConstraintSql(e,t){const n=t instanceof cr?t.name:t;return new W("ALTER TABLE ".concat(this.escapePath(e)," DROP CONSTRAINT `").concat(n,"`"))}createForeignKeySql(e,t){const n=t.columnNames.map(a=>this.driver.escape(a)).join(", "),r=t.referencedColumnNames.map(a=>this.driver.escape(a)).join(",");let s="ALTER TABLE ".concat(this.escapePath(e)," ADD CONSTRAINT `").concat(t.name,"` FOREIGN KEY (").concat(n,") ")+"REFERENCES ".concat(this.escapePath(this.getTablePath(t))," (").concat(r,")");return new W(s)}dropForeignKeySql(e,t){const n=t instanceof Fi?t.name:t;return new W("ALTER TABLE ".concat(this.escapePath(e)," DROP CONSTRAINT `").concat(n,"`"))}escapePath(e){const{tableName:t}=this.driver.parseTableName(e);return"`".concat(t,"`")}buildCreateColumnSql(e){let t="".concat(this.driver.escape(e.name)," ").concat(this.connection.driver.createFullType(e));return e.generatedType==="STORED"&&e.asExpression?t+=" AS (".concat(e.asExpression,") STORED"):e.isNullable||(t+=" NOT NULL"),t}async executeQueries(e,t){if(e instanceof W&&(e=[e]),t instanceof W&&(t=[t]),this.sqlInMemory.upQueries.push(...e),this.sqlInMemory.downQueries.push(...t),this.sqlMemoryMode===!0)return Promise.resolve();for(const{query:n,parameters:r}of e)this.isDMLQuery(n)?await this.query(n,r):await this.updateDDL(n,r)}isDMLQuery(e){return e.startsWith("INSERT")||e.startsWith("UPDATE")||e.startsWith("DELETE")}}class B4{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="none",this.supportedDataTypes=["bool","int64","float64","numeric","string","json","bytes","date","timestamp","array"],this.supportedUpsertTypes=[],this.spatialTypes=[],this.withLengthColumnTypes=["string","bytes"],this.withWidthColumnTypes=[],this.withPrecisionColumnTypes=[],this.withScaleColumnTypes=[],this.mappedDataTypes={createDate:"timestamp",createDateDefault:"",updateDate:"timestamp",updateDateDefault:"",deleteDate:"timestamp",deleteDateNullable:!0,version:"int64",treeLevel:"int64",migrationId:"int64",migrationName:"string",migrationTimestamp:"int64",cacheId:"string",cacheIdentifier:"string",cacheTime:"int64",cacheDuration:"int64",cacheQuery:"string",cacheResult:"string",metadataType:"string",metadataDatabase:"string",metadataSchema:"string",metadataTable:"string",metadataName:"string",metadataValue:"string"},this.dataTypeDefaults={},this.maxAliasLength=63,this.cteCapabilities={enabled:!0},this._isReturningSqlSupported={delete:!1,insert:!1,update:!1},this.connection=e,this.options=e.options,this.isReplicated=!!this.options.replication,this.loadDependencies()}async connect(){this.instance=this.spanner.instance(this.options.instanceId),this.instanceDatabase=this.instance.database(this.options.databaseId)}afterConnect(){return Promise.resolve()}async disconnect(){this.instanceDatabase.close()}createSchemaBuilder(){return new of(this.connection)}createQueryRunner(e){return new L4(this,e)}escapeQueryWithParameters(e,t,n){const r=Object.keys(n).map(s=>n[s]);return!t||!Object.keys(t).length?[e,r]:(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o)=>{if(!t.hasOwnProperty(o))return s;let l=t[o];return l===null?s:a?l.map(c=>(r.push(c),this.createParameter(o,r.length-1))).join(", "):l instanceof Function?l():(r.push(l),this.createParameter(o,r.length-1))}),e=e.replace(/([ ]+)?=([ ]+)?:(\.\.\.)?([A-Za-z0-9_.]+)/g,(s,a,o,l,c)=>t.hasOwnProperty(c)&&t[c]===null?" IS NULL":s),[e,r])}escape(e){return"`".concat(e,"`")}buildTableName(e,t,n){let r=[e];return n&&r.unshift(n),r.join(".")}parseTableName(e){const t=this.database,n=void 0;if(e instanceof Ht||e instanceof rs){const s=this.parseTableName(e.name);return{database:e.database||s.database||t,schema:e.schema||s.schema||n,tableName:s.tableName}}if(e instanceof Fi){const s=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||s.database||t,schema:e.referencedSchema||s.schema||n,tableName:s.tableName}}if(e instanceof ur)return{database:e.database||t,schema:e.schema||n,tableName:e.tableName};const r=e.split(".");return{database:(r.length>1?r[0]:void 0)||t,schema:n,tableName:r.length>1?r[1]:r[0]}}preparePersistentValue(e,t){return t.transformer&&(e=yn.transformTo(t.transformer,e)),e==null?e:t.type==="numeric"?(this.options.driver||jt.load("spanner")).Spanner.numeric(e):t.type==="date"?et.mixedDateToDateString(e):t.type==="json"?e:t.type==="timestamp"||t.type===Date?et.mixedDateToDate(e):e}prepareHydratedValue(e,t){return e==null?t.transformer?yn.transformFrom(t.transformer,e):e:(t.type===Boolean||t.type==="bool"?e=!!e:t.type==="timestamp"||t.type===Date?e=new Date(e):t.type==="numeric"?e=e.value:t.type==="date"?e=et.mixedDateToDateString(e):t.type==="json"?e=typeof e=="string"?JSON.parse(e):e:t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=yn.transformFrom(t.transformer,e)),e)}normalizeType(e){return e.type===Number?"int64":e.type===String||e.type==="uuid"?"string":e.type===Date?"timestamp":e.type===Buffer?"bytes":e.type===Boolean?"bool":e.type||""}normalizeDefault(e){return e.default===""?'"'.concat(e.default,'"'):"".concat(e.default)}normalizeIsUnique(e){return e.entityMetadata.indices.some(t=>t.isUnique&&t.columns.length===1&&t.columns[0]===e)}getColumnLength(e){if(e.length)return e.length.toString();if(e.generationStrategy==="uuid")return"36";switch(e.type){case String:case"string":case"bytes":return"max";default:return""}}createFullType(e){let t=e.type;return this.getColumnLength(e)?t+="(".concat(this.getColumnLength(e),")"):e.width?t+="(".concat(e.width,")"):e.precision!==null&&e.precision!==void 0&&e.scale!==null&&e.scale!==void 0?t+="(".concat(e.precision,",").concat(e.scale,")"):e.precision!==null&&e.precision!==void 0&&(t+="(".concat(e.precision,")")),e.isArray&&(t="array<".concat(t,">")),t}obtainMasterConnection(){return this.instanceDatabase}obtainSlaveConnection(){return this.instanceDatabase}createGeneratedMap(e,t,n){if(!t)return;if(t.insertId===void 0)return Object.keys(t).reduce((s,a)=>{const o=e.findColumnWithDatabaseName(a);return o&&We.mergeDeep(s,o.createValueMap(t[a])),s},{});const r=e.generatedColumns.reduce((s,a)=>{let o;return a.generationStrategy==="increment"&&t.insertId&&(o=t.insertId+n),We.mergeDeep(s,a.createValueMap(o))},{});return Object.keys(r).length>0?r:void 0}findChangedColumns(e,t){return t.filter(n=>{const r=e.find(a=>a.name===n.databaseName);return r?r.name!==n.databaseName||r.type!==this.normalizeType(n)||r.length!==this.getColumnLength(n)||r.asExpression!==n.asExpression||r.generatedType!==n.generatedType||r.isPrimary!==n.isPrimary||!this.compareNullableValues(n,r)||r.isUnique!==this.normalizeIsUnique(n):!1})}isReturningSqlSupported(e){return this._isReturningSqlSupported[e]}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"@param"+t}loadDependencies(){try{const e=this.options.driver||jt.load("spanner");this.spanner=new e.Spanner({projectId:this.options.projectId})}catch(e){throw console.error(e),new rl("Spanner","@google-cloud/spanner")}}compareNullableValues(e,t){return e.generatedType?!0:e.isNullable===t.isNullable}compareDefaultValues(e,t){return typeof e=="string"&&typeof t=="string"&&(e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t}normalizeDatetimeFunction(e){if(!e)return e;if(e.toUpperCase().indexOf("CURRENT_TIMESTAMP")!==-1||e.toUpperCase().indexOf("NOW")!==-1){const n=e.match(/\(\d+\)/);return n?"CURRENT_TIMESTAMP".concat(n[0]):"CURRENT_TIMESTAMP"}else return e}escapeComment(e){return e&&(e=e.replace(/\u0000/g,""),e)}}class q4{create(e){const{type:t}=e.options;switch(t){case"mysql":return new jw(e);case"postgres":return new FC(e);case"cockroachdb":return new OF(e);case"sap":return new MF(e);case"mariadb":return new jw(e);case"sqlite":return new BF(e);case"better-sqlite3":return new qF(e);case"cordova":return new v4(e);case"nativescript":return new T4(e);case"react-native":return new E4(e);case"sqljs":return new C4(e);case"oracle":return new LF(e);case"mssql":return new DF(e);case"mongodb":return new PF(e);case"expo":return new N4(e);case"aurora-mysql":return new _4(e);case"aurora-postgres":return new O4(e);case"capacitor":return new M4(e);case"spanner":return new B4(e);default:throw new yF(t,["aurora-mysql","aurora-postgres","better-sqlite3","capacitor","cockroachdb","cordova","expo","mariadb","mongodb","mssql","mysql","nativescript","oracle","postgres","react-native","sap","sqlite","sqljs","spanner"])}}}function Cp(i,e,t=[".js",".cjs",".ts"]){return[]}const F4=new class{constructor(){this.instances=[]}get(i){let e=this.instances.find(t=>t.type===i);return e||(e={type:i,object:new i},this.instances.push(e)),e.object}};function Qw(i){return F4.get(i)}class Mi{constructor(e){this["@instanceof"]=Symbol.for("ColumnMetadata"),this.length="",this.isPrimary=!1,this.isGenerated=!1,this.isNullable=!1,this.isSelect=!0,this.isInsert=!0,this.isUpdate=!0,this.zerofill=!1,this.unsigned=!1,this.isArray=!1,this.isVirtual=!1,this.isVirtualProperty=!1,this.isDiscriminator=!1,this.isTreeLevel=!1,this.isCreateDate=!1,this.isUpdateDate=!1,this.isDeleteDate=!1,this.isVersion=!1,this.isObjectId=!1,this.isNestedSetLeft=!1,this.isNestedSetRight=!1,this.isMaterializedPath=!1,this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.referencedColumn=e.referencedColumn,e.args.target&&(this.target=e.args.target),e.args.propertyName&&(this.propertyName=e.args.propertyName),e.args.options.name&&(this.givenDatabaseName=e.args.options.name),e.args.options.type&&(this.type=e.args.options.type),e.args.options.length&&(this.length=e.args.options.length?e.args.options.length.toString():""),e.args.options.width&&(this.width=e.args.options.width),e.args.options.charset&&(this.charset=e.args.options.charset),e.args.options.collation&&(this.collation=e.args.options.collation),e.args.options.primary&&(this.isPrimary=e.args.options.primary),e.args.options.default===null&&(this.isNullable=!0),e.args.options.nullable!==void 0&&(this.isNullable=e.args.options.nullable),e.args.options.select!==void 0&&(this.isSelect=e.args.options.select),e.args.options.insert!==void 0&&(this.isInsert=e.args.options.insert),e.args.options.update!==void 0&&(this.isUpdate=e.args.options.update),e.args.options.readonly!==void 0&&(this.isUpdate=!e.args.options.readonly),e.args.options.comment&&(this.comment=e.args.options.comment),e.args.options.default!==void 0&&(this.default=e.args.options.default),e.args.options.onUpdate&&(this.onUpdate=e.args.options.onUpdate),e.args.options.generatedIdentity&&(this.generatedIdentity=e.args.options.generatedIdentity),e.args.options.scale!==null&&e.args.options.scale!==void 0&&(this.scale=e.args.options.scale),e.args.options.zerofill&&(this.zerofill=e.args.options.zerofill,this.unsigned=!0),e.args.options.unsigned&&(this.unsigned=e.args.options.unsigned),e.args.options.precision!==null&&(this.precision=e.args.options.precision),e.args.options.enum&&(ht.isObject(e.args.options.enum)&&!Array.isArray(e.args.options.enum)?this.enum=Object.keys(e.args.options.enum).filter(t=>isNaN(+t)&&typeof e.args.options.enum[t]!="function").map(t=>e.args.options.enum[t]):this.enum=e.args.options.enum),e.args.options.enumName&&(this.enumName=e.args.options.enumName),e.args.options.primaryKeyConstraintName&&(this.primaryKeyConstraintName=e.args.options.primaryKeyConstraintName),e.args.options.foreignKeyConstraintName&&(this.foreignKeyConstraintName=e.args.options.foreignKeyConstraintName),e.args.options.asExpression&&(this.asExpression=e.args.options.asExpression,this.generatedType=e.args.options.generatedType?e.args.options.generatedType:"VIRTUAL"),e.args.options.hstoreType&&(this.hstoreType=e.args.options.hstoreType),e.args.options.array&&(this.isArray=e.args.options.array),e.args.mode&&(this.isVirtualProperty=e.args.mode==="virtual-property",this.isVirtual=e.args.mode==="virtual",this.isTreeLevel=e.args.mode==="treeLevel",this.isCreateDate=e.args.mode==="createDate",this.isUpdateDate=e.args.mode==="updateDate",this.isDeleteDate=e.args.mode==="deleteDate",this.isVersion=e.args.mode==="version",this.isObjectId=e.args.mode==="objectId"),this.isVirtualProperty&&(this.isInsert=!1,this.isUpdate=!1),e.args.options.transformer&&(this.transformer=e.args.options.transformer),e.args.options.spatialFeatureType&&(this.spatialFeatureType=e.args.options.spatialFeatureType),e.args.options.srid!==void 0&&(this.srid=e.args.options.srid),e.args.options.query&&(this.query=e.args.options.query),this.isTreeLevel&&(this.type=e.connection.driver.mappedDataTypes.treeLevel),this.isCreateDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.createDate),this.default||(this.default=()=>e.connection.driver.mappedDataTypes.createDateDefault),this.precision===void 0&&e.args.options.precision===void 0&&e.connection.driver.mappedDataTypes.createDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.createDatePrecision)),this.isUpdateDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.updateDate),this.default||(this.default=()=>e.connection.driver.mappedDataTypes.updateDateDefault),this.onUpdate||(this.onUpdate=e.connection.driver.mappedDataTypes.updateDateDefault),this.precision===void 0&&e.args.options.precision===void 0&&e.connection.driver.mappedDataTypes.updateDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.updateDatePrecision)),this.isDeleteDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.deleteDate),this.isNullable||(this.isNullable=e.connection.driver.mappedDataTypes.deleteDateNullable),this.precision===void 0&&e.args.options.precision===void 0&&e.connection.driver.mappedDataTypes.deleteDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.deleteDatePrecision)),this.isVersion&&(this.type=e.connection.driver.mappedDataTypes.version),e.closureType&&(this.closureType=e.closureType),e.nestedSetLeft&&(this.isNestedSetLeft=e.nestedSetLeft),e.nestedSetRight&&(this.isNestedSetRight=e.nestedSetRight),e.materializedPath&&(this.isMaterializedPath=e.materializedPath)}createValueMap(e,t=!1){if(this.embeddedMetadata){const n=[...this.embeddedMetadata.parentPropertyNames],r=(s,a)=>{const o=s.shift();return o?(a[o]={},r(s,a[o]),a):((this.generationStrategy==="increment"||this.generationStrategy==="rowid")&&this.type==="bigint"&&e!==null&&(e=String(e)),a[t?this.databaseName:this.propertyName]=e,a)};return r(n,{})}else return(this.generationStrategy==="increment"||this.generationStrategy==="rowid")&&this.type==="bigint"&&e!==null&&(e=String(e)),{[t?this.databaseName:this.propertyName]:e}}getEntityValueMap(e,t){var n;if(this.embeddedMetadata){const s=[...this.embeddedMetadata.parentPropertyNames],a=this.embeddedMetadata.isArray,o=(c,u)=>{if(u===void 0)return{};const d=c.shift();if(d){const h=o(c,u[d]);return Object.keys(h).length>0?{[d]:h}:{}}return a&&Array.isArray(u)?u.map(h=>({[this.propertyName]:h[this.propertyName]})):u[this.propertyName]!==void 0?{[this.propertyName]:u[this.propertyName]}:{}},l=o(s,e);return Object.keys(l).length>0?l:void 0}else if(this.relationMetadata&&!(!((n=Object.getOwnPropertyDescriptor(e,this.relationMetadata.propertyName))===null||n===void 0)&&n.get)&&e[this.relationMetadata.propertyName]&&ht.isObject(e[this.relationMetadata.propertyName])){const s=this.relationMetadata.joinColumns.reduce((a,o)=>{const l=o.referencedColumn.getEntityValueMap(e[this.relationMetadata.propertyName]);return l===void 0?a:We.mergeDeep(a,l)},{});return Object.keys(s).length>0?{[this.propertyName]:s}:void 0}else return e[this.propertyName]!==void 0?{[this.propertyName]:e[this.propertyName]}:void 0}getEntityValue(e,t=!1){if(e==null)return;let n;if(this.embeddedMetadata){const r=[...this.embeddedMetadata.parentPropertyNames],s=this.embeddedMetadata.isArray,a=(l,c)=>{const u=l.shift();return u&&c?a(l,c[u]):c},o=a(r,e);if(o)if(this.relationMetadata&&this.referencedColumn){const l=this.relationMetadata.getEntityValue(o);l&&ht.isObject(l)&&!ue.isFindOperator(l)&&!Buffer.isBuffer(l)?n=this.referencedColumn.getEntityValue(l):o[this.propertyName]&&ht.isObject(o[this.propertyName])&&!ue.isFindOperator(o[this.propertyName])&&!Buffer.isBuffer(o[this.propertyName])&&!(o[this.propertyName]instanceof Date)?n=this.referencedColumn.getEntityValue(o[this.propertyName]):n=o[this.propertyName]}else this.referencedColumn?n=this.referencedColumn.getEntityValue(o[this.propertyName]):s&&Array.isArray(o)?n=o.map(l=>l[this.propertyName]):n=o[this.propertyName]}else if(this.relationMetadata&&this.referencedColumn){const r=this.relationMetadata.getEntityValue(e);r&&ht.isObject(r)&&!ue.isFindOperator(r)&&typeof r!="function"&&!Buffer.isBuffer(r)?n=this.referencedColumn.getEntityValue(r):e[this.propertyName]&&ht.isObject(e[this.propertyName])&&!ue.isFindOperator(e[this.propertyName])&&typeof e[this.propertyName]!="function"&&!Buffer.isBuffer(e[this.propertyName])&&!(e[this.propertyName]instanceof Date)?n=this.referencedColumn.getEntityValue(e[this.propertyName]):n=e[this.propertyName]}else this.referencedColumn?n=this.referencedColumn.getEntityValue(e[this.propertyName]):n=e[this.propertyName];return t&&this.transformer&&(n=yn.transformTo(this.transformer,n)),n}setEntityValue(e,t){if(this.embeddedMetadata){const n=(r,s)=>{const a=r.shift();return a?(s[a.propertyName]||(s[a.propertyName]=a.create()),n(r,s[a.propertyName]),s):(s[this.propertyName]=t,s)};return n([...this.embeddedMetadata.embeddedMetadataTree],e)}else!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName?(this.propertyName in e||(e[this.propertyName]={}),e[this.propertyName][this.referencedColumn.propertyName]=t):e[this.propertyName]=t}compareEntityValue(e,t){const n=this.getEntityValue(e);return ht.isObject(n)?n.equals(t):n===t}build(e){return this.propertyPath=this.buildPropertyPath(),this.propertyAliasName=this.propertyPath.replace(".","_"),this.databaseName=this.buildDatabaseName(e),this.databasePath=this.buildDatabasePath(),this.databaseNameWithoutPrefixes=e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,[]),this}buildPropertyPath(){let e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.propertyName,!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName&&(e+="."+this.referencedColumn.propertyName),e}buildDatabasePath(){let e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.databaseName,!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.databaseName!==this.databaseName&&(e+="."+this.referencedColumn.databaseName),e}buildDatabaseName(e){let t=this.embeddedMetadata?this.embeddedMetadata.parentPrefixes:[];return e.driver.options.type==="mongodb"&&(t=[]),e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,t)}}class Ji{constructor(e){this.isUnique=!1,this.isSpatial=!1,this.isFulltext=!1,this.isNullFiltered=!1,this.synchronize=!0,this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,e.args.synchronize!==null&&e.args.synchronize!==void 0&&(this.synchronize=e.args.synchronize),this.isUnique=!!e.args.unique,this.isSpatial=!!e.args.spatial,this.isFulltext=!!e.args.fulltext,this.isNullFiltered=!!e.args.nullFiltered,this.parser=e.args.parser,this.where=e.args.where,this.isSparse=e.args.sparse,this.isBackground=e.args.background,this.expireAfterSeconds=e.args.expireAfterSeconds,this.givenName=e.args.name,this.givenColumnNames=e.args.columns)}build(e){if(this.synchronize===!1)return this.name=this.givenName,this;const t={};if(this.givenColumnNames){let n=[];if(Array.isArray(this.givenColumnNames))n=this.givenColumnNames.map(r=>this.embeddedMetadata?this.embeddedMetadata.propertyPath+"."+r:r.trim()),n.forEach(r=>t[r]=1);else{const r=this.givenColumnNames(this.entityMetadata.propertiesMap);Array.isArray(r)?(n=r.map(s=>String(s)),n.forEach(s=>t[s]=1)):(n=Object.keys(r).map(s=>String(s)),Object.keys(r).forEach(s=>t[s]=r[s]))}this.columns=n.map(r=>{const s=this.entityMetadata.columns.find(c=>c.propertyPath===r);if(s)return[s];const a=this.entityMetadata.relations.find(c=>c.isWithJoinColumn&&c.propertyName===r);if(a)return a.joinColumns;const o=this.givenName?'"'+this.givenName+'" ':"",l=this.entityMetadata.targetName;throw new te("Index ".concat(o,"contains column that is missing in the entity (").concat(l,"): ")+r)}).reduce((r,s)=>r.concat(s))}return this.columnNamesWithOrderingMap=Object.keys(t).reduce((n,r)=>{const s=this.entityMetadata.columns.find(a=>a.propertyPath===r);return s&&(n[s.databasePath]=t[r]),n},{}),this.name=this.givenName?this.givenName:e.indexName(this.entityMetadata.tableName,this.columns.map(n=>n.databaseName),this.where),this}}class Gw{constructor(e){this.isTreeParent=!1,this.isTreeChildren=!1,this.isPrimary=!1,this.isLazy=!1,this.isEager=!1,this.persistenceEnabled=!0,this.isCascadeInsert=!1,this.isCascadeUpdate=!1,this.isCascadeRemove=!1,this.isCascadeSoftRemove=!1,this.isCascadeRecover=!1,this.isNullable=!0,this.createForeignKeyConstraints=!0,this.isOwning=!1,this.isOneToOne=!1,this.isOneToOneOwner=!1,this.isWithJoinColumn=!1,this.isOneToOneNotOwner=!1,this.isOneToMany=!1,this.isManyToOne=!1,this.isManyToMany=!1,this.isManyToManyOwner=!1,this.isManyToManyNotOwner=!1,this.foreignKeys=[],this.joinColumns=[],this.inverseJoinColumns=[],this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata;const t=e.args;this.target=t.target,this.propertyName=t.propertyName,this.relationType=t.relationType,t.inverseSideProperty&&(this.givenInverseSidePropertyFactory=t.inverseSideProperty),this.isLazy=t.isLazy||!1,this.isCascadeInsert=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("insert")!==-1,this.isCascadeUpdate=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("update")!==-1,this.isCascadeRemove=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("remove")!==-1,this.isCascadeSoftRemove=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("soft-remove")!==-1,this.isCascadeRecover=t.options.cascade===!0||Array.isArray(t.options.cascade)&&t.options.cascade.indexOf("recover")!==-1,this.isNullable=!(t.options.nullable===!1||this.isPrimary),this.onDelete=t.options.onDelete,this.onUpdate=t.options.onUpdate,this.deferrable=t.options.deferrable,this.createForeignKeyConstraints=t.options.createForeignKeyConstraints!==!1,this.isEager=t.options.eager||!1,this.persistenceEnabled=t.options.persistence!==!1,this.orphanedRowAction=t.options.orphanedRowAction||"nullify",this.isTreeParent=t.isTreeParent||!1,this.isTreeChildren=t.isTreeChildren||!1,typeof t.type=="function"?this.type=typeof t.type=="function"?t.type():t.type:ue.isEntitySchema(t.type)?this.type=t.type.options.name:ht.isObject(t.type)&&typeof t.type.name=="string"?this.type=t.type.name:this.type=t.type,this.isOneToOne=this.relationType==="one-to-one",this.isOneToMany=this.relationType==="one-to-many",this.isManyToOne=this.relationType==="many-to-one",this.isManyToMany=this.relationType==="many-to-many",this.isOneToOneNotOwner=!!this.isOneToOne,this.isManyToManyNotOwner=!!this.isManyToMany}getRelationIdMap(e){const n=(this.isOwning?this.joinColumns:this.inverseRelation.joinColumns).map(r=>r.referencedColumn);return ur.getValueMap(e,n)}ensureRelationIdMap(e){if(ht.isObject(e))return e;const n=(this.isOwning?this.joinColumns:this.inverseRelation.joinColumns).map(r=>r.referencedColumn);if(n.length>1)throw new te("Cannot create relation id map for a single value because relation contains multiple referenced columns.");return n[0].createValueMap(e)}getEntityValue(e,t=!1){if(e!=null)if(this.embeddedMetadata){const n=[...this.embeddedMetadata.parentPropertyNames],r=(a,o)=>{const l=a.shift();return l?o[l]?r(a,o[l]):void 0:o},s=r(n,e);return this.isLazy?s["__"+this.propertyName+"__"]!==void 0?s["__"+this.propertyName+"__"]:t===!0?s[this.propertyName]:void 0:s?s[this.isLazy?"__"+this.propertyName+"__":this.propertyName]:void 0}else return this.isLazy?e["__"+this.propertyName+"__"]!==void 0?e["__"+this.propertyName+"__"]:t===!0?e[this.propertyName]:void 0:e[this.propertyName]}setEntityValue(e,t){const n=this.isLazy?"__"+this.propertyName+"__":this.propertyName;if(this.embeddedMetadata){const r=(s,a)=>{const o=s.shift();return o?(a[o.propertyName]||(a[o.propertyName]=o.create()),r(s,a[o.propertyName]),a):(a[n]=t,a)};return r([...this.embeddedMetadata.embeddedMetadataTree],e)}else e[n]=t}createValueMap(e){if(this.embeddedMetadata){const t=[...this.embeddedMetadata.parentPropertyNames],n=(r,s)=>{const a=r.shift();return a?(s[a]={},n(r,s[a]),s):(s[this.propertyName]=e,s)};return n(t,{})}else return{[this.propertyName]:e}}build(){this.propertyPath=this.buildPropertyPath()}registerForeignKeys(...e){this.foreignKeys.push(...e)}registerJoinColumns(e=[],t=[]){this.joinColumns=e,this.inverseJoinColumns=t,this.isOwning=this.isManyToOne||(this.isManyToMany||this.isOneToOne)&&this.joinColumns.length>0,this.isOneToOneOwner=this.isOneToOne&&this.isOwning,this.isOneToOneNotOwner=this.isOneToOne&&!this.isOwning,this.isManyToManyOwner=this.isManyToMany&&this.isOwning,this.isManyToManyNotOwner=this.isManyToMany&&!this.isOwning,this.isWithJoinColumn=this.isManyToOne||this.isOneToOneOwner}registerJunctionEntityMetadata(e){this.junctionEntityMetadata=e,this.joinTableName=e.tableName,this.inverseRelation&&(this.inverseRelation.junctionEntityMetadata=e,this.joinTableName=e.tableName)}buildInverseSidePropertyPath(){if(this.givenInverseSidePropertyFactory){const e=this.inverseEntityMetadata.propertiesMap;if(typeof this.givenInverseSidePropertyFactory=="function")return this.givenInverseSidePropertyFactory(e);if(typeof this.givenInverseSidePropertyFactory=="string")return this.givenInverseSidePropertyFactory}else{if(this.isTreeParent&&this.entityMetadata.treeChildrenRelation)return this.entityMetadata.treeChildrenRelation.propertyName;if(this.isTreeChildren&&this.entityMetadata.treeParentRelation)return this.entityMetadata.treeParentRelation.propertyName}return""}buildPropertyPath(){return!this.embeddedMetadata||!this.embeddedMetadata.parentPropertyNames.length?this.propertyName:this.embeddedMetadata.parentPropertyNames.join(".")+"."+this.propertyName}}class j4{constructor(e){this.columns=[],this.relations=[],this.listeners=[],this.indices=[],this.uniques=[],this.relationIds=[],this.relationCounts=[],this.embeddeds=[],this.isAlwaysUsingConstructor=!0,this.isArray=!1,this.parentPropertyNames=[],this.parentPrefixes=[],this.embeddedMetadataTree=[],this.columnsFromTree=[],this.relationsFromTree=[],this.listenersFromTree=[],this.indicesFromTree=[],this.uniquesFromTree=[],this.relationIdsFromTree=[],this.relationCountsFromTree=[],this.entityMetadata=e.entityMetadata,this.type=e.args.type(),this.propertyName=e.args.propertyName,this.customPrefix=e.args.prefix,this.isArray=e.args.isArray}create(e){return typeof this.type!="function"?{}:e!=null&&e.fromDeserializer||!this.isAlwaysUsingConstructor?Object.create(this.type.prototype):new this.type}build(e){return this.embeddeds.forEach(t=>t.build(e)),this.prefix=this.buildPrefix(e),this.parentPropertyNames=this.buildParentPropertyNames(),this.parentPrefixes=this.buildParentPrefixes(),this.propertyPath=this.parentPropertyNames.join("."),this.embeddedMetadataTree=this.buildEmbeddedMetadataTree(),this.columnsFromTree=this.buildColumnsFromTree(),this.relationsFromTree=this.buildRelationsFromTree(),this.listenersFromTree=this.buildListenersFromTree(),this.indicesFromTree=this.buildIndicesFromTree(),this.uniquesFromTree=this.buildUniquesFromTree(),this.relationIdsFromTree=this.buildRelationIdsFromTree(),this.relationCountsFromTree=this.buildRelationCountsFromTree(),e.options.entitySkipConstructor&&(this.isAlwaysUsingConstructor=!e.options.entitySkipConstructor),this}buildPartialPrefix(){if(this.customPrefix===void 0||this.customPrefix===!0)return[this.propertyName];if(this.customPrefix===""||this.customPrefix===!1)return[];if(typeof this.customPrefix=="string")return[this.customPrefix];throw new te("Invalid prefix option given for ".concat(this.entityMetadata.targetName,"#").concat(this.propertyName))}buildPrefix(e){if(e.driver.options.type==="mongodb")return this.propertyName;let t=[];return this.parentEmbeddedMetadata&&t.push(this.parentEmbeddedMetadata.buildPrefix(e)),t.push(...this.buildPartialPrefix()),t.join("_")}buildParentPropertyNames(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPropertyNames().concat(this.propertyName):[this.propertyName]}buildParentPrefixes(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPrefixes().concat(this.buildPartialPrefix()):this.buildPartialPrefix()}buildEmbeddedMetadataTree(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildEmbeddedMetadataTree().concat(this):[this]}buildColumnsFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildColumnsFromTree()),this.columns)}buildRelationsFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildRelationsFromTree()),this.relations)}buildListenersFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildListenersFromTree()),this.listeners)}buildIndicesFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildIndicesFromTree()),this.indices)}buildUniquesFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildUniquesFromTree()),this.uniques)}buildRelationIdsFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildRelationIdsFromTree()),this.relationIds)}buildRelationCountsFromTree(){return this.embeddeds.reduce((e,t)=>e.concat(t.buildRelationCountsFromTree()),this.relationCounts)}}class Kw{constructor(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}setValue(e){const t=this.relation.getEntityValue(e);if(Array.isArray(t))e[this.propertyName]=t.map(n=>this.relation.inverseEntityMetadata.getEntityIdMixedMap(n)).filter(n=>n!=null);else{const n=this.relation.inverseEntityMetadata.getEntityIdMixedMap(t);n!==void 0&&(e[this.propertyName]=n)}}build(){const e=typeof this.relationNameOrFactory=="function"?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new te("Cannot find relation ".concat(e,". Wrong relation specified for @RelationId decorator."));this.relation=t}}class Yw{constructor(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}build(){const e=typeof this.relationNameOrFactory=="function"?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new te("Cannot find relation ".concat(e,". Wrong relation specified for @RelationCount decorator."));this.relation=t}}class tn{}tn.AFTER_LOAD="after-load";tn.BEFORE_INSERT="before-insert";tn.AFTER_INSERT="after-insert";tn.BEFORE_UPDATE="before-update";tn.AFTER_UPDATE="after-update";tn.BEFORE_REMOVE="before-remove";tn.AFTER_REMOVE="after-remove";tn.BEFORE_SOFT_REMOVE="before-soft-remove";tn.AFTER_SOFT_REMOVE="after-soft-remove";tn.BEFORE_RECOVER="before-recover";tn.AFTER_RECOVER="after-recover";class xc{constructor(e){this.columns=[],this.referencedColumns=[],this.columnNames=[],this.referencedColumnNames=[],this.entityMetadata=e.entityMetadata,this.referencedEntityMetadata=e.referencedEntityMetadata,this.columns=e.columns,this.referencedColumns=e.referencedColumns,this.onDelete=e.onDelete||"NO ACTION",this.onUpdate=e.onUpdate||"NO ACTION",this.deferrable=e.deferrable,this.givenName=e.name,e.namingStrategy&&this.build(e.namingStrategy)}build(e){this.columnNames=this.columns.map(t=>t.databaseName),this.referencedColumnNames=this.referencedColumns.map(t=>t.databaseName),this.referencedTablePath=this.referencedEntityMetadata.tablePath,this.name=this.givenName?this.givenName:e.foreignKeyName(this.entityMetadata.tableName,this.columnNames,this.referencedEntityMetadata.tableName,this.referencedColumnNames)}}class U4{constructor(e){this.connection=e}build(e,t){var n,r;const s=this.collectReferencedColumns(e,t),a=this.collectInverseReferencedColumns(e,t),o=t.name||this.connection.namingStrategy.joinTableName(e.entityMetadata.tableNameWithoutPrefix,e.inverseEntityMetadata.tableNameWithoutPrefix,e.propertyPath,e.inverseRelation?e.inverseRelation.propertyName:""),l=new ur({connection:this.connection,args:{target:"",name:o,type:"junction",database:t.database||e.entityMetadata.database,schema:t.schema||e.entityMetadata.schema,synchronize:t.synchronize}});l.build();const c=s.map(d=>{const h=t.joinColumns?t.joinColumns.find(m=>(!m.referencedColumnName||m.referencedColumnName===d.propertyName)&&!!m.name):void 0,f=h&&h.name?h.name:this.connection.namingStrategy.joinTableColumnName(e.entityMetadata.tableNameWithoutPrefix,d.propertyName,d.databaseName);return new Mi({connection:this.connection,entityMetadata:l,referencedColumn:d,args:{target:"",mode:"virtual",propertyName:f,options:{name:f,length:!d.length&&(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.normalizeType(d)!=="uuid"&&(d.generationStrategy==="uuid"||d.type==="uuid")?"36":d.length,width:d.width,type:d.type,precision:d.precision,scale:d.scale,charset:d.charset,collation:d.collation,zerofill:d.zerofill,unsigned:d.zerofill?!0:d.unsigned,enum:d.enum,enumName:d.enumName,foreignKeyConstraintName:h==null?void 0:h.foreignKeyConstraintName,nullable:!1,primary:!0}}})}),u=a.map(d=>{const h=t.inverseJoinColumns?t.inverseJoinColumns.find(m=>(!m.referencedColumnName||m.referencedColumnName===d.propertyName)&&!!m.name):void 0,f=h&&h.name?h.name:this.connection.namingStrategy.joinTableInverseColumnName(e.inverseEntityMetadata.tableNameWithoutPrefix,d.propertyName,d.databaseName);return new Mi({connection:this.connection,entityMetadata:l,referencedColumn:d,args:{target:"",mode:"virtual",propertyName:f,options:{length:!d.length&&(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.normalizeType(d)!=="uuid"&&(d.generationStrategy==="uuid"||d.type==="uuid")?"36":d.length,width:d.width,type:d.type,precision:d.precision,scale:d.scale,charset:d.charset,collation:d.collation,zerofill:d.zerofill,unsigned:d.zerofill?!0:d.unsigned,enum:d.enum,enumName:d.enumName,foreignKeyConstraintName:h==null?void 0:h.foreignKeyConstraintName,name:f,nullable:!1,primary:!0}}})});return this.changeDuplicatedColumnNames(c,u),l.ownerColumns=c,l.inverseColumns=u,l.ownColumns=[...c,...u],l.ownColumns.forEach(d=>d.relationMetadata=e),l.foreignKeys=e.createForeignKeyConstraints?[new xc({entityMetadata:l,referencedEntityMetadata:e.entityMetadata,columns:c,referencedColumns:s,name:(n=c[0])===null||n===void 0?void 0:n.foreignKeyConstraintName,onDelete:this.connection.driver.options.type==="spanner"?"NO ACTION":e.onDelete||"CASCADE",onUpdate:this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="spanner"?"NO ACTION":e.onUpdate||"CASCADE"}),new xc({entityMetadata:l,referencedEntityMetadata:e.inverseEntityMetadata,columns:u,referencedColumns:a,name:(r=u[0])===null||r===void 0?void 0:r.foreignKeyConstraintName,onDelete:this.connection.driver.options.type==="spanner"?"NO ACTION":e.inverseRelation?e.inverseRelation.onDelete:"CASCADE",onUpdate:this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="spanner"?"NO ACTION":e.inverseRelation?e.inverseRelation.onUpdate:"CASCADE"})]:[],l.ownIndices=[new Ji({entityMetadata:l,columns:c,args:{target:l.target,synchronize:!0}}),new Ji({entityMetadata:l,columns:u,args:{target:l.target,synchronize:!0}})],l}collectReferencedColumns(e,t){const n=t.joinColumns?t.joinColumns.find(r=>!!r.referencedColumnName):!1;return!t.joinColumns||t.joinColumns&&!n?e.entityMetadata.columns.filter(r=>r.isPrimary):t.joinColumns.map(r=>{const s=e.entityMetadata.columns.find(a=>a.propertyName===r.referencedColumnName);if(!s)throw new te("Referenced column ".concat(r.referencedColumnName," was not found in entity ").concat(e.entityMetadata.name));return s})}collectInverseReferencedColumns(e,t){const n=!!t.inverseJoinColumns,r=n?t.inverseJoinColumns.find(s=>!!s.referencedColumnName):!1;return!n||n&&!r?e.inverseEntityMetadata.primaryColumns:t.inverseJoinColumns.map(s=>{const a=e.inverseEntityMetadata.ownColumns.find(o=>o.propertyName===s.referencedColumnName);if(!a)throw new te("Referenced column ".concat(s.referencedColumnName," was not found in entity ").concat(e.inverseEntityMetadata.name));return a})}changeDuplicatedColumnNames(e,t){e.forEach(n=>{t.forEach(r=>{if(n.givenDatabaseName===r.givenDatabaseName){const s=this.connection.namingStrategy.joinTableColumnDuplicationPrefix(n.propertyName,1);n.propertyName=s,n.givenDatabaseName=s;const a=this.connection.namingStrategy.joinTableColumnDuplicationPrefix(r.propertyName,2);r.propertyName=a,r.givenDatabaseName=a}})})}}class z4{constructor(e){this.connection=e}build(e){const t=new ur({parentClosureEntityMetadata:e,connection:this.connection,args:{target:"",name:e.treeOptions&&e.treeOptions.closureTableName?e.treeOptions.closureTableName:e.tableNameWithoutPrefix,type:"closure-junction"}});return t.build(),e.primaryColumns.forEach(n=>{t.ownColumns.push(new Mi({connection:this.connection,entityMetadata:t,closureType:"ancestor",referencedColumn:n,args:{target:"",mode:"virtual",propertyName:e.treeOptions&&e.treeOptions.ancestorColumnName?e.treeOptions.ancestorColumnName(n):n.propertyName+"_ancestor",options:{primary:!0,length:n.length,type:n.type}}})),t.ownColumns.push(new Mi({connection:this.connection,entityMetadata:t,closureType:"descendant",referencedColumn:n,args:{target:"",mode:"virtual",propertyName:e.treeOptions&&e.treeOptions.descendantColumnName?e.treeOptions.descendantColumnName(n):n.propertyName+"_descendant",options:{primary:!0,length:n.length,type:n.type}}}))}),t.ownIndices=[new Ji({entityMetadata:t,columns:[t.ownColumns[0]],args:{target:t.target,synchronize:!0}}),new Ji({entityMetadata:t,columns:[t.ownColumns[1]],args:{target:t.target,synchronize:!0}})],e.treeLevelColumn&&t.ownColumns.push(new Mi({connection:this.connection,entityMetadata:t,args:{target:"",mode:"virtual",propertyName:"level",options:{type:this.connection.driver.mappedDataTypes.treeLevel}}})),t.foreignKeys=[new xc({entityMetadata:t,referencedEntityMetadata:e,columns:[t.ownColumns[0]],referencedColumns:e.primaryColumns,onDelete:this.connection.driver.options.type==="mssql"?"NO ACTION":"CASCADE"}),new xc({entityMetadata:t,referencedEntityMetadata:e,columns:[t.ownColumns[1]],referencedColumns:e.primaryColumns,onDelete:this.connection.driver.options.type==="mssql"?"NO ACTION":"CASCADE"})],t}}class nd{constructor(e){this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,this.givenName=e.args.name,this.givenColumnNames=e.args.columns,this.deferrable=e.args.deferrable)}build(e){const t={};if(this.givenColumnNames){let n=[];if(Array.isArray(this.givenColumnNames))n=this.givenColumnNames.map(r=>this.embeddedMetadata?this.embeddedMetadata.propertyPath+"."+r:r.trim()),n.forEach(r=>t[r]=1);else{const r=this.givenColumnNames(this.entityMetadata.propertiesMap);Array.isArray(r)?(n=r.map(s=>String(s)),n.forEach(s=>t[s]=1)):(n=Object.keys(r).map(s=>String(s)),Object.keys(r).forEach(s=>t[s]=r[s]))}this.columns=n.map(r=>{const s=this.entityMetadata.columns.find(c=>c.propertyPath===r);if(s)return[s];const a=this.entityMetadata.relations.find(c=>c.isWithJoinColumn&&c.propertyName===r);if(a)return a.joinColumns;const o=this.givenName?'"'+this.givenName+'" ':"",l=this.entityMetadata.targetName;throw new te("Unique constraint ".concat(o,"contains column that is missing in the entity (").concat(l,"): ")+r)}).reduce((r,s)=>r.concat(s))}return this.columnNamesWithOrderingMap=Object.keys(t).reduce((n,r)=>{const s=this.entityMetadata.columns.find(a=>a.propertyPath===r);return s&&(n[s.databasePath]=t[r]),n},{}),this.name=this.givenName?this.givenName:e.uniqueConstraintName(this.entityMetadata.tableName,this.columns.map(n=>n.databaseName)),this}}class V4{constructor(e){this.connection=e}build(e,t){var n;const r=this.collectReferencedColumns(e,t),s=this.collectColumns(e,t,r);if(!r.length||!t.createForeignKeyConstraints)return{foreignKey:void 0,columns:s,uniqueConstraint:void 0};const a=new xc({name:(n=e[0])===null||n===void 0?void 0:n.foreignKeyConstraintName,entityMetadata:t.entityMetadata,referencedEntityMetadata:t.inverseEntityMetadata,namingStrategy:this.connection.namingStrategy,columns:s,referencedColumns:r,onDelete:t.onDelete,onUpdate:t.onUpdate,deferrable:t.deferrable});if(s.every(l=>l.isPrimary)||!t.isOneToOne)return{foreignKey:a,columns:s,uniqueConstraint:void 0};const o=new nd({entityMetadata:t.entityMetadata,columns:a.columns,args:{name:this.connection.namingStrategy.relationConstraintName(t.entityMetadata.tableName,a.columns.map(l=>l.databaseName)),target:t.entityMetadata.target}});return o.build(this.connection.namingStrategy),{foreignKey:a,columns:s,uniqueConstraint:o}}collectReferencedColumns(e,t){const n=e.find(a=>!!a.referencedColumnName),r=e.length===0&&t.isManyToOne,s=e.length>0&&!n;return r||s?t.inverseEntityMetadata.primaryColumns:e.map(a=>{const o=t.inverseEntityMetadata.ownColumns.find(l=>l.propertyName===a.referencedColumnName);if(!o)throw new te("Referenced column ".concat(a.referencedColumnName," was not found in entity ").concat(t.inverseEntityMetadata.name));return o})}collectColumns(e,t,n){return n.map(r=>{const s=e.find(c=>(!c.referencedColumnName||c.referencedColumnName===r.propertyName)&&!!c.name),a=s?s.name:this.connection.namingStrategy.joinColumnName(t.propertyName,r.propertyName);let l=(t.embeddedMetadata?t.embeddedMetadata.columns:t.entityMetadata.ownColumns).find(c=>c.databaseNameWithoutPrefixes===a);return l||(l=new Mi({connection:this.connection,entityMetadata:t.entityMetadata,embeddedMetadata:t.embeddedMetadata,args:{target:"",mode:"virtual",propertyName:t.propertyName,options:{name:a,type:r.type,length:!r.length&&(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.normalizeType(r)!=="uuid"&&(r.generationStrategy==="uuid"||r.type==="uuid")?"36":r.length,width:r.width,charset:r.charset,collation:r.collation,precision:r.precision,scale:r.scale,zerofill:r.zerofill,unsigned:r.unsigned,comment:r.comment,enum:r.enum,enumName:r.enumName,primary:t.isPrimary,nullable:t.isNullable}}}),t.entityMetadata.registerColumn(l)),l.referencedColumn=r,l.type=r.type,l.relationMetadata=t,l.build(this.connection),l})}}class Jw{constructor(e){this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.type=e.args.type}isAllowed(e){return this.entityMetadata.target===e.constructor||typeof this.entityMetadata.target=="function"&&e.constructor.prototype instanceof this.entityMetadata.target}execute(e){if(!this.embeddedMetadata)return e[this.propertyName]();this.callEntityEmbeddedMethod(e,this.embeddedMetadata.propertyPath.split("."))}callEntityEmbeddedMethod(e,t){const n=t.shift();!n||!e[n]||(t.length===0?Array.isArray(e[n])?e[n].map(r=>r[this.propertyName]()):e[n][this.propertyName]():e[n]&&this.callEntityEmbeddedMethod(e[n],t))}}class W4{constructor(e){this.entityMetadata=e.entityMetadata,e.args&&(this.target=e.args.target,this.expression=e.args.expression,this.givenName=e.args.name)}build(e){return this.name=this.givenName?this.givenName:e.checkConstraintName(this.entityMetadata.tableName,this.expression),this}}class H4{constructor(e){this.entityMetadata=e.entityMetadata,e.args&&(this.target=e.args.target,this.expression=e.args.expression,this.givenName=e.args.name)}build(e){return this.name=this.givenName?this.givenName:e.exclusionConstraintName(this.entityMetadata.tableName,this.expression),this}}class Xw{constructor(e,t){this.connection=e,this.metadataArgsStorage=t,this.junctionEntityMetadataBuilder=new U4(e),this.closureJunctionEntityMetadataBuilder=new z4(e),this.relationJoinColumnBuilder=new V4(e)}build(e){const r=(e?this.metadataArgsStorage.filterTables(e):this.metadataArgsStorage.tables).filter(s=>s.type==="regular"||s.type==="closure"||s.type==="entity-child"||s.type==="view").map(s=>this.createEntityMetadata(s));return r.forEach(s=>this.computeParentEntityMetadata(r,s)),r.forEach(s=>{s.childEntityMetadatas=r.filter(a=>typeof s.target=="function"&&typeof a.target=="function"&&ed.isInherited(a.target,s.target))}),r.filter(s=>s.tableType!=="entity-child").forEach(s=>s.build()),r.filter(s=>s.tableType==="entity-child").forEach(s=>s.build()),r.filter(s=>s.tableType!=="entity-child").forEach(s=>this.computeEntityMetadataStep1(r,s)),r.filter(s=>s.tableType==="entity-child").forEach(s=>this.computeEntityMetadataStep1(r,s)),r.forEach(s=>this.computeEntityMetadataStep2(s)),r.forEach(s=>this.computeInverseProperties(s,r)),r.filter(s=>s.tableType!=="entity-child").forEach(s=>{s.relations.filter(a=>a.isOneToOne||a.isManyToOne).forEach(a=>{const o=this.metadataArgsStorage.filterJoinColumns(a.target,a.propertyName),{foreignKey:l,columns:c,uniqueConstraint:u}=this.relationJoinColumnBuilder.build(o,a);if(l&&(a.registerForeignKeys(l),s.foreignKeys.push(l)),c&&a.registerJoinColumns(c),u)if(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="mssql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){const d=new Ji({entityMetadata:u.entityMetadata,columns:u.columns,args:{target:u.target,name:u.name,unique:!0,synchronize:!0}});this.connection.driver.options.type==="mssql"&&(d.where=d.columns.map(h=>"".concat(this.connection.driver.escape(h.databaseName)," IS NOT NULL")).join(" AND ")),this.connection.driver.options.type==="spanner"&&(d.isNullFiltered=!0),a.embeddedMetadata?a.embeddedMetadata.indices.push(d):a.entityMetadata.ownIndices.push(d),this.computeEntityMetadataStep2(s)}else a.embeddedMetadata?a.embeddedMetadata.uniques.push(u):a.entityMetadata.ownUniques.push(u),this.computeEntityMetadataStep2(s);if(l&&this.connection.driver.options.type==="cockroachdb"){const d=new Ji({entityMetadata:a.entityMetadata,columns:l.columns,args:{target:a.entityMetadata.target,synchronize:!0}});a.embeddedMetadata?a.embeddedMetadata.indices.push(d):a.entityMetadata.ownIndices.push(d),this.computeEntityMetadataStep2(s)}}),s.relations.filter(a=>a.isManyToMany).forEach(a=>{const o=this.metadataArgsStorage.findJoinTable(a.target,a.propertyName);if(!o)return;const l=this.junctionEntityMetadataBuilder.build(a,o);a.registerForeignKeys(...l.foreignKeys),a.registerJoinColumns(l.ownIndices[0].columns,l.ownIndices[1].columns),a.registerJunctionEntityMetadata(l),this.computeEntityMetadataStep2(l),this.computeInverseProperties(l,r),r.push(l)})}),r.forEach(s=>{s.relationsWithJoinColumns=s.relations.filter(a=>a.isWithJoinColumn),s.hasNonNullableRelations=s.relationsWithJoinColumns.some(a=>!a.isNullable||a.isPrimary)}),r.filter(s=>s.treeType==="closure-table").forEach(s=>{const a=this.closureJunctionEntityMetadataBuilder.build(s);s.closureJunctionTable=a,this.computeEntityMetadataStep2(a),this.computeInverseProperties(a,r),r.push(a)}),r.filter(s=>s.inheritancePattern==="STI"&&s.discriminatorColumn).forEach(s=>this.createKeysForTableInheritance(s)),r.forEach(s=>{s.indices.forEach(a=>a.build(this.connection.namingStrategy))}),r.forEach(s=>{s.uniques.forEach(a=>a.build(this.connection.namingStrategy))}),r.forEach(s=>{s.checks.forEach(a=>a.build(this.connection.namingStrategy))}),r.forEach(s=>{s.exclusions.forEach(a=>a.build(this.connection.namingStrategy))}),r.filter(s=>typeof s.target=="function").forEach(s=>{s.relations.filter(a=>a.isLazy).forEach(a=>{this.connection.relationLoader.enableLazyLoad(a,s.target.prototype)})}),r.forEach(s=>{s.columns.forEach(a=>{const o=this.metadataArgsStorage.findGenerated(a.target,a.propertyName);o&&(a.isGenerated=!0,a.generationStrategy=o.strategy,o.strategy==="uuid"?a.type="uuid":o.strategy==="rowid"?a.type="int":a.type=a.type||Number,a.build(this.connection),this.computeEntityMetadataStep2(s))})}),r}createEntityMetadata(e){const t=typeof e.target=="function"?ed.getInheritanceTree(e.target):[e.target],n=this.metadataArgsStorage.findInheritanceType(e.target),r=this.metadataArgsStorage.findTree(e.target);let s;return(n&&n.pattern==="STI"||e.type==="entity-child")&&(s=this.metadataArgsStorage.filterSingleTableChildren(e.target).map(a=>a.target).filter(a=>typeof a=="function"),t.push(...s)),new ur({connection:this.connection,args:e,inheritanceTree:t,tableTree:r,inheritancePattern:n?n.pattern:void 0})}computeParentEntityMetadata(e,t){t.tableType==="entity-child"&&(t.parentEntityMetadata=e.find(n=>n.inheritanceTree.indexOf(t.target)!==-1&&n.inheritancePattern==="STI"))}computeEntityMetadataStep1(e,t){const n=this.metadataArgsStorage.findInheritanceType(t.target),r=this.metadataArgsStorage.findDiscriminatorValue(t.target);if(typeof r<"u"?t.discriminatorValue=r.value:t.discriminatorValue=t.target.name,t.embeddeds=this.createEmbeddedsRecursively(t,this.metadataArgsStorage.filterEmbeddeds(t.inheritanceTree)).map(a=>(t.inheritancePattern==="STI"&&(a.columns=a.columns.map(o=>(o.isNullable=!0,o))),a)),t.ownColumns=this.metadataArgsStorage.filterColumns(t.inheritanceTree).map(a=>{if(t.tableType==="entity-child")return t.parentEntityMetadata.ownColumns.find(c=>c.propertyName===a.propertyName);const o=new Mi({connection:this.connection,entityMetadata:t,args:a});return e.find(c=>c.tableType==="entity-child"&&c.target===a.target)&&(o.isNullable=!0),o}),n&&n.column){const a=n.column&&n.column.name?n.column.name:"type";let o=t.ownColumns.find(l=>l.propertyName===a);o?o.isDiscriminator=!0:(o=new Mi({connection:this.connection,entityMetadata:t,args:{target:t.target,mode:"virtual",propertyName:a,options:n.column||{name:a,type:"varchar",nullable:!1}}}),o.isVirtual=!0,o.isDiscriminator=!0,t.ownColumns.push(o))}if(t.tableType==="entity-child"){const a=t.parentEntityMetadata.ownColumns.find(o=>o.isDiscriminator);a&&!t.ownColumns.find(o=>o===a)&&t.ownColumns.push(a),t.inheritancePattern=t.parentEntityMetadata.inheritancePattern,!t.treeType&&t.parentEntityMetadata.treeType&&(t.treeType=t.parentEntityMetadata.treeType,t.treeOptions=t.parentEntityMetadata.treeOptions,t.treeParentRelation=t.parentEntityMetadata.treeParentRelation,t.treeLevelColumn=t.parentEntityMetadata.treeLevelColumn)}const{namingStrategy:s}=this.connection;if(t.treeType==="materialized-path")t.ownColumns.push(new Mi({connection:this.connection,entityMetadata:t,materializedPath:!0,args:{target:t.target,mode:"virtual",propertyName:"mpath",options:{name:s.materializedPathColumnName,type:String,nullable:!0,default:""}}}));else if(t.treeType==="nested-set"){const{left:a,right:o}=s.nestedSetColumnNames;t.ownColumns.push(new Mi({connection:this.connection,entityMetadata:t,nestedSetLeft:!0,args:{target:t.target,mode:"virtual",propertyName:a,options:{name:a,type:Number,nullable:!1,default:1}}})),t.ownColumns.push(new Mi({connection:this.connection,entityMetadata:t,nestedSetRight:!0,args:{target:t.target,mode:"virtual",propertyName:o,options:{name:o,type:Number,nullable:!1,default:2}}}))}if(t.ownRelations=this.metadataArgsStorage.filterRelations(t.inheritanceTree).map(a=>{if(t.tableType==="entity-child"){const o=t.parentEntityMetadata.ownRelations.find(c=>c.propertyName===a.propertyName),l=typeof a.type=="function"?a.type():a.type;if(o.type!==l){const c=Object.create(o);return c.type=l,c}return o}return new Gw({entityMetadata:t,args:a})}),t.relationIds=this.metadataArgsStorage.filterRelationIds(t.inheritanceTree).map(a=>t.tableType==="entity-child"?t.parentEntityMetadata.relationIds.find(o=>o.propertyName===a.propertyName):new Kw({entityMetadata:t,args:a})),t.relationCounts=this.metadataArgsStorage.filterRelationCounts(t.inheritanceTree).map(a=>t.tableType==="entity-child"?t.parentEntityMetadata.relationCounts.find(o=>o.propertyName===a.propertyName):new Yw({entityMetadata:t,args:a})),t.ownListeners=this.metadataArgsStorage.filterListeners(t.inheritanceTree).map(a=>new Jw({entityMetadata:t,args:a})),t.checks=this.metadataArgsStorage.filterChecks(t.inheritanceTree).map(a=>new W4({entityMetadata:t,args:a})),this.connection.driver.options.type==="postgres"&&(t.exclusions=this.metadataArgsStorage.filterExclusions(t.inheritanceTree).map(a=>new H4({entityMetadata:t,args:a}))),this.connection.driver.options.type==="cockroachdb"){t.ownIndices=this.metadataArgsStorage.filterIndices(t.inheritanceTree).filter(o=>!o.unique).map(o=>new Ji({entityMetadata:t,args:o}));const a=this.metadataArgsStorage.filterIndices(t.inheritanceTree).filter(o=>o.unique).map(o=>new nd({entityMetadata:t,args:{target:o.target,name:o.name,columns:o.columns}}));t.ownUniques.push(...a)}else t.ownIndices=this.metadataArgsStorage.filterIndices(t.inheritanceTree).map(a=>new Ji({entityMetadata:t,args:a}));if(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){const a=this.metadataArgsStorage.filterUniques(t.inheritanceTree).map(o=>new Ji({entityMetadata:t,args:{target:o.target,name:o.name,columns:o.columns,unique:!0,synchronize:!0}}));t.ownIndices.push(...a)}else{const a=this.metadataArgsStorage.filterUniques(t.inheritanceTree).map(o=>new nd({entityMetadata:t,args:o}));t.ownUniques.push(...a)}}createEmbeddedsRecursively(e,t){return t.map(n=>{const r=new j4({entityMetadata:e,args:n}),s=typeof r.type=="function"?ed.getInheritanceTree(r.type):[r.type];return r.columns=this.metadataArgsStorage.filterColumns(s).map(a=>new Mi({connection:this.connection,entityMetadata:e,embeddedMetadata:r,args:a})),r.relations=this.metadataArgsStorage.filterRelations(s).map(a=>new Gw({entityMetadata:e,embeddedMetadata:r,args:a})),r.listeners=this.metadataArgsStorage.filterListeners(s).map(a=>new Jw({entityMetadata:e,embeddedMetadata:r,args:a})),r.indices=this.metadataArgsStorage.filterIndices(s).map(a=>new Ji({entityMetadata:e,embeddedMetadata:r,args:a})),r.uniques=this.metadataArgsStorage.filterUniques(s).map(a=>new nd({entityMetadata:e,embeddedMetadata:r,args:a})),r.relationIds=this.metadataArgsStorage.filterRelationIds(s).map(a=>new Kw({entityMetadata:e,args:a})),r.relationCounts=this.metadataArgsStorage.filterRelationCounts(s).map(a=>new Yw({entityMetadata:e,args:a})),r.embeddeds=this.createEmbeddedsRecursively(e,this.metadataArgsStorage.filterEmbeddeds(s)),r.embeddeds.forEach(a=>a.parentEmbeddedMetadata=r),e.allEmbeddeds.push(r),r})}computeEntityMetadataStep2(e){e.embeddeds.forEach(t=>t.build(this.connection)),e.embeddeds.forEach(t=>{t.columnsFromTree.forEach(n=>n.build(this.connection)),t.relationsFromTree.forEach(n=>n.build())}),e.ownColumns.forEach(t=>t.build(this.connection)),e.ownRelations.forEach(t=>t.build()),e.relations=e.embeddeds.reduce((t,n)=>t.concat(n.relationsFromTree),e.ownRelations),e.eagerRelations=e.relations.filter(t=>t.isEager),e.lazyRelations=e.relations.filter(t=>t.isLazy),e.oneToOneRelations=e.relations.filter(t=>t.isOneToOne),e.oneToManyRelations=e.relations.filter(t=>t.isOneToMany),e.manyToOneRelations=e.relations.filter(t=>t.isManyToOne),e.manyToManyRelations=e.relations.filter(t=>t.isManyToMany),e.ownerOneToOneRelations=e.relations.filter(t=>t.isOneToOneOwner),e.ownerManyToManyRelations=e.relations.filter(t=>t.isManyToManyOwner),e.treeParentRelation=e.relations.find(t=>t.isTreeParent),e.treeChildrenRelation=e.relations.find(t=>t.isTreeChildren),e.columns=e.embeddeds.reduce((t,n)=>t.concat(n.columnsFromTree),e.ownColumns),e.listeners=e.embeddeds.reduce((t,n)=>t.concat(n.listenersFromTree),e.ownListeners),e.afterLoadListeners=e.listeners.filter(t=>t.type===tn.AFTER_LOAD),e.afterInsertListeners=e.listeners.filter(t=>t.type===tn.AFTER_INSERT),e.afterUpdateListeners=e.listeners.filter(t=>t.type===tn.AFTER_UPDATE),e.afterRemoveListeners=e.listeners.filter(t=>t.type===tn.AFTER_REMOVE),e.afterSoftRemoveListeners=e.listeners.filter(t=>t.type===tn.AFTER_SOFT_REMOVE),e.afterRecoverListeners=e.listeners.filter(t=>t.type===tn.AFTER_RECOVER),e.beforeInsertListeners=e.listeners.filter(t=>t.type===tn.BEFORE_INSERT),e.beforeUpdateListeners=e.listeners.filter(t=>t.type===tn.BEFORE_UPDATE),e.beforeRemoveListeners=e.listeners.filter(t=>t.type===tn.BEFORE_REMOVE),e.beforeSoftRemoveListeners=e.listeners.filter(t=>t.type===tn.BEFORE_SOFT_REMOVE),e.beforeRecoverListeners=e.listeners.filter(t=>t.type===tn.BEFORE_RECOVER),e.indices=e.embeddeds.reduce((t,n)=>t.concat(n.indicesFromTree),e.ownIndices),e.uniques=e.embeddeds.reduce((t,n)=>t.concat(n.uniquesFromTree),e.ownUniques),e.primaryColumns=e.columns.filter(t=>t.isPrimary),e.nonVirtualColumns=e.columns.filter(t=>!t.isVirtual),e.ancestorColumns=e.columns.filter(t=>t.closureType==="ancestor"),e.descendantColumns=e.columns.filter(t=>t.closureType==="descendant"),e.hasMultiplePrimaryKeys=e.primaryColumns.length>1,e.generatedColumns=e.columns.filter(t=>t.isGenerated||t.isObjectId),e.hasUUIDGeneratedColumns=e.columns.filter(t=>t.isGenerated||t.generationStrategy==="uuid").length>0,e.createDateColumn=e.columns.find(t=>t.isCreateDate),e.updateDateColumn=e.columns.find(t=>t.isUpdateDate),e.deleteDateColumn=e.columns.find(t=>t.isDeleteDate),e.versionColumn=e.columns.find(t=>t.isVersion),e.discriminatorColumn=e.columns.find(t=>t.isDiscriminator),e.treeLevelColumn=e.columns.find(t=>t.isTreeLevel),e.nestedSetLeftColumn=e.columns.find(t=>t.isNestedSetLeft),e.nestedSetRightColumn=e.columns.find(t=>t.isNestedSetRight),e.materializedPathColumn=e.columns.find(t=>t.isMaterializedPath),e.objectIdColumn=e.columns.find(t=>t.isObjectId),e.foreignKeys.forEach(t=>t.build(this.connection.namingStrategy)),e.propertiesMap=e.createPropertiesMap(),e.relationIds.forEach(t=>t.build()),e.relationCounts.forEach(t=>t.build()),e.embeddeds.forEach(t=>{t.relationIdsFromTree.forEach(n=>n.build()),t.relationCountsFromTree.forEach(n=>n.build())})}computeInverseProperties(e,t){e.relations.forEach(n=>{const r=t.find(s=>s.target===n.type||typeof n.type=="string"&&(s.targetName===n.type||s.givenTableName===n.type));if(!r)throw new te("Entity metadata for "+e.name+"#"+n.propertyPath+" was not found. Check if you specified a correct entity object and if it's connected in the connection options.");n.inverseEntityMetadata=r,n.inverseSidePropertyPath=n.buildInverseSidePropertyPath(),n.inverseRelation=r.relations.find(s=>s.propertyPath===n.inverseSidePropertyPath)})}createKeysForTableInheritance(e){e.indices.push(new Ji({entityMetadata:e,columns:[e.discriminatorColumn],args:{target:e.target,unique:!1}}))}}class Yd extends te{static createEntitySchemaIsRequiredException(e){return new Yd("EntitySchema is required for ".concat(e," embedded field"))}static createTargetIsRequired(e){return new Yd("Target field is required for ".concat(e," embedded EntitySchema"))}constructor(e){super(e)}}class Q4{transform(e){const t=new CC;return e.forEach(n=>{var r;const s=n.options,a={target:s.target||s.name,name:s.tableName,database:s.database,schema:s.schema,type:s.type||"regular",orderBy:s.orderBy,synchronize:s.synchronize,withoutRowid:!!s.withoutRowid,expression:s.expression};t.tables.push(a);const{inheritance:o}=s;o&&t.inheritances.push({target:s.target,pattern:(r=o.pattern)!==null&&r!==void 0?r:"STI",column:o.column?typeof o.column=="string"?{name:o.column}:o.column:void 0}),this.transformColumnsRecursive(s,t)}),t}transformColumnsRecursive(e,t){Object.keys(e.columns).forEach(n=>{const s=e.columns[n];let a="regular";s.createDate&&(a="createDate"),s.updateDate&&(a="updateDate"),s.deleteDate&&(a="deleteDate"),s.version&&(a="version"),s.treeChildrenCount&&(a="treeChildrenCount"),s.treeLevel&&(a="treeLevel"),s.objectId&&(a="objectId");const o={target:e.target||e.name,mode:a,propertyName:n,options:{type:s.type,name:s.objectId?"_id":s.name,primaryKeyConstraintName:s.primaryKeyConstraintName,length:s.length,width:s.width,nullable:s.nullable,readonly:s.readonly,update:s.update,select:s.select,insert:s.insert,primary:s.primary,unique:s.unique,comment:s.comment,default:s.default,onUpdate:s.onUpdate,precision:s.precision,scale:s.scale,zerofill:s.zerofill,unsigned:s.unsigned,charset:s.charset,collation:s.collation,enum:s.enum,enumName:s.enumName,asExpression:s.asExpression,generatedType:s.generatedType,hstoreType:s.hstoreType,array:s.array,transformer:s.transformer,spatialFeatureType:s.spatialFeatureType,srid:s.srid}};if(t.columns.push(o),s.generated){const l={target:e.target||e.name,propertyName:n,strategy:typeof s.generated=="string"?s.generated:"increment"};t.generations.push(l)}s.unique&&t.uniques.push({target:e.target||e.name,columns:[n]})}),e.relations&&Object.keys(e.relations).forEach(n=>{const r=e.relations[n],s={target:e.target||e.name,propertyName:n,relationType:r.type,isLazy:r.lazy||!1,type:r.target,inverseSideProperty:r.inverseSide,isTreeParent:r.treeParent,isTreeChildren:r.treeChildren,options:{eager:r.eager||!1,cascade:r.cascade,nullable:r.nullable,onDelete:r.onDelete,onUpdate:r.onUpdate,deferrable:r.deferrable,createForeignKeyConstraints:r.createForeignKeyConstraints,persistence:r.persistence,orphanedRowAction:r.orphanedRowAction}};if(t.relations.push(s),r.joinColumn)if(typeof r.joinColumn=="boolean"){const a={target:e.target||e.name,propertyName:n};t.joinColumns.push(a)}else{const a=Array.isArray(r.joinColumn)?r.joinColumn:[r.joinColumn];for(const o of a){const l={target:e.target||e.name,propertyName:n,name:o.name,referencedColumnName:o.referencedColumnName,foreignKeyConstraintName:o.foreignKeyConstraintName};t.joinColumns.push(l)}}if(r.joinTable)if(typeof r.joinTable=="boolean"){const a={target:e.target||e.name,propertyName:n};t.joinTables.push(a)}else{const a={target:e.target||e.name,propertyName:n,name:r.joinTable.name,database:r.joinTable.database,schema:r.joinTable.schema,joinColumns:r.joinTable.joinColumn?[r.joinTable.joinColumn]:r.joinTable.joinColumns,inverseJoinColumns:r.joinTable.inverseJoinColumn?[r.joinTable.inverseJoinColumn]:r.joinTable.inverseJoinColumns};t.joinTables.push(a)}}),e.relationIds&&Object.keys(e.relationIds).forEach(n=>{const r=e.relationIds[n],s={propertyName:n,relation:r.relationName,target:e.target||e.name,alias:r.alias,queryBuilderFactory:r.queryBuilderFactory};t.relationIds.push(s)}),e.indices&&e.indices.forEach(n=>{const r={target:e.target||e.name,name:n.name,unique:n.unique===!0,spatial:n.spatial===!0,fulltext:n.fulltext===!0,nullFiltered:n.nullFiltered===!0,parser:n.parser,synchronize:n.synchronize!==!1,where:n.where,sparse:n.sparse,columns:n.columns};t.indices.push(r)}),e.uniques&&e.uniques.forEach(n=>{const r={target:e.target||e.name,name:n.name,columns:n.columns,deferrable:n.deferrable};t.uniques.push(r)}),e.checks&&e.checks.forEach(n=>{const r={target:e.target||e.name,name:n.name,expression:n.expression};t.checks.push(r)}),e.exclusions&&e.exclusions.forEach(n=>{const r={target:e.target||e.name,name:n.name,expression:n.expression};t.exclusions.push(r)}),e.embeddeds&&Object.keys(e.embeddeds).forEach(n=>{const r=e.embeddeds[n];if(!r.schema)throw Yd.createEntitySchemaIsRequiredException(n);const s=r.schema.options;t.embeddeds.push({target:e.target||e.name,propertyName:n,isArray:r.array===!0,prefix:r.prefix!==void 0?r.prefix:void 0,type:()=>(s==null?void 0:s.target)||s.name}),this.transformColumnsRecursive(s,t)})}}class G4{constructor(e){this.connection=e}async buildMigrations(e){const[t,n]=We.splitClassesAndStrings(e);return[...t,...await Cp(this.connection.logger)].map(s=>Qw(s))}async buildSubscribers(e){const[t,n]=We.splitClassesAndStrings(e||[]),r=[...t,...await Cp(this.connection.logger)];return rr().filterSubscribers(r).map(s=>Qw(s.target))}async buildEntityMetadatas(e){const[t,n]=We.splitClassesAndStrings(e||[]),r=t.filter(u=>!ue.isEntitySchema(u)),s=t.filter(u=>ue.isEntitySchema(u)),a=[...r,...await Cp(this.connection.logger)];a.forEach(u=>{ue.isEntitySchema(u)&&s.push(u)});const o=new Xw(this.connection,rr()).build(a),l=new Q4().transform(s),c=new Xw(this.connection,l).build();return[...o,...c]}}class K4{constructor(e,t,n,r,s){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=n,this.rawRelationCountResults=r,this.queryRunner=s}transform(e,t){const n=this.group(e,t),r=[];return n.forEach(s=>{const a=this.transformRawResultsGroup(s,t);a!==void 0&&!Object.values(a).every(o=>o===null)&&r.push(a)}),r}group(e,t){const n=new Map,r=[];return t.metadata.tableType==="view"?r.push(...t.metadata.columns.map(s=>Ue.buildAlias(this.driver,void 0,t.name,s.databaseName))):r.push(...t.metadata.primaryColumns.map(s=>Ue.buildAlias(this.driver,void 0,t.name,s.databaseName))),e.forEach(s=>{const a=r.map(l=>{const c=s[l];return Buffer.isBuffer(c)?c.toString("hex"):ht.isObject(c)?JSON.stringify(c):c}).join("_"),o=n.get(a);o?o.push(s):n.set(a,[s])}),n}transformRawResultsGroup(e,t){let n=t.metadata;if(n.discriminatorColumn){const u=e.map(h=>h[Ue.buildAlias(this.driver,void 0,t.name,t.metadata.discriminatorColumn.databaseName)]),d=n.childEntityMetadatas.find(h=>typeof u.find(f=>f===h.discriminatorValue)<"u");d&&(n=d)}let r=n.create(this.queryRunner,{fromDeserializer:!0,pojo:this.expressionMap.options.indexOf("create-pojo")!==-1});const s=this.transformColumns(e,t,r,n),a=this.transformJoins(e,r,t,n),o=this.transformRelationIds(e,t,r,n),l=this.transformRelationCounts(e,t,r);if(s||n.primaryColumns.filter(u=>u.isVirtual===!1).length===0&&(a||o||l))return r}transformColumns(e,t,n,r){let s=!1;return r.columns.forEach(a=>{if(r.childEntityMetadatas.length>0&&r.childEntityMetadatas.findIndex(l=>l.target===a.target)!==-1)return;const o=e[0][Ue.buildAlias(this.driver,void 0,t.name,a.databaseName)];o===void 0||a.isVirtual||this.expressionMap.selects.find(l=>l.selection===t.name||l.selection===t.name+"."+a.propertyPath)&&(a.setEntityValue(n,this.driver.prepareHydratedValue(o,a)),o!==null&&(s=!0))}),s}transformJoins(e,t,n,r){let s=!1;return this.expressionMap.joinAttributes.forEach(a=>{if(!a.metadata||!a.isSelected||a.relation&&!r.relations.find(l=>l===a.relation))return;if(a.mapToProperty){if(a.mapToPropertyParentAlias!==n.name)return}else if(!a.relation||a.parentAlias!==n.name||a.relationPropertyPath!==a.relation.propertyPath)return;let o=this.transform(e,a.alias);o=a.isMany?o:o[0],o=!a.isMany&&o===void 0?null:o,o!==void 0&&(a.mapToPropertyPropertyName?t[a.mapToPropertyPropertyName]=o:a.relation.setEntityValue(t,o),s=!0)}),s}transformRelationIds(e,t,n,r){let s=!1;return this.rawRelationIdResults.forEach((a,o)=>{if(a.relationIdAttribute.parentAlias!==t.name)return;const l=a.relationIdAttribute.relation,c=this.createValueMapFromJoinColumns(l,a.relationIdAttribute.parentAlias,e);if(c==null)return;this.prepareDataForTransformRelationIds();const u=this.hashEntityIds(l,c),d=this.relationIdMaps[o][u]||[],h=a.relationIdAttribute.mapToPropertyPropertyPath.split("."),f=(m,p,w)=>{const y=m.shift();if(y&&m.length===0)return p[y]=w,p;if(y&&m.length>0)f(m,p[y],w);else return p};l.isOneToOne||l.isManyToOne?d[0]!==void 0&&(f(h,n,d[0]),s=!0):(f(h,n,d),s=s||d.length>0)}),s}transformRelationCounts(e,t,n){let r=!1;return this.rawRelationCountResults.filter(s=>s.relationCountAttribute.parentAlias===t.name).forEach(s=>{const a=s.relationCountAttribute.relation;let o;a.isOneToMany?o=a.inverseRelation.joinColumns[0].referencedColumn.databaseName:o=a.isOwning?a.joinColumns[0].referencedColumn.databaseName:a.inverseRelation.joinColumns[0].referencedColumn.databaseName;const l=e[0][Ue.buildAlias(this.driver,void 0,t.name,o)];l!=null&&(n[s.relationCountAttribute.mapToPropertyPropertyName]=0,s.results.filter(c=>c.parentId===l).forEach(c=>{n[s.relationCountAttribute.mapToPropertyPropertyName]=parseInt(c.cnt),r=!0}))}),r}createValueMapFromJoinColumns(e,t,n){let r;return e.isManyToOne||e.isOneToOneOwner?r=e.entityMetadata.primaryColumns.map(s=>s):e.isOneToMany||e.isOneToOneNotOwner?r=e.inverseRelation.joinColumns.map(s=>s):e.isOwning?r=e.joinColumns.map(s=>s):r=e.inverseRelation.inverseJoinColumns.map(s=>s),r.reduce((s,a)=>(n.forEach(o=>{e.isManyToOne||e.isOneToOneOwner?s[a.databaseName]=this.driver.prepareHydratedValue(o[Ue.buildAlias(this.driver,void 0,t,a.databaseName)],a):s[a.databaseName]=this.driver.prepareHydratedValue(o[Ue.buildAlias(this.driver,void 0,t,a.referencedColumn.databaseName)],a.referencedColumn)}),s),{})}extractEntityPrimaryIds(e,t){let n;return e.isManyToOne||e.isOneToOneOwner?n=e.entityMetadata.primaryColumns.map(r=>r):e.isOneToMany||e.isOneToOneNotOwner?n=e.inverseRelation.joinColumns.map(r=>r):e.isOwning?n=e.joinColumns.map(r=>r):n=e.inverseRelation.inverseJoinColumns.map(r=>r),n.reduce((r,s)=>(r[s.databaseName]=t[s.databaseName],r),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(e=>{const t=e.relationIdAttribute.relation;let n;return t.isManyToOne||t.isOneToOneOwner?n=t.joinColumns:t.isOneToMany||t.isOneToOneNotOwner?n=t.inverseEntityMetadata.primaryColumns:t.isOwning?n=t.inverseJoinColumns:n=t.inverseRelation.joinColumns,e.results.reduce((r,s)=>{let a=n.reduce((o,l)=>{let c=s[l.databaseName];return t.isOneToMany||t.isOneToOneNotOwner?(l.isVirtual&&l.referencedColumn&&l.referencedColumn.propertyName!==l.propertyName&&(c=l.referencedColumn.createValueMap(c)),We.mergeDeep(o,l.createValueMap(c))):(!l.isPrimary&&l.referencedColumn.referencedColumn&&(c=l.referencedColumn.referencedColumn.createValueMap(c)),We.mergeDeep(o,l.referencedColumn.createValueMap(c)))},{});if(n.length===1&&!e.relationIdAttribute.disableMixedMap&&(t.isOneToMany||t.isOneToOneNotOwner?a=n[0].getEntityValue(a):a=n[0].referencedColumn.getEntityValue(a)),a!==void 0){const o=this.hashEntityIds(t,s);r[o]?r[o].push(a):r[o]=[a]}return r},{})}))}hashEntityIds(e,t){const n=this.extractEntityPrimaryIds(e,t);return JSON.stringify(n)}}class Cr{static isAliasProperty(e){if(typeof e!="string"||e.indexOf(".")===-1)return!1;const[t,n]=e.split(".");return!(!t||!n||e.indexOf("(")!==-1||e.indexOf(")")!==-1)}}class HC{constructor(e,t,n){this.connection=e,this.queryExpressionMap=t,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,n&&ht.assign(this,n)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){let e=()=>{for(const t of this.queryExpressionMap.selects)if(t.selection===this.alias.name||this.metadata&&this.metadata.columns.find(n=>t.selection===this.alias.name+"."+n.propertyPath))return!0;return!1};this.isSelectedCache=e(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Cr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Cr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let e=()=>{if(!Cr.isAliasProperty(this.entityOrProperty))return;const t=this.queryExpressionMap.findAliasByName(this.parentAlias);let n=t.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(n||t.metadata.parentEntityMetadata&&(n=t.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),n))return n;throw new te("Relation with property path ".concat(this.relationPropertyPath," in entity was not found."))};this.relationCache=e.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new te("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new te("Junction property is not defined.");const e=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?Ue.buildAlias(this.connection.driver,void 0,e,this.alias.name):Ue.buildAlias(this.connection.driver,void 0,this.alias.name,e)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class By{constructor(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,ht.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Cr.isAliasProperty(this.relationName))throw new te("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Cr.isAliasProperty(this.relationName))throw new te("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Cr.isAliasProperty(this.relationName))throw new te("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new te("Relation with property path ".concat(this.relationPropertyPath," in entity was not found."));return t}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class qy{constructor(e,t){this.expressionMap=e,ht.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Cr.isAliasProperty(this.relationName))throw new te("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Cr.isAliasProperty(this.relationName))throw new te("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rc"}get relation(){if(!Cr.isAliasProperty(this.relationName))throw new te("Given value is a string representation of alias property");const[e,t]=this.relationName.split("."),r=this.expressionMap.findAliasByName(e).metadata.findRelationWithPropertyPath(t);if(!r)throw new te("Relation with property path ".concat(t," in entity was not found."));return r}get metadata(){if(!Cr.isAliasProperty(this.relationName))throw new te("Given value is a string representation of alias property");const e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}let Y4=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new te("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const r={},s=e.map(a=>{const o={},l=[];n.relation.joinColumns.forEach(u=>{o[u.databaseName]=this.connection.driver.prepareHydratedValue(a[Ue.buildAlias(this.connection.driver,void 0,n.parentAlias,u.databaseName)],u.referencedColumn);const d="".concat(u.databaseName,":").concat(o[u.databaseName]);l.indexOf(d)===-1&&l.push(d)}),n.relation.entityMetadata.primaryColumns.forEach(u=>{o[u.databaseName]=this.connection.driver.prepareHydratedValue(a[Ue.buildAlias(this.connection.driver,void 0,n.parentAlias,u.databaseName)],u);const d="".concat(u.databaseName,":").concat(o[u.databaseName]);l.indexOf(d)===-1&&l.push(d)}),l.sort();const c=l.join("::");return r[c]?null:(r[c]=!0,o)}).filter(a=>a);return{relationIdAttribute:n,results:s}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const r=n.relation,s=r.isOwning?r.joinColumns:r.inverseRelation.joinColumns,a=r.inverseEntityMetadata.target,o=r.inverseEntityMetadata.tableName,l=n.alias||o,c={},u={},d=e.map((p,w)=>{const y=[],b={},E=s.map(k=>{const B=k.databaseName+w,D=p[Ue.buildAlias(this.connection.driver,void 0,n.parentAlias,k.referencedColumn.databaseName)],O="".concat(l,":").concat(k.propertyPath,":").concat(D);return y.indexOf(O)!==-1?"":(y.push(O),b[B]=D,l+"."+k.propertyPath+" = :"+B)}).filter(k=>k).join(" AND ");y.sort();const _=y.join("::");return c[_]?"":(c[_]=!0,Object.assign(u,b),E)}).filter(p=>p).map(p=>"("+p+")").join(" OR ");if(!d)return{relationIdAttribute:n,results:[]};const h=this.connection.createQueryBuilder(this.queryRunner);We.uniq([...s,...r.inverseRelation.entityMetadata.primaryColumns],p=>p.propertyPath).forEach(p=>{h.addSelect(l+"."+p.propertyPath,p.databaseName)}),h.from(a,l).where("("+d+")").setParameters(u),n.queryBuilderFactory&&n.queryBuilderFactory(h);const m=await h.getRawMany();return m.forEach(p=>{s.forEach(w=>{p[w.databaseName]=this.connection.driver.prepareHydratedValue(p[w.databaseName],w.referencedColumn)}),r.inverseRelation.entityMetadata.primaryColumns.forEach(w=>{p[w.databaseName]=this.connection.driver.prepareHydratedValue(p[w.databaseName],w)})}),{relationIdAttribute:n,results:m}}else{const r=n.relation,s=r.isOwning?r.joinColumns:r.inverseRelation.inverseJoinColumns,a=r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns,o=n.junctionAlias,l=n.joinInverseSideMetadata.tableName,c=n.alias||l,u=r.isOwning?r.junctionEntityMetadata.tableName:r.inverseRelation.junctionEntityMetadata.tableName,d=e.map(E=>s.reduce((_,k)=>(_[k.propertyPath]=E[Ue.buildAlias(this.connection.driver,void 0,n.parentAlias,k.referencedColumn.databaseName)],_),{}));if(d.length===0)return{relationIdAttribute:n,results:[]};const h={},f={},m=d.map((E,_)=>{const k=[],B={},D=Object.keys(E).map(R=>{const Q=R+_,$=E[R],P="".concat(o,":").concat(R,":").concat($);return k.indexOf(P)!==-1?"":(k.push(P),B[Q]=$,o+"."+R+" = :"+Q)}).filter(R=>R).join(" AND ");k.sort();const O=k.join("::");return f[O]?"":(f[O]=!0,Object.assign(h,B),D)}).filter(E=>E),p=a.map(E=>o+"."+E.propertyPath+" = "+c+"."+E.referencedColumn.propertyPath).join(" AND "),w=m.map(E=>"("+E+" AND "+p+")").join(" OR "),y=this.connection.createQueryBuilder(this.queryRunner);a.forEach(E=>{y.addSelect(o+"."+E.propertyPath,E.databaseName).addOrderBy(o+"."+E.propertyPath)}),s.forEach(E=>{y.addSelect(o+"."+E.propertyPath,E.databaseName).addOrderBy(o+"."+E.propertyPath)}),y.from(l,c).innerJoin(u,o,w).setParameters(h),n.queryBuilderFactory&&n.queryBuilderFactory(y);const b=await y.getRawMany();return b.forEach(E=>{[...s,...a].forEach(_=>{E[_.databaseName]=this.connection.driver.prepareHydratedValue(E[_.databaseName],_.referencedColumn)})}),{relationIdAttribute:n,results:b}}});return Promise.all(t)}};class QC{constructor(e,t){this.connection=e,this.queryRunner=t}load(e,t,n){const r=Array.isArray(t)?t:[t],s=Array.isArray(n)?n:n?[n]:void 0;return e.isManyToMany?this.loadForManyToMany(e,r,s):e.isManyToOne||e.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(e,r,s):this.loadForOneToManyAndOneToOneNotOwner(e,r,s)}async loadManyToManyRelationIdsAndGroup(e,t,n,r){const s=e.isManyToMany||e.isOneToMany,a=Array.isArray(t)?t:[t];if(!n&&(n=await this.connection.relationLoader.load(e,t,this.queryRunner,r),!n.length))return a.map(d=>({entity:d,related:s?[]:void 0}));const o=await this.load(e,t,n),l=Array.isArray(n)?n:[n];let c=[],u=[];return e.isManyToManyOwner?(c=e.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn),u=e.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn)):e.isManyToManyNotOwner?(c=e.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn),u=e.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn)):e.isManyToOne||e.isOneToOneOwner?(c=e.joinColumns.map(d=>d.referencedColumn),u=e.entityMetadata.primaryColumns):(e.isOneToMany||e.isOneToOneNotOwner)&&(c=e.inverseRelation.entityMetadata.primaryColumns,u=e.inverseRelation.joinColumns.map(d=>d.referencedColumn)),a.map(d=>{const h={entity:d,related:s?[]:void 0},f=o.filter(m=>u.every(p=>p.compareEntityValue(d,m[p.entityMetadata.name+"_"+p.propertyAliasName])));return f.length&&l.forEach(m=>{f.forEach(p=>{c.every(y=>y.compareEntityValue(m,p[Ue.buildAlias(this.connection.driver,void 0,y.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+y.propertyPath.replace(".","_"))]))&&(s?h.related.push(m):h.related=m)})}),h})}loadForManyToMany(e,t,n){const r=e.junctionEntityMetadata,s=r.name,a=e.isOwning?r.ownerColumns:r.inverseColumns,o=e.isOwning?r.inverseColumns:r.ownerColumns,l=this.connection.createQueryBuilder(this.queryRunner);a.forEach(h=>{const f=Ue.buildAlias(this.connection.driver,void 0,h.referencedColumn.entityMetadata.name+"_"+h.referencedColumn.propertyPath.replace(".","_"));l.addSelect(s+"."+h.propertyPath,f)}),o.forEach(h=>{const f=Ue.buildAlias(this.connection.driver,void 0,h.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+h.referencedColumn.propertyPath.replace(".","_"));l.addSelect(s+"."+h.propertyPath,f)});let c="";if(a.length===1){const h=t.map(m=>a[0].referencedColumn.getEntityValue(m));h.every(m=>typeof m=="number")?c="".concat(s,".").concat(a[0].propertyPath," IN (").concat(h.join(", "),")"):(l.setParameter("values1",h),c=s+"."+a[0].propertyPath+" IN (:...values1)")}else c="("+t.map((h,f)=>a.map(m=>{const p="entity1_"+f+"_"+m.propertyName;return l.setParameter(p,m.referencedColumn.getEntityValue(h)),s+"."+m.propertyPath+" = :"+p}).join(" AND ")).map(h=>"("+h+")").join(" OR ")+")";let u="";if(n)if(o.length===1){const h=n.map(m=>o[0].referencedColumn.getEntityValue(m));h.every(m=>typeof m=="number")?u="".concat(s,".").concat(o[0].propertyPath," IN (").concat(h.join(", "),")"):(l.setParameter("values2",h),u=s+"."+o[0].propertyPath+" IN (:...values2)")}else u="("+n.map((h,f)=>o.map(m=>{const p="entity2_"+f+"_"+m.propertyName;return l.setParameter(p,m.referencedColumn.getEntityValue(h)),s+"."+m.propertyPath+" = :"+p}).join(" AND ")).map(h=>"("+h+")").join(" OR ")+")";const d=[c,u].filter(h=>h.length>0).join(" AND ");return l.from(r.target,s).where(d).getRawMany()}loadForManyToOneAndOneToOneOwner(e,t,n){const r=e.entityMetadata.targetName,s=e.joinColumns.every(l=>!!e.entityMetadata.nonVirtualColumns.find(c=>c===l));if(n&&s){let l=[];if(t.forEach(c=>{let u={};e.entityMetadata.primaryColumns.forEach(d=>{const h=d.entityMetadata.name+"_"+d.propertyPath.replace(".","_");u[h]=d.getEntityValue(c)}),n.forEach(d=>{e.joinColumns.forEach(h=>{const f=h.getEntityValue(c),m=h.referencedColumn.getEntityValue(d);if(!(f===void 0||m===void 0)&&f===m){const p=h.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+h.referencedColumn.propertyPath.replace(".","_");u[p]=m}})}),Object.keys(u).length===e.entityMetadata.primaryColumns.length+e.joinColumns.length&&l.push(u)}),l.length===t.length)return Promise.resolve(l)}const a=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(l=>{const c=Ue.buildAlias(this.connection.driver,void 0,l.entityMetadata.name+"_"+l.propertyPath.replace(".","_"));a.addSelect(r+"."+l.propertyPath,c)}),e.joinColumns.forEach(l=>{const c=Ue.buildAlias(this.connection.driver,void 0,l.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+l.referencedColumn.propertyPath.replace(".","_"));a.addSelect(r+"."+l.propertyPath,c)});let o="";if(e.entityMetadata.primaryColumns.length===1){const l=t.map(u=>e.entityMetadata.primaryColumns[0].getEntityValue(u));l.every(u=>typeof u=="number")?o="".concat(r,".").concat(e.entityMetadata.primaryColumns[0].propertyPath," IN (").concat(l.join(", "),")"):(a.setParameter("values",l),o=r+"."+e.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else o=t.map((l,c)=>e.entityMetadata.primaryColumns.map((u,d)=>{const h="entity"+c+"_"+d;return a.setParameter(h,u.getEntityValue(l)),r+"."+u.propertyPath+" = :"+h}).join(" AND ")).map(l=>"("+l+")").join(" OR ");return a.from(e.entityMetadata.target,r).where(o).getRawMany()}loadForOneToManyAndOneToOneNotOwner(e,t,n){if(e=e.inverseRelation,e.entityMetadata.primaryColumns.length===e.joinColumns.length&&e.entityMetadata.primaryColumns.every(l=>e.joinColumns.indexOf(l)!==-1))return Promise.resolve(t.map(l=>{const c={};return e.joinColumns.forEach(function(u){const d=u.referencedColumn.getEntityValue(l),h=u.referencedColumn.entityMetadata.name+"_"+u.referencedColumn.propertyPath.replace(".","_"),f=u.entityMetadata.name+"_"+e.inverseRelation.propertyPath.replace(".","_")+"_"+u.propertyPath.replace(".","_");c[h]=d,c[f]=d}),c}));const r=e.entityMetadata.targetName,s=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(o=>{const l=Ue.buildAlias(this.connection.driver,void 0,o.entityMetadata.name+"_"+e.inverseRelation.propertyPath.replace(".","_")+"_"+o.propertyPath.replace(".","_"));s.addSelect(r+"."+o.propertyPath,l)}),e.joinColumns.forEach(o=>{const l=Ue.buildAlias(this.connection.driver,void 0,o.referencedColumn.entityMetadata.name+"_"+o.referencedColumn.propertyPath.replace(".","_"));s.addSelect(r+"."+o.propertyPath,l)});let a="";if(e.joinColumns.length===1){const o=t.map(c=>e.joinColumns[0].referencedColumn.getEntityValue(c));o.every(c=>typeof c=="number")?a="".concat(r,".").concat(e.joinColumns[0].propertyPath," IN (").concat(o.join(", "),")"):(s.setParameter("values",o),a=r+"."+e.joinColumns[0].propertyPath+" IN (:...values)")}else a=t.map((o,l)=>e.joinColumns.map((c,u)=>{const d="entity"+l+"_"+u;return s.setParameter(d,c.referencedColumn.getEntityValue(o)),r+"."+c.propertyPath+" = :"+d}).join(" AND ")).map(o=>"("+o+")").join(" OR ");return s.from(e.entityMetadata.target,r).where(a).getRawMany()}}class J4{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationIdAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationIdAttributes.push(n)})})}metadataToAttribute(e,t){return new By(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class X4{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationCountAttributes=n}async load(e){const t=(r,s,a)=>a.indexOf(r)===s,n=this.relationCountAttributes.map(async r=>{if(r.relation.isOneToMany){const s=r.relation,a=s.inverseRelation,o=a.joinColumns[0].referencedColumn.propertyName,l=s.inverseEntityMetadata.target,c=s.inverseEntityMetadata.tableName,u=r.alias||c,d=a.propertyName;let h=e.map(m=>m[r.parentAlias+"_"+o]).filter(m=>!!m);if(h=h.filter(t),h.length===0)return{relationCountAttribute:r,results:[]};const f=this.connection.createQueryBuilder(this.queryRunner);return f.select(u+"."+d,"parentId").addSelect("COUNT(*)","cnt").from(l,u).where(u+"."+d+" IN (:...ids)").addGroupBy(u+"."+d).setParameter("ids",h),r.queryBuilderFactory&&r.queryBuilderFactory(f),{relationCountAttribute:r,results:await f.getRawMany()}}else{let s,a,o,l;r.relation.isOwning?(s=r.relation.joinColumns[0].referencedColumn.databaseName,a=r.relation.inverseJoinColumns[0].referencedColumn.databaseName,o=r.relation.junctionEntityMetadata.columns[0],l=r.relation.junctionEntityMetadata.columns[1]):(s=r.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,a=r.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,o=r.relation.junctionEntityMetadata.columns[1],l=r.relation.junctionEntityMetadata.columns[0]);let c=e.map(w=>w[r.parentAlias+"_"+s]).filter(w=>!!w);if(c=c.filter(t),c.length===0)return{relationCountAttribute:r,results:[]};const u=r.junctionAlias,d=r.joinInverseSideMetadata.tableName,h=r.alias||d,f=r.relation.junctionEntityMetadata.tableName,m=u+"."+o.propertyName+" IN ("+c.map(w=>isNaN(w)?"'"+w+"'":w)+") AND "+u+"."+l.propertyName+" = "+h+"."+a,p=this.connection.createQueryBuilder(this.queryRunner);return p.select(u+"."+o.propertyName,"parentId").addSelect("COUNT("+p.escape(h)+"."+p.escape(a)+")","cnt").from(d,h).innerJoin(f,u,m).addGroupBy(u+"."+o.propertyName),r.queryBuilderFactory&&r.queryBuilderFactory(p),{relationCountAttribute:r,results:await p.getRawMany()}}});return Promise.all(n)}}class Z4{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationCountAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationCountAttributes.push(n)})})}metadataToAttribute(e,t){return new qy(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class Zw{constructor(e){ht.assign(this,e||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(e){this._metadata=e}get metadata(){if(!this._metadata)throw new te('Cannot get entity metadata for the given alias "'.concat(this.name,'"'));return this._metadata}}class Fy{constructor(e){var t;this.connection=e,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.cache=!1,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],e.options.relationLoadStrategy&&(this.relationLoadStrategy=e.options.relationLoadStrategy),this.timeTravel=((t=e.options)===null||t===void 0?void 0:t.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const e=this.mainAlias.metadata.orderBy||{};return Object.keys(e).reduce((t,n)=>(t[this.mainAlias.name+"."+n]=e[n],t),{})}return this.orderBys}setMainAlias(e){return this.mainAlias=e,e}createAlias(e){let t=e.name;!t&&e.tablePath&&(t=e.tablePath),!t&&typeof e.target=="function"&&(t=e.target.name),!t&&typeof e.target=="string"&&(t=e.target);const n=new Zw;return n.type=e.type,t&&(n.name=t),e.metadata&&(n.metadata=e.metadata),e.target&&!n.hasMetadata&&(n.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(n.tablePath=e.tablePath),e.subQuery&&(n.subQuery=e.subQuery),this.aliases.push(n),n}findAliasByName(e){const t=this.aliases.find(n=>n.name===e);if(!t)throw new te('"'.concat(e,'" alias was not found. Maybe you forgot to join it?'));return t}findColumnByAliasExpression(e){const[t,n]=e.split(".");return this.findAliasByName(t).metadata.findColumnWithPropertyName(n)}get relationMetadata(){if(!this.mainAlias)throw new te("Entity to work with is not specified!");const e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new te("Relation ".concat(this.relationPropertyPath," was not found in entity ").concat(this.mainAlias.name));return e}clone(){const e=new Fy(this.connection);return e.queryType=this.queryType,e.selects=this.selects.map(t=>t),e.maxExecutionTime=this.maxExecutionTime,e.selectDistinct=this.selectDistinct,e.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(t=>e.aliases.push(new Zw(t))),e.relationLoadStrategy=this.relationLoadStrategy,e.mainAlias=this.mainAlias,e.valuesSet=this.valuesSet,e.returning=this.returning,e.onConflict=this.onConflict,e.onIgnore=this.onIgnore,e.onUpdate=this.onUpdate,e.joinAttributes=this.joinAttributes.map(t=>new HC(this.connection,this,t)),e.relationIdAttributes=this.relationIdAttributes.map(t=>new By(this,t)),e.relationCountAttributes=this.relationCountAttributes.map(t=>new qy(this,t)),e.wheres=this.wheres.map(t=>({...t})),e.havings=this.havings.map(t=>({...t})),e.orderBys=Object.assign({},this.orderBys),e.groupBys=this.groupBys.map(t=>t),e.limit=this.limit,e.offset=this.offset,e.skip=this.skip,e.take=this.take,e.lockMode=this.lockMode,e.onLocked=this.onLocked,e.lockVersion=this.lockVersion,e.lockTables=this.lockTables,e.withDeleted=this.withDeleted,e.parameters=Object.assign({},this.parameters),e.disableEscaping=this.disableEscaping,e.enableRelationIdValues=this.enableRelationIdValues,e.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,e.subQuery=this.subQuery,e.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,e.cache=this.cache,e.cacheId=this.cacheId,e.cacheDuration=this.cacheDuration,e.relationPropertyPath=this.relationPropertyPath,e.of=this.of,e.insertColumns=this.insertColumns,e.whereEntities=this.whereEntities,e.updateEntity=this.updateEntity,e.callListeners=this.callListeners,e.useTransaction=this.useTransaction,e.timeTravel=this.timeTravel,e.nativeParameters=Object.assign({},this.nativeParameters),e.comment=this.comment,e.commonTableExpressions=this.commonTableExpressions.map(t=>({alias:t.alias,queryBuilder:typeof t.queryBuilder=="string"?t.queryBuilder:t.queryBuilder.clone(),options:t.options})),e}}class Hc{constructor(e,t,n=!0,r=!1,s,a){this["@instanceof"]=Symbol.for("FindOperator"),this._type=e,this._value=t,this._useParameter=n,this._multipleParameters=r,this._getSql=s,this._objectLiteralParameters=a}get useParameter(){return ue.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return ue.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return ue.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return ue.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(ue.isFindOperator(this._value))return this._value}get getSql(){return ue.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(e){this._value instanceof Hc?this._value.transformValue(e):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(t=>e&&yn.transformTo(e,t)):yn.transformTo(e,this._value)}}function ej(i){return new Hc("in",i,!0,!0)}const tj=/[.*+\-?^${}()|[\]\\]/g,nj=i=>i.replace(tj,"\\$&");class ij{constructor(e,t){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,ue.isDataSource(e)?(this.connection=e,this.queryRunner=t,this.expressionMap=new Fy(this.connection)):(this.connection=e.connection,this.queryRunner=e.queryRunner,this.expressionMap=e.expressionMap.clone())}get alias(){if(!this.expressionMap.mainAlias)throw new te("Main alias is not set");return this.expressionMap.mainAlias.name}select(e,t){this.expressionMap.queryType="select",Array.isArray(e)?this.expressionMap.selects=e.map(r=>({selection:r})):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);const n=require("./SelectQueryBuilder").SelectQueryBuilder;return ue.isSelectQueryBuilder(this)?this:new n(this)}insert(){this.expressionMap.queryType="insert";const e=require("./InsertQueryBuilder").InsertQueryBuilder;return ue.isInsertQueryBuilder(this)?this:new e(this)}update(e,t){const n=t||e;if(e=ue.isEntitySchema(e)?e.options.name:e,typeof e=="function"||typeof e=="string"){const s=this.createFromAlias(e);this.expressionMap.setMainAlias(s)}this.expressionMap.queryType="update",this.expressionMap.valuesSet=n;const r=require("./UpdateQueryBuilder").UpdateQueryBuilder;return ue.isUpdateQueryBuilder(this)?this:new r(this)}delete(){this.expressionMap.queryType="delete";const e=require("./DeleteQueryBuilder").DeleteQueryBuilder;return ue.isDeleteQueryBuilder(this)?this:new e(this)}softDelete(){this.expressionMap.queryType="soft-delete";const e=require("./SoftDeleteQueryBuilder").SoftDeleteQueryBuilder;return ue.isSoftDeleteQueryBuilder(this)?this:new e(this)}restore(){this.expressionMap.queryType="restore";const e=require("./SoftDeleteQueryBuilder").SoftDeleteQueryBuilder;return ue.isSoftDeleteQueryBuilder(this)?this:new e(this)}relation(e,t){const n=arguments.length===2?e:void 0,r=arguments.length===2?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=r,n){const a=this.createFromAlias(n);this.expressionMap.setMainAlias(a)}const s=require("./RelationQueryBuilder").RelationQueryBuilder;return ue.isRelationQueryBuilder(this)?this:new s(this)}hasRelation(e,t){const n=this.connection.getMetadata(e);return(Array.isArray(t)?t:[t]).every(s=>!!n.findRelationWithPropertyPath(s))}hasParameter(e){var t;return((t=this.parentQueryBuilder)===null||t===void 0?void 0:t.hasParameter(e))||e in this.expressionMap.parameters}setParameter(e,t){if(typeof t=="function")throw new te("Function parameter isn't supported in the parameters. Please check \"".concat(e,'" parameter.'));if(!e.match(/^([A-Za-z0-9_.]+)$/))throw new te("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(e,t),this.expressionMap.parameters[e]=t,this}setParameters(e){for(const[t,n]of Object.entries(e))this.setParameter(t,n);return this}createParameter(e){let t;do t="orm_param_".concat(this.parameterIndex++);while(this.hasParameter(t));return this.setParameter(t,e),":".concat(t)}setNativeParameters(e){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(e),Object.keys(e).forEach(t=>{this.expressionMap.nativeParameters[t]=e[t]}),this}getParameters(){const e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){const n=t.childEntityMetadatas.filter(r=>r.discriminatorColumn).map(r=>r.discriminatorValue);n.push(t.discriminatorValue),e.discriminatorColumnValues=n}}return e}printSql(){const[e,t]=this.getQueryAndParameters();return this.connection.logger.logQuery(e,t),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const e=this.getQuery(),t=this.getParameters();return this.connection.driver.escapeQueryWithParameters(e,t,this.expressionMap.nativeParameters)}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();try{return await n.query(e,t)}finally{n!==this.queryRunner&&await n.release()}}createQueryBuilder(){return new this.constructor(this.connection,this.queryRunner)}clone(){return new this.constructor(this)}comment(e){return this.expressionMap.comment=e,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e}setQueryRunner(e){return this.queryRunner=e,this}callListeners(e){return this.expressionMap.callListeners=e,this}useTransaction(e){return this.expressionMap.useTransaction=e,this}addCommonTableExpression(e,t,n){return this.expressionMap.commonTableExpressions.push({queryBuilder:e,alias:t,options:n||{}}),this}getTableName(e){return e.split(".").map(t=>t===""?t:this.escape(t)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new te('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(e,t){if(this.connection.hasMetadata(e)){const n=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:n.tablePath})}else{if(typeof e=="string"){const s=e.substr(0,1)==="("&&e.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:t,tablePath:s?void 0:e,subQuery:s?e:void 0})}const n=e(this.subQuery());this.setParameters(n.getParameters());const r=n.getQuery();return this.expressionMap.createAlias({type:"from",name:t,subQuery:r})}}replacePropertyNames(e){return e}replacePropertyNamesForTheWholeQuery(e){const t={};for(const s of this.expressionMap.aliases){if(!s.hasMetadata)continue;const a=this.expressionMap.aliasNamePrefixingEnabled&&s.name?"".concat(s.name,"."):"";t[a]||(t[a]={});for(const o of s.metadata.relations)o.joinColumns.length>0&&(t[a][o.propertyPath]=o.joinColumns[0].databaseName);for(const o of s.metadata.relations){const l=[...o.joinColumns,...o.inverseJoinColumns];for(const c of l){const u="".concat(o.propertyPath,".").concat(c.referencedColumn.propertyPath);t[a][u]=c.databaseName}}for(const o of s.metadata.columns)t[a][o.databaseName]=o.databaseName;for(const o of s.metadata.columns)t[a][o.propertyName]=o.databaseName;for(const o of s.metadata.columns)t[a][o.propertyPath]=o.databaseName}const n=Object.keys(t),r=n.map(s=>nj(s)).join("|");return n.length>0&&(e=e.replace(new RegExp("([ =(]|^.{0})"+"".concat(r?"("+r+")":"","([^ =(),]+)")+"(?=[ =),]|.{0}$)","gm"),(...s)=>{let a,o,l;if(r){if(a=s[0],o=s[1],l=s[3],t[s[2]][l])return"".concat(o).concat(this.escape(s[2].substring(0,s[2].length-1)),".").concat(this.escape(t[s[2]][l]))}else if(a=s[0],o=s[1],l=s[2],t[""][l])return"".concat(o).concat(this.escape(t[""][l]));return a})),e}createComment(){return this.expressionMap.comment?"/* ".concat(this.expressionMap.comment.replace("*/","")," */ "):""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?" AS OF SYSTEM TIME ".concat(this.expressionMap.timeTravel):""}createWhereExpression(){const e=[],t=this.createWhereClausesExpression(this.expressionMap.wheres);if(t.length>0&&t!=="1=1"&&e.push(this.replacePropertyNames(t)),this.expressionMap.mainAlias.hasMetadata){const r=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&r.deleteDateColumn){const s=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+r.deleteDateColumn.propertyName:r.deleteDateColumn.propertyName,a="".concat(this.replacePropertyNames(s)," IS NULL");e.push(a)}if(r.discriminatorColumn&&r.parentEntityMetadata){const s=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+r.discriminatorColumn.databaseName:r.discriminatorColumn.databaseName,a="".concat(this.replacePropertyNames(s)," IN (:...discriminatorColumnValues)");e.push(a)}}if(this.expressionMap.extraAppendedAndWhereCondition){const r=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);e.push(r)}let n="";return n+=this.createTimeTravelQuery(),e.length?e.length===1?n+=" WHERE ".concat(e[0]):n+=" WHERE ( ".concat(e.join(" ) AND ( ")," )"):n+="",n}createReturningExpression(e){const t=this.getReturningColumns(),n=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&n.isReturningSqlSupported(e)&&t.push(...this.expressionMap.extraReturningColumns.filter(r=>t.indexOf(r)===-1)),t.length){let r=t.map(s=>{const a=this.escape(s.databaseName);return n.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+a:this.escape(this.getMainTableName())+"."+a:a}).join(", ");return n.options.type==="oracle"&&(r+=" INTO "+t.map(s=>this.createParameter({type:n.columnTypeToNativeParameter(s.type),dir:n.oracle.BIND_OUT})).join(", ")),n.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(r+=" INTO @OutputTable"),r}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const e=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(t=>{this.expressionMap.mainAlias.hasMetadata&&e.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(t))}),e}createWhereClausesExpression(e){return e.map((t,n)=>{const r=this.createWhereConditionExpression(t.condition);switch(t.type){case"and":return(n>0?"AND ":"")+r;case"or":return(n>0?"OR ":"")+r}return r}).join(" ").trim()}createWhereConditionExpression(e,t=!1){if(typeof e=="string")return e;if(Array.isArray(e))return e.length===0?"1=1":e.length===1&&!t?this.createWhereClausesExpression(e):"("+this.createWhereClausesExpression(e)+")";const{driver:n}=this.connection;switch(e.operator){case"lessThan":return"".concat(e.parameters[0]," < ").concat(e.parameters[1]);case"lessThanOrEqual":return"".concat(e.parameters[0]," <= ").concat(e.parameters[1]);case"arrayContains":return"".concat(e.parameters[0]," @> ").concat(e.parameters[1]);case"jsonContains":return"".concat(e.parameters[0]," ::jsonb @> ").concat(e.parameters[1]);case"arrayContainedBy":return"".concat(e.parameters[0]," <@ ").concat(e.parameters[1]);case"arrayOverlap":return"".concat(e.parameters[0]," && ").concat(e.parameters[1]);case"moreThan":return"".concat(e.parameters[0]," > ").concat(e.parameters[1]);case"moreThanOrEqual":return"".concat(e.parameters[0]," >= ").concat(e.parameters[1]);case"notEqual":return"".concat(e.parameters[0]," != ").concat(e.parameters[1]);case"equal":return"".concat(e.parameters[0]," = ").concat(e.parameters[1]);case"ilike":return n.options.type==="postgres"||n.options.type==="cockroachdb"?"".concat(e.parameters[0]," ILIKE ").concat(e.parameters[1]):"UPPER(".concat(e.parameters[0],") LIKE UPPER(").concat(e.parameters[1],")");case"like":return"".concat(e.parameters[0]," LIKE ").concat(e.parameters[1]);case"between":return"".concat(e.parameters[0]," BETWEEN ").concat(e.parameters[1]," AND ").concat(e.parameters[2]);case"in":return e.parameters.length<=1?"0=1":"".concat(e.parameters[0]," IN (").concat(e.parameters.slice(1).join(", "),")");case"any":return n.options.type==="cockroachdb"?"".concat(e.parameters[0],"::STRING = ANY(").concat(e.parameters[1],"::STRING[])"):"".concat(e.parameters[0]," = ANY(").concat(e.parameters[1],")");case"isNull":return"".concat(e.parameters[0]," IS NULL");case"not":return"NOT(".concat(this.createWhereConditionExpression(e.condition),")");case"brackets":return"".concat(this.createWhereConditionExpression(e.condition,!0));case"and":return e.parameters.join(" AND ")}throw new TypeError("Unsupported FindOperator ".concat(Hc.constructor.name))}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const e=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{const r=typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.getQuery();if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new te("Nested CTEs aren't supported (CTE: ".concat(n.alias,")"));if(!this.connection.driver.cteCapabilities.writable&&!ue.isSelectQueryBuilder(n.queryBuilder))throw new te("Only select queries are supported in CTEs in ".concat(this.connection.options.type," (CTE: ").concat(n.alias,")"));this.setParameters(n.queryBuilder.getParameters())}let s=this.escape(n.alias);if(n.options.columnNames){const l=n.options.columnNames.map(c=>this.escape(c));if(ue.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new te("cte.options.columnNames length (".concat(n.options.columnNames.length,") doesn't match subquery select list length ").concat(n.queryBuilder.expressionMap.selects.length," (CTE: ").concat(n.alias,")"));s+="(".concat(l.join(", "),")")}const a=n.options.recursive&&e?"RECURSIVE":"";let o="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(o=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,s,"AS",o,"(".concat(r,")")].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(e){const t=this.expressionMap.mainAlias.metadata,n=(Array.isArray(e)?e:[e]).map(r=>t.ensureEntityIdMap(r));if(!t.hasMultiplePrimaryKeys){const r=t.primaryColumns[0];if(!r.transformer&&!r.relationMetadata&&!r.embeddedMetadata)return{[r.propertyName]:ej(n.map(s=>r.getEntityValue(s,!1)))}}return new Kd(r=>{for(const s of n)r.orWhere(new Kd(a=>a.where(s)))})}getExistsCondition(e){const t=e.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return["EXISTS (".concat(t.getQuery(),")"),t.getParameters()]}findColumnsForPropertyPath(e){let t=this.expressionMap.mainAlias;const n=[],r=e.split(".");for(;r.length>1;){const o=r[0];if(!(t!=null&&t.hasMetadata))break;if(t.metadata.hasEmbeddedWithPropertyPath(o)){r.unshift("".concat(r.shift(),".").concat(r.shift()));continue}if(t.metadata.hasRelationWithPropertyPath(o)){const l=this.expressionMap.joinAttributes.find(c=>c.relationPropertyPath===o);if(!(l!=null&&l.alias)){const c=n.length>0?"".concat(n.join("."),".").concat(o):o;throw new Error("Cannot find alias for relation at ".concat(c))}t=l.alias,n.push(...o.split(".")),r.shift();continue}break}if(!t)throw new Error("Cannot find alias for property ".concat(e));const s=r.join("."),a=t.metadata.findColumnsWithPropertyPath(s);if(!a.length)throw new Tr(e,t.metadata);return[t,n,a]}createPropertyPath(e,t,n=""){const r=[];for(const s of Object.keys(t)){const a=n?"".concat(n,".").concat(s):s;if(t[s]===null||typeof t[s]!="object"||ue.isFindOperator(t[s])){r.push(a);continue}if(e.hasEmbeddedWithPropertyPath(a)){const o=this.createPropertyPath(e,t[s],a);r.push(...o);continue}if(e.hasRelationWithPropertyPath(a)){const o=e.findRelationWithPropertyPath(a);if(o.relationType==="one-to-one"||o.relationType==="many-to-one"){const d=o.joinColumns.map(f=>f.referencedColumn).filter(f=>!!f);if(d.length>0&&d.every(f=>f.getEntityValue(t[s],!1))){r.push(a);continue}}if(o.relationType==="one-to-many"||o.relationType==="many-to-many")throw new Error("Cannot query across ".concat(o.relationType," for property ").concat(a));const l=o.inverseEntityMetadata.primaryColumns;if(l.length>0&&l.every(d=>d.getEntityValue(t[s],!1))){const d=l.map(h=>"".concat(a,".").concat(h.propertyPath));r.push(...d);continue}const u=this.createPropertyPath(o.inverseEntityMetadata,t[s]).map(d=>"".concat(a,".").concat(d));r.push(...u);continue}r.push(a)}return r}*getPredicates(e){if(this.expressionMap.mainAlias.hasMetadata){const t=this.createPropertyPath(this.expressionMap.mainAlias.metadata,e);for(const n of t){const[r,s,a]=this.findColumnsForPropertyPath(n);for(const o of a){let l=e;for(const d of s){if(!l||!(d in l)){l={};break}l=l[d]}const c=this.expressionMap.aliasNamePrefixingEnabled?"".concat(r.name,".").concat(o.propertyPath):o.propertyPath,u=o.getEntityValue(l,!0);yield[c,u]}}}else for(const t of Object.keys(e)){const n=e[t];yield[this.expressionMap.aliasNamePrefixingEnabled?"".concat(this.alias,".").concat(t):t,n]}}getWherePredicateCondition(e,t){if(ue.isFindOperator(t)){let n=[];if(t.useParameter)if(t.objectLiteralParameters)this.setParameters(t.objectLiteralParameters);else if(t.multipleParameters)for(const r of t.value)n.push(this.createParameter(r));else n.push(this.createParameter(t.value));if(t.type==="raw")return t.getSql?t.getSql(e):{operator:"equal",parameters:[e,t.value]};if(t.type==="not")return t.child?{operator:t.type,condition:this.getWherePredicateCondition(e,t.child)}:{operator:"notEqual",parameters:[e,...n]};if(t.type==="and"){const r=t.value;return{operator:t.type,parameters:r.map(s=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,s)))}}else return{operator:t.type,parameters:[e,...n]}}else return{operator:"equal",parameters:[e,this.createParameter(t)]}}getWhereCondition(e){if(typeof e=="string")return e;if(ue.isBrackets(e)){const r=this.createQueryBuilder();return r.parentQueryBuilder=this,r.expressionMap.mainAlias=this.expressionMap.mainAlias,r.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,r.expressionMap.parameters=this.expressionMap.parameters,r.expressionMap.nativeParameters=this.expressionMap.nativeParameters,r.expressionMap.wheres=[],e.whereFactory(r),{operator:ue.isNotBrackets(e)?"not":"brackets",condition:r.expressionMap.wheres}}if(typeof e=="function")return e(this);const t=Array.isArray(e)?e:[e],n=[];for(const r of t){const s=[];for(const[a,o]of this.getPredicates(r))s.push({type:"and",condition:this.getWherePredicateCondition(a,o)});n.push({type:"or",condition:s})}return n.length===1?n[0].condition:n}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}class Jd extends ij{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createSelectExpression(),e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),this.replacePropertyNamesForTheWholeQuery(e)}setFindOptions(e){return this.findOptions=e,this.applyFindOptions(),this}subQuery(){const e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.parentQueryBuilder=this,e}select(e,t){if(this.expressionMap.queryType="select",Array.isArray(e))this.expressionMap.selects=e.map(n=>({selection:n}));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this}addSelect(e,t){if(!e)return this;if(Array.isArray(e))this.expressionMap.selects=this.expressionMap.selects.concat(e.map(n=>({selection:n})));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this}maxExecutionTime(e){return this.expressionMap.maxExecutionTime=e,this}distinct(e=!0){return this.expressionMap.selectDistinct=e,this}distinctOn(e){return this.expressionMap.selectDistinctOn=e,this}fromDummy(){var e;return this.from((e=this.connection.driver.dummyTableName)!==null&&e!==void 0?e:"(SELECT 1 AS dummy_column)","dummy_table")}from(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}addFrom(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(n),this}innerJoin(e,t,n,r){return this.join("INNER",e,t,n,r),this}leftJoin(e,t,n,r){return this.join("LEFT",e,t,n,r),this}innerJoinAndSelect(e,t,n,r){return this.addSelect(t),this.innerJoin(e,t,n,r),this}leftJoinAndSelect(e,t,n,r){return this.addSelect(t),this.leftJoin(e,t,n,r),this}innerJoinAndMapMany(e,t,n,r,s){return this.addSelect(n),this.join("INNER",t,n,r,s,e,!0),this}innerJoinAndMapOne(e,t,n,r,s,a){return this.addSelect(n),this.join("INNER",t,n,r,s,e,!1,a),this}leftJoinAndMapMany(e,t,n,r,s){return this.addSelect(n),this.join("LEFT",t,n,r,s,e,!0),this}leftJoinAndMapOne(e,t,n,r,s,a){return this.addSelect(n),this.join("LEFT",t,n,r,s,e,!1,a),this}loadRelationIdAndMap(e,t,n,r){const s=new By(this.expressionMap);return s.mapToProperty=e,s.relationName=t,typeof n=="string"&&(s.alias=n),typeof n=="object"&&n.disableMixedMap&&(s.disableMixedMap=!0),s.queryBuilderFactory=r,this.expressionMap.relationIdAttributes.push(s),s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(e,t,n,r){const s=new qy(this.expressionMap);return s.mapToProperty=e,s.relationName=t,s.alias=n,s.queryBuilderFactory=r,this.expressionMap.relationCountAttributes.push(s),this.expressionMap.createAlias({type:"other",name:s.junctionAlias}),s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata}),this}loadAllRelationIds(e){return this.expressionMap.mainAlias.metadata.relations.forEach(t=>{e!==void 0&&e.relations!==void 0&&e.relations.indexOf(t.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+t.propertyPath,this.expressionMap.mainAlias.name+"."+t.propertyPath,e)}),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereExists(e){return this.where(...this.getExistsCondition(e))}andWhereExists(e){return this.andWhere(...this.getExistsCondition(e))}orWhereExists(e){return this.orWhere(...this.getExistsCondition(e))}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}having(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this}andHaving(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this}orHaving(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this}groupBy(e){return e?this.expressionMap.groupBys=[e]:this.expressionMap.groupBys=[],this}addGroupBy(e){return this.expressionMap.groupBys.push(e),this}timeTravelQuery(e){return this.connection.driver.options.type==="cockroachdb"&&(e===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=e),this}orderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new te('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new te('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new te('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new te('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){if(this.expressionMap.limit=this.normalizeNumber(e),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new te('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(e){if(this.expressionMap.offset=this.normalizeNumber(e),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new te('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(e){if(this.expressionMap.take=this.normalizeNumber(e),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new te('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(e){if(this.expressionMap.skip=this.normalizeNumber(e),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new te('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(e){return this.expressionMap.useIndex=e,this}setLock(e,t,n){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this.expressionMap.lockTables=n,this}setOnLocked(e){return this.expressionMap.onLocked=e,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new Nl;this.expressionMap.queryEntity=!1;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0);const n=await this.loadRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(r){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getRawAndEntities(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(r){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const r=n.updateDateColumn.getEntityValue(t);if(r.getTime()!==this.expressionMap.lockVersion.getTime())throw new Lw(n.name,this.expressionMap.lockVersion,r)}else{const r=n.versionColumn.getEntityValue(t);if(r!==this.expressionMap.lockVersion)throw new Lw(n.name,this.expressionMap.lockVersion,r)}}return t===void 0?null:t}async getOneOrFail(){const e=await this.getOne();if(!e)throw new Gm(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return e}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new Nl;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new Nl;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeCountQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(r){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new Nl;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeExistsQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(r){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new Nl;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);this.expressionMap.queryEntity=!1;const r=this.expressionMap.cacheId;this.expressionMap.cacheId=r&&"".concat(r,"-count");const s=await this.executeCountQuery(e),a=[n.entities,s];return t&&await e.commitTransaction(),a}catch(n){if(t)try{await e.rollbackTransaction()}catch(r){}throw n}finally{e!==this.queryRunner&&await e.release()}}async stream(){this.expressionMap.queryEntity=!1;const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let r=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),r=!0);const s=()=>{if(n!==this.queryRunner)return n.release()},a=n.stream(e,t,s,s);return r&&await n.commitTransaction(),a}catch(s){if(r)try{await n.rollbackTransaction()}catch(a){}throw s}}cache(e,t){return typeof e=="boolean"?this.expressionMap.cache=e:typeof e=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):(typeof e=="string"||typeof e=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this}setOption(e){return this.expressionMap.options.push(e),this}join(e,t,n,r,s,a,o,l){s&&this.setParameters(s);const c=new HC(this.connection,this.expressionMap);c.direction=e,c.mapAsEntity=l,c.mapToProperty=a,c.isMappingMany=o,c.entityOrProperty=t,c.condition=r,this.expressionMap.joinAttributes.push(c);const u=c.metadata;if(u){if(u.deleteDateColumn&&!this.expressionMap.withDeleted){const d="".concat(n,".").concat(u.deleteDateColumn.propertyName," IS NULL");c.condition=c.condition?" ".concat(c.condition," AND ").concat(d):"".concat(d)}c.alias=this.expressionMap.createAlias({type:"join",name:n,metadata:u}),c.relation&&c.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:c.junctionAlias,metadata:c.relation.junctionEntityMetadata})}else{let d="";if(typeof t=="function"){const f=t(this.subQuery());this.setParameters(f.getParameters()),d=f.getQuery()}else d=t;const h=typeof t=="function"||t.substr(0,1)==="("&&t.substr(-1)===")";c.alias=this.expressionMap.createAlias({type:"join",name:n,tablePath:h===!1?t:void 0,subQuery:h===!0?d:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new te("Cannot build query because main alias is not set (call qb#from method)");const e=[],t=[];if(this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;e.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,o)),t.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,o))}this.expressionMap.joinAttributes.forEach(o=>{if(o.metadata)e.push(...this.buildEscapedEntityColumnSelects(o.alias.name,o.metadata)),t.push(...this.findEntityColumnSelects(o.alias.name,o.metadata));else if(this.expressionMap.selects.some(c=>c.selection===o.alias.name)){e.push({selection:this.escape(o.alias.name)+".*"});const c=this.expressionMap.selects.find(u=>u.selection===o.alias.name);t.push(c)}}),this.expressionMap.selects.filter(o=>t.indexOf(o)===-1).forEach(o=>e.push({selection:this.replacePropertyNames(o.selection),aliasName:o.aliasName})),e.length===0&&e.push({selection:"*"});let n="";this.expressionMap.useIndex&&Ue.isMySQLFamily(this.connection.driver)&&(n=" USE INDEX (".concat(this.expressionMap.useIndex,")"));const r=this.expressionMap.aliases.filter(o=>o.type==="from"&&(o.tablePath||o.subQuery)).map(o=>o.subQuery?o.subQuery+" "+this.escape(o.name):this.getTableName(o.tablePath)+" "+this.escape(o.name)),s=this.createSelectDistinctExpression(),a=e.map(o=>o.selection+(o.aliasName?" AS "+this.escape(o.aliasName):"")).join(", ");return s+a+" FROM "+r.join(", ")+this.createTableLockExpression()+n}createSelectDistinctExpression(){const{selectDistinct:e,selectDistinctOn:t,maxExecutionTime:n}=this.expressionMap,{driver:r}=this.connection;let s="SELECT ";if(n>0&&Ue.isMySQLFamily(r)&&(s+="/*+ MAX_EXECUTION_TIME(".concat(this.expressionMap.maxExecutionTime,") */ ")),Ue.isPostgresFamily(r)&&t.length>0){const a=t.map(o=>this.replacePropertyNames(o)).join(", ");s="SELECT DISTINCT ON (".concat(a,") ")}else e&&(s="SELECT DISTINCT ");return s}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,r=t.tablePath,s=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const o=t.parentAlias;if(!o||!n){const l=t.alias.subQuery?t.alias.subQuery:this.getTableName(r);return" "+t.direction+" JOIN "+l+" "+this.escape(s)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const l=n.joinColumns.map(c=>s+"."+c.referencedColumn.propertyPath+"="+o+"."+n.propertyPath+"."+c.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l+a)}else if(n.isOneToMany||n.isOneToOneNotOwner){const l=n.inverseRelation.joinColumns.map(c=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+s+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),s+"."+n.inverseRelation.propertyPath+"."+c.referencedColumn.propertyPath+"="+o+"."+c.referencedColumn.propertyPath)).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l+a)}else{const l=n.junctionEntityMetadata.tablePath,c=t.junctionAlias;let u="",d="";return n.isOwning?(u=n.joinColumns.map(h=>c+"."+h.propertyPath+"="+o+"."+h.referencedColumn.propertyPath).join(" AND "),d=n.inverseJoinColumns.map(h=>s+"."+h.referencedColumn.propertyPath+"="+c+"."+h.propertyPath).join(" AND ")):(u=n.inverseRelation.inverseJoinColumns.map(h=>c+"."+h.propertyPath+"="+o+"."+h.referencedColumn.propertyPath).join(" AND "),d=n.inverseRelation.joinColumns.map(h=>s+"."+h.referencedColumn.propertyPath+"="+c+"."+h.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(l)+" "+this.escape(c)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(u)+" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(d+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const e=this.expressionMap.allOrderBys;return Object.keys(e).length===0?"":" ORDER BY "+Object.keys(e).map(t=>{const n=typeof e[t]=="string"?e[t]:e[t].order+" "+e[t].nulls,r=this.expressionMap.selects.find(s=>s.selection===t);if(r&&!r.aliasName&&t.indexOf(".")!==-1){const s=t.split("."),a=s[0],o=s.slice(1).join("."),l=this.expressionMap.aliases.find(c=>c.name===a);if(l){const c=l.metadata.findColumnWithPropertyPath(o);if(c){const u=Ue.buildAlias(this.connection.driver,void 0,a,c.databaseName);return this.escape(u)+" "+n}}}return this.replacePropertyNames(t)+" "+n}).join(", ")}createLimitOffsetExpression(){let e=this.expressionMap.offset,t=this.expressionMap.limit;if(!e&&!t&&this.expressionMap.joinAttributes.length===0&&(e=this.expressionMap.skip,t=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let n="";if((t||e)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(n=" ORDER BY (SELECT NULL)"),t&&e)return n+" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return n+" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(e)return n+" OFFSET "+e+" ROWS"}else if(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)throw new AF}else if(Ue.isSQLiteFamily(this.connection.driver)){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" LIMIT -1 OFFSET "+e}else if(this.connection.driver.options.type==="oracle"){if(t&&e)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return" FETCH NEXT "+t+" ROWS ONLY";if(e)return" OFFSET "+e+" ROWS"}else{if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" OFFSET "+e}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const e=this.connection.driver;let t="";if(this.expressionMap.lockTables){if(!(Ue.isPostgresFamily(e)||e.options.type==="cockroachdb"))throw new te("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new te("lockTables cannot be an empty array");t=" OF "+this.expressionMap.lockTables.join(", ")}let n="";switch(this.expressionMap.onLocked==="nowait"?n=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(n=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(e.options.type==="mysql"||e.options.type==="aurora-mysql")return Ue.isReleaseVersionOrGreater(e,"8.0.0")?" FOR SHARE"+t+n:" LOCK IN SHARE MODE";if(e.options.type==="mariadb")return" LOCK IN SHARE MODE";if(Ue.isPostgresFamily(e))return" FOR SHARE"+t+n;if(e.options.type==="oracle")return" FOR UPDATE";if(e.options.type==="mssql")return"";throw new Za;case"pessimistic_write":if(Ue.isMySQLFamily(e)||e.options.type==="aurora-mysql"||e.options.type==="oracle")return" FOR UPDATE"+n;if(Ue.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+n;if(e.options.type==="mssql")return"";throw new Za;case"pessimistic_partial_write":if(Ue.isPostgresFamily(e))return" FOR UPDATE"+t+" SKIP LOCKED";if(Ue.isMySQLFamily(e))return" FOR UPDATE SKIP LOCKED";throw new Za;case"pessimistic_write_or_fail":if(Ue.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+" NOWAIT";if(Ue.isMySQLFamily(e))return" FOR UPDATE NOWAIT";throw new Za;case"for_no_key_update":if(Ue.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+t+n;throw new Za;case"for_key_share":if(Ue.isPostgresFamily(e))return" FOR KEY SHARE"+t+n;throw new Za;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const e=this.expressionMap.havings.map((t,n)=>{switch(t.type){case"and":return(n>0?"AND ":"")+this.replacePropertyNames(t.condition);case"or":return(n>0?"OR ":"")+this.replacePropertyNames(t.condition);default:return this.replacePropertyNames(t.condition)}}).join(" ");return e.length?" HAVING "+e:""}buildEscapedEntityColumnSelects(e,t){const n=this.expressionMap.selects.some(c=>c.selection===e),r=[];if(n&&r.push(...t.columns.filter(c=>c.isSelect===!0)),r.push(...t.columns.filter(c=>this.expressionMap.selects.some(u=>u.selection===e+"."+c.propertyPath))),r.length===0)return[];const s=this.expressionMap.queryEntity?t.primaryColumns.filter(c=>r.indexOf(c)===-1):[],a=[...r,...s],o=[],l=this.escape(e);return a.forEach(c=>{let u=l+"."+this.escape(c.databaseName);if(c.isVirtualProperty&&c.query&&(u="(".concat(c.query(l),")")),this.connection.driver.spatialTypes.indexOf(c.type)!==-1){if(Ue.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"){const f=this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText";u="".concat(f,"(").concat(u,")")}Ue.isPostgresFamily(this.connection.driver)&&(c.precision?u="ST_AsGeoJSON(".concat(u,", ").concat(c.precision,")::json"):u="ST_AsGeoJSON(".concat(u,")::json")),this.connection.driver.options.type==="mssql"&&(u="".concat(u,".ToString()"))}const d=this.expressionMap.selects.filter(h=>h.selection===e+"."+c.propertyPath);d.length?d.forEach(h=>{o.push({selection:u,aliasName:h.aliasName?h.aliasName:Ue.buildAlias(this.connection.driver,void 0,e,c.databaseName),virtual:h.virtual})}):o.push({selection:u,aliasName:Ue.buildAlias(this.connection.driver,void 0,e,c.databaseName),virtual:n})}),o}findEntityColumnSelects(e,t){const n=this.expressionMap.selects.find(r=>r.selection===e);return n?[n]:this.expressionMap.selects.filter(r=>t.columns.some(s=>r.selection===e+"."+s.propertyPath))}computeCountExpression(){const e=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,r=this.escape(e);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||Ue.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(s=>"".concat(r,".").concat(this.escape(s.databaseName))).join(", ")+"))";if(Ue.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(s=>"".concat(r,".").concat(this.escape(s.databaseName))).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const s=n.map(a=>"".concat(r,".").concat(this.escape(a.databaseName))).join(", '|;|', ");return n.length===1?"COUNT(DISTINCT(".concat(s,"))"):"COUNT(DISTINCT(CONCAT(".concat(s,")))")}if(this.connection.driver.options.type==="spanner"){if(n.length===1)return"COUNT(DISTINCT(".concat(r,".").concat(this.escape(n[0].databaseName),"))");const s=n.map(a=>"CAST(".concat(r,".").concat(this.escape(a.databaseName)," AS STRING)")).join(", '|;|', ");return"COUNT(DISTINCT(CONCAT(".concat(s,")))")}return"COUNT(DISTINCT("+n.map(s=>"".concat(r,".").concat(this.escape(s.databaseName))).join(" || '|;|' || ")+"))"}async executeCountQuery(e){const t=this.computeCountExpression(),n=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(t,"cnt").setOption("disable-global-order").loadRawResults(e);return!n||!n[0]||!n[0].cnt?0:parseInt(n[0].cnt)}async executeExistsQuery(e){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(e)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const e=Array.isArray(this.findOptions.select)?We.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(e,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const e=Array.isArray(this.findOptions.relations)?We.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(e=>{e.select&&!e.selection?e.type==="inner"?this.innerJoinAndSelect("".concat(e.parentAlias,".").concat(e.relationMetadata.propertyPath),e.alias):this.leftJoinAndSelect("".concat(e.parentAlias,".").concat(e.relationMetadata.propertyPath),e.alias):e.type==="inner"?this.innerJoin("".concat(e.parentAlias,".").concat(e.relationMetadata.propertyPath),e.alias):this.leftJoin("".concat(e.parentAlias,".").concat(e.relationMetadata.propertyPath),e.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(e=>{this.leftJoin(this.findOptions.join.leftJoin[e],e)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(e=>{this.innerJoin(this.findOptions.join.innerJoin[e],e)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(e=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[e],e)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(e=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[e],e)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const e=this.findOptions.lock.tables?this.findOptions.lock.tables.map(t=>{const n=this.expressionMap.aliases.find(r=>r.metadata.tableNameWithoutPrefix===t);if(!n)throw new te('"'.concat(t,'" is not part of this query'));return this.escape(n.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,e),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&jn.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(e){this.relationMetadatas.push(e)}async executeEntitiesAndRawResults(e){if(!this.expressionMap.mainAlias)throw new te('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!e.isTransactionActive)throw new EF;if(this.expressionMap.lockMode==="optimistic"){const l=this.expressionMap.mainAlias.metadata;if(!l.versionColumn&&!l.updateDateColumn)throw new bF(l.name)}const t=new Y4(this.connection,e,this.expressionMap.relationIdAttributes),n=new X4(this.connection,e,this.expressionMap.relationCountAttributes);new J4(this.expressionMap).transform(),new Z4(this.expressionMap).transform();let a=[],o=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[l,c]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),u=this.expressionMap.mainAlias.metadata,d=this.expressionMap.mainAlias.name,h=u.primaryColumns.map(p=>{const w=this.escape("distinctAlias"),y=this.escape(Ue.buildAlias(this.connection.driver,void 0,d,p.databaseName));c[y]||(c[y]="ASC");const b=Ue.buildAlias(this.connection.driver,void 0,"ids_"+d,p.databaseName);return"".concat(w,".").concat(y," AS ").concat(this.escape(b))}),f=this.clone(),m=f.expressionMap.timeTravel;if(a=await new Jd(this.connection,e).select("DISTINCT ".concat(h.join(", "))).addSelect(l).from("(".concat(f.orderBy().timeTravelQuery(!1).getQuery(),")"),"distinctAlias").timeTravelQuery(m).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(c).cache(this.expressionMap.cache&&this.expressionMap.cacheId?"".concat(this.expressionMap.cacheId,"-pagination"):this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),a.length>0){let p="";const w={};if(u.hasMultiplePrimaryKeys)p=a.map((y,b)=>u.primaryColumns.map(E=>{const _="orm_distinct_ids_".concat(b,"_").concat(E.databaseName),k=Ue.buildAlias(this.connection.driver,void 0,"ids_"+d,E.databaseName);return w[_]=y[k],"".concat(d,".").concat(E.propertyPath,"=:").concat(_)}).join(" AND ")).join(" OR ");else{const y=Ue.buildAlias(this.connection.driver,void 0,"ids_"+d,u.primaryColumns[0].databaseName),b=a.map(_=>_[y]);b.every(_=>typeof _=="number")?p="".concat(d,".").concat(u.primaryColumns[0].propertyPath," IN (").concat(b.join(", "),")"):(w.orm_distinct_ids=b,p=d+"."+u.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}a=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:p}).setParameters(w).loadRawResults(e)}}else a=await this.loadRawResults(e);if(a.length>0){const l=await t.load(a),c=await n.load(a);o=new K4(this.expressionMap,this.connection.driver,l,c,this.queryRunner).transform(a,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,o)}if(this.expressionMap.relationLoadStrategy==="query"){const l=new QC(this.connection,e);await Promise.all(this.relationMetadatas.map(async c=>{const u=c.inverseEntityMetadata.target,d=c.inverseEntityMetadata.targetName,h=Array.isArray(this.findOptions.select)?We.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,f=Array.isArray(this.findOptions.relations)?We.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,m=this.createQueryBuilder().select(d).from(u,d).setFindOptions({select:h?We.deepValue(h,c.propertyPath):void 0,order:this.findOptions.order?We.deepValue(this.findOptions.order,c.propertyPath):void 0,relations:f?We.deepValue(f,c.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(o.length>0){const p=await l.loadManyToManyRelationIdsAndGroup(c,o,void 0,m);o.forEach(w=>{const y=p.find(b=>b.entity===w);if(y){const b=y.related===void 0?null:y.related;c.setEntityValue(w,b)}})}}))}return{raw:a,entities:o}}createOrderByCombinedWithSelectExpression(e){const t=this.expressionMap.allOrderBys,n=Object.keys(t).map(s=>{if(s.indexOf(".")!==-1){const a=s.split("."),o=a[0],l=a.slice(1).join("."),u=this.expressionMap.findAliasByName(o).metadata.findColumnWithPropertyPath(l);return this.escape(e)+"."+this.escape(Ue.buildAlias(this.connection.driver,void 0,o,u.databaseName))}else return this.expressionMap.selects.find(a=>a.selection===s||a.aliasName===s)?this.escape(e)+"."+this.escape(s):""}).join(", "),r={};return Object.keys(t).forEach(s=>{if(s.indexOf(".")!==-1){const a=s.split("."),o=a[0],l=a.slice(1).join("."),u=this.expressionMap.findAliasByName(o).metadata.findColumnWithPropertyPath(l);r[this.escape(e)+"."+this.escape(Ue.buildAlias(this.connection.driver,void 0,o,u.databaseName))]=t[s]}else this.expressionMap.selects.find(a=>a.selection===s||a.aliasName===s)?r[this.escape(e)+"."+this.escape(s)]=t[s]:r[s]=t[s]}),[n,r]}async loadRawResults(e){const[t,n]=this.getQueryAndParameters(),r=t+" -- PARAMETERS: "+JSON.stringify(n),s=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let a;const o=s.alwaysEnabled&&this.expressionMap.cache||this.expressionMap.cache;let l=!1;if(this.connection.queryResultCache&&o)try{if(a=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:r,duration:this.expressionMap.cacheDuration||s.duration||1e3},e),a&&!this.connection.queryResultCache.isExpired(a))return JSON.parse(a.result)}catch(u){if(!s.ignoreErrors)throw u;l=!0}const c=await e.query(t,n,!0);if(!l&&this.connection.queryResultCache&&o)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:r,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||s.duration||1e3,result:JSON.stringify(c.records)},a,e)}catch(u){if(!s.ignoreErrors)throw u}return c.records}mergeExpressionMap(e){return ht.assign(this.expressionMap,e),this}normalizeNumber(e){return typeof e=="number"||e===void 0||e===null?e:Number(e)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner("slave")}buildSelect(e,t,n,r){for(let s in e){if(e[s]===void 0||e[s]===!1)continue;const a=r?r+"."+s:s,o=t.findColumnWithPropertyPathStrict(a),l=t.findEmbeddedWithPropertyPath(a),c=t.findRelationWithPropertyPath(a);if(!l&&!o&&!c)throw new Tr(a,t);o?this.selects.push(n+"."+a):l&&this.buildSelect(e[s],t,n,a)}}buildRelations(e,t,n,r,s){e&&Object.keys(e).forEach(a=>{const o=e[a],l=s?s+"."+a:a,c=n.findEmbeddedWithPropertyPath(l),u=n.findRelationWithPropertyPath(l);if(!c&&!u)throw new Tr(l,n);if(c)this.buildRelations(o,typeof t=="object"?We.deepValue(t,c.propertyPath):void 0,n,r,l);else if(u){let d=r+"_"+l.replace(".","_");d=Ue.buildAlias(this.connection.driver,{joiner:"__"},r,d),(o===!0||typeof o=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(u):(this.joins.push({type:"left",select:!0,selection:t&&typeof t[a]=="object"?t[a]:void 0,alias:d,parentAlias:r,relationMetadata:u}),t&&typeof t[a]=="object"&&this.buildSelect(t[a],u.inverseEntityMetadata,d))),typeof o=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(o,typeof t=="object"?We.deepValue(t,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildEagerRelations(e,t,n,r,s){e&&Object.keys(e).forEach(a=>{const o=e[a],l=s?s+"."+a:a,c=n.findEmbeddedWithPropertyPath(l),u=n.findRelationWithPropertyPath(l);if(!c&&!u)throw new Tr(l,n);if(c)this.buildEagerRelations(o,typeof t=="object"?We.deepValue(t,c.propertyPath):void 0,n,r,l);else if(u){let d=r+"_"+l.replace(".","_");d=Ue.buildAlias(this.connection.driver,{joiner:"__"},r,d),(o===!0||typeof o=="object")&&u.inverseEntityMetadata.eagerRelations.forEach(h=>{let f=d+"_"+h.propertyPath.replace(".","_");f=Ue.buildAlias(this.connection.driver,{joiner:"__"},d,f),this.joins.find(p=>p.alias===f)||this.joins.push({type:"left",select:!0,alias:f,parentAlias:d,selection:void 0,relationMetadata:h}),t&&typeof t[a]=="object"&&this.buildSelect(t[a],u.inverseEntityMetadata,d)}),typeof o=="object"&&this.buildEagerRelations(o,typeof t=="object"?We.deepValue(t,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildOrder(e,t,n,r){for(let s in e){if(e[s]===void 0)continue;const a=r?r+"."+s:s,o=t.findColumnWithPropertyPathStrict(a),l=t.findEmbeddedWithPropertyPath(a),c=t.findRelationWithPropertyPath(a);if(!l&&!o&&!c)throw new Tr(a,t);if(o){let u=typeof e[s]=="object"?e[s].direction:e[s];u=u==="DESC"||u==="desc"||u===-1?"DESC":"ASC";let d=typeof e[s]=="object"?e[s].nulls:void 0;d=(d==null?void 0:d.toLowerCase())==="first"?"NULLS FIRST":(d==null?void 0:d.toLowerCase())==="last"?"NULLS LAST":void 0;let h="".concat(n,".").concat(a);this.addOrderBy(h,u,d)}else if(l)this.buildOrder(e[s],t,n,a);else if(c){let u=n+"_"+a.replace(".","_");u=Ue.buildAlias(this.connection.driver,{joiner:"__"},n,u),this.joins.find(h=>h.alias===u)||this.joins.push({type:"left",select:!1,alias:u,parentAlias:n,selection:void 0,relationMetadata:c}),this.buildOrder(e[s],c.inverseEntityMetadata,u)}}}buildWhere(e,t,n,r){let s="";if(Array.isArray(e)&&e.length)s="("+e.map(a=>this.buildWhere(a,t,n,r)).filter(a=>!!a).map(a=>"("+a+")").join(" OR ")+")";else{let a=[];for(let o in e){if(e[o]===void 0||e[o]===null)continue;const l=r?r+"."+o:o,c=t.findColumnWithPropertyPathStrict(l),u=t.findEmbeddedWithPropertyPath(l),d=t.findRelationWithPropertyPath(l);if(!u&&!c&&!d)throw new Tr(l,t);if(c){let h="".concat(n,".").concat(l);c.isVirtualProperty&&c.query&&(h="(".concat(c.query(n),")"));let f=e[o];ue.isEqualOperator(e[o])&&(f=e[o].value),c.transformer&&(f instanceof Hc?f.transformValue(c.transformer):f=yn.transformTo(c.transformer,f)),a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(h,f)))}else if(u){const h=this.buildWhere(e[o],t,n,l);h&&a.push(h)}else if(d){if(typeof e[o]=="object"&&Object.keys(e[o]).every(f=>e[o][f]===void 0))continue;if(ue.isFindOperator(e[o]))if(e[o].type==="moreThan"||e[o].type==="lessThan"||e[o].type==="moreThanOrEqual"||e[o].type==="lessThanOrEqual"){let h="";e[o].type==="moreThan"?h=">":e[o].type==="lessThan"?h="<":e[o].type==="moreThanOrEqual"?h=">=":e[o].type==="lessThanOrEqual"&&(h="<=");const f=this.subQuery();if(d.isManyToManyOwner)f.select("COUNT(*)").from(d.joinTableName,d.joinTableName).where(d.joinColumns.map(m=>"".concat(d.joinTableName,".").concat(m.propertyName," = ").concat(n,".").concat(m.referencedColumn.propertyName)).join(" AND "));else if(d.isManyToManyNotOwner)f.select("COUNT(*)").from(d.inverseRelation.joinTableName,d.inverseRelation.joinTableName).where(d.inverseRelation.inverseJoinColumns.map(m=>"".concat(d.inverseRelation.joinTableName,".").concat(m.propertyName," = ").concat(n,".").concat(m.referencedColumn.propertyName)).join(" AND "));else if(d.isOneToMany)f.select("COUNT(*)").from(d.inverseEntityMetadata.target,d.inverseEntityMetadata.tableName).where(d.inverseRelation.joinColumns.map(m=>"".concat(d.inverseEntityMetadata.tableName,".").concat(m.propertyName," = ").concat(n,".").concat(m.referencedColumn.propertyName)).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(f.getSql()+" "+h+" "+parseInt(e[o].value))}else if(d.isManyToOne||d.isOneToOne&&d.isOneToOneOwner){const h="".concat(n,".").concat(l);a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(h,e[o])))}else throw new Error("This relation isn't supported by given find operator");else{let h=n+"_"+d.propertyPath.replace(".","_");h=Ue.buildAlias(this.connection.driver,{joiner:"__"},n,h),this.joins.find(p=>p.alias===h)||this.joins.push({type:"left",select:!1,selection:void 0,alias:h,parentAlias:n,relationMetadata:d});const m=this.buildWhere(e[o],d.inverseEntityMetadata,h);m&&a.push(m)}}}s=a.join(" AND ")}return s}}class jy{constructor(e){this.options=e}logQuery(e,t,n){this.isLogEnabledFor("query")&&this.writeLog("query",{type:"query",prefix:"query",message:e,format:"sql",parameters:t},n)}logQueryError(e,t,n,r){this.isLogEnabledFor("query-error")&&this.writeLog("warn",[{type:"query-error",prefix:"query failed",message:t,format:"sql",parameters:n},{type:"query-error",prefix:"error",message:e}],r)}logQuerySlow(e,t,n,r){this.isLogEnabledFor("query-slow")&&this.writeLog("warn",[{type:"query-slow",prefix:"query is slow",message:t,format:"sql",parameters:n,additionalInfo:{time:e}},{type:"query-slow",prefix:"execution time",message:e}],r)}logSchemaBuild(e,t){this.isLogEnabledFor("schema-build")&&this.writeLog("schema",{type:"schema-build",message:e},t)}logMigration(e,t){this.isLogEnabledFor("migration")||this.writeLog("log",{type:"migration",message:e},t)}log(e,t,n){switch(e){case"log":if(!this.isLogEnabledFor("log"))return;this.writeLog("log",{type:"log",message:t},n);break;case"info":if(!this.isLogEnabledFor("info"))return;this.writeLog("info",{type:"info",prefix:"info",message:t},n);break;case"warn":if(!this.isLogEnabledFor("warn"))return;this.writeLog("warn",{type:"warn",message:t},n);break}}isLogEnabledFor(e){switch(e){case"query":return this.options==="all"||this.options===!0||Array.isArray(this.options)&&this.options.indexOf("query")!==-1;case"error":case"query-error":return this.options==="all"||this.options===!0||Array.isArray(this.options)&&this.options.indexOf("error")!==-1;case"query-slow":return!0;case"schema":case"schema-build":return this.options==="all"||Array.isArray(this.options)&&this.options.indexOf("schema")!==-1;case"migration":return!0;case"log":return this.options==="all"||Array.isArray(this.options)&&this.options.indexOf("log")!==-1;case"info":return this.options==="all"||Array.isArray(this.options)&&this.options.indexOf("info")!==-1;case"warn":return this.options==="all"||Array.isArray(this.options)&&this.options.indexOf("warn")!==-1;default:return!1}}prepareLogMessages(e,t){t={addColonToPrefix:!0,appendParameterAsComment:!0,highlightSql:!0,...t};const n=Array.isArray(e)?e:[e];for(let r of n){if(typeof r!="object"&&(r={message:r}),r.format==="sql"){let s=String(r.message);t.appendParameterAsComment&&r.parameters&&r.parameters.length&&(s+=" -- PARAMETERS: ".concat(this.stringifyParams(r.parameters))),t.highlightSql&&(s=jt.highlightSql(s)),r.message=s}t.addColonToPrefix&&r.prefix&&(r.prefix+=":")}return n}stringifyParams(e){try{return JSON.stringify(e)}catch(t){return e}}}class rj extends jy{writeLog(e,t,n){var r;const s=this.prepareLogMessages(t,{highlightSql:!1});for(let a of s)switch((r=a.type)!==null&&r!==void 0?r:e){case"log":case"schema-build":case"migration":console.log(a.message);break;case"info":case"query":a.prefix?console.info(a.prefix,a.message):console.info(a.message);break;case"warn":case"query-slow":a.prefix?console.warn(a.prefix,a.message):console.warn(a.message);break;case"error":case"query-error":a.prefix?console.error(a.prefix,a.message):console.error(a.message);break}}}class eE extends jy{writeLog(e,t,n){var r;const s=this.prepareLogMessages(t);for(let a of s)switch((r=a.type)!==null&&r!==void 0?r:e){case"log":case"schema-build":case"migration":jt.log(String(a.message));break;case"info":case"query":a.prefix?jt.logInfo(a.prefix,a.message):jt.log(String(a.message));break;case"warn":case"query-slow":a.prefix?jt.logWarn(a.prefix,a.message):console.warn(jt.warn(String(a.message)));break;case"error":case"query-error":a.prefix?jt.logError(a.prefix,String(a.message)):console.error(jt.error(String(a.message)));break}}}class sj{logQuery(){throw new Error("This logger is not applicable in a browser context")}logQueryError(){throw new Error("This logger is not applicable in a browser context")}logQuerySlow(){throw new Error("This logger is not applicable in a browser context")}logSchemaBuild(){throw new Error("This logger is not applicable in a browser context")}logMigration(){throw new Error("This logger is not applicable in a browser context")}log(){throw new Error("This logger is not applicable in a browser context")}}class aj extends sj{}var Ym={exports:{}},Ap,tE;function oj(){if(tE)return Ap;tE=1;var i=1e3,e=i*60,t=e*60,n=t*24,r=n*7,s=n*365.25;Ap=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return a(u);if(h==="number"&&isFinite(u))return d.long?l(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),f=(d[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*r;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*t;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(u){var d=Math.abs(u);return d>=n?Math.round(u/n)+"d":d>=t?Math.round(u/t)+"h":d>=e?Math.round(u/e)+"m":d>=i?Math.round(u/i)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=n?c(u,d,n,"day"):d>=t?c(u,d,t,"hour"):d>=e?c(u,d,e,"minute"):d>=i?c(u,d,i,"second"):u+" ms"}function c(u,d,h,f){var m=d>=h*1.5;return Math.round(u/h)+" "+f+(m?"s":"")}return Ap}function lj(i){t.debug=t,t.default=t,t.coerce=l,t.disable=s,t.enable=r,t.enabled=a,t.humanize=oj(),t.destroy=c,Object.keys(i).forEach(u=>{t[u]=i[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(u){let d,h=null,f,m;function p(...w){if(!p.enabled)return;const y=p,b=Number(new Date),E=b-(d||b);y.diff=E,y.prev=d,y.curr=b,d=b,w[0]=t.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let _=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(B,D)=>{if(B==="%%")return"%";_++;const O=t.formatters[D];if(typeof O=="function"){const R=w[_];B=O.call(y,R),w.splice(_,1),_--}return B}),t.formatArgs.call(y,w),(y.log||t.log).apply(y,w)}return p.namespace=u,p.useColors=t.useColors(),p.color=t.selectColor(u),p.extend=n,p.destroy=t.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==t.namespaces&&(f=t.namespaces,m=t.enabled(u)),m),set:w=>{h=w}}),typeof t.init=="function"&&t.init(p),p}function n(u,d){const h=t(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function r(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let d;const h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...t.names.map(o),...t.skips.map(o).map(d=>"-"+d)].join(",");return t.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(u))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(u))return!0;return!1}function o(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var cj=lj;(function(i,e){e.formatArgs=n,e.save=r,e.load=s,e.useColors=t,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,d=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(d=u))}),l.splice(d,0,c)}e.log=console.debug||console.log||(()=>{});function r(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch(c){}}function s(){let l;try{l=e.storage.getItem("debug")}catch(c){}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function a(){try{return localStorage}catch(l){}}i.exports=cj(e);const{formatters:o}=i.exports;o.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(Ym,Ym.exports);var qr=Ym.exports;class uj extends jy{constructor(){super(...arguments),this.logger={log:qr.debug("typeorm:log"),info:qr.debug("typeorm:info"),warn:qr.debug("typeorm:warn"),error:qr.debug("typeorm:error"),query:qr.debug("typeorm:query:log"),"query-error":qr.debug("typeorm:query:error"),"query-slow":qr.debug("typeorm:query:slow"),"schema-build":qr.debug("typeorm:schema"),migration:qr.debug("typeorm:migration")}}isLogEnabledFor(e){switch(e){case"query":return this.logger.query.enabled;case"query-error":return this.logger["query-error"].enabled;case"query-slow":return!0;case"schema":case"schema-build":return this.logger["schema-build"].enabled;case"migration":return this.logger.migration.enabled;case"log":return this.logger.log.enabled;case"info":return this.logger.info.enabled;case"warn":return this.logger.warn.enabled;default:return!1}}writeLog(e,t,n){var r;const s=this.prepareLogMessages(t,{appendParameterAsComment:!1});for(let a of s){const o=(r=a.type)!==null&&r!==void 0?r:e;o in this.logger&&(a.prefix?this.logger[o](a.prefix,a.message):this.logger[o](a.message),a.parameters&&a.parameters.length&&this.logger[o]("parameters:",a.parameters))}}}class nE{create(e,t){if(ht.isObject(e))return e;if(e)switch(e){case"simple-console":return new rj(t);case"file":return new aj(t);case"advanced-console":return new eE(t);case"debug":return new uj}return new eE(t)}}class dj{constructor(e,t){this.connection=e,this.clientType=t,this.redis=this.loadRedis()}async connect(){const e=this.connection.options.cache;if(this.clientType==="redis")this.client=this.redis.createClient({...e==null?void 0:e.options,legacyMode:!0}),typeof this.connection.options.cache=="object"&&this.connection.options.cache.ignoreErrors&&this.client.on("error",t=>{this.connection.logger.log("warn",t)}),"connect"in this.client&&await this.client.connect();else if(this.clientType==="ioredis")e&&e.port?e.options?this.client=new this.redis(e.port,e.options):this.client=new this.redis(e.port):e&&e.options?this.client=new this.redis(e.options):this.client=new this.redis;else if(this.clientType==="ioredis/cluster")if(e&&e.options&&Array.isArray(e.options))this.client=new this.redis.Cluster(e.options);else if(e&&e.options&&e.options.startupNodes)this.client=new this.redis.Cluster(e.options.startupNodes,e.options.options);else throw new te("options.startupNodes required for ".concat(this.clientType,"."))}async disconnect(){return new Promise((e,t)=>{this.client.quit((n,r)=>{if(n)return t(n);e(),this.client=void 0})})}async synchronize(e){}getFromCache(e,t){return new Promise((n,r)=>{e.identifier?this.client.get(e.identifier,(s,a)=>{if(s)return r(s);n(JSON.parse(a))}):e.query?this.client.get(e.query,(s,a)=>{if(s)return r(s);n(JSON.parse(a))}):n(void 0)})}isExpired(e){return e.time+e.duration<new Date().getTime()}async storeInCache(e,t,n){return new Promise((r,s)=>{e.identifier?this.client.set(e.identifier,JSON.stringify(e),"PX",e.duration,(a,o)=>{if(a)return s(a);r()}):e.query&&this.client.set(e.query,JSON.stringify(e),"PX",e.duration,(a,o)=>{if(a)return s(a);r()})})}async clear(e){return new Promise((t,n)=>{this.client.flushdb((r,s)=>{if(r)return n(r);t()})})}async remove(e,t){await Promise.all(e.map(n=>this.deleteKey(n)))}deleteKey(e){return new Promise((t,n)=>{this.client.del(e,(r,s)=>{if(r)return n(r);t()})})}loadRedis(){try{return this.clientType==="ioredis/cluster"?jt.load("ioredis"):jt.load(this.clientType)}catch(e){throw new te("Cannot use cache because ".concat(this.clientType,' is not installed. Please run "npm i ').concat(this.clientType,' --save".'))}}}let Du;const hj=new Uint8Array(16);function fj(){if(!Du&&(Du=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Du))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Du(hj)}const kn=[];for(let i=0;i<256;++i)kn.push((i+256).toString(16).slice(1));function pj(i,e=0){return kn[i[e+0]]+kn[i[e+1]]+kn[i[e+2]]+kn[i[e+3]]+"-"+kn[i[e+4]]+kn[i[e+5]]+"-"+kn[i[e+6]]+kn[i[e+7]]+"-"+kn[i[e+8]]+kn[i[e+9]]+"-"+kn[i[e+10]]+kn[i[e+11]]+kn[i[e+12]]+kn[i[e+13]]+kn[i[e+14]]+kn[i[e+15]]}const mj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),iE={randomUUID:mj};function gj(i,e,t){if(iE.randomUUID&&!e&&!i)return iE.randomUUID();i=i||{};const n=i.random||(i.rng||fj)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=n[r];return e}return pj(n)}class yj{constructor(e){this.connection=e;const{schema:t}=this.connection.driver.options,n=this.connection.driver.database,s=(typeof this.connection.options.cache=="object"?this.connection.options.cache:{}).tableName||"query-result-cache";this.queryResultCacheDatabase=n,this.queryResultCacheSchema=t,this.queryResultCacheTable=this.connection.driver.buildTableName(s,t,n)}async connect(){}async disconnect(){}async synchronize(e){e=this.getQueryRunner(e);const t=this.connection.driver;await e.hasTable(this.queryResultCacheTable)||await e.createTable(new Ht({database:this.queryResultCacheDatabase,schema:this.queryResultCacheSchema,name:this.queryResultCacheTable,columns:[{name:"id",isPrimary:!0,isNullable:!1,type:t.normalizeType({type:t.mappedDataTypes.cacheId}),generationStrategy:t.options.type==="spanner"?"uuid":"increment",isGenerated:!0},{name:"identifier",type:t.normalizeType({type:t.mappedDataTypes.cacheIdentifier}),isNullable:!0},{name:"time",type:t.normalizeType({type:t.mappedDataTypes.cacheTime}),isPrimary:!1,isNullable:!1},{name:"duration",type:t.normalizeType({type:t.mappedDataTypes.cacheDuration}),isPrimary:!1,isNullable:!1},{name:"query",type:t.normalizeType({type:t.mappedDataTypes.cacheQuery}),isPrimary:!1,isNullable:!1},{name:"result",type:t.normalizeType({type:t.mappedDataTypes.cacheResult}),isNullable:!1}]}))}getFromCache(e,t){t=this.getQueryRunner(t);const n=this.connection.createQueryBuilder(t).select().from(this.queryResultCacheTable,"cache");return e.identifier?n.where("".concat(n.escape("cache"),".").concat(n.escape("identifier")," = :identifier")).setParameters({identifier:this.connection.driver.options.type==="mssql"?new Yi(e.identifier,"nvarchar"):e.identifier}).getRawOne():e.query?this.connection.driver.options.type==="oracle"?n.where("dbms_lob.compare(".concat(n.escape("cache"),".").concat(n.escape("query"),", :query) = 0"),{query:e.query}).getRawOne():n.where("".concat(n.escape("cache"),".").concat(n.escape("query")," = :query")).setParameters({query:this.connection.driver.options.type==="mssql"?new Yi(e.query,"nvarchar"):e.query}).getRawOne():Promise.resolve(void 0)}isExpired(e){const t=typeof e.duration=="string"?parseInt(e.duration):e.duration;return(typeof e.time=="string"?parseInt(e.time):e.time)+t<new Date().getTime()}async storeInCache(e,t,n){const r=n===void 0||(n==null?void 0:n.getReplicationMode())==="slave";(n===void 0||r)&&(n=this.connection.createQueryRunner("master"));let s=e;if(this.connection.driver.options.type==="mssql"&&(s={identifier:new Yi(e.identifier,"nvarchar"),time:new Yi(e.time,"bigint"),duration:new Yi(e.duration,"int"),query:new Yi(e.query,"nvarchar"),result:new Yi(e.result,"nvarchar")}),t&&t.identifier){const a=n.manager.createQueryBuilder().update(this.queryResultCacheTable).set(s);a.where("".concat(a.escape("identifier")," = :condition"),{condition:s.identifier}),await a.execute()}else if(t&&t.query){const a=n.manager.createQueryBuilder().update(this.queryResultCacheTable).set(s);this.connection.driver.options.type==="oracle"?a.where('dbms_lob.compare("query", :condition) = 0',{condition:s.query}):a.where("".concat(a.escape("query")," = :condition"),{condition:s.query}),await a.execute()}else this.connection.driver.options.type==="spanner"&&!s.id&&(s.id=gj()),await n.manager.createQueryBuilder().insert().into(this.queryResultCacheTable).values(s).execute();r&&await n.release()}async clear(e){return this.getQueryRunner(e).clearTable(this.queryResultCacheTable)}async remove(e,t){let n=t||this.getQueryRunner();await Promise.all(e.map(r=>{const s=n.manager.createQueryBuilder();return s.delete().from(this.queryResultCacheTable).where("".concat(s.escape("identifier")," = :identifier"),{identifier:r}).execute()})),t||await n.release()}getQueryRunner(e){return e||this.connection.createQueryRunner()}}class rE{constructor(e){this.connection=e}create(){if(!this.connection.options.cache)throw new te("To use cache you need to enable it in connection options by setting cache: true or providing some caching options. Example: { host: ..., username: ..., cache: true }");const e=this.connection.options.cache;return e.provider&&typeof e.provider=="function"?e.provider(this.connection):e.type==="redis"||e.type==="ioredis"||e.type==="ioredis/cluster"?new dj(this.connection,e.type):new yj(this.connection)}}class bj{constructor(e){this.connection=e}load(e,t,n,r){return n&&n.isReleased&&(n=void 0),e.isManyToOne||e.isOneToOneOwner?this.loadManyToOneOrOneToOneOwner(e,t,n,r):e.isOneToMany||e.isOneToOneNotOwner?this.loadOneToManyOrOneToOneNotOwner(e,t,n,r):e.isManyToManyOwner?this.loadManyToManyOwner(e,t,n,r):this.loadManyToManyNotOwner(e,t,n,r)}loadManyToOneOrOneToOneOwner(e,t,n,r){const s=Array.isArray(t)?t:[t],a=e.entityMetadata.name,o=r||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),l=o.expressionMap.mainAlias.name,c=e.entityMetadata.primaryColumns,d=(e.isOwning?e.joinColumns:e.inverseRelation.joinColumns).map(h=>"".concat(e.entityMetadata.name,".").concat(h.propertyName," = ").concat(l,".").concat(h.referencedColumn.propertyName)).join(" AND ");if(o.innerJoin(e.entityMetadata.target,a,d),c.length===1)o.where("".concat(a,".").concat(c[0].propertyPath," IN (:...").concat(a+"_"+c[0].propertyName,")")),o.setParameter(a+"_"+c[0].propertyName,s.map(h=>c[0].getEntityValue(h,!0)));else{const h=s.map((f,m)=>c.map((p,w)=>{const y=a+"_entity_"+m+"_"+w;return o.setParameter(y,p.getEntityValue(f,!0)),a+"."+p.propertyPath+" = :"+y}).join(" AND ")).map(f=>"("+f+")").join(" OR ");o.where(h)}return jn.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadOneToManyOrOneToOneNotOwner(e,t,n,r){const s=Array.isArray(t)?t:[t],a=e.inverseRelation.joinColumns,o=r||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.inverseRelation.entityMetadata.target,e.propertyName),l=o.expressionMap.mainAlias.name;if(a.length===1)o.where("".concat(l,".").concat(a[0].propertyPath," IN (:...").concat(l+"_"+a[0].propertyName,")")),o.setParameter(l+"_"+a[0].propertyName,s.map(c=>a[0].referencedColumn.getEntityValue(c,!0)));else{const c=s.map((u,d)=>a.map((h,f)=>{const m=l+"_entity_"+d+"_"+f;return o.setParameter(m,h.referencedColumn.getEntityValue(u,!0)),l+"."+h.propertyPath+" = :"+m}).join(" AND ")).map(u=>"("+u+")").join(" OR ");o.where(c)}return jn.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadManyToManyOwner(e,t,n,r){const s=Array.isArray(t)?t:[t],a=e.joinColumns.reduce((h,f)=>(h[f.propertyName]=s.map(m=>f.referencedColumn.getEntityValue(m,!0)),h),{}),o=r||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),l=o.expressionMap.mainAlias.name,c=e.junctionEntityMetadata.tableName,u=e.joinColumns.map(h=>"".concat(c,".").concat(h.propertyName," IN (:...").concat(h.propertyName,")")),d=e.inverseJoinColumns.map(h=>"".concat(c,".").concat(h.propertyName,"=").concat(l,".").concat(h.referencedColumn.propertyName));return o.innerJoin(c,c,[...u,...d].join(" AND ")).setParameters(a),jn.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadManyToManyNotOwner(e,t,n,r){const s=Array.isArray(t)?t:[t],a=r||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),o=a.expressionMap.mainAlias.name,l=e.junctionEntityMetadata.tableName,c=e.inverseRelation.joinColumns.map(h=>"".concat(l,".").concat(h.propertyName," = ").concat(o,".").concat(h.referencedColumn.propertyName)),u=e.inverseRelation.inverseJoinColumns.map(h=>"".concat(l,".").concat(h.propertyName," IN (:...").concat(h.propertyName,")")),d=e.inverseRelation.inverseJoinColumns.reduce((h,f)=>(h[f.propertyName]=s.map(m=>f.referencedColumn.getEntityValue(m,!0)),h),{});return a.innerJoin(l,l,[...c,...u].join(" AND ")).setParameters(d),jn.joinEagerRelations(a,a.alias,a.expressionMap.mainAlias.metadata),a.getMany()}enableLazyLoad(e,t,n){const r=this,s="__"+e.propertyName+"__",a="__promise_"+e.propertyName+"__",o="__has_"+e.propertyName+"__",l=(u,d)=>(u[s]=d,u[o]=!0,delete u[a],d),c=(u,d)=>(delete u[o],delete u[s],u[a]=d,d.then(h=>u[a]===d?l(u,h):h),d);Object.defineProperty(t,e.propertyName,{get:function(){if(this[o]===!0||this[s]!==void 0)return Promise.resolve(this[s]);if(this[a])return this[a];const u=r.load(e,this,n).then(d=>e.isOneToOne||e.isManyToOne?d.length===0?null:d[0]:d);return c(this,u)},set:function(u){u instanceof Promise?c(this,u):l(this,u)},configurable:!0,enumerable:!1})}}class vj{constructor(e){this["@instanceof"]=Symbol.for("DataSource"),this.migrations=[],this.subscribers=[],this.entityMetadatas=[],this.entityMetadatasMap=new Map,this.name=e.name||"default",this.options=e,this.logger=new nE().create(this.options.logger,this.options.logging),this.driver=new q4().create(this),this.manager=this.createEntityManager(),this.namingStrategy=e.namingStrategy||new sF,this.metadataTableName=e.metadataTableName||"typeorm_metadata",this.queryResultCache=e.cache?new rE(this).create():void 0,this.relationLoader=new bj(this),this.relationIdLoader=new QC(this),this.isInitialized=!1}get isConnected(){return this.isInitialized}get mongoManager(){if(!ue.isMongoEntityManager(this.manager))throw new te("MongoEntityManager is only available for MongoDB databases.");return this.manager}get sqljsManager(){if(!ue.isSqljsEntityManager(this.manager))throw new te("SqljsEntityManager is only available for Sqljs databases.");return this.manager}setOptions(e){return Object.assign(this.options,e),(e.logger||e.logging)&&(this.logger=new nE().create(e.logger||this.options.logger,e.logging||this.options.logging)),e.namingStrategy&&(this.namingStrategy=e.namingStrategy),e.cache&&(this.queryResultCache=new rE(this).create()),e.database&&(this.driver.database=Ue.buildDriverOptions(this.options).database),this}async initialize(){if(this.isInitialized)throw new aF(this.name);await this.driver.connect(),this.queryResultCache&&await this.queryResultCache.connect(),ht.assign(this,{isInitialized:!0});try{await this.buildMetadatas(),await this.driver.afterConnect(),this.options.dropSchema&&await this.dropDatabase(),this.options.migrationsRun&&await this.runMigrations({transaction:this.options.migrationsTransactionMode}),this.options.synchronize&&await this.synchronize()}catch(e){throw await this.destroy(),e}return this}async connect(){return this.initialize()}async destroy(){if(!this.isInitialized)throw new kl(this.name);await this.driver.disconnect(),this.queryResultCache&&await this.queryResultCache.disconnect(),ht.assign(this,{isInitialized:!1})}async close(){return this.destroy()}async synchronize(e=!1){if(!this.isInitialized)throw new kl(this.name);e&&await this.dropDatabase(),await this.driver.createSchemaBuilder().build()}async dropDatabase(){const e=this.createQueryRunner();try{if(this.driver.options.type==="mssql"||Ue.isMySQLFamily(this.driver)||this.driver.options.type==="aurora-mysql"||Ue.isSQLiteFamily(this.driver)){const t=[];if(this.entityMetadatas.forEach(n=>{n.database&&t.indexOf(n.database)===-1&&t.push(n.database)}),t.length===0&&this.driver.database&&t.push(this.driver.database),t.length===0)await e.clearDatabase();else for(const n of t)await e.clearDatabase(n)}else await e.clearDatabase()}finally{await e.release()}}async runMigrations(e){if(!this.isInitialized)throw new kl(this.name);const t=new Ep(this);return t.transaction=e&&e.transaction||"all",t.fake=e&&e.fake||!1,await t.executePendingMigrations()}async undoLastMigration(e){if(!this.isInitialized)throw new kl(this.name);const t=new Ep(this);t.transaction=e&&e.transaction||"all",t.fake=e&&e.fake||!1,await t.undoLastMigration()}async showMigrations(){if(!this.isInitialized)throw new kl(this.name);return await new Ep(this).showMigrations()}hasMetadata(e){return!!this.findMetadata(e)}getMetadata(e){const t=this.findMetadata(e);if(!t)throw new dF(e);return t}getRepository(e){return this.manager.getRepository(e)}getTreeRepository(e){return this.manager.getTreeRepository(e)}getMongoRepository(e){if(this.driver.options.type!=="mongodb")throw new te("You can use getMongoRepository only for MongoDB connections.");return this.manager.getRepository(e)}getCustomRepository(e){return this.manager.getCustomRepository(e)}async transaction(e,t){return this.manager.transaction(e,t)}async query(e,t,n){if(ue.isMongoEntityManager(this.manager))throw new te("Queries aren't supported by MongoDB.");if(n&&n.isReleased)throw new LC;const r=n||this.createQueryRunner();try{return await r.query(e,t)}finally{n||await r.release()}}createQueryBuilder(e,t,n){if(ue.isMongoEntityManager(this.manager))throw new te("Query Builder is not supported by MongoDB.");if(t){t=Ue.buildAlias(this.driver,void 0,t);const r=this.getMetadata(e);return new Jd(this,n).select(t).from(r.target,t)}else return new Jd(this,e)}createQueryRunner(e="master"){const t=this.driver.createQueryRunner(e),n=this.createEntityManager(t);return Object.assign(t,{manager:n}),t}getManyToManyMetadata(e,t){const n=this.getMetadata(e).findRelationWithPropertyPath(t);if(!n)throw new te('Relation "'.concat(t,'" was not found in ').concat(e," entity."));if(!n.isManyToMany)throw new te('Relation "'.concat(e,"#").concat(t,'" does not have a many-to-many relationship.')+"You can use this method only on many-to-many relations.");return n.junctionEntityMetadata}createEntityManager(e){return new y4().create(this,e)}findMetadata(e){const t=this.entityMetadatasMap.get(e);if(t)return t;for(let[n,r]of this.entityMetadatasMap){if(ue.isEntitySchema(e)&&r.name===e.options.name)return r;if(typeof e=="string"){if(e.indexOf(".")!==-1){if(r.tablePath===e)return r}else if(r.name===e||r.tableName===e)return r}if(ht.isObjectWithName(e)&&typeof e.name=="string"){if(e.name.indexOf(".")!==-1){if(r.tablePath===e.name)return r}else if(r.name===e.name||r.tableName===e.name)return r}}}async buildMetadatas(){const e=new G4(this),t=new RF,n=ht.mixedListToArray(this.options.subscribers||[]),r=await e.buildSubscribers(n);ht.assign(this,{subscribers:r});const s=ht.mixedListToArray(this.options.entities||[]),a=await e.buildEntityMetadatas(s);ht.assign(this,{entityMetadatas:a,entityMetadatasMap:new Map(a.map(c=>[c.target,c]))});const o=ht.mixedListToArray(this.options.migrations||[]),l=await e.buildMigrations(o);ht.assign(this,{migrations:l}),t.validateMany(this.entityMetadatas.filter(c=>c.tableType!=="view"),this.driver);for(let c of a)ue.isBaseEntityConstructor(c.target)&&c.target.useDataSource(this)}}function rr(){const i=jt.getGlobalVariable();return i.typeormMetadataArgsStorage||(i.typeormMetadataArgsStorage=new CC),i.typeormMetadataArgsStorage}function cf(i,e){return function(t,n){let r;typeof i=="string"||typeof i=="function"?r=i:i&&(e=i,r=i.type),e||(e={});const s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!r&&s&&(r=s),!e.type&&r&&(e.type=r),e.type==="hstore"&&!e.hstoreType&&(e.hstoreType=s===Object?"object":"string"),typeof i=="function")rr().embeddeds.push({target:t.constructor,propertyName:n,isArray:s===Array||e.array===!0,prefix:e.prefix!==void 0?e.prefix:void 0,type:i});else{if(!e.type)throw new BC(t,n);e.unique===!0&&rr().uniques.push({target:t.constructor,columns:[n]}),rr().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&rr().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}}function wj(i,e){return function(t,n){let r;typeof i=="string"||i===String||i===Boolean||i===Number?r=i:e=Object.assign({},i),e||(e={});const s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!r&&s&&(r=s),!e.type&&r&&(e.type=r),!e.type)throw new BC(t,n);if(e.nullable)throw new fF(t,n);e.primary=!0,rr().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&rr().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}function Ej(i,e){const t=(ht.isObject(i)?i:e)||{},n=typeof i=="string"?i:t.name;return function(r){rr().tables.push({target:r,name:n,type:"regular",orderBy:t.orderBy?t.orderBy:void 0,engine:t.engine?t.engine:void 0,database:t.database?t.database:void 0,schema:t.schema?t.schema:void 0,synchronize:t.synchronize,withoutRowid:t.withoutRowid})}}var xj=Object.defineProperty,Tj=Object.getOwnPropertyDescriptor,al=(i,e,t,n)=>{for(var r=n>1?void 0:n?Tj(e,t):e,s=i.length-1,a;s>=0;s--)(a=i[s])&&(r=(n?a(e,t,r):a(r))||r);return n&&r&&xj(e,t,r),r};let dr=class{constructor(){us(this,"id");us(this,"isActive");us(this,"isActive2");us(this,"name");us(this,"jsonTest")}};al([wj({type:"varchar"})],dr.prototype,"id",2);al([cf({type:"boolean"})],dr.prototype,"isActive",2);al([cf({type:"boolean"})],dr.prototype,"isActive2",2);al([cf({type:"varchar",length:255})],dr.prototype,"name",2);al([cf({type:"text",length:255})],dr.prototype,"jsonTest",2);dr=al([Ej("item")],dr);class Sj{async up(e){await e.query('\n            CREATE TABLE "item" (\n                "id" integer PRIMARY KEY NOT NULL,\n                "isActive" boolean NOT NULL,\n                "image" BLOB,\n            )\n        ')}async down(e){await e.query('\n            DROP TABLE "item"\n        ')}}class Cj{async up(e){await e.query('\n            ALTER TABLE "item" ADD  "isActive2" boolean\n        ')}async down(e){await e.query('\n          ALTER TABLE "item" DROP COLUMN  "isActive2"\n        ')}}class Aj{async up(e){await e.query('\n            ALTER TABLE "item" ADD  "name" varchar\n        ')}async down(e){await e.query('\n          ALTER TABLE "item" DROP COLUMN  "name"\n        ')}}class Nj{async up(e){await e.query('\n            ALTER TABLE "item" ADD  "jsonTest" text\n        ')}async down(e){await e.query('\n          ALTER TABLE "item" DROP COLUMN  "jsonTest"\n        ')}}class Np{constructor(){us(this,"localForage");us(this,"connection",null)}async configureNativeConnection(){try{await Wm.checkConnectionsConsistency({dbNames:[],openModes:[]})}catch(n){console.log("Error with ConnectionsConsistency: ",n)}const e=new SC(Wm);return this.connection=new vj({type:"capacitor",database:"test_db123",driver:e,migrationsTransactionMode:"none",logging:["error","query","schema"],entities:[dr],migrationsRun:!0,migrations:[Sj,Cj,Aj,Nj]}),await this.connection.initialize()}}const kj=()=>{const[i,e]=ut.useState(),t="https://images.rapidload-cdn.io/spai/ret_img,q_lossy,to_avif/https://www.itpedia.nl/wp-content/uploads/2018/02/Thinking_Face_Emoji-600x600.png";ut.useEffect(()=>{fetch(t).then(h=>h.blob()).then(h=>{e(h)}).catch(h=>{console.error("Error with blob:",h)})},[]),console.log(i),JSON.stringify(Vd());const[n,r]=ut.useState("");ut.useState();const{showConfirmationAlert:s,ConfirmationAlert:a}=e6(),[o,l]=ut.useState(),c=async()=>{var p;const h=new Np;await h.configureNativeConnection();const f=(p=h.connection)==null?void 0:p.getRepository(dr),m=await(f==null?void 0:f.find({}));l(m)};ut.useEffect(()=>{c()},[]);const u=async()=>{var h;try{const f=new Np,m=await f.configureNativeConnection(),p=(h=f.connection)==null?void 0:h.getRepository(dr);await(p==null?void 0:p.save({id:Date.now().toString(),isActive:!0,isActive2:!1,name:n,jsonTest:JSON.stringify({id:Math.random(),nest:{nested:!0}})})),await c()}catch(f){alert(f.message)}},d=async h=>{var f;try{const m=new Np,p=await m.configureNativeConnection(),w=(f=m.connection)==null?void 0:f.getRepository(dr);if(w){const y=await w.findOne({where:{id:h}});y?(y.name,await w.save(y)):console.log("can't rename input:",y.name)}else console.log("Connection to DB is absent");await c()}catch(m){alert(m.message)}};return xe.jsxs(xe.Fragment,{children:[xe.jsx(wC,{}),xe.jsxs(ky,{id:"main-content",children:[xe.jsx(zo,{children:xe.jsx(zo,{children:xe.jsxs(Qh,{color:"warning",children:[xe.jsx(Wh,{slot:"start",children:xe.jsx(lS,{})}),xe.jsx(Cy,{children:"Home"})]})})}),xe.jsxs(Hh,{fullscreen:!0,className:"ion-padding",children:[xe.jsxs(sa,{children:[xe.jsx(ZM,{type:"text",value:n,onIonInput:h=>r(h.target.value)}),xe.jsx(ka,{slot:"end",onClick:u,disabled:n.trim()==="",children:"ADD"}),xe.jsx(XM,{id:"myImg",src:Zq,alt:"img"})]}),xe.jsx("h3",{children:"THE SQLITE DATA"}),o==null?void 0:o.map(h=>xe.jsxs(sa,{children:[xe.jsx(Jr,{className:"ion-text-wrap",children:JSON.stringify(h)}),xe.jsx(ka,{onClick:()=>d(h==null?void 0:h.id),children:"DELETE"})]},h==null?void 0:h.id)),a]}),xe.jsx(EC,{})]})]})};RL();const _j=()=>xe.jsx(fL,{children:xe.jsx(jL,{children:xe.jsxs(EL,{children:[xe.jsx(Ol,{exact:!0,path:"/home",children:xe.jsx(kj,{})}),xe.jsx(Ol,{exact:!0,path:"/timer",children:xe.jsx(Xq,{})}),xe.jsx(Ol,{exact:!0,path:"/timer-configuration",children:xe.jsx(O3,{})}),xe.jsx(Ol,{exact:!0,path:"/",children:xe.jsx(_R,{to:"/home"})})]})})}),Tc=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function GC(){throw new Error("setTimeout has not been defined")}function KC(){throw new Error("clearTimeout has not been defined")}var ms=GC,gs=KC;typeof Tc.setTimeout=="function"&&(ms=setTimeout);typeof Tc.clearTimeout=="function"&&(gs=clearTimeout);function YC(i){if(ms===setTimeout)return setTimeout(i,0);if((ms===GC||!ms)&&setTimeout)return ms=setTimeout,setTimeout(i,0);try{return ms(i,0)}catch(e){try{return ms.call(null,i,0)}catch(t){return ms.call(this,i,0)}}}function Rj(i){if(gs===clearTimeout)return clearTimeout(i);if((gs===KC||!gs)&&clearTimeout)return gs=clearTimeout,clearTimeout(i);try{return gs(i)}catch(e){try{return gs.call(null,i)}catch(t){return gs.call(this,i)}}}var Qr=[],Oo=!1,fa,id=-1;function Pj(){!Oo||!fa||(Oo=!1,fa.length?Qr=fa.concat(Qr):id=-1,Qr.length&&JC())}function JC(){if(!Oo){var i=YC(Pj);Oo=!0;for(var e=Qr.length;e;){for(fa=Qr,Qr=[];++id<e;)fa&&fa[id].run();id=-1,e=Qr.length}fa=null,Oo=!1,Rj(i)}}function Ij(i){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Qr.push(new XC(i,e)),Qr.length===1&&!Oo&&YC(JC)}function XC(i,e){this.fun=i,this.array=e}XC.prototype.run=function(){this.fun.apply(null,this.array)};var $j="browser",Oj="browser",Dj=!0,Mj={},Lj=[],Bj="",qj={},Fj={},jj={};function qa(){}var Uj=qa,zj=qa,Vj=qa,Wj=qa,Hj=qa,Qj=qa,Gj=qa;function Kj(i){throw new Error("process.binding is not supported")}function Yj(){return"/"}function Jj(i){throw new Error("process.chdir is not supported")}function Xj(){return 0}var oo=Tc.performance||{},Zj=oo.now||oo.mozNow||oo.msNow||oo.oNow||oo.webkitNow||function(){return new Date().getTime()};function e5(i){var e=Zj.call(oo)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return i&&(t=t-i[0],n=n-i[1],n<0&&(t--,n+=1e9)),[t,n]}var t5=new Date;function n5(){var i=new Date,e=i-t5;return e/1e3}var ys={nextTick:Ij,title:$j,browser:Dj,env:Mj,argv:Lj,version:Bj,versions:qj,on:Uj,addListener:zj,once:Vj,off:Wj,removeListener:Hj,removeAllListeners:Qj,emit:Gj,binding:Kj,cwd:Yj,chdir:Jj,umask:Xj,hrtime:e5,platform:Oj,release:Fj,config:jj,uptime:n5};const i5="/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist";var Sr=[],Ii=[],r5=typeof Uint8Array<"u"?Uint8Array:Array,Uy=!1;function ZC(){Uy=!0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=i.length;e<t;++e)Sr[e]=i[e],Ii[i.charCodeAt(e)]=e;Ii["-".charCodeAt(0)]=62,Ii["_".charCodeAt(0)]=63}function s5(i){Uy||ZC();var e,t,n,r,s,a,o=i.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=i[o-2]==="="?2:i[o-1]==="="?1:0,a=new r5(o*3/4-s),n=s>0?o-4:o;var l=0;for(e=0,t=0;e<n;e+=4,t+=3)r=Ii[i.charCodeAt(e)]<<18|Ii[i.charCodeAt(e+1)]<<12|Ii[i.charCodeAt(e+2)]<<6|Ii[i.charCodeAt(e+3)],a[l++]=r>>16&255,a[l++]=r>>8&255,a[l++]=r&255;return s===2?(r=Ii[i.charCodeAt(e)]<<2|Ii[i.charCodeAt(e+1)]>>4,a[l++]=r&255):s===1&&(r=Ii[i.charCodeAt(e)]<<10|Ii[i.charCodeAt(e+1)]<<4|Ii[i.charCodeAt(e+2)]>>2,a[l++]=r>>8&255,a[l++]=r&255),a}function a5(i){return Sr[i>>18&63]+Sr[i>>12&63]+Sr[i>>6&63]+Sr[i&63]}function o5(i,e,t){for(var n,r=[],s=e;s<t;s+=3)n=(i[s]<<16)+(i[s+1]<<8)+i[s+2],r.push(a5(n));return r.join("")}function sE(i){Uy||ZC();for(var e,t=i.length,n=t%3,r="",s=[],a=16383,o=0,l=t-n;o<l;o+=a)s.push(o5(i,o,o+a>l?l:o+a));return n===1?(e=i[t-1],r+=Sr[e>>2],r+=Sr[e<<4&63],r+="=="):n===2&&(e=(i[t-2]<<8)+i[t-1],r+=Sr[e>>10],r+=Sr[e>>4&63],r+=Sr[e<<2&63],r+="="),s.push(r),s.join("")}function uf(i,e,t,n,r){var s,a,o=r*8-n-1,l=(1<<o)-1,c=l>>1,u=-7,d=t?r-1:0,h=t?-1:1,f=i[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=s*256+i[e+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=a*256+i[e+d],d+=h,u-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-c}return(f?-1:1)*a*Math.pow(2,s-n)}function eA(i,e,t,n,r,s){var a,o,l,c=s*8-r-1,u=(1<<c)-1,d=u>>1,h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,m=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?e+=h/l:e+=h*Math.pow(2,1-d),e*l>=2&&(a++,l/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(e*l-1)*Math.pow(2,r),a=a+d):(o=e*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;i[t+f]=o&255,f+=m,o/=256,r-=8);for(a=a<<r|o,c+=r;c>0;i[t+f]=a&255,f+=m,a/=256,c-=8);i[t+f-m]|=p*128}var l5={}.toString,tA=Array.isArray||function(i){return l5.call(i)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var c5=50;Pe.TYPED_ARRAY_SUPPORT=Tc.TYPED_ARRAY_SUPPORT!==void 0?Tc.TYPED_ARRAY_SUPPORT:!0;function Jm(){return Pe.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Gr(i,e){if(Jm()<e)throw new RangeError("Invalid typed array length");return Pe.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(e),i.__proto__=Pe.prototype):(i===null&&(i=new Pe(e)),i.length=e),i}function Pe(i,e,t){if(!Pe.TYPED_ARRAY_SUPPORT&&!(this instanceof Pe))return new Pe(i,e,t);if(typeof i=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return zy(this,i)}return nA(this,i,e,t)}Pe.poolSize=8192;Pe._augment=function(i){return i.__proto__=Pe.prototype,i};function nA(i,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?h5(i,e,t,n):typeof e=="string"?d5(i,e,t):f5(i,e)}Pe.from=function(i,e,t){return nA(null,i,e,t)};Pe.TYPED_ARRAY_SUPPORT&&(Pe.prototype.__proto__=Uint8Array.prototype,Pe.__proto__=Uint8Array);function iA(i){if(typeof i!="number")throw new TypeError('"size" argument must be a number');if(i<0)throw new RangeError('"size" argument must not be negative')}function u5(i,e,t,n){return iA(e),e<=0?Gr(i,e):t!==void 0?typeof n=="string"?Gr(i,e).fill(t,n):Gr(i,e).fill(t):Gr(i,e)}Pe.alloc=function(i,e,t){return u5(null,i,e,t)};function zy(i,e){if(iA(e),i=Gr(i,e<0?0:Vy(e)|0),!Pe.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)i[t]=0;return i}Pe.allocUnsafe=function(i){return zy(null,i)};Pe.allocUnsafeSlow=function(i){return zy(null,i)};function d5(i,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Pe.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=rA(e,t)|0;i=Gr(i,n);var r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}function Xm(i,e){var t=e.length<0?0:Vy(e.length)|0;i=Gr(i,t);for(var n=0;n<t;n+=1)i[n]=e[n]&255;return i}function h5(i,e,t,n){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),Pe.TYPED_ARRAY_SUPPORT?(i=e,i.__proto__=Pe.prototype):i=Xm(i,e),i}function f5(i,e){if(Rr(e)){var t=Vy(e.length)|0;return i=Gr(i,t),i.length===0||e.copy(i,0,0,t),i}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||I5(e.length)?Gr(i,0):Xm(i,e);if(e.type==="Buffer"&&tA(e.data))return Xm(i,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Vy(i){if(i>=Jm())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Jm().toString(16)+" bytes");return i|0}Pe.isBuffer=$5;function Rr(i){return!!(i!=null&&i._isBuffer)}Pe.compare=function(e,t){if(!Rr(e)||!Rr(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,s=0,a=Math.min(n,r);s<a;++s)if(e[s]!==t[s]){n=e[s],r=t[s];break}return n<r?-1:r<n?1:0};Pe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Pe.concat=function(e,t){if(!tA(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Pe.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Pe.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!Rr(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,s),s+=a.length}return r};function rA(i,e){if(Rr(i))return i.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(i)||i instanceof ArrayBuffer))return i.byteLength;typeof i!="string"&&(i=""+i);var t=i.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Xd(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return dA(i).length;default:if(n)return Xd(i).length;e=(""+e).toLowerCase(),n=!0}}Pe.byteLength=rA;function p5(i,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return S5(this,e,t);case"utf8":case"utf-8":return oA(this,e,t);case"ascii":return x5(this,e,t);case"latin1":case"binary":return T5(this,e,t);case"base64":return w5(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C5(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),n=!0}}Pe.prototype._isBuffer=!0;function pa(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}Pe.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)pa(this,t,t+1);return this};Pe.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)pa(this,t,t+3),pa(this,t+1,t+2);return this};Pe.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)pa(this,t,t+7),pa(this,t+1,t+6),pa(this,t+2,t+5),pa(this,t+3,t+4);return this};Pe.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?oA(this,0,e):p5.apply(this,arguments)};Pe.prototype.equals=function(e){if(!Rr(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Pe.compare(this,e)===0};Pe.prototype.inspect=function(){var e="",t=c5;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};Pe.prototype.compare=function(e,t,n,r,s){if(!Rr(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),s===void 0&&(s=this.length),t<0||n>e.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&t>=n)return 0;if(r>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,s>>>=0,this===e)return 0;for(var a=s-r,o=n-t,l=Math.min(a,o),c=this.slice(r,s),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){a=c[d],o=u[d];break}return a<o?-1:o<a?1:0};function sA(i,e,t,n,r){if(i.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=r?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(r)return-1;t=i.length-1}else if(t<0)if(r)t=0;else return-1;if(typeof e=="string"&&(e=Pe.from(e,n)),Rr(e))return e.length===0?-1:aE(i,e,t,n,r);if(typeof e=="number")return e=e&255,Pe.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):aE(i,[e],t,n,r);throw new TypeError("val must be string, number or Buffer")}function aE(i,e,t,n,r){var s=1,a=i.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(i.length<2||e.length<2)return-1;s=2,a/=2,o/=2,t/=2}function l(f,m){return s===1?f[m]:f.readUInt16BE(m*s)}var c;if(r){var u=-1;for(c=t;c<a;c++)if(l(i,c)===l(e,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===o)return u*s}else u!==-1&&(c-=c-u),u=-1}else for(t+o>a&&(t=a-o),c=t;c>=0;c--){for(var d=!0,h=0;h<o;h++)if(l(i,c+h)!==l(e,h)){d=!1;break}if(d)return c}return-1}Pe.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Pe.prototype.indexOf=function(e,t,n){return sA(this,e,t,n,!0)};Pe.prototype.lastIndexOf=function(e,t,n){return sA(this,e,t,n,!1)};function m5(i,e,t,n){t=Number(t)||0;var r=i.length-t;n?(n=Number(n),n>r&&(n=r)):n=r;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(a*2,2),16);if(isNaN(o))return a;i[t+a]=o}return a}function g5(i,e,t,n){return ff(Xd(e,i.length-t),i,t,n)}function aA(i,e,t,n){return ff(R5(e),i,t,n)}function y5(i,e,t,n){return aA(i,e,t,n)}function b5(i,e,t,n){return ff(dA(e),i,t,n)}function v5(i,e,t,n){return ff(P5(e,i.length-t),i,t,n)}Pe.prototype.write=function(e,t,n,r){if(t===void 0)r="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")r=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,r===void 0&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return m5(this,e,t,n);case"utf8":case"utf-8":return g5(this,e,t,n);case"ascii":return aA(this,e,t,n);case"latin1":case"binary":return y5(this,e,t,n);case"base64":return b5(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v5(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}};Pe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w5(i,e,t){return e===0&&t===i.length?sE(i):sE(i.slice(e,t))}function oA(i,e,t){t=Math.min(i.length,t);for(var n=[],r=e;r<t;){var s=i[r],a=null,o=s>239?4:s>223?3:s>191?2:1;if(r+o<=t){var l,c,u,d;switch(o){case 1:s<128&&(a=s);break;case 2:l=i[r+1],(l&192)===128&&(d=(s&31)<<6|l&63,d>127&&(a=d));break;case 3:l=i[r+1],c=i[r+2],(l&192)===128&&(c&192)===128&&(d=(s&15)<<12|(l&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:l=i[r+1],c=i[r+2],u=i[r+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(d=(s&15)<<18|(l&63)<<12|(c&63)<<6|u&63,d>65535&&d<1114112&&(a=d))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),r+=o}return E5(n)}var oE=4096;function E5(i){var e=i.length;if(e<=oE)return String.fromCharCode.apply(String,i);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,i.slice(n,n+=oE));return t}function x5(i,e,t){var n="";t=Math.min(i.length,t);for(var r=e;r<t;++r)n+=String.fromCharCode(i[r]&127);return n}function T5(i,e,t){var n="";t=Math.min(i.length,t);for(var r=e;r<t;++r)n+=String.fromCharCode(i[r]);return n}function S5(i,e,t){var n=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var r="",s=e;s<t;++s)r+=_5(i[s]);return r}function C5(i,e,t){for(var n=i.slice(e,t),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+n[s+1]*256);return r}Pe.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(Pe.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=Pe.prototype;else{var s=t-e;r=new Pe(s,void 0);for(var a=0;a<s;++a)r[a]=this[a+e]}return r};function An(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}Pe.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||An(e,t,this.length);for(var r=this[e],s=1,a=0;++a<t&&(s*=256);)r+=this[e+a]*s;return r};Pe.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||An(e,t,this.length);for(var r=this[e+--t],s=1;t>0&&(s*=256);)r+=this[e+--t]*s;return r};Pe.prototype.readUInt8=function(e,t){return t||An(e,1,this.length),this[e]};Pe.prototype.readUInt16LE=function(e,t){return t||An(e,2,this.length),this[e]|this[e+1]<<8};Pe.prototype.readUInt16BE=function(e,t){return t||An(e,2,this.length),this[e]<<8|this[e+1]};Pe.prototype.readUInt32LE=function(e,t){return t||An(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Pe.prototype.readUInt32BE=function(e,t){return t||An(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Pe.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||An(e,t,this.length);for(var r=this[e],s=1,a=0;++a<t&&(s*=256);)r+=this[e+a]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*t)),r};Pe.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||An(e,t,this.length);for(var r=t,s=1,a=this[e+--r];r>0&&(s*=256);)a+=this[e+--r]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*t)),a};Pe.prototype.readInt8=function(e,t){return t||An(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Pe.prototype.readInt16LE=function(e,t){t||An(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Pe.prototype.readInt16BE=function(e,t){t||An(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Pe.prototype.readInt32LE=function(e,t){return t||An(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Pe.prototype.readInt32BE=function(e,t){return t||An(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Pe.prototype.readFloatLE=function(e,t){return t||An(e,4,this.length),uf(this,e,!0,23,4)};Pe.prototype.readFloatBE=function(e,t){return t||An(e,4,this.length),uf(this,e,!1,23,4)};Pe.prototype.readDoubleLE=function(e,t){return t||An(e,8,this.length),uf(this,e,!0,52,8)};Pe.prototype.readDoubleBE=function(e,t){return t||An(e,8,this.length),uf(this,e,!1,52,8)};function ui(i,e,t,n,r,s){if(!Rr(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>i.length)throw new RangeError("Index out of range")}Pe.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t=t|0,n=n|0,!r){var s=Math.pow(2,8*n)-1;ui(this,e,t,n,s,0)}var a=1,o=0;for(this[t]=e&255;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n};Pe.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t=t|0,n=n|0,!r){var s=Math.pow(2,8*n)-1;ui(this,e,t,n,s,0)}var a=n-1,o=1;for(this[t+a]=e&255;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n};Pe.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,1,255,0),Pe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function df(i,e,t,n){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(i.length-t,2);r<s;++r)i[t+r]=(e&255<<8*(n?r:1-r))>>>(n?r:1-r)*8}Pe.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,2,65535,0),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):df(this,e,t,!0),t+2};Pe.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,2,65535,0),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):df(this,e,t,!1),t+2};function hf(i,e,t,n){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(i.length-t,4);r<s;++r)i[t+r]=e>>>(n?r:3-r)*8&255}Pe.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,4,4294967295,0),Pe.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):hf(this,e,t,!0),t+4};Pe.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,4,4294967295,0),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):hf(this,e,t,!1),t+4};Pe.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=t|0,!r){var s=Math.pow(2,8*n-1);ui(this,e,t,n,s-1,-s)}var a=0,o=1,l=0;for(this[t]=e&255;++a<n&&(o*=256);)e<0&&l===0&&this[t+a-1]!==0&&(l=1),this[t+a]=(e/o>>0)-l&255;return t+n};Pe.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=t|0,!r){var s=Math.pow(2,8*n-1);ui(this,e,t,n,s-1,-s)}var a=n-1,o=1,l=0;for(this[t+a]=e&255;--a>=0&&(o*=256);)e<0&&l===0&&this[t+a+1]!==0&&(l=1),this[t+a]=(e/o>>0)-l&255;return t+n};Pe.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,1,127,-128),Pe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};Pe.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,2,32767,-32768),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):df(this,e,t,!0),t+2};Pe.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,2,32767,-32768),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):df(this,e,t,!1),t+2};Pe.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,4,2147483647,-2147483648),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):hf(this,e,t,!0),t+4};Pe.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||ui(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):hf(this,e,t,!1),t+4};function lA(i,e,t,n,r,s){if(t+n>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function cA(i,e,t,n,r){return r||lA(i,e,t,4),eA(i,e,t,n,23,4),t+4}Pe.prototype.writeFloatLE=function(e,t,n){return cA(this,e,t,!0,n)};Pe.prototype.writeFloatBE=function(e,t,n){return cA(this,e,t,!1,n)};function uA(i,e,t,n,r){return r||lA(i,e,t,8),eA(i,e,t,n,52,8),t+8}Pe.prototype.writeDoubleLE=function(e,t,n){return uA(this,e,t,!0,n)};Pe.prototype.writeDoubleBE=function(e,t,n){return uA(this,e,t,!1,n)};Pe.prototype.copy=function(e,t,n,r){if(n||(n=0),!r&&r!==0&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var s=r-n,a;if(this===e&&n<t&&t<r)for(a=s-1;a>=0;--a)e[a+t]=this[a+n];else if(s<1e3||!Pe.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s};Pe.prototype.fill=function(e,t,n,r){if(typeof e=="string"){if(typeof t=="string"?(r=t,t=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!Pe.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<n;++a)this[a]=e;else{var o=Rr(e)?e:Xd(new Pe(e,r).toString()),l=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%l]}return this};var A5=/[^+\/0-9A-Za-z-_]/g;function N5(i){if(i=k5(i).replace(A5,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function k5(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function _5(i){return i<16?"0"+i.toString(16):i.toString(16)}function Xd(i,e){e=e||1/0;for(var t,n=i.length,r=null,s=[],a=0;a<n;++a){if(t=i.charCodeAt(a),t>55295&&t<57344){if(!r){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),r=t;continue}t=(r-55296<<10|t-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function R5(i){for(var e=[],t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function P5(i,e){for(var t,n,r,s=[],a=0;a<i.length&&!((e-=2)<0);++a)t=i.charCodeAt(a),n=t>>8,r=t%256,s.push(r),s.push(n);return s}function dA(i){return s5(N5(i))}function ff(i,e,t,n){for(var r=0;r<n&&!(r+t>=e.length||r>=i.length);++r)e[r+t]=i[r];return r}function I5(i){return i!==i}function $5(i){return i!=null&&(!!i._isBuffer||hA(i)||O5(i))}function hA(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function O5(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&hA(i.slice(0,0))}var Ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wy(i,e,t){return t={path:e,exports:{},require:function(n,r){return Kr()}},i(t,t.exports),t.exports}function fA(i){if(i.__esModule)return i;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(t){var n=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return i[t]}})}),e}function Kr(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function pA(i,e){for(var t=0,n=i.length-1;n>=0;n--){var r=i[n];r==="."?i.splice(n,1):r===".."?(i.splice(n,1),t++):t&&(i.splice(n,1),t--)}if(e)for(;t--;t)i.unshift("..");return i}var D5=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Hy=function(i){return D5.exec(i).slice(1)};function Zd(){for(var i="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;i=n+"/"+i,e=n.charAt(0)==="/"}return i=pA(Ky(i.split("/"),function(r){return!!r}),!e).join("/"),(e?"/":"")+i||"."}function Qy(i){var e=Gy(i),t=L5(i,-1)==="/";return i=pA(Ky(i.split("/"),function(n){return!!n}),!e).join("/"),!i&&!e&&(i="."),i&&t&&(i+="/"),(e?"/":"")+i}function Gy(i){return i.charAt(0)==="/"}function mA(){var i=Array.prototype.slice.call(arguments,0);return Qy(Ky(i,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function gA(i,e){i=Zd(i).substr(1),e=Zd(e).substr(1);function t(c){for(var u=0;u<c.length&&c[u]==="";u++);for(var d=c.length-1;d>=0&&c[d]==="";d--);return u>d?[]:c.slice(u,d-u+1)}for(var n=t(i.split("/")),r=t(e.split("/")),s=Math.min(n.length,r.length),a=s,o=0;o<s;o++)if(n[o]!==r[o]){a=o;break}for(var l=[],o=a;o<n.length;o++)l.push("..");return l=l.concat(r.slice(a)),l.join("/")}var yA="/",bA=":";function vA(i){var e=Hy(i),t=e[0],n=e[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)}function wA(i,e){var t=Hy(i)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function EA(i){return Hy(i)[3]}const M5={extname:EA,basename:wA,dirname:vA,sep:yA,delimiter:bA,relative:gA,join:mA,isAbsolute:Gy,normalize:Qy,resolve:Zd};function Ky(i,e){if(i.filter)return i.filter(e);for(var t=[],n=0;n<i.length;n++)e(i[n],n,i)&&t.push(i[n]);return t}var L5="ab".substr(-1)==="b"?function(i,e,t){return i.substr(e,t)}:function(i,e,t){return e<0&&(e=i.length+e),i.substr(e,t)};const B5=Object.freeze({__proto__:null,resolve:Zd,normalize:Qy,isAbsolute:Gy,join:mA,relative:gA,sep:yA,delimiter:bA,dirname:vA,basename:wA,extname:EA,default:M5}),q5={},F5=Object.freeze({__proto__:null,default:q5}),lE=fA(B5),cE=fA(F5);var j5=Wy(function(i,e){var t=void 0,n=function(r){return t||(t=new Promise(function(s,a){var o=typeof r<"u"?r:{},l=o.onAbort;o.onAbort=function(g){a(new Error(g)),l&&l(g)},o.postRun=o.postRun||[],o.postRun.push(function(){s(o)}),i=void 0;var c;c||(c=typeof o<"u"?o:{}),c.onRuntimeInitialized=function(){function g(fe,Oe){switch(typeof Oe){case"boolean":GA(fe,Oe?1:0);break;case"number":WA(fe,Oe);break;case"string":HA(fe,Oe,-1,-1);break;case"object":if(Oe===null)rb(fe);else if(Oe.length!=null){var Je=ul(Oe);QA(fe,Je,Oe.length,-1),Gc(Je)}else Yc(fe,"Wrong API use : tried to return a value of an unknown type ("+Oe+").",-1);break;default:rb(fe)}}function T(fe,Oe){for(var Je=[],rt=0;rt<fe;rt+=1){var dt=Se(Oe+4*rt,"i32"),Pt=FA(dt);if(Pt===1||Pt===2)dt=VA(dt);else if(Pt===3)dt=UA(dt);else if(Pt===4){Pt=dt,dt=jA(Pt),Pt=zA(Pt);for(var gr=new Uint8Array(dt),fi=0;fi<dt;fi+=1)gr[fi]=re[Pt+fi];dt=gr}else dt=null;Je.push(dt)}return Je}function N(fe,Oe){this.La=fe,this.db=Oe,this.Ja=1,this.fb=[]}function j(fe,Oe){if(this.db=Oe,Oe=Z(fe)+1,this.Ya=Xs(Oe),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");S(fe,de,this.Ya,Oe),this.eb=this.Ya,this.Ua=this.ib=null}function K(fe){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),fe!=null){var Oe=this.filename,Je="/",rt=Oe;if(Je&&(Je=typeof Je=="string"?Je:Or(Je),rt=Oe?G(Je+"/"+Oe):Je),Oe=Qa(!0,!0),rt=ls(rt,(Oe!==void 0?Oe:438)&4095|32768,0),fe){if(typeof fe=="string"){Je=Array(fe.length);for(var dt=0,Pt=fe.length;dt<Pt;++dt)Je[dt]=fe.charCodeAt(dt);fe=Je}Dr(rt,Oe|146),Je=hi(rt,577),Mt(Je,fe,0,fe.length,0),me(Je),Dr(rt,Oe)}}this.handleError(st(this.filename,Ee)),this.db=Se(Ee,"i32"),KA(this.db),this.Za={},this.Na={}}var Ee=cs(4),ke=c.cwrap,st=ke("sqlite3_open","number",["string","number"]),Ct=ke("sqlite3_close_v2","number",["number"]),vt=ke("sqlite3_exec","number",["number","string","number","number","number"]),an=ke("sqlite3_changes","number",["number"]),Br=ke("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Zy=ke("sqlite3_sql","string",["number"]),TA=ke("sqlite3_normalized_sql","string",["number"]),eb=ke("sqlite3_prepare_v2","number",["number","number","number","number","number"]),SA=ke("sqlite3_bind_text","number",["number","number","number","number","number"]),tb=ke("sqlite3_bind_blob","number",["number","number","number","number","number"]),CA=ke("sqlite3_bind_double","number",["number","number","number"]),AA=ke("sqlite3_bind_int","number",["number","number","number"]),NA=ke("sqlite3_bind_parameter_index","number",["number","string"]),kA=ke("sqlite3_step","number",["number"]),_A=ke("sqlite3_errmsg","string",["number"]),RA=ke("sqlite3_column_count","number",["number"]),PA=ke("sqlite3_data_count","number",["number"]),IA=ke("sqlite3_column_double","number",["number","number"]),nb=ke("sqlite3_column_text","string",["number","number"]),$A=ke("sqlite3_column_blob","number",["number","number"]),OA=ke("sqlite3_column_bytes","number",["number","number"]),DA=ke("sqlite3_column_type","number",["number","number"]),MA=ke("sqlite3_column_name","string",["number","number"]),LA=ke("sqlite3_reset","number",["number"]),BA=ke("sqlite3_clear_bindings","number",["number"]),qA=ke("sqlite3_finalize","number",["number"]),ib=ke("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),FA=ke("sqlite3_value_type","number",["number"]),jA=ke("sqlite3_value_bytes","number",["number"]),UA=ke("sqlite3_value_text","string",["number"]),zA=ke("sqlite3_value_blob","number",["number"]),VA=ke("sqlite3_value_double","number",["number"]),WA=ke("sqlite3_result_double","",["number","number"]),rb=ke("sqlite3_result_null","",["number"]),HA=ke("sqlite3_result_text","",["number","string","number","number"]),QA=ke("sqlite3_result_blob","",["number","number","number","number"]),GA=ke("sqlite3_result_int","",["number","number"]),Yc=ke("sqlite3_result_error","",["number","string","number"]),sb=ke("sqlite3_aggregate_context","number",["number","number"]),KA=ke("RegisterExtensionFunctions","number",["number"]);N.prototype.bind=function(fe){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(fe)?this.xb(fe):fe!=null&&typeof fe=="object"?this.yb(fe):!0},N.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var fe=kA(this.La);switch(fe){case 100:return!0;case 101:return!1;default:throw this.db.handleError(fe)}},N.prototype.sb=function(fe){return fe==null&&(fe=this.Ja,this.Ja+=1),IA(this.La,fe)},N.prototype.Cb=function(fe){if(fe==null&&(fe=this.Ja,this.Ja+=1),fe=nb(this.La,fe),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(fe)},N.prototype.Db=function(fe){return fe==null&&(fe=this.Ja,this.Ja+=1),nb(this.La,fe)},N.prototype.getBlob=function(fe){fe==null&&(fe=this.Ja,this.Ja+=1);var Oe=OA(this.La,fe);fe=$A(this.La,fe);for(var Je=new Uint8Array(Oe),rt=0;rt<Oe;rt+=1)Je[rt]=re[fe+rt];return Je},N.prototype.get=function(fe,Oe){Oe=Oe||{},fe!=null&&this.bind(fe)&&this.step(),fe=[];for(var Je=PA(this.La),rt=0;rt<Je;rt+=1)switch(DA(this.La,rt)){case 1:var dt=Oe.useBigInt?this.Cb(rt):this.sb(rt);fe.push(dt);break;case 2:fe.push(this.sb(rt));break;case 3:fe.push(this.Db(rt));break;case 4:fe.push(this.getBlob(rt));break;default:fe.push(null)}return fe},N.prototype.getColumnNames=function(){for(var fe=[],Oe=RA(this.La),Je=0;Je<Oe;Je+=1)fe.push(MA(this.La,Je));return fe},N.prototype.getAsObject=function(fe,Oe){fe=this.get(fe,Oe),Oe=this.getColumnNames();for(var Je={},rt=0;rt<Oe.length;rt+=1)Je[Oe[rt]]=fe[rt];return Je},N.prototype.getSQL=function(){return Zy(this.La)},N.prototype.getNormalizedSQL=function(){return TA(this.La)},N.prototype.run=function(fe){return fe!=null&&this.bind(fe),this.step(),this.reset()},N.prototype.nb=function(fe,Oe){Oe==null&&(Oe=this.Ja,this.Ja+=1),fe=x(fe);var Je=ul(fe);this.fb.push(Je),this.db.handleError(SA(this.La,Oe,Je,fe.length-1,0))},N.prototype.wb=function(fe,Oe){Oe==null&&(Oe=this.Ja,this.Ja+=1);var Je=ul(fe);this.fb.push(Je),this.db.handleError(tb(this.La,Oe,Je,fe.length,0))},N.prototype.mb=function(fe,Oe){Oe==null&&(Oe=this.Ja,this.Ja+=1),this.db.handleError((fe===(fe|0)?AA:CA)(this.La,Oe,fe))},N.prototype.zb=function(fe){fe==null&&(fe=this.Ja,this.Ja+=1),tb(this.La,fe,0,0,0)},N.prototype.ob=function(fe,Oe){switch(Oe==null&&(Oe=this.Ja,this.Ja+=1),typeof fe){case"string":this.nb(fe,Oe);return;case"number":this.mb(fe,Oe);return;case"bigint":this.nb(fe.toString(),Oe);return;case"boolean":this.mb(fe+0,Oe);return;case"object":if(fe===null){this.zb(Oe);return}if(fe.length!=null){this.wb(fe,Oe);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+fe+")."},N.prototype.yb=function(fe){var Oe=this;return Object.keys(fe).forEach(function(Je){var rt=NA(Oe.La,Je);rt!==0&&Oe.ob(fe[Je],rt)}),!0},N.prototype.xb=function(fe){for(var Oe=0;Oe<fe.length;Oe+=1)this.ob(fe[Oe],Oe+1);return!0},N.prototype.reset=function(){return this.freemem(),BA(this.La)===0&&LA(this.La)===0},N.prototype.freemem=function(){for(var fe;(fe=this.fb.pop())!==void 0;)Gc(fe)},N.prototype.free=function(){this.freemem();var fe=qA(this.La)===0;return delete this.db.Za[this.La],this.La=0,fe},j.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var fe=hl(),Oe=cs(4);ce(Ee),ce(Oe);try{this.db.handleError(eb(this.db.db,this.eb,-1,Ee,Oe)),this.eb=Se(Oe,"i32");var Je=Se(Ee,"i32");return Je===0?(this.gb(),{done:!0}):(this.Ua=new N(Je,this.db),this.db.Za[Je]=this.Ua,{value:this.Ua,done:!1})}catch(rt){throw this.ib=q(this.eb),this.gb(),rt}finally{fl(fe)}},j.prototype.gb=function(){Gc(this.Ya),this.Ya=null},j.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:q(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(j.prototype[Symbol.iterator]=function(){return this}),K.prototype.run=function(fe,Oe){if(!this.db)throw"Database closed";if(Oe){fe=this.prepare(fe,Oe);try{fe.step()}finally{fe.free()}}else this.handleError(vt(this.db,fe,0,0,Ee));return this},K.prototype.exec=function(fe,Oe,Je){if(!this.db)throw"Database closed";var rt=hl(),dt=null;try{var Pt=Z(fe)+1,gr=cs(Pt);S(fe,re,gr,Pt);var fi=gr,Ni=cs(4);for(fe=[];Se(fi,"i8")!==0;){ce(Ee),ce(Ni),this.handleError(eb(this.db,fi,-1,Ee,Ni));var ki=Se(Ee,"i32");if(fi=Se(Ni,"i32"),ki!==0){for(Pt=null,dt=new N(ki,this),Oe!=null&&dt.bind(Oe);dt.step();)Pt===null&&(Pt={columns:dt.getColumnNames(),values:[]},fe.push(Pt)),Pt.values.push(dt.get(null,Je));dt.free()}}return fe}catch(pl){throw dt&&dt.free(),pl}finally{fl(rt)}},K.prototype.each=function(fe,Oe,Je,rt,dt){typeof Oe=="function"&&(rt=Je,Je=Oe,Oe=void 0),fe=this.prepare(fe,Oe);try{for(;fe.step();)Je(fe.getAsObject(null,dt))}finally{fe.free()}if(typeof rt=="function")return rt()},K.prototype.prepare=function(fe,Oe){if(ce(Ee),this.handleError(Br(this.db,fe,-1,Ee,0)),fe=Se(Ee,"i32"),fe===0)throw"Nothing to prepare";var Je=new N(fe,this);return Oe!=null&&Je.bind(Oe),this.Za[fe]=Je},K.prototype.iterateStatements=function(fe){return new j(fe,this)},K.prototype.export=function(){Object.values(this.Za).forEach(function(Oe){Oe.free()}),Object.values(this.Na).forEach(Lr),this.Na={},this.handleError(Ct(this.db));var fe=Gt(this.filename);return this.handleError(st(this.filename,Ee)),this.db=Se(Ee,"i32"),fe},K.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(fe){fe.free()}),Object.values(this.Na).forEach(Lr),this.Na={},this.handleError(Ct(this.db)),za("/"+this.filename),this.db=null)},K.prototype.handleError=function(fe){if(fe===0)return null;throw fe=_A(this.db),Error(fe)},K.prototype.getRowsModified=function(){return an(this.db)},K.prototype.create_function=function(fe,Oe){Object.prototype.hasOwnProperty.call(this.Na,fe)&&(Lr(this.Na[fe]),delete this.Na[fe]);var Je=Mr(function(rt,dt,Pt){dt=T(dt,Pt);try{var gr=Oe.apply(null,dt)}catch(fi){Yc(rt,fi,-1);return}g(rt,gr)},"viii");return this.Na[fe]=Je,this.handleError(ib(this.db,fe,Oe.length,1,0,Je,0,0,0)),this},K.prototype.create_aggregate=function(fe,Oe){var Je=Oe.init||function(){return null},rt=Oe.finalize||function(Ni){return Ni},dt=Oe.step;if(!dt)throw"An aggregate function must have a step function in "+fe;var Pt={};Object.hasOwnProperty.call(this.Na,fe)&&(Lr(this.Na[fe]),delete this.Na[fe]),Oe=fe+"__finalize",Object.hasOwnProperty.call(this.Na,Oe)&&(Lr(this.Na[Oe]),delete this.Na[Oe]);var gr=Mr(function(Ni,ki,pl){var Zs=sb(Ni,1);Object.hasOwnProperty.call(Pt,Zs)||(Pt[Zs]=Je()),ki=T(ki,pl),ki=[Pt[Zs]].concat(ki);try{Pt[Zs]=dt.apply(null,ki)}catch(YA){delete Pt[Zs],Yc(Ni,YA,-1)}},"viii"),fi=Mr(function(Ni){var ki=sb(Ni,1);try{var pl=rt(Pt[ki])}catch(Zs){delete Pt[ki],Yc(Ni,Zs,-1);return}g(Ni,pl),delete Pt[ki]},"vi");return this.Na[fe]=gr,this.Na[Oe]=fi,this.handleError(ib(this.db,fe,dt.length-1,1,0,0,gr,fi,0)),this},c.Database=K};var u=Object.assign({},c),d="./this.program",h=typeof window=="object",f=typeof importScripts=="function",m=typeof ys=="object"&&typeof ys.versions=="object"&&typeof ys.versions.node=="string",p="",w,y,b,E,_,k;m?(p=f?lE.dirname(p)+"/":i5+"/",k=()=>{_||(E=cE,_=lE)},w=function(g,T){return k(),g=_.normalize(g),E.readFileSync(g,T?void 0:"utf8")},b=g=>(g=w(g,!0),g.buffer||(g=new Uint8Array(g)),g),y=(g,T,N)=>{k(),g=_.normalize(g),E.readFile(g,function(j,K){j?N(j):T(K.buffer)})},1<ys.argv.length&&(d=ys.argv[1].replace(/\\/g,"/")),i.exports=c,c.inspect=function(){return"[Emscripten Module object]"}):(h||f)&&(f?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),p=p.indexOf("blob:")!==0?p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w=g=>{var T=new XMLHttpRequest;return T.open("GET",g,!1),T.send(null),T.responseText},f&&(b=g=>{var T=new XMLHttpRequest;return T.open("GET",g,!1),T.responseType="arraybuffer",T.send(null),new Uint8Array(T.response)}),y=(g,T,N)=>{var j=new XMLHttpRequest;j.open("GET",g,!0),j.responseType="arraybuffer",j.onload=()=>{j.status==200||j.status==0&&j.response?T(j.response):N()},j.onerror=N,j.send(null)});var B=c.print||console.log.bind(console),D=c.printErr||console.warn.bind(console);Object.assign(c,u),u=null,c.thisProgram&&(d=c.thisProgram);var O;c.wasmBinary&&(O=c.wasmBinary),typeof WebAssembly!="object"&&Tt("no native wasm support detected");var R,Q=!1,$=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function P(g,T,N){var j=T+N;for(N=T;g[N]&&!(N>=j);)++N;if(16<N-T&&g.buffer&&$)return $.decode(g.subarray(T,N));for(j="";T<N;){var K=g[T++];if(K&128){var Ee=g[T++]&63;if((K&224)==192)j+=String.fromCharCode((K&31)<<6|Ee);else{var ke=g[T++]&63;K=(K&240)==224?(K&15)<<12|Ee<<6|ke:(K&7)<<18|Ee<<12|ke<<6|g[T++]&63,65536>K?j+=String.fromCharCode(K):(K-=65536,j+=String.fromCharCode(55296|K>>10,56320|K&1023))}}else j+=String.fromCharCode(K)}return j}function q(g,T){return g?P(de,g,T):""}function S(g,T,N,j){if(!(0<j))return 0;var K=N;j=N+j-1;for(var Ee=0;Ee<g.length;++Ee){var ke=g.charCodeAt(Ee);if(55296<=ke&&57343>=ke){var st=g.charCodeAt(++Ee);ke=65536+((ke&1023)<<10)|st&1023}if(127>=ke){if(N>=j)break;T[N++]=ke}else{if(2047>=ke){if(N+1>=j)break;T[N++]=192|ke>>6}else{if(65535>=ke){if(N+2>=j)break;T[N++]=224|ke>>12}else{if(N+3>=j)break;T[N++]=240|ke>>18,T[N++]=128|ke>>12&63}T[N++]=128|ke>>6&63}T[N++]=128|ke&63}}return T[N]=0,N-K}function Z(g){for(var T=0,N=0;N<g.length;++N){var j=g.charCodeAt(N);127>=j?T++:2047>=j?T+=2:55296<=j&&57343>=j?(T+=4,++N):T+=3}return T}var ve,re,de,ne,Y,F,H,_e;function we(){var g=R.buffer;ve=g,c.HEAP8=re=new Int8Array(g),c.HEAP16=ne=new Int16Array(g),c.HEAP32=Y=new Int32Array(g),c.HEAPU8=de=new Uint8Array(g),c.HEAPU16=new Uint16Array(g),c.HEAPU32=F=new Uint32Array(g),c.HEAPF32=H=new Float32Array(g),c.HEAPF64=_e=new Float64Array(g)}var ye,Ve=[],Ke=[],Ye=[];function Xe(){var g=c.preRun.shift();Ve.unshift(g)}var ft=0,ct=null;function Tt(g){throw c.onAbort&&c.onAbort(g),g="Aborted("+g+")",D(g),Q=!0,new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info.")}function Dt(){return C.startsWith("data:application/octet-stream;base64,")}var C;if(C="sql-wasm.wasm",!Dt()){var be=C;C=c.locateFile?c.locateFile(be,p):p+be}function ge(){var g=C;try{if(g==C&&O)return new Uint8Array(O);if(b)return b(g);throw"both async and sync fetching of the wasm failed"}catch(T){Tt(T)}}function z(){if(!O&&(h||f)){if(typeof fetch=="function"&&!C.startsWith("file://"))return fetch(C,{credentials:"same-origin"}).then(function(g){if(!g.ok)throw"failed to load wasm binary file at '"+C+"'";return g.arrayBuffer()}).catch(function(){return ge()});if(y)return new Promise(function(g,T){y(C,function(N){g(new Uint8Array(N))},T)})}return Promise.resolve().then(function(){return ge()})}var L,ie;function Ne(g){for(;0<g.length;)g.shift()(c)}function Se(g,T="i8"){switch(T.endsWith("*")&&(T="*"),T){case"i1":return re[g>>0];case"i8":return re[g>>0];case"i16":return ne[g>>1];case"i32":return Y[g>>2];case"i64":return Y[g>>2];case"float":return H[g>>2];case"double":return _e[g>>3];case"*":return F[g>>2];default:Tt("invalid type for getValue: "+T)}return null}function ce(g){var T="i32";switch(T.endsWith("*")&&(T="*"),T){case"i1":re[g>>0]=0;break;case"i8":re[g>>0]=0;break;case"i16":ne[g>>1]=0;break;case"i32":Y[g>>2]=0;break;case"i64":ie=[0,(L=0,1<=+Math.abs(L)?0<L?(Math.min(+Math.floor(L/4294967296),4294967295)|0)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],Y[g>>2]=ie[0],Y[g+4>>2]=ie[1];break;case"float":H[g>>2]=0;break;case"double":_e[g>>3]=0;break;case"*":F[g>>2]=0;break;default:Tt("invalid type for setValue: "+T)}}var $e=(g,T)=>{for(var N=0,j=g.length-1;0<=j;j--){var K=g[j];K==="."?g.splice(j,1):K===".."?(g.splice(j,1),N++):N&&(g.splice(j,1),N--)}if(T)for(;N;N--)g.unshift("..");return g},G=g=>{var T=g.charAt(0)==="/",N=g.substr(-1)==="/";return(g=$e(g.split("/").filter(j=>!!j),!T).join("/"))||T||(g="."),g&&N&&(g+="/"),(T?"/":"")+g},X=g=>{var T=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(g).slice(1);return g=T[0],T=T[1],!g&&!T?".":(T&&(T=T.substr(0,T.length-1)),g+T)},pe=g=>{if(g==="/")return"/";g=G(g),g=g.replace(/\/$/,"");var T=g.lastIndexOf("/");return T===-1?g:g.substr(T+1)};function A(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var g=new Uint8Array(1);return()=>(crypto.getRandomValues(g),g[0])}if(m)try{var T=cE;return()=>T.randomBytes(1)[0]}catch(N){}return()=>Tt("randomDevice")}function v(){for(var g="",T=!1,N=arguments.length-1;-1<=N&&!T;N--){if(T=0<=N?arguments[N]:"/",typeof T!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!T)return"";g=T+"/"+g,T=T.charAt(0)==="/"}return g=$e(g.split("/").filter(j=>!!j),!T).join("/"),(T?"/":"")+g||"."}function x(g,T){var N=Array(Z(g)+1);return g=S(g,N,0,N.length),T&&(N.length=g),N}var M=[];function V(g,T){M[g]={input:[],output:[],Xa:T},Gs(g,ee)}var ee={open:function(g){var T=M[g.node.rdev];if(!T)throw new Ce(43);g.tty=T,g.seekable=!1},close:function(g){g.tty.Xa.fsync(g.tty)},fsync:function(g){g.tty.Xa.fsync(g.tty)},read:function(g,T,N,j){if(!g.tty||!g.tty.Xa.tb)throw new Ce(60);for(var K=0,Ee=0;Ee<j;Ee++){try{var ke=g.tty.Xa.tb(g.tty)}catch(st){throw new Ce(29)}if(ke===void 0&&K===0)throw new Ce(6);if(ke==null)break;K++,T[N+Ee]=ke}return K&&(g.node.timestamp=Date.now()),K},write:function(g,T,N,j){if(!g.tty||!g.tty.Xa.jb)throw new Ce(60);try{for(var K=0;K<j;K++)g.tty.Xa.jb(g.tty,T[N+K])}catch(Ee){throw new Ce(29)}return j&&(g.node.timestamp=Date.now()),K}},oe={tb:function(g){if(!g.input.length){var T=null;if(m){var N=Pe.alloc(256),j=0;try{j=E.readSync(ys.stdin.fd,N,0,256,-1)}catch(K){if(K.toString().includes("EOF"))j=0;else throw K}0<j?T=N.slice(0,j).toString("utf-8"):T=null}else typeof window<"u"&&typeof window.prompt=="function"?(T=window.prompt("Input: "),T!==null&&(T+="\n")):typeof readline=="function"&&(T=readline(),T!==null&&(T+="\n"));if(!T)return null;g.input=x(T,!0)}return g.input.shift()},jb:function(g,T){T===null||T===10?(B(P(g.output,0)),g.output=[]):T!=0&&g.output.push(T)},fsync:function(g){g.output&&0<g.output.length&&(B(P(g.output,0)),g.output=[])}},Fe={jb:function(g,T){T===null||T===10?(D(P(g.output,0)),g.output=[]):T!=0&&g.output.push(T)},fsync:function(g){g.output&&0<g.output.length&&(D(P(g.output,0)),g.output=[])}},je={Qa:null,Ra:function(){return je.createNode(null,"/",16895,0)},createNode:function(g,T,N,j){if((N&61440)===24576||(N&61440)===4096)throw new Ce(63);return je.Qa||(je.Qa={dir:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa,lookup:je.Ga.lookup,ab:je.Ga.ab,rename:je.Ga.rename,unlink:je.Ga.unlink,rmdir:je.Ga.rmdir,readdir:je.Ga.readdir,symlink:je.Ga.symlink},stream:{Ta:je.Ha.Ta}},file:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa},stream:{Ta:je.Ha.Ta,read:je.Ha.read,write:je.Ha.write,lb:je.Ha.lb,bb:je.Ha.bb,cb:je.Ha.cb}},link:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa,readlink:je.Ga.readlink},stream:{}},pb:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa},stream:ll}}),N=Ws(g,T,N,j),(N.mode&61440)===16384?(N.Ga=je.Qa.dir.node,N.Ha=je.Qa.dir.stream,N.Ia={}):(N.mode&61440)===32768?(N.Ga=je.Qa.file.node,N.Ha=je.Qa.file.stream,N.Ma=0,N.Ia=null):(N.mode&61440)===40960?(N.Ga=je.Qa.link.node,N.Ha=je.Qa.link.stream):(N.mode&61440)===8192&&(N.Ga=je.Qa.pb.node,N.Ha=je.Qa.pb.stream),N.timestamp=Date.now(),g&&(g.Ia[T]=N,g.timestamp=N.timestamp),N},Jb:function(g){return g.Ia?g.Ia.subarray?g.Ia.subarray(0,g.Ma):new Uint8Array(g.Ia):new Uint8Array(0)},qb:function(g,T){var N=g.Ia?g.Ia.length:0;N>=T||(T=Math.max(T,N*(1048576>N?2:1.125)>>>0),N!=0&&(T=Math.max(T,256)),N=g.Ia,g.Ia=new Uint8Array(T),0<g.Ma&&g.Ia.set(N.subarray(0,g.Ma),0))},Gb:function(g,T){if(g.Ma!=T)if(T==0)g.Ia=null,g.Ma=0;else{var N=g.Ia;g.Ia=new Uint8Array(T),N&&g.Ia.set(N.subarray(0,Math.min(T,g.Ma))),g.Ma=T}},Ga:{Pa:function(g){var T={};return T.dev=(g.mode&61440)===8192?g.id:1,T.ino=g.id,T.mode=g.mode,T.nlink=1,T.uid=0,T.gid=0,T.rdev=g.rdev,(g.mode&61440)===16384?T.size=4096:(g.mode&61440)===32768?T.size=g.Ma:(g.mode&61440)===40960?T.size=g.link.length:T.size=0,T.atime=new Date(g.timestamp),T.mtime=new Date(g.timestamp),T.ctime=new Date(g.timestamp),T.Ab=4096,T.blocks=Math.ceil(T.size/T.Ab),T},Oa:function(g,T){T.mode!==void 0&&(g.mode=T.mode),T.timestamp!==void 0&&(g.timestamp=T.timestamp),T.size!==void 0&&je.Gb(g,T.size)},lookup:function(){throw di[44]},ab:function(g,T,N,j){return je.createNode(g,T,N,j)},rename:function(g,T,N){if((g.mode&61440)===16384){try{var j=$n(T,N)}catch(Ee){}if(j)for(var K in j.Ia)throw new Ce(55)}delete g.parent.Ia[g.name],g.parent.timestamp=Date.now(),g.name=N,T.Ia[N]=g,T.timestamp=g.parent.timestamp,g.parent=T},unlink:function(g,T){delete g.Ia[T],g.timestamp=Date.now()},rmdir:function(g,T){var N=$n(g,T),j;for(j in N.Ia)throw new Ce(55);delete g.Ia[T],g.timestamp=Date.now()},readdir:function(g){var T=[".",".."],N;for(N in g.Ia)g.Ia.hasOwnProperty(N)&&T.push(N);return T},symlink:function(g,T,N){return g=je.createNode(g,T,41471,0),g.link=N,g},readlink:function(g){if((g.mode&61440)!==40960)throw new Ce(28);return g.link}},Ha:{read:function(g,T,N,j,K){var Ee=g.node.Ia;if(K>=g.node.Ma)return 0;if(g=Math.min(g.node.Ma-K,j),8<g&&Ee.subarray)T.set(Ee.subarray(K,K+g),N);else for(j=0;j<g;j++)T[N+j]=Ee[K+j];return g},write:function(g,T,N,j,K,Ee){if(T.buffer===re.buffer&&(Ee=!1),!j)return 0;if(g=g.node,g.timestamp=Date.now(),T.subarray&&(!g.Ia||g.Ia.subarray)){if(Ee)return g.Ia=T.subarray(N,N+j),g.Ma=j;if(g.Ma===0&&K===0)return g.Ia=T.slice(N,N+j),g.Ma=j;if(K+j<=g.Ma)return g.Ia.set(T.subarray(N,N+j),K),j}if(je.qb(g,K+j),g.Ia.subarray&&T.subarray)g.Ia.set(T.subarray(N,N+j),K);else for(Ee=0;Ee<j;Ee++)g.Ia[K+Ee]=T[N+Ee];return g.Ma=Math.max(g.Ma,K+j),j},Ta:function(g,T,N){if(N===1?T+=g.position:N===2&&(g.node.mode&61440)===32768&&(T+=g.node.Ma),0>T)throw new Ce(28);return T},lb:function(g,T,N){je.qb(g.node,T+N),g.node.Ma=Math.max(g.node.Ma,T+N)},bb:function(g,T,N,j,K){if((g.node.mode&61440)!==32768)throw new Ce(43);if(g=g.node.Ia,K&2||g.buffer!==ve){if((0<N||N+T<g.length)&&(g.subarray?g=g.subarray(N,N+T):g=Array.prototype.slice.call(g,N,N+T)),N=!0,T=65536*Math.ceil(T/65536),(K=Jy(65536,T))?(de.fill(0,K,K+T),T=K):T=0,!T)throw new Ce(48);re.set(g,T)}else N=!1,T=g.byteOffset;return{Fb:T,vb:N}},cb:function(g,T,N,j,K){if((g.node.mode&61440)!==32768)throw new Ce(43);return K&2||je.Ha.write(g,T,0,j,N,!1),0}}},it=null,yt={},at=[],zs=1,sn=null,$r=!0,Ce=null,di={},bn=(g,T={})=>{if(g=v("/",g),!g)return{path:"",node:null};if(T=Object.assign({rb:!0,kb:0},T),8<T.kb)throw new Ce(32);g=$e(g.split("/").filter(ke=>!!ke),!1);for(var N=it,j="/",K=0;K<g.length;K++){var Ee=K===g.length-1;if(Ee&&T.parent)break;if(N=$n(N,g[K]),j=G(j+"/"+g[K]),N.Va&&(!Ee||Ee&&T.rb)&&(N=N.Va.root),!Ee||T.Sa){for(Ee=0;(N.mode&61440)===40960;)if(N=Va(j),j=v(X(j),N),N=bn(j,{kb:T.kb+1}).node,40<Ee++)throw new Ce(32)}}return{path:j,node:N}},Or=g=>{for(var T;;){if(g===g.parent)return g=g.Ra.ub,T?g[g.length-1]!=="/"?g+"/"+T:g+T:g;T=T?g.name+"/"+T:g.name,g=g.parent}},Vs=(g,T)=>{for(var N=0,j=0;j<T.length;j++)N=(N<<5)-N+T.charCodeAt(j)|0;return(g+N>>>0)%sn.length},Fa=g=>{var T=Vs(g.parent.id,g.name);if(sn[T]===g)sn[T]=g.Wa;else for(T=sn[T];T;){if(T.Wa===g){T.Wa=g.Wa;break}T=T.Wa}},$n=(g,T)=>{var N;if(N=(N=Xn(g,"x"))?N:g.Ga.lookup?0:2)throw new Ce(N,g);for(N=sn[Vs(g.id,T)];N;N=N.Wa){var j=N.name;if(N.parent.id===g.id&&j===T)return N}return g.Ga.lookup(g,T)},Ws=(g,T,N,j)=>(g=new mf(g,T,N,j),T=Vs(g.parent.id,g.name),g.Wa=sn[T],sn[T]=g),ol={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Hs=g=>{var T=["r","w","rw"][g&3];return g&512&&(T+="w"),T},Xn=(g,T)=>{if($r)return 0;if(!T.includes("r")||g.mode&292){if(T.includes("w")&&!(g.mode&146)||T.includes("x")&&!(g.mode&73))return 2}else return 2;return 0},Qs=(g,T)=>{try{return $n(g,T),20}catch(N){}return Xn(g,"wx")},os=(g,T,N)=>{try{var j=$n(g,T)}catch(K){return K.Ka}if(g=Xn(g,"wx"))return g;if(N){if((j.mode&61440)!==16384)return 54;if(j===j.parent||Or(j)==="/")return 10}else if((j.mode&61440)===16384)return 31;return 0},On=(g=0)=>{for(;4096>=g;g++)if(!at[g])return g;throw new Ce(33)},ja=(g,T)=>(J||(J=function(){this.$a={}},J.prototype={},Object.defineProperties(J.prototype,{object:{get:function(){return this.node},set:function(N){this.node=N}},flags:{get:function(){return this.$a.flags},set:function(N){this.$a.flags=N}},position:{get:function(){return this.$a.position},set:function(N){this.$a.position=N}}})),g=Object.assign(new J,g),T=On(T),g.fd=T,at[T]=g),ll={open:g=>{g.Ha=yt[g.node.rdev].Ha,g.Ha.open&&g.Ha.open(g)},Ta:()=>{throw new Ce(70)}},Gs=(g,T)=>{yt[g]={Ha:T}},Ks=(g,T)=>{var N=T==="/",j=!T;if(N&&it)throw new Ce(10);if(!N&&!j){var K=bn(T,{rb:!1});if(T=K.path,K=K.node,K.Va)throw new Ce(10);if((K.mode&61440)!==16384)throw new Ce(54)}T={type:g,Kb:{},ub:T,Eb:[]},g=g.Ra(T),g.Ra=T,T.root=g,N?it=g:K&&(K.Va=T,K.Ra&&K.Ra.Eb.push(T))},ls=(g,T,N)=>{var j=bn(g,{parent:!0}).node;if(g=pe(g),!g||g==="."||g==="..")throw new Ce(28);var K=Qs(j,g);if(K)throw new Ce(K);if(!j.Ga.ab)throw new Ce(63);return j.Ga.ab(j,g,T,N)},Zn=(g,T)=>ls(g,(T!==void 0?T:511)&1023|16384,0),pr=(g,T,N)=>{typeof N>"u"&&(N=T,T=438),ls(g,T|8192,N)},Ys=(g,T)=>{if(!v(g))throw new Ce(44);var N=bn(T,{parent:!0}).node;if(!N)throw new Ce(44);T=pe(T);var j=Qs(N,T);if(j)throw new Ce(j);if(!N.Ga.symlink)throw new Ce(63);N.Ga.symlink(N,T,g)},Ua=g=>{var T=bn(g,{parent:!0}).node;g=pe(g);var N=$n(T,g),j=os(T,g,!0);if(j)throw new Ce(j);if(!T.Ga.rmdir)throw new Ce(63);if(N.Va)throw new Ce(10);T.Ga.rmdir(T,g),Fa(N)},za=g=>{var T=bn(g,{parent:!0}).node;if(!T)throw new Ce(44);g=pe(g);var N=$n(T,g),j=os(T,g,!1);if(j)throw new Ce(j);if(!T.Ga.unlink)throw new Ce(63);if(N.Va)throw new Ce(10);T.Ga.unlink(T,g),Fa(N)},Va=g=>{if(g=bn(g).node,!g)throw new Ce(44);if(!g.Ga.readlink)throw new Ce(28);return v(Or(g.parent),g.Ga.readlink(g))},mr=(g,T)=>{if(g=bn(g,{Sa:!T}).node,!g)throw new Ce(44);if(!g.Ga.Pa)throw new Ce(63);return g.Ga.Pa(g)},Wa=g=>mr(g,!0),Dr=(g,T)=>{if(g=typeof g=="string"?bn(g,{Sa:!0}).node:g,!g.Ga.Oa)throw new Ce(63);g.Ga.Oa(g,{mode:T&4095|g.mode&-4096,timestamp:Date.now()})},Ha=(g,T)=>{if(0>T)throw new Ce(28);if(g=typeof g=="string"?bn(g,{Sa:!0}).node:g,!g.Ga.Oa)throw new Ce(63);if((g.mode&61440)===16384)throw new Ce(31);if((g.mode&61440)!==32768)throw new Ce(28);var N=Xn(g,"w");if(N)throw new Ce(N);g.Ga.Oa(g,{size:T,timestamp:Date.now()})},hi=(g,T,N)=>{if(g==="")throw new Ce(44);if(typeof T=="string"){var j=ol[T];if(typeof j>"u")throw Error("Unknown file open mode: "+T);T=j}if(N=T&64?(typeof N>"u"?438:N)&4095|32768:0,typeof g=="object")var K=g;else{g=G(g);try{K=bn(g,{Sa:!(T&131072)}).node}catch(Ee){}}if(j=!1,T&64)if(K){if(T&128)throw new Ce(20)}else K=ls(g,N,0),j=!0;if(!K)throw new Ce(44);if((K.mode&61440)===8192&&(T&=-513),T&65536&&(K.mode&61440)!==16384)throw new Ce(54);if(!j&&(N=K?(K.mode&61440)===40960?32:(K.mode&61440)===16384&&(Hs(T)!=="r"||T&512)?31:Xn(K,Hs(T)):44))throw new Ce(N);return T&512&&!j&&Ha(K,0),T&=-131713,K=ja({node:K,path:Or(K),flags:T,seekable:!0,position:0,Ha:K.Ha,Ib:[],error:!1}),K.Ha.open&&K.Ha.open(K),!c.logReadFiles||T&1||(U||(U={}),g in U||(U[g]=1)),K},me=g=>{if(g.fd===null)throw new Ce(8);g.hb&&(g.hb=null);try{g.Ha.close&&g.Ha.close(g)}catch(T){throw T}finally{at[g.fd]=null}g.fd=null},Be=(g,T,N)=>{if(g.fd===null)throw new Ce(8);if(!g.seekable||!g.Ha.Ta)throw new Ce(70);if(N!=0&&N!=1&&N!=2)throw new Ce(28);g.position=g.Ha.Ta(g,T,N),g.Ib=[]},Qe=(g,T,N,j,K)=>{if(0>j||0>K)throw new Ce(28);if(g.fd===null)throw new Ce(8);if((g.flags&2097155)===1)throw new Ce(8);if((g.node.mode&61440)===16384)throw new Ce(31);if(!g.Ha.read)throw new Ce(28);var Ee=typeof K<"u";if(!Ee)K=g.position;else if(!g.seekable)throw new Ce(70);return T=g.Ha.read(g,T,N,j,K),Ee||(g.position+=T),T},Mt=(g,T,N,j,K)=>{if(0>j||0>K)throw new Ce(28);if(g.fd===null)throw new Ce(8);if(!(g.flags&2097155))throw new Ce(8);if((g.node.mode&61440)===16384)throw new Ce(31);if(!g.Ha.write)throw new Ce(28);g.seekable&&g.flags&1024&&Be(g,0,2);var Ee=typeof K<"u";if(!Ee)K=g.position;else if(!g.seekable)throw new Ce(70);return T=g.Ha.write(g,T,N,j,K,void 0),Ee||(g.position+=T),T},Gt=g=>{var T,N=hi(g,N||0);g=mr(g).size;var j=new Uint8Array(g);return Qe(N,j,0,g,0),T=j,me(N),T},Nn=()=>{Ce||(Ce=function(g,T){this.node=T,this.Hb=function(N){this.Ka=N},this.Hb(g),this.message="FS error"},Ce.prototype=Error(),Ce.prototype.constructor=Ce,[44].forEach(g=>{di[g]=new Ce(g),di[g].stack="<generic error, no stack>"}))},Ai,Qa=(g,T)=>{var N=0;return g&&(N|=365),T&&(N|=146),N},Js=(g,T,N)=>{g=G("/dev/"+g);var j=Qa(!!T,!!N);cl||(cl=64);var K=cl++<<8|0;Gs(K,{open:Ee=>{Ee.seekable=!1},close:()=>{N&&N.buffer&&N.buffer.length&&N(10)},read:(Ee,ke,st,Ct)=>{for(var vt=0,an=0;an<Ct;an++){try{var Br=T()}catch(Zy){throw new Ce(29)}if(Br===void 0&&vt===0)throw new Ce(6);if(Br==null)break;vt++,ke[st+an]=Br}return vt&&(Ee.node.timestamp=Date.now()),vt},write:(Ee,ke,st,Ct)=>{for(var vt=0;vt<Ct;vt++)try{N(ke[st+vt])}catch(an){throw new Ce(29)}return Ct&&(Ee.node.timestamp=Date.now()),vt}}),pr(g,j,K)},cl,I={},J,U;function ae(g,T,N){if(T.charAt(0)==="/")return T;if(g=g===-100?"/":Ie(g).path,T.length==0){if(!N)throw new Ce(44);return g}return G(g+"/"+T)}function le(g,T,N){try{var j=g(T)}catch(K){if(K&&K.node&&G(T)!==G(Or(K.node)))return-54;throw K}return Y[N>>2]=j.dev,Y[N+8>>2]=j.ino,Y[N+12>>2]=j.mode,F[N+16>>2]=j.nlink,Y[N+20>>2]=j.uid,Y[N+24>>2]=j.gid,Y[N+28>>2]=j.rdev,ie=[j.size>>>0,(L=j.size,1<=+Math.abs(L)?0<L?(Math.min(+Math.floor(L/4294967296),4294967295)|0)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],Y[N+40>>2]=ie[0],Y[N+44>>2]=ie[1],Y[N+48>>2]=4096,Y[N+52>>2]=j.blocks,ie=[Math.floor(j.atime.getTime()/1e3)>>>0,(L=Math.floor(j.atime.getTime()/1e3),1<=+Math.abs(L)?0<L?(Math.min(+Math.floor(L/4294967296),4294967295)|0)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],Y[N+56>>2]=ie[0],Y[N+60>>2]=ie[1],F[N+64>>2]=0,ie=[Math.floor(j.mtime.getTime()/1e3)>>>0,(L=Math.floor(j.mtime.getTime()/1e3),1<=+Math.abs(L)?0<L?(Math.min(+Math.floor(L/4294967296),4294967295)|0)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],Y[N+72>>2]=ie[0],Y[N+76>>2]=ie[1],F[N+80>>2]=0,ie=[Math.floor(j.ctime.getTime()/1e3)>>>0,(L=Math.floor(j.ctime.getTime()/1e3),1<=+Math.abs(L)?0<L?(Math.min(+Math.floor(L/4294967296),4294967295)|0)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],Y[N+88>>2]=ie[0],Y[N+92>>2]=ie[1],F[N+96>>2]=0,ie=[j.ino>>>0,(L=j.ino,1<=+Math.abs(L)?0<L?(Math.min(+Math.floor(L/4294967296),4294967295)|0)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],Y[N+104>>2]=ie[0],Y[N+108>>2]=ie[1],0}var se=void 0;function Ae(){return se+=4,Y[se-4>>2]}function Ie(g){if(g=at[g],!g)throw new Ce(8);return g}function De(g){return F[g>>2]+4294967296*Y[g+4>>2]}function Le(g){var T=Z(g)+1,N=Xs(T);return N&&S(g,re,N,T),N}function qe(g,T,N){function j(Ct){return(Ct=Ct.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ct[1]:"GMT"}var K=new Date().getFullYear(),Ee=new Date(K,0,1),ke=new Date(K,6,1);K=Ee.getTimezoneOffset();var st=ke.getTimezoneOffset();Y[g>>2]=60*Math.max(K,st),Y[T>>2]=+(K!=st),g=j(Ee),T=j(ke),g=Le(g),T=Le(T),st<K?(F[N>>2]=g,F[N+4>>2]=T):(F[N>>2]=T,F[N+4>>2]=g)}function Ge(g,T,N){Ge.Bb||(Ge.Bb=!0,qe(g,T,N))}var ot;ot=m?()=>{var g=ys.hrtime();return 1e3*g[0]+g[1]/1e6}:()=>performance.now();var bt={};function St(){if(!Vt){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},T;for(T in bt)bt[T]===void 0?delete g[T]:g[T]=bt[T];var N=[];for(T in g)N.push(T+"="+g[T]);Vt=N}return Vt}var Vt,Rt=void 0,Dn=[];function Mr(g,T){if(!Rt){Rt=new WeakMap;var N=ye.length;if(Rt)for(var j=0;j<0+N;j++){var K=ye.get(j);K&&Rt.set(K,j)}}if(Rt.has(g))return Rt.get(g);if(Dn.length)N=Dn.pop();else{try{ye.grow(1)}catch(st){throw st instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":st}N=ye.length-1}try{ye.set(N,g)}catch(st){if(!(st instanceof TypeError))throw st;if(typeof WebAssembly.Function=="function"){j=WebAssembly.Function,K={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var Ee={parameters:[],results:T[0]=="v"?[]:[K[T[0]]]},ke=1;ke<T.length;++ke)Ee.parameters.push(K[T[ke]]);T=new j(Ee,g)}else{for(j=[1,96],K=T.slice(0,1),T=T.slice(1),Ee={i:127,p:127,j:126,f:125,d:124},ke=T.length,128>ke?j.push(ke):j.push(ke%128|128,ke>>7),ke=0;ke<T.length;++ke)j.push(Ee[T[ke]]);K=="v"?j.push(0):j.push(1,Ee[K]),T=[0,97,115,109,1,0,0,0,1],K=j.length,128>K?T.push(K):T.push(K%128|128,K>>7),T.push.apply(T,j),T.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),T=new WebAssembly.Module(new Uint8Array(T)),T=new WebAssembly.Instance(T,{e:{f:g}}).exports.f}ye.set(N,T)}return Rt.set(g,N),N}function Lr(g){Rt.delete(ye.get(g)),Dn.push(g)}function ul(g){var T=Xs(g.length);return g.subarray||g.slice||(g=new Uint8Array(g)),de.set(g,T),T}function dl(g,T,N,j){var K={string:vt=>{var an=0;if(vt!=null&&vt!==0){var Br=(vt.length<<2)+1;an=cs(Br),S(vt,de,an,Br)}return an},array:vt=>{var an=cs(vt.length);return re.set(vt,an),an}};g=c["_"+g];var Ee=[],ke=0;if(j)for(var st=0;st<j.length;st++){var Ct=K[N[st]];Ct?(ke===0&&(ke=hl()),Ee[st]=Ct(j[st])):Ee[st]=j[st]}return N=g.apply(null,Ee),N=function(vt){return ke!==0&&fl(ke),T==="string"?q(vt):T==="boolean"?!!vt:vt}(N)}function mf(g,T,N,j){g||(g=this),this.parent=g,this.Ra=g.Ra,this.Va=null,this.id=zs++,this.name=T,this.mode=N,this.Ga={},this.Ha={},this.rdev=j}Object.defineProperties(mf.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(g){g?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(g){g?this.mode|=146:this.mode&=-147}}}),Nn(),sn=Array(4096),Ks(je,"/"),Zn("/tmp"),Zn("/home"),Zn("/home/web_user"),(()=>{Zn("/dev"),Gs(259,{read:()=>0,write:(T,N,j,K)=>K}),pr("/dev/null",259),V(1280,oe),V(1536,Fe),pr("/dev/tty",1280),pr("/dev/tty1",1536);var g=A();Js("random",g),Js("urandom",g),Zn("/dev/shm"),Zn("/dev/shm/tmp")})(),(()=>{Zn("/proc");var g=Zn("/proc/self");Zn("/proc/self/fd"),Ks({Ra:()=>{var T=Ws(g,"fd",16895,73);return T.Ga={lookup:(N,j)=>{var K=at[+j];if(!K)throw new Ce(8);return N={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>K.path}},N.parent=N}},T}},"/proc/self/fd")})();var gf={a:function(g,T,N,j){Tt("Assertion failed: "+q(g)+", at: "+[T?q(T):"unknown filename",N,j?q(j):"unknown function"])},h:function(g,T){try{return g=q(g),Dr(g,T),0}catch(N){if(typeof I>"u"||!(N instanceof Ce))throw N;return-N.Ka}},H:function(g,T,N){try{if(T=q(T),T=ae(g,T),N&-8)return-28;var j=bn(T,{Sa:!0}).node;return j?(g="",N&4&&(g+="r"),N&2&&(g+="w"),N&1&&(g+="x"),g&&Xn(j,g)?-2:0):-44}catch(K){if(typeof I>"u"||!(K instanceof Ce))throw K;return-K.Ka}},i:function(g,T){try{var N=at[g];if(!N)throw new Ce(8);return Dr(N.node,T),0}catch(j){if(typeof I>"u"||!(j instanceof Ce))throw j;return-j.Ka}},g:function(g){try{var T=at[g];if(!T)throw new Ce(8);var N=T.node,j=typeof N=="string"?bn(N,{Sa:!0}).node:N;if(!j.Ga.Oa)throw new Ce(63);return j.Ga.Oa(j,{timestamp:Date.now()}),0}catch(K){if(typeof I>"u"||!(K instanceof Ce))throw K;return-K.Ka}},b:function(g,T,N){se=N;try{var j=Ie(g);switch(T){case 0:var K=Ae();return 0>K?-28:ja(j,K).fd;case 1:case 2:return 0;case 3:return j.flags;case 4:return K=Ae(),j.flags|=K,0;case 5:return K=Ae(),ne[K+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Y[Qc()>>2]=28,-1;default:return-28}}catch(Ee){if(typeof I>"u"||!(Ee instanceof Ce))throw Ee;return-Ee.Ka}},G:function(g,T){try{var N=Ie(g);return le(mr,N.path,T)}catch(j){if(typeof I>"u"||!(j instanceof Ce))throw j;return-j.Ka}},l:function(g,T,N){try{if(T=N+2097152>>>0<4194305-!!T?(T>>>0)+4294967296*N:NaN,isNaN(T))return-61;var j=at[g];if(!j)throw new Ce(8);if(!(j.flags&2097155))throw new Ce(28);return Ha(j.node,T),0}catch(K){if(typeof I>"u"||!(K instanceof Ce))throw K;return-K.Ka}},B:function(g,T){try{if(T===0)return-28;var N=Z("/")+1;return T<N?-68:(S("/",de,g,T),N)}catch(j){if(typeof I>"u"||!(j instanceof Ce))throw j;return-j.Ka}},E:function(g,T){try{return g=q(g),le(Wa,g,T)}catch(N){if(typeof I>"u"||!(N instanceof Ce))throw N;return-N.Ka}},y:function(g,T,N){try{return T=q(T),T=ae(g,T),T=G(T),T[T.length-1]==="/"&&(T=T.substr(0,T.length-1)),Zn(T,N),0}catch(j){if(typeof I>"u"||!(j instanceof Ce))throw j;return-j.Ka}},D:function(g,T,N,j){try{T=q(T);var K=j&256;return T=ae(g,T,j&4096),le(K?Wa:mr,T,N)}catch(Ee){if(typeof I>"u"||!(Ee instanceof Ce))throw Ee;return-Ee.Ka}},v:function(g,T,N,j){se=j;try{T=q(T),T=ae(g,T);var K=j?Ae():0;return hi(T,N,K).fd}catch(Ee){if(typeof I>"u"||!(Ee instanceof Ce))throw Ee;return-Ee.Ka}},t:function(g,T,N,j){try{if(T=q(T),T=ae(g,T),0>=j)return-28;var K=Va(T),Ee=Math.min(j,Z(K)),ke=re[N+Ee];return S(K,de,N,j+1),re[N+Ee]=ke,Ee}catch(st){if(typeof I>"u"||!(st instanceof Ce))throw st;return-st.Ka}},s:function(g){try{return g=q(g),Ua(g),0}catch(T){if(typeof I>"u"||!(T instanceof Ce))throw T;return-T.Ka}},F:function(g,T){try{return g=q(g),le(mr,g,T)}catch(N){if(typeof I>"u"||!(N instanceof Ce))throw N;return-N.Ka}},p:function(g,T,N){try{return T=q(T),T=ae(g,T),N===0?za(T):N===512?Ua(T):Tt("Invalid flags passed to unlinkat"),0}catch(j){if(typeof I>"u"||!(j instanceof Ce))throw j;return-j.Ka}},o:function(g,T,N){try{if(T=q(T),T=ae(g,T,!0),N){var j=De(N),K=Y[N+8>>2];Ee=1e3*j+K/1e6,N+=16,j=De(N),K=Y[N+8>>2],ke=1e3*j+K/1e6}else var Ee=Date.now(),ke=Ee;g=Ee;var st=bn(T,{Sa:!0}).node;return st.Ga.Oa(st,{timestamp:Math.max(g,ke)}),0}catch(Ct){if(typeof I>"u"||!(Ct instanceof Ce))throw Ct;return-Ct.Ka}},e:function(){return Date.now()},j:function(g,T){g=new Date(1e3*De(g)),Y[T>>2]=g.getSeconds(),Y[T+4>>2]=g.getMinutes(),Y[T+8>>2]=g.getHours(),Y[T+12>>2]=g.getDate(),Y[T+16>>2]=g.getMonth(),Y[T+20>>2]=g.getFullYear()-1900,Y[T+24>>2]=g.getDay();var N=new Date(g.getFullYear(),0,1);Y[T+28>>2]=(g.getTime()-N.getTime())/864e5|0,Y[T+36>>2]=-(60*g.getTimezoneOffset());var j=new Date(g.getFullYear(),6,1).getTimezoneOffset();N=N.getTimezoneOffset(),Y[T+32>>2]=(j!=N&&g.getTimezoneOffset()==Math.min(N,j))|0},w:function(g,T,N,j,K,Ee){try{var ke=Ie(j);if(T&2&&!(N&2)&&(ke.flags&2097155)!==2)throw new Ce(2);if((ke.flags&2097155)===1)throw new Ce(2);if(!ke.Ha.bb)throw new Ce(43);var st=ke.Ha.bb(ke,g,K,T,N),Ct=st.Fb;return Y[Ee>>2]=st.vb,Ct}catch(vt){if(typeof I>"u"||!(vt instanceof Ce))throw vt;return-vt.Ka}},x:function(g,T,N,j,K,Ee){try{var ke=Ie(K);if(N&2){var st=de.slice(g,g+T);ke&&ke.Ha.cb&&ke.Ha.cb(ke,st,Ee,T,j)}}catch(Ct){if(typeof I>"u"||!(Ct instanceof Ce))throw Ct;return-Ct.Ka}},n:Ge,q:function(){return 2147483648},d:ot,c:function(g){var T=de.length;if(g>>>=0,2147483648<g)return!1;for(var N=1;4>=N;N*=2){var j=T*(1+.2/N);j=Math.min(j,g+100663296);var K=Math;j=Math.max(g,j),K=K.min.call(K,2147483648,j+(65536-j%65536)%65536);e:{try{R.grow(K-ve.byteLength+65535>>>16),we();var Ee=1;break e}catch(ke){}Ee=void 0}if(Ee)return!0}return!1},z:function(g,T){var N=0;return St().forEach(function(j,K){var Ee=T+N;for(K=F[g+4*K>>2]=Ee,Ee=0;Ee<j.length;++Ee)re[K++>>0]=j.charCodeAt(Ee);re[K>>0]=0,N+=j.length+1}),0},A:function(g,T){var N=St();F[g>>2]=N.length;var j=0;return N.forEach(function(K){j+=K.length+1}),F[T>>2]=j,0},f:function(g){try{var T=Ie(g);return me(T),0}catch(N){if(typeof I>"u"||!(N instanceof Ce))throw N;return N.Ka}},m:function(g,T){try{var N=Ie(g);return re[T>>0]=N.tty?2:(N.mode&61440)===16384?3:(N.mode&61440)===40960?7:4,0}catch(j){if(typeof I>"u"||!(j instanceof Ce))throw j;return j.Ka}},u:function(g,T,N,j){try{e:{var K=Ie(g);g=T;for(var Ee=T=0;Ee<N;Ee++){var ke=F[g>>2],st=F[g+4>>2];g+=8;var Ct=Qe(K,re,ke,st);if(0>Ct){var vt=-1;break e}if(T+=Ct,Ct<st)break}vt=T}return F[j>>2]=vt,0}catch(an){if(typeof I>"u"||!(an instanceof Ce))throw an;return an.Ka}},k:function(g,T,N,j,K){try{if(T=N+2097152>>>0<4194305-!!T?(T>>>0)+4294967296*N:NaN,isNaN(T))return 61;var Ee=Ie(g);return Be(Ee,T,j),ie=[Ee.position>>>0,(L=Ee.position,1<=+Math.abs(L)?0<L?(Math.min(+Math.floor(L/4294967296),4294967295)|0)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],Y[K>>2]=ie[0],Y[K+4>>2]=ie[1],Ee.hb&&T===0&&j===0&&(Ee.hb=null),0}catch(ke){if(typeof I>"u"||!(ke instanceof Ce))throw ke;return ke.Ka}},C:function(g){try{var T=Ie(g);return T.Ha&&T.Ha.fsync?T.Ha.fsync(T):0}catch(N){if(typeof I>"u"||!(N instanceof Ce))throw N;return N.Ka}},r:function(g,T,N,j){try{e:{var K=Ie(g);g=T;for(var Ee=T=0;Ee<N;Ee++){var ke=F[g>>2],st=F[g+4>>2];g+=8;var Ct=Mt(K,re,ke,st);if(0>Ct){var vt=-1;break e}T+=Ct}vt=T}return F[j>>2]=vt,0}catch(an){if(typeof I>"u"||!(an instanceof Ce))throw an;return an.Ka}}};(function(){function g(K){c.asm=K.exports,R=c.asm.I,we(),ye=c.asm.Aa,Ke.unshift(c.asm.J),ft--,c.monitorRunDependencies&&c.monitorRunDependencies(ft),ft==0&&ct&&(K=ct,ct=null,K())}function T(K){g(K.instance)}function N(K){return z().then(function(Ee){return WebAssembly.instantiate(Ee,j)}).then(function(Ee){return Ee}).then(K,function(Ee){D("failed to asynchronously prepare wasm: "+Ee),Tt(Ee)})}var j={a:gf};if(ft++,c.monitorRunDependencies&&c.monitorRunDependencies(ft),c.instantiateWasm)try{return c.instantiateWasm(j,g)}catch(K){return D("Module.instantiateWasm callback failed with error: "+K),!1}return function(){return O||typeof WebAssembly.instantiateStreaming!="function"||Dt()||C.startsWith("file://")||m||typeof fetch!="function"?N(T):fetch(C,{credentials:"same-origin"}).then(function(K){return WebAssembly.instantiateStreaming(K,j).then(T,function(Ee){return D("wasm streaming compile failed: "+Ee),D("falling back to ArrayBuffer instantiation"),N(T)})})}(),{}})(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.J).apply(null,arguments)},c._sqlite3_free=function(){return(c._sqlite3_free=c.asm.K).apply(null,arguments)},c._sqlite3_value_double=function(){return(c._sqlite3_value_double=c.asm.L).apply(null,arguments)},c._sqlite3_value_text=function(){return(c._sqlite3_value_text=c.asm.M).apply(null,arguments)};var Qc=c.___errno_location=function(){return(Qc=c.___errno_location=c.asm.N).apply(null,arguments)};c._sqlite3_prepare_v2=function(){return(c._sqlite3_prepare_v2=c.asm.O).apply(null,arguments)},c._sqlite3_step=function(){return(c._sqlite3_step=c.asm.P).apply(null,arguments)},c._sqlite3_finalize=function(){return(c._sqlite3_finalize=c.asm.Q).apply(null,arguments)},c._sqlite3_reset=function(){return(c._sqlite3_reset=c.asm.R).apply(null,arguments)},c._sqlite3_value_int=function(){return(c._sqlite3_value_int=c.asm.S).apply(null,arguments)},c._sqlite3_clear_bindings=function(){return(c._sqlite3_clear_bindings=c.asm.T).apply(null,arguments)},c._sqlite3_value_blob=function(){return(c._sqlite3_value_blob=c.asm.U).apply(null,arguments)},c._sqlite3_value_bytes=function(){return(c._sqlite3_value_bytes=c.asm.V).apply(null,arguments)},c._sqlite3_value_type=function(){return(c._sqlite3_value_type=c.asm.W).apply(null,arguments)},c._sqlite3_result_blob=function(){return(c._sqlite3_result_blob=c.asm.X).apply(null,arguments)},c._sqlite3_result_double=function(){return(c._sqlite3_result_double=c.asm.Y).apply(null,arguments)},c._sqlite3_result_error=function(){return(c._sqlite3_result_error=c.asm.Z).apply(null,arguments)},c._sqlite3_result_int=function(){return(c._sqlite3_result_int=c.asm._).apply(null,arguments)},c._sqlite3_result_int64=function(){return(c._sqlite3_result_int64=c.asm.$).apply(null,arguments)},c._sqlite3_result_null=function(){return(c._sqlite3_result_null=c.asm.aa).apply(null,arguments)},c._sqlite3_result_text=function(){return(c._sqlite3_result_text=c.asm.ba).apply(null,arguments)},c._sqlite3_sql=function(){return(c._sqlite3_sql=c.asm.ca).apply(null,arguments)},c._sqlite3_aggregate_context=function(){return(c._sqlite3_aggregate_context=c.asm.da).apply(null,arguments)},c._sqlite3_column_count=function(){return(c._sqlite3_column_count=c.asm.ea).apply(null,arguments)},c._sqlite3_data_count=function(){return(c._sqlite3_data_count=c.asm.fa).apply(null,arguments)},c._sqlite3_column_blob=function(){return(c._sqlite3_column_blob=c.asm.ga).apply(null,arguments)},c._sqlite3_column_bytes=function(){return(c._sqlite3_column_bytes=c.asm.ha).apply(null,arguments)},c._sqlite3_column_double=function(){return(c._sqlite3_column_double=c.asm.ia).apply(null,arguments)},c._sqlite3_column_text=function(){return(c._sqlite3_column_text=c.asm.ja).apply(null,arguments)},c._sqlite3_column_type=function(){return(c._sqlite3_column_type=c.asm.ka).apply(null,arguments)},c._sqlite3_column_name=function(){return(c._sqlite3_column_name=c.asm.la).apply(null,arguments)},c._sqlite3_bind_blob=function(){return(c._sqlite3_bind_blob=c.asm.ma).apply(null,arguments)},c._sqlite3_bind_double=function(){return(c._sqlite3_bind_double=c.asm.na).apply(null,arguments)},c._sqlite3_bind_int=function(){return(c._sqlite3_bind_int=c.asm.oa).apply(null,arguments)},c._sqlite3_bind_text=function(){return(c._sqlite3_bind_text=c.asm.pa).apply(null,arguments)},c._sqlite3_bind_parameter_index=function(){return(c._sqlite3_bind_parameter_index=c.asm.qa).apply(null,arguments)},c._sqlite3_normalized_sql=function(){return(c._sqlite3_normalized_sql=c.asm.ra).apply(null,arguments)},c._sqlite3_errmsg=function(){return(c._sqlite3_errmsg=c.asm.sa).apply(null,arguments)},c._sqlite3_exec=function(){return(c._sqlite3_exec=c.asm.ta).apply(null,arguments)},c._sqlite3_changes=function(){return(c._sqlite3_changes=c.asm.ua).apply(null,arguments)},c._sqlite3_close_v2=function(){return(c._sqlite3_close_v2=c.asm.va).apply(null,arguments)},c._sqlite3_create_function_v2=function(){return(c._sqlite3_create_function_v2=c.asm.wa).apply(null,arguments)},c._sqlite3_open=function(){return(c._sqlite3_open=c.asm.xa).apply(null,arguments)};var Xs=c._malloc=function(){return(Xs=c._malloc=c.asm.ya).apply(null,arguments)},Gc=c._free=function(){return(Gc=c._free=c.asm.za).apply(null,arguments)};c._RegisterExtensionFunctions=function(){return(c._RegisterExtensionFunctions=c.asm.Ba).apply(null,arguments)};var Jy=c._emscripten_builtin_memalign=function(){return(Jy=c._emscripten_builtin_memalign=c.asm.Ca).apply(null,arguments)},hl=c.stackSave=function(){return(hl=c.stackSave=c.asm.Da).apply(null,arguments)},fl=c.stackRestore=function(){return(fl=c.stackRestore=c.asm.Ea).apply(null,arguments)},cs=c.stackAlloc=function(){return(cs=c.stackAlloc=c.asm.Fa).apply(null,arguments)};c.UTF8ToString=q,c.stackAlloc=cs,c.stackSave=hl,c.stackRestore=fl,c.cwrap=function(g,T,N,j){N=N||[];var K=N.every(Ee=>Ee==="number"||Ee==="boolean");return T!=="string"&&K&&!j?c["_"+g]:function(){return dl(g,T,N,arguments)}};var Kc;ct=function g(){Kc||Xy(),Kc||(ct=g)};function Xy(){function g(){if(!Kc&&(Kc=!0,c.calledRun=!0,!Q)){if(c.noFSInit||Ai||(Ai=!0,Nn(),c.stdin=c.stdin,c.stdout=c.stdout,c.stderr=c.stderr,c.stdin?Js("stdin",c.stdin):Ys("/dev/tty","/dev/stdin"),c.stdout?Js("stdout",null,c.stdout):Ys("/dev/tty","/dev/stdout"),c.stderr?Js("stderr",null,c.stderr):Ys("/dev/tty1","/dev/stderr"),hi("/dev/stdin",0),hi("/dev/stdout",1),hi("/dev/stderr",1)),$r=!1,Ne(Ke),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;){var T=c.postRun.shift();Ye.unshift(T)}Ne(Ye)}}if(!(0<ft)){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Xe();Ne(Ve),0<ft||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),g()},1)):g())}}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return Xy(),o}),t)};i.exports=n,i.exports.default=n});class pt{static async getDBFromStore(e,t){try{const n=await t.getItem(e);return Promise.resolve(n)}catch(n){return Promise.reject("GetDBFromStore: ".concat(n.message))}}static async setInitialDBToStore(e,t){try{return await t.setItem(e,null),Promise.resolve()}catch(n){return Promise.reject("SetInitialDBToStore: ".concat(n.message))}}static async setDBToStore(e,t,n){try{const r=e.export();return await pt.saveDBToStore(t,r,n),Promise.resolve()}catch(r){return Promise.reject("SetDBToStore: ".concat(r.message))}}static async saveDBToStore(e,t,n){try{return await n.setItem(e,t),Promise.resolve()}catch(r){return Promise.reject("SaveDBToStore: ".concat(r.message))}}static async removeDBFromStore(e,t){try{return await t.removeItem(e),Promise.resolve()}catch(n){return Promise.reject("RemoveDBFromStore: ".concat(n.message))}}static async isDBInStore(e,t){try{const n=await t.getItem(e);return n!=null&&n.length>0?Promise.resolve(!0):Promise.resolve(!1)}catch(n){return Promise.reject("IsDBInStore: ".concat(n))}}static async restoreDBFromStore(e,t,n){const r="".concat(t,"-").concat(e);try{if(await pt.isDBInStore(r,n))if(await pt.isDBInStore(e,n)){const o=await pt.getDBFromStore(r,n);return await pt.saveDBToStore(e,o,n),await pt.removeDBFromStore(r,n),Promise.resolve()}else return Promise.reject(new Error("RestoreDBFromStore: ".concat(e," does not exist")));else return Promise.reject(new Error("RestoreDBFromStore: ".concat(r," does not exist")))}catch(s){return Promise.reject("RestoreDBFromStore: ".concat(s.message))}}static async copyDBToStore(e,t,n){try{if(await pt.isDBInStore(e,n)){const s=await pt.getDBFromStore(e,n);return await pt.saveDBToStore(t,s,n),Promise.resolve()}else return Promise.reject(new Error("CopyDBToStore: ".concat(e," does not exist")))}catch(r){return Promise.reject("CopyDBToStore: ".concat(r.message))}}static async getDBListFromStore(e){try{const t=await e.keys();return Promise.resolve(t)}catch(t){return Promise.reject("GetDBListFromStore: ".concat(t.message))}}}class nr{static async getTablesNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const n=[];try{const r=await Re.queryAll(e,t,[]);for(const s of r)n.push(s.name);return Promise.resolve(n)}catch(r){return Promise.reject(new Error("GetTablesNames: ".concat(r.message)))}}static async getViewsNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='view' AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const n=[];try{const r=await Re.queryAll(e,t,[]);for(const s of r)n.push(s.name);return Promise.resolve(n)}catch(r){return Promise.reject(new Error("getViewsNames: ".concat(r.message)))}}static async dropElements(e,t){let n="",r="AND name NOT LIKE ('sqlite_%')";switch(t){case"index":n="DropIndexes";break;case"trigger":n="DropTriggers";break;case"table":n="DropTables",r+=" AND name NOT IN ('sync_table')";break;case"view":n="DropViews";break;default:return Promise.reject(new Error("DropElements: ".concat(t," ")+"not found"))}let s="SELECT name FROM sqlite_master WHERE ";s+="type = '".concat(t,"' ").concat(r,";");try{const a=await Re.queryAll(e,s,[]);if(a.length>0){const o=t.toUpperCase(),l=[];for(const c of a){let u="DROP ".concat(o," IF EXISTS ");u+="".concat(c.name,";"),l.push(u)}for(const c of l)if(await Re.run(e,c,[],!1,"no")<0)return Promise.reject(new Error("DropElements: ".concat(n,": lastId < 0")))}return Promise.resolve()}catch(a){return Promise.reject(new Error("DropElements: ".concat(n,": ").concat(a.message)))}}static async dropAll(e){try{return await nr.dropElements(e,"table"),await nr.dropElements(e,"index"),await nr.dropElements(e,"trigger"),await nr.dropElements(e,"view"),await Re.run(e,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(t){return Promise.reject(new Error("DropAll: ".concat(t.message)))}}static async dropTempTables(e,t){const n=Object.keys(t),r=[];for(const s of n){let a="DROP TABLE IF EXISTS ";a+="_temp_".concat(s,";"),r.push(a)}try{return await Re.execute(e,r.join("\n"),!1)<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(s){return Promise.reject(new Error("DropTempTables: ".concat(s.message)))}}}class Lt{static async isJsonSQLite(e){const t=["database","version","overwrite","encrypted","mode","tables","views"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(t.indexOf(n)===-1||n==="database"&&typeof e[n]!="string"||n==="version"&&typeof e[n]!="number"||n==="overwrite"&&typeof e[n]!="boolean"||n==="encrypted"&&typeof e[n]!="boolean"||n==="mode"&&typeof e[n]!="string"||n==="tables"&&typeof e[n]!="object")return!1;if(n==="tables"){for(const r of e[n])if(!await Lt.isTable(r))return!1}if(n==="views"&&typeof e[n]!="object")return!1;if(n==="views"){for(const r of e[n])if(!await Lt.isView(r))return!1}}return!0}static async isTable(e){const t=["name","schema","indexes","triggers","values"];let n=0;if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e)){if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="schema"&&typeof e[r]!="object"||r==="indexes"&&typeof e[r]!="object"||r==="triggers"&&typeof e[r]!="object"||r==="values"&&typeof e[r]!="object")return!1;if(r==="schema"){e.schema.forEach(s=>{s.column&&n++});for(let s=0;s<n;s++)if(!await Lt.isSchema(e[r][s]))return!1}if(r==="indexes"){for(const s of e[r])if(!await Lt.isIndexes(s))return!1}if(r==="triggers"){for(const s of e[r])if(!await Lt.isTriggers(s))return!1}if(r==="values"&&n>0){for(const s of e[r])if(typeof s!="object"||s.length!=n)return!1}}return!0}static async isSchema(e){const t=["column","value","foreignkey","primarykey","constraint"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const n of Object.keys(e))if(t.indexOf(n)===-1||n==="column"&&typeof e[n]!="string"||n==="value"&&typeof e[n]!="string"||n==="foreignkey"&&typeof e[n]!="string"||n==="primarykey"&&typeof e[n]!="string"||n==="constraint"&&typeof e[n]!="string")return!1;return!0}static async isIndexes(e){const t=["name","value","mode"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const n of Object.keys(e))if(t.indexOf(n)===-1||n==="name"&&typeof e[n]!="string"||n==="value"&&typeof e[n]!="string"||n==="mode"&&(typeof e[n]!="string"||e[n].toUpperCase()!="UNIQUE"))return!1;return!0}static async isTriggers(e){const t=["name","timeevent","condition","logic"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const n of Object.keys(e))if(t.indexOf(n)===-1||n==="name"&&typeof e[n]!="string"||n==="timeevent"&&typeof e[n]!="string"||n==="condition"&&typeof e[n]!="string"||n==="logic"&&typeof e[n]!="string")return!1;return!0}static async isView(e){const t=["name","value"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const n of Object.keys(e))if(t.indexOf(n)===-1||n==="name"&&typeof e[n]!="string"||n==="value"&&typeof e[n]!="string")return!1;return!0}static async checkSchemaValidity(e){for(let t=0;t<e.length;t++){const n={},r=Object.keys(e[t]);if(r.includes("column")&&(n.column=e[t].column),r.includes("value")&&(n.value=e[t].value),r.includes("foreignkey")&&(n.foreignkey=e[t].foreignkey),r.includes("constraint")&&(n.constraint=e[t].constraint),!await Lt.isSchema(n))return Promise.reject(new Error("CheckSchemaValidity: schema[".concat(t,"] not valid")))}return Promise.resolve()}static async checkIndexesValidity(e){for(let t=0;t<e.length;t++){const n={},r=Object.keys(e[t]);if(r.includes("value")&&(n.value=e[t].value),r.includes("name")&&(n.name=e[t].name),r.includes("mode")&&(n.mode=e[t].mode),!await Lt.isIndexes(n))return Promise.reject(new Error("CheckIndexesValidity: indexes[".concat(t,"] not valid")))}return Promise.resolve()}static async checkTriggersValidity(e){for(let t=0;t<e.length;t++){const n={},r=Object.keys(e[t]);if(r.includes("logic")&&(n.logic=e[t].logic),r.includes("name")&&(n.name=e[t].name),r.includes("timeevent")&&(n.timeevent=e[t].timeevent),r.includes("condition")&&(n.condition=e[t].condition),!await Lt.isTriggers(n))return Promise.reject(new Error("CheckTriggersValidity: triggers[".concat(t,"] not valid")))}return Promise.resolve()}static async checkViewsValidity(e){for(let t=0;t<e.length;t++){const n={},r=Object.keys(e[t]);if(r.includes("value")&&(n.value=e[t].value),r.includes("name")&&(n.name=e[t].name),!await Lt.isView(n))return Promise.reject(new Error("CheckViewsValidity: views[".concat(t,"] not valid")))}return Promise.resolve()}static async getTableColumnNamesTypes(e,t){let n=[];const r=[],s=[],a="PRAGMA table_info('".concat(t,"');");try{if(n=await Re.queryAll(e,a,[]),n.length>0)for(const o of n)r.push(o.name),s.push(o.type);return Promise.resolve({names:r,types:s})}catch(o){return Promise.reject(new Error("GetTableColumnNamesTypes: "+"".concat(o.message)))}}static async getValues(e,t,n){const r=[];try{const s=await Lt.getTableColumnNamesTypes(e,n);let a=[];if(Object.keys(s).includes("names"))a=s.names;else return Promise.reject(new Error("GetValues: Table ".concat(n," no names")));const o=await Re.queryAll(e,t,[]);for(const l of o){const c=[];for(const u of a)Object.keys(l).includes(u)?c.push(l[u]):c.push(null);r.push(c)}return Promise.resolve(r)}catch(s){return Promise.reject(new Error("GetValues: ".concat(s.message)))}}}class pn{static extractTableName(e){const t=/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i,n=e.match(t);return n&&n[1]?n[1]:null}static extractWhereClause(e){const t=/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i,n=e.match(t);return n&&n[1]?n[1].trim():null}static addPrefixToWhereClause(e,t,n,r){let s;return e.includes("AND")?s=e.split("AND").map(l=>l.trim()):s=[e],s.map(o=>{const l=o.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!l)return o;const c=l[1].trim(),u=l[2].trim();let d=l[3].trim(),h=c;const f=pn.findIndexOfStringInArray(c,n);f!==-1&&(h=pn.getStringAtIndex(t,f));const m="".concat(r).concat(h);return"".concat(m," ").concat(u," ").concat(d)}).join(" AND ")}static findIndexOfStringInArray(e,t){return t.indexOf(e)}static getStringAtIndex(e,t){if(t>=0&&t<e.length)return e[t]}static extractForeignKeyInfo(e){const t=/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/,n=e.match(t);if(n)return{forKeys:n[1].split(",").map(s=>s.trim()),tableName:n[2],refKeys:n[3].split(",").map(s=>s.trim()),action:n[5]?n[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const t=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),n=e.split(/\s|,|\(|\)/),r=[];let s=!1,a=!1;for(const o of n)o==="IN"?s=!0:s&&o==="("?a=!0:a&&o===")"?a=!1:o.match(/\b[a-zA-Z]\w*\b/)&&!a&&!t.has(o.toUpperCase())&&r.push(o);return Array.from(new Set(r))}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,t){const n="RETURNING",r={stmt:e,names:""},s=e.toUpperCase().indexOf(n);if(s!==-1){const a=e.substring(0,s);if(r.stmt="".concat(a,";"),t.substring(0,2)==="wA"){const l=e.substring(s+n.length).trim();l.endsWith(";")?r.names=l.substring(0,l.length-1):r.names=l}}return r}static extractCombinedPrimaryKey(e){const t=/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g,n=new RegExp(t),r=e.matchAll(n),s=[];for(const a of r){const l=a[1].trim().split(",").map(c=>c.trim());s.push(l)}return s.length===0?null:s}static getWhereStmtForCombinedPK(e,t,n,r){let s=e;for(const a of r){const o=a.join(",")===t.join(",")?n:t;for(const[l,c]of a.entries())s=pn.replaceAllString(s,c,o[l])}return s}static replaceAllString(e,t,n){return e.split(t).join(n)}static indicesOf(e,t,n=0){const r=[];let s=e.indexOf(t,n);for(;s!==-1;)r.push(s),s=e.indexOf(t,s+1);return r}static getWhereStmtForNonCombinedPK(e,t,n){let r="",s=e.substring(6);for(let a=0;a<t.length;a++){let o="withRefsNames",l=pn.indicesOf(s,t[a]);if(l.length===0&&(l=pn.indicesOf(s,n[a]),o="colNames"),l.length>0){let c="";const u=pn.indicesOf(s,"=",l[0]);if(u.length>0){const d=pn.indicesOf(s,"AND",u[0]);d.length>0?(c=s.substring(u[0]+1,d[0]-1),s=s.substring(d[0]+3)):c=s.substring(u[0]+1),a>0&&(r+=" AND "),o==="withRefsNames"?r+=n[a]+" = "+c:r+=t[a]+" = "+c}}}return r="WHERE "+r,r}static updateWhere(e,t,n){let r="";if(e.length<=0||e.toUpperCase().substring(0,5)!=="WHERE")return r;if(t.length===n.length){const s=pn.extractCombinedPrimaryKey(e);s?r=pn.getWhereStmtForCombinedPK(e,t,n,s):r=pn.getWhereStmtForNonCombinedPK(e,t,n)}return r}}pn.replaceString=(i,e,t)=>{const n=i.indexOf(e);return n!==-1?i.substring(0,n)+t+i.substring(n+e.length):i};class en{static findReferencesAndUpdate(e){return new en(e)}static getRefs(e){return new en(e)}static getReferences(e){return new en(e)}static searchForRelatedItems(e){return new en(e)}static upDateWhereForDefault(e){return new en(e)}static upDateWhereForRestrict(e){return new en(e)}static upDateWhereForCascade(e){return new en(e)}static executeUpdateForDelete(e){return new en(e)}constructor(e){this.message=e}}class vr{static async findReferencesAndUpdate(e,t,n,r,s){try{let a=!0;const o=await vr.getReferences(e,t),l=o.retRefs,c=o.tableWithRefs;if(l.length<=0||t===c)return a;for(const u of l){const d=pn.extractForeignKeyInfo(u),h=d.tableName;if(h===""||h!==t)continue;const f=d.forKeys,m=d.refKeys;if(m.length!==f.length){const E="findReferencesAndUpdate: mismatch length";throw en.findReferencesAndUpdate(E)}const p=d.action;if(p==="NO_ACTION")continue;let w=c,y=f,b={uWhereStmt:"",setStmt:""};if(vr.checkValuesMatch(f,r))throw en.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const E=await vr.searchForRelatedItems(e,w,t,n,f,m,s);if(E.relatedItems.length===0&&E.key.length<=0)continue;if(w!==t)switch(p){case"RESTRICT":b=await vr.upDateWhereForRestrict(E);break;case"CASCADE":b=await vr.upDateWhereForCascade(E);break;default:b=await vr.upDateWhereForDefault(f,E);break}}b.setStmt.length>0&&b.uWhereStmt.length>0&&vr.executeUpdateForDelete(e,w,b.uWhereStmt,b.setStmt,y,s)}return a}catch(a){const o=a.message?a.message:a;throw a instanceof en?en.findReferencesAndUpdate(o):a}}static async getReferences(e,t){const n="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+t+"%') AND sql LIKE('%ON DELETE%');";try{const r=await Re.queryAll(e,n,[]);let s=[],a="";if(r.length>0){let o=vr.getRefs(r[0].sql);s=o.foreignKeys,a=o.tableName}return Promise.resolve({tableWithRefs:a,retRefs:s})}catch(r){const s=r.message?r.message:r,a="getReferences: ".concat(s);throw en.getReferences(a)}}static getRefs(e){let t="";const n=[],r=pn.flattenMultilineString(e);try{const s=/CREATE\s+TABLE\s+(\w+)\s+\(/,a=r.match(s);a&&(t=a[1]);const o=/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g,l=r.matchAll(o);for(const c of l){const u=c[0];n.push(u)}}catch(s){const a="getRefs: Error creating regular expression: ".concat(s);throw en.getRefs(a)}return{tableName:t,foreignKeys:n}}static async getReferencedTableName(e){var t="";if(e.length>0){const n=e.split(new RegExp("REFERENCES","i"));if(n.length===2){const r=n[1].indexOf("(");t=n[1].substring(0,r).trim()}}return t}static async searchForRelatedItems(e,t,n,r,s,a,o){const l=[];let c="";const u=s.map(h=>"t1.".concat(h)),d=a.map(h=>"t2.".concat(h));try{let h=pn.addPrefixToWhereClause(r,a,s,"t2.");h.endsWith(";")&&(h=h.slice(0,-1));const f=u.map((w,y)=>"".concat(w," = ").concat(d[y])).join(" AND "),m="SELECT t1.rowid FROM ".concat(t," t1 ")+"JOIN ".concat(n," t2 ON ").concat(f," ")+"WHERE ".concat(h," AND t1.sql_deleted = 0;"),p=await Re.queryAll(e,m,o);return p.length>0&&(c=Object.keys(p[0])[0],l.push(...p)),{key:c,relatedItems:l}}catch(h){const f=h.message?h.message:h;throw en.searchForRelatedItems(f)}}static async upDateWhereForDefault(e,t){let n="",r="";try{const s=t.key,a=[];for(const o of t.relatedItems){const l=o[s];l!==void 0&&a.push(l)}for(const o of e)n+="".concat(o," = NULL, ");n+="sql_deleted = 0",r="WHERE ".concat(s," IN (");for(const o of a)r+="".concat(o,",");r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(s){const a=s.message?s.message:s;throw en.upDateWhereForDefault(a)}return{setStmt:n,uWhereStmt:r}}static async upDateWhereForRestrict(e){try{const t="",n="";if(e.relatedItems.length>0){const r="Restrict mode related items exist, please delete them first";throw en.upDateWhereForRestrict(r)}return{setStmt:t,uWhereStmt:n}}catch(t){const n=t.message?t.message:t;throw en.upDateWhereForRestrict(n)}}static async upDateWhereForCascade(e){let t="",n="";try{const r=e.key,s=[];for(const a of e.relatedItems){const o=a[r];o!==void 0&&s.push(o)}t+="sql_deleted = 1",n="WHERE ".concat(r," IN (");for(const a of s)n+="".concat(a,",");n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(r){const s=r.message?r.message:r;throw en.upDateWhereForCascade(s)}return{setStmt:t,uWhereStmt:n}}static executeUpdateForDelete(e,t,n,r,s,a){try{let o=-1;const l="UPDATE ".concat(t," SET ").concat(r," ").concat(n),c=[];if(a.length>0){const d=n.split("?");d[d.length-1]===";"&&d.pop();for(let h=0;h<d.length;h++)for(const f of s)pn.indicesOf(d[h],f).length>0&&c.push(a[h])}if(o=Re.run(e,l,c,!1,"no").lastId,o===-1){const d="UPDATE sql_deleted failed for table: ".concat(t);throw en.executeUpdateForDelete(d)}}catch(o){const l=o.message?o.message:o;throw en.executeUpdateForDelete(l)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(e,t){for(const n of e)if(!t.includes(n))return!1;return!0}}class Re{static async beginTransaction(e,t){const n="BeginTransaction: ";if(!t)return Promise.reject(new Error("".concat(n,"database not opened")));try{return e.exec("BEGIN"),Promise.resolve()}catch(r){return Promise.reject(new Error("".concat(n).concat(r.message)))}}static async rollbackTransaction(e,t){const n="RollbackTransaction: ";if(!t)return Promise.reject(new Error("".concat(n,"database not opened")));try{return e.exec("ROLLBACK"),Promise.resolve()}catch(r){return Promise.reject(new Error("".concat(n).concat(r.message)))}}static commitTransaction(e,t){const n="CommitTransaction: ";if(!t)return Promise.reject(new Error("".concat(n,"database not opened")));const r="COMMIT";try{return e.exec(r),Promise.resolve()}catch(s){return Promise.reject(new Error("".concat(n).concat(s.message)))}}static async dbChanges(e){const t="SELECT total_changes()";let n=0;try{return n=e.exec(t)[0].values[0][0],Promise.resolve(n)}catch(r){return Promise.reject(new Error("DbChanges failed: ".concat(r.message)))}}static async getLastId(e){const t="SELECT last_insert_rowid()";let n=-1;try{return n=e.exec(t)[0].values[0][0],Promise.resolve(n)}catch(r){return Promise.reject(new Error("GetLastId failed: ".concat(r.message)))}}static async setForeignKeyConstraintsEnabled(e,t){let n="PRAGMA foreign_keys=OFF";t&&(n="PRAGMA foreign_keys=ON");try{return e.run(n),Promise.resolve()}catch(r){const s=r.message?r.message:r;return Promise.reject(new Error("SetForeignKey: ".concat(s)))}}static async getVersion(e){let t=0;try{return t=e.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(t)}catch(n){return Promise.reject(new Error("GetVersion: ".concat(n.message)))}}static async setVersion(e,t){try{return e.exec("PRAGMA user_version = ".concat(t)),Promise.resolve()}catch(n){return Promise.reject(new Error("SetVersion: ".concat(n.message)))}}static async execute(e,t,n){try{var r=t;if(!n&&t.toLowerCase().includes("DELETE FROM".toLowerCase())){r=t.replace(/\n/g,"");let o=r.split(";");var s=[];for(const l of o)if(l.trim().substring(0,11).toUpperCase()==="DELETE FROM"&&l.toLowerCase().includes("WHERE".toLowerCase())){const u=l.trim(),d=await Re.deleteSQL(e,u,[]);s.push(d)}else s.push(l);r=s.join(";")}e.exec(r);const a=await Re.dbChanges(e);return Promise.resolve(a)}catch(a){return Promise.reject(new Error("Execute: ".concat(a.message)))}}static async executeSet(e,t,n,r){const s=[];let a=-1,o={};for(let l=0;l<t.length;l++){const c="statement"in t[l]?t[l].statement:null,u="values"in t[l]&&t[l].values.length>0?t[l].values:[];if(c==null){let d="ExecuteSet: Error No statement";return d+=" for index ".concat(l),Promise.reject(new Error(d))}try{if(Array.isArray(u[0]))for(const d of u){const h=await Re.replaceUndefinedByNull(d);o=await Re.run(e,c,h,n,r),a=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&s.push(o.values)}else{const d=await Re.replaceUndefinedByNull(u);o=await Re.run(e,c,d,n,r),a=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&s.push(o.values)}}catch(d){return Promise.reject(new Error("ExecuteSet: ".concat(d.message)))}}return o.lastId=a,o.values=r==="all"?s:r==="one"?s[0]:[],Promise.resolve(o)}static async queryAll(e,t,n){try{let r=[];if(n!=null&&n.length>0?r=e.exec(t,n):r=e.exec(t),r.length==0)return Promise.resolve([]);const s=r[0].values.map(a=>{const o={};return r[0].columns.forEach((l,c)=>{o[l]=a[c]}),o});return Promise.resolve(s)}catch(r){return Promise.reject(new Error("queryAll: ".concat(r.message)))}}static async run(e,t,n,r,s){let a=t.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),o=t,l=[],c={};try{!r&&a==="DELETE"&&(o=await Re.deleteSQL(e,t,n));const u=n||[];if(u.length>0){const h=await Re.replaceUndefinedByNull(u),f=e.exec(o,h);if(s==="all"||s==="one")if(f&&f.length>0)l=Re.getReturnedValues(f[0],s);else return Promise.reject(new Error("run: ".concat(o," does not returned any change")))}else{const h=e.exec(o);if(s==="all"||s==="one")if(h&&h.length>0)l=Re.getReturnedValues(h[0],s);else return Promise.reject(new Error("run: ".concat(o," does not returned any change")))}const d=await Re.getLastId(e);return c.lastId=d,l!=null&&l.length>0&&(c.values=l),Promise.resolve(c)}catch(u){return Promise.reject(new Error("run: ".concat(u.message)))}}static getReturnedValues(e,t){const n=[];for(let r=0;r<e.values.length;r++){let s={};for(let a=0;a<e.columns.length;a++)s[e.columns[a]]=e.values[r][a];if(n.push(s),t==="one")break}return n}static async deleteSQL(e,t,n){let r=t;try{const s=await Re.isLastModified(e,!0),a=await Re.isSqlDeleted(e,!0);if(!s||!a)return r;const o=pn.extractWhereClause(r);if(!o){const h="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error("".concat(h)))}const l=pn.extractTableName(r);if(!l){const h="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error("".concat(h)))}const c=pn.extractColumnNames(o);if(c.length===0){const h="deleteSQL: Did not find column names in the WHERE Statement";return Promise.reject(new Error("".concat(h)))}const u="sql_deleted = 1";if(await vr.findReferencesAndUpdate(e,l,o,c,n)){const h=o.endsWith(";")?o.slice(0,-1):o;r="UPDATE ".concat(l," SET ").concat(u," WHERE ").concat(h," AND sql_deleted = 0;")}else r="";return Promise.resolve(r)}catch(s){let a=s.message?s.message:s;return Promise.reject(new Error("deleteSQL: ".concat(a)))}}static async getTableList(e){try{const t=await nr.getTablesNames(e);return Promise.resolve(t)}catch(t){return Promise.reject(new Error("getTableList: ".concat(t.message)))}}static async isTableExists(e,t){try{let n="SELECT name FROM sqlite_master WHERE ";n+="type='table' AND name='".concat(t,"';");const s=(await Re.queryAll(e,n,[])).length>0;return Promise.resolve(s)}catch(n){return Promise.reject(new Error("isTableExists: ".concat(n.message)))}}static async isLastModified(e,t){if(!t)return Promise.reject("isLastModified: database not opened");try{const n=await nr.getTablesNames(e);for(const r of n)if((await Lt.getTableColumnNamesTypes(e,r)).names.includes("last_modified"))return Promise.resolve(!0)}catch(n){return Promise.reject("isLastModified: ".concat(n))}}static async isSqlDeleted(e,t){if(!t)return Promise.reject("isSqlDeleted: database not opened");try{const n=await nr.getTablesNames(e);for(const r of n)if((await Lt.getTableColumnNamesTypes(e,r)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(n){return Promise.reject("isSqlDeleted: ".concat(n))}}static async replaceUndefinedByNull(e){const t=[];for(const n of e){let r=n;typeof n>"u"&&(r=null),t.push(r)}return Promise.resolve(t)}static async backupTables(e){const t="BackupTables: ";let n={};try{const r=await nr.getTablesNames(e);for(const s of r)try{const a=await Re.backupTable(e,s);n["".concat(s)]=a}catch(a){return Promise.reject(new Error("".concat(t,"table ").concat(s,": ")+"".concat(a.message)))}return Promise.resolve(n)}catch(r){return Promise.reject(new Error("BackupTables: ".concat(r.message)))}}static async backupTable(e,t){try{await Re.beginTransaction(e,!0);const n=await Re.getTableColumnNames(e,t),r="_temp_".concat(t),s="DROP TABLE IF EXISTS ".concat(r,";");await Re.run(e,s,[],!1,"no");let a="ALTER TABLE ".concat(t," RENAME ");if(a+="TO ".concat(r,";"),await Re.run(e,a,[],!1,"no")<0){let l="BackupTable: lastId < 0";try{await Re.rollbackTransaction(e,!0)}catch(c){l+=": ".concat(c.message)}return Promise.reject(new Error("".concat(l)))}else try{return await Re.commitTransaction(e,!0),Promise.resolve(n)}catch(l){return Promise.reject(new Error("BackupTable: "+"".concat(l.message)))}}catch(n){return Promise.reject(new Error("BackupTable: ".concat(n.message)))}}static async getTableColumnNames(e,t){let n=[];const r=[],s="PRAGMA table_info('".concat(t,"');");try{if(n=await Re.queryAll(e,s,[]),n.length>0)for(const a of n)r.push(a.name);return Promise.resolve(r)}catch(a){return Promise.reject(new Error("GetTableColumnNames: "+"".concat(a.message)))}}static async findCommonColumns(e,t){let n={};try{const r=await nr.getTablesNames(e);if(r.length===0)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const s of r){const a=await Re.getTableColumnNames(e,s);Object.keys(t).includes(s)&&(n[s]=Re.arraysIntersection(t[s],a))}return Promise.resolve(n)}catch(r){return Promise.reject(new Error("FindCommonColumns: ".concat(r.message)))}}static arraysIntersection(e,t){if(e!=null&&t!=null){const n=new Set(e),r=new Set(t);return[...n].filter(s=>r.has(s))}else return[]}static async updateNewTablesData(e,t){try{await Re.beginTransaction(e,!0);const n=[];if(Object.keys(t).forEach(a=>{const o=t[a].join(",");let l="INSERT INTO ".concat(a," ");l+="(".concat(o,") "),l+="SELECT ".concat(o," FROM _temp_").concat(a,";"),n.push(l)}),await Re.execute(e,n.join("\n"),!1)<0){let a="updateNewTablesData: changes < 0";try{await Re.rollbackTransaction(e,!0)}catch(o){a+=": ".concat(o.message)}return Promise.reject(new Error("".concat(a)))}else try{return await Re.commitTransaction(e,!0),Promise.resolve()}catch(a){return Promise.reject(new Error("updateNewTablesData: "+"".concat(a.message)))}}catch(n){return Promise.reject(new Error("updateNewTablesData: "+"".concat(n.message)))}}}class ei{static async createDatabaseSchema(e,t){let n=-1;const r=t.version;try{return await Re.setVersion(e.mDb,r),t.mode==="full"&&await nr.dropAll(e.mDb),n=await ei.createSchema(e,t),Promise.resolve(n)}catch(s){return Promise.reject(new Error("CreateDatabaseSchema: "+"".concat(s.message)))}}static async createSchema(e,t){let n=0;const r=e.mDb;try{await Re.beginTransaction(r,!0),e.setIsTransActive(!0)}catch(a){return Promise.reject(new Error("CreateSchema: ".concat(a.message)))}const s=await ei.createSchemaStatement(t);if(s.length>0){const a=s.join("\n");try{if(n=await Re.execute(r,a,!0),n<0)try{await Re.rollbackTransaction(r,!0),e.setIsTransActive(!1)}catch(o){return Promise.reject(new Error("CreateSchema: changes < 0 "+"".concat(o.message)))}}catch(o){const l=o.message;try{return await Re.rollbackTransaction(r,!0),e.setIsTransActive(!1),Promise.reject(new Error("CreateSchema: ".concat(l)))}catch(c){return Promise.reject(new Error("CreateSchema: changes < 0 "+"".concat(c.message,": ").concat(l)))}}}try{return await Re.commitTransaction(r,!0),e.setIsTransActive(!1),Promise.resolve(n)}catch(a){return Promise.reject(new Error("CreateSchema: commit "+"".concat(a.message)))}}static async createSchemaStatement(e){const t=[];let n=!1,r=!1;try{for(const s of e.tables){if(s.schema!=null&&s.schema.length>=1){t.push("CREATE TABLE IF NOT EXISTS "+"".concat(s.name," ("));for(let a=0;a<s.schema.length;a++)a===s.schema.length-1?s.schema[a].column?(t.push("".concat(s.schema[a].column," ").concat(s.schema[a].value)),s.schema[a].column==="last_modified"&&(n=!0),s.schema[a].column==="sql_deleted"&&(r=!0)):s.schema[a].foreignkey?t.push("FOREIGN KEY (".concat(s.schema[a].foreignkey,") ").concat(s.schema[a].value)):s.schema[a].constraint&&t.push("CONSTRAINT ".concat(s.schema[a].constraint," ").concat(s.schema[a].value)):s.schema[a].column?t.push("".concat(s.schema[a].column," ").concat(s.schema[a].value,",")):s.schema[a].foreignkey?t.push("FOREIGN KEY (".concat(s.schema[a].foreignkey,") ").concat(s.schema[a].value,",")):s.schema[a].primarykey?t.push("FOREIGN KEY ".concat(s.schema[a].value,",")):s.schema[a].constraint&&t.push("CONSTRAINT ".concat(s.schema[a].constraint," ").concat(s.schema[a].value,","));if(t.push(");"),n&&r){let a="CREATE TRIGGER IF NOT EXISTS ";a+="".concat(s.name),a+="_trigger_last_modified ",a+="AFTER UPDATE ON ".concat(s.name," "),a+="FOR EACH ROW WHEN NEW.last_modified < ",a+="OLD.last_modified BEGIN UPDATE ",a+="".concat(s.name," "),a+="SET last_modified = ",a+="(strftime('%s','now')) WHERE id=OLD.id; END;",t.push(a)}}if(s.indexes!=null&&s.indexes.length>=1)for(const a of s.indexes){const o=s.name;let l="CREATE ".concat(Object.keys(a).includes("mode")?a.mode+" ":""," INDEX IF NOT EXISTS ");l+="".concat(a.name," ON ").concat(o," (").concat(a.value,");"),t.push(l)}if(s.triggers!=null&&s.triggers.length>=1)for(const a of s.triggers){const o=s.name;a.timeevent.toUpperCase().endsWith(" ON")&&(a.timeevent=a.timeevent.substring(0,a.timeevent.length-3));let l="CREATE TRIGGER IF NOT EXISTS ";l+="".concat(a.name," ").concat(a.timeevent," ON ").concat(o," "),a.condition&&(l+="".concat(a.condition," ")),l+="".concat(a.logic,";"),t.push(l)}}return Promise.resolve(t)}catch(s){return Promise.reject(s)}}static async createTablesData(e,t,n){let r=0,s=!1,a=-1,o="",l=-1;const c=e.mDb;try{l=await Re.dbChanges(c),await Re.beginTransaction(c,!0),e.setIsTransActive(!0)}catch(u){return Promise.reject(new Error("createTablesData: ".concat(u.message)))}for(const u of t.tables)if(u.values!=null&&u.values.length>=1)try{a=await ei.createTableData(c,u,t.mode);const d="create table data ".concat(u.name);if(n.emit({progress:d}),a<0)break;s=!0}catch(d){o=d.message,s=!1;break}if(s)try{return await Re.commitTransaction(c,!0),e.setIsTransActive(!1),r=await Re.dbChanges(c)-l,Promise.resolve(r)}catch(u){return Promise.reject(new Error("CreateTablesData: "+"".concat(u.message)))}else if(o.length>0)try{return await Re.rollbackTransaction(c,!0),e.setIsTransActive(!1),Promise.reject(new Error("CreateTablesData: ".concat(o)))}catch(u){return Promise.reject(new Error("CreateTablesData: "+"".concat(u.message,": ").concat(o)))}else return Promise.resolve(0)}static async createTableData(e,t,n){let r=-1;try{if(!await Re.isTableExists(e,t.name))return Promise.reject(new Error("CreateTableData: Table "+"".concat(t.name," does not exist")));const a=await Lt.getTableColumnNamesTypes(e,t.name),o=a.types,l=a.names;if(o.length===0)return Promise.reject(new Error("CreateTableData: Table "+"".concat(t.name," info does not exist")));for(let c=0;c<t.values.length;c++){let u=t.values[c],d=!0;const h=await ei.createRowStatement(e,l,u,c,t.name,n);if(d=await ei.checkUpdate(e,h,u,t.name,l),d){if(h.substring(0,6).toUpperCase()==="DELETE"&&(u=[]),r=await Re.run(e,h,u,!0,"no"),r<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else r=0}return Promise.resolve(r)}catch(s){return Promise.reject(new Error("CreateTableData: ".concat(s.message)))}}static async createRowStatement(e,t,n,r,s,a){if(n.length!=t.length||n.length===0||t.length===0)return Promise.reject(new Error("CreateRowStatement: Table ".concat(s," ")+"values row ".concat(r," not correct length")));try{const o=await ei.isIdExists(e,s,t[0],n[0]);let l;if(a==="full"||a==="partial"&&!o){const c=t.join(),u=await ei.createQuestionMarkString(t.length);l="INSERT INTO ".concat(s," (").concat(c,") VALUES ("),l+="".concat(u,");")}else{let c=!0;const u=h=>h==="sql_deleted",d=t.findIndex(u);if(d>=0&&n[d]===1&&(c=!1,l="DELETE FROM ".concat(s," WHERE "),typeof n[0]=="string"?l+="".concat(t[0]," = '").concat(n[0],"';"):l+="".concat(t[0]," = ").concat(n[0],";")),c){const h=await ei.setNameForUpdate(t);if(h.length===0)return Promise.reject(new Error("CreateRowStatement: Table ".concat(s," ")+"values row ".concat(r," not set to String")));l="UPDATE ".concat(s," SET ").concat(h," WHERE "),typeof n[0]=="string"?l+="".concat(t[0]," = '").concat(n[0],"';"):l+="".concat(t[0]," = ").concat(n[0],";")}}return Promise.resolve(l)}catch(o){return Promise.reject(new Error("CreateRowStatement: ".concat(o.message)))}}static async checkUpdate(e,t,n,r,s){let a=!0;if(t.substring(0,6)==="UPDATE")try{let o="SELECT * FROM ".concat(r," WHERE ");typeof n[0]=="string"?o+="".concat(s[0]," = '").concat(n[0],"';"):o+="".concat(s[0]," = ").concat(n[0],";");const l=await Lt.getValues(e,o,r);let c=[];if(l.length>0&&(c=l[0]),n.length>0&&c.length>0&&n.length===c.length){for(let u=0;u<n.length;u++)if(n[u]!==c[u])return Promise.resolve(!0);return Promise.resolve(!1)}else{const u="Both arrays not the same length";return Promise.reject(new Error("CheckUpdate: ".concat(u)))}}catch(o){return Promise.reject(new Error("CheckUpdate: ".concat(o.message)))}else return Promise.resolve(a)}static async isIdExists(e,t,n,r){let s=!1,a="SELECT ".concat(n," FROM ")+"".concat(t," WHERE ").concat(n," = ");typeof r=="number"&&(a+="".concat(r,";")),typeof r=="string"&&(a+="'".concat(r,"';"));try{return(await Re.queryAll(e,a,[])).length===1&&(s=!0),Promise.resolve(s)}catch(o){return Promise.reject(new Error("IsIdExists: ".concat(o.message)))}}static async isType(e,t){let n=!1;return e==="NULL"&&typeof t=="object"&&(n=!0),e==="TEXT"&&typeof t=="string"&&(n=!0),e==="INTEGER"&&typeof t=="number"&&(n=!0),e==="REAL"&&typeof t=="number"&&(n=!0),e==="BLOB"&&typeof t=="string"&&(n=!0),n?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))}static async checkColumnTypes(e,t){for(let n=0;n<t.length;n++)if(t[n]!=null)try{await ei.isType(e[n],t[n])}catch(r){return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()}static async createQuestionMarkString(e){let t="";for(let n=0;n<e;n++)t+="?,";return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))}static async setNameForUpdate(e){let t="";for(const n of e)t+="".concat(n," = ? ,");return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("SetNameForUpdate: length = 0"))}static async createView(e,t){const n="CREATE VIEW IF NOT EXISTS ".concat(t.name," AS ").concat(t.value,";");try{return await Re.execute(e,n,!0)<0?Promise.reject(new Error("CreateView: ".concat(t.name," failed"))):Promise.resolve()}catch(r){return Promise.reject(new Error("CreateView: ".concat(r.message)))}}static async createViews(e,t){const n=e.mDb;let r=!1,s="",a=-1,o=-1;try{a=await Re.dbChanges(n),await Re.beginTransaction(n,!0),e.setIsTransActive(!0)}catch(l){return Promise.reject(new Error("createViews: ".concat(l.message)))}for(const l of t.views)if(l.value!=null)try{await ei.createView(n,l),r=!0}catch(c){s=c.message,r=!1;break}if(r)try{return await Re.commitTransaction(n,!0),e.setIsTransActive(!1),o=await Re.dbChanges(n)-a,Promise.resolve(o)}catch(l){return Promise.reject(new Error("createViews: "+"".concat(l.message)))}else if(s.length>0)try{return await Re.rollbackTransaction(n,!0),e.setIsTransActive(!1),Promise.reject(new Error("createViews: ".concat(s)))}catch(l){return Promise.reject(new Error("createViews: "+"".concat(l.message,": ").concat(s)))}else return Promise.resolve(0)}}class Kt{static async createExportObject(e,t,n){const r={};let s=[],a=[],o="";try{a=await Kt.getViewsName(e);const l=await Kt.getTablesNameSQL(e);if(l.length===0)return Promise.reject(new Error("createExportObject: table's names failed"));if(!await Re.isTableExists(e,"sync_table")&&t.mode==="partial")return Promise.reject(new Error("No sync_table available"));switch(t.mode){case"partial":{s=await Kt.getTablesPartial(e,l,n);break}case"full":{s=await Kt.getTablesFull(e,l,n);break}default:{o="createExportObject: expMode "+t.mode+" not defined";break}}return o.length>0?Promise.reject(new Error(o)):(s.length>0&&(r.database=t.database,r.version=t.version,r.encrypted=t.encrypted,r.mode=t.mode,r.tables=s,a.length>0&&(r.views=a)),Promise.resolve(r))}catch(l){return Promise.reject(new Error("createExportObject: "+l.message))}}static async getViewsName(e){const t=[];let n="SELECT name,sql FROM sqlite_master WHERE ";n+="type='view' AND name NOT LIKE 'sqlite_%';";let r=[];try{r=await Re.queryAll(e,n,[]);for(const s of r){const a={};a.name=s.name,a.value=s.sql.substring(s.sql.indexOf("AS ")+3),t.push(a)}return Promise.resolve(t)}catch(s){return Promise.reject(new Error("getViewsName: ".concat(s.message)))}}static async getTablesFull(e,t,n){const r=[];let s="";try{for(const a of t){let o,l;if(a.name)o=a.name;else{s="GetTablesFull: no name";break}if(a.sql)l=a.sql;else{s="GetTablesFull: no sql";break}const c={},u=await Kt.getSchema(l);if(u.length===0){s="GetTablesFull: no Schema returned";break}await Lt.checkSchemaValidity(u);const d=await Kt.getIndexes(e,o);d.length>0&&await Lt.checkIndexesValidity(d);const h=await Kt.getTriggers(e,o);h.length>0&&await Lt.checkTriggersValidity(h);let f="Full: Table ".concat(o," schema export completed ...");n.emit({progress:f});const m="SELECT * FROM ".concat(o,";"),p=await Lt.getValues(e,m,o);if(c.name=o,u.length>0)c.schema=u;else{s="GetTablesFull: must contain schema";break}if(d.length>0&&(c.indexes=d),h.length>0&&(c.triggers=h),p.length>0&&(c.values=p),Object.keys(c).length<=1){s="GetTablesFull: table ".concat(o," is not a jsonTable");break}f="Full: Table ".concat(o," table data export completed ..."),n.emit({progress:f}),r.push(c)}return s.length>0?Promise.reject(new Error(s)):Promise.resolve(r)}catch(a){return Promise.reject(new Error("GetTablesFull: ".concat(a.message)))}}static async getSchema(e){const t=[],n=e.indexOf("("),r=e.lastIndexOf(")");let s=e.substring(n+1,r);try{s=await Kt.modEmbeddedParentheses(s);const a=s.split(",");for(let o=0;o<a.length;o++){let l=[];const c=a[o].replace(/\n/g,"").trim();l[0]=c.substring(0,c.indexOf(" ")),l[1]=c.substring(c.indexOf(" ")+1);const u={};if(l[0].toUpperCase()==="FOREIGN"){const d=c.indexOf("("),h=c.indexOf(")"),m=c.substring(d+1,h).split("");l[0]=m.join(","),l[0]=l[0].replace(/, /g,","),l[1]=c.substring(h+2),u.foreignkey=l[0]}else if(l[0].toUpperCase()==="PRIMARY"){const d=c.indexOf("("),h=c.indexOf(")"),m=c.substring(d+1,h).split("");l[0]="CPK_"+m.join("_"),l[0]=l[0].replace(/_ /g,"_"),l[1]=c,u.constraint=l[0]}else if(l[0].toUpperCase()==="CONSTRAINT"){let d=[];const h=l[1].trim();d[0]=h.substring(0,h.indexOf(" ")),d[1]=h.substring(h.indexOf(" ")+1),l[0]=d[0],u.constraint=l[0],l[1]=d[1]}else u.column=l[0];u.value=l[1].replace(//g,","),t.push(u)}return Promise.resolve(t)}catch(a){return Promise.reject(new Error(a.message))}}static async getIndexes(e,t){const n=[];let r="";try{let s="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";s+="type = 'index' AND tbl_name = '".concat(t,"' "),s+="AND sql NOTNULL;";const a=await Re.queryAll(e,s,[]);if(a.length>0){for(const o of a)if(Object.keys(o).length===3)if(o.tbl_name===t){const c=o.sql,u=c.includes("UNIQUE")?"UNIQUE":"",d=c.lastIndexOf("("),h=c.lastIndexOf(")"),f={};f.name=o.name,f.value=c.slice(d+1,h),u.length>0&&(f.mode=u),n.push(f)}else{r="GetIndexes: Table ".concat(t," doesn't match");break}else{r="GetIndexes: Table ".concat(t," creating indexes");break}if(r.length>0)return Promise.reject(new Error(r))}return Promise.resolve(n)}catch(s){return Promise.reject(new Error("GetIndexes: ".concat(s.message)))}}static async getTriggers(e,t){const n=[];try{let r="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";r+="type = 'trigger' AND tbl_name = '".concat(t,"' "),r+="AND sql NOT NULL;";const s=await Re.queryAll(e,r,[]);if(s.length>0)for(const a of s)if(Object.keys(a).length===3)if(a.tbl_name===t){const l=a.sql,c=a.name;let u=l.split(c);if(u.length!=2)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!u[1].includes(t))return Promise.reject(new Error("GetTriggers: sql split does not contains ".concat(t)));const d=u[1].split(t,1)[0].trim();if(u=u[1].split(d+" "+t),u.length!=2)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let h="",f="";if(u[1].trim().substring(0,5).toUpperCase()!=="BEGIN"){if(u=u[1].trim().split("BEGIN"),u.length!=2)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));h=u[0].trim(),f="BEGIN"+u[1]}else f=u[1].trim();const m={};m.name=c,m.logic=f,h.length>0&&(m.condition=h),m.timeevent=d,n.push(m)}else return Promise.reject(new Error("GetTriggers: Table ".concat(t," doesn't match")));else return Promise.reject(new Error("GetTriggers: Table ".concat(t," creating indexes")));return Promise.resolve(n)}catch(r){return Promise.reject(new Error("GetTriggers: ".concat(r.message)))}}static async getTablesPartial(e,t,n){const r=[];let s={},a=0,o=[],l="";try{const c=await Kt.getPartialModeData(e,t);Object.keys(c).includes("syncDate")&&(a=c.syncDate),Object.keys(c).includes("modTables")&&(s=c.modTables,o=Object.keys(s));for(const u of t){let d="",h="";if(u.name)d=u.name;else{l="GetTablesFull: no name";break}if(u.sql)h=u.sql;else{l="GetTablesFull: no sql";break}if(o.length==0||o.indexOf(d)===-1||s[d]=="No")continue;const f={};let m=[],p=[],w=[];f.name=u,s[f.name]==="Create"&&(m=await Kt.getSchema(h),m.length>0&&await Lt.checkSchemaValidity(m),p=await Kt.getIndexes(e,d),p.length>0&&await Lt.checkIndexesValidity(p),w=await Kt.getTriggers(e,d),w.length>0&&await Lt.checkTriggersValidity(w));let y="Partial: Table ".concat(d," schema export completed ...");n.emit({progress:y});let b="";s[d]==="Create"?b="SELECT * FROM ".concat(d,";"):b="SELECT * FROM ".concat(d," ")+"WHERE last_modified > ".concat(a,";");const E=await Lt.getValues(e,b,d);if(f.name=d,m.length>0&&(f.schema=m),p.length>0&&(f.indexes=p),w.length>0&&(f.triggers=w),E.length>0&&(f.values=E),Object.keys(f).length<=1){l="GetTablesPartial: table ".concat(d," is not a jsonTable");break}y="Partial: Table ".concat(d," table data export completed ..."),n.emit({progress:y}),r.push(f)}return l.length>0?Promise.reject(new Error(l)):Promise.resolve(r)}catch(c){return Promise.reject(new Error("GetTablesPartial: ".concat(c.message)))}}static async getPartialModeData(e,t){const n={};try{const r=await Kt.getSynchroDate(e);if(r<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const s=await Kt.getTablesModified(e,t,r);return s.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(n.syncDate=r,n.modTables=s,Promise.resolve(n))}catch(r){return Promise.reject(new Error("GetPartialModeData: ".concat(r.message)))}}static async getTablesNameSQL(e){let t="SELECT name,sql FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%';";try{const n=await Re.queryAll(e,t,[]);return Promise.resolve(n)}catch(n){return Promise.reject(new Error("getTablesNamesSQL: ".concat(n.message)))}}static async getTablesModified(e,t,n){let r="";try{const s={};for(const a of t){let o,l="SELECT count(*) AS tcount  ";l+="FROM ".concat(a.name,";");let c=await Re.queryAll(e,l,[]);if(c.length!=1){r="GetTableModified: total count not returned";break}const u=c[0].tcount;if(l="SELECT count(*) AS mcount FROM ",l+="".concat(a.name," WHERE last_modified > "),l+="".concat(n,";"),c=await Re.queryAll(e,l,[]),c.length!=1)break;const d=c[0].mcount;d===0?o="No":u===d?o="Create":o="Modified";const h=a.name;s[h]=o}return r.length>0?Promise.reject(new Error(r)):Promise.resolve(s)}catch(s){return Promise.reject(new Error("GetTableModified: ".concat(s.message)))}}static async getSynchroDate(e){try{const t="SELECT sync_date FROM sync_table WHERE id = 1;",n=await Re.queryAll(e,t,[]);return Promise.resolve(n[0].sync_date)}catch(t){const n="GetSynchroDate: ".concat(t.message);return Promise.reject(new Error(n))}}static async getLastExportDate(e){try{const t="SELECT sync_date FROM sync_table WHERE id = 2;",n=await Re.queryAll(e,t,[]);return n.length===0?Promise.resolve(-1):Promise.resolve(n[0].sync_date)}catch(t){const n="getLastExport: ".concat(t.message);return Promise.reject(new Error(n))}}static async setLastExportDate(e,t){try{if(!await Re.isTableExists(e,"sync_table"))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const r=Math.round(new Date(t).getTime()/1e3);let s="";return await Kt.getLastExportDate(e)>0?s="UPDATE sync_table SET sync_date = ".concat(r," WHERE id = 2;"):s="INSERT INTO sync_table (sync_date) VALUES (".concat(r,");"),await Re.execute(e,s,!1)<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(n){return{result:!1,message:"setLastExportDate failed: ".concat(n.message)}}}static async delExportedRows(e){let t;try{if(!await Re.isTableExists(e,"sync_table"))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(t=await Kt.getLastExportDate(e),t<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const r=await Re.getTableList(e);if(r.length===0)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const s of r){let a=-1;const o="DELETE FROM ".concat(s,"\n              WHERE sql_deleted = 1 AND last_modified < ").concat(t,";");if(a=await Re.run(e,o,[],!0,"no"),a<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(n){return Promise.reject(new Error("DelExportedRows failed: ".concat(n.message)))}}static async modEmbeddedParentheses(e){const t=Kt.indexOfChar(e,"("),n=Kt.indexOfChar(e,")");if(t.length!=n.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(t.length===0)return Promise.resolve(e);let r=e.substring(0,t[0]-1);for(let s=0;s<t.length;s++){let a;s<t.length-1&&t[s+1]<n[s]?(a=e.substring(t[s]-1,n[s+1]),s++):a=e.substring(t[s]-1,n[s]);const o=a.replace(/,/g,"");r+=o,s<t.length-1&&(r+=e.substring(n[s],t[s+1]-1))}return r+=e.substring(n[n.length-1],e.length),Promise.resolve(r)}static indexOfChar(e,t){let n=[...e];return t=t.toLowerCase(),n.reduce((r,s,a)=>s.toLowerCase()===t?[...r,a]:r,[])}}class Yy{static async onUpgrade(e,t,n,r){let s=-1;const a=new Int32Array(Object.keys(t).map(o=>parseInt(o))).sort();for(const o of a)if(o>n&&o<=r){const l=t[o].statements;if(l.length===0)return Promise.reject("onUpgrade: statements not given");try{await Re.setForeignKeyConstraintsEnabled(e.mDb,!1);const c=await Re.dbChanges(e.mDb);await Yy.executeStatementsProcess(e,l),await Re.setVersion(e.mDb,o),await Re.setForeignKeyConstraintsEnabled(e.mDb,!0),s=await Re.dbChanges(e.mDb)-c}catch(c){return Promise.reject(new Error("onUpgrade: ".concat(c.message)))}}return Promise.resolve(s)}static async executeStatementsProcess(e,t){try{await Re.beginTransaction(e.mDb,!0),e.setIsTransActive(!0);for(const n of t)await Re.execute(e.mDb,n,!1);return await Re.commitTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.resolve()}catch(n){return await Re.rollbackTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.reject("ExecuteStatementProcess: ".concat(n))}}}class uE{constructor(e,t,n,r,s,a){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=e,this.store=r,this.version=t,this.mDb=null,this.vUpgDict=n,this._isDBOpen=!1,this.autoSave=s,this.wasmPath=a}async open(){const e={locateFile:t=>"".concat(this.wasmPath,"/").concat(t)};return new Promise((t,n)=>{try{j5(e).then(async r=>{const s=await pt.getDBFromStore(this.dbName,this.store);s!=null?this.mDb=new r.Database(s):(this.mDb=new r.Database,await pt.setInitialDBToStore(this.dbName,this.store)),this._isDBOpen=!0;let a=await Re.getVersion(this.mDb);if(this.version>a&&Object.keys(this.vUpgDict).length>0)try{if(await pt.isDBInStore(this.dbName,this.store)&&(await pt.copyDBToStore(this.dbName,"backup-".concat(this.dbName),this.store),this.isBackup=!0),await Yy.onUpgrade(this,this.vUpgDict,a,this.version)===-1)try{this.isBackup&&await pt.restoreDBFromStore(this.dbName,"backup",this.store)}catch(c){return n(new Error("Open: ".concat(c.message)))}this.isBackup&&await pt.removeDBFromStore("backup-".concat(this.dbName),this.store)}catch(o){try{this.isBackup&&await pt.restoreDBFromStore(this.dbName,"backup",this.store)}catch(l){return n(new Error("Open: ".concat(l.message)))}}if(this.autoSave)try{await this.saveToStore()}catch(o){return this._isDBOpen=!1,n("Open: ".concat(o))}return await Re.setForeignKeyConstraintsEnabled(this.mDb,!0),t()})}catch(r){return this._isDBOpen=!1,n("in open ".concat(r))}})}isDBOpen(){return this._isDBOpen}async close(){if(this.mDb!=null&&this._isDBOpen)try{await this.saveToStore(!1),this.mDb.close(),this._isDBOpen=!1}catch(e){return this._isDBOpen=!1,Promise.reject("in close ".concat(e))}return Promise.resolve()}async saveToStore(e=!0){if(this.mDb!=null&&this._isDBOpen)try{await pt.setDBToStore(this.mDb,this.dbName,this.store),e&&await Re.setForeignKeyConstraintsEnabled(this.mDb,!0)}catch(t){return Promise.reject("in saveToStore ".concat(t))}return Promise.resolve()}async exportDB(){try{return this.mDb.export()}catch(e){const t=e.message?e.message:e;return Promise.reject("exportDB: ".concat(t))}}async getVersion(){if(this.mDb!=null&&this._isDBOpen)try{const e=await Re.getVersion(this.mDb);return Promise.resolve(e)}catch(e){return this._isDBOpen=!1,Promise.reject("in getVersion ".concat(e))}}async isDBExists(e){try{const t=await pt.isDBInStore(e,this.store);return Promise.resolve(t)}catch(t){return Promise.reject("in isDBExists ".concat(t))}}async deleteDB(e){try{const t=await this.isDBExists(e);return t&&!this._isDBOpen&&await this.open(),await this.close(),t&&await pt.removeDBFromStore(e,this.store),Promise.resolve()}catch(t){return Promise.reject(new Error("DeleteDB: ".concat(t.message)))}}async beginTransaction(){if(!this._isDBOpen){let e="BeginTransaction: Database ".concat(this.dbName," ");return e+="not opened",Promise.reject(new Error(e))}try{return await Re.beginTransaction(this.mDb,!0),this.setIsTransActive(!0),0}catch(e){let t="BeginTransaction: ".concat(e.message);return Promise.reject(new Error("".concat(t)))}}async commitTransaction(){if(!this._isDBOpen){let e="CommitTransaction: Database ".concat(this.dbName," ");return e+="not opened",Promise.reject(new Error(e))}try{return await Re.commitTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t="CommitTransaction: ".concat(e.message);return Promise.reject(new Error("".concat(t)))}}async rollbackTransaction(){if(!this._isDBOpen){let e="RollbackTransaction: Database ".concat(this.dbName," ");return e+="not opened",Promise.reject(new Error(e))}try{return await Re.rollbackTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t="RollbackTransaction: ".concat(e.message);return Promise.reject(new Error("".concat(t)))}}isTransActive(){return this.isTransactionActive}setIsTransActive(e){this.isTransactionActive=e}async executeSQL(e,t=!0){if(!this._isDBOpen){let r="ExecuteSQL: Database ".concat(this.dbName," ");return r+="not opened",Promise.reject(new Error(r))}let n=-1;try{n=await Re.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(r){let s="executeSQL: ".concat(r.message);return Promise.reject(new Error("".concat(s)))}try{if(await Re.execute(this.mDb,e,!1)<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const s=await Re.dbChanges(this.mDb)-n;return Promise.resolve(s)}catch(r){let s="ExecuteSQL: ".concat(r.message);try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(a){s+=" : ".concat(a.message)}return Promise.reject(new Error("ExecuteSQL: ".concat(s)))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave)try{await this.saveToStore()}catch(r){return this._isDBOpen=!1,Promise.reject("ExecuteSQL: ".concat(r))}}}async execSet(e,t=!0,n="no"){if(!this._isDBOpen){let a="ExecSet: Database ".concat(this.dbName," ");return a+="not opened",Promise.reject(new Error(a))}const r={changes:-1,lastId:-1};let s=-1;try{s=await Re.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(a){let o="ExecSet: ".concat(a.message);return Promise.reject(new Error("".concat(o)))}try{const a=await Re.executeSet(this.mDb,e,!1,n);let o=a.lastId;if(o<0)return Promise.reject(new Error("ExecSet: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const l=await Re.dbChanges(this.mDb)-s;return r.changes=l,r.lastId=o,r.values=a.values?a.values:[],Promise.resolve(r)}catch(a){let o="ExecSet: ".concat(a.message);try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(l){o+=" : ".concat(l.message)}return Promise.reject(new Error("ExecSet: ".concat(o)))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave)try{await this.saveToStore()}catch(a){return this._isDBOpen=!1,Promise.reject("ExecSet: ".concat(a))}}}async selectSQL(e,t){if(!this._isDBOpen){let n="SelectSQL: Database ".concat(this.dbName," ");return n+="not opened",Promise.reject(new Error(n))}try{let n=await Re.queryAll(this.mDb,e,t);return Promise.resolve(n)}catch(n){return Promise.reject(new Error("SelectSQL: ".concat(n.message)))}}async runSQL(e,t,n=!0,r){let s=-1;if(!this._isDBOpen){let l="RunSQL: Database ".concat(this.dbName," ");return l+="not opened",Promise.reject(new Error(l))}const a={changes:-1,lastId:-1};let o=-1;try{o=await Re.dbChanges(this.mDb),n&&!this.isTransactionActive&&await this.beginTransaction()}catch(l){let c="RunSQL: ".concat(l.message);return Promise.reject(new Error("".concat(c)))}try{const l=await Re.run(this.mDb,e,t,!1,r);if(s=l.lastId,s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));n&&this.isTransactionActive&&await this.commitTransaction();const c=await Re.dbChanges(this.mDb)-o;return a.changes=c,a.lastId=s,a.values=l.values?l.values:[],Promise.resolve(a)}catch(l){let c="RunSQL: ".concat(l.message);try{n&&this.isTransactionActive&&await this.rollbackTransaction()}catch(u){c+=" : ".concat(u.message)}return Promise.reject(new Error("".concat(c)))}finally{if(n&&this.setIsTransActive(!1),this.autoSave)try{await this.saveToStore()}catch(l){return this._isDBOpen=!1,Promise.reject("ExecSet: ".concat(l))}}}async getTableNames(){if(!this._isDBOpen){let e="GetTableNames: Database ".concat(this.dbName," ");return e+="not opened",Promise.reject(new Error(e))}try{let e=await Re.getTableList(this.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error("GetTableNames: ".concat(e.message)))}}async isTable(e){if(!this._isDBOpen){let t="isTable: Database ".concat(this.dbName," ");return t+="not opened",Promise.reject(new Error(t))}try{const t=await Re.isTableExists(this.mDb,e);return Promise.resolve(t)}catch(t){const n="IsTable: ".concat(t.message);return Promise.reject(new Error(n))}}async createSyncTable(){if(!this._isDBOpen){let t="createSyncTable: Database ".concat(this.dbName," ");return t+="not opened",Promise.reject(new Error(t))}let e=-1;try{if(await Re.isTableExists(this.mDb,"sync_table"))return Promise.resolve(0);{const n=await Re.isLastModified(this.mDb,this._isDBOpen),r=await Re.isSqlDeleted(this.mDb,this._isDBOpen);if(n&&r){const s=Math.round(new Date().getTime()/1e3);let a="\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );";return a+='INSERT INTO sync_table (sync_date) VALUES (\n                              "'.concat(s,'");'),e=await Re.execute(this.mDb,a,!1),Promise.resolve(e)}else return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(t){const n="CreateSyncTable: ".concat(t.message);return Promise.reject(new Error(n))}}async getSyncDate(){if(!this._isDBOpen){let e="getSyncDate: Database ".concat(this.dbName," ");return e+="not opened",Promise.reject(new Error(e))}try{if(!await Re.isTableExists(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const t=await Kt.getSynchroDate(this.mDb);return Promise.resolve(t)}catch(e){const t="getSyncDate: ".concat(e.message);return Promise.reject(new Error(t))}}async setSyncDate(e){if(!this._isDBOpen){let t="SetSyncDate: Database ".concat(this.dbName," ");return t+="not opened",{result:!1,message:t}}try{if(!await Re.isTableExists(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const n=Math.round(new Date(e).getTime()/1e3);let r="UPDATE sync_table SET sync_date = ";return r+="".concat(n," WHERE id = 1;"),await Re.execute(this.mDb,r,!1)<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(t){return{result:!1,message:"setSyncDate failed: ".concat(t.message)}}}async importJson(e,t){let n=0;if(this._isDBOpen)try{if(await Re.setForeignKeyConstraintsEnabled(this.mDb,!1),e.tables&&e.tables.length>0){n=await ei.createDatabaseSchema(this,e);let r="Schema creation completed changes: ".concat(n);if(t.emit({progress:r}),n!=-1){n+=await ei.createTablesData(this,e,t);let s="Tables data creation completed changes: ".concat(n);t.emit({progress:s})}}return e.views&&e.views.length>0&&(n+=await ei.createViews(this,e)),await Re.setForeignKeyConstraintsEnabled(this.mDb,!0),await this.saveToStore(),Promise.resolve(n)}catch(r){return Promise.reject(new Error("ImportJson: ".concat(r.message)))}else return Promise.reject(new Error("ImportJson: database is closed"))}async exportJson(e,t){const n={};if(n.database=this.dbName.slice(0,-9),n.version=this.version,n.encrypted=!1,n.mode=e,this._isDBOpen)try{await Re.isTableExists(this.mDb,"sync_table")&&await Kt.setLastExportDate(this.mDb,new Date().toISOString());const s=await Kt.createExportObject(this.mDb,n,t);if(Object.keys(s).length===0){const l="ExportJson: return Object is empty No data to synchronize";return Promise.reject(new Error(l))}return Lt.isJsonSQLite(s)?Promise.resolve(s):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(r){return Promise.reject(new Error("ExportJson: ".concat(r.message)))}else return Promise.reject(new Error("ExportJson: database is closed"))}async deleteExportedRows(){if(this._isDBOpen)try{return await Kt.delExportedRows(this.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error("deleteExportedRows: ".concat(e.message)))}else return Promise.reject(new Error("deleteExportedRows: database is closed"))}}var dE=Wy(function(i,e){/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t){i.exports=t()})(function(){return function t(n,r,s){function a(c,u){if(!r[c]){if(!n[c]){var d=typeof Kr=="function"&&Kr;if(!u&&d)return d(c,!0);if(o)return o(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[c]={exports:{}};n[c][0].call(f.exports,function(m){var p=n[c][1][m];return a(p||m)},f,f.exports,t,n,r,s)}return r[c].exports}for(var o=typeof Kr=="function"&&Kr,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,n,r){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,c=new a(m),u=s.document.createTextNode("");c.observe(u,{characterData:!0}),o=function(){u.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=m,o=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var w=s.document.createElement("script");w.onreadystatechange=function(){m(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},s.document.documentElement.appendChild(w)}:o=function(){setTimeout(m,0)};var h,f=[];function m(){h=!0;for(var w,y,b=f.length;b;){for(y=f,f=[],w=-1;++w<b;)y[w]();b=f.length}h=!1}n.exports=p;function p(w){f.push(w)===1&&!h&&o()}}).call(this,typeof Ns<"u"?Ns:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,r){var s=t(1);function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];n.exports=d;function d(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,k!==a&&p(this,k)}d.prototype.catch=function(k){return this.then(null,k)},d.prototype.then=function(k,B){if(typeof k!="function"&&this.state===c||typeof B!="function"&&this.state===l)return this;var D=new this.constructor(a);if(this.state!==u){var O=this.state===c?k:B;f(D,O,this.outcome)}else this.queue.push(new h(D,k,B));return D};function h(k,B,D){this.promise=k,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(k){o.resolve(this.promise,k)},h.prototype.otherCallFulfilled=function(k){f(this.promise,this.onFulfilled,k)},h.prototype.callRejected=function(k){o.reject(this.promise,k)},h.prototype.otherCallRejected=function(k){f(this.promise,this.onRejected,k)};function f(k,B,D){s(function(){var O;try{O=B(D)}catch(R){return o.reject(k,R)}O===k?o.reject(k,new TypeError("Cannot resolve promise with itself")):o.resolve(k,O)})}o.resolve=function(k,B){var D=w(m,B);if(D.status==="error")return o.reject(k,D.value);var O=D.value;if(O)p(k,O);else{k.state=c,k.outcome=B;for(var R=-1,Q=k.queue.length;++R<Q;)k.queue[R].callFulfilled(B)}return k},o.reject=function(k,B){k.state=l,k.outcome=B;for(var D=-1,O=k.queue.length;++D<O;)k.queue[D].callRejected(B);return k};function m(k){var B=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof B=="function")return function(){B.apply(k,arguments)}}function p(k,B){var D=!1;function O(P){D||(D=!0,o.reject(k,P))}function R(P){D||(D=!0,o.resolve(k,P))}function Q(){B(R,O)}var $=w(Q);$.status==="error"&&O($.value)}function w(k,B){var D={};try{D.value=k(B),D.status="success"}catch(O){D.status="error",D.value=O}return D}d.resolve=y;function y(k){return k instanceof this?k:o.resolve(new this(a),k)}d.reject=b;function b(k){var B=new this(a);return o.reject(B,k)}d.all=E;function E(k){var B=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=k.length,O=!1;if(!D)return this.resolve([]);for(var R=new Array(D),Q=0,$=-1,P=new this(a);++$<D;)q(k[$],$);return P;function q(S,Z){B.resolve(S).then(ve,function(re){O||(O=!0,o.reject(P,re))});function ve(re){R[Z]=re,++Q===D&&!O&&(O=!0,o.resolve(P,R))}}}d.race=_;function _(k){var B=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=k.length,O=!1;if(!D)return this.resolve([]);for(var R=-1,Q=new this(a);++R<D;)$(k[R]);return Q;function $(P){B.resolve(P).then(function(q){O||(O=!0,o.resolve(Q,q))},function(q){O||(O=!0,o.reject(Q,q))})}}},{1:1}],3:[function(t,n,r){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Ns<"u"?Ns:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,r){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I};function a(I,J){if(!(I instanceof J))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(I){return}}var l=o();function c(){try{if(!l||!l.open)return!1;var I=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),J=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!I||J)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(U){return!1}}function u(I,J){I=I||[],J=J||{};try{return new Blob(I,J)}catch(se){if(se.name!=="TypeError")throw se;for(var U=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ae=new U,le=0;le<I.length;le+=1)ae.append(I[le]);return ae.getBlob(J.type)}}typeof Promise>"u"&&t(3);var d=Promise;function h(I,J){J&&I.then(function(U){J(null,U)},function(U){J(U)})}function f(I,J,U){typeof J=="function"&&I.then(J),typeof U=="function"&&I.catch(U)}function m(I){return typeof I!="string"&&(console.warn(I+" used as a key, but it is not a string."),I=String(I)),I}function p(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var w="local-forage-detect-blob-support",y=void 0,b={},E=Object.prototype.toString,_="readonly",k="readwrite";function B(I){for(var J=I.length,U=new ArrayBuffer(J),ae=new Uint8Array(U),le=0;le<J;le++)ae[le]=I.charCodeAt(le);return U}function D(I){return new d(function(J){var U=I.transaction(w,k),ae=u([""]);U.objectStore(w).put(ae,"key"),U.onabort=function(le){le.preventDefault(),le.stopPropagation(),J(!1)},U.oncomplete=function(){var le=navigator.userAgent.match(/Chrome\/(\d+)/),se=navigator.userAgent.match(/Edge\//);J(se||!le||parseInt(le[1],10)>=43)}}).catch(function(){return!1})}function O(I){return typeof y=="boolean"?d.resolve(y):D(I).then(function(J){return y=J,y})}function R(I){var J=b[I.name],U={};U.promise=new d(function(ae,le){U.resolve=ae,U.reject=le}),J.deferredOperations.push(U),J.dbReady?J.dbReady=J.dbReady.then(function(){return U.promise}):J.dbReady=U.promise}function Q(I){var J=b[I.name],U=J.deferredOperations.pop();if(U)return U.resolve(),U.promise}function $(I,J){var U=b[I.name],ae=U.deferredOperations.pop();if(ae)return ae.reject(J),ae.promise}function P(I,J){return new d(function(U,ae){if(b[I.name]=b[I.name]||H(),I.db)if(J)R(I),I.db.close();else return U(I.db);var le=[I.name];J&&le.push(I.version);var se=l.open.apply(l,le);J&&(se.onupgradeneeded=function(Ae){var Ie=se.result;try{Ie.createObjectStore(I.storeName),Ae.oldVersion<=1&&Ie.createObjectStore(w)}catch(De){if(De.name==="ConstraintError")console.warn('The database "'+I.name+'" has been upgraded from version '+Ae.oldVersion+" to version "+Ae.newVersion+', but the storage "'+I.storeName+'" already exists.');else throw De}}),se.onerror=function(Ae){Ae.preventDefault(),ae(se.error)},se.onsuccess=function(){var Ae=se.result;Ae.onversionchange=function(Ie){Ie.target.close()},U(Ae),Q(I)}})}function q(I){return P(I,!1)}function S(I){return P(I,!0)}function Z(I,J){if(!I.db)return!0;var U=!I.db.objectStoreNames.contains(I.storeName),ae=I.version<I.db.version,le=I.version>I.db.version;if(ae&&(I.version!==J&&console.warn('The database "'+I.name+"\" can't be downgraded from version "+I.db.version+" to version "+I.version+"."),I.version=I.db.version),le||U){if(U){var se=I.db.version+1;se>I.version&&(I.version=se)}return!0}return!1}function ve(I){return new d(function(J,U){var ae=new FileReader;ae.onerror=U,ae.onloadend=function(le){var se=btoa(le.target.result||"");J({__local_forage_encoded_blob:!0,data:se,type:I.type})},ae.readAsBinaryString(I)})}function re(I){var J=B(atob(I.data));return u([J],{type:I.type})}function de(I){return I&&I.__local_forage_encoded_blob}function ne(I){var J=this,U=J._initReady().then(function(){var ae=b[J._dbInfo.name];if(ae&&ae.dbReady)return ae.dbReady});return f(U,I,I),U}function Y(I){R(I);for(var J=b[I.name],U=J.forages,ae=0;ae<U.length;ae++){var le=U[ae];le._dbInfo.db&&(le._dbInfo.db.close(),le._dbInfo.db=null)}return I.db=null,q(I).then(function(se){return I.db=se,Z(I)?S(I):se}).then(function(se){I.db=J.db=se;for(var Ae=0;Ae<U.length;Ae++)U[Ae]._dbInfo.db=se}).catch(function(se){throw $(I,se),se})}function F(I,J,U,ae){ae===void 0&&(ae=1);try{var le=I.db.transaction(I.storeName,J);U(null,le)}catch(se){if(ae>0&&(!I.db||se.name==="InvalidStateError"||se.name==="NotFoundError"))return d.resolve().then(function(){if(!I.db||se.name==="NotFoundError"&&!I.db.objectStoreNames.contains(I.storeName)&&I.version<=I.db.version)return I.db&&(I.version=I.db.version+1),S(I)}).then(function(){return Y(I).then(function(){F(I,J,U,ae-1)})}).catch(U);U(se)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _e(I){var J=this,U={db:null};if(I)for(var ae in I)U[ae]=I[ae];var le=b[U.name];le||(le=H(),b[U.name]=le),le.forages.push(J),J._initReady||(J._initReady=J.ready,J.ready=ne);var se=[];function Ae(){return d.resolve()}for(var Ie=0;Ie<le.forages.length;Ie++){var De=le.forages[Ie];De!==J&&se.push(De._initReady().catch(Ae))}var Le=le.forages.slice(0);return d.all(se).then(function(){return U.db=le.db,q(U)}).then(function(qe){return U.db=qe,Z(U,J._defaultConfig.version)?S(U):qe}).then(function(qe){U.db=le.db=qe,J._dbInfo=U;for(var Ge=0;Ge<Le.length;Ge++){var ot=Le[Ge];ot!==J&&(ot._dbInfo.db=U.db,ot._dbInfo.version=U.version)}})}function we(I,J){var U=this;I=m(I);var ae=new d(function(le,se){U.ready().then(function(){F(U._dbInfo,_,function(Ae,Ie){if(Ae)return se(Ae);try{var De=Ie.objectStore(U._dbInfo.storeName),Le=De.get(I);Le.onsuccess=function(){var qe=Le.result;qe===void 0&&(qe=null),de(qe)&&(qe=re(qe)),le(qe)},Le.onerror=function(){se(Le.error)}}catch(qe){se(qe)}})}).catch(se)});return h(ae,J),ae}function ye(I,J){var U=this,ae=new d(function(le,se){U.ready().then(function(){F(U._dbInfo,_,function(Ae,Ie){if(Ae)return se(Ae);try{var De=Ie.objectStore(U._dbInfo.storeName),Le=De.openCursor(),qe=1;Le.onsuccess=function(){var Ge=Le.result;if(Ge){var ot=Ge.value;de(ot)&&(ot=re(ot));var bt=I(ot,Ge.key,qe++);bt!==void 0?le(bt):Ge.continue()}else le()},Le.onerror=function(){se(Le.error)}}catch(Ge){se(Ge)}})}).catch(se)});return h(ae,J),ae}function Ve(I,J,U){var ae=this;I=m(I);var le=new d(function(se,Ae){var Ie;ae.ready().then(function(){return Ie=ae._dbInfo,E.call(J)==="[object Blob]"?O(Ie.db).then(function(De){return De?J:ve(J)}):J}).then(function(De){F(ae._dbInfo,k,function(Le,qe){if(Le)return Ae(Le);try{var Ge=qe.objectStore(ae._dbInfo.storeName);De===null&&(De=void 0);var ot=Ge.put(De,I);qe.oncomplete=function(){De===void 0&&(De=null),se(De)},qe.onabort=qe.onerror=function(){var bt=ot.error?ot.error:ot.transaction.error;Ae(bt)}}catch(bt){Ae(bt)}})}).catch(Ae)});return h(le,U),le}function Ke(I,J){var U=this;I=m(I);var ae=new d(function(le,se){U.ready().then(function(){F(U._dbInfo,k,function(Ae,Ie){if(Ae)return se(Ae);try{var De=Ie.objectStore(U._dbInfo.storeName),Le=De.delete(I);Ie.oncomplete=function(){le()},Ie.onerror=function(){se(Le.error)},Ie.onabort=function(){var qe=Le.error?Le.error:Le.transaction.error;se(qe)}}catch(qe){se(qe)}})}).catch(se)});return h(ae,J),ae}function Ye(I){var J=this,U=new d(function(ae,le){J.ready().then(function(){F(J._dbInfo,k,function(se,Ae){if(se)return le(se);try{var Ie=Ae.objectStore(J._dbInfo.storeName),De=Ie.clear();Ae.oncomplete=function(){ae()},Ae.onabort=Ae.onerror=function(){var Le=De.error?De.error:De.transaction.error;le(Le)}}catch(Le){le(Le)}})}).catch(le)});return h(U,I),U}function Xe(I){var J=this,U=new d(function(ae,le){J.ready().then(function(){F(J._dbInfo,_,function(se,Ae){if(se)return le(se);try{var Ie=Ae.objectStore(J._dbInfo.storeName),De=Ie.count();De.onsuccess=function(){ae(De.result)},De.onerror=function(){le(De.error)}}catch(Le){le(Le)}})}).catch(le)});return h(U,I),U}function ft(I,J){var U=this,ae=new d(function(le,se){if(I<0){le(null);return}U.ready().then(function(){F(U._dbInfo,_,function(Ae,Ie){if(Ae)return se(Ae);try{var De=Ie.objectStore(U._dbInfo.storeName),Le=!1,qe=De.openKeyCursor();qe.onsuccess=function(){var Ge=qe.result;if(!Ge){le(null);return}I===0||Le?le(Ge.key):(Le=!0,Ge.advance(I))},qe.onerror=function(){se(qe.error)}}catch(Ge){se(Ge)}})}).catch(se)});return h(ae,J),ae}function ct(I){var J=this,U=new d(function(ae,le){J.ready().then(function(){F(J._dbInfo,_,function(se,Ae){if(se)return le(se);try{var Ie=Ae.objectStore(J._dbInfo.storeName),De=Ie.openKeyCursor(),Le=[];De.onsuccess=function(){var qe=De.result;if(!qe){ae(Le);return}Le.push(qe.key),qe.continue()},De.onerror=function(){le(De.error)}}catch(qe){le(qe)}})}).catch(le)});return h(U,I),U}function Tt(I,J){J=p.apply(this,arguments);var U=this.config();I=typeof I!="function"&&I||{},I.name||(I.name=I.name||U.name,I.storeName=I.storeName||U.storeName);var ae=this,le;if(!I.name)le=d.reject("Invalid arguments");else{var se=I.name===U.name&&ae._dbInfo.db,Ae=se?d.resolve(ae._dbInfo.db):q(I).then(function(Ie){var De=b[I.name],Le=De.forages;De.db=Ie;for(var qe=0;qe<Le.length;qe++)Le[qe]._dbInfo.db=Ie;return Ie});I.storeName?le=Ae.then(function(Ie){if(Ie.objectStoreNames.contains(I.storeName)){var De=Ie.version+1;R(I);var Le=b[I.name],qe=Le.forages;Ie.close();for(var Ge=0;Ge<qe.length;Ge++){var ot=qe[Ge];ot._dbInfo.db=null,ot._dbInfo.version=De}var bt=new d(function(St,Vt){var Rt=l.open(I.name,De);Rt.onerror=function(Dn){var Mr=Rt.result;Mr.close(),Vt(Dn)},Rt.onupgradeneeded=function(){var Dn=Rt.result;Dn.deleteObjectStore(I.storeName)},Rt.onsuccess=function(){var Dn=Rt.result;Dn.close(),St(Dn)}});return bt.then(function(St){Le.db=St;for(var Vt=0;Vt<qe.length;Vt++){var Rt=qe[Vt];Rt._dbInfo.db=St,Q(Rt._dbInfo)}}).catch(function(St){throw($(I,St)||d.resolve()).catch(function(){}),St})}}):le=Ae.then(function(Ie){R(I);var De=b[I.name],Le=De.forages;Ie.close();for(var qe=0;qe<Le.length;qe++){var Ge=Le[qe];Ge._dbInfo.db=null}var ot=new d(function(bt,St){var Vt=l.deleteDatabase(I.name);Vt.onerror=function(){var Rt=Vt.result;Rt&&Rt.close(),St(Vt.error)},Vt.onblocked=function(){console.warn('dropInstance blocked for database "'+I.name+'" until all open connections are closed')},Vt.onsuccess=function(){var Rt=Vt.result;Rt&&Rt.close(),bt(Rt)}});return ot.then(function(bt){De.db=bt;for(var St=0;St<Le.length;St++){var Vt=Le[St];Q(Vt._dbInfo)}}).catch(function(bt){throw($(I,bt)||d.resolve()).catch(function(){}),bt})})}return h(le,J),le}var Dt={_driver:"asyncStorage",_initStorage:_e,_support:c(),iterate:ye,getItem:we,setItem:Ve,removeItem:Ke,clear:Ye,length:Xe,key:ft,keys:ct,dropInstance:Tt};function C(){return typeof openDatabase=="function"}var be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ge="~~local_forage_type~",z=/^~~local_forage_type~([^~]+)~/,L="__lfsc__:",ie=L.length,Ne="arbf",Se="blob",ce="si08",$e="ui08",G="uic8",X="si16",pe="si32",A="ur16",v="ui32",x="fl32",M="fl64",V=ie+Ne.length,ee=Object.prototype.toString;function oe(I){var J=I.length*.75,U=I.length,ae,le=0,se,Ae,Ie,De;I[I.length-1]==="="&&(J--,I[I.length-2]==="="&&J--);var Le=new ArrayBuffer(J),qe=new Uint8Array(Le);for(ae=0;ae<U;ae+=4)se=be.indexOf(I[ae]),Ae=be.indexOf(I[ae+1]),Ie=be.indexOf(I[ae+2]),De=be.indexOf(I[ae+3]),qe[le++]=se<<2|Ae>>4,qe[le++]=(Ae&15)<<4|Ie>>2,qe[le++]=(Ie&3)<<6|De&63;return Le}function Fe(I){var J=new Uint8Array(I),U="",ae;for(ae=0;ae<J.length;ae+=3)U+=be[J[ae]>>2],U+=be[(J[ae]&3)<<4|J[ae+1]>>4],U+=be[(J[ae+1]&15)<<2|J[ae+2]>>6],U+=be[J[ae+2]&63];return J.length%3===2?U=U.substring(0,U.length-1)+"=":J.length%3===1&&(U=U.substring(0,U.length-2)+"=="),U}function je(I,J){var U="";if(I&&(U=ee.call(I)),I&&(U==="[object ArrayBuffer]"||I.buffer&&ee.call(I.buffer)==="[object ArrayBuffer]")){var ae,le=L;I instanceof ArrayBuffer?(ae=I,le+=Ne):(ae=I.buffer,U==="[object Int8Array]"?le+=ce:U==="[object Uint8Array]"?le+=$e:U==="[object Uint8ClampedArray]"?le+=G:U==="[object Int16Array]"?le+=X:U==="[object Uint16Array]"?le+=A:U==="[object Int32Array]"?le+=pe:U==="[object Uint32Array]"?le+=v:U==="[object Float32Array]"?le+=x:U==="[object Float64Array]"?le+=M:J(new Error("Failed to get type for BinaryArray"))),J(le+Fe(ae))}else if(U==="[object Blob]"){var se=new FileReader;se.onload=function(){var Ae=ge+I.type+"~"+Fe(this.result);J(L+Se+Ae)},se.readAsArrayBuffer(I)}else try{J(JSON.stringify(I))}catch(Ae){console.error("Couldn't convert value into a JSON string: ",I),J(null,Ae)}}function it(I){if(I.substring(0,ie)!==L)return JSON.parse(I);var J=I.substring(V),U=I.substring(ie,V),ae;if(U===Se&&z.test(J)){var le=J.match(z);ae=le[1],J=J.substring(le[0].length)}var se=oe(J);switch(U){case Ne:return se;case Se:return u([se],{type:ae});case ce:return new Int8Array(se);case $e:return new Uint8Array(se);case G:return new Uint8ClampedArray(se);case X:return new Int16Array(se);case A:return new Uint16Array(se);case pe:return new Int32Array(se);case v:return new Uint32Array(se);case x:return new Float32Array(se);case M:return new Float64Array(se);default:throw new Error("Unkown type: "+U)}}var yt={serialize:je,deserialize:it,stringToBuffer:oe,bufferToString:Fe};function at(I,J,U,ae){I.executeSql("CREATE TABLE IF NOT EXISTS "+J.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],U,ae)}function zs(I){var J=this,U={db:null};if(I)for(var ae in I)U[ae]=typeof I[ae]!="string"?I[ae].toString():I[ae];var le=new d(function(se,Ae){try{U.db=openDatabase(U.name,String(U.version),U.description,U.size)}catch(Ie){return Ae(Ie)}U.db.transaction(function(Ie){at(Ie,U,function(){J._dbInfo=U,se()},function(De,Le){Ae(Le)})},Ae)});return U.serializer=yt,le}function sn(I,J,U,ae,le,se){I.executeSql(U,ae,le,function(Ae,Ie){Ie.code===Ie.SYNTAX_ERR?Ae.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[J.storeName],function(De,Le){Le.rows.length?se(De,Ie):at(De,J,function(){De.executeSql(U,ae,le,se)},se)},se):se(Ae,Ie)},se)}function $r(I,J){var U=this;I=m(I);var ae=new d(function(le,se){U.ready().then(function(){var Ae=U._dbInfo;Ae.db.transaction(function(Ie){sn(Ie,Ae,"SELECT * FROM "+Ae.storeName+" WHERE key = ? LIMIT 1",[I],function(De,Le){var qe=Le.rows.length?Le.rows.item(0).value:null;qe&&(qe=Ae.serializer.deserialize(qe)),le(qe)},function(De,Le){se(Le)})})}).catch(se)});return h(ae,J),ae}function Ce(I,J){var U=this,ae=new d(function(le,se){U.ready().then(function(){var Ae=U._dbInfo;Ae.db.transaction(function(Ie){sn(Ie,Ae,"SELECT * FROM "+Ae.storeName,[],function(De,Le){for(var qe=Le.rows,Ge=qe.length,ot=0;ot<Ge;ot++){var bt=qe.item(ot),St=bt.value;if(St&&(St=Ae.serializer.deserialize(St)),St=I(St,bt.key,ot+1),St!==void 0){le(St);return}}le()},function(De,Le){se(Le)})})}).catch(se)});return h(ae,J),ae}function di(I,J,U,ae){var le=this;I=m(I);var se=new d(function(Ae,Ie){le.ready().then(function(){J===void 0&&(J=null);var De=J,Le=le._dbInfo;Le.serializer.serialize(J,function(qe,Ge){Ge?Ie(Ge):Le.db.transaction(function(ot){sn(ot,Le,"INSERT OR REPLACE INTO "+Le.storeName+" (key, value) VALUES (?, ?)",[I,qe],function(){Ae(De)},function(bt,St){Ie(St)})},function(ot){if(ot.code===ot.QUOTA_ERR){if(ae>0){Ae(di.apply(le,[I,De,U,ae-1]));return}Ie(ot)}})})}).catch(Ie)});return h(se,U),se}function bn(I,J,U){return di.apply(this,[I,J,U,1])}function Or(I,J){var U=this;I=m(I);var ae=new d(function(le,se){U.ready().then(function(){var Ae=U._dbInfo;Ae.db.transaction(function(Ie){sn(Ie,Ae,"DELETE FROM "+Ae.storeName+" WHERE key = ?",[I],function(){le()},function(De,Le){se(Le)})})}).catch(se)});return h(ae,J),ae}function Vs(I){var J=this,U=new d(function(ae,le){J.ready().then(function(){var se=J._dbInfo;se.db.transaction(function(Ae){sn(Ae,se,"DELETE FROM "+se.storeName,[],function(){ae()},function(Ie,De){le(De)})})}).catch(le)});return h(U,I),U}function Fa(I){var J=this,U=new d(function(ae,le){J.ready().then(function(){var se=J._dbInfo;se.db.transaction(function(Ae){sn(Ae,se,"SELECT COUNT(key) as c FROM "+se.storeName,[],function(Ie,De){var Le=De.rows.item(0).c;ae(Le)},function(Ie,De){le(De)})})}).catch(le)});return h(U,I),U}function $n(I,J){var U=this,ae=new d(function(le,se){U.ready().then(function(){var Ae=U._dbInfo;Ae.db.transaction(function(Ie){sn(Ie,Ae,"SELECT key FROM "+Ae.storeName+" WHERE id = ? LIMIT 1",[I+1],function(De,Le){var qe=Le.rows.length?Le.rows.item(0).key:null;le(qe)},function(De,Le){se(Le)})})}).catch(se)});return h(ae,J),ae}function Ws(I){var J=this,U=new d(function(ae,le){J.ready().then(function(){var se=J._dbInfo;se.db.transaction(function(Ae){sn(Ae,se,"SELECT key FROM "+se.storeName,[],function(Ie,De){for(var Le=[],qe=0;qe<De.rows.length;qe++)Le.push(De.rows.item(qe).key);ae(Le)},function(Ie,De){le(De)})})}).catch(le)});return h(U,I),U}function ol(I){return new d(function(J,U){I.transaction(function(ae){ae.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(le,se){for(var Ae=[],Ie=0;Ie<se.rows.length;Ie++)Ae.push(se.rows.item(Ie).name);J({db:I,storeNames:Ae})},function(le,se){U(se)})},function(ae){U(ae)})})}function Hs(I,J){J=p.apply(this,arguments);var U=this.config();I=typeof I!="function"&&I||{},I.name||(I.name=I.name||U.name,I.storeName=I.storeName||U.storeName);var ae=this,le;return I.name?le=new d(function(se){var Ae;I.name===U.name?Ae=ae._dbInfo.db:Ae=openDatabase(I.name,"","",0),I.storeName?se({db:Ae,storeNames:[I.storeName]}):se(ol(Ae))}).then(function(se){return new d(function(Ae,Ie){se.db.transaction(function(De){function Le(bt){return new d(function(St,Vt){De.executeSql("DROP TABLE IF EXISTS "+bt,[],function(){St()},function(Rt,Dn){Vt(Dn)})})}for(var qe=[],Ge=0,ot=se.storeNames.length;Ge<ot;Ge++)qe.push(Le(se.storeNames[Ge]));d.all(qe).then(function(){Ae()}).catch(function(bt){Ie(bt)})},function(De){Ie(De)})})}):le=d.reject("Invalid arguments"),h(le,J),le}var Xn={_driver:"webSQLStorage",_initStorage:zs,_support:C(),iterate:Ce,getItem:$r,setItem:bn,removeItem:Or,clear:Vs,length:Fa,key:$n,keys:Ws,dropInstance:Hs};function Qs(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(I){return!1}}function os(I,J){var U=I.name+"/";return I.storeName!==J.storeName&&(U+=I.storeName+"/"),U}function On(){var I="_localforage_support_test";try{return localStorage.setItem(I,!0),localStorage.removeItem(I),!1}catch(J){return!0}}function ja(){return!On()||localStorage.length>0}function ll(I){var J=this,U={};if(I)for(var ae in I)U[ae]=I[ae];return U.keyPrefix=os(I,J._defaultConfig),ja()?(J._dbInfo=U,U.serializer=yt,d.resolve()):d.reject()}function Gs(I){var J=this,U=J.ready().then(function(){for(var ae=J._dbInfo.keyPrefix,le=localStorage.length-1;le>=0;le--){var se=localStorage.key(le);se.indexOf(ae)===0&&localStorage.removeItem(se)}});return h(U,I),U}function Ks(I,J){var U=this;I=m(I);var ae=U.ready().then(function(){var le=U._dbInfo,se=localStorage.getItem(le.keyPrefix+I);return se&&(se=le.serializer.deserialize(se)),se});return h(ae,J),ae}function ls(I,J){var U=this,ae=U.ready().then(function(){for(var le=U._dbInfo,se=le.keyPrefix,Ae=se.length,Ie=localStorage.length,De=1,Le=0;Le<Ie;Le++){var qe=localStorage.key(Le);if(qe.indexOf(se)===0){var Ge=localStorage.getItem(qe);if(Ge&&(Ge=le.serializer.deserialize(Ge)),Ge=I(Ge,qe.substring(Ae),De++),Ge!==void 0)return Ge}}});return h(ae,J),ae}function Zn(I,J){var U=this,ae=U.ready().then(function(){var le=U._dbInfo,se;try{se=localStorage.key(I)}catch(Ae){se=null}return se&&(se=se.substring(le.keyPrefix.length)),se});return h(ae,J),ae}function pr(I){var J=this,U=J.ready().then(function(){for(var ae=J._dbInfo,le=localStorage.length,se=[],Ae=0;Ae<le;Ae++){var Ie=localStorage.key(Ae);Ie.indexOf(ae.keyPrefix)===0&&se.push(Ie.substring(ae.keyPrefix.length))}return se});return h(U,I),U}function Ys(I){var J=this,U=J.keys().then(function(ae){return ae.length});return h(U,I),U}function Ua(I,J){var U=this;I=m(I);var ae=U.ready().then(function(){var le=U._dbInfo;localStorage.removeItem(le.keyPrefix+I)});return h(ae,J),ae}function za(I,J,U){var ae=this;I=m(I);var le=ae.ready().then(function(){J===void 0&&(J=null);var se=J;return new d(function(Ae,Ie){var De=ae._dbInfo;De.serializer.serialize(J,function(Le,qe){if(qe)Ie(qe);else try{localStorage.setItem(De.keyPrefix+I,Le),Ae(se)}catch(Ge){(Ge.name==="QuotaExceededError"||Ge.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ie(Ge),Ie(Ge)}})})});return h(le,U),le}function Va(I,J){if(J=p.apply(this,arguments),I=typeof I!="function"&&I||{},!I.name){var U=this.config();I.name=I.name||U.name,I.storeName=I.storeName||U.storeName}var ae=this,le;return I.name?le=new d(function(se){I.storeName?se(os(I,ae._defaultConfig)):se(I.name+"/")}).then(function(se){for(var Ae=localStorage.length-1;Ae>=0;Ae--){var Ie=localStorage.key(Ae);Ie.indexOf(se)===0&&localStorage.removeItem(Ie)}}):le=d.reject("Invalid arguments"),h(le,J),le}var mr={_driver:"localStorageWrapper",_initStorage:ll,_support:Qs(),iterate:ls,getItem:Ks,setItem:za,removeItem:Ua,clear:Gs,length:Ys,key:Zn,keys:pr,dropInstance:Va},Wa=function(J,U){return J===U||typeof J=="number"&&typeof U=="number"&&isNaN(J)&&isNaN(U)},Dr=function(J,U){for(var ae=J.length,le=0;le<ae;){if(Wa(J[le],U))return!0;le++}return!1},Ha=Array.isArray||function(I){return Object.prototype.toString.call(I)==="[object Array]"},hi={},me={},Be={INDEXEDDB:Dt,WEBSQL:Xn,LOCALSTORAGE:mr},Qe=[Be.INDEXEDDB._driver,Be.WEBSQL._driver,Be.LOCALSTORAGE._driver],Mt=["dropInstance"],Gt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Mt),Nn={description:"",driver:Qe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ai(I,J){I[J]=function(){var U=arguments;return I.ready().then(function(){return I[J].apply(I,U)})}}function Qa(){for(var I=1;I<arguments.length;I++){var J=arguments[I];if(J)for(var U in J)J.hasOwnProperty(U)&&(Ha(J[U])?arguments[0][U]=J[U].slice():arguments[0][U]=J[U])}return arguments[0]}var Js=function(){function I(J){a(this,I);for(var U in Be)if(Be.hasOwnProperty(U)){var ae=Be[U],le=ae._driver;this[U]=le,hi[le]||this.defineDriver(ae)}this._defaultConfig=Qa({},Nn),this._config=Qa({},this._defaultConfig,J),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return I.prototype.config=function(U){if((typeof U>"u"?"undefined":s(U))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ae in U){if(ae==="storeName"&&(U[ae]=U[ae].replace(/\W/g,"_")),ae==="version"&&typeof U[ae]!="number")return new Error("Database version must be a number.");this._config[ae]=U[ae]}return"driver"in U&&U.driver?this.setDriver(this._config.driver):!0}else return typeof U=="string"?this._config[U]:this._config},I.prototype.defineDriver=function(U,ae,le){var se=new d(function(Ae,Ie){try{var De=U._driver,Le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!U._driver){Ie(Le);return}for(var qe=Gt.concat("_initStorage"),Ge=0,ot=qe.length;Ge<ot;Ge++){var bt=qe[Ge],St=!Dr(Mt,bt);if((St||U[bt])&&typeof U[bt]!="function"){Ie(Le);return}}var Vt=function(){for(var Mr=function(gf){return function(){var Qc=new Error("Method "+gf+" is not implemented by the current driver"),Xs=d.reject(Qc);return h(Xs,arguments[arguments.length-1]),Xs}},Lr=0,ul=Mt.length;Lr<ul;Lr++){var dl=Mt[Lr];U[dl]||(U[dl]=Mr(dl))}};Vt();var Rt=function(Mr){hi[De]&&console.info("Redefining LocalForage driver: "+De),hi[De]=U,me[De]=Mr,Ae()};"_support"in U?U._support&&typeof U._support=="function"?U._support().then(Rt,Ie):Rt(!!U._support):Rt(!0)}catch(Dn){Ie(Dn)}});return f(se,ae,le),se},I.prototype.driver=function(){return this._driver||null},I.prototype.getDriver=function(U,ae,le){var se=hi[U]?d.resolve(hi[U]):d.reject(new Error("Driver not found."));return f(se,ae,le),se},I.prototype.getSerializer=function(U){var ae=d.resolve(yt);return f(ae,U),ae},I.prototype.ready=function(U){var ae=this,le=ae._driverSet.then(function(){return ae._ready===null&&(ae._ready=ae._initDriver()),ae._ready});return f(le,U,U),le},I.prototype.setDriver=function(U,ae,le){var se=this;Ha(U)||(U=[U]);var Ae=this._getSupportedDrivers(U);function Ie(){se._config.driver=se.driver()}function De(Ge){return se._extend(Ge),Ie(),se._ready=se._initStorage(se._config),se._ready}function Le(Ge){return function(){var ot=0;function bt(){for(;ot<Ge.length;){var St=Ge[ot];return ot++,se._dbInfo=null,se._ready=null,se.getDriver(St).then(De).catch(bt)}Ie();var Vt=new Error("No available storage method found.");return se._driverSet=d.reject(Vt),se._driverSet}return bt()}}var qe=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=qe.then(function(){var Ge=Ae[0];return se._dbInfo=null,se._ready=null,se.getDriver(Ge).then(function(ot){se._driver=ot._driver,Ie(),se._wrapLibraryMethodsWithReady(),se._initDriver=Le(Ae)})}).catch(function(){Ie();var Ge=new Error("No available storage method found.");return se._driverSet=d.reject(Ge),se._driverSet}),f(this._driverSet,ae,le),this._driverSet},I.prototype.supports=function(U){return!!me[U]},I.prototype._extend=function(U){Qa(this,U)},I.prototype._getSupportedDrivers=function(U){for(var ae=[],le=0,se=U.length;le<se;le++){var Ae=U[le];this.supports(Ae)&&ae.push(Ae)}return ae},I.prototype._wrapLibraryMethodsWithReady=function(){for(var U=0,ae=Gt.length;U<ae;U++)Ai(this,Gt[U])},I.prototype.createInstance=function(U){return new I(U)},I}(),cl=new Js;n.exports=cl},{3:3}]},{},[4])(4)})}),U5=Wy(function(i,e){/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t){i.exports=t()})(function(){return function t(n,r,s){function a(c,u){if(!r[c]){if(!n[c]){var d=typeof Kr=="function"&&Kr;if(!u&&d)return d(c,!0);if(o)return o(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[c]={exports:{}};n[c][0].call(f.exports,function(m){var p=n[c][1][m];return a(p||m)},f,f.exports,t,n,r,s)}return r[c].exports}for(var o=typeof Kr=="function"&&Kr,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,n,r){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var c,u,d,h,f,m,p,w=[],y=0,b=l.length,E=b,_=s.getTypeOf(l)!=="string";y<l.length;)E=b-y,d=_?(c=l[y++],u=y<b?l[y++]:0,y<b?l[y++]:0):(c=l.charCodeAt(y++),u=y<b?l.charCodeAt(y++):0,y<b?l.charCodeAt(y++):0),h=c>>2,f=(3&c)<<4|u>>4,m=1<E?(15&u)<<2|d>>6:64,p=2<E?63&d:64,w.push(o.charAt(h)+o.charAt(f)+o.charAt(m)+o.charAt(p));return w.join("")},r.decode=function(l){var c,u,d,h,f,m,p=0,w=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var b,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=a.uint8array?new Uint8Array(0|E):new Array(0|E);p<l.length;)c=o.indexOf(l.charAt(p++))<<2|(h=o.indexOf(l.charAt(p++)))>>4,u=(15&h)<<4|(f=o.indexOf(l.charAt(p++)))>>2,d=(3&f)<<6|(m=o.indexOf(l.charAt(p++))),b[w++]=c,f!==64&&(b[w++]=u),m!==64&&(b[w++]=d);return b}},{"./support":30,"./utils":32}],2:[function(t,n,r){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(u,d,h,f,m){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=m}c.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,r){var s=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,r){var s=t("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();n.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(c,u,d,h){var f=a,m=h+d;c^=-1;for(var p=h;p<m;p++)c=c>>>8^f[255&(c^u[p])];return-1^c}(0|l,o,o.length,0):function(c,u,d,h){var f=a,m=h+d;c^=-1;for(var p=h;p<m;p++)c=c>>>8^f[255&(c^u.charCodeAt(p))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,n,r){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),c=s?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}r.magic="\b\0",o.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},r.compressWorker=function(d){return new u("Deflate",d)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,r){function s(f,m){var p,w="";for(p=0;p<m;p++)w+=String.fromCharCode(255&f),f>>>=8;return w}function a(f,m,p,w,y,b){var E,_,k=f.file,B=f.compression,D=b!==c.utf8encode,O=o.transformTo("string",b(k.name)),R=o.transformTo("string",c.utf8encode(k.name)),Q=k.comment,$=o.transformTo("string",b(Q)),P=o.transformTo("string",c.utf8encode(Q)),q=R.length!==k.name.length,S=P.length!==Q.length,Z="",ve="",re="",de=k.dir,ne=k.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};m&&!p||(Y.crc32=f.crc32,Y.compressedSize=f.compressedSize,Y.uncompressedSize=f.uncompressedSize);var F=0;m&&(F|=8),D||!q&&!S||(F|=2048);var H=0,_e=0;de&&(H|=16),y==="UNIX"?(_e=798,H|=function(ye,Ve){var Ke=ye;return ye||(Ke=Ve?16893:33204),(65535&Ke)<<16}(k.unixPermissions,de)):(_e=20,H|=function(ye){return 63&(ye||0)}(k.dosPermissions)),E=ne.getUTCHours(),E<<=6,E|=ne.getUTCMinutes(),E<<=5,E|=ne.getUTCSeconds()/2,_=ne.getUTCFullYear()-1980,_<<=4,_|=ne.getUTCMonth()+1,_<<=5,_|=ne.getUTCDate(),q&&(ve=s(1,1)+s(u(O),4)+R,Z+="up"+s(ve.length,2)+ve),S&&(re=s(1,1)+s(u($),4)+P,Z+="uc"+s(re.length,2)+re);var we="";return we+="\n\0",we+=s(F,2),we+=B.magic,we+=s(E,2),we+=s(_,2),we+=s(Y.crc32,4),we+=s(Y.compressedSize,4),we+=s(Y.uncompressedSize,4),we+=s(O.length,2),we+=s(Z.length,2),{fileRecord:d.LOCAL_FILE_HEADER+we+O+Z,dirRecord:d.CENTRAL_FILE_HEADER+s(_e,2)+we+s($.length,2)+"\0\0\0\0"+s(H,4)+s(w,4)+O+Z+$}}var o=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),u=t("../crc32"),d=t("../signature");function h(f,m,p,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=p,this.encodeFileName=w,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,l),h.prototype.push=function(f){var m=f.meta.percent||0,p=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:p?(m+100*(p-w-1))/p:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var m=this.streamFiles&&!f.file.dir;if(m){var p=a(f,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var m=this.streamFiles&&!f.file.dir,p=a(f,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),m)this.push({data:function(w){return d.DATA_DESCRIPTOR+s(w.crc32,4)+s(w.compressedSize,4)+s(w.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var p=this.bytesWritten-f,w=function(y,b,E,_,k){var B=o.transformTo("string",k(_));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(b,4)+s(E,4)+s(B.length,2)+B}(this.dirRecords.length,p,f,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var m=this;return f.on("data",function(p){m.processChunk(p)}),f.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),f.on("error",function(p){m.error(p)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var m=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var p=0;p<m.length;p++)try{m[p].error(f)}catch(w){}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,m=0;m<f.length;m++)f[m].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,r){var s=t("../compressions"),a=t("./ZipFileWorker");r.generateWorker=function(o,l,c){var u=new a(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{o.forEach(function(h,f){d++;var m=function(b,E){var _=b||E,k=s[_];if(!k)throw new Error(_+" is not a valid compression method !");return k}(f.options.compression,l.compression),p=f.options.compressionOptions||l.compressionOptions||{},w=f.dir,y=f.date;f._compressWorker(m,p).withStreamInfo("file",{name:h,dir:w,date:y,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,r){var s=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function d(h){return new a.Promise(function(f,m){var p=h.decompressed.getContentWorker().pipe(new c);p.on("error",function(w){m(w)}).on("end",function(){p.streamInfo.crc32!==h.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}n.exports=function(h,f){var m=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(p){var w=new l(f);return w.load(p),w}).then(function(p){var w=[a.Promise.resolve(p)],y=p.files;if(f.checkCRC32)for(var b=0;b<y.length;b++)w.push(d(y[b]));return a.Promise.all(w)}).then(function(p){for(var w=p.shift(),y=w.files,b=0;b<y.length;b++){var E=y[b],_=E.fileNameStr,k=s.resolve(E.fileNameStr);m.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:f.createFolders}),E.dir||(m.file(k).unsafeOriginalName=_)}return w.zipComment.length&&(m.comment=w.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,r){var s=t("../utils"),a=t("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,r){var s=t("readable-stream").Readable;function a(o,l,c){s.call(this,l),this._helper=o;var u=this;o.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,n,r){n.exports={isNode:typeof Pe<"u",newBufferFrom:function(s,a){if(Pe.from&&Pe.from!==Uint8Array.from)return Pe.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Pe(s,a)},allocBuffer:function(s){if(Pe.alloc)return Pe.alloc(s);var a=new Pe(s);return a.fill(0),a},isBuffer:function(s){return Pe.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,r){function s(k,B,D){var O,R=o.getTypeOf(B),Q=o.extend(D||{},u);Q.date=Q.date||new Date,Q.compression!==null&&(Q.compression=Q.compression.toUpperCase()),typeof Q.unixPermissions=="string"&&(Q.unixPermissions=parseInt(Q.unixPermissions,8)),Q.unixPermissions&&16384&Q.unixPermissions&&(Q.dir=!0),Q.dosPermissions&&16&Q.dosPermissions&&(Q.dir=!0),Q.dir&&(k=y(k)),Q.createFolders&&(O=w(k))&&b.call(this,O,!0);var $=R==="string"&&Q.binary===!1&&Q.base64===!1;D&&D.binary!==void 0||(Q.binary=!$),(B instanceof d&&B.uncompressedSize===0||Q.dir||!B||B.length===0)&&(Q.base64=!1,Q.binary=!0,B="",Q.compression="STORE",R="string");var P=null;P=B instanceof d||B instanceof l?B:m.isNode&&m.isStream(B)?new p(k,B):o.prepareContent(k,B,Q.binary,Q.optimizedBinaryString,Q.base64);var q=new h(k,P,Q);this.files[k]=q}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),u=t("./defaults"),d=t("./compressedObject"),h=t("./zipObject"),f=t("./generate"),m=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),w=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var B=k.lastIndexOf("/");return 0<B?k.substring(0,B):""},y=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},b=function(k,B){return B=B!==void 0?B:u.createFolders,k=y(k),this.files[k]||s.call(this,k,null,{dir:!0,createFolders:B}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var B,D,O;for(B in this.files)O=this.files[B],(D=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&k(D,O)},filter:function(k){var B=[];return this.forEach(function(D,O){k(D,O)&&B.push(O)}),B},file:function(k,B,D){if(arguments.length!==1)return k=this.root+k,s.call(this,k,B,D),this;if(E(k)){var O=k;return this.filter(function(Q,$){return!$.dir&&O.test(Q)})}var R=this.files[this.root+k];return R&&!R.dir?R:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(R,Q){return Q.dir&&k.test(R)});var B=this.root+k,D=b.call(this,B),O=this.clone();return O.root=D.name,O},remove:function(k){k=this.root+k;var B=this.files[k];if(B||(k.slice(-1)!=="/"&&(k+="/"),B=this.files[k]),B&&!B.dir)delete this.files[k];else for(var D=this.filter(function(R,Q){return Q.name.slice(0,k.length)===k}),O=0;O<D.length;O++)delete this.files[D[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var B,D={};try{if((D=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");o.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var O=D.comment||this.comment||"";B=f.generateWorker(this,D,O)}catch(R){(B=new l("error")).error(R)}return new c(B,D.type||"string",D.mimeType)},generateAsync:function(k,B){return this.generateInternalStream(k).accumulate(B)},generateNodeStream:function(k,B){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(B)}};n.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,r){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,r){var s=t("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,n,r){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,r){var s=t("./Uint8ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,r){var s=t("./DataReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,n,r){var s=t("./ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,r){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");n.exports=function(d){var h=s.getTypeOf(d);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new c(d):a.uint8array?new u(s.transformTo("uint8array",d)):new o(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,r){var s=t("./GenericWorker"),a=t("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,r){var s=t("./GenericWorker"),a=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,r){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,r){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(t,n,r){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),c=t("../support"),u=t("../external"),d=null;if(c.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch(m){}function h(m,p){return new u.Promise(function(w,y){var b=[],E=m._internalType,_=m._outputType,k=m._mimeType;m.on("data",function(B,D){b.push(B),p&&p(D)}).on("error",function(B){b=[],y(B)}).on("end",function(){try{var B=function(D,O,R){switch(D){case"blob":return s.newBlob(s.transformTo("arraybuffer",O),R);case"base64":return l.encode(O);default:return s.transformTo(D,O)}}(_,function(D,O){var R,Q=0,$=null,P=0;for(R=0;R<O.length;R++)P+=O[R].length;switch(D){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for($=new Uint8Array(P),R=0;R<O.length;R++)$.set(O[R],Q),Q+=O[R].length;return $;case"nodebuffer":return Pe.concat(O);default:throw new Error("concat : unsupported type '"+D+"'")}}(E,b),k);w(B)}catch(D){y(D)}b=[]}).resume()})}function f(m,p,w){var y=p;switch(p){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=p,this._mimeType=w,s.checkSupport(y),this._worker=m.pipe(new a(y)),m.lock()}catch(b){this._worker=new o("error"),this._worker.error(b)}}f.prototype={accumulate:function(m){return h(this,m)},on:function(m,p){var w=this;return m==="data"?this._worker.on(m,function(y){p.call(w,y.data,y.meta)}):this._worker.on(m,function(){s.delay(p,arguments,w)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Pe<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch(o){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),r.blob=a.getBlob("application/zip").size===0}catch(l){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(o){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,r){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}r.utf8encode=function(f){return a.nodebuffer?o.newBufferFrom(f,"utf-8"):function(m){var p,w,y,b,E,_=m.length,k=0;for(b=0;b<_;b++)(64512&(w=m.charCodeAt(b)))==55296&&b+1<_&&(64512&(y=m.charCodeAt(b+1)))==56320&&(w=65536+(w-55296<<10)+(y-56320),b++),k+=w<128?1:w<2048?2:w<65536?3:4;for(p=a.uint8array?new Uint8Array(k):new Array(k),b=E=0;E<k;b++)(64512&(w=m.charCodeAt(b)))==55296&&b+1<_&&(64512&(y=m.charCodeAt(b+1)))==56320&&(w=65536+(w-55296<<10)+(y-56320),b++),w<128?p[E++]=w:(w<2048?p[E++]=192|w>>>6:(w<65536?p[E++]=224|w>>>12:(p[E++]=240|w>>>18,p[E++]=128|w>>>12&63),p[E++]=128|w>>>6&63),p[E++]=128|63&w);return p}(f)},r.utf8decode=function(f){return a.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(m){var p,w,y,b,E=m.length,_=new Array(2*E);for(p=w=0;p<E;)if((y=m[p++])<128)_[w++]=y;else if(4<(b=c[y]))_[w++]=65533,p+=b-1;else{for(y&=b===2?31:b===3?15:7;1<b&&p<E;)y=y<<6|63&m[p++],b--;1<b?_[w++]=65533:y<65536?_[w++]=y:(y-=65536,_[w++]=55296|y>>10&1023,_[w++]=56320|1023&y)}return _.length!==w&&(_.subarray?_=_.subarray(0,w):_.length=w),s.applyFromCharCode(_)}(f=s.transformTo(a.uint8array?"uint8array":"array",f))},s.inherits(d,l),d.prototype.processChunk=function(f){var m=s.transformTo(a.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var p=m;(m=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),m.set(p,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var w=function(b,E){var _;for((E=E||b.length)>b.length&&(E=b.length),_=E-1;0<=_&&(192&b[_])==128;)_--;return _<0||_===0?E:_+c[b[_]]>E?_:E}(m),y=m;w!==m.length&&(a.uint8array?(y=m.subarray(0,w),this.leftOver=m.subarray(w,m.length)):(y=m.slice(0,w),this.leftOver=m.slice(w,m.length))),this.push({data:r.utf8decode(y),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=d,s.inherits(h,l),h.prototype.processChunk=function(f){this.push({data:r.utf8encode(f.data),meta:f.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,r){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function c(p){return p}function u(p,w){for(var y=0;y<p.length;++y)w[y]=255&p.charCodeAt(y);return w}t("setimmediate"),r.newBlob=function(p,w){r.checkSupport("blob");try{return new Blob([p],{type:w})}catch(b){try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(p),y.getBlob(w)}catch(E){throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(p,w,y){var b=[],E=0,_=p.length;if(_<=y)return String.fromCharCode.apply(null,p);for(;E<_;)w==="array"||w==="nodebuffer"?b.push(String.fromCharCode.apply(null,p.slice(E,Math.min(E+y,_)))):b.push(String.fromCharCode.apply(null,p.subarray(E,Math.min(E+y,_)))),E+=y;return b.join("")},stringifyByChar:function(p){for(var w="",y=0;y<p.length;y++)w+=String.fromCharCode(p[y]);return w},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(p){return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch(p){return!1}}()}};function h(p){var w=65536,y=r.getTypeOf(p),b=!0;if(y==="uint8array"?b=d.applyCanBeUsed.uint8array:y==="nodebuffer"&&(b=d.applyCanBeUsed.nodebuffer),b)for(;1<w;)try{return d.stringifyByChunk(p,y,w)}catch(E){w=Math.floor(w/2)}return d.stringifyByChar(p)}function f(p,w){for(var y=0;y<p.length;y++)w[y]=p[y];return w}r.applyFromCharCode=h;var m={};m.string={string:c,array:function(p){return u(p,new Array(p.length))},arraybuffer:function(p){return m.string.uint8array(p).buffer},uint8array:function(p){return u(p,new Uint8Array(p.length))},nodebuffer:function(p){return u(p,o.allocBuffer(p.length))}},m.array={string:h,array:c,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},m.arraybuffer={string:function(p){return h(new Uint8Array(p))},array:function(p){return f(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:c,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},m.uint8array={string:h,array:function(p){return f(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:c,nodebuffer:function(p){return o.newBufferFrom(p)}},m.nodebuffer={string:h,array:function(p){return f(p,new Array(p.length))},arraybuffer:function(p){return m.nodebuffer.uint8array(p).buffer},uint8array:function(p){return f(p,new Uint8Array(p.length))},nodebuffer:c},r.transformTo=function(p,w){if(w=w||"",!p)return w;r.checkSupport(p);var y=r.getTypeOf(w);return m[y][p](w)},r.resolve=function(p){for(var w=p.split("/"),y=[],b=0;b<w.length;b++){var E=w[b];E==="."||E===""&&b!==0&&b!==w.length-1||(E===".."?y.pop():y.push(E))}return y.join("/")},r.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(p)?"nodebuffer":s.uint8array&&p instanceof Uint8Array?"uint8array":s.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(p){if(!s[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(p){var w,y,b="";for(y=0;y<(p||"").length;y++)b+="\\x"+((w=p.charCodeAt(y))<16?"0":"")+w.toString(16).toUpperCase();return b},r.delay=function(p,w,y){setImmediate(function(){p.apply(y||null,w||[])})},r.inherits=function(p,w){function y(){}y.prototype=w.prototype,p.prototype=new y},r.extend=function(){var p,w,y={};for(p=0;p<arguments.length;p++)for(w in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],w)&&y[w]===void 0&&(y[w]=arguments[p][w]);return y},r.prepareContent=function(p,w,y,b,E){return l.Promise.resolve(w).then(function(_){return s.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,B){var D=new FileReader;D.onload=function(O){k(O.target.result)},D.onerror=function(O){B(O.target.error)},D.readAsArrayBuffer(_)}):_}).then(function(_){var k=r.getTypeOf(_);return k?(k==="arraybuffer"?_=r.transformTo("uint8array",_):k==="string"&&(E?_=a.decode(_):y&&b!==!0&&(_=function(B){return u(B,s.uint8array?new Uint8Array(B.length):new Array(B.length))}(_))),_):l.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),c=t("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var m=this.reader.readString(4)===h;return this.reader.setIndex(f),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=a.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,m=this.zip64EndOfCentralSize-44;0<m;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var m=h-f;if(0<m)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),u=t("./compressions"),d=t("./support");function h(f,m){this.options=f,this.loadOptions=m}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var m,p;if(f.skip(22),this.fileNameLength=f.readInt(2),p=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(w){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===w)return u[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var m=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(m),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var m,p,w,y=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<y;)m=f.readInt(2),p=f.readInt(2),w=f.readData(p),this.extraFields[m]={id:m,length:p,value:w};f.setIndex(y)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var p=a.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var y=a.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var m=s(f.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var m=s(f.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(f.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,r){function s(m,p,w){this.name=m,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=p,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),u=t("./stream/GenericWorker");s.prototype={internalStream:function(m){var p=null,w="string";try{if(!m)throw new Error("No output type specified.");var y=(w=m.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),p=this._decompressWorker();var b=!this._dataBinary;b&&!y&&(p=p.pipe(new l.Utf8EncodeWorker)),!b&&y&&(p=p.pipe(new l.Utf8DecodeWorker))}catch(E){(p=new u("error")).error(E)}return new a(p,w,"")},async:function(m,p){return this.internalStream(m).accumulate(p)},nodeStream:function(m,p){return this.internalStream(m||"nodebuffer").toNodejsStream(p)},_compressWorker:function(m,p){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(w,m,p)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)s.prototype[d[f]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,r){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(m),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var p=s.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:function(){setTimeout(m,0)};else{var h=new s.MessageChannel;h.port1.onmessage=m,a=function(){h.port2.postMessage(0)}}var f=[];function m(){var p,w;o=!0;for(var y=f.length;y;){for(w=f,f=[],p=-1;++p<y;)w[p]();y=f.length}o=!1}n.exports=function(p){f.push(p)!==1||o||a()}}).call(this,typeof Ns<"u"?Ns:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,r){var s=t("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==a&&p(this,y)}function h(y,b,E){this.promise=y,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function f(y,b,E){s(function(){var _;try{_=b(E)}catch(k){return o.reject(y,k)}_===y?o.reject(y,new TypeError("Cannot resolve promise with itself")):o.resolve(y,_)})}function m(y){var b=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof b=="function")return function(){b.apply(y,arguments)}}function p(y,b){var E=!1;function _(D){E||(E=!0,o.reject(y,D))}function k(D){E||(E=!0,o.resolve(y,D))}var B=w(function(){b(k,_)});B.status==="error"&&_(B.value)}function w(y,b){var E={};try{E.value=y(b),E.status="success"}catch(_){E.status="error",E.value=_}return E}(n.exports=d).prototype.finally=function(y){if(typeof y!="function")return this;var b=this.constructor;return this.then(function(E){return b.resolve(y()).then(function(){return E})},function(E){return b.resolve(y()).then(function(){throw E})})},d.prototype.catch=function(y){return this.then(null,y)},d.prototype.then=function(y,b){if(typeof y!="function"&&this.state===c||typeof b!="function"&&this.state===l)return this;var E=new this.constructor(a);return this.state!==u?f(E,this.state===c?y:b,this.outcome):this.queue.push(new h(E,y,b)),E},h.prototype.callFulfilled=function(y){o.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){f(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){o.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){f(this.promise,this.onRejected,y)},o.resolve=function(y,b){var E=w(m,b);if(E.status==="error")return o.reject(y,E.value);var _=E.value;if(_)p(y,_);else{y.state=c,y.outcome=b;for(var k=-1,B=y.queue.length;++k<B;)y.queue[k].callFulfilled(b)}return y},o.reject=function(y,b){y.state=l,y.outcome=b;for(var E=-1,_=y.queue.length;++E<_;)y.queue[E].callRejected(b);return y},d.resolve=function(y){return y instanceof this?y:o.resolve(new this(a),y)},d.reject=function(y){var b=new this(a);return o.reject(b,y)},d.all=function(y){var b=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=y.length,_=!1;if(!E)return this.resolve([]);for(var k=new Array(E),B=0,D=-1,O=new this(a);++D<E;)R(y[D],D);return O;function R(Q,$){b.resolve(Q).then(function(P){k[$]=P,++B!==E||_||(_=!0,o.resolve(O,k))},function(P){_||(_=!0,o.reject(O,P))})}},d.race=function(y){var b=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=y.length,_=!1;if(!E)return this.resolve([]);for(var k=-1,B=new this(a);++k<E;)D=y[k],b.resolve(D).then(function(O){_||(_=!0,o.resolve(B,O))},function(O){_||(_=!0,o.reject(B,O))});var D;return B}},{immediate:36}],38:[function(t,n,r){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,r){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,m=8;function p(y){if(!(this instanceof p))return new p(y);this.options=a.assign({level:h,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},y||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(E!==d)throw new Error(l[E]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var _;if(_=typeof b.dictionary=="string"?o.string2buf(b.dictionary):u.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(E=s.deflateSetDictionary(this.strm,_))!==d)throw new Error(l[E]);this._dict_set=!0}}function w(y,b){var E=new p(b);if(E.push(y,!0),E.err)throw E.msg||l[E.err];return E.result}p.prototype.push=function(y,b){var E,_,k=this.strm,B=this.options.chunkSize;if(this.ended)return!1;_=b===~~b?b:b===!0?4:0,typeof y=="string"?k.input=o.string2buf(y):u.call(y)==="[object ArrayBuffer]"?k.input=new Uint8Array(y):k.input=y,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(B),k.next_out=0,k.avail_out=B),(E=s.deflate(k,_))!==1&&E!==d)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return _===4?(E=s.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===d):_!==2||(this.onEnd(d),!(k.avail_out=0))},p.prototype.onData=function(y){this.chunks.push(y)},p.prototype.onEnd=function(y){y===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},r.Deflate=p,r.deflate=w,r.deflateRaw=function(y,b){return(b=b||{}).raw=!0,w(y,b)},r.gzip=function(y,b){return(b=b||{}).gzip=!0,w(y,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,r){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),u=t("./zlib/zstream"),d=t("./zlib/gzheader"),h=Object.prototype.toString;function f(p){if(!(this instanceof f))return new f(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||p&&p.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,w.windowBits);if(y!==l.Z_OK)throw new Error(c[y]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function m(p,w){var y=new f(w);if(y.push(p,!0),y.err)throw y.msg||c[y.err];return y.result}f.prototype.push=function(p,w){var y,b,E,_,k,B,D=this.strm,O=this.options.chunkSize,R=this.options.dictionary,Q=!1;if(this.ended)return!1;b=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof p=="string"?D.input=o.binstring2buf(p):h.call(p)==="[object ArrayBuffer]"?D.input=new Uint8Array(p):D.input=p,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new a.Buf8(O),D.next_out=0,D.avail_out=O),(y=s.inflate(D,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&R&&(B=typeof R=="string"?o.string2buf(R):h.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,y=s.inflateSetDictionary(this.strm,B)),y===l.Z_BUF_ERROR&&Q===!0&&(y=l.Z_OK,Q=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&y!==l.Z_STREAM_END&&(D.avail_in!==0||b!==l.Z_FINISH&&b!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(D.output,D.next_out),_=D.next_out-E,k=o.buf2string(D.output,E),D.next_out=_,D.avail_out=O-_,_&&a.arraySet(D.output,D.output,E,_,0),this.onData(k)):this.onData(a.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(Q=!0)}while((0<D.avail_in||D.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(b=l.Z_FINISH),b===l.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):b!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(D.avail_out=0))},f.prototype.onData=function(p){this.chunks.push(p)},f.prototype.onEnd=function(p){p===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},r.Inflate=f,r.inflate=m,r.inflateRaw=function(p,w){return(w=w||{}).raw=!0,m(p,w)},r.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},r.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){var c,u,d,h,f,m;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(m=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)f=l[c],m.set(f,h),h+=f.length;return m}},o={arraySet:function(l,c,u,d,h){for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(t,n,r){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(d){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){o=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(d,h));for(var f="",m=0;m<h;m++)f+=String.fromCharCode(d[m]);return f}l[254]=l[254]=1,r.string2buf=function(d){var h,f,m,p,w,y=d.length,b=0;for(p=0;p<y;p++)(64512&(f=d.charCodeAt(p)))==55296&&p+1<y&&(64512&(m=d.charCodeAt(p+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),p++),b+=f<128?1:f<2048?2:f<65536?3:4;for(h=new s.Buf8(b),p=w=0;w<b;p++)(64512&(f=d.charCodeAt(p)))==55296&&p+1<y&&(64512&(m=d.charCodeAt(p+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),p++),f<128?h[w++]=f:(f<2048?h[w++]=192|f>>>6:(f<65536?h[w++]=224|f>>>12:(h[w++]=240|f>>>18,h[w++]=128|f>>>12&63),h[w++]=128|f>>>6&63),h[w++]=128|63&f);return h},r.buf2binstring=function(d){return u(d,d.length)},r.binstring2buf=function(d){for(var h=new s.Buf8(d.length),f=0,m=h.length;f<m;f++)h[f]=d.charCodeAt(f);return h},r.buf2string=function(d,h){var f,m,p,w,y=h||d.length,b=new Array(2*y);for(f=m=0;f<y;)if((p=d[f++])<128)b[m++]=p;else if(4<(w=l[p]))b[m++]=65533,f+=w-1;else{for(p&=w===2?31:w===3?15:7;1<w&&f<y;)p=p<<6|63&d[f++],w--;1<w?b[m++]=65533:p<65536?b[m++]=p:(p-=65536,b[m++]=55296|p>>10&1023,b[m++]=56320|1023&p)}return u(b,m)},r.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+l[d[f]]>h?f:h}},{"./common":41}],43:[function(t,n,r){n.exports=function(s,a,o,l){for(var c=65535&s|0,u=s>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;u=u+(c=c+a[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(t,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,r){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();n.exports=function(a,o,l,c){var u=s,d=c+l;a^=-1;for(var h=c;h<d;h++)a=a>>>8^u[255&(a^o[h])];return-1^a}},{}],46:[function(t,n,r){var s,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),c=t("./crc32"),u=t("./messages"),d=0,h=4,f=0,m=-2,p=-1,w=4,y=2,b=8,E=9,_=286,k=30,B=19,D=2*_+1,O=15,R=3,Q=258,$=Q+R+1,P=42,q=113,S=1,Z=2,ve=3,re=4;function de(C,be){return C.msg=u[be],be}function ne(C){return(C<<1)-(4<C?9:0)}function Y(C){for(var be=C.length;0<=--be;)C[be]=0}function F(C){var be=C.state,ge=be.pending;ge>C.avail_out&&(ge=C.avail_out),ge!==0&&(a.arraySet(C.output,be.pending_buf,be.pending_out,ge,C.next_out),C.next_out+=ge,be.pending_out+=ge,C.total_out+=ge,C.avail_out-=ge,be.pending-=ge,be.pending===0&&(be.pending_out=0))}function H(C,be){o._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,be),C.block_start=C.strstart,F(C.strm)}function _e(C,be){C.pending_buf[C.pending++]=be}function we(C,be){C.pending_buf[C.pending++]=be>>>8&255,C.pending_buf[C.pending++]=255&be}function ye(C,be){var ge,z,L=C.max_chain_length,ie=C.strstart,Ne=C.prev_length,Se=C.nice_match,ce=C.strstart>C.w_size-$?C.strstart-(C.w_size-$):0,$e=C.window,G=C.w_mask,X=C.prev,pe=C.strstart+Q,A=$e[ie+Ne-1],v=$e[ie+Ne];C.prev_length>=C.good_match&&(L>>=2),Se>C.lookahead&&(Se=C.lookahead);do if($e[(ge=be)+Ne]===v&&$e[ge+Ne-1]===A&&$e[ge]===$e[ie]&&$e[++ge]===$e[ie+1]){ie+=2,ge++;do;while($e[++ie]===$e[++ge]&&$e[++ie]===$e[++ge]&&$e[++ie]===$e[++ge]&&$e[++ie]===$e[++ge]&&$e[++ie]===$e[++ge]&&$e[++ie]===$e[++ge]&&$e[++ie]===$e[++ge]&&$e[++ie]===$e[++ge]&&ie<pe);if(z=Q-(pe-ie),ie=pe-Q,Ne<z){if(C.match_start=be,Se<=(Ne=z))break;A=$e[ie+Ne-1],v=$e[ie+Ne]}}while((be=X[be&G])>ce&&--L!=0);return Ne<=C.lookahead?Ne:C.lookahead}function Ve(C){var be,ge,z,L,ie,Ne,Se,ce,$e,G,X=C.w_size;do{if(L=C.window_size-C.lookahead-C.strstart,C.strstart>=X+(X-$)){for(a.arraySet(C.window,C.window,X,X,0),C.match_start-=X,C.strstart-=X,C.block_start-=X,be=ge=C.hash_size;z=C.head[--be],C.head[be]=X<=z?z-X:0,--ge;);for(be=ge=X;z=C.prev[--be],C.prev[be]=X<=z?z-X:0,--ge;);L+=X}if(C.strm.avail_in===0)break;if(Ne=C.strm,Se=C.window,ce=C.strstart+C.lookahead,$e=L,G=void 0,G=Ne.avail_in,$e<G&&(G=$e),ge=G===0?0:(Ne.avail_in-=G,a.arraySet(Se,Ne.input,Ne.next_in,G,ce),Ne.state.wrap===1?Ne.adler=l(Ne.adler,Se,G,ce):Ne.state.wrap===2&&(Ne.adler=c(Ne.adler,Se,G,ce)),Ne.next_in+=G,Ne.total_in+=G,G),C.lookahead+=ge,C.lookahead+C.insert>=R)for(ie=C.strstart-C.insert,C.ins_h=C.window[ie],C.ins_h=(C.ins_h<<C.hash_shift^C.window[ie+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[ie+R-1])&C.hash_mask,C.prev[ie&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=ie,ie++,C.insert--,!(C.lookahead+C.insert<R)););}while(C.lookahead<$&&C.strm.avail_in!==0)}function Ke(C,be){for(var ge,z;;){if(C.lookahead<$){if(Ve(C),C.lookahead<$&&be===d)return S;if(C.lookahead===0)break}if(ge=0,C.lookahead>=R&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+R-1])&C.hash_mask,ge=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),ge!==0&&C.strstart-ge<=C.w_size-$&&(C.match_length=ye(C,ge)),C.match_length>=R)if(z=o._tr_tally(C,C.strstart-C.match_start,C.match_length-R),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=R){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+R-1])&C.hash_mask,ge=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else z=o._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(z&&(H(C,!1),C.strm.avail_out===0))return S}return C.insert=C.strstart<R-1?C.strstart:R-1,be===h?(H(C,!0),C.strm.avail_out===0?ve:re):C.last_lit&&(H(C,!1),C.strm.avail_out===0)?S:Z}function Ye(C,be){for(var ge,z,L;;){if(C.lookahead<$){if(Ve(C),C.lookahead<$&&be===d)return S;if(C.lookahead===0)break}if(ge=0,C.lookahead>=R&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+R-1])&C.hash_mask,ge=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=R-1,ge!==0&&C.prev_length<C.max_lazy_match&&C.strstart-ge<=C.w_size-$&&(C.match_length=ye(C,ge),C.match_length<=5&&(C.strategy===1||C.match_length===R&&4096<C.strstart-C.match_start)&&(C.match_length=R-1)),C.prev_length>=R&&C.match_length<=C.prev_length){for(L=C.strstart+C.lookahead-R,z=o._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-R),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=L&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+R-1])&C.hash_mask,ge=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=R-1,C.strstart++,z&&(H(C,!1),C.strm.avail_out===0))return S}else if(C.match_available){if((z=o._tr_tally(C,0,C.window[C.strstart-1]))&&H(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return S}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(z=o._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<R-1?C.strstart:R-1,be===h?(H(C,!0),C.strm.avail_out===0?ve:re):C.last_lit&&(H(C,!1),C.strm.avail_out===0)?S:Z}function Xe(C,be,ge,z,L){this.good_length=C,this.max_lazy=be,this.nice_length=ge,this.max_chain=z,this.func=L}function ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*D),this.dyn_dtree=new a.Buf16(2*(2*k+1)),this.bl_tree=new a.Buf16(2*(2*B+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(O+1),this.heap=new a.Buf16(2*_+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*_+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ct(C){var be;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=y,(be=C.state).pending=0,be.pending_out=0,be.wrap<0&&(be.wrap=-be.wrap),be.status=be.wrap?P:q,C.adler=be.wrap===2?0:1,be.last_flush=d,o._tr_init(be),f):de(C,m)}function Tt(C){var be=ct(C);return be===f&&function(ge){ge.window_size=2*ge.w_size,Y(ge.head),ge.max_lazy_match=s[ge.level].max_lazy,ge.good_match=s[ge.level].good_length,ge.nice_match=s[ge.level].nice_length,ge.max_chain_length=s[ge.level].max_chain,ge.strstart=0,ge.block_start=0,ge.lookahead=0,ge.insert=0,ge.match_length=ge.prev_length=R-1,ge.match_available=0,ge.ins_h=0}(C.state),be}function Dt(C,be,ge,z,L,ie){if(!C)return m;var Ne=1;if(be===p&&(be=6),z<0?(Ne=0,z=-z):15<z&&(Ne=2,z-=16),L<1||E<L||ge!==b||z<8||15<z||be<0||9<be||ie<0||w<ie)return de(C,m);z===8&&(z=9);var Se=new ft;return(C.state=Se).strm=C,Se.wrap=Ne,Se.gzhead=null,Se.w_bits=z,Se.w_size=1<<Se.w_bits,Se.w_mask=Se.w_size-1,Se.hash_bits=L+7,Se.hash_size=1<<Se.hash_bits,Se.hash_mask=Se.hash_size-1,Se.hash_shift=~~((Se.hash_bits+R-1)/R),Se.window=new a.Buf8(2*Se.w_size),Se.head=new a.Buf16(Se.hash_size),Se.prev=new a.Buf16(Se.w_size),Se.lit_bufsize=1<<L+6,Se.pending_buf_size=4*Se.lit_bufsize,Se.pending_buf=new a.Buf8(Se.pending_buf_size),Se.d_buf=1*Se.lit_bufsize,Se.l_buf=3*Se.lit_bufsize,Se.level=be,Se.strategy=ie,Se.method=ge,Tt(C)}s=[new Xe(0,0,0,0,function(C,be){var ge=65535;for(ge>C.pending_buf_size-5&&(ge=C.pending_buf_size-5);;){if(C.lookahead<=1){if(Ve(C),C.lookahead===0&&be===d)return S;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var z=C.block_start+ge;if((C.strstart===0||C.strstart>=z)&&(C.lookahead=C.strstart-z,C.strstart=z,H(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-$&&(H(C,!1),C.strm.avail_out===0))return S}return C.insert=0,be===h?(H(C,!0),C.strm.avail_out===0?ve:re):(C.strstart>C.block_start&&(H(C,!1),C.strm.avail_out),S)}),new Xe(4,4,8,4,Ke),new Xe(4,5,16,8,Ke),new Xe(4,6,32,32,Ke),new Xe(4,4,16,16,Ye),new Xe(8,16,32,32,Ye),new Xe(8,16,128,128,Ye),new Xe(8,32,128,256,Ye),new Xe(32,128,258,1024,Ye),new Xe(32,258,258,4096,Ye)],r.deflateInit=function(C,be){return Dt(C,be,b,15,8,0)},r.deflateInit2=Dt,r.deflateReset=Tt,r.deflateResetKeep=ct,r.deflateSetHeader=function(C,be){return C&&C.state?C.state.wrap!==2?m:(C.state.gzhead=be,f):m},r.deflate=function(C,be){var ge,z,L,ie;if(!C||!C.state||5<be||be<0)return C?de(C,m):m;if(z=C.state,!C.output||!C.input&&C.avail_in!==0||z.status===666&&be!==h)return de(C,C.avail_out===0?-5:m);if(z.strm=C,ge=z.last_flush,z.last_flush=be,z.status===P)if(z.wrap===2)C.adler=0,_e(z,31),_e(z,139),_e(z,8),z.gzhead?(_e(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),_e(z,255&z.gzhead.time),_e(z,z.gzhead.time>>8&255),_e(z,z.gzhead.time>>16&255),_e(z,z.gzhead.time>>24&255),_e(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),_e(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(_e(z,255&z.gzhead.extra.length),_e(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(C.adler=c(C.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(_e(z,0),_e(z,0),_e(z,0),_e(z,0),_e(z,0),_e(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),_e(z,3),z.status=q);else{var Ne=b+(z.w_bits-8<<4)<<8;Ne|=(2<=z.strategy||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&(Ne|=32),Ne+=31-Ne%31,z.status=q,we(z,Ne),z.strstart!==0&&(we(z,C.adler>>>16),we(z,65535&C.adler)),C.adler=1}if(z.status===69)if(z.gzhead.extra){for(L=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>L&&(C.adler=c(C.adler,z.pending_buf,z.pending-L,L)),F(C),L=z.pending,z.pending!==z.pending_buf_size));)_e(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>L&&(C.adler=c(C.adler,z.pending_buf,z.pending-L,L)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){L=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>L&&(C.adler=c(C.adler,z.pending_buf,z.pending-L,L)),F(C),L=z.pending,z.pending===z.pending_buf_size)){ie=1;break}ie=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,_e(z,ie)}while(ie!==0);z.gzhead.hcrc&&z.pending>L&&(C.adler=c(C.adler,z.pending_buf,z.pending-L,L)),ie===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){L=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>L&&(C.adler=c(C.adler,z.pending_buf,z.pending-L,L)),F(C),L=z.pending,z.pending===z.pending_buf_size)){ie=1;break}ie=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,_e(z,ie)}while(ie!==0);z.gzhead.hcrc&&z.pending>L&&(C.adler=c(C.adler,z.pending_buf,z.pending-L,L)),ie===0&&(z.status=103)}else z.status=103;if(z.status===103&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&F(C),z.pending+2<=z.pending_buf_size&&(_e(z,255&C.adler),_e(z,C.adler>>8&255),C.adler=0,z.status=q)):z.status=q),z.pending!==0){if(F(C),C.avail_out===0)return z.last_flush=-1,f}else if(C.avail_in===0&&ne(be)<=ne(ge)&&be!==h)return de(C,-5);if(z.status===666&&C.avail_in!==0)return de(C,-5);if(C.avail_in!==0||z.lookahead!==0||be!==d&&z.status!==666){var Se=z.strategy===2?function(ce,$e){for(var G;;){if(ce.lookahead===0&&(Ve(ce),ce.lookahead===0)){if($e===d)return S;break}if(ce.match_length=0,G=o._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,G&&(H(ce,!1),ce.strm.avail_out===0))return S}return ce.insert=0,$e===h?(H(ce,!0),ce.strm.avail_out===0?ve:re):ce.last_lit&&(H(ce,!1),ce.strm.avail_out===0)?S:Z}(z,be):z.strategy===3?function(ce,$e){for(var G,X,pe,A,v=ce.window;;){if(ce.lookahead<=Q){if(Ve(ce),ce.lookahead<=Q&&$e===d)return S;if(ce.lookahead===0)break}if(ce.match_length=0,ce.lookahead>=R&&0<ce.strstart&&(X=v[pe=ce.strstart-1])===v[++pe]&&X===v[++pe]&&X===v[++pe]){A=ce.strstart+Q;do;while(X===v[++pe]&&X===v[++pe]&&X===v[++pe]&&X===v[++pe]&&X===v[++pe]&&X===v[++pe]&&X===v[++pe]&&X===v[++pe]&&pe<A);ce.match_length=Q-(A-pe),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=R?(G=o._tr_tally(ce,1,ce.match_length-R),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(G=o._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),G&&(H(ce,!1),ce.strm.avail_out===0))return S}return ce.insert=0,$e===h?(H(ce,!0),ce.strm.avail_out===0?ve:re):ce.last_lit&&(H(ce,!1),ce.strm.avail_out===0)?S:Z}(z,be):s[z.level].func(z,be);if(Se!==ve&&Se!==re||(z.status=666),Se===S||Se===ve)return C.avail_out===0&&(z.last_flush=-1),f;if(Se===Z&&(be===1?o._tr_align(z):be!==5&&(o._tr_stored_block(z,0,0,!1),be===3&&(Y(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),F(C),C.avail_out===0))return z.last_flush=-1,f}return be!==h?f:z.wrap<=0?1:(z.wrap===2?(_e(z,255&C.adler),_e(z,C.adler>>8&255),_e(z,C.adler>>16&255),_e(z,C.adler>>24&255),_e(z,255&C.total_in),_e(z,C.total_in>>8&255),_e(z,C.total_in>>16&255),_e(z,C.total_in>>24&255)):(we(z,C.adler>>>16),we(z,65535&C.adler)),F(C),0<z.wrap&&(z.wrap=-z.wrap),z.pending!==0?f:1)},r.deflateEnd=function(C){var be;return C&&C.state?(be=C.state.status)!==P&&be!==69&&be!==73&&be!==91&&be!==103&&be!==q&&be!==666?de(C,m):(C.state=null,be===q?de(C,-3):f):m},r.deflateSetDictionary=function(C,be){var ge,z,L,ie,Ne,Se,ce,$e,G=be.length;if(!C||!C.state||(ie=(ge=C.state).wrap)===2||ie===1&&ge.status!==P||ge.lookahead)return m;for(ie===1&&(C.adler=l(C.adler,be,G,0)),ge.wrap=0,G>=ge.w_size&&(ie===0&&(Y(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),$e=new a.Buf8(ge.w_size),a.arraySet($e,be,G-ge.w_size,ge.w_size,0),be=$e,G=ge.w_size),Ne=C.avail_in,Se=C.next_in,ce=C.input,C.avail_in=G,C.next_in=0,C.input=be,Ve(ge);ge.lookahead>=R;){for(z=ge.strstart,L=ge.lookahead-(R-1);ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[z+R-1])&ge.hash_mask,ge.prev[z&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=z,z++,--L;);ge.strstart=z,ge.lookahead=R-1,Ve(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=R-1,ge.match_available=0,C.next_in=Se,C.input=ce,C.avail_in=Ne,ge.wrap=ie,f},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,r){n.exports=function(s,a){var o,l,c,u,d,h,f,m,p,w,y,b,E,_,k,B,D,O,R,Q,$,P,q,S,Z;o=s.state,l=s.next_in,S=s.input,c=l+(s.avail_in-5),u=s.next_out,Z=s.output,d=u-(a-s.avail_out),h=u+(s.avail_out-257),f=o.dmax,m=o.wsize,p=o.whave,w=o.wnext,y=o.window,b=o.hold,E=o.bits,_=o.lencode,k=o.distcode,B=(1<<o.lenbits)-1,D=(1<<o.distbits)-1;e:do{E<15&&(b+=S[l++]<<E,E+=8,b+=S[l++]<<E,E+=8),O=_[b&B];t:for(;;){if(b>>>=R=O>>>24,E-=R,(R=O>>>16&255)===0)Z[u++]=65535&O;else{if(!(16&R)){if(!(64&R)){O=_[(65535&O)+(b&(1<<R)-1)];continue t}if(32&R){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}Q=65535&O,(R&=15)&&(E<R&&(b+=S[l++]<<E,E+=8),Q+=b&(1<<R)-1,b>>>=R,E-=R),E<15&&(b+=S[l++]<<E,E+=8,b+=S[l++]<<E,E+=8),O=k[b&D];n:for(;;){if(b>>>=R=O>>>24,E-=R,!(16&(R=O>>>16&255))){if(!(64&R)){O=k[(65535&O)+(b&(1<<R)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if($=65535&O,E<(R&=15)&&(b+=S[l++]<<E,(E+=8)<R&&(b+=S[l++]<<E,E+=8)),f<($+=b&(1<<R)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(b>>>=R,E-=R,(R=u-d)<$){if(p<(R=$-R)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(q=y,(P=0)===w){if(P+=m-R,R<Q){for(Q-=R;Z[u++]=y[P++],--R;);P=u-$,q=Z}}else if(w<R){if(P+=m+w-R,(R-=w)<Q){for(Q-=R;Z[u++]=y[P++],--R;);if(P=0,w<Q){for(Q-=R=w;Z[u++]=y[P++],--R;);P=u-$,q=Z}}}else if(P+=w-R,R<Q){for(Q-=R;Z[u++]=y[P++],--R;);P=u-$,q=Z}for(;2<Q;)Z[u++]=q[P++],Z[u++]=q[P++],Z[u++]=q[P++],Q-=3;Q&&(Z[u++]=q[P++],1<Q&&(Z[u++]=q[P++]))}else{for(P=u-$;Z[u++]=Z[P++],Z[u++]=Z[P++],Z[u++]=Z[P++],2<(Q-=3););Q&&(Z[u++]=Z[P++],1<Q&&(Z[u++]=Z[P++]))}break}}break}}while(l<c&&u<h);l-=Q=E>>3,b&=(1<<(E-=Q<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<h?h-u+257:257-(u-h),o.hold=b,o.bits=E}},{}],49:[function(t,n,r){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),u=1,d=2,h=0,f=-2,m=1,p=852,w=592;function y(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(P){var q;return P&&P.state?(q=P.state,P.total_in=P.total_out=q.total=0,P.msg="",q.wrap&&(P.adler=1&q.wrap),q.mode=m,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new s.Buf32(p),q.distcode=q.distdyn=new s.Buf32(w),q.sane=1,q.back=-1,h):f}function _(P){var q;return P&&P.state?((q=P.state).wsize=0,q.whave=0,q.wnext=0,E(P)):f}function k(P,q){var S,Z;return P&&P.state?(Z=P.state,q<0?(S=0,q=-q):(S=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?f:(Z.window!==null&&Z.wbits!==q&&(Z.window=null),Z.wrap=S,Z.wbits=q,_(P))):f}function B(P,q){var S,Z;return P?(Z=new b,(P.state=Z).window=null,(S=k(P,q))!==h&&(P.state=null),S):f}var D,O,R=!0;function Q(P){if(R){var q;for(D=new s.Buf32(512),O=new s.Buf32(32),q=0;q<144;)P.lens[q++]=8;for(;q<256;)P.lens[q++]=9;for(;q<280;)P.lens[q++]=7;for(;q<288;)P.lens[q++]=8;for(c(u,P.lens,0,288,D,0,P.work,{bits:9}),q=0;q<32;)P.lens[q++]=5;c(d,P.lens,0,32,O,0,P.work,{bits:5}),R=!1}P.lencode=D,P.lenbits=9,P.distcode=O,P.distbits=5}function $(P,q,S,Z){var ve,re=P.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new s.Buf8(re.wsize)),Z>=re.wsize?(s.arraySet(re.window,q,S-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(Z<(ve=re.wsize-re.wnext)&&(ve=Z),s.arraySet(re.window,q,S-Z,ve,re.wnext),(Z-=ve)?(s.arraySet(re.window,q,S-Z,Z,0),re.wnext=Z,re.whave=re.wsize):(re.wnext+=ve,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ve))),0}r.inflateReset=_,r.inflateReset2=k,r.inflateResetKeep=E,r.inflateInit=function(P){return B(P,15)},r.inflateInit2=B,r.inflate=function(P,q){var S,Z,ve,re,de,ne,Y,F,H,_e,we,ye,Ve,Ke,Ye,Xe,ft,ct,Tt,Dt,C,be,ge,z,L=0,ie=new s.Buf8(4),Ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return f;(S=P.state).mode===12&&(S.mode=13),de=P.next_out,ve=P.output,Y=P.avail_out,re=P.next_in,Z=P.input,ne=P.avail_in,F=S.hold,H=S.bits,_e=ne,we=Y,be=h;e:for(;;)switch(S.mode){case m:if(S.wrap===0){S.mode=13;break}for(;H<16;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(2&S.wrap&&F===35615){ie[S.check=0]=255&F,ie[1]=F>>>8&255,S.check=o(S.check,ie,2,0),H=F=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&F)<<8)+(F>>8))%31){P.msg="incorrect header check",S.mode=30;break}if((15&F)!=8){P.msg="unknown compression method",S.mode=30;break}if(H-=4,C=8+(15&(F>>>=4)),S.wbits===0)S.wbits=C;else if(C>S.wbits){P.msg="invalid window size",S.mode=30;break}S.dmax=1<<C,P.adler=S.check=1,S.mode=512&F?10:12,H=F=0;break;case 2:for(;H<16;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(S.flags=F,(255&S.flags)!=8){P.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){P.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=F>>8&1),512&S.flags&&(ie[0]=255&F,ie[1]=F>>>8&255,S.check=o(S.check,ie,2,0)),H=F=0,S.mode=3;case 3:for(;H<32;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}S.head&&(S.head.time=F),512&S.flags&&(ie[0]=255&F,ie[1]=F>>>8&255,ie[2]=F>>>16&255,ie[3]=F>>>24&255,S.check=o(S.check,ie,4,0)),H=F=0,S.mode=4;case 4:for(;H<16;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}S.head&&(S.head.xflags=255&F,S.head.os=F>>8),512&S.flags&&(ie[0]=255&F,ie[1]=F>>>8&255,S.check=o(S.check,ie,2,0)),H=F=0,S.mode=5;case 5:if(1024&S.flags){for(;H<16;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}S.length=F,S.head&&(S.head.extra_len=F),512&S.flags&&(ie[0]=255&F,ie[1]=F>>>8&255,S.check=o(S.check,ie,2,0)),H=F=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(ne<(ye=S.length)&&(ye=ne),ye&&(S.head&&(C=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),s.arraySet(S.head.extra,Z,re,ye,C)),512&S.flags&&(S.check=o(S.check,Z,ye,re)),ne-=ye,re+=ye,S.length-=ye),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(ne===0)break e;for(ye=0;C=Z[re+ye++],S.head&&C&&S.length<65536&&(S.head.name+=String.fromCharCode(C)),C&&ye<ne;);if(512&S.flags&&(S.check=o(S.check,Z,ye,re)),ne-=ye,re+=ye,C)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(ne===0)break e;for(ye=0;C=Z[re+ye++],S.head&&C&&S.length<65536&&(S.head.comment+=String.fromCharCode(C)),C&&ye<ne;);if(512&S.flags&&(S.check=o(S.check,Z,ye,re)),ne-=ye,re+=ye,C)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;H<16;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(F!==(65535&S.check)){P.msg="header crc mismatch",S.mode=30;break}H=F=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),P.adler=S.check=0,S.mode=12;break;case 10:for(;H<32;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}P.adler=S.check=y(F),H=F=0,S.mode=11;case 11:if(S.havedict===0)return P.next_out=de,P.avail_out=Y,P.next_in=re,P.avail_in=ne,S.hold=F,S.bits=H,2;P.adler=S.check=1,S.mode=12;case 12:if(q===5||q===6)break e;case 13:if(S.last){F>>>=7&H,H-=7&H,S.mode=27;break}for(;H<3;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}switch(S.last=1&F,H-=1,3&(F>>>=1)){case 0:S.mode=14;break;case 1:if(Q(S),S.mode=20,q!==6)break;F>>>=2,H-=2;break e;case 2:S.mode=17;break;case 3:P.msg="invalid block type",S.mode=30}F>>>=2,H-=2;break;case 14:for(F>>>=7&H,H-=7&H;H<32;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if((65535&F)!=(F>>>16^65535)){P.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&F,H=F=0,S.mode=15,q===6)break e;case 15:S.mode=16;case 16:if(ye=S.length){if(ne<ye&&(ye=ne),Y<ye&&(ye=Y),ye===0)break e;s.arraySet(ve,Z,re,ye,de),ne-=ye,re+=ye,Y-=ye,de+=ye,S.length-=ye;break}S.mode=12;break;case 17:for(;H<14;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(S.nlen=257+(31&F),F>>>=5,H-=5,S.ndist=1+(31&F),F>>>=5,H-=5,S.ncode=4+(15&F),F>>>=4,H-=4,286<S.nlen||30<S.ndist){P.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;H<3;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}S.lens[Ne[S.have++]]=7&F,F>>>=3,H-=3}for(;S.have<19;)S.lens[Ne[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,ge={bits:S.lenbits},be=c(0,S.lens,0,19,S.lencode,0,S.work,ge),S.lenbits=ge.bits,be){P.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Xe=(L=S.lencode[F&(1<<S.lenbits)-1])>>>16&255,ft=65535&L,!((Ye=L>>>24)<=H);){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(ft<16)F>>>=Ye,H-=Ye,S.lens[S.have++]=ft;else{if(ft===16){for(z=Ye+2;H<z;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(F>>>=Ye,H-=Ye,S.have===0){P.msg="invalid bit length repeat",S.mode=30;break}C=S.lens[S.have-1],ye=3+(3&F),F>>>=2,H-=2}else if(ft===17){for(z=Ye+3;H<z;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}H-=Ye,C=0,ye=3+(7&(F>>>=Ye)),F>>>=3,H-=3}else{for(z=Ye+7;H<z;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}H-=Ye,C=0,ye=11+(127&(F>>>=Ye)),F>>>=7,H-=7}if(S.have+ye>S.nlen+S.ndist){P.msg="invalid bit length repeat",S.mode=30;break}for(;ye--;)S.lens[S.have++]=C}}if(S.mode===30)break;if(S.lens[256]===0){P.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,ge={bits:S.lenbits},be=c(u,S.lens,0,S.nlen,S.lencode,0,S.work,ge),S.lenbits=ge.bits,be){P.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,ge={bits:S.distbits},be=c(d,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,ge),S.distbits=ge.bits,be){P.msg="invalid distances set",S.mode=30;break}if(S.mode=20,q===6)break e;case 20:S.mode=21;case 21:if(6<=ne&&258<=Y){P.next_out=de,P.avail_out=Y,P.next_in=re,P.avail_in=ne,S.hold=F,S.bits=H,l(P,we),de=P.next_out,ve=P.output,Y=P.avail_out,re=P.next_in,Z=P.input,ne=P.avail_in,F=S.hold,H=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Xe=(L=S.lencode[F&(1<<S.lenbits)-1])>>>16&255,ft=65535&L,!((Ye=L>>>24)<=H);){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(Xe&&!(240&Xe)){for(ct=Ye,Tt=Xe,Dt=ft;Xe=(L=S.lencode[Dt+((F&(1<<ct+Tt)-1)>>ct)])>>>16&255,ft=65535&L,!(ct+(Ye=L>>>24)<=H);){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}F>>>=ct,H-=ct,S.back+=ct}if(F>>>=Ye,H-=Ye,S.back+=Ye,S.length=ft,Xe===0){S.mode=26;break}if(32&Xe){S.back=-1,S.mode=12;break}if(64&Xe){P.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Xe,S.mode=22;case 22:if(S.extra){for(z=S.extra;H<z;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}S.length+=F&(1<<S.extra)-1,F>>>=S.extra,H-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Xe=(L=S.distcode[F&(1<<S.distbits)-1])>>>16&255,ft=65535&L,!((Ye=L>>>24)<=H);){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(!(240&Xe)){for(ct=Ye,Tt=Xe,Dt=ft;Xe=(L=S.distcode[Dt+((F&(1<<ct+Tt)-1)>>ct)])>>>16&255,ft=65535&L,!(ct+(Ye=L>>>24)<=H);){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}F>>>=ct,H-=ct,S.back+=ct}if(F>>>=Ye,H-=Ye,S.back+=Ye,64&Xe){P.msg="invalid distance code",S.mode=30;break}S.offset=ft,S.extra=15&Xe,S.mode=24;case 24:if(S.extra){for(z=S.extra;H<z;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}S.offset+=F&(1<<S.extra)-1,F>>>=S.extra,H-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){P.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(Y===0)break e;if(ye=we-Y,S.offset>ye){if((ye=S.offset-ye)>S.whave&&S.sane){P.msg="invalid distance too far back",S.mode=30;break}Ve=ye>S.wnext?(ye-=S.wnext,S.wsize-ye):S.wnext-ye,ye>S.length&&(ye=S.length),Ke=S.window}else Ke=ve,Ve=de-S.offset,ye=S.length;for(Y<ye&&(ye=Y),Y-=ye,S.length-=ye;ve[de++]=Ke[Ve++],--ye;);S.length===0&&(S.mode=21);break;case 26:if(Y===0)break e;ve[de++]=S.length,Y--,S.mode=21;break;case 27:if(S.wrap){for(;H<32;){if(ne===0)break e;ne--,F|=Z[re++]<<H,H+=8}if(we-=Y,P.total_out+=we,S.total+=we,we&&(P.adler=S.check=S.flags?o(S.check,ve,we,de-we):a(S.check,ve,we,de-we)),we=Y,(S.flags?F:y(F))!==S.check){P.msg="incorrect data check",S.mode=30;break}H=F=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;H<32;){if(ne===0)break e;ne--,F+=Z[re++]<<H,H+=8}if(F!==(4294967295&S.total)){P.msg="incorrect length check",S.mode=30;break}H=F=0}S.mode=29;case 29:be=1;break e;case 30:be=-3;break e;case 31:return-4;case 32:default:return f}return P.next_out=de,P.avail_out=Y,P.next_in=re,P.avail_in=ne,S.hold=F,S.bits=H,(S.wsize||we!==P.avail_out&&S.mode<30&&(S.mode<27||q!==4))&&$(P,P.output,P.next_out,we-P.avail_out)?(S.mode=31,-4):(_e-=P.avail_in,we-=P.avail_out,P.total_in+=_e,P.total_out+=we,S.total+=we,S.wrap&&we&&(P.adler=S.check=S.flags?o(S.check,ve,we,P.next_out-we):a(S.check,ve,we,P.next_out-we)),P.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(_e==0&&we===0||q===4)&&be===h&&(be=-5),be)},r.inflateEnd=function(P){if(!P||!P.state)return f;var q=P.state;return q.window&&(q.window=null),P.state=null,h},r.inflateGetHeader=function(P,q){var S;return P&&P.state&&2&(S=P.state).wrap?((S.head=q).done=!1,h):f},r.inflateSetDictionary=function(P,q){var S,Z=q.length;return P&&P.state?(S=P.state).wrap!==0&&S.mode!==11?f:S.mode===11&&a(1,q,Z,0)!==S.check?-3:$(P,q,Z,Z)?(S.mode=31,-4):(S.havedict=1,h):f},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,r){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,d,h,f,m,p,w,y){var b,E,_,k,B,D,O,R,Q,$=y.bits,P=0,q=0,S=0,Z=0,ve=0,re=0,de=0,ne=0,Y=0,F=0,H=null,_e=0,we=new s.Buf16(16),ye=new s.Buf16(16),Ve=null,Ke=0;for(P=0;P<=15;P++)we[P]=0;for(q=0;q<f;q++)we[d[h+q]]++;for(ve=$,Z=15;1<=Z&&we[Z]===0;Z--);if(Z<ve&&(ve=Z),Z===0)return m[p++]=20971520,m[p++]=20971520,y.bits=1,0;for(S=1;S<Z&&we[S]===0;S++);for(ve<S&&(ve=S),P=ne=1;P<=15;P++)if(ne<<=1,(ne-=we[P])<0)return-1;if(0<ne&&(u===0||Z!==1))return-1;for(ye[1]=0,P=1;P<15;P++)ye[P+1]=ye[P]+we[P];for(q=0;q<f;q++)d[h+q]!==0&&(w[ye[d[h+q]]++]=q);if(D=u===0?(H=Ve=w,19):u===1?(H=a,_e-=257,Ve=o,Ke-=257,256):(H=l,Ve=c,-1),P=S,B=p,de=q=F=0,_=-1,k=(Y=1<<(re=ve))-1,u===1&&852<Y||u===2&&592<Y)return 1;for(;;){for(O=P-de,Q=w[q]<D?(R=0,w[q]):w[q]>D?(R=Ve[Ke+w[q]],H[_e+w[q]]):(R=96,0),b=1<<P-de,S=E=1<<re;m[B+(F>>de)+(E-=b)]=O<<24|R<<16|Q|0,E!==0;);for(b=1<<P-1;F&b;)b>>=1;if(b!==0?(F&=b-1,F+=b):F=0,q++,--we[P]==0){if(P===Z)break;P=d[h+w[q]]}if(ve<P&&(F&k)!==_){for(de===0&&(de=ve),B+=S,ne=1<<(re=P-de);re+de<Z&&!((ne-=we[re+de])<=0);)re++,ne<<=1;if(Y+=1<<re,u===1&&852<Y||u===2&&592<Y)return 1;m[_=F&k]=ve<<24|re<<16|B-p|0}}return F!==0&&(m[B+F]=P-de<<24|64<<16|0),y.bits=ve,0}},{"../utils/common":41}],51:[function(t,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,r){var s=t("../utils/common"),a=0,o=1;function l(L){for(var ie=L.length;0<=--ie;)L[ie]=0}var c=0,u=29,d=256,h=d+1+u,f=30,m=19,p=2*h+1,w=15,y=16,b=7,E=256,_=16,k=17,B=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(h+2));l($);var P=new Array(2*f);l(P);var q=new Array(512);l(q);var S=new Array(256);l(S);var Z=new Array(u);l(Z);var ve,re,de,ne=new Array(f);function Y(L,ie,Ne,Se,ce){this.static_tree=L,this.extra_bits=ie,this.extra_base=Ne,this.elems=Se,this.max_length=ce,this.has_stree=L&&L.length}function F(L,ie){this.dyn_tree=L,this.max_code=0,this.stat_desc=ie}function H(L){return L<256?q[L]:q[256+(L>>>7)]}function _e(L,ie){L.pending_buf[L.pending++]=255&ie,L.pending_buf[L.pending++]=ie>>>8&255}function we(L,ie,Ne){L.bi_valid>y-Ne?(L.bi_buf|=ie<<L.bi_valid&65535,_e(L,L.bi_buf),L.bi_buf=ie>>y-L.bi_valid,L.bi_valid+=Ne-y):(L.bi_buf|=ie<<L.bi_valid&65535,L.bi_valid+=Ne)}function ye(L,ie,Ne){we(L,Ne[2*ie],Ne[2*ie+1])}function Ve(L,ie){for(var Ne=0;Ne|=1&L,L>>>=1,Ne<<=1,0<--ie;);return Ne>>>1}function Ke(L,ie,Ne){var Se,ce,$e=new Array(w+1),G=0;for(Se=1;Se<=w;Se++)$e[Se]=G=G+Ne[Se-1]<<1;for(ce=0;ce<=ie;ce++){var X=L[2*ce+1];X!==0&&(L[2*ce]=Ve($e[X]++,X))}}function Ye(L){var ie;for(ie=0;ie<h;ie++)L.dyn_ltree[2*ie]=0;for(ie=0;ie<f;ie++)L.dyn_dtree[2*ie]=0;for(ie=0;ie<m;ie++)L.bl_tree[2*ie]=0;L.dyn_ltree[2*E]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function Xe(L){8<L.bi_valid?_e(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function ft(L,ie,Ne,Se){var ce=2*ie,$e=2*Ne;return L[ce]<L[$e]||L[ce]===L[$e]&&Se[ie]<=Se[Ne]}function ct(L,ie,Ne){for(var Se=L.heap[Ne],ce=Ne<<1;ce<=L.heap_len&&(ce<L.heap_len&&ft(ie,L.heap[ce+1],L.heap[ce],L.depth)&&ce++,!ft(ie,Se,L.heap[ce],L.depth));)L.heap[Ne]=L.heap[ce],Ne=ce,ce<<=1;L.heap[Ne]=Se}function Tt(L,ie,Ne){var Se,ce,$e,G,X=0;if(L.last_lit!==0)for(;Se=L.pending_buf[L.d_buf+2*X]<<8|L.pending_buf[L.d_buf+2*X+1],ce=L.pending_buf[L.l_buf+X],X++,Se===0?ye(L,ce,ie):(ye(L,($e=S[ce])+d+1,ie),(G=D[$e])!==0&&we(L,ce-=Z[$e],G),ye(L,$e=H(--Se),Ne),(G=O[$e])!==0&&we(L,Se-=ne[$e],G)),X<L.last_lit;);ye(L,E,ie)}function Dt(L,ie){var Ne,Se,ce,$e=ie.dyn_tree,G=ie.stat_desc.static_tree,X=ie.stat_desc.has_stree,pe=ie.stat_desc.elems,A=-1;for(L.heap_len=0,L.heap_max=p,Ne=0;Ne<pe;Ne++)$e[2*Ne]!==0?(L.heap[++L.heap_len]=A=Ne,L.depth[Ne]=0):$e[2*Ne+1]=0;for(;L.heap_len<2;)$e[2*(ce=L.heap[++L.heap_len]=A<2?++A:0)]=1,L.depth[ce]=0,L.opt_len--,X&&(L.static_len-=G[2*ce+1]);for(ie.max_code=A,Ne=L.heap_len>>1;1<=Ne;Ne--)ct(L,$e,Ne);for(ce=pe;Ne=L.heap[1],L.heap[1]=L.heap[L.heap_len--],ct(L,$e,1),Se=L.heap[1],L.heap[--L.heap_max]=Ne,L.heap[--L.heap_max]=Se,$e[2*ce]=$e[2*Ne]+$e[2*Se],L.depth[ce]=(L.depth[Ne]>=L.depth[Se]?L.depth[Ne]:L.depth[Se])+1,$e[2*Ne+1]=$e[2*Se+1]=ce,L.heap[1]=ce++,ct(L,$e,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(v,x){var M,V,ee,oe,Fe,je,it=x.dyn_tree,yt=x.max_code,at=x.stat_desc.static_tree,zs=x.stat_desc.has_stree,sn=x.stat_desc.extra_bits,$r=x.stat_desc.extra_base,Ce=x.stat_desc.max_length,di=0;for(oe=0;oe<=w;oe++)v.bl_count[oe]=0;for(it[2*v.heap[v.heap_max]+1]=0,M=v.heap_max+1;M<p;M++)Ce<(oe=it[2*it[2*(V=v.heap[M])+1]+1]+1)&&(oe=Ce,di++),it[2*V+1]=oe,yt<V||(v.bl_count[oe]++,Fe=0,$r<=V&&(Fe=sn[V-$r]),je=it[2*V],v.opt_len+=je*(oe+Fe),zs&&(v.static_len+=je*(at[2*V+1]+Fe)));if(di!==0){do{for(oe=Ce-1;v.bl_count[oe]===0;)oe--;v.bl_count[oe]--,v.bl_count[oe+1]+=2,v.bl_count[Ce]--,di-=2}while(0<di);for(oe=Ce;oe!==0;oe--)for(V=v.bl_count[oe];V!==0;)yt<(ee=v.heap[--M])||(it[2*ee+1]!==oe&&(v.opt_len+=(oe-it[2*ee+1])*it[2*ee],it[2*ee+1]=oe),V--)}}(L,ie),Ke($e,A,L.bl_count)}function C(L,ie,Ne){var Se,ce,$e=-1,G=ie[1],X=0,pe=7,A=4;for(G===0&&(pe=138,A=3),ie[2*(Ne+1)+1]=65535,Se=0;Se<=Ne;Se++)ce=G,G=ie[2*(Se+1)+1],++X<pe&&ce===G||(X<A?L.bl_tree[2*ce]+=X:ce!==0?(ce!==$e&&L.bl_tree[2*ce]++,L.bl_tree[2*_]++):X<=10?L.bl_tree[2*k]++:L.bl_tree[2*B]++,$e=ce,A=(X=0)===G?(pe=138,3):ce===G?(pe=6,3):(pe=7,4))}function be(L,ie,Ne){var Se,ce,$e=-1,G=ie[1],X=0,pe=7,A=4;for(G===0&&(pe=138,A=3),Se=0;Se<=Ne;Se++)if(ce=G,G=ie[2*(Se+1)+1],!(++X<pe&&ce===G)){if(X<A)for(;ye(L,ce,L.bl_tree),--X!=0;);else ce!==0?(ce!==$e&&(ye(L,ce,L.bl_tree),X--),ye(L,_,L.bl_tree),we(L,X-3,2)):X<=10?(ye(L,k,L.bl_tree),we(L,X-3,3)):(ye(L,B,L.bl_tree),we(L,X-11,7));$e=ce,A=(X=0)===G?(pe=138,3):ce===G?(pe=6,3):(pe=7,4)}}l(ne);var ge=!1;function z(L,ie,Ne,Se){we(L,(c<<1)+(Se?1:0),3),function(ce,$e,G,X){Xe(ce),X&&(_e(ce,G),_e(ce,~G)),s.arraySet(ce.pending_buf,ce.window,$e,G,ce.pending),ce.pending+=G}(L,ie,Ne,!0)}r._tr_init=function(L){ge||(function(){var ie,Ne,Se,ce,$e,G=new Array(w+1);for(ce=Se=0;ce<u-1;ce++)for(Z[ce]=Se,ie=0;ie<1<<D[ce];ie++)S[Se++]=ce;for(S[Se-1]=ce,ce=$e=0;ce<16;ce++)for(ne[ce]=$e,ie=0;ie<1<<O[ce];ie++)q[$e++]=ce;for($e>>=7;ce<f;ce++)for(ne[ce]=$e<<7,ie=0;ie<1<<O[ce]-7;ie++)q[256+$e++]=ce;for(Ne=0;Ne<=w;Ne++)G[Ne]=0;for(ie=0;ie<=143;)$[2*ie+1]=8,ie++,G[8]++;for(;ie<=255;)$[2*ie+1]=9,ie++,G[9]++;for(;ie<=279;)$[2*ie+1]=7,ie++,G[7]++;for(;ie<=287;)$[2*ie+1]=8,ie++,G[8]++;for(Ke($,h+1,G),ie=0;ie<f;ie++)P[2*ie+1]=5,P[2*ie]=Ve(ie,5);ve=new Y($,D,d+1,h,w),re=new Y(P,O,0,f,w),de=new Y(new Array(0),R,0,m,b)}(),ge=!0),L.l_desc=new F(L.dyn_ltree,ve),L.d_desc=new F(L.dyn_dtree,re),L.bl_desc=new F(L.bl_tree,de),L.bi_buf=0,L.bi_valid=0,Ye(L)},r._tr_stored_block=z,r._tr_flush_block=function(L,ie,Ne,Se){var ce,$e,G=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(X){var pe,A=4093624447;for(pe=0;pe<=31;pe++,A>>>=1)if(1&A&&X.dyn_ltree[2*pe]!==0)return a;if(X.dyn_ltree[18]!==0||X.dyn_ltree[20]!==0||X.dyn_ltree[26]!==0)return o;for(pe=32;pe<d;pe++)if(X.dyn_ltree[2*pe]!==0)return o;return a}(L)),Dt(L,L.l_desc),Dt(L,L.d_desc),G=function(X){var pe;for(C(X,X.dyn_ltree,X.l_desc.max_code),C(X,X.dyn_dtree,X.d_desc.max_code),Dt(X,X.bl_desc),pe=m-1;3<=pe&&X.bl_tree[2*Q[pe]+1]===0;pe--);return X.opt_len+=3*(pe+1)+5+5+4,pe}(L),ce=L.opt_len+3+7>>>3,($e=L.static_len+3+7>>>3)<=ce&&(ce=$e)):ce=$e=Ne+5,Ne+4<=ce&&ie!==-1?z(L,ie,Ne,Se):L.strategy===4||$e===ce?(we(L,2+(Se?1:0),3),Tt(L,$,P)):(we(L,4+(Se?1:0),3),function(X,pe,A,v){var x;for(we(X,pe-257,5),we(X,A-1,5),we(X,v-4,4),x=0;x<v;x++)we(X,X.bl_tree[2*Q[x]+1],3);be(X,X.dyn_ltree,pe-1),be(X,X.dyn_dtree,A-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,G+1),Tt(L,L.dyn_ltree,L.dyn_dtree)),Ye(L),Se&&Xe(L)},r._tr_tally=function(L,ie,Ne){return L.pending_buf[L.d_buf+2*L.last_lit]=ie>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&ie,L.pending_buf[L.l_buf+L.last_lit]=255&Ne,L.last_lit++,ie===0?L.dyn_ltree[2*Ne]++:(L.matches++,ie--,L.dyn_ltree[2*(S[Ne]+d+1)]++,L.dyn_dtree[2*H(ie)]++),L.last_lit===L.lit_bufsize-1},r._tr_align=function(L){we(L,2,3),ye(L,E,$),function(ie){ie.bi_valid===16?(_e(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(t,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,r){(function(s){(function(a,o){if(!a.setImmediate){var l,c,u,d,h=1,f={},m=!1,p=a.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(a);w=w&&w.setTimeout?w:a,l={}.toString.call(a.process)==="[object process]"?function(_){ys.nextTick(function(){b(_)})}:function(){if(a.postMessage&&!a.importScripts){var _=!0,k=a.onmessage;return a.onmessage=function(){_=!1},a.postMessage("","*"),a.onmessage=k,_}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",E,!1):a.attachEvent("onmessage",E),function(_){a.postMessage(d+_,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(_){b(_.data)},function(_){u.port2.postMessage(_)}):p&&"onreadystatechange"in p.createElement("script")?(c=p.documentElement,function(_){var k=p.createElement("script");k.onreadystatechange=function(){b(_),k.onreadystatechange=null,c.removeChild(k),k=null},c.appendChild(k)}):function(_){setTimeout(b,0,_)},w.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var k=new Array(arguments.length-1),B=0;B<k.length;B++)k[B]=arguments[B+1];var D={callback:_,args:k};return f[h]=D,l(h),h++},w.clearImmediate=y}function y(_){delete f[_]}function b(_){if(m)setTimeout(b,0,_);else{var k=f[_];if(k){m=!0;try{(function(B){var D=B.callback,O=B.args;switch(O.length){case 0:D();break;case 1:D(O[0]);break;case 2:D(O[0],O[1]);break;case 3:D(O[0],O[1],O[2]);break;default:D.apply(o,O)}})(k)}finally{y(_),m=!1}}}}function E(_){_.source===a&&typeof _.data=="string"&&_.data.indexOf(d)===0&&b(+_.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ns<"u"?Ns:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});const pf=(()=>typeof self>"u"?!1:"showOpenFilePicker"in self)(),z5=pf?Promise.resolve().then(function(){return K5}):Promise.resolve().then(function(){return t8});async function V5(...i){return(await z5).default(...i)}pf?Promise.resolve().then(function(){return J5}):Promise.resolve().then(function(){return i8});const W5=pf?Promise.resolve().then(function(){return Z5}):Promise.resolve().then(function(){return s8});async function H5(...i){return(await W5).default(...i)}const Q5=async i=>{const e=await i.getFile();return e.handle=i,e};var G5=async(i=[{}])=>{Array.isArray(i)||(i=[i]);const e=[];i.forEach((r,s)=>{e[s]={description:r.description||"Files",accept:{}},r.mimeTypes?r.mimeTypes.map(a=>{e[s].accept[a]=r.extensions||[]}):e[s].accept["*/*"]=r.extensions||[]});const t=await window.showOpenFilePicker({id:i[0].id,startIn:i[0].startIn,types:e,multiple:i[0].multiple||!1,excludeAcceptAllOption:i[0].excludeAcceptAllOption||!1}),n=await Promise.all(t.map(Q5));return i[0].multiple?n:n[0]},K5={__proto__:null,default:G5};function rd(i){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var n=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:n}})}return rd=function(t){this.s=t,this.n=t.next},rd.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return n===void 0?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return n===void 0?Promise.reject(t):e(n.apply(this.s,arguments))}},new rd(i)}const xA=async(i,e,t=i.name,n)=>{const r=[],s=[];var a,o=!1,l=!1;try{for(var c,u=function(d){var h,f,m,p=2;for(typeof Symbol<"u"&&(f=Symbol.asyncIterator,m=Symbol.iterator);p--;){if(f&&(h=d[f])!=null)return h.call(d);if(m&&(h=d[m])!=null)return new rd(h.call(d));f="@@asyncIterator",m="@@iterator"}throw new TypeError("Object is not async iterable")}(i.values());o=!(c=await u.next()).done;o=!1){const d=c.value,h="".concat(t,"/").concat(d.name);d.kind==="file"?s.push(d.getFile().then(f=>(f.directoryHandle=i,f.handle=d,Object.defineProperty(f,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>h})))):d.kind!=="directory"||!e||n&&n(d)||r.push(xA(d,e,h,n))}}catch(d){l=!0,a=d}finally{try{o&&u.return!=null&&await u.return()}finally{if(l)throw a}}return[...(await Promise.all(r)).flat(),...await Promise.all(s)]};var Y5=async(i={})=>{i.recursive=i.recursive||!1,i.mode=i.mode||"read";const e=await window.showDirectoryPicker({id:i.id,startIn:i.startIn,mode:i.mode});return(await(await e.values()).next()).done?[e]:xA(e,i.recursive,void 0,i.skipDirectory)},J5={__proto__:null,default:Y5},X5=async(i,e=[{}],t=null,n=!1,r=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let a=null;if(i instanceof Blob&&i.type?a=i.type:i.headers&&i.headers.get("content-type")&&(a=i.headers.get("content-type")),e.forEach((c,u)=>{s[u]={description:c.description||"Files",accept:{}},c.mimeTypes?(u===0&&a&&c.mimeTypes.push(a),c.mimeTypes.map(d=>{s[u].accept[d]=c.extensions||[]})):a?s[u].accept[a]=c.extensions||[]:s[u].accept["*/*"]=c.extensions||[]}),t)try{await t.getFile()}catch(c){if(t=null,n)throw c}const o=t||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!t&&r&&r(o);const l=await o.createWritable();return"stream"in i?(await i.stream().pipeTo(l),o):"body"in i?(await i.body.pipeTo(l),o):(await l.write(await i),await l.close(),o)},Z5={__proto__:null,default:X5},e8=async(i=[{}])=>(Array.isArray(i)||(i=[i]),new Promise((e,t)=>{const n=document.createElement("input");n.type="file";const r=[...i.map(l=>l.mimeTypes||[]),...i.map(l=>l.extensions||[])].join();n.multiple=i[0].multiple||!1,n.accept=r||"",n.style.display="none",document.body.append(n);const s=l=>{typeof a=="function"&&a(),e(l)},a=i[0].legacySetup&&i[0].legacySetup(s,()=>a(t),n),o=()=>{window.removeEventListener("focus",o),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",o)}),n.addEventListener("change",()=>{window.removeEventListener("focus",o),n.remove(),s(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})),t8={__proto__:null,default:e8},n8=async(i=[{}])=>(Array.isArray(i)||(i=[i]),i[0].recursive=i[0].recursive||!1,new Promise((e,t)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const r=a=>{typeof s=="function"&&s(),e(a)},s=i[0].legacySetup&&i[0].legacySetup(r,()=>s(t),n);n.addEventListener("change",()=>{let a=Array.from(n.files);i[0].recursive?i[0].recursive&&i[0].skipDirectory&&(a=a.filter(o=>o.webkitRelativePath.split("/").every(l=>!i[0].skipDirectory({name:l,kind:"directory"})))):a=a.filter(o=>o.webkitRelativePath.split("/").length===2),r(a)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})),i8={__proto__:null,default:n8},r8=async(i,e={})=>{Array.isArray(e)&&(e=e[0]);const t=document.createElement("a");let n=i;"body"in i&&(n=await async function(a,o){const l=a.getReader(),c=new ReadableStream({start:h=>async function f(){return l.read().then(({done:m,value:p})=>{if(!m)return h.enqueue(p),f();h.close()})}()}),u=new Response(c),d=await u.blob();return l.releaseLock(),new Blob([d],{type:o})}(i.body,i.headers.get("content-type"))),t.download=e.fileName||"Untitled",t.href=URL.createObjectURL(await n);const r=()=>{typeof s=="function"&&s()},s=e.legacySetup&&e.legacySetup(r,()=>s(),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),r()}),t.click(),null},s8={__proto__:null,default:r8};const a8=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}",o8=kt(class extends _t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.importProgress=tt(this,"jeepSqliteImportProgress",7),this.exportProgress=tt(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=tt(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=tt(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=tt(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(e){this.innerAutoSave=e}parseTypeOrm(e){this.innerTypeOrm=e}parseWasmPath(e){this.innerWasmPath=e}parsePickText(e){this.innerPickText=e}parseSaveText(e){this.innerSaveText=e}parseButtonOptions(e){this.innerButtonOptions=JSON.parse(e);const t=Object.keys(this.innerButtonOptions);for(const n of t)switch(n){case"top":{this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[n]);break}case"right":{this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[n]);break}case"fontSize":{this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[n]);break}case"padding":{this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[n]);break}case"backgroundColor":{this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[n]);break}case"color":{this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[n]);break}}}async echo(e){return e}async createConnection(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.version?e.version:1,s=e.readonly?e.readonly:!1;try{return await this._createConnection(n,r,s),Promise.resolve()}catch(a){return Promise.reject(a)}}async isConnection(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1,s=await this._isConnection(n,r);return Promise.resolve(s)}async closeConnection(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{return await this._closeConnection(n,r),Promise.resolve()}catch(s){return Promise.reject(s)}}async open(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{return await this._open(n,r),Promise.resolve()}catch(s){return Promise.reject(s)}}async close(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{return await this._close(n,r),Promise.resolve()}catch(s){return Promise.reject(s)}}async getVersion(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{const s=await this._getVersion(n,r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async beginTransaction(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=await this._beginTransaction(n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async commitTransaction(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const s=await this._commitTransaction(n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async rollbackTransaction(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=await this._rollbackTransaction(n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isTransactionActive(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const s=await this._isTransactionActive(n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async execute(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statements")||e.statements.length===0)return Promise.reject("Must provide raw SQL statements");const n=e.database,r=e.statements;let s=!0;const a=e.readonly?e.readonly:!1;t.includes("transaction")&&(s=e.transaction);try{const o=await this._execute(n,r,s,a);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async executeSet(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("set")||e.set.length===0)return Promise.reject("Must provide a non-empty set of SQL statements");const n=e.database,r=e.set;let s=!0;t.includes("transaction")&&(s=e.transaction);const a=e.readonly?e.readonly:!1,o=e.returnMode?e.returnMode:"no";try{const l=await this._executeSet(n,r,s,a,o);return Promise.resolve(l)}catch(l){return Promise.reject(l)}}async run(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a run statement");const n=e.database,r=e.statement;let s=[];t.includes("values")&&(s=e.values.length>0?e.values:[]);let a=!0;t.includes("transaction")&&(a=e.transaction);const o=e.readonly?e.readonly:!1,l=e.returnMode?e.returnMode:"no";try{const c=await this._run(n,r,s,a,o,l);return Promise.resolve(c)}catch(c){return Promise.reject(c)}}async query(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a query statement");let n=[];t.includes("values")&&(n=e.values.length>0?e.values:[]);const r=e.database,s=e.statement,a=e.readonly?e.readonly:!1;try{const o=await this._query(r,s,n,a);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async getTableList(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{const s=await this._getTableList(n,r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBExists(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{const s=await this._isDBExists(n,r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBOpen(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{const s=await this._isDBOpen(n,r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteDatabase(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{return await this._deleteDatabase(n,r)}catch(s){return Promise.reject(s)}}async isStoreOpen(){return Promise.resolve(this.isStore)}async copyFromAssets(e){let t;if(e!=null?t=Object.keys(e).includes("overwrite")?e.overwrite:!0:t=!0,!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));try{return await this._copyFromAssets(t),Promise.resolve()}catch(n){return Promise.reject(n)}}async isTableExists(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");const n=e.database;if(!t.includes("table"))return Promise.reject("Must provide a table name");const r=e.table,s=e.readonly?e.readonly:!1;try{const a=await this._isTableExists(n,r,s);return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async createSyncTable(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{const s=await this._createSyncTable(n,r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async getSyncDate(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{const s=await this._getSyncDate(n,r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async setSyncDate(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const n=e.database,r=e.syncdate,s=e.readonly?e.readonly:!1;try{return await this._setSyncDate(n,r,s),Promise.resolve()}catch(a){return Promise.reject(a)}}async isJsonValid(e){if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const n=e.jsonstring;try{const r=await this._isJsonValid(n);return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async importFromJson(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const n=e.jsonstring;try{const r=await this._importFromJson(n);return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async exportToJson(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const n=e.database,r=e.jsonexportmode,s=e.readonly?e.readonly:!1;try{const a=await this._exportToJson(n,r,s);return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async deleteExportedRows(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{return await this._deleteExportedRows(n,r),Promise.resolve()}catch(s){return Promise.reject(s)}}async addUpgradeStatement(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const n=e.database,r=e.upgrade;for(const s of r){const a=Object.keys(s);if(!a.includes("toVersion")||!a.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if(typeof s.toVersion!="number")return Promise.reject("upgrade.toVersion must be a number");if(this._versionUpgrades[n])this._versionUpgrades[n][s.toVersion]=s;else{const o={};o[s.toVersion]=s,this._versionUpgrades[n]=o}}return Promise.resolve()}async isDatabase(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database;try{const r=await this._isDatabase(n);return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async getDatabaseList(){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));try{const e=await this._getDatabaseList();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async checkConnectionsConsistency(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));const t=Object.keys(e);if(!t.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const n=e.dbNames;if(!t.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const r=e.openModes;try{const s=await this._checkConnectionsConsistency(n,r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async saveToStore(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,r=e.readonly?e.readonly:!1;try{return await this._saveToStore(n,r),Promise.resolve()}catch(s){return Promise.reject(s)}}async saveToLocalDisk(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database;try{return await this._saveToLocalDisk(n),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromLocalDiskToStore(e){const t=e.overwrite?e.overwrite:!0;console.log(pf?"Using the File System Access API.":"Using the fallback implementation.");try{return await this._getFromLocalDiskToStore(t),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromHTTPRequest(e){if(!this.isStore)return Promise.reject(">>> jeep-sqlite StoreName: ".concat(this.storeName," is not opened"));if(!Object.keys(e).includes("url"))return Promise.reject("Must provide an url");const n=e.url,r=e.overwrite?e.overwrite:!0;try{return await this._getFromHTTPRequest(n,r),Promise.resolve()}catch(s){return Promise.reject(s)}}connectedCallback(){this.parseAutoSave(this.autoSave!==void 0?this.autoSave:!1),this.parseTypeOrm(this.typeOrm!==void 0?this.typeOrm:!1),this.parseWasmPath(this.wasmPath!==void 0?this.wasmPath:"/assets"),this.parseSaveText(this.saveText!==void 0?this.saveText:"Save"),this.parsePickText(this.pickText!==void 0?this.pickText:"Pick a database"),this.buttonOptions!==void 0&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(e=>{this.isStore=e})}componentWillLoad(){}async componentDidLoad(){this._element=this.el.shadowRoot,this.isStore||console.log("jeep-sqlite isStore = false")}async _createConnection(e,t,n){let r={};const s=Object.keys(this._versionUpgrades);s.length!==0&&s.includes(e)&&(r=this._versionUpgrades[e]);const a=Object.keys(this._dbDict);let o;try{a.length>0&&(a.includes("RW_"+e)||a.includes("RO_"+e))?o=a.includes("RW_"+e)?this._dbDict["RW_"+e]:this._dbDict["RO_"+e]:o=new uE(e+"SQLite.db",t,r,this.store,this.innerAutoSave,this.innerWasmPath);const l=n?"RO_"+e:"RW_"+e;return this._dbDict[l]=o,Promise.resolve()}catch(l){return Promise.reject(l.message)}}async _isConnection(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;return n.includes(r)?{result:!0}:{result:!1}}async _closeConnection(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("CloseConnection: No available connection for ".concat(e));const s=this._dbDict[r];try{if(s.isDBOpen())try{await s.close()}catch(a){return Promise.reject("CloseConnection: close ".concat(e," failed ").concat(a))}return delete this._dbDict[r],Promise.resolve()}catch(a){return Promise.reject("CloseConnection: ".concat(a.message))}}async _open(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("Open: No available connection for ".concat(e));const s=this._dbDict[r];try{return await s.open(),Promise.resolve()}catch(a){return Promise.reject("Open: ".concat(a.message))}}async _close(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("Close: No available connection for ".concat(e));const s=this._dbDict[r];try{return await s.close(),Promise.resolve()}catch(a){return Promise.reject("Close: ".concat(a.message))}}async _saveToStore(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("SaveToStore: No available connection for ".concat(e));const s=this._dbDict[r];try{return await s.saveToStore(),Promise.resolve()}catch(a){return Promise.reject("SaveToStore: ".concat(a.message))}}async _saveToLocalDisk(e){try{const t=Object.keys(this._dbDict),n="RW_"+e;if(!t.includes(n))return Promise.reject("_saveToLocalDisk: No available connection for "+"".concat(e));const s=await this._dbDict[n].exportDB();this._blob=await this.uint2blob(s);const a="".concat(e,"SQLite.db");return this._opts={fileName:a,extensions:[".db"]},this._buttonSaveEl=document.createElement("button"),this._buttonSaveEl.setAttribute("id","saveButton"),this._buttonSaveEl.innerHTML="".concat(this.innerSaveText," ").concat(a),this._element.appendChild(this._buttonSaveEl),this._buttonSaveEl.addEventListener("click",this.saveFile.bind(this)),Promise.resolve()}catch(t){return Promise.reject("_saveToLocalDisk: ".concat(t.message))}}async _getFromLocalDiskToStore(e){return this._buttonPickEl=document.createElement("button"),this._buttonPickEl.setAttribute("id","pickButton"),this._buttonPickEl.innerHTML="".concat(this.innerPickText),this._element.appendChild(this._buttonPickEl),this._buttonPickEl.addEventListener("click",this.pickDatabase.bind(this)),this._overwrite=e,Promise.resolve()}async pickDatabase(){try{const e=await V5({extensions:[".db"]});let t=await this.blob2uint(e);const n=this.removePathSuffix(e.name),r=this.setPathSuffix(e.name);await pt.isDBInStore(r,this.store)?this._overwrite?(await pt.removeDBFromStore(r,this.store),await pt.saveDBToStore(r,t,this.store)):this.PickDatabaseEnded.emit({message:"Error: cannot overwrite ".concat(r)}):await pt.saveDBToStore(r,t,this.store),this._element.removeChild(this._buttonPickEl),this.PickDatabaseEnded.emit({db_name:n})}catch(e){const t=e.message?e.message:e;this.PickDatabaseEnded.emit({message:t})}}async saveFile(){try{await H5(this._blob,[this._opts]);const e=this._opts.fileName;this._element.removeChild(this._buttonSaveEl),this.SaveDatabaseEnded.emit({db_name:e})}catch(e){const t=e.message?e.message:e;this.SaveDatabaseEnded.emit({message:t})}}async _getVersion(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("Open: No available connection for ".concat(e));const s=this._dbDict[r];try{const a=await s.getVersion(),o={};return o.version=a,Promise.resolve(o)}catch(a){return Promise.reject("Open: ".concat(a.message))}}async _beginTransaction(e){const t=Object.keys(this._dbDict),n="RW_"+e;if(!t.includes(n))return Promise.reject("BeginTransaction: No available connection for ".concat(e));const r=this._dbDict[n];let s={};return s={changes:{changes:await r.beginTransaction()}},Promise.resolve(s)}async _commitTransaction(e){const t=Object.keys(this._dbDict),n="RW_"+e;if(!t.includes(n))return Promise.reject("CommitTransaction: No available connection for ".concat(e));const r=this._dbDict[n];let s={};return s={changes:{changes:await r.commitTransaction()}},Promise.resolve(s)}async _rollbackTransaction(e){const t=Object.keys(this._dbDict),n="RW_"+e;if(!t.includes(n))return Promise.reject("RollbackTransaction: No available connection for ".concat(e));const r=this._dbDict[n];let s={};return s={changes:{changes:await r.rollbackTransaction()}},Promise.resolve(s)}async _isTransactionActive(e){const t=Object.keys(this._dbDict),n="RW_"+e;if(!t.includes(n))return Promise.reject("IsTransactionActive: No available connection for ".concat(e));const r=this._dbDict[n];let s={};return s={result:r.isTransActive()},Promise.resolve(s)}async _execute(e,t,n,r){const s=Object.keys(this._dbDict),a="RW_"+e;if(!s.includes(a))return Promise.reject("Execute: No available connection for ".concat(e));const o=this._dbDict[a];if(r)return Promise.reject("Execute: not allowed in read-only mode");let l={};const c=t.substring(0,6);if(this.innerAutoSave&&c==="COMMIT"&&this.innerTypeOrm)return l={changes:{changes:0}},Promise.resolve(l);try{return l={changes:{changes:await o.executeSQL(t,n)}},Promise.resolve(l)}catch(u){return Promise.reject("Execute: ".concat(u.message))}}async _executeSet(e,t,n,r,s){const a=Object.keys(this._dbDict),o="RW_"+e;if(!a.includes(o))return Promise.reject("ExecuteSet: No available connection for ".concat(e));const l=this._dbDict[o];if(r)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const c of t)if(!("statement"in c)||!("values"in c))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const c=await l.execSet(t,n,s),u={changes:{changes:c.changes,lastId:c.lastId,values:c.values}};return Promise.resolve(u)}catch(c){return Promise.reject("ExecuteSet: ".concat(c.message))}}async _run(e,t,n,r,s,a){const o=Object.keys(this._dbDict),l="RW_"+e;if(!o.includes(l))return Promise.reject("Run: No available connection for ".concat(e));const c=this._dbDict[l];if(s)return Promise.reject("Run: not allowed in read-only mode");let u={};const d=t.substring(0,6);if(this.innerAutoSave&&d==="COMMIT")return u={changes:{changes:0}},Promise.resolve(u);try{const h=await c.runSQL(t,n,r,a);return u={changes:{changes:h.changes,lastId:h.lastId,values:h.values}},Promise.resolve(u)}catch(h){return Promise.reject("Run: ".concat(h.message))}}async _query(e,t,n,r){const s=Object.keys(this._dbDict),a=r?"RO_"+e:"RW_"+e;if(!s.includes(a))return Promise.reject("Query: No available connection for ".concat(e));const o=this._dbDict[a];let l=[];const c=t.substring(0,6);if(this.innerAutoSave&&c==="COMMIT")return Promise.resolve({values:l});try{return l=await o.selectSQL(t,n),Promise.resolve({values:l})}catch(u){return Promise.reject("Query failed: ".concat(u.message))}}async _getTableList(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("GetTableList: No available connection for ".concat(e));const s=this._dbDict[r];let a=[];try{return a=await s.getTableNames(),Promise.resolve({values:a})}catch(o){return Promise.reject("GetTableList failed: ".concat(o.message))}}async _isDBExists(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("IsDBExists: No available connection for ".concat(e));const s=this._dbDict[r];try{const o={result:await s.isDBExists(e+"SQLite.db")};return Promise.resolve(o)}catch(a){return Promise.reject("IsDBExists: ".concat(a.message))}}async _isDBOpen(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("IsDBOpen: No available connection for ".concat(e));const s=this._dbDict[r];try{const o={result:await s.isDBOpen(e+"SQLite.db")};return Promise.resolve(o)}catch(a){return Promise.reject("IsDBOpen: ".concat(a.message))}}async _deleteDatabase(e,t){const n=Object.keys(this._dbDict),r="RW_"+e;if(!n.includes(r))return Promise.reject("DeleteDatabase: No available connection for ".concat(e));const s=this._dbDict[r];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return await s.deleteDB(e+"SQLite.db"),Promise.resolve()}catch(a){return Promise.reject("DeleteDatabase: ".concat(a.message))}}async _isTableExists(e,t,n){const r=Object.keys(this._dbDict),s=n?"RO_"+e:"RW_"+e;if(!r.includes(s))return Promise.reject("IsTableExists: No available connection for ".concat(e));const a=this._dbDict[s];try{const l={result:await a.isTable(t)};return Promise.resolve(l)}catch(o){return Promise.reject("IsTableExists: ".concat(o.message))}}async _createSyncTable(e,t){const n=Object.keys(this._dbDict),r="RW_"+e;if(!n.includes(r))return Promise.reject("CreateSyncTable: No available connection for "+"".concat(e));const s=this._dbDict[r];if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const a=await s.createSyncTable();return Promise.resolve({changes:{changes:a}})}catch(a){return Promise.reject("CreateSyncTable: ".concat(a.message))}}async _getSyncDate(e,t){const n=Object.keys(this._dbDict),r=t?"RO_"+e:"RW_"+e;if(!n.includes(r))return Promise.reject("GetSyncDate: No available connection for "+"".concat(e));const s=this._dbDict[r];try{const a=await s.getSyncDate();return Promise.resolve({syncDate:a})}catch(a){return Promise.reject("GetSyncDate: ".concat(a.message))}}async _setSyncDate(e,t,n){const r=Object.keys(this._dbDict),s="RW_"+e;if(!r.includes(s))return Promise.reject("SetSyncDate: No available connection for "+"".concat(e));const a=this._dbDict[s];if(n)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const o=await a.setSyncDate(t);return o.result?Promise.resolve():Promise.reject("SetSyncDate: ".concat(o.message))}catch(o){return Promise.reject("SetSyncDate: ".concat(o.message))}}async _isJsonValid(e){const t=JSON.parse(e);return await Lt.isJsonSQLite(t)?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")}async _importFromJson(e){var t,n;const r=JSON.parse(e);if(!await Lt.isJsonSQLite(r))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const a=r,o="".concat(a.database,"SQLite.db"),l=(t=a.version)!==null&&t!==void 0?t:1,c=a.mode,u=(n=a.overwrite)!==null&&n!==void 0?n:!1,d=new uE(o,l,{},this.store,this.innerAutoSave,this.innerWasmPath);try{u&&c==="full"&&pt.isDBInStore(o,this.store)&&await pt.removeDBFromStore(o,this.store),await d.open();const h=await d.getTableNames();if(c==="full"&&h.length>0){const m=await d.getVersion();if(l<m)return Promise.reject("ImportFromJson: Cannot import a version lower than ".concat(m));if(m===l)return Promise.resolve({changes:{changes:0}})}const f=await d.importJson(a,this.importProgress);return await d.close(),Promise.resolve({changes:{changes:f}})}catch(h){return Promise.reject("ImportFromJson: ".concat(h.message))}}async _exportToJson(e,t,n){const r=Object.keys(this._dbDict),s=n?"RO_"+e:"RW_"+e;if(!r.includes(s))return Promise.reject("ExportToJson: No available connection for "+"".concat(e));const a=this._dbDict[s];try{const o=await a.exportJson(t,this.exportProgress);return Object.keys(o).includes("message")?Promise.reject("ExportToJson: ".concat(o.message)):Promise.resolve({export:o})}catch(o){return Promise.reject("ExportToJson: ".concat(o.message))}}async _deleteExportedRows(e,t){const n=Object.keys(this._dbDict),r="RW_"+e;if(!n.includes(r))return Promise.reject("ExportToJson: No available connection for "+"".concat(e));const s=this._dbDict[r];if(t)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{await s.deleteExportedRows()}catch(a){return Promise.reject("DeleteExportedRows: ".concat(a.message))}}async _copyFromAssets(e){const t=await this.loadJSON("assets/databases/databases.json");if(t!=null)if(this.databaseList=JSON.parse(t),Object.keys(this.databaseList).includes("databaseList"))try{for(const r of this.databaseList.databaseList)r.substring(r.length-3)===".db"&&await this.copyDatabase("assets/databases/".concat(r),e),r.substring(r.length-4)===".zip"&&await this.unzipDatabase("assets/databases/".concat(r),e);return Promise.resolve()}catch(r){return Promise.reject("CopyFromAssets: ".concat(r.message))}else return Promise.reject("CopyFromAssets: no key databaseList in databases.json");else return Promise.reject("CopyFromAssets: no databases.json file in assets/databases folder")}async _getFromHTTPRequest(e,t){try{let n;return e.substring(e.length-3)===".db"&&(await this.copyDatabase(e,t),n="db"),e.substring(e.length-4)===".zip"&&(await this.unzipDatabase(e,t),n="zip"),this.HTTPRequestEnded.emit({message:n}),Promise.resolve()}catch(n){return Promise.reject("GetFromHTTPRequest: ".concat(n.message))}}async _isDatabase(e){try{const n={result:await pt.isDBInStore(e+"SQLite.db",this.store)};return Promise.resolve(n)}catch(t){return Promise.reject("IsDatabase: ".concat(t.message))}}async _getDatabaseList(){try{const t={values:await pt.getDBListFromStore(this.store)};return Promise.resolve(t)}catch(e){return Promise.reject("GetDatabaseList: ".concat(e.message))}}async _checkConnectionsConsistency(e,t){const n={};n.result=!1;const r=[];e.forEach((s,a)=>{r.push("".concat(t[a],"_").concat(s))});try{let s=new Set(Object.keys(this._dbDict));const a=new Set(r);if(a.size===0)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n);if(s.size<a.size)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n);if(s.size>a.size){const o={};for(const l of s)if(!Array.from(a.keys()).includes(l)){let c=!1;l.substring(0,3)==="RO_"&&(c=!0),o.database=l.substring(3),o.readonly=c,await this._closeConnection(o.database,o.readonly)}}return s=new Set(Object.keys(this._dbDict)),s.size===a.size?(await this.symmetricDifference(s,a)).size===0?(n.result=!0,Promise.resolve(n)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n))}catch(s){return Promise.reject("CheckConnectionsConsistency: ".concat(s.message))}}async _resetDbDict(e){try{for(const t of e){const n={};let r=!1;t.substring(0,3)==="RO_"&&(r=!0),n.database=t.substring(3),n.readonly=r,await this._closeConnection(n.database,n.readonly)}}catch(t){return Promise.reject("ResetDbDict: ".concat(t.message))}}async symmetricDifference(e,t){let n=new Set;e.forEach(s=>{n.add(s.substring(3))});let r=new Set;t.forEach(s=>{r.add(s.substring(3))});for(const s of r)n.has(s)?n.delete(s):n.add(s);return n}async unzipDatabase(e,t){return new Promise((n,r)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{r(new Error("unzipDatabase: failed"))},s.onload=()=>{U5.loadAsync(s.response).then(async a=>{const o=Object.keys(a.files);try{for(const l of o)await this.retrieveDBFromZip(a.files,l,t);n()}catch(l){r(new Error("unzipDatabase Error: ".concat(l.message)))}})},s.send()})}async retrieveDBFromZip(e,t,n){return new Promise((r,s)=>{e[t].async("nodebuffer").then(async a=>{try{const o=new Uint8Array(a),l=this.setPathSuffix(t);await pt.isDBInStore(l,this.store)?n?(await pt.removeDBFromStore(l,this.store),await pt.saveDBToStore(l,o,this.store)):s(new Error("retrieveDBFromZip: cannot overwrite ".concat(l))):await pt.saveDBToStore(l,o,this.store),r()}catch(o){s(new Error("retrieveDBFromZip:: ".concat(o.message)))}})})}async copyDatabase(e,t){return new Promise((n,r)=>{var s=new XMLHttpRequest,a;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{r(new Error("CopyDatabase: failed"))},s.onload=()=>{a=new Uint8Array(s.response)},s.onloadend=async()=>{const o=this.setPathSuffix(e);await pt.isDBInStore(o,this.store)?t?(await pt.removeDBFromStore(o,this.store),await pt.saveDBToStore(o,a,this.store)):r(new Error("CopyDatabase Error: cannot overwrite ".concat(o))):await pt.saveDBToStore(o,a,this.store),n()},s.send()})}async loadJSON(e){return new Promise((t,n)=>{var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",e,!0),r.onerror=()=>{n(new Error("LoadJSON: failed"))},r.onreadystatechange=function(){r.status==404&&t(null),r.readyState==4&&r.status==200&&t(r.responseText)},r.send(null)})}async openStore(e,t){let n=!1;const r=this.setConfig(e,t);return this.store=dE.createInstance(r),this.store!=null&&(this.storeName=e,n=!0),n}setConfig(e,t){return{name:e,storeName:t,driver:[dE.INDEXEDDB],version:1}}removePathSuffix(e){return e.includes("SQLite.db")?e.split("SQLite.db")[0]:e.substring(e.length-3)===".db"?e.slice(0,e.lastIndexOf(".")):e}setPathSuffix(e){let t=e.slice(e.lastIndexOf("/")+1);const n=".db";return e.substring(e.length-3)===n&&(e.includes("SQLite.db")||(t=e.slice(e.lastIndexOf("/")+1,-3)+"SQLite.db")),t}async blob2uint(e){return new Response(e).arrayBuffer().then(t=>new Uint8Array(t))}async uint2blob(e){const t=new Blob([e.buffer]);return Promise.resolve(t)}render(){}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}static get style(){return a8}},[1,"jeep-sqlite",{autoSave:[516,"autosave"],typeOrm:[516,"typeorm"],wasmPath:[513,"wasmpath"],pickText:[513,"picktext"],saveText:[513,"savetext"],buttonOptions:[513,"buttonoptions"],innerAutoSave:[32],innerTypeOrm:[32],innerWasmPath:[32],innerPickText:[32],innerSaveText:[32],innerButtonOptions:[32],echo:[64],createConnection:[64],isConnection:[64],closeConnection:[64],open:[64],close:[64],getVersion:[64],beginTransaction:[64],commitTransaction:[64],rollbackTransaction:[64],isTransactionActive:[64],execute:[64],executeSet:[64],run:[64],query:[64],getTableList:[64],isDBExists:[64],isDBOpen:[64],deleteDatabase:[64],isStoreOpen:[64],copyFromAssets:[64],isTableExists:[64],createSyncTable:[64],getSyncDate:[64],setSyncDate:[64],isJsonValid:[64],importFromJson:[64],exportToJson:[64],deleteExportedRows:[64],addUpgradeStatement:[64],isDatabase:[64],getDatabaseList:[64],checkConnectionsConsistency:[64],saveToStore:[64],saveToLocalDisk:[64],getFromLocalDiskToStore:[64],getFromHTTPRequest:[64]}]),l8=o8;window.addEventListener("DOMContentLoaded",async()=>{try{if(Ec.getPlatform()==="web"){console.log("Start of initialization IndexedDB");const n=new SC(Wm);customElements.define("jeep-sqlite",l8);const r=document.createElement("jeep-sqlite");document.body.appendChild(r),await customElements.whenDefined("jeep-sqlite"),await n.initWebStore(),console.log("End of initialization IndexedDB")}const e=document.getElementById("root");C1(e).render(xe.jsx(Te.StrictMode,{children:xe.jsx(_j,{})}))}catch(i){console.log(i)}});window.Buffer=My.Buffer;export{S2 as K,TC as W,u8 as __vite_legacy_guard,Er as a,Ca as b,mT as c,ko as d,_P as e,E2 as f,RP as g,Im as h,Yu as i,yi as j,dv as k,C8 as l,fn as m,d8 as n,f8 as o,h8 as p,gc as r,S8 as s,_r as w};
