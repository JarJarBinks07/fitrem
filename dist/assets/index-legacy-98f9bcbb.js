!function(){function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register([],(function(t,n){"use strict";return{execute:function(){var i=document.createElement("style");i.textContent='html.ios{--ion-default-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Roboto", sans-serif}html.md{--ion-default-font: "Roboto", "Helvetica Neue", sans-serif}html{--ion-font-family: var(--ion-default-font)}body{background:var(--ion-background-color)}body.backdrop-no-scroll{overflow:hidden}html.ios ion-modal.modal-card ion-header ion-toolbar:first-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:first-of-type,html.ios ion-modal ion-footer ion-toolbar:first-of-type{padding-top:6px}html.ios ion-modal.modal-card ion-header ion-toolbar:last-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:last-of-type{padding-bottom:6px}html.ios ion-modal ion-toolbar{padding-right:calc(var(--ion-safe-area-right) + 8px);padding-left:calc(var(--ion-safe-area-left) + 8px)}@media screen and (min-width: 768px){html.ios ion-modal.modal-card:first-of-type{--backdrop-opacity: .18}}ion-modal.modal-default.show-modal~ion-modal.modal-default{--backdrop-opacity: 0;--box-shadow: none}html.ios ion-modal.modal-card .ion-page{border-top-left-radius:var(--border-radius)}.ion-color-primary{--ion-color-base: var(--ion-color-primary, #3880ff) !important;--ion-color-base-rgb: var(--ion-color-primary-rgb, 56, 128, 255) !important;--ion-color-contrast: var(--ion-color-primary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-primary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-primary-shade, #3171e0) !important;--ion-color-tint: var(--ion-color-primary-tint, #4c8dff) !important}.ion-color-secondary{--ion-color-base: var(--ion-color-secondary, #3dc2ff) !important;--ion-color-base-rgb: var(--ion-color-secondary-rgb, 61, 194, 255) !important;--ion-color-contrast: var(--ion-color-secondary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-secondary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-secondary-shade, #36abe0) !important;--ion-color-tint: var(--ion-color-secondary-tint, #50c8ff) !important}.ion-color-tertiary{--ion-color-base: var(--ion-color-tertiary, #5260ff) !important;--ion-color-base-rgb: var(--ion-color-tertiary-rgb, 82, 96, 255) !important;--ion-color-contrast: var(--ion-color-tertiary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-tertiary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-tertiary-shade, #4854e0) !important;--ion-color-tint: var(--ion-color-tertiary-tint, #6370ff) !important}.ion-color-success{--ion-color-base: var(--ion-color-success, #2dd36f) !important;--ion-color-base-rgb: var(--ion-color-success-rgb, 45, 211, 111) !important;--ion-color-contrast: var(--ion-color-success-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-success-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-success-shade, #28ba62) !important;--ion-color-tint: var(--ion-color-success-tint, #42d77d) !important}.ion-color-warning{--ion-color-base: var(--ion-color-warning, #ffc409) !important;--ion-color-base-rgb: var(--ion-color-warning-rgb, 255, 196, 9) !important;--ion-color-contrast: var(--ion-color-warning-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-warning-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-warning-shade, #e0ac08) !important;--ion-color-tint: var(--ion-color-warning-tint, #ffca22) !important}.ion-color-danger{--ion-color-base: var(--ion-color-danger, #eb445a) !important;--ion-color-base-rgb: var(--ion-color-danger-rgb, 235, 68, 90) !important;--ion-color-contrast: var(--ion-color-danger-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-danger-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-danger-shade, #cf3c4f) !important;--ion-color-tint: var(--ion-color-danger-tint, #ed576b) !important}.ion-color-light{--ion-color-base: var(--ion-color-light, #f4f5f8) !important;--ion-color-base-rgb: var(--ion-color-light-rgb, 244, 245, 248) !important;--ion-color-contrast: var(--ion-color-light-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-light-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-light-shade, #d7d8da) !important;--ion-color-tint: var(--ion-color-light-tint, #f5f6f9) !important}.ion-color-medium{--ion-color-base: var(--ion-color-medium, #92949c) !important;--ion-color-base-rgb: var(--ion-color-medium-rgb, 146, 148, 156) !important;--ion-color-contrast: var(--ion-color-medium-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-medium-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-medium-shade, #808289) !important;--ion-color-tint: var(--ion-color-medium-tint, #9d9fa6) !important}.ion-color-dark{--ion-color-base: var(--ion-color-dark, #222428) !important;--ion-color-base-rgb: var(--ion-color-dark-rgb, 34, 36, 40) !important;--ion-color-contrast: var(--ion-color-dark-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-dark-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-dark-shade, #1e2023) !important;--ion-color-tint: var(--ion-color-dark-tint, #383a3e) !important}.ion-page{left:0;right:0;top:0;bottom:0;display:flex;position:absolute;flex-direction:column;justify-content:space-between;contain:layout size style;overflow:hidden;z-index:0}ion-modal>.ion-page{position:relative;contain:layout style;height:100%}.split-pane-visible>.ion-page.split-pane-main{position:relative}ion-route,ion-route-redirect,ion-router,ion-select-option,ion-nav-controller,ion-menu-controller,ion-action-sheet-controller,ion-alert-controller,ion-loading-controller,ion-modal-controller,ion-picker-controller,ion-popover-controller,ion-toast-controller,.ion-page-hidden{display:none!important}.ion-page-invisible{opacity:0}.can-go-back>ion-header ion-back-button{display:block}html.plt-ios.plt-hybrid,html.plt-ios.plt-pwa{--ion-statusbar-padding: 20px}@supports (padding-top: 20px){html{--ion-safe-area-top: var(--ion-statusbar-padding)}}@supports (padding-top: constant(safe-area-inset-top)){html{--ion-safe-area-top: constant(safe-area-inset-top);--ion-safe-area-bottom: constant(safe-area-inset-bottom);--ion-safe-area-left: constant(safe-area-inset-left);--ion-safe-area-right: constant(safe-area-inset-right)}}@supports (padding-top: env(safe-area-inset-top)){html{--ion-safe-area-top: env(safe-area-inset-top);--ion-safe-area-bottom: env(safe-area-inset-bottom);--ion-safe-area-left: env(safe-area-inset-left);--ion-safe-area-right: env(safe-area-inset-right)}}ion-card.ion-color .ion-inherit-color,ion-card-header.ion-color .ion-inherit-color{color:inherit}.menu-content{transform:translateZ(0)}.menu-content-open{cursor:pointer;touch-action:manipulation;pointer-events:none}.ios .menu-content-reveal{box-shadow:-8px 0 42px rgba(0,0,0,.08)}[dir=rtl].ios .menu-content-reveal{box-shadow:8px 0 42px rgba(0,0,0,.08)}.md .menu-content-reveal,.md .menu-content-push{box-shadow:4px 0 16px rgba(0,0,0,.18)}ion-accordion-group.accordion-group-expand-inset>ion-accordion:first-of-type{border-top-left-radius:8px;border-top-right-radius:8px}ion-accordion-group.accordion-group-expand-inset>ion-accordion:last-of-type{border-bottom-left-radius:8px;border-bottom-right-radius:8px}ion-accordion-group>ion-accordion:last-of-type ion-item[slot=header]{--border-width: 0px}ion-accordion.accordion-animated>[slot=header] .ion-accordion-toggle-icon{transition:.3s transform cubic-bezier(.25,.8,.5,1)}@media (prefers-reduced-motion: reduce){ion-accordion .ion-accordion-toggle-icon{transition:none!important}}ion-accordion.accordion-expanding>[slot=header] .ion-accordion-toggle-icon,ion-accordion.accordion-expanded>[slot=header] .ion-accordion-toggle-icon{transform:rotate(180deg)}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-previous ion-item[slot=header]{--border-width: 0px;--inner-border-width: 0px}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanding:first-of-type,ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanded:first-of-type{margin-top:0}ion-input input::-webkit-date-and-time-value{text-align:start}.ion-datetime-button-overlay{--width: fit-content;--height: fit-content}.ion-datetime-button-overlay ion-datetime.datetime-grid{width:320px;min-height:320px}audio,canvas,progress,video{vertical-align:baseline}audio:not([controls]){display:none;height:0}b,strong{font-weight:700}img{max-width:100%}hr{height:1px;border-width:0;box-sizing:content-box}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}label,input,select,textarea{font-family:inherit;line-height:normal}textarea{overflow:auto;height:auto;font:inherit;color:inherit}textarea::placeholder{padding-left:2px}form,input,optgroup,select{margin:0;font:inherit;color:inherit}html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}a,a div,a span,a ion-icon,a ion-label,button,button div,button span,button ion-icon,button ion-label,.ion-tappable,[tappable],[tappable] div,[tappable] span,[tappable] ion-icon,[tappable] ion-label,input,textarea{touch-action:manipulation}a ion-label,button ion-label{pointer-events:none}button{padding:0;border:0;border-radius:0;font-family:inherit;font-style:inherit;font-variant:inherit;line-height:1;text-transform:none;cursor:pointer;-webkit-appearance:button}[tappable]{cursor:pointer}a[disabled],button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}html{width:100%;height:100%;-webkit-text-size-adjust:100%;text-size-adjust:100%}html:not(.hydrated) body{display:none}html.ion-ce body{display:block}html.plt-pwa{height:100vh}body{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin:0;padding:0;position:fixed;width:100%;max-width:100%;height:100%;max-height:100%;transform:translateZ(0);text-rendering:optimizeLegibility;overflow:hidden;touch-action:manipulation;-webkit-user-drag:none;-ms-content-zooming:none;word-wrap:break-word;overscroll-behavior-y:none;-webkit-text-size-adjust:none;text-size-adjust:none}html{font-family:var(--ion-font-family)}a{background-color:transparent;color:var(--ion-color-primary, #3880ff)}h1,h2,h3,h4,h5,h6{margin-top:16px;margin-bottom:10px;font-weight:500;line-height:1.2}h1{margin-top:20px;font-size:26px}h2{margin-top:18px;font-size:24px}h3{font-size:22px}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px}small{font-size:75%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}.ion-no-padding{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;padding:0}.ion-padding{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-top{--padding-top: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px)}.ion-padding-start{--padding-start: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px)}.ion-padding-end{--padding-end: var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-padding-bottom{--padding-bottom: var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-vertical{--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-horizontal{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-no-margin{--margin-start: 0;--margin-end: 0;--margin-top: 0;--margin-bottom: 0;margin:0}.ion-margin{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-top{--margin-top: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px)}.ion-margin-start{--margin-start: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px)}.ion-margin-end{--margin-end: var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-margin-bottom{--margin-bottom: var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-vertical{--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-horizontal{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-float-left{float:left!important}.ion-float-right{float:right!important}.ion-float-start{float:left!important}:host-context([dir=rtl]) .ion-float-start{float:right!important}[dir=rtl] .ion-float-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-start:dir(rtl){float:right!important}}.ion-float-end{float:right!important}:host-context([dir=rtl]) .ion-float-end{float:left!important}[dir=rtl] .ion-float-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-end:dir(rtl){float:left!important}}@media (min-width: 576px){.ion-float-sm-left{float:left!important}.ion-float-sm-right{float:right!important}.ion-float-sm-start{float:left!important}:host-context([dir=rtl]) .ion-float-sm-start{float:right!important}[dir=rtl] .ion-float-sm-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-sm-start:dir(rtl){float:right!important}}.ion-float-sm-end{float:right!important}:host-context([dir=rtl]) .ion-float-sm-end{float:left!important}[dir=rtl] .ion-float-sm-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-sm-end:dir(rtl){float:left!important}}}@media (min-width: 768px){.ion-float-md-left{float:left!important}.ion-float-md-right{float:right!important}.ion-float-md-start{float:left!important}:host-context([dir=rtl]) .ion-float-md-start{float:right!important}[dir=rtl] .ion-float-md-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-md-start:dir(rtl){float:right!important}}.ion-float-md-end{float:right!important}:host-context([dir=rtl]) .ion-float-md-end{float:left!important}[dir=rtl] .ion-float-md-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-md-end:dir(rtl){float:left!important}}}@media (min-width: 992px){.ion-float-lg-left{float:left!important}.ion-float-lg-right{float:right!important}.ion-float-lg-start{float:left!important}:host-context([dir=rtl]) .ion-float-lg-start{float:right!important}[dir=rtl] .ion-float-lg-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-lg-start:dir(rtl){float:right!important}}.ion-float-lg-end{float:right!important}:host-context([dir=rtl]) .ion-float-lg-end{float:left!important}[dir=rtl] .ion-float-lg-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-lg-end:dir(rtl){float:left!important}}}@media (min-width: 1200px){.ion-float-xl-left{float:left!important}.ion-float-xl-right{float:right!important}.ion-float-xl-start{float:left!important}:host-context([dir=rtl]) .ion-float-xl-start{float:right!important}[dir=rtl] .ion-float-xl-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-xl-start:dir(rtl){float:right!important}}.ion-float-xl-end{float:right!important}:host-context([dir=rtl]) .ion-float-xl-end{float:left!important}[dir=rtl] .ion-float-xl-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-xl-end:dir(rtl){float:left!important}}}.ion-text-center{text-align:center!important}.ion-text-justify{text-align:justify!important}.ion-text-start{text-align:start!important}.ion-text-end{text-align:end!important}.ion-text-left{text-align:left!important}.ion-text-right{text-align:right!important}.ion-text-nowrap{white-space:nowrap!important}.ion-text-wrap{white-space:normal!important}@media (min-width: 576px){.ion-text-sm-center{text-align:center!important}.ion-text-sm-justify{text-align:justify!important}.ion-text-sm-start{text-align:start!important}.ion-text-sm-end{text-align:end!important}.ion-text-sm-left{text-align:left!important}.ion-text-sm-right{text-align:right!important}.ion-text-sm-nowrap{white-space:nowrap!important}.ion-text-sm-wrap{white-space:normal!important}}@media (min-width: 768px){.ion-text-md-center{text-align:center!important}.ion-text-md-justify{text-align:justify!important}.ion-text-md-start{text-align:start!important}.ion-text-md-end{text-align:end!important}.ion-text-md-left{text-align:left!important}.ion-text-md-right{text-align:right!important}.ion-text-md-nowrap{white-space:nowrap!important}.ion-text-md-wrap{white-space:normal!important}}@media (min-width: 992px){.ion-text-lg-center{text-align:center!important}.ion-text-lg-justify{text-align:justify!important}.ion-text-lg-start{text-align:start!important}.ion-text-lg-end{text-align:end!important}.ion-text-lg-left{text-align:left!important}.ion-text-lg-right{text-align:right!important}.ion-text-lg-nowrap{white-space:nowrap!important}.ion-text-lg-wrap{white-space:normal!important}}@media (min-width: 1200px){.ion-text-xl-center{text-align:center!important}.ion-text-xl-justify{text-align:justify!important}.ion-text-xl-start{text-align:start!important}.ion-text-xl-end{text-align:end!important}.ion-text-xl-left{text-align:left!important}.ion-text-xl-right{text-align:right!important}.ion-text-xl-nowrap{white-space:nowrap!important}.ion-text-xl-wrap{white-space:normal!important}}.ion-text-uppercase{text-transform:uppercase!important}.ion-text-lowercase{text-transform:lowercase!important}.ion-text-capitalize{text-transform:capitalize!important}@media (min-width: 576px){.ion-text-sm-uppercase{text-transform:uppercase!important}.ion-text-sm-lowercase{text-transform:lowercase!important}.ion-text-sm-capitalize{text-transform:capitalize!important}}@media (min-width: 768px){.ion-text-md-uppercase{text-transform:uppercase!important}.ion-text-md-lowercase{text-transform:lowercase!important}.ion-text-md-capitalize{text-transform:capitalize!important}}@media (min-width: 992px){.ion-text-lg-uppercase{text-transform:uppercase!important}.ion-text-lg-lowercase{text-transform:lowercase!important}.ion-text-lg-capitalize{text-transform:capitalize!important}}@media (min-width: 1200px){.ion-text-xl-uppercase{text-transform:uppercase!important}.ion-text-xl-lowercase{text-transform:lowercase!important}.ion-text-xl-capitalize{text-transform:capitalize!important}}.ion-align-self-start{align-self:flex-start!important}.ion-align-self-end{align-self:flex-end!important}.ion-align-self-center{align-self:center!important}.ion-align-self-stretch{align-self:stretch!important}.ion-align-self-baseline{align-self:baseline!important}.ion-align-self-auto{align-self:auto!important}.ion-wrap{flex-wrap:wrap!important}.ion-nowrap{flex-wrap:nowrap!important}.ion-wrap-reverse{flex-wrap:wrap-reverse!important}.ion-justify-content-start{justify-content:flex-start!important}.ion-justify-content-center{justify-content:center!important}.ion-justify-content-end{justify-content:flex-end!important}.ion-justify-content-around{justify-content:space-around!important}.ion-justify-content-between{justify-content:space-between!important}.ion-justify-content-evenly{justify-content:space-evenly!important}.ion-align-items-start{align-items:flex-start!important}.ion-align-items-center{align-items:center!important}.ion-align-items-end{align-items:flex-end!important}.ion-align-items-stretch{align-items:stretch!important}.ion-align-items-baseline{align-items:baseline!important}.ion-hide,.ion-hide-up,.ion-hide-down{display:none!important}@media (min-width: 576px){.ion-hide-sm-up{display:none!important}}@media (max-width: 575.98px){.ion-hide-sm-down{display:none!important}}@media (min-width: 768px){.ion-hide-md-up{display:none!important}}@media (max-width: 767.98px){.ion-hide-md-down{display:none!important}}@media (min-width: 992px){.ion-hide-lg-up{display:none!important}}@media (max-width: 991.98px){.ion-hide-lg-down{display:none!important}}@media (min-width: 1200px){.ion-hide-xl-up{display:none!important}}@media (max-width: 1199.98px){.ion-hide-xl-down{display:none!important}}:root{--ion-color-primary: #3880FF;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}@media (prefers-color-scheme: dark){body{--ion-color-primary: #afccff;--ion-color-primary-rgb: 175, 204, 255;--ion-color-primary-contrast: #000000;--ion-color-primary-contrast-rgb: 0, 0, 0;--ion-color-primary-shade: #9ab4e0;--ion-color-primary-tint: #b7d1ff;--ion-color-secondary: #50c8ff;--ion-color-secondary-rgb: 80,200,255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #46b0e0;--ion-color-secondary-tint: #62ceff;--ion-color-tertiary: #6a64ff;--ion-color-tertiary-rgb: 106,100,255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #5d58e0;--ion-color-tertiary-tint: #7974ff;--ion-color-success: #2fdf75;--ion-color-success-rgb: 47,223,117;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #29c467;--ion-color-success-tint: #44e283;--ion-color-warning: #ffd534;--ion-color-warning-rgb: 255,213,52;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0,0,0;--ion-color-warning-shade: #e0bb2e;--ion-color-warning-tint: #ffd948;--ion-color-danger: #ff4961;--ion-color-danger-rgb: 255,73,97;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #e04055;--ion-color-danger-tint: #ff5b71;--ion-color-dark: #f4f5f8;--ion-color-dark-rgb: 244,245,248;--ion-color-dark-contrast: #000000;--ion-color-dark-contrast-rgb: 0,0,0;--ion-color-dark-shade: #d7d8da;--ion-color-dark-tint: #f5f6f9;--ion-color-medium: #989aa2;--ion-color-medium-rgb: 152,154,162;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #86888f;--ion-color-medium-tint: #a2a4ab;--ion-color-light: #222428;--ion-color-light-rgb: 34,36,40;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255,255,255;--ion-color-light-shade: #1e2023;--ion-color-light-tint: #383a3e}.ios body{--ion-background-color: #000000;--ion-background-color-rgb: 0,0,0;--ion-text-color: #ffffff;--ion-text-color-rgb: 255,255,255;--ion-color-step-50: #0d0d0d;--ion-color-step-100: #1a1a1a;--ion-color-step-150: #262626;--ion-color-step-200: #333333;--ion-color-step-250: #404040;--ion-color-step-300: #4d4d4d;--ion-color-step-350: #595959;--ion-color-step-400: #666666;--ion-color-step-450: #737373;--ion-color-step-500: #808080;--ion-color-step-550: #8c8c8c;--ion-color-step-600: #999999;--ion-color-step-650: #a6a6a6;--ion-color-step-700: #b3b3b3;--ion-color-step-750: #bfbfbf;--ion-color-step-800: #cccccc;--ion-color-step-850: #d9d9d9;--ion-color-step-900: #e6e6e6;--ion-color-step-950: #f2f2f2;--ion-item-background: #000000;--ion-card-background: #1c1c1d}.ios ion-modal{--ion-background-color: var(--ion-color-step-100);--ion-toolbar-background: var(--ion-color-step-150);--ion-toolbar-border-color: var(--ion-color-step-250)}.md body{--ion-background-color: #121212;--ion-background-color-rgb: 18,18,18;--ion-text-color: #ffffff;--ion-text-color-rgb: 255,255,255;--ion-border-color: #222222;--ion-color-step-50: #1e1e1e;--ion-color-step-100: #2a2a2a;--ion-color-step-150: #363636;--ion-color-step-200: #414141;--ion-color-step-250: #4d4d4d;--ion-color-step-300: #595959;--ion-color-step-350: #656565;--ion-color-step-400: #717171;--ion-color-step-450: #7d7d7d;--ion-color-step-500: #898989;--ion-color-step-550: #949494;--ion-color-step-600: #a0a0a0;--ion-color-step-650: #acacac;--ion-color-step-700: #b8b8b8;--ion-color-step-750: #c4c4c4;--ion-color-step-800: #d0d0d0;--ion-color-step-850: #dbdbdb;--ion-color-step-900: #e7e7e7;--ion-color-step-950: #f3f3f3;--ion-item-background: #1e1e1e;--ion-toolbar-background: #1f1f1f;--ion-tab-bar-background: #1f1f1f;--ion-card-background: #1e1e1e}}.timer-content{display:flex;flex-direction:column;align-items:center}.time-wrapper{display:flex;flex:1;flex-direction:column;align-items:center;color:var(--ion-color-dark)}.timer-digits{font-size:45px}.timer-digits__digit{display:flex;justify-content:right;display:inline-block;width:30px}.timer-digits__colon{display:flex;justify-content:center;display:inline-block;width:10px}.bpg-block{background-image:url(https://img.freepik.com/free-photo/vivid-blurred-colorful-background_58702-2655.jpg?w=2000&t=st=1693908730~exp=1693909330~hmac=37207fca4e2a1c7c9f1e4ab088da7e4352cde834e7331325fbfa59125381b96e);min-height:300px;background-size:cover}.app-info{bottom:0;padding-left:20px}.app-info p{font-size:11px}.my-tab-button{color:var(--ion-color-dark)}.my-tab-button.tab-selected{color:#fff;background-color:var(--ion-color-dark);transition:background-color 2s ease}.title{text-align:center}\n',document.head.appendChild(i);var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o={exports:{}},s={},l={exports:{}},c={},u=Symbol.for("react.element"),d=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function S(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||x}function N(){}function k(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||x}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},N.prototype=S.prototype;var A=k.prototype=new N;A.constructor=k,T(A,S.prototype),A.isPureReactComponent=!0;var _=Array.isArray,O=Object.prototype.hasOwnProperty,R={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,n){var i,r={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)O.call(t,i)&&!P.hasOwnProperty(i)&&(r[i]=t[i]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===r[i]&&(r[i]=s[i]);return{$$typeof:u,type:e,key:a,ref:o,props:r,_owner:R.current}}function $(e){return"object"==typeof e&&null!==e&&e.$$typeof===u}var I=/\/+/g;function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,n,i,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var o=!1;if(null===e)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case u:case d:o=!0}}if(o)return r=r(o=e),e=""===i?"."+D(o,0):i,_(r)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),L(r,t,n,"",(function(e){return e}))):null!=r&&($(r)&&(r=function(e,t){return{$$typeof:u,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(I,"$&/")+"/")+e)),t.push(r)),1;if(o=0,i=""===i?".":i+":",_(e))for(var s=0;s<e.length;s++){var l=i+D(a=e[s],s);o+=L(a,t,n,l,r)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=E&&e[E]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),s=0;!(a=e.next()).done;)o+=L(a=a.value,t,n,l=i+D(a,s++),r);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function j(e,t,n){if(null==e)return e;var i=[],r=0;return L(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function q(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var B={current:null},F={transition:null},z={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:F,ReactCurrentOwner:R};c.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!$(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},c.Component=S,c.Fragment=h,c.Profiler=m,c.PureComponent=k,c.StrictMode=p,c.Suspense=y,c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,c.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=T({},e.props),r=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=R.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)O.call(t,l)&&!P.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];i.children=s}return{$$typeof:u,type:e.type,key:r,ref:a,props:i,_owner:o}},c.createContext=function(e){return(e={$$typeof:g,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},c.createElement=M,c.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},c.createRef=function(){return{current:null}},c.forwardRef=function(e){return{$$typeof:b,render:e}},c.isValidElement=$,c.lazy=function(e){return{$$typeof:w,_payload:{_status:-1,_result:e},_init:q}},c.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},c.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},c.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},c.useCallback=function(e,t){return B.current.useCallback(e,t)},c.useContext=function(e){return B.current.useContext(e)},c.useDebugValue=function(){},c.useDeferredValue=function(e){return B.current.useDeferredValue(e)},c.useEffect=function(e,t){return B.current.useEffect(e,t)},c.useId=function(){return B.current.useId()},c.useImperativeHandle=function(e,t,n){return B.current.useImperativeHandle(e,t,n)},c.useInsertionEffect=function(e,t){return B.current.useInsertionEffect(e,t)},c.useLayoutEffect=function(e,t){return B.current.useLayoutEffect(e,t)},c.useMemo=function(e,t){return B.current.useMemo(e,t)},c.useReducer=function(e,t,n){return B.current.useReducer(e,t,n)},c.useRef=function(e){return B.current.useRef(e)},c.useState=function(e){return B.current.useState(e)},c.useSyncExternalStore=function(e,t,n){return B.current.useSyncExternalStore(e,t,n)},c.useTransition=function(){return B.current.useTransition()},c.version="18.2.0",l.exports=c;var U=l.exports;const V=a(U);
/**
             * @license React
             * react-jsx-runtime.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */var W=U,H=Symbol.for("react.element"),Q=Symbol.for("react.fragment"),K=Object.prototype.hasOwnProperty,G=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};function J(e,t,n){var i,r={},a=null,o=null;for(i in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(o=t.ref),t)K.call(t,i)&&!Y.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===r[i]&&(r[i]=t[i]);return{$$typeof:H,type:e,key:a,ref:o,props:r,_owner:G.current}}s.Fragment=Q,s.jsx=J,s.jsxs=J,o.exports=s;var X=o.exports,Z={exports:{}},ee={},te={exports:{}},ne={};
/**
             * @license React
             * scheduler.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,a=e[i];if(!(0<r(a,t)))break e;e[i]=t,e[n]=a,n=i}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,a=e.length,o=a>>>1;i<o;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>r(l,n))c<a&&0>r(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<a&&0>r(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,f=!1,g="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var r=n(c);null!==r;){if(null===r.callback)i(c);else{if(!(r.startTime<=e))break;i(c),r.sortIndex=r.expirationTime,t(l,r)}r=n(c)}}function w(e){if(f=!1,v(e),!m)if(null!==n(l))m=!0,P(E);else{var t=n(c);null!==t&&M(w,t.startTime-e)}}function E(t,r){m=!1,f&&(f=!1,b(S),S=-1),p=!0;var a=h;try{for(v(r),d=n(l);null!==d&&(!(d.expirationTime>r)||t&&!A());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=r);r=e.unstable_now(),"function"==typeof s?d.callback=s:d===n(l)&&i(l),v(r)}else i(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&M(w,g.startTime-r),u=!1}return u}finally{d=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,T=!1,C=null,S=-1,N=5,k=-1;function A(){return!(e.unstable_now()-k<N)}function _(){if(null!==C){var t=e.unstable_now();k=t;var n=!0;try{n=C(!0,t)}finally{n?x():(T=!1,C=null)}}else T=!1}if("function"==typeof y)x=function(){y(_)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=_,x=function(){R.postMessage(null)}}else x=function(){g(_,0)};function P(e){C=e,T||(T=!0,x())}function M(t,n){S=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,P(E))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(i,r,a){var o=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?o+a:o:a=o,i){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return i={id:u++,callback:r,priorityLevel:i,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(i.sortIndex=a,t(c,i),null===n(l)&&i===n(c)&&(f?(b(S),S=-1):f=!0,M(w,a-o))):(i.sortIndex=s,t(l,i),m||p||(m=!0,P(E))),i},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(ne),te.exports=ne;var ie=te.exports,re=U,ae=ie;
/**
             * @license React
             * react-dom.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var se=new Set,le={};function ce(e,t){ue(e,t),ue(e+"Capture",t)}function ue(e,t){for(le[e]=t,e=0;e<t.length;e++)se.add(t[e])}var de=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),he=Object.prototype.hasOwnProperty,pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,me={},fe={};function ge(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){be[e]=new ge(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];be[t]=new ge(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){be[e]=new ge(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){be[e]=new ge(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){be[e]=new ge(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){be[e]=new ge(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){be[e]=new ge(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){be[e]=new ge(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){be[e]=new ge(e,5,!1,e.toLowerCase(),null,!1,!1)}));var ye=/[\-:]([a-z])/g;function ve(e){return e[1].toUpperCase()}function we(e,t,n,i){var r=be.hasOwnProperty(t)?be[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!he.call(fe,e)||!he.call(me,e)&&(pe.test(e)?fe[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ye,ve);be[t]=new ge(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ye,ve);be[t]=new ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ye,ve);be[t]=new ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){be[e]=new ge(e,1,!1,e.toLowerCase(),null,!1,!1)})),be.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){be[e]=new ge(e,1,!1,e.toLowerCase(),null,!0,!0)}));var Ee=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),Te=Symbol.for("react.portal"),Ce=Symbol.for("react.fragment"),Se=Symbol.for("react.strict_mode"),Ne=Symbol.for("react.profiler"),ke=Symbol.for("react.provider"),Ae=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),Ie=Symbol.iterator;function De(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ie&&e[Ie]||e["@@iterator"])?e:null}var Le,je=Object.assign;function qe(e){if(void 0===Le)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Le=t&&t[1]||""}return"\n"+Le+e}var Be=!1;function Fe(e,t){if(!e||Be)return"";Be=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(ID){var i=ID}Reflect.construct(e,[],t)}else{try{t.call()}catch(ID){i=ID}e.call(t.prototype)}else{try{throw Error()}catch(ID){i=ID}e()}}catch(ID){if(ID&&i&&"string"==typeof ID.stack){for(var r=ID.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{Be=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qe(e):""}function ze(e){switch(e.tag){case 5:return qe(e.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return e=Fe(e.type,!1);case 11:return e=Fe(e.type.render,!1);case 1:return e=Fe(e.type,!0);default:return""}}function Ue(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ce:return"Fragment";case Te:return"Portal";case Ne:return"Profiler";case Se:return"StrictMode";case Oe:return"Suspense";case Re:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ae:return(e.displayName||"Context")+".Consumer";case ke:return(e._context.displayName||"Context")+".Provider";case _e:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Pe:return null!==(t=e.displayName||null)?t:Ue(e.type)||"Memo";case Me:t=e._payload,e=e._init;try{return Ue(e(t))}catch(n){}}return null}function Ve(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(t);case 8:return t===Se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function We(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function He(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Qe(e){e._valueTracker||(e._valueTracker=function(e){var t=He(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=He(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Ge(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(FD){return e.body}}function Ye(e,t){var n=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Je(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=We(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Xe(e,t){null!=(t=t.checked)&&we(e,"checked",t,!1)}function Ze(e,t){Xe(e,t);var n=We(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?tt(e,t.type,n):t.hasOwnProperty("defaultValue")&&tt(e,t.type,We(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function et(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function tt(e,t,n){"number"===t&&Ge(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var nt=Array.isArray;function it(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+We(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function rt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(oe(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function at(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(oe(92));if(nt(n)){if(1<n.length)throw Error(oe(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:We(n)}}function ot(e,t){var n=We(t.value),i=We(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function st(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function lt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?lt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ut,dt=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ut.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ht(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];function ft(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pt.hasOwnProperty(e)&&pt[e]?(""+t).trim():t+"px"}function gt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ft(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pt).forEach((function(e){mt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pt[t]=pt[e]}))}));var bt=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(e,t){if(t){if(bt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(oe(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(oe(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(oe(62))}}function vt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function Et(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xt=null,Tt=null,Ct=null;function St(e){if(e=va(e)){if("function"!=typeof xt)throw Error(oe(280));var t=e.stateNode;t&&(t=Ea(t),xt(e.stateNode,e.type,t))}}function Nt(e){Tt?Ct?Ct.push(e):Ct=[e]:Tt=e}function kt(){if(Tt){var e=Tt,t=Ct;if(Ct=Tt=null,St(e),t)for(e=0;e<t.length;e++)St(t[e])}}function At(e,t){return e(t)}function _t(){}var Ot=!1;function Rt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return At(e,t,n)}finally{Ot=!1,(null!==Tt||null!==Ct)&&(_t(),kt())}}function Pt(e,t){var n=e.stateNode;if(null===n)return null;var i=Ea(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(oe(231,t,typeof n));return n}var Mt=!1;if(de)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch(MD){Mt=!1}function It(e,t,n,i,r,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(qD){this.onError(qD)}}var Dt=!1,Lt=null,jt=!1,qt=null,Bt={onError:function(e){Dt=!0,Lt=e}};function Ft(e,t,n,i,r,a,o,s,l){Dt=!1,Lt=null,It.apply(Bt,arguments)}function zt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ut(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Vt(e){if(zt(e)!==e)throw Error(oe(188))}function Wt(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=zt(e)))throw Error(oe(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Vt(r),e;if(a===i)return Vt(r),t;a=a.sibling}throw Error(oe(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,s=r.child;s;){if(s===n){o=!0,n=r,i=a;break}if(s===i){o=!0,i=r,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,i=r;break}if(s===i){o=!0,i=a,n=r;break}s=s.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==i)throw Error(oe(190))}if(3!==n.tag)throw Error(oe(188));return n.stateNode.current===n?e:t}(e),null!==e?Ht(e):null}function Ht(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ht(e);if(null!==t)return t;e=e.sibling}return null}var Qt=ae.unstable_scheduleCallback,Kt=ae.unstable_cancelCallback,Gt=ae.unstable_shouldYield,Yt=ae.unstable_requestPaint,Jt=ae.unstable_now,Xt=ae.unstable_getCurrentPriorityLevel,Zt=ae.unstable_ImmediatePriority,en=ae.unstable_UserBlockingPriority,tn=ae.unstable_NormalPriority,nn=ae.unstable_LowPriority,rn=ae.unstable_IdlePriority,an=null,on=null;var sn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ln(e)/cn|0)|0},ln=Math.log,cn=Math.LN2;var un=64,dn=4194304;function hn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pn(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=hn(s):0!==(a&=o)&&(i=hn(a))}else 0!==(o=n&~r)?i=hn(o):0!==a&&(i=hn(a));if(0===i)return 0;if(0!==t&&t!==i&&0==(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!=(4194240&a)))return t;if(0!=(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-sn(t)),i|=e[n],t&=~r;return i}function mn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function fn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gn(){var e=un;return 0==(4194240&(un<<=1))&&(un=64),e}function bn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-sn(t)]=n}function vn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-sn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var wn=0;function En(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var xn,Tn,Cn,Sn,Nn,kn=!1,An=[],_n=null,On=null,Rn=null,Pn=new Map,Mn=new Map,$n=[],In="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dn(e,t){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Pn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(t.pointerId)}}function Ln(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=va(t))&&Tn(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jn(e){var t=ya(e.target);if(null!==t){var n=zt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ut(n)))return e.blockedOn=t,void Nn(e.priority,(function(){Cn(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function qn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=va(n))&&Tn(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);wt=i,n.target.dispatchEvent(i),wt=null,t.shift()}return!0}function Bn(e,t,n){qn(e)&&n.delete(t)}function Fn(){kn=!1,null!==_n&&qn(_n)&&(_n=null),null!==On&&qn(On)&&(On=null),null!==Rn&&qn(Rn)&&(Rn=null),Pn.forEach(Bn),Mn.forEach(Bn)}function zn(e,t){e.blockedOn===t&&(e.blockedOn=null,kn||(kn=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,Fn)))}function Un(e){function t(t){return zn(t,e)}if(0<An.length){zn(An[0],e);for(var n=1;n<An.length;n++){var i=An[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==_n&&zn(_n,e),null!==On&&zn(On,e),null!==Rn&&zn(Rn,e),Pn.forEach(t),Mn.forEach(t),n=0;n<$n.length;n++)(i=$n[n]).blockedOn===e&&(i.blockedOn=null);for(;0<$n.length&&null===(n=$n[0]).blockedOn;)jn(n),null===n.blockedOn&&$n.shift()}var Vn=Ee.ReactCurrentBatchConfig,Wn=!0;function Hn(e,t,n,i){var r=wn,a=Vn.transition;Vn.transition=null;try{wn=1,Kn(e,t,n,i)}finally{wn=r,Vn.transition=a}}function Qn(e,t,n,i){var r=wn,a=Vn.transition;Vn.transition=null;try{wn=4,Kn(e,t,n,i)}finally{wn=r,Vn.transition=a}}function Kn(e,t,n,i){if(Wn){var r=Yn(e,t,n,i);if(null===r)Vr(e,t,i,Gn,n),Dn(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return _n=Ln(_n,e,t,n,i,r),!0;case"dragenter":return On=Ln(On,e,t,n,i,r),!0;case"mouseover":return Rn=Ln(Rn,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Pn.set(a,Ln(Pn.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Mn.set(a,Ln(Mn.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dn(e,i),4&t&&-1<In.indexOf(e)){for(;null!==r;){var a=va(r);if(null!==a&&xn(a),null===(a=Yn(e,t,n,i))&&Vr(e,t,i,Gn,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Vr(e,t,i,null,n)}}var Gn=null;function Yn(e,t,n,i){if(Gn=null,null!==(e=ya(e=Et(i))))if(null===(t=zt(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ut(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gn=e,null}function Jn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xt()){case Zt:return 1;case en:return 4;case tn:case nn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Xn=null,Zn=null,ei=null;function ti(){if(ei)return ei;var e,t,n=Zn,i=n.length,r="value"in Xn?Xn.value:Xn.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return ei=r.slice(e,1<t?1-t:void 0)}function ni(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ii(){return!0}function ri(){return!1}function ai(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ii:ri,this.isPropagationStopped=ri,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var oi,si,li,ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ui=ai(ci),di=je({},ci,{view:0,detail:0}),hi=ai(di),pi=je({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==li&&(li&&"mousemove"===e.type?(oi=e.screenX-li.screenX,si=e.screenY-li.screenY):si=oi=0,li=e),oi)},movementY:function(e){return"movementY"in e?e.movementY:si}}),mi=ai(pi),fi=ai(je({},pi,{dataTransfer:0})),gi=ai(je({},di,{relatedTarget:0})),bi=ai(je({},ci,{animationName:0,elapsedTime:0,pseudoElement:0})),yi=je({},ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vi=ai(yi),wi=ai(je({},ci,{data:0})),Ei={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ti={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ci(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ti[e])&&!!t[e]}function Si(){return Ci}var Ni=je({},di,{key:function(e){if(e.key){var t=Ei[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ni(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(e){return"keypress"===e.type?ni(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ni(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ki=ai(Ni),Ai=ai(je({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_i=ai(je({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si})),Oi=ai(je({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ri=je({},pi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pi=ai(Ri),Mi=[9,13,27,32],$i=de&&"CompositionEvent"in window,Ii=null;de&&"documentMode"in document&&(Ii=document.documentMode);var Di=de&&"TextEvent"in window&&!Ii,Li=de&&(!$i||Ii&&8<Ii&&11>=Ii),ji=String.fromCharCode(32),qi=!1;function Bi(e,t){switch(e){case"keyup":return-1!==Mi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fi(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zi=!1;var Ui={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ui[e.type]:"textarea"===t}function Wi(e,t,n,i){Nt(i),0<(t=Hr(t,"onChange")).length&&(n=new ui("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Hi=null,Qi=null;function Ki(e){jr(e,0)}function Gi(e){if(Ke(wa(e)))return e}function Yi(e,t){if("change"===e)return t}var Ji=!1;if(de){var Xi;if(de){var Zi="oninput"in document;if(!Zi){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zi="function"==typeof er.oninput}Xi=Zi}else Xi=!1;Ji=Xi&&(!document.documentMode||9<document.documentMode)}function tr(){Hi&&(Hi.detachEvent("onpropertychange",nr),Qi=Hi=null)}function nr(e){if("value"===e.propertyName&&Gi(Qi)){var t=[];Wi(t,Qi,e,Et(e)),Rt(Ki,t)}}function ir(e,t,n){"focusin"===e?(tr(),Qi=n,(Hi=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gi(Qi)}function ar(e,t){if("click"===e)return Gi(t)}function or(e,t){if("input"===e||"change"===e)return Gi(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!he.call(t,r)||!sr(e[r],t[r]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,i=cr(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=cr(i)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Ge();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Ge((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==i&&pr(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=ur(n,a);var o=ur(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=de&&"documentMode"in document&&11>=document.documentMode,gr=null,br=null,yr=null,vr=!1;function wr(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==Ge(i)||("selectionStart"in(i=gr)&&pr(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yr&&lr(yr,i)||(yr=i,0<(i=Hr(br,"onSelect")).length&&(t=new ui("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Tr={},Cr={};function Sr(e){if(Tr[e])return Tr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Tr[e]=n[t];return e}de&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Nr=Sr("animationend"),kr=Sr("animationiteration"),Ar=Sr("animationstart"),_r=Sr("transitionend"),Or=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Or.set(e,t),ce(t,[e])}for(var Mr=0;Mr<Rr.length;Mr++){var $r=Rr[Mr];Pr($r.toLowerCase(),"on"+($r[0].toUpperCase()+$r.slice(1)))}Pr(Nr,"onAnimationEnd"),Pr(kr,"onAnimationIteration"),Pr(Ar,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(_r,"onTransitionEnd"),ue("onMouseEnter",["mouseout","mouseover"]),ue("onMouseLeave",["mouseout","mouseover"]),ue("onPointerEnter",["pointerout","pointerover"]),ue("onPointerLeave",["pointerout","pointerover"]),ce("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ce("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ce("onBeforeInput",["compositionend","keypress","textInput","paste"]),ce("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Lr(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,s,l){if(Ft.apply(this,arguments),Dt){if(!Dt)throw Error(oe(198));var c=Lt;Dt=!1,Lt=null,jt||(jt=!0,qt=c)}}(i,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;Lr(r,s,c),a=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;Lr(r,s,c),a=l}}}if(jt)throw e=qt,jt=!1,qt=null,e}function qr(e,t){var n=t[fa];void 0===n&&(n=t[fa]=new Set);var i=e+"__bubble";n.has(i)||(Ur(t,e,2,!1),n.add(i))}function Br(e,t,n){var i=0;t&&(i|=4),Ur(n,e,i,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Fr]){e[Fr]=!0,se.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Br("selectionchange",!1,t))}}function Ur(e,t,n,i){switch(Jn(t)){case 1:var r=Hn;break;case 4:r=Qn;break;default:r=Kn}n=r.bind(null,t,n,e),r=void 0,!Mt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Vr(e,t,n,i,r){var a=i;if(0==(1&t)&&0==(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(l=o.tag)||6===l){i=a=o;continue e}s=s.parentNode}}i=i.return}Rt((function(){var i=a,r=Et(n),o=[];e:{var s=Or.get(e);if(void 0!==s){var l=ui,c=e;switch(e){case"keypress":if(0===ni(n))break e;case"keydown":case"keyup":l=ki;break;case"focusin":c="focus",l=gi;break;case"focusout":c="blur",l=gi;break;case"beforeblur":case"afterblur":l=gi;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_i;break;case Nr:case kr:case Ar:l=bi;break;case _r:l=Oi;break;case"scroll":l=hi;break;case"wheel":l=Pi;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ai}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,m=i;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Pt(m,h))&&u.push(Wr(m,f,p)))),d)break;m=m.return}0<u.length&&(s=new l(s,c,null,n,r),o.push({event:s,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===wt||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[ma])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=mi,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ai,f="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?s:wa(l),p=null==c?s:wa(c),(s=new u(f,m+"leave",l,n,r)).target=d,s.relatedTarget=p,f=null,ya(r)===i&&((u=new u(h,m+"enter",c,n,r)).target=p,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,m=0,p=u=l;p;p=Qr(p))m++;for(p=0,f=h;f;f=Qr(f))p++;for(;0<m-p;)u=Qr(u),m--;for(;0<p-m;)h=Qr(h),p--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Qr(u),h=Qr(h)}u=null}else u=null;null!==l&&Kr(o,s,l,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(l=(s=i?wa(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Yi;else if(Vi(s))if(Ji)g=or;else{g=rr;var b=ir}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,i))?Wi(o,g,n,r):(b&&b(e,s,i),"focusout"===e&&(b=s._wrapperState)&&b.controlled&&"number"===s.type&&tt(s,"number",s.value)),b=i?wa(i):window,e){case"focusin":(Vi(b)||"true"===b.contentEditable)&&(gr=b,br=i,yr=null);break;case"focusout":yr=br=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,wr(o,n,r);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":wr(o,n,r)}var y;if($i)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zi?Bi(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Li&&"ko"!==n.locale&&(zi||"onCompositionStart"!==v?"onCompositionEnd"===v&&zi&&(y=ti()):(Zn="value"in(Xn=r)?Xn.value:Xn.textContent,zi=!0)),0<(b=Hr(i,v)).length&&(v=new wi(v,e,null,n,r),o.push({event:v,listeners:b}),y?v.data=y:null!==(y=Fi(n))&&(v.data=y))),(y=Di?function(e,t){switch(e){case"compositionend":return Fi(t);case"keypress":return 32!==t.which?null:(qi=!0,ji);case"textInput":return(e=t.data)===ji&&qi?null:e;default:return null}}(e,n):function(e,t){if(zi)return"compositionend"===e||!$i&&Bi(e,t)?(e=ti(),ei=Zn=Xn=null,zi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Li&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Hr(i,"onBeforeInput")).length&&(r=new wi("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y))}jr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Pt(e,n))&&i.unshift(Wr(e,a,r)),null!=(a=Pt(e,t))&&i.push(Wr(e,a,r))),e=e.return}return i}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Pt(n,a))&&o.unshift(Wr(n,l,s)):r||null!=(l=Pt(n,a))&&o.push(Wr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"==typeof e?e:""+e).replace(Gr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(oe(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ia="function"==typeof setTimeout?setTimeout:void 0,ra="function"==typeof clearTimeout?clearTimeout:void 0,aa="function"==typeof Promise?Promise:void 0,oa="function"==typeof queueMicrotask?queueMicrotask:void 0!==aa?function(e){return aa.resolve(null).then(e).catch(sa)}:ia;function sa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Un(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Un(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,pa="__reactProps$"+da,ma="__reactContainer$"+da,fa="__reactEvents$"+da,ga="__reactListeners$"+da,ba="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function va(e){return!(e=e[ha]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(oe(33))}function Ea(e){return e[pa]||null}var xa=[],Ta=-1;function Ca(e){return{current:e}}function Sa(e){0>Ta||(e.current=xa[Ta],xa[Ta]=null,Ta--)}function Na(e,t){Ta++,xa[Ta]=e.current,e.current=t}var ka={},Aa=Ca(ka),_a=Ca(!1),Oa=ka;function Ra(e,t){var n=e.type.contextTypes;if(!n)return ka;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pa(e){return null!=(e=e.childContextTypes)}function Ma(){Sa(_a),Sa(Aa)}function $a(e,t,n){if(Aa.current!==ka)throw Error(oe(168));Na(Aa,t),Na(_a,n)}function Ia(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(oe(108,Ve(e)||"Unknown",r));return je({},n,i)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ka,Oa=Aa.current,Na(Aa,e),Na(_a,_a.current),!0}function La(e,t,n){var i=e.stateNode;if(!i)throw Error(oe(169));n?(e=Ia(e,t,Oa),i.__reactInternalMemoizedMergedChildContext=e,Sa(_a),Sa(Aa),Na(Aa,e)):Sa(_a),Na(_a,n)}var ja=null,qa=!1,Ba=!1;function Fa(e){null===ja?ja=[e]:ja.push(e)}function za(){if(!Ba&&null!==ja){Ba=!0;var e=0,t=wn;try{var n=ja;for(wn=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}ja=null,qa=!1}catch(RD){throw null!==ja&&(ja=ja.slice(e+1)),Qt(Zt,za),RD}finally{wn=t,Ba=!1}}return null}var Ua=[],Va=0,Wa=null,Ha=0,Qa=[],Ka=0,Ga=null,Ya=1,Ja="";function Xa(e,t){Ua[Va++]=Ha,Ua[Va++]=Wa,Wa=e,Ha=t}function Za(e,t,n){Qa[Ka++]=Ya,Qa[Ka++]=Ja,Qa[Ka++]=Ga,Ga=e;var i=Ya;e=Ja;var r=32-sn(i)-1;i&=~(1<<r),n+=1;var a=32-sn(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ya=1<<32-sn(t)+r|n<<r|i,Ja=a+e}else Ya=1<<a|n<<r|i,Ja=e}function eo(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function to(e){for(;e===Wa;)Wa=Ua[--Va],Ua[Va]=null,Ha=Ua[--Va],Ua[Va]=null;for(;e===Ga;)Ga=Qa[--Ka],Qa[Ka]=null,Ja=Qa[--Ka],Qa[Ka]=null,Ya=Qa[--Ka],Qa[Ka]=null}var no=null,io=null,ro=!1,ao=null;function oo(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ga?{id:Ya,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function co(e){if(ro){var t=io;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(oe(418));t=ca(n.nextSibling);var i=no;t&&so(e,t)?oo(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(oe(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(oe(418));for(;t;)oo(e,t),t=ca(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?ca(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=ca(e.nextSibling)}function mo(){io=no=null,ro=!1}function fo(e){null===ao?ao=[e]:ao.push(e)}var go=Ee.ReactCurrentBatchConfig;function bo(e,t){if(e&&e.defaultProps){for(var n in t=je({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ca(null),vo=null,wo=null,Eo=null;function xo(){Eo=wo=vo=null}function To(e){var t=yo.current;Sa(yo),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function So(e,t){vo=e,Eo=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(wl=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===vo)throw Error(oe(308));wo=e,vo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var ko=null;function Ao(e){null===ko?ko=[e]:ko.push(e)}function _o(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ao(t)):(n.next=r.next,r.next=n),t.interleaved=n,Oo(e,i)}function Oo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ro=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Io(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!=(2&_c)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Oo(e,n)}return null===(r=i.interleaved)?(t.next=t,Ao(i)):(t.next=r.next,r.next=t),i.interleaved=t,Oo(e,n)}function Do(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vn(e,n)}}function Lo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jo(e,t,n,i){var r=e.updateQueue;Ro=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=r.baseState;for(o=0,u=c=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,f=s;switch(h=t,p=n,f.tag){case 1:if("function"==typeof(m=f.payload)){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=f.payload)?m.call(p,d,h):m))break e;d=je({},d,h);break e;case 2:Ro=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(h=s).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Lc|=o,e.lanes=o,e.memoizedState=d}}function qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!=typeof r)throw Error(oe(191,r));r.call(i)}}}var Bo=(new re.Component).refs;function Fo(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:je({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zo={isMounted:function(e){return!!(e=e._reactInternals)&&zt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tu(),r=nu(e),a=$o(i,r);a.payload=t,null!=n&&(a.callback=n),null!==(t=Io(e,a,r))&&(iu(t,e,r,i),Do(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tu(),r=nu(e),a=$o(i,r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=Io(e,a,r))&&(iu(t,e,r,i),Do(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),i=nu(e),r=$o(n,i);r.tag=2,null!=t&&(r.callback=t),null!==(t=Io(e,r,i))&&(iu(t,e,i,n),Do(t,e,i))}};function Uo(e,t,n,i,r,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,i)||!lr(r,a))}function Vo(e,t,n){var i=!1,r=ka,a=t.contextType;return"object"==typeof a&&null!==a?a=No(a):(r=Pa(t)?Oa:Aa.current,a=(i=null!=(i=t.contextTypes))?Ra(e,r):ka),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zo,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wo(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&zo.enqueueReplaceState(t,t.state,null)}function Ho(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Bo,Po(e);var a=t.contextType;"object"==typeof a&&null!==a?r.context=No(a):(a=Pa(t)?Oa:Aa.current,r.context=Ra(e,a)),r.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Fo(e,t,a,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&zo.enqueueReplaceState(r,r.state,null),jo(e,n,r,i),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4194308)}function Qo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(oe(309));var i=n.stateNode}if(!i)throw Error(oe(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===Bo&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(oe(284));if(!n._owner)throw Error(oe(290,e))}return e}function Ko(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Go(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=$u(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,i){return null===t||6!==t.tag?((t=ju(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){var a=n.type;return a===Ce?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===Me&&Go(a)===t.type)?((i=r(t,n.props)).ref=Qo(e,t,n),i.return=e,i):((i=Iu(n.type,n.key,n.props,null,e.mode,i)).ref=Qo(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qu(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,a){return null===t||7!==t.tag?((t=Du(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=ju(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case xe:return(n=Iu(t.type,t.key,t.props,null,e.mode,n)).ref=Qo(e,null,t),n.return=e,n;case Te:return(t=qu(t,e.mode,n)).return=e,t;case Me:return d(e,(0,t._init)(t._payload),n)}if(nt(t)||De(t))return(t=Du(t,e.mode,n,null)).return=e,t;Ko(e,t)}return null}function h(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==r?null:s(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case xe:return n.key===r?l(e,t,n,i):null;case Te:return n.key===r?c(e,t,n,i):null;case Me:return h(e,t,(r=n._init)(n._payload),i)}if(nt(n)||De(n))return null!==r?null:u(e,t,n,i,null);Ko(e,n)}return null}function p(e,t,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i)return s(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case xe:return l(t,e=e.get(null===i.key?n:i.key)||null,i,r);case Te:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case Me:return p(e,t,n,(0,i._init)(i._payload),r)}if(nt(i)||De(i))return u(t,e=e.get(n)||null,i,r,null);Ko(t,i)}return null}function m(r,o,s,l){for(var c=null,u=null,m=o,f=o=0,g=null;null!==m&&f<s.length;f++){m.index>f?(g=m,m=null):g=m.sibling;var b=h(r,m,s[f],l);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(r,m),o=a(b,o,f),null===u?c=b:u.sibling=b,u=b,m=g}if(f===s.length)return n(r,m),ro&&Xa(r,f),c;if(null===m){for(;f<s.length;f++)null!==(m=d(r,s[f],l))&&(o=a(m,o,f),null===u?c=m:u.sibling=m,u=m);return ro&&Xa(r,f),c}for(m=i(r,m);f<s.length;f++)null!==(g=p(m,r,f,s[f],l))&&(e&&null!==g.alternate&&m.delete(null===g.key?f:g.key),o=a(g,o,f),null===u?c=g:u.sibling=g,u=g);return e&&m.forEach((function(e){return t(r,e)})),ro&&Xa(r,f),c}function f(r,o,s,l){var c=De(s);if("function"!=typeof c)throw Error(oe(150));if(null==(s=c.call(s)))throw Error(oe(151));for(var u=c=null,m=o,f=o=0,g=null,b=s.next();null!==m&&!b.done;f++,b=s.next()){m.index>f?(g=m,m=null):g=m.sibling;var y=h(r,m,b.value,l);if(null===y){null===m&&(m=g);break}e&&m&&null===y.alternate&&t(r,m),o=a(y,o,f),null===u?c=y:u.sibling=y,u=y,m=g}if(b.done)return n(r,m),ro&&Xa(r,f),c;if(null===m){for(;!b.done;f++,b=s.next())null!==(b=d(r,b.value,l))&&(o=a(b,o,f),null===u?c=b:u.sibling=b,u=b);return ro&&Xa(r,f),c}for(m=i(r,m);!b.done;f++,b=s.next())null!==(b=p(m,r,f,b.value,l))&&(e&&null!==b.alternate&&m.delete(null===b.key?f:b.key),o=a(b,o,f),null===u?c=b:u.sibling=b,u=b);return e&&m.forEach((function(e){return t(r,e)})),ro&&Xa(r,f),c}return function e(i,a,s,l){if("object"==typeof s&&null!==s&&s.type===Ce&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case xe:e:{for(var c=s.key,u=a;null!==u;){if(u.key===c){if((c=s.type)===Ce){if(7===u.tag){n(i,u.sibling),(a=r(u,s.props.children)).return=i,i=a;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===Me&&Go(c)===u.type){n(i,u.sibling),(a=r(u,s.props)).ref=Qo(i,u,s),a.return=i,i=a;break e}n(i,u);break}t(i,u),u=u.sibling}s.type===Ce?((a=Du(s.props.children,i.mode,l,s.key)).return=i,i=a):((l=Iu(s.type,s.key,s.props,null,i.mode,l)).ref=Qo(i,a,s),l.return=i,i=l)}return o(i);case Te:e:{for(u=s.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(i,a.sibling),(a=r(a,s.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=qu(s,i.mode,l)).return=i,i=a}return o(i);case Me:return e(i,a,(u=s._init)(s._payload),l)}if(nt(s))return m(i,a,s,l);if(De(s))return f(i,a,s,l);Ko(i,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,s)).return=i,i=a):(n(i,a),(a=ju(s,i.mode,l)).return=i,i=a),o(i)):n(i,a)}}var Jo=Yo(!0),Xo=Yo(!1),Zo={},es=Ca(Zo),ts=Ca(Zo),ns=Ca(Zo);function is(e){if(e===Zo)throw Error(oe(174));return e}function rs(e,t){switch(Na(ns,t),Na(ts,e),Na(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ct(null,"");break;default:t=ct(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(es),Na(es,t)}function as(){Sa(es),Sa(ts),Sa(ns)}function os(e){is(ns.current);var t=is(es.current),n=ct(t,e.type);t!==n&&(Na(ts,e),Na(es,n))}function ss(e){ts.current===e&&(Sa(es),Sa(ts))}var ls=Ca(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function ds(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var hs=Ee.ReactCurrentDispatcher,ps=Ee.ReactCurrentBatchConfig,ms=0,fs=null,gs=null,bs=null,ys=!1,vs=!1,ws=0,Es=0;function xs(){throw Error(oe(321))}function Ts(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Cs(e,t,n,i,r,a){if(ms=a,fs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?sl:ll,e=n(i,r),vs){a=0;do{if(vs=!1,ws=0,25<=a)throw Error(oe(301));a+=1,bs=gs=null,t.updateQueue=null,hs.current=cl,e=n(i,r)}while(vs)}if(hs.current=ol,t=null!==gs&&null!==gs.next,ms=0,bs=gs=fs=null,ys=!1,t)throw Error(oe(300));return e}function Ss(){var e=0!==ws;return ws=0,e}function Ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bs?fs.memoizedState=bs=e:bs=bs.next=e,bs}function ks(){if(null===gs){var e=fs.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===bs?fs.memoizedState:bs.next;if(null!==t)bs=t,gs=e;else{if(null===e)throw Error(oe(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===bs?fs.memoizedState=bs=e:bs=bs.next=e}return bs}function As(e,t){return"function"==typeof t?t(e):t}function _s(e){var t=ks(),n=t.queue;if(null===n)throw Error(oe(311));n.lastRenderedReducer=e;var i=gs,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var s=o=null,l=null,c=a;do{var u=c.lane;if((ms&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=d,o=i):l=l.next=d,fs.lanes|=u,Lc|=u}c=c.next}while(null!==c&&c!==a);null===l?o=i:l.next=s,sr(i,t.memoizedState)||(wl=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,fs.lanes|=a,Lc|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Os(e){var t=ks(),n=t.queue;if(null===n)throw Error(oe(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);sr(a,t.memoizedState)||(wl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Rs(){}function Ps(e,t){var n=fs,i=ks(),r=t(),a=!sr(i.memoizedState,r);if(a&&(i.memoizedState=r,wl=!0),i=i.queue,Vs(Is.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==bs&&1&bs.memoizedState.tag){if(n.flags|=2048,qs(9,$s.bind(null,n,i,r,t),void 0,null),null===Oc)throw Error(oe(349));0!=(30&ms)||Ms(n,t,r)}return r}function Ms(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=fs.updateQueue)?(t={lastEffect:null,stores:null},fs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function $s(e,t,n,i){t.value=n,t.getSnapshot=i,Ds(t)&&Ls(e)}function Is(e,t,n){return n((function(){Ds(t)&&Ls(e)}))}function Ds(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(i){return!0}}function Ls(e){var t=Oo(e,1);null!==t&&iu(t,e,1,-1)}function js(e){var t=Ns();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=nl.bind(null,fs,e),[t.memoizedState,e]}function qs(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=fs.updateQueue)?(t={lastEffect:null,stores:null},fs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Bs(){return ks().memoizedState}function Fs(e,t,n,i){var r=Ns();fs.flags|=e,r.memoizedState=qs(1|t,n,void 0,void 0===i?null:i)}function zs(e,t,n,i){var r=ks();i=void 0===i?null:i;var a=void 0;if(null!==gs){var o=gs.memoizedState;if(a=o.destroy,null!==i&&Ts(i,o.deps))return void(r.memoizedState=qs(t,n,a,i))}fs.flags|=e,r.memoizedState=qs(1|t,n,a,i)}function Us(e,t){return Fs(8390656,8,e,t)}function Vs(e,t){return zs(2048,8,e,t)}function Ws(e,t){return zs(4,2,e,t)}function Hs(e,t){return zs(4,4,e,t)}function Qs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ks(e,t,n){return n=null!=n?n.concat([e]):null,zs(4,4,Qs.bind(null,t,e),n)}function Gs(){}function Ys(e,t){var n=ks();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ts(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=ks();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ts(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 0==(21&ms)?(e.baseState&&(e.baseState=!1,wl=!0),e.memoizedState=n):(sr(n,t)||(n=gn(),fs.lanes|=n,Lc|=n,e.baseState=!0),t)}function Zs(e,t){var n=wn;wn=0!==n&&4>n?n:4,e(!0);var i=ps.transition;ps.transition={};try{e(!1),t()}finally{wn=n,ps.transition=i}}function el(){return ks().memoizedState}function tl(e,t,n){var i=nu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},il(e))rl(t,n);else if(null!==(n=_o(e,t,n,i))){iu(n,e,i,tu()),al(n,t,i)}}function nl(e,t,n){var i=nu(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(il(e))rl(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(r.next=r,Ao(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(ID){}null!==(n=_o(e,t,r,i))&&(iu(n,e,i,r=tu()),al(n,t,i))}}function il(e){var t=e.alternate;return e===fs||null!==t&&t===fs}function rl(e,t){vs=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function al(e,t,n){if(0!=(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vn(e,n)}}var ol={readContext:No,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},sl={readContext:No,useCallback:function(e,t){return Ns().memoizedState=[e,void 0===t?null:t],e},useContext:No,useEffect:Us,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Fs(4194308,4,Qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fs(4,2,e,t)},useMemo:function(e,t){var n=Ns();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ns();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=tl.bind(null,fs,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ns().memoizedState=e},useState:js,useDebugValue:Gs,useDeferredValue:function(e){return Ns().memoizedState=e},useTransition:function(){var e=js(!1),t=e[0];return e=Zs.bind(null,e[1]),Ns().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=fs,r=Ns();if(ro){if(void 0===n)throw Error(oe(407));n=n()}else{if(n=t(),null===Oc)throw Error(oe(349));0!=(30&ms)||Ms(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Us(Is.bind(null,i,a,e),[e]),i.flags|=2048,qs(9,$s.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Ns(),t=Oc.identifierPrefix;if(ro){var n=Ja;t=":"+t+"R"+(n=(Ya&~(1<<32-sn(Ya)-1)).toString(32)+n),0<(n=ws++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Es++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ll={readContext:No,useCallback:Ys,useContext:No,useEffect:Vs,useImperativeHandle:Ks,useInsertionEffect:Ws,useLayoutEffect:Hs,useMemo:Js,useReducer:_s,useRef:Bs,useState:function(){return _s(As)},useDebugValue:Gs,useDeferredValue:function(e){return Xs(ks(),gs.memoizedState,e)},useTransition:function(){return[_s(As)[0],ks().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Ps,useId:el,unstable_isNewReconciler:!1},cl={readContext:No,useCallback:Ys,useContext:No,useEffect:Vs,useImperativeHandle:Ks,useInsertionEffect:Ws,useLayoutEffect:Hs,useMemo:Js,useReducer:Os,useRef:Bs,useState:function(){return Os(As)},useDebugValue:Gs,useDeferredValue:function(e){var t=ks();return null===gs?t.memoizedState=e:Xs(t,gs.memoizedState,e)},useTransition:function(){return[Os(As)[0],ks().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Ps,useId:el,unstable_isNewReconciler:!1};function ul(e,t){try{var n="",i=t;do{n+=ze(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pl="function"==typeof WeakMap?WeakMap:Map;function ml(e,t,n){(n=$o(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wc||(Wc=!0,Hc=i),hl(0,t)},n}function fl(e,t,n){(n=$o(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){hl(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){hl(0,t),"function"!=typeof i&&(null===Qc?Qc=new Set([this]):Qc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gl(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new pl;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function bl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yl(e,t,n,i,r){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$o(-1,1)).tag=2,Io(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vl=Ee.ReactCurrentOwner,wl=!1;function El(e,t,n,i){t.child=null===e?Xo(t,null,n,i):Jo(t,e.child,n,i)}function xl(e,t,n,i,r){n=n.render;var a=t.ref;return So(t,r),i=Cs(e,t,n,i,a,r),n=Ss(),null===e||wl?(ro&&n&&eo(t),t.flags|=1,El(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wl(e,t,r))}function Tl(e,t,n,i,r){if(null===e){var a=n.type;return"function"!=typeof a||Mu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Iu(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Cl(e,t,a,i,r))}if(a=e.child,0==(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,i)&&e.ref===t.ref)return Wl(e,t,r)}return t.flags|=1,(e=$u(a,i)).ref=t.ref,e.return=t,t.child=e}function Cl(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(lr(a,i)&&e.ref===t.ref){if(wl=!1,t.pendingProps=i=a,0==(e.lanes&r))return t.lanes=e.lanes,Wl(e,t,r);0!=(131072&e.flags)&&(wl=!0)}}return kl(e,t,n,i,r)}function Sl(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na($c,Mc),Mc|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na($c,Mc),Mc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,Na($c,Mc),Mc|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,Na($c,Mc),Mc|=i;return El(e,t,r,n),t.child}function Nl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kl(e,t,n,i,r){var a=Pa(n)?Oa:Aa.current;return a=Ra(t,a),So(t,r),n=Cs(e,t,n,i,a,r),i=Ss(),null===e||wl?(ro&&i&&eo(t),t.flags|=1,El(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wl(e,t,r))}function Al(e,t,n,i,r){if(Pa(n)){var a=!0;Da(t)}else a=!1;if(So(t,r),null===t.stateNode)Vl(e,t),Vo(t,n,i),Ho(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=No(c):c=Ra(t,c=Pa(n)?Oa:Aa.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||l!==c)&&Wo(t,o,i,c),Ro=!1;var h=t.memoizedState;o.state=h,jo(t,i,o,r),l=t.memoizedState,s!==i||h!==l||_a.current||Ro?("function"==typeof u&&(Fo(t,n,u,i),l=t.memoizedState),(s=Ro||Uo(t,n,s,i,h,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Mo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:bo(t.type,s),o.props=c,d=t.pendingProps,h=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=No(l):l=Ra(t,l=Pa(n)?Oa:Aa.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Wo(t,o,i,l),Ro=!1,h=t.memoizedState,o.state=h,jo(t,i,o,r);var m=t.memoizedState;s!==d||h!==m||_a.current||Ro?("function"==typeof p&&(Fo(t,n,p,i),m=t.memoizedState),(c=Ro||Uo(t,n,c,i,h,m,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,m,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,m,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return _l(e,t,n,i,a,r)}function _l(e,t,n,i,r,a){Nl(e,t);var o=0!=(128&t.flags);if(!i&&!o)return r&&La(t,n,!1),Wl(e,t,a);i=t.stateNode,vl.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Jo(t,e.child,null,a),t.child=Jo(t,null,s,a)):El(e,t,s,a),t.memoizedState=i.state,r&&La(t,n,!0),t.child}function Ol(e){var t=e.stateNode;t.pendingContext?$a(0,t.pendingContext,t.pendingContext!==t.context):t.context&&$a(0,t.context,!1),rs(e,t.containerInfo)}function Rl(e,t,n,i,r){return mo(),fo(r),t.flags|=256,El(e,t,n,i),t.child}var Pl,Ml,$l,Il,Dl={dehydrated:null,treeContext:null,retryLane:0};function Ll(e){return{baseLanes:e,cachePool:null,transitions:null}}function jl(e,t,n){var i,r=t.pendingProps,a=ls.current,o=!1,s=0!=(128&t.flags);if((i=s)||(i=(null===e||null!==e.memoizedState)&&0!=(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Na(ls,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},0==(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=s):o=Lu(s,r,0,null),e=Du(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ll(n),t.memoizedState=Dl,e):ql(t,s));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,Bl(e,t,o,i=dl(Error(oe(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Lu({mode:"visible",children:i.children},r,0,null),(a=Du(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!=(1&t.mode)&&Jo(t,e.child,null,o),t.child.memoizedState=Ll(o),t.memoizedState=Dl,a);if(0==(1&t.mode))return Bl(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var s=i.dgst;return i=s,Bl(e,t,o,i=dl(a=Error(oe(419)),i,void 0))}if(s=0!=(o&e.childLanes),wl||s){if(null!==(i=Oc)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!=(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Oo(e,r),iu(i,e,r,-1))}return gu(),Bl(e,t,o,i=dl(Error(oe(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Au.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,io=ca(r.nextSibling),no=t,ro=!0,ao=null,null!==e&&(Qa[Ka++]=Ya,Qa[Ka++]=Ja,Qa[Ka++]=Ga,Ya=e.id,Ja=e.overflow,Ga=t),t=ql(t,i.children),t.flags|=4096,t)}(e,t,s,r,i,a,n);if(o){o=r.fallback,s=t.mode,i=(a=e.child).sibling;var l={mode:"hidden",children:r.children};return 0==(1&s)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=l,t.deletions=null):(r=$u(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=$u(i,o):(o=Du(o,s,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=null===(s=e.child.memoizedState)?Ll(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=Dl,r}return e=(o=e.child).sibling,r=$u(o,{mode:"visible",children:r.children}),0==(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ql(e,t){return(t=Lu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bl(e,t,n,i){return null!==i&&fo(i),Jo(t,e.child,null,n),(e=ql(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fl(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Co(e.return,t,n)}function zl(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Ul(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(El(e,t,i.children,n),0!=(2&(i=ls.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fl(e,n,t);else if(19===e.tag)Fl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Na(ls,i),0==(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),zl(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===cs(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}zl(t,!0,n,null,a);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vl(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lc|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(oe(153));if(null!==t.child){for(n=$u(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$u(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hl(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Kl(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ql(t),null;case 1:case 17:return Pa(t.type)&&Ma(),Ql(t),null;case 3:return i=t.stateNode,as(),Sa(_a),Sa(Aa),ds(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ao&&(su(ao),ao=null))),Ml(e,t),Ql(t),null;case 5:ss(t);var r=is(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)$l(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(oe(166));return Ql(t),null}if(e=is(es.current),ho(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[ha]=t,i[pa]=a,e=0!=(1&t.mode),n){case"dialog":qr("cancel",i),qr("close",i);break;case"iframe":case"object":case"embed":qr("load",i);break;case"video":case"audio":for(r=0;r<Ir.length;r++)qr(Ir[r],i);break;case"source":qr("error",i);break;case"img":case"image":case"link":qr("error",i),qr("load",i);break;case"details":qr("toggle",i);break;case"input":Je(i,a),qr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},qr("invalid",i);break;case"textarea":at(i,a),qr("invalid",i)}for(var o in yt(n,a),r=null,a)if(a.hasOwnProperty(o)){var s=a[o];"children"===o?"string"==typeof s?i.textContent!==s&&(!0!==a.suppressHydrationWarning&&Xr(i.textContent,s,e),r=["children",s]):"number"==typeof s&&i.textContent!==""+s&&(!0!==a.suppressHydrationWarning&&Xr(i.textContent,s,e),r=["children",""+s]):le.hasOwnProperty(o)&&null!=s&&"onScroll"===o&&qr("scroll",i)}switch(n){case"input":Qe(i),et(i,a,!0);break;case"textarea":Qe(i),st(i);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(i.onclick=Zr)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{o=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=lt(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=o.createElement(n,{is:i.is}):(e=o.createElement(n),"select"===n&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,n),e[ha]=t,e[pa]=i,Pl(e,t,!1,!1),t.stateNode=e;e:{switch(o=vt(n,i),n){case"dialog":qr("cancel",e),qr("close",e),r=i;break;case"iframe":case"object":case"embed":qr("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ir.length;r++)qr(Ir[r],e);r=i;break;case"source":qr("error",e),r=i;break;case"img":case"image":case"link":qr("error",e),qr("load",e),r=i;break;case"details":qr("toggle",e),r=i;break;case"input":Je(e,i),r=Ye(e,i),qr("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=je({},i,{value:void 0}),qr("invalid",e);break;case"textarea":at(e,i),r=rt(e,i),qr("invalid",e)}for(a in yt(n,r),s=r)if(s.hasOwnProperty(a)){var l=s[a];"style"===a?gt(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&dt(e,l):"children"===a?"string"==typeof l?("textarea"!==n||""!==l)&&ht(e,l):"number"==typeof l&&ht(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(le.hasOwnProperty(a)?null!=l&&"onScroll"===a&&qr("scroll",e):null!=l&&we(e,a,l,o))}switch(n){case"input":Qe(e),et(e,i,!1);break;case"textarea":Qe(e),st(e);break;case"option":null!=i.value&&e.setAttribute("value",""+We(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?it(e,!!i.multiple,a,!1):null!=i.defaultValue&&it(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof r.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ql(t),null;case 6:if(e&&null!=t.stateNode)Il(e,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(oe(166));if(n=is(ns.current),is(es.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[ha]=t,(a=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(i.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(i.nodeValue,n,0!=(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[ha]=t,t.stateNode=i}return Ql(t),null;case 13:if(Sa(ls),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!=(1&t.mode)&&0==(128&t.flags))po(),mo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(oe(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(oe(317));a[ha]=t}else mo(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ql(t),a=!1}else null!==ao&&(su(ao),ao=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ls.current)?0===Ic&&(Ic=3):gu())),null!==t.updateQueue&&(t.flags|=4),Ql(t),null);case 4:return as(),Ml(e,t),null===e&&zr(t.stateNode.containerInfo),Ql(t),null;case 10:return To(t.type._context),Ql(t),null;case 19:if(Sa(ls),null===(a=t.memoizedState))return Ql(t),null;if(i=0!=(128&t.flags),null===(o=a.rendering))if(i)Hl(a,!1);else{if(0!==Ic||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=cs(e))){for(t.flags|=128,Hl(a,!1),null!==(i=o.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(o=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Na(ls,1&ls.current|2),t.child}e=e.sibling}null!==a.tail&&Jt()>Uc&&(t.flags|=128,i=!0,Hl(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=cs(o))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!ro)return Ql(t),null}else 2*Jt()-a.renderingStartTime>Uc&&1073741824!==n&&(t.flags|=128,i=!0,Hl(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=a.last)?n.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Jt(),t.sibling=null,n=ls.current,Na(ls,i?1&n|2:1&n),t):(Ql(t),null);case 22:case 23:return hu(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!=(1&t.mode)?0!=(1073741824&Mc)&&(Ql(t),6&t.subtreeFlags&&(t.flags|=8192)):Ql(t),null;case 24:case 25:return null}throw Error(oe(156,t.tag))}function Gl(e,t){switch(to(t),t.tag){case 1:return Pa(t.type)&&Ma(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return as(),Sa(_a),Sa(Aa),ds(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ss(t),null;case 13:if(Sa(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(oe(340));mo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(ls),null;case 4:return as(),null;case 10:return To(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Pl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ml=function(){},$l=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,is(es.current);var a,o=null;switch(n){case"input":r=Ye(e,r),i=Ye(e,i),o=[];break;case"select":r=je({},r,{value:void 0}),i=je({},i,{value:void 0}),o=[];break;case"textarea":r=rt(e,r),i=rt(e,i),o=[];break;default:"function"!=typeof r.onClick&&"function"==typeof i.onClick&&(e.onclick=Zr)}for(c in yt(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var s=r[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(le.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(s=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(le.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&qr("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Il=function(e,t,n,i){n!==i&&(t.flags|=4)};var Yl=!1,Jl=!1,Xl="function"==typeof WeakSet?WeakSet:Set,Zl=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(i){Su(e,t,i)}else n.current=null}function tc(e,t,n){try{n()}catch(i){Su(e,t,i)}}var nc=!1;function ic(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&tc(t,n,a)}r=r.next}while(r!==i)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ac(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[fa],delete t[ga],delete t[ba])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function lc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==i&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function uc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var dc=null,hc=!1;function pc(e,t,n){for(n=n.child;null!==n;)mc(e,t,n),n=n.sibling}function mc(e,t,n){if(on&&"function"==typeof on.onCommitFiberUnmount)try{on.onCommitFiberUnmount(an,n)}catch(s){}switch(n.tag){case 5:Jl||ec(n,t);case 6:var i=dc,r=hc;dc=null,pc(e,t,n),hc=r,null!==(dc=i)&&(hc?(e=dc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dc.removeChild(n.stateNode));break;case 18:null!==dc&&(hc?(e=dc,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Un(e)):la(dc,n.stateNode));break;case 4:i=dc,r=hc,dc=n.stateNode.containerInfo,hc=!0,pc(e,t,n),dc=i,hc=r;break;case 0:case 11:case 14:case 15:if(!Jl&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!=(2&a)||0!=(4&a))&&tc(n,t,o),r=r.next}while(r!==i)}pc(e,t,n);break;case 1:if(!Jl&&(ec(n,t),"function"==typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Su(n,t,s)}pc(e,t,n);break;case 21:pc(e,t,n);break;case 22:1&n.mode?(Jl=(i=Jl)||null!==n.memoizedState,pc(e,t,n),Jl=i):pc(e,t,n);break;default:pc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xl),t.forEach((function(t){var i=_u.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,s=o;e:for(;null!==s;){switch(s.tag){case 5:dc=s.stateNode,hc=!1;break e;case 3:case 4:dc=s.stateNode.containerInfo,hc=!0;break e}s=s.return}if(null===dc)throw Error(oe(160));mc(a,o,r),dc=null,hc=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(ID){Su(r,t,ID)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bc(t,e),t=t.sibling}function bc(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),yc(e),4&i){try{ic(3,e,e.return),rc(3,e)}catch(PD){Su(e,e.return,PD)}try{ic(5,e,e.return)}catch(PD){Su(e,e.return,PD)}}break;case 1:gc(t,e),yc(e),512&i&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),yc(e),512&i&&null!==n&&ec(n,n.return),32&e.flags){var r=e.stateNode;try{ht(r,"")}catch(PD){Su(e,e.return,PD)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===a.type&&null!=a.name&&Xe(r,a),vt(s,o);var c=vt(s,a);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];"style"===u?gt(r,d):"dangerouslySetInnerHTML"===u?dt(r,d):"children"===u?ht(r,d):we(r,u,d,c)}switch(s){case"input":Ze(r,a);break;case"textarea":ot(r,a);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?it(r,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?it(r,!!a.multiple,a.defaultValue,!0):it(r,!!a.multiple,a.multiple?[]:"",!1))}r[pa]=a}catch(PD){Su(e,e.return,PD)}}break;case 6:if(gc(t,e),yc(e),4&i){if(null===e.stateNode)throw Error(oe(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(PD){Su(e,e.return,PD)}}break;case 3:if(gc(t,e),yc(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Un(t.containerInfo)}catch(PD){Su(e,e.return,PD)}break;case 4:default:gc(t,e),yc(e);break;case 13:gc(t,e),yc(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(zc=Jt())),4&i&&fc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Jl=(c=Jl)||u,gc(t,e),Jl=c):gc(t,e),yc(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!=(1&e.mode))for(Zl=e,u=e.child;null!==u;){for(d=Zl=u;null!==Zl;){switch(p=(h=Zl).child,h.tag){case 0:case 11:case 14:case 15:ic(4,h,h.return);break;case 1:ec(h,h.return);var m=h.stateNode;if("function"==typeof m.componentWillUnmount){i=h,n=h.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(PD){Su(i,n,PD)}}break;case 5:ec(h,h.return);break;case 22:if(null!==h.memoizedState){xc(d);continue}}null!==p?(p.return=h,Zl=p):xc(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{r=d.stateNode,c?"function"==typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(s=d.stateNode,o=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,s.style.display=ft("display",o))}catch(PD){Su(e,e.return,PD)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(PD){Su(e,e.return,PD)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),yc(e),4&i&&fc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var i=n;break e}n=n.return}throw Error(oe(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(ht(r,""),i.flags&=-33),uc(e,lc(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;cc(e,lc(e),a);break;default:throw Error(oe(161))}}catch(zD){Su(e,e.return,zD)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,n){Zl=e,wc(e)}function wc(e,t,n){for(var i=0!=(1&e.mode);null!==Zl;){var r=Zl,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Yl;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Jl;s=Yl;var c=Jl;if(Yl=o,(Jl=l)&&!c)for(Zl=r;null!==Zl;)l=(o=Zl).child,22===o.tag&&null!==o.memoizedState?Tc(r):null!==l?(l.return=o,Zl=l):Tc(r);for(;null!==a;)Zl=a,wc(a),a=a.sibling;Zl=r,Yl=s,Jl=c}Ec(e)}else 0!=(8772&r.subtreeFlags)&&null!==a?(a.return=r,Zl=a):Ec(e)}}function Ec(e){for(;null!==Zl;){var t=Zl;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jl||rc(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Jl)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:bo(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qo(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qo(t,o,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Un(d)}}}break;default:throw Error(oe(163))}Jl||512&t.flags&&ac(t)}catch(IT){Su(t,t.return,IT)}}if(t===e){Zl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zl=n;break}Zl=t.return}}function xc(e){for(;null!==Zl;){var t=Zl;if(t===e){Zl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zl=n;break}Zl=t.return}}function Tc(e){for(;null!==Zl;){var t=Zl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(zD){Su(t,n,zD)}break;case 1:var i=t.stateNode;if("function"==typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(zD){Su(t,r,zD)}}var a=t.return;try{ac(t)}catch(zD){Su(t,a,zD)}break;case 5:var o=t.return;try{ac(t)}catch(zD){Su(t,o,zD)}}}catch(zD){Su(t,t.return,zD)}if(t===e){Zl=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zl=s;break}Zl=t.return}}var Cc,Sc=Math.ceil,Nc=Ee.ReactCurrentDispatcher,kc=Ee.ReactCurrentOwner,Ac=Ee.ReactCurrentBatchConfig,_c=0,Oc=null,Rc=null,Pc=0,Mc=0,$c=Ca(0),Ic=0,Dc=null,Lc=0,jc=0,qc=0,Bc=null,Fc=null,zc=0,Uc=1/0,Vc=null,Wc=!1,Hc=null,Qc=null,Kc=!1,Gc=null,Yc=0,Jc=0,Xc=null,Zc=-1,eu=0;function tu(){return 0!=(6&_c)?Jt():-1!==Zc?Zc:Zc=Jt()}function nu(e){return 0==(1&e.mode)?1:0!=(2&_c)&&0!==Pc?Pc&-Pc:null!==go.transition?(0===eu&&(eu=gn()),eu):0!==(e=wn)?e:e=void 0===(e=window.event)?16:Jn(e.type)}function iu(e,t,n,i){if(50<Jc)throw Jc=0,Xc=null,Error(oe(185));yn(e,n,i),0!=(2&_c)&&e===Oc||(e===Oc&&(0==(2&_c)&&(jc|=n),4===Ic&&lu(e,Pc)),ru(e,i),1===n&&0===_c&&0==(1&t.mode)&&(Uc=Jt()+500,qa&&za()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-sn(a),s=1<<o,l=r[o];-1===l?0!=(s&n)&&0==(s&i)||(r[o]=mn(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var i=pn(e,e===Oc?Pc:0);if(0===i)null!==n&&Kt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Kt(n),1===t)0===e.tag?function(e){qa=!0,Fa(e)}(cu.bind(null,e)):Fa(cu.bind(null,e)),oa((function(){0==(6&_c)&&za()})),n=null;else{switch(En(i)){case 1:n=Zt;break;case 4:n=en;break;case 16:default:n=tn;break;case 536870912:n=rn}n=Ou(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(Zc=-1,eu=0,0!=(6&_c))throw Error(oe(327));var n=e.callbackNode;if(Tu()&&e.callbackNode!==n)return null;var i=pn(e,e===Oc?Pc:0);if(0===i)return null;if(0!=(30&i)||0!=(i&e.expiredLanes)||t)t=bu(e,i);else{t=i;var r=_c;_c|=2;var a=fu();for(Oc===e&&Pc===t||(Vc=null,Uc=Jt()+500,pu(e,t));;)try{vu();break}catch(s){mu(e,s)}xo(),Nc.current=a,_c=r,null!==Rc?t=0:(Oc=null,Pc=0,t=Ic)}if(0!==t){if(2===t&&(0!==(r=fn(e))&&(i=r,t=ou(e,r))),1===t)throw n=Dc,pu(e,0),lu(e,i),ru(e,Jt()),n;if(6===t)lu(e,i);else{if(r=e.current.alternate,0==(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!sr(a(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=bu(e,i))&&(0!==(a=fn(e))&&(i=a,t=ou(e,a))),1===t))throw n=Dc,pu(e,0),lu(e,i),ru(e,Jt()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(oe(345));case 2:case 5:xu(e,Fc,Vc);break;case 3:if(lu(e,i),(130023424&i)===i&&10<(t=zc+500-Jt())){if(0!==pn(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tu(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ia(xu.bind(null,e,Fc,Vc),t);break}xu(e,Fc,Vc);break;case 4:if(lu(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-sn(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Jt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sc(i/1960))-i)){e.timeoutHandle=ia(xu.bind(null,e,Fc,Vc),i);break}xu(e,Fc,Vc);break;default:throw Error(oe(329))}}}return ru(e,Jt()),e.callbackNode===n?au.bind(null,e):null}function ou(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=bu(e,t))&&(t=Fc,Fc=n,null!==t&&su(t)),e}function su(e){null===Fc?Fc=e:Fc.push.apply(Fc,e)}function lu(e,t){for(t&=~qc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),i=1<<n;e[n]=-1,t&=~i}}function cu(e){if(0!=(6&_c))throw Error(oe(327));Tu();var t=pn(e,0);if(0==(1&t))return ru(e,Jt()),null;var n=bu(e,t);if(0!==e.tag&&2===n){var i=fn(e);0!==i&&(t=i,n=ou(e,i))}if(1===n)throw n=Dc,pu(e,0),lu(e,t),ru(e,Jt()),n;if(6===n)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,Fc,Vc),ru(e,Jt()),null}function uu(e,t){var n=_c;_c|=1;try{return e(t)}finally{0===(_c=n)&&(Uc=Jt()+500,qa&&za())}}function du(e){null!==Gc&&0===Gc.tag&&0==(6&_c)&&Tu();var t=_c;_c|=1;var n=Ac.transition,i=wn;try{if(Ac.transition=null,wn=1,e)return e()}finally{wn=i,Ac.transition=n,0==(6&(_c=t))&&za()}}function hu(){Mc=$c.current,Sa($c)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ra(n)),null!==Rc)for(n=Rc.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&Ma();break;case 3:as(),Sa(_a),Sa(Aa),ds();break;case 5:ss(i);break;case 4:as();break;case 13:case 19:Sa(ls);break;case 10:To(i.type._context);break;case 22:case 23:hu()}n=n.return}if(Oc=e,Rc=e=$u(e.current,null),Pc=Mc=t,Ic=0,Dc=null,qc=jc=Lc=0,Fc=Bc=null,null!==ko){for(t=0;t<ko.length;t++)if(null!==(i=(n=ko[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}ko=null}return e}function mu(e,t){for(;;){var n=Rc;try{if(xo(),hs.current=ol,ys){for(var i=fs.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ys=!1}if(ms=0,bs=gs=fs=null,vs=!1,ws=0,kc.current=null,null===n||null===n.return){Ic=1,Dc=t,Rc=null;break}e:{var a=e,o=n.return,s=n,l=t;if(t=Pc,s.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=s,d=u.tag;if(0==(1&u.mode)&&(0===d||11===d||15===d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=bl(o);if(null!==p){p.flags&=-257,yl(p,o,s,0,t),1&p.mode&&gl(a,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var f=new Set;f.add(l),t.updateQueue=f}else m.add(l);break e}if(0==(1&t)){gl(a,c,t),gu();break e}l=Error(oe(426))}else if(ro&&1&s.mode){var g=bl(o);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),yl(g,o,s,0,t),fo(ul(l,s));break e}}a=l=ul(l,s),4!==Ic&&(Ic=2),null===Bc?Bc=[a]:Bc.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Lo(a,ml(0,l,t));break e;case 1:s=l;var b=a.type,y=a.stateNode;if(0==(128&a.flags)&&("function"==typeof b.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Qc||!Qc.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Lo(a,fl(a,s,t));break e}}a=a.return}while(null!==a)}Eu(n)}catch(v){t=v,Rc===n&&null!==n&&(Rc=n=n.return);continue}break}}function fu(){var e=Nc.current;return Nc.current=ol,null===e?ol:e}function gu(){0!==Ic&&3!==Ic&&2!==Ic||(Ic=4),null===Oc||0==(268435455&Lc)&&0==(268435455&jc)||lu(Oc,Pc)}function bu(e,t){var n=_c;_c|=2;var i=fu();for(Oc===e&&Pc===t||(Vc=null,pu(e,t));;)try{yu();break}catch(RD){mu(e,RD)}if(xo(),_c=n,Nc.current=i,null!==Rc)throw Error(oe(261));return Oc=null,Pc=0,Ic}function yu(){for(;null!==Rc;)wu(Rc)}function vu(){for(;null!==Rc&&!Gt();)wu(Rc)}function wu(e){var t=Cc(e.alternate,e,Mc);e.memoizedProps=e.pendingProps,null===t?Eu(e):Rc=t,kc.current=null}function Eu(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Kl(n,t,Mc)))return void(Rc=n)}else{if(null!==(n=Gl(n,t)))return n.flags&=32767,void(Rc=n);if(null===e)return Ic=6,void(Rc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===Ic&&(Ic=5)}function xu(e,t,n){var i=wn,r=Ac.transition;try{Ac.transition=null,wn=1,function(e,t,n,i){do{Tu()}while(null!==Gc);if(0!=(6&_c))throw Error(oe(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-sn(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,a),e===Oc&&(Rc=Oc=null,Pc=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Kc||(Kc=!0,Ou(tn,(function(){return Tu(),null}))),a=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||a){a=Ac.transition,Ac.transition=null;var o=wn;wn=1;var s=_c;_c|=4,kc.current=null,function(e,t){if(ea=Wn,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(oC){n=null;break e}var o=0,s=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(s=o+r),d!==a||0!==i&&3!==d.nodeType||(l=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===r&&(s=o),h===a&&++u===i&&(l=o),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Wn=!1,Zl=t;null!==Zl;)if(e=(t=Zl).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Zl=e;else for(;null!==Zl;){t=Zl;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var f=m.memoizedProps,g=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:bo(t.type,f),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(oe(163))}}catch(oC){Su(t,t.return,oC)}if(null!==(e=t.sibling)){e.return=t.return,Zl=e;break}Zl=t.return}m=nc,nc=!1}(e,n),bc(n,e),mr(ta),Wn=!!ea,ta=ea=null,e.current=n,vc(n),Yt(),_c=s,wn=o,Ac.transition=a}else e.current=n;if(Kc&&(Kc=!1,Gc=e,Yc=r),a=e.pendingLanes,0===a&&(Qc=null),function(e){if(on&&"function"==typeof on.onCommitFiberRoot)try{on.onCommitFiberRoot(an,e,void 0,128==(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Jt()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wc)throw Wc=!1,e=Hc,Hc=null,e;0!=(1&Yc)&&0!==e.tag&&Tu(),a=e.pendingLanes,0!=(1&a)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,za()}(e,t,n,i)}finally{Ac.transition=r,wn=i}return null}function Tu(){if(null!==Gc){var e=En(Yc),t=Ac.transition,n=wn;try{if(Ac.transition=null,wn=16>e?16:e,null===Gc)var i=!1;else{if(e=Gc,Gc=null,Yc=0,0!=(6&_c))throw Error(oe(331));var r=_c;for(_c|=4,Zl=e.current;null!==Zl;){var a=Zl,o=a.child;if(0!=(16&Zl.flags)){var s=a.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(Zl=c;null!==Zl;){var u=Zl;switch(u.tag){case 0:case 11:case 15:ic(8,u,a)}var d=u.child;if(null!==d)d.return=u,Zl=d;else for(;null!==Zl;){var h=(u=Zl).sibling,p=u.return;if(oc(u),u===c){Zl=null;break}if(null!==h){h.return=p,Zl=h;break}Zl=p}}}var m=a.alternate;if(null!==m){var f=m.child;if(null!==f){m.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Zl=a}}if(0!=(2064&a.subtreeFlags)&&null!==o)o.return=a,Zl=o;else e:for(;null!==Zl;){if(0!=(2048&(a=Zl).flags))switch(a.tag){case 0:case 11:case 15:ic(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Zl=b;break e}Zl=a.return}}var y=e.current;for(Zl=y;null!==Zl;){var v=(o=Zl).child;if(0!=(2064&o.subtreeFlags)&&null!==v)v.return=o,Zl=v;else e:for(o=y;null!==Zl;){if(0!=(2048&(s=Zl).flags))try{switch(s.tag){case 0:case 11:case 15:rc(9,s)}}catch(E){Su(s,s.return,E)}if(s===o){Zl=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zl=w;break e}Zl=s.return}}if(_c=r,za(),on&&"function"==typeof on.onPostCommitFiberRoot)try{on.onPostCommitFiberRoot(an,e)}catch(E){}i=!0}return i}finally{wn=n,Ac.transition=t}}return!1}function Cu(e,t,n){e=Io(e,t=ml(0,t=ul(n,t),1),1),t=tu(),null!==e&&(yn(e,1,t),ru(e,t))}function Su(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Qc||!Qc.has(i))){t=Io(t,e=fl(t,e=ul(n,e),1),1),e=tu(),null!==t&&(yn(t,1,e),ru(t,e));break}}t=t.return}}function Nu(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Oc===e&&(Pc&n)===n&&(4===Ic||3===Ic&&(130023424&Pc)===Pc&&500>Jt()-zc?pu(e,0):qc|=n),ru(e,t)}function ku(e,t){0===t&&(0==(1&e.mode)?t=1:(t=dn,0==(130023424&(dn<<=1))&&(dn=4194304)));var n=tu();null!==(e=Oo(e,t))&&(yn(e,t,n),ru(e,n))}function Au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function _u(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(oe(314))}null!==i&&i.delete(t),ku(e,n)}function Ou(e,t){return Qt(e,t)}function Ru(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,i){return new Ru(e,t,n,i)}function Mu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $u(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Iu(e,t,n,i,r,a){var o=2;if(i=e,"function"==typeof e)Mu(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case Ce:return Du(n.children,r,a,t);case Se:o=8,r|=8;break;case Ne:return(e=Pu(12,n,t,2|r)).elementType=Ne,e.lanes=a,e;case Oe:return(e=Pu(13,n,t,r)).elementType=Oe,e.lanes=a,e;case Re:return(e=Pu(19,n,t,r)).elementType=Re,e.lanes=a,e;case $e:return Lu(n,r,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case ke:o=10;break e;case Ae:o=9;break e;case _e:o=11;break e;case Pe:o=14;break e;case Me:o=16,i=null;break e}throw Error(oe(130,null==e?e:typeof e,""))}return(t=Pu(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Du(e,t,n,i){return(e=Pu(7,e,i,t)).lanes=n,e}function Lu(e,t,n,i){return(e=Pu(22,e,i,t)).elementType=$e,e.lanes=n,e.stateNode={isHidden:!1},e}function ju(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function qu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bu(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bn(0),this.expirationTimes=bn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bn(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fu(e,t,n,i,r,a,o,s,l){return e=new Bu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(a),e}function zu(e){if(!e)return ka;e:{if(zt(e=e._reactInternals)!==e||1!==e.tag)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(oe(171))}if(1===e.tag){var n=e.type;if(Pa(n))return Ia(e,n,t)}return t}function Uu(e,t,n,i,r,a,o,s,l){return(e=Fu(n,i,!0,e,0,a,0,s,l)).context=zu(null),n=e.current,(a=$o(i=tu(),r=nu(n))).callback=null!=t?t:null,Io(n,a,r),e.current.lanes=r,yn(e,r,i),ru(e,i),e}function Vu(e,t,n,i){var r=t.current,a=tu(),o=nu(r);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=$o(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Io(r,t,o))&&(iu(e,r,o,a),Do(e,r,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qu(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}Cc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_a.current)wl=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return wl=!1,function(e,t,n){switch(t.tag){case 3:Ol(t),mo();break;case 5:os(t);break;case 1:Pa(t.type)&&Da(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Na(yo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Na(ls,1&ls.current),t.flags|=128,null):0!=(n&t.child.childLanes)?jl(e,t,n):(Na(ls,1&ls.current),null!==(e=Wl(e,t,n))?e.sibling:null);Na(ls,1&ls.current);break;case 19:if(i=0!=(n&t.childLanes),0!=(128&e.flags)){if(i)return Ul(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Na(ls,ls.current),i)break;return null;case 22:case 23:return t.lanes=0,Sl(e,t,n)}return Wl(e,t,n)}(e,t,n);wl=0!=(131072&e.flags)}else wl=!1,ro&&0!=(1048576&t.flags)&&Za(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Vl(e,t),e=t.pendingProps;var r=Ra(t,Aa.current);So(t,n),r=Cs(null,t,i,e,r,n);var a=Ss();return t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(i)?(a=!0,Da(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Po(t),r.updater=zo,t.stateNode=r,r._reactInternals=t,Ho(t,i,e,n),t=_l(null,t,i,!0,a,n)):(t.tag=0,ro&&a&&eo(t),El(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Vl(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"==typeof e)return Mu(e)?1:0;if(null!=e){if((e=e.$$typeof)===_e)return 11;if(e===Pe)return 14}return 2}(i),e=bo(i,e),r){case 0:t=kl(null,t,i,e,n);break e;case 1:t=Al(null,t,i,e,n);break e;case 11:t=xl(null,t,i,e,n);break e;case 14:t=Tl(null,t,i,bo(i.type,e),n);break e}throw Error(oe(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,kl(e,t,i,r=t.elementType===i?r:bo(i,r),n);case 1:return i=t.type,r=t.pendingProps,Al(e,t,i,r=t.elementType===i?r:bo(i,r),n);case 3:e:{if(Ol(t),null===e)throw Error(oe(387));i=t.pendingProps,r=(a=t.memoizedState).element,Mo(e,t),jo(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rl(e,t,i,n,r=ul(Error(oe(423)),t));break e}if(i!==r){t=Rl(e,t,i,n,r=ul(Error(oe(424)),t));break e}for(io=ca(t.stateNode.containerInfo.firstChild),no=t,ro=!0,ao=null,n=Xo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mo(),i===r){t=Wl(e,t,n);break e}El(e,t,i,n)}t=t.child}return t;case 5:return os(t),null===e&&co(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,na(i,r)?o=null:null!==a&&na(i,a)&&(t.flags|=32),Nl(e,t),El(e,t,o,n),t.child;case 6:return null===e&&co(t),null;case 13:return jl(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Jo(t,null,i,n):El(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,xl(e,t,i,r=t.elementType===i?r:bo(i,r),n);case 7:return El(e,t,t.pendingProps,n),t.child;case 8:case 12:return El(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Na(yo,i._currentValue),i._currentValue=o,null!==a)if(sr(a.value,o)){if(a.children===r.children&&!_a.current){t=Wl(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var s=a.dependencies;if(null!==s){o=a.child;for(var l=s.firstContext;null!==l;){if(l.context===i){if(1===a.tag){(l=$o(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Co(a.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(oe(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Co(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}El(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,So(t,n),i=i(r=No(r)),t.flags|=1,El(e,t,i,n),t.child;case 14:return r=bo(i=t.type,t.pendingProps),Tl(e,t,i,r=bo(i.type,r),n);case 15:return Cl(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:bo(i,r),Vl(e,t),t.tag=1,Pa(i)?(e=!0,Da(t)):e=!1,So(t,n),Vo(t,i,r),Ho(t,i,r,n),_l(null,t,i,!0,e,n);case 19:return Ul(e,t,n);case 22:return Sl(e,t,n)}throw Error(oe(156,t.tag))};var Ku="function"==typeof reportError?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ed(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"==typeof r){var s=r;r=function(){var e=Wu(o);s.call(e)}}Vu(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"==typeof i){var a=i;i=function(){var e=Wu(o);a.call(e)}}var o=Uu(t,i,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[ma]=o.current,zr(8===e.nodeType?e.parentNode:e),du(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"==typeof i){var s=i;i=function(){var e=Wu(l);s.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[ma]=l.current,zr(8===e.nodeType?e.parentNode:e),du((function(){Vu(t,l,n,i)})),l}(n,t,e,r,i);return Wu(o)}Yu.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(oe(409));Vu(e,t,null,null)},Yu.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Vu(null,e,null,null)})),t[ma]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$n.length&&0!==t&&t<$n[n].priority;n++);$n.splice(n,0,e),0===n&&jn(e)}},xn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hn(t.pendingLanes);0!==n&&(vn(t,1|n),ru(t,Jt()),0==(6&_c)&&(Uc=Jt()+500,za()))}break;case 13:du((function(){var t=Oo(e,1);if(null!==t){var n=tu();iu(t,e,1,n)}})),Qu(e,1)}},Tn=function(e){if(13===e.tag){var t=Oo(e,134217728);if(null!==t)iu(t,e,134217728,tu());Qu(e,134217728)}},Cn=function(e){if(13===e.tag){var t=nu(e),n=Oo(e,t);if(null!==n)iu(n,e,t,tu());Qu(e,t)}},Sn=function(){return wn},Nn=function(e,t){var n=wn;try{return wn=e,t()}finally{wn=n}},xt=function(e,t,n){switch(t){case"input":if(Ze(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=Ea(i);if(!r)throw Error(oe(90));Ke(i),Ze(i,r)}}}break;case"textarea":ot(e,n);break;case"select":null!=(t=n.value)&&it(e,!!n.multiple,t,!1)}},At=uu,_t=du;var td={usingClientEntryPoint:!1,Events:[va,wa,Ea,Nt,kt,uu]},nd={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},id={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Wt(e))?null:e.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{an=rd.inject(id),on=rd}catch(MD){}}ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=td,ee.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(oe(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Te,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},ee.createRoot=function(e,t){if(!Ju(e))throw Error(oe(299));var n=!1,i="",r=Ku;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Fu(e,1,!1,null,0,n,0,i,r),e[ma]=t.current,zr(8===e.nodeType?e.parentNode:e),new Gu(t)},ee.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(oe(188));throw e=Object.keys(e).join(","),Error(oe(268,e))}return e=null===(e=Wt(t))?null:e.stateNode},ee.flushSync=function(e){return du(e)},ee.hydrate=function(e,t,n){if(!Xu(t))throw Error(oe(200));return ed(null,e,t,!0,n)},ee.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(oe(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Ku;if(null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,r,0,a,o),e[ma]=t.current,zr(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yu(t)},ee.render=function(e,t,n){if(!Xu(t))throw Error(oe(200));return ed(null,e,t,!1,n)},ee.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(oe(40));return!!e._reactRootContainer&&(du((function(){ed(null,null,e,!1,(function(){e._reactRootContainer=null,e[ma]=null}))})),!0)},ee.unstable_batchedUpdates=uu,ee.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Xu(n))throw Error(oe(200));if(null==e||void 0===e._reactInternals)throw Error(oe(38));return ed(e,t,n,!1,i)},ee.version="18.2.0-next-9e3b772b8-20220608",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Z.exports=ee;var ad=Z.exports;const od=a(ad);var sd,ld=ad;function cd(e,t){return cd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cd(e,t)}function ud(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,cd(e,t)}sd=ld.createRoot,ld.hydrateRoot;var dd={exports:{}};function hd(){}function pd(){}pd.resetWarningCache=hd;dd.exports=function(){function e(e,t,n,i,r,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pd,resetWarningCache:hd};return n.PropTypes=n,n}();const md=a(dd.exports);function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fd.apply(this,arguments)}function gd(e){return"/"===e.charAt(0)}function bd(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}function yd(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function vd(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((function(e,n){return vd(e,t[n])}));if("object"==typeof e||"object"==typeof t){var n=yd(e),i=yd(t);return n!==e||i!==t?vd(n,i):Object.keys(Object.assign({},e,t)).every((function(n){return vd(e[n],t[n])}))}return!1}var wd=!0,Ed="Invariant failed";function xd(e,t){if(!e){if(wd)throw new Error(Ed);var n="function"==typeof t?t():t,i=n?"".concat(Ed,": ").concat(n):Ed;throw new Error(i)}}function Td(e){return"/"===e.charAt(0)?e:"/"+e}function Cd(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function Sd(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function Nd(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function kd(e,t,n,i){var r;"string"==typeof e?(r=function(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}}(e),r.state=t):(void 0===(r=fd({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(RD){throw RD instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):RD}return n&&(r.key=n),i?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&gd(e),o=t&&gd(t),s=a||o;if(e&&gd(e)?r=i:i.length&&(r.pop(),r=r.concat(i)),!r.length)return"/";if(r.length){var l=r[r.length-1];n="."===l||".."===l||""===l}else n=!1;for(var c=0,u=r.length;u>=0;u--){var d=r[u];"."===d?bd(r,u):".."===d?(bd(r,u),c++):c&&(bd(r,u),c--)}if(!s)for(;c--;c)r.unshift("..");!s||""===r[0]||r[0]&&gd(r[0])||r.unshift("");var h=r.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h}(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r}function Ad(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&vd(e.state,t.state)}function _d(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,r){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof i?i(a,r):r(!0):r(!1!==a)}else r(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter((function(e){return e!==i}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){return e.apply(void 0,n)}))}}}var Od=!("undefined"==typeof window||!window.document||!window.document.createElement);function Rd(e,t){t(window.confirm(e))}var Pd="popstate",Md="hashchange";function $d(){try{return window.history.state||{}}catch(RD){return{}}}function Id(e){void 0===e&&(e={}),Od||xd(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),r=e,a=r.forceRefresh,o=void 0!==a&&a,s=r.getUserConfirmation,l=void 0===s?Rd:s,c=r.keyLength,u=void 0===c?6:c,d=e.basename?Sd(Td(e.basename)):"";function h(e){var t=e||{},n=t.key,i=t.state,r=window.location,a=r.pathname+r.search+r.hash;return d&&(a=Cd(a,d)),kd(a,i,n)}function p(){return Math.random().toString(36).substr(2,u)}var m=_d();function f(e){fd(k,e),k.length=t.length,m.notifyListeners(k.location,k.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||v(h(e.state))}function b(){v(h($d()))}var y=!1;function v(e){if(y)y=!1,f();else{m.confirmTransitionTo(e,"POP",l,(function(t){t?f({action:"POP",location:e}):function(e){var t=k.location,n=E.indexOf(t.key);-1===n&&(n=0);var i=E.indexOf(e.key);-1===i&&(i=0);var r=n-i;r&&(y=!0,T(r))}(e)}))}}var w=h($d()),E=[w.key];function x(e){return d+Nd(e)}function T(e){t.go(e)}var C=0;function S(e){1===(C+=e)&&1===e?(window.addEventListener(Pd,g),i&&window.addEventListener(Md,b)):0===C&&(window.removeEventListener(Pd,g),i&&window.removeEventListener(Md,b))}var N=!1;var k={length:t.length,action:"POP",location:w,createHref:x,push:function(e,i){var r="PUSH",a=kd(e,i,p(),k.location);m.confirmTransitionTo(a,r,l,(function(e){if(e){var i=x(a),s=a.key,l=a.state;if(n)if(t.pushState({key:s,state:l},null,i),o)window.location.href=i;else{var c=E.indexOf(k.location.key),u=E.slice(0,c+1);u.push(a.key),E=u,f({action:r,location:a})}else window.location.href=i}}))},replace:function(e,i){var r="REPLACE",a=kd(e,i,p(),k.location);m.confirmTransitionTo(a,r,l,(function(e){if(e){var i=x(a),s=a.key,l=a.state;if(n)if(t.replaceState({key:s,state:l},null,i),o)window.location.replace(i);else{var c=E.indexOf(k.location.key);-1!==c&&(E[c]=a.key),f({action:r,location:a})}else window.location.replace(i)}}))},go:T,goBack:function(){T(-1)},goForward:function(){T(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return N||(S(1),N=!0),function(){return N&&(N=!1,S(-1)),t()}},listen:function(e){var t=m.appendListener(e);return S(1),function(){S(-1),t()}}};return k}var Dd={exports:{}},Ld=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};Dd.exports=Qd,Dd.exports.parse=qd,Dd.exports.compile=function(e,t){return Fd(qd(e,t),t)},Dd.exports.tokensToFunction=Fd,Dd.exports.tokensToRegExp=Hd;var jd=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function qd(e,t){for(var n,i=[],r=0,a=0,o="",s=t&&t.delimiter||"/";null!=(n=jd.exec(e));){var l=n[0],c=n[1],u=n.index;if(o+=e.slice(a,u),a=u+l.length,c)o+=c[1];else{var d=e[a],h=n[2],p=n[3],m=n[4],f=n[5],g=n[6],b=n[7];o&&(i.push(o),o="");var y=null!=h&&null!=d&&d!==h,v="+"===g||"*"===g,w="?"===g||"*"===g,E=n[2]||s,x=m||f;i.push({name:p||r++,prefix:h||"",delimiter:E,optional:w,repeat:v,partial:y,asterisk:!!b,pattern:x?Ud(x):b?".*":"[^"+zd(E)+"]+?"})}}return a<e.length&&(o+=e.substr(a)),o&&i.push(o),i}function Bd(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function Fd(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",Wd(t)));return function(t,i){for(var r="",a=t||{},o=(i||{}).pretty?Bd:encodeURIComponent,s=0;s<e.length;s++){var l=e[s];if("string"!=typeof l){var c,u=a[l.name];if(null==u){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Ld(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(c=o(u[d]),!n[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===d?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):o(u),!n[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');r+=l.prefix+c}}else r+=l}return r}}function zd(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Ud(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Vd(e,t){return e.keys=t,e}function Wd(e){return e&&e.sensitive?"":"i"}function Hd(e,t,n){Ld(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,r=!1!==n.end,a="",o=0;o<e.length;o++){var s=e[o];if("string"==typeof s)a+=zd(s);else{var l=zd(s.prefix),c="(?:"+s.pattern+")";t.push(s),s.repeat&&(c+="(?:"+l+c+")*"),a+=c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=zd(n.delimiter||"/"),d=a.slice(-u.length)===u;return i||(a=(d?a.slice(0,-u.length):a)+"(?:"+u+"(?=$))?"),a+=r?"$":i&&d?"":"(?="+u+"|$)",Vd(new RegExp("^"+a,Wd(n)),t)}function Qd(e,t,n){return Ld(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Vd(e,t)}(e,t):Ld(e)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(Qd(e[r],t,n).source);return Vd(new RegExp("(?:"+i.join("|")+")",Wd(n)),t)}(e,t,n):function(e,t,n){return Hd(qd(e,n),t,n)}(e,t,n)}const Kd=a(Dd.exports);var Gd={},Yd="function"==typeof Symbol&&Symbol.for,Jd=Yd?Symbol.for("react.element"):60103,Xd=Yd?Symbol.for("react.portal"):60106,Zd=Yd?Symbol.for("react.fragment"):60107,eh=Yd?Symbol.for("react.strict_mode"):60108,th=Yd?Symbol.for("react.profiler"):60114,nh=Yd?Symbol.for("react.provider"):60109,ih=Yd?Symbol.for("react.context"):60110,rh=Yd?Symbol.for("react.async_mode"):60111,ah=Yd?Symbol.for("react.concurrent_mode"):60111,oh=Yd?Symbol.for("react.forward_ref"):60112,sh=Yd?Symbol.for("react.suspense"):60113,lh=Yd?Symbol.for("react.suspense_list"):60120,ch=Yd?Symbol.for("react.memo"):60115,uh=Yd?Symbol.for("react.lazy"):60116,dh=Yd?Symbol.for("react.block"):60121,hh=Yd?Symbol.for("react.fundamental"):60117,ph=Yd?Symbol.for("react.responder"):60118,mh=Yd?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
             * react-is.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */function fh(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Jd:switch(e=e.type){case rh:case ah:case Zd:case th:case eh:case sh:return e;default:switch(e=e&&e.$$typeof){case ih:case oh:case uh:case ch:case nh:return e;default:return t}}case Xd:return t}}}function gh(e){return fh(e)===ah}function bh(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}Gd.AsyncMode=rh,Gd.ConcurrentMode=ah,Gd.ContextConsumer=ih,Gd.ContextProvider=nh,Gd.Element=Jd,Gd.ForwardRef=oh,Gd.Fragment=Zd,Gd.Lazy=uh,Gd.Memo=ch,Gd.Portal=Xd,Gd.Profiler=th,Gd.StrictMode=eh,Gd.Suspense=sh,Gd.isAsyncMode=function(e){return gh(e)||fh(e)===rh},Gd.isConcurrentMode=gh,Gd.isContextConsumer=function(e){return fh(e)===ih},Gd.isContextProvider=function(e){return fh(e)===nh},Gd.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Jd},Gd.isForwardRef=function(e){return fh(e)===oh},Gd.isFragment=function(e){return fh(e)===Zd},Gd.isLazy=function(e){return fh(e)===uh},Gd.isMemo=function(e){return fh(e)===ch},Gd.isPortal=function(e){return fh(e)===Xd},Gd.isProfiler=function(e){return fh(e)===th},Gd.isStrictMode=function(e){return fh(e)===eh},Gd.isSuspense=function(e){return fh(e)===sh},Gd.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Zd||e===ah||e===th||e===eh||e===sh||e===lh||"object"==typeof e&&null!==e&&(e.$$typeof===uh||e.$$typeof===ch||e.$$typeof===nh||e.$$typeof===ih||e.$$typeof===oh||e.$$typeof===hh||e.$$typeof===ph||e.$$typeof===mh||e.$$typeof===dh)},Gd.typeOf=fh;var yh={exports:{}},vh={},wh="function"==typeof Symbol&&Symbol.for,Eh=wh?Symbol.for("react.element"):60103,xh=wh?Symbol.for("react.portal"):60106,Th=wh?Symbol.for("react.fragment"):60107,Ch=wh?Symbol.for("react.strict_mode"):60108,Sh=wh?Symbol.for("react.profiler"):60114,Nh=wh?Symbol.for("react.provider"):60109,kh=wh?Symbol.for("react.context"):60110,Ah=wh?Symbol.for("react.async_mode"):60111,_h=wh?Symbol.for("react.concurrent_mode"):60111,Oh=wh?Symbol.for("react.forward_ref"):60112,Rh=wh?Symbol.for("react.suspense"):60113,Ph=wh?Symbol.for("react.suspense_list"):60120,Mh=wh?Symbol.for("react.memo"):60115,$h=wh?Symbol.for("react.lazy"):60116,Ih=wh?Symbol.for("react.block"):60121,Dh=wh?Symbol.for("react.fundamental"):60117,Lh=wh?Symbol.for("react.responder"):60118,jh=wh?Symbol.for("react.scope"):60119;function qh(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Eh:switch(e=e.type){case Ah:case _h:case Th:case Sh:case Ch:case Rh:return e;default:switch(e=e&&e.$$typeof){case kh:case Oh:case $h:case Mh:case Nh:return e;default:return t}}case xh:return t}}}function Bh(e){return qh(e)===_h}vh.AsyncMode=Ah,vh.ConcurrentMode=_h,vh.ContextConsumer=kh,vh.ContextProvider=Nh,vh.Element=Eh,vh.ForwardRef=Oh,vh.Fragment=Th,vh.Lazy=$h,vh.Memo=Mh,vh.Portal=xh,vh.Profiler=Sh,vh.StrictMode=Ch,vh.Suspense=Rh,vh.isAsyncMode=function(e){return Bh(e)||qh(e)===Ah},vh.isConcurrentMode=Bh,vh.isContextConsumer=function(e){return qh(e)===kh},vh.isContextProvider=function(e){return qh(e)===Nh},vh.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Eh},vh.isForwardRef=function(e){return qh(e)===Oh},vh.isFragment=function(e){return qh(e)===Th},vh.isLazy=function(e){return qh(e)===$h},vh.isMemo=function(e){return qh(e)===Mh},vh.isPortal=function(e){return qh(e)===xh},vh.isProfiler=function(e){return qh(e)===Sh},vh.isStrictMode=function(e){return qh(e)===Ch},vh.isSuspense=function(e){return qh(e)===Rh},vh.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Th||e===_h||e===Sh||e===Ch||e===Rh||e===Ph||"object"==typeof e&&null!==e&&(e.$$typeof===$h||e.$$typeof===Mh||e.$$typeof===Nh||e.$$typeof===kh||e.$$typeof===Oh||e.$$typeof===Dh||e.$$typeof===Lh||e.$$typeof===jh||e.$$typeof===Ih)},vh.typeOf=qh,yh.exports=vh;var Fh=yh.exports,zh={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Uh={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Vh={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Wh={};function Hh(e){return Fh.isMemo(e)?Vh:Wh[e.$$typeof]||zh}Wh[Fh.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Wh[Fh.Memo]=Vh;var Qh=Object.defineProperty,Kh=Object.getOwnPropertyNames,Gh=Object.getOwnPropertySymbols,Yh=Object.getOwnPropertyDescriptor,Jh=Object.getPrototypeOf,Xh=Object.prototype;var Zh=function e(t,n,i){if("string"!=typeof n){if(Xh){var r=Jh(n);r&&r!==Xh&&e(t,r,i)}var a=Kh(n);Gh&&(a=a.concat(Gh(n)));for(var o=Hh(t),s=Hh(n),l=0;l<a.length;++l){var c=a[l];if(!(Uh[c]||i&&i[c]||s&&s[c]||o&&o[c])){var u=Yh(n,c);try{Qh(t,c,u)}catch(RD){}}}}return t};const ep=a(Zh);var tp=1073741823,np="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};var ip=V.createContext||function(e,t){var n,i,r,a="__create-react-context-"+((np[r="__global_unique_id__"]=(np[r]||0)+1)+"__"),o=function(e){function n(){for(var t,n,i,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).emitter=(n=t.props.value,i=[],{on:function(e){i.push(e)},off:function(e){i=i.filter((function(t){return t!==e}))},get:function(){return n},set:function(e,t){n=e,i.forEach((function(e){return e(n,t)}))}}),t}ud(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,i=this.props.value,r=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(i,r)?(n="function"==typeof t?t(i,r):tp,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},i.render=function(){return this.props.children},n}(V.Component);o.childContextTypes=((n={})[a]=md.object.isRequired,n);var s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}ud(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?tp:t},i.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?tp:e},i.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},i.getValue=function(){return this.context[a]?this.context[a].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(V.Component);return s.contextTypes=((i={})[a]=md.object,i),{Provider:o,Consumer:s}},rp=function(e){var t=ip();return t.displayName=e,t},ap=rp("Router-History"),op=rp("Router"),sp=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}ud(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return V.createElement(op.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},V.createElement(ap.Provider,{children:this.props.children||null,value:this.props.history}))},t}(V.Component);V.Component;var lp=function(e){function t(){return e.apply(this,arguments)||this}ud(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(V.Component),cp={},up=1e4,dp=0;function hp(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(cp[e])return cp[e];var t=Kd.compile(e);return dp<up&&(cp[e]=t,dp++),t}(e)(t,{pretty:!0})}function pp(e){var t=e.computedMatch,n=e.to,i=e.push,r=void 0!==i&&i;return V.createElement(op.Consumer,null,(function(e){e||xd(!1);var i=e.history,a=e.staticContext,o=r?i.push:i.replace,s=kd(t?"string"==typeof n?hp(n,t.params):fd({},n,{pathname:hp(n.pathname,t.params)}):n);return a?(o(s),null):V.createElement(lp,{onMount:function(){o(s)},onUpdate:function(e,t){var n=kd(t.to);Ad(n,fd({},s,{key:n.key}))||o(s)},to:n})}))}var mp={},fp=1e4,gp=0;function bp(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,r=n.exact,a=void 0!==r&&r,o=n.strict,s=void 0!==o&&o,l=n.sensitive,c=void 0!==l&&l;return[].concat(i).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=mp[n]||(mp[n]={});if(i[e])return i[e];var r=[],a={regexp:Kd(e,r,t),keys:r};return gp<fp&&(i[e]=a,gp++),a}(n,{end:a,strict:s,sensitive:c}),r=i.regexp,o=i.keys,l=r.exec(e);if(!l)return null;var u=l[0],d=l.slice(1),h=e===u;return a&&!h?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var yp=function(e){function t(){return e.apply(this,arguments)||this}return ud(t,e),t.prototype.render=function(){var e=this;return V.createElement(op.Consumer,null,(function(t){t||xd(!1);var n=e.props.location||t.location,i=fd({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?bp(n.pathname,e.props):t.match}),r=e.props,a=r.children,o=r.component,s=r.render;return Array.isArray(a)&&function(e){return 0===V.Children.count(e)}(a)&&(a=null),V.createElement(op.Provider,{value:i},i.match?a?"function"==typeof a?a(i):a:o?V.createElement(o,i):s?s(i):null:"function"==typeof a?a(i):null)}))},t}(V.Component);V.Component,V.Component,V.useContext;const vp=function(e,t,n){return e()},wp=!0,Ep=!0,xp=!0,Tp=!1,Cp=!1;let Sp,Np,kp,Ap=!1,_p=!1,Op=!1,Rp=!1,Pp=null,Mp=!1;const $p=!0,Ip="http://www.w3.org/1999/xlink",Dp={},Lp=e=>"object"===(e=typeof e)||"function"===e;const jp=(e,t,...n)=>{let i=null,r=null,a=null,o=!1,s=!1;const l=[],c=t=>{for(let n=0;n<t.length;n++)i=t[n],Array.isArray(i)?c(i):null!=i&&"boolean"!=typeof i&&((o="function"!=typeof e&&!Lp(i))&&(i=String(i)),o&&s?l[l.length-1].$text$+=i:l.push(o?qp(null,i):i),s=o)};if(c(n),t){t.key&&(r=t.key),t.name&&(a=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,Fp);const u=qp(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=r,u.$name$=a,u},qp=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return n},Bp={},Fp={forEach:(e,t)=>e.map(zp).forEach(t),map:(e,t)=>e.map(zp).map(t).map(Up)},zp=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Up=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),jp(e.vtag,t,...e.vchildren||[])}const t=qp(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Vp=(e,t,n)=>{const i=e;return{emit:e=>Wp(i,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}},Wp=(e,t,n)=>{const i=Fm.ce(t,n);return e.dispatchEvent(i),i},Hp=new WeakMap,Qp=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,i=t.$flags$,r=(t.$tagName$,()=>{}),a=((e,t,n)=>{var i;const r=Kp(t,n),a=Dm.get(r);if(e=11===e.nodeType?e:qm,a)if("string"==typeof a){e=e.head||e;let t,n=Hp.get(e);if(n||Hp.set(e,n=new Set),!n.has(r)){{t=qm.createElement("style"),t.innerHTML=a;const n=null!==(i=Fm.$nonce$)&&void 0!==i?i:function(e){var t,n,i;return null!==(i=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==i?i:void 0}(qm);null!=n&&t.setAttribute("nonce",n),e.insertBefore(t,e.querySelector("link"))}n&&n.add(r)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return r})(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);10&i&&(n["s-sc"]=a,n.classList.add(a+"-h"),2&i&&n.classList.add(a+"-s")),r()},Kp=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),Gp=(e,t,n,i,r,a)=>{if(n!==i){let o=$m(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,r=Jp(n),a=Jp(i);t.remove(...r.filter((e=>e&&!a.includes(e)))),t.add(...a.filter((e=>e&&!r.includes(e))))}else if("style"===t){for(const t in n)i&&null!=i[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in i)n&&i[t]===n[t]||(t.includes("-")?e.style.setProperty(t,i[t]):e.style[t]=i[t])}else if("key"===t);else if("ref"===t)i&&i(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=Lp(i);if((o||l&&null!==i)&&!r)try{if(e.tagName.includes("-"))e[t]=i;else{const r=null==i?"":i;"list"===t?o=!1:null!=n&&e[t]==r||(e[t]=r)}}catch(RD){}let c=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,c=!0),null==i||!1===i?!1===i&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(Ip,t):e.removeAttribute(t)):(!o||4&a||r)&&!l&&(i=!0===i?"":i,c?e.setAttributeNS(Ip,t,i):e.setAttribute(t,i))}else t="-"===t[2]?t.slice(3):$m(jm,s)?s.slice(2):s[2]+t.slice(3),n&&Fm.rel(e,t,n,!1),i&&Fm.ael(e,t,i,!1)}},Yp=/\s/,Jp=e=>e?e.split(Yp):[],Xp=(e,t,n,i)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||Dp,o=t.$attrs$||Dp;for(i in a)i in o||Gp(r,i,a[i],void 0,n,t.$flags$);for(i in o)Gp(r,i,a[i],o[i],n,t.$flags$)},Zp=(e,t,n,i)=>{const r=t.$children$[n];let a,o,s,l=0;if(Ap||(Op=!0,"slot"===r.$tag$&&(Sp&&i.classList.add(Sp+"-s"),r.$flags$|=r.$children$?2:1)),null!==r.$text$)a=r.$elm$=qm.createTextNode(r.$text$);else if(1&r.$flags$)a=r.$elm$=qm.createTextNode("");else{if(Rp||(Rp="svg"===r.$tag$),a=r.$elm$=qm.createElementNS(Rp?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&r.$flags$?"slot-fb":r.$tag$),Rp&&"foreignObject"===r.$tag$&&(Rp=!1),Xp(null,r,Rp),(e=>null!=e)(Sp)&&a["s-si"]!==Sp&&a.classList.add(a["s-si"]=Sp),r.$children$)for(l=0;l<r.$children$.length;++l)o=Zp(e,r,l,a),o&&a.appendChild(o);"svg"===r.$tag$?Rp=!1:"foreignObject"===a.tagName&&(Rp=!0)}return a["s-hn"]=kp,3&r.$flags$&&(a["s-sr"]=!0,a["s-cr"]=Np,a["s-sn"]=r.$name$||"",s=e&&e.$children$&&e.$children$[n],s&&s.$tag$===r.$tag$&&e.$elm$&&em(e.$elm$,!1)),a},em=(e,t)=>{Fm.$flags$|=1;const n=e.childNodes;for(let i=n.length-1;i>=0;i--){const e=n[i];e["s-hn"]!==kp&&e["s-ol"]&&(am(e).insertBefore(e,rm(e)),e["s-ol"].remove(),e["s-ol"]=void 0,Op=!0),t&&em(e,t)}Fm.$flags$&=-2},tm=(e,t,n,i,r,a)=>{let o,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===kp&&(s=s.shadowRoot);r<=a;++r)i[r]&&(o=Zp(null,n,r,e),o&&(i[r].$elm$=o,s.insertBefore(o,rm(t))))},nm=(e,t,n)=>{for(let i=t;i<=n;++i){const t=e[i];if(t){const e=t.$elm$;dm(t),e&&(_p=!0,e["s-ol"]?e["s-ol"].remove():em(e,!0),e.remove())}}},im=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),rm=e=>e&&e["s-ol"]||e,am=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,om=(e,t)=>{const n=t.$elm$=e.$elm$,i=e.$children$,r=t.$children$,a=t.$tag$,o=t.$text$;let s;null===o?(Rp="svg"===a||"foreignObject"!==a&&Rp,"slot"===a||Xp(e,t,Rp),null!==i&&null!==r?((e,t,n,i)=>{let r,a,o=0,s=0,l=0,c=0,u=t.length-1,d=t[0],h=t[u],p=i.length-1,m=i[0],f=i[p];for(;o<=u&&s<=p;)if(null==d)d=t[++o];else if(null==h)h=t[--u];else if(null==m)m=i[++s];else if(null==f)f=i[--p];else if(im(d,m))om(d,m),d=t[++o],m=i[++s];else if(im(h,f))om(h,f),h=t[--u],f=i[--p];else if(im(d,f))"slot"!==d.$tag$&&"slot"!==f.$tag$||em(d.$elm$.parentNode,!1),om(d,f),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++o],f=i[--p];else if(im(h,m))"slot"!==d.$tag$&&"slot"!==f.$tag$||em(h.$elm$.parentNode,!1),om(h,m),e.insertBefore(h.$elm$,d.$elm$),h=t[--u],m=i[++s];else{for(l=-1,c=o;c<=u;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===m.$key$){l=c;break}l>=0?(a=t[l],a.$tag$!==m.$tag$?r=Zp(t&&t[s],n,l,e):(om(a,m),t[l]=void 0,r=a.$elm$),m=i[++s]):(r=Zp(t&&t[s],n,s,e),m=i[++s]),r&&am(d.$elm$).insertBefore(r,rm(d.$elm$))}o>u?tm(e,null==i[p+1]?null:i[p+1].$elm$,n,i,s,p):s>p&&nm(t,o,u)})(n,i,t,r):null!==r?(null!==e.$text$&&(n.textContent=""),tm(n,null,t,r,0,r.length-1)):null!==i&&nm(i,0,i.length-1),Rp&&"svg"===a&&(Rp=!1)):(s=n["s-cr"])?s.parentNode.textContent=o:e.$text$!==o&&(n.data=o)},sm=e=>{const t=e.childNodes;let n,i,r,a,o,s;for(i=0,r=t.length;i<r;i++)if(n=t[i],1===n.nodeType){if(n["s-sr"])for(o=n["s-sn"],n.hidden=!1,a=0;a<r;a++)if(s=t[a].nodeType,t[a]["s-hn"]!==n["s-hn"]||""!==o){if(1===s&&o===t[a].getAttribute("slot")){n.hidden=!0;break}}else if(1===s||3===s&&""!==t[a].textContent.trim()){n.hidden=!0;break}sm(n)}},lm=[],cm=e=>{let t,n,i,r,a,o,s=0;const l=e.childNodes,c=l.length;for(;s<c;s++){if(t=l[s],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(i=n.parentNode.childNodes,r=t["s-sn"],o=i.length-1;o>=0;o--)n=i[o],n["s-cn"]||n["s-nr"]||n["s-hn"]===t["s-hn"]||(um(n,r)?(a=lm.find((e=>e.$nodeToRelocate$===n)),_p=!0,n["s-sn"]=n["s-sn"]||r,a?a.$slotRefNode$=t:lm.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&lm.map((e=>{um(e.$nodeToRelocate$,n["s-sn"])&&(a=lm.find((e=>e.$nodeToRelocate$===n)),a&&!e.$slotRefNode$&&(e.$slotRefNode$=a.$slotRefNode$))}))):lm.some((e=>e.$nodeToRelocate$===n))||lm.push({$nodeToRelocate$:n}));1===t.nodeType&&cm(t)}},um=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,dm=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(dm)},hm=(e,t,n=!1)=>{const i=e.$hostElement$,r=e.$cmpMeta$,a=e.$vnode$||qp(null,null),o=(s=t)&&s.$tag$===Bp?t:jp(null,null,t);var s;if(kp=i.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=i[e]))),n&&o.$attrs$)for(const l of Object.keys(o.$attrs$))i.hasAttribute(l)&&!["key","ref","style","class"].includes(l)&&(o.$attrs$[l]=i[l]);if(o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=a.$elm$=i.shadowRoot||i,Sp=i["s-sc"],Np=i["s-cr"],Ap=0!=(1&r.$flags$),_p=!1,om(a,o),Fm.$flags$|=1,Op){let e,t,n,i,r,a;cm(o.$elm$);let s=0;for(;s<lm.length;s++)e=lm[s],t=e.$nodeToRelocate$,t["s-ol"]||(n=qm.createTextNode(""),n["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=n,t));for(s=0;s<lm.length;s++)if(e=lm[s],t=e.$nodeToRelocate$,e.$slotRefNode$){for(i=e.$slotRefNode$.parentNode,r=e.$slotRefNode$.nextSibling,n=t["s-ol"];n=n.previousSibling;)if(a=n["s-nr"],a&&a["s-sn"]===t["s-sn"]&&i===a.parentNode&&(a=a.nextSibling,!a||!a["s-nr"])){r=a;break}(!r&&i!==t.parentNode||t.nextSibling!==r)&&t!==r&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),i.insertBefore(t,r))}else 1===t.nodeType&&(t.hidden=!0)}_p&&sm(o.$elm$),Fm.$flags$&=-2,lm.length=0},pm=(e,t)=>{e.$flags$|=16,e.$ancestorComponent$;return Jm((()=>mm(e,t)))},mm=(e,t)=>{const n=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{}),r=n;let a;return a=Em(r,t?"componentWillLoad":"componentWillUpdate"),a=fm(a,(()=>Em(r,"componentWillRender"))),i(),fm(a,(()=>bm(e,r,t)))},fm=(e,t)=>gm(e)?e.then(t):t(),gm=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,bm=async(e,t,n)=>{const i=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{});i["s-rc"],n&&Qp(e);const a=(e.$cmpMeta$.$tagName$,()=>{});ym(e,t,i,n),a(),r(),vm(e)},ym=(e,t,n,i)=>{try{Pp=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(wp||Ep)&&(xp||Ep)&&(Tp||hm(e,t,i))}catch(RD){Im(RD,e.$hostElement$)}return Pp=null,null},vm=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},n=e.$hostElement$;e.$ancestorComponent$,Em(n,"componentDidRender"),64&e.$flags$?(Em(n,"componentDidUpdate"),t()):(e.$flags$|=64,Em(n,"componentDidLoad"),t())},wm=e=>{{const t=Pm(e),n=t.$hostElement$.isConnected;return n&&2==(18&t.$flags$)&&pm(t,!1),n}},Em=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(RD){Im(RD)}},xm=(e,t,n,i)=>{const r=Pm(e),a=e,o=r.$instanceValues$.get(t),s=r.$flags$,l=a;var c,u;c=n,u=i.$members$[t][0],n=null==c||Lp(c)?c:4&u?"false"!==c&&(""===c||!!c):2&u?parseFloat(c):1&u?String(c):c;const d=Number.isNaN(o)&&Number.isNaN(n);if(n!==o&&!d){if(r.$instanceValues$.set(t,n),i.$watchers$&&128&s){const e=i.$watchers$[t];e&&e.map((e=>{try{l[e](n,o,t)}catch(RD){Im(RD,a)}}))}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(n,o,t))return;pm(r,!1)}}},Tm=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const n=Object.entries(t.$members$),i=e.prototype;n.map((([e,[n]])=>{(31&n||32&n)&&Object.defineProperty(i,e,{get(){return t=e,Pm(this).$instanceValues$.get(t);var t},set(n){xm(this,e,n,t)},configurable:!0,enumerable:!0})}));{const r=new Map;i.attributeChangedCallback=function(e,t,n){Fm.jmp((()=>{const t=r.get(e);if(this.hasOwnProperty(t))n=this[t],delete this[t];else if(i.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==n)return;this[t]=(null!==n||"boolean"!=typeof this[t])&&n}))},e.observedAttributes=n.filter((([e,t])=>15&t[0])).map((([e,n])=>{const i=n[1]||e;return r.set(i,e),512&n[0]&&t.$attrsToReflect$.push([e,i]),i}))}}return e},Cm=async(e,t,n,i,r)=>{if(0==(32&t.$flags$)&&(t.$flags$|=32,r=e.constructor,customElements.whenDefined(n.$tagName$).then((()=>t.$flags$|=128)),r.style)){let i=r.style;"string"!=typeof i&&(i=i[t.$modeName$=(e=>Lm.map((t=>t(e))).find((e=>!!e)))(e)]);const a=Kp(n,t.$modeName$);if(!Dm.has(a)){const e=(n.$tagName$,()=>{});((e,t,n)=>{let i=Dm.get(e);Um&&n?(i=i||new CSSStyleSheet,"string"==typeof i?i=t:i.replaceSync(t)):i=t,Dm.set(e,i)})(a,i,!!(1&n.$flags$)),e()}}t.$ancestorComponent$;pm(t,!0)},Sm=e=>{const t=e["s-cr"]=qm.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Nm=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const i=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Mm(this,n)},connectedCallback(){(e=>{if(0==(1&Fm.$flags$)){const t=Pm(e),n=t.$cmpMeta$,i=(n.$tagName$,()=>{});1&t.$flags$?(km(e,t,n.$listeners$),(null==t?void 0:t.$lazyInstance$)?t.$lazyInstance$:(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then((()=>{t.$lazyInstance$}))):(t.$flags$|=1,12&n.$flags$&&Sm(e),n.$members$&&Object.entries(n.$members$).map((([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}})),Cm(e,t,n)),i()}})(this),i&&i.call(this)},disconnectedCallback(){(async e=>{if(0==(1&Fm.$flags$)){const t=Pm(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)})}}),e.is=n.$tagName$,Tm(e,n)},km=(e,t,n,i)=>{n&&n.map((([n,i,r])=>{const a=_m(e,n),o=Am(t,r),s=Om(n);Fm.ael(a,i,o,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>Fm.rel(a,i,o,s)))}))},Am=(e,t)=>n=>{try{Cp||e.$hostElement$[t](n)}catch(RD){Im(RD)}},_m=(e,t)=>4&t?qm:8&t?jm:16&t?qm.body:e,Om=e=>zm?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),Rm=new WeakMap,Pm=e=>Rm.get(e),Mm=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return km(e,n,t.$listeners$),Rm.set(e,n)},$m=(e,t)=>t in e,Im=(e,t)=>(0,console.error)(e,t),Dm=new Map,Lm=[],jm="undefined"!=typeof window?window:{},qm=jm.document||{head:{}},Bm=jm.HTMLElement||class{},Fm={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,i)=>e.addEventListener(t,n,i),rel:(e,t,n,i)=>e.removeEventListener(t,n,i),ce:(e,t)=>new CustomEvent(e,t)},zm=(()=>{let e=!1;try{qm.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(RD){}return e})(),Um=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(RD){}return!1})(),Vm=[],Wm=[],Hm=(e,t)=>n=>{e.push(n),Mp||(Mp=!0,t&&4&Fm.$flags$?Gm(Km):Fm.raf(Km))},Qm=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(RD){Im(RD)}e.length=0},Km=()=>{Qm(Vm),Qm(Wm),(Mp=Vm.length>0)&&Fm.raf(Km)},Gm=e=>(e=>Promise.resolve(e))().then(e),Ym=t("r",Hm(Vm,!1)),Jm=t("w",Hm(Wm,!0)),Xm="undefined"!=typeof window?window:void 0,Zm=t("d","undefined"!=typeof document?document:void 0),ef=t("b",((e,t)=>{e.componentOnReady?e.componentOnReady().then((e=>t(e))):sf((()=>t(e)))})),tf=(e,t=[])=>{const n={};return t.forEach((t=>{if(e.hasAttribute(t)){null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t)}})),n},nf=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],rf=(e,t)=>{let n=nf;return t&&t.length>0&&(n=n.filter((e=>!t.includes(e)))),tf(e,n)},af=t("e",((e,t,n,i)=>{var r;if("undefined"!=typeof window){const a=window,o=null===(r=null==a?void 0:a.Ionic)||void 0===r?void 0:r.config;if(o){const r=o.get("_ael");if(r)return r(e,t,n,i);if(o._ael)return o._ael(e,t,n,i)}}return e.addEventListener(t,n,i)})),of=t("g",((e,t,n,i)=>{var r;if("undefined"!=typeof window){const a=window,o=null===(r=null==a?void 0:a.Ionic)||void 0===r?void 0:r.config;if(o){const r=o.get("_rel");if(r)return r(e,t,n,i);if(o._rel)return o._rel(e,t,n,i)}}return e.removeEventListener(t,n,i)})),sf=t("j",(e=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e))),lf=e=>!!e.shadowRoot&&!!e.attachShadow,cf=e=>{const t=e.closest("ion-item");return t?t.querySelector("ion-label"):null},uf=(e,t,n,i,r)=>{if(e||lf(t)){let e=t.querySelector("input.aux-input");e||(e=t.ownerDocument.createElement("input"),e.type="hidden",e.classList.add("aux-input"),t.appendChild(e)),e.disabled=r,e.name=n,e.value=i||""}},df=t("a",((e,t,n)=>Math.max(e,Math.min(t,n)))),hf=(e,t)=>{if(!e){const e="ASSERT: "+t;throw console.error(e),new Error(e)}},pf=(t("n",(e=>e.timeStamp||Date.now())),t("p",(e=>{if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];return{x:e.clientX,y:e.clientY}}if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}})),e=>{const t="rtl"===document.dir;switch(e){case"start":return t;case"end":return!t;default:throw new Error(`"${e}" is not a valid value for [side]. Use "start" or "end" instead.`)}}),mf=(e,t)=>{const n=e._original||e;return{_original:e,emit:ff(n.emit.bind(n),t)}},ff=(e,t=0)=>{let n;return(...i)=>{clearTimeout(n),n=setTimeout(e,t,...i)}},gf=(e,t)=>{if(null!=e||(e={}),null!=t||(t={}),e===t)return!0;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n){if(!(i in t))return!1;if(e[i]!==t[i])return!1}return!0};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let bf;const yf=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vf=e=>{if(void 0===bf){const t=void 0!==e.style.animationName,n=void 0!==e.style.webkitAnimationName;bf=!t&&n?"-webkit-":""}return bf},wf=(e,t,n)=>{const i=t.startsWith("animation")?vf(e):"";e.style.setProperty(i+t,n)},Ef=(e,t)=>{const n=t.startsWith("animation")?vf(e):"";e.style.removeProperty(n+t)},xf=[],Tf=(e=[],t)=>{if(void 0!==t){const n=Array.isArray(t)?t:[t];return[...e,...n]}return e},Cf=t("m",(e=>{let t,n,i,r,a,o,s,l,c,u,d,h,p,m=[],f=[],g=[],b=!1,y={},v=[],w=[],E={},x=0,T=!1,C=!1,S=!0,N=!1,k=!0,A=!1;const _=e,O=[],R=[],P=[],M=[],$=[],I=[],D=[],L=[],j=[],q=[],B="function"==typeof AnimationEffect||void 0!==Xm&&"function"==typeof Xm.AnimationEffect,F="function"==typeof Element&&"function"==typeof Element.prototype.animate&&B,z=()=>q,U=e=>{H(),e&&Q()},V=(e,t)=>(((null==t?void 0:t.oneTimeCallback)?R:O).push({c:e,o:t}),p),W=()=>(O.length=0,R.length=0,p),H=()=>{if(F)q.forEach((e=>{e.cancel()})),q.length=0;else{const e=P.slice();sf((()=>{e.forEach((e=>{Ef(e,"animation-name"),Ef(e,"animation-duration"),Ef(e,"animation-timing-function"),Ef(e,"animation-iteration-count"),Ef(e,"animation-delay"),Ef(e,"animation-play-state"),Ef(e,"animation-fill-mode"),Ef(e,"animation-direction")}))}))}},Q=()=>{$.forEach((e=>{(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)})),$.length=0},K=()=>void 0!==a?a:s?s.getFill():"both",G=()=>void 0!==c?c:void 0!==o?o:s?s.getDirection():"normal",Y=()=>T?"linear":void 0!==i?i:s?s.getEasing():"linear",J=()=>C?0:void 0!==u?u:void 0!==n?n:s?s.getDuration():0,X=()=>void 0!==r?r:s?s.getIterations():1,Z=()=>void 0!==d?d:void 0!==t?t:s?s.getDelay():0,ee=e=>{F?z().forEach((t=>{if(t.effect.setKeyframes)t.effect.setKeyframes(e);else{const n=new KeyframeEffect(t.effect.target,e,t.effect.getTiming());t.effect=n}})):ne()},te=()=>{0!==x&&(x--,0===x&&((()=>{ue(),L.forEach((e=>e())),j.forEach((e=>e()));const e=S?1:0,t=v,n=w,i=E;P.forEach((e=>{const r=e.classList;t.forEach((e=>r.add(e))),n.forEach((e=>r.remove(e)));for(const t in i)i.hasOwnProperty(t)&&wf(e,t,i[t])})),O.forEach((t=>t.c(e,p))),R.forEach((t=>t.c(e,p))),R.length=0,k=!0,S&&(N=!0),S=!0})(),s&&s.animationFinish()))},ne=(t=!0)=>{Q();const n=(e=>(e.forEach((e=>{for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];if("easing"===t)e["animation-timing-function"]=n,delete e[t];else{const i=yf(t);i!==t&&(e[i]=n,delete e[t])}}})),e))(m);P.forEach((i=>{if(n.length>0){const r=((e=[])=>e.map((e=>{const t=e.offset,n=[];for(const i in e)e.hasOwnProperty(i)&&"offset"!==i&&n.push(`${i}: ${e[i]};`);return`${100*t}% { ${n.join(" ")} }`})).join(" "))(n);h=void 0!==e?e:(e=>{let t=xf.indexOf(e);return t<0&&(t=xf.push(e)-1),`ion-animation-${t}`})(r);const a=((e,t,n)=>{var i;const r=(e=>{const t=void 0!==e.getRootNode?e.getRootNode():e;return t.head||t})(n),a=vf(n),o=r.querySelector("#"+e);if(o)return o;const s=(null!==(i=n.ownerDocument)&&void 0!==i?i:document).createElement("style");return s.id=e,s.textContent=`@${a}keyframes ${e} { ${t} } @${a}keyframes ${e}-alt { ${t} }`,r.appendChild(s),s})(h,r,i);$.push(a),wf(i,"animation-duration",`${J()}ms`),wf(i,"animation-timing-function",Y()),wf(i,"animation-delay",`${Z()}ms`),wf(i,"animation-fill-mode",K()),wf(i,"animation-direction",G());const o=X()===1/0?"infinite":X().toString();wf(i,"animation-iteration-count",o),wf(i,"animation-play-state","paused"),t&&wf(i,"animation-name",`${a.id}-alt`),sf((()=>{wf(i,"animation-name",a.id||null)}))}}))},ie=(e=!0)=>{(()=>{I.forEach((e=>e())),D.forEach((e=>e()));const e=f,t=g,n=y;P.forEach((i=>{const r=i.classList;e.forEach((e=>r.add(e))),t.forEach((e=>r.remove(e)));for(const e in n)n.hasOwnProperty(e)&&wf(i,e,n[e])}))})(),m.length>0&&(F?(P.forEach((e=>{const t=e.animate(m,{id:_,delay:Z(),duration:J(),easing:Y(),iterations:X(),fill:K(),direction:G()});t.pause(),q.push(t)})),q.length>0&&(q[0].onfinish=()=>{te()})):ne(e)),b=!0},re=e=>{if(e=Math.min(Math.max(e,0),.9999),F)q.forEach((t=>{t.currentTime=t.effect.getComputedTiming().delay+J()*e,t.pause()}));else{const t=`-${J()*e}ms`;P.forEach((e=>{m.length>0&&(wf(e,"animation-delay",t),wf(e,"animation-play-state","paused"))}))}},ae=e=>{q.forEach((e=>{e.effect.updateTiming({delay:Z(),duration:J(),easing:Y(),iterations:X(),fill:K(),direction:G()})})),void 0!==e&&re(e)},oe=(e=!0,t)=>{sf((()=>{P.forEach((n=>{wf(n,"animation-name",h||null),wf(n,"animation-duration",`${J()}ms`),wf(n,"animation-timing-function",Y()),wf(n,"animation-delay",void 0!==t?`-${t*J()}ms`:`${Z()}ms`),wf(n,"animation-fill-mode",K()||null),wf(n,"animation-direction",G()||null);const i=X()===1/0?"infinite":X().toString();wf(n,"animation-iteration-count",i),e&&wf(n,"animation-name",`${h}-alt`),sf((()=>{wf(n,"animation-name",h||null)}))}))}))},se=(e=!1,t=!0,n)=>(e&&M.forEach((i=>{i.update(e,t,n)})),F?ae(n):oe(t,n),p),le=()=>{b&&(F?q.forEach((e=>{e.pause()})):P.forEach((e=>{wf(e,"animation-play-state","paused")})),A=!0)},ce=()=>{l=void 0,te()},ue=()=>{l&&clearTimeout(l)},de=()=>{P.forEach((e=>{Ef(e,"animation-duration"),Ef(e,"animation-delay"),Ef(e,"animation-play-state")}))},he=e=>new Promise((t=>{(null==e?void 0:e.sync)&&(C=!0,V((()=>C=!1),{oneTimeCallback:!0})),b||ie(),N&&(F?(re(0),ae()):oe(),N=!1),k&&(x=M.length+1,k=!1),V((()=>t()),{oneTimeCallback:!0}),M.forEach((e=>{e.play()})),F?(q.forEach((e=>{e.play()})),0!==m.length&&0!==P.length||te()):(()=>{if(ue(),sf((()=>{P.forEach((e=>{m.length>0&&wf(e,"animation-play-state","running")}))})),0===m.length||0===P.length)te();else{const e=Z()||0,t=J()||0,n=X()||1;isFinite(n)&&(l=setTimeout(ce,e+t*n+100)),((e,t)=>{let n;const i={passive:!0},r=()=>{n&&n()},a=n=>{e===n.target&&(r(),t(n))};e&&(e.addEventListener("webkitAnimationEnd",a,i),e.addEventListener("animationend",a,i),n=()=>{e.removeEventListener("webkitAnimationEnd",a,i),e.removeEventListener("animationend",a,i)})})(P[0],(()=>{ue(),sf((()=>{de(),sf(te)}))}))}})(),A=!1})),pe=(e,t)=>{const n=m[0];return void 0===n||void 0!==n.offset&&0!==n.offset?m=[{offset:0,[e]:t},...m]:n[e]=t,p};return p={parentAnimation:s,elements:P,childAnimations:M,id:_,animationFinish:te,from:pe,to:(e,t)=>{const n=m[m.length-1];return void 0===n||void 0!==n.offset&&1!==n.offset?m=[...m,{offset:1,[e]:t}]:n[e]=t,p},fromTo:(e,t,n)=>pe(e,t).to(e,n),parent:e=>(s=e,p),play:he,pause:()=>(M.forEach((e=>{e.pause()})),le(),p),stop:()=>{M.forEach((e=>{e.stop()})),b&&(H(),b=!1),T=!1,C=!1,k=!0,c=void 0,u=void 0,d=void 0,x=0,N=!1,S=!0,A=!1},destroy:e=>(M.forEach((t=>{t.destroy(e)})),U(e),P.length=0,M.length=0,m.length=0,W(),b=!1,k=!0,p),keyframes:e=>{const t=m!==e;return m=e,t&&ee(m),p},addAnimation:e=>{if(null!=e)if(Array.isArray(e))for(const t of e)t.parent(p),M.push(t);else e.parent(p),M.push(e);return p},addElement:e=>{if(null!=e)if(1===e.nodeType)P.push(e);else if(e.length>=0)for(let t=0;t<e.length;t++)P.push(e[t]);else console.error("Invalid addElement value");return p},update:se,fill:e=>(a=e,se(!0),p),direction:e=>(o=e,se(!0),p),iterations:e=>(r=e,se(!0),p),duration:e=>(F||0!==e||(e=1),n=e,se(!0),p),easing:e=>(i=e,se(!0),p),delay:e=>(t=e,se(!0),p),getWebAnimations:z,getKeyframes:()=>m,getFill:K,getDirection:G,getDelay:Z,getIterations:X,getEasing:Y,getDuration:J,afterAddRead:e=>(L.push(e),p),afterAddWrite:e=>(j.push(e),p),afterClearStyles:(e=[])=>{for(const t of e)E[t]="";return p},afterStyles:(e={})=>(E=e,p),afterRemoveClass:e=>(w=Tf(w,e),p),afterAddClass:e=>(v=Tf(v,e),p),beforeAddRead:e=>(I.push(e),p),beforeAddWrite:e=>(D.push(e),p),beforeClearStyles:(e=[])=>{for(const t of e)y[t]="";return p},beforeStyles:(e={})=>(y=e,p),beforeRemoveClass:e=>(g=Tf(g,e),p),beforeAddClass:e=>(f=Tf(f,e),p),onFinish:V,isRunning:()=>0!==x&&!A,progressStart:(e=!1,t)=>(M.forEach((n=>{n.progressStart(e,t)})),le(),T=e,b||ie(),se(!1,!0,t),p),progressStep:e=>(M.forEach((t=>{t.progressStep(e)})),re(e),p),progressEnd:(e,t,n)=>(T=!1,M.forEach((i=>{i.progressEnd(e,t,n)})),void 0!==n&&(u=n),N=!1,S=!0,0===e?(c="reverse"===G()?"normal":"reverse","reverse"===c&&(S=!1),F?(se(),re(1-t)):(d=(1-t)*J()*-1,se(!1,!1))):1===e&&(F?(se(),re(t)):(d=t*J()*-1,se(!1,!1))),void 0!==e&&(V((()=>{u=void 0,c=void 0,d=void 0}),{oneTimeCallback:!0}),s||he()),p)}})),Sf="ionViewWillLeave",Nf="ionViewDidLeave",kf="ionViewWillUnload",Af=e=>new Promise(((t,n)=>{Jm((()=>{_f(e),Of(e).then((n=>{n.animation&&n.animation.destroy(),Rf(e),t(n)}),(t=>{Rf(e),n(t)}))}))})),_f=e=>{const t=e.enteringEl,n=e.leavingEl;Uf(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),zf(t,!1),t.style.setProperty("pointer-events","none"),n&&(zf(n,!1),n.style.setProperty("pointer-events","none"))},Of=async e=>{const t=await Pf(e);return t&&$p?Mf(t,e):$f(e)},Rf=e=>{const t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),void 0!==n&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},Pf=async e=>{if(!e.leavingEl||!e.animated||0===e.duration)return;if(e.animationBuilder)return e.animationBuilder;return"ios"===e.mode?(await vp((()=>n.import("./ios.transition-legacy-0ef0a2e7.js")))).iosTransitionAnimation:(await vp((()=>n.import("./md.transition-legacy-af9525cb.js")))).mdTransitionAnimation},Mf=async(e,t)=>{await If(t,!0);const n=e(t.baseEl,t);jf(t.enteringEl,t.leavingEl);const i=await Lf(n,t);return t.progressCallback&&t.progressCallback(void 0),i&&qf(t.enteringEl,t.leavingEl),{hasCompleted:i,animation:n}},$f=async e=>{const t=e.enteringEl,n=e.leavingEl;return await If(e,!1),jf(t,n),qf(t,n),{hasCompleted:!0}},If=async(e,t)=>{(void 0!==e.deepWait?e.deepWait:t)&&await Promise.all([Ff(e.enteringEl),Ff(e.leavingEl)]),await Df(e.viewIsReady,e.enteringEl)},Df=async(e,t)=>{e&&await e(t)},Lf=(e,t)=>{const n=t.progressCallback,i=new Promise((t=>{e.onFinish((e=>t(1===e)))}));return n?(e.progressStart(!0),n(e)):e.play(),i},jf=(e,t)=>{Bf(t,Sf),Bf(e,"ionViewWillEnter")},qf=(e,t)=>{Bf(e,"ionViewDidEnter"),Bf(t,Nf)},Bf=(e,t)=>{if(e){const n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},Ff=async e=>{const t=e;if(t){if(null!=t.componentOnReady){if(null!=await t.componentOnReady())return}else if(null!=t.__registerHost){const e=new Promise((e=>sf(e)));return void(await e)}await Promise.all(Array.from(t.children).map(Ff))}},zf=(e,t)=>{t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},Uf=(e,t,n)=>{void 0!==e&&(e.style.zIndex="back"===n?"99":"101"),void 0!==t&&(t.style.zIndex="100")},Vf=(t("o",(e=>{if(e.classList.contains("ion-page"))return e;const t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e})),(e,t,n,i,r)=>Hf(e[1],t[1],n[1],i[1],r).map((r=>Wf(e[0],t[0],n[0],i[0],r)))),Wf=(e,t,n,i,r)=>r*(3*t*Math.pow(r-1,2)+r*(-3*n*r+3*n+i*r))-e*Math.pow(r-1,3),Hf=(e,t,n,i,r)=>Qf((i-=r)-3*(n-=r)+3*(t-=r)-(e-=r),3*n-6*t+3*e,3*t-3*e,e).filter((e=>e>=0&&e<=1)),Qf=(e,t,n,i)=>{if(0===e)return((e,t,n)=>{const i=t*t-4*e*n;return i<0?[]:[(-t+Math.sqrt(i))/(2*e),(-t-Math.sqrt(i))/(2*e)]})(t,n,i);const r=(3*(n/=e)-(t/=e)*t)/3,a=(2*t*t*t-9*t*n+27*(i/=e))/27;if(0===r)return[Math.pow(-a,1/3)];if(0===a)return[Math.sqrt(-r),-Math.sqrt(-r)];const o=Math.pow(a/2,2)+Math.pow(r/3,3);if(0===o)return[Math.pow(a/2,.5)-t/3];if(o>0)return[Math.pow(-a/2+Math.sqrt(o),1/3)-Math.pow(a/2+Math.sqrt(o),1/3)-t/3];const s=Math.sqrt(Math.pow(-r/3,3)),l=Math.acos(-a/(2*Math.sqrt(Math.pow(-r/3,3)))),c=2*Math.pow(s,1/3);return[c*Math.cos(l/3)-t/3,c*Math.cos((l+2*Math.PI)/3)-t/3,c*Math.cos((l+4*Math.PI)/3)-t/3]};class Kf{constructor(e,t,n,i,r){this.id=t,this.name=n,this.disableScroll=r,this.priority=1e6*i+t,this.ctrl=e}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Gf{constructor(e,t,n,i){this.id=t,this.disable=n,this.disableScroll=i,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Yf="backdrop-no-scroll",Jf=new
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){var t;return new Kf(this,this.newID(),e.name,null!==(t=e.priority)&&void 0!==t?t:0,!!e.disableScroll)}createBlocker(e={}){return new Gf(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,n){return this.canStart(e)?(this.requestedStart.set(t,n),!0):(this.requestedStart.delete(t),!1)}capture(e,t,n){if(!this.start(e,t,n))return!1;const i=this.requestedStart;let r=-1e4;if(i.forEach((e=>{r=Math.max(r,e)})),r===n){this.capturedId=t,i.clear();const n=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(n),!0}return i.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let n=this.disabledGestures.get(e);void 0===n&&(n=new Set,this.disabledGestures.set(e,n)),n.add(t)}enableGesture(e,t){const n=this.disabledGestures.get(e);void 0!==n&&n.delete(t)}disableScroll(e){this.disabledScroll.add(e),1===this.disabledScroll.size&&document.body.classList.add(Yf)}enableScroll(e){this.disabledScroll.delete(e),0===this.disabledScroll.size&&document.body.classList.remove(Yf)}canStart(e){return void 0===this.capturedId&&!this.isDisabled(e)}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}},Xf=(e,t,n,i)=>{const r=Zf(e)?{capture:!!i.capture,passive:!!i.passive}:!!i.capture;let a,o;return e.__zone_symbol__addEventListener?(a="__zone_symbol__addEventListener",o="__zone_symbol__removeEventListener"):(a="addEventListener",o="removeEventListener"),e[a](t,n,r),()=>{e[o](t,n,r)}},Zf=e=>{if(void 0===eg)try{const t=Object.defineProperty({},"passive",{get:()=>{eg=!0}});e.addEventListener("optsTest",(()=>{}),t)}catch(RD){eg=!1}return!!eg};let eg;const tg=e=>e instanceof Document?e:e.ownerDocument,ng=t("c",(e=>{let t=!1,n=!1,i=!0,r=!1;const a=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),o=a.canStart,s=a.onWillStart,l=a.onStart,c=a.onEnd,u=a.notCaptured,d=a.onMove,h=a.threshold,p=a.passive,m=a.blurOnStart,f={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},g=((e,t,n)=>{const i=n*(Math.PI/180),r="x"===e,a=Math.cos(i),o=t*t;let s=0,l=0,c=!1,u=0;return{start(e,t){s=e,l=t,u=0,c=!0},detect(e,t){if(!c)return!1;const n=e-s,i=t-l,d=n*n+i*i;if(d<o)return!1;const h=Math.sqrt(d),p=(r?n:i)/h;return u=p>a?1:p<-a?-1:0,c=!1,!0},isGesture:()=>0!==u,getDirection:()=>u}})(a.direction,a.threshold,a.maxAngle),b=Jf.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),y=()=>{t&&(r=!1,d&&d(f))},v=()=>!!b.capture()&&(t=!0,i=!1,f.startX=f.currentX,f.startY=f.currentY,f.startTime=f.currentTime,s?s(f).then(w):w(),!0),w=()=>{m&&(()=>{if("undefined"!=typeof document){const e=document.activeElement;(null==e?void 0:e.blur)&&e.blur()}})(),l&&l(f),i=!0},E=()=>{t=!1,n=!1,r=!1,i=!0,b.release()},x=e=>{const n=t,r=i;E(),r&&(ig(f,e),n?c&&c(f):u&&u(f))},T=((e,t,n,i,r)=>{let a,o,s,l,c,u,d,h=0;const p=i=>{h=Date.now()+2e3,t(i)&&(!o&&n&&(o=Xf(e,"touchmove",n,r)),s||(s=Xf(i.target,"touchend",f,r)),l||(l=Xf(i.target,"touchcancel",f,r)))},m=i=>{h>Date.now()||t(i)&&(!u&&n&&(u=Xf(tg(e),"mousemove",n,r)),d||(d=Xf(tg(e),"mouseup",g,r)))},f=e=>{b(),i&&i(e)},g=e=>{y(),i&&i(e)},b=()=>{o&&o(),s&&s(),l&&l(),o=s=l=void 0},y=()=>{u&&u(),d&&d(),u=d=void 0},v=()=>{b(),y()},w=(t=!0)=>{t?(a||(a=Xf(e,"touchstart",p,r)),c||(c=Xf(e,"mousedown",m,r))):(a&&a(),c&&c(),a=c=void 0,v())};return{enable:w,stop:v,destroy:()=>{w(!1),i=n=t=void 0}}})(a.el,(e=>{const t=ag(e);return!(n||!i)&&(rg(e,f),f.startX=f.currentX,f.startY=f.currentY,f.startTime=f.currentTime=t,f.velocityX=f.velocityY=f.deltaX=f.deltaY=0,f.event=e,(!o||!1!==o(f))&&(b.release(),!!b.start()&&(n=!0,0===h?v():(g.start(f.startX,f.startY),!0))))}),(e=>{t?!r&&i&&(r=!0,ig(f,e),requestAnimationFrame(y)):(ig(f,e),g.detect(f.currentX,f.currentY)&&(g.isGesture()&&v()||C()))}),x,{capture:!1,passive:p}),C=()=>{E(),T.stop(),u&&u(f)};return{enable(e=!0){e||(t&&x(void 0),E()),T.enable(e)},destroy(){b.destroy(),T.destroy()}}})),ig=(e,t)=>{if(!t)return;const n=e.currentX,i=e.currentY,r=e.currentTime;rg(t,e);const a=e.currentX,o=e.currentY,s=(e.currentTime=ag(t))-r;if(s>0&&s<100){const t=(a-n)/s,r=(o-i)/s;e.velocityX=.7*t+.3*e.velocityX,e.velocityY=.7*r+.3*e.velocityY}e.deltaX=a-e.startX,e.deltaY=o-e.startY,e.event=t},rg=(e,t)=>{let n=0,i=0;if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];n=e.clientX,i=e.clientY}else void 0!==e.pageX&&(n=e.pageX,i=e.pageY)}t.currentX=n,t.currentY=i},ag=e=>e.timeStamp||Date.now(),og=Object.freeze(Object.defineProperty({__proto__:null,GESTURE_CONTROLLER:Jf,createGesture:ng},Symbol.toStringTag,{value:"Module"}));
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
class sg{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const n=this.m.get(e);return void 0!==n?n:t}getBoolean(e,t=!1){const n=this.m.get(e);return void 0===n?t:"string"==typeof n?"true"===n:!!n}getNumber(e,t){const n=parseFloat(this.m.get(e));return isNaN(n)?void 0!==t?t:NaN:n}set(e,t){this.m.set(e,t)}}const lg=new sg,cg=(e,t)=>e.substr(0,t.length)===t,ug="ionic:",dg="ionic-persist-config",hg=(e,t)=>("string"==typeof e&&(t=e,e=void 0),(e=>pg(e))(e).includes(t)),pg=(e=window)=>{if(void 0===e)return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=mg(e),t.forEach((t=>e.document.documentElement.classList.add(`plt-${t}`)))),t},mg=e=>{const t=lg.get("platform");return Object.keys(Tg).filter((n=>{const i=null==t?void 0:t[n];return"function"==typeof i?i(e):Tg[n](e)}))},fg=e=>!!Eg(e,/iPad/i)||!(!Eg(e,/Macintosh/i)||!bg(e)),gg=e=>Eg(e,/android|sink/i),bg=e=>xg(e,"(any-pointer:coarse)"),yg=e=>vg(e)||wg(e),vg=e=>!!(e.cordova||e.phonegap||e.PhoneGap),wg=e=>{const t=e.Capacitor;return!!(null==t?void 0:t.isNative)},Eg=(e,t)=>t.test(e.navigator.userAgent),xg=(e,t)=>{var n;return null===(n=e.matchMedia)||void 0===n?void 0:n.call(e,t).matches},Tg={ipad:fg,iphone:e=>Eg(e,/iPhone/i),ios:e=>Eg(e,/iPhone|iPod/i)||fg(e),android:gg,phablet:e=>{const t=e.innerWidth,n=e.innerHeight,i=Math.min(t,n),r=Math.max(t,n);return i>390&&i<520&&r>620&&r<800},tablet:e=>{const t=e.innerWidth,n=e.innerHeight,i=Math.min(t,n),r=Math.max(t,n);return fg(e)||(e=>gg(e)&&!Eg(e,/mobile/i))(e)||i>460&&i<820&&r>780&&r<1400},cordova:vg,capacitor:wg,electron:e=>Eg(e,/electron/i),pwa:e=>{var t;return!(!(null===(t=e.matchMedia)||void 0===t?void 0:t.call(e,"(display-mode: standalone)").matches)&&!e.navigator.standalone)},mobile:bg,mobileweb:e=>bg(e)&&!yg(e),desktop:e=>!bg(e),hybrid:yg};let Cg;const Sg=e=>e&&(e=>Pm(e).$modeName$)(e)||Cg,Ng=(e={})=>{if("undefined"==typeof window)return;const t=window.document,n=window,i=n.Ionic=n.Ionic||{},r={};var a;e._ael&&(r.ael=e._ael),e._rel&&(r.rel=e._rel),e._ce&&(r.ce=e._ce),a=r,Object.assign(Fm,a);const o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(e=>{try{const t=e.sessionStorage.getItem(dg);return null!==t?JSON.parse(t):{}}catch(RD){return{}}})(n)),{persistConfig:!1}),i.config),(e=>{const t={};return e.location.search.slice(1).split("&").map((e=>e.split("="))).map((([e,t])=>[decodeURIComponent(e),decodeURIComponent(t)])).filter((([e])=>cg(e,ug))).map((([e,t])=>[e.slice(ug.length),t])).forEach((([e,n])=>{t[e]=n})),t})(n)),e);lg.reset(o),lg.getBoolean("persistConfig")&&((e,t)=>{try{e.sessionStorage.setItem(dg,JSON.stringify(t))}catch(RD){return}})(n,o),pg(n),i.config=lg,i.mode=Cg=lg.get("mode",t.documentElement.getAttribute("mode")||(hg(n,"ios")?"ios":"md")),lg.set("mode",Cg),t.documentElement.setAttribute("mode",Cg),t.documentElement.classList.add(Cg),lg.getBoolean("_testing")&&lg.set("animated",!1);const s=e=>{var t;return null===(t=e.tagName)||void 0===t?void 0:t.startsWith("ION-")},l=e=>["ios","md"].includes(e);var c;c=e=>{for(;e;){const t=e.mode||e.getAttribute("mode");if(t){if(l(t))return t;s(e)&&console.warn('Invalid ionic mode: "'+t+'", expected: "ios" or "md"')}e=e.parentElement}return Cg},Lm.push(c)},kg=e=>{try{if(e instanceof Mg)return e.value;if(!Og()||"string"!=typeof e||""===e)return e;if(e.includes("onload="))return"";const t=document.createDocumentFragment(),n=document.createElement("div");t.appendChild(n),n.innerHTML=e,Pg.forEach((e=>{const n=t.querySelectorAll(e);for(let i=n.length-1;i>=0;i--){const e=n[i];e.parentNode?e.parentNode.removeChild(e):t.removeChild(e);const r=_g(e);for(let t=0;t<r.length;t++)Ag(r[t])}}));const i=_g(t);for(let e=0;e<i.length;e++)Ag(i[e]);const r=document.createElement("div");r.appendChild(t);const a=r.querySelector("div");return null!==a?a.innerHTML:r.innerHTML}catch(t){return console.error(t),""}},Ag=e=>{if(e.nodeType&&1!==e.nodeType)return;if("undefined"!=typeof NamedNodeMap&&!(e.attributes instanceof NamedNodeMap))return void e.remove();for(let n=e.attributes.length-1;n>=0;n--){const t=e.attributes.item(n),i=t.name;if(!Rg.includes(i.toLowerCase())){e.removeAttribute(i);continue}const r=t.value,a=e[i];(null!=r&&r.toLowerCase().includes("javascript:")||null!=a&&a.toLowerCase().includes("javascript:"))&&e.removeAttribute(i)}const t=_g(e);for(let n=0;n<t.length;n++)Ag(t[n])},_g=e=>null!=e.children?e.children:e.childNodes,Og=()=>{var e;const t=window,n=null===(e=null==t?void 0:t.Ionic)||void 0===e?void 0:e.config;return!n||(n.get?n.get("sanitizerEnabled",!0):!0===n.sanitizerEnabled||void 0===n.sanitizerEnabled)},Rg=["class","id","href","src","name","slot"],Pg=["script","style","iframe","meta","link","object","embed"];class Mg{constructor(e){this.value=e}}const $g=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:99,OVERLAY_BACK_BUTTON_PRIORITY:100,blockHardwareBackButton:()=>{document.addEventListener("backbutton",(()=>{}))},startHardwareBackButton:()=>{const e=document;let t=!1;e.addEventListener("backbutton",(()=>{if(t)return;let n=0,i=[];const r=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(e,t){i.push({priority:e,handler:t,id:n++})}}});e.dispatchEvent(r);const a=()=>{if(i.length>0){let e={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};i.forEach((t=>{t.priority>=e.priority&&(e=t)})),t=!0,i=i.filter((t=>t.id!==e.id)),(async e=>{try{if(null==e?void 0:e.handler){const t=e.handler(a);null!=t&&await t}}catch(RD){console.error(RD)}})(e).then((()=>t=!1))}};a()}))}},Symbol.toStringTag,{value:"Module"})),Ig=e=>Cf().duration(e?400:300),Dg=e=>{let t,n;const i=e.width+8,r=Cf(),a=Cf();e.isEndSide?(t=i+"px",n="0px"):(t=-i+"px",n="0px"),r.addElement(e.menuInnerEl).fromTo("transform",`translateX(${t})`,`translateX(${n})`);const o="ios"===Sg(e),s=o?.2:.25;return a.addElement(e.backdropEl).fromTo("opacity",.01,s),Ig(o).addAnimation([r,a])},Lg=e=>{let t,n;const i=Sg(e),r=e.width;e.isEndSide?(t=-r+"px",n=r+"px"):(t=r+"px",n=-r+"px");const a=Cf().addElement(e.menuInnerEl).fromTo("transform",`translateX(${n})`,"translateX(0px)"),o=Cf().addElement(e.contentEl).fromTo("transform","translateX(0px)",`translateX(${t})`),s=Cf().addElement(e.backdropEl).fromTo("opacity",.01,.32);return Ig("ios"===i).addAnimation([a,o,s])},jg=e=>{const t=Sg(e),n=e.width*(e.isEndSide?-1:1)+"px",i=Cf().addElement(e.contentEl).fromTo("transform","translateX(0px)",`translateX(${n})`);return Ig("ios"===t).addAnimation(i)},qg=()=>{const e=new Map,t=[],n=async e=>{if(await u(),"start"===e||"end"===e){const t=c((t=>t.side===e&&!t.disabled));return t||c((t=>t.side===e))}if(null!=e)return c((t=>t.menuId===e));const n=c((e=>!e.disabled));return n||(t.length>0?t[0].el:void 0)},i=async()=>(await u(),o()),r=(t,n)=>{e.set(t,n)},a=e=>{const n=e.side;t.filter((t=>t.side===n&&t!==e)).forEach((e=>e.disabled=!0))},o=()=>c((e=>e._isOpen)),s=()=>t.map((e=>e.el)),l=()=>t.some((e=>e.isAnimating)),c=e=>{const n=t.find(e);if(void 0!==n)return n.el},u=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map((e=>new Promise((t=>ef(e,t))))));return r("reveal",jg),r("push",Lg),r("overlay",Dg),"undefined"!=typeof document&&document.addEventListener("ionBackButton",(e=>{const t=o();t&&e.detail.register(99,(()=>t.close()))})),{registerAnimation:r,get:n,getMenus:async()=>(await u(),s()),getOpen:i,isEnabled:async e=>{const t=await n(e);return!!t&&!t.disabled},swipeGesture:async(e,t)=>{const i=await n(t);return i&&(i.swipeGesture=e),i},isAnimating:async()=>(await u(),l()),isOpen:async e=>{if(null!=e){const t=await n(e);return void 0!==t&&t.isOpen()}return void 0!==await i()},enable:async(e,t)=>{const i=await n(t);return i&&(i.disabled=!e),i},toggle:async e=>{const t=await n(e);return!!t&&t.toggle()},close:async e=>{const t=await(void 0!==e?n(e):i());return void 0!==t&&t.close()},open:async e=>{const t=await n(e);return!!t&&t.open()},_getOpenSync:o,_createAnimation:(t,n)=>{const i=e.get(t);if(!i)throw new Error("animation not registered");return i(n)},_register:e=>{t.indexOf(e)<0&&(e.disabled||a(e),t.push(e))},_unregister:e=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},_setOpen:async(e,t,n)=>{if(l())return!1;if(t){const t=await i();t&&e.el!==t&&await t.setOpen(!1,!1)}return e._setOpen(t,n)},_setActiveMenu:a}},Bg=qg(),Fg=async(e,t,n,i,r,a)=>{var o;if(e)return e.attachViewToDom(t,n,r,i);if(!(a||"string"==typeof n||n instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof n?null===(o=t.ownerDocument)||void 0===o?void 0:o.createElement(n):n;return i&&i.forEach((e=>s.classList.add(e))),r&&Object.assign(s,r),t.appendChild(s),await new Promise((e=>ef(s,e))),s},zg=(e,...t)=>console.warn(`[Ionic Warning]: ${e}`,...t),Ug=(e,...t)=>console.error(`[Ionic Error]: ${e}`,...t);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let Vg=0,Wg=0;const Hg=new WeakMap,Qg='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Kg=(e,t)=>{let n=e.querySelector(Qg);const i=null==n?void 0:n.shadowRoot;i&&(n=i.querySelector(Qg)||n),n?(e=>{if(e.focus(),e.classList.contains("ion-focusable")){const t=e.closest("ion-app");t&&t.setFocus([e])}})(n):t.focus()},Gg=(e,t)=>{const n=Array.from(e.querySelectorAll(Qg));let i=n.length>0?n[n.length-1]:null;const r=null==i?void 0:i.shadowRoot;r&&(i=r.querySelector(Qg)||i),i?i.focus():t.focus()},Yg=(e,t)=>{const n=Xg(t,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),i=e.target;if(!n||!i)return;if(n.classList.contains("ion-disable-focus-trap"))return;n.shadowRoot?(()=>{if(n.contains(i))n.lastFocus=i;else{const e=n.lastFocus;Kg(n,n),e===t.activeElement&&Gg(n,n),n.lastFocus=t.activeElement}})():(()=>{if(n===i)n.lastFocus=void 0;else{const e=((e,t=e)=>e.shadowRoot||t)(n);if(!e.contains(i))return;const r=e.querySelector(".ion-overlay-wrapper");if(!r)return;if(r.contains(i)||i===e.querySelector("ion-backdrop"))n.lastFocus=i;else{const e=n.lastFocus;Kg(r,n),e===t.activeElement&&Gg(r,n),n.lastFocus=t.activeElement}}})()},Jg=e=>{0===Vg&&(Vg=1,e.addEventListener("focus",(t=>{Yg(t,e)}),!0),e.addEventListener("ionBackButton",(t=>{const n=Xg(e);(null==n?void 0:n.backdropDismiss)&&t.detail.register(100,(()=>n.dismiss(void 0,lb)))})),e.addEventListener("keydown",(t=>{if("Escape"===t.key){const t=Xg(e);(null==t?void 0:t.backdropDismiss)&&t.dismiss(void 0,lb)}})))},Xg=(e,t,n)=>{const i=((e,t)=>(void 0===t&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter((e=>e.overlayIndex>0))))(e,t).filter((e=>!e.classList.contains("overlay-hidden")));return void 0===n?i[i.length-1]:i.find((e=>e.id===n))},Zg=(e=!1)=>{const t=tb(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},eb=async e=>{let t=document.activeElement;if(!t)return;const n=null==t?void 0:t.shadowRoot;n&&(t=n.querySelector(Qg)||t),await e.onDidDismiss(),t.focus()},tb=e=>e.querySelector("ion-app")||e.body,nb=async(e,t,n,i)=>{n.classList.remove("overlay-hidden");const r=t(e.el,i);e.animated&&lg.getBoolean("animated",!0)||r.duration(0),e.keyboardClose&&r.beforeAddWrite((()=>{const e=n.ownerDocument.activeElement;(null==e?void 0:e.matches("input,ion-input, ion-textarea"))&&e.blur()}));const a=Hg.get(e)||[];return Hg.set(e,[...a,r]),await r.play(),!0},ib=(e,t)=>{let n;const i=new Promise((e=>n=e));return rb(e,t,(e=>{n(e.detail)})),i},rb=(e,t,n)=>{const i=r=>{of(e,t,i),n(r)};af(e,t,i)},ab=e=>"cancel"===e||e===lb,ob=e=>e(),sb=(e,t)=>{if("function"==typeof e){return lg.get("_zoneGate",ob)((()=>{try{return e(t)}catch(RD){throw RD}}))}},lb="backdrop",cb="gesture",ub=e=>{let t,n=!1;const i=(()=>{let e,t;return{attachViewToDom:async(n,i,r={},a=[])=>{var o,s;if(e=n,i){const t="string"==typeof i?null===(o=e.ownerDocument)||void 0===o?void 0:o.createElement(i):i;a.forEach((e=>t.classList.add(e))),Object.assign(t,r),e.appendChild(t),await new Promise((e=>ef(t,e)))}else if(e.children.length>0&&("ION-MODAL"===e.tagName||"ION-POPOVER"===e.tagName)&&!e.children[0].classList.contains("ion-delegate-host")){const t=null===(s=e.ownerDocument)||void 0===s?void 0:s.createElement("div");t.classList.add("ion-delegate-host"),a.forEach((e=>t.classList.add(e))),t.append(...e.children),e.appendChild(t)}const l=document.querySelector("ion-app")||document.body;return t=document.createComment("ionic teleport"),e.parentNode.insertBefore(t,e),l.appendChild(e),e},removeViewFromDom:()=>(e&&t&&(t.parentNode.insertBefore(e,t),t.remove()),Promise.resolve())}})(),r=(r=!1)=>{if(t&&!r)return{delegate:t,inline:n};const{el:a,hasController:o,delegate:s}=e,l=a.parentNode;return n=null!==l&&!o,t=n?s||i:s,{inline:n,delegate:t}};return{attachViewToDom:async t=>{const{delegate:n}=r(!0);if(n)return await n.attachViewToDom(e.el,t);const{hasController:i}=e;if(i&&void 0!==t)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:t}=r();t&&void 0!==e.el&&t.removeViewFromDom(e.el.parentElement,e.el)}}};function db(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}"function"==typeof SuppressedError&&SuppressedError;
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const hb="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",pb="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",mb="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>";
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let fb;const gb=e=>{const t=(()=>{if("undefined"==typeof window)return new Map;if(!fb){const e=window;e.Ionicons=e.Ionicons||{},fb=e.Ionicons.map=e.Ionicons.map||new Map}return fb})().get(e);return t||(e=>{const t=new URL(e,Fm.$resourcesUrl$);return t.origin!==jm.location.origin?t.href:t.pathname})(`svg/${e}.svg`)},bb=(e,t,n,i,r)=>{if(n="ios"===(n&&Eb(n))?"ios":"md",i&&"ios"===n?e=Eb(i):r&&"md"===n?e=Eb(r):(e||!t||vb(t)||(e=t),wb(e)&&(e=Eb(e))),!wb(e)||""===e.trim())return null;return""!==e.replace(/[a-z]|-|\d/gi,"")?null:e},yb=e=>wb(e)&&(e=e.trim(),vb(e))?e:null,vb=e=>e.length>0&&/(\/|\.)/.test(e),wb=e=>"string"==typeof e,Eb=e=>e.toLowerCase(),xb=e=>{if(1===e.nodeType){if("script"===e.nodeName.toLowerCase())return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(wb(n)&&0===n.toLowerCase().indexOf("on"))return!1}for(let t=0;t<e.childNodes.length;t++)if(!xb(e.childNodes[t]))return!1}return!0},Tb=new Map,Cb=new Map;let Sb;const Nb=(e,t)=>{let n=Cb.get(e);if(!n){if("undefined"==typeof fetch||"undefined"==typeof document)return Tb.set(e,""),Promise.resolve();if((e=>e.startsWith("data:image/svg+xml"))(e)&&(e=>-1!==e.indexOf(";utf8,"))(e)){Sb||(Sb=new DOMParser);const t=Sb.parseFromString(e,"text/html").querySelector("svg");return t&&Tb.set(e,t.outerHTML),Promise.resolve()}n=fetch(e).then((n=>{if(n.ok)return n.text().then((n=>{n&&!1!==t&&(n=(e=>{const t=document.createElement("div");t.innerHTML=e;for(let i=t.childNodes.length-1;i>=0;i--)"svg"!==t.childNodes[i].nodeName.toLowerCase()&&t.removeChild(t.childNodes[i]);const n=t.firstElementChild;if(n&&"svg"===n.nodeName.toLowerCase()){const e=n.getAttribute("class")||"";if(n.setAttribute("class",(e+" s-ion-icon").trim()),xb(n))return t.innerHTML}return""})(n)),Tb.set(e,n||"")}));Tb.set(e,"")})),Cb.set(e,n)}return n},kb=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=Ab(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((e,t=[])=>{const n={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",(()=>{this.isVisible=!0,this.loadIcon()}))}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const i=this.io=new window.IntersectionObserver((e=>{e[0].isIntersecting&&(i.disconnect(),this.io=void 0,n())}),{rootMargin:t});i.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=(e=>{let t=yb(e.src);if(t)return t;if(t=bb(e.name,e.icon,e.mode,e.ios,e.md),t)return gb(t);if(e.icon){if(t=yb(e.icon),t)return t;if(t=yb(e.icon[e.mode]),t)return t}return null})(this);e&&(Tb.has(e)?this.svgContent=Tb.get(e):Nb(e,this.sanitize).then((()=>this.svgContent=Tb.get(e))))}this.iconName=bb(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{iconName:e,el:t,inheritedAttributes:n}=this,i=this.mode||"md",r=this.flipRtl||e&&(e.indexOf("arrow")>-1||e.indexOf("chevron")>-1)&&!1!==this.flipRtl;return jp(Bp,Object.assign({role:"img",class:Object.assign(Object.assign({[i]:!0},_b(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":!!r&&(a=t,a&&""!==a.dir?"rtl"===a.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))})},n),this.svgContent?jp("div",{class:"icon-inner",innerHTML:this.svgContent}):jp("div",{class:"icon-inner"}));var a}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),Ab=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",_b=e=>e?{"ion-color":!0,[`ion-color-${e}`]:!0}:null;function Ob(){if("undefined"==typeof customElements)return;["ion-icon"].forEach((e=>{if("ion-icon"===e)customElements.get(e)||customElements.define(e,kb)}))}
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Rb=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=Vp(this,"ionBackdropTap",7),this.blocker=Jf.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(e){this.emitTap(e)}emitTap(e){this.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const e=Sg(this);return jp(Bp,{tabindex:"-1","aria-hidden":"true",class:{[e]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",md:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}"}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function Pb(){if("undefined"==typeof customElements)return;["ion-backdrop"].forEach((e=>{if("ion-backdrop"===e)customElements.get(e)||customElements.define(e,Rb)}))}
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Mb=(e,t)=>null!==t.closest(e),$b=(e,t)=>"string"==typeof e&&e.length>0?Object.assign({"ion-color":!0,[`ion-color-${e}`]:!0},t):t,Ib=e=>{const t={};return(e=>{if(void 0!==e)return(Array.isArray(e)?e:e.split(" ")).filter((e=>null!=e)).map((e=>e.trim())).filter((e=>""!==e));return[]})(e).forEach((e=>t[e]=!0)),t},Db=/^[a-z][a-z0-9+\-.]*:/,Lb=async(e,t,n,i)=>{if(null!=e&&"#"!==e[0]&&!Db.test(e)){const r=document.querySelector("ion-router");if(r)return null!=t&&t.preventDefault(),r.push(e,n,i)}return!1},jb=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=Sg(this);return jp(Bp,{class:$b(this.color,{[e]:!0})},jp("slot",null))}static get style(){return{ios:":host{--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff);--padding-top:3px;--padding-end:8px;--padding-bottom:3px;--padding-start:8px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:inline-block;min-width:10px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:13px;font-weight:bold;line-height:1;text-align:center;white-space:nowrap;contain:content;vertical-align:baseline}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(:empty){display:none}:host{border-radius:10px}",md:":host{--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff);--padding-top:3px;--padding-end:8px;--padding-bottom:3px;--padding-start:8px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:inline-block;min-width:10px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:13px;font-weight:bold;line-height:1;text-align:center;white-space:nowrap;contain:content;vertical-align:baseline}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(:empty){display:none}:host{--padding-top:3px;--padding-end:4px;--padding-bottom:4px;--padding-start:4px;border-radius:4px}"}}},[33,"ion-badge",{color:[513]}]);const qb=function(){if("undefined"==typeof customElements)return;["ion-badge"].forEach((e=>{if("ion-badge"===e)customElements.get(e)||customElements.define(e,jb)}))},Bb=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.collapse=!1}render(){const e=Sg(this);return jp(Bp,{class:{[e]:!0,"buttons-collapse":this.collapse}})}static get style(){return{ios:".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-ios-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:28px;line-height:0.67}",md:".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-md-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:48px;height:48px}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}"}}},[34,"ion-buttons",{collapse:[4]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const Fb=function(){if("undefined"==typeof customElements)return;["ion-buttons"].forEach((e=>{if("ion-buttons"===e)customElements.get(e)||customElements.define(e,Bb)}))},zb=e=>{const t=e;let n;return{hasLegacyControl:()=>{if(void 0===n){const e=void 0!==t.label||Ub(t),i=t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby")&&null===t.shadowRoot,r=cf(t);n=!0===t.legacy||!e&&!i&&null!==r}return n}}},Ub=e=>null!==e.shadowRoot&&(!(!Vb.includes(e.tagName)||null===e.querySelector('[slot="label"]'))||!(!Wb.includes(e.tagName)||""===e.textContent)),Vb=["ION-RANGE"],Wb=["ION-TOGGLE","ION-CHECKBOX","ION-RADIO"],Hb=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,t){return new Promise((n=>{Ym((()=>{const i=this.el.getBoundingClientRect(),r=i.width,a=i.height,o=Math.sqrt(r*r+a*a),s=Math.max(a,r),l=this.unbounded?s:o+Kb,c=Math.floor(s*Gb),u=l/c;let d=e-i.left,h=t-i.top;this.unbounded&&(d=.5*r,h=.5*a);const p=d-.5*c,m=h-.5*c,f=.5*r-d,g=.5*a-h;Jm((()=>{const e=document.createElement("div");e.classList.add("ripple-effect");const t=e.style;t.top=m+"px",t.left=p+"px",t.width=t.height=c+"px",t.setProperty("--final-scale",`${u}`),t.setProperty("--translate-end",`${f}px, ${g}px`);(this.el.shadowRoot||this.el).appendChild(e),setTimeout((()=>{n((()=>{Qb(e)}))}),325)}))}))}))}get unbounded(){return"unbounded"===this.type}render(){const e=Sg(this);return jp(Bp,{role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}"}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),Qb=e=>{e.classList.add("fade-out"),setTimeout((()=>{e.remove()}),200)},Kb=10,Gb=.5;
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */function Yb(){if("undefined"==typeof customElements)return;["ion-ripple-effect"].forEach((e=>{if("ion-ripple-effect"===e)customElements.get(e)||customElements.define(e,Hb)}))}
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Jb={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},Xb=e=>{if(void 0===e||""===e)return!0;if(window.matchMedia){const t=Jb[e];return window.matchMedia(t).matches}return!1},Zb="undefined"!=typeof window?window:void 0,ey=Zb&&!!(Zb.CSS&&Zb.CSS.supports&&Zb.CSS.supports("--a: 0")),ty=["","xs","sm","md","lg","xl"],ny=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.offset=void 0,this.offsetXs=void 0,this.offsetSm=void 0,this.offsetMd=void 0,this.offsetLg=void 0,this.offsetXl=void 0,this.pull=void 0,this.pullXs=void 0,this.pullSm=void 0,this.pullMd=void 0,this.pullLg=void 0,this.pullXl=void 0,this.push=void 0,this.pushXs=void 0,this.pushSm=void 0,this.pushMd=void 0,this.pushLg=void 0,this.pushXl=void 0,this.size=void 0,this.sizeXs=void 0,this.sizeSm=void 0,this.sizeMd=void 0,this.sizeLg=void 0,this.sizeXl=void 0}onResize(){wm(this)}getColumns(e){let t;for(const n of ty){const i=Xb(n),r=this[e+n.charAt(0).toUpperCase()+n.slice(1)];i&&void 0!==r&&(t=r)}return t}calculateSize(){const e=this.getColumns("size");if(!e||""===e)return;const t="auto"===e?"auto":ey?`calc(calc(${e} / var(--ion-grid-columns, 12)) * 100%)`:e/12*100+"%";return{flex:`0 0 ${t}`,width:`${t}`,"max-width":`${t}`}}calculatePosition(e,t){const n=this.getColumns(e);if(!n)return;return{[t]:ey?`calc(calc(${n} / var(--ion-grid-columns, 12)) * 100%)`:n>0&&n<12?n/12*100+"%":"auto"}}calculateOffset(e){return this.calculatePosition("offset",e?"margin-right":"margin-left")}calculatePull(e){return this.calculatePosition("pull",e?"left":"right")}calculatePush(e){return this.calculatePosition("push",e?"right":"left")}render(){const e="rtl"===document.dir,t=Sg(this);return jp(Bp,{class:{[t]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(e)),this.calculatePull(e)),this.calculatePush(e)),this.calculateSize())},jp("slot",null))}static get style(){return":host{-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}"}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]);const iy=function(){if("undefined"==typeof customElements)return;["ion-col"].forEach((e=>{if("ion-col"===e)customElements.get(e)||customElements.define(e,ny)}))},ry=t("i",(e=>e&&""!==e.dir?"rtl"===e.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))),ay=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Vp(this,"ionScrollStart",7),this.ionScroll=Vp(this,"ionScroll",7),this.ionScrollEnd=Vp(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=null===this.el.closest("ion-menu, ion-popover, ion-modal")}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout((()=>{null!==this.el.offsetParent&&this.resize()}),100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,t=Sg(this);return void 0===e?"ios"===t&&hg("ios"):e}resize(){this.fullscreen?Ym((()=>this.readDimensions())):0===this.cTop&&0===this.cBottom||(this.cTop=this.cBottom=0,wm(this))}readDimensions(){const e=oy(this.el),t=Math.max(this.el.offsetTop,0),n=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||n!==this.cBottom)&&(this.cTop=t,this.cBottom=n,wm(this))}onScroll(e){const t=Date.now(),n=!this.isScrolling;this.lastScroll=t,n&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,Ym((t=>{this.queued=!1,this.detail.event=e,sy(this.detail,this.scrollEl,t,n),this.ionScroll.emit(this.detail)})))}async getScrollElement(){return this.scrollEl||await new Promise((e=>ef(this.el,e))),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise((e=>ef(this.el,e))),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const t=await this.getScrollElement(),n=t.scrollHeight-t.clientHeight;return this.scrollToPoint(void 0,n,e)}async scrollByPoint(e,t,n){const i=await this.getScrollElement();return this.scrollToPoint(e+i.scrollLeft,t+i.scrollTop,n)}async scrollToPoint(e,t,n=0){const i=await this.getScrollElement();if(n<32)return null!=t&&(i.scrollTop=t),void(null!=e&&(i.scrollLeft=e));let r,a=0;const o=new Promise((e=>r=e)),s=i.scrollTop,l=i.scrollLeft,c=null!=t?t-s:0,u=null!=e?e-l:0,d=e=>{const t=Math.min(1,(e-a)/n)-1,o=Math.pow(t,3)+1;0!==c&&(i.scrollTop=Math.floor(o*c+s)),0!==u&&(i.scrollLeft=Math.floor(o*u+l)),o<1?requestAnimationFrame(d):r()};return requestAnimationFrame((e=>{a=e,d(e)})),o}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval((()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()}),100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:t,scrollY:n,el:i}=this,r=ry(i)?"rtl":"ltr",a=Sg(this),o=this.shouldForceOverscroll(),s="ios"===a,l=e?"main":"div";return this.resize(),jp(Bp,{class:$b(this.color,{[a]:!0,"content-sizing":Mb("ion-popover",this.el),overscroll:o,[`content-${r}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},jp("div",{ref:e=>this.backgroundContentEl=e,id:"background-content",part:"background"}),jp(l,{class:{"inner-scroll":!0,"scroll-x":t,"scroll-y":n,overscroll:(t||n)&&o},ref:e=>this.scrollEl=e,onScroll:this.scrollEvents?e=>this.onScroll(e):void 0,part:"scroll"},jp("slot",null)),s?jp("div",{class:"transition-effect"},jp("div",{class:"transition-cover"}),jp("div",{class:"transition-shadow"})):null,jp("slot",{name:"fixed"}))}get el(){return this}static get style(){return':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}'}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),oy=e=>{const t=e.closest("ion-tabs");if(t)return t;const n=e.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||(e=>{var t;return e.parentElement?e.parentElement:(null===(t=e.parentNode)||void 0===t?void 0:t.host)?e.parentNode.host:null})(e)},sy=(e,t,n,i)=>{const r=e.currentX,a=e.currentY,o=e.currentTime,s=t.scrollLeft,l=t.scrollTop,c=n-o;if(i&&(e.startTime=n,e.startX=s,e.startY=l,e.velocityX=e.velocityY=0),e.currentTime=n,e.currentX=e.scrollLeft=s,e.currentY=e.scrollTop=l,e.deltaX=s-e.startX,e.deltaY=l-e.startY,c>0&&c<100){const t=(s-r)/c,n=(l-a)/c;e.velocityX=.7*t+.3*e.velocityX,e.velocityY=.7*n+.3*e.velocityY}};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const ly=function(){if("undefined"==typeof customElements)return;["ion-content"].forEach((e=>{if("ion-content"===e)customElements.get(e)||customElements.define(e,ay)}))},cy=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Vp(this,"ionFocus",7),this.ionBlur=Vp(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=e=>{const{el:t}=this;"button"===this.type?Lb(this.href,e,this.routerDirection,this.routerAnimation):lf(t)&&this.submitForm(e)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:e}=this;this.formButtonEl&&(this.formButtonEl.disabled=e)}renderHiddenButton(){const e=this.formEl=this.findForm();if(e){const{formButtonEl:t}=this;if(null!==t&&e.contains(t))return;const n=this.formButtonEl=document.createElement("button");n.type=this.type,n.style.display="none",n.disabled=this.disabled,e.appendChild(n)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=rf(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if("string"==typeof e){const t=document.getElementById(e);return t?t instanceof HTMLFormElement?t:(zg(`Form with selector: "#${e}" could not be found. Verify that the id is attached to a <form> element.`,this.el),null):(zg(`Form with selector: "#${e}" could not be found. Verify that the id is correct and the form is rendered in the DOM.`,this.el),null)}return void 0!==e?(zg('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(e){this.formEl&&this.formButtonEl&&(e.preventDefault(),this.formButtonEl.click())}render(){const e=Sg(this),{buttonType:t,type:n,disabled:i,rel:r,target:a,size:o,href:s,color:l,expand:c,hasIconOnly:u,shape:d,strong:h,inheritedAttributes:p}=this,m=void 0===o&&this.inItem?"small":o,f=void 0===s?"button":"a",g="button"===f?{type:n}:{download:this.download,href:s,rel:r,target:a};let b=this.fill;return null==b&&(b=this.inToolbar||this.inListHeader?"clear":"solid"),"button"!==n&&this.renderHiddenButton(),jp(Bp,{onClick:this.handleClick,"aria-disabled":i?"true":null,class:$b(l,{[e]:!0,[t]:!0,[`${t}-${c}`]:void 0!==c,[`${t}-${m}`]:void 0!==m,[`${t}-${d}`]:void 0!==d,[`${t}-${b}`]:!0,[`${t}-strong`]:h,"in-toolbar":Mb("ion-toolbar",this.el),"in-toolbar-color":Mb("ion-toolbar[color]",this.el),"in-buttons":Mb("ion-buttons",this.el),"button-has-icon-only":u,"button-disabled":i,"ion-activatable":!0,"ion-focusable":!0})},jp(f,Object.assign({},g,{class:"button-native",part:"native",disabled:i,onFocus:this.onFocus,onBlur:this.onBlur},p),jp("span",{class:"button-inner"},jp("slot",{name:"icon-only"}),jp("slot",{name:"start"}),jp("slot",null),jp("slot",{name:"end"})),"md"===e&&jp("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:16px;font-weight:500;letter-spacing:0}:host(.in-buttons){font-size:17px;font-weight:400}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:13px}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',md:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:20px}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:13px}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}'}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]}]),uy=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.color=void 0,this.button=!1,this.detail=void 0,this.detailIcon=hb,this.disabled=!1,this.download=void 0,this.fill=void 0,this.shape=void 0,this.href=void 0,this.rel=void 0,this.lines=void 0,this.counter=!1,this.routerAnimation=void 0,this.routerDirection="forward",this.target=void 0,this.type="button",this.counterFormatter=void 0,this.counterString=void 0}counterFormatterChanged(){this.updateCounterOutput(this.getFirstInput())}handleIonInput(e){this.counter&&e.target===this.getFirstInput()&&this.updateCounterOutput(e.target)}labelColorChanged(e){const{color:t}=this;void 0===t&&(this.labelColorStyles=e.detail)}itemStyle(e){e.stopPropagation();const t=e.target.tagName,n=e.detail,i={},r=this.itemStyles.get(t)||{};let a=!1;Object.keys(n).forEach((e=>{if(n[e]){const t=`item-${e}`;r[t]||(a=!0),i[t]=!0}})),a||Object.keys(i).length===Object.keys(r).length||(a=!0),a&&(this.itemStyles.set(t,i),wm(this))}connectedCallback(){this.counter&&this.updateCounterOutput(this.getFirstInput()),this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=tf(this.el,["aria-label"])}componentDidLoad(){const{el:e,counter:t,counterFormatter:n,fill:i,shape:r}=this;null!==e.querySelector('[slot="helper"]')&&zg('The "helper" slot has been deprecated in favor of using the "helperText" property on ion-input or ion-textarea.',e);null!==e.querySelector('[slot="error"]')&&zg('The "error" slot has been deprecated in favor of using the "errorText" property on ion-input or ion-textarea.',e),!0===t&&zg('The "counter" property has been deprecated in favor of using the "counter" property on ion-input or ion-textarea.',e),void 0!==n&&zg('The "counterFormatter" property has been deprecated in favor of using the "counterFormatter" property on ion-input or ion-textarea.',e),void 0!==i&&zg('The "fill" property has been deprecated in favor of using the "fill" property on ion-input or ion-textarea.',e),void 0!==r&&zg('The "shape" property has been deprecated in favor of using the "shape" property on ion-input or ion-textarea.',e),sf((()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()}))}setMultipleInputs(){const e=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),t=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),n=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=e.length+t.length>1||e.length+n.length>1||e.length>0&&this.isClickable()}hasCover(){return 1===this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length&&!this.multipleInputs}isClickable(){return void 0!==this.href||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const e=this.el.querySelector(".ion-focusable");return this.canActivate()||null!==e}getFirstInput(){return this.el.querySelectorAll("ion-input, ion-textarea")[0]}updateCounterOutput(e){var t,n;const{counter:i,counterFormatter:r,defaultCounterFormatter:a}=this;if(i&&!this.multipleInputs&&void 0!==(null==e?void 0:e.maxlength)){const i=null!==(n=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.toString().length)&&void 0!==n?n:0;if(void 0===r)this.counterString=a(i,e.maxlength);else try{this.counterString=r(i,e.maxlength)}catch(RD){Ug("Exception in provided `counterFormatter`.",RD),this.counterString=a(i,e.maxlength)}}}defaultCounterFormatter(e,t){return`${e} / ${t}`}hasStartEl(){null!==this.el.querySelector('[slot="start"]')&&this.el.classList.add("item-has-start-slot")}render(){const{counterString:e,detail:t,detailIcon:n,download:i,fill:r,labelColorStyles:a,lines:o,disabled:s,href:l,rel:c,shape:u,target:d,routerAnimation:h,routerDirection:p,inheritedAriaAttributes:m}=this,f={},g=Sg(this),b=this.isClickable(),y=this.canActivate(),v=b?void 0===l?"button":"a":"div",w="button"===v?{type:this.type}:{download:i,href:l,rel:c,target:d},E=b?{onClick:e=>{Lb(l,e,p,h)}}:{},x=void 0!==t?t:"ios"===g&&b;this.itemStyles.forEach((e=>{Object.assign(f,e)}));const T=s||f["item-interactive-disabled"]?"true":null,C=r||"none",S=Mb("ion-list",this.el)&&!Mb("ion-radio-group",this.el);return jp(Bp,{"aria-disabled":T,class:Object.assign(Object.assign(Object.assign({},f),a),$b(this.color,{item:!0,[g]:!0,"item-lines-default":void 0===o,[`item-lines-${o}`]:void 0!==o,[`item-fill-${C}`]:!0,[`item-shape-${u}`]:void 0!==u,"item-disabled":s,"in-list":S,"item-multiple-inputs":this.multipleInputs,"ion-activatable":y,"ion-focusable":this.focusable,"item-rtl":"rtl"===document.dir})),role:S?"listitem":null},jp(v,Object.assign({},w,m,{class:"item-native",part:"native",disabled:s},E),jp("slot",{name:"start"}),jp("div",{class:"item-inner"},jp("div",{class:"input-wrapper"},jp("slot",null)),jp("slot",{name:"end"}),x&&jp("ion-icon",{icon:n,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":n===hb}),jp("div",{class:"item-inner-highlight"})),y&&"md"===g&&jp("ion-ripple-effect",null),jp("div",{class:"item-highlight"})),jp("div",{class:"item-bottom"},jp("slot",{name:"error"}),jp("slot",{name:"helper"}),e&&jp("ion-note",{class:"item-counter"},e)))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{counterFormatter:["counterFormatterChanged"]}}static get style(){return{ios:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));--color:var(--ion-item-color, var(--ion-text-color, #000));--highlight-height:0px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--bottom-padding-start:0px;font-size:16px}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-interactive){--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px;--show-inset-highlight:0}.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus) .item-highlight{border-top:none;border-right:none;border-left:none}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:1px;--padding-bottom:1px;--padding-start:.5em;--padding-end:.5em;min-height:24px;font-size:13px}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:0}',md:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;--highlight-height:1px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);font-size:16px;font-weight:normal;text-transform:none}:host(.item-fill-outline){--highlight-height:2px}:host(.item-fill-none.item-interactive.ion-focus) .item-highlight,:host(.item-fill-none.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-none.item-interactive.ion-focus) .item-native,:host(.item-fill-none.item-interactive.item-has-focus) .item-native,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-highlight{border-width:var(--full-highlight-height);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-native{border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-highlight,:host(.item-fill-solid.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-native,:host(.item-fill-solid.item-interactive.item-has-focus) .item-native,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-has-focus) .item-native{caret-color:var(--highlight-background)}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-full){--border-width:0 0 1px 0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0;--show-inset-highlight:0}:host(.item-fill-outline) .item-highlight{--position-offset:calc(-1 * var(--border-width));top:var(--position-offset);width:calc(100% + 2 * var(--border-width));height:calc(100% + 2 * var(--border-width));-webkit-transition:none;transition:none}@supports (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{inset-inline-start:var(--position-offset)}}@supports not (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{left:var(--position-offset)}:host-context([dir=rtl]):host(.item-fill-outline) .item-highlight,:host-context([dir=rtl]).item-fill-outline .item-highlight{left:unset;right:unset;right:var(--position-offset)}@supports selector(:dir(rtl)){:host(.item-fill-outline) .item-highlight:dir(rtl){left:unset;right:unset;right:var(--position-offset)}}}:host(.item-fill-outline.ion-focused) .item-native,:host(.item-fill-outline.item-has-focus) .item-native{border-color:transparent}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted([slot=end]){-webkit-margin-start:32px;margin-inline-start:32px}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){-webkit-margin-end:8px;margin-inline-end:8px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]:not([slot=helper]):not([slot=error])){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){-webkit-padding-end:16px;padding-inline-end:16px}::slotted(ion-note[slot=end]){-webkit-padding-start:16px;padding-inline-start:16px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:8px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:2px;--padding-bottom:2px;--padding-start:.6em;--padding-end:.6em;min-height:25px;font-size:12px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #3880ff)}:host(.ion-color){--highlight-color-focused:var(--ion-color-contrast)}:host(.item-label-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid.ion-color),:host(.item-fill-outline.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid){--background:var(--ion-color-step-50, #f2f2f2);--background-hover:var(--ion-color-step-100, #e6e6e6);--background-focused:var(--ion-color-step-150, #d9d9d9);--border-width:0 0 1px 0;--inner-border-width:0;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid),:host-context([dir=rtl]).item-fill-solid{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid):dir(rtl){border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.item-fill-solid) .item-native{--border-color:var(--ion-color-step-500, gray)}:host(.item-fill-solid.ion-focused) .item-native,:host(.item-fill-solid.item-has-focus) .item-native{--background:var(--background-focused)}:host(.item-fill-solid.item-shape-round){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid.item-shape-round),:host-context([dir=rtl]).item-fill-solid.item-shape-round{border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid.item-shape-round):dir(rtl){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}}@media (any-hover: hover){:host(.item-fill-solid:hover) .item-native{--background:var(--background-hover);--border-color:var(--ion-color-step-750, #404040)}}:host(.item-fill-outline){--ripple-color:transparent;--background-focused:transparent;--background-hover:transparent;--border-color:var(--ion-color-step-500, gray);--border-width:1px;border:none;overflow:visible}:host(.item-fill-outline) .item-native{--native-padding-left:16px;border-radius:4px}:host(.item-fill-outline.item-shape-round) .item-native{--inner-padding-start:16px;border-radius:28px}:host(.item-fill-outline.item-shape-round) .item-bottom{-webkit-padding-start:32px;padding-inline-start:32px}:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-textarea:not(:first-child)){-webkit-transform:translateY(-14px);transform:translateY(-14px)}@media (any-hover: hover){:host(.item-fill-outline:hover) .item-native{--border-color:var(--ion-color-step-750, #404040)}}.item-counter{letter-spacing:0.0333333333em}'}}},[49,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[4],download:[1],fill:[1],shape:[1],href:[1],rel:[1],lines:[1],counter:[4],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],counterFormatter:[16],multipleInputs:[32],focusable:[32],counterString:[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]]),dy=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.ionColor=Vp(this,"ionColor",7),this.ionStyle=Vp(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate="floating"===this.position,this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout((()=>{this.noAnimate=!1}),1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:e}=this;this.ionColor.emit({"item-label-color":void 0!==e,[`ion-color-${e}`]:void 0!==e})}emitStyle(){const{inRange:e,position:t}=this;e||this.ionStyle.emit({label:!0,[`label-${t}`]:void 0!==t})}render(){const e=this.position,t=Sg(this);return jp(Bp,{class:$b(this.color,{[t]:!0,"in-item-color":Mb("ion-item.ion-color",this.el),[`label-${e}`]:void 0!==e,"label-no-animate":this.noAnimate,"label-rtl":"rtl"===document.dir})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",md:'.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}'}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const hy=()=>{if(void 0!==Xm)return Xm.Capacitor};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */var py,my;!function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"}(py||(py={})),function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"}(my||(my={}));const fy={getEngine(){const e=window.TapticEngine;if(e)return e;const t=hy();return(null==t?void 0:t.isPluginAvailable("Haptics"))?t.Plugins.Haptics:void 0},available(){if(!this.getEngine())return!1;const e=hy();return"web"!==(null==e?void 0:e.getPlatform())||"undefined"!=typeof navigator&&void 0!==navigator.vibrate},isCordova:()=>void 0!==window.TapticEngine,isCapacitor:()=>void 0!==hy(),impact(e){const t=this.getEngine();if(!t)return;const n=this.isCapacitor()?e.style:e.style.toLowerCase();t.impact({style:n})},notification(e){const t=this.getEngine();if(!t)return;const n=this.isCapacitor()?e.type:e.type.toLowerCase();t.notification({type:n})},selection(){const e=this.isCapacitor()?py.Light:"light";this.impact({style:e})},selectionStart(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionStart():e.gestureSelectionStart())},selectionChanged(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionChanged():e.gestureSelectionChanged())},selectionEnd(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionEnd():e.gestureSelectionEnd())}},gy=()=>fy.available(),by=()=>{gy()&&fy.selectionStart()},yy=()=>{gy()&&fy.selectionChanged()},vy="ion-content",wy=".ion-content-scroll-host",Ey=`${vy}, ${wy}`,xy=e=>"ION-CONTENT"===e.tagName,Ty=t("k",(async e=>xy(e)?(await new Promise((t=>ef(e,t))),e.getScrollElement()):e)),Cy=e=>{const t=e.querySelector(wy);return t||e.querySelector(Ey)},Sy=t("f",(e=>e.closest(Ey))),Ny=(t("s",((e,t)=>{if(xy(e)){return e.scrollToTop(t)}return Promise.resolve(e.scrollTo({top:0,left:0,behavior:t>0?"smooth":"auto"}))})),t("l",((e,t,n,i)=>{if(xy(e)){return e.scrollByPoint(t,n,i)}return Promise.resolve(e.scrollBy({top:n,left:t,behavior:i>0?"smooth":"auto"}))})),e=>((e,...t)=>console.error(`<${e.tagName.toLowerCase()}> must be used inside ${t.join(" or ")}.`))(e,vy));
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
var ky,Ay;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(ky||(ky={})),t("h",Ay),function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"}(Ay||t("h",Ay={}));const _y=t("K",{getEngine(){const e=hy();if(null==e?void 0:e.isPluginAvailable("Keyboard"))return e.Plugins.Keyboard},getResizeMode(){const e=this.getEngine();return(null==e?void 0:e.getResizeMode)?e.getResizeMode().catch((e=>{if(e.code!==ky.Unimplemented)throw e})):Promise.resolve(void 0)}}),Oy=e=>{if(void 0===Zm||e===Ay.None||void 0===e)return null;const t=Zm.querySelector("ion-app");return null!=t?t:Zm.body},Ry=e=>{const t=Oy(e);return null===t?0:t.clientHeight},Py=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const e=Sg(this);return jp(Bp,{class:{[e]:!0,"grid-fixed":this.fixed}},jp("slot",null))}static get style(){return":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}"}},[1,"ion-grid",{fixed:[4]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const My=function(){if("undefined"==typeof customElements)return;["ion-grid"].forEach((e=>{if("ion-grid"===e)customElements.get(e)||customElements.define(e,Py)}))},$y=e=>{const t=document.querySelector(`${e}.ion-cloned-element`);if(null!==t)return t;const n=document.createElement(e);return n.classList.add("ion-cloned-element"),n.style.setProperty("display","none"),document.body.appendChild(n),n},Iy=e=>{if(!e)return;const t=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(t).map((e=>{const t=e.querySelector("ion-title");return{el:e,background:e.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:t,innerTitleEl:t?t.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(e.querySelectorAll("ion-buttons"))}}))}},Dy=(e,t)=>{"fade"!==e.collapse&&(void 0===t?e.style.removeProperty("--opacity-scale"):e.style.setProperty("--opacity-scale",t.toString()))},Ly=(e,t,n,i)=>{Jm((()=>{const r=i.scrollTop;((e,t,n)=>{if(!e[0].isIntersecting)return;const i=e[0].intersectionRatio>.9||n<=0?0:100*(1-e[0].intersectionRatio)/75;Dy(t.el,1===i?void 0:i)})(e,t,r);const a=e[0],o=a.intersectionRect,s=o.width*o.height,l=a.rootBounds.width*a.rootBounds.height,c=0===s&&0===l,u=Math.abs(o.left-a.boundingClientRect.left),d=Math.abs(o.right-a.boundingClientRect.right);if(!c&&!(s>0&&(u>=5||d>=5)))if(a.isIntersecting)jy(t,!1),jy(n);else{(0===o.x&&0===o.y||0!==o.width&&0!==o.height)&&r>0&&(jy(t),jy(n,!1),Dy(t.el))}}))},jy=(e,t=!0)=>{const n=e.el;t?(n.classList.remove("header-collapse-condense-inactive"),n.removeAttribute("aria-hidden")):(n.classList.add("header-collapse-condense-inactive"),n.setAttribute("aria-hidden","true"))},qy=(e=[],t=1,n=!1)=>{e.forEach((e=>{const i=e.ionTitleEl,r=e.innerTitleEl;i&&"large"===i.size&&(r.style.transition=n?"all 0.2s ease-in-out":"",r.style.transform=`scale3d(${t}, ${t}, 1)`)}))},By=(e,t,n)=>{Ym((()=>{const i=e.scrollTop,r=t.clientHeight,a=n?n.clientHeight:0;if(null!==n&&i<a)return t.style.setProperty("--opacity-scale","0"),void e.style.setProperty("clip-path",`inset(${r}px 0px 0px 0px)`);const o=df(0,(i-a)/10,1);Jm((()=>{e.style.removeProperty("clip-path"),t.style.setProperty("--opacity-scale",o.toString())}))}))},Fy=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(e,t)=>{const n=this.scrollEl=await Ty(e);this.contentScrollCallback=()=>{By(this.scrollEl,this.el,t)},n.addEventListener("scroll",this.contentScrollCallback),By(this.scrollEl,this.el,t)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=rf(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if("ios"!==Sg(this))return;const{collapse:e}=this,t="condense"===e,n="fade"===e;if(this.destroyCollapsibleHeader(),t){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),t=e?Cy(e):null;Jm((()=>{$y("ion-title").size="large",$y("ion-back-button")})),await this.setupCondenseHeader(t,e)}else if(n){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),t=e?Cy(e):null;if(!t)return void Ny(this.el);const n=t.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(t,n)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,t){if(!e||!t)return void Ny(this.el);if("undefined"==typeof IntersectionObserver)return;this.scrollEl=await Ty(e);const n=t.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(n).find((e=>"condense"!==e.collapse)),!this.collapsibleMainHeader)return;const i=Iy(this.collapsibleMainHeader),r=Iy(this.el);if(!i||!r)return;jy(i,!1),Dy(i.el,0);this.intersectionObserver=new IntersectionObserver((e=>{Ly(e,i,r,this.scrollEl)}),{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(r.toolbars[r.toolbars.length-1].el),this.contentScrollCallback=()=>{((e,t,n)=>{Ym((()=>{const i=e.scrollTop,r=df(1,1+-i/500,1.1);null===n.querySelector("ion-refresher.refresher-native")&&Jm((()=>{qy(t.toolbars,r)}))}))})(this.scrollEl,r,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),Jm((()=>{void 0!==this.collapsibleMainHeader&&this.collapsibleMainHeader.classList.add("header-collapse-main")}))}render(){const{translucent:e,inheritedAttributes:t}=this,n=Sg(this),i=this.collapse||"none",r=Mb("ion-menu",this.el)?"none":"banner";return jp(Bp,Object.assign({role:r,class:{[n]:!0,[`header-${n}`]:!0,"header-translucent":this.translucent,[`header-collapse-${i}`]:!0,[`header-translucent-${n}`]:this.translucent}},t),"ios"===n&&e&&jp("div",{class:"header-background"}),jp("slot",null))}get el(){return this}static get style(){return{ios:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:1px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",md:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}"}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const zy=function(){if("undefined"==typeof customElements)return;["ion-header"].forEach((e=>{if("ion-header"===e)customElements.get(e)||customElements.define(e,Fy)}))},Uy=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionImgWillLoad=Vp(this,"ionImgWillLoad",7),this.ionImgDidLoad=Vp(this,"ionImgDidLoad",7),this.ionError=Vp(this,"ionError",7),this.inheritedAttributes={},this.onLoad=()=>{this.ionImgDidLoad.emit()},this.onError=()=>{this.ionError.emit()},this.loadSrc=void 0,this.loadError=void 0,this.alt=void 0,this.src=void 0}srcChanged(){this.addIO()}componentWillLoad(){this.inheritedAttributes=tf(this.el,["draggable"])}componentDidLoad(){this.addIO()}addIO(){void 0!==this.src&&("undefined"!=typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype?(this.removeIO(),this.io=new IntersectionObserver((e=>{e[e.length-1].isIntersecting&&(this.load(),this.removeIO())})),this.io.observe(this.el)):setTimeout((()=>this.load()),200))}load(){this.loadError=this.onError,this.loadSrc=this.src,this.ionImgWillLoad.emit()}removeIO(){this.io&&(this.io.disconnect(),this.io=void 0)}render(){const{loadSrc:e,alt:t,onLoad:n,loadError:i,inheritedAttributes:r}=this,{draggable:a}=r;return jp(Bp,{class:Sg(this)},jp("img",{decoding:"async",src:e,alt:t,onLoad:n,onError:i,part:"image",draggable:Vy(a)}))}get el(){return this}static get watchers(){return{src:["srcChanged"]}}static get style(){return":host{display:block;-o-object-fit:contain;object-fit:contain}img{display:block;width:100%;height:100%;-o-object-fit:inherit;object-fit:inherit;-o-object-position:inherit;object-position:inherit}"}},[1,"ion-img",{alt:[1],src:[1],loadSrc:[32],loadError:[32]}]),Vy=e=>{switch(e){case"true":return!0;case"false":return!1;default:return}};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Wy=function(){if("undefined"==typeof customElements)return;["ion-img"].forEach((e=>{if("ion-img"===e)customElements.get(e)||customElements.define(e,Uy)}))},Hy=(e,t)=>`${e} / ${t}`,Qy=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.ionInput=Vp(this,"ionInput",7),this.ionChange=Vp(this,"ionChange",7),this.ionBlur=Vp(this,"ionBlur",7),this.ionFocus=Vp(this,"ionFocus",7),this.ionStyle=Vp(this,"ionStyle",7),this.inputId="ion-input-"+Ky++,this.inheritedAttributes={},this.isComposing=!1,this.hasLoggedDeprecationWarning=!1,this.didInputClearOnEdit=!1,this.onInput=e=>{const t=e.target;t&&(this.value=t.value||""),this.emitInputChange(e)},this.onChange=e=>{this.emitValueChange(e)},this.onBlur=e=>{this.hasFocus=!1,this.emitStyle(),this.focusedValue!==this.value&&this.emitValueChange(e),this.didInputClearOnEdit=!1,this.ionBlur.emit(e)},this.onFocus=e=>{this.hasFocus=!0,this.focusedValue=this.value,this.emitStyle(),this.ionFocus.emit(e)},this.onKeydown=e=>{this.checkClearOnEdit(e)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=e=>{this.clearInput&&!this.readonly&&!this.disabled&&e&&(e.preventDefault(),e.stopPropagation(),this.setFocus()),this.value="",this.emitInputChange(e)},this.hasFocus=!1,this.color=void 0,this.accept=void 0,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.clearOnEdit=void 0,this.counter=!1,this.counterFormatter=void 0,this.debounce=void 0,this.disabled=!1,this.enterkeyhint=void 0,this.errorText=void 0,this.fill=void 0,this.inputmode=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.legacy=void 0,this.max=void 0,this.maxlength=void 0,this.min=void 0,this.minlength=void 0,this.multiple=void 0,this.name=this.inputId,this.pattern=void 0,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.shape=void 0,this.spellcheck=!1,this.step=void 0,this.size=void 0,this.type="text",this.value=""}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:n}=this;this.ionInput=void 0===t?null!=n?n:e:mf(e,t)}disabledChanged(){this.emitStyle()}placeholderChanged(){this.emitStyle()}valueChanged(){const e=this.nativeInput,t=this.getValue();e&&e.value!==t&&!this.isComposing&&(e.value=t),this.emitStyle()}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},rf(this.el)),tf(this.el,["tabindex","title","data-form-type"]))}connectedCallback(){const{el:e}=this;this.legacyFormController=zb(e),this.slotMutationController=((e,t,n)=>{let i,r;void 0!==Xm&&"MutationObserver"in Xm&&(i=new MutationObserver((e=>{for(const i of e)for(const e of i.addedNodes)if(e.nodeType===Node.ELEMENT_NODE&&e.slot===t)return n(),void sf((()=>a(e)))})),i.observe(e,{childList:!0}));const a=e=>{var i;r&&(r.disconnect(),r=void 0),r=new MutationObserver((e=>{n();for(const n of e)for(const e of n.removedNodes)e.nodeType===Node.ELEMENT_NODE&&e.slot===t&&o()})),r.observe(null!==(i=e.parentElement)&&void 0!==i?i:e,{subtree:!0,childList:!0})},o=()=>{r&&(r.disconnect(),r=void 0)};return{destroy:()=>{i&&(i.disconnect(),i=void 0),o()}}})(e,"label",(()=>wm(this))),this.notchController=((e,t,n)=>{let i;const r=()=>void 0!==t()&&void 0===e.label&&null!==n(),a=()=>{const o=t();if(void 0===o)return;if(!r())return void o.style.removeProperty("width");const s=n().scrollWidth;if(0===s&&null===o.offsetParent&&void 0!==Xm&&"IntersectionObserver"in Xm){if(void 0!==i)return;const t=i=new IntersectionObserver((e=>{1===e[0].intersectionRatio&&(a(),t.disconnect(),i=void 0)}),{threshold:.01,root:e});t.observe(o)}else o.style.setProperty("width",.75*s+"px")};return{calculateNotchWidth:()=>{r()&&sf((()=>{a()}))},destroy:()=>{i&&(i.disconnect(),i=void 0)}}})(e,(()=>this.notchSpacerEl),(()=>this.labelSlot)),this.emitStyle(),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){this.originalIonInput=this.ionInput}componentDidRender(){var e;null===(e=this.notchController)||void 0===e||e.calculateNotchWidth()}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}async setFocus(){this.nativeInput&&this.nativeInput.focus()}getInputElement(){return Promise.resolve(this.nativeInput)}emitValueChange(e){const{value:t}=this,n=null==t?t:t.toString();this.focusedValue=n,this.ionChange.emit({value:n,event:e})}emitInputChange(e){const{value:t}=this,n=null==t?t:t.toString();this.ionInput.emit({value:n,event:e})}shouldClearOnEdit(){const{type:e,clearOnEdit:t}=this;return void 0===t?"password"===e:t}getValue(){return"number"==typeof this.value?this.value.toString():(this.value||"").toString()}emitStyle(){this.legacyFormController.hasLegacyControl()&&this.ionStyle.emit({interactive:!0,input:!0,"has-placeholder":void 0!==this.placeholder,"has-value":this.hasValue(),"has-focus":this.hasFocus,"interactive-disabled":this.disabled})}checkClearOnEdit(e){this.shouldClearOnEdit()&&(!this.didInputClearOnEdit&&this.hasValue()&&"Enter"!==e.key&&"Tab"!==e.key&&(this.value="",this.emitInputChange(e)),this.didInputClearOnEdit=!0)}hasValue(){return this.getValue().length>0}renderHintText(){const{helperText:e,errorText:t}=this;return[jp("div",{class:"helper-text"},e),jp("div",{class:"error-text"},t)]}renderCounter(){const{counter:e,maxlength:t,counterFormatter:n,value:i}=this;if(!0===e&&void 0!==t)return jp("div",{class:"counter"},((e,t,n)=>{const i=null==e?0:e.toString().length,r=Hy(i,t);if(void 0===n)return r;try{return n(i,t)}catch(RD){return Ug("Exception in provided `counterFormatter`.",RD),r}})(i,t,n))}renderBottomContent(){const{counter:e,helperText:t,errorText:n,maxlength:i}=this;if(!!t||!!n||!0===e&&void 0!==i)return jp("div",{class:"input-bottom"},this.renderHintText(),this.renderCounter())}renderLabel(){const{label:e}=this;return jp("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},void 0===e?jp("slot",{name:"label"}):jp("div",{class:"label-text"},e))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return void 0!==this.label||null!==this.labelSlot}renderLabelContainer(){return"md"===Sg(this)&&"outline"===this.fill?[jp("div",{class:"input-outline-container"},jp("div",{class:"input-outline-start"}),jp("div",{class:{"input-outline-notch":!0,"input-outline-notch-hidden":!this.hasLabel}},jp("div",{class:"notch-spacer","aria-hidden":"true",ref:e=>this.notchSpacerEl=e},this.label)),jp("div",{class:"input-outline-end"})),this.renderLabel()]:this.renderLabel()}renderInput(){const{disabled:e,fill:t,readonly:n,shape:i,inputId:r,labelPlacement:a}=this,o=Sg(this),s=this.getValue(),l=Mb("ion-item",this.el),c="md"===o&&"outline"!==t&&!l;return jp(Bp,{class:$b(this.color,{[o]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus,[`input-fill-${t}`]:void 0!==t,[`input-shape-${i}`]:void 0!==i,[`input-label-placement-${a}`]:!0,"in-item":l,"in-item-color":Mb("ion-item.ion-color",this.el),"input-disabled":e})},jp("label",{class:"input-wrapper"},this.renderLabelContainer(),jp("div",{class:"native-wrapper"},jp("input",Object.assign({class:"native-input",ref:e=>this.nativeInput=e,id:r,disabled:e,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:n,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:s,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown,onCompositionstart:this.onCompositionStart,onCompositionend:this.onCompositionEnd},this.inheritedAttributes)),this.clearInput&&!n&&!e&&jp("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:e=>{e.preventDefault()},onClick:this.clearTextInput},jp("ion-icon",{"aria-hidden":"true",icon:"ios"===o?pb:mb}))),c&&jp("div",{class:"input-highlight"})),this.renderBottomContent())}renderLegacyInput(){this.hasLoggedDeprecationWarning||(zg('ion-input now requires providing a label with either the "label" property or the "aria-label" attribute. To migrate, remove any usage of "ion-label" and pass the label text to either the "label" property or the "aria-label" attribute.\n\nExample: <ion-input label="Email"></ion-input>\nExample with aria-label: <ion-input aria-label="Email"></ion-input>\n\nFor inputs that do not render the label immediately next to the input, developers may continue to use "ion-label" but must manually associate the label with the input by using "aria-labelledby".\n\nDevelopers can use the "legacy" property to continue using the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.',this.el),this.legacy&&zg('ion-input is being used with the "legacy" property enabled which will forcibly enable the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.\n\nDevelopers can dismiss this warning by removing their usage of the "legacy" property and using the new input syntax.',this.el),this.hasLoggedDeprecationWarning=!0);const e=Sg(this),t=this.getValue(),n=this.inputId+"-lbl",i=cf(this.el);return i&&(i.id=n),jp(Bp,{"aria-disabled":this.disabled?"true":null,class:$b(this.color,{[e]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus,"legacy-input":!0,"in-item-color":Mb("ion-item.ion-color",this.el)})},jp("input",Object.assign({class:"native-input",ref:e=>this.nativeInput=e,"aria-labelledby":i?i.id:null,disabled:this.disabled,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:t,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown},this.inheritedAttributes)),this.clearInput&&!this.readonly&&!this.disabled&&jp("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:e=>{e.preventDefault()},onClick:this.clearTextInput},jp("ion-icon",{"aria-hidden":"true",icon:"ios"===e?pb:mb})))}render(){const{legacyFormController:e}=this;return e.hasLegacyControl()?this.renderLegacyInput():this.renderInput()}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],placeholder:["placeholderChanged"],value:["valueChanged"]}}static get style(){return{ios:".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:0.6;--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}.legacy-input.sc-ion-input-ios-h{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;background:var(--background)}.legacy-input.sc-ion-input-ios-h .native-input.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius)}ion-item.sc-ion-input-ios-h:not(.item-label):not(.item-has-modern-input),ion-item:not(.item-label):not(.item-has-modern-input) .sc-ion-input-ios-h{--padding-start:0}ion-item[slot=start].sc-ion-input-ios-h,ion-item [slot=start].sc-ion-input-ios-h,ion-item[slot=end].sc-ion-input-ios-h,ion-item [slot=end].sc-ion-input-ios-h{width:auto}.legacy-input.ion-color.sc-ion-input-ios-h{color:var(--ion-color-base)}.ion-color.sc-ion-input-ios-h{--highlight-color-focused:var(--ion-color-base)}.native-input.sc-ion-input-ios{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.cloned-input.sc-ion-input-ios{top:0;bottom:0;position:absolute;pointer-events:none}@supports (inset-inline-start: 0){.cloned-input.sc-ion-input-ios{inset-inline-start:0}}@supports not (inset-inline-start: 0){.cloned-input.sc-ion-input-ios{left:0}[dir=rtl].sc-ion-input-ios-h .cloned-input.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-ios .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.cloned-input.sc-ion-input-ios:dir(rtl){left:unset;right:unset;right:0}}}.cloned-input.sc-ion-input-ios:disabled{opacity:1}.legacy-input.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.input-clear-icon.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, #666666);visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{color:inherit}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.has-focus.sc-ion-input-ios-h{pointer-events:none}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h a.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h button.sc-ion-input-ios{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-ios-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-ios-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.input-wrapper.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;width:100%}.ion-touched.ion-invalid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:12px}.has-focus.ion-valid.sc-ion-input-ios-h,.ion-touched.ion-invalid.sc-ion-input-ios-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:block;color:var(--ion-color-step-550, #737373)}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:block}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:none}.input-bottom.sc-ion-input-ios .counter.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-ios,.sc-ion-input-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-ios,.input-outline-notch-hidden.sc-ion-input-ios{display:none}.input-wrapper.sc-ion-input-ios input.sc-ion-input-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text.sc-ion-input-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios:dir(rtl),.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-ios-h input.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:1}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.has-focus.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));font-size:inherit}.legacy-input.sc-ion-input-ios-h{--padding-top:10px;--padding-end:8px;--padding-bottom:10px;--padding-start:0}.item-label-stacked.sc-ion-input-ios-h,.item-label-stacked .sc-ion-input-ios-h,.item-label-floating.sc-ion-input-ios-h,.item-label-floating .sc-ion-input-ios-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0px}.input-clear-icon.sc-ion-input-ios ion-icon.sc-ion-input-ios{width:18px;height:18px}.sc-ion-input-ios-h:not(.legacy-input){min-height:44px}.input-label-placement-floating.sc-ion-input-ios-h,.input-label-placement-stacked.sc-ion-input-ios-h{min-height:56px}.legacy-input.sc-ion-input-ios-h .native-input[disabled].sc-ion-input-ios,.input-disabled.sc-ion-input-ios-h{opacity:0.3}",md:".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:0.6;--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}.legacy-input.sc-ion-input-md-h{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;background:var(--background)}.legacy-input.sc-ion-input-md-h .native-input.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius)}ion-item.sc-ion-input-md-h:not(.item-label):not(.item-has-modern-input),ion-item:not(.item-label):not(.item-has-modern-input) .sc-ion-input-md-h{--padding-start:0}ion-item[slot=start].sc-ion-input-md-h,ion-item [slot=start].sc-ion-input-md-h,ion-item[slot=end].sc-ion-input-md-h,ion-item [slot=end].sc-ion-input-md-h{width:auto}.legacy-input.ion-color.sc-ion-input-md-h{color:var(--ion-color-base)}.ion-color.sc-ion-input-md-h{--highlight-color-focused:var(--ion-color-base)}.native-input.sc-ion-input-md{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.cloned-input.sc-ion-input-md{top:0;bottom:0;position:absolute;pointer-events:none}@supports (inset-inline-start: 0){.cloned-input.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.cloned-input.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h .cloned-input.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-md .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.cloned-input.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.cloned-input.sc-ion-input-md:disabled{opacity:1}.legacy-input.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.input-clear-icon.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, #666666);visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{color:inherit}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.has-focus.sc-ion-input-md-h{pointer-events:none}.has-focus.sc-ion-input-md-h input.sc-ion-input-md,.has-focus.sc-ion-input-md-h a.sc-ion-input-md,.has-focus.sc-ion-input-md-h button.sc-ion-input-md{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-md-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-md-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.input-wrapper.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;width:100%}.ion-touched.ion-invalid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:12px}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:block;color:var(--ion-color-step-550, #737373)}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:block}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:none}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-md-h input.sc-ion-input-md{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-md,.sc-ion-input-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-md,.input-outline-notch-hidden.sc-ion-input-md{display:none}.input-wrapper.sc-ion-input-md input.sc-ion-input-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text.sc-ion-input-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl),.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:1}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.input-fill-solid.sc-ion-input-md-h{--background:var(--ion-color-step-50, #f2f2f2);--border-color:var(--ion-color-step-500, gray);--border-radius:4px;--padding-start:16px;--padding-end:16px}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.input-fill-solid.ion-valid.sc-ion-input-md-h,.input-fill-solid.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-fill-solid.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}@media (any-hover: hover){.input-fill-solid.sc-ion-input-md-h:hover{--background:var(--ion-color-step-100, #e6e6e6);--border-color:var(--ion-color-step-750, #404040)}}.input-fill-solid.has-focus.sc-ion-input-md-h{--background:var(--ion-color-step-150, #d9d9d9);--border-color:var(--ion-color-step-750, #404040)}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl].input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}@supports selector(:dir(rtl)){.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}}.input-fill-solid.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{max-width:calc(100% / 0.75)}.input-fill-outline.sc-ion-input-md-h{--border-color:var(--ion-color-step-300, #b3b3b3);--border-radius:4px;--padding-start:16px;--padding-end:16px}.input-fill-outline.input-shape-round.sc-ion-input-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h,.input-fill-outline.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.input-fill-outline.sc-ion-input-md-h:hover{--border-color:var(--ion-color-step-750, #404040)}}.input-fill-outline.has-focus.sc-ion-input-md-h{--border-width:2px;--border-color:var(--highlight-color)}.input-fill-outline.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}.input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl),.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{position:relative}.has-focus.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}.input-fill-outline.sc-ion-input-md-h .input-outline-container.sc-ion-input-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{pointer-events:none}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.input-fill-outline.sc-ion-input-md-h .notch-spacer.sc-ion-input-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl].input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl] .input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px}@supports selector(:dir(rtl)){.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md:dir(rtl){border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px}}.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px;-ms-flex-positive:1;flex-grow:1}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl].input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl] .input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius)}@supports selector(:dir(rtl)){.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius)}}.has-focus.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.has-value.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{border-top:none}.sc-ion-input-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));font-size:inherit}.legacy-input.sc-ion-input-md-h{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:8px}.item-label-stacked.sc-ion-input-md-h,.item-label-stacked .sc-ion-input-md-h,.item-label-floating.sc-ion-input-md-h,.item-label-floating .sc-ion-input-md-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0}.input-clear-icon.sc-ion-input-md ion-icon.sc-ion-input-md{width:22px;height:22px}.legacy-input.sc-ion-input-md-h .native-input[disabled].sc-ion-input-md,.input-disabled.sc-ion-input-md-h{opacity:0.38}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{letter-spacing:0.0333333333em}.sc-ion-input-md-h:not(.legacy-input){min-height:56px}.input-label-placement-floating.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.has-focus.input-label-placement-floating.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-stacked.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.input-highlight.sc-ion-input-md{bottom:-1px;position:absolute;width:100%;height:2px;-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}@supports (inset-inline-start: 0){.input-highlight.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.input-highlight.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-md .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.input-highlight.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.has-focus.sc-ion-input-md-h .input-highlight.sc-ion-input-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{bottom:0}@supports (inset-inline-start: 0){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h -no-combinator.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl].in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.input-shape-round.sc-ion-input-md-h{--border-radius:16px}"}}},[38,"ion-input",{color:[513],accept:[1],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearOnEdit:[4,"clear-on-edit"],counter:[4],counterFormatter:[16],debounce:[2],disabled:[4],enterkeyhint:[1],errorText:[1,"error-text"],fill:[1],inputmode:[1],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],legacy:[4],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[4],required:[4],shape:[1],spellcheck:[4],step:[1],size:[2],type:[1],value:[1032],hasFocus:[32],setFocus:[64],getInputElement:[64]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */let Ky=0;const Gy=function(){if("undefined"==typeof customElements)return;["ion-input","ion-icon"].forEach((e=>{switch(e){case"ion-input":customElements.get(e)||customElements.define(e,Qy);break;case"ion-icon":customElements.get(e)||Ob()}}))},Yy=function(){if("undefined"==typeof customElements)return;["ion-label"].forEach((e=>{if("ion-label"===e)customElements.get(e)||customElements.define(e,dy)}))},Jy=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.lines=void 0,this.inset=!1}async closeSlidingItems(){const e=this.el.querySelector("ion-item-sliding");return!!(null==e?void 0:e.closeOpened)&&e.closeOpened()}render(){const e=Sg(this),{lines:t,inset:n}=this;return jp(Bp,{role:"list",class:{[e]:!0,[`list-${e}`]:!0,"list-inset":n,[`list-lines-${t}`]:void 0!==t,[`list-${e}-lines-${t}`]:void 0!==t}})}get el(){return this}static get style(){return{ios:"ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}.list-ios.list-inset ion-item:last-child{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-ios-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 0.55px 0}.list-ios-lines-inset .item-lines-default{--inner-border-width:0 0 0.55px 0;--border-width:0px}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",md:"ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}@supports (inset-inline-start: 0){.list-md>.input:last-child::after{inset-inline-start:0}}@supports not (inset-inline-start: 0){.list-md>.input:last-child::after{left:0}:host-context([dir=rtl]) .list-md>.input:last-child::after{left:unset;right:unset;right:0}[dir=rtl] .list-md>.input:last-child::after{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.list-md>.input:last-child::after:dir(rtl){left:unset;right:unset;right:0}}}.list-md.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}.list-md.list-inset ion-item:first-child{--border-radius:2px 2px 0 0}.list-md.list-inset ion-item:last-child{--border-radius:0 0 2px, 2px;--border-width:0;--inner-border-width:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-md-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 1px 0}.list-md-lines-inset .item-lines-default{--inner-border-width:0 0 1px 0;--border-width:0px}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}"}}},[32,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const Xy=function(){if("undefined"==typeof customElements)return;["ion-list"].forEach((e=>{if("ion-list"===e)customElements.get(e)||customElements.define(e,Jy)}))},Zy='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',ev=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionWillOpen=Vp(this,"ionWillOpen",7),this.ionWillClose=Vp(this,"ionWillClose",7),this.ionDidOpen=Vp(this,"ionDidOpen",7),this.ionDidClose=Vp(this,"ionDidClose",7),this.ionMenuChange=Vp(this,"ionMenuChange",7),this.lastOnEnd=0,this.blocker=Jf.createBlocker({disableScroll:!0}),this.didLoad=!1,this.isAnimating=!1,this._isOpen=!1,this.inheritedAttributes={},this.handleFocus=e=>{const t=Xg(document);t&&!t.contains(this.el)||this.trapKeyboardFocus(e,document)},this.isPaneVisible=!1,this.isEndSide=!1,this.contentId=void 0,this.menuId=void 0,this.type=void 0,this.disabled=!1,this.side="start",this.swipeGesture=!0,this.maxEdgeStart=50}typeChanged(e,t){const n=this.contentEl;n&&(void 0!==t&&n.classList.remove(`menu-content-${t}`),n.classList.add(`menu-content-${e}`),n.removeAttribute("style")),this.menuInnerEl&&this.menuInnerEl.removeAttribute("style"),this.animation=void 0}disabledChanged(){this.updateState(),this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}sideChanged(){this.isEndSide=pf(this.side),this.animation=void 0}swipeGestureChanged(){this.updateState()}async connectedCallback(){"undefined"!=typeof customElements&&null!=customElements&&await customElements.whenDefined("ion-menu"),void 0===this.type&&(this.type=lg.get("menuType","overlay"));const e=void 0!==this.contentId?document.getElementById(this.contentId):null;null!==e?(this.el.contains(e)&&console.error('Menu: "contentId" should refer to the main view\'s ion-content, not the ion-content inside of the ion-menu.'),this.contentEl=e,e.classList.add("menu-content"),this.typeChanged(this.type,void 0),this.sideChanged(),Bg._register(this),this.menuChanged(),this.gesture=(await vp((()=>Promise.resolve().then((()=>og))))).createGesture({el:document,gestureName:"menu-swipe",gesturePriority:30,threshold:10,blurOnStart:!0,canStart:e=>this.canStart(e),onWillStart:()=>this.onWillStart(),onStart:()=>this.onStart(),onMove:e=>this.onMove(e),onEnd:e=>this.onEnd(e)}),this.updateState()):console.error('Menu: must have a "content" element to listen for drag events on.')}componentWillLoad(){this.inheritedAttributes=rf(this.el)}async componentDidLoad(){this.didLoad=!0,this.menuChanged(),this.updateState()}menuChanged(){this.didLoad&&this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}async disconnectedCallback(){await this.close(!1),this.blocker.destroy(),Bg._unregister(this),this.animation&&this.animation.destroy(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.animation=void 0,this.contentEl=void 0}onSplitPaneChanged(e){this.isPaneVisible=e.detail.isPane(this.el),this.updateState()}onBackdropClick(e){if(this._isOpen&&this.lastOnEnd<e.timeStamp-100){!!e.composedPath&&!e.composedPath().includes(this.menuInnerEl)&&(e.preventDefault(),e.stopPropagation(),this.close())}}onKeydown(e){"Escape"===e.key&&this.close()}isOpen(){return Promise.resolve(this._isOpen)}isActive(){return Promise.resolve(this._isActive())}open(e=!0){return this.setOpen(!0,e)}close(e=!0){return this.setOpen(!1,e)}toggle(e=!0){return this.setOpen(!this._isOpen,e)}setOpen(e,t=!0){return Bg._setOpen(this,e,t)}focusFirstDescendant(){const{el:e}=this,t=e.querySelector(Zy);t?t.focus():e.focus()}focusLastDescendant(){const{el:e}=this,t=Array.from(e.querySelectorAll(Zy)),n=t.length>0?t[t.length-1]:null;n?n.focus():e.focus()}trapKeyboardFocus(e,t){const n=e.target;n&&(this.el.contains(n)?this.lastFocus=n:(this.focusFirstDescendant(),this.lastFocus===t.activeElement&&this.focusLastDescendant()))}async _setOpen(e,t=!0){return!(!this._isActive()||this.isAnimating||e===this._isOpen)&&(this.beforeAnimation(e),await this.loadAnimation(),await this.startAnimation(e,t),this.afterAnimation(e),!0)}async loadAnimation(){const e=this.menuInnerEl.offsetWidth,t=pf(this.side);e===this.width&&void 0!==this.animation&&t===this.isEndSide||(this.width=e,this.isEndSide=t,this.animation&&(this.animation.destroy(),this.animation=void 0),this.animation=await Bg._createAnimation(this.type,this),lg.getBoolean("animated",!0)||this.animation.duration(0),this.animation.fill("both"))}async startAnimation(e,t){const n=!e,i=Sg(this),r="ios"===i?"cubic-bezier(0.32,0.72,0,1)":"cubic-bezier(0.0,0.0,0.2,1)",a="ios"===i?"cubic-bezier(1, 0, 0.68, 0.28)":"cubic-bezier(0.4, 0, 0.6, 1)",o=this.animation.direction(n?"reverse":"normal").easing(n?a:r).onFinish((()=>{"reverse"===o.getDirection()&&o.direction("normal")}));t?await o.play():o.play({sync:!0})}_isActive(){return!this.disabled&&!this.isPaneVisible}canSwipe(){return this.swipeGesture&&!this.isAnimating&&this._isActive()}canStart(e){return!(!!document.querySelector("ion-modal.show-modal")||!this.canSwipe())&&(!!this._isOpen||!Bg._getOpenSync()&&nv(window,e.currentX,this.isEndSide,this.maxEdgeStart))}onWillStart(){return this.beforeAnimation(!this._isOpen),this.loadAnimation()}onStart(){this.isAnimating&&this.animation?this.animation.progressStart(!0,this._isOpen?1:0):hf(!1,"isAnimating has to be true")}onMove(e){if(!this.isAnimating||!this.animation)return void hf(!1,"isAnimating has to be true");const t=tv(e.deltaX,this._isOpen,this.isEndSide)/this.width;this.animation.progressStep(this._isOpen?1-t:t)}onEnd(e){if(!this.isAnimating||!this.animation)return void hf(!1,"isAnimating has to be true");const t=this._isOpen,n=this.isEndSide,i=tv(e.deltaX,t,n),r=this.width,a=i/r,o=e.velocityX,s=r/2,l=o>=0&&(o>.2||e.deltaX>s),c=o<=0&&(o<-.2||e.deltaX<-s),u=t?n?l:c:n?c:l;let d=!t&&u;t&&!u&&(d=!0),this.lastOnEnd=e.currentTime;let h=u?.001:-.001;h+=Vf([0,0],[.4,0],[.6,1],[1,1],df(0,a<0?.01:a,.9999))[0]||0;const p=this._isOpen?!u:u;this.animation.easing("cubic-bezier(0.4, 0.0, 0.6, 1)").onFinish((()=>this.afterAnimation(d)),{oneTimeCallback:!0}).progressEnd(p?1:0,this._isOpen?1-h:h,300)}beforeAnimation(e){hf(!this.isAnimating,"_before() should not be called while animating"),this.el.classList.add(iv),this.el.setAttribute("tabindex","0"),this.backdropEl&&this.backdropEl.classList.add(rv),this.contentEl&&(this.contentEl.classList.add(av),this.contentEl.setAttribute("aria-hidden","true")),this.blocker.block(),this.isAnimating=!0,e?this.ionWillOpen.emit():this.ionWillClose.emit()}afterAnimation(e){var t;if(hf(this.isAnimating,"_before() should be called while animating"),this._isOpen=e,this.isAnimating=!1,this._isOpen||this.blocker.unblock(),e){this.ionDidOpen.emit();(null===(t=document.activeElement)||void 0===t?void 0:t.closest("ion-menu"))!==this.el&&this.el.focus(),document.addEventListener("focus",this.handleFocus,!0)}else this.el.classList.remove(iv),this.el.removeAttribute("tabindex"),this.contentEl&&(this.contentEl.classList.remove(av),this.contentEl.removeAttribute("aria-hidden")),this.backdropEl&&this.backdropEl.classList.remove(rv),this.animation&&this.animation.stop(),this.ionDidClose.emit(),document.removeEventListener("focus",this.handleFocus,!0)}updateState(){const e=this._isActive();this.gesture&&this.gesture.enable(e&&this.swipeGesture),!e&&this._isOpen&&this.forceClosing(),(null==Zm?void 0:Zm.contains(this.el))&&(this.disabled||Bg._setActiveMenu(this)),hf(!this.isAnimating,"can not be animating")}forceClosing(){hf(this._isOpen,"menu cannot be closed"),this.isAnimating=!0;this.animation.direction("reverse").play({sync:!0}),this.afterAnimation(!1)}render(){const{type:e,disabled:t,isPaneVisible:n,inheritedAttributes:i,side:r}=this,a=Sg(this);return jp(Bp,{role:"navigation","aria-label":i["aria-label"]||"menu",class:{[a]:!0,[`menu-type-${e}`]:!0,"menu-enabled":!t,[`menu-side-${r}`]:!0,"menu-pane-visible":n}},jp("div",{class:"menu-inner",part:"container",ref:e=>this.menuInnerEl=e},jp("slot",null)),jp("ion-backdrop",{ref:e=>this.backdropEl=e,class:"menu-backdrop",tappable:!1,stopPropagation:!1,part:"backdrop"}))}get el(){return this}static get watchers(){return{type:["typeChanged"],disabled:["disabledChanged"],side:["sideChanged"],swipeGesture:["swipeGestureChanged"]}}static get style(){return{ios:":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{-webkit-transform:translateX(-9999px);transform:translateX(-9999px);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{inset-inline-start:0;inset-inline-end:auto}}@supports not (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{left:0;right:auto}:host-context([dir=rtl]):host(.menu-side-start) .menu-inner,:host-context([dir=rtl]).menu-side-start .menu-inner{left:unset;right:unset;left:auto;right:0}@supports selector(:dir(rtl)){:host(.menu-side-start) .menu-inner:dir(rtl){left:unset;right:unset;left:auto;right:0}}}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{inset-inline-start:auto;inset-inline-end:0}}@supports not (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{left:auto;right:0}:host-context([dir=rtl]):host(.menu-side-end) .menu-inner,:host-context([dir=rtl]).menu-side-end .menu-inner{left:unset;right:unset;left:0;right:auto}@supports selector(:dir(rtl)){:host(.menu-side-end) .menu-inner:dir(rtl){left:unset;right:unset;left:0;right:auto}}}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){width:var(--width);min-width:var(--min-width);max-width:var(--max-width)}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none !important;transform:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}:host(.menu-pane-visible) ion-backdrop{display:hidden !important;}:host(.menu-type-push){z-index:1000}:host(.menu-type-push) .show-backdrop{display:block}",md:":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{-webkit-transform:translateX(-9999px);transform:translateX(-9999px);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{inset-inline-start:0;inset-inline-end:auto}}@supports not (inset-inline-start: 0){:host(.menu-side-start) .menu-inner{left:0;right:auto}:host-context([dir=rtl]):host(.menu-side-start) .menu-inner,:host-context([dir=rtl]).menu-side-start .menu-inner{left:unset;right:unset;left:auto;right:0}@supports selector(:dir(rtl)){:host(.menu-side-start) .menu-inner:dir(rtl){left:unset;right:unset;left:auto;right:0}}}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;top:0;bottom:0}@supports (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{inset-inline-start:auto;inset-inline-end:0}}@supports not (inset-inline-start: 0){:host(.menu-side-end) .menu-inner{left:auto;right:0}:host-context([dir=rtl]):host(.menu-side-end) .menu-inner,:host-context([dir=rtl]).menu-side-end .menu-inner{left:unset;right:unset;left:0;right:auto}@supports selector(:dir(rtl)){:host(.menu-side-end) .menu-inner:dir(rtl){left:unset;right:unset;left:0;right:auto}}}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){width:var(--width);min-width:var(--min-width);max-width:var(--max-width)}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none !important;transform:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}:host(.menu-pane-visible) ion-backdrop{display:hidden !important;}:host(.menu-type-overlay) .menu-inner{-webkit-box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18);box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18)}"}}},[33,"ion-menu",{contentId:[513,"content-id"],menuId:[513,"menu-id"],type:[1025],disabled:[1028],side:[513],swipeGesture:[4,"swipe-gesture"],maxEdgeStart:[2,"max-edge-start"],isPaneVisible:[32],isEndSide:[32],isOpen:[64],isActive:[64],open:[64],close:[64],toggle:[64],setOpen:[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]]),tv=(e,t,n)=>Math.max(0,t!==n?-e:e),nv=(e,t,n,i)=>n?t>=e.innerWidth-i:t<=i,iv="show-menu",rv="show-backdrop",av="menu-content-open";const ov=function(){if("undefined"==typeof customElements)return;["ion-menu","ion-backdrop"].forEach((e=>{switch(e){case"ion-menu":customElements.get(e)||customElements.define(e,ev);break;case"ion-backdrop":customElements.get(e)||Pb()}}))},sv=async e=>{const t=await Bg.get(e);return!(!t||!(await t.isActive()))},lv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.onClick=async()=>Bg.toggle(this.menu),this.visible=!1,this.color=void 0,this.disabled=!1,this.menu=void 0,this.autoHide=!0,this.type="button"}componentWillLoad(){this.inheritedAttributes=rf(this.el)}componentDidLoad(){this.visibilityChanged()}async visibilityChanged(){this.visible=await sv(this.menu)}render(){const{color:e,disabled:t,inheritedAttributes:n}=this,i=Sg(this),r=lg.get("menuIcon","ios"===i?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>"),a=this.autoHide&&!this.visible,o={type:this.type},s=n["aria-label"]||"menu";return jp(Bp,{onClick:this.onClick,"aria-disabled":t?"true":null,"aria-hidden":a?"true":null,class:$b(e,{[i]:!0,button:!0,"menu-button-hidden":a,"menu-button-disabled":t,"in-toolbar":Mb("ion-toolbar",this.el),"in-toolbar-color":Mb("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0})},jp("button",Object.assign({},o,{disabled:t,class:"button-native",part:"native","aria-label":s}),jp("span",{class:"button-inner"},jp("slot",null,jp("ion-icon",{part:"icon",icon:r,mode:i,lazy:!1,"aria-hidden":"true"}))),"md"===i&&jp("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:':host{--background:transparent;--color-focused:currentColor;--border-radius:initial;--padding-top:0;--padding-bottom:0;color:var(--color);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;pointer-events:none}:host(.menu-button-hidden){display:none}:host(.menu-button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity, 0)}}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #3880ff);--padding-start:5px;--padding-end:5px;height:32px;font-size:31px}:host(.ion-activated){opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',md:':host{--background:transparent;--color-focused:currentColor;--border-radius:initial;--padding-top:0;--padding-bottom:0;color:var(--color);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;pointer-events:none}:host(.menu-button-hidden){display:none}:host(.menu-button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity, 0)}}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:.04;--border-radius:50%;--color:initial;--padding-start:8px;--padding-end:8px;width:48px;height:48px;font-size:24px}:host(.ion-color.ion-focused)::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}'}}},[33,"ion-menu-button",{color:[513],disabled:[4],menu:[1],autoHide:[4,"auto-hide"],type:[1],visible:[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const cv=function(){if("undefined"==typeof customElements)return;["ion-menu-button","ion-icon","ion-ripple-effect"].forEach((e=>{switch(e){case"ion-menu-button":customElements.get(e)||customElements.define(e,lv);break;case"ion-icon":customElements.get(e)||Ob();break;case"ion-ripple-effect":customElements.get(e)||Yb()}}))},uv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.onClick=()=>Bg.toggle(this.menu),this.visible=!1,this.menu=void 0,this.autoHide=!0}connectedCallback(){this.visibilityChanged()}async visibilityChanged(){this.visible=await sv(this.menu)}render(){const e=Sg(this),t=this.autoHide&&!this.visible;return jp(Bp,{onClick:this.onClick,"aria-hidden":t?"true":null,class:{[e]:!0,"menu-toggle-hidden":t}},jp("slot",null))}static get style(){return":host(.menu-toggle-hidden){display:none}"}},[1,"ion-menu-toggle",{menu:[1],autoHide:[4,"auto-hide"],visible:[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const dv=function(){if("undefined"==typeof customElements)return;["ion-menu-toggle"].forEach((e=>{if("ion-menu-toggle"===e)customElements.get(e)||customElements.define(e,uv)}))};class hv{constructor(e,t){this.component=e,this.params=t,this.state=1}async init(e){if(this.state=2,!this.element){const t=this.component;this.element=await Fg(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){hf(3!==this.state,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=3}}const pv=(e,t,n)=>!!e&&(e.component===t&&gf(e.params,n)),mv=(e,t)=>e?e instanceof hv?e:new hv(e,t):null,fv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Vp(this,"ionNavWillLoad",7),this.ionNavWillChange=Vp(this,"ionNavWillChange",3),this.ionNavDidChange=Vp(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(!0===this.swipeGesture)}rootChanged(){void 0!==this.root&&!1!==this.didLoad&&(this.useRouter||void 0!==this.root&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=null!==document.querySelector("ion-router")&&null===this.el.closest("[no-router]"),void 0===this.swipeGesture){const e=Sg(this);this.swipeGesture=lg.getBoolean("swipeBackEnabled","ios"===e)}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await vp((()=>n.import("./swipe-back-legacy-ce12d52d.js")))).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)Bf(e.element,kf),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,t,n,i){return this.insert(-1,e,t,n,i)}insert(e,t,n,i,r){return this.insertPages(e,[{component:t,componentProps:n}],i,r)}insertPages(e,t,n,i){return this.queueTrns({insertStart:e,insertViews:t,opts:n},i)}pop(e,t){return this.removeIndex(-1,1,e,t)}popTo(e,t,n){const i={removeStart:-1,removeCount:-1,opts:t};return"object"==typeof e&&e.component?(i.removeView=e,i.removeStart=1):"number"==typeof e&&(i.removeStart=e+1),this.queueTrns(i,n)}popToRoot(e,t){return this.removeIndex(1,-1,e,t)}removeIndex(e,t=1,n,i){return this.queueTrns({removeStart:e,removeCount:t,opts:n},i)}setRoot(e,t,n,i){return this.setPages([{component:e,componentProps:t}],n,i)}setPages(e,t,n){return null!=t||(t={}),!0!==t.animated&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},n)}setRouteId(e,t,n,i){const r=this.getActiveSync();if(pv(r,e,t))return Promise.resolve({changed:!1,element:r.element});let a;const o=new Promise((e=>a=e));let s;const l={updateURL:!1,viewIsReady:e=>{let t;const n=new Promise((e=>t=e));return a({changed:!0,element:e,markVisible:async()=>{t(),await s}}),n}};if("root"===n)s=this.setRoot(e,t,l);else{const r=this.views.find((n=>pv(n,e,t)));r?s=this.popTo(r,Object.assign(Object.assign({},l),{direction:"back",animationBuilder:i})):"forward"===n?s=this.push(e,t,Object.assign(Object.assign({},l),{animationBuilder:i})):"back"===n&&(s=this.setRoot(e,t,Object.assign(Object.assign({},l),{direction:"back",animated:!0,animationBuilder:i})))}return o}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!(!e||!this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const t=this.views,n=t.indexOf(e);return n>0?t[n-1]:void 0}async queueTrns(e,t){var n,i;if(this.isTransitioning&&(null===(n=e.opts)||void 0===n?void 0:n.skipIfBusy))return!1;const r=new Promise(((t,n)=>{e.resolve=t,e.reject=n}));if(e.done=t,e.opts&&!1!==e.opts.updateURL&&this.useRouter){const t=document.querySelector("ion-router");if(t){const n=await t.canTransition();if(!1===n)return!1;if("string"==typeof n)return t.push(n,e.opts.direction||"back"),!1}}return 0===(null===(i=e.insertViews)||void 0===i?void 0:i.length)&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),r}success(e,t){if(this.destroyed)this.fireError("nav controller was destroyed",t);else if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),!1!==t.opts.updateURL&&this.useRouter){const t=document.querySelector("ion-router");if(t){const n="back"===e.direction?"back":"forward";t.navChanged(n)}}}failed(e,t){this.destroyed?this.fireError("nav controller was destroyed",t):(this.transInstr.length=0,this.fireError(e,t))}fireError(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return!!e&&(this.runTransition(e),!0)}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const t=this.getActiveSync(),n=this.getEnteringView(e,t);if(!t&&!n)throw new Error("no views in the stack to be removed");n&&1===n.state&&await n.init(this.el),this.postViewInit(n,t,e);const i=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&n!==t;if(i&&e.opts&&t){"back"===e.opts.direction&&(e.opts.animationBuilder=e.opts.animationBuilder||(null==n?void 0:n.animationBuilder)),t.animationBuilder=e.opts.animationBuilder}let r;r=i?await this.transition(n,t,e):{hasCompleted:!0,requiresTransition:!1},this.success(r,e),this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var t,n,i;const r=this.views.length;if(null!==(t=e.opts)&&void 0!==t||(e.opts={}),null!==(n=(i=e.opts).delegate)&&void 0!==n||(i.delegate=this.delegate),void 0!==e.removeView){hf(void 0!==e.removeStart,"removeView needs removeStart"),hf(void 0!==e.removeCount,"removeView needs removeCount");const t=this.views.indexOf(e.removeView);if(t<0)throw new Error("removeView was not found");e.removeStart+=t}void 0!==e.removeStart&&(e.removeStart<0&&(e.removeStart=r-1),e.removeCount<0&&(e.removeCount=r-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===r),e.insertViews&&((e.insertStart<0||e.insertStart>r)&&(e.insertStart=r),e.enteringRequiresTransition=e.insertStart===r);const a=e.insertViews;if(!a)return;hf(a.length>0,"length can not be zero");const o=a.map((e=>e instanceof hv?e:"component"in e?mv(e.component,null===e.componentProps?void 0:e.componentProps):mv(e,void 0))).filter((e=>null!==e));if(0===o.length)throw new Error("invalid views to insert");for(const s of o){s.delegate=e.opts.delegate;const t=s.nav;if(t&&t!==this)throw new Error("inserted view was already inserted");if(3===s.state)throw new Error("inserted view was already destroyed")}e.insertViews=o}getEnteringView(e,t){const n=e.insertViews;if(void 0!==n)return n[n.length-1];const i=e.removeStart;if(void 0!==i){const n=this.views,r=i+e.removeCount;for(let e=n.length-1;e>=0;e--){const a=n[e];if((e<i||e>=r)&&a!==t)return a}}}postViewInit(e,t,n){var i,r,a;hf(t||e,"Both leavingView and enteringView are null"),hf(n.resolve,"resolve must be valid"),hf(n.reject,"reject must be valid");const o=n.opts,{insertViews:s,removeStart:l,removeCount:c}=n;let u;if(void 0!==l&&void 0!==c){hf(l>=0,"removeStart can not be negative"),hf(c>=0,"removeCount can not be negative"),u=[];for(let n=l;n<l+c;n++){const i=this.views[n];void 0!==i&&i!==e&&i!==t&&u.push(i)}null!==(i=o.direction)&&void 0!==i||(o.direction="back")}const d=this.views.length+(null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0)-(null!=c?c:0);if(hf(d>=0,"final balance can not be negative"),0===d)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(s){let e=n.insertStart;for(const t of s)this.insertViewAt(t,e),e++;n.enteringRequiresTransition&&(null!==(a=o.direction)&&void 0!==a||(o.direction="forward"))}if(u&&u.length>0){for(const e of u)Bf(e.element,Sf),Bf(e.element,Nf),Bf(e.element,kf);for(const e of u)this.destroyView(e)}}async transition(e,t,n){const i=n.opts,r=i.progressAnimation?e=>{void 0===e||this.gestureOrAnimationInProgress?this.sbAni=e:(this.gestureOrAnimationInProgress=!0,e.onFinish((()=>{this.gestureOrAnimationInProgress=!1}),{oneTimeCallback:!0}),e.progressEnd(0,0,0))}:void 0,a=Sg(this),o=e.element,s=t&&t.element,l=Object.assign(Object.assign({mode:a,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:r,animated:this.animated&&lg.getBoolean("animated",!0),enteringEl:o,leavingEl:s},i),{animationBuilder:i.animationBuilder||this.animation||lg.get("navAnimation")}),{hasCompleted:c}=await Af(l);return this.transitionFinish(c,e,t,i)}transitionFinish(e,t,n,i){const r=e?t:n;return r&&this.unmountInactiveViews(r),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:n,direction:i.direction}}insertViewAt(e,t){const n=this.views,i=n.indexOf(e);i>-1?(hf(e.nav===this,"view is not part of the nav"),n.splice(i,1),n.splice(t,0,e)):(hf(!e.nav,"nav is used"),e.nav=this,n.splice(t,0,e))}removeView(e){hf(2===e.state||3===e.state,"view state should be loaded or destroyed");const t=this.views,n=t.indexOf(e);hf(n>-1,"view must be part of the stack"),n>=0&&t.splice(n,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const t=this.views,n=t.indexOf(e);for(let i=t.length-1;i>=0;i--){const e=t[i],r=e.element;r&&(i>n?(Bf(r,kf),this.destroyView(e)):i<n&&zf(r,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&0===this.transInstr.length&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,t,n){if(this.sbAni){this.sbAni.onFinish((()=>{this.gestureOrAnimationInProgress=!1}),{oneTimeCallback:!0});let i=e?-.001:.001;e?i+=Vf([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),i+=Vf([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,i,n)}else this.gestureOrAnimationInProgress=!1}render(){return jp("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);const gv=function(){if("undefined"==typeof customElements)return;["ion-nav"].forEach((e=>{if("ion-nav"===e)customElements.get(e)||customElements.define(e,fv)}))};const bv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=Vp(this,"ionChange",7),this.ionInput=Vp(this,"ionInput",7),this.ionStyle=Vp(this,"ionStyle",7),this.ionFocus=Vp(this,"ionFocus",7),this.ionBlur=Vp(this,"ionBlur",7),this.ionKnobMoveStart=Vp(this,"ionKnobMoveStart",7),this.ionKnobMoveEnd=Vp(this,"ionKnobMoveEnd",7),this.rangeId="ion-r-"+Ev++,this.didLoad=!1,this.noUpdate=!1,this.hasFocus=!1,this.inheritedAttributes={},this.contentEl=null,this.initialContentScrollY=!0,this.hasLoggedDeprecationWarning=!1,this.clampBounds=e=>df(this.min,e,this.max),this.ensureValueInBounds=e=>this.dualKnobs?{lower:this.clampBounds(e.lower),upper:this.clampBounds(e.upper)}:this.clampBounds(e),this.setupGesture=async()=>{const e=this.rangeSlider;e&&(this.gesture=(await vp((()=>Promise.resolve().then((()=>og))))).createGesture({el:e,gestureName:"range",gesturePriority:100,threshold:0,onStart:e=>this.onStart(e),onMove:e=>this.onMove(e),onEnd:e=>this.onEnd(e)}),this.gesture.enable(!this.disabled))},this.handleKeyboard=(e,t)=>{const{ensureValueInBounds:n}=this;let i=this.step;i=i>0?i:1,i/=this.max-this.min,t||(i*=-1),"A"===e?this.ratioA=df(0,this.ratioA+i,1):this.ratioB=df(0,this.ratioB+i,1),this.ionKnobMoveStart.emit({value:n(this.value)}),this.updateValue(),this.emitValueChange(),this.ionKnobMoveEnd.emit({value:n(this.value)})},this.onBlur=()=>{this.hasFocus&&(this.hasFocus=!1,this.ionBlur.emit(),this.emitStyle())},this.onFocus=()=>{this.hasFocus||(this.hasFocus=!0,this.ionFocus.emit(),this.emitStyle())},this.ratioA=0,this.ratioB=0,this.pressedKnob=void 0,this.color=void 0,this.debounce=void 0,this.name=this.rangeId,this.label=void 0,this.dualKnobs=!1,this.min=0,this.max=100,this.pin=!1,this.pinFormatter=e=>Math.round(e),this.snaps=!1,this.step=1,this.ticks=!0,this.activeBarStart=void 0,this.disabled=!1,this.value=0,this.labelPlacement="start",this.legacy=void 0}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:n}=this;this.ionInput=void 0===t?null!=n?n:e:mf(e,t)}minChanged(){this.noUpdate||this.updateRatio()}maxChanged(){this.noUpdate||this.updateRatio()}activeBarStartChanged(){const{activeBarStart:e}=this;void 0!==e&&(e>this.max?(zg(`Range: The value of activeBarStart (${e}) is greater than the max (${this.max}). Valid values are greater than or equal to the min value and less than or equal to the max value.`,this.el),this.activeBarStart=this.max):e<this.min&&(zg(`Range: The value of activeBarStart (${e}) is less than the min (${this.min}). Valid values are greater than or equal to the min value and less than or equal to the max value.`,this.el),this.activeBarStart=this.min))}disabledChanged(){this.gesture&&this.gesture.enable(!this.disabled),this.emitStyle()}valueChanged(){this.noUpdate||this.updateRatio()}componentWillLoad(){this.el.hasAttribute("id")&&(this.rangeId=this.el.getAttribute("id")),this.inheritedAttributes=rf(this.el)}componentDidLoad(){this.originalIonInput=this.ionInput,this.setupGesture(),this.didLoad=!0}connectedCallback(){const{el:e}=this;this.legacyFormController=zb(e),this.updateRatio(),this.debounceChanged(),this.disabledChanged(),this.activeBarStartChanged(),this.didLoad&&this.setupGesture(),this.contentEl=Sy(this.el)}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}getValue(){var e;const t=null!==(e=this.value)&&void 0!==e?e:0;return this.dualKnobs?"object"==typeof t?t:{lower:0,upper:t}:"object"==typeof t?t.upper:t}emitStyle(){this.legacyFormController.hasLegacyControl()&&this.ionStyle.emit({interactive:!0,"interactive-disabled":this.disabled})}emitValueChange(){this.value=this.ensureValueInBounds(this.value),this.ionChange.emit({value:this.value})}onStart(e){const{contentEl:t}=this;t&&(this.initialContentScrollY=(e=>{if(xy(e)){const t=e,n=t.scrollY;return t.scrollY=!1,n}return e.style.setProperty("overflow","hidden"),!0})(t));const n=this.rect=this.rangeSlider.getBoundingClientRect(),i=e.currentX;let r=df(0,(i-n.left)/n.width,1);ry(this.el)&&(r=1-r),this.pressedKnob=!this.dualKnobs||Math.abs(this.ratioA-r)<Math.abs(this.ratioB-r)?"A":"B",this.setFocus(this.pressedKnob),this.update(i),this.ionKnobMoveStart.emit({value:this.ensureValueInBounds(this.value)})}onMove(e){this.update(e.currentX)}onEnd(e){const{contentEl:t,initialContentScrollY:n}=this;t&&((e,t)=>{xy(e)?e.scrollY=t:e.style.removeProperty("overflow")})(t,n),this.update(e.currentX),this.pressedKnob=void 0,this.emitValueChange(),this.ionKnobMoveEnd.emit({value:this.ensureValueInBounds(this.value)})}update(e){const t=this.rect;let n=df(0,(e-t.left)/t.width,1);ry(this.el)&&(n=1-n),this.snaps&&(n=wv(vv(n,this.min,this.max,this.step),this.min,this.max)),"A"===this.pressedKnob?this.ratioA=n:this.ratioB=n,this.updateValue()}get valA(){return vv(this.ratioA,this.min,this.max,this.step)}get valB(){return vv(this.ratioB,this.min,this.max,this.step)}get ratioLower(){if(this.dualKnobs)return Math.min(this.ratioA,this.ratioB);const{activeBarStart:e}=this;return null==e?0:wv(e,this.min,this.max)}get ratioUpper(){return this.dualKnobs?Math.max(this.ratioA,this.ratioB):this.ratioA}updateRatio(){const e=this.getValue(),{min:t,max:n}=this;this.dualKnobs?(this.ratioA=wv(e.lower,t,n),this.ratioB=wv(e.upper,t,n)):this.ratioA=wv(e,t,n)}updateValue(){this.noUpdate=!0;const{valA:e,valB:t}=this;this.value=this.dualKnobs?{lower:Math.min(e,t),upper:Math.max(e,t)}:e,this.ionInput.emit({value:this.value}),this.noUpdate=!1}setFocus(e){if(this.el.shadowRoot){const t=this.el.shadowRoot.querySelector("A"===e?".range-knob-a":".range-knob-b");t&&t.focus()}}renderLegacyRange(){this.hasLoggedDeprecationWarning||(zg('ion-range now requires providing a label with either the label slot or the "aria-label" attribute. To migrate, remove any usage of "ion-label" and pass the label text to either the component or the "aria-label" attribute.\n\nExample: <ion-range><div slot="label">Volume</div></ion-range>\nExample with aria-label: <ion-range aria-label="Volume"></ion-range>\n\nDevelopers can use the "legacy" property to continue using the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.',this.el),this.legacy&&zg('ion-range is being used with the "legacy" property enabled which will forcibly enable the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.\n\nDevelopers can dismiss this warning by removing their usage of the "legacy" property and using the new range syntax.',this.el),this.hasLoggedDeprecationWarning=!0);const{el:e,pressedKnob:t,disabled:n,pin:i,rangeId:r}=this,a=Sg(this);return uf(!0,e,this.name,JSON.stringify(this.getValue()),n),jp(Bp,{onFocusin:this.onFocus,onFocusout:this.onBlur,id:r,class:$b(this.color,{[a]:!0,"in-item":Mb("ion-item",e),"range-disabled":n,"range-pressed":void 0!==t,"range-has-pin":i,"legacy-range":!0})},jp("slot",{name:"start"}),this.renderRangeSlider(),jp("slot",{name:"end"}))}renderRange(){const{disabled:e,el:t,rangeId:n,pin:i,pressedKnob:r,labelPlacement:a,label:o}=this,s=Sg(this);return uf(!0,t,this.name,JSON.stringify(this.getValue()),e),jp(Bp,{onFocusin:this.onFocus,onFocusout:this.onBlur,id:n,class:$b(this.color,{[s]:!0,"in-item":Mb("ion-item",t),"range-disabled":e,"range-pressed":void 0!==r,"range-has-pin":i,[`range-label-placement-${a}`]:!0})},jp("label",{class:"range-wrapper",id:"range-label"},jp("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},void 0!==o?jp("div",{class:"label-text"},o):jp("slot",{name:"label"})),jp("div",{class:"native-wrapper"},jp("slot",{name:"start"}),this.renderRangeSlider(),jp("slot",{name:"end"}))))}get hasLabel(){return void 0!==this.label||null!==this.el.querySelector('[slot="label"]')}renderRangeSlider(){var e;const{min:t,max:n,step:i,el:r,handleKeyboard:a,pressedKnob:o,disabled:s,pin:l,ratioLower:c,ratioUpper:u,inheritedAttributes:d,rangeId:h,pinFormatter:p}=this;let{labelText:m}=((e,t)=>{let n;const i=e.getAttribute("aria-labelledby"),r=e.id;let a=null!==i&&""!==i.trim()?i:t+"-lbl",o=null!==i&&""!==i.trim()?document.getElementById(i):cf(e);return o?(null===i&&(o.id=a),n=o.textContent,o.setAttribute("aria-hidden","true")):""!==r.trim()&&(o=document.querySelector(`label[for="${r}"]`),o&&(""!==o.id?a=o.id:o.id=a=`${r}-lbl`,n=o.textContent)),{label:o,labelId:a,labelText:n}})(r,h);null==m&&(m=d["aria-label"]);let f=100*c+"%",g=100-100*u+"%";const b=ry(this.el),y=b?"right":"left",v=b?"left":"right",w=e=>({[y]:e[y]});!1===this.dualKnobs&&(this.valA<(null!==(e=this.activeBarStart)&&void 0!==e?e:this.min)?(f=100*u+"%",g=100-100*c+"%"):(f=100*c+"%",g=100-100*u+"%"));const E={[y]:f,[v]:g},x=[];if(this.snaps&&this.ticks)for(let C=t;C<=n;C+=i){const e=wv(C,t,n),i=Math.min(c,u),r=Math.max(c,u),a={ratio:e,active:e>=i&&e<=r};a[y]=100*e+"%",x.push(a)}let T;return!this.legacyFormController.hasLegacyControl()&&this.hasLabel&&(T="range-label"),jp("div",{class:"range-slider",ref:e=>this.rangeSlider=e},x.map((e=>jp("div",{style:w(e),role:"presentation",class:{"range-tick":!0,"range-tick-active":e.active},part:e.active?"tick-active":"tick"}))),jp("div",{class:"range-bar-container"},jp("div",{class:"range-bar",role:"presentation",part:"bar"}),jp("div",{class:{"range-bar":!0,"range-bar-active":!0,"has-ticks":x.length>0},role:"presentation",style:E,part:"bar-active"})),yv(b,{knob:"A",pressed:"A"===o,value:this.valA,ratio:this.ratioA,pin:l,pinFormatter:p,disabled:s,handleKeyboard:a,min:t,max:n,labelText:m,labelledBy:T}),this.dualKnobs&&yv(b,{knob:"B",pressed:"B"===o,value:this.valB,ratio:this.ratioB,pin:l,pinFormatter:p,disabled:s,handleKeyboard:a,min:t,max:n,labelText:m,labelledBy:T}))}render(){const{legacyFormController:e}=this;return e.hasLegacyControl()?this.renderLegacyRange():this.renderRange()}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],min:["minChanged"],max:["maxChanged"],activeBarStart:["activeBarStartChanged"],disabled:["disabledChanged"],value:["valueChanged"]}}static get style(){return{ios:":host{--knob-handle-size:calc(var(--knob-size) * 2);display:-ms-flexbox;display:flex;position:relative;-ms-flex:3;flex:3;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.range-disabled){pointer-events:none}::slotted(ion-label){-ms-flex:initial;flex:initial}::slotted(ion-icon[slot]){font-size:24px}.range-slider{position:relative;-ms-flex:1;flex:1;width:100%;height:var(--height);contain:size layout style;cursor:-webkit-grab;cursor:grab;-ms-touch-action:pan-y;touch-action:pan-y}:host(.range-pressed) .range-slider{cursor:-webkit-grabbing;cursor:grabbing}.range-pin{position:absolute;background:var(--ion-color-base);color:var(--ion-color-contrast);text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.range-knob-handle{top:calc((var(--height) - var(--knob-handle-size)) / 2);-webkit-margin-start:calc(0px - var(--knob-handle-size) / 2);margin-inline-start:calc(0px - var(--knob-handle-size) / 2);position:absolute;width:var(--knob-handle-size);height:var(--knob-handle-size);text-align:center}@supports (inset-inline-start: 0){.range-knob-handle{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob-handle{left:0}:host-context([dir=rtl]) .range-knob-handle{left:unset;right:unset;right:0}[dir=rtl] .range-knob-handle{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-knob-handle{left:unset}[dir=rtl] .range-knob-handle{left:unset}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset}}.range-knob-handle:active,.range-knob-handle:focus{outline:none}.range-bar-container{border-radius:var(--bar-border-radius);top:calc((var(--height) - var(--bar-height)) / 2);position:absolute;width:100%;height:var(--bar-height)}@supports (inset-inline-start: 0){.range-bar-container{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-bar-container{left:0}:host-context([dir=rtl]) .range-bar-container{left:unset;right:unset;right:0}[dir=rtl] .range-bar-container{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-bar-container{left:unset}[dir=rtl] .range-bar-container{left:unset}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset}}.range-bar{border-radius:var(--bar-border-radius);position:absolute;width:100%;height:var(--bar-height);background:var(--bar-background);pointer-events:none}.range-knob{border-radius:var(--knob-border-radius);top:calc(50% - var(--knob-size) / 2);position:absolute;width:var(--knob-size);height:var(--knob-size);background:var(--knob-background);-webkit-box-shadow:var(--knob-box-shadow);box-shadow:var(--knob-box-shadow);z-index:2;pointer-events:none}@supports (inset-inline-start: 0){.range-knob{inset-inline-start:calc(50% - var(--knob-size) / 2)}}@supports not (inset-inline-start: 0){.range-knob{left:calc(50% - var(--knob-size) / 2)}:host-context([dir=rtl]) .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}[dir=rtl] .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}}}:host-context([dir=rtl]) .range-knob{left:unset}[dir=rtl] .range-knob{left:unset}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset}}:host(.range-pressed) .range-bar-active{will-change:left, right}:host(.in-item){width:100%}:host([slot=start]),:host([slot=end]){width:auto}:host(.in-item) ::slotted(ion-label){-ms-flex-item-align:center;align-self:center}.range-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit}::slotted([slot=label]){max-width:200px;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}:host(.range-label-placement-start) .range-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.range-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-end) .range-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.range-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host{--knob-border-radius:50%;--knob-background:#ffffff;--knob-box-shadow:0px 0.5px 4px rgba(0, 0, 0, 0.12), 0px 6px 13px rgba(0, 0, 0, 0.12);--knob-size:26px;--bar-height:4px;--bar-background:var(--ion-color-step-900, #e6e6e6);--bar-background-active:var(--ion-color-primary, #3880ff);--bar-border-radius:2px;--height:42px}:host(.legacy-range){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:8px;padding-bottom:8px}:host(.ion-color) .range-bar-active,:host(.ion-color) .range-tick-active{background:var(--ion-color-base)}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-has-pin){padding-top:20px}.range-bar-active{bottom:0;width:auto;background:var(--bar-background-active)}.range-bar-active.has-ticks{border-radius:0;-webkit-margin-start:-2px;margin-inline-start:-2px;-webkit-margin-end:-2px;margin-inline-end:-2px}.range-tick{-webkit-margin-start:-2px;margin-inline-start:-2px;border-radius:0;position:absolute;top:17px;width:4px;height:8px;background:var(--ion-color-step-900, #e6e6e6);pointer-events:none}.range-tick-active{background:var(--bar-background-active)}.range-pin{-webkit-transform:translate3d(0,  28px,  0) scale(0.01);transform:translate3d(0,  28px,  0) scale(0.01);-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;display:inline-block;position:relative;top:-20px;min-width:28px;-webkit-transition:-webkit-transform 120ms ease;transition:-webkit-transform 120ms ease;transition:transform 120ms ease;transition:transform 120ms ease, -webkit-transform 120ms ease;background:transparent;color:var(--ion-text-color, #000);font-size:12px;text-align:center}.range-knob-pressed .range-pin,.range-knob-handle.ion-focused .range-pin{-webkit-transform:translate3d(0,  0,  0) scale(1);transform:translate3d(0,  0,  0) scale(1)}:host(.range-disabled){opacity:0.3}",md:':host{--knob-handle-size:calc(var(--knob-size) * 2);display:-ms-flexbox;display:flex;position:relative;-ms-flex:3;flex:3;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.range-disabled){pointer-events:none}::slotted(ion-label){-ms-flex:initial;flex:initial}::slotted(ion-icon[slot]){font-size:24px}.range-slider{position:relative;-ms-flex:1;flex:1;width:100%;height:var(--height);contain:size layout style;cursor:-webkit-grab;cursor:grab;-ms-touch-action:pan-y;touch-action:pan-y}:host(.range-pressed) .range-slider{cursor:-webkit-grabbing;cursor:grabbing}.range-pin{position:absolute;background:var(--ion-color-base);color:var(--ion-color-contrast);text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.range-knob-handle{top:calc((var(--height) - var(--knob-handle-size)) / 2);-webkit-margin-start:calc(0px - var(--knob-handle-size) / 2);margin-inline-start:calc(0px - var(--knob-handle-size) / 2);position:absolute;width:var(--knob-handle-size);height:var(--knob-handle-size);text-align:center}@supports (inset-inline-start: 0){.range-knob-handle{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob-handle{left:0}:host-context([dir=rtl]) .range-knob-handle{left:unset;right:unset;right:0}[dir=rtl] .range-knob-handle{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-knob-handle{left:unset}[dir=rtl] .range-knob-handle{left:unset}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset}}.range-knob-handle:active,.range-knob-handle:focus{outline:none}.range-bar-container{border-radius:var(--bar-border-radius);top:calc((var(--height) - var(--bar-height)) / 2);position:absolute;width:100%;height:var(--bar-height)}@supports (inset-inline-start: 0){.range-bar-container{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-bar-container{left:0}:host-context([dir=rtl]) .range-bar-container{left:unset;right:unset;right:0}[dir=rtl] .range-bar-container{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .range-bar-container{left:unset}[dir=rtl] .range-bar-container{left:unset}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset}}.range-bar{border-radius:var(--bar-border-radius);position:absolute;width:100%;height:var(--bar-height);background:var(--bar-background);pointer-events:none}.range-knob{border-radius:var(--knob-border-radius);top:calc(50% - var(--knob-size) / 2);position:absolute;width:var(--knob-size);height:var(--knob-size);background:var(--knob-background);-webkit-box-shadow:var(--knob-box-shadow);box-shadow:var(--knob-box-shadow);z-index:2;pointer-events:none}@supports (inset-inline-start: 0){.range-knob{inset-inline-start:calc(50% - var(--knob-size) / 2)}}@supports not (inset-inline-start: 0){.range-knob{left:calc(50% - var(--knob-size) / 2)}:host-context([dir=rtl]) .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}[dir=rtl] .range-knob{left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset;right:unset;right:calc(50% - var(--knob-size) / 2)}}}:host-context([dir=rtl]) .range-knob{left:unset}[dir=rtl] .range-knob{left:unset}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset}}:host(.range-pressed) .range-bar-active{will-change:left, right}:host(.in-item){width:100%}:host([slot=start]),:host([slot=end]){width:auto}:host(.in-item) ::slotted(ion-label){-ms-flex-item-align:center;align-self:center}.range-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit}::slotted([slot=label]){max-width:200px;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}:host(.range-label-placement-start) .range-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.range-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-end) .range-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.range-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host{--knob-border-radius:50%;--knob-background:var(--bar-background-active);--knob-box-shadow:none;--knob-size:18px;--bar-height:2px;--bar-background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.26);--bar-background-active:var(--ion-color-primary, #3880ff);--bar-border-radius:0;--height:42px;--pin-background:var(--ion-color-primary, #3880ff);--pin-color:var(--ion-color-primary-contrast, #fff);font-size:12px}::slotted([slot=label]),.label-text{font-size:initial}:host(.legacy-range){-webkit-padding-start:14px;padding-inline-start:14px;-webkit-padding-end:14px;padding-inline-end:14px;padding-top:8px;padding-bottom:8px}:host(.ion-color) .range-bar{background:rgba(var(--ion-color-base-rgb), 0.26)}:host(.ion-color) .range-bar-active,:host(.ion-color) .range-knob,:host(.ion-color) .range-knob::before,:host(.ion-color) .range-pin,:host(.ion-color) .range-pin::before,:host(.ion-color) .range-tick{background:var(--ion-color-base);color:var(--ion-color-contrast)}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:14px;margin-inline-end:14px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:14px;margin-inline-start:14px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-has-pin){padding-top:28px}.range-bar-active{bottom:0;width:auto;background:var(--bar-background-active)}.range-knob{-webkit-transform:scale(0.67);transform:scale(0.67);-webkit-transition-duration:120ms;transition-duration:120ms;-webkit-transition-property:background-color, border, -webkit-transform;transition-property:background-color, border, -webkit-transform;transition-property:transform, background-color, border;transition-property:transform, background-color, border, -webkit-transform;-webkit-transition-timing-function:ease;transition-timing-function:ease;z-index:2}.range-knob::before{border-radius:50%;position:absolute;width:var(--knob-size);height:var(--knob-size);-webkit-transform:scale(1);transform:scale(1);-webkit-transition:0.267s cubic-bezier(0, 0, 0.58, 1);transition:0.267s cubic-bezier(0, 0, 0.58, 1);background:var(--knob-background);content:"";opacity:0.13;pointer-events:none}@supports (inset-inline-start: 0){.range-knob::before{inset-inline-start:0}}@supports not (inset-inline-start: 0){.range-knob::before{left:0}:host-context([dir=rtl]) .range-knob::before{left:unset;right:unset;right:0}[dir=rtl] .range-knob::before{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.range-knob::before:dir(rtl){left:unset;right:unset;right:0}}}.range-tick{position:absolute;top:calc((var(--height) - var(--bar-height)) / 2);width:var(--bar-height);height:var(--bar-height);background:var(--bar-background-active);z-index:1;pointer-events:none}.range-tick-active{background:transparent}.range-pin{padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;border-radius:50%;-webkit-transform:translate3d(0,  0,  0) scale(0.01);transform:translate3d(0,  0,  0) scale(0.01);display:inline-block;position:relative;min-width:28px;height:28px;-webkit-transition:background 120ms ease, -webkit-transform 120ms ease;transition:background 120ms ease, -webkit-transform 120ms ease;transition:transform 120ms ease, background 120ms ease;transition:transform 120ms ease, background 120ms ease, -webkit-transform 120ms ease;background:var(--pin-background);color:var(--pin-color);text-align:center}.range-pin::before{top:3px;-webkit-margin-start:-13px;margin-inline-start:-13px;border-radius:50% 50% 50% 0;position:absolute;width:26px;height:26px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transition:background 120ms ease;transition:background 120ms ease;background:var(--pin-background);content:"";z-index:-1}@supports (inset-inline-start: 0){.range-pin::before{inset-inline-start:50%}}@supports not (inset-inline-start: 0){.range-pin::before{left:50%}:host-context([dir=rtl]) .range-pin::before{left:unset;right:unset;right:50%}[dir=rtl] .range-pin::before{left:unset;right:unset;right:50%}@supports selector(:dir(rtl)){.range-pin::before:dir(rtl){left:unset;right:unset;right:50%}}}:host-context([dir=rtl]) .range-pin::before{left:unset}[dir=rtl] .range-pin::before{left:unset}@supports selector(:dir(rtl)){.range-pin::before:dir(rtl){left:unset}}.range-knob-pressed .range-pin,.range-knob-handle.ion-focused .range-pin{-webkit-transform:translate3d(0,  -24px,  0) scale(1);transform:translate3d(0,  -24px,  0) scale(1)}@media (any-hover: hover){.range-knob-handle:hover .range-knob:before{-webkit-transform:scale(2);transform:scale(2);opacity:0.13}}.range-knob-handle.ion-activated .range-knob:before,.range-knob-handle.ion-focused .range-knob:before,.range-knob-handle.range-knob-pressed .range-knob:before{-webkit-transform:scale(2);transform:scale(2)}.range-knob-handle.ion-focused .range-knob::before{opacity:0.13}.range-knob-handle.ion-activated .range-knob::before,.range-knob-handle.range-knob-pressed .range-knob::before{opacity:0.25}:host(:not(.range-has-pin)) .range-knob-pressed .range-knob,:host(:not(.range-has-pin)) .range-knob-handle.ion-focused .range-knob{-webkit-transform:scale(1);transform:scale(1)}:host(.range-disabled) .range-bar-active,:host(.range-disabled) .range-bar,:host(.range-disabled) .range-tick{background-color:var(--ion-color-step-250, #bfbfbf)}:host(.range-disabled) .range-knob{-webkit-transform:scale(0.55);transform:scale(0.55);outline:5px solid #fff;background-color:var(--ion-color-step-250, #bfbfbf)}:host(.range-disabled) .label-text-wrapper,:host(.range-disabled) ::slotted([slot=start]),:host(.range-disabled) ::slotted([slot=end]){opacity:0.38}'}}},[33,"ion-range",{color:[513],debounce:[2],name:[1],label:[1],dualKnobs:[4,"dual-knobs"],min:[2],max:[2],pin:[4],pinFormatter:[16],snaps:[4],step:[2],ticks:[4],activeBarStart:[1026,"active-bar-start"],disabled:[4],value:[1026],labelPlacement:[1,"label-placement"],legacy:[4],ratioA:[32],ratioB:[32],pressedKnob:[32]}]),yv=(e,{knob:t,value:n,ratio:i,min:r,max:a,disabled:o,pressed:s,pin:l,handleKeyboard:c,labelText:u,labelledBy:d,pinFormatter:h})=>{const p=e?"right":"left";return jp("div",{onKeyDown:e=>{const n=e.key;"ArrowLeft"===n||"ArrowDown"===n?(c(t,!1),e.preventDefault(),e.stopPropagation()):"ArrowRight"!==n&&"ArrowUp"!==n||(c(t,!0),e.preventDefault(),e.stopPropagation())},class:{"range-knob-handle":!0,"range-knob-a":"A"===t,"range-knob-b":"B"===t,"range-knob-pressed":s,"range-knob-min":n===r,"range-knob-max":n===a,"ion-activatable":!0,"ion-focusable":!0},style:(()=>{const e={};return e[p]=100*i+"%",e})(),role:"slider",tabindex:o?-1:0,"aria-label":void 0===d?u:null,"aria-labelledby":void 0!==d?d:null,"aria-valuemin":r,"aria-valuemax":a,"aria-disabled":o?"true":null,"aria-valuenow":n},l&&jp("div",{class:"range-pin",role:"presentation",part:"pin"},h(n)),jp("div",{class:"range-knob",role:"presentation",part:"knob"}))},vv=(e,t,n,i)=>{let r=(n-t)*e;i>0&&(r=Math.round(r/i)*i+t);return function(e,...t){const n=Math.max(...t.map((e=>function(e){return e%1==0?0:e.toString().split(".")[1].length}(e))));return Number(e.toFixed(n))}(df(t,r,n),t,n,i)},wv=(e,t,n)=>df(0,(e-t)/(n-t),1);let Ev=0;const xv=function(){if("undefined"==typeof customElements)return;["ion-range"].forEach((e=>{if("ion-range"===e)customElements.get(e)||customElements.define(e,bv)}))},Tv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return jp(Bp,{class:Sg(this)},jp("slot",null))}static get style(){return":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}"}},[1,"ion-row"]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Cv=function(){if("undefined"==typeof customElements)return;["ion-row"].forEach((e=>{if("ion-row"===e)customElements.get(e)||customElements.define(e,Tv)}))},Sv=(e,t)=>{let n,i;const r=(e,i,r)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(e,i);s&&t(s)?s!==n&&(o(),a(s,r)):o()},a=(e,t)=>{n=e,i||(i=n);const r=n;Jm((()=>r.classList.add("ion-activated"))),t()},o=(e=!1)=>{if(!n)return;const t=n;Jm((()=>t.classList.remove("ion-activated"))),e&&i!==n&&n.click(),n=void 0};return ng({el:e,gestureName:"buttonActiveDrag",threshold:0,onStart:e=>r(e.currentX,e.currentY,by),onMove:e=>r(e.currentX,e.currentY,yy),onEnd:()=>{o(!0),gy()&&fy.selectionEnd(),i=void 0}})},Nv=e=>{const t=Cf(),n=Cf(),i=Cf();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(e.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),t.addElement(e).easing("ease-in-out").duration(200).addAnimation([n,i])},kv=e=>{const t=Cf(),n=Cf(),i=Cf();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(e.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),t.addElement(e).easing("ease-in-out").duration(200).addAnimation([n,i])},Av=e=>{const t=Cf(),n=Cf(),i=Cf();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(e.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),t.addElement(e).easing("ease-in-out").duration(150).addAnimation([n,i])},_v=e=>{const t=Cf(),n=Cf(),i=Cf();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(e.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),t.addElement(e).easing("ease-in-out").duration(150).addAnimation([n,i])},Ov=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.didPresent=Vp(this,"ionAlertDidPresent",7),this.willPresent=Vp(this,"ionAlertWillPresent",7),this.willDismiss=Vp(this,"ionAlertWillDismiss",7),this.didDismiss=Vp(this,"ionAlertDidDismiss",7),this.didPresentShorthand=Vp(this,"didPresent",7),this.willPresentShorthand=Vp(this,"willPresent",7),this.willDismissShorthand=Vp(this,"willDismiss",7),this.didDismissShorthand=Vp(this,"didDismiss",7),this.delegateController=ub(this),this.triggerController=(()=>{let e;const t=()=>{e&&(e(),e=void 0)};return{addClickListener:(n,i)=>{t();const r=void 0!==i?document.getElementById(i):null;r?e=((e,t)=>{const n=()=>{t.present()};return e.addEventListener("click",n),()=>{e.removeEventListener("click",n)}})(r,n):zg(`A trigger element with the ID "${i}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,n)},removeClickListener:t}})(),this.customHTMLEnabled=lg.get("innerHTMLTemplatesEnabled",false),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,lb)},this.dispatchCancelHandler=e=>{const t=e.detail.role;if(ab(t)){const e=this.processedButtons.find((e=>"cancel"===e.role));this.callButtonHandler(e)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.header=void 0,this.subHeader=void 0,this.message=void 0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(e,t){!0===e&&!1===t?this.present():!1===e&&!0===t&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:n}=this;e&&n.addClickListener(t,e)}onKeydown(e){const t=new Set(this.processedInputs.map((e=>e.type)));if(!t.has("radio")||e.target&&!this.el.contains(e.target)||e.target.classList.contains("alert-button"))return;const n=this.el.querySelectorAll(".alert-radio"),i=Array.from(n).filter((e=>!e.disabled)),r=i.findIndex((t=>t.id===e.target.id));let a;if(["ArrowDown","ArrowRight"].includes(e.key)&&(a=r===i.length-1?i[0]:i[r+1]),["ArrowUp","ArrowLeft"].includes(e.key)&&(a=0===r?i[i.length-1]:i[r-1]),a&&i.includes(a)){const e=this.processedInputs.find((e=>e.id===(null==a?void 0:a.id)));e&&(this.rbClick(e),a.focus())}}buttonsChanged(){const e=this.buttons;this.processedButtons=e.map((e=>"string"==typeof e?{text:e,role:"cancel"===e.toLowerCase()?"cancel":void 0}:e))}inputsChanged(){const e=this.inputs,t=e.find((e=>!e.disabled)),n=e.find((e=>e.checked&&!e.disabled))||t,i=new Set(e.map((e=>e.type)));i.has("checkbox")&&i.has("radio")&&console.warn(`Alert cannot mix input types: ${Array.from(i.values()).join("/")}. Please see alert docs for more info.`),this.inputType=i.values().next().value,this.processedInputs=e.map(((e,t)=>{var i;return{type:e.type||"text",name:e.name||`${t}`,placeholder:e.placeholder||"",value:e.value,label:e.label,checked:!!e.checked,disabled:!!e.disabled,id:e.id||`alert-input-${this.overlayIndex}-${t}`,handler:e.handler,min:e.min,max:e.max,cssClass:null!==(i=e.cssClass)&&void 0!==i?i:"",attributes:e.attributes||{},tabindex:"radio"===e.type&&e!==n?-1:0}}))}connectedCallback(){(e=>{"undefined"!=typeof document&&Jg(document);const t=Vg++;e.overlayIndex=t})(this.el),this.triggerChanged()}componentWillLoad(){(e=>{e.hasAttribute("id")||(e.id="ion-overlay-"+ ++Wg),e.id})(this.el),this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){!this.gesture&&"ios"===Sg(this)&&this.wrapperEl&&(this.gesture=Sv(this.wrapperEl,(e=>e.classList.contains("alert-button"))),this.gesture.enable(!0)),!0===this.isOpen&&sf((()=>this.present()))}async present(){void 0!==this.currentTransition&&await this.currentTransition,await this.delegateController.attachViewToDom(),this.currentTransition=(async(e,t,n,i,r)=>{var a,o;if(e.presented)return;Zg(!0),e.presented=!0,e.willPresent.emit(),null===(a=e.willPresentShorthand)||void 0===a||a.emit();const s=Sg(e),l=e.enterAnimation?e.enterAnimation:lg.get(t,"ios"===s?n:i);await nb(e,l,e.el,r)&&(e.didPresent.emit(),null===(o=e.didPresentShorthand)||void 0===o||o.emit()),"ION-TOAST"!==e.el.tagName&&eb(e.el),!e.keyboardClose||null!==document.activeElement&&e.el.contains(document.activeElement)||e.el.focus()})(this,"alertEnter",Nv,Av),await this.currentTransition,this.currentTransition=void 0}async dismiss(e,t){this.currentTransition=(async(e,t,n,i,r,a,o)=>{var s,l;if(!e.presented)return!1;Zg(!1),e.presented=!1;try{e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:t,role:n}),null===(s=e.willDismissShorthand)||void 0===s||s.emit({data:t,role:n});const c=Sg(e),u=e.leaveAnimation?e.leaveAnimation:lg.get(i,"ios"===c?r:a);n!==cb&&await nb(e,u,e.el,o),e.didDismiss.emit({data:t,role:n}),null===(l=e.didDismissShorthand)||void 0===l||l.emit({data:t,role:n}),Hg.delete(e),e.el.classList.add("overlay-hidden"),e.el.style.removeProperty("pointer-events"),void 0!==e.el.lastFocus&&(e.el.lastFocus=void 0)}catch(c){console.error(c)}return e.el.remove(),!0})(this,e,t,"alertLeave",kv,_v);const n=await this.currentTransition;return n&&this.delegateController.removeViewFromDom(),n}onDidDismiss(){return ib(this.el,"ionAlertDidDismiss")}onWillDismiss(){return ib(this.el,"ionAlertWillDismiss")}rbClick(e){for(const t of this.processedInputs)t.checked=t===e,t.tabindex=t===e?0:-1;this.activeId=e.id,sb(e.handler,e),wm(this)}cbClick(e){e.checked=!e.checked,sb(e.handler,e),wm(this)}async buttonClick(e){const t=e.role,n=this.getValues();if(ab(t))return this.dismiss({values:n},t);const i=await this.callButtonHandler(e,n);return!1!==i&&this.dismiss(Object.assign({values:n},i),e.role)}async callButtonHandler(e,t){if(null==e?void 0:e.handler){const n=await sb(e.handler,t);if(!1===n)return!1;if("object"==typeof n)return n}return{}}getValues(){if(0===this.processedInputs.length)return;if("radio"===this.inputType){const e=this.processedInputs.find((e=>!!e.checked));return e?e.value:void 0}if("checkbox"===this.inputType)return this.processedInputs.filter((e=>e.checked)).map((e=>e.value));const e={};return this.processedInputs.forEach((t=>{e[t.name]=t.value||""})),e}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const e=this.processedInputs,t=Sg(this);return 0===e.length?null:jp("div",{class:"alert-checkbox-group"},e.map((e=>jp("button",{type:"button",onClick:()=>this.cbClick(e),"aria-checked":`${e.checked}`,id:e.id,disabled:e.disabled,tabIndex:e.tabindex,role:"checkbox",class:Object.assign(Object.assign({},Ib(e.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":e.disabled||!1})},jp("div",{class:"alert-button-inner"},jp("div",{class:"alert-checkbox-icon"},jp("div",{class:"alert-checkbox-inner"})),jp("div",{class:"alert-checkbox-label"},e.label)),"md"===t&&jp("ion-ripple-effect",null)))))}renderRadio(){const e=this.processedInputs;return 0===e.length?null:jp("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},e.map((e=>jp("button",{type:"button",onClick:()=>this.rbClick(e),"aria-checked":`${e.checked}`,disabled:e.disabled,id:e.id,tabIndex:e.tabindex,class:Object.assign(Object.assign({},Ib(e.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":e.disabled||!1}),role:"radio"},jp("div",{class:"alert-button-inner"},jp("div",{class:"alert-radio-icon"},jp("div",{class:"alert-radio-inner"})),jp("div",{class:"alert-radio-label"},e.label))))))}renderInput(){const e=this.processedInputs;return 0===e.length?null:jp("div",{class:"alert-input-group"},e.map((e=>{var t,n,i,r;return"textarea"===e.type?jp("div",{class:"alert-input-wrapper"},jp("textarea",Object.assign({placeholder:e.placeholder,value:e.value,id:e.id,tabIndex:e.tabindex},e.attributes,{disabled:null!==(n=null===(t=e.attributes)||void 0===t?void 0:t.disabled)&&void 0!==n?n:e.disabled,class:Rv(e),onInput:t=>{var n;e.value=t.target.value,(null===(n=e.attributes)||void 0===n?void 0:n.onInput)&&e.attributes.onInput(t)}}))):jp("div",{class:"alert-input-wrapper"},jp("input",Object.assign({placeholder:e.placeholder,type:e.type,min:e.min,max:e.max,value:e.value,id:e.id,tabIndex:e.tabindex},e.attributes,{disabled:null!==(r=null===(i=e.attributes)||void 0===i?void 0:i.disabled)&&void 0!==r?r:e.disabled,class:Rv(e),onInput:t=>{var n;e.value=t.target.value,(null===(n=e.attributes)||void 0===n?void 0:n.onInput)&&e.attributes.onInput(t)}})))})))}renderAlertButtons(){const e=this.processedButtons,t=Sg(this),n={"alert-button-group":!0,"alert-button-group-vertical":e.length>2};return jp("div",{class:n},e.map((e=>jp("button",Object.assign({},e.htmlAttributes,{type:"button",id:e.id,class:Pv(e),tabIndex:0,onClick:()=>this.buttonClick(e)}),jp("span",{class:"alert-button-inner"},e.text),"md"===t&&jp("ion-ripple-effect",null)))))}renderAlertMessage(e){const{customHTMLEnabled:t,message:n}=this;return t?jp("div",{id:e,class:"alert-message",innerHTML:kg(n)}):jp("div",{id:e,class:"alert-message"},n)}render(){const{overlayIndex:e,header:t,subHeader:n,message:i,htmlAttributes:r}=this,a=Sg(this),o=`alert-${e}-hdr`,s=`alert-${e}-sub-hdr`,l=`alert-${e}-msg`,c=this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert",u=t?o:n?s:null;return jp(Bp,Object.assign({role:c,"aria-modal":"true","aria-labelledby":u,"aria-describedby":void 0!==i?l:null,tabindex:"-1"},r,{style:{zIndex:`${2e4+e}`},class:Object.assign(Object.assign({},Ib(this.cssClass)),{[a]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),jp("ion-backdrop",{tappable:this.backdropDismiss}),jp("div",{tabindex:"0"}),jp("div",{class:"alert-wrapper ion-overlay-wrapper",ref:e=>this.wrapperEl=e},jp("div",{class:"alert-head"},t&&jp("h2",{id:o,class:"alert-title"},t),n&&jp("h2",{id:s,class:"alert-sub-title"},n)),this.renderAlertMessage(l),this.renderAlertInputs(),this.renderAlertButtons()),jp("div",{tabindex:"0"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}}static get style(){return{ios:".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, #f9f9f9));--max-width:270px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:14px}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;-webkit-box-shadow:none;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:7px;text-align:center}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:17px;font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, #666666);font-size:14px}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:13px;text-align:center}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:4px;margin-top:10px;-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:6px;padding-bottom:6px;border:0.55px solid var(--ion-color-step-250, #bfbfbf);background-color:var(--ion-background-color, #fff);-webkit-appearance:none;-moz-appearance:none;appearance:none}.alert-input.sc-ion-alert-ios::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{min-height:44px}.alert-radio-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;color:var(--ion-text-color, #000)}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #3880ff)}.alert-radio-icon.sc-ion-alert-ios{position:relative;-ms-flex-order:1;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{top:-7px;position:absolute;width:6px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #3880ff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{inset-inline-start:7px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:7px}[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios:dir(rtl){left:unset;right:unset;right:7px}}}.alert-checkbox-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-text-color, #000)}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px;margin-top:10px;margin-bottom:10px;position:relative;width:24px;height:24px;border-width:1px;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{top:4px;position:absolute;width:5px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:1px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{inset-inline-start:9px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:9px}[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios:dir(rtl){left:unset;right:unset;right:9px}}}.alert-button-group.sc-ion-alert-ios{-webkit-margin-end:-0.55px;margin-inline-end:-0.55px;-ms-flex-wrap:wrap;flex-wrap:wrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;-ms-flex:1 1 auto;flex:1 1 auto;min-width:50%;height:44px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #3880ff);font-size:17px;overflow:hidden}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child{border-right:0}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:first-child:dir(rtl){border-right:0}}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #eb445a)}",md:".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:14px}.alert-wrapper.sc-ion-alert-md{border-radius:4px;-webkit-box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px;padding-top:20px;padding-bottom:15px;text-align:start}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:20px;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:16px}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, #737373)}.alert-message.sc-ion-alert-md{max-height:266px;font-size:16px}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #3880ff)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;max-height:266px;border-top:1px solid var(--ion-color-step-150, #d9d9d9);border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);overflow:auto}.alert-tappable.sc-ion-alert-md{position:relative;min-height:48px}.alert-radio-label.sc-ion-alert-md{-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px}.alert-radio-icon.sc-ion-alert-md{top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373)}@supports (inset-inline-start: 0){.alert-radio-icon.sc-ion-alert-md{inset-inline-start:26px}}@supports not (inset-inline-start: 0){.alert-radio-icon.sc-ion-alert-md{left:26px}[dir=rtl].sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[dir=rtl].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}@supports selector(:dir(rtl)){.alert-radio-icon.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:26px}}}.alert-radio-inner.sc-ion-alert-md{top:3px;border-radius:50%;position:absolute;width:10px;height:10px;-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #3880ff)}@supports (inset-inline-start: 0){.alert-radio-inner.sc-ion-alert-md{inset-inline-start:3px}}@supports not (inset-inline-start: 0){.alert-radio-inner.sc-ion-alert-md{left:3px}[dir=rtl].sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[dir=rtl].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}@supports selector(:dir(rtl)){.alert-radio-inner.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:3px}}}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, #262626)}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px}.alert-checkbox-icon.sc-ion-alert-md{top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373);contain:strict}@supports (inset-inline-start: 0){.alert-checkbox-icon.sc-ion-alert-md{inset-inline-start:26px}}@supports not (inset-inline-start: 0){.alert-checkbox-icon.sc-ion-alert-md{left:26px}[dir=rtl].sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[dir=rtl].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}@supports selector(:dir(rtl)){.alert-checkbox-icon.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:26px}}}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{top:0;position:absolute;width:6px;height:10px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{inset-inline-start:3px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:3px}[dir=rtl].sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[dir=rtl].sc-ion-alert-md [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:3px}}}.alert-button-group.sc-ion-alert-md{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;-ms-flex-pack:end;justify-content:flex-end}.alert-button.sc-ion-alert-md{border-radius:2px;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:0;margin-bottom:0;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #3880ff);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}.alert-button-inner.sc-ion-alert-md{-ms-flex-pack:end;justify-content:flex-end}"}}},[34,"ion-alert",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],header:[1],subHeader:[1,"sub-header"],message:[1],buttons:[16],inputs:[1040],backdropDismiss:[4,"backdrop-dismiss"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},[[4,"keydown","onKeydown"]]]),Rv=e=>{var t,n,i;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":(null!==(n=null===(t=e.attributes)||void 0===t?void 0:t.disabled)&&void 0!==n?n:e.disabled)||!1},Ib(e.cssClass)),Ib(e.attributes?null===(i=e.attributes.class)||void 0===i?void 0:i.toString():""))},Pv=e=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,[`alert-button-role-${e.role}`]:void 0!==e.role},Ib(e.cssClass));
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const Mv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=Sg(this);return jp(Bp,{class:$b(this.color,{[e]:!0})},jp("slot",null))}static get style(){return":host(.ion-color){color:var(--ion-color-base)}"}},[1,"ion-text",{color:[513]}]);const $v=function(){if("undefined"==typeof customElements)return;["ion-text"].forEach((e=>{if("ion-text"===e)customElements.get(e)||customElements.define(e,Mv)}))},Iv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=Vp(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({[`title-${e}`]:!0})}getSize(){return void 0!==this.size?this.size:"default"}render(){const e=Sg(this),t=this.getSize();return jp(Bp,{class:$b(this.color,{[e]:!0,[`title-${t}`]:!0,"title-rtl":"rtl"===document.dir})},jp("div",{class:"toolbar-title"},jp("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host:dir(rtl){left:unset;right:unset;right:0}}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large) .toolbar-title:dir(rtl){-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",md:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}"}}},[33,"ion-title",{color:[513],size:[1]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Dv=function(){if("undefined"==typeof customElements)return;["ion-title"].forEach((e=>{if("ion-title"===e)customElements.get(e)||customElements.define(e,Iv)}))},Lv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),t=e.find((e=>"start"===e.slot));t&&t.classList.add("buttons-first-slot");const n=e.reverse(),i=n.find((e=>"end"===e.slot))||n.find((e=>"primary"===e.slot))||n.find((e=>"secondary"===e.slot));i&&i.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const t=e.target.tagName,n=e.detail,i={},r=this.childrenStyles.get(t)||{};let a=!1;Object.keys(n).forEach((e=>{const t=`toolbar-${e}`,o=n[e];o!==r[t]&&(a=!0),o&&(i[t]=!0)})),a&&(this.childrenStyles.set(t,i),wm(this))}render(){const e=Sg(this),t={};return this.childrenStyles.forEach((e=>{Object.assign(t,e)})),jp(Bp,{class:Object.assign(Object.assign({},t),$b(this.color,{[e]:!0,"in-toolbar":Mb("ion-toolbar",this.el)}))},jp("div",{class:"toolbar-background"}),jp("div",{class:"toolbar-container"},jp("slot",{name:"start"}),jp("slot",{name:"secondary"}),jp("div",{class:"toolbar-content"},jp("slot",null)),jp("slot",{name:"primary"}),jp("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large){padding-bottom:7px}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",md:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}"}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const jv=function(){if("undefined"==typeof customElements)return;["ion-toolbar"].forEach((e=>{if("ion-toolbar"===e)customElements.get(e)||customElements.define(e,Lv)}))},qv=cy,Bv=uy,Fv=function(){if("undefined"==typeof customElements)return;["ion-alert","ion-backdrop","ion-ripple-effect"].forEach((e=>{switch(e){case"ion-alert":customElements.get(e)||customElements.define(e,Ov);break;case"ion-backdrop":customElements.get(e)||Pb();break;case"ion-ripple-effect":customElements.get(e)||Yb()}}))};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
var zv;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(zv||(zv={}));const Uv=Nm(class extends Bm{constructor(){super(),this.__registerHost()}componentDidLoad(){Wv((async()=>{const e=hg(window,"hybrid");if(lg.getBoolean("_testing")||vp((()=>n.import("./index9-legacy-3d4ee706.js"))).then((e=>e.startTapClick(lg))),lg.getBoolean("statusTap",e)&&vp((()=>n.import("./status-tap-legacy-8c8ac378.js"))).then((e=>e.startStatusTap())),lg.getBoolean("inputShims",Vv())){const e=hg(window,"ios")?"ios":"android";vp((()=>n.import("./input-shims-legacy-3dee965b.js"))).then((t=>t.startInputShims(lg,e)))}const t=await vp((()=>Promise.resolve().then((()=>$g))));lg.getBoolean("hardwareBackButton",e)?t.startHardwareBackButton():t.blockHardwareBackButton(),"undefined"!=typeof window&&vp((()=>n.import("./keyboard2-legacy-bdf1e075.js"))).then((e=>e.startKeyboardAssist(window))),vp((()=>n.import("./focus-visible-legacy-b3e947fe.js"))).then((e=>this.focusVisible=e.startFocusVisible()))}))}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=Sg(this);return jp(Bp,{class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":lg.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return"html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}"}},[0,"ion-app",{setFocus:[64]}]),Vv=()=>{if(hg(window,"ios")&&hg(window,"mobile"))return!0;return!(!hg(window,"android")||!hg(window,"mobileweb"))},Wv=e=>{"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,32)};const Hv=function(){if("undefined"==typeof customElements)return;["ion-app"].forEach((e=>{if("ion-app"===e)customElements.get(e)||customElements.define(e,Uv)}))},Qv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.onClick=async e=>{const t=this.el.closest("ion-nav");return e.preventDefault(),t&&await t.canGoBack()?t.pop({animationBuilder:this.routerAnimation,skipIfBusy:!0}):Lb(this.defaultHref,e,"back",this.routerAnimation)},this.color=void 0,this.defaultHref=void 0,this.disabled=!1,this.icon=void 0,this.text=void 0,this.type="button",this.routerAnimation=void 0}componentWillLoad(){this.inheritedAttributes=rf(this.el),void 0===this.defaultHref&&(this.defaultHref=lg.get("backButtonDefaultHref"))}get backButtonIcon(){const e=this.icon;return null!=e?e:"ios"===Sg(this)?lg.get("backButtonIcon","data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>"):lg.get("backButtonIcon","data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>")}get backButtonText(){const e="ios"===Sg(this)?"Back":null;return null!=this.text?this.text:lg.get("backButtonText",e)}get hasIconOnly(){return this.backButtonIcon&&!this.backButtonText}get rippleType(){return this.hasIconOnly?"unbounded":"bounded"}render(){const{color:e,defaultHref:t,disabled:n,type:i,hasIconOnly:r,backButtonIcon:a,backButtonText:o,icon:s,inheritedAttributes:l}=this,c=void 0!==t,u=Sg(this),d=l["aria-label"]||o||"back";return jp(Bp,{onClick:this.onClick,class:$b(e,{[u]:!0,button:!0,"back-button-disabled":n,"back-button-has-icon-only":r,"in-toolbar":Mb("ion-toolbar",this.el),"in-toolbar-color":Mb("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0,"show-back-button":c})},jp("button",{type:i,disabled:n,class:"button-native",part:"native","aria-label":d},jp("span",{class:"button-inner"},a&&jp("ion-icon",{part:"icon",icon:a,"aria-hidden":"true",lazy:!1,"flip-rtl":void 0===s}),o&&jp("span",{part:"text","aria-hidden":"true",class:"button-text"},o)),"md"===u&&jp("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get style(){return{ios:':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-hover:transparent;--background-hover-opacity:1;--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #3880ff);--icon-margin-end:1px;--icon-margin-start:-4px;--icon-font-size:1.6em;--min-height:32px;font-size:17px}.button-native{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:visible;z-index:99}:host(.ion-activated) .button-native{opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',md:':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--border-radius:4px;--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:0.04;--color:currentColor;--icon-margin-end:0;--icon-margin-start:0;--icon-font-size:24px;--icon-font-weight:normal;--min-height:32px;--min-width:44px;--padding-start:12px;--padding-end:12px;font-size:14px;font-weight:500;text-transform:uppercase}:host(.back-button-has-icon-only){--border-radius:50%;min-width:48px;height:48px}.button-native{-webkit-box-shadow:none;box-shadow:none}.button-text{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:0;padding-bottom:0}ion-icon{line-height:0.67;text-align:start}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}'}}},[33,"ion-back-button",{color:[513],defaultHref:[1025,"default-href"],disabled:[516],icon:[1],text:[1],type:[1],routerAnimation:[16]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Kv=function(){if("undefined"==typeof customElements)return;["ion-back-button","ion-icon","ion-ripple-effect"].forEach((e=>{switch(e){case"ion-back-button":customElements.get(e)||customElements.define(e,Qv);break;case"ion-icon":customElements.get(e)||Ob();break;case"ion-ripple-effect":customElements.get(e)||Yb()}}))},Gv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Vp(this,"ionNavWillLoad",7),this.ionNavWillChange=Vp(this,"ionNavWillChange",3),this.ionNavDidChange=Vp(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=Sg(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(void 0!==this.swipeHandler)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await vp((()=>n.import("./swipe-back-legacy-ce12d52d.js")))).createSwipeBackGesture(this.el,(()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart()),(()=>e()),(e=>{var t;return null===(t=this.ani)||void 0===t?void 0:t.progressStep(e)}),((e,t,n)=>{if(this.ani){this.ani.onFinish((()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(e)}),{oneTimeCallback:!0});let i=e?-.001:.001;e?i+=Vf([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),i+=Vf([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.ani.progressEnd(e?1:0,i,n)}else this.gestureOrAnimationInProgress=!1})),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,t,n){const i=await this.lock();let r=!1;try{r=await this.transition(e,t,n)}catch(RD){console.error(RD)}return i(),r}async setRouteId(e,t,n,i){return{changed:await this.setRoot(e,t,{duration:"root"===n?0:void 0,direction:"back"===n?"back":"forward",animationBuilder:i}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,t,n){if(this.activeComponent===e&&gf(t,this.activeParams))return!1;const i=this.activeEl,r=await Fg(this.delegate,this.el,e,["ion-page","ion-page-invisible"],t);return this.activeComponent=e,this.activeEl=r,this.activeParams=t,await this.commit(r,i,n),await((e,t)=>{if(t){if(e){const n=t.parentElement;return e.removeViewFromDom(n,t)}t.remove()}return Promise.resolve()})(this.delegate,i),!0}async transition(e,t,n={}){if(t===e)return!1;this.ionNavWillChange.emit();const{el:i,mode:r}=this,a=this.animated&&lg.getBoolean("animated",!0),o=n.animationBuilder||this.animation||lg.get("navAnimation");var s;return await Af(Object.assign(Object.assign({mode:r,animated:a,enteringEl:e,leavingEl:t,baseEl:i,deepWait:(s=i,void 0!==s.componentOnReady),progressCallback:n.progressAnimation?e=>{void 0===e||this.gestureOrAnimationInProgress?this.ani=e:(this.gestureOrAnimationInProgress=!0,e.onFinish((()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)}),{oneTimeCallback:!0}),e.progressEnd(0,0,0))}:void 0},n),{animationBuilder:o})),this.ionNavDidChange.emit(),!0}async lock(){const e=this.waitPromise;let t;return this.waitPromise=new Promise((e=>t=e)),void 0!==e&&await e,t}render(){return jp("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);const Yv=function(){if("undefined"==typeof customElements)return;["ion-router-outlet"].forEach((e=>{if("ion-router-outlet"===e)customElements.get(e)||customElements.define(e,Gv)}))},Jv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Vp(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){void 0!==this.selectedTab&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await(async e=>{let t,n,i,r;const a=async()=>{const e=await _y.getResizeMode(),a=void 0===e?void 0:e.mode;t=()=>{void 0===r&&(r=Ry(a)),i=!0,o(i,a)},n=()=>{i=!1,o(i,a)},null==Xm||Xm.addEventListener("keyboardWillShow",t),null==Xm||Xm.addEventListener("keyboardWillHide",n)},o=(t,n)=>{e&&e(t,s(n))},s=e=>{if(0===r||r===Ry(e))return;const t=Oy(e);return null!==t?new Promise((e=>{const n=new ResizeObserver((()=>{t.clientHeight===r&&(n.disconnect(),e())}));n.observe(t)})):void 0};return await a(),{init:a,destroy:()=>{null==Xm||Xm.removeEventListener("keyboardWillShow",t),null==Xm||Xm.removeEventListener("keyboardWillHide",n),t=n=void 0},isKeyboardVisible:()=>i}})((async(e,t)=>{!1===e&&void 0!==t&&await t,this.keyboardVisible=e}))}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:e,translucent:t,keyboardVisible:n}=this,i=Sg(this),r=n&&"top"!==this.el.getAttribute("slot");return jp(Bp,{role:"tablist","aria-hidden":r?"true":null,class:$b(e,{[i]:!0,"tab-bar-translucent":t,"tab-bar-hidden":r})},jp("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",md:":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}"}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Xv=function(){if("undefined"==typeof customElements)return;["ion-tab-bar"].forEach((e=>{if("ion-tab-bar"===e)customElements.get(e)||customElements.define(e,Jv)}))},Zv=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Vp(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{"Enter"!==e.key&&" "!==e.key||this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const t=e.target,n=this.el.parentElement;(e.composedPath().includes(n)||(null==t?void 0:t.contains(this.el)))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},tf(this.el,["aria-label"])),void 0===this.layout&&(this.layout=lg.get("tabButtonLayout","icon-top"))}selectTab(e){void 0!==this.tab&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:t,hasLabel:n,href:i,rel:r,target:a,layout:o,selected:s,tab:l,inheritedAttributes:c}=this,u=Sg(this),d={download:this.download,href:i,rel:r,target:a};return jp(Bp,{onClick:this.onClick,onKeyup:this.onKeyUp,id:void 0!==l?`tab-button-${l}`:null,class:{[u]:!0,"tab-selected":s,"tab-disabled":e,"tab-has-label":n,"tab-has-icon":t,"tab-has-label-only":n&&!t,"tab-has-icon-only":t&&!n,[`tab-layout-${o}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},jp("a",Object.assign({},d,{class:"button-native",part:"native",role:"tab","aria-selected":s?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},c),jp("span",{class:"button-inner"},jp("slot",null)),"md"===u&&jp("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',md:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}'}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const ew=function(){if("undefined"==typeof customElements)return;["ion-tab-button","ion-ripple-effect"].forEach((e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,Zv);break;case"ion-ripple-effect":customElements.get(e)||Yb()}}))},tw=!0,nw=!0,iw=!0,rw=!1,aw=!1;let ow,sw,lw,cw=!1,uw=!1,dw=!1,hw=!1,pw=null,mw=!1;const fw="http://www.w3.org/1999/xlink",gw={},bw=e=>"object"===(e=typeof e)||"function"===e;const yw=(e,t,...n)=>{let i=null,r=null,a=null,o=!1,s=!1;const l=[],c=t=>{for(let n=0;n<t.length;n++)i=t[n],Array.isArray(i)?c(i):null!=i&&"boolean"!=typeof i&&((o="function"!=typeof e&&!bw(i))&&(i=String(i)),o&&s?l[l.length-1].$text$+=i:l.push(o?vw(null,i):i),s=o)};if(c(n),t){t.key&&(r=t.key),t.name&&(a=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,Ew);const u=vw(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=r,u.$name$=a,u},vw=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return n},ww={},Ew={forEach:(e,t)=>e.map(xw).forEach(t),map:(e,t)=>e.map(xw).map(t).map(Tw)},xw=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Tw=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),yw(e.vtag,t,...e.vchildren||[])}const t=vw(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Cw=new WeakMap,Sw=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,i=t.$flags$,r=(t.$tagName$,()=>{}),a=((e,t,n,i)=>{var r;let a=Nw(t,n);const o=hE.get(a);if(e=11===e.nodeType?e:fE,o)if("string"==typeof o){e=e.head||e;let t,n=Cw.get(e);if(n||Cw.set(e,n=new Set),!n.has(a)){{t=fE.createElement("style"),t.innerHTML=o;const n=null!==(r=bE.$nonce$)&&void 0!==r?r:function(e){var t,n,i;return null!==(i=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==i?i:void 0}(fE);null!=n&&t.setAttribute("nonce",n),e.insertBefore(t,e.querySelector("link"))}n&&n.add(a)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return a})(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);10&i&&(n["s-sc"]=a,n.classList.add(a+"-h"),2&i&&n.classList.add(a+"-s")),r()},Nw=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),kw=(e,t,n,i,r,a)=>{if(n!==i){let o=uE(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,r=_w(n),a=_w(i);t.remove(...r.filter((e=>e&&!a.includes(e)))),t.add(...a.filter((e=>e&&!r.includes(e))))}else if("style"===t){for(const t in n)i&&null!=i[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in i)n&&i[t]===n[t]||(t.includes("-")?e.style.setProperty(t,i[t]):e.style[t]=i[t])}else if("key"===t);else if("ref"===t)i&&i(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=bw(i);if((o||l&&null!==i)&&!r)try{if(e.tagName.includes("-"))e[t]=i;else{const r=null==i?"":i;"list"===t?o=!1:null!=n&&e[t]==r||(e[t]=r)}}catch(RD){}let c=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,c=!0),null==i||!1===i?!1===i&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(fw,t):e.removeAttribute(t)):(!o||4&a||r)&&!l&&(i=!0===i?"":i,c?e.setAttributeNS(fw,t,i):e.setAttribute(t,i))}else t="-"===t[2]?t.slice(3):uE(mE,s)?s.slice(2):s[2]+t.slice(3),n&&bE.rel(e,t,n,!1),i&&bE.ael(e,t,i,!1)}},Aw=/\s/,_w=e=>e?e.split(Aw):[],Ow=(e,t,n,i)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||gw,o=t.$attrs$||gw;for(i in a)i in o||kw(r,i,a[i],void 0,n,t.$flags$);for(i in o)kw(r,i,a[i],o[i],n,t.$flags$)},Rw=(e,t,n,i)=>{const r=t.$children$[n];let a,o,s,l=0;if(cw||(dw=!0,"slot"===r.$tag$&&(ow&&i.classList.add(ow+"-s"),r.$flags$|=r.$children$?2:1)),null!==r.$text$)a=r.$elm$=fE.createTextNode(r.$text$);else if(1&r.$flags$)a=r.$elm$=fE.createTextNode("");else{if(hw||(hw="svg"===r.$tag$),a=r.$elm$=fE.createElementNS(hw?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&r.$flags$?"slot-fb":r.$tag$),hw&&"foreignObject"===r.$tag$&&(hw=!1),Ow(null,r,hw),(e=>null!=e)(ow)&&a["s-si"]!==ow&&a.classList.add(a["s-si"]=ow),r.$children$)for(l=0;l<r.$children$.length;++l)o=Rw(e,r,l,a),o&&a.appendChild(o);"svg"===r.$tag$?hw=!1:"foreignObject"===a.tagName&&(hw=!0)}return a["s-hn"]=lw,3&r.$flags$&&(a["s-sr"]=!0,a["s-cr"]=sw,a["s-sn"]=r.$name$||"",s=e&&e.$children$&&e.$children$[n],s&&s.$tag$===r.$tag$&&e.$elm$&&Pw(e.$elm$,!1)),a},Pw=(e,t)=>{bE.$flags$|=1;const n=e.childNodes;for(let i=n.length-1;i>=0;i--){const e=n[i];e["s-hn"]!==lw&&e["s-ol"]&&(Lw(e).insertBefore(e,Dw(e)),e["s-ol"].remove(),e["s-ol"]=void 0,dw=!0),t&&Pw(e,t)}bE.$flags$&=-2},Mw=(e,t,n,i,r,a)=>{let o,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===lw&&(s=s.shadowRoot);r<=a;++r)i[r]&&(o=Rw(null,n,r,e),o&&(i[r].$elm$=o,s.insertBefore(o,Dw(t))))},$w=(e,t,n,i,r)=>{for(;t<=n;++t)(i=e[t])&&(r=i.$elm$,Uw(i),uw=!0,r["s-ol"]?r["s-ol"].remove():Pw(r,!0),r.remove())},Iw=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),Dw=e=>e&&e["s-ol"]||e,Lw=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,jw=(e,t)=>{const n=t.$elm$=e.$elm$,i=e.$children$,r=t.$children$,a=t.$tag$,o=t.$text$;let s;null===o?(hw="svg"===a||"foreignObject"!==a&&hw,"slot"===a||Ow(e,t,hw),null!==i&&null!==r?((e,t,n,i)=>{let r,a,o=0,s=0,l=0,c=0,u=t.length-1,d=t[0],h=t[u],p=i.length-1,m=i[0],f=i[p];for(;o<=u&&s<=p;)if(null==d)d=t[++o];else if(null==h)h=t[--u];else if(null==m)m=i[++s];else if(null==f)f=i[--p];else if(Iw(d,m))jw(d,m),d=t[++o],m=i[++s];else if(Iw(h,f))jw(h,f),h=t[--u],f=i[--p];else if(Iw(d,f))"slot"!==d.$tag$&&"slot"!==f.$tag$||Pw(d.$elm$.parentNode,!1),jw(d,f),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++o],f=i[--p];else if(Iw(h,m))"slot"!==d.$tag$&&"slot"!==f.$tag$||Pw(h.$elm$.parentNode,!1),jw(h,m),e.insertBefore(h.$elm$,d.$elm$),h=t[--u],m=i[++s];else{for(l=-1,c=o;c<=u;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===m.$key$){l=c;break}l>=0?(a=t[l],a.$tag$!==m.$tag$?r=Rw(t&&t[s],n,l,e):(jw(a,m),t[l]=void 0,r=a.$elm$),m=i[++s]):(r=Rw(t&&t[s],n,s,e),m=i[++s]),r&&Lw(d.$elm$).insertBefore(r,Dw(d.$elm$))}o>u?Mw(e,null==i[p+1]?null:i[p+1].$elm$,n,i,s,p):s>p&&$w(t,o,u)})(n,i,t,r):null!==r?(null!==e.$text$&&(n.textContent=""),Mw(n,null,t,r,0,r.length-1)):null!==i&&$w(i,0,i.length-1),hw&&"svg"===a&&(hw=!1)):(s=n["s-cr"])?s.parentNode.textContent=o:e.$text$!==o&&(n.data=o)},qw=e=>{const t=e.childNodes;let n,i,r,a,o,s;for(i=0,r=t.length;i<r;i++)if(n=t[i],1===n.nodeType){if(n["s-sr"])for(o=n["s-sn"],n.hidden=!1,a=0;a<r;a++)if(s=t[a].nodeType,t[a]["s-hn"]!==n["s-hn"]||""!==o){if(1===s&&o===t[a].getAttribute("slot")){n.hidden=!0;break}}else if(1===s||3===s&&""!==t[a].textContent.trim()){n.hidden=!0;break}qw(n)}},Bw=[],Fw=e=>{let t,n,i,r,a,o,s=0;const l=e.childNodes,c=l.length;for(;s<c;s++){if(t=l[s],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(i=n.parentNode.childNodes,r=t["s-sn"],o=i.length-1;o>=0;o--)n=i[o],n["s-cn"]||n["s-nr"]||n["s-hn"]===t["s-hn"]||(zw(n,r)?(a=Bw.find((e=>e.$nodeToRelocate$===n)),uw=!0,n["s-sn"]=n["s-sn"]||r,a?a.$slotRefNode$=t:Bw.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&Bw.map((e=>{zw(e.$nodeToRelocate$,n["s-sn"])&&(a=Bw.find((e=>e.$nodeToRelocate$===n)),a&&!e.$slotRefNode$&&(e.$slotRefNode$=a.$slotRefNode$))}))):Bw.some((e=>e.$nodeToRelocate$===n))||Bw.push({$nodeToRelocate$:n}));1===t.nodeType&&Fw(t)}},zw=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Uw=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Uw)},Vw=(e,t)=>{const n=e.$hostElement$,i=e.$cmpMeta$,r=e.$vnode$||vw(null,null),a=(o=t)&&o.$tag$===ww?t:yw(null,null,t);var o;if(lw=n.tagName,i.$attrsToReflect$&&(a.$attrs$=a.$attrs$||{},i.$attrsToReflect$.map((([e,t])=>a.$attrs$[t]=n[e]))),a.$tag$=null,a.$flags$|=4,e.$vnode$=a,a.$elm$=r.$elm$=n.shadowRoot||n,ow=n["s-sc"],sw=n["s-cr"],cw=0!=(1&i.$flags$),uw=!1,jw(r,a),bE.$flags$|=1,dw){let e,t,n,i,r,o;Fw(a.$elm$);let s=0;for(;s<Bw.length;s++)e=Bw[s],t=e.$nodeToRelocate$,t["s-ol"]||(n=fE.createTextNode(""),n["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=n,t));for(s=0;s<Bw.length;s++)if(e=Bw[s],t=e.$nodeToRelocate$,e.$slotRefNode$){for(i=e.$slotRefNode$.parentNode,r=e.$slotRefNode$.nextSibling,n=t["s-ol"];n=n.previousSibling;)if(o=n["s-nr"],o&&o["s-sn"]===t["s-sn"]&&i===o.parentNode&&(o=o.nextSibling,!o||!o["s-nr"])){r=o;break}(!r&&i!==t.parentNode||t.nextSibling!==r)&&t!==r&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),i.insertBefore(t,r))}else 1===t.nodeType&&(t.hidden=!0)}uw&&qw(a.$elm$),bE.$flags$&=-2,Bw.length=0},Ww=(e,t)=>{e.$flags$|=16,e.$ancestorComponent$;return NE((()=>Hw(e,t)))},Hw=(e,t)=>{const n=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{}),r=n;let a;return a=Yw(r,t?"componentWillLoad":"componentWillUpdate"),a=Jw(a,(()=>Yw(r,"componentWillRender"))),i(),Jw(a,(()=>Qw(e,r,t)))},Qw=async(e,t,n)=>{const i=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{});i["s-rc"],n&&Sw(e);const a=(e.$cmpMeta$.$tagName$,()=>{});Kw(e,t,i),a(),r(),Gw(e)},Kw=(e,t,n)=>{try{pw=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(tw||nw)&&(iw||nw)&&(rw||Vw(e,t))}catch(RD){dE(RD,e.$hostElement$)}return pw=null,null},Gw=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},n=e.$hostElement$;e.$ancestorComponent$,Yw(n,"componentDidRender"),64&e.$flags$?(Yw(n,"componentDidUpdate"),t()):(e.$flags$|=64,Yw(n,"componentDidLoad"),t())},Yw=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(RD){dE(RD)}},Jw=(e,t)=>e&&e.then?e.then(t):t(),Xw=(e,t,n,i)=>{const r=lE(e),a=e,o=r.$instanceValues$.get(t),s=r.$flags$,l=a;var c,u;c=n,u=i.$members$[t][0],n=null==c||bw(c)?c:4&u?"false"!==c&&(""===c||!!c):2&u?parseFloat(c):1&u?String(c):c;const d=Number.isNaN(o)&&Number.isNaN(n);if(n!==o&&!d){if(r.$instanceValues$.set(t,n),i.$watchers$&&128&s){const e=i.$watchers$[t];e&&e.map((e=>{try{l[e](n,o,t)}catch(RD){dE(RD,a)}}))}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(n,o,t))return;Ww(r,!1)}}},Zw=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const n=Object.entries(t.$members$),i=e.prototype;n.map((([e,[n]])=>{(31&n||32&n)&&Object.defineProperty(i,e,{get(){return t=e,lE(this).$instanceValues$.get(t);var t},set(n){Xw(this,e,n,t)},configurable:!0,enumerable:!0})}));{const r=new Map;i.attributeChangedCallback=function(e,t,n){bE.jmp((()=>{const t=r.get(e);if(this.hasOwnProperty(t))n=this[t],delete this[t];else if(i.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==n)return;this[t]=(null!==n||"boolean"!=typeof this[t])&&n}))},e.observedAttributes=n.filter((([e,t])=>15&t[0])).map((([e,n])=>{const i=n[1]||e;return r.set(i,e),512&n[0]&&t.$attrsToReflect$.push([e,i]),i}))}}return e},eE=async(e,t,n,i,r)=>{if(0==(32&t.$flags$)&&(r=e.constructor,t.$flags$|=32,customElements.whenDefined(n.$tagName$).then((()=>t.$flags$|=128)),r.style)){let i=r.style;"string"!=typeof i&&(i=i[t.$modeName$=(e=>pE.map((t=>t(e))).find((e=>!!e)))(e)]);const a=Nw(n,t.$modeName$);if(!hE.has(a)){const e=(n.$tagName$,()=>{});((e,t,n)=>{let i=hE.get(e);vE&&n?(i=i||new CSSStyleSheet,"string"==typeof i?i=t:i.replaceSync(t)):i=t,hE.set(e,i)})(a,i,!!(1&n.$flags$)),e()}}t.$ancestorComponent$;Ww(t,!0)},tE=e=>{const t=e["s-cr"]=fE.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},nE=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const i=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){cE(this,n)},connectedCallback(){(e=>{if(0==(1&bE.$flags$)){const t=lE(e),n=t.$cmpMeta$,i=(n.$tagName$,()=>{});1&t.$flags$?(iE(e,t,n.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&n.$flags$&&tE(e),n.$members$&&Object.entries(n.$members$).map((([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}})),eE(e,t,n)),i()}})(this),i&&i.call(this)},disconnectedCallback(){(e=>{if(0==(1&bE.$flags$)){const t=lE(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)})}}),e.is=n.$tagName$,Zw(e,n)},iE=(e,t,n,i)=>{n&&n.map((([n,i,r])=>{const a=aE(e,n),o=rE(t,r),s=oE(n);bE.ael(a,i,o,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>bE.rel(a,i,o,s)))}))},rE=(e,t)=>n=>{try{aw||e.$hostElement$[t](n)}catch(RD){dE(RD)}},aE=(e,t)=>4&t?fE:8&t?mE:16&t?fE.body:e,oE=e=>yE?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),sE=new WeakMap,lE=e=>sE.get(e),cE=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return iE(e,n,t.$listeners$),sE.set(e,n)},uE=(e,t)=>t in e,dE=(e,t)=>(0,console.error)(e,t),hE=new Map,pE=[],mE="undefined"!=typeof window?window:{},fE=mE.document||{head:{}},gE=mE.HTMLElement||class{},bE={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,i)=>e.addEventListener(t,n,i),rel:(e,t,n,i)=>e.removeEventListener(t,n,i),ce:(e,t)=>new CustomEvent(e,t)},yE=(()=>{let e=!1;try{fE.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(RD){}return e})(),vE=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(RD){}return!1})(),wE=[],EE=[],xE=(e,t)=>n=>{e.push(n),mw||(mw=!0,t&&4&bE.$flags$?SE(CE):bE.raf(CE))},TE=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(RD){dE(RD)}e.length=0},CE=()=>{TE(wE),TE(EE),(mw=wE.length>0)&&bE.raf(CE)},SE=e=>(e=>Promise.resolve(e))().then(e),NE=xE(EE,!0);let kE;const AE=e=>{const t=(()=>{if("undefined"==typeof window)return new Map;if(!kE){const e=window;e.Ionicons=e.Ionicons||{},kE=e.Ionicons.map=e.Ionicons.map||new Map}return kE})().get(e);return t||(e=>{const t=new URL(e,bE.$resourcesUrl$);return t.origin!==mE.location.origin?t.href:t.pathname})(`svg/${e}.svg`)},_E=(e,t,n,i,r)=>{if(n="ios"===(n&&ME(n))?"ios":"md",i&&"ios"===n?e=ME(i):r&&"md"===n?e=ME(r):(e||!t||RE(t)||(e=t),PE(e)&&(e=ME(e))),!PE(e)||""===e.trim())return null;return""!==e.replace(/[a-z]|-|\d/gi,"")?null:e},OE=e=>PE(e)&&(e=e.trim(),RE(e))?e:null,RE=e=>e.length>0&&/(\/|\.)/.test(e),PE=e=>"string"==typeof e,ME=e=>e.toLowerCase(),$E=e=>{if(1===e.nodeType){if("script"===e.nodeName.toLowerCase())return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(PE(n)&&0===n.toLowerCase().indexOf("on"))return!1}for(let t=0;t<e.childNodes.length;t++)if(!$E(e.childNodes[t]))return!1}return!0},IE=new Map,DE=new Map;let LE;const jE=(e,t)=>{let n=DE.get(e);if(!n){if("undefined"==typeof fetch||"undefined"==typeof document)return IE.set(e,""),Promise.resolve();if((e=>e.startsWith("data:image/svg+xml"))(e)&&(e=>-1!==e.indexOf(";utf8,"))(e)){LE||(LE=new DOMParser);const t=LE.parseFromString(e,"text/html").querySelector("svg");return t&&IE.set(e,t.outerHTML),Promise.resolve()}n=fetch(e).then((n=>{if(n.ok)return n.text().then((n=>{n&&!1!==t&&(n=(e=>{const t=document.createElement("div");t.innerHTML=e;for(let i=t.childNodes.length-1;i>=0;i--)"svg"!==t.childNodes[i].nodeName.toLowerCase()&&t.removeChild(t.childNodes[i]);const n=t.firstElementChild;if(n&&"svg"===n.nodeName.toLowerCase()){const e=n.getAttribute("class")||"";if(n.setAttribute("class",(e+" s-ion-icon").trim()),$E(n))return t.innerHTML}return""})(n)),IE.set(e,n||"")}));IE.set(e,"")})),DE.set(e,n)}return n},qE=nE(class extends gE{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=BE(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((e,t=[])=>{const n={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",(()=>{this.isVisible=!0,this.loadIcon()}))}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const i=this.io=new window.IntersectionObserver((e=>{e[0].isIntersecting&&(i.disconnect(),this.io=void 0,n())}),{rootMargin:t});i.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=(e=>{let t=OE(e.src);if(t)return t;if(t=_E(e.name,e.icon,e.mode,e.ios,e.md),t)return AE(t);if(e.icon){if(t=OE(e.icon),t)return t;if(t=OE(e.icon[e.mode]),t)return t}return null})(this);e&&(IE.has(e)?this.svgContent=IE.get(e):jE(e,this.sanitize).then((()=>this.svgContent=IE.get(e))))}this.iconName=_E(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:n,el:i}=this,r=this.mode||"md",a=!!t&&((t.includes("arrow")||t.includes("chevron"))&&!1!==e),o=e||a;return yw(ww,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},FE(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":o,"icon-rtl":o&&(s=i,s&&""!==s.dir?"rtl"===s.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))})},n),this.svgContent?yw("div",{class:"icon-inner",innerHTML:this.svgContent}):yw("div",{class:"icon-inner"}));var s}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),BE=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",FE=e=>e?{"ion-color":!0,[`ion-color-${e}`]:!0}:null;const zE=function(){if("undefined"==typeof customElements)return;["ion-icon"].forEach((e=>{if("ion-icon"===e)customElements.get(e)||customElements.define(e,qE)}))},UE=V.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),VE=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(e){if(e.id){const t=this.ionViewWillEnterCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach((e=>e()))}onIonViewDidEnter(e){if(e.id){const t=this.ionViewDidEnterCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach((e=>e()))}onIonViewWillLeave(e){if(e.id){const t=this.ionViewWillLeaveCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach((e=>e()))}onIonViewDidLeave(e){if(e.id){const t=this.ionViewDidLeaveCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach((e=>e())),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(e){this.componentCanBeDestroyedCallback=e}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},WE=V.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:e=>{"undefined"!=typeof window&&("string"==typeof e?window.location.pathname=e:window.history.back())},navigate:e=>{"undefined"!=typeof window&&(window.location.pathname=e)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(e,t)=>{"undefined"!=typeof window&&(window.location.pathname=t)},resetTab:(e,t)=>{"undefined"!=typeof window&&(window.location.pathname=t)}}),HE=e=>e.toLowerCase().split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),QE=e=>e.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),KE=(e,t,n={})=>{if(e instanceof Element){const i=GE(e.classList,t,n);""!==i&&(e.className=i),Object.keys(t).forEach((n=>{if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){const i=n.substring(2),r=i[0].toLowerCase()+i.substring(1);YE(r)||JE(e,r,t[n])}else{e[n]=t[n];"string"===typeof t[n]&&e.setAttribute(QE(n),t[n])}}))}},GE=(e,t,n)=>{const i=t.className||t.class,r=n.className||n.class,a=XE(e),o=XE(i?i.split(" "):[]),s=XE(r?r.split(" "):[]),l=[];return a.forEach((e=>{o.has(e)?(l.push(e),o.delete(e)):s.has(e)||l.push(e)})),o.forEach((e=>l.push(e))),l.join(" ")},YE=e=>{if("undefined"==typeof document)return!0;{const t="on"+(e=>"doubleclick"===e?"dblclick":e)(e);let n=t in document;if(!n){const e=document.createElement("div");e.setAttribute(t,"return;"),n="function"==typeof e[t]}return n}},JE=(e,t,n)=>{const i=e.__events||(e.__events={}),r=i[t];r&&e.removeEventListener(t,r),e.addEventListener(t,i[t]=function(e){n&&n.call(this,e)})},XE=e=>{const t=new Map;return e.forEach((e=>t.set(e,e))),t},ZE=(...e)=>t=>{e.forEach((e=>{((e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})(e,t)}))},ex=(e,t,n,i)=>{void 0!==i&&i();const r=HE(e),a=class extends V.Component{constructor(e){super(e),this.setComponentElRef=e=>{this.componentEl=e}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){KE(this.componentEl,this.props,e)}render(){const t=this.props,{children:i,forwardedRef:r,style:a,className:o,ref:s}=t,l=db(t,["children","forwardedRef","style","className","ref"]);let c=Object.keys(l).reduce(((e,t)=>{const n=l[t];if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const i=t.substring(2).toLowerCase();"undefined"!=typeof document&&YE(i)&&(e[t]=n)}else{const i=typeof n;"string"!==i&&"boolean"!==i&&"number"!==i||(e[QE(t)]=n)}return e}),{});n&&(c=n(this.props,c));const u=Object.assign(Object.assign({},c),{ref:ZE(r,this.setComponentElRef),style:a});return U.createElement(e,u,i)}static get displayName(){return r}};return t&&(a.contextType=t),((e,t)=>{const n=(t,n)=>V.createElement(e,Object.assign({},t,{forwardedRef:n}));return n.displayName=t,V.forwardRef(n)})(a,r)},tx=ex("ion-badge",void 0,void 0,qb),nx=ex("ion-buttons",void 0,void 0,Fb),ix=ex("ion-col",void 0,void 0,iy),rx=ex("ion-content",void 0,void 0,ly),ax=ex("ion-grid",void 0,void 0,My),ox=ex("ion-header",void 0,void 0,zy),sx=ex("ion-img",void 0,void 0,Wy),lx=ex("ion-input",void 0,void 0,Gy),cx=ex("ion-label",void 0,void 0,Yy),ux=ex("ion-list",void 0,void 0,Xy),dx=ex("ion-menu",void 0,void 0,ov),hx=ex("ion-menu-button",void 0,void 0,cv),px=ex("ion-menu-toggle",void 0,void 0,dv),mx=ex("ion-range",void 0,void 0,xv),fx=ex("ion-row",void 0,void 0,Cv),gx=ex("ion-text",void 0,void 0,$v),bx=ex("ion-title",void 0,void 0,Dv),yx=ex("ion-toolbar",void 0,void 0,jv),vx=(e,t)=>{const n=(t,n)=>V.createElement(e,Object.assign({},t,{forwardedRef:n}));return n.displayName=t,V.forwardRef(n)},wx=()=>{if("undefined"!=typeof window){const e=window.Ionic;if(e&&e.config)return e.config}return null},Ex=(e,t)=>{((e,t)=>{void 0===t||"undefined"==typeof customElements||customElements.get(e)||customElements.define(e,t)})(e,t);const n=HE(e),i=class extends V.Component{constructor(e){super(e),this.handleClick=e=>{const{routerLink:t,routerDirection:n,routerOptions:i,routerAnimation:r}=this.props;void 0!==t&&(e.preventDefault(),this.context.navigate(t,n,void 0,r,i))},this.ref=V.createRef(),this.stableMergedRefs=ZE(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){const t=this.ref.current;KE(t,this.props,e)}render(){const t=this.props,{children:n,forwardedRef:i,style:r,className:a,ref:o}=t,s=db(t,["children","forwardedRef","style","className","ref"]),l=Object.keys(s).reduce(((e,t)=>{if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const n=t.substring(2).toLowerCase();YE(n)&&(e[t]=s[t])}else["string","boolean","number"].includes(typeof s[t])&&(e[QE(t)]=s[t]);return e}),{}),c=Object.assign(Object.assign({},l),{ref:this.stableMergedRefs,style:r});if(this.props.routerLink&&!this.props.href&&(c.href=this.props.routerLink),c.onClick){const e=c.onClick;c.onClick=t=>{e(t),t.defaultPrevented||this.handleClick(t)}}else c.onClick=this.handleClick;return U.createElement(e,c,n)}static get displayName(){return n}static get contextType(){return WE}};return vx(i,n)},xx=Ex("ion-button",qv),Tx=Ex("ion-item",Bv),Cx=(e,t)=>{const n=e.__events||(e.__events={}),i=n[t];i&&(e.removeEventListener(t,i),n[t]=void 0)},Sx=(e,t,n)=>{t&&t();const i=HE(e),r=class extends V.Component{constructor(e){super(e),this.handleIonMount=()=>{this.setState({isOpen:!0})},this.handleWillPresent=e=>{this.setState({isOpen:!0}),this.props.onWillPresent&&this.props.onWillPresent(e)},this.handleDidDismiss=e=>{const t=this.wrapperRef.current,n=this.ref.current;t&&n&&(n.append(t),this.setState({isOpen:!1})),this.props.onDidDismiss&&this.props.onDidDismiss(e)},this.ref=V.createRef(),this.stableMergedRefs=ZE(this.ref,this.props.forwardedRef),this.state={isOpen:!1},this.wrapperRef=V.createRef()}componentDidMount(){var e,t,n;this.componentDidUpdate(this.props),null===(e=this.ref.current)||void 0===e||e.addEventListener("ionMount",this.handleIonMount),null===(t=this.ref.current)||void 0===t||t.addEventListener("willPresent",this.handleWillPresent),null===(n=this.ref.current)||void 0===n||n.addEventListener("didDismiss",this.handleDidDismiss)}componentDidUpdate(e){const t=this.ref.current,n=db(this.props,["onDidDismiss","onWillPresent"]);KE(t,n,e)}componentWillUnmount(){const e=this.ref.current;e&&this.state.isOpen&&(e.removeEventListener("didDismiss",this.handleDidDismiss),e.remove(),((e,t)=>{e instanceof Element&&Object.keys(t).forEach((t=>{if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const n=t.substring(2),i=n[0].toLowerCase()+n.substring(1);YE(i)||Cx(e,i)}}))})(e,this.props))}render(){const t=this.props,{children:i,forwardedRef:r,style:a,className:o,ref:s}=t,l=db(t,["children","forwardedRef","style","className","ref"]),c=Object.keys(l).reduce(((e,t)=>{if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const n=t.substring(2).toLowerCase();YE(n)&&(e[t]=l[t])}else["string","boolean","number"].includes(typeof l[t])&&(e[QE(t)]=l[t]);return e}),{}),u=Object.assign(Object.assign({},c),{ref:this.stableMergedRefs,style:a});return U.createElement("template",{},U.createElement(e,u,this.state.isOpen||this.props.keepContentsMounted?U.createElement("div",{ref:this.wrapperRef,className:n?`${Nx} ion-page`:Nx},i):null))}static get displayName(){return i}};return vx(r,i)},Nx="ion-delegate-host",kx=Sx("ion-alert",Fv),Ax=V.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),_x=({onAddOverlay:e,onRemoveOverlay:t})=>{const[n,i]=U.useState({}),r=U.useRef({});r.current=n,U.useEffect((()=>{e(a),t(o)}),[]);const a=(e,t,n)=>{const a=Object.assign({},r.current);a[e]={component:t,containerElement:n},i(a)},o=e=>{const t=Object.assign({},r.current);delete t[e],i(t)},s=Object.keys(n);return V.createElement(V.Fragment,null,s.map((e=>{const t=n[e];return od.createPortal(t.component,t.containerElement,`overlay-${e}`)})))},Ox=ex("ion-tab-button",void 0,void 0,ew),Rx=ex("ion-tab-bar",void 0,void 0,Xv),Px=ex("ion-back-button",void 0,void 0,Kv),Mx=ex("ion-router-outlet",void 0,void 0,Yv),$x=ex("ion-app",void 0,void 0,Hv),Ix=ex("ion-icon",void 0,void 0,zE),Dx=(()=>class extends V.Component{constructor(e){super(e),this.ionContext={addOverlay:(e,t,n)=>{this.addOverlayCallback&&this.addOverlayCallback(e,t,n)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return V.createElement(Ax.Provider,{value:this.ionContext},V.createElement($x,Object.assign({},this.props),this.props.children),V.createElement(_x,{onAddOverlay:e=>{this.addOverlayCallback=e},onRemoveOverlay:e=>{this.removeOverlayCallback=e}}))}static get displayName(){return"IonApp"}})(),Lx=V.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class jx extends V.PureComponent{constructor(e){super(e),this.ionPageElementRef=V.createRef(),this.stableMergedRefs=ZE(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:t,children:n,routeInfo:i,forwardedRef:r}=e,a=db(e,["className","children","routeInfo","forwardedRef"]);return V.createElement(UE.Consumer,null,(e=>(this.ionLifeCycleContext=e,V.createElement("div",Object.assign({className:t?`${t} ion-page`:"ion-page",ref:this.stableMergedRefs},a),n))))}static get contextType(){return Lx}}class qx extends V.Component{constructor(e){super(e)}render(){const e=this.props,{className:t,children:n,forwardedRef:i}=e,r=db(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?V.createElement(jx,Object.assign({className:t?`${t}`:"",routeInfo:this.context.routeInfo,forwardedRef:i},r),n):V.createElement("div",Object.assign({className:t?`ion-page ${t}`:"ion-page",ref:i},r),n)}static get displayName(){return"IonPage"}static get contextType(){return WE}}const Bx=vx(qx,"IonPage"),Fx=ex("ion-nav",void 0,void 0,gv);vx((e=>{var{children:t,forwardedRef:n}=e,i=db(e,["children","forwardedRef"]);const[r,a]=U.useState([]),o=e=>a((t=>[...t,e])),s=e=>a((t=>t.filter((t=>t!==e)))),l=U.useMemo((()=>((e,t)=>{const n=new WeakMap;return{attachViewToDom:async(t,i,r,a)=>{const o=document.createElement("div");a&&o.classList.add(...a),t.appendChild(o);const s=i(r),l=ad.createPortal(s,o);return n.set(o,l),e(l),Promise.resolve(o)},removeViewFromDom:(e,i)=>{const r=n.get(i);return r&&t(r),i.remove(),Promise.resolve()}}})(o,s)),[]);return V.createElement(Fx,Object.assign({delegate:l,ref:n},i),r)}),"IonNav"),V.createContext({activeTab:void 0,selectTab:()=>!1});const zx="undefined"!=typeof HTMLElement?HTMLElement:class{};class Ux extends V.Component{constructor(e){super(e),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||ef(this.ionRouterOutlet,(()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)})),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:t,children:n,routeInfo:i}=e,r=db(e,["StackManager","children","routeInfo"]);return V.createElement(UE.Consumer,null,(e=>(this.ionLifeCycleContext=e,V.createElement(t,{routeInfo:i},V.createElement(Mx,Object.assign({setRef:e=>this.ionRouterOutlet=e},r),n)))))}static get contextType(){return Lx}}class Vx extends V.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),t=this.props,{children:n,forwardedRef:i}=t,r=db(t,["children","forwardedRef"]);return this.context.hasIonicRouter()?r.ionPage?V.createElement(Ux,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},r),n):V.createElement(e,{routeInfo:this.context.routeInfo},V.createElement(Mx,Object.assign({},r,{forwardedRef:i}),n)):V.createElement(Mx,Object.assign({ref:i},this.props),this.props.children)}static get contextType(){return WE}}const Wx=vx(Vx,"IonRouterOutlet"),Hx=(()=>class extends V.Component{constructor(e){super(e),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const e=db(this.props,["onClick"]);return V.createElement(Ox,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}})();class Qx extends V.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=e=>{};const t={};V.Children.forEach(e.children,(n=>{var i,r,a,o;null!=n&&"object"==typeof n&&n.props&&(n.type===Hx||n.type.isTabButton)&&(t[n.props.tab]={originalHref:n.props.href,currentHref:n.props.href,originalRouteOptions:n.props.href===(null===(i=e.routeInfo)||void 0===i?void 0:i.pathname)?null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions:void 0,currentRouteOptions:n.props.href===(null===(a=e.routeInfo)||void 0===a?void 0:a.pathname)?null===(o=e.routeInfo)||void 0===o?void 0:o.routeOptions:void 0})})),this.state={tabs:t},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,t=Object.keys(e).find((t=>{const n=e[t].originalHref;return this.props.routeInfo.pathname.startsWith(n)}));t&&this.setState({activeTab:t})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const t=this.state.tabs[e];return!!t&&(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0)}static getDerivedStateFromProps(e,t){var n,i,r;const a=Object.assign({},t.tabs),o=Object.keys(t.tabs).find((n=>{const i=t.tabs[n].originalHref;return e.routeInfo.pathname.startsWith(i)}));V.Children.forEach(e.children,(e=>{if(null!=e&&"object"==typeof e&&e.props&&(e.type===Hx||e.type.isTabButton)){const t=a[e.props.tab];t&&t.originalHref===e.props.href||(a[e.props.tab]={originalHref:e.props.href,currentHref:e.props.href,originalRouteOptions:e.props.routeOptions,currentRouteOptions:e.props.routeOptions})}}));const{activeTab:s}=t;if(o&&s){const l=t.tabs[s].currentHref,c=t.tabs[s].currentRouteOptions;o===s&&l===(null===(n=e.routeInfo)||void 0===n?void 0:n.pathname)&&c===(null===(i=e.routeInfo)||void 0===i?void 0:i.routeOptions)||(a[o]={originalHref:a[o].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:a[o].originalRouteOptions,currentRouteOptions:null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions},"pop"===e.routeInfo.routeAction&&o!==s&&(a[s]={originalHref:a[s].originalHref,currentHref:a[s].originalHref,originalRouteOptions:a[s].originalRouteOptions,currentRouteOptions:a[s].currentRouteOptions}))}return o&&e.onSetCurrentTab(o,e.routeInfo),{activeTab:o,tabs:a}}onTabButtonClick(e,t){const n=this.state.tabs[e.detail.tab],i=n.originalHref,r=e.detail.href,{activeTab:a}=this.state;t&&t(e),a===e.detail.tab?i!==r&&this.context.resetTab(e.detail.tab,i,n.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,r,e.detail.routeOptions))}renderTabButton(e){return t=>{var n,i;if(null!=t&&t.props&&(t.type===Hx||t.type.isTabButton)){const r=t.props.tab===e?null===(n=this.props.routeInfo)||void 0===n?void 0:n.pathname:this.state.tabs[t.props.tab].currentHref,a=t.props.tab===e?null===(i=this.props.routeInfo)||void 0===i?void 0:i.routeOptions:this.state.tabs[t.props.tab].currentRouteOptions;return V.cloneElement(t,{href:r,routeOptions:a,onClick:e=>this.onTabButtonClick(e,t.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return V.createElement(Rx,Object.assign({},this.props,{selectedTab:e}),V.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return WE}}const Kx=V.memo((e=>{var{forwardedRef:t}=e,n=db(e,["forwardedRef"]);const i=U.useContext(WE);return V.createElement(Qx,Object.assign({ref:t},n,{routeInfo:n.routeInfo||i.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:i.setCurrentTab}),n.children)})),Gx=vx(Kx,"IonTabBar");class Yx extends zx{constructor(){super()}}if("undefined"!=typeof window&&window.customElements){window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",Yx)}const Jx=(()=>class extends V.Component{constructor(){super(...arguments),this.clickButton=e=>{if(e.target&&null!==e.target.closest("ion-nav"))return;const{defaultHref:t,routerAnimation:n}=this.props;this.context.hasIonicRouter()?(e.stopPropagation(),this.context.goBack(t,n)):void 0!==t&&(window.location.href=t)}}render(){return V.createElement(Px,Object.assign({onClick:this.clickButton},this.props))}static get displayName(){return"IonBackButton"}static get contextType(){return WE}})();class Xx extends V.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,t;const n=this.props,{icon:i,ios:r,md:a,mode:o}=n,s=db(n,["icon","ios","md","mode"]);let l;const c=wx(),u=o||(null==c?void 0:c.get("mode"));return l=r||a?"ios"===u?null!==(e=null!=r?r:a)&&void 0!==e?e:i:null!==(t=null!=a?a:r)&&void 0!==t?t:i:i,V.createElement(Ix,Object.assign({ref:this.props.forwardedRef,icon:l},s),this.props.children)}static get contextType(){return WE}}const Zx=vx(Xx,"IonIcon");class eT extends V.PureComponent{render(){const e=this.context.getIonRoute();return this.context.hasIonicRouter()&&eT?V.createElement(e,Object.assign({},this.props)):(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null)}static get contextType(){return WE}}V.PureComponent;const tT=V.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});V.PureComponent;const nT={main:0},iT=(e="main")=>{var t;const n=(null!==(t=nT[e])&&void 0!==t?t:0)+1;return nT[e]=n,n.toString()},rT=V.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class aT extends V.Component{constructor(e){super(e),this.ionLifeCycleContext=new VE,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed((()=>{this.props.mount||this._isMounted&&this.setState({show:!1},(()=>this.props.removeView()))})),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return V.createElement(UE.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class oT{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){"push"===e.routeAction||null==e.routeAction?this._add(e):"pop"===e.routeAction?this._pop(e):"replace"===e.routeAction&&this._replace(e),"root"===e.routeDirection&&(this._clear(),this._add(e))}clearTabStack(e){const t=this._getRouteInfosByKey(e);t&&(t.forEach((e=>{this.locationHistory=this.locationHistory.filter((t=>t.id!==e.id))})),this.tabHistory[e]=[])}update(e){const t=this.locationHistory.findIndex((t=>t.id===e.id));t>-1&&this.locationHistory.splice(t,1,e);const n=this.tabHistory[e.tab||""];if(n){const t=n.findIndex((t=>t.id===e.id));t>-1?n.splice(t,1,e):n.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const t=this._getRouteInfosByKey(e.tab);t&&(this._areRoutesEqual(t[t.length-1],e)&&t.pop(),t.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,t){return!(!e||!t)&&(e.pathname===t.pathname&&e.search===t.search)}_pop(e){const t=this._getRouteInfosByKey(e.tab);t&&(t.pop(),t.pop(),t.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const t=this._getRouteInfosByKey(e.tab);t&&t.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach((e=>this.tabHistory[e]=[])),this.locationHistory=[]}_getRouteInfosByKey(e){let t;return e&&(t=this.tabHistory[e],t||(t=this.tabHistory[e]=[])),t}getFirstRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[0]}getCurrentRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[t.length-1]}findLastLocation(e){const t=this._getRouteInfosByKey(e.tab);if(t)for(let n=t.length-2;n>=0;n--){const i=t[n];if(i&&i.pathname===e.pushedByRoute)return i}for(let n=this.locationHistory.length-2;n>=0;n--){const t=this.locationHistory[n];if(t&&t.pathname===e.pushedByRoute)return t}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class sT extends V.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(e,t,n,i,r)=>{this.navigate(e,t,n,r,i)},back:e=>{this.goBack(void 0,e)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){"undefined"!=typeof document&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){"undefined"!=typeof document&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,(e=>{this.nativeGoBack(),e()}))}goBack(e,t){this.props.onNavigateBack(e,t)}nativeGoBack(){this.props.onNativeBack()}navigate(e,t="forward",n="push",i,r,a){this.props.onNavigate(e,n,t,i,r,a)}getPageManager(){return jx}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return V.createElement(WE.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},V.createElement(tT.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class lT{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:t}=e;this.viewStacks[t]?this.viewStacks[t].push(e):this.viewStacks[t]=[e]}clear(e){return setTimeout((()=>{delete this.viewStacks[e]}),500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:t}=e,n=this.viewStacks[t];if(n){const i=n.find((t=>t.id===e.id));i&&(i.mount=!1,this.viewStacks[t]=n.filter((e=>e.id!==i.id)))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),t=[];return e.forEach((e=>{t.push(...this.viewStacks[e])})),t}}class cT extends V.PureComponent{render(){return V.createElement(yp,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},void 0!==this.props.computedMatch?{computedMatch:this.props.computedMatch}:{}))}}class uT extends lT{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,t,n,i){const r={id:iT("viewItem"),outletId:e,ionPageElement:i,reactElement:t,mount:!0,ionRoute:!1},a={exact:t.props.exact,path:t.props.path||t.props.from,component:t.props.component},o=bp(n.pathname,a);return t.type===eT&&(r.ionRoute=!0,r.disableIonPageManagement=t.props.disableIonPageManagement),r.routeData={match:o,childProps:t.props},r}getChildrenToRender(e,t,n){const i=this.getViewItemsForOutlet(e);V.Children.forEach(t.props.children,(e=>{const t=i.find((t=>dT(e,t.routeData.childProps.path||t.routeData.childProps.from)));t&&(t.reactElement=e)}));const r=i.map((e=>{let t;if(e.ionRoute&&!e.disableIonPageManagement)t=V.createElement(aT,{key:`view-${e.id}`,mount:e.mount,removeView:()=>this.remove(e)},V.cloneElement(e.reactElement,{computedMatch:e.routeData.match}));else{const i=dT(e.reactElement,n.pathname);t=V.createElement(aT,{key:`view-${e.id}`,mount:e.mount,removeView:()=>this.remove(e)},V.cloneElement(e.reactElement,{computedMatch:e.routeData.match})),!i&&e.routeData.match&&(e.routeData.match=void 0,e.mount=!1)}return t}));return r}findViewItemByRouteInfo(e,t,n){const{viewItem:i,match:r}=this.findViewItemByPath(e.pathname,t);return(void 0===n||!0===n)&&i&&r&&(i.routeData.match=r),i}findLeavingViewItemByRouteInfo(e,t,n=!0){const{viewItem:i}=this.findViewItemByPath(e.lastPathname,t,!1,n);return i}findViewItemByPathname(e,t){const{viewItem:n}=this.findViewItemByPath(e,t);return n}findViewItemByPath(e,t,n,i){let r,a,o;if(t)o=this.getViewItemsForOutlet(t),o.some(s),r||o.some(l);else{const e=this.getAllViewItems();e.some(s),r||e.some(l)}return{viewItem:r,match:a};function s(t){if(i&&!t.ionRoute)return!1;const o={exact:!!n||t.routeData.childProps.exact,path:t.routeData.childProps.path||t.routeData.childProps.from,component:t.routeData.childProps.component},s=bp(e,o);return!!s&&(r=t,a=s,!0)}function l(t){return!t.routeData.childProps.path&&!t.routeData.childProps.from&&(a={path:e,url:e,isExact:!0,params:{}},r=t,!0)}}}function dT(e,t,n){return bp(t,{exact:!!n||e.props.exact,path:e.props.path||e.props.from,component:e.props.component})}const hT=e=>!e.classList.contains("ion-page-invisible")&&!e.classList.contains("ion-page-hidden");class pT extends V.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=iT("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:t}=this.props.routeInfo,{pathname:n}=e.routeInfo;t!==n?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var t,n;if(this.routerOutletElement&&this.routerOutletElement.commit){let i=this.context.findViewItemByRouteInfo(e,this.id),r=this.context.findLeavingViewItemByRouteInfo(e,this.id);!r&&e.prevRouteLastPathname&&(r=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),r&&("replace"===e.routeAction?r.mount=!1:"push"!==e.routeAction||"forward"!==e.routeDirection?"none"!==e.routeDirection&&i!==r&&(r.mount=!1):(null===(t=e.routeOptions)||void 0===t?void 0:t.unmount)&&(r.mount=!1));const a=function(e,t){let n;if(V.Children.forEach(e,(e=>{const i={exact:e.props.exact,path:e.props.path||e.props.from,component:e.props.component};bp(t.pathname,i)&&(n=e)})),n)return n;return V.Children.forEach(e,(e=>{e.props.path||e.props.from||(n=e)})),n}(null===(n=this.ionRouterOutlet)||void 0===n?void 0:n.props.children,e);if(i?i.reactElement=a:a&&(i=this.context.createViewItem(this.id,a,e),this.context.addViewItem(i)),i&&i.ionPageElement){if(i===r&&i.routeData.match.url!==e.pathname)return;if(!r&&this.props.routeInfo.prevRouteLastPathname&&(r=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),hT(i.ionPageElement)&&void 0!==r&&!hT(r.ionPageElement))return;this.transitionPage(e,i,r)}else!r||a||i||r.ionPageElement&&(r.ionPageElement.classList.add("ion-page-hidden"),r.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}else this.pendingPageTransition=!0}registerIonPage(e,t){const n=this.context.findViewItemByRouteInfo(t,this.id);if(n){const t=n.ionPageElement;if(n.ionPageElement=e,n.ionRoute=!0,t===e)return}this.handlePageTransition(t)}async setupRouterOutlet(e){e.swipeHandler={canStart:()=>{const t=wx();if(!(t&&t.get("swipeBackEnabled","ios"===e.mode)))return!1;const{routeInfo:n}=this.props,i=this.prevProps&&this.prevProps.routeInfo.pathname===n.pushedByRoute?this.prevProps.routeInfo:{pathname:n.pushedByRoute||""},r=this.context.findViewItemByRouteInfo(i,this.id,!1);return!!r&&r.mount&&r.routeData.match.path!==n.pathname},onStart:async()=>{const{routeInfo:e}=this.props,t=this.prevProps&&this.prevProps.routeInfo.pathname===e.pushedByRoute?this.prevProps.routeInfo:{pathname:e.pushedByRoute||""},n=this.context.findViewItemByRouteInfo(t,this.id,!1),i=this.context.findViewItemByRouteInfo(e,this.id,!1);return n&&i&&await this.transitionPage(e,n,i,"back",!0),Promise.resolve()},onEnd:e=>{if(e)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:e}=this.props,t=this.prevProps&&this.prevProps.routeInfo.pathname===e.pushedByRoute?this.prevProps.routeInfo:{pathname:e.pushedByRoute||""},n=this.context.findViewItemByRouteInfo(t,this.id,!1);if(n!==this.context.findViewItemByRouteInfo(e,this.id,!1)&&void 0!==(null==n?void 0:n.ionPageElement)){const{ionPageElement:e}=n;e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")}}}}}async transitionPage(e,t,n,i,r=!1){const a=async(t,n)=>{const i=this.skipTransition;i?this.skipTransition=!1:(t.classList.add("ion-page"),t.classList.add("ion-page-invisible")),await o.commit(t,n,{duration:i||void 0===l?0:void 0,direction:l,showGoBack:!!e.pushedByRoute,progressAnimation:r,animationBuilder:e.routeAnimation})},o=this.routerOutletElement,s="none"===e.routeDirection||"root"===e.routeDirection?void 0:e.routeDirection,l=null!=i?i:s;if(t&&t.ionPageElement&&this.routerOutletElement)if(n&&n.ionPageElement&&t===n){if(function(e,t,n){const i={exact:!!n||e.props.exact,path:e.props.path||e.props.from,component:e.props.component},r=bp(t,i);return r}(n.reactElement,e.pathname,!0)){const e=function(e){let t;if(t="string"==typeof e?e:e.outerHTML,document){const e=document.createElement("div");e.innerHTML=t,e.style.zIndex="";const n=e.getElementsByTagName("ion-back-button");return n[0]&&n[0].remove(),e.firstChild}}(n.ionPageElement.outerHTML);e&&(this.routerOutletElement.appendChild(e),await a(t.ionPageElement,e),this.routerOutletElement.removeChild(e))}else await a(t.ionPageElement,void 0)}else await a(t.ionPageElement,null==n?void 0:n.ionPageElement),n&&n.ionPageElement&&!r&&(n.ionPageElement.classList.add("ion-page-hidden"),n.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,t=V.Children.only(e);this.ionRouterOutlet=t;const n=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,(()=>{this.forceUpdate()}));return V.createElement(Lx.Provider,{value:this.stackContextValue},V.cloneElement(t,{ref:e=>{t.props.setRef&&t.props.setRef(e),t.props.forwardedRef&&(t.props.forwardedRef.current=e),this.routerOutletElement=e;const{ref:n}=t;"function"==typeof n&&n(e)}},n))}static get contextType(){return rT}}class mT extends V.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new oT,this.viewStack=new uT,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const t={id:iT("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(t),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:t}}handleChangeTab(e,t,n){if(!t)return;const i=this.locationHistory.getCurrentRouteInfoForTab(e),[r,a]=t.split("?");i?(this.incomingRouteParams=Object.assign(Object.assign({},i),{routeAction:"push",routeDirection:"none"}),i.pathname===r?(this.incomingRouteParams.routeOptions=n,this.props.history.push(i.pathname+(i.search||""))):(this.incomingRouteParams.pathname=r,this.incomingRouteParams.search=a?"?"+a:void 0,this.incomingRouteParams.routeOptions=n,this.props.history.push(r+(a?"?"+a:"")))):this.handleNavigate(r,"push","none",void 0,n,e)}handleHistoryChange(e,t){var n,i,r;let a;a=this.incomingRouteParams&&"replace"===this.incomingRouteParams.routeAction?this.locationHistory.previous():this.locationHistory.current();if(a.pathname+a.search!==e.pathname){if(!this.incomingRouteParams){if("REPLACE"===t&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),"POP"===t){const e=this.locationHistory.current();if(e&&e.pushedByRoute){const t=this.locationHistory.findLastLocation(e);this.incomingRouteParams=Object.assign(Object.assign({},t),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:(null===(n=e.state)||void 0===n?void 0:n.direction)||"forward",routeOptions:null===(i=e.state)||void 0===i?void 0:i.routerOptions,tab:this.currentTab})}let o;if(null===(r=this.incomingRouteParams)||void 0===r?void 0:r.id)o=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:a.pathname}),this.locationHistory.add(o);else{const t="push"===this.incomingRouteParams.routeAction&&"forward"===this.incomingRouteParams.routeDirection;if(o=Object.assign(Object.assign({id:iT("routeInfo")},this.incomingRouteParams),{lastPathname:a.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:a.lastPathname}),t)o.tab=a.tab,o.pushedByRoute=a.pathname;else if("pop"===o.routeAction){const e=this.locationHistory.findLastLocation(o);o.pushedByRoute=null==e?void 0:e.pushedByRoute}else if("push"===o.routeAction&&o.tab!==a.tab){const e=this.locationHistory.getCurrentRouteInfoForTab(o.tab);o.pushedByRoute=null==e?void 0:e.pushedByRoute}else if("replace"===o.routeAction){const e=this.locationHistory.current(),t=null==e?void 0:e.pushedByRoute,n=void 0!==t&&t!==o.pathname?t:o.pushedByRoute;o.lastPathname=(null==e?void 0:e.pathname)||o.lastPathname,o.prevRouteLastPathname=null==e?void 0:e.lastPathname,o.pushedByRoute=n,o.routeDirection=(null==e?void 0:e.routeDirection)||o.routeDirection,o.routeAnimation=(null==e?void 0:e.routeAnimation)||o.routeAnimation}this.locationHistory.add(o)}this.setState({routeInfo:o})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,t,n,i,r,a){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:t,routeDirection:n,routeOptions:r,routeAnimation:i,tab:a}),"push"===t?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",t){const n=wx();e=e||n&&n.get("backButtonDefaultHref");const i=this.locationHistory.current();if(i&&i.pushedByRoute){const n=this.locationHistory.findLastLocation(i);if(n)if(this.incomingRouteParams=Object.assign(Object.assign({},n),{routeAction:"pop",routeDirection:"back",routeAnimation:t||i.routeAnimation}),i.lastPathname===i.pushedByRoute||n.pathname===i.pushedByRoute&&""===i.tab&&""===n.tab){const e=this.props.history;(e.goBack||e.back)()}else this.handleNavigate(n.pathname+(n.search||""),"pop","back",t);else this.handleNavigate(e,"pop","back",t)}else this.handleNavigate(e,"pop","back",t)}handleResetTab(e,t,n){const i=this.locationHistory.getFirstRouteInfoForTab(e);if(i){const e=Object.assign({},i);e.pathname=t,e.routeOptions=n,this.incomingRouteParams=Object.assign(Object.assign({},e),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(e.pathname+(e.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const t=Object.assign({},this.locationHistory.current());t.tab!==e&&(t.tab=e,this.locationHistory.update(t))}render(){return V.createElement(rT.Provider,{value:this.routeMangerContextState},V.createElement(sT,{ionRoute:cT,ionRedirect:{},stackManager:pT,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const fT=function(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,i=bh(t,["wrappedComponentRef"]);return V.createElement(op.Consumer,null,(function(t){return t||xd(!1),V.createElement(e,fd({},i,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,ep(n,e)}(mT);fT.displayName="IonRouter";class gT extends V.Component{constructor(e){super(e);const{history:t}=e,n=db(e,["history"]);this.history=t||Id(n),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const n=e.location||e,i=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,i)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,n=db(e,["children"]);return V.createElement(sp,Object.assign({history:this.history},n),V.createElement(fT,{registerHistoryListener:this.registerHistoryListener},t))}}V.Component;V.Component;const bT="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='16'/><path d='M280 81.5V72a24 24 0 00-48 0v9.5a191 191 0 00-84.43 32.13L137 103a24 24 0 00-34 34l8.6 8.6A191.17 191.17 0 0064 272c0 105.87 86.13 192 192 192s192-86.13 192-192c0-97.74-73.42-178.66-168-190.5zM256 320a48 48 0 01-16-93.25V152a16 16 0 0132 0v74.75A48 48 0 01256 320z'/></svg>",yT=e=>{let t;const n=new Set,i=(e,i)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=i?i:"object"!=typeof r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,a={setState:i,getState:r,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}};return t=e(i,r,a),a};var vT={exports:{}},wT={},ET={exports:{}},xT={},TT=U;var CT="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ST=TT.useState,NT=TT.useEffect,kT=TT.useLayoutEffect,AT=TT.useDebugValue;function _T(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!CT(e,n)}catch(i){return!0}}var OT="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=ST({inst:{value:n,getSnapshot:t}}),r=i[0].inst,a=i[1];return kT((function(){r.value=n,r.getSnapshot=t,_T(r)&&a({inst:r})}),[e,n,t]),NT((function(){return _T(r)&&a({inst:r}),e((function(){_T(r)&&a({inst:r})}))}),[e]),AT(n),n};xT.useSyncExternalStore=void 0!==TT.useSyncExternalStore?TT.useSyncExternalStore:OT,ET.exports=xT;var RT=ET.exports,PT=U,MT=RT;
/**
             * @license React
             * use-sync-external-store-shim/with-selector.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */var $T="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},IT=MT.useSyncExternalStore,DT=PT.useRef,LT=PT.useEffect,jT=PT.useMemo,qT=PT.useDebugValue;wT.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var a=DT(null);if(null===a.current){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=jT((function(){function e(e){if(!l){if(l=!0,a=e,e=i(e),void 0!==r&&o.hasValue){var t=o.value;if(r(t,e))return s=t}return s=e}if(t=s,$T(a,e))return t;var n=i(e);return void 0!==r&&r(t,n)?t:(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,i,r]);var s=IT(e,a[0],a[1]);return LT((function(){o.hasValue=!0,o.value=s}),[s]),qT(s),s},vT.exports=wT;const BT=a(vT.exports),{useSyncExternalStoreWithSelector:FT}=BT;const zT=e=>{const t="function"==typeof e?(e=>e?yT(e):yT)(e):e,n=(e,n)=>function(e,t=e.getState,n){const i=FT(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return U.useDebugValue(i),i}(t,e,n);return Object.assign(n,t),n},UT=new Map,VT=e=>{const t=UT.get(e);return t?Object.fromEntries(Object.entries(t.stores).map((([e,t])=>[e,t.getState()]))):{}},WT=(e,t={})=>(n,i,r)=>{const{enabled:a,anonymousActionType:o,store:s,...l}=t;let c;try{c=null!=a&&a&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(RD){}if(!c)return e(n,i,r);const{connection:u,...d}=((e,t,n)=>{if(void 0===e)return{type:"untracked",connection:t.connect(n)};const i=UT.get(n.name);if(i)return{type:"tracked",store:e,...i};const r={connection:t.connect(n),stores:{}};return UT.set(n.name,r),{type:"tracked",store:e,...r}})(s,c,l);let h=!0;r.setState=(e,t,a)=>{const c=n(e,t);if(!h)return c;const d=void 0===a?{type:o||"anonymous"}:"string"==typeof a?{type:a}:a;return void 0===s?(null==u||u.send(d,i()),c):(null==u||u.send({...d,type:`${s}/${d.type}`},{...VT(l.name),[s]:r.getState()}),c)};const p=(...e)=>{const t=h;h=!1,n(...e),h=t},m=e(r.setState,i,r);if("untracked"===d.type?null==u||u.init(m):(d.stores[d.store]=r,null==u||u.init(Object.fromEntries(Object.entries(d.stores).map((([e,t])=>[e,e===d.store?m:t.getState()]))))),r.dispatchFromDevtools&&"function"==typeof r.dispatch){const e=r.dispatch;r.dispatch=(...t)=>{e(...t)}}return u.subscribe((e=>{var t;switch(e.type){case"ACTION":return"string"!=typeof e.payload?void console.error("[zustand devtools middleware] Unsupported action format"):HT(e.payload,(e=>{if("__setState"!==e.type)r.dispatchFromDevtools&&"function"==typeof r.dispatch&&r.dispatch(e);else{if(void 0===s)return void p(e.state);1!==Object.keys(e.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const t=e.state[s];if(null==t)return;JSON.stringify(r.getState())!==JSON.stringify(t)&&p(t)}}));case"DISPATCH":switch(e.payload.type){case"RESET":return p(m),void 0===s?null==u?void 0:u.init(r.getState()):null==u?void 0:u.init(VT(l.name));case"COMMIT":return void 0===s?void(null==u||u.init(r.getState())):null==u?void 0:u.init(VT(l.name));case"ROLLBACK":return HT(e.state,(e=>{if(void 0===s)return p(e),void(null==u||u.init(r.getState()));p(e[s]),null==u||u.init(VT(l.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return HT(e.state,(e=>{void 0!==s?JSON.stringify(r.getState())!==JSON.stringify(e[s])&&p(e[s]):p(e)}));case"IMPORT_STATE":{const{nextLiftedState:n}=e.payload,i=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!i)return;return p(void 0===s?i:i[s]),void(null==u||u.send(null,n))}case"PAUSE_RECORDING":return h=!h}return}})),m},HT=(e,t)=>{let n;try{n=JSON.parse(e)}catch(RD){console.error("[zustand devtools middleware] Could not parse the received json",RD)}void 0!==n&&t(n)};function QT(e,t){let n;try{n=e()}catch(RD){return}const i={getItem:e=>{var i;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),a=null!=(i=n.getItem(e))?i:null;return a instanceof Promise?a.then(r):r(a)},setItem:(e,i)=>n.setItem(e,JSON.stringify(i,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)};return i}const KT=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>KT(e)(n),catch(e){return this}}}catch(RD){return{then(e){return this},catch:t=>KT(t)(RD)}}},GT=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(n,i,r)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const s=new Set,l=new Set;let c;try{c=a.getStorage()}catch(RD){}if(!c)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)}),i,r);const u=KT(a.serialize),d=()=>{const e=a.partialize({...i()});let t;const n=u({state:e,version:a.version}).then((e=>c.setItem(a.name,e))).catch((e=>{t=e}));if(t)throw t;return n},h=r.setState;r.setState=(e,t)=>{h(e,t),d()};const p=e(((...e)=>{n(...e),d()}),i,r);let m;const f=()=>{var e;if(!c)return;o=!1,s.forEach((e=>e(i())));const t=(null==(e=a.onRehydrateStorage)?void 0:e.call(a,i()))||void 0;return KT(c.getItem.bind(c))(a.name).then((e=>{if(e)return a.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return e.state;if(a.migrate)return a.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return m=a.merge(e,null!=(t=i())?t:p),n(m,!0),d()})).then((()=>{null==t||t(m,void 0),o=!0,l.forEach((e=>e(m)))})).catch((e=>{null==t||t(void 0,e)}))};return r.persist={setOptions:e=>{a={...a,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},f(),m||p})(e,t):((e,t)=>(n,i,r)=>{let a={storage:QT((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const s=new Set,l=new Set;let c=a.storage;if(!c)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)}),i,r);const u=()=>{const e=a.partialize({...i()});return c.setItem(a.name,{state:e,version:a.version})},d=r.setState;r.setState=(e,t)=>{d(e,t),u()};const h=e(((...e)=>{n(...e),u()}),i,r);let p;const m=()=>{var e,t;if(!c)return;o=!1,s.forEach((e=>{var t;return e(null!=(t=i())?t:h)}));const r=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=i())?e:h))||void 0;return KT(c.getItem.bind(c))(a.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return e.state;if(a.migrate)return a.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return p=a.merge(e,null!=(t=i())?t:h),n(p,!0),u()})).then((()=>{null==r||r(p,void 0),p=i(),o=!0,l.forEach((e=>e(p)))})).catch((e=>{null==r||r(void 0,e)}))};return r.persist={setOptions:e=>{a={...a,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},a.skipHydration||m(),p||h})(e,t),YT=e=>({timerInterval:25,setTimerInterval:t=>e((()=>({timerInterval:t})),!1,"setTimerInterval"),timerStatus:"idle",setTimerStatus:t=>e((()=>({timerStatus:t})),!1,"setTimerStatus"),timerKey:Date.now(),setTimerKey:()=>e((()=>({timerKey:Date.now()})),!1,"setTimerKey"),timerDuration:0,setTimerDuration:t=>e((()=>({timerDuration:Date.now()+t})),!1,"setTimerDuration"),timerPausedTime:0,setTimerPausedTime:()=>e((e=>({timerPausedTime:e.timerDuration-Date.now()})),!1,"setTimerPausedTime"),unsetTimer:()=>e((()=>({timerKey:Date.now(),timerStatus:"idle",timerDuration:0,timerPausedTime:0})),!1,"unsetTimer")}),JT=["timerStatus"],XT=(ZT?zT(ZT):zT)(WT(GT(((...e)=>({...YT(...e)})),{name:"combineStore",partialize:e=>Object.fromEntries(Object.entries(e).filter((([e])=>!JT.includes(e))))})));var ZT;function eC({isOpen:e,setIsOpen:t}){return X.jsx(kx,{isOpen:e,header:"",subHeader:"Nice choice",message:"Let's do it!",buttons:["OK"],onDidDismiss:()=>{t(!1),history.back()}})}const tC=()=>{const{unsetTimer:e}=XT(),{timerInterval:t,setTimerInterval:n}=XT(),[i,r]=U.useState(t),[a,o]=U.useState(!1);return X.jsxs(Bx,{id:"main-content",children:[X.jsx(ox,{children:X.jsx(yx,{color:"warning",children:X.jsx(nx,{slot:"start",children:X.jsx(Jx,{defaultHref:"/timer"})})})}),X.jsxs(rx,{children:[X.jsxs(ax,{children:[X.jsx(fx,{children:X.jsxs(ix,{children:[X.jsxs(gx,{children:[X.jsx("h2",{children:"Timer Settings"}),X.jsxs("p",{children:["Your timer is set to ring in ",i.toString()," seconds.",X.jsx(Zx,{slot:"icon-only",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 80a176 176 0 10176 176A176 176 0 00256 80z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296' stroke-linecap='round' stroke-miterlimit='10' stroke-width='28' class='ionicon-fill-none'/><circle cx='250' cy='348' r='20'/></svg>",color:"primary"})]})]}),X.jsxs(mx,{min:5,max:60,step:5,snaps:!0,color:"primary",value:i,onIonChange:e=>r(e.detail.value),children:[X.jsx(cx,{slot:"start",children:"5 sec"}),X.jsx(cx,{slot:"end",children:"60 sec"})]}),X.jsx(gx,{children:X.jsx("small",{children:"If you wish to change the settings drag the nob to the desired time interval (5 to 60 seconds)."})})]})}),X.jsx(fx,{children:X.jsx(ix,{children:X.jsx(gx,{})})}),X.jsx(fx,{children:X.jsx(ix,{children:X.jsx(xx,{expand:"block",onClick:()=>{n(i),o(!0),e()},children:"Save"})})})]}),X.jsx(eC,{isOpen:a,setIsOpen:o})]})]})};var nC="undefined"==typeof window?U.useEffect:U.useLayoutEffect,iC=(e,t)=>0===e||e===t?0:"number"==typeof t?e-t:0,rC=e=>({position:"relative",width:e,height:e}),aC={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},oC=(e,t,n,i,r)=>{if(0===i)return t;return t+n*((r?i-e:e)/i)},sC=e=>{var t,n;return null!=(n=null==(t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,n,i)=>`#${t}${t}${n}${n}${i}${i}`)).substring(1).match(/.{2}/g))?void 0:t.map((e=>parseInt(e,16))))?n:[]},lC=(e,t)=>{var n;let{colors:i,colorsTime:r,isSmoothColorTransition:a=!0}=e;if("string"==typeof i)return i;let o=null!=(n=null==r?void 0:r.findIndex(((e,n)=>e>=t&&t>=r[n+1])))?n:-1;if(!r||-1===o)return i[0];if(!a)return i[o];let s=r[o]-t,l=r[o]-r[o+1],c=sC(i[o]),u=sC(i[o+1]),d=!!e.isGrowing;return`rgb(${c.map(((e,t)=>0|oC(s,e,u[t]-e,l,d))).join(",")})`},cC=e=>{let{duration:t,initialRemainingTime:n,updateInterval:i,size:r=180,strokeWidth:a=12,trailStrokeWidth:o,isPlaying:s=!1,isGrowing:l=!1,rotation:c="clockwise",onComplete:u,onUpdate:d}=e,h=U.useRef(),p=Math.max(a,null!=o?o:0),{path:m,pathLength:f}=((e,t,n)=>{let i=e/2,r=t/2,a=i-r,o=2*a,s="clockwise"===n?"1,0":"0,1";return{path:`m ${i},${r} a ${a},${a} 0 ${s} 0,${o} a ${a},${a} 0 ${s} 0,-${o}`,pathLength:2*Math.PI*a}})(r,p,c),{elapsedTime:g}=(({isPlaying:e,duration:t,startAt:n=0,updateInterval:i=0,onComplete:r,onUpdate:a})=>{let[o,s]=U.useState(n),l=U.useRef(0),c=U.useRef(n),u=U.useRef(-1e3*n),d=U.useRef(null),h=U.useRef(null),p=U.useRef(null),m=e=>{let n=e/1e3;if(null===h.current)return h.current=n,void(d.current=requestAnimationFrame(m));let r=n-h.current,a=l.current+r;h.current=n,l.current=a;let o=c.current+(0===i?a:(a/i|0)*i),u=c.current+a,p="number"==typeof t&&u>=t;s(p?t:o),p||(d.current=requestAnimationFrame(m))},f=()=>{d.current&&cancelAnimationFrame(d.current),p.current&&clearTimeout(p.current),h.current=null},g=U.useCallback((t=>{f(),l.current=0;let i="number"==typeof t?t:n;c.current=i,s(i),e&&(d.current=requestAnimationFrame(m))}),[e,n]);return nC((()=>{if(null==a||a(o),t&&o>=t){u.current+=1e3*t;let{shouldRepeat:e=!1,delay:n=0,newStartAt:i}=(null==r?void 0:r(u.current/1e3))||{};e&&(p.current=setTimeout((()=>g(i)),1e3*n))}}),[o,t]),nC((()=>(e&&(d.current=requestAnimationFrame(m)),f)),[e,t,i]),{elapsedTime:o,reset:g}})({isPlaying:s,duration:t,startAt:iC(t,n),updateInterval:i,onUpdate:"function"==typeof d?e=>{let n=Math.ceil(t-e);n!==h.current&&(h.current=n,d(n))}:void 0,onComplete:"function"==typeof u?e=>{var n;let{shouldRepeat:i,delay:r,newInitialRemainingTime:a}=null!=(n=u(e))?n:{};if(i)return{shouldRepeat:i,delay:r,newStartAt:iC(t,a)}}:void 0}),b=t-g;return{elapsedTime:g,path:m,pathLength:f,remainingTime:Math.ceil(b),rotation:c,size:r,stroke:lC(e,b),strokeDashoffset:oC(g,0,f,t,l),strokeWidth:a}},uC=e=>{let{children:t,strokeLinecap:n,trailColor:i,trailStrokeWidth:r}=e,{path:a,pathLength:o,stroke:s,strokeDashoffset:l,remainingTime:c,elapsedTime:u,size:d,strokeWidth:h}=cC(e);return V.createElement("div",{style:rC(d)},V.createElement("svg",{viewBox:`0 0 ${d} ${d}`,width:d,height:d,xmlns:"http://www.w3.org/2000/svg"},V.createElement("path",{d:a,fill:"none",stroke:null!=i?i:"#d9d9d9",strokeWidth:null!=r?r:h}),V.createElement("path",{d:a,fill:"none",stroke:s,strokeLinecap:null!=n?n:"round",strokeWidth:h,strokeDasharray:o,strokeDashoffset:l})),"function"==typeof t&&V.createElement("div",{style:aC},t({remainingTime:c,elapsedTime:u,color:s})))};uC.displayName="CountdownCircleTimer";class dC extends Error{}class hC extends dC{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class pC extends dC{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class mC extends dC{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class fC extends dC{}class gC extends dC{constructor(e){super(`Invalid unit ${e}`)}}class bC extends dC{}class yC extends dC{constructor(){super("Zone is an abstract class")}}const vC="numeric",wC="short",EC="long",xC={year:vC,month:vC,day:vC},TC={year:vC,month:wC,day:vC},CC={year:vC,month:wC,day:vC,weekday:wC},SC={year:vC,month:EC,day:vC},NC={year:vC,month:EC,day:vC,weekday:EC},kC={hour:vC,minute:vC},AC={hour:vC,minute:vC,second:vC},_C={hour:vC,minute:vC,second:vC,timeZoneName:wC},OC={hour:vC,minute:vC,second:vC,timeZoneName:EC},RC={hour:vC,minute:vC,hourCycle:"h23"},PC={hour:vC,minute:vC,second:vC,hourCycle:"h23"},MC={hour:vC,minute:vC,second:vC,hourCycle:"h23",timeZoneName:wC},$C={hour:vC,minute:vC,second:vC,hourCycle:"h23",timeZoneName:EC},IC={year:vC,month:vC,day:vC,hour:vC,minute:vC},DC={year:vC,month:vC,day:vC,hour:vC,minute:vC,second:vC},LC={year:vC,month:wC,day:vC,hour:vC,minute:vC},jC={year:vC,month:wC,day:vC,hour:vC,minute:vC,second:vC},qC={year:vC,month:wC,day:vC,weekday:wC,hour:vC,minute:vC},BC={year:vC,month:EC,day:vC,hour:vC,minute:vC,timeZoneName:wC},FC={year:vC,month:EC,day:vC,hour:vC,minute:vC,second:vC,timeZoneName:wC},zC={year:vC,month:EC,day:vC,weekday:EC,hour:vC,minute:vC,timeZoneName:EC},UC={year:vC,month:EC,day:vC,weekday:EC,hour:vC,minute:vC,second:vC,timeZoneName:EC};class VC{get type(){throw new yC}get name(){throw new yC}get ianaName(){return this.name}get isUniversal(){throw new yC}offsetName(e,t){throw new yC}formatOffset(e,t){throw new yC}offset(e){throw new yC}equals(e){throw new yC}get isValid(){throw new yC}}let WC=null;class HC extends VC{static get instance(){return null===WC&&(WC=new HC),WC}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return jS(e,t,n)}formatOffset(e,t){return zS(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let QC={};const KC={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let GC={};class YC extends VC{static create(e){return GC[e]||(GC[e]=new YC(e)),GC[e]}static resetCache(){GC={},QC={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(RD){return!1}}constructor(e){super(),this.zoneName=e,this.valid=YC.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return jS(e,t,n,this.name)}formatOffset(e,t){return zS(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=(i=this.name,QC[i]||(QC[i]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),QC[i]);var i;let[r,a,o,s,l,c,u]=n.formatToParts?function(e,t){const n=e.formatToParts(t),i=[];for(let r=0;r<n.length;r++){const{type:e,value:t}=n[r],a=KC[e];"era"===e?i[a]=t:wS(a)||(i[a]=parseInt(t,10))}return i}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,a,o,s,l,c,u]=i;return[o,r,a,s,l,c,u]}(n,t);"BC"===s&&(r=1-Math.abs(r));let d=+t;const h=d%1e3;return d-=h>=0?h:1e3+h,(IS({year:r,month:a,day:o,hour:24===l?0:l,minute:c,second:u,millisecond:0})-d)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let JC={};let XC={};function ZC(e,t={}){const n=JSON.stringify([e,t]);let i=XC[n];return i||(i=new Intl.DateTimeFormat(e,t),XC[n]=i),i}let eS={};let tS={};let nS=null;function iS(e,t,n,i){const r=e.listingMode();return"error"===r?null:"en"===r?n(t):i(t)}class rS{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:r,...a}=n;if(!t||Object.keys(a).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const n=JSON.stringify([e,t]);let i=eS[n];return i||(i=new Intl.NumberFormat(e,t),eS[n]=i),i}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return kS(this.floor?Math.floor(e):RS(e,3),this.padTo)}}class aS{constructor(e,t,n){let i;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&YC.create(n).valid?(i=n,this.dt=e):(i="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const r={...this.opts};r.timeZone=r.timeZone||i,this.dtf=ZC(t,r)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class oS{constructor(e,t,n){this.opts={style:"long",...n},!t&&TS()&&(this.rtf=function(e,t={}){const{base:n,...i}=t,r=JSON.stringify([e,i]);let a=tS[r];return a||(a=new Intl.RelativeTimeFormat(e,t),tS[r]=a),a}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},a=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&a){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${r[e][0]}`;case-1:return n?"yesterday":`last ${r[e][0]}`;case 0:return n?"today":`this ${r[e][0]}`}}const o=Object.is(t,-0)||t<0,s=Math.abs(t),l=1===s,c=r[e],u=i?l?c[1]:c[2]||c[1]:l?r[e][0]:e;return o?`${s} ${u} ago`:`in ${s} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}class sS{static fromOpts(e){return sS.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,n,i=!1){const r=e||vS.defaultLocale,a=r||(i?"en-US":nS||(nS=(new Intl.DateTimeFormat).resolvedOptions().locale,nS)),o=t||vS.defaultNumberingSystem,s=n||vS.defaultOutputCalendar;return new sS(a,o,s,r)}static resetCache(){nS=null,XC={},eS={},tS={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n}={}){return sS.create(e,t,n)}constructor(e,t,n,i){const[r,a,o]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,i;try{t=ZC(e).resolvedOptions(),i=e}catch(RD){const a=e.substring(0,n);t=ZC(a).resolvedOptions(),i=a}const{numberingSystem:r,calendar:a}=t;return[i,r,a]}}(e);this.locale=r,this.numberingSystem=t||a||null,this.outputCalendar=n||o||null,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?sS.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return iS(this,e,QS,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=function(e){const t=[];for(let n=1;n<=12;n++){const i=uA.utc(2009,n,1);t.push(e(i))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[i][e]}))}weekdays(e,t=!1){return iS(this,e,JS,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=function(e){const t=[];for(let n=1;n<=7;n++){const i=uA.utc(2016,11,13+n);t.push(e(i))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[i][e]}))}meridiems(){return iS(this,void 0,(()=>XS),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[uA.utc(2016,11,13,9),uA.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return iS(this,e,nN,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[uA.utc(-40,1,1),uA.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const i=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return i?i.value:null}numberFormatter(e={}){return new rS(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new aS(e,this.intl,t)}relFormatter(e={}){return new oS(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const n=JSON.stringify([e,t]);let i=JC[n];return i||(i=new Intl.ListFormat(e,t),JC[n]=i),i}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let lS=null;class cS extends VC{static get utcInstance(){return null===lS&&(lS=new cS(0)),lS}static instance(e){return 0===e?cS.utcInstance:new cS(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new cS(qS(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${zS(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${zS(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return zS(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class uS extends VC{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function dS(e,t){if(wS(e)||null===e)return t;if(e instanceof VC)return e;if(function(e){return"string"==typeof e}(e)){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?HC.instance:"utc"===n||"gmt"===n?cS.utcInstance:cS.parseSpecifier(n)||YC.create(e)}return ES(e)?cS.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new uS(e)}let hS,pS=()=>Date.now(),mS="system",fS=null,gS=null,bS=null,yS=60;class vS{static get now(){return pS}static set now(e){pS=e}static set defaultZone(e){mS=e}static get defaultZone(){return dS(mS,HC.instance)}static get defaultLocale(){return fS}static set defaultLocale(e){fS=e}static get defaultNumberingSystem(){return gS}static set defaultNumberingSystem(e){gS=e}static get defaultOutputCalendar(){return bS}static set defaultOutputCalendar(e){bS=e}static get twoDigitCutoffYear(){return yS}static set twoDigitCutoffYear(e){yS=e%100}static get throwOnInvalid(){return hS}static set throwOnInvalid(e){hS=e}static resetCaches(){sS.resetCache(),YC.resetCache()}}function wS(e){return void 0===e}function ES(e){return"number"==typeof e}function xS(e){return"number"==typeof e&&e%1==0}function TS(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(RD){return!1}}function CS(e,t,n){if(0!==e.length)return e.reduce(((e,i)=>{const r=[t(i),i];return e&&n(e[0],r[0])===e[0]?e:r}),null)[1]}function SS(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function NS(e,t,n){return xS(e)&&e>=t&&e<=n}function kS(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function AS(e){return wS(e)||null===e||""===e?void 0:parseInt(e,10)}function _S(e){return wS(e)||null===e||""===e?void 0:parseFloat(e)}function OS(e){if(!wS(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function RS(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function PS(e){return e%4==0&&(e%100!=0||e%400==0)}function MS(e){return PS(e)?366:365}function $S(e,t){const n=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===n?PS(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function IS(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function DS(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return 4===t||3===i?53:52}function LS(e){return e>99?e:e>vS.twoDigitCutoffYear?1900+e:2e3+e}function jS(e,t,n,i=null){const r=new Date(e),a={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(a.timeZone=i);const o={timeZoneName:t,...a},s=new Intl.DateTimeFormat(n,o).formatToParts(r).find((e=>"timezonename"===e.type.toLowerCase()));return s?s.value:null}function qS(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-i:i)}function BS(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new bC(`Invalid unit value ${e}`);return t}function FS(e,t){const n={};for(const i in e)if(SS(e,i)){const r=e[i];if(null==r)continue;n[t(i)]=BS(r)}return n}function zS(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),r=e>=0?"+":"-";switch(t){case"short":return`${r}${kS(n,2)}:${kS(i,2)}`;case"narrow":return`${r}${n}${i>0?`:${i}`:""}`;case"techie":return`${r}${kS(n,2)}${kS(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function US(e){return function(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}(e,["hour","minute","second","millisecond"])}const VS=["January","February","March","April","May","June","July","August","September","October","November","December"],WS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],HS=["J","F","M","A","M","J","J","A","S","O","N","D"];function QS(e){switch(e){case"narrow":return[...HS];case"short":return[...WS];case"long":return[...VS];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const KS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],GS=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],YS=["M","T","W","T","F","S","S"];function JS(e){switch(e){case"narrow":return[...YS];case"short":return[...GS];case"long":return[...KS];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const XS=["AM","PM"],ZS=["Before Christ","Anno Domini"],eN=["BC","AD"],tN=["B","A"];function nN(e){switch(e){case"narrow":return[...tN];case"short":return[...eN];case"long":return[...ZS];default:return null}}function iN(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const rN={D:xC,DD:TC,DDD:SC,DDDD:NC,t:kC,tt:AC,ttt:_C,tttt:OC,T:RC,TT:PC,TTT:MC,TTTT:$C,f:IC,ff:LC,fff:BC,ffff:zC,F:DC,FF:jC,FFF:FC,FFFF:UC};class aN{static create(e,t={}){return new aN(e,t)}static parseFormat(e){let t=null,n="",i=!1;const r=[];for(let a=0;a<e.length;a++){const o=e.charAt(a);"'"===o?(n.length>0&&r.push({literal:i||/^\s+$/.test(n),val:n}),t=null,n="",i=!i):i||o===t?n+=o:(n.length>0&&r.push({literal:/^\s+$/.test(n),val:n}),n=o,t=o)}return n.length>0&&r.push({literal:i||/^\s+$/.test(n),val:n}),r}static macroTokenToFormatOpts(e){return rN[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return kS(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),i=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,r=(t,n)=>this.loc.extract(e,t,n),a=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",o=()=>n?function(e){return XS[e.hour<12?0:1]}(e):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),s=(t,i)=>n?function(e,t){return QS(t)[e.month-1]}(e,t):r(i?{month:t}:{month:t,day:"numeric"},"month"),l=(t,i)=>n?function(e,t){return JS(t)[e.weekday-1]}(e,t):r(i?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=aN.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?function(e,t){return nN(t)[e.year<0?0:1]}(e,t):r({era:t},"era");return iN(aN.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return i?r({day:"numeric"},"day"):this.num(e.day);case"dd":return i?r({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?r({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?r({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return s("short",!0);case"LLLL":return s("long",!0);case"LLLLL":return s("narrow",!0);case"M":return i?r({month:"numeric"},"month"):this.num(e.month);case"MM":return i?r({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return s("short",!1);case"MMMM":return s("long",!1);case"MMMMM":return s("narrow",!1);case"y":return i?r({year:"numeric"},"year"):this.num(e.year);case"yy":return i?r({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?r({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?r({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=aN.parseFormat(t),r=i.reduce(((e,{literal:t,val:n})=>t?e:e.concat(n)),[]),a=e.shiftTo(...r.map(n).filter((e=>e)));return iN(i,(e=>t=>{const i=n(t);return i?this.num(e.get(i),t.length):t})(a))}}class oN{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const sN=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function lN(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function cN(...e){return t=>e.reduce((([e,n,i],r)=>{const[a,o,s]=r(t,i);return[{...e,...a},o||n,s]}),[{},null,1]).slice(0,2)}function uN(e,...t){if(null==e)return[null,null];for(const[n,i]of t){const t=n.exec(e);if(t)return i(t)}return[null,null]}function dN(...e){return(t,n)=>{const i={};let r;for(r=0;r<e.length;r++)i[e[r]]=AS(t[n+r]);return[i,null,n+r]}}const hN=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,pN=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,mN=RegExp(`${pN.source}${`(?:${hN.source}?(?:\\[(${sN.source})\\])?)?`}`),fN=RegExp(`(?:T${mN.source})?`),gN=dN("weekYear","weekNumber","weekDay"),bN=dN("year","ordinal"),yN=RegExp(`${pN.source} ?(?:${hN.source}|(${sN.source}))?`),vN=RegExp(`(?: ${yN.source})?`);function wN(e,t,n){const i=e[t];return wS(i)?n:AS(i)}function EN(e,t){return[{hours:wN(e,t,0),minutes:wN(e,t+1,0),seconds:wN(e,t+2,0),milliseconds:OS(e[t+3])},null,t+4]}function xN(e,t){const n=!e[t]&&!e[t+1],i=qS(e[t+1],e[t+2]);return[{},n?null:cS.instance(i),t+3]}function TN(e,t){return[{},e[t]?YC.create(e[t]):null,t+1]}const CN=RegExp(`^T?${pN.source}$`),SN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function NN(e){const[t,n,i,r,a,o,s,l,c]=e,u="-"===t[0],d=l&&"-"===l[0],h=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:h(_S(n)),months:h(_S(i)),weeks:h(_S(r)),days:h(_S(a)),hours:h(_S(o)),minutes:h(_S(s)),seconds:h(_S(l),"-0"===l),milliseconds:h(OS(c),d)}]}const kN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function AN(e,t,n,i,r,a,o){const s={year:2===t.length?LS(AS(t)):AS(t),month:WS.indexOf(n)+1,day:AS(i),hour:AS(r),minute:AS(a)};return o&&(s.second=AS(o)),e&&(s.weekday=e.length>3?KS.indexOf(e)+1:GS.indexOf(e)+1),s}const _N=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ON(e){const[,t,n,i,r,a,o,s,l,c,u,d]=e,h=AN(t,r,i,n,a,o,s);let p;return p=l?kN[l]:c?0:qS(u,d),[h,new cS(p)]}const RN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,PN=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,MN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function $N(e){const[,t,n,i,r,a,o,s]=e;return[AN(t,r,i,n,a,o,s),cS.utcInstance]}function IN(e){const[,t,n,i,r,a,o,s]=e;return[AN(t,s,n,i,r,a,o),cS.utcInstance]}const DN=lN(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,fN),LN=lN(/(\d{4})-?W(\d\d)(?:-?(\d))?/,fN),jN=lN(/(\d{4})-?(\d{3})/,fN),qN=lN(mN),BN=cN((function(e,t){return[{year:wN(e,t),month:wN(e,t+1,1),day:wN(e,t+2,1)},null,t+3]}),EN,xN,TN),FN=cN(gN,EN,xN,TN),zN=cN(bN,EN,xN,TN),UN=cN(EN,xN,TN);const VN=cN(EN);const WN=lN(/(\d{4})-(\d\d)-(\d\d)/,vN),HN=lN(yN),QN=cN(EN,xN,TN);const KN="Invalid Duration",GN={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},YN={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...GN},JN=365.2425,XN=30.436875,ZN={years:{quarters:4,months:12,weeks:52.1775,days:JN,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:XN,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...GN},ek=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],tk=ek.slice(0).reverse();function nk(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new ak(i)}function ik(e,t){var n;let i=null!==(n=t.milliseconds)&&void 0!==n?n:0;for(const r of tk.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function rk(e,t){const n=ik(e,t)<0?-1:1;ek.reduceRight(((i,r)=>{if(wS(t[r]))return i;if(i){const a=t[i]*n,o=e[r][i],s=Math.floor(a/o);t[r]+=s*n,t[i]-=s*o*n}return r}),null),ek.reduce(((n,i)=>{if(wS(t[i]))return n;if(n){const r=t[n]%1;t[n]-=r,t[i]+=r*e[n][i]}return i}),null)}class ak{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?ZN:YN;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||sS.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return ak.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new bC("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new ak({values:FS(e,ak.normalizeUnit),loc:sS.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(ES(e))return ak.fromMillis(e);if(ak.isDuration(e))return e;if("object"==typeof e)return ak.fromObject(e);throw new bC(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return uN(e,[SN,NN])}(e);return n?ak.fromObject(n,t):ak.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return uN(e,[CN,VN])}(e);return n?ak.fromObject(n,t):ak.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new bC("need to specify a reason the Duration is invalid");const n=e instanceof oN?e:new oN(e,t);if(vS.throwOnInvalid)throw new mC(n);return new ak({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new gC(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?aN.create(this.loc,n).formatDurationFromString(this,e):KN}toHuman(e={}){if(!this.isValid)return KN;const t=ek.map((t=>{const n=this.values[t];return wS(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=RS(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1};return uA.fromMillis(t,{zone:"UTC"}).toISOTime(e)}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?ik(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=ak.fromDurationLike(e),n={};for(const i of ek)(SS(t.values,i)||SS(this.values,i))&&(n[i]=t.get(i)+this.get(i));return nk(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=ak.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=BS(e(this.values[n],n));return nk(this,{values:t},!0)}get(e){return this[ak.normalizeUnit(e)]}set(e){if(!this.isValid)return this;return nk(this,{values:{...this.values,...FS(e,ak.normalizeUnit)}})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:i}={}){return nk(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return rk(this.matrix,e),nk(this,{values:e},!0)}rescale(){if(!this.isValid)return this;return nk(this,{values:function(e){const t={};for(const[n,i]of Object.entries(e))0!==i&&(t[n]=i);return t}(this.normalize().shiftToAll().toObject())},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>ak.normalizeUnit(e)));const t={},n={},i=this.toObject();let r;for(const a of ek)if(e.indexOf(a)>=0){r=a;let e=0;for(const t in n)e+=this.matrix[t][a]*n[t],n[t]=0;ES(i[a])&&(e+=i[a]);const o=Math.trunc(e);t[a]=o,n[a]=(1e3*e-1e3*o)/1e3}else ES(i[a])&&(n[a]=i[a]);for(const a in n)0!==n[a]&&(t[r]+=a===r?n[a]:n[a]/this.matrix[r][a]);return rk(this.matrix,t),nk(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return nk(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const i of ek)if(t=this.values[i],n=e.values[i],!(void 0===t||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}}const ok="Invalid Interval";class sk{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new bC("need to specify a reason the Interval is invalid");const n=e instanceof oN?e:new oN(e,t);if(vS.throwOnInvalid)throw new pC(n);return new sk({invalid:n})}static fromDateTimes(e,t){const n=dA(e),i=dA(t),r=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?sk.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:sk.invalid("missing or invalid end"):sk.invalid("missing or invalid start")}(n,i);return null==r?new sk({start:n,end:i}):r}static after(e,t){const n=ak.fromDurationLike(t),i=dA(e);return sk.fromDateTimes(i,i.plus(n))}static before(e,t){const n=ak.fromDurationLike(t),i=dA(e);return sk.fromDateTimes(i.minus(n),i)}static fromISO(e,t){const[n,i]=(e||"").split("/",2);if(n&&i){let e,r,a,o;try{e=uA.fromISO(n,t),r=e.isValid}catch(i){r=!1}try{a=uA.fromISO(i,t),o=a.isValid}catch(i){o=!1}if(r&&o)return sk.fromDateTimes(e,a);if(r){const n=ak.fromISO(i,t);if(n.isValid)return sk.after(e,n)}else if(o){const e=ak.fromISO(n,t);if(e.isValid)return sk.before(a,e)}}return sk.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const t=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(t,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?sk.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(dA).filter((e=>this.contains(e))).sort(),n=[];let{s:i}=this,r=0;for(;i<this.e;){const e=t[r]||this.e,a=+e>+this.e?this.e:e;n.push(sk.fromDateTimes(i,a)),i=a,r+=1}return n}splitBy(e){const t=ak.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:i}=this,r=1;const a=[];for(;i<this.e;){const e=this.start.plus(t.mapUnits((e=>e*r)));n=+e>+this.e?this.e:e,a.push(sk.fromDateTimes(i,n)),i=n,r+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:sk.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return sk.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n]),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const i=[],r=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),a=Array.prototype.concat(...r).sort(((e,t)=>e.time-t.time));for(const o of a)n+="s"===o.type?1:-1,1===n?t=o.time:(t&&+t!=+o.time&&i.push(sk.fromDateTimes(t,o.time)),t=null);return sk.merge(i)}difference(...e){return sk.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ok}toLocaleString(e=xC,t={}){return this.isValid?aN.create(this.s.loc.clone(t),e).formatInterval(this):ok}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ok}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ok}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ok}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:ok}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):ak.invalid(this.invalidReason)}mapEndpoints(e){return sk.fromDateTimes(e(this.s),e(this.e))}}class lk{static hasDST(e=vS.defaultZone){const t=uA.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return YC.isValidZone(e)}static normalizeZone(e){return dS(e,vS.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:r="gregory"}={}){return(i||sS.create(t,n,r)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:r="gregory"}={}){return(i||sS.create(t,n,r)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||sS.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||sS.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return sS.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return sS.create(t,null,"gregory").eras(e)}static features(){return{relative:TS()}}}function ck(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(ak.fromMillis(i).as("days"))}function uk(e,t,n,i){let[r,a,o,s]=function(e,t,n){const i=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=ck(e,t);return(n-n%7)/7}],["days",ck]],r={},a=e;let o,s;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,r[l]=c(e,t),s=a.plus(r),s>t?(r[l]--,(e=a.plus(r))>t&&(s=e,r[l]--,e=a.plus(r))):e=s);return[e,r,s,o]}(e,t,n);const l=t-r,c=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(o<t&&(o=r.plus({[s]:1})),o!==r&&(a[s]=(a[s]||0)+l/(o-r)));const u=ak.fromObject(a,i);return c.length>0?ak.fromMillis(l,i).shiftTo(...c).plus(u):u}const dk={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},hk={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pk=dk.hanidec.replace(/[\[|\]]/g,"").split("");function mk({numberingSystem:e},t=""){return new RegExp(`${dk[e||"latn"]}${t}`)}const fk="missing Intl.DateTimeFormat.formatToParts support";function gk(e,t=(e=>e)){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(-1!==e[n].search(dk.hanidec))t+=pk.indexOf(e[n]);else for(const e in hk){const[n,r]=hk[e];i>=n&&i<=r&&(t+=i-n)}}return parseInt(t,10)}return t}(e))}}const bk=`[ ${String.fromCharCode(160)}]`,yk=new RegExp(bk,"g");function vk(e){return e.replace(/\./g,"\\.?").replace(yk,bk)}function wk(e){return e.replace(/\./g,"").replace(yk," ").toLowerCase()}function Ek(e,t){return null===e?null:{regex:RegExp(e.map(vk).join("|")),deser:([n])=>e.findIndex((e=>wk(n)===wk(e)))+t}}function xk(e,t){return{regex:e,deser:([,e,t])=>qS(e,t),groups:t}}function Tk(e){return{regex:e,deser:([e])=>e}}const Ck={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Sk=null;function Nk(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=Ak(aN.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}function kk(e,t,n){const i=Nk(aN.parseFormat(n),e),r=i.map((t=>function(e,t){const n=mk(t),i=mk(t,"{2}"),r=mk(t,"{3}"),a=mk(t,"{4}"),o=mk(t,"{6}"),s=mk(t,"{1,2}"),l=mk(t,"{1,3}"),c=mk(t,"{1,6}"),u=mk(t,"{1,9}"),d=mk(t,"{2,4}"),h=mk(t,"{4,6}"),p=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},m=(m=>{if(e.literal)return p(m);switch(m.val){case"G":return Ek(t.eras("short"),0);case"GG":return Ek(t.eras("long"),0);case"y":return gk(c);case"yy":case"kk":return gk(d,LS);case"yyyy":case"kkkk":return gk(a);case"yyyyy":return gk(h);case"yyyyyy":return gk(o);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return gk(s);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return gk(i);case"MMM":return Ek(t.months("short",!0),1);case"MMMM":return Ek(t.months("long",!0),1);case"LLL":return Ek(t.months("short",!1),1);case"LLLL":return Ek(t.months("long",!1),1);case"o":case"S":return gk(l);case"ooo":case"SSS":return gk(r);case"u":return Tk(u);case"uu":return Tk(s);case"uuu":case"E":case"c":return gk(n);case"a":return Ek(t.meridiems(),0);case"EEE":return Ek(t.weekdays("short",!1),1);case"EEEE":return Ek(t.weekdays("long",!1),1);case"ccc":return Ek(t.weekdays("short",!0),1);case"cccc":return Ek(t.weekdays("long",!0),1);case"Z":case"ZZ":return xk(new RegExp(`([+-]${s.source})(?::(${i.source}))?`),2);case"ZZZ":return xk(new RegExp(`([+-]${s.source})(${i.source})?`),2);case"z":return Tk(/[a-z_+-/]{1,256}?/i);case" ":return Tk(/[^\S\n\r]/);default:return p(m)}})(e)||{invalidReason:fk};return m.token=e,m}(t,e))),a=r.find((e=>e.invalidReason));if(a)return{input:t,tokens:i,invalidReason:a.invalidReason};{const[e,n]=function(e){const t=e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"");return[`^${t}$`,e]}(r),a=RegExp(e,"i"),[o,s]=function(e,t,n){const i=e.match(t);if(i){const e={};let t=1;for(const r in n)if(SS(n,r)){const a=n[r],o=a.groups?a.groups+1:1;!a.literal&&a.token&&(e[a.token.val[0]]=a.deser(i.slice(t,t+o))),t+=o}return[i,e]}return[i,{}]}(t,a,n),[l,c,u]=s?function(e){let t,n=null;wS(e.z)||(n=YC.create(e.z)),wS(e.Z)||(n||(n=new cS(e.Z)),t=e.Z),wS(e.q)||(e.M=3*(e.q-1)+1),wS(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),wS(e.u)||(e.S=OS(e.u));const i=Object.keys(e).reduce(((t,n)=>{const i=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return i&&(t[i]=e[n]),t}),{});return[i,n,t]}(s):[null,null,void 0];if(SS(s,"a")&&SS(s,"H"))throw new fC("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:a,rawMatches:o,matches:s,result:l,zone:c,specificOffset:u}}}function Ak(e,t){if(!e)return null;const n=aN.create(t,e).dtFormatter((Sk||(Sk=uA.fromMillis(1555555555555)),Sk)),i=n.formatToParts(),r=n.resolvedOptions();return i.map((t=>function(e,t,n){const{type:i,value:r}=e;if("literal"===i){const e=/^\s+$/.test(r);return{literal:!e,val:e?" ":r}}const a=t[i];let o=i;"hour"===i&&(o=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let s=Ck[o];if("object"==typeof s&&(s=s[a]),s)return{literal:!1,val:s}}(t,e,r)))}const _k=[0,31,59,90,120,151,181,212,243,273,304,334],Ok=[0,31,60,91,121,152,182,213,244,274,305,335];function Rk(e,t){return new oN("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Pk(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return 0===r?7:r}function Mk(e,t,n){return n+(PS(e)?Ok:_k)[t-1]}function $k(e,t){const n=PS(e)?Ok:_k,i=n.findIndex((e=>e<t));return{month:i+1,day:t-n[i]}}function Ik(e){const{year:t,month:n,day:i}=e,r=Mk(t,n,i),a=Pk(t,n,i);let o,s=Math.floor((r-a+10)/7);return s<1?(o=t-1,s=DS(o)):s>DS(t)?(o=t+1,s=1):o=t,{weekYear:o,weekNumber:s,weekday:a,...US(e)}}function Dk(e){const{weekYear:t,weekNumber:n,weekday:i}=e,r=Pk(t,1,4),a=MS(t);let o,s=7*n+i-r-3;s<1?(o=t-1,s+=MS(o)):s>a?(o=t+1,s-=MS(t)):o=t;const{month:l,day:c}=$k(o,s);return{year:o,month:l,day:c,...US(e)}}function Lk(e){const{year:t,month:n,day:i}=e;return{year:t,ordinal:Mk(t,n,i),...US(e)}}function jk(e){const{year:t,ordinal:n}=e,{month:i,day:r}=$k(t,n);return{year:t,month:i,day:r,...US(e)}}function qk(e){const t=xS(e.year),n=NS(e.month,1,12),i=NS(e.day,1,$S(e.year,e.month));return t?n?!i&&Rk("day",e.day):Rk("month",e.month):Rk("year",e.year)}function Bk(e){const{hour:t,minute:n,second:i,millisecond:r}=e,a=NS(t,0,23)||24===t&&0===n&&0===i&&0===r,o=NS(n,0,59),s=NS(i,0,59),l=NS(r,0,999);return a?o?s?!l&&Rk("millisecond",r):Rk("second",i):Rk("minute",n):Rk("hour",t)}const Fk="Invalid DateTime",zk=864e13;function Uk(e){return new oN("unsupported zone",`the zone "${e.name}" is not supported`)}function Vk(e){return null===e.weekData&&(e.weekData=Ik(e.c)),e.weekData}function Wk(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new uA({...n,...t,old:n})}function Hk(e,t,n){let i=e-60*t*1e3;const r=n.offset(i);if(t===r)return[i,t];i-=60*(r-t)*1e3;const a=n.offset(i);return r===a?[i,r]:[e-60*Math.min(r,a)*1e3,Math.max(r,a)]}function Qk(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Kk(e,t,n){return Hk(IS(e),t,n)}function Gk(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),r=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),a={...e.c,year:i,month:r,day:Math.min(e.c.day,$S(i,r))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},o=ak.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),s=IS(a);let[l,c]=Hk(s,n,e.zone);return 0!==o&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Yk(e,t,n,i,r,a){const{setZone:o,zone:s}=n;if(e&&0!==Object.keys(e).length||t){const i=t||s,r=uA.fromObject(e,{...n,zone:i,specificOffset:a});return o?r:r.setZone(s)}return uA.invalid(new oN("unparsable",`the input "${r}" can't be parsed as ${i}`))}function Jk(e,t,n=!0){return e.isValid?aN.create(sS.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Xk(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=kS(e.c.year,n?6:4),t?(i+="-",i+=kS(e.c.month),i+="-",i+=kS(e.c.day)):(i+=kS(e.c.month),i+=kS(e.c.day)),i}function Zk(e,t,n,i,r,a){let o=kS(e.c.hour);return t?(o+=":",o+=kS(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=":")):o+=kS(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=kS(e.c.second),0===e.c.millisecond&&i||(o+=".",o+=kS(e.c.millisecond,3))),r&&(e.isOffsetFixed&&0===e.offset&&!a?o+="Z":e.o<0?(o+="-",o+=kS(Math.trunc(-e.o/60)),o+=":",o+=kS(Math.trunc(-e.o%60))):(o+="+",o+=kS(Math.trunc(e.o/60)),o+=":",o+=kS(Math.trunc(e.o%60)))),a&&(o+="["+e.zone.ianaName+"]"),o}const eA={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},tA={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},nA={ordinal:1,hour:0,minute:0,second:0,millisecond:0},iA=["year","month","day","hour","minute","second","millisecond"],rA=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],aA=["year","ordinal","hour","minute","second","millisecond"];function oA(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new gC(e);return t}function sA(e,t){const n=dS(t.zone,vS.defaultZone),i=sS.fromObject(t),r=vS.now();let a,o;if(wS(e.year))a=r;else{for(const n of iA)wS(e[n])&&(e[n]=eA[n]);const t=qk(e)||Bk(e);if(t)return uA.invalid(t);const i=n.offset(r);[a,o]=Kk(e,i,n)}return new uA({ts:a,zone:n,loc:i,o:o})}function lA(e,t,n){const i=!!wS(n.round)||n.round,r=(e,r)=>{e=RS(e,i||n.calendary?0:2,!0);return t.loc.clone(n).relFormatter(n).format(e,r)},a=i=>n.calendary?t.hasSame(e,i)?0:t.startOf(i).diff(e.startOf(i),i).get(i):t.diff(e,i).get(i);if(n.unit)return r(a(n.unit),n.unit);for(const o of n.units){const e=a(o);if(Math.abs(e)>=1)return r(e,o)}return r(e>t?-0:0,n.units[n.units.length-1])}function cA(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}class uA{constructor(e){const t=e.zone||vS.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new oN("invalid input"):null)||(t.isValid?null:Uk(t));this.ts=wS(e.ts)?vS.now():e.ts;let i=null,r=null;if(!n){if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,r]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);i=Qk(this.ts,e),n=Number.isNaN(i.year)?new oN("invalid input"):null,i=n?null:i,r=n?null:e}}this._zone=t,this.loc=e.loc||sS.create(),this.invalid=n,this.weekData=null,this.c=i,this.o=r,this.isLuxonDateTime=!0}static now(){return new uA({})}static local(){const[e,t]=cA(arguments),[n,i,r,a,o,s,l]=t;return sA({year:n,month:i,day:r,hour:a,minute:o,second:s,millisecond:l},e)}static utc(){const[e,t]=cA(arguments),[n,i,r,a,o,s,l]=t;return e.zone=cS.utcInstance,sA({year:n,month:i,day:r,hour:a,minute:o,second:s,millisecond:l},e)}static fromJSDate(e,t={}){const n=function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?e.valueOf():NaN;if(Number.isNaN(n))return uA.invalid("invalid input");const i=dS(t.zone,vS.defaultZone);return i.isValid?new uA({ts:n,zone:i,loc:sS.fromObject(t)}):uA.invalid(Uk(i))}static fromMillis(e,t={}){if(ES(e))return e<-zk||e>zk?uA.invalid("Timestamp out of range"):new uA({ts:e,zone:dS(t.zone,vS.defaultZone),loc:sS.fromObject(t)});throw new bC(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(ES(e))return new uA({ts:1e3*e,zone:dS(t.zone,vS.defaultZone),loc:sS.fromObject(t)});throw new bC("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=dS(t.zone,vS.defaultZone);if(!n.isValid)return uA.invalid(Uk(n));const i=vS.now(),r=wS(t.specificOffset)?n.offset(i):t.specificOffset,a=FS(e,oA),o=!wS(a.ordinal),s=!wS(a.year),l=!wS(a.month)||!wS(a.day),c=s||l,u=a.weekYear||a.weekNumber,d=sS.fromObject(t);if((c||o)&&u)throw new fC("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new fC("Can't mix ordinal dates with month/day");const h=u||a.weekday&&!c;let p,m,f=Qk(i,r);h?(p=rA,m=tA,f=Ik(f)):o?(p=aA,m=nA,f=Lk(f)):(p=iA,m=eA);let g=!1;for(const T of p){wS(a[T])?a[T]=g?m[T]:f[T]:g=!0}const b=h?function(e){const t=xS(e.weekYear),n=NS(e.weekNumber,1,DS(e.weekYear)),i=NS(e.weekday,1,7);return t?n?!i&&Rk("weekday",e.weekday):Rk("week",e.week):Rk("weekYear",e.weekYear)}(a):o?function(e){const t=xS(e.year),n=NS(e.ordinal,1,MS(e.year));return t?!n&&Rk("ordinal",e.ordinal):Rk("year",e.year)}(a):qk(a),y=b||Bk(a);if(y)return uA.invalid(y);const v=h?Dk(a):o?jk(a):a,[w,E]=Kk(v,r,n),x=new uA({ts:w,zone:n,o:E,loc:d});return a.weekday&&c&&e.weekday!==x.weekday?uA.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${x.toISO()}`):x}static fromISO(e,t={}){const[n,i]=function(e){return uN(e,[DN,BN],[LN,FN],[jN,zN],[qN,UN])}(e);return Yk(n,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,i]=function(e){return uN(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[_N,ON])}(e);return Yk(n,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,i]=function(e){return uN(e,[RN,$N],[PN,$N],[MN,IN])}(e);return Yk(n,i,t,"HTTP",t)}static fromFormat(e,t,n={}){if(wS(e)||wS(t))throw new bC("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:r=null}=n,a=sS.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0}),[o,s,l,c]=function(e,t,n){const{result:i,zone:r,specificOffset:a,invalidReason:o}=kk(e,t,n);return[i,r,a,o]}(a,e,t);return c?uA.invalid(c):Yk(o,s,n,`format ${t}`,e,l)}static fromString(e,t,n={}){return uA.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,i]=function(e){return uN(e,[WN,BN],[HN,QN])}(e);return Yk(n,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new bC("need to specify a reason the DateTime is invalid");const n=e instanceof oN?e:new oN(e,t);if(vS.throwOnInvalid)throw new hC(n);return new uA({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=Ak(e,sS.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){return Nk(aN.parseFormat(e),sS.fromObject(t)).map((e=>e.val)).join("")}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Vk(this).weekYear:NaN}get weekNumber(){return this.isValid?Vk(this).weekNumber:NaN}get weekday(){return this.isValid?Vk(this).weekday:NaN}get ordinal(){return this.isValid?Lk(this.c).ordinal:NaN}get monthShort(){return this.isValid?lk.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lk.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lk.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lk.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=IS(this.c),i=this.zone.offset(n-e),r=this.zone.offset(n+e),a=this.zone.offset(n-i*t),o=this.zone.offset(n-r*t);if(a===o)return[this];const s=n-a*t,l=n-o*t,c=Qk(s,a),u=Qk(l,o);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[Wk(this,{ts:s}),Wk(this,{ts:l})]:[this]}get isInLeapYear(){return PS(this.year)}get daysInMonth(){return $S(this.year,this.month)}get daysInYear(){return this.isValid?MS(this.year):NaN}get weeksInWeekYear(){return this.isValid?DS(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:i}=aN.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(cS.instance(e),t)}toLocal(){return this.setZone(vS.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if((e=dS(e,vS.defaultZone)).equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[i]=Kk(n,t,e)}return Wk(this,{ts:i,zone:e})}return uA.invalid(Uk(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return Wk(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=FS(e,oA),n=!wS(t.weekYear)||!wS(t.weekNumber)||!wS(t.weekday),i=!wS(t.ordinal),r=!wS(t.year),a=!wS(t.month)||!wS(t.day),o=r||a,s=t.weekYear||t.weekNumber;if((o||i)&&s)throw new fC("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&i)throw new fC("Can't mix ordinal dates with month/day");let l;n?l=Dk({...Ik(this.c),...t}):wS(t.ordinal)?(l={...this.toObject(),...t},wS(t.day)&&(l.day=Math.min($S(l.year,l.month),l.day))):l=jk({...Lk(this.c),...t});const[c,u]=Kk(l,this.o,this.zone);return Wk(this,{ts:c,o:u})}plus(e){if(!this.isValid)return this;return Wk(this,Gk(this,ak.fromDurationLike(e)))}minus(e){if(!this.isValid)return this;return Wk(this,Gk(this,ak.fromDurationLike(e).negate()))}startOf(e){if(!this.isValid)return this;const t={},n=ak.normalizeUnit(e);switch(n){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===n&&(t.weekday=1),"quarters"===n){const e=Math.ceil(this.month/3);t.month=3*(e-1)+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?aN.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Fk}toLocaleString(e=xC,t={}){return this.isValid?aN.create(this.loc.clone(t),e).formatDateTime(this):Fk}toLocaleParts(e={}){return this.isValid?aN.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const a="extended"===e;let o=Xk(this,a);return o+="T",o+=Zk(this,a,t,n,i,r),o}toISODate({format:e="extended"}={}){return this.isValid?Xk(this,"extended"===e):null}toISOWeekDate(){return Jk(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:r=!1,format:a="extended"}={}){if(!this.isValid)return null;return(i?"T":"")+Zk(this,"extended"===a,t,e,n,r)}toRFC2822(){return Jk(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Jk(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Xk(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(n&&(i+=" "),t?i+="z":e&&(i+="ZZ")),Jk(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Fk}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return ak.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},r=(s=t,Array.isArray(s)?s:[s]).map(ak.normalizeUnit),a=e.valueOf()>this.valueOf(),o=uk(a?this:e,a?e:this,r,i);var s;return a?o.negate():o}diffNow(e="milliseconds",t={}){return this.diff(uA.now(),e,t)}until(e){return this.isValid?sk.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;const n=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t)<=n&&n<=i.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||uA.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],r=e.unit;return Array.isArray(e.unit)&&(i=e.unit,r=void 0),lA(t,this.plus(n),{...e,numeric:"always",units:i,unit:r})}toRelativeCalendar(e={}){return this.isValid?lA(e.base||uA.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(uA.isDateTime))throw new bC("min requires all arguments be DateTimes");return CS(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(uA.isDateTime))throw new bC("max requires all arguments be DateTimes");return CS(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:i=null,numberingSystem:r=null}=n;return kk(sS.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return uA.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return xC}static get DATE_MED(){return TC}static get DATE_MED_WITH_WEEKDAY(){return CC}static get DATE_FULL(){return SC}static get DATE_HUGE(){return NC}static get TIME_SIMPLE(){return kC}static get TIME_WITH_SECONDS(){return AC}static get TIME_WITH_SHORT_OFFSET(){return _C}static get TIME_WITH_LONG_OFFSET(){return OC}static get TIME_24_SIMPLE(){return RC}static get TIME_24_WITH_SECONDS(){return PC}static get TIME_24_WITH_SHORT_OFFSET(){return MC}static get TIME_24_WITH_LONG_OFFSET(){return $C}static get DATETIME_SHORT(){return IC}static get DATETIME_SHORT_WITH_SECONDS(){return DC}static get DATETIME_MED(){return LC}static get DATETIME_MED_WITH_SECONDS(){return jC}static get DATETIME_MED_WITH_WEEKDAY(){return qC}static get DATETIME_FULL(){return BC}static get DATETIME_FULL_WITH_SECONDS(){return FC}static get DATETIME_HUGE(){return zC}static get DATETIME_HUGE_WITH_SECONDS(){return UC}}function dA(e){if(uA.isDateTime(e))return e;if(e&&e.valueOf&&ES(e.valueOf()))return uA.fromJSDate(e);if(e&&"object"==typeof e)return uA.fromObject(e);throw new bC(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const hA=({timerInterval:e,timerKey:t,timerDuration:n,timerActive:i,unsetTimer:r})=>{const a=n?(n-Date.now())/1e3:1*e;return X.jsx(uC,{isPlaying:i,size:300,strokeWidth:22,colors:["#004777","#F7B801","#A30000","#A30000"],colorsTime:[7,5,2,0],rotation:"clockwise",duration:1*e,initialRemainingTime:a>0?a:1*e,onComplete:()=>{r()},children:({remainingTime:e})=>((e,t)=>{const n=ak.fromMillis(1e3*e).toFormat("mm:ss");return X.jsxs("div",{className:"time-wrapper",children:[X.jsx("div",{children:t?"NEXT BREAK IS IN":"CLICK PLAY BUTTON"}),X.jsx("div",{className:"timer-digits",children:X.jsx("div",{children:n})})]})})(e,i)},t)},pA=({timerStatus:e,timerHandler:t})=>X.jsx(xx,{color:"success",expand:"full",onClick:t,children:X.jsx(Zx,{icon:"running"===e?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M224 432h-80V80h80zM368 432h-80V80h80z'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M96 448l320-192L96 64v384z'/></svg>",size:"large"})}),mA=()=>X.jsxs(dx,{contentId:"main-content",children:[X.jsx(ox,{children:X.jsx(yx,{color:"tertiary",children:X.jsx(bx,{children:"Menu"})})}),X.jsxs(rx,{className:"ion-padding",children:[X.jsxs(ux,{children:[X.jsx(px,{children:X.jsxs(Tx,{lines:"full",button:!0,routerLink:"/timer",children:[X.jsx(Zx,{slot:"start",icon:bT}),X.jsx(cx,{children:"Start Your Workout"})]})}),X.jsx(px,{children:X.jsxs(Tx,{lines:"full",button:!0,href:"https://backpackgym.com/contact",children:[X.jsx(Zx,{slot:"start",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z'/></svg>"}),X.jsx(cx,{children:"Video Tutorial"})]})}),X.jsx(px,{children:X.jsxs(Tx,{lines:"full",button:!0,href:"https://backpackgym.com/contact",children:[X.jsx(Zx,{slot:"start",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448.67 154.45L274.1 68.2a41.1 41.1 0 00-36.2 0L63.33 154.45A55.6 55.6 0 0032 204.53v184.61c0 30.88 25.42 56 56.67 56h334.66c31.25 0 56.67-25.12 56.67-56V204.53a55.6 55.6 0 00-31.33-50.08zM252.38 96.82a8.22 8.22 0 017.24 0L429 180.48l-172 85a8.22 8.22 0 01-7.24 0L80.35 181.81z'/></svg>"}),X.jsx(cx,{children:"Contact"})]})}),X.jsx(px,{children:X.jsx(Tx,{lines:"none",children:X.jsxs(nx,{slot:"end",children:[X.jsx(xx,{href:"https://facebook.com/backpackgym",children:X.jsx(Zx,{slot:"icon-only",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M480 257.35c0-123.7-100.3-224-224-224s-224 100.3-224 224c0 111.8 81.9 204.47 189 221.29V322.12h-56.89v-64.77H221V208c0-56.13 33.45-87.16 84.61-87.16 24.51 0 50.15 4.38 50.15 4.38v55.13H327.5c-27.81 0-36.51 17.26-36.51 35v42h62.12l-9.92 64.77H291v156.54c107.1-16.81 189-109.48 189-221.31z' fill-rule='evenodd'/></svg>"})}),X.jsx(xx,{href:"https://facebook.com/backpackgym",children:X.jsx(Zx,{slot:"icon-only",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M349.33 69.33a93.62 93.62 0 0193.34 93.34v186.66a93.62 93.62 0 01-93.34 93.34H162.67a93.62 93.62 0 01-93.34-93.34V162.67a93.62 93.62 0 0193.34-93.34h186.66m0-37.33H162.67C90.8 32 32 90.8 32 162.67v186.66C32 421.2 90.8 480 162.67 480h186.66C421.2 480 480 421.2 480 349.33V162.67C480 90.8 421.2 32 349.33 32z'/><path d='M377.33 162.67a28 28 0 1128-28 27.94 27.94 0 01-28 28zM256 181.33A74.67 74.67 0 11181.33 256 74.75 74.75 0 01256 181.33m0-37.33a112 112 0 10112 112 112 112 0 00-112-112z'/></svg>"})})]})})}),X.jsx(px,{children:X.jsx(Tx,{className:"bpg-block",onClick:()=>{window.location.href="https://backpackgym.com"}})})]}),X.jsx("div",{slot:"fixed",className:"app-info",children:X.jsxs("p",{children:["Presented by Backpack Gym ",X.jsx("br",{}),"App version 1.0.1"]})})]})]}),fA=()=>X.jsxs(Gx,{slot:"bottom",color:"warning",children:[X.jsxs(Hx,{className:"my-tab-button",tab:"home",href:"/home",children:[X.jsx(Zx,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M261.56 101.28a8 8 0 00-11.06 0L66.4 277.15a8 8 0 00-2.47 5.79L63.9 448a32 32 0 0032 32H192a16 16 0 0016-16V328a8 8 0 018-8h80a8 8 0 018 8v136a16 16 0 0016 16h96.06a32 32 0 0032-32V282.94a8 8 0 00-2.47-5.79z'/><path d='M490.91 244.15l-74.8-71.56V64a16 16 0 00-16-16h-48a16 16 0 00-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0043 267.56L250.5 69.28a8 8 0 0111.06 0l207.52 198.28a16 16 0 0022.59-.44c6.14-6.36 5.63-16.86-.76-22.97z'/></svg>"}),X.jsx(cx,{children:"Home"}),X.jsx(tx,{color:"danger",children:"1"})]}),X.jsxs(Hx,{className:"my-tab-button",tab:"timer",href:"/timer",children:[X.jsx(Zx,{icon:bT}),X.jsx(cx,{children:"Timer"})]}),X.jsxs(Hx,{className:"my-tab-button",tab:"settings",href:"/timer-configuration",children:[X.jsx(Zx,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><path d='M470.39 300l-.47-.38-31.56-24.75a16.11 16.11 0 01-6.1-13.33v-11.56a16 16 0 016.11-13.22L469.92 212l.47-.38a26.68 26.68 0 005.9-34.06l-42.71-73.9a1.59 1.59 0 01-.13-.22A26.86 26.86 0 00401 92.14l-.35.13-37.1 14.93a15.94 15.94 0 01-14.47-1.29q-4.92-3.1-10-5.86a15.94 15.94 0 01-8.19-11.82l-5.59-39.59-.12-.72A27.22 27.22 0 00298.76 26h-85.52a26.92 26.92 0 00-26.45 22.39l-.09.56-5.57 39.67a16 16 0 01-8.13 11.82 175.21 175.21 0 00-10 5.82 15.92 15.92 0 01-14.43 1.27l-37.13-15-.35-.14a26.87 26.87 0 00-32.48 11.34l-.13.22-42.77 73.95a26.71 26.71 0 005.9 34.1l.47.38 31.56 24.75a16.11 16.11 0 016.1 13.33v11.56a16 16 0 01-6.11 13.22L42.08 300l-.47.38a26.68 26.68 0 00-5.9 34.06l42.71 73.9a1.59 1.59 0 01.13.22 26.86 26.86 0 0032.45 11.3l.35-.13 37.07-14.93a15.94 15.94 0 0114.47 1.29q4.92 3.11 10 5.86a15.94 15.94 0 018.19 11.82l5.56 39.59.12.72A27.22 27.22 0 00213.24 486h85.52a26.92 26.92 0 0026.45-22.39l.09-.56 5.57-39.67a16 16 0 018.18-11.82c3.42-1.84 6.76-3.79 10-5.82a15.92 15.92 0 0114.43-1.27l37.13 14.95.35.14a26.85 26.85 0 0032.48-11.34 2.53 2.53 0 01.13-.22l42.71-73.89a26.7 26.7 0 00-5.89-34.11zm-134.48-40.24a80 80 0 11-83.66-83.67 80.21 80.21 0 0183.66 83.67z'/></svg>"}),X.jsx(cx,{children:"Settings"})]})]}),gA=({timerStatus:e,unsetTimer:t})=>X.jsx(xx,{color:"danger",expand:"full",disabled:"running"===e,onClick:t,children:X.jsx(Zx,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M434.67 285.59v-29.8c0-98.73-80.24-178.79-179.2-178.79a179 179 0 00-140.14 67.36m-38.53 82v29.8C76.8 355 157 435 256 435a180.45 180.45 0 00140-66.92' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M32 256l44-44 46 44M480 256l-44 44-46-44' class='ionicon-fill-none ionicon-stroke-width'/></svg>",size:"large"})}),bA=e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e),yA=bA("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});var vA;yA.addPlatform,yA.setPlatform,function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(vA||(vA={}));class wA extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const EA=e=>{var t,n,i,r,a;const o=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},l=s.Plugins=s.Plugins||{},c=e.CapacitorPlatforms,u=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==o?o.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),d=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==u()),h=(null===(i=null==c?void 0:c.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(e=>{const t=m.get(e);return!!(null==t?void 0:t.platforms.has(u()))||!!p(e)}),p=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.getPluginHeader)||(e=>{var t;return null===(t=s.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),m=new Map,f=(null===(a=null==c?void 0:c.currentPlatform)||void 0===a?void 0:a.registerPlugin)||((e,t={})=>{const n=m.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const i=u(),r=p(e);let a;const c=n=>{let l;const c=(...c)=>{const u=(async()=>(!a&&i in t?a=a="function"==typeof t[i]?await t[i]():t[i]:null!==o&&!a&&"web"in t&&(a=a="function"==typeof t.web?await t.web():t.web),a))().then((t=>{const a=((t,n)=>{var a,o;if(!r){if(t)return null===(o=t[n])||void 0===o?void 0:o.bind(t);throw new wA(`"${e}" plugin is not implemented on ${i}`,vA.Unimplemented)}{const i=null==r?void 0:r.methods.find((e=>n===e.name));if(i)return"promise"===i.rtype?t=>s.nativePromise(e,n.toString(),t):(t,i)=>s.nativeCallback(e,n.toString(),t,i);if(t)return null===(a=t[n])||void 0===a?void 0:a.bind(t)}})(t,n);if(a){const e=a(...c);return l=null==e?void 0:e.remove,e}throw new wA(`"${e}.${n}()" is not implemented on ${i}`,vA.Unimplemented)}));return"addListener"===n&&(u.remove=async()=>l()),u};return c.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(c,"name",{value:n,writable:!1,configurable:!1}),c},d=c("addListener"),h=c("removeListener"),f=(e,t)=>{const n=d({eventName:e},t),i=async()=>{const i=await n;h({eventName:e,callbackId:i},t)},r=new Promise((e=>n.then((()=>e({remove:i})))));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()},r},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return r?f:d;case"removeListener":return h;default:return c(t)}}});return l[e]=g,m.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(t),...r?[i]:[]])}),g});return s.convertFileSrc||(s.convertFileSrc=e=>e),s.getPlatform=u,s.handleError=t=>e.console.error(t),s.isNativePlatform=d,s.isPluginAvailable=h,s.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),s.registerPlugin=f,s.Exception=wA,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},xA=e=>e.Capacitor=EA(e),TA=xA("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),CA=TA.registerPlugin;TA.Plugins;class SA{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);const i=async()=>this.removeListener(e,t),r=Promise.resolve({remove:i});return Object.defineProperty(r,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),r}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach((e=>e(t)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new TA.Exception(e,vA.Unimplemented)}unavailable(e="not available"){return new TA.Exception(e,vA.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const i=n.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}t("W",SA);const NA=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),kA=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class AA extends SA{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach((e=>{if(e.length<=0)return;let[n,i]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=kA(n).trim(),i=kA(i).trim(),t[n]=i})),t}async setCookie(e){try{const t=NA(e.key),n=NA(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${i}; path=${r}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}CA("CapacitorCookies",{web:()=>new AA});const _A=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=((e={})=>{const t=Object.keys(e),n=Object.keys(e).map((e=>e.toLocaleLowerCase()));return n.reduce(((n,i,r)=>(n[i]=e[t[r]],n)),{})})(e.headers),r=i["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,i]of Object.entries(e.data||{}))t.set(n,i);n.body=t.toString()}else if(r.includes("multipart/form-data")){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,n)=>{t.append(n,e)}));else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(r.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class OA extends SA{async request(e){const t=_A(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce(((e,n)=>{const[i,r]=n;let a,o;return Array.isArray(r)?(o="",r.forEach((e=>{a=t?encodeURIComponent(e):e,o+=`${i}=${a}&`})),o.slice(0,-1)):(a=t?encodeURIComponent(r):r,o=`${i}=${a}`),`${e}&${o}`}),"").substr(1):null)(e.params,e.shouldEncodeUrlParams),i=n?`${e.url}?${n}`:e.url,r=await fetch(i,t),a=r.headers.get("content-type")||"";let o,s,{responseType:l="text"}=r.ok?e:{};switch(a.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":s=await r.blob(),o=await(async e=>new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>{const e=i.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},i.onerror=e=>n(e),i.readAsDataURL(e)})))(s);break;case"json":o=await r.json();break;default:o=await r.text()}const c={};return r.headers.forEach(((e,t)=>{c[t]=e})),{data:o,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}var RA;CA("CapacitorHttp",{web:()=>new OA}),function(e){e[e.Sunday=1]="Sunday",e[e.Monday=2]="Monday",e[e.Tuesday=3]="Tuesday",e[e.Wednesday=4]="Wednesday",e[e.Thursday=5]="Thursday",e[e.Friday=6]="Friday",e[e.Saturday=7]="Saturday"}(RA||(RA={}));const PA=CA("LocalNotifications",{web:()=>vp((()=>n.import("./web-legacy-d06c2464.js"))).then((e=>new e.LocalNotificationsWeb))}),MA=async e=>{try{if("granted"!==(await PA.requestPermissions()).display)throw new Error("Permissions haven't been granted");await PA.schedule({notifications:[{title:"Friendly Reminder",body:"Get up and workout",id:1,schedule:{at:new Date(Date.now()+e)},extra:{data:"Pass data to your handler"},iconColor:"#FF7F50",sound:"birds.wav"}]})}catch(t){console.log(t)}},$A=()=>{const{timerInterval:e,timerStatus:t,timerKey:n,timerDuration:i,timerPausedTime:r,setTimerStatus:a,setTimerDuration:o,setTimerPausedTime:s,unsetTimer:l}=XT();return X.jsxs(X.Fragment,{children:[X.jsx(mA,{}),X.jsxs(Bx,{id:"main-content",children:[X.jsx(ox,{children:X.jsx(ox,{children:X.jsxs(yx,{color:"warning",children:[X.jsx(nx,{slot:"start",children:X.jsx(hx,{})}),X.jsx(bx,{children:"Timer"})]})})}),X.jsx(rx,{children:X.jsxs(ax,{children:[X.jsx(fx,{children:X.jsx(ix,{className:"timer-content",children:X.jsx(hA,{timerKey:n,timerInterval:e,timerDuration:r?Date.now()+r:i,timerActive:"running"===t,unsetTimer:l})})}),X.jsxs(fx,{className:"ion-text-center",children:[X.jsx(ix,{children:X.jsx(pA,{timerHandler:"running"===t?()=>{a("pause"),s(),(async()=>{PA.cancel({notifications:[{id:1}]})})()}:()=>{r?(o(r),MA(r)):(o(1e3*e),MA(1e3*e)),a("running")},timerStatus:t})}),X.jsx(ix,{children:X.jsx(gA,{unsetTimer:l,timerStatus:t})})]})]})}),X.jsx(fA,{})]})]})};class IA{constructor(e){this.sqlite=e,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(e){return Promise.reject(e)}}async saveToStore(e){try{return await this.sqlite.saveToStore({database:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToLocalDisk(e){try{return await this.sqlite.saveToLocalDisk({database:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async getFromLocalDiskToStore(e){const t=null==e||e;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async echo(e){try{const t=await this.sqlite.echo({value:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isSecretStored(){try{const e=await this.sqlite.isSecretStored();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async setEncryptionSecret(e){try{return await this.sqlite.setEncryptionSecret({passphrase:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async changeEncryptionSecret(e,t){try{return await this.sqlite.changeEncryptionSecret({passphrase:e,oldpassphrase:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(e){return Promise.reject(e)}}async checkEncryptionSecret(e){try{const t=await this.sqlite.checkEncryptionSecret({passphrase:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async addUpgradeStatement(e,t,n){const i={toVersion:t,statements:n};try{return e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:e,upgrade:[i]}),Promise.resolve()}catch(r){return Promise.reject(r)}}async createConnection(e,t,n,i,r){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.createConnection({database:e,encrypted:t,mode:n,version:i,readonly:r});const a=new DA(e,r,this.sqlite),o=r?`RO_${e}`:`RW_${e}`;return this._connectionDict.set(o,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(e,t){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.closeConnection({database:e,readonly:t});const n=t?`RO_${e}`:`RW_${e}`;return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isConnection(e,t){const n={};e.endsWith(".db")&&(e=e.slice(0,-3));const i=t?`RO_${e}`:`RW_${e}`;return n.result=this._connectionDict.has(i),Promise.resolve(n)}async retrieveConnection(e,t){e.endsWith(".db")&&(e=e.slice(0,-3));const n=t?`RO_${e}`:`RW_${e}`;if(this._connectionDict.has(n)){const t=this._connectionDict.get(n);return void 0!==t?Promise.resolve(t):Promise.reject(`Connection ${e} is undefined`)}return Promise.reject(`Connection ${e} does not exist`)}async getNCDatabasePath(e,t){try{const n=await this.sqlite.getNCDatabasePath({path:e,database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async createNCConnection(e,t){try{await this.sqlite.createNCConnection({databasePath:e,version:t});const n=new DA(e,!0,this.sqlite),i=`RO_${e})`;return this._connectionDict.set(i,n),Promise.resolve(n)}catch(n){return Promise.reject(n)}}async closeNCConnection(e){try{await this.sqlite.closeNCConnection({databasePath:e});const t=`RO_${e})`;return this._connectionDict.delete(t),Promise.resolve()}catch(t){return Promise.reject(t)}}async isNCConnection(e){const t={},n=`RO_${e})`;return t.result=this._connectionDict.has(n),Promise.resolve(t)}async retrieveNCConnection(e){if(this._connectionDict.has(e)){const t=`RO_${e})`,n=this._connectionDict.get(t);return void 0!==n?Promise.resolve(n):Promise.reject(`Connection ${e} is undefined`)}return Promise.reject(`Connection ${e} does not exist`)}async isNCDatabase(e){try{const t=await this.sqlite.isNCDatabase({databasePath:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const e=new Map;try{for(const t of this._connectionDict.keys()){const n=t.substring(3),i="RO_"===t.substring(0,3);await this.sqlite.closeConnection({database:n,readonly:i}),e.set(t,null)}for(const t of e.keys())this._connectionDict.delete(t);return Promise.resolve()}catch(t){return Promise.reject(t)}}async checkConnectionsConsistency(){try{const e=[...this._connectionDict.keys()],t=[],n=[];for(const r of e)t.push(r.substring(0,2)),n.push(r.substring(3));const i=await this.sqlite.checkConnectionsConsistency({dbNames:n,openModes:t});return i.result||(this._connectionDict=new Map),Promise.resolve(i)}catch(e){return this._connectionDict=new Map,Promise.reject(e)}}async importFromJson(e){try{const t=await this.sqlite.importFromJson({jsonstring:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isJsonValid(e){try{const t=await this.sqlite.isJsonValid({jsonstring:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async copyFromAssets(e){const t=null==e||e;try{return await this.sqlite.copyFromAssets({overwrite:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromHTTPRequest(e,t){const n=null==t||t;try{return await this.sqlite.getFromHTTPRequest({url:e,overwrite:n}),Promise.resolve()}catch(i){return Promise.reject(i)}}async isDatabaseEncrypted(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const t=await this.sqlite.isDatabaseEncrypted({database:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigEncryption(){try{const e=await this.sqlite.isInConfigEncryption();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isInConfigBiometricAuth(){try{const e=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isDatabase(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const t=await this.sqlite.isDatabase({database:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getDatabaseList(){try{const e=(await this.sqlite.getDatabaseList()).values;e.sort();const t={values:e};return Promise.resolve(t)}catch(e){return Promise.reject(e)}}async getMigratableDbList(e){if(!e||0===e.length)return Promise.reject("You must provide a folder path");try{const t=await this.sqlite.getMigratableDbList({folderPath:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async addSQLiteSuffix(e,t){const n=e||"default",i=t||[];try{const e=await this.sqlite.addSQLiteSuffix({folderPath:n,dbNameList:i});return Promise.resolve(e)}catch(r){return Promise.reject(r)}}async deleteOldDatabases(e,t){const n=e||"default",i=t||[];try{const e=await this.sqlite.deleteOldDatabases({folderPath:n,dbNameList:i});return Promise.resolve(e)}catch(r){return Promise.reject(r)}}async moveDatabasesAndAddSuffix(e,t){const n=e||"default",i=t||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:n,dbNameList:i})}}class DA{constructor(e,t,n){this.dbName=e,this.readonly=t,this.sqlite=n}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async beginTransaction(){try{const e=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async commitTransaction(){try{const e=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async rollbackTransaction(){try{const e=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTransactionActive(){try{const e=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async loadExtension(e){try{return await this.sqlite.loadExtension({database:this.dbName,path:e,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async enableLoadExtension(e){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:e,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async getUrl(){try{const e=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getVersion(){try{const e=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getTableList(){try{const e=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async execute(e,t=!0,n=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const i=await this.sqlite.execute({database:this.dbName,statements:e,transaction:t,readonly:!1,isSQL92:n});return Promise.resolve(i)}}catch(i){return Promise.reject(i)}}async query(e,t,n=!0){let i;try{return i=t&&t.length>0?await this.sqlite.query({database:this.dbName,statement:e,values:t,readonly:this.readonly,isSql92:!0}):await this.sqlite.query({database:this.dbName,statement:e,values:[],readonly:this.readonly,isSQL92:n}),i=await this.reorderRows(i),Promise.resolve(i)}catch(r){return Promise.reject(r)}}async run(e,t,n=!0,i="no",r=!0){let a;try{if(this.readonly)return Promise.reject("not allowed in read-only mode");if(t&&t.length>0){const r=e.toUpperCase().includes("RETURNING")?i:"no";a=await this.sqlite.run({database:this.dbName,statement:e,values:t,transaction:n,readonly:!1,returnMode:r,isSQL92:!0})}else{const t=e.toUpperCase().includes("RETURNING")?i:"no";a=await this.sqlite.run({database:this.dbName,statement:e,values:[],transaction:n,readonly:!1,returnMode:t,isSQL92:r})}return a.changes=await this.reorderRows(a.changes),Promise.resolve(a)}catch(o){return Promise.reject(o)}}async executeSet(e,t=!0,n="no",i=!0){let r;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(r=await this.sqlite.executeSet({database:this.dbName,set:e,transaction:t,readonly:!1,returnMode:n,isSQL92:i}),r.changes=await this.reorderRows(r.changes),Promise.resolve(r))}catch(a){return Promise.reject(a)}}async isExists(){try{const e=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTable(e){try{const t=await this.sqlite.isTableExists({database:this.dbName,table:e,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDBOpen(){try{const e=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const e=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(e)}}catch(e){return Promise.reject(e)}}async setSyncDate(e){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:e,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async getSyncDate(){try{const e=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let t="";return e.syncDate>0&&(t=new Date(1e3*e.syncDate).toISOString()),Promise.resolve(t)}catch(e){return Promise.reject(e)}}async exportToJson(e,t=!1){try{const n=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:e,readonly:this.readonly,encrypted:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async executeTransaction(e,t=!0){let n=0,i=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");try{if(await this.sqlite.beginTransaction({database:this.dbName}),i=await this.sqlite.isTransactionActive({database:this.dbName}),!i)return Promise.reject("After Begin Transaction, no transaction active")}catch(r){return Promise.reject(r)}try{for(const a of e)if(a.values&&a.values.length>0){const e=a.statement.toUpperCase().includes("RETURNING")?"all":"no",i=await this.sqlite.run({database:this.dbName,statement:a.statement,values:a.values,transaction:!1,readonly:!1,returnMode:e,isSQL92:t});if(i.changes.changes<=0)throw new Error("Error in transaction method run ");n+=i.changes.changes}else{const e=await this.sqlite.execute({database:this.dbName,statements:a.statement,transaction:!1,readonly:!1});if(i=await this.sqlite.isTransactionActive({database:this.dbName}),e.changes.changes<0)throw new Error("Error in transaction method execute ");n+=e.changes.changes}if(i=await this.sqlite.isTransactionActive({database:this.dbName}),i){n+=(await this.sqlite.commitTransaction({database:this.dbName})).changes.changes}const r={changes:{changes:n}};return Promise.resolve(r)}catch(r){const e=r.message?r.message:r;return i=await this.sqlite.isTransactionActive({database:this.dbName}),i&&await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(e)}}async reorderRows(e){const t=e;if(null!=e&&e.values&&"object"==typeof e.values[0]&&Object.keys(e.values[0]).includes("ios_columns")){const n=e.values[0].ios_columns,i=[];for(let t=1;t<e.values.length;t++){const r=e.values[t],a={};for(const e of n)a[e]=r[e];i.push(a)}t.values=i}return Promise.resolve(t)}}const LA=CA("CapacitorSQLite",{web:()=>vp((()=>n.import("./web-legacy-b3823fa0.js"))).then((e=>new e.CapacitorSQLiteWeb)),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite});
/*! *****************************************************************************
            Copyright (C) Microsoft. All rights reserved.
            Licensed under the Apache License, Version 2.0 (the "License"); you may not use
            this file except in compliance with the License. You may obtain a copy of the
            License at http://www.apache.org/licenses/LICENSE-2.0

            THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
            KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
            WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
            MERCHANTABLITY OR NON-INFRINGEMENT.

            See the Apache Version 2.0 License for specific language governing permissions
            and limitations under the License.
            ***************************************************************************** */var jA;!function(e){!function(t){var n="object"==typeof r?r:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=a(e);function a(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===n.Reflect?n.Reflect=e:i=a(n.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,o={__proto__:[]}instanceof Array,s=!a&&!o,l={create:a?function(){return ie(Object.create(null))}:o?function(){return ie({__proto__:null})}:function(){return ie({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,h=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,p=new(u||"function"!=typeof WeakMap?ne():WeakMap);function m(e,t,n,i){if(I(n)){if(!V(e))throw new TypeError;if(!H(t))throw new TypeError;return C(e,t)}if(!V(e))throw new TypeError;if(!j(t))throw new TypeError;if(!j(i)&&!I(i)&&!D(i))throw new TypeError;return D(i)&&(i=void 0),S(e,t,n=U(n),i)}function f(e,t){function n(n,i){if(!j(n))throw new TypeError;if(!I(i)&&!Q(i))throw new TypeError;R(e,t,n,i)}return n}function g(e,t,n,i){if(!j(n))throw new TypeError;return I(i)||(i=U(i)),R(e,t,n,i)}function b(e,t,n){if(!j(t))throw new TypeError;return I(n)||(n=U(n)),k(e,t,n)}function y(e,t,n){if(!j(t))throw new TypeError;return I(n)||(n=U(n)),A(e,t,n)}function v(e,t,n){if(!j(t))throw new TypeError;return I(n)||(n=U(n)),_(e,t,n)}function w(e,t,n){if(!j(t))throw new TypeError;return I(n)||(n=U(n)),O(e,t,n)}function E(e,t){if(!j(e))throw new TypeError;return I(t)||(t=U(t)),P(e,t)}function x(e,t){if(!j(e))throw new TypeError;return I(t)||(t=U(t)),M(e,t)}function T(e,t,n){if(!j(t))throw new TypeError;I(n)||(n=U(n));var i=N(t,n,!1);if(I(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var r=p.get(t);return r.delete(n),r.size>0||p.delete(t),!0}function C(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!I(i)&&!D(i)){if(!H(i))throw new TypeError;t=i}}return t}function S(e,t,n,i){for(var r=e.length-1;r>=0;--r){var a=(0,e[r])(t,n,i);if(!I(a)&&!D(a)){if(!j(a))throw new TypeError;i=a}}return i}function N(e,t,n){var i=p.get(e);if(I(i)){if(!n)return;i=new d,p.set(e,i)}var r=i.get(t);if(I(r)){if(!n)return;r=new d,i.set(t,r)}return r}function k(e,t,n){if(A(e,t,n))return!0;var i=Z(t);return!D(i)&&k(e,i,n)}function A(e,t,n){var i=N(t,n,!1);return!I(i)&&F(i.has(e))}function _(e,t,n){if(A(e,t,n))return O(e,t,n);var i=Z(t);return D(i)?void 0:_(e,i,n)}function O(e,t,n){var i=N(t,n,!1);if(!I(i))return i.get(e)}function R(e,t,n,i){N(n,i,!0).set(e,t)}function P(e,t){var n=M(e,t),i=Z(e);if(null===i)return n;var r=P(i,t);if(r.length<=0)return n;if(n.length<=0)return r;for(var a=new h,o=[],s=0,l=n;s<l.length;s++){var c=l[s];a.has(c)||(a.add(c),o.push(c))}for(var u=0,d=r;u<d.length;u++){c=d[u];a.has(c)||(a.add(c),o.push(c))}return o}function M(e,t){var n=[],i=N(e,t,!1);if(I(i))return n;for(var r=G(i.keys()),a=0;;){var o=J(r);if(!o)return n.length=a,n;var s=Y(o);try{n[a]=s}catch(RD){try{X(r)}finally{throw RD}}a++}}function $(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function I(e){return void 0===e}function D(e){return null===e}function L(e){return"symbol"==typeof e}function j(e){return"object"==typeof e?null!==e:"function"==typeof e}function q(e,t){switch($(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",r=K(e,i);if(void 0!==r){var a=r.call(e,n);if(j(a))throw new TypeError;return a}return B(e,"default"===n?"number":n)}function B(e,t){if("string"===t){var n=e.toString;if(W(n))if(!j(r=n.call(e)))return r;if(W(i=e.valueOf))if(!j(r=i.call(e)))return r}else{var i;if(W(i=e.valueOf))if(!j(r=i.call(e)))return r;var r,a=e.toString;if(W(a))if(!j(r=a.call(e)))return r}throw new TypeError}function F(e){return!!e}function z(e){return""+e}function U(e){var t=q(e,3);return L(t)?t:z(t)}function V(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function W(e){return"function"==typeof e}function H(e){return"function"==typeof e}function Q(e){switch($(e)){case 3:case 4:return!0;default:return!1}}function K(e,t){var n=e[t];if(null!=n){if(!W(n))throw new TypeError;return n}}function G(e){var t=K(e,r);if(!W(t))throw new TypeError;var n=t.call(e);if(!j(n))throw new TypeError;return n}function Y(e){return e.value}function J(e){var t=e.next();return!t.done&&t}function X(e){var t=e.return;t&&t.call(e)}function Z(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var r=i.constructor;return"function"!=typeof r||r===e?t:r}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,a)},t.prototype.entries=function(){return new n(this._keys,this._values,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function a(e,t){return t}function o(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()},e}()}function ne(){var e=16,n=l.create(),i=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=a(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=a(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return a(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=a(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var e;do{e="@@WeakMap@@"+c()}while(l.has(n,e));return n[e]=!0,e}function a(e,n){if(!t.call(e,i)){if(!n)return;Object.defineProperty(e,i,{value:l.create()})}return e[i]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e)}function c(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",i=0;i<e;++i){var r=t[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}function ie(e){return e.__=void 0,delete e.__,e}e("decorate",m),e("metadata",f),e("defineMetadata",g),e("hasMetadata",b),e("hasOwnMetadata",y),e("getMetadata",v),e("getOwnMetadata",w),e("getMetadataKeys",E),e("getOwnMetadataKeys",x),e("deleteMetadata",T)}(i)}()}(jA||(jA={}));class qA{static getInheritanceTree(e){const t=[e],n=e=>{const i=Object.getPrototypeOf(e);i&&i.name&&(t.push(i),n(i))};return n(e),t}static isInherited(e,t){return e.prototype instanceof t}static filterByTarget(e,t){return t?e.filter((e=>e.target&&-1!==t.indexOf(e.target))):e}}class BA{constructor(){this.tables=[],this.trees=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.uniques=[],this.checks=[],this.exclusions=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}filterTables(e){return this.filterByTarget(this.tables,e)}filterColumns(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)}findGenerated(e,t){return this.generations.find((n=>(Array.isArray(e)?-1!==e.indexOf(n.target):n.target===e)&&n.propertyName===t))}findTree(e){return this.trees.find((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterRelations(e){return this.filterByTargetAndWithoutDuplicateRelationProperties(this.relations,e)}filterRelationIds(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)}filterRelationCounts(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)}filterIndices(e){return this.indices.filter((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterUniques(e){return this.uniques.filter((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterChecks(e){return this.checks.filter((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterExclusions(e){return this.exclusions.filter((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterListeners(e){return this.filterByTarget(this.entityListeners,e)}filterEmbeddeds(e){return this.filterByTargetAndWithoutDuplicateEmbeddedProperties(this.embeddeds,e)}findJoinTable(e,t){return this.joinTables.find((n=>n.target===e&&n.propertyName===t))}filterJoinColumns(e,t){return this.joinColumns.filter((n=>n.target===e&&n.propertyName===t))}filterSubscribers(e){return this.filterByTarget(this.entitySubscribers,e)}filterNamingStrategies(e){return this.filterByTarget(this.namingStrategies,e)}filterTransactionEntityManagers(e,t){return this.transactionEntityManagers.filter((n=>(Array.isArray(e)?-1!==e.indexOf(n.target):n.target===e)&&n.methodName===t))}filterTransactionRepository(e,t){return this.transactionRepositories.filter((n=>(Array.isArray(e)?-1!==e.indexOf(n.target):n.target===e)&&n.methodName===t))}filterSingleTableChildren(e){return this.tables.filter((t=>"function"==typeof t.target&&"function"==typeof e&&qA.isInherited(t.target,e)&&"entity-child"===t.type))}findInheritanceType(e){return this.inheritances.find((t=>t.target===e))}findDiscriminatorValue(e){return this.discriminatorValues.find((t=>t.target===e))}filterByTarget(e,t){return e.filter((e=>Array.isArray(t)?-1!==t.indexOf(e.target):e.target===t))}filterByTargetAndWithoutDuplicateProperties(e,t){const n=[];return e.forEach((e=>{(Array.isArray(t)?-1!==t.indexOf(e.target):e.target===t)&&(n.find((t=>t.propertyName===e.propertyName))||n.push(e))})),n}filterByTargetAndWithoutDuplicateRelationProperties(e,t){const n=[];return e.forEach((e=>{if(Array.isArray(t)?-1!==t.indexOf(e.target):e.target===t){const i=n.findIndex((t=>t.propertyName===e.propertyName));if(Array.isArray(t)&&-1!==i&&t.indexOf(e.target)<t.indexOf(n[i].target)){const t=Object.create(n[i]);t.type=e.type,n[i]=t}else-1===i&&n.push(e)}})),n}filterByTargetAndWithoutDuplicateEmbeddedProperties(e,t){const n=[];return e.forEach((e=>{if(Array.isArray(t)?-1!==t.indexOf(e.target):e.target===t){n.find((t=>t.prefix===e.prefix&&t.propertyName===e.propertyName))||n.push(e)}})),n}}class FA{static getGlobalVariable(){return"undefined"!=typeof window?window:global}static load(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: require("${e}").`);return""}static pathNormalize(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.normalize("${e}").`);return""}static pathExtname(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.extname("${e}").`);return""}static pathResolve(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.resolve("${e}").`);return""}static fileExist(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.existsSync("${e}").`);return!1}static dotenv(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: dotenv.config({ path: "${e}" }).`)}static getEnvVariable(e){}static readFileSync(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("${e}").`);return null}static appendFileSync(e,t){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("${e}").`)}static writeFile(e,t){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.writeFile("${e}").`);return Promise.reject(null)}static highlightSql(e){return e}static highlightJson(e){return e}static logInfo(e,t){console.info(e+" ",t)}static logError(e,t){console.error(e+" ",t)}static logWarn(e,t){console.warn(e+" ",t)}static log(e){console.log(e)}static warn(e){return e}}FA.type="browser","undefined"!=typeof window&&"undefined"!=typeof require&&(window.Buffer=require("buffer/").Buffer),"undefined"!=typeof global&&"undefined"!=typeof require&&(global.Buffer=require("buffer/").Buffer);class zA{static sha1(e){let t,n,i,r,a,o,s,l,c,u=function(e,t){return e<<t|e>>>32-t},d=function(e){let t,n,i="";for(t=7;t>=0;t--)n=e>>>4*t&15,i+=n.toString(16);return i},h=new Array(80),p=1732584193,m=4023233417,f=2562383102,g=271733878,b=3285377520,y=(e=encodeURIComponent(e)).length,v=[];for(n=0;n<y-3;n+=4)i=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),v.push(i);switch(y%4){case 0:n=2147483648;break;case 1:n=e.charCodeAt(y-1)<<24|8388608;break;case 2:n=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:n=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}for(v.push(n);v.length%16!=14;)v.push(0);for(v.push(y>>>29),v.push(y<<3&4294967295),t=0;t<v.length;t+=16){for(n=0;n<16;n++)h[n]=v[t+n];for(n=16;n<=79;n++)h[n]=u(h[n-3]^h[n-8]^h[n-14]^h[n-16],1);for(r=p,a=m,o=f,s=g,l=b,n=0;n<=19;n++)c=u(r,5)+(a&o|~a&s)+l+h[n]+1518500249&4294967295,l=s,s=o,o=u(a,30),a=r,r=c;for(n=20;n<=39;n++)c=u(r,5)+(a^o^s)+l+h[n]+1859775393&4294967295,l=s,s=o,o=u(a,30),a=r,r=c;for(n=40;n<=59;n++)c=u(r,5)+(a&o|a&s|o&s)+l+h[n]+2400959708&4294967295,l=s,s=o,o=u(a,30),a=r,r=c;for(n=60;n<=79;n++)c=u(r,5)+(a^o^s)+l+h[n]+3395469782&4294967295,l=s,s=o,o=u(a,30),a=r,r=c;p=p+r&4294967295,m=m+a&4294967295,f=f+o&4294967295,g=g+s&4294967295,b=b+l&4294967295}return c=d(p)+d(m)+d(f)+d(g)+d(b),c.toLowerCase()}}var UA={exports:{}},VA={exports:{}};"function"==typeof Object.create?VA.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:VA.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};for(var WA=VA.exports,HA={exports:{}},QA={},KA={byteLength:function(e){var t=e_(e),n=t[0],i=t[1];return 3*(n+i)/4-i},toByteArray:function(e){var t,n,i=e_(e),r=i[0],a=i[1],o=new JA(function(e,t,n){return 3*(t+n)/4-n}(0,r,a)),s=0,l=a>0?r-4:r;for(n=0;n<l;n+=4)t=YA[e.charCodeAt(n)]<<18|YA[e.charCodeAt(n+1)]<<12|YA[e.charCodeAt(n+2)]<<6|YA[e.charCodeAt(n+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===a&&(t=YA[e.charCodeAt(n)]<<2|YA[e.charCodeAt(n+1)]>>4,o[s++]=255&t);1===a&&(t=YA[e.charCodeAt(n)]<<10|YA[e.charCodeAt(n+1)]<<4|YA[e.charCodeAt(n+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},fromByteArray:function(e){for(var t,n=e.length,i=n%3,r=[],a=16383,o=0,s=n-i;o<s;o+=a)r.push(t_(e,o,o+a>s?s:o+a));1===i?(t=e[n-1],r.push(GA[t>>2]+GA[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],r.push(GA[t>>10]+GA[t>>4&63]+GA[t<<2&63]+"="));return r.join("")}},GA=[],YA=[],JA="undefined"!=typeof Uint8Array?Uint8Array:Array,XA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ZA=0;ZA<64;++ZA)GA[ZA]=XA[ZA],YA[XA.charCodeAt(ZA)]=ZA;function e_(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function t_(e,t,n){for(var i,r,a=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(GA[(r=i)>>18&63]+GA[r>>12&63]+GA[r>>6&63]+GA[63&r]);return a.join("")}YA["-".charCodeAt(0)]=62,YA["_".charCodeAt(0)]=63;var n_={/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */read:function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=h,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=i;u>0;o=256*o+e[t+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),a-=c}return(p?-1:1)*o*Math.pow(2,a-i)},write:function(e,t,n,i,r,a){var o,s,l,c=8*a-r-1,u=(1<<c)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,m=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,r),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[n+p]=255&s,p+=m,s/=256,r-=8);for(o=o<<r|s,c+=r;c>0;e[n+p]=255&o,p+=m,o/=256,c-=8);e[n+p-m]|=128*f}};
/*!
             * The buffer module from node.js, for the browser.
             *
             * @author   Feross Aboukhadijeh <https://feross.org>
             * @license  MIT
             */
(function(e){const t=KA,n=n_,i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},e.INSPECT_MAX_BYTES=50;const r=2147483647;function a(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,n)}function s(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|p(e,t);let i=a(n);const r=i.write(e,t);r!==n&&(i=i.slice(0,r));return i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return o.from(i,t,n);const r=function(e){if(o.isBuffer(e)){const t=0|h(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||K(e.length)?a(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),a(e<0?0:0|h(e))}function u(e){const t=e.length<0?0:0|h(e.length),n=a(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,o.prototype),i}function h(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return i?-1:V(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function f(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function g(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){let a,o=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){let i=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===i?0:a-i)){if(-1===i&&(i=a),a-i+1===l)return i*o}else-1!==i&&(a-=a-i),i=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){let n=!0;for(let i=0;i<l;i++)if(c(e,a+i)!==c(t,i)){n=!1;break}if(n)return a}return-1}function y(e,t,n,i){n=Number(n)||0;const r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;const a=t.length;let o;for(i>a/2&&(i=a/2),o=0;o<i;++o){const i=parseInt(t.substr(2*o,2),16);if(K(i))return o;e[n+o]=i}return o}function v(e,t,n,i){return H(V(t,e.length-n),e,n,i)}function w(e,t,n,i){return H(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function E(e,t,n,i){return H(W(t),e,n,i)}function x(e,t,n,i){return H(function(e,t){let n,i,r;const a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,r=n%256,a.push(r),a.push(i);return a}(t,e.length-n),e,n,i)}function T(e,n,i){return 0===n&&i===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,i))}function C(e,t,n){n=Math.min(e.length,n);const i=[];let r=t;for(;r<n;){const t=e[r];let a=null,o=t>239?4:t>223?3:t>191?2:1;if(r+o<=n){let n,i,s,l;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[r+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(a=l));break;case 3:n=e[r+1],i=e[r+2],128==(192&n)&&128==(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:n=e[r+1],i=e[r+2],s=e[r+3],128==(192&n)&&128==(192&i)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&s,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=o}return function(e){const t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=S));return n}(i)}e.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(RD){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(Q(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=o.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(Q(t,Uint8Array))r+t.length>i.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(i,r)):Uint8Array.prototype.set.call(i,t,r);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,r)}r+=t.length}return i},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)f(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(e,t,n,i,r){if(Q(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0);const l=Math.min(a,s),c=this.slice(i,r),u=e.slice(t,n);for(let o=0;o<l;++o)if(c[o]!==u[o]){a=c[o],s=u[o];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},o.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function N(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function k(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function A(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let a=t;a<n;++a)r+=G[e[a]];return r}function _(e,t,n){const i=e.slice(t,n);let r="";for(let a=0;a<i.length-1;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,i,r,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function P(e,t,n,i,r){B(t,i,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function M(e,t,n,i,r){B(t,i,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function $(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,i,r,a){return t=+t,i>>>=0,a||$(e,0,i,4),n.write(e,t,i,r,23,4),i+4}function D(e,t,i,r,a){return t=+t,i>>>=0,a||$(e,0,i,8),n.write(e,t,i,r,52,8),i+8}o.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,o.prototype),i},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let i=this[e],r=1,a=0;for(;++a<t&&(r*=256);)i+=this[e+a]*r;return i},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let i=this[e+--t],r=1;for(;t>0&&(r*=256);)i+=this[e+--t]*r;return i},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=Y((function(e){F(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))})),o.prototype.readBigUInt64BE=Y((function(e){F(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)})),o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let i=this[e],r=1,a=0;for(;++a<t&&(r*=256);)i+=this[e+a]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let i=t,r=1,a=this[e+--i];for(;i>0&&(r*=256);)a+=this[e+--i]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=Y((function(e){F(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),o.prototype.readBigInt64BE=Y((function(e){F(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=Y((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=Y((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let r=0,a=1,o=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===o&&0!==this[t+r-1]&&(o=1),this[t+r]=(e/a>>0)-o&255;return t+n},o.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let r=n-1,a=1,o=0;for(this[t+r]=255&e;--r>=0&&(a*=256);)e<0&&0===o&&0!==this[t+r+1]&&(o=1),this[t+r]=(e/a>>0)-o&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=Y((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=Y((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,i){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},o.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const a=o.isBuffer(e)?e:o.from(e,i),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=a[r%s]}return this};const L={};function j(e,t,n){L[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function B(e,t,n,i,r,a){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let r;throw r=a>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(a+1)}${i}`:`>= -(2${i} ** ${8*(a+1)-1}${i}) and < 2 ** ${8*(a+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new L.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){F(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||z(t,e.length-(n+1))}(i,r,a)}function F(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,n){if(Math.floor(e)!==e)throw F(e,n),new L.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,n){let i=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=q(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=q(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i}),RangeError);const U=/[^+/0-9A-Za-z-_]/g;function V(e,t){let n;t=t||1/0;const i=e.length;let r=null;const a=[];for(let o=0;o<i;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function W(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const G=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function Y(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}})(QA),/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */function(e,t){var n=QA,i=n.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(r(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),r(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}(HA,HA.exports);var i_=HA.exports,r_=i_.Buffer;function a_(e,t){this._block=r_.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}a_.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r_.from(e,t));for(var n=this._block,i=this._blockSize,r=e.length,a=this._len,o=0;o<r;){for(var s=a%i,l=Math.min(r-o,i-s),c=0;c<l;c++)n[s+c]=e[o+c];o+=l,(a+=l)%i==0&&this._update(n)}return this._len+=r,this},a_.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=(4294967295&n)>>>0,r=(n-i)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a},a_.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var o_=a_,s_=WA,l_=o_,c_=i_.Buffer,u_=[1518500249,1859775393,-1894007588,-899497514],d_=new Array(80);function h_(){this.init(),this._w=d_,l_.call(this,64,56)}function p_(e){return e<<30|e>>>2}function m_(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}s_(h_,l_),h_.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h_.prototype._update=function(e){for(var t,n=this._w,i=0|this._a,r=0|this._b,a=0|this._c,o=0|this._d,s=0|this._e,l=0;l<16;++l)n[l]=e.readInt32BE(4*l);for(;l<80;++l)n[l]=n[l-3]^n[l-8]^n[l-14]^n[l-16];for(var c=0;c<80;++c){var u=~~(c/20),d=0|((t=i)<<5|t>>>27)+m_(u,r,a,o)+s+n[c]+u_[u];s=o,o=a,a=p_(r),r=i,i=d}this._a=i+this._a|0,this._b=r+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},h_.prototype._hash=function(){var e=c_.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var f_=h_,g_=WA,b_=o_,y_=i_.Buffer,v_=[1518500249,1859775393,-1894007588,-899497514],w_=new Array(80);function E_(){this.init(),this._w=w_,b_.call(this,64,56)}function x_(e){return e<<5|e>>>27}function T_(e){return e<<30|e>>>2}function C_(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}g_(E_,b_),E_.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},E_.prototype._update=function(e){for(var t,n=this._w,i=0|this._a,r=0|this._b,a=0|this._c,o=0|this._d,s=0|this._e,l=0;l<16;++l)n[l]=e.readInt32BE(4*l);for(;l<80;++l)n[l]=(t=n[l-3]^n[l-8]^n[l-14]^n[l-16])<<1|t>>>31;for(var c=0;c<80;++c){var u=~~(c/20),d=x_(i)+C_(u,r,a,o)+s+n[c]+v_[u]|0;s=o,o=a,a=T_(r),r=i,i=d}this._a=i+this._a|0,this._b=r+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},E_.prototype._hash=function(){var e=y_.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var S_=E_,N_=WA,k_=o_,A_=i_.Buffer,__=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],O_=new Array(64);function R_(){this.init(),this._w=O_,k_.call(this,64,56)}function P_(e,t,n){return n^e&(t^n)}function M_(e,t,n){return e&t|n&(e|t)}function $_(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function I_(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function D_(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function L_(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}N_(R_,k_),R_.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},R_.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,r=0|this._c,a=0|this._d,o=0|this._e,s=0|this._f,l=0|this._g,c=0|this._h,u=0;u<16;++u)t[u]=e.readInt32BE(4*u);for(;u<64;++u)t[u]=L_(t[u-2])+t[u-7]+D_(t[u-15])+t[u-16]|0;for(var d=0;d<64;++d){var h=c+I_(o)+P_(o,s,l)+__[d]+t[d]|0,p=$_(n)+M_(n,i,r)|0;c=l,l=s,s=o,o=a+h|0,a=r,r=i,i=n,n=h+p|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=r+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0,this._f=s+this._f|0,this._g=l+this._g|0,this._h=c+this._h|0},R_.prototype._hash=function(){var e=A_.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var j_=R_,q_=WA,B_=j_,F_=o_,z_=i_.Buffer,U_=new Array(64);function V_(){this.init(),this._w=U_,F_.call(this,64,56)}q_(V_,B_),V_.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},V_.prototype._hash=function(){var e=z_.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var W_=V_,H_=WA,Q_=o_,K_=i_.Buffer,G_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Y_=new Array(160);function J_(){this.init(),this._w=Y_,Q_.call(this,128,112)}function X_(e,t,n){return n^e&(t^n)}function Z_(e,t,n){return e&t|n&(e|t)}function eO(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function tO(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function nO(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function iO(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function rO(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function aO(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function oO(e,t){return e>>>0<t>>>0?1:0}H_(J_,Q_),J_.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},J_.prototype._update=function(e){for(var t=this._w,n=0|this._ah,i=0|this._bh,r=0|this._ch,a=0|this._dh,o=0|this._eh,s=0|this._fh,l=0|this._gh,c=0|this._hh,u=0|this._al,d=0|this._bl,h=0|this._cl,p=0|this._dl,m=0|this._el,f=0|this._fl,g=0|this._gl,b=0|this._hl,y=0;y<32;y+=2)t[y]=e.readInt32BE(4*y),t[y+1]=e.readInt32BE(4*y+4);for(;y<160;y+=2){var v=t[y-30],w=t[y-30+1],E=nO(v,w),x=iO(w,v),T=rO(v=t[y-4],w=t[y-4+1]),C=aO(w,v),S=t[y-14],N=t[y-14+1],k=t[y-32],A=t[y-32+1],_=x+N|0,O=E+S+oO(_,x)|0;O=(O=O+T+oO(_=_+C|0,C)|0)+k+oO(_=_+A|0,A)|0,t[y]=O,t[y+1]=_}for(var R=0;R<160;R+=2){O=t[R],_=t[R+1];var P=Z_(n,i,r),M=Z_(u,d,h),$=eO(n,u),I=eO(u,n),D=tO(o,m),L=tO(m,o),j=G_[R],q=G_[R+1],B=X_(o,s,l),F=X_(m,f,g),z=b+L|0,U=c+D+oO(z,b)|0;U=(U=(U=U+B+oO(z=z+F|0,F)|0)+j+oO(z=z+q|0,q)|0)+O+oO(z=z+_|0,_)|0;var V=I+M|0,W=$+P+oO(V,I)|0;c=l,b=g,l=s,g=f,s=o,f=m,o=a+U+oO(m=p+z|0,p)|0,a=r,p=h,r=i,h=d,i=n,d=u,n=U+W+oO(u=z+V|0,z)|0}this._al=this._al+u|0,this._bl=this._bl+d|0,this._cl=this._cl+h|0,this._dl=this._dl+p|0,this._el=this._el+m|0,this._fl=this._fl+f|0,this._gl=this._gl+g|0,this._hl=this._hl+b|0,this._ah=this._ah+n+oO(this._al,u)|0,this._bh=this._bh+i+oO(this._bl,d)|0,this._ch=this._ch+r+oO(this._cl,h)|0,this._dh=this._dh+a+oO(this._dl,p)|0,this._eh=this._eh+o+oO(this._el,m)|0,this._fh=this._fh+s+oO(this._fl,f)|0,this._gh=this._gh+l+oO(this._gl,g)|0,this._hh=this._hh+c+oO(this._hl,b)|0},J_.prototype._hash=function(){var e=K_.allocUnsafe(64);function t(t,n,i){e.writeInt32BE(t,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var sO=J_,lO=WA,cO=sO,uO=o_,dO=i_.Buffer,hO=new Array(160);function pO(){this.init(),this._w=hO,uO.call(this,128,112)}lO(pO,cO),pO.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},pO.prototype._hash=function(){var e=dO.allocUnsafe(48);function t(t,n,i){e.writeInt32BE(t,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var mO=pO,fO=UA.exports=function(e){e=e.toLowerCase();var t=fO[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};fO.sha=f_,fO.sha1=S_,fO.sha224=W_,fO.sha256=j_,fO.sha384=mO,fO.sha512=sO;const gO=a(UA.exports);function bO(e,t=!1){return t&&(e=" "+e),e.replace(/^([A-Z])|[\s-_](\w)/g,(function(e,t,n){return n?n.toUpperCase():t.toLowerCase()}))}function yO(e){return e.replace(/([A-Z])([A-Z])([a-z])/g,"$1_$2$3").replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase()}function vO(e,t={}){const{segmentLength:n=4,separator:i="__",termLength:r=2}=t;return e.split(i).reduce(((e,t)=>{const i=t.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),a=i.length>1?r:n,o=i.map((e=>e.substr(0,a))).join("");return e.push(o),e}),[]).join(i)}class wO{constructor(){this.nestedSetColumnNames={left:"nsleft",right:"nsright"},this.materializedPathColumnName="mpath"}getTableName(e){return"string"!=typeof e&&(e=e.name),e.split(".").pop()}tableName(e,t){return t||yO(e)}closureJunctionTableName(e){return e+"_closure"}columnName(e,t,n){const i=t||e;return n.length?bO(n.join("_"))+i.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())):i}relationName(e){return e}primaryKeyName(e,t){const n=[...t];n.sort();const i=`${this.getTableName(e).replace(".","_")}_${n.join("_")}`;return"PK_"+zA.sha1(i).substr(0,27)}uniqueConstraintName(e,t){const n=[...t];n.sort();const i=`${this.getTableName(e).replace(".","_")}_${n.join("_")}`;return"UQ_"+zA.sha1(i).substr(0,27)}relationConstraintName(e,t,n){const i=[...t];i.sort();let r=`${this.getTableName(e).replace(".","_")}_${i.join("_")}`;return n&&(r+=`_${n}`),"REL_"+zA.sha1(r).substr(0,26)}defaultConstraintName(e,t){const n=`${this.getTableName(e).replace(".","_")}_${t}`;return"DF_"+zA.sha1(n).substr(0,27)}foreignKeyName(e,t,n,i){const r=[...t];r.sort();const a=`${this.getTableName(e).replace(".","_")}_${r.join("_")}`;return"FK_"+zA.sha1(a).substr(0,27)}indexName(e,t,n){const i=[...t];i.sort();let r=`${this.getTableName(e).replace(".","_")}_${i.join("_")}`;return n&&(r+=`_${n}`),"IDX_"+zA.sha1(r).substr(0,26)}checkConstraintName(e,t,n){const i=`${this.getTableName(e).replace(".","_")}_${t}`,r="CHK_"+zA.sha1(i).substr(0,26);return n?`${r}_ENUM`:r}exclusionConstraintName(e,t){const n=`${this.getTableName(e).replace(".","_")}_${t}`;return"XCL_"+zA.sha1(n).substr(0,26)}joinColumnName(e,t){return bO(e+"_"+t)}joinTableName(e,t,n,i){return yO(e+"_"+n.replace(/\./gi,"_")+"_"+t)}joinTableColumnDuplicationPrefix(e,t){return e+"_"+t}joinTableColumnName(e,t,n){return bO(e+"_"+(n||t))}joinTableInverseColumnName(e,t,n){return this.joinTableColumnName(e,t,n)}prefixTableName(e,t){return e+t}eagerJoinRelationAlias(e,t){return e+"_"+t.replace(".","_")}}class EO extends Error{get name(){return this.constructor.name}constructor(e){super(e),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class xO extends EO{constructor(e){super(`Internal error. Subject ${e.metadata.targetName} must have an identifier to perform operation.`)}}class TO extends EO{constructor(e){super(`Cannot create a "${e}" connection because connection to the database already established.`)}}class CO extends EO{constructor(){super("Locking not supported on given driver.")}}class SO extends EO{constructor(e,t){super();const n=e.primaryColumns.reduce(((e,t,n)=>(t.setEntityValue(e,n+1),e)),{});this.message=`Cannot use given entity id "${t}" because "${e.targetName}" contains multiple primary columns, you must provide object in following form: ${JSON.stringify(n)} as an id.`}}class NO extends EO{constructor(e){super(`Cannot ${e}, given value must be instance of entity class, instead object literal is given. Or you must specify an entity target to method call.`)}}class kO extends EO{constructor(e){super(`Tree repositories are not supported in ${e.options.type} driver.`)}}class AO extends EO{constructor(e){super(`Custom repository ${"function"==typeof e?e.name:e.constructor.name} was not found. Did you forgot to put @EntityRepository decorator on it?`)}}class _O extends EO{constructor(){super("Transaction is not started yet, start transaction before committing or rolling it back.")}}class OO extends EO{constructor(){super("Transaction already started for the given connection, commit current transaction before starting a new one.")}}class RO{static isObject(e){return null!==e&&"object"==typeof e}static isObjectWithName(e){return null!==e&&"object"==typeof e&&void 0!==e.name}static assign(e,...t){for(const n of t)for(const t of Object.getOwnPropertyNames(n))e[t]=n[t]}static mixedListToArray(e){return null!==e&&"object"==typeof e?Object.keys(e).map((t=>e[t])):e}}class PO{static isMssqlParameter(e){return this.check(e,"MssqlParameter")}static isEntityMetadata(e){return this.check(e,"EntityMetadata")}static isColumnMetadata(e){return this.check(e,"ColumnMetadata")}static isSelectQueryBuilder(e){return this.check(e,"SelectQueryBuilder")}static isInsertQueryBuilder(e){return this.check(e,"InsertQueryBuilder")}static isDeleteQueryBuilder(e){return this.check(e,"DeleteQueryBuilder")}static isUpdateQueryBuilder(e){return this.check(e,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(e){return this.check(e,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(e){return this.check(e,"RelationQueryBuilder")}static isBrackets(e){return this.check(e,"Brackets")||this.check(e,"NotBrackets")}static isNotBrackets(e){return this.check(e,"NotBrackets")}static isSubject(e){return this.check(e,"Subject")}static isRdbmsSchemaBuilder(e){return this.check(e,"RdbmsSchemaBuilder")}static isMongoEntityManager(e){return this.check(e,"MongoEntityManager")}static isSqljsEntityManager(e){return this.check(e,"SqljsEntityManager")}static isEntitySchema(e){return this.check(e,"EntitySchema")}static isBaseEntityConstructor(e){return"function"==typeof e&&"function"==typeof e.hasId&&"function"==typeof e.save&&"function"==typeof e.useDataSource}static isFindOperator(e){return this.check(e,"FindOperator")||this.check(e,"EqualOperator")}static isEqualOperator(e){return this.check(e,"EqualOperator")}static isQuery(e){return this.check(e,"Query")}static isTable(e){return this.check(e,"Table")}static isTableCheck(e){return this.check(e,"TableCheck")}static isTableColumn(e){return this.check(e,"TableColumn")}static isTableExclusion(e){return this.check(e,"TableExclusion")}static isTableForeignKey(e){return this.check(e,"TableForeignKey")}static isTableIndex(e){return this.check(e,"TableIndex")}static isTableUnique(e){return this.check(e,"TableUnique")}static isView(e){return this.check(e,"View")}static isDataSource(e){return this.check(e,"DataSource")}static check(e,t){return"object"==typeof e&&null!==e&&e["@instanceof"]===Symbol.for(t)}}class MO extends EO{constructor(e,t){super(),this.message=`Could not find any entity of type "${this.stringifyTarget(e)}" matching: ${this.stringifyCriteria(t)}`}stringifyTarget(e){return PO.isEntitySchema(e)?e.options.name:"function"==typeof e||RO.isObject(e)&&"name"in e?e.name:e}stringifyCriteria(e){try{return JSON.stringify(e,null,4)}catch(RD){}return""+e}}class $O extends EO{constructor(e){super(),this.message=`No metadata for "${this.stringifyTarget(e)}" was found.`}stringifyTarget(e){return PO.isEntitySchema(e)?e.options.name:"function"==typeof e||RO.isObject(e)&&"name"in e?e.name:e}}class IO extends EO{constructor(e,t){super(`Cannot ${e}, given value must be an entity, instead "${t}" is given.`)}}class DO extends EO{constructor(e,t,n){super(`The optimistic lock on entity ${e} failed, version ${t} was expected, but is actually ${n}.`)}}class LO extends EO{constructor(e,t){super(`Primary column ${e.constructor.name}#${t} cannot be nullable. Its not allowed for primary keys. Try to remove nullable option.`)}}class jO extends EO{constructor(e){super(`Custom entity repository ${"function"==typeof e?e.name:e.constructor.name}  cannot inherit Repository class without entity being set in the @EntityRepository decorator.`)}}class qO extends EO{constructor(){super("Database connection provided by a query runner was already released, cannot continue to use its querying methods anymore.")}}class BO extends EO{constructor(e){super(`Cannot attach entity "${e}" to its parent. Please make sure parent is saved in the database before saving children nodes.`)}}class FO extends EO{constructor(e){super(`Custom repository ${"function"==typeof e?e.name:e.constructor.name} does not have managed entity. Did you forget to specify entity for it @EntityRepository(MyEntity)? `)}}class zO extends EO{constructor(e){super(`Circular relations detected: ${e}. To resolve this issue you need to set nullable: true somewhere in this dependency structure.`)}}class UO extends EO{constructor(e){super(`Entity "${e.name}" does not have a primary column. Primary column is required to have in all your entities. Use @PrimaryColumn decorator to add a primary column to your entity.`)}}class VO extends EO{constructor(e,t){super(e),Object.setPrototypeOf(this,VO.prototype),this.message=`Property "${e}" was not found in "${t.targetName}". Make sure your query is correct.`}}class WO extends EO{constructor(e,t=[]){super(`Wrong driver: "${e}" given. Supported drivers are: ${t.map((e=>`"${e}"`)).join(", ")}.`)}}class HO extends EO{constructor(e,t){super(`${e} package has not been found installed. Try to install it: npm install ${t} --save`)}}class QO extends EO{constructor(e){super(`Entity ${e} does not have version or update date columns.`)}}class KO extends EO{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class GO extends EO{constructor(e){super(`Driver option (${e}) is not set. Please set it to perform connection to the database.`)}}class YO extends EO{constructor(e){super(),1===e.length?this.message=`Relation "${e[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${e.map((e=>`"${e}"`)).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class JO extends EO{constructor(){super("An open transaction is required for pessimistic lock.")}}class XO extends EO{constructor(e,t,n){super();const i="string"==typeof t?t:t.name;this.message=`Data type "${i}" in "${e.entityMetadata.targetName}.${e.propertyName}" is not supported by "${n}" database.`}}class ZO extends EO{constructor(e){super(`Array initializations are not allowed in entity relations. Please remove array initialization (= []) from "${e.entityMetadata.targetName}#${e.propertyPath}". This is ORM requirement to make relations to work properly. Refer docs for more information.`)}}class eR extends EO{constructor(e,t,n){if(super(n.toString().replace(/^error: /,"").replace(/^Error: /,"").replace(/^Request/,"")),this.query=e,this.parameters=t,this.driverError=n,n){const{name:e,...t}=n;RO.assign(this,{...t})}}}class tR extends EO{constructor(){super("Entity manager is not using single database connection and cannot be released. Only entity managers created by connection#createEntityManagerWithSingleDatabaseConnection methods have a single database connection and they should be released.")}}class nR extends EO{constructor(e){super(`Removed entity "${e.metadata.name}" is also scheduled for update operation. Make sure you are not updating and removing same object (note that update or remove may be executed by cascade operations).`)}}class iR extends EO{constructor(e,t){super(`Column type for ${e.constructor.name}#${t} is not defined and cannot be guessed. Make sure you have turned on an "emitDecoratorMetadata": true option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application (before any entity imported).If you are using JavaScript instead of TypeScript you must explicitly provide a column type.`)}}class rR extends EO{constructor(){super("Query runner already released. Cannot run queries anymore.")}}class aR extends EO{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class oR extends EO{constructor(e){super(`Cannot execute operation on "${e}" connection because connection is not yet established.`)}}class sR extends EO{constructor(e){super(`Option "${e}" is not set in your connection options, please define "${e}" option in your connection options or ormconfig.json`)}}class lR extends EO{constructor(e){super(`Migrations ${e.map((e=>`"${e.name}"`)).join(", ")} override the transaction mode, but the global transaction mode is "all"`)}}class cR{constructor(e){this["@instanceof"]=Symbol.for("TableColumn"),this.isNullable=!1,this.isGenerated=!1,this.isPrimary=!1,this.isUnique=!1,this.isArray=!1,this.length="",this.zerofill=!1,this.unsigned=!1,e&&(this.name=e.name,this.type=e.type||"",this.length=e.length||"",this.width=e.width,this.charset=e.charset,this.collation=e.collation,this.precision=e.precision,this.scale=e.scale,this.zerofill=e.zerofill||!1,this.unsigned=!!this.zerofill||(e.unsigned||!1),this.default=e.default,this.onUpdate=e.onUpdate,this.isNullable=e.isNullable||!1,this.isGenerated=e.isGenerated||!1,this.generationStrategy=e.generationStrategy,this.generatedIdentity=e.generatedIdentity,this.isPrimary=e.isPrimary||!1,this.isUnique=e.isUnique||!1,this.isArray=e.isArray||!1,this.comment=e.comment,this.enum=e.enum,this.enumName=e.enumName,this.primaryKeyConstraintName=e.primaryKeyConstraintName,this.asExpression=e.asExpression,this.generatedType=e.generatedType,this.spatialFeatureType=e.spatialFeatureType,this.srid=e.srid)}clone(){return new cR({name:this.name,type:this.type,length:this.length,width:this.width,charset:this.charset,collation:this.collation,precision:this.precision,scale:this.scale,zerofill:this.zerofill,unsigned:this.unsigned,enum:this.enum,enumName:this.enumName,primaryKeyConstraintName:this.primaryKeyConstraintName,asExpression:this.asExpression,generatedType:this.generatedType,default:this.default,onUpdate:this.onUpdate,isNullable:this.isNullable,isGenerated:this.isGenerated,generationStrategy:this.generationStrategy,generatedIdentity:this.generatedIdentity,isPrimary:this.isPrimary,isUnique:this.isUnique,isArray:this.isArray,comment:this.comment,spatialFeatureType:this.spatialFeatureType,srid:this.srid})}}class uR{constructor(e){this["@instanceof"]=Symbol.for("TableIndex"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.isUnique=!!e.isUnique,this.isSpatial=!!e.isSpatial,this.isFulltext=!!e.isFulltext,this.isNullFiltered=!!e.isNullFiltered,this.parser=e.parser,this.where=e.where?e.where:""}clone(){return new uR({name:this.name,columnNames:[...this.columnNames],isUnique:this.isUnique,isSpatial:this.isSpatial,isFulltext:this.isFulltext,isNullFiltered:this.isNullFiltered,parser:this.parser,where:this.where})}static create(e){return new uR({name:e.name,columnNames:e.columns.map((e=>e.databaseName)),isUnique:e.isUnique,isSpatial:e.isSpatial,isFulltext:e.isFulltext,isNullFiltered:e.isNullFiltered,parser:e.parser,where:e.where})}}class dR{constructor(e){this["@instanceof"]=Symbol.for("TableForeignKey"),this.columnNames=[],this.referencedColumnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.referencedColumnNames=e.referencedColumnNames,this.referencedDatabase=e.referencedDatabase,this.referencedSchema=e.referencedSchema,this.referencedTableName=e.referencedTableName,this.onDelete=e.onDelete,this.onUpdate=e.onUpdate,this.deferrable=e.deferrable}clone(){return new dR({name:this.name,columnNames:[...this.columnNames],referencedColumnNames:[...this.referencedColumnNames],referencedDatabase:this.referencedDatabase,referencedSchema:this.referencedSchema,referencedTableName:this.referencedTableName,onDelete:this.onDelete,onUpdate:this.onUpdate,deferrable:this.deferrable})}static create(e,t){return new dR({name:e.name,columnNames:e.columnNames,referencedColumnNames:e.referencedColumnNames,referencedDatabase:e.referencedEntityMetadata.database,referencedSchema:e.referencedEntityMetadata.schema,referencedTableName:e.referencedTablePath,onDelete:e.onDelete,onUpdate:e.onUpdate,deferrable:e.deferrable})}}class hR{static createTableColumnOptions(e,t){return{name:e.databaseName,length:t.getColumnLength(e),width:e.width,charset:e.charset,collation:e.collation,precision:e.precision,scale:e.scale,zerofill:e.zerofill,unsigned:e.unsigned,asExpression:e.asExpression,generatedType:e.generatedType,default:t.normalizeDefault(e),onUpdate:e.onUpdate,comment:e.comment,isGenerated:e.isGenerated,generationStrategy:e.generationStrategy,generatedIdentity:e.generatedIdentity,isNullable:e.isNullable,type:t.normalizeType(e),isPrimary:e.isPrimary,isUnique:t.normalizeIsUnique(e),isArray:e.isArray||!1,enum:e.enum?e.enum.map((e=>e+"")):e.enum,enumName:e.enumName,primaryKeyConstraintName:e.primaryKeyConstraintName,spatialFeatureType:e.spatialFeatureType,srid:e.srid}}}class pR{constructor(e){this["@instanceof"]=Symbol.for("TableUnique"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.deferrable=e.deferrable}clone(){return new pR({name:this.name,columnNames:[...this.columnNames],deferrable:this.deferrable})}static create(e){return new pR({name:e.name,columnNames:e.columns.map((e=>e.databaseName)),deferrable:e.deferrable})}}class mR{constructor(e){this["@instanceof"]=Symbol.for("TableCheck"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.expression=e.expression}clone(){return new mR({name:this.name,columnNames:this.columnNames?[...this.columnNames]:[],expression:this.expression})}static create(e){return new mR({name:e.name,expression:e.expression})}}class fR{constructor(e){this["@instanceof"]=Symbol.for("TableExclusion"),this.name=e.name,this.expression=e.expression}clone(){return new fR({name:this.name,expression:this.expression})}static create(e){return new fR({name:e.name,expression:e.expression})}}class gR{constructor(e){this["@instanceof"]=Symbol.for("Table"),this.columns=[],this.indices=[],this.foreignKeys=[],this.uniques=[],this.checks=[],this.exclusions=[],this.justCreated=!1,this.withoutRowid=!1,e&&(this.database=e.database,this.schema=e.schema,this.name=e.name,e.columns&&(this.columns=e.columns.map((e=>new cR(e)))),e.indices&&(this.indices=e.indices.map((e=>new uR(e)))),e.foreignKeys&&(this.foreignKeys=e.foreignKeys.map((t=>new dR({...t,referencedDatabase:(null==t?void 0:t.referencedDatabase)||e.database,referencedSchema:(null==t?void 0:t.referencedSchema)||e.schema})))),e.uniques&&(this.uniques=e.uniques.map((e=>new pR(e)))),e.checks&&(this.checks=e.checks.map((e=>new mR(e)))),e.exclusions&&(this.exclusions=e.exclusions.map((e=>new fR(e)))),void 0!==e.justCreated&&(this.justCreated=e.justCreated),e.withoutRowid&&(this.withoutRowid=e.withoutRowid),this.engine=e.engine)}get primaryColumns(){return this.columns.filter((e=>e.isPrimary))}clone(){return new gR({schema:this.schema,database:this.database,name:this.name,columns:this.columns.map((e=>e.clone())),indices:this.indices.map((e=>e.clone())),foreignKeys:this.foreignKeys.map((e=>e.clone())),uniques:this.uniques.map((e=>e.clone())),checks:this.checks.map((e=>e.clone())),exclusions:this.exclusions.map((e=>e.clone())),justCreated:this.justCreated,withoutRowid:this.withoutRowid,engine:this.engine})}addColumn(e){this.columns.push(e)}removeColumn(e){const t=this.columns.find((t=>t.name===e.name));t&&this.columns.splice(this.columns.indexOf(t),1)}addUniqueConstraint(e){if(this.uniques.push(e),1===e.columnNames.length){const t=this.columns.find((t=>t.name===e.columnNames[0]));t&&(t.isUnique=!0)}}removeUniqueConstraint(e){const t=this.uniques.find((t=>t.name===e.name));if(t&&(this.uniques.splice(this.uniques.indexOf(t),1),1===t.columnNames.length)){const e=this.columns.find((e=>e.name===t.columnNames[0]));e&&(e.isUnique=!1)}}addCheckConstraint(e){this.checks.push(e)}removeCheckConstraint(e){const t=this.checks.find((t=>t.name===e.name));t&&this.checks.splice(this.checks.indexOf(t),1)}addExclusionConstraint(e){this.exclusions.push(e)}removeExclusionConstraint(e){const t=this.exclusions.find((t=>t.name===e.name));t&&this.exclusions.splice(this.exclusions.indexOf(t),1)}addForeignKey(e){this.foreignKeys.push(e)}removeForeignKey(e){const t=this.foreignKeys.find((t=>t.name===e.name));t&&this.foreignKeys.splice(this.foreignKeys.indexOf(t),1)}addIndex(e,t=!1){if(this.indices.push(e),1===e.columnNames.length&&e.isUnique&&t){const t=this.columns.find((t=>t.name===e.columnNames[0]));t&&(t.isUnique=!0)}}removeIndex(e,t=!1){const n=this.indices.find((t=>t.name===e.name));if(n&&(this.indices.splice(this.indices.indexOf(n),1),1===n.columnNames.length&&n.isUnique&&t)){const e=this.columns.find((e=>e.name===n.columnNames[0]));e&&(e.isUnique=this.indices.some((t=>1===t.columnNames.length&&t.columnNames[0]===e.name&&!!n.isUnique)))}}findColumnByName(e){return this.columns.find((t=>t.name===e))}findColumnIndices(e){return this.indices.filter((t=>!!t.columnNames.find((t=>t===e.name))))}findColumnForeignKeys(e){return this.foreignKeys.filter((t=>!!t.columnNames.find((t=>t===e.name))))}findColumnUniques(e){return this.uniques.filter((t=>!!t.columnNames.find((t=>t===e.name))))}findColumnChecks(e){return this.checks.filter((t=>!!t.columnNames.find((t=>t===e.name))))}static create(e,t){const n=e.database===t.database?void 0:e.database,i=e.schema===t.options.schema?void 0:e.schema,r={database:e.database,schema:e.schema,name:t.buildTableName(e.tableName,i,n),withoutRowid:e.withoutRowid,engine:e.engine,columns:e.columns.filter((e=>e&&!e.isVirtualProperty)).map((e=>hR.createTableColumnOptions(e,t))),indices:e.indices.filter((e=>!0===e.synchronize)).map((e=>uR.create(e))),uniques:e.uniques.map((e=>pR.create(e))),checks:e.checks.map((e=>mR.create(e))),exclusions:e.exclusions.map((e=>fR.create(e)))};return new gR(r)}}class bR{constructor(e,t,n,i,r){this.id=e,this.timestamp=t,this.name=n,this.instance=i,this.transaction=r}}class yR{constructor(e,t,...n){this.value=e,this.type=t,this["@instanceof"]=Symbol.for("MssqlParameter"),this.params=[],this.params=n||[]}}class vR{constructor(e,t){this.connection=e,this.queryRunner=t,this.transaction="all";const{schema:n}=this.connection.driver.options,i=this.connection.driver.database;this.migrationsDatabase=i,this.migrationsSchema=n,this.migrationsTableName=e.options.migrationsTableName||"migrations",this.migrationsTable=this.connection.driver.buildTableName(this.migrationsTableName,n,i)}async executeMigration(e){return this.withQueryRunner((async t=>{await this.createMigrationsTableIfNotExist(t);const n=this.connection.driver.createSchemaBuilder();return PO.isRdbmsSchemaBuilder(n)&&await n.createMetadataTableIfNecessary(t),await t.beforeMigration(),await e.instance.up(t),await t.afterMigration(),await this.insertExecutedMigration(t,e),e}))}async getAllMigrations(){return Promise.resolve(this.getMigrations())}async getExecutedMigrations(){return this.withQueryRunner((async e=>(await this.createMigrationsTableIfNotExist(e),await this.loadExecutedMigrations(e))))}async getPendingMigrations(){const e=await this.getAllMigrations(),t=await this.getExecutedMigrations();return e.filter((e=>!t.find((t=>t.name===e.name))))}insertMigration(e){return this.withQueryRunner((t=>this.insertExecutedMigration(t,e)))}deleteMigration(e){return this.withQueryRunner((t=>this.deleteExecutedMigration(t,e)))}async showMigrations(){let e=!1;const t=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(t);const n=await this.loadExecutedMigrations(t),i=this.getMigrations();for(const r of i){const t=n.find((e=>e.name===r.name));t?this.connection.logger.logSchemaBuild(`[X] ${t.id} ${r.name}`):(e=!0,this.connection.logger.logSchemaBuild(`[ ] ${r.name}`))}return this.queryRunner||await t.release(),e}async executePendingMigrations(){const e=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(e);const t=this.connection.driver.createSchemaBuilder();PO.isRdbmsSchemaBuilder(t)&&await t.createMetadataTableIfNecessary(e);const n=await this.loadExecutedMigrations(e);let i=this.getLatestTimestampMigration(n);const r=this.getMigrations(),a=[],o=r.filter((e=>!n.find((t=>t.name===e.name))));if(!o.length)return this.connection.logger.logSchemaBuild("No migrations are pending"),this.queryRunner||await e.release(),[];if(this.connection.logger.logSchemaBuild(`${n.length} migrations are already loaded in the database.`),this.connection.logger.logSchemaBuild(`${r.length} migrations were found in the source code.`),i&&this.connection.logger.logSchemaBuild(`${i.name} is the last executed migration. It was executed on ${new Date(i.timestamp).toString()}.`),this.connection.logger.logSchemaBuild(`${o.length} migrations are new migrations must be executed.`),"all"===this.transaction){const e=o.filter((e=>{var t;return!(void 0===(null===(t=e.instance)||void 0===t?void 0:t.transaction))}));if(e.length>0){const t=new lR(e);throw this.connection.logger.logMigration(`Migrations failed, error: ${t.message}`),t}}const s={each:!0,none:!1,all:!1}[this.transaction];for(const d of o)if(d.instance){const e=d.instance.transaction;d.transaction=void 0===e?s:e}let l=!1;"all"!==this.transaction||e.isTransactionActive||(await e.beforeMigration(),await e.startTransaction(),l=!0);try{for(const t of o)this.fake?await this.insertExecutedMigration(e,t):(t.transaction&&!e.isTransactionActive&&(await e.beforeMigration(),await e.startTransaction(),l=!0),await t.instance.up(e).catch((e=>{throw this.connection.logger.logMigration(`Migration "${t.name}" failed, error: ${null==e?void 0:e.message}`),e})).then((async()=>{await this.insertExecutedMigration(e,t),t.transaction&&l&&(await e.commitTransaction(),await e.afterMigration())})).then((()=>{a.push(t),this.connection.logger.logSchemaBuild(`Migration ${t.name} has been ${this.fake?"(fake)":""} executed successfully.`)})));"all"===this.transaction&&l&&(await e.commitTransaction(),await e.afterMigration())}catch(c){if(l)try{await e.rollbackTransaction()}catch(u){}throw c}finally{this.queryRunner||await e.release()}return a}async undoLastMigration(){const e=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(e);const t=this.connection.driver.createSchemaBuilder();PO.isRdbmsSchemaBuilder(t)&&await t.createMetadataTableIfNecessary(e);const n=await this.loadExecutedMigrations(e);let i=this.getLatestExecutedMigration(n);if(!i)return void this.connection.logger.logSchemaBuild("No migrations were found in the database. Nothing to revert!");const r=this.getMigrations().find((e=>e.name===i.name));if(!r)throw new EO(`No migration ${i.name} was found in the source code. Make sure you have this migration in your codebase and its included in the connection options.`);this.connection.logger.logSchemaBuild(`${n.length} migrations are already loaded in the database.`),this.connection.logger.logSchemaBuild(`${i.name} is the last executed migration. It was executed on ${new Date(i.timestamp).toString()}.`),this.connection.logger.logSchemaBuild("Now reverting it...");let a=!1;"none"===this.transaction||e.isTransactionActive||(await e.startTransaction(),a=!0);try{this.fake||(await e.beforeMigration(),await r.instance.down(e),await e.afterMigration()),await this.deleteExecutedMigration(e,r),this.connection.logger.logSchemaBuild(`Migration ${r.name} has been ${this.fake?"(fake)":""} reverted successfully.`),a&&await e.commitTransaction()}catch(o){if(a)try{await e.rollbackTransaction()}catch(s){}throw o}finally{this.queryRunner||await e.release()}}async createMigrationsTableIfNotExist(e){if("mongodb"===this.connection.driver.options.type)return;await e.hasTable(this.migrationsTable)||await e.createTable(new gR({database:this.migrationsDatabase,schema:this.migrationsSchema,name:this.migrationsTable,columns:[{name:"id",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationId}),isGenerated:!0,generationStrategy:"increment",isPrimary:!0,isNullable:!1},{name:"timestamp",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp}),isPrimary:!1,isNullable:!1},{name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}),isNullable:!1}]}))}async loadExecutedMigrations(e){if("mongodb"===this.connection.driver.options.type){return e.cursor(this.migrationsTableName,{}).sort({_id:-1}).toArray()}return(await this.connection.manager.createQueryBuilder(e).select().orderBy(this.connection.driver.escape("id"),"DESC").from(this.migrationsTable,this.migrationsTableName).getRawMany()).map((e=>new bR(parseInt(e.id),parseInt(e.timestamp),e.name)))}getMigrations(){const e=this.connection.migrations.map((e=>{const t=e.name||e.constructor.name,n=parseInt(t.substr(-13),10);if(!n||isNaN(n))throw new EO(`${t} migration name is wrong. Migration class name should have a JavaScript timestamp appended.`);return new bR(void 0,n,t,e)}));return this.checkForDuplicateMigrations(e),e.sort(((e,t)=>e.timestamp-t.timestamp))}checkForDuplicateMigrations(e){const t=e.map((e=>e.name)),n=Array.from(new Set(t.filter(((e,n)=>t.indexOf(e)<n))));if(n.length>0)throw Error(`Duplicate migrations: ${n.join(", ")}`)}getLatestTimestampMigration(e){const t=e.map((e=>e)).sort(((e,t)=>-1*(e.timestamp-t.timestamp)));return t.length>0?t[0]:void 0}getLatestExecutedMigration(e){return e.length>0?e[0]:void 0}async insertExecutedMigration(e,t){const n={};if("mssql"===this.connection.driver.options.type?(n.timestamp=new yR(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),n.name=new yR(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))):(n.timestamp=t.timestamp,n.name=t.name),"mongodb"===this.connection.driver.options.type){const t=e;await t.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).insertOne(n)}else{const t=e.manager.createQueryBuilder();await t.insert().into(this.migrationsTable).values(n).execute()}}async deleteExecutedMigration(e,t){const n={};if("mssql"===this.connection.driver.options.type?(n.timestamp=new yR(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),n.name=new yR(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))):(n.timestamp=t.timestamp,n.name=t.name),"mongodb"===this.connection.driver.options.type){const t=e;await t.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).deleteOne(n)}else{const t=e.manager.createQueryBuilder();await t.delete().from(this.migrationsTable).where(`${t.escape("timestamp")} = :timestamp`).andWhere(`${t.escape("name")} = :name`).setParameters(n).execute()}}async withQueryRunner(e){const t=this.queryRunner||this.connection.createQueryRunner();try{return await e(t)}finally{this.queryRunner||await t.release()}}}function wR(e,t,n){let i=[],r={};return function a(o){r[o]=!0,i.push(o),e[o].forEach((function(e){if(r[e]){if(i.indexOf(e)>=0)throw i.push(e),new EO(`Dependency Cycle Found: ${i.join(" -> ")}`)}else a(e)})),i.pop(),t&&0!==e[o].length||-1!==n.indexOf(o)||n.push(o)}}class ER{constructor(){this.nodes={},this.outgoingEdges={},this.incomingEdges={}}addNode(e,t){this.hasNode(e)||(this.nodes[e]=2===arguments.length?t:e,this.outgoingEdges[e]=[],this.incomingEdges[e]=[])}removeNode(e){this.hasNode(e)&&(delete this.nodes[e],delete this.outgoingEdges[e],delete this.incomingEdges[e],[this.incomingEdges,this.outgoingEdges].forEach((function(t){Object.keys(t).forEach((function(n){let i=t[n].indexOf(e);i>=0&&t[n].splice(i,1)}),this)})))}hasNode(e){return this.nodes.hasOwnProperty(e)}getNodeData(e){if(this.hasNode(e))return this.nodes[e];throw new EO(`Node does not exist: ${e}`)}setNodeData(e,t){if(!this.hasNode(e))throw new EO(`Node does not exist: ${e}`);this.nodes[e]=t}addDependency(e,t){if(!this.hasNode(e))throw new EO(`Node does not exist: ${e}`);if(!this.hasNode(t))throw new EO(`Node does not exist: ${t}`);return-1===this.outgoingEdges[e].indexOf(t)&&this.outgoingEdges[e].push(t),-1===this.incomingEdges[t].indexOf(e)&&this.incomingEdges[t].push(e),!0}removeDependency(e,t){let n;this.hasNode(e)&&(n=this.outgoingEdges[e].indexOf(t),n>=0&&this.outgoingEdges[e].splice(n,1)),this.hasNode(t)&&(n=this.incomingEdges[t].indexOf(e),n>=0&&this.incomingEdges[t].splice(n,1))}dependenciesOf(e,t){if(this.hasNode(e)){let n=[];wR(this.outgoingEdges,t,n)(e);let i=n.indexOf(e);return i>=0&&n.splice(i,1),n}throw new EO(`Node does not exist: ${e}`)}dependantsOf(e,t){if(this.hasNode(e)){let n=[];wR(this.incomingEdges,t,n)(e);let i=n.indexOf(e);return i>=0&&n.splice(i,1),n}throw new EO(`Node does not exist: ${e}`)}overallOrder(e){let t=this,n=[],i=Object.keys(this.nodes);if(0===i.length)return n;{let r=wR(this.outgoingEdges,!1,[]);i.forEach((function(e){r(e)}));let a=wR(this.outgoingEdges,e,n);return i.filter((function(e){return 0===t.incomingEdges[e].length})).forEach((function(e){a(e)})),n}}}class xR{static isGreaterOrEqual(e,t){const n=TR(e),i=TR(t);return n[0]>i[0]||n[0]===i[0]&&n[1]>i[1]||n[0]===i[0]&&n[1]===i[1]&&n[2]>=i[2]}}function TR(e=""){const t=[0,0,0];return e.split(".").forEach(((e,n)=>t[n]=parseInt(e,10))),t}class CR{static isSQLiteFamily(e){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(e.options.type)}static isMySQLFamily(e){return["mysql","mariadb"].includes(e.options.type)}static isReleaseVersionOrGreater(e,t){return null!=e.version&&xR.isGreaterOrEqual(e.version,t)}static isPostgresFamily(e){return["postgres","aurora-postgres","cockroachdb"].includes(e.options.type)}static buildDriverOptions(e,t){if(e.url){const n=this.parseConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const e of Object.keys(n))void 0===n[e]&&delete n[e];return Object.assign({},e,n)}return Object.assign({},e)}static buildMongoDBDriverOptions(e,t){if(e.url){const n=this.parseMongoDBConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const e of Object.keys(n))void 0===n[e]&&delete n[e];return Object.assign({},e,n)}return Object.assign({},e)}static buildAlias({maxAliasLength:e},t,...n){const i=1===n.length?n[0]:n.join(t&&t.joiner?t.joiner:"_");if(e&&e>0&&i.length>e){if(t&&!0===t.shorten){const t=vO(i);if(t.length<e)return t}return function(e,t={}){const n=gO("sha1");n.update(e,"utf8");const i=n.digest("hex");return t.length?i.slice(0,t.length):i}(i,{length:e})}return i}static buildColumnAlias({maxAliasLength:e},t,...n){return"string"==typeof t?(n.unshift(t),t={shorten:!1,joiner:"_"}):t=Object.assign({shorten:!1,joiner:"_"},t),this.buildAlias({maxAliasLength:e},t,...n)}static parseConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),r=i.indexOf("/"),a=-1!==r?i.substr(0,r):i;let o=-1!==r?i.substr(r+1):void 0;o&&-1!==o.indexOf("?")&&(o=o.substr(0,o.indexOf("?")));const s=a.lastIndexOf("@"),l=a.substr(0,s),c=a.substr(s+1);let u=l,d="";const h=l.indexOf(":");-1!==h&&(u=l.substr(0,h),d=l.substr(h+1));const[p,m]=c.split(":");return{type:t,host:p,username:decodeURIComponent(u),password:decodeURIComponent(d),port:m?parseInt(m):void 0,database:o||void 0}}static parseMongoDBConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),r=i.indexOf("/"),a=-1!==r?i.substr(0,r):i;let o,s,l,c,u=-1!==r?i.substr(r+1):void 0,d="",h={};if(u&&-1!==u.indexOf("?")){d=u.substr(u.indexOf("?")+1,u.length);let e,t;d.split("&").forEach((n=>{e=n.split("=")[0],t=n.split("=")[1],h[e]=t})),c=h.replicaSet,u=u.substr(0,u.indexOf("?"))}const p=a.lastIndexOf("@"),m=a.substr(0,p),f=a.substr(p+1);let g=m,b="";const y=m.indexOf(":");-1!==y&&(g=m.substr(0,y),b=m.substr(y+1)),c?l=f:[o,s]=f.split(":");let v={type:t,host:o,hostReplicaSet:l,username:decodeURIComponent(g),password:decodeURIComponent(b),port:s?parseInt(s):void 0,database:u||void 0};for(const[w,E]of Object.entries(h))v[w]=E;return v}}class SR{validateMany(e,t){e.forEach((n=>this.validate(n,e,t))),this.validateDependencies(e),this.validateEagerRelations(e)}validate(e,t,n){if(!e.primaryColumns.length&&!e.isJunction)throw new UO(e);if(e.primaryColumns.length>1){if(!e.primaryColumns.every(((e,t,n)=>e.primaryKeyConstraintName===n[0].primaryKeyConstraintName)))throw new EO(`Entity ${e.name} has multiple primary columns with different constraint names. Constraint names should be the equal.`)}if("STI"===e.inheritancePattern||"entity-child"===e.tableType){if(!e.discriminatorColumn)throw new EO(`Entity ${e.name} using single-table inheritance, it should also have a discriminator column. Did you forget to put discriminator column options?`);if(void 0===e.discriminatorValue)throw new EO(`Entity ${e.name} has an undefined discriminator value. Discriminator value should be defined.`);const n=t.find((t=>t!==e&&("STI"===t.inheritancePattern||"entity-child"===t.tableType)&&t.tableName===e.tableName&&t.discriminatorValue===e.discriminatorValue&&t.inheritanceTree.some((t=>-1!==e.inheritanceTree.indexOf(t)))));if(n)throw new EO(`Entities ${e.name} and ${n.name} have the same discriminator values. Make sure they are different while using the @ChildEntity decorator.`)}if(e.relationCounts.forEach((e=>{if(e.relation.isManyToOne||e.relation.isOneToOne)throw new EO("Relation count can not be implemented on ManyToOne or OneToOne relations.")})),"mongodb"!==n.options.type&&e.columns.filter((e=>!e.isVirtualProperty)).forEach((t=>{const i=n.normalizeType(t);if(-1===n.supportedDataTypes.indexOf(i))throw new XO(t,i,n.options.type);if(t.length&&-1===n.withLengthColumnTypes.indexOf(i))throw new EO(`Column ${t.propertyName} of Entity ${e.name} does not support length property.`);if("enum"===t.type&&!t.enum&&!t.enumName)throw new EO(`Column "${t.propertyName}" of Entity "${e.name}" is defined as enum, but missing "enum" or "enumName" properties.`)})),CR.isMySQLFamily(n)||"aurora-mysql"===n.options.type){if(e.columns.filter((e=>e.isGenerated&&"uuid"!==e.generationStrategy)).length>1)throw new EO(`Error in ${e.name} entity. There can be only one auto-increment column in MySql table.`)}if(CR.isMySQLFamily(n)){if(0===t.filter((e=>e.database)).length&&!n.database)throw new sR("database")}if("mssql"===n.options.type){if(e.columns.filter((e=>e.charset)).length>1)throw new EO("Character set specifying is not supported in Sql Server")}if("postgres"===n.options.type){const t=e.columns.find((e=>e.asExpression&&(!e.generatedType||"VIRTUAL"===e.generatedType)));if(t)throw new EO(`Column "${t.propertyName}" of Entity "${e.name}" is defined as VIRTUAL, but Postgres supports only STORED generated columns.`)}const i=e.create(void 0,{fromDeserializer:!0});e.relations.forEach((e=>{if(e.isManyToMany||e.isOneToMany){if(!1===e.persistenceEnabled)return;const t=e.getEntityValue(i);if(Array.isArray(t))throw new ZO(e)}})),e.relations.forEach((e=>{if(n.supportedOnDeleteTypes&&e.onDelete&&!n.supportedOnDeleteTypes.includes(e.onDelete))throw new EO(`OnDeleteType "${e.onDelete}" is not supported for ${n.options.type}!`);if(n.supportedOnUpdateTypes&&e.onUpdate&&!n.supportedOnUpdateTypes.includes(e.onUpdate))throw new EO(`OnUpdateType "${e.onUpdate}" is not valid for ${n.options.type}!`)})),e.relations.forEach((t=>{if(t.isCascadeRemove&&t.inverseRelation&&t.inverseRelation.isCascadeRemove)throw new EO(`Relation ${e.name}#${t.propertyName} and ${t.inverseRelation.entityMetadata.name}#${t.inverseRelation.propertyName} both has cascade remove set. This may lead to unexpected circular removals. Please set cascade remove only from one side of relationship.`)})),e.eagerRelations.forEach((e=>{}))}validateDependencies(e){const t=new ER;e.forEach((e=>{t.addNode(e.name)})),e.forEach((e=>{e.relationsWithJoinColumns.filter((e=>!e.isNullable)).forEach((n=>{t.addDependency(e.name,n.inverseEntityMetadata.name)}))}));try{t.overallOrder()}catch(n){throw new zO(n.toString().replace("Error: Dependency Cycle Found: ",""))}}validateEagerRelations(e){e.forEach((e=>{e.eagerRelations.forEach((t=>{if(t.inverseRelation&&t.inverseRelation.isEager)throw new EO(`Circular eager relations are disallowed. ${e.targetName}#${t.propertyPath} contains "eager: true", and its inverse side ${t.inverseEntityMetadata.targetName}#${t.inverseRelation.propertyPath} contains "eager: true" as well. Remove "eager: true" from one side of the relation.`)}))}))}}class NR{}class kR{}class AR{}class _R{}class OR{}class RR{}class PR{}class MR{}class $R{}class IR{}class DR{}class LR{static isFindOneOptions(e){const t=e;return t&&(Array.isArray(t.select)||Array.isArray(t.relations)||"object"==typeof t.select||"object"==typeof t.relations||"object"==typeof t.where||"object"==typeof t.join||"object"==typeof t.order||"object"==typeof t.cache||"boolean"==typeof t.cache||"number"==typeof t.cache||"string"==typeof t.comment||"object"==typeof t.lock||"object"==typeof t.loadRelationIds||"boolean"==typeof t.loadRelationIds||"boolean"==typeof t.loadEagerRelations||"boolean"==typeof t.withDeleted||"string"==typeof t.relationLoadStrategy||"boolean"==typeof t.transaction)}static isFindManyOptions(e){const t=e;return t&&(this.isFindOneOptions(t)||"number"==typeof t.skip||"number"==typeof t.take||"string"==typeof t.skip||"string"==typeof t.take)}static extractFindManyOptionsAlias(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias}static applyOptionsToTreeQueryBuilder(e,t){if(null==t?void 0:t.relations){const n=[...t.relations];if(LR.applyRelationsRecursively(e,n,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),n.length>0)throw new YO(n)}return e}static applyRelationsRecursively(e,t,n,i,r){let a=[];if(r){const e=new RegExp("^"+r.replace(".","\\.")+"\\.");a=t.filter((t=>t.match(e))).map((t=>i.findRelationWithPropertyPath(t.replace(e,"")))).filter((e=>e))}else a=t.map((e=>i.findRelationWithPropertyPath(e))).filter((e=>e));a.forEach((a=>{let o=CR.buildAlias(e.connection.driver,{joiner:"__"},n,a.propertyPath);const s=n+"."+a.propertyPath;let l,c;if("query"===e.expressionMap.relationLoadStrategy?e.concatRelationMetadata(a):e.leftJoinAndSelect(s,o),t.splice(t.indexOf(r?r+"."+a.propertyPath:a.propertyPath),1),"query"===e.expressionMap.relationLoadStrategy)l=a.inverseEntityMetadata,c=o;else{const t=e.expressionMap.joinAttributes.find((e=>e.entityOrProperty===s));l=t.metadata,c=t.alias.name}if(!c||!l)throw new VO(a.propertyPath,i);if(this.applyRelationsRecursively(e,t,c,l,r?r+"."+a.propertyPath:a.propertyPath),"join"===e.expressionMap.relationLoadStrategy){const t=i.relations.find((e=>e.propertyName===a.propertyPath));t&&this.joinEagerRelations(e,o,t.inverseEntityMetadata)}}))}static joinEagerRelations(e,t,n){n.eagerRelations.forEach((n=>{let i=CR.buildAlias(e.connection.driver,{joiner:"__"},t,n.propertyPath),r=!0;for(const s of e.expressionMap.joinAttributes)if(void 0===s.condition&&void 0===s.mapToProperty&&void 0===s.isMappingMany&&"LEFT"===s.direction&&s.entityOrProperty===`${t}.${n.propertyPath}`){r=!1,i=s.alias.name;break}const a=Boolean(e.expressionMap.joinAttributes.find((e=>e.alias.name===i)));r&&!a&&e.leftJoin(t+"."+n.propertyPath,i);let o=!0;for(const t of e.expressionMap.selects)if(void 0===t.aliasName&&void 0===t.virtual&&t.selection===i){o=!1;break}o&&e.addSelect(i),this.joinEagerRelations(e,i,n.inverseEntityMetadata)}))}}class jR{static createRelationMaps(e,t,n,i){return i.map((i=>{var r;const a=t.treeParentRelation.joinColumns[0],o=null!==(r=a.referencedColumn)&&void 0!==r?r:t.primaryColumns[0],s=a.givenDatabaseName||a.databaseName,l=o.givenDatabaseName||o.databaseName,c=i[n+"_"+l],u=i[n+"_"+s];return{id:e.connection.driver.prepareHydratedValue(c,o),parentId:e.connection.driver.prepareHydratedValue(u,a)}}))}static buildChildrenEntityTree(e,t,n,i,r){var a;const o=e.treeChildrenRelation.propertyName;if(0===r.depth)return void(t[o]=[]);const s=null!==(a=e.treeParentRelation.joinColumns[0].referencedColumn)&&void 0!==a?a:e.primaryColumns[0],l=s.getEntityValue(t),c=i.filter((e=>e.parentId===l)),u=new Set(c.map((e=>e.id)));t[o]=n.filter((e=>u.has(s.getEntityValue(e)))),t[o].forEach((t=>{jR.buildChildrenEntityTree(e,t,n,i,{...r,depth:r.depth-1})}))}static buildParentEntityTree(e,t,n,i){var r;const a=e.treeParentRelation.propertyName,o=null!==(r=e.treeParentRelation.joinColumns[0].referencedColumn)&&void 0!==r?r:e.primaryColumns[0],s=o.getEntityValue(t),l=i.find((e=>e.id===s)),c=n.find((e=>!!l&&o.getEntityValue(e)===l.parentId));c&&(t[a]=c,jR.buildParentEntityTree(e,t[a],n,i))}}class qR{get metadata(){return this.manager.connection.getMetadata(this.target)}constructor(e,t,n){this.target=e,this.manager=t,this.queryRunner=n}createQueryBuilder(e,t){return this.manager.createQueryBuilder(this.metadata.target,e||this.metadata.targetName,t||this.queryRunner)}hasId(e){return this.manager.hasId(this.metadata.target,e)}getId(e){return this.manager.getId(this.metadata.target,e)}create(e){return this.manager.create(this.metadata.target,e)}merge(e,...t){return this.manager.merge(this.metadata.target,e,...t)}preload(e){return this.manager.preload(this.metadata.target,e)}save(e,t){return this.manager.save(this.metadata.target,e,t)}remove(e,t){return this.manager.remove(this.metadata.target,e,t)}softRemove(e,t){return this.manager.softRemove(this.metadata.target,e,t)}recover(e,t){return this.manager.recover(this.metadata.target,e,t)}insert(e){return this.manager.insert(this.metadata.target,e)}update(e,t){return this.manager.update(this.metadata.target,e,t)}upsert(e,t){return this.manager.upsert(this.metadata.target,e,t)}delete(e){return this.manager.delete(this.metadata.target,e)}softDelete(e){return this.manager.softDelete(this.metadata.target,e)}restore(e){return this.manager.restore(this.metadata.target,e)}exist(e){return this.manager.exists(this.metadata.target,e)}count(e){return this.manager.count(this.metadata.target,e)}countBy(e){return this.manager.countBy(this.metadata.target,e)}sum(e,t){return this.manager.sum(this.metadata.target,e,t)}average(e,t){return this.manager.average(this.metadata.target,e,t)}minimum(e,t){return this.manager.minimum(this.metadata.target,e,t)}maximum(e,t){return this.manager.maximum(this.metadata.target,e,t)}async find(e){return this.manager.find(this.metadata.target,e)}async findBy(e){return this.manager.findBy(this.metadata.target,e)}findAndCount(e){return this.manager.findAndCount(this.metadata.target,e)}findAndCountBy(e){return this.manager.findAndCountBy(this.metadata.target,e)}async findByIds(e){return this.manager.findByIds(this.metadata.target,e)}async findOne(e){return this.manager.findOne(this.metadata.target,e)}async findOneBy(e){return this.manager.findOneBy(this.metadata.target,e)}async findOneById(e){return this.manager.findOneById(this.metadata.target,e)}async findOneOrFail(e){return this.manager.findOneOrFail(this.metadata.target,e)}async findOneByOrFail(e){return this.manager.findOneByOrFail(this.metadata.target,e)}query(e,t){return this.manager.query(e,t)}clear(){return this.manager.clear(this.metadata.target)}increment(e,t,n){return this.manager.increment(this.metadata.target,e,t,n)}decrement(e,t,n){return this.manager.decrement(this.metadata.target,e,t,n)}extend(e){const t=this.constructor,{target:n,manager:i,queryRunner:r}=this,a=new class extends t{}(n,i,r);return Object.assign(a,e),a}}class BR extends qR{async findTrees(e){const t=await this.findRoots(e);return await Promise.all(t.map((t=>this.findDescendantsTree(t,e)))),t}findRoots(e){const t=this.metadata.treeParentRelation.joinColumns[0],n=t.givenDatabaseName||t.databaseName,i=this.createQueryBuilder("treeEntity");return LR.applyOptionsToTreeQueryBuilder(i,e),i.where(`${(e=>this.manager.connection.driver.escape(e))("treeEntity")}.${(e=>this.manager.connection.driver.escape(e))(n)} IS NULL`).getMany()}findDescendants(e,t){const n=this.createDescendantsQueryBuilder("treeEntity","treeClosure",e);return LR.applyOptionsToTreeQueryBuilder(n,t),n.getMany()}async findDescendantsTree(e,t){const n=this.createDescendantsQueryBuilder("treeEntity","treeClosure",e);LR.applyOptionsToTreeQueryBuilder(n,t);const i=await n.getRawAndEntities(),r=jR.createRelationMaps(this.manager,this.metadata,"treeEntity",i.raw);return jR.buildChildrenEntityTree(this.metadata,e,i.entities,r,{depth:-1,...t}),e}countDescendants(e){return this.createDescendantsQueryBuilder("treeEntity","treeClosure",e).getCount()}createDescendantsQueryBuilder(e,t,n){const i=e=>this.manager.connection.driver.escape(e);if("closure-table"===this.metadata.treeType){const r=this.metadata.closureJunctionTable.descendantColumns.map((n=>i(t)+"."+i(n.propertyPath)+" = "+i(e)+"."+i(n.referencedColumn.propertyPath))).join(" AND "),a={},o=this.metadata.closureJunctionTable.ancestorColumns.map((e=>(a[e.referencedColumn.propertyName]=e.referencedColumn.getEntityValue(n),i(t)+"."+i(e.propertyPath)+" = :"+e.referencedColumn.propertyName))).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,r).where(o).setParameters(a)}if("nested-set"===this.metadata.treeType){const t=e+"."+this.metadata.nestedSetLeftColumn.propertyPath+" BETWEEN joined."+this.metadata.nestedSetLeftColumn.propertyPath+" AND joined."+this.metadata.nestedSetRightColumn.propertyPath,i={},r=this.metadata.treeParentRelation.joinColumns.map((e=>{const t=e.referencedColumn.propertyPath.replace(".","_");return i[t]=e.referencedColumn.getEntityValue(n),"joined."+e.referencedColumn.propertyPath+" = :"+t})).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.targetName,"joined",t).where(r,i)}if("materialized-path"===this.metadata.treeType)return this.createQueryBuilder(e).where((t=>{const i=t.subQuery().select(`${this.metadata.targetName}.${this.metadata.materializedPathColumn.propertyPath}`,"path").from(this.metadata.target,this.metadata.targetName).whereInIds(this.metadata.getEntityIdMap(n));return CR.isSQLiteFamily(this.manager.connection.driver)?`${e}.${this.metadata.materializedPathColumn.propertyPath} LIKE ${i.getQuery()} || '%'`:`${e}.${this.metadata.materializedPathColumn.propertyPath} LIKE NULLIF(CONCAT(${i.getQuery()}, '%'), '%')`}));throw new EO("Supported only in tree entities")}findAncestors(e,t){const n=this.createAncestorsQueryBuilder("treeEntity","treeClosure",e);return LR.applyOptionsToTreeQueryBuilder(n,t),n.getMany()}async findAncestorsTree(e,t){const n=this.createAncestorsQueryBuilder("treeEntity","treeClosure",e);LR.applyOptionsToTreeQueryBuilder(n,t);const i=await n.getRawAndEntities(),r=jR.createRelationMaps(this.manager,this.metadata,"treeEntity",i.raw);return jR.buildParentEntityTree(this.metadata,e,i.entities,r),e}countAncestors(e){return this.createAncestorsQueryBuilder("treeEntity","treeClosure",e).getCount()}createAncestorsQueryBuilder(e,t,n){if("closure-table"===this.metadata.treeType){const i=this.metadata.closureJunctionTable.ancestorColumns.map((n=>t+"."+n.propertyPath+" = "+e+"."+n.referencedColumn.propertyPath)).join(" AND "),r={},a=this.metadata.closureJunctionTable.descendantColumns.map((e=>(r[e.referencedColumn.propertyName]=e.referencedColumn.getEntityValue(n),t+"."+e.propertyPath+" = :"+e.referencedColumn.propertyName))).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,i).where(a).setParameters(r)}if("nested-set"===this.metadata.treeType){const t="joined."+this.metadata.nestedSetLeftColumn.propertyPath+" BETWEEN "+e+"."+this.metadata.nestedSetLeftColumn.propertyPath+" AND "+e+"."+this.metadata.nestedSetRightColumn.propertyPath,i={},r=this.metadata.treeParentRelation.joinColumns.map((e=>{const t=e.referencedColumn.propertyPath.replace(".","_");return i[t]=e.referencedColumn.getEntityValue(n),"joined."+e.referencedColumn.propertyPath+" = :"+t})).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.targetName,"joined",t).where(r,i)}if("materialized-path"===this.metadata.treeType)return this.createQueryBuilder(e).where((t=>{const i=t.subQuery().select(`${this.metadata.targetName}.${this.metadata.materializedPathColumn.propertyPath}`,"path").from(this.metadata.target,this.metadata.targetName).whereInIds(this.metadata.getEntityIdMap(n));return CR.isSQLiteFamily(this.manager.connection.driver)?`${i.getQuery()} LIKE ${e}.${this.metadata.materializedPathColumn.propertyPath} || '%'`:`${i.getQuery()} LIKE CONCAT(${e}.${this.metadata.materializedPathColumn.propertyPath}, '%')`}));throw new EO("Supported only in tree entities")}}class FR{transform(e,t,n,i=!1){return this.groupAndTransform(e,t,n,i),e}groupAndTransform(e,t,n,i=!1){n.nonVirtualColumns.forEach((n=>{const i=n.getEntityValue(t);void 0!==i&&n.setEntityValue(e,i)})),n.relations.length&&n.relations.forEach((n=>{let r=n.getEntityValue(e);const a=n.getEntityValue(t,i);if(void 0!==a)if(n.isOneToMany||n.isManyToMany){if(!Array.isArray(a))return;r||(r=[],n.setEntityValue(e,r)),a.forEach((e=>{let t=r.find((t=>n.inverseEntityMetadata.compareEntities(e,t)));const a=n.inverseEntityMetadata.findInheritanceMetadata(e);t||(t=a.create(void 0,{fromDeserializer:!0}),r.push(t)),this.groupAndTransform(t,e,a,i)}))}else{if(!RO.isObject(a))return void(RO.isObject(r)||n.setEntityValue(e,a));const t=n.inverseEntityMetadata.findInheritanceMetadata(a);r||(r=t.create(void 0,{fromDeserializer:!0}),n.setEntityValue(e,r)),this.groupAndTransform(r,a,t,i)}}))}}class zR{constructor(e,t,n,i){this.plainEntity=e,this.metadata=t,this.parentLoadMapItem=n,this.relation=i}get target(){return this.metadata.target}get id(){return this.metadata.getEntityIdMixedMap(this.plainEntity)}}class UR{constructor(){this.loadMapItems=[]}get mainLoadMapItem(){return this.loadMapItems.find((e=>!e.relation&&!e.parentLoadMapItem))}addLoadMap(e){this.loadMapItems.find((t=>t.target===e.target&&t.id===e.id))||this.loadMapItems.push(e)}fillEntities(e,t){t.forEach((t=>{const n=this.loadMapItems.find((n=>n.target===e&&n.metadata.compareEntities(t,n.plainEntity)));n&&(n.entity=t)}))}groupByTargetIds(){const e=[];return this.loadMapItems.forEach((t=>{let n=e.find((e=>e.target===t.target));n||(n={target:t.target,ids:[]},e.push(n)),n.ids.push(t.id)})),e}}class VR{constructor(e){this.manager=e}async transform(e,t){if(!t.hasAllPrimaryKeys(e))return Promise.reject("Given object does not have a primary column, cannot transform it to database entity.");const n=new UR,i=(e,r,a,o)=>{const s=new zR(e,r,a,o);n.addLoadMap(s),r.extractRelationValuesFromEntity(e,t.relations).filter((e=>null!=e)).forEach((([e,t,n])=>i(t,n,s,e)))};return i(e,t),await Promise.all(n.groupByTargetIds().map((e=>this.manager.findByIds(e.target,e.ids).then((t=>n.fillEntities(e.target,t)))))),n.loadMapItems.forEach((e=>{e.relation&&e.entity&&e.parentLoadMapItem&&e.parentLoadMapItem.entity&&(e.relation.isManyToMany||e.relation.isOneToMany?(e.parentLoadMapItem.entity[e.relation.propertyName]||(e.parentLoadMapItem.entity[e.relation.propertyName]=[]),e.parentLoadMapItem.entity[e.relation.propertyName].push(e.entity)):e.parentLoadMapItem.entity[e.relation.propertyName]=e.entity)})),n.mainLoadMapItem?n.mainLoadMapItem.entity:void 0}}class WR{get repository(){const e=this.getCustomRepositoryTarget(this);if(!e)throw new FO(this.constructor);return this.manager.getRepository(e)}get treeRepository(){const e=this.getCustomRepositoryTarget(this);if(!e)throw new FO(this.constructor);return this.manager.getTreeRepository(e)}createQueryBuilder(e){const t=this.getCustomRepositoryTarget(this.constructor);if(!t)throw new FO(this.constructor);return this.manager.getRepository(t).createQueryBuilder(e)}createQueryBuilderFor(e,t){return this.getRepositoryFor(e).createQueryBuilder(t)}getRepositoryFor(e){return this.manager.getRepository(e)}getTreeRepositoryFor(e){return this.manager.getTreeRepository(e)}getCustomRepositoryTarget(e){const t=h$().entityRepositories.find((t=>t.target===("function"==typeof e?e:e.constructor)));if(!t)throw new AO(e);return t.entity}}class HR{constructor(e){this.subjects=[...e],this.metadatas=this.getUniqueMetadatas(this.subjects)}sort(e){if(!this.metadatas.length)return this.subjects;const t=[];if("delete"===e){const e=this.subjects.filter((e=>!e.entity&&!e.databaseEntity));t.push(...e),this.removeAlreadySorted(e)}const n=this.getNonNullableDependencies();let i=this.toposort(n);"insert"===e&&(i=i.reverse()),i.forEach((e=>{const n=this.subjects.filter((t=>t.metadata.targetName===e||t.metadata.inheritanceTree.some((t=>t.name===e))));t.push(...n),this.removeAlreadySorted(n)}));const r=this.getDependencies();let a=this.toposort(r);return"insert"===e&&(a=a.reverse()),a.forEach((e=>{const n=this.subjects.filter((t=>t.metadata.targetName===e));t.push(...n),this.removeAlreadySorted(n)})),t.push(...this.subjects),t}removeAlreadySorted(e){e.forEach((e=>{this.subjects.splice(this.subjects.indexOf(e),1)}))}getUniqueMetadatas(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e.metadata)&&t.push(e.metadata)})),t}getNonNullableDependencies(){return this.metadatas.reduce(((e,t)=>(t.relationsWithJoinColumns.forEach((n=>{n.isNullable||e.push([t.targetName,n.inverseEntityMetadata.targetName])})),e)),[])}getDependencies(){return this.metadatas.reduce(((e,t)=>(t.relationsWithJoinColumns.forEach((n=>{n.inverseEntityMetadata!==t&&e.push([t.targetName,n.inverseEntityMetadata.targetName])})),e)),[])}toposort(e){const t=function(e){let t=[];for(let n=0,i=e.length;n<i;n++){let i=e[n];t.indexOf(i[0])<0&&t.push(i[0]),t.indexOf(i[1])<0&&t.push(i[1])}return t}(e);let n=t.length,i=new Array(n),r={},a=n;for(;a--;)r[a]||o(t[a],a,[]);function o(a,s,l){if(l.indexOf(a)>=0)throw new EO("Cyclic dependency: "+JSON.stringify(a));if(!~t.indexOf(a))throw new EO("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(a));if(r[s])return;r[s]=!0;let c=e.filter((function(e){return e[0]===a}));if(s=c.length){let e=l.concat(a);do{let n=c[--s][1];o(n,t.indexOf(n),e)}while(s)}i[--n]=a}return i}}var QR=6e4,KR=36e5;function GR(e,t){var n;!function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}(1,arguments);var i=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,a=function(e){var t,n={},i=e.split(YR.dateTimeDelimiter);if(i.length>2)return n;/:/.test(i[0])?t=i[0]:(n.date=i[0],t=i[1],YR.timeZoneDelimiter.test(n.date)&&(n.date=e.split(YR.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var r=YR.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e);if(a.date){var o=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};var r=i[1]?parseInt(i[1]):null,a=i[2]?parseInt(i[2]):null;return{year:null===a?r:100*a,restDateString:e.slice((i[1]||i[2]).length)}}(a.date,i);r=function(e,t){if(null===t)return new Date(NaN);var n=e.match(JR);if(!n)return new Date(NaN);var i=!!n[4],r=eP(n[1]),a=eP(n[2])-1,o=eP(n[3]),s=eP(n[4]),l=eP(n[5])-1;if(i)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){var i=new Date(0);i.setUTCFullYear(e,0,4);var r=i.getUTCDay()||7,a=7*(t-1)+n+1-r;return i.setUTCDate(i.getUTCDate()+a),i}(t,s,l):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(iP[t]||(rP(e)?29:28))}(t,a,o)&&function(e,t){return t>=1&&t<=(rP(e)?366:365)}(t,r)?(c.setUTCFullYear(t,a,Math.max(r,o)),c):new Date(NaN)}(o.restDateString,o.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var s,l=r.getTime(),c=0;if(a.time&&(c=function(e){var t=e.match(XR);if(!t)return NaN;var n=tP(t[1]),i=tP(t[2]),r=tP(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,i,r))return NaN;return n*KR+i*QR+1e3*r}(a.time),isNaN(c)))return new Date(NaN);if(!a.timezone){var u=new Date(l+c),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return s=function(e){if("Z"===e)return 0;var t=e.match(ZR);if(!t)return 0;var n="+"===t[1]?-1:1,i=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,r))return NaN;return n*(i*KR+r*QR)}(a.timezone),isNaN(s)?new Date(NaN):new Date(l+c+s)}var YR={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},JR=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,XR=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ZR=/^([+-])(\d{2})(?::?(\d{2}))?$/;function eP(e){return e?parseInt(e):1}function tP(e){return e&&parseFloat(e.replace(",","."))||0}var nP,iP=[31,null,31,30,31,30,31,31,30,31,30,31];function rP(e){return e%400==0||e%4==0&&e%100!=0}class aP{static normalizeHydratedDate(e){return e&&"string"==typeof e?new Date(e):e}static mixedDateToDateString(e){return e instanceof Date?this.formatZerolessValue(e.getFullYear(),4)+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate()):e}static mixedDateToDate(e,t=!1,n=!0){let i="string"==typeof e?GR(e):e;return t&&(i=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds())),n||i.setUTCMilliseconds(0),i}static mixedDateToTimeString(e,t=!1){return e instanceof Date?this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+(t?"":":"+this.formatZerolessValue(e.getSeconds())):e}static mixedTimeToDate(e){if("string"==typeof e){const[t,n,i]=e.split(":"),r=new Date;return t&&r.setHours(parseInt(t)),n&&r.setMinutes(parseInt(n)),i&&r.setSeconds(parseInt(i)),r}return e}static mixedTimeToString(e,t=!1){return"string"==typeof(e=e instanceof Date?e.getHours()+":"+e.getMinutes()+(t?"":":"+e.getSeconds()):e)?e.split(":").map((e=>1===e.length?"0"+e:e)).join(":"):e}static mixedDateToDatetimeString(e,t){if("string"==typeof e&&(e=new Date(e)),e instanceof Date){let n=this.formatZerolessValue(e.getFullYear(),4)+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate())+" "+this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+":"+this.formatZerolessValue(e.getSeconds());t&&(n+=`.${this.formatMilliseconds(e.getMilliseconds())}`),e=n}return e}static mixedDateToUtcDatetimeString(e){return"string"==typeof e&&(e=new Date(e)),e instanceof Date?this.formatZerolessValue(e.getUTCFullYear(),4)+"-"+this.formatZerolessValue(e.getUTCMonth()+1)+"-"+this.formatZerolessValue(e.getUTCDate())+" "+this.formatZerolessValue(e.getUTCHours())+":"+this.formatZerolessValue(e.getUTCMinutes())+":"+this.formatZerolessValue(e.getUTCSeconds())+"."+this.formatMilliseconds(e.getUTCMilliseconds()):e}static simpleArrayToString(e){return Array.isArray(e)?e.map((e=>String(e))).join(","):e}static stringToSimpleArray(e){return"string"==typeof e?e.length>0?e.split(","):[]:e}static simpleJsonToString(e){return JSON.stringify(e)}static stringToSimpleJson(e){return"string"==typeof e?JSON.parse(e):e}static simpleEnumToString(e){return""+e}static stringToSimpleEnum(e,t){return t.enum&&!isNaN(e)&&t.enum.indexOf(parseInt(e))>=0&&(e=parseInt(e)),e}static formatZerolessValue(e,t=2){const n="0".repeat(t);return String(`${n}${e}`).slice(-t)}static formatMilliseconds(e){return e<10?"00"+e:e<100?"0"+e:String(e)}}class oP{static chunk(e,t){return Array.from(Array(Math.ceil(e.length/t)),((n,i)=>e.slice(i*t,i*t+t)))}static splitClassesAndStrings(e){return[e.filter((e=>"string"!=typeof e)),e.filter((e=>"string"==typeof e))]}static groupBy(e,t){return e.reduce(((e,n)=>{const i=t(n);let r=e.find((e=>e.id===i));return r||(r={id:i,items:[]},e.push(r)),r.items.push(n),e}),[])}static uniq(e,t){return e.reduce(((e,n)=>{let i=!1;if("function"==typeof t){const r=t(n);i=!!e.find((e=>t(e)===r))}else i="string"==typeof t?!!e.find((e=>e[t]===n[t])):-1!==e.indexOf(n);return i||e.push(n),e}),[])}static isPlainObject(e){return null!=e&&(!e.constructor||e.constructor===Object)}static mergeArrayKey(e,t,n,i){i.has(n)?e[t]=i.get(n):n instanceof Promise||(this.isPlainObject(n)||Array.isArray(n)?(e[t]||(e[t]=Array.isArray(n)?[]:{}),i.set(n,e[t]),this.merge(e[t],n,i),i.delete(n)):e[t]=n)}static mergeObjectKey(e,t,n,i){i.has(n)?Object.assign(e,{[t]:i.get(n)}):n instanceof Promise||(this.isPlainObject(n)||Array.isArray(n)?(e[t]||Object.assign(e,{[t]:Array.isArray(n)?[]:{}}),i.set(n,e[t]),this.merge(e[t],n,i),i.delete(n)):Object.assign(e,{[t]:n}))}static merge(e,t,n=new Map){if(this.isPlainObject(e)&&this.isPlainObject(t))for(const i of Object.keys(t))"__proto__"!==i&&this.mergeObjectKey(e,i,t[i],n);if(Array.isArray(e)&&Array.isArray(t))for(let i=0;i<t.length;i++)this.mergeArrayKey(e,i,t[i],n)}static mergeDeep(e,...t){if(!t.length)return e;for(const n of t)oP.merge(e,n);return e}static deepCompare(...e){let t,n,i,r;if(arguments.length<1)return!0;for(t=1,n=arguments.length;t<n;t++)if(i=[],r=[],!this.compare2Objects(i,r,arguments[0],arguments[t]))return!1;return!0}static deepValue(e,t){const n=t.split(".");for(let i=0,r=n.length;i<r;i++)e=e[n[i]];return e}static replaceEmptyObjectsWithBooleans(e){for(let t in e)e[t]&&"object"==typeof e[t]&&(0===Object.keys(e[t]).length?e[t]=!0:this.replaceEmptyObjectsWithBooleans(e[t]))}static propertyPathsToTruthyObject(e){let t={};for(let n of e){const e=n.split(".");if(!e.length)continue;t[e[0]]&&!0!==t[e[0]]||(t[e[0]]={});let i=t[e[0]];for(let[t,n]of e.entries())0!==t&&(i[n]?i=i[n]:t===e.length-1?(i[n]={},i=null):(i[n]={},i=i[n]))}return this.replaceEmptyObjectsWithBooleans(t),t}static compareIds(e,t){return null!=e&&null!=t&&(("string"==typeof e.id&&"string"==typeof t.id||"number"==typeof e.id&&"number"==typeof t.id)&&1===Object.keys(e).length&&1===Object.keys(t).length?e.id===t.id:oP.deepCompare(e,t))}static toBoolean(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e||"1"===e:"number"==typeof e&&e>0}static zipObject(e,t){return e.reduce(((e,n,i)=>(e[n]=t[i],e)),{})}static isArraysEqual(e,t){return e.length===t.length&&e.every((e=>-1!==t.indexOf(e)))}static areMutuallyExclusive(...e){return!e.some((t=>{const n=e.filter((e=>e!==t));return t.some((e=>n.some((t=>t.includes(e)))))}))}static compare2Objects(e,t,n,i){let r;if(Number.isNaN(n)&&Number.isNaN(i))return!0;if(n===i)return!0;if(null===n||null===i||void 0===n||void 0===i)return!1;if(("function"==typeof n.equals||"function"==typeof n.equals)&&n.equals(i))return!0;if("function"==typeof n&&"function"==typeof i||n instanceof Date&&i instanceof Date||n instanceof RegExp&&i instanceof RegExp||"string"==typeof n&&"string"==typeof i||"number"==typeof n&&"number"==typeof i)return n.toString()===i.toString();if("object"!=typeof n||"object"!=typeof i)return!1;if(Object.prototype.isPrototypeOf.call(n,i)||Object.prototype.isPrototypeOf.call(i,n))return!1;if(n.constructor!==i.constructor)return!1;if(n.prototype!==i.prototype)return!1;if(e.indexOf(n)>-1||t.indexOf(i)>-1)return!1;for(r in i){if(i.hasOwnProperty(r)!==n.hasOwnProperty(r))return!1;if(typeof i[r]!=typeof n[r])return!1}for(r in n){if(i.hasOwnProperty(r)!==n.hasOwnProperty(r))return!1;if(typeof i[r]!=typeof n[r])return!1;switch(typeof n[r]){case"object":case"function":if(e.push(n),t.push(i),!this.compare2Objects(e,t,n[r],i[r]))return!1;e.pop(),t.pop();break;default:if(n[r]!==i[r])return!1}}return!0}}class sP{static transformFrom(e,t){if(Array.isArray(e)){return e.slice().reverse().reduce(((e,t)=>t.from(e)),t)}return e.from(t)}static transformTo(e,t){return Array.isArray(e)?e.reduce(((e,t)=>t.to(e)),t):e.to(t)}}class lP{compute(e){e.forEach((t=>{this.computeDiffColumns(t),this.computeDiffRelationalColumns(e,t)}))}computeDiffColumns(e){e.entity&&e.metadata.columns.forEach((t=>{if(t.isVirtual||t.isDiscriminator)return;const n=e.changeMaps.find((e=>e.column===t));n&&e.changeMaps.splice(e.changeMaps.indexOf(n),1);const i=t.getEntityValue(e.entity);if(void 0!==i){if(e.databaseEntity){const n="json"!==t.type&&"jsonb"!==t.type;let r=t.getEntityValue(e.databaseEntity,n);if(t.relationMetadata){const n=t.relationMetadata.getEntityValue(e.entity);if(null!=n)return}let a=i;if(null!==i){switch(t.type){case"date":a=aP.mixedDateToDateString(i);break;case"time":case"time with time zone":case"time without time zone":case"timetz":a=aP.mixedDateToTimeString(i);break;case"datetime":case"datetime2":case Date:case"timestamp":case"timestamp without time zone":case"timestamp with time zone":case"timestamp with local time zone":case"timestamptz":a=aP.mixedDateToUtcDatetimeString(i),r=aP.mixedDateToUtcDatetimeString(r);break;case"json":case"jsonb":if(oP.deepCompare(i,r))return;break;case"simple-array":a=aP.simpleArrayToString(i),r=aP.simpleArrayToString(r);break;case"simple-enum":a=aP.simpleEnumToString(i),r=aP.simpleEnumToString(r);break;case"simple-json":a=aP.simpleJsonToString(i),r=aP.simpleJsonToString(r)}t.transformer&&(a=sP.transformTo(t.transformer,i))}if(Buffer.isBuffer(a)&&Buffer.isBuffer(r)){if(a.equals(r))return}else if(a===r)return}e.diffColumns.includes(t)||e.diffColumns.push(t),e.changeMaps.push({column:t,value:i})}}))}computeDiffRelationalColumns(e,t){t.entity&&t.metadata.relationsWithJoinColumns.forEach((n=>{let i=n.getEntityValue(t.entity);if(void 0===i)return;if(t.databaseEntity){let e=i;null!==e&&RO.isObject(e)&&(e=n.getRelationIdMap(e));const r=n.getEntityValue(t.databaseEntity);if(oP.compareIds(e,r))return;t.diffRelations.push(n)}const r=e.find((e=>e.mustBeInserted&&e.entity===i));r&&(i=r);const a=t.changeMaps.find((e=>e.relation===n));a?a.value=i:t.changeMaps.push({relation:n,value:i})}))}}class cP{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class uP extends EO{constructor(){super("Nested sets do not support multiple root entities.")}}class dP{constructor(e){this.queryRunner=e}async insert(e){const t=e=>this.queryRunner.connection.driver.escape(e),n=this.getTableName(e.metadata.tablePath),i=t(e.metadata.nestedSetLeftColumn.databaseName),r=t(e.metadata.nestedSetRightColumn.databaseName);let a=e.metadata.treeParentRelation.getEntityValue(e.entity);!a&&e.parentSubject&&e.parentSubject.entity&&(a=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity);const o=e.metadata.getEntityIdMap(a);let s;if(o&&(s=await this.queryRunner.manager.createQueryBuilder().select(e.metadata.targetName+"."+e.metadata.nestedSetRightColumn.propertyPath,"right").from(e.metadata.target,e.metadata.targetName).whereInIds(o).getRawOne().then((e=>{const t=e?e.right:void 0;return"string"==typeof t?parseInt(t):t}))),void 0!==s)await this.queryRunner.query(`UPDATE ${n} SET ${i} = CASE WHEN ${i} > ${s} THEN ${i} + 2 ELSE ${i} END,${r} = ${r} + 2 WHERE ${r} >= ${s}`),oP.mergeDeep(e.insertedValueSet,e.metadata.nestedSetLeftColumn.createValueMap(s),e.metadata.nestedSetRightColumn.createValueMap(s+1));else{if(!(await this.isUniqueRootEntity(e,a)))throw new uP;oP.mergeDeep(e.insertedValueSet,e.metadata.nestedSetLeftColumn.createValueMap(1),e.metadata.nestedSetRightColumn.createValueMap(2))}}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;if(!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find((t=>Object.entries(e.identifier).every((([e,n])=>t[e]===n))))),void 0===n||void 0===t)return;const i=e.metadata.treeParentRelation.getEntityValue(n),r=e.metadata.getEntityIdMap(i),a=e.metadata.getEntityIdMap(t);if(!oP.compareIds(r,a))if(t){const t=e=>this.queryRunner.connection.driver.escape(e),i=this.getTableName(e.metadata.tablePath),r=t(e.metadata.nestedSetLeftColumn.databaseName),o=t(e.metadata.nestedSetRightColumn.databaseName),s=e.metadata.getEntityIdMap(n);let l,c;if(s&&(l=(await this.getNestedSetIds(e.metadata,s))[0]),a&&(c=(await this.getNestedSetIds(e.metadata,a))[0]),void 0!==l&&void 0!==c){const e=c.left>l.left,t=l.right-l.left+1;let n;n=e?c.left-l.right:c.right-l.left;const a=`WHEN ${r} >= ${l.left} AND ${r} < ${l.right} THEN ${r} + ${n} `,s=`WHEN ${o} > ${l.left} AND ${o} <= ${l.right} THEN ${o} + ${n} `;e?await this.queryRunner.query(`UPDATE ${i} SET ${r} = CASE WHEN ${r} > ${l.right} AND ${r} <= ${c.left} THEN ${r} - ${t} `+a+`ELSE ${r} END, `+`${o} = CASE `+`WHEN ${o} > ${l.right} AND `+`${o} < ${c.left} `+`THEN ${o} - ${t} `+s+`ELSE ${o} END`):await this.queryRunner.query(`UPDATE ${i} SET ${r} = CASE WHEN ${r} < ${l.left} AND ${r} > ${c.right} THEN ${r} + ${t} `+a+`ELSE ${r} END, `+`${o} = CASE `+`WHEN ${o} < ${l.left} AND `+`${o} >= ${c.right} `+`THEN ${o} + ${t} `+s+`ELSE ${o} END`)}}else{if(!(await this.isUniqueRootEntity(e,t)))throw new uP}}async remove(e){Array.isArray(e)||(e=[e]);const t=e[0].metadata,n=e=>this.queryRunner.connection.driver.escape(e),i=this.getTableName(t.tablePath),r=n(t.nestedSetLeftColumn.databaseName),a=n(t.nestedSetRightColumn.databaseName);let o=[];for(const l of e){const e=t.getEntityIdMap(l.entity);e&&o.push(e)}let s=await this.getNestedSetIds(t,o);for(const l of s){const e=l.right-l.left+1;await this.queryRunner.query(`UPDATE ${i} SET ${r} = CASE WHEN ${r} > ${l.left} THEN ${r} - ${e} ELSE ${r} END, ${a} = CASE WHEN ${a} > ${l.right} THEN ${a} - ${e} ELSE ${a} END`)}}getNestedSetIds(e,t){const n={left:`${e.targetName}.${e.nestedSetLeftColumn.propertyPath}`,right:`${e.targetName}.${e.nestedSetRightColumn.propertyPath}`},i=this.queryRunner.manager.createQueryBuilder();return Object.entries(n).forEach((([e,t])=>{i.addSelect(t,e)})),i.from(e.target,e.targetName).whereInIds(t).orderBy(n.right,"DESC").getRawMany().then((e=>{const t=[];for(const i of e){const e={};for(const t of Object.keys(n)){const n=i?i[t]:void 0;e[t]="string"==typeof n?parseInt(n):n}t.push(e)}return t}))}async isUniqueRootEntity(e,t){const n=e=>this.queryRunner.connection.driver.escape(e),i=this.getTableName(e.metadata.tablePath),r=[],a=e.metadata.treeParentRelation.joinColumns.map((e=>{const i=n(e.databaseName),a=e.getEntityValue(t);if(null==a)return`${i} IS NULL`;r.push(a);return`${i} = ${this.queryRunner.connection.driver.createParameter("entity_"+e.databaseName,r.length-1)}`})).join(" AND "),o="count",s=await this.queryRunner.query(`SELECT COUNT(1) AS ${n(o)} FROM ${i} WHERE ${a}`,r,!0);return 0===parseInt(s.records[0][o])}getTableName(e){return e.split(".").map((e=>""===e?e:this.queryRunner.connection.driver.escape(e))).join(".")}}class hP{constructor(e){this.queryRunner=e}async insert(e){const t={};e.metadata.closureJunctionTable.ancestorColumns.forEach((n=>{t[n.databaseName]=e.identifier})),e.metadata.closureJunctionTable.descendantColumns.forEach((n=>{t[n.databaseName]=e.identifier})),await this.queryRunner.manager.createQueryBuilder().insert().into(e.metadata.closureJunctionTable.tablePath).values(t).updateEntity(!1).callListeners(!1).execute();let n=e.metadata.treeParentRelation.getEntityValue(e.entity);if(!n&&e.parentSubject&&e.parentSubject.entity&&(n=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity),n){const t=e=>this.queryRunner.connection.driver.escape(e),i=this.getTableName(e.metadata.closureJunctionTable.tablePath),r=[],a=e.metadata.closureJunctionTable.ancestorColumns.map((e=>t(e.databaseName))),o=e.metadata.closureJunctionTable.descendantColumns.map((e=>t(e.databaseName))),s=e.metadata.primaryColumns.map((t=>(r.push(t.getEntityValue(e.insertedValueSet?e.insertedValueSet:e.entity)),this.queryRunner.connection.driver.createParameter("child_entity_"+t.databaseName,r.length-1)))),l=e.metadata.closureJunctionTable.descendantColumns.map((i=>{const a=t(i.databaseName),o=i.referencedColumn.getEntityValue(n);if(!o)throw new BO(e.metadata.name);r.push(o);return`${a} = ${this.queryRunner.connection.driver.createParameter("parent_entity_"+i.referencedColumn.databaseName,r.length-1)}`}));await this.queryRunner.query(`INSERT INTO ${i} (${[...a,...o].join(", ")}) SELECT ${a.join(", ")}, ${s.join(", ")} FROM ${i} WHERE ${l.join(" AND ")}`,r)}}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;if(!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find((t=>Object.entries(e.identifier).every((([e,n])=>t[e]===n))))),void 0===n||void 0===t)return;const i=e.metadata.treeParentRelation.getEntityValue(n),r=e.metadata.getEntityIdMap(i),a=e.metadata.getEntityIdMap(t);if(oP.compareIds(r,a))return;const o=e=>this.queryRunner.connection.driver.escape(e),s=e.metadata.closureJunctionTable,l=s.ancestorColumns.map((e=>o(e.databaseName))),c=s.descendantColumns.map((e=>o(e.databaseName))),u=(e,t)=>{const n=`sub${t}`,i=e.createQueryBuilder().select(c.join(", ")).from(s.tablePath,n);for(const r of s.ancestorColumns)i.andWhere(`${o(n)}.${o(r.databaseName)} = :value_${r.referencedColumn.databaseName}`);return e.createQueryBuilder().select(c.join(", ")).from(`(${i.getQuery()})`,t).setParameters(i.getParameters()).getQuery()},d={};for(const h of e.metadata.primaryColumns)d[`value_${h.databaseName}`]=n[h.databaseName];if(await this.queryRunner.manager.createQueryBuilder().delete().from(s.tablePath).where((e=>`(${c.join(", ")}) IN (${u(e,"descendant")})`)).andWhere((e=>`(${l.join(", ")}) NOT IN (${u(e,"ancestor")})`)).setParameters(d).execute(),t){const i=[],r=this.getTableName(s.tablePath),a=o("supertree"),u=o("subtree"),d=[...l.map((e=>`${a}.${e}`)),...c.map((e=>`${u}.${e}`))],h=e.metadata.closureJunctionTable.ancestorColumns.map((e=>{const t=o(e.databaseName),r=e.referencedColumn.getEntityValue(n);i.push(r);const a=this.queryRunner.connection.driver.createParameter("entity_"+e.referencedColumn.databaseName,i.length-1);return`${u}.${t} = ${a}`})),p=e.metadata.closureJunctionTable.descendantColumns.map((n=>{const r=o(n.databaseName),s=n.referencedColumn.getEntityValue(t);if(!s)throw new BO(e.metadata.name);i.push(s);const l=this.queryRunner.connection.driver.createParameter("parent_entity_"+n.referencedColumn.databaseName,i.length-1);return`${a}.${r} = ${l}`}));await this.queryRunner.query(`INSERT INTO ${r} (${[...l,...c].join(", ")}) SELECT ${d.join(", ")} FROM ${r} AS ${a}, ${r} AS ${u} WHERE ${[...h,...p].join(" AND ")}`,i)}}async remove(e){if("mssql"!==this.queryRunner.connection.driver.options.type)return;Array.isArray(e)||(e=[e]);const t=e=>this.queryRunner.connection.driver.escape(e),n=e.map((e=>e.identifier)),i=e[0].metadata.closureJunctionTable,r=e=>e.map((e=>{const i=n.map((t=>t[e.referencedColumn.databaseName]));return`${t(e.databaseName)} IN (${i.join(", ")})`})).join(" AND "),a=r(i.ancestorColumns),o=r(i.descendantColumns);await this.queryRunner.manager.createQueryBuilder().delete().from(i.tablePath).where(a).orWhere(o).execute()}getTableName(e){return e.split(".").map((e=>""===e?e:this.queryRunner.connection.driver.escape(e))).join(".")}}class pP{constructor(e){this["@instanceof"]=Symbol.for("EntityMetadata"),this.childEntityMetadatas=[],this.inheritanceTree=[],this.tableType="regular",this.withoutRowid=!1,this.synchronize=!0,this.hasNonNullableRelations=!1,this.isJunction=!1,this.isAlwaysUsingConstructor=!0,this.isClosureJunction=!1,this.hasMultiplePrimaryKeys=!1,this.hasUUIDGeneratedColumns=!1,this.ownColumns=[],this.columns=[],this.ancestorColumns=[],this.descendantColumns=[],this.nonVirtualColumns=[],this.ownerColumns=[],this.inverseColumns=[],this.generatedColumns=[],this.primaryColumns=[],this.ownRelations=[],this.relations=[],this.eagerRelations=[],this.lazyRelations=[],this.oneToOneRelations=[],this.ownerOneToOneRelations=[],this.oneToManyRelations=[],this.manyToOneRelations=[],this.manyToManyRelations=[],this.ownerManyToManyRelations=[],this.relationsWithJoinColumns=[],this.relationIds=[],this.relationCounts=[],this.foreignKeys=[],this.embeddeds=[],this.allEmbeddeds=[],this.ownIndices=[],this.indices=[],this.uniques=[],this.ownUniques=[],this.checks=[],this.exclusions=[],this.ownListeners=[],this.listeners=[],this.afterLoadListeners=[],this.beforeInsertListeners=[],this.afterInsertListeners=[],this.beforeUpdateListeners=[],this.afterUpdateListeners=[],this.beforeRemoveListeners=[],this.beforeSoftRemoveListeners=[],this.beforeRecoverListeners=[],this.afterRemoveListeners=[],this.afterSoftRemoveListeners=[],this.afterRecoverListeners=[],this.connection=e.connection,this.inheritanceTree=e.inheritanceTree||[],this.inheritancePattern=e.inheritancePattern,this.treeType=e.tableTree?e.tableTree.type:void 0,this.treeOptions=e.tableTree?e.tableTree.options:void 0,this.parentClosureEntityMetadata=e.parentClosureEntityMetadata,this.tableMetadataArgs=e.args,this.target=this.tableMetadataArgs.target,this.tableType=this.tableMetadataArgs.type,this.expression=this.tableMetadataArgs.expression,this.withoutRowid=this.tableMetadataArgs.withoutRowid,this.dependsOn=this.tableMetadataArgs.dependsOn}create(e,t){const n=!(!t||!0!==t.pojo);let i;return i="function"!=typeof this.target||n?{}:!(null==t?void 0:t.fromDeserializer)||this.isAlwaysUsingConstructor?new this.target:Object.create(this.target.prototype),this.connection.options.typename&&(i[this.connection.options.typename]=this.targetName),this.lazyRelations.forEach((t=>this.connection.relationLoader.enableLazyLoad(t,i,e))),i}hasId(e){return!!e&&this.primaryColumns.every((t=>{const n=t.getEntityValue(e);return null!=n&&""!==n}))}hasAllPrimaryKeys(e){return this.primaryColumns.every((t=>{const n=t.getEntityValue(e);return null!=n}))}ensureEntityIdMap(e){if(RO.isObject(e))return e;if(this.hasMultiplePrimaryKeys)throw new SO(this,e);return this.primaryColumns[0].createValueMap(e)}getEntityIdMap(e){if(e)return pP.getValueMap(e,this.primaryColumns,{skipNulls:!0})}getEntityIdMixedMap(e){if(!e)return e;const t=this.getEntityIdMap(e);return this.hasMultiplePrimaryKeys?t:t?this.primaryColumns[0].getEntityValue(t):t}compareEntities(e,t){const n=this.getEntityIdMap(e);if(!n)return!1;const i=this.getEntityIdMap(t);return!!i&&oP.compareIds(n,i)}findColumnWithPropertyName(e){return this.columns.find((t=>t.propertyName===e))}findColumnWithDatabaseName(e){return this.columns.find((t=>t.databaseName===e))}hasColumnWithPropertyPath(e){return this.columns.some((t=>t.propertyPath===e))||this.hasRelationWithPropertyPath(e)}findColumnWithPropertyPath(e){const t=this.columns.find((t=>t.propertyPath===e));if(t)return t;const n=this.relations.find((t=>t.propertyPath===e));return n&&1===n.joinColumns.length?n.joinColumns[0]:void 0}findColumnWithPropertyPathStrict(e){return this.columns.find((t=>t.propertyPath===e))}findColumnsWithPropertyPath(e){const t=this.columns.find((t=>t.propertyPath===e));if(t)return[t];const n=this.findRelationWithPropertyPath(e);return n&&n.joinColumns?n.joinColumns:[]}hasRelationWithPropertyPath(e){return this.relations.some((t=>t.propertyPath===e))}findRelationWithPropertyPath(e){return this.relations.find((t=>t.propertyPath===e))}hasEmbeddedWithPropertyPath(e){return this.allEmbeddeds.some((t=>t.propertyPath===e))}findEmbeddedWithPropertyPath(e){return this.allEmbeddeds.find((t=>t.propertyPath===e))}mapPropertyPathsToColumns(e){return e.map((e=>{const t=this.findColumnWithPropertyPath(e);if(null==t)throw new VO(e,this);return t}))}extractRelationValuesFromEntity(e,t){const n=[];return t.forEach((t=>{const i=t.getEntityValue(e);Array.isArray(i)?i.forEach((e=>n.push([t,e,pP.getInverseEntityMetadata(e,t)]))):i&&n.push([t,i,pP.getInverseEntityMetadata(i,t)])})),n}findInheritanceMetadata(e){if("STI"===this.inheritancePattern&&this.childEntityMetadatas.length>0){let t;return this.discriminatorColumn&&(t=e[this.discriminatorColumn.propertyName]),this.childEntityMetadatas.find((n=>t===n.discriminatorValue||e.constructor===n.target))||this}return this}static getInverseEntityMetadata(e,t){return t.inverseEntityMetadata.findInheritanceMetadata(e)}static createPropertyPath(e,t,n=""){const i=[];return Object.keys(t).forEach((r=>{const a=n?n+"."+r:r;if(e.hasEmbeddedWithPropertyPath(a)){const n=this.createPropertyPath(e,t[r],a);i.push(...n)}else{const e=n?n+"."+r:r;i.push(e)}})),i}static difference(e,t){return e.filter((e=>!t.find((t=>oP.compareIds(e,t)))))}static getValueMap(e,t,n){return t.reduce(((t,i)=>{const r=i.getEntityValueMap(e,n);if(void 0!==t&&null!=r)return oP.mergeDeep(t,r)}),{})}build(){var e;const t=this.connection.namingStrategy,n=this.connection.options.entityPrefix,i=this.connection.options.entitySkipConstructor;this.engine=this.tableMetadataArgs.engine,this.database="entity-child"===this.tableMetadataArgs.type&&this.parentEntityMetadata?this.parentEntityMetadata.database:this.tableMetadataArgs.database,this.tableMetadataArgs.schema?this.schema=this.tableMetadataArgs.schema:"entity-child"===this.tableMetadataArgs.type&&this.parentEntityMetadata?this.schema=this.parentEntityMetadata.schema:(null===(e=this.connection.options)||void 0===e?void 0:e.hasOwnProperty("schema"))&&(this.schema=this.connection.options.schema),this.givenTableName="entity-child"===this.tableMetadataArgs.type&&this.parentEntityMetadata?this.parentEntityMetadata.givenTableName:this.tableMetadataArgs.name,this.synchronize=!1!==this.tableMetadataArgs.synchronize,this.targetName="function"==typeof this.tableMetadataArgs.target?this.tableMetadataArgs.target.name:this.tableMetadataArgs.target,"closure-junction"===this.tableMetadataArgs.type?this.tableNameWithoutPrefix=t.closureJunctionTableName(this.givenTableName):"entity-child"===this.tableMetadataArgs.type&&this.parentEntityMetadata?this.tableNameWithoutPrefix=t.tableName(this.parentEntityMetadata.targetName,this.parentEntityMetadata.givenTableName):(this.tableNameWithoutPrefix=t.tableName(this.targetName,this.givenTableName),"junction"===this.tableMetadataArgs.type&&this.connection.driver.maxAliasLength&&this.connection.driver.maxAliasLength>0&&this.tableNameWithoutPrefix.length>this.connection.driver.maxAliasLength&&(this.tableNameWithoutPrefix=vO(this.tableNameWithoutPrefix,{separator:"_",segmentLength:3}))),this.tableName=n?t.prefixTableName(n,this.tableNameWithoutPrefix):this.tableNameWithoutPrefix,this.target=this.target?this.target:this.tableName,this.name=this.targetName?this.targetName:this.tableName,this.expression=this.tableMetadataArgs.expression,this.withoutRowid=!0===this.tableMetadataArgs.withoutRowid,this.tablePath=this.connection.driver.buildTableName(this.tableName,this.schema,this.database),this.orderBy="function"==typeof this.tableMetadataArgs.orderBy?this.tableMetadataArgs.orderBy(this.propertiesMap):this.tableMetadataArgs.orderBy,void 0!==i&&(this.isAlwaysUsingConstructor=!i),this.isJunction="closure-junction"===this.tableMetadataArgs.type||"junction"===this.tableMetadataArgs.type,this.isClosureJunction="closure-junction"===this.tableMetadataArgs.type}registerColumn(e){-1===this.ownColumns.indexOf(e)&&(this.ownColumns.push(e),this.columns=this.embeddeds.reduce(((e,t)=>e.concat(t.columnsFromTree)),this.ownColumns),this.primaryColumns=this.columns.filter((e=>e.isPrimary)),this.hasMultiplePrimaryKeys=this.primaryColumns.length>1,this.hasUUIDGeneratedColumns=this.columns.filter((e=>e.isGenerated||"uuid"===e.generationStrategy)).length>0,this.propertiesMap=this.createPropertiesMap(),this.childEntityMetadatas&&this.childEntityMetadatas.forEach((t=>t.registerColumn(e))))}createPropertiesMap(){const e={};return this.columns.forEach((t=>oP.mergeDeep(e,t.createValueMap(t.propertyPath)))),this.relations.forEach((t=>oP.mergeDeep(e,t.createValueMap(t.propertyPath)))),e}getInsertionReturningColumns(){return this.columns.filter((e=>void 0!==e.default||e.isGenerated||e.isCreateDate||e.isUpdateDate||e.isDeleteDate||e.isVersion))}}class mP{constructor(e){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=e}}class fP{constructor(e){this.queryRunner=e}async insert(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity);const n=e.metadata.getEntityIdMap(t);let i="";n&&(i=await this.getEntityPath(e,n));const r=e.metadata.treeParentRelation.joinColumns.map((t=>t.referencedColumn.getEntityValue(e.insertedValueSet))).join("_");await this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set({[e.metadata.materializedPathColumn.propertyPath]:i+r+"."}).where(e.identifier).execute()}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find((t=>Object.entries(e.identifier).every((([e,n])=>t[e]===n)))));const i=e.metadata.treeParentRelation.getEntityValue(n),r=this.getEntityParentReferencedColumnMap(e,i),a=this.getEntityParentReferencedColumnMap(e,t);if(oP.compareIds(r,a))return;let o="";a&&(o=await this.getEntityPath(e,a));let s="";r&&(s=await this.getEntityPath(e,r)||"");const l=e.metadata.treeParentRelation.joinColumns.map((e=>e.referencedColumn.getEntityValue(n))).join("_"),c=e.metadata.materializedPathColumn.propertyPath;await this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set({[c]:()=>`REPLACE(${this.queryRunner.connection.driver.escape(c)}, '${s}${l}.', '${o}${l}.')`}).where(`${c} LIKE :path`,{path:`${s}${l}.%`}).execute()}getEntityParentReferencedColumnMap(e,t){if(t)return pP.getValueMap(t,e.metadata.treeParentRelation.joinColumns.map((e=>e.referencedColumn)).filter((e=>null!=e)),{skipNulls:!0})}getEntityPath(e,t){const n=e.metadata,i=(Array.isArray(t)?t:[t]).map((e=>n.ensureEntityIdMap(e)));return this.queryRunner.manager.createQueryBuilder().select(e.metadata.targetName+"."+e.metadata.materializedPathColumn.propertyPath,"path").from(e.metadata.target,e.metadata.targetName).where(new mP((e=>{for(const t of i)e.orWhere(new mP((e=>e.where(t))))}))).getRawOne().then((e=>e?e.path:""))}}class gP{constructor(e,t,n){this.hasExecutableOperations=!1,this.insertSubjects=[],this.updateSubjects=[],this.removeSubjects=[],this.softRemoveSubjects=[],this.recoverSubjects=[],this.queryRunner=e,this.allSubjects=t,this.options=n,this.validate(),this.recompute()}async execute(){let e;this.options&&!1===this.options.listeners||(e=this.broadcastBeforeEventsForAll(),e.promises.length>0&&await Promise.all(e.promises)),e&&e.count>0&&(this.insertSubjects.forEach((e=>e.recompute())),this.updateSubjects.forEach((e=>e.recompute())),this.removeSubjects.forEach((e=>e.recompute())),this.softRemoveSubjects.forEach((e=>e.recompute())),this.recoverSubjects.forEach((e=>e.recompute())),this.recompute()),this.insertSubjects=new HR(this.insertSubjects).sort("insert"),await this.executeInsertOperations(),this.updateSubjects=this.allSubjects.filter((e=>e.mustBeUpdated)),await this.executeUpdateOperations(),this.removeSubjects=new HR(this.removeSubjects).sort("delete"),await this.executeRemoveOperations(),this.softRemoveSubjects=this.allSubjects.filter((e=>e.mustBeSoftRemoved)),await this.executeSoftRemoveOperations(),this.recoverSubjects=this.allSubjects.filter((e=>e.mustBeRecovered)),await this.executeRecoverOperations(),await this.updateSpecialColumnsInPersistedEntities(),this.options&&!1===this.options.listeners||(e=this.broadcastAfterEventsForAll(),e.promises.length>0&&await Promise.all(e.promises))}validate(){this.allSubjects.forEach((e=>{if(e.mustBeUpdated&&e.mustBeRemoved)throw new nR(e)}))}recompute(){(new lP).compute(this.allSubjects),this.insertSubjects=this.allSubjects.filter((e=>e.mustBeInserted)),this.updateSubjects=this.allSubjects.filter((e=>e.mustBeUpdated)),this.removeSubjects=this.allSubjects.filter((e=>e.mustBeRemoved)),this.softRemoveSubjects=this.allSubjects.filter((e=>e.mustBeSoftRemoved)),this.recoverSubjects=this.allSubjects.filter((e=>e.mustBeRecovered)),this.hasExecutableOperations=this.insertSubjects.length>0||this.updateSubjects.length>0||this.removeSubjects.length>0||this.softRemoveSubjects.length>0||this.recoverSubjects.length>0}broadcastBeforeEventsForAll(){const e=new cP;return this.insertSubjects.length&&this.insertSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeInsertEvent(e,t.metadata,t.entity))),this.updateSubjects.length&&this.updateSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeUpdateEvent(e,t.metadata,t.entity,t.databaseEntity,t.diffColumns,t.diffRelations))),this.removeSubjects.length&&this.removeSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier))),this.softRemoveSubjects.length&&this.softRemoveSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeSoftRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier))),this.recoverSubjects.length&&this.recoverSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeRecoverEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier))),e}broadcastAfterEventsForAll(){const e=new cP;return this.insertSubjects.length&&this.insertSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterInsertEvent(e,t.metadata,t.entity))),this.updateSubjects.length&&this.updateSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterUpdateEvent(e,t.metadata,t.entity,t.databaseEntity,t.diffColumns,t.diffRelations))),this.removeSubjects.length&&this.removeSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier))),this.softRemoveSubjects.length&&this.softRemoveSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterSoftRemoveEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier))),this.recoverSubjects.length&&this.recoverSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterRecoverEvent(e,t.metadata,t.entity,t.databaseEntity,t.identifier))),e}async executeInsertOperations(){const[e,t]=this.groupBulkSubjects(this.insertSubjects,"insert");for(const n of t){const t=e[n],i=[],r=[],a=[];if("mongodb"===this.queryRunner.connection.driver.options.type?t.forEach((e=>{e.metadata.createDateColumn&&e.entity&&(e.entity[e.metadata.createDateColumn.databaseName]=new Date),e.metadata.updateDateColumn&&e.entity&&(e.entity[e.metadata.updateDateColumn.databaseName]=new Date),e.createValueSetAndPopChangeMap(),r.push(e),i.push(e.entity)})):"oracle"===this.queryRunner.connection.driver.options.type?t.forEach((e=>{a.push(e)})):t.forEach((e=>{0===e.changeMaps.length||e.metadata.treeType||"oracle"===this.queryRunner.connection.driver.options.type||"sap"===this.queryRunner.connection.driver.options.type?a.push(e):(r.push(e),i.push(e.createValueSetAndPopChangeMap()))})),PO.isMongoEntityManager(this.queryRunner.manager)){const e=await this.queryRunner.manager.insert(t[0].metadata.target,i);t.forEach(((t,n)=>{t.identifier=e.identifiers[n],t.generatedMap=e.generatedMaps[n],t.insertedValueSet=i[n]}))}else{if(i.length>0){const e=await this.queryRunner.manager.createQueryBuilder().insert().into(t[0].metadata.target).values(i).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1).execute();r.forEach(((t,n)=>{t.identifier=e.identifiers[n],t.generatedMap=e.generatedMaps[n],t.insertedValueSet=i[n]}))}if(a.length>0)for(const e of a)e.insertedValueSet=e.createValueSetAndPopChangeMap(),"nested-set"===e.metadata.treeType&&await new dP(this.queryRunner).insert(e),await this.queryRunner.manager.createQueryBuilder().insert().into(e.metadata.target).values(e.insertedValueSet).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1).execute().then((t=>{e.identifier=t.identifiers[0],e.generatedMap=t.generatedMaps[0]})),"closure-table"===e.metadata.treeType?await new hP(this.queryRunner).insert(e):"materialized-path"===e.metadata.treeType&&await new fP(this.queryRunner).insert(e)}t.forEach((e=>{e.generatedMap&&e.metadata.columns.forEach((t=>{const n=t.getEntityValue(e.generatedMap);if(null!=n){const i=this.queryRunner.connection.driver.prepareHydratedValue(n,t);t.setEntityValue(e.generatedMap,i)}}))}))}}async executeUpdateOperations(){const e=async e=>{if(!e.identifier)throw new xO(e);if(PO.isMongoEntityManager(this.queryRunner.manager)){const t=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete t[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete t[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(t[e.metadata.updateDateColumn.propertyName]=new Date);const n=this.queryRunner.manager;await n.update(e.metadata.target,e.identifier,t)}else{const t=e.createValueSetAndPopChangeMap();switch(e.metadata.treeType){case"nested-set":await new dP(this.queryRunner).update(e);break;case"closure-table":await new hP(this.queryRunner).update(e);break;case"materialized-path":await new fP(this.queryRunner).update(e)}const n=this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set(t).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1);e.entity?n.whereEntity(e.identifier):n.where(e.identifier);let i=(await n.execute()).generatedMaps[0];i&&(e.metadata.columns.forEach((e=>{const t=e.getEntityValue(i);if(null!=t){const n=this.queryRunner.connection.driver.prepareHydratedValue(t,e);e.setEntityValue(i,n)}})),e.generatedMap||(e.generatedMap={}),Object.assign(e.generatedMap,i))}},t=[],n=[];for(const r of this.updateSubjects)"nested-set"===r.metadata.treeType?t.push(r):n.push(r);const i=new Promise((async(n,i)=>{for(const a of t)try{await e(a)}catch(r){i(r)}n()}));await Promise.all([...n.map(e),i])}async executeRemoveOperations(){const[e,t]=this.groupBulkSubjects(this.removeSubjects,"delete");for(const n of t){const t=e[n],i=t.map((e=>{if(!e.identifier)throw new xO(e);return e.identifier}));if(PO.isMongoEntityManager(this.queryRunner.manager)){const e=this.queryRunner.manager;await e.delete(t[0].metadata.target,i)}else{switch(t[0].metadata.treeType){case"nested-set":await new dP(this.queryRunner).remove(t);break;case"closure-table":await new hP(this.queryRunner).remove(t)}await this.queryRunner.manager.createQueryBuilder().delete().from(t[0].metadata.target).where(i).callListeners(!1).execute()}}}cloneMongoSubjectEntity(e){const t={};if(e.entity)for(const n of e.metadata.columns)oP.mergeDeep(t,n.getEntityValueMap(e.entity));return t}async executeSoftRemoveOperations(){await Promise.all(this.softRemoveSubjects.map((async e=>{if(!e.identifier)throw new xO(e);let t;if(PO.isMongoEntityManager(this.queryRunner.manager)){const n=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete n[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete n[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(n[e.metadata.updateDateColumn.propertyName]=new Date),e.metadata.deleteDateColumn&&e.metadata.deleteDateColumn.propertyName&&(n[e.metadata.deleteDateColumn.propertyName]=new Date);const i=this.queryRunner.manager;t=await i.update(e.metadata.target,e.identifier,n)}else{const n=this.queryRunner.manager.createQueryBuilder().softDelete().from(e.metadata.target).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1);e.entity?n.whereEntity(e.identifier):n.where(e.identifier),t=await n.execute()}e.generatedMap=t.generatedMaps[0],e.generatedMap&&e.metadata.columns.forEach((t=>{const n=t.getEntityValue(e.generatedMap);if(null!=n){const i=this.queryRunner.connection.driver.prepareHydratedValue(n,t);t.setEntityValue(e.generatedMap,i)}}))})))}async executeRecoverOperations(){await Promise.all(this.recoverSubjects.map((async e=>{if(!e.identifier)throw new xO(e);let t;if(PO.isMongoEntityManager(this.queryRunner.manager)){const n=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete n[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete n[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(n[e.metadata.updateDateColumn.propertyName]=new Date),e.metadata.deleteDateColumn&&e.metadata.deleteDateColumn.propertyName&&(n[e.metadata.deleteDateColumn.propertyName]=null);const i=this.queryRunner.manager;t=await i.update(e.metadata.target,e.identifier,n)}else{const n=this.queryRunner.manager.createQueryBuilder().restore().from(e.metadata.target).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1);e.entity?n.whereEntity(e.identifier):n.where(e.identifier),t=await n.execute()}e.generatedMap=t.generatedMaps[0],e.generatedMap&&e.metadata.columns.forEach((t=>{const n=t.getEntityValue(e.generatedMap);if(null!=n){const i=this.queryRunner.connection.driver.prepareHydratedValue(n,t);t.setEntityValue(e.generatedMap,i)}}))})))}updateSpecialColumnsInPersistedEntities(){this.insertSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.insertSubjects),this.updateSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.updateSubjects),this.softRemoveSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.softRemoveSubjects),this.recoverSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.recoverSubjects),this.removeSubjects.length&&this.removeSubjects.forEach((e=>{e.entity&&e.metadata.primaryColumns.forEach((t=>{t.setEntityValue(e.entity,void 0)}))})),this.allSubjects.forEach((e=>{e.entity&&(e.metadata.relationIds.forEach((t=>{t.setValue(e.entity)})),PO.isMongoEntityManager(this.queryRunner.manager)&&e.metadata.objectIdColumn&&e.metadata.objectIdColumn.databaseName&&e.metadata.objectIdColumn.databaseName!==e.metadata.objectIdColumn.propertyName&&delete e.entity[e.metadata.objectIdColumn.databaseName])}))}updateSpecialColumnsInInsertedAndUpdatedEntities(e){e.forEach((e=>{e.entity&&(e.metadata.columns.forEach((t=>{if(!(e.metadata.childEntityMetadatas.length>0&&-1!==e.metadata.childEntityMetadatas.map((e=>e.target)).indexOf(t.target)||t.isVirtual)){if(t.isNullable){void 0===t.getEntityValue(e.entity)&&t.setEntityValue(e.entity,null)}e.updatedRelationMaps.length>0&&e.updatedRelationMaps.forEach((t=>{t.relation.joinColumns.forEach((n=>{!0!==n.isVirtual&&n.setEntityValue(e.entity,RO.isObject(t.value)?n.referencedColumn.getEntityValue(t.value):t.value)}))}))}})),e.generatedMap&&this.queryRunner.manager.merge(e.metadata.target,e.entity,e.generatedMap))}))}groupBulkSubjects(e,t){const n={},i=[],r=e.some((e=>e.metadata.getInsertionReturningColumns().length>0)),a="delete"===t||this.queryRunner.connection.driver.isReturningSqlSupported("insert")||!1===r;return e.forEach(((e,t)=>{const r=a||e.metadata.isJunction?e.metadata.name:e.metadata.name+"_"+t;n[r]?n[r].push(e):(n[r]=[e],i.push(r))})),[n,i]}}class bP{constructor(e){this["@instanceof"]=Symbol.for("Subject"),this.identifier=void 0,this.entityWithFulfilledIds=void 0,this.databaseEntityLoaded=!1,this.changeMaps=[],this.canBeInserted=!1,this.canBeUpdated=!1,this.mustBeRemoved=!1,this.canBeSoftRemoved=!1,this.canBeRecovered=!1,this.updatedRelationMaps=[],this.diffColumns=[],this.diffRelations=[],this.metadata=e.metadata,this.entity=e.entity,this.parentSubject=e.parentSubject,void 0!==e.canBeInserted&&(this.canBeInserted=e.canBeInserted),void 0!==e.canBeUpdated&&(this.canBeUpdated=e.canBeUpdated),void 0!==e.mustBeRemoved&&(this.mustBeRemoved=e.mustBeRemoved),void 0!==e.canBeSoftRemoved&&(this.canBeSoftRemoved=e.canBeSoftRemoved),void 0!==e.canBeRecovered&&(this.canBeRecovered=e.canBeRecovered),void 0!==e.identifier&&(this.identifier=e.identifier),void 0!==e.changeMaps&&this.changeMaps.push(...e.changeMaps),this.recompute()}get mustBeInserted(){return this.canBeInserted&&!this.databaseEntity}get mustBeUpdated(){return this.canBeUpdated&&this.identifier&&(!1===this.databaseEntityLoaded||this.databaseEntityLoaded&&this.databaseEntity)&&this.changeMaps.length>0}get mustBeSoftRemoved(){return this.canBeSoftRemoved&&this.identifier&&(!1===this.databaseEntityLoaded||this.databaseEntityLoaded&&this.databaseEntity)}get mustBeRecovered(){return this.canBeRecovered&&this.identifier&&(!1===this.databaseEntityLoaded||this.databaseEntityLoaded&&this.databaseEntity)}createValueSetAndPopChangeMap(){const e=[],t=this.changeMaps.reduce(((t,n)=>{let i,r=n.value;if(PO.isSubject(r)&&(r=r.insertedValueSet?r.insertedValueSet:r.entity),this.metadata.isJunction&&n.column)i=n.column.createValueMap(n.column.referencedColumn.getEntityValue(r));else if(n.column)i=n.column.createValueMap(r);else if(n.relation)if(RO.isObject(r)&&!Buffer.isBuffer(r)){const a=n.relation.getRelationIdMap(r);if(void 0===a)return e.push(n),this.canBeUpdated=!0,t;i=n.relation.createValueMap(a),this.updatedRelationMaps.push({relation:n.relation,value:a})}else i=n.relation.createValueMap(r),this.updatedRelationMaps.push({relation:n.relation,value:r});return oP.mergeDeep(t,i),t}),{});return this.changeMaps=e,t}recompute(){this.entity?(this.entityWithFulfilledIds=Object.assign({},this.entity),this.parentSubject&&this.metadata.primaryColumns.forEach((e=>{if(e.relationMetadata&&e.relationMetadata.inverseEntityMetadata===this.parentSubject.metadata){const t=e.referencedColumn.getEntityValue(this.parentSubject.entity);e.setEntityValue(this.entityWithFulfilledIds,t)}})),this.identifier=this.metadata.getEntityIdMap(this.entityWithFulfilledIds)):this.databaseEntity&&(this.identifier=this.metadata.getEntityIdMap(this.databaseEntity))}}class yP{constructor(e){this.subjects=e}build(){this.subjects.forEach((e=>{e.metadata.oneToManyRelations.forEach((t=>{!1!==t.persistenceEnabled&&this.buildForSubjectRelation(e,t)}))}))}buildForSubjectRelation(e,t){var n;let i=[];if(e.databaseEntity){const n=t.getEntityValue(e.databaseEntity);n&&(i=n.map((e=>t.inverseEntityMetadata.getEntityIdMap(e))))}let r=t.getEntityValue(e.entity);if(null===r&&(r=[]),void 0===r)return;const a=[];r.forEach((n=>{let r=t.inverseEntityMetadata.getEntityIdMap(n),o=this.subjects.find((e=>e.entity===n));if(o&&(r=o.identifier),!r){if(!o)return;return void o.changeMaps.push({relation:t.inverseRelation,value:e})}i.find((e=>oP.compareIds(r,e)))||(o||(o=new bP({metadata:t.inverseEntityMetadata,parentSubject:e,canBeUpdated:!0,identifier:r}),this.subjects.push(o)),o.changeMaps.push({relation:t.inverseRelation,value:e})),a.push(r)})),"disable"!==(null===(n=t.inverseRelation)||void 0===n?void 0:n.orphanedRowAction)&&pP.difference(i,a).forEach((n=>{const i=new bP({metadata:t.inverseEntityMetadata,parentSubject:e,identifier:n});t.inverseRelation&&"nullify"!==t.inverseRelation.orphanedRowAction?"delete"===t.inverseRelation.orphanedRowAction?i.mustBeRemoved=!0:"soft-delete"===t.inverseRelation.orphanedRowAction&&(i.canBeSoftRemoved=!0):(i.canBeUpdated=!0,i.changeMaps=[{relation:t.inverseRelation,value:null}]),this.subjects.push(i)}))}}class vP{constructor(e){this.subjects=e}build(){this.subjects.forEach((e=>{e.metadata.oneToOneRelations.forEach((t=>{t.isOwning||!1===t.persistenceEnabled||this.buildForSubjectRelation(e,t)}))}))}buildForSubjectRelation(e,t){let n;e.databaseEntity&&(n=t.getEntityValue(e.databaseEntity));let i=t.getEntityValue(e.entity);if(void 0===i)return;if(null===i){if(n){const i=new bP({metadata:t.inverseEntityMetadata,parentSubject:e,canBeUpdated:!0,identifier:n,changeMaps:[{relation:t.inverseRelation,value:null}]});this.subjects.push(i)}return}let r=t.inverseEntityMetadata.getEntityIdMap(i),a=this.subjects.find((e=>!!e.entity&&e.entity===i));if(a&&(r=a.identifier),!r){if(!a)return;a.changeMaps.push({relation:t.inverseRelation,value:e})}n&&oP.compareIds(r,n)||(a||(a=new bP({metadata:t.inverseEntityMetadata,canBeUpdated:!0,identifier:r}),this.subjects.push(a)),a.changeMaps.push({relation:t.inverseRelation,value:e}))}}class wP{constructor(e){this.subjects=e}build(){this.subjects.forEach((e=>{e.entity&&e.metadata.manyToManyRelations.forEach((t=>{!1!==t.persistenceEnabled&&this.buildForSubjectRelation(e,t)}))}))}buildForAllRemoval(e){e.databaseEntity&&e.metadata.manyToManyRelations.forEach((t=>{if(!1===t.persistenceEnabled)return;t.getEntityValue(e.databaseEntity).forEach((n=>{const i=new bP({metadata:t.junctionEntityMetadata,parentSubject:e,mustBeRemoved:!0,identifier:this.buildJunctionIdentifier(e,t,n)});this.subjects.push(i)}))}))}buildForSubjectRelation(e,t){let n=[];e.databaseEntity&&(n=t.getEntityValue(e.databaseEntity));let i=t.getEntityValue(e.entity);if(null===i&&(i=[]),!Array.isArray(i))return;i.forEach((i=>{let r=t.inverseEntityMetadata.getEntityIdMap(i);const a=this.subjects.find((e=>e.entity===i));if(a&&(r=a.identifier),!r&&!a)return;if(n.find((e=>oP.compareIds(e,r))))return;const o=t.isOwning?e:a||i,s=t.isOwning?a||i:e,l=new bP({metadata:t.junctionEntityMetadata,parentSubject:e,canBeInserted:!0});this.subjects.push(l),t.junctionEntityMetadata.ownerColumns.forEach((e=>{l.changeMaps.push({column:e,value:o})})),t.junctionEntityMetadata.inverseColumns.forEach((e=>{l.changeMaps.push({column:e,value:s})}))}));const r=[];i.forEach((e=>{let n=t.inverseEntityMetadata.getEntityIdMap(e);const i=this.subjects.find((t=>t.entity===e));i&&(n=i.identifier),null!=n&&r.push(n)}));n.filter((e=>!r.find((t=>oP.compareIds(t,e))))).forEach((n=>{const i=new bP({metadata:t.junctionEntityMetadata,parentSubject:e,mustBeRemoved:!0,identifier:this.buildJunctionIdentifier(e,t,n)});this.subjects.push(i)}))}buildJunctionIdentifier(e,t,n){const i=t.isOwning?e.entity:n,r=t.isOwning?n:e.entity,a={};return t.junctionEntityMetadata.ownerColumns.forEach((e=>{oP.mergeDeep(a,e.createValueMap(e.referencedColumn.getEntityValue(i)))})),t.junctionEntityMetadata.inverseColumns.forEach((e=>{oP.mergeDeep(a,e.createValueMap(e.referencedColumn.getEntityValue(r)))})),a}}class EP{constructor(e,t){this.queryRunner=e,this.subjects=t}async load(e){const t=this.groupByEntityTargets().map((async t=>{const n=[],i=[];if(t.subjects.forEach((e=>{!e.databaseEntity&&e.identifier&&(n.push(e.identifier),i.push(e))})),!n.length)return;const r=[];"save"===e||"soft-remove"===e||"recover"===e?t.subjects.forEach((e=>{e.metadata.relations.forEach((t=>{void 0!==t.getEntityValue(e.entityWithFulfilledIds)&&-1===r.indexOf(t.propertyPath)&&r.push(t.propertyPath)}))})):r.push(...t.subjects[0].metadata.manyToManyRelations.map((e=>e.propertyPath)));const a={loadEagerRelations:!1,loadRelationIds:{relations:r,disableMixedMap:!0},withDeleted:!0};let o=[];if("mongodb"===this.queryRunner.connection.driver.options.type){const e=this.queryRunner.manager.getRepository(t.target);o=await e.findByIds(n,a)}else o=await this.queryRunner.manager.getRepository(t.target).createQueryBuilder().setFindOptions(a).whereInIds(n).getMany();o.forEach((e=>{this.findByPersistEntityLike(t.target,e).forEach((t=>{t.databaseEntity=e,t.identifier||(t.identifier=t.metadata.hasAllPrimaryKeys(e)?t.metadata.getEntityIdMap(e):void 0)}))}));for(let e of i)e.databaseEntityLoaded=!0}));await Promise.all(t)}findByPersistEntityLike(e,t){return this.subjects.filter((n=>!!n.entity&&(n.entity===t||n.metadata.target===e&&n.metadata.compareEntities(n.entityWithFulfilledIds,t))))}groupByEntityTargets(){return this.subjects.reduce(((e,t)=>{let n=e.find((e=>e.target===t.metadata.target));return n||(n={target:t.metadata.target,subjects:[]},e.push(n)),n.subjects.push(t),e}),[])}}class xP{constructor(e){this.allSubjects=e}build(e,t){e.metadata.extractRelationValuesFromEntity(e.entity,e.metadata.relations).forEach((([n,i,r])=>{if(null==i||!n.isCascadeInsert&&!n.isCascadeUpdate&&!n.isCascadeSoftRemove&&!n.isCascadeRecover)return;if(!RO.isObject(i))return;const a=this.findByPersistEntityLike(r.target,i);if(a)return!1===a.canBeInserted&&(a.canBeInserted=!0===n.isCascadeInsert&&"save"===t),!1===a.canBeUpdated&&(a.canBeUpdated=!0===n.isCascadeUpdate&&"save"===t),!1===a.canBeSoftRemoved&&(a.canBeSoftRemoved=!0===n.isCascadeSoftRemove&&"soft-remove"===t),void(!1===a.canBeRecovered&&(a.canBeRecovered=!0===n.isCascadeRecover&&"recover"===t));const o=new bP({metadata:r,parentSubject:e,entity:i,canBeInserted:!0===n.isCascadeInsert&&"save"===t,canBeUpdated:!0===n.isCascadeUpdate&&"save"===t,canBeSoftRemoved:!0===n.isCascadeSoftRemove&&"soft-remove"===t,canBeRecovered:!0===n.isCascadeRecover&&"recover"===t});this.allSubjects.push(o),this.build(o,t)}))}findByPersistEntityLike(e,t){return this.allSubjects.find((n=>!!n.entity&&(n.entity===t||n.metadata.target===e&&n.metadata.compareEntities(n.entityWithFulfilledIds,t))))}}class TP{constructor(e,t,n,i,r,a){this.connection=e,this.queryRunner=t,this.mode=n,this.target=i,this.entity=r,this.options=a}async execute(){if(!this.entity||"object"!=typeof this.entity)return Promise.reject(new IO(this.mode,this.entity));await Promise.resolve();const e=this.queryRunner||this.connection.createQueryRunner();let t=e.data;this.options&&this.options.data&&(e.data=this.options.data);try{const t=Array.isArray(this.entity)?this.entity:[this.entity],r=this.options&&this.options.chunk&&this.options.chunk>0?oP.chunk(t,this.options.chunk):[t],a=await Promise.all(r.map((async t=>{const n=[];t.forEach((e=>{const t=this.target?this.target:e.constructor;if(t===Object)throw new NO(this.mode);let i=this.connection.getMetadata(t).findInheritanceMetadata(e);n.push(new bP({metadata:i,entity:e,canBeInserted:"save"===this.mode,canBeUpdated:"save"===this.mode,mustBeRemoved:"remove"===this.mode,canBeSoftRemoved:"soft-remove"===this.mode,canBeRecovered:"recover"===this.mode}))}));const i=new xP(n);return n.forEach((e=>{i.build(e,this.mode)})),await new EP(e,n).load(this.mode),"save"===this.mode||"soft-remove"===this.mode||"recover"===this.mode?(new yP(n).build(),new vP(n).build(),new wP(n).build()):n.forEach((e=>{e.mustBeRemoved&&new wP(n).buildForAllRemoval(e)})),new gP(e,n,this.options)}))),o=a.filter((e=>e.hasExecutableOperations));if(0===o.length)return;let s=!1;try{e.isTransactionActive||"none"===this.connection.driver.transactionSupport||this.options&&!1===this.options.transaction||(s=!0,await e.startTransaction());for(const e of o)await e.execute();!0===s&&await e.commitTransaction()}catch(n){if(s)try{await e.rollbackTransaction()}catch(i){}throw n}}finally{e.data=t,this.queryRunner||await e.release()}}}class CP{constructor(e,t){this["@instanceof"]=Symbol.for("EntityManager"),this.repositories=new Map,this.treeRepositories=[],this.plainObjectToEntityTransformer=new FR,this.connection=e,t&&(this.queryRunner=t,RO.assign(this.queryRunner,{manager:this}))}async transaction(e,t){const n="string"==typeof e?e:void 0,i="function"==typeof e?e:t;if(!i)throw new EO("Transaction method requires callback in second parameter if isolation level is supplied.");if(this.queryRunner&&this.queryRunner.isReleased)throw new qO;const r=this.queryRunner||this.connection.createQueryRunner();try{await r.startTransaction(n);const e=await i(r.manager);return await r.commitTransaction(),e}catch(a){try{await r.rollbackTransaction()}catch(o){}throw a}finally{this.queryRunner||await r.release()}}async query(e,t){return this.connection.query(e,t,this.queryRunner)}createQueryBuilder(e,t,n){return t?this.connection.createQueryBuilder(e,t,n||this.queryRunner):this.connection.createQueryBuilder(e||n||this.queryRunner)}hasId(e,t){const n=2===arguments.length?e:e.constructor,i=2===arguments.length?t:e;return this.connection.getMetadata(n).hasId(i)}getId(e,t){const n=2===arguments.length?e:e.constructor,i=2===arguments.length?t:e;return this.connection.getMetadata(n).getEntityIdMixedMap(i)}create(e,t){const n=this.connection.getMetadata(e);if(!t)return n.create(this.queryRunner);if(Array.isArray(t))return t.map((t=>this.create(e,t)));const i=n.create(this.queryRunner);return this.plainObjectToEntityTransformer.transform(i,t,n,!0),i}merge(e,t,...n){const i=this.connection.getMetadata(e);return n.forEach((e=>this.plainObjectToEntityTransformer.transform(t,e,i))),t}async preload(e,t){const n=this.connection.getMetadata(e),i=new VR(this.connection.manager),r=await i.transform(t,n);if(r)return this.merge(e,r,t)}save(e,t,n){let i=arguments.length>1&&("function"==typeof e||PO.isEntitySchema(e)||"string"==typeof e)?e:void 0;const r=i?t:e,a=i?n:t;return PO.isEntitySchema(i)&&(i=i.options.name),Array.isArray(r)&&0===r.length?Promise.resolve(r):new TP(this.connection,this.queryRunner,"save",i,r,a).execute().then((()=>r))}remove(e,t,n){const i=arguments.length>1&&("function"==typeof e||PO.isEntitySchema(e)||"string"==typeof e)?e:void 0,r=i?t:e,a=i?n:t;return Array.isArray(r)&&0===r.length?Promise.resolve(r):new TP(this.connection,this.queryRunner,"remove",i,r,a).execute().then((()=>r))}softRemove(e,t,n){let i=arguments.length>1&&("function"==typeof e||PO.isEntitySchema(e)||"string"==typeof e)?e:void 0;const r=i?t:e,a=i?n:t;return PO.isEntitySchema(i)&&(i=i.options.name),Array.isArray(r)&&0===r.length?Promise.resolve(r):new TP(this.connection,this.queryRunner,"soft-remove",i,r,a).execute().then((()=>r))}recover(e,t,n){let i=arguments.length>1&&("function"==typeof e||PO.isEntitySchema(e)||"string"==typeof e)?e:void 0;const r=i?t:e,a=i?n:t;return PO.isEntitySchema(i)&&(i=i.options.name),Array.isArray(r)&&0===r.length?Promise.resolve(r):new TP(this.connection,this.queryRunner,"recover",i,r,a).execute().then((()=>r))}async insert(e,t){return this.createQueryBuilder().insert().into(e).values(t).execute()}async upsert(e,t,n){const i=this.connection.getMetadata(e);let r,a;r=Array.isArray(n)?{conflictPaths:n}:n,a=Array.isArray(t)?t:[t];const o=i.mapPropertyPathsToColumns(Array.isArray(r.conflictPaths)?r.conflictPaths:Object.keys(r.conflictPaths)),s=i.columns.filter((e=>!o.includes(e)&&a.some((t=>void 0!==e.getEntityValue(t)))));return this.createQueryBuilder().insert().into(e).values(a).orUpdate([...o,...s].map((e=>e.databaseName)),o.map((e=>e.databaseName)),{skipUpdateIfNoValuesChanged:r.skipUpdateIfNoValuesChanged,indexPredicate:r.indexPredicate,upsertType:r.upsertType||this.connection.driver.supportedUpsertTypes[0]}).execute()}update(e,t,n){return null==t||""===t||Array.isArray(t)&&0===t.length?Promise.reject(new EO("Empty criteria(s) are not allowed for the update method.")):"string"==typeof t||"number"==typeof t||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().update(e).set(n).whereInIds(t).execute():this.createQueryBuilder().update(e).set(n).where(t).execute()}delete(e,t){return null==t||""===t||Array.isArray(t)&&0===t.length?Promise.reject(new EO("Empty criteria(s) are not allowed for the delete method.")):"string"==typeof t||"number"==typeof t||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().delete().from(e).whereInIds(t).execute():this.createQueryBuilder().delete().from(e).where(t).execute()}softDelete(e,t){return null==t||""===t||Array.isArray(t)&&0===t.length?Promise.reject(new EO("Empty criteria(s) are not allowed for the delete method.")):"string"==typeof t||"number"==typeof t||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().softDelete().from(e).whereInIds(t).execute():this.createQueryBuilder().softDelete().from(e).where(t).execute()}restore(e,t){return null==t||""===t||Array.isArray(t)&&0===t.length?Promise.reject(new EO("Empty criteria(s) are not allowed for the delete method.")):"string"==typeof t||"number"==typeof t||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().restore().from(e).whereInIds(t).execute():this.createQueryBuilder().restore().from(e).where(t).execute()}exists(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,LR.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getExists()}count(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,LR.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getCount()}countBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getCount()}sum(e,t,n){return this.callAggregateFun(e,"SUM",t,n)}average(e,t,n){return this.callAggregateFun(e,"AVG",t,n)}minimum(e,t,n){return this.callAggregateFun(e,"MIN",t,n)}maximum(e,t,n){return this.callAggregateFun(e,"MAX",t,n)}async callAggregateFun(e,t,n,i={}){const r=this.connection.getMetadata(e),a=await this.createQueryBuilder(e,r.name).setFindOptions({where:i}).select(`${t}(${this.connection.driver.escape(String(n))})`,t).getRawOne();return null===a[t]?null:parseFloat(a[t])}async find(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,LR.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getMany()}async findBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getMany()}findAndCount(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,LR.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getManyAndCount()}findAndCountBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getManyAndCount()}async findByIds(e,t){if(!t.length)return Promise.resolve([]);const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).andWhereInIds(t).getMany()}async findOne(e,t){let n=this.connection.getMetadata(e).name;if(t&&t.join&&(n=t.join.alias),!t.where)throw new Error("You must provide selection conditions in order to find a single row.");return this.createQueryBuilder(e,n).setFindOptions({...t,take:1}).getOne()}async findOneBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t,take:1}).getOne()}async findOneById(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({take:1}).whereInIds(n.ensureEntityIdMap(t)).getOne()}async findOneOrFail(e,t){return this.findOne(e,t).then((n=>null===n?Promise.reject(new MO(e,t)):Promise.resolve(n)))}async findOneByOrFail(e,t){return this.findOneBy(e,t).then((n=>null===n?Promise.reject(new MO(e,t)):Promise.resolve(n)))}async clear(e){const t=this.connection.getMetadata(e),n=this.queryRunner||this.connection.createQueryRunner();try{return await n.clearTable(t.tablePath)}finally{this.queryRunner||await n.release()}}async increment(e,t,n,i){const r=this.connection.getMetadata(e),a=r.findColumnWithPropertyPath(n);if(!a)throw new EO(`Column ${n} was not found in ${r.targetName} entity.`);if(isNaN(Number(i)))throw new EO(`Value "${i}" is not a number.`);const o=n.split(".").reduceRight(((e,t)=>({[t]:e})),(()=>this.connection.driver.escape(a.databaseName)+" + "+i));return this.createQueryBuilder(e,"entity").update(e).set(o).where(t).execute()}async decrement(e,t,n,i){const r=this.connection.getMetadata(e),a=r.findColumnWithPropertyPath(n);if(!a)throw new EO(`Column ${n} was not found in ${r.targetName} entity.`);if(isNaN(Number(i)))throw new EO(`Value "${i}" is not a number.`);const o=n.split(".").reduceRight(((e,t)=>({[t]:e})),(()=>this.connection.driver.escape(a.databaseName)+" - "+i));return this.createQueryBuilder(e,"entity").update(e).set(o).where(t).execute()}getRepository(e){const t=this.repositories.get(e);if(t)return t;if("mongodb"===this.connection.driver.options.type){const t=new AR(e,this,this.queryRunner);return this.repositories.set(e,t),t}{const t=new qR(e,this,this.queryRunner);return this.repositories.set(e,t),t}}getTreeRepository(e){if(!1===this.connection.driver.treeSupport)throw new kO(this.connection.driver);const t=this.treeRepositories.find((t=>t.target===e));if(t)return t;const n=new BR(e,this,this.queryRunner);return this.treeRepositories.push(n),n}getMongoRepository(e){return this.connection.getMongoRepository(e)}withRepository(e){const t=e.constructor,{target:n,manager:i,queryRunner:r,...a}=e;return Object.assign(new t(e.target,this),{...a})}getCustomRepository(e){const t=h$().entityRepositories.find((t=>t.target===("function"==typeof e?e:e.constructor)));if(!t)throw new AO(e);const n=t.entity?this.connection.getMetadata(t.entity):void 0,i=new t.target(this,n);if(i instanceof WR)i.manager||(i.manager=this);else{if(!n)throw new jO(e);i.manager=this,i.metadata=n}return i}async release(){if(!this.queryRunner)throw new tR;return this.queryRunner.release()}}class SP extends CP{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SqljsEntityManager"),this.driver=e.driver}async loadDatabase(e){await this.driver.load(e)}async saveDatabase(e){await this.driver.save(e)}exportDatabase(){return this.driver.export()}}class NP{create(e,t){return"mongodb"===e.driver.options.type?new kR(e):"sqljs"===e.driver.options.type?new SP(e,t):new CP(e,t)}}class kP{constructor(e){this["@instanceof"]=Symbol.for("View"),this.indices=[],e&&(this.database=e.database,this.schema=e.schema,this.name=e.name,this.expression=e.expression,this.materialized=!!e.materialized)}clone(){return new kP({database:this.database,schema:this.schema,name:this.name,expression:this.expression,materialized:this.materialized})}addIndex(e){this.indices.push(e)}removeIndex(e){const t=this.indices.find((t=>t.name===e.name));t&&this.indices.splice(this.indices.indexOf(t),1)}static create(e,t){const n={database:e.database,schema:e.schema,name:t.buildTableName(e.tableName,e.schema,e.database),expression:e.expression,materialized:e.tableMetadataArgs.materialized};return new kP(n)}}class AP{static viewMetadataCmp(e,t){return e&&t?e.dependsOn&&(e.dependsOn.has(t.target)||e.dependsOn.has(t.name))?1:t.dependsOn&&(t.dependsOn.has(e.target)||t.dependsOn.has(e.name))?-1:0:0}}class _P{constructor(e){this.connection=e,this["@instanceof"]=Symbol.for("RdbmsSchemaBuilder")}async build(){this.queryRunner=this.connection.createQueryRunner(),this.currentDatabase=this.connection.driver.database,this.currentSchema=this.connection.driver.schema;const e=!("cockroachdb"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type||"none"===this.connection.options.migrationsTransactionMode);await this.queryRunner.beforeMigration(),e&&await this.queryRunner.startTransaction();try{await this.createMetadataTableIfNecessary(this.queryRunner);const t=this.entityToSyncMetadatas.map((e=>this.getTablePath(e))),n=this.viewEntityToSyncMetadatas.map((e=>this.getTablePath(e)));await this.queryRunner.getTables(t),await this.queryRunner.getViews(n),await this.executeSchemaSyncOperationsInProperOrder(),this.connection.queryResultCache&&await this.connection.queryResultCache.synchronize(this.queryRunner),e&&await this.queryRunner.commitTransaction()}catch(t){try{e&&await this.queryRunner.rollbackTransaction()}catch(n){}throw t}finally{await this.queryRunner.afterMigration(),await this.queryRunner.release()}}async createMetadataTableIfNecessary(e){(this.viewEntityToSyncMetadatas.length>0||this.hasGeneratedColumns())&&await this.createTypeormMetadataTable(e)}async log(){this.queryRunner=this.connection.createQueryRunner();try{const e=this.entityToSyncMetadatas.map((e=>this.getTablePath(e))),t=this.viewEntityToSyncMetadatas.map((e=>this.getTablePath(e)));return await this.queryRunner.getTables(e),await this.queryRunner.getViews(t),this.queryRunner.enableSqlMemory(),await this.executeSchemaSyncOperationsInProperOrder(),this.connection.queryResultCache&&await this.connection.queryResultCache.synchronize(this.queryRunner),this.queryRunner.getMemorySql()}finally{this.queryRunner.disableSqlMemory(),await this.queryRunner.release()}}get entityToSyncMetadatas(){return this.connection.entityMetadatas.filter((e=>e.synchronize&&"entity-child"!==e.tableType&&"view"!==e.tableType))}get viewEntityToSyncMetadatas(){return this.connection.entityMetadatas.filter((e=>"view"===e.tableType&&e.synchronize)).sort(AP.viewMetadataCmp)}hasGeneratedColumns(){return this.connection.entityMetadatas.some((e=>e.columns.some((e=>e.generatedType))))}async executeSchemaSyncOperationsInProperOrder(){await this.dropOldViews(),await this.dropOldForeignKeys(),await this.dropOldIndices(),await this.dropOldChecks(),await this.dropOldExclusions(),await this.dropCompositeUniqueConstraints(),await this.renameColumns(),await this.createNewTables(),await this.dropRemovedColumns(),await this.addNewColumns(),await this.updatePrimaryKeys(),await this.updateExistColumns(),await this.createNewIndices(),await this.createNewChecks(),await this.createNewExclusions(),await this.createCompositeUniqueConstraints(),await this.createForeignKeys(),await this.createViews(),await this.createNewViewIndices()}getTablePath(e){const t=this.connection.driver.parseTableName(e);return this.connection.driver.buildTableName(t.tableName,t.schema||this.currentSchema,t.database||this.currentDatabase)}async dropOldForeignKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.foreignKeys.filter((t=>{const n=e.foreignKeys.find((e=>t.name===e.name&&this.getTablePath(t)===this.getTablePath(e.referencedEntityMetadata)));return!n||n.onDelete&&n.onDelete!==t.onDelete||n.onUpdate&&n.onUpdate!==t.onUpdate}));0!==n.length&&(this.connection.logger.logSchemaBuild(`dropping old foreign keys of ${t.name}: ${n.map((e=>e.name)).join(", ")}`),await this.queryRunner.dropForeignKeys(t,n))}}async renameTables(){}async renameColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;if(e.columns.length!==t.columns.length)continue;const n=e.columns.filter((e=>!e.isVirtualProperty)).filter((e=>!t.columns.find((t=>t.name===e.databaseName&&t.type===this.connection.driver.normalizeType(e)&&t.isNullable===e.isNullable&&t.isUnique===this.connection.driver.normalizeIsUnique(e)))));if(0===n.length||n.length>1)continue;const i=t.columns.filter((t=>!e.columns.find((e=>!e.isVirtualProperty&&e.databaseName===t.name&&this.connection.driver.normalizeType(e)===t.type&&e.isNullable===t.isNullable&&this.connection.driver.normalizeIsUnique(e)===t.isUnique))));if(0===i.length||i.length>1)continue;const r=i[0].clone();r.name=n[0].databaseName,this.connection.logger.logSchemaBuild(`renaming column "${i[0].name}" in "${t.name}" to "${r.name}"`),await this.queryRunner.renameColumn(t,i[0],r)}}async dropOldIndices(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.indices.filter((t=>{const n=e.indices.find((e=>e.name===t.name));return!n||!1!==n.synchronize&&(n.isUnique!==t.isUnique||(n.isSpatial!==t.isSpatial||(!(!this.connection.driver.isFullTextColumnTypeSupported()||n.isFulltext===t.isFulltext)||(n.columns.length!==t.columnNames.length||!n.columns.every((e=>-1!==t.columnNames.indexOf(e.databaseName)))))))})).map((async e=>{this.connection.logger.logSchemaBuild(`dropping an index: "${e.name}" from table ${t.name}`),await this.queryRunner.dropIndex(t,e)}));await Promise.all(n)}if("postgres"===this.connection.options.type){const e=this.queryRunner;for(const t of this.viewEntityToSyncMetadatas){const n=this.queryRunner.loadedViews.find((e=>this.getTablePath(e)===this.getTablePath(t)));if(!n)continue;const i=n.indices.filter((e=>{const n=t.indices.find((t=>t.name===e.name));return!n||!1!==n.synchronize&&(n.isUnique!==e.isUnique||(n.isSpatial!==e.isSpatial||(!(!this.connection.driver.isFullTextColumnTypeSupported()||n.isFulltext===e.isFulltext)||(n.columns.length!==e.columnNames.length||!n.columns.every((t=>-1!==e.columnNames.indexOf(t.databaseName)))))))})).map((async t=>{this.connection.logger.logSchemaBuild(`dropping an index: "${t.name}" from view ${n.name}`),await e.dropViewIndex(n,t)}));await Promise.all(i)}}}async dropOldChecks(){if(!CR.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type)for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.checks.filter((t=>!e.checks.find((e=>e.name===t.name))));0!==n.length&&(this.connection.logger.logSchemaBuild(`dropping old check constraint: ${n.map((e=>`"${e.name}"`)).join(", ")} from table "${t.name}"`),await this.queryRunner.dropCheckConstraints(t,n))}}async dropCompositeUniqueConstraints(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.uniques.filter((t=>t.columnNames.length>1&&!e.uniques.find((e=>e.name===t.name))));0!==n.length&&(this.connection.logger.logSchemaBuild(`dropping old unique constraint: ${n.map((e=>`"${e.name}"`)).join(", ")} from table "${t.name}"`),await this.queryRunner.dropUniqueConstraints(t,n))}}async dropOldExclusions(){if("postgres"===this.connection.driver.options.type)for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.exclusions.filter((t=>!e.exclusions.find((e=>e.name===t.name))));0!==n.length&&(this.connection.logger.logSchemaBuild(`dropping old exclusion constraint: ${n.map((e=>`"${e.name}"`)).join(", ")} from table "${t.name}"`),await this.queryRunner.dropExclusionConstraints(t,n))}}async createNewTables(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(t)continue;this.connection.logger.logSchemaBuild(`creating a new table: ${this.getTablePath(e)}`);const n=gR.create(e,this.connection.driver);await this.queryRunner.createTable(n,!1,!1),this.queryRunner.loadedTables.push(n)}}async createViews(){for(const e of this.viewEntityToSyncMetadatas){const t=this.queryRunner.loadedViews.find((t=>{const n="string"==typeof t.expression?t.expression.trim():t.expression(this.connection).getQuery(),i="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.getTablePath(t)===this.getTablePath(e)&&n===i}));if(t)continue;this.connection.logger.logSchemaBuild(`creating a new view: ${this.getTablePath(e)}`);const n=kP.create(e,this.connection.driver);await this.queryRunner.createView(n,!0),this.queryRunner.loadedViews.push(n)}}async dropOldViews(){const e=[],t=this.viewEntityToSyncMetadatas,n=new Map;for(const a of this.queryRunner.loadedViews){const e=t.find((e=>this.getTablePath(a)===this.getTablePath(e)));e&&n.set(a,e)}for(const a of this.queryRunner.loadedViews){const t=n.get(a);if(!t)continue;("string"==typeof a.expression?a.expression.trim():a.expression(this.connection).getQuery())!==("string"==typeof t.expression?t.expression.trim():t.expression(this.connection).getQuery())&&(this.connection.logger.logSchemaBuild(`dropping an old view: ${a.name}`),e.push(a))}const i=e=>{const t=n.get(e);let r=[e];if(!t)return r;for(const[a,o]of n.entries())a!==e&&o.dependsOn&&(o.dependsOn.has(t.target)||o.dependsOn.has(t.name))&&(r=r.concat(i(a)));return r},r=new Set(e.map((e=>i(e))).reduce(((e,t)=>e.concat(t)),[]).sort(((e,t)=>AP.viewMetadataCmp(n.get(e),n.get(t)))).reverse());for(const a of r)await this.queryRunner.dropView(a);this.queryRunner.loadedViews=this.queryRunner.loadedViews.filter((e=>!r.has(e)))}async dropRemovedColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.columns.filter((t=>!e.columns.find((e=>e.isVirtualProperty||e.databaseName===t.name))));0!==n.length&&(this.connection.logger.logSchemaBuild(`columns dropped in ${t.name}: `+n.map((e=>e.name)).join(", ")),await this.queryRunner.dropColumns(t,n))}}async addNewColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.columns.filter((e=>!e.isVirtualProperty&&!t.columns.find((t=>t.name===e.databaseName))));if(0===n.length)continue;const i=this.metadataColumnsToTableColumnOptions(n).map((e=>new cR(e)));0!==i.length&&(this.connection.logger.logSchemaBuild("new columns added: "+n.map((e=>e.databaseName)).join(", ")),await this.queryRunner.addColumns(t,i))}}async updatePrimaryKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.columns.filter((e=>e.isPrimary));if(t.columns.filter((e=>e.isPrimary)).length!==n.length&&n.length>1){const e=n.map((e=>new cR(hR.createTableColumnOptions(e,this.connection.driver))));await this.queryRunner.updatePrimaryKeys(t,e)}}}async updateExistColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=this.connection.driver.findChangedColumns(t.columns,e.columns);if(0===n.length)continue;for(const r of n)await this.dropColumnReferencedForeignKeys(this.getTablePath(e),r.databaseName);for(const r of n)await this.dropColumnCompositeIndices(this.getTablePath(e),r.databaseName);if(!CR.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type&&"spanner"!==this.connection.driver.options.type)for(const r of n)await this.dropColumnCompositeUniques(this.getTablePath(e),r.databaseName);const i=n.map((e=>{const n=t.columns.find((t=>t.name===e.databaseName)),i=hR.createTableColumnOptions(e,this.connection.driver);return{oldColumn:n,newColumn:new cR(i)}}));0!==i.length&&(this.connection.logger.logSchemaBuild(`columns changed in "${t.name}". updating: `+n.map((e=>e.databaseName)).join(", ")),await this.queryRunner.changeColumns(t,i))}}async createNewIndices(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.indices.filter((e=>!t.indices.find((t=>t.name===e.name))&&!0===e.synchronize)).map((e=>uR.create(e)));0!==n.length&&(this.connection.logger.logSchemaBuild(`adding new indices ${n.map((e=>`"${e.name}"`)).join(", ")} in table "${t.name}"`),await this.queryRunner.createIndices(t,n))}}async createNewViewIndices(){if("postgres"!==this.connection.options.type||!CR.isPostgresFamily(this.connection.driver))return;const e=this.queryRunner;for(const t of this.viewEntityToSyncMetadatas){const n=this.queryRunner.loadedViews.find((e=>{const n="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery(),i="string"==typeof t.expression?t.expression.trim():t.expression(this.connection).getQuery();return this.getTablePath(e)===this.getTablePath(t)&&n===i}));if(!n||!n.materialized)continue;const i=t.indices.filter((e=>!n.indices.find((t=>t.name===e.name))&&!0===e.synchronize)).map((e=>uR.create(e)));0!==i.length&&(this.connection.logger.logSchemaBuild(`adding new indices ${i.map((e=>`"${e.name}"`)).join(", ")} in view "${n.name}"`),await e.createViewIndices(n,i))}}async createNewChecks(){if(!CR.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type)for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.checks.filter((e=>!t.checks.find((t=>t.name===e.name)))).map((e=>mR.create(e)));0!==n.length&&(this.connection.logger.logSchemaBuild(`adding new check constraints: ${n.map((e=>`"${e.name}"`)).join(", ")} in table "${t.name}"`),await this.queryRunner.createCheckConstraints(t,n))}}async createCompositeUniqueConstraints(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.uniques.filter((e=>e.columns.length>1&&!t.uniques.find((t=>t.name===e.name)))).map((e=>pR.create(e)));0!==n.length&&(this.connection.logger.logSchemaBuild(`adding new unique constraints: ${n.map((e=>`"${e.name}"`)).join(", ")} in table "${t.name}"`),await this.queryRunner.createUniqueConstraints(t,n))}}async createNewExclusions(){if("postgres"===this.connection.driver.options.type)for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.exclusions.filter((e=>!t.exclusions.find((t=>t.name===e.name)))).map((e=>fR.create(e)));0!==n.length&&(this.connection.logger.logSchemaBuild(`adding new exclusion constraints: ${n.map((e=>`"${e.name}"`)).join(", ")} in table "${t.name}"`),await this.queryRunner.createExclusionConstraints(t,n))}}async createForeignKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.foreignKeys.filter((e=>!t.foreignKeys.find((t=>t.name===e.name&&this.getTablePath(t)===this.getTablePath(e.referencedEntityMetadata)))));if(0===n.length)continue;const i=n.map((e=>dR.create(e,this.connection.driver)));this.connection.logger.logSchemaBuild(`creating a foreign keys: ${n.map((e=>e.name)).join(", ")} on table "${t.name}"`),await this.queryRunner.createForeignKeys(t,i)}}async dropColumnReferencedForeignKeys(e,t){const n=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===e));if(!n)return;const i=[],r=n.foreignKeys.find((e=>-1!==e.columnNames.indexOf(t)));if(r){const e=n.clone();e.foreignKeys=[r],i.push(e),n.removeForeignKey(r)}for(const a of this.queryRunner.loadedTables){const n=a.foreignKeys.filter((n=>this.getTablePath(n)===e&&-1!==n.referencedColumnNames.indexOf(t)));if(n.length>0){const e=a.clone();e.foreignKeys=n,i.push(e),n.forEach((e=>a.removeForeignKey(e)))}}if(i.length>0)for(const a of i)this.connection.logger.logSchemaBuild(`dropping related foreign keys of ${a.name}: ${a.foreignKeys.map((e=>e.name)).join(", ")}`),await this.queryRunner.dropForeignKeys(a,a.foreignKeys)}async dropColumnCompositeIndices(e,t){const n=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===e));if(!n)return;const i=n.indices.filter((e=>e.columnNames.length>1&&-1!==e.columnNames.indexOf(t)));0!==i.length&&(this.connection.logger.logSchemaBuild(`dropping related indices of "${e}"."${t}": ${i.map((e=>e.name)).join(", ")}`),await this.queryRunner.dropIndices(n,i))}async dropColumnCompositeUniques(e,t){const n=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===e));if(!n)return;const i=n.uniques.filter((e=>e.columnNames.length>1&&-1!==e.columnNames.indexOf(t)));0!==i.length&&(this.connection.logger.logSchemaBuild(`dropping related unique constraints of "${e}"."${t}": ${i.map((e=>e.name)).join(", ")}`),await this.queryRunner.dropUniqueConstraints(n,i))}metadataColumnsToTableColumnOptions(e){return e.map((e=>hR.createTableColumnOptions(e,this.connection.driver)))}async createTypeormMetadataTable(e){const t=this.currentSchema,n=this.currentDatabase,i=this.connection.driver.buildTableName(this.connection.metadataTableName,t,n),r="spanner"===this.connection.driver.options.type;await e.createTable(new gR({database:n,schema:t,name:i,columns:[{name:"type",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataType}),isNullable:!1,isPrimary:r},{name:"database",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataDatabase}),isNullable:!0,isPrimary:r},{name:"schema",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataSchema}),isNullable:!0,isPrimary:r},{name:"table",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataTable}),isNullable:!0,isPrimary:r},{name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataName}),isNullable:!0,isPrimary:r},{name:"value",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataValue}),isNullable:!0,isPrimary:r}]}),!0)}}class OP{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["int","integer","tinyint","smallint","mediumint","bigint","unsigned big int","int2","int8","integer","character","varchar","varying character","nchar","native character","nvarchar","text","clob","text","blob","real","double","double precision","float","real","numeric","decimal","boolean","date","time","datetime","json"],this.supportedUpsertTypes=["on-conflict-do-update"],this.withLengthColumnTypes=["character","varchar","varying character","nchar","native character","nvarchar","text","blob","clob"],this.spatialTypes=[],this.withPrecisionColumnTypes=["real","double","double precision","float","real","numeric","decimal","date","time","datetime"],this.withScaleColumnTypes=["real","double","double precision","float","real","numeric","decimal"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"datetime('now')",updateDate:"datetime",updateDateDefault:"datetime('now')",deleteDate:"datetime",deleteDateNullable:!0,version:"integer",treeLevel:"integer",migrationId:"integer",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.cteCapabilities={enabled:!0,requiresRecursiveHint:!0},this.attachedDatabases={},this.connection=e,this.options=e.options,this.database=CR.buildDriverOptions(this.options).database}async connect(){this.databaseConnection=await this.createDatabaseConnection()}afterConnect(){return Promise.resolve()}async disconnect(){return new Promise(((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close((n=>n?t(n):e()))}))}hasAttachedDatabases(){return!!Object.keys(this.attachedDatabases).length}getAttachedDatabaseHandleByRelativePath(e){var t,n;return null===(n=null===(t=this.attachedDatabases)||void 0===t?void 0:t[e])||void 0===n?void 0:n.attachHandle}getAttachedDatabasePathRelativeByHandle(e){var t;return null===(t=Object.values(this.attachedDatabases).find((({attachHandle:t})=>e===t)))||void 0===t?void 0:t.attachFilepathRelative}createSchemaBuilder(){return new _P(this.connection)}preparePersistentValue(e,t){return t.transformer&&(e=sP.transformTo(t.transformer,e)),null==e?e:t.type===Boolean||"boolean"===t.type?!0===e?1:0:"date"===t.type?aP.mixedDateToDateString(e):"time"===t.type?aP.mixedDateToTimeString(e):"datetime"===t.type||t.type===Date?aP.mixedDateToUtcDatetimeString(e):"json"===t.type||"simple-json"===t.type?aP.simpleJsonToString(e):"simple-array"===t.type?aP.simpleArrayToString(e):"simple-enum"===t.type?aP.simpleEnumToString(e):e}prepareHydratedValue(e,t){return null==e?t.transformer?sP.transformFrom(t.transformer,e):e:(t.type===Boolean||"boolean"===t.type?e=!!e:"datetime"===t.type||t.type===Date?(e&&"string"==typeof e&&(/^\d\d\d\d-\d\d-\d\d \d\d:\d\d/.test(e)&&(e=e.replace(" ","T")),/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d(:\d\d(\.\d\d\d)?)?$/.test(e)&&(e+="Z")),e=aP.normalizeHydratedDate(e)):"date"===t.type?e=aP.mixedDateToDateString(e):"time"===t.type?e=aP.mixedTimeToString(e):"json"===t.type||"simple-json"===t.type?e=aP.stringToSimpleJson(e):"simple-array"===t.type?e=aP.stringToSimpleArray(e):"simple-enum"===t.type?e=aP.stringToSimpleEnum(e,t):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=sP.transformFrom(t.transformer,e)),e)}escapeQueryWithParameters(e,t,n){const i=Object.keys(n).map((e=>"boolean"==typeof n[e]?!0===n[e]?1:0:n[e]instanceof Date?aP.mixedDateToUtcDatetimeString(n[e]):n[e]));return t&&Object.keys(t).length?(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,r)=>{if(!t.hasOwnProperty(r))return e;let a=t[r];return n?a.map((e=>(i.push(e),this.createParameter(r,i.length-1)))).join(", "):"function"==typeof a?a():"number"==typeof a?String(a):"boolean"==typeof a?(i.push(+a),this.createParameter(r,i.length-1)):a instanceof Date?(i.push(aP.mixedDateToUtcDatetimeString(a)),this.createParameter(r,i.length-1)):(i.push(a),this.createParameter(r,i.length-1))})),[e,i]):[e,i]}escape(e){return'"'+e+'"'}buildTableName(e,t,n){return e}parseTableName(e){var t;const n=this.database,i=void 0;if(PO.isTable(e)||PO.isView(e)){const t=this.parseTableName(e.schema?`"${e.schema}"."${e.name}"`:e.name);return{database:e.database||t.database||n,schema:e.schema||t.schema||i,tableName:t.tableName}}if(PO.isTableForeignKey(e)){const t=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||t.database||n,schema:e.referencedSchema||t.schema||i,tableName:t.tableName}}if(PO.isEntityMetadata(e))return{database:e.database||n,schema:e.schema||i,tableName:e.tableName};const r=e.split(".");if(3===r.length)return{database:r[0]||n,schema:r[1]||i,tableName:r[2]};if(2===r.length){return{database:null!==(t=this.getAttachedDatabasePathRelativeByHandle(r[0]))&&void 0!==t?t:n,schema:r[0],tableName:r[1]}}return{database:n,schema:i,tableName:e}}normalizeType(e){return e.type===Number||"int"===e.type?"integer":e.type===String?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":"uuid"===e.type?"varchar":"simple-array"===e.type||"simple-json"===e.type?"text":"simple-enum"===e.type?"varchar":e.type||""}normalizeDefault(e){const t=e.default;return"number"==typeof t?""+t:"boolean"==typeof t?t?"1":"0":"function"==typeof t?t():"string"==typeof t?`'${t}'`:null!=t?`${t}`:void 0}normalizeIsUnique(e){return e.entityMetadata.uniques.some((t=>1===t.columns.length&&t.columns[0]===e))}getColumnLength(e){return e.length?e.length.toString():""}createFullType(e){let t=e.type;return e.enum?"varchar":(e.length?t+="("+e.length+")":null!==e.precision&&void 0!==e.precision&&null!==e.scale&&void 0!==e.scale?t+="("+e.precision+","+e.scale+")":null!==e.precision&&void 0!==e.precision&&(t+="("+e.precision+")"),e.isArray&&(t+=" array"),t)}obtainMasterConnection(){return Promise.resolve()}obtainSlaveConnection(){return Promise.resolve()}createGeneratedMap(e,t,n,i){const r=e.generatedColumns.reduce(((e,r)=>{let a;return"increment"===r.generationStrategy&&t&&(a=t-i+n+1),a?oP.mergeDeep(e,r.createValueMap(a)):e}),{});return Object.keys(r).length>0?r:void 0}findChangedColumns(e,t){return t.filter((t=>{const n=e.find((e=>e.name===t.databaseName));if(!n)return!1;return n.name!==t.databaseName||n.type!==this.normalizeType(t)||n.length!==t.length||n.precision!==t.precision||n.scale!==t.scale||this.normalizeDefault(t)!==n.default||n.isPrimary!==t.isPrimary||n.isNullable!==t.isNullable||n.generatedType!==t.generatedType||n.asExpression!==t.asExpression||n.isUnique!==this.normalizeIsUnique(t)||n.enum&&t.enum&&!oP.isArraysEqual(n.enum,t.enum.map((e=>e+"")))||"uuid"!==t.generationStrategy&&n.isGenerated!==t.isGenerated}))}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"?"}createDatabaseConnection(){throw new EO("Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers")}loadDependencies(){}}class RP{constructor(e,t){this.query=e,this.parameters=t,this["@instanceof"]=Symbol.for("Query")}}class PP{constructor(){this.upQueries=[],this.downQueries=[]}}class MP{constructor(){this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.loadedTables=[],this.loadedViews=[],this.sqlMemoryMode=!1,this.sqlInMemory=new PP,this.transactionDepth=0,this.cachedTablePaths={}}async beforeMigration(){}async afterMigration(){}async getTable(e){return this.loadedTables=await this.loadTables([e]),this.loadedTables.length>0?this.loadedTables[0]:void 0}async getTables(e){return e?(this.loadedTables=await this.loadTables(e),this.loadedTables):await this.loadTables(e)}async getView(e){return this.loadedViews=await this.loadViews([e]),this.loadedViews.length>0?this.loadedViews[0]:void 0}async getViews(e){return this.loadedViews=await this.loadViews(e),this.loadedViews}enableSqlMemory(){this.sqlInMemory=new PP,this.sqlMemoryMode=!0}disableSqlMemory(){this.sqlInMemory=new PP,this.sqlMemoryMode=!1}clearSqlMemory(){this.sqlInMemory=new PP}getMemorySql(){return this.sqlInMemory}async executeMemoryUpSql(){for(const{query:e,parameters:t}of this.sqlInMemory.upQueries)await this.query(e,t)}async executeMemoryDownSql(){for(const{query:e,parameters:t}of this.sqlInMemory.downQueries.reverse())await this.query(e,t)}getReplicationMode(){return this.mode}async getCachedView(e){const t=this.loadedViews.find((t=>t.name===e));if(t)return t;const n=await this.loadViews([e]);if(n.length>0)return this.loadedViews.push(n[0]),n[0];throw new EO(`View "${e}" does not exist.`)}async getCachedTable(e){if(e in this.cachedTablePaths){const t=this.cachedTablePaths[e],n=this.loadedTables.find((e=>this.getTablePath(e)===t));if(n)return n}const t=await this.loadTables([e]);if(t.length>0){const n=this.getTablePath(t[0]),i=this.loadedTables.find((e=>this.getTablePath(e)===n));return i||(this.cachedTablePaths[e]=this.getTablePath(t[0]),this.loadedTables.push(t[0]),t[0])}throw new EO(`Table "${e}" does not exist.`)}replaceCachedTable(e,t){const n=this.getTablePath(e),i=this.loadedTables.find((e=>this.getTablePath(e)===n));for(const[r,a]of Object.entries(this.cachedTablePaths))a===n&&(this.cachedTablePaths[r]=this.getTablePath(t));i&&(i.database=t.database,i.schema=t.schema,i.name=t.name,i.columns=t.columns,i.indices=t.indices,i.foreignKeys=t.foreignKeys,i.uniques=t.uniques,i.checks=t.checks,i.justCreated=t.justCreated,i.engine=t.engine)}getTablePath(e){const t=this.connection.driver.parseTableName(e);return this.connection.driver.buildTableName(t.tableName,t.schema,t.database)}getTypeormMetadataTableName(){const e=this.connection.driver.options;return this.connection.driver.buildTableName(this.connection.metadataTableName,e.schema,e.database)}selectTypeormMetadataSql({database:e,schema:t,table:n,type:i,name:r}){const a=this.connection.createQueryBuilder(),o=a.select().from(this.getTypeormMetadataTableName(),"t").where(`${a.escape("type")} = :type`,{type:i}).andWhere(`${a.escape("name")} = :name`,{name:r});e&&o.andWhere(`${a.escape("database")} = :database`,{database:e}),t&&o.andWhere(`${a.escape("schema")} = :schema`,{schema:t}),n&&o.andWhere(`${a.escape("table")} = :table`,{table:n});const[s,l]=o.getQueryAndParameters();return new RP(s,l)}insertTypeormMetadataSql({database:e,schema:t,table:n,type:i,name:r,value:a}){const[o,s]=this.connection.createQueryBuilder().insert().into(this.getTypeormMetadataTableName()).values({database:e,schema:t,table:n,type:i,name:r,value:a}).getQueryAndParameters();return new RP(o,s)}deleteTypeormMetadataSql({database:e,schema:t,table:n,type:i,name:r}){const a=this.connection.createQueryBuilder(),o=a.delete().from(this.getTypeormMetadataTableName()).where(`${a.escape("type")} = :type`,{type:i}).andWhere(`${a.escape("name")} = :name`,{name:r});e&&o.andWhere(`${a.escape("database")} = :database`,{database:e}),t&&o.andWhere(`${a.escape("schema")} = :schema`,{schema:t}),n&&o.andWhere(`${a.escape("table")} = :table`,{table:n});const[s,l]=o.getQueryAndParameters();return new RP(s,l)}isColumnChanged(e,t,n,i,r=!0){return e.charset!==t.charset||e.collation!==t.collation||e.precision!==t.precision||e.scale!==t.scale||e.width!==t.width||e.zerofill!==t.zerofill||e.unsigned!==t.unsigned||e.asExpression!==t.asExpression||n&&e.default!==t.default||e.onUpdate!==t.onUpdate||e.isNullable!==t.isNullable||i&&e.comment!==t.comment||r&&this.isEnumChanged(e,t)}isEnumChanged(e,t){return!oP.isArraysEqual(e.enum||[],t.enum||[])}isDefaultColumnLength(e,t,n){if(this.connection.hasMetadata(e.name)){const n=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(n){if(this.connection.driver.getColumnLength(n))return!1}}return!!(this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].length)&&this.connection.driver.dataTypeDefaults[t.type].length.toString()===n.toString()}isDefaultColumnPrecision(e,t,n){if(this.connection.hasMetadata(e.name)){const n=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(n&&null!==n.precision&&void 0!==n.precision)return!1}return!(!this.connection.driver.dataTypeDefaults||!this.connection.driver.dataTypeDefaults[t.type]||null===this.connection.driver.dataTypeDefaults[t.type].precision||void 0===this.connection.driver.dataTypeDefaults[t.type].precision)&&this.connection.driver.dataTypeDefaults[t.type].precision===n}isDefaultColumnScale(e,t,n){if(this.connection.hasMetadata(e.name)){const n=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(n&&null!==n.scale&&void 0!==n.scale)return!1}return!(!this.connection.driver.dataTypeDefaults||!this.connection.driver.dataTypeDefaults[t.type]||null===this.connection.driver.dataTypeDefaults[t.type].scale||void 0===this.connection.driver.dataTypeDefaults[t.type].scale)&&this.connection.driver.dataTypeDefaults[t.type].scale===n}async executeQueries(e,t){if(PO.isQuery(e)&&(e=[e]),PO.isQuery(t)&&(t=[t]),this.sqlInMemory.upQueries.push(...e),this.sqlInMemory.downQueries.push(...t),!0===this.sqlMemoryMode)return Promise.resolve();for(const{query:n,parameters:i}of e)await this.query(n,i)}generateIndexName(e,t){return this.connection.namingStrategy.indexName(e,t.columnNames,t.where)}}!function(e){e.VIEW="VIEW",e.MATERIALIZED_VIEW="MATERIALIZED_VIEW",e.GENERATED_COLUMN="GENERATED_COLUMN"}(nP||(nP={}));class $P extends MP{constructor(){super(),this.transactionPromise=null}connect(){return Promise.resolve(this.driver.databaseConnection)}release(){return this.loadedTables=[],this.clearSqlMemory(),Promise.resolve()}async startTransaction(e){if("none"===this.driver.transactionSupport)throw new EO(`Transactions aren't supported by ${this.connection.driver.options.type}.`);if(this.isTransactionActive&&"simple"===this.driver.transactionSupport)throw new OO;if(e&&"READ UNCOMMITTED"!==e&&"SERIALIZABLE"!==e)throw new EO("SQLite only supports SERIALIZABLE and READ UNCOMMITTED isolation");this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}0===this.transactionDepth?(e&&("READ UNCOMMITTED"===e?await this.query("PRAGMA read_uncommitted = true"):await this.query("PRAGMA read_uncommitted = false")),await this.query("BEGIN TRANSACTION")):await this.query(`SAVEPOINT typeorm_${this.transactionDepth}`),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new _O;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.query("COMMIT"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new _O;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.query("ROLLBACK"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}stream(e,t,n,i){throw new EO("Stream is not supported by sqlite driver.")}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){return Promise.resolve(!1)}async getCurrentDatabase(){return Promise.resolve(void 0)}async hasSchema(e){throw new EO("This driver does not support table schemas")}async getCurrentSchema(){return Promise.resolve(void 0)}async hasTable(e){const t=`SELECT * FROM "sqlite_master" WHERE "type" = 'table' AND "name" = '${PO.isTable(e)?e.name:e}'`;return!!(await this.query(t)).length}async hasColumn(e,t){const n=PO.isTable(e)?e.name:e,i=`PRAGMA table_xinfo(${this.escapePath(n)})`;return!!(await this.query(i)).find((e=>e.name===t))}async createDatabase(e,t){return Promise.resolve()}async dropDatabase(e,t){return Promise.resolve()}async createSchema(e,t){return Promise.resolve()}async dropSchema(e,t){return Promise.resolve()}async createTable(e,t=!1,n=!0,i=!0){const r=[],a=[];if(t){if(await this.hasTable(e))return Promise.resolve()}r.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),i&&e.indices.forEach((t=>{t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where)),r.push(this.createIndexSql(e,t)),a.push(this.dropIndexSql(t))}));const o=e.columns.filter((e=>e.generatedType&&e.asExpression));for(const s of o){const t=this.insertTypeormMetadataSql({table:e.name,type:nP.GENERATED_COLUMN,name:s.name,value:s.asExpression}),n=this.deleteTypeormMetadataSql({table:e.name,type:nP.GENERATED_COLUMN,name:s.name});r.push(t),a.push(n)}await this.executeQueries(r,a)}async dropTable(e,t,n=!0,i=!0){if(t){if(!(await this.hasTable(e)))return Promise.resolve()}const r=n,a=PO.isTable(e)?e:await this.getCachedTable(e),o=[],s=[];i&&a.indices.forEach((e=>{o.push(this.dropIndexSql(e)),s.push(this.createIndexSql(a,e))})),o.push(this.dropTableSql(a,t)),s.push(this.createTableSql(a,r));const l=a.columns.filter((e=>e.generatedType&&e.asExpression));for(const c of l){const e=this.deleteTypeormMetadataSql({table:a.name,type:nP.GENERATED_COLUMN,name:c.name}),t=this.insertTypeormMetadataSql({table:a.name,type:nP.GENERATED_COLUMN,name:c.name,value:c.asExpression});o.push(e),s.push(t)}await this.executeQueries(o,s)}async createView(e,t=!1){const n=[],i=[];n.push(this.createViewSql(e)),t&&n.push(this.insertViewDefinitionSql(e)),i.push(this.dropViewSql(e)),t&&i.push(this.deleteViewDefinitionSql(e)),await this.executeQueries(n,i)}async dropView(e){const t=PO.isView(e)?e.name:e,n=await this.getCachedView(t),i=[],r=[];i.push(this.deleteViewDefinitionSql(n)),i.push(this.dropViewSql(n)),r.push(this.insertViewDefinitionSql(n)),r.push(this.createViewSql(n)),await this.executeQueries(i,r)}async renameTable(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();i.name=t;const r=new RP(`ALTER TABLE ${this.escapePath(n.name)} RENAME TO ${this.escapePath(t)}`),a=new RP(`ALTER TABLE ${this.escapePath(t)} RENAME TO ${this.escapePath(n.name)}`);await this.executeQueries(r,a),i.uniques.forEach((e=>{const t=this.connection.namingStrategy.uniqueConstraintName(n,e.columnNames);e.name===t&&(e.name=this.connection.namingStrategy.uniqueConstraintName(i,e.columnNames))})),i.foreignKeys.forEach((e=>{const t=this.connection.namingStrategy.foreignKeyName(n,e.columnNames,this.getTablePath(e),e.referencedColumnNames);e.name===t&&(e.name=this.connection.namingStrategy.foreignKeyName(i,e.columnNames,this.getTablePath(e),e.referencedColumnNames))})),i.indices.forEach((e=>{const t=this.connection.namingStrategy.indexName(n,e.columnNames,e.where);e.name===t&&(e.name=this.connection.namingStrategy.indexName(i,e.columnNames,e.where))})),n.name=i.name,await this.recreateTable(i,n)}async addColumn(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);return this.addColumns(n,[t])}async addColumns(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>i.addColumn(e))),await this.recreateTable(i,n)}async renameColumn(e,t,n){const i=PO.isTable(e)?e:await this.getCachedTable(e),r=PO.isTableColumn(t)?t:i.columns.find((e=>e.name===t));if(!r)throw new EO(`Column "${t}" was not found in the "${i.name}" table.`);let a;return PO.isTableColumn(n)?a=n:(a=r.clone(),a.name=n),this.changeColumn(i,r,a)}async changeColumn(e,t,n){const i=PO.isTable(e)?e:await this.getCachedTable(e),r=PO.isTableColumn(t)?t:i.columns.find((e=>e.name===t));if(!r)throw new EO(`Column "${t}" was not found in the "${i.name}" table.`);await this.changeColumns(i,[{oldColumn:r,newColumn:n}])}async changeColumns(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>{e.newColumn.name!==e.oldColumn.name&&(i.findColumnUniques(e.oldColumn).forEach((t=>{const r=this.connection.namingStrategy.uniqueConstraintName(n,t.columnNames);t.columnNames.splice(t.columnNames.indexOf(e.oldColumn.name),1),t.columnNames.push(e.newColumn.name),t.name===r&&(t.name=this.connection.namingStrategy.uniqueConstraintName(i,t.columnNames))})),i.findColumnForeignKeys(e.oldColumn).forEach((t=>{const r=this.connection.namingStrategy.foreignKeyName(n,t.columnNames,this.getTablePath(t),t.referencedColumnNames);t.columnNames.splice(t.columnNames.indexOf(e.oldColumn.name),1),t.columnNames.push(e.newColumn.name),t.name===r&&(t.name=this.connection.namingStrategy.foreignKeyName(i,t.columnNames,this.getTablePath(t),t.referencedColumnNames))})),i.findColumnIndices(e.oldColumn).forEach((t=>{const r=this.connection.namingStrategy.indexName(n,t.columnNames,t.where);t.columnNames.splice(t.columnNames.indexOf(e.oldColumn.name),1),t.columnNames.push(e.newColumn.name),t.name===r&&(t.name=this.connection.namingStrategy.indexName(i,t.columnNames,t.where))})));const t=i.columns.find((t=>t.name===e.oldColumn.name));t&&(i.columns[i.columns.indexOf(t)]=e.newColumn)})),await this.recreateTable(i,n)}async dropColumn(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableColumn(t)?t:n.findColumnByName(t);if(!i)throw new EO(`Column "${t}" was not found in table "${n.name}"`);await this.dropColumns(n,[i])}async dropColumns(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>{const t=PO.isTableColumn(e)?e:n.findColumnByName(e);if(!t)throw new Error(`Column "${e}" was not found in table "${n.name}"`);i.removeColumn(t),i.findColumnUniques(t).forEach((e=>i.removeUniqueConstraint(e))),i.findColumnIndices(t).forEach((e=>i.removeIndex(e))),i.findColumnForeignKeys(t).forEach((e=>i.removeForeignKey(e)))})),await this.recreateTable(i,n)}async createPrimaryKey(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();i.columns.forEach((e=>{t.find((t=>t===e.name))&&(e.isPrimary=!0)})),await this.recreateTable(i,n),n.columns.forEach((e=>{t.find((t=>t===e.name))&&(e.isPrimary=!0)}))}async updatePrimaryKeys(e,t){await Promise.resolve()}async dropPrimaryKey(e){const t=PO.isTable(e)?e:await this.getCachedTable(e),n=t.clone();n.primaryColumns.forEach((e=>{e.isPrimary=!1})),await this.recreateTable(n,t),t.primaryColumns.forEach((e=>{e.isPrimary=!1}))}async createUniqueConstraint(e,t){await this.createUniqueConstraints(e,[t])}async createUniqueConstraints(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>i.addUniqueConstraint(e))),await this.recreateTable(i,n)}async dropUniqueConstraint(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableUnique(t)?t:n.uniques.find((e=>e.name===t));if(!i)throw new EO(`Supplied unique constraint was not found in table ${n.name}`);await this.dropUniqueConstraints(n,[i])}async dropUniqueConstraints(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>i.removeUniqueConstraint(e))),await this.recreateTable(i,n)}async createCheckConstraint(e,t){await this.createCheckConstraints(e,[t])}async createCheckConstraints(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>i.addCheckConstraint(e))),await this.recreateTable(i,n)}async dropCheckConstraint(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableCheck(t)?t:n.checks.find((e=>e.name===t));if(!i)throw new EO(`Supplied check constraint was not found in table ${n.name}`);await this.dropCheckConstraints(n,[i])}async dropCheckConstraints(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>i.removeCheckConstraint(e))),await this.recreateTable(i,n)}async createExclusionConstraint(e,t){throw new EO("Sqlite does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new EO("Sqlite does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new EO("Sqlite does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new EO("Sqlite does not support exclusion constraints.")}async createForeignKey(e,t){await this.createForeignKeys(e,[t])}async createForeignKeys(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>i.addForeignKey(e))),await this.recreateTable(i,n)}async dropForeignKey(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableForeignKey(t)?t:n.foreignKeys.find((e=>e.name===t));if(!i)throw new EO(`Supplied foreign key was not found in table ${n.name}`);await this.dropForeignKeys(e,[i])}async dropForeignKeys(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone();t.forEach((e=>i.removeForeignKey(e))),await this.recreateTable(i,n)}async createIndex(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const i=this.createIndexSql(n,t),r=this.dropIndexSql(t);await this.executeQueries(i,r),n.addIndex(t)}async createIndices(e,t){const n=t.map((t=>this.createIndex(e,t)));await Promise.all(n)}async dropIndex(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableIndex(t)?t:n.indices.find((e=>e.name===t));if(!i)throw new EO(`Supplied index ${t} was not found in table ${n.name}`);i.name||(i.name=this.generateIndexName(n,i));const r=this.dropIndexSql(i),a=this.createIndexSql(n,i);await this.executeQueries(r,a),n.removeIndex(i)}async dropIndices(e,t){const n=t.map((t=>this.dropIndex(e,t)));await Promise.all(n)}async clearTable(e){await this.query(`DELETE FROM ${this.escapePath(e)}`)}async clearDatabase(e){let t;e&&this.driver.getAttachedDatabaseHandleByRelativePath(e)&&(t=this.driver.getAttachedDatabaseHandleByRelativePath(e)),await this.query("PRAGMA foreign_keys = OFF");const n=this.isTransactionActive;n||await this.startTransaction();try{const e=t?`SELECT 'DROP VIEW "${t}"."' || name || '";' as query FROM "${t}"."sqlite_master" WHERE "type" = 'view'`:"SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",i=await this.query(e);await Promise.all(i.map((e=>this.query(e.query))));const r=t?`SELECT 'DROP TABLE "${t}"."' || name || '";' as query FROM "${t}"."sqlite_master" WHERE "type" = 'table' AND "name" != 'sqlite_sequence'`:"SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",a=await this.query(r);await Promise.all(a.map((e=>this.query(e.query)))),n||await this.commitTransaction()}catch(i){try{n||await this.rollbackTransaction()}catch(r){}throw i}finally{await this.query("PRAGMA foreign_keys = ON")}}async loadViews(e){if(!(await this.hasTable(this.getTypeormMetadataTableName())))return[];e||(e=[]);const t=e.map((e=>"'"+e+"'")).join(", ");let n=`SELECT "t".* FROM "${this.getTypeormMetadataTableName()}" "t" INNER JOIN "sqlite_master" s ON "s"."name" = "t"."name" AND "s"."type" = 'view' WHERE "t"."type" = '${nP.VIEW}'`;t.length>0&&(n+=` AND "t"."name" IN (${t})`);return(await this.query(n)).map((e=>{const t=new kP;return t.name=e.name,t.expression=e.value,t}))}async loadTableRecords(e,t){let n;const[i,r]=this.splitTablePath(e);return i&&this.driver.getAttachedDatabasePathRelativeByHandle(i)&&(n=this.driver.getAttachedDatabasePathRelativeByHandle(i)),this.query(`SELECT ${n?`'${n}'`:null} as database, ${i?`'${i}'`:null} as schema, * FROM ${i?`"${i}".`:""}${this.escapePath("sqlite_master")} WHERE "type" = '${t}' AND "${"table"===t?"name":"tbl_name"}" IN ('${r}')`)}async loadPragmaRecords(e,t){const[,n]=this.splitTablePath(e);return this.query(`PRAGMA ${t}("${n}")`)}async loadTables(e){if(e&&0===e.length)return[];let t,n=[];if(e){const i=e.filter((e=>1===e.split(".").length)).map((e=>`'${e}'`)),r=e.filter((e=>e.split(".").length>1)),a=e=>{const t=[...r.map((t=>this.loadTableRecords(t,e)))];return i.length&&t.push(this.query(`SELECT * FROM "sqlite_master" WHERE "type" = '${e}' AND "${"table"===e?"name":"tbl_name"}" IN (${i})`)),t};n=(await Promise.all(a("table"))).reduce(((e,t)=>[...e,...t]),[]).filter(Boolean),t=(await Promise.all(a("index"))).reduce(((e,t)=>[...e,...t]),[]).filter(Boolean)}else{const e='SELECT * FROM "sqlite_master" WHERE "type" = \'table\'';n.push(...await this.query(e));const i=n.map((({name:e})=>`'${e}'`)).join(", ");t=await this.query(`SELECT * FROM "sqlite_master" WHERE "type" = 'index' AND "tbl_name" IN (${i})`)}return 0===n.length?[]:Promise.all(n.map((async e=>{const n=e.database&&this.driver.getAttachedDatabaseHandleByRelativePath(e.database)?`${this.driver.getAttachedDatabaseHandleByRelativePath(e.database)}.${e.name}`:e.name,i=e.sql,r=i.includes("WITHOUT ROWID"),a=new gR({name:n,withoutRowid:r}),[o,s,l]=await Promise.all([this.loadPragmaRecords(n,"table_xinfo"),this.loadPragmaRecords(n,"index_list"),this.loadPragmaRecords(n,"foreign_key_list")]);let c;const u=e.sql;let d,h=u.toUpperCase().indexOf("AUTOINCREMENT");if(-1!==h){c=u.substr(0,h);const e=c.lastIndexOf(","),t=c.lastIndexOf("(");-1!==e?(c=c.substr(e),c=c.substr(0,c.lastIndexOf('"')),c=c.substr(c.indexOf('"')+1)):-1!==t&&(c=c.substr(t),c=c.substr(0,c.lastIndexOf('"')),c=c.substr(c.indexOf('"')+1))}a.columns=await Promise.all(o.map((async e=>{const t=new cR;if(t.name=e.name,t.type=e.type.toLowerCase(),t.default=null!==e.dflt_value&&void 0!==e.dflt_value?e.dflt_value:void 0,t.isNullable=0===e.notnull,t.isPrimary=e.pk>0,t.comment="",t.isGenerated=c===e.name,t.isGenerated&&(t.generationStrategy="increment"),2===e.hidden||3===e.hidden){t.generatedType=2===e.hidden?"VIRTUAL":"STORED";const n=await this.selectTypeormMetadataSql({table:a.name,type:nP.GENERATED_COLUMN,name:t.name}),i=await this.query(n.query,n.parameters);i[0]&&i[0].value?t.asExpression=i[0].value:t.asExpression=""}if("varchar"===t.type){const e=i.match(new RegExp('"('+t.name+")\" varchar CHECK\\s*\\(\\s*\"\\1\"\\s+IN\\s*\\(('[^']+'(?:\\s*,\\s*'[^']+')+)\\s*\\)\\s*\\)"));e&&(t.enum=e[2].substr(1,e[2].length-2).split("','"))}let n=t.type.indexOf("(");if(-1!==n){const e=t.type;let i=e.substr(0,n);if(this.driver.withLengthColumnTypes.find((e=>e===i))){let r=parseInt(e.substring(n+1,e.length-1));r&&(t.length=r.toString(),t.type=i)}if(this.driver.withPrecisionColumnTypes.find((e=>e===i))){const n=new RegExp(`^${i}\\((\\d+),?\\s?(\\d+)?\\)`),r=e.match(n);r&&r[1]&&(t.precision=+r[1]),this.driver.withScaleColumnTypes.find((e=>e===i))&&r&&r[2]&&(t.scale=+r[2]),t.type=i}}return t})));const p=[],m=/CONSTRAINT "([^"]*)" FOREIGN KEY ?\((.*?)\) REFERENCES "([^"]*)"/g;for(;null!==(d=m.exec(i));)p.push({name:d[1],columns:d[2].substr(1,d[2].length-2).split('", "'),referencedTableName:d[3]});const f=oP.uniq(l,(e=>e.id));let g;a.foreignKeys=f.map((e=>{const t=l.filter((t=>t.id===e.id&&t.table===e.table)),n=t.map((e=>e.from)),i=t.map((e=>e.to)),r=p.find((t=>t.referencedTableName===e.table&&t.columns.every((e=>-1!==n.indexOf(e)))));return new dR({name:null==r?void 0:r.name,columnNames:n,referencedTableName:e.table,referencedColumnNames:i,onDelete:e.on_delete,onUpdate:e.on_update})}));const b=[],y=/CONSTRAINT "([^"]*)" UNIQUE ?\((.*?)\)/g;for(;null!==(g=y.exec(i));)b.push({name:g[1],columns:g[2].substr(1,g[2].length-2).split('", "')});const v=s.filter((e=>"u"===e.origin)).map((e=>e.name)).filter(((e,t,n)=>n.indexOf(e)===t)).map((async e=>{const t=s.find((t=>t.name===e)),n=(await this.query(`PRAGMA index_info("${t.name}")`)).sort(((e,t)=>parseInt(e.seqno)-parseInt(t.seqno))).map((e=>e.name));if(1===n.length){const e=a.columns.find((e=>!!n.find((t=>t===e.name))));e&&(e.isUnique=!0)}const i=b.find((e=>e.columns.every((e=>-1!==n.indexOf(e)))));return new pR({name:i?i.name:this.connection.namingStrategy.uniqueConstraintName(a,n),columnNames:n})}));let w;a.uniques=await Promise.all(v);const E=/CONSTRAINT "([^"]*)" CHECK ?(\(.*?\))([,]|[)]$)/g;for(;null!==(w=E.exec(i));)a.checks.push(new mR({name:w[1],expression:w[2]}));const x=s.filter((e=>"c"===e.origin)).map((e=>e.name)).filter(((e,t,n)=>n.indexOf(e)===t)).map((async n=>{const i=t.find((e=>e.name===n)),r=/WHERE (.*)/.exec(i.sql),o=s.find((e=>e.name===n)),l=(await this.query(`PRAGMA index_info("${o.name}")`)).sort(((e,t)=>parseInt(e.seqno)-parseInt(t.seqno))).map((e=>e.name)),c=`${e.database?`${e.database}.`:""}${o.name}`,u="1"===o.unique||1===o.unique;return new uR({table:a,name:c,columnNames:l,isUnique:u,where:r?r[1]:void 0})})),T=await Promise.all(x);return a.indices=T.filter((e=>!!e)),a})))}createTableSql(e,t,n){const i=e.columns.filter((e=>e.isPrimary)),r=i.find((e=>e.isGenerated&&"increment"===e.generationStrategy)),a=i.length>1;if(a&&r)throw new EO("Sqlite does not support AUTOINCREMENT on composite primary key");const o=e.columns.map((e=>this.buildCreateColumnSql(e,a))).join(", "),[s]=this.splitTablePath(e.name);let l=`CREATE TABLE ${this.escapePath(e.name)} (${o}`,[c,u]=this.splitTablePath(e.name);const d=n?`${c?`${c}.`:""}${u.replace(/^temporary_/,"")}`:e.name;if(e.columns.filter((e=>e.isUnique)).forEach((t=>{e.uniques.some((e=>1===e.columnNames.length&&e.columnNames[0]===t.name))||e.uniques.push(new pR({name:this.connection.namingStrategy.uniqueConstraintName(e,[t.name]),columnNames:[t.name]}))})),e.uniques.length>0){l+=`, ${e.uniques.map((e=>`CONSTRAINT "${e.name?e.name:this.connection.namingStrategy.uniqueConstraintName(d,e.columnNames)}" UNIQUE (${e.columnNames.map((e=>`"${e}"`)).join(", ")})`)).join(", ")}`}if(e.checks.length>0){l+=`, ${e.checks.map((e=>`CONSTRAINT "${e.name?e.name:this.connection.namingStrategy.checkConstraintName(d,e.expression)}" CHECK (${e.expression})`)).join(", ")}`}if(e.foreignKeys.length>0&&t){const t=e.foreignKeys.filter((e=>{const[t]=this.splitTablePath(e.referencedTableName);return t===s})).map((e=>{const[,t]=this.splitTablePath(e.referencedTableName),n=e.columnNames.map((e=>`"${e}"`)).join(", ");e.name||(e.name=this.connection.namingStrategy.foreignKeyName(d,e.columnNames,this.getTablePath(e),e.referencedColumnNames));const i=e.referencedColumnNames.map((e=>`"${e}"`)).join(", ");let r=`CONSTRAINT "${e.name}" FOREIGN KEY (${n}) REFERENCES "${t}" (${i})`;return e.onDelete&&(r+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(r+=` ON UPDATE ${e.onUpdate}`),e.deferrable&&(r+=` DEFERRABLE ${e.deferrable}`),r})).join(", ");l+=`, ${t}`}if(i.length>1){l+=`, PRIMARY KEY (${i.map((e=>`"${e.name}"`)).join(", ")})`}return l+=")",e.withoutRowid&&(l+=" WITHOUT ROWID"),new RP(l)}dropTableSql(e,t){const n=PO.isTable(e)?e.name:e,i=t?`DROP TABLE IF EXISTS ${this.escapePath(n)}`:`DROP TABLE ${this.escapePath(n)}`;return new RP(i)}createViewSql(e){return"string"==typeof e.expression?new RP(`CREATE VIEW "${e.name}" AS ${e.expression}`):new RP(`CREATE VIEW "${e.name}" AS ${e.expression(this.connection).getQuery()}`)}insertViewDefinitionSql(e){const t="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:nP.VIEW,name:e.name,value:t})}dropViewSql(e){const t=PO.isView(e)?e.name:e;return new RP(`DROP VIEW "${t}"`)}deleteViewDefinitionSql(e){const t=PO.isView(e)?e.name:e;return this.deleteTypeormMetadataSql({type:nP.VIEW,name:t})}createIndexSql(e,t){const n=t.columnNames.map((e=>`"${e}"`)).join(", "),[i,r]=this.splitTablePath(e.name);return new RP(`CREATE ${t.isUnique?"UNIQUE ":""}INDEX ${i?`"${i}".`:""}${this.escapePath(t.name)} ON "${r}" (${n}) ${t.where?"WHERE "+t.where:""}`)}dropIndexSql(e){let t=PO.isTableIndex(e)?e.name:e;return new RP(`DROP INDEX ${this.escapePath(t)}`)}buildCreateColumnSql(e,t){let n='"'+e.name+'"';return PO.isColumnMetadata(e)?n+=" "+this.driver.normalizeType(e):n+=" "+this.connection.driver.createFullType(e),e.enum&&(n+=' CHECK( "'+e.name+'" IN ('+e.enum.map((e=>"'"+e+"'")).join(",")+") )"),e.isPrimary&&!t&&(n+=" PRIMARY KEY"),!0===e.isGenerated&&"increment"===e.generationStrategy&&(n+=" AUTOINCREMENT"),e.collation&&(n+=" COLLATE "+e.collation),!0!==e.isNullable&&(n+=" NOT NULL"),e.asExpression?n+=` AS (${e.asExpression}) ${e.generatedType?e.generatedType:"VIRTUAL"}`:void 0!==e.default&&null!==e.default&&(n+=" DEFAULT ("+e.default+")"),n}async recreateTable(e,t,n=!0){const i=[],r=[];t.indices.forEach((e=>{i.push(this.dropIndexSql(e)),r.push(this.createIndexSql(t,e))}));let[a,o]=this.splitTablePath(e.name),[,s]=this.splitTablePath(t.name);if(e.name=o=`${a?`${a}.`:""}temporary_${o}`,i.push(this.createTableSql(e,!0,!0)),r.push(this.dropTableSql(e)),n){let n=e.columns.filter((e=>!e.generatedType)).map((e=>`"${e.name}"`)),a=t.columns.filter((e=>!e.generatedType)).map((e=>`"${e.name}"`));a.length<n.length?n=e.columns.filter((e=>{const n=t.columns.find((t=>t.name===e.name));return(!n||!n.generatedType)&&(!e.generatedType&&n)})).map((e=>`"${e.name}"`)):a.length>n.length&&(a=t.columns.filter((t=>!t.generatedType&&e.columns.find((e=>e.name===t.name)))).map((e=>`"${e.name}"`))),i.push(new RP(`INSERT INTO ${this.escapePath(e.name)}(${n.join(", ")}) SELECT ${a.join(", ")} FROM ${this.escapePath(t.name)}`)),r.push(new RP(`INSERT INTO ${this.escapePath(t.name)}(${a.join(", ")}) SELECT ${n.join(", ")} FROM ${this.escapePath(e.name)}`))}i.push(this.dropTableSql(t)),r.push(this.createTableSql(t,!0)),i.push(new RP(`ALTER TABLE ${this.escapePath(e.name)} RENAME TO ${this.escapePath(s)}`)),r.push(new RP(`ALTER TABLE ${this.escapePath(t.name)} RENAME TO ${this.escapePath(o)}`)),e.name=t.name,e.indices.forEach((t=>{t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where)),i.push(this.createIndexSql(e,t)),r.push(this.dropIndexSql(t))})),t.columns.filter((t=>{const n=e.columns.find((e=>e.name===t.name));return t.generatedType&&t.asExpression&&(!n||!n.generatedType&&!n.asExpression)})).forEach((e=>{const n=this.deleteTypeormMetadataSql({table:t.name,type:nP.GENERATED_COLUMN,name:e.name}),a=this.insertTypeormMetadataSql({table:t.name,type:nP.GENERATED_COLUMN,name:e.name,value:e.asExpression});i.push(n),r.push(a)})),e.columns.filter((e=>e.generatedType&&e.asExpression&&!t.columns.some((t=>t.name===e.name)))).forEach((t=>{const n=this.insertTypeormMetadataSql({table:e.name,type:nP.GENERATED_COLUMN,name:t.name,value:t.asExpression}),a=this.deleteTypeormMetadataSql({table:e.name,type:nP.GENERATED_COLUMN,name:t.name});i.push(n),r.push(a)})),e.columns.filter((e=>e.generatedType&&e.asExpression)).forEach((n=>{const a=t.columns.find((e=>e.name===n.name&&e.generatedType&&n.generatedType&&e.asExpression!==n.asExpression));if(!a)return;const o=this.deleteTypeormMetadataSql({table:t.name,type:nP.GENERATED_COLUMN,name:a.name}),s=this.insertTypeormMetadataSql({table:e.name,type:nP.GENERATED_COLUMN,name:n.name,value:n.asExpression});i.push(o),i.push(s);const l=this.insertTypeormMetadataSql({table:e.name,type:nP.GENERATED_COLUMN,name:a.name,value:a.asExpression}),c=this.deleteTypeormMetadataSql({table:t.name,type:nP.GENERATED_COLUMN,name:n.name});r.push(l),r.push(c)})),await this.executeQueries(i,r),this.replaceCachedTable(t,e)}splitTablePath(e){return-1!==e.indexOf(".")?e.split("."):[void 0,e]}escapePath(e,t){return(PO.isTable(e)||PO.isView(e)?e.name:e).replace(/^\.+|\.+$/g,"").split(".").map((e=>t?e:`"${e}"`)).join(".")}}class IP{constructor(e){this.queryRunner=e}async broadcast(e,...t){const n=new cP,i=this[`broadcast${e}Event`];"function"==typeof i&&i.call(this,n,...t),await n.wait()}broadcastBeforeInsertEvent(e,t,n){n&&t.beforeInsertListeners.length&&t.beforeInsertListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((i=>{if(this.isAllowedSubscriber(i,t.target)&&i.beforeInsert){const r=i.beforeInsert({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t});r instanceof Promise&&e.promises.push(r),e.count++}}))}broadcastBeforeUpdateEvent(e,t,n,i,r,a){n&&t.beforeUpdateListeners.length&&t.beforeUpdateListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((o=>{if(this.isAllowedSubscriber(o,t.target)&&o.beforeUpdate){const s=o.beforeUpdate({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:i,updatedColumns:r||[],updatedRelations:a||[]});s instanceof Promise&&e.promises.push(s),e.count++}}))}broadcastBeforeRemoveEvent(e,t,n,i,r){n&&t.beforeRemoveListeners.length&&t.beforeRemoveListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeRemove){const o=a.beforeRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:i,entityId:t.getEntityIdMixedMap(null!=i?i:r)});o instanceof Promise&&e.promises.push(o),e.count++}}))}broadcastBeforeSoftRemoveEvent(e,t,n,i,r){n&&t.beforeSoftRemoveListeners.length&&t.beforeSoftRemoveListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeSoftRemove){const o=a.beforeSoftRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:i,entityId:t.getEntityIdMixedMap(null!=i?i:r)});o instanceof Promise&&e.promises.push(o),e.count++}}))}broadcastBeforeRecoverEvent(e,t,n,i,r){n&&t.beforeRecoverListeners.length&&t.beforeRecoverListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((a=>{if(this.isAllowedSubscriber(a,t.target)&&a.beforeRecover){const o=a.beforeRecover({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:i,entityId:t.getEntityIdMixedMap(null!=i?i:r)});o instanceof Promise&&e.promises.push(o),e.count++}}))}broadcastAfterInsertEvent(e,t,n){n&&t.afterInsertListeners.length&&t.afterInsertListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((i=>{if(this.isAllowedSubscriber(i,t.target)&&i.afterInsert){const r=i.afterInsert({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t});r instanceof Promise&&e.promises.push(r),e.count++}}))}broadcastBeforeTransactionStartEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.beforeTransactionStart){const n=t.beforeTransactionStart({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastAfterTransactionStartEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.afterTransactionStart){const n=t.afterTransactionStart({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastBeforeTransactionCommitEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.beforeTransactionCommit){const n=t.beforeTransactionCommit({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastAfterTransactionCommitEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.afterTransactionCommit){const n=t.afterTransactionCommit({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastBeforeTransactionRollbackEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.beforeTransactionRollback){const n=t.beforeTransactionRollback({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastAfterTransactionRollbackEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.afterTransactionRollback){const n=t.afterTransactionRollback({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastAfterUpdateEvent(e,t,n,i,r,a){n&&t.afterUpdateListeners.length&&t.afterUpdateListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((o=>{if(this.isAllowedSubscriber(o,t.target)&&o.afterUpdate){const s=o.afterUpdate({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:i,updatedColumns:r||[],updatedRelations:a||[]});s instanceof Promise&&e.promises.push(s),e.count++}}))}broadcastAfterRemoveEvent(e,t,n,i,r){n&&t.afterRemoveListeners.length&&t.afterRemoveListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterRemove){const o=a.afterRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:i,entityId:t.getEntityIdMixedMap(null!=i?i:r)});o instanceof Promise&&e.promises.push(o),e.count++}}))}broadcastAfterSoftRemoveEvent(e,t,n,i,r){n&&t.afterSoftRemoveListeners.length&&t.afterSoftRemoveListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterSoftRemove){const o=a.afterSoftRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:i,entityId:t.getEntityIdMixedMap(null!=i?i:r)});o instanceof Promise&&e.promises.push(o),e.count++}}))}broadcastAfterRecoverEvent(e,t,n,i,r){n&&t.afterRecoverListeners.length&&t.afterRecoverListeners.forEach((t=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((a=>{if(this.isAllowedSubscriber(a,t.target)&&a.afterRecover){const o=a.afterRecover({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:i,entityId:t.getEntityIdMixedMap(null!=i?i:r)});o instanceof Promise&&e.promises.push(o),e.count++}}))}broadcastLoadEventsForAll(e,t,n){return this.broadcastLoadEvent(e,t,n)}broadcastLoadEvent(e,t,n){const i=this.queryRunner.connection.subscribers.filter((e=>this.isAllowedSubscriber(e,t.target)&&e.afterLoad));if(t.relations.length||t.afterLoadListeners.length||i.length){const r=n.filter((e=>!(e instanceof Promise)));t.relations.length&&t.relations.forEach((t=>{r.forEach((n=>{if(t.isLazy&&!n.hasOwnProperty(t.propertyName))return;const i=t.getEntityValue(n);RO.isObject(i)&&this.broadcastLoadEvent(e,t.inverseEntityMetadata,Array.isArray(i)?i:[i])}))})),t.afterLoadListeners.length&&t.afterLoadListeners.forEach((t=>{r.forEach((n=>{if(t.isAllowed(n)){const i=t.execute(n);i instanceof Promise&&e.promises.push(i),e.count++}}))})),i.forEach((n=>{r.forEach((i=>{const r=n.afterLoad(i,{entity:i,metadata:t,connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});r instanceof Promise&&e.promises.push(r),e.count++}))}))}}isAllowedSubscriber(e,t){return!e.listenTo||!e.listenTo()||e.listenTo()===Object||e.listenTo()===t||e.listenTo().isPrototypeOf(t)}}class DP{constructor(){this.records=[]}}class LP extends $P{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new IP(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async query(e,t,n=!1){if(this.isReleased)throw new rR;const i=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const r=+new Date;try{const a=await new Promise((async(n,r)=>{i.executeSql(e,t,(e=>n(e)),(e=>r(e)))})),o=this.driver.options.maxQueryExecutionTime,s=+new Date-r;o&&s>o&&this.driver.connection.logger.logQuerySlow(s,e,t,this);const l=new DP;if("INSERT INTO"===e.substr(0,11))l.raw=a.insertId;else{let e=[];for(let t=0;t<a.rows.length;t++)e.push(a.rows.item(t));l.records=e,l.raw=e}return n?l:l.raw}catch(a){throw this.driver.connection.logger.logQueryError(a,e,t,this),new eR(e,t,a)}}async startTransaction(){throw new EO("Transactions are not supported by the Cordova driver")}async commitTransaction(){throw new EO("Transactions are not supported by the Cordova driver")}async rollbackTransaction(){throw new EO("Transactions are not supported by the Cordova driver")}async clearDatabase(){await this.query("PRAGMA foreign_keys = OFF");try{const e="SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",t=await this.query(e),n="SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",i=await this.query(n);await Promise.all(t.map((e=>this.query(e.query)))),await Promise.all(i.map((e=>this.query(e.query))))}finally{await this.query("PRAGMA foreign_keys = ON")}}parametrize(e,t=0){return Object.keys(e).map(((e,t)=>`"${e}"=?`))}}class jP extends OP{constructor(e){super(e),this.transactionSupport="none",this.database=this.options.database,this.loadDependencies()}async disconnect(){return this.queryRunner=void 0,new Promise(((e,t)=>{this.databaseConnection.close(e,t)}))}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new LP(this)),this.queryRunner}async createDatabaseConnection(){const e=Object.assign({},{name:this.options.database,location:this.options.location},this.options.extra||{}),t=await new Promise((t=>{this.sqlite.openDatabase(e,(e=>t(e)))}));return await new Promise(((e,n)=>{t.executeSql("PRAGMA foreign_keys = ON",[],(()=>e()),(e=>n(e)))})),t}loadDependencies(){try{const e=this.options.driver||window.sqlitePlugin;this.sqlite=e}catch(RD){throw new HO("Cordova-SQLite","cordova-sqlite-storage")}}}class qP extends $P{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new IP(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}query(e,t,n=!1){if(this.isReleased)throw new rR;return new Promise((async(i,r)=>{const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=+new Date;a.executeSql(e,t,(r=>{const a=this.driver.options.maxQueryExecutionTime,s=+new Date-o;a&&s>a&&this.driver.connection.logger.logQuerySlow(s,e,t,this);const l=new DP;if((null==r?void 0:r.hasOwnProperty("rowsAffected"))&&(l.affected=r.rowsAffected),null==r?void 0:r.hasOwnProperty("rows")){let e=[];for(let t=0;t<r.rows.length;t++)e.push(r.rows.item(t));l.raw=e,l.records=e}"INSERT INTO"===e.substr(0,11)&&(l.raw=r.insertId),i(n?l:l.raw)}),(n=>{this.driver.connection.logger.logQueryError(n,e,t,this),r(new eR(e,t,n))}))}))}parametrize(e,t=0){return Object.keys(e).map(((e,t)=>`"${e}"=?`))}}class BP{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["int","integer","tinyint","smallint","mediumint","bigint","unsigned big int","int2","int8","integer","character","varchar","varying character","nchar","native character","nvarchar","text","clob","text","blob","real","double","double precision","float","real","numeric","decimal","boolean","date","time","datetime"],this.supportedUpsertTypes=["on-conflict-do-update"],this.withLengthColumnTypes=["character","varchar","varying character","nchar","native character","nvarchar","text","blob","clob"],this.spatialTypes=[],this.withPrecisionColumnTypes=["real","double","double precision","float","real","numeric","decimal","date","time","datetime"],this.withScaleColumnTypes=["real","double","double precision","float","real","numeric","decimal"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"datetime('now')",updateDate:"datetime",updateDateDefault:"datetime('now')",deleteDate:"datetime",deleteDateNullable:!0,version:"integer",treeLevel:"integer",migrationId:"integer",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.cteCapabilities={enabled:!0,requiresRecursiveHint:!0},this.attachedDatabases={},this.connection=e,this.options=e.options,this.database=this.options.database,this.loadDependencies()}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new qP(this)),this.queryRunner}async connect(){this.databaseConnection=await this.createDatabaseConnection()}afterConnect(){return Promise.resolve()}async disconnect(){return new Promise(((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close(e,t)}))}hasAttachedDatabases(){return!!Object.keys(this.attachedDatabases).length}getAttachedDatabaseHandleByRelativePath(e){var t,n;return null===(n=null===(t=this.attachedDatabases)||void 0===t?void 0:t[e])||void 0===n?void 0:n.attachHandle}getAttachedDatabasePathRelativeByHandle(e){var t;return null===(t=Object.values(this.attachedDatabases).find((({attachHandle:t})=>e===t)))||void 0===t?void 0:t.attachFilepathRelative}createSchemaBuilder(){return new _P(this.connection)}preparePersistentValue(e,t){return t.transformer&&(e=sP.transformTo(t.transformer,e)),null==e?e:t.type===Boolean||"boolean"===t.type?!0===e?1:0:"date"===t.type?aP.mixedDateToDateString(e):"time"===t.type?aP.mixedDateToTimeString(e):"datetime"===t.type||t.type===Date?aP.mixedDateToUtcDatetimeString(e):"simple-array"===t.type?aP.simpleArrayToString(e):"simple-json"===t.type?aP.simpleJsonToString(e):"simple-enum"===t.type?aP.simpleEnumToString(e):e}prepareHydratedValue(e,t){return null==e?t.transformer?sP.transformFrom(t.transformer,e):e:(t.type===Boolean||"boolean"===t.type?e=!!e:"datetime"===t.type||t.type===Date?(e&&"string"==typeof e&&(/^\d\d\d\d-\d\d-\d\d \d\d:\d\d/.test(e)&&(e=e.replace(" ","T")),/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d(:\d\d(\.\d\d\d)?)?$/.test(e)&&(e+="Z")),e=aP.normalizeHydratedDate(e)):"date"===t.type?e=aP.mixedDateToDateString(e):"time"===t.type?e=aP.mixedTimeToString(e):"simple-array"===t.type?e=aP.stringToSimpleArray(e):"simple-json"===t.type?e=aP.stringToSimpleJson(e):"simple-enum"===t.type?e=aP.stringToSimpleEnum(e,t):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=sP.transformFrom(t.transformer,e)),e)}escapeQueryWithParameters(e,t,n){const i=Object.keys(n).map((e=>"boolean"==typeof n[e]?!0===n[e]?1:0:n[e]instanceof Date?aP.mixedDateToUtcDatetimeString(n[e]):n[e]));return t&&Object.keys(t).length?(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,r)=>{if(!t.hasOwnProperty(r))return e;let a=t[r];return n?a.map((e=>(i.push(e),this.createParameter(r,i.length-1)))).join(", "):"function"==typeof a?a():"number"==typeof a?String(a):"boolean"==typeof a?(i.push(+a),this.createParameter(r,i.length-1)):a instanceof Date?(i.push(aP.mixedDateToUtcDatetimeString(a)),this.createParameter(r,i.length-1)):(i.push(a),this.createParameter(r,i.length-1))})),[e,i]):[e,i]}escape(e){return'"'+e+'"'}buildTableName(e,t,n){return e}parseTableName(e){var t;const n=this.database,i=void 0;if(PO.isTable(e)||PO.isView(e)){const t=this.parseTableName(e.schema?`"${e.schema}"."${e.name}"`:e.name);return{database:e.database||t.database||n,schema:e.schema||t.schema||i,tableName:t.tableName}}if(PO.isTableForeignKey(e)){const t=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||t.database||n,schema:e.referencedSchema||t.schema||i,tableName:t.tableName}}if(PO.isEntityMetadata(e))return{database:e.database||n,schema:e.schema||i,tableName:e.tableName};const r=e.split(".");if(3===r.length)return{database:r[0]||n,schema:r[1]||i,tableName:r[2]};if(2===r.length){return{database:null!==(t=this.getAttachedDatabasePathRelativeByHandle(r[0]))&&void 0!==t?t:n,schema:r[0],tableName:r[1]}}return{database:n,schema:i,tableName:e}}normalizeType(e){return e.type===Number||"int"===e.type?"integer":e.type===String?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":"uuid"===e.type?"varchar":"simple-array"===e.type||"simple-json"===e.type?"text":"simple-enum"===e.type?"varchar":e.type||""}normalizeDefault(e){const t=e.default;return"number"==typeof t?""+t:"boolean"==typeof t?t?"1":"0":"function"==typeof t?t():"string"==typeof t?`'${t}'`:null!=t?`${t}`:void 0}normalizeIsUnique(e){return e.entityMetadata.uniques.some((t=>1===t.columns.length&&t.columns[0]===e))}getColumnLength(e){return e.length?e.length.toString():""}createFullType(e){let t=e.type;return e.enum?"varchar":(e.length?t+="("+e.length+")":null!==e.precision&&void 0!==e.precision&&null!==e.scale&&void 0!==e.scale?t+="("+e.precision+","+e.scale+")":null!==e.precision&&void 0!==e.precision&&(t+="("+e.precision+")"),e.isArray&&(t+=" array"),t)}obtainMasterConnection(){return Promise.resolve()}obtainSlaveConnection(){return Promise.resolve()}createGeneratedMap(e,t,n,i){const r=e.generatedColumns.reduce(((e,r)=>{let a;return"increment"===r.generationStrategy&&t&&(a=t-i+n+1),a?oP.mergeDeep(e,r.createValueMap(a)):e}),{});return Object.keys(r).length>0?r:void 0}findChangedColumns(e,t){return t.filter((t=>{const n=e.find((e=>e.name===t.databaseName));if(!n)return!1;return n.name!==t.databaseName||n.type!==this.normalizeType(t)||n.length!==t.length||n.precision!==t.precision||n.scale!==t.scale||this.normalizeDefault(t)!==n.default||n.isPrimary!==t.isPrimary||n.isNullable!==t.isNullable||n.generatedType!==t.generatedType||n.asExpression!==t.asExpression||n.isUnique!==this.normalizeIsUnique(t)||n.enum&&t.enum&&!oP.isArraysEqual(n.enum,t.enum.map((e=>e+"")))||"uuid"!==t.generationStrategy&&n.isGenerated!==t.isGenerated}))}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"?"}createDatabaseConnection(){return new Promise(((e,t)=>{const n=Object.assign({},{name:this.options.database,location:this.options.location},this.options.extra||{});this.sqlite.openDatabase(n,(n=>{const i=n;i.executeSql("PRAGMA foreign_keys = ON",[],(t=>{e(i)}),(e=>{t(e)}))}),(e=>{t(e)}))}))}loadDependencies(){try{const e=this.options.driver||require("react-native-sqlite-storage");this.sqlite=e}catch(RD){throw new HO("React-Native","react-native-sqlite-storage")}}}class FP extends $P{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new IP(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async query(e,t,n=!1){if(this.isReleased)throw new rR;const i=this.driver.connection;return new Promise((async(r,a)=>{const o=await this.connect(),s="INSERT INTO"===e.substr(0,11);i.logger.logQuery(e,t,this);const l=(o,l)=>{const u=this.driver.options.maxQueryExecutionTime,d=+new Date-c;u&&d>u&&i.logger.logQuerySlow(d,e,t,this),o&&(i.logger.logQueryError(o,e,t,this),a(new eR(e,t,o)));const h=new DP;h.raw=l,!s&&Array.isArray(l)&&(h.records=l),r(n?h:h.raw)},c=+new Date;s?o.execSQL(e,t,l):o.all(e,t,l)}))}parametrize(e,t=0){return Object.keys(e).map(((e,t)=>`"${e}"=?`))}}class zP extends OP{constructor(e){super(e),this.connection=e,this.options=e.options,this.database=this.options.database,this.driver=this.options.driver,this.loadDependencies()}async disconnect(){return new Promise(((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close().then(e).catch(t)}))}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new FP(this)),this.queryRunner}normalizeType(e){return e.type===Buffer?"blob":super.normalizeType(e)}createDatabaseConnection(){return new Promise(((e,t)=>{const n=Object.assign({},{readOnly:this.options.readOnly,key:this.options.key,multithreading:this.options.multithreading,migrate:this.options.migrate,iosFlags:this.options.iosFlags,androidFlags:this.options.androidFlags},this.options.extra||{});new this.sqlite(this.options.database,n,((n,i)=>{if(n)return t(n);i.resultType(this.sqlite.RESULTSASOBJECT),i.execSQL("PRAGMA foreign_keys = ON",[],((n,r)=>{if(n)return t(n);e(i)}))}))}))}loadDependencies(){if(this.sqlite=this.driver,!this.driver)throw new HO("Nativescript","nativescript-sqlite")}}class UP extends $P{constructor(e){super(),this.isDirty=!1,this.driver=e,this.connection=e.connection,this.broadcaster=new IP(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async flush(){this.isDirty&&(await this.driver.autoSave(),this.isDirty=!1)}async release(){return await this.flush(),super.release()}async commitTransaction(){await super.commitTransaction(),this.isTransactionActive||await this.flush()}async query(e,t=[],n=!1){if(this.isReleased)throw new rR;const i=e.trim().split(" ",1)[0],r=this.driver.databaseConnection;this.driver.connection.logger.logQuery(e,t,this);const a=+new Date;let o;try{o=r.prepare(e),t&&(t=t.map((e=>void 0!==e?e:null)),o.bind(t));const s=this.driver.options.maxQueryExecutionTime,l=+new Date-a;s&&l>s&&this.driver.connection.logger.logQuerySlow(l,e,t,this);const c=[];for(;o.step();)c.push(o.getAsObject());const u=new DP;return u.affected=r.getRowsModified(),u.records=c,u.raw=c,o.free(),"SELECT"!==i&&(this.isDirty=!0),n?u:u.raw}catch(RD){throw o&&o.free(),this.driver.connection.logger.logQueryError(RD,e,t,this),new eR(e,t,RD)}}}class VP extends OP{constructor(e){if(super(e),this.options.autoSave&&!this.options.location&&!this.options.autoSaveCallback)throw new GO("location or autoSaveCallback");this.loadDependencies()}async connect(){this.databaseConnection=await this.createDatabaseConnection()}async disconnect(){this.queryRunner=void 0,this.databaseConnection.close()}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new UP(this)),this.queryRunner}async load(e,t=!0){if("string"==typeof e){if("node"===FA.type){if(FA.fileExist(e)){const t=FA.readFileSync(e);return this.createDatabaseConnectionWithImport(t)}if(t)throw new EO(`File ${e} does not exist`);return this.createDatabaseConnectionWithImport()}{let n=null;if(this.options.useLocalForage){if(!window.localforage)throw new EO("localforage is not defined - please import localforage.js into your site");n=await window.localforage.getItem(e)}else n=FA.getGlobalVariable().localStorage.getItem(e);if(null!=n)return this.createDatabaseConnectionWithImport(JSON.parse(n));if(t)throw new EO(`File ${e} does not exist`);return this.createDatabaseConnectionWithImport()}}return this.createDatabaseConnectionWithImport(e)}async save(e){if(!e&&!this.options.location)throw new EO("No location is set, specify a location parameter or add the location option to your configuration");let t="";if(e?t=e:this.options.location&&(t=this.options.location),"node"===FA.type)try{const e=Buffer.from(this.databaseConnection.export());await FA.writeFile(t,e)}catch(RD){throw new EO(`Could not save database, error: ${RD}`)}else{const e=this.databaseConnection.export(),n=[].slice.call(e);if(this.options.useLocalForage){if(!window.localforage)throw new EO("localforage is not defined - please import localforage.js into your site");await window.localforage.setItem(t,JSON.stringify(n))}else FA.getGlobalVariable().localStorage.setItem(t,JSON.stringify(n))}}async autoSave(){var e;this.options.autoSave&&!(null===(e=this.queryRunner)||void 0===e?void 0:e.isTransactionActive)&&(this.options.autoSaveCallback?await this.options.autoSaveCallback(this.export()):await this.save())}export(){return this.databaseConnection.export()}createGeneratedMap(e,t){const n=e.generatedColumns.reduce(((e,t)=>{if(t.isPrimary&&"increment"===t.generationStrategy){const n="SELECT last_insert_rowid()";try{let i=this.databaseConnection.exec(n);return this.connection.logger.logQuery(n),oP.mergeDeep(e,t.createValueMap(i[0].values[0][0]))}catch(RD){this.connection.logger.logQueryError(RD,n,[])}}return e}),{});return Object.keys(n).length>0?n:void 0}createDatabaseConnection(){return this.options.location?this.load(this.options.location,!1):this.createDatabaseConnectionWithImport(this.options.database)}async createDatabaseConnectionWithImport(e){const t="function"==typeof this.sqlite.Database?this.sqlite:await this.sqlite(this.options.sqlJsConfig);return e&&e.length>0?this.databaseConnection=new t.Database(e):this.databaseConnection=new t.Database,this.databaseConnection.exec("PRAGMA foreign_keys = ON"),this.databaseConnection}loadDependencies(){if("browser"===FA.type){const e=this.options.driver||window.SQL;this.sqlite=e}else try{const e=this.options.driver||FA.load("sql.js");this.sqlite=e}catch(RD){throw new HO("sql.js","sql.js")}}}class WP extends $P{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new IP(this)}async startTransaction(){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive&&void 0===this.transaction)throw new _O;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transaction=void 0,this.isTransactionActive=!1,this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive&&void 0===this.transaction)throw new _O;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transaction=void 0,this.isTransactionActive=!1,this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async beforeMigration(){const e=await this.connect();return new Promise(((t,n)=>{e.exec([{sql:"PRAGMA foreign_keys = OFF",args:[]}],!1,(e=>e?n(e):t()))}))}async afterMigration(){const e=await this.connect();return new Promise(((t,n)=>{e.exec([{sql:"PRAGMA foreign_keys = ON",args:[]}],!1,(e=>e?n(e):t()))}))}async query(e,t,n=!1){if(this.isReleased)throw new rR;return new Promise((async(i,r)=>{const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=+new Date;a.transaction((async a=>{void 0===this.transaction&&(await this.startTransaction(),this.transaction=a),this.transaction.executeSql(e,t,((r,a)=>{const s=this.driver.options.maxQueryExecutionTime,l=+new Date-o;s&&l>s&&this.driver.connection.logger.logQuerySlow(l,e,t,this);const c=new DP;if((null==a?void 0:a.hasOwnProperty("rowsAffected"))&&(c.affected=a.rowsAffected),null==a?void 0:a.hasOwnProperty("rows")){let e=[];for(let t=0;t<a.rows.length;t++)e.push(a.rows.item(t));c.raw=e,c.records=e}e.startsWith("INSERT INTO")&&(c.raw=a.insertId),i(n?c:c.raw)}),((n,i)=>{this.driver.connection.logger.logQueryError(i,e,t,this),r(new eR(e,t,i))}))}),(async e=>{await this.rollbackTransaction(),r(e)}),(()=>{this.isTransactionActive=!1,this.transaction=void 0}))}))}}class HP extends OP{constructor(e){super(e),this.database=this.options.database,this.sqlite=this.options.driver}async disconnect(){return new Promise(((e,t)=>{try{this.queryRunner=void 0,this.databaseConnection._db.close(),this.databaseConnection=void 0,e()}catch(n){t(n)}}))}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new WP(this)),this.queryRunner}createDatabaseConnection(){return new Promise(((e,t)=>{try{const n=this.sqlite.openDatabase(this.options.database);n.transaction((i=>{i.executeSql("PRAGMA foreign_keys = ON",[],((t,i)=>{e(n)}),((e,n)=>{t({transaction:e,error:n})}))}),(e=>{t(e)}))}catch(n){t(n)}}))}}class QP extends MP{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.client=t,this.broadcaster=new IP(this)}async connect(){return{}}release(){return this.isReleased=!0,this.databaseConnection&&this.databaseConnection.release(),Promise.resolve()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}0===this.transactionDepth?await this.client.startTransaction():await this.query(`SAVEPOINT typeorm_${this.transactionDepth}`),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new _O;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.client.commitTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new _O;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.client.rollbackTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new rR;const i=await this.client.query(e,t),r=new DP;return r.raw=i,(null==i?void 0:i.hasOwnProperty("records"))&&Array.isArray(i.records)&&(r.records=i.records),(null==i?void 0:i.hasOwnProperty("numberOfRecordsUpdated"))&&(r.affected=i.numberOfRecordsUpdated),n?r:r.raw}stream(e,t,n,i){if(this.isReleased)throw new rR;return new Promise((async(r,a)=>{try{const a=(await this.connect()).query(e,t);n&&a.on("end",n),i&&a.on("error",i),r(a)}catch(o){a(o)}}))}async getDatabases(){return Promise.resolve([])}async getSchemas(e){throw new EO("MySql driver does not support table schemas")}async hasDatabase(e){return!!(await this.query(`SELECT * FROM \`INFORMATION_SCHEMA\`.\`SCHEMATA\` WHERE \`SCHEMA_NAME\` = '${e}'`)).length}async getCurrentDatabase(){return(await this.query("SELECT DATABASE() AS `db_name`"))[0].db_name}async hasSchema(e){throw new EO("MySql driver does not support table schemas")}async getCurrentSchema(){return(await this.query("SELECT SCHEMA() AS `schema_name`"))[0].schema_name}async hasTable(e){const t=this.driver.parseTableName(e),n=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`COLUMNS\` WHERE \`TABLE_SCHEMA\` = '${t.database}' AND \`TABLE_NAME\` = '${t.tableName}'`;return!!(await this.query(n)).length}async hasColumn(e,t){const n=this.driver.parseTableName(e),i=PO.isTableColumn(t)?t.name:t,r=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`COLUMNS\` WHERE \`TABLE_SCHEMA\` = '${n.database}' AND \`TABLE_NAME\` = '${n.tableName}' AND \`COLUMN_NAME\` = '${i}'`;return!!(await this.query(r)).length}async createDatabase(e,t){const n=t?`CREATE DATABASE IF NOT EXISTS \`${e}\``:`CREATE DATABASE \`${e}\``,i=`DROP DATABASE \`${e}\``;await this.executeQueries(new RP(n),new RP(i))}async dropDatabase(e,t){const n=t?`DROP DATABASE IF EXISTS \`${e}\``:`DROP DATABASE \`${e}\``,i=`CREATE DATABASE \`${e}\``;await this.executeQueries(new RP(n),new RP(i))}async createSchema(e,t){throw new EO("Schema create queries are not supported by MySql driver.")}async dropSchema(e,t){throw new EO("Schema drop queries are not supported by MySql driver.")}async createTable(e,t=!1,n=!0){if(t){if(await this.hasTable(e))return Promise.resolve()}const i=[],r=[];return i.push(this.createTableSql(e,n)),r.push(this.dropTableSql(e)),e.indices.forEach((t=>r.push(this.dropIndexSql(e,t)))),n&&e.foreignKeys.forEach((t=>r.push(this.dropForeignKeySql(e,t)))),this.executeQueries(i,r)}async dropTable(e,t,n=!0){if(t){if(!(await this.hasTable(e)))return Promise.resolve()}const i=n,r=this.getTablePath(e),a=await this.getCachedTable(r),o=[],s=[];n&&a.foreignKeys.forEach((e=>o.push(this.dropForeignKeySql(a,e)))),a.indices.forEach((e=>o.push(this.dropIndexSql(a,e)))),o.push(this.dropTableSql(a)),s.push(this.createTableSql(a,i)),await this.executeQueries(o,s)}async createView(e,t=!1){const n=[],i=[];n.push(this.createViewSql(e)),t&&n.push(await this.insertViewDefinitionSql(e)),i.push(this.dropViewSql(e)),t&&i.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(n,i)}async dropView(e){const t=PO.isView(e)?e.name:e,n=await this.getCachedView(t),i=[],r=[];i.push(await this.deleteViewDefinitionSql(n)),i.push(this.dropViewSql(n)),r.push(await this.insertViewDefinitionSql(n)),r.push(this.createViewSql(n)),await this.executeQueries(i,r)}async renameTable(e,t){const n=[],i=[],r=PO.isTable(e)?e:await this.getCachedTable(e),a=r.clone(),{database:o}=this.driver.parseTableName(r);a.name=o?`${o}.${t}`:t,n.push(new RP(`RENAME TABLE ${this.escapePath(r)} TO ${this.escapePath(a)}`)),i.push(new RP(`RENAME TABLE ${this.escapePath(a)} TO ${this.escapePath(r)}`)),a.indices.forEach((e=>{const t=e.columnNames.map((e=>`\`${e}\``)).join(", "),r=this.connection.namingStrategy.indexName(a,e.columnNames,e.where);let o="";e.isUnique&&(o+="UNIQUE "),e.isSpatial&&(o+="SPATIAL "),e.isFulltext&&(o+="FULLTEXT "),n.push(new RP(`ALTER TABLE ${this.escapePath(a)} DROP INDEX \`${e.name}\`, ADD ${o}INDEX \`${r}\` (${t})`)),i.push(new RP(`ALTER TABLE ${this.escapePath(a)} DROP INDEX \`${r}\`, ADD ${o}INDEX \`${e.name}\` (${t})`)),e.name=r})),a.foreignKeys.forEach((e=>{const t=e.columnNames.map((e=>`\`${e}\``)).join(", "),r=e.referencedColumnNames.map((e=>`\`${e}\``)).join(","),o=this.connection.namingStrategy.foreignKeyName(a,e.columnNames);let s=`ALTER TABLE ${this.escapePath(a)} DROP FOREIGN KEY \`${e.name}\`, ADD CONSTRAINT \`${o}\` FOREIGN KEY (${t}) REFERENCES ${this.escapePath(this.getTablePath(e))}(${r})`;e.onDelete&&(s+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(s+=` ON UPDATE ${e.onUpdate}`);let l=`ALTER TABLE ${this.escapePath(a)} DROP FOREIGN KEY \`${o}\`, ADD CONSTRAINT \`${e.name}\` FOREIGN KEY (${t}) REFERENCES ${this.escapePath(this.getTablePath(e))}(${r})`;e.onDelete&&(l+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(l+=` ON UPDATE ${e.onUpdate}`),n.push(new RP(s)),i.push(new RP(l)),e.name=o})),await this.executeQueries(n,i),r.name=a.name,this.replaceCachedTable(r,a)}async addColumn(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone(),r=[],a=[],o=i.primaryColumns.length>0;if(r.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(t,o,!1)}`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN \`${t.name}\``)),t.isPrimary&&o){const e=i.columns.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(e){const i=e.clone();i.isGenerated=!1,i.generationStrategy=void 0,r.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(i,!0)}`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${i.name}\` ${this.buildCreateColumnSql(t,!0)}`))}const o=i.primaryColumns;let s=o.map((e=>`\`${e.name}\``)).join(", ");if(r.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP PRIMARY KEY`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD PRIMARY KEY (${s})`)),o.push(t),s=o.map((e=>`\`${e.name}\``)).join(", "),r.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD PRIMARY KEY (${s})`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP PRIMARY KEY`)),e){const i=e.clone();i.isGenerated=!1,i.generationStrategy=void 0,r.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${i.name}\` ${this.buildCreateColumnSql(t,!0)}`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(i,!0)}`))}}const s=i.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===t.name));if(s)r.push(this.createIndexSql(n,s)),a.push(this.dropIndexSql(n,s));else if(t.isUnique){const e=new uR({name:this.connection.namingStrategy.indexName(n,[t.name]),columnNames:[t.name],isUnique:!0});i.indices.push(e),i.uniques.push(new pR({name:e.name,columnNames:e.columnNames})),r.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD UNIQUE INDEX \`${e.name}\` (\`${t.name}\`)`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP INDEX \`${e.name}\``))}await this.executeQueries(r,a),i.addColumn(t),this.replaceCachedTable(n,i)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const i=PO.isTable(e)?e:await this.getCachedTable(e),r=PO.isTableColumn(t)?t:i.columns.find((e=>e.name===t));if(!r)throw new EO(`Column "${t}" was not found in the "${i.name}" table.`);let a;PO.isTableColumn(n)?a=n:(a=r.clone(),a.name=n),await this.changeColumn(i,r,a)}async changeColumn(e,t,n){const i=PO.isTable(e)?e:await this.getCachedTable(e);let r=i.clone();const a=[],o=[],s=PO.isTableColumn(t)?t:i.columns.find((e=>e.name===t));if(!s)throw new EO(`Column "${t}" was not found in the "${i.name}" table.`);if(n.isGenerated!==s.isGenerated&&"uuid"!==n.generationStrategy||s.type!==n.type||s.length!==n.length||s.generatedType!==n.generatedType)await this.dropColumn(i,s),await this.addColumn(i,n),r=i.clone();else{if(n.name!==s.name){a.push(new RP(`ALTER TABLE ${this.escapePath(i)} CHANGE \`${s.name}\` \`${n.name}\` ${this.buildCreateColumnSql(s,!0,!0)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} CHANGE \`${n.name}\` \`${s.name}\` ${this.buildCreateColumnSql(s,!0,!0)}`)),r.findColumnIndices(s).forEach((e=>{e.columnNames.splice(e.columnNames.indexOf(s.name),1),e.columnNames.push(n.name);const t=e.columnNames.map((e=>`\`${e}\``)).join(", "),l=this.connection.namingStrategy.indexName(r,e.columnNames,e.where);let c="";e.isUnique&&(c+="UNIQUE "),e.isSpatial&&(c+="SPATIAL "),e.isFulltext&&(c+="FULLTEXT "),a.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP INDEX \`${e.name}\`, ADD ${c}INDEX \`${l}\` (${t})`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP INDEX \`${l}\`, ADD ${c}INDEX \`${e.name}\` (${t})`)),e.name=l})),r.findColumnForeignKeys(s).forEach((e=>{e.columnNames.splice(e.columnNames.indexOf(s.name),1),e.columnNames.push(n.name);const t=e.columnNames.map((e=>`\`${e}\``)).join(", "),l=e.referencedColumnNames.map((e=>`\`${e}\``)).join(","),c=this.connection.namingStrategy.foreignKeyName(r,e.columnNames);let u=`ALTER TABLE ${this.escapePath(i)} DROP FOREIGN KEY \`${e.name}\`, ADD CONSTRAINT \`${c}\` FOREIGN KEY (${t}) REFERENCES ${this.escapePath(this.getTablePath(e))}(${l})`;e.onDelete&&(u+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(u+=` ON UPDATE ${e.onUpdate}`);let d=`ALTER TABLE ${this.escapePath(i)} DROP FOREIGN KEY \`${c}\`, ADD CONSTRAINT \`${e.name}\` FOREIGN KEY (${t}) REFERENCES ${this.escapePath(this.getTablePath(e))}(${l})`;e.onDelete&&(d+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(d+=` ON UPDATE ${e.onUpdate}`),a.push(new RP(u)),o.push(new RP(d)),e.name=c}));const e=r.columns.find((e=>e.name===s.name));r.columns[r.columns.indexOf(e)].name=n.name,s.name=n.name}if(this.isColumnChanged(s,n,!0)&&(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} CHANGE \`${s.name}\` ${this.buildCreateColumnSql(n,!0)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} CHANGE \`${n.name}\` ${this.buildCreateColumnSql(s,!0)}`))),n.isPrimary!==s.isPrimary){const e=r.columns.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(e){const t=e.clone();t.isGenerated=!1,t.generationStrategy=void 0,a.push(new RP(`ALTER TABLE ${this.escapePath(i)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(t,!0)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(e,!0)}`))}const t=r.primaryColumns;if(t.length>0){const e=t.map((e=>`\`${e.name}\``)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP PRIMARY KEY`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD PRIMARY KEY (${e})`))}if(!0===n.isPrimary){t.push(n);r.columns.find((e=>e.name===n.name)).isPrimary=!0;const e=t.map((e=>`\`${e.name}\``)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD PRIMARY KEY (${e})`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP PRIMARY KEY`))}else{const e=t.find((e=>e.name===n.name));t.splice(t.indexOf(e),1);if(r.columns.find((e=>e.name===n.name)).isPrimary=!1,t.length>0){const e=t.map((e=>`\`${e.name}\``)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD PRIMARY KEY (${e})`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP PRIMARY KEY`))}}if(e){const t=e.clone();t.isGenerated=!1,t.generationStrategy=void 0,a.push(new RP(`ALTER TABLE ${this.escapePath(i)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(e,!0)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(t,!0)}`))}}if(n.isUnique!==s.isUnique)if(!0===n.isUnique){const e=new uR({name:this.connection.namingStrategy.indexName(i,[n.name]),columnNames:[n.name],isUnique:!0});r.indices.push(e),r.uniques.push(new pR({name:e.name,columnNames:e.columnNames})),a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD UNIQUE INDEX \`${e.name}\` (\`${n.name}\`)`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP INDEX \`${e.name}\``))}else{const e=r.indices.find((e=>1===e.columnNames.length&&!0===e.isUnique&&!!e.columnNames.find((e=>e===n.name))));r.indices.splice(r.indices.indexOf(e),1);const t=r.uniques.find((t=>t.name===e.name));r.uniques.splice(r.uniques.indexOf(t),1),a.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP INDEX \`${e.name}\``)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD UNIQUE INDEX \`${e.name}\` (\`${n.name}\`)`))}}await this.executeQueries(a,o),this.replaceCachedTable(i,r)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:i}of t)await this.changeColumn(e,n,i)}async dropColumn(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableColumn(t)?t:n.findColumnByName(t);if(!i)throw new EO(`Column "${t}" was not found in table "${n.name}"`);const r=n.clone(),a=[],o=[];if(i.isPrimary){const e=r.columns.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(e){const t=e.clone();t.isGenerated=!1,t.generationStrategy=void 0,a.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(t,!0)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(e,!0)}`))}const t=r.primaryColumns.map((e=>`\`${e.name}\``)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(r)} DROP PRIMARY KEY`)),o.push(new RP(`ALTER TABLE ${this.escapePath(r)} ADD PRIMARY KEY (${t})`));if(r.findColumnByName(i.name).isPrimary=!1,r.primaryColumns.length>0){const e=r.primaryColumns.map((e=>`\`${e.name}\``)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(r)} ADD PRIMARY KEY (${e})`)),o.push(new RP(`ALTER TABLE ${this.escapePath(r)} DROP PRIMARY KEY`))}if(e&&e.name!==i.name){const t=e.clone();t.isGenerated=!1,t.generationStrategy=void 0,a.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(e,!0)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(t,!0)}`))}}const s=r.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===i.name));if(s)r.indices.splice(r.indices.indexOf(s),1),a.push(this.dropIndexSql(n,s)),o.push(this.createIndexSql(n,s));else if(i.isUnique){const e=this.connection.namingStrategy.uniqueConstraintName(n,[i.name]),t=r.uniques.find((t=>t.name===e));t&&r.uniques.splice(r.uniques.indexOf(t),1);const s=this.connection.namingStrategy.indexName(n,[i.name]),l=r.indices.find((e=>e.name===s));l&&r.indices.splice(r.indices.indexOf(l),1),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP INDEX \`${s}\``)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD UNIQUE INDEX \`${s}\` (\`${i.name}\`)`))}a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN \`${i.name}\``)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(i,!0)}`)),await this.executeQueries(a,o),r.removeColumn(i),this.replaceCachedTable(n,r)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone(),r=this.createPrimaryKeySql(n,t),a=this.dropPrimaryKeySql(n);await this.executeQueries(r,a),i.columns.forEach((e=>{t.find((t=>t===e.name))&&(e.isPrimary=!0)})),this.replaceCachedTable(n,i)}async updatePrimaryKeys(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone(),r=t.map((e=>e.name)),a=[],o=[],s=i.columns.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(s){const e=s.clone();e.isGenerated=!1,e.generationStrategy=void 0,a.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${s.name}\` ${this.buildCreateColumnSql(e,!0)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(s,!0)}`))}const l=i.primaryColumns;if(l.length>0){const e=l.map((e=>`\`${e.name}\``)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP PRIMARY KEY`)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD PRIMARY KEY (${e})`))}i.columns.filter((e=>-1!==r.indexOf(e.name))).forEach((e=>e.isPrimary=!0));const c=r.map((e=>`\`${e}\``)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD PRIMARY KEY (${c})`)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP PRIMARY KEY`));const u=s||t.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(u){const e=u.clone();e.isGenerated=!1,e.generationStrategy=void 0,a.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(u,!0)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${u.name}\` ${this.buildCreateColumnSql(e,!0)}`));const t=i.columns.find((e=>e.name===u.name));t.isGenerated=!0,t.generationStrategy="increment"}await this.executeQueries(a,o),this.replaceCachedTable(n,i)}async dropPrimaryKey(e){const t=PO.isTable(e)?e:await this.getCachedTable(e),n=this.dropPrimaryKeySql(t),i=this.createPrimaryKeySql(t,t.primaryColumns.map((e=>e.name)));await this.executeQueries(n,i),t.primaryColumns.forEach((e=>{e.isPrimary=!1}))}async createUniqueConstraint(e,t){throw new EO("MySql does not support unique constraints. Use unique index instead.")}async createUniqueConstraints(e,t){throw new EO("MySql does not support unique constraints. Use unique index instead.")}async dropUniqueConstraint(e,t){throw new EO("MySql does not support unique constraints. Use unique index instead.")}async dropUniqueConstraints(e,t){throw new EO("MySql does not support unique constraints. Use unique index instead.")}async createCheckConstraint(e,t){throw new EO("MySql does not support check constraints.")}async createCheckConstraints(e,t){throw new EO("MySql does not support check constraints.")}async dropCheckConstraint(e,t){throw new EO("MySql does not support check constraints.")}async dropCheckConstraints(e,t){throw new EO("MySql does not support check constraints.")}async createExclusionConstraint(e,t){throw new EO("MySql does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new EO("MySql does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new EO("MySql does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new EO("MySql does not support exclusion constraints.")}async createForeignKey(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames));const i=this.createForeignKeySql(n,t),r=this.dropForeignKeySql(n,t);await this.executeQueries(i,r),n.addForeignKey(t)}async createForeignKeys(e,t){const n=t.map((t=>this.createForeignKey(e,t)));await Promise.all(n)}async dropForeignKey(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableForeignKey(t)?t:n.foreignKeys.find((e=>e.name===t));if(!i)throw new EO(`Supplied foreign key was not found in table ${n.name}`);const r=this.dropForeignKeySql(n,i),a=this.createForeignKeySql(n,i);await this.executeQueries(r,a),n.removeForeignKey(i)}async dropForeignKeys(e,t){const n=t.map((t=>this.dropForeignKey(e,t)));await Promise.all(n)}async createIndex(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const i=this.createIndexSql(n,t),r=this.dropIndexSql(n,t);await this.executeQueries(i,r),n.addIndex(t,!0)}async createIndices(e,t){const n=t.map((t=>this.createIndex(e,t)));await Promise.all(n)}async dropIndex(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableIndex(t)?t:n.indices.find((e=>e.name===t));if(!i)throw new EO(`Supplied index ${t} was not found in table ${n.name}`);i.name||(i.name=this.generateIndexName(n,i));const r=this.dropIndexSql(n,i),a=this.createIndexSql(n,i);await this.executeQueries(r,a),n.removeIndex(i,!0)}async dropIndices(e,t){const n=t.map((t=>this.dropIndex(e,t)));await Promise.all(n)}async clearTable(e){await this.query(`TRUNCATE TABLE ${this.escapePath(e)}`)}async clearDatabase(e){const t=e||this.driver.database;if(!t)throw new EO("Can not clear database. No database is specified");if(!(await this.hasDatabase(t)))return Promise.resolve();const n=this.isTransactionActive;n||await this.startTransaction();try{const e=`SELECT concat('DROP VIEW IF EXISTS \`', table_schema, '\`.\`', table_name, '\`') AS \`query\` FROM \`INFORMATION_SCHEMA\`.\`VIEWS\` WHERE \`TABLE_SCHEMA\` = '${t}'`,i=await this.query(e);await Promise.all(i.map((e=>this.query(e.query))));const r="SET FOREIGN_KEY_CHECKS = 0;",a=`SELECT concat('DROP TABLE IF EXISTS \`', table_schema, '\`.\`', table_name, '\`') AS \`query\` FROM \`INFORMATION_SCHEMA\`.\`TABLES\` WHERE \`TABLE_SCHEMA\` = '${t}'`,o="SET FOREIGN_KEY_CHECKS = 1;";await this.query(r);const s=await this.query(a);await Promise.all(s.map((e=>this.query(e.query)))),await this.query(o),n||await this.commitTransaction()}catch(i){try{n||await this.rollbackTransaction()}catch(r){}throw i}}async loadViews(e){if(!(await this.hasTable(this.getTypeormMetadataTableName())))return[];e||(e=[]);const t=await this.getCurrentDatabase(),n=e.map((e=>{let{database:n,tableName:i}=this.driver.parseTableName(e);return n||(n=t),`(\`t\`.\`schema\` = '${n}' AND \`t\`.\`name\` = '${i}')`})).join(" OR "),i=`SELECT \`t\`.*, \`v\`.\`check_option\` FROM ${this.escapePath(this.getTypeormMetadataTableName())} \`t\` INNER JOIN \`information_schema\`.\`views\` \`v\` ON \`v\`.\`table_schema\` = \`t\`.\`schema\` AND \`v\`.\`table_name\` = \`t\`.\`name\` WHERE \`t\`.\`type\` = '${nP.VIEW}' ${n?`AND (${n})`:""}`;return(await this.query(i)).map((e=>{const n=new kP,i=e.schema===t?void 0:e.schema;return n.database=e.schema,n.name=this.driver.buildTableName(e.name,void 0,i),n.expression=e.value,n}))}async loadTables(e){if(e&&0===e.length)return[];const t=[],n=await this.getCurrentDatabase();if(e){const i="SELECT TABLE_NAME, TABLE_SCHEMA FROM `INFORMATION_SCHEMA`.`TABLES` WHERE "+e.map((e=>{let[t,i]=e.split(".");return i||(i=t,t=this.driver.database||n),`(\`TABLE_SCHEMA\` = '${t}' AND \`TABLE_NAME\` = '${i}')`})).join(" OR ");t.push(...await this.query(i))}else{const e="SELECT TABLE_NAME, TABLE_SCHEMA FROM `INFORMATION_SCHEMA`.`TABLES`";t.push(...await this.query(e))}if(0===t.length)return[];const i=t.map((({TABLE_NAME:e,TABLE_SCHEMA:t})=>`(\`TABLE_SCHEMA\` = '${t}' AND \`TABLE_NAME\` = '${e}')`)).join(" OR "),r="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE "+i,a=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`KEY_COLUMN_USAGE\` WHERE \`CONSTRAINT_NAME\` = 'PRIMARY' AND (${i})`,o=`SELECT \`s\`.* FROM \`INFORMATION_SCHEMA\`.\`STATISTICS\` \`s\` LEFT JOIN \`INFORMATION_SCHEMA\`.\`REFERENTIAL_CONSTRAINTS\` \`rc\` ON \`s\`.\`INDEX_NAME\` = \`rc\`.\`CONSTRAINT_NAME\` WHERE (${t.map((({TABLE_NAME:e,TABLE_SCHEMA:t})=>`(\`s\`.\`TABLE_SCHEMA\` = '${t}' AND \`s\`.\`TABLE_NAME\` = '${e}')`)).join(" OR ")}) AND \`s\`.\`INDEX_NAME\` != 'PRIMARY' AND \`rc\`.\`CONSTRAINT_NAME\` IS NULL`,s="SELECT `kcu`.`TABLE_SCHEMA`, `kcu`.`TABLE_NAME`, `kcu`.`CONSTRAINT_NAME`, `kcu`.`COLUMN_NAME`, `kcu`.`REFERENCED_TABLE_SCHEMA`, `kcu`.`REFERENCED_TABLE_NAME`, `kcu`.`REFERENCED_COLUMN_NAME`, `rc`.`DELETE_RULE` `ON_DELETE`, `rc`.`UPDATE_RULE` `ON_UPDATE` FROM `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` `kcu` INNER JOIN `INFORMATION_SCHEMA`.`REFERENTIAL_CONSTRAINTS` `rc` ON `rc`.`constraint_name` = `kcu`.`constraint_name` WHERE "+t.map((({TABLE_NAME:e,TABLE_SCHEMA:t})=>`(\`kcu\`.\`TABLE_SCHEMA\` = '${t}' AND \`kcu\`.\`TABLE_NAME\` = '${e}')`)).join(" OR "),[l,c,u,d,h]=await Promise.all([this.query(r),this.query(a),this.query("SELECT `SCHEMA_NAME`, `DEFAULT_CHARACTER_SET_NAME` as `CHARSET`, `DEFAULT_COLLATION_NAME` AS `COLLATION` FROM `INFORMATION_SCHEMA`.`SCHEMATA`"),this.query(o),this.query(s)]);return Promise.all(t.map((async e=>{const t=new gR,i=u.find((t=>t.SCHEMA_NAME===e.TABLE_SCHEMA)),r=i.COLLATION,a=i.CHARSET,o=e.TABLE_SCHEMA===n?void 0:e.TABLE_SCHEMA;t.database=e.TABLE_SCHEMA,t.name=this.driver.buildTableName(e.TABLE_NAME,void 0,o),t.columns=l.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.TABLE_SCHEMA===e.TABLE_SCHEMA)).map((n=>{const i=d.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.TABLE_SCHEMA===e.TABLE_SCHEMA&&t.COLUMN_NAME===n.COLUMN_NAME&&0===parseInt(t.NON_UNIQUE,10))),o=this.connection.entityMetadatas.find((e=>this.getTablePath(t)===this.getTablePath(e))),s=i.length>0&&o&&o.indices.some((e=>i.some((t=>e.name===t.INDEX_NAME&&!1===e.synchronize)))),l=i.every((e=>d.some((t=>t.INDEX_NAME===e.INDEX_NAME&&t.COLUMN_NAME!==n.COLUMN_NAME)))),u=new cR;if(u.name=n.COLUMN_NAME,u.type=n.DATA_TYPE.toLowerCase(),u.unsigned=!!u.zerofill||-1!==n.COLUMN_TYPE.indexOf("unsigned"),-1!==this.driver.withWidthColumnTypes.indexOf(u.type)){const e=n.COLUMN_TYPE.substring(n.COLUMN_TYPE.indexOf("(")+1,n.COLUMN_TYPE.indexOf(")"));u.width=e&&!this.isDefaultColumnWidth(t,u,parseInt(e))?parseInt(e):void 0}if(null===n.COLUMN_DEFAULT||void 0===n.COLUMN_DEFAULT?u.default=void 0:u.default="CURRENT_TIMESTAMP"===n.COLUMN_DEFAULT?n.COLUMN_DEFAULT:`'${n.COLUMN_DEFAULT}'`,-1!==n.EXTRA.indexOf("on update")&&(u.onUpdate=n.EXTRA.substring(n.EXTRA.indexOf("on update")+10)),n.GENERATION_EXPRESSION&&(u.asExpression=n.GENERATION_EXPRESSION,u.generatedType=-1!==n.EXTRA.indexOf("VIRTUAL")?"VIRTUAL":"STORED"),u.isUnique=i.length>0&&!s&&!l,u.isNullable="YES"===n.IS_NULLABLE,u.isPrimary=c.some((e=>e.TABLE_NAME===n.TABLE_NAME&&e.TABLE_SCHEMA===n.TABLE_SCHEMA&&e.COLUMN_NAME===n.COLUMN_NAME)),u.zerofill=-1!==n.COLUMN_TYPE.indexOf("zerofill"),u.isGenerated=-1!==n.EXTRA.indexOf("auto_increment"),u.isGenerated&&(u.generationStrategy="increment"),u.comment="string"==typeof n.COLUMN_COMMENT&&0===n.COLUMN_COMMENT.length?void 0:n.COLUMN_COMMENT,n.CHARACTER_SET_NAME&&(u.charset=n.CHARACTER_SET_NAME===a?void 0:n.CHARACTER_SET_NAME),n.COLLATION_NAME&&(u.collation=n.COLLATION_NAME===r?void 0:n.COLLATION_NAME),-1!==this.driver.withLengthColumnTypes.indexOf(u.type)&&n.CHARACTER_MAXIMUM_LENGTH){const e=n.CHARACTER_MAXIMUM_LENGTH.toString();u.length=this.isDefaultColumnLength(t,u,e)?"":e}if("decimal"!==u.type&&"double"!==u.type&&"float"!==u.type||(null===n.NUMERIC_PRECISION||this.isDefaultColumnPrecision(t,u,n.NUMERIC_PRECISION)||(u.precision=parseInt(n.NUMERIC_PRECISION)),null===n.NUMERIC_SCALE||this.isDefaultColumnScale(t,u,n.NUMERIC_SCALE)||(u.scale=parseInt(n.NUMERIC_SCALE))),"enum"===u.type||"simple-enum"===u.type||"set"===u.type){const e=n.COLUMN_TYPE,t=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(",");u.enum=t.map((e=>e.substring(1,e.length-1))),u.length=""}return"datetime"!==u.type&&"time"!==u.type&&"timestamp"!==u.type||null===n.DATETIME_PRECISION||void 0===n.DATETIME_PRECISION||this.isDefaultColumnPrecision(t,u,parseInt(n.DATETIME_PRECISION))||(u.precision=parseInt(n.DATETIME_PRECISION)),u}));const s=oP.uniq(h.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.TABLE_SCHEMA===e.TABLE_SCHEMA)),(e=>e.CONSTRAINT_NAME));t.foreignKeys=s.map((e=>{const t=h.filter((t=>t.CONSTRAINT_NAME===e.CONSTRAINT_NAME)),i=e.REFERENCED_TABLE_SCHEMA===n?void 0:e.REFERENCED_TABLE_SCHEMA,r=this.driver.buildTableName(e.REFERENCED_TABLE_NAME,void 0,i);return new dR({name:e.CONSTRAINT_NAME,columnNames:t.map((e=>e.COLUMN_NAME)),referencedDatabase:e.REFERENCED_TABLE_SCHEMA,referencedTableName:r,referencedColumnNames:t.map((e=>e.REFERENCED_COLUMN_NAME)),onDelete:e.ON_DELETE,onUpdate:e.ON_UPDATE})}));const p=oP.uniq(d.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.TABLE_SCHEMA===e.TABLE_SCHEMA)),(e=>e.INDEX_NAME));return t.indices=p.map((e=>{const n=d.filter((t=>t.TABLE_SCHEMA===e.TABLE_SCHEMA&&t.TABLE_NAME===e.TABLE_NAME&&t.INDEX_NAME===e.INDEX_NAME)),i=parseInt(e.NON_UNIQUE,10);return new uR({table:t,name:e.INDEX_NAME,columnNames:n.map((e=>e.COLUMN_NAME)),isUnique:0===i,isSpatial:"SPATIAL"===e.INDEX_TYPE,isFulltext:"FULLTEXT"===e.INDEX_TYPE})})),t})))}createTableSql(e,t){const n=e.columns.map((e=>this.buildCreateColumnSql(e,!0))).join(", ");let i=`CREATE TABLE ${this.escapePath(e)} (${n}`;if(e.columns.filter((e=>e.isUnique)).forEach((t=>{const n=e.indices.some((e=>1===e.columnNames.length&&!!e.isUnique&&-1!==e.columnNames.indexOf(t.name))),i=e.uniques.some((e=>1===e.columnNames.length&&-1!==e.columnNames.indexOf(t.name)));n||i||e.indices.push(new uR({name:this.connection.namingStrategy.uniqueConstraintName(e,[t.name]),columnNames:[t.name],isUnique:!0}))})),e.uniques.length>0&&e.uniques.forEach((t=>{e.indices.some((e=>e.name===t.name))||e.indices.push(new uR({name:t.name,columnNames:t.columnNames,isUnique:!0}))})),e.indices.length>0){i+=`, ${e.indices.map((t=>{const n=t.columnNames.map((e=>`\`${e}\``)).join(", ");t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where));let i="";return t.isUnique&&(i+="UNIQUE "),t.isSpatial&&(i+="SPATIAL "),t.isFulltext&&(i+="FULLTEXT "),`${i}INDEX \`${t.name}\` (${n})`})).join(", ")}`}if(e.foreignKeys.length>0&&t){const t=e.foreignKeys.map((t=>{const n=t.columnNames.map((e=>`\`${e}\``)).join(", ");t.name||(t.name=this.connection.namingStrategy.foreignKeyName(e,t.columnNames));const i=t.referencedColumnNames.map((e=>`\`${e}\``)).join(", ");let r=`CONSTRAINT \`${t.name}\` FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))} (${i})`;return t.onDelete&&(r+=` ON DELETE ${t.onDelete}`),t.onUpdate&&(r+=` ON UPDATE ${t.onUpdate}`),r})).join(", ");i+=`, ${t}`}if(e.primaryColumns.length>0){i+=`, PRIMARY KEY (${e.primaryColumns.map((e=>`\`${e.name}\``)).join(", ")})`}return i+=`) ENGINE=${e.engine||"InnoDB"}`,new RP(i)}dropTableSql(e){return new RP(`DROP TABLE ${this.escapePath(e)}`)}createViewSql(e){return"string"==typeof e.expression?new RP(`CREATE VIEW ${this.escapePath(e)} AS ${e.expression}`):new RP(`CREATE VIEW ${this.escapePath(e)} AS ${e.expression(this.connection).getQuery()}`)}async insertViewDefinitionSql(e){const t=await this.getCurrentDatabase(),n="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:nP.VIEW,schema:t,name:e.name,value:n})}dropViewSql(e){return new RP(`DROP VIEW ${this.escapePath(e)}`)}async deleteViewDefinitionSql(e){const t=await this.getCurrentDatabase(),n=PO.isView(e)?e.name:e;return this.deleteTypeormMetadataSql({type:nP.VIEW,schema:t,name:n})}createIndexSql(e,t){const n=t.columnNames.map((e=>`\`${e}\``)).join(", ");let i="";return t.isUnique&&(i+="UNIQUE "),t.isSpatial&&(i+="SPATIAL "),t.isFulltext&&(i+="FULLTEXT "),new RP(`CREATE ${i}INDEX \`${t.name}\` ON ${this.escapePath(e)} (${n})`)}dropIndexSql(e,t){let n=PO.isTableIndex(t)?t.name:t;return new RP(`DROP INDEX \`${n}\` ON ${this.escapePath(e)}`)}createPrimaryKeySql(e,t){const n=t.map((e=>`\`${e}\``)).join(", ");return new RP(`ALTER TABLE ${this.escapePath(e)} ADD PRIMARY KEY (${n})`)}dropPrimaryKeySql(e){return new RP(`ALTER TABLE ${this.escapePath(e)} DROP PRIMARY KEY`)}createForeignKeySql(e,t){const n=t.columnNames.map((e=>`\`${e}\``)).join(", "),i=t.referencedColumnNames.map((e=>`\`${e}\``)).join(",");let r=`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT \`${t.name}\` FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))}(${i})`;return t.onDelete&&(r+=` ON DELETE ${t.onDelete}`),t.onUpdate&&(r+=` ON UPDATE ${t.onUpdate}`),new RP(r)}dropForeignKeySql(e,t){const n=PO.isTableForeignKey(t)?t.name:t;return new RP(`ALTER TABLE ${this.escapePath(e)} DROP FOREIGN KEY \`${n}\``)}escapeComment(e){return e&&0!==e.length?`'${e=e.replace(/\\/g,"\\\\").replace(/'/g,"''").replace(/\u0000/g,"")}'`:"''"}escapePath(e){const{database:t,tableName:n}=this.driver.parseTableName(e);return t&&t!==this.driver.database?`\`${t}\`.\`${n}\``:`\`${n}\``}buildCreateColumnSql(e,t,n=!1){let i="";return i=n?this.connection.driver.createFullType(e):`\`${e.name}\` ${this.connection.driver.createFullType(e)}`,e.asExpression&&(i+=` AS (${e.asExpression}) ${e.generatedType?e.generatedType:"VIRTUAL"}`),e.zerofill?i+=" ZEROFILL":e.unsigned&&(i+=" UNSIGNED"),e.enum&&(i+=` (${e.enum.map((e=>"'"+e+"'")).join(", ")})`),e.charset&&(i+=` CHARACTER SET "${e.charset}"`),e.collation&&(i+=` COLLATE "${e.collation}"`),e.isNullable||(i+=" NOT NULL"),e.isNullable&&(i+=" NULL"),e.isPrimary&&!t&&(i+=" PRIMARY KEY"),e.isGenerated&&"increment"===e.generationStrategy&&(i+=" AUTO_INCREMENT"),e.comment&&(i+=` COMMENT ${this.escapeComment(e.comment)}`),void 0!==e.default&&null!==e.default&&(i+=` DEFAULT ${e.default}`),e.onUpdate&&(i+=` ON UPDATE ${e.onUpdate}`),i}isDefaultColumnWidth(e,t,n){if(this.connection.hasMetadata(e.name)){const n=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(n&&n.width)return!1}const i=this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].width;if(i){const e=-1!==["int","tinyint","smallint","mediumint"].indexOf(t.type);return t.unsigned&&e?i-1===n:i===n}return!1}}class KP{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["bit","int","integer","tinyint","smallint","mediumint","bigint","float","double","double precision","real","decimal","dec","numeric","fixed","bool","boolean","date","datetime","timestamp","time","year","char","nchar","national char","varchar","nvarchar","national varchar","blob","text","tinyblob","tinytext","mediumblob","mediumtext","longblob","longtext","enum","set","binary","varbinary","json","geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","geometrycollection"],this.supportedUpsertTypes=["on-duplicate-key-update"],this.spatialTypes=["geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","geometrycollection"],this.withLengthColumnTypes=["char","varchar","nvarchar","binary","varbinary"],this.withWidthColumnTypes=["bit","tinyint","smallint","mediumint","int","integer","bigint"],this.withPrecisionColumnTypes=["decimal","dec","numeric","fixed","float","double","double precision","real","time","datetime","timestamp"],this.withScaleColumnTypes=["decimal","dec","numeric","fixed","float","double","double precision","real"],this.unsignedAndZerofillTypes=["int","integer","smallint","tinyint","mediumint","bigint","decimal","dec","numeric","fixed","float","double","double precision","real"],this.mappedDataTypes={createDate:"datetime",createDatePrecision:6,createDateDefault:"CURRENT_TIMESTAMP(6)",updateDate:"datetime",updateDatePrecision:6,updateDateDefault:"CURRENT_TIMESTAMP(6)",deleteDate:"datetime",deleteDatePrecision:6,deleteDateNullable:!0,version:"int",treeLevel:"int",migrationId:"int",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.dataTypeDefaults={varchar:{length:255},nvarchar:{length:255},"national varchar":{length:255},char:{length:1},binary:{length:1},varbinary:{length:255},decimal:{precision:10,scale:0},dec:{precision:10,scale:0},numeric:{precision:10,scale:0},fixed:{precision:10,scale:0},float:{precision:12},double:{precision:22},time:{precision:0},datetime:{precision:0},timestamp:{precision:0},bit:{width:1},int:{width:11},integer:{width:11},tinyint:{width:4},smallint:{width:6},mediumint:{width:9},bigint:{width:20}},this.maxAliasLength=63,this.cteCapabilities={enabled:!1},this.connection=e,this.options=e.options,this.loadDependencies(),this.client=new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,((e,t)=>this.connection.logger.logQuery(e,t)),this.options.serviceConfigOptions,this.options.formatOptions),this.database=CR.buildDriverOptions(this.options).database}async connect(){if(!this.database){const e=await this.createQueryRunner("master");this.database=await e.getCurrentDatabase(),await e.release()}}afterConnect(){return Promise.resolve()}async disconnect(){}createSchemaBuilder(){return new _P(this.connection)}createQueryRunner(e){return new QP(this,new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,((e,t)=>this.connection.logger.logQuery(e,t)),this.options.serviceConfigOptions,this.options.formatOptions))}escapeQueryWithParameters(e,t,n){const i=Object.keys(n).map((e=>n[e]));return t&&Object.keys(t).length?(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,r)=>{if(!t.hasOwnProperty(r))return e;let a=t[r];return n?a.map((e=>(i.push(e),this.createParameter(r,i.length-1)))).join(", "):"function"==typeof a?a():(i.push(a),this.createParameter(r,i.length-1))})),[e,i]):[e,i]}escape(e){return"`"+e+"`"}buildTableName(e,t,n){let i=[e];return n&&i.unshift(n),i.join(".")}parseTableName(e){const t=this.database,n=void 0;if(PO.isTable(e)||PO.isView(e)){const i=this.parseTableName(e.name);return{database:e.database||i.database||t,schema:e.schema||i.schema||n,tableName:i.tableName}}if(PO.isTableForeignKey(e)){const i=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||i.database||t,schema:e.referencedSchema||i.schema||n,tableName:i.tableName}}if(PO.isEntityMetadata(e))return{database:e.database||t,schema:e.schema||n,tableName:e.tableName};const i=e.split(".");return{database:(i.length>1?i[0]:void 0)||t,schema:n,tableName:i.length>1?i[1]:i[0]}}preparePersistentValue(e,t){return t.transformer&&(e=sP.transformTo(t.transformer,e)),this.options.formatOptions&&!1===this.options.formatOptions.castParameters?null==e?e:t.type===Boolean?!0===e?1:0:"date"===t.type?aP.mixedDateToDateString(e):"time"===t.type?aP.mixedDateToTimeString(e):"json"===t.type?JSON.stringify(e):"timestamp"===t.type||"datetime"===t.type||t.type===Date?aP.mixedDateToDate(e):"simple-array"===t.type||"set"===t.type?aP.simpleArrayToString(e):"simple-json"===t.type?aP.simpleJsonToString(e):"enum"===t.type||"simple-enum"===t.type?""+e:e:this.client.preparePersistentValue(e,t)}prepareHydratedValue(e,t){return null==e?t.transformer?sP.transformFrom(t.transformer,e):e:this.options.formatOptions&&!1===this.options.formatOptions.castParameters?(t.type===Boolean||"bool"===t.type||"boolean"===t.type?e=!!e:"datetime"===t.type||t.type===Date?e=aP.normalizeHydratedDate(e):"date"===t.type?e=aP.mixedDateToDateString(e):"json"===t.type?e="string"==typeof e?JSON.parse(e):e:"time"===t.type?e=aP.mixedTimeToString(e):"simple-array"===t.type||"set"===t.type?e=aP.stringToSimpleArray(e):"simple-json"===t.type?e=aP.stringToSimpleJson(e):("enum"===t.type||"simple-enum"===t.type)&&t.enum&&!isNaN(e)&&t.enum.indexOf(parseInt(e))>=0?e=parseInt(e):t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=sP.transformFrom(t.transformer,e)),e):this.client.prepareHydratedValue(e,t)}normalizeType(e){return e.type===Number||"integer"===e.type?"int":e.type===String?"varchar":e.type===Date?"datetime":e.type===Buffer?"blob":e.type===Boolean?"tinyint":"uuid"===e.type?"varchar":"simple-array"===e.type||"simple-json"===e.type?"text":"simple-enum"===e.type?"enum":"double precision"===e.type||"real"===e.type?"double":"dec"===e.type||"numeric"===e.type||"fixed"===e.type?"decimal":"bool"===e.type||"boolean"===e.type?"tinyint":"nvarchar"===e.type||"national varchar"===e.type?"varchar":"nchar"===e.type||"national char"===e.type?"char":e.type||""}normalizeDefault(e){const t=e.default;if(null!==t){if(("enum"===e.type||"simple-enum"===e.type)&&void 0!==t)return`'${t}'`;if("set"===e.type&&void 0!==t)return`'${aP.simpleArrayToString(t)}'`;if("number"==typeof t)return`${t}`;if("boolean"==typeof t)return t?"1":"0";if("function"==typeof t)return t();if("string"==typeof t)return`'${t}'`;if(void 0!==t)return`${t}`}}normalizeIsUnique(e){return e.entityMetadata.indices.some((t=>t.isUnique&&1===t.columns.length&&t.columns[0]===e))}getColumnLength(e){if(e.length)return e.length.toString();if("uuid"===e.generationStrategy)return"36";switch(e.type){case String:case"varchar":case"nvarchar":case"national varchar":case"varbinary":return"255";default:return""}}createFullType(e){let t=e.type;return this.getColumnLength(e)?t+=`(${this.getColumnLength(e)})`:e.width?t+=`(${e.width})`:null!==e.precision&&void 0!==e.precision&&null!==e.scale&&void 0!==e.scale?t+=`(${e.precision},${e.scale})`:null!==e.precision&&void 0!==e.precision&&(t+=`(${e.precision})`),e.isArray&&(t+=" array"),t}obtainMasterConnection(){return new Promise(((e,t)=>{this.poolCluster?this.poolCluster.getConnection("MASTER",((n,i)=>{n?t(n):e(this.prepareDbConnection(i))})):this.pool?this.pool.getConnection(((n,i)=>{n?t(n):e(this.prepareDbConnection(i))})):t(new EO("Connection is not established with mysql database"))}))}obtainSlaveConnection(){return this.poolCluster?new Promise(((e,t)=>{this.poolCluster.getConnection("SLAVE*",((n,i)=>{n?t(n):e(this.prepareDbConnection(i))}))})):this.obtainMasterConnection()}createGeneratedMap(e,t,n){const i=e.generatedColumns.reduce(((e,i)=>{let r;return"increment"===i.generationStrategy&&t.insertId&&(r=t.insertId+n),oP.mergeDeep(e,i.createValueMap(r))}),{});return Object.keys(i).length>0?i:void 0}findChangedColumns(e,t){return t.filter((t=>{const n=e.find((e=>e.name===t.databaseName));if(!n)return!1;let i=t.length;return i||"uuid"!==t.generationStrategy||(i=this.getColumnLength(t)),n.name!==t.databaseName||n.type!==this.normalizeType(t)||n.length!==i||n.width!==t.width||n.precision!==t.precision||n.scale!==t.scale||n.zerofill!==t.zerofill||n.unsigned!==t.unsigned||n.asExpression!==t.asExpression||n.generatedType!==t.generatedType||n.comment!==this.escapeComment(t.comment)||!this.compareDefaultValues(this.normalizeDefault(t),n.default)||n.enum&&t.enum&&!oP.isArraysEqual(n.enum,t.enum.map((e=>e+"")))||n.onUpdate!==t.onUpdate||n.isPrimary!==t.isPrimary||n.isNullable!==t.isNullable||n.isUnique!==this.normalizeIsUnique(t)||"uuid"!==t.generationStrategy&&n.isGenerated!==t.isGenerated}))}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!0}createParameter(e,t){return"?"}loadDependencies(){const e=this.options.driver||FA.load("typeorm-aurora-data-api-driver");this.DataApiDriver=e,this.DataApiDriver=this.DataApiDriver.default||this.DataApiDriver}createConnectionOptions(e,t){return t=Object.assign({},t,CR.buildDriverOptions(t)),Object.assign({},{resourceArn:e.resourceArn,secretArn:e.secretArn,database:e.database,region:e.region,type:e.type},{host:t.host,user:t.username,password:t.password,database:t.database,port:t.port,ssl:e.ssl},e.extra||{})}async createPool(e){return{}}prepareDbConnection(e){const{logger:t}=this.connection;return 0===e.listeners("error").length&&e.on("error",(e=>t.log("warn",`MySQL connection raised an error. ${e}`))),e}compareDefaultValues(e,t){return"string"==typeof e&&"string"==typeof t&&(e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t}escapeComment(e){return e?e=e.replace(/\u0000/g,""):e}}class GP extends MP{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.mode=t,this.broadcaster=new IP(this)}connect(){return this.databaseConnection?Promise.resolve(this.databaseConnection):(this.databaseConnectionPromise||("slave"===this.mode&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then((([e,t])=>{this.driver.connectedQueryRunners.push(this),this.databaseConnection=e;const n=e=>this.releasePostgresConnection(e);return this.releaseCallback=e=>{this.databaseConnection.removeListener("error",n),t(e)},this.databaseConnection.on("error",n),this.databaseConnection})):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then((([e,t])=>{this.driver.connectedQueryRunners.push(this),this.databaseConnection=e;const n=e=>this.releasePostgresConnection(e);return this.releaseCallback=e=>{this.databaseConnection.removeListener("error",n),t(e)},this.databaseConnection.on("error",n),this.databaseConnection}))),this.databaseConnectionPromise)}async releasePostgresConnection(e){if(this.isReleased)return;this.isReleased=!0,this.releaseCallback&&(this.releaseCallback(e),this.releaseCallback=void 0);const t=this.driver.connectedQueryRunners.indexOf(this);-1!==t&&this.driver.connectedQueryRunners.splice(t,1)}release(){return this.releasePostgresConnection()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}0===this.transactionDepth?(await this.query("START TRANSACTION"),e&&await this.query("SET TRANSACTION ISOLATION LEVEL "+e)):await this.query(`SAVEPOINT typeorm_${this.transactionDepth}`),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new _O;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.query("COMMIT"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new _O;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.query("ROLLBACK"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new rR;const i=await this.connect();this.driver.connection.logger.logQuery(e,t,this);try{const r=+new Date,a=await i.query(e,t),o=this.driver.options.maxQueryExecutionTime,s=+new Date-r;o&&s>o&&this.driver.connection.logger.logQuerySlow(s,e,t,this);const l=new DP;if(a){switch(a.hasOwnProperty("rows")&&(l.records=a.rows),a.hasOwnProperty("rowCount")&&(l.affected=a.rowCount),a.command){case"DELETE":case"UPDATE":l.raw=[a.rows,a.rowCount];break;default:l.raw=a.rows}if(!n)return l.raw}return l}catch(r){throw this.driver.connection.logger.logQueryError(r,e,t,this),new eR(e,t,r)}}async stream(e,t,n,i){const r=this.driver.loadStreamDependency();if(this.isReleased)throw new rR;const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const o=a.query(new r(e,t));return n&&o.on("end",n),i&&o.on("error",i),o}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){return!!(await this.query(`SELECT * FROM pg_database WHERE datname='${e}';`)).length}async getCurrentDatabase(){return(await this.query("SELECT * FROM current_database()"))[0].current_database}async hasSchema(e){return!!(await this.query(`SELECT * FROM "information_schema"."schemata" WHERE "schema_name" = '${e}'`)).length}async getCurrentSchema(){return(await this.query("SELECT * FROM current_schema()"))[0].current_schema}async hasTable(e){const t=this.driver.parseTableName(e);t.schema||(t.schema=await this.getCurrentSchema());const n=`SELECT * FROM "information_schema"."tables" WHERE "table_schema" = '${t.schema}' AND "table_name" = '${t.tableName}'`;return!!(await this.query(n)).length}async hasColumn(e,t){const n=this.driver.parseTableName(e);n.schema||(n.schema=await this.getCurrentSchema());const i=`SELECT * FROM "information_schema"."columns" WHERE "table_schema" = '${n.schema}' AND "table_name" = '${n.tableName}' AND "column_name" = '${t}'`;return!!(await this.query(i)).length}async createDatabase(e,t){if(t){if(await this.hasDatabase(e))return Promise.resolve()}const n=`CREATE DATABASE "${e}"`,i=`DROP DATABASE "${e}"`;await this.executeQueries(new RP(n),new RP(i))}async dropDatabase(e,t){const n=t?`DROP DATABASE IF EXISTS "${e}"`:`DROP DATABASE "${e}"`,i=`CREATE DATABASE "${e}"`;await this.executeQueries(new RP(n),new RP(i))}async createSchema(e,t){const n=-1===e.indexOf(".")?e:e.split(".")[1],i=t?`CREATE SCHEMA IF NOT EXISTS "${n}"`:`CREATE SCHEMA "${n}"`,r=`DROP SCHEMA "${n}" CASCADE`;await this.executeQueries(new RP(i),new RP(r))}async dropSchema(e,t,n){const i=-1===e.indexOf(".")?e:e.split(".")[1],r=t?`DROP SCHEMA IF EXISTS "${i}" ${n?"CASCADE":""}`:`DROP SCHEMA "${i}" ${n?"CASCADE":""}`,a=`CREATE SCHEMA "${i}"`;await this.executeQueries(new RP(r),new RP(a))}async createTable(e,t=!1,n=!0,i=!0){if(t){if(await this.hasTable(e))return Promise.resolve()}const r=[],a=[],o=e.columns.filter((e=>"enum"===e.type||"simple-enum"===e.type)),s=[];for(const c of o){const t=await this.hasEnumType(e,c),n=this.buildEnumName(e,c);t||-1!==s.indexOf(n)||(s.push(n),r.push(this.createEnumTypeSql(e,c,n)),a.push(this.dropEnumTypeSql(e,c,n)))}const l=e.columns.filter((e=>"STORED"===e.generatedType&&e.asExpression));for(const c of l){const t=(await this.getTableNameWithSchema(e.name)).split("."),n=t[1],i=t[0],o=this.insertTypeormMetadataSql({database:this.driver.database,schema:i,table:n,type:nP.GENERATED_COLUMN,name:c.name,value:c.asExpression}),s=this.deleteTypeormMetadataSql({database:this.driver.database,schema:i,table:n,type:nP.GENERATED_COLUMN,name:c.name});r.push(o),a.push(s)}r.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),n&&e.foreignKeys.forEach((t=>a.push(this.dropForeignKeySql(e,t)))),i&&e.indices.forEach((t=>{t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where)),r.push(this.createIndexSql(e,t)),a.push(this.dropIndexSql(e,t))})),await this.executeQueries(r,a)}async dropTable(e,t,n=!0,i=!0){if(t){if(!(await this.hasTable(e)))return Promise.resolve()}const r=n,a=this.getTablePath(e),o=await this.getCachedTable(a),s=[],l=[];i&&o.indices.forEach((e=>{s.push(this.dropIndexSql(o,e)),l.push(this.createIndexSql(o,e))})),n&&o.foreignKeys.forEach((e=>s.push(this.dropForeignKeySql(o,e)))),s.push(this.dropTableSql(o)),l.push(this.createTableSql(o,r));const c=o.columns.filter((e=>e.generatedType&&e.asExpression));for(const u of c){const e=(await this.getTableNameWithSchema(o.name)).split("."),t=e[1],n=e[0],i=this.deleteTypeormMetadataSql({database:this.driver.database,schema:n,table:t,type:nP.GENERATED_COLUMN,name:u.name}),r=this.insertTypeormMetadataSql({database:this.driver.database,schema:n,table:t,type:nP.GENERATED_COLUMN,name:u.name,value:u.asExpression});s.push(i),l.push(r)}await this.executeQueries(s,l)}async createView(e,t=!1){const n=[],i=[];n.push(this.createViewSql(e)),t&&n.push(await this.insertViewDefinitionSql(e)),i.push(this.dropViewSql(e)),t&&i.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(n,i)}async dropView(e){const t=PO.isView(e)?e.name:e,n=await this.getCachedView(t),i=[],r=[];i.push(await this.deleteViewDefinitionSql(n)),i.push(this.dropViewSql(n)),r.push(await this.insertViewDefinitionSql(n)),r.push(this.createViewSql(n)),await this.executeQueries(i,r)}async renameTable(e,t){const n=[],i=[],r=PO.isTable(e)?e:await this.getCachedTable(e),a=r.clone(),{schema:o,tableName:s}=this.driver.parseTableName(r);if(a.name=o?`${o}.${t}`:t,n.push(new RP(`ALTER TABLE ${this.escapePath(r)} RENAME TO "${t}"`)),i.push(new RP(`ALTER TABLE ${this.escapePath(a)} RENAME TO "${s}"`)),a.primaryColumns.length>0&&!a.primaryColumns[0].primaryKeyConstraintName){const e=a.primaryColumns.map((e=>e.name)),t=this.connection.namingStrategy.primaryKeyName(r,e),o=this.connection.namingStrategy.primaryKeyName(a,e);n.push(new RP(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${t}" TO "${o}"`)),i.push(new RP(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${o}" TO "${t}"`))}a.columns.map((e=>{if(e.isGenerated&&"increment"===e.generationStrategy){const t=this.buildSequencePath(r,e.name),o=this.buildSequenceName(r,e.name),s=this.buildSequencePath(a,e.name),l=this.buildSequenceName(a,e.name),c=`ALTER SEQUENCE ${this.escapePath(t)} RENAME TO "${l}"`,u=`ALTER SEQUENCE ${this.escapePath(s)} RENAME TO "${o}"`;n.push(new RP(c)),i.push(new RP(u))}})),a.uniques.forEach((e=>{const t=this.connection.namingStrategy.uniqueConstraintName(r,e.columnNames);if(e.name!==t)return;const o=this.connection.namingStrategy.uniqueConstraintName(a,e.columnNames);n.push(new RP(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${e.name}" TO "${o}"`)),i.push(new RP(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${o}" TO "${e.name}"`)),e.name=o})),a.indices.forEach((e=>{const t=this.connection.namingStrategy.indexName(r,e.columnNames,e.where);if(e.name!==t)return;const{schema:o}=this.driver.parseTableName(a),s=this.connection.namingStrategy.indexName(a,e.columnNames,e.where),l=o?`ALTER INDEX "${o}"."${e.name}" RENAME TO "${s}"`:`ALTER INDEX "${e.name}" RENAME TO "${s}"`,c=o?`ALTER INDEX "${o}"."${s}" RENAME TO "${e.name}"`:`ALTER INDEX "${s}" RENAME TO "${e.name}"`;n.push(new RP(l)),i.push(new RP(c)),e.name=s})),a.foreignKeys.forEach((e=>{const t=this.connection.namingStrategy.foreignKeyName(r,e.columnNames,this.getTablePath(e),e.referencedColumnNames);if(e.name!==t)return;const o=this.connection.namingStrategy.foreignKeyName(a,e.columnNames,this.getTablePath(e),e.referencedColumnNames);n.push(new RP(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${e.name}" TO "${o}"`)),i.push(new RP(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${o}" TO "${e.name}"`)),e.name=o}));const l=a.columns.filter((e=>"enum"===e.type||"simple-enum"===e.type));for(let c of l){if(c.enumName)continue;const e=await this.getUserDefinedTypeName(r,c);n.push(new RP(`ALTER TYPE "${e.schema}"."${e.name}" RENAME TO ${this.buildEnumName(a,c,!1)}`)),i.push(new RP(`ALTER TYPE ${this.buildEnumName(a,c)} RENAME TO "${e.name}"`))}await this.executeQueries(n,i)}async addColumn(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=n.clone(),r=[],a=[];if("enum"===t.type||"simple-enum"===t.type){await this.hasEnumType(n,t)||(r.push(this.createEnumTypeSql(n,t)),a.push(this.dropEnumTypeSql(n,t)))}if(r.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(n,t)}`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN "${t.name}"`)),t.isPrimary){const e=i.primaryColumns;if(e.length>0){const t=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(i,e.map((e=>e.name))),o=e.map((e=>`"${e.name}"`)).join(", ");r.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP CONSTRAINT "${t}"`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD CONSTRAINT "${t}" PRIMARY KEY (${o})`))}e.push(t);const o=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(i,e.map((e=>e.name))),s=e.map((e=>`"${e.name}"`)).join(", ");r.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD CONSTRAINT "${o}" PRIMARY KEY (${s})`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP CONSTRAINT "${o}"`))}const o=i.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===t.name));if(o&&(r.push(this.createIndexSql(n,o)),a.push(this.dropIndexSql(n,o))),t.isUnique){const e=new pR({name:this.connection.namingStrategy.uniqueConstraintName(n,[t.name]),columnNames:[t.name]});i.uniques.push(e),r.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD CONSTRAINT "${e.name}" UNIQUE ("${t.name}")`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP CONSTRAINT "${e.name}"`))}if("STORED"===t.generatedType&&t.asExpression){const e=(await this.getTableNameWithSchema(n.name)).split("."),i=e[1],o=e[0],s=this.insertTypeormMetadataSql({database:this.driver.database,schema:o,table:i,type:nP.GENERATED_COLUMN,name:t.name,value:t.asExpression}),l=this.deleteTypeormMetadataSql({database:this.driver.database,schema:o,table:i,type:nP.GENERATED_COLUMN,name:t.name});r.push(s),a.push(l)}t.comment&&(r.push(new RP(`COMMENT ON COLUMN ${this.escapePath(n)}."${t.name}" IS ${this.escapeComment(t.comment)}`)),a.push(new RP(`COMMENT ON COLUMN ${this.escapePath(n)}."${t.name}" IS ${this.escapeComment(t.comment)}`))),await this.executeQueries(r,a),i.addColumn(t),this.replaceCachedTable(n,i)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const i=PO.isTable(e)?e:await this.getCachedTable(e),r=PO.isTableColumn(t)?t:i.columns.find((e=>e.name===t));if(!r)throw new EO(`Column "${t}" was not found in the "${i.name}" table.`);let a;return PO.isTableColumn(n)?a=n:(a=r.clone(),a.name=n),this.changeColumn(i,r,a)}async changeColumn(e,t,n){const i=PO.isTable(e)?e:await this.getCachedTable(e);let r=i.clone();const a=[],o=[];let s=!1;const l=PO.isTableColumn(t)?t:i.columns.find((e=>e.name===t));if(!l)throw new EO(`Column "${t}" was not found in the "${i.name}" table.`);if(l.type!==n.type||l.length!==n.length||n.isArray!==l.isArray||!l.generatedType&&"STORED"===n.generatedType||l.asExpression!==n.asExpression&&"STORED"===n.generatedType)await this.dropColumn(i,l),await this.addColumn(i,n),r=i.clone();else{if(l.name!==n.name){if(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME COLUMN "${l.name}" TO "${n.name}"`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME COLUMN "${n.name}" TO "${l.name}"`)),"enum"===l.type||"simple-enum"===l.type){const e=await this.getUserDefinedTypeName(i,l);a.push(new RP(`ALTER TYPE "${e.schema}"."${e.name}" RENAME TO ${this.buildEnumName(i,n,!1)}`)),o.push(new RP(`ALTER TYPE ${this.buildEnumName(i,n)} RENAME TO "${e.name}"`))}if(!0===l.isPrimary&&!l.primaryKeyConstraintName){const e=r.primaryColumns.map((e=>e.name)),t=this.connection.namingStrategy.primaryKeyName(r,e);e.splice(e.indexOf(l.name),1),e.push(n.name);const s=this.connection.namingStrategy.primaryKeyName(r,e);a.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME CONSTRAINT "${t}" TO "${s}"`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME CONSTRAINT "${s}" TO "${t}"`))}if(!0===l.isGenerated&&"increment"===n.generationStrategy){const e=this.buildSequencePath(i,l.name),t=this.buildSequenceName(i,l.name),r=this.buildSequencePath(i,n.name),s=this.buildSequenceName(i,n.name),c=`ALTER SEQUENCE ${this.escapePath(e)} RENAME TO "${s}"`,u=`ALTER SEQUENCE ${this.escapePath(r)} RENAME TO "${t}"`;a.push(new RP(c)),o.push(new RP(u))}r.findColumnUniques(l).forEach((e=>{const t=this.connection.namingStrategy.uniqueConstraintName(r,e.columnNames);if(e.name!==t)return;e.columnNames.splice(e.columnNames.indexOf(l.name),1),e.columnNames.push(n.name);const s=this.connection.namingStrategy.uniqueConstraintName(r,e.columnNames);a.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME CONSTRAINT "${e.name}" TO "${s}"`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME CONSTRAINT "${s}" TO "${e.name}"`)),e.name=s})),r.findColumnIndices(l).forEach((e=>{const t=this.connection.namingStrategy.indexName(r,e.columnNames,e.where);if(e.name!==t)return;e.columnNames.splice(e.columnNames.indexOf(l.name),1),e.columnNames.push(n.name);const{schema:s}=this.driver.parseTableName(i),c=this.connection.namingStrategy.indexName(r,e.columnNames,e.where),u=s?`ALTER INDEX "${s}"."${e.name}" RENAME TO "${c}"`:`ALTER INDEX "${e.name}" RENAME TO "${c}"`,d=s?`ALTER INDEX "${s}"."${c}" RENAME TO "${e.name}"`:`ALTER INDEX "${c}" RENAME TO "${e.name}"`;a.push(new RP(u)),o.push(new RP(d)),e.name=c})),r.findColumnForeignKeys(l).forEach((e=>{const t=this.connection.namingStrategy.foreignKeyName(r,e.columnNames,this.getTablePath(e),e.referencedColumnNames);if(e.name!==t)return;e.columnNames.splice(e.columnNames.indexOf(l.name),1),e.columnNames.push(n.name);const s=this.connection.namingStrategy.foreignKeyName(r,e.columnNames,this.getTablePath(e),e.referencedColumnNames);a.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME CONSTRAINT "${e.name}" TO "${s}"`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME CONSTRAINT "${s}" TO "${e.name}"`)),e.name=s}));const e=r.columns.find((e=>e.name===l.name));r.columns[r.columns.indexOf(e)].name=n.name,l.name=n.name}if(n.precision===l.precision&&n.scale===l.scale||(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(n)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(l)}`))),!("enum"!==n.type&&"simple-enum"!==n.type||"enum"!==l.type&&"simple-enum"!==l.type||oP.isArraysEqual(n.enum,l.enum)&&n.enumName===l.enumName)){const e=n.isArray?"[]":"",t=this.buildEnumName(i,n),r=this.buildEnumName(i,l),c=this.buildEnumName(i,l,!1),u=this.buildEnumName(i,l,!0,!1,!0),d=this.buildEnumName(i,l,!1,!1,!0);a.push(new RP(`ALTER TYPE ${r} RENAME TO ${d}`)),o.push(new RP(`ALTER TYPE ${u} RENAME TO ${c}`)),a.push(this.createEnumTypeSql(i,n,t)),o.push(this.dropEnumTypeSql(i,n,t)),null!==l.default&&void 0!==l.default&&(s=!0,a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${l.name}" DROP DEFAULT`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${l.name}" SET DEFAULT ${l.default}`)));const h=`${t}${e} USING "${n.name}"::"text"::${t}${e}`,p=`${u}${e} USING "${n.name}"::"text"::${u}${e}`;a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" TYPE ${h}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" TYPE ${p}`)),null!==n.default&&void 0!==n.default&&(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT ${n.default}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" DROP DEFAULT`))),a.push(this.dropEnumTypeSql(i,l,u)),o.push(this.createEnumTypeSql(i,l,u))}if(l.isNullable!==n.isNullable&&(n.isNullable?(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${l.name}" DROP NOT NULL`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${l.name}" SET NOT NULL`))):(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${l.name}" SET NOT NULL`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${l.name}" DROP NOT NULL`)))),l.comment!==n.comment&&(a.push(new RP(`COMMENT ON COLUMN ${this.escapePath(i)}."${l.name}" IS ${this.escapeComment(n.comment)}`)),o.push(new RP(`COMMENT ON COLUMN ${this.escapePath(i)}."${n.name}" IS ${this.escapeComment(l.comment)}`))),n.isPrimary!==l.isPrimary){const e=r.primaryColumns;if(e.length>0){const t=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,e.map((e=>e.name))),n=e.map((e=>`"${e.name}"`)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${t}"`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${t}" PRIMARY KEY (${n})`))}if(!0===n.isPrimary){e.push(n);r.columns.find((e=>e.name===n.name)).isPrimary=!0;const t=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,e.map((e=>e.name))),s=e.map((e=>`"${e.name}"`)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${t}" PRIMARY KEY (${s})`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${t}"`))}else{const t=e.find((e=>e.name===n.name));e.splice(e.indexOf(t),1);if(r.columns.find((e=>e.name===n.name)).isPrimary=!1,e.length>0){const t=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,e.map((e=>e.name))),n=e.map((e=>`"${e.name}"`)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${t}" PRIMARY KEY (${n})`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${t}"`))}}}if(n.isUnique!==l.isUnique)if(!0===n.isUnique){const e=new pR({name:this.connection.namingStrategy.uniqueConstraintName(i,[n.name]),columnNames:[n.name]});r.uniques.push(e),a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${e.name}" UNIQUE ("${n.name}")`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${e.name}"`))}else{const e=r.uniques.find((e=>1===e.columnNames.length&&!!e.columnNames.find((e=>e===n.name))));r.uniques.splice(r.uniques.indexOf(e),1),a.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${e.name}"`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${e.name}" UNIQUE ("${n.name}")`))}if(l.isGenerated!==n.isGenerated&&(l.isGenerated&&("uuid"===l.generationStrategy?(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${l.name}" DROP DEFAULT`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${l.name}" SET DEFAULT ${this.driver.uuidGenerator}`))):"increment"===l.generationStrategy&&(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" DROP DEFAULT`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT nextval('${this.escapePath(this.buildSequencePath(i,n))}')`)),a.push(new RP(`DROP SEQUENCE ${this.escapePath(this.buildSequencePath(i,n))}`)),o.push(new RP(`CREATE SEQUENCE IF NOT EXISTS ${this.escapePath(this.buildSequencePath(i,n))} OWNED BY ${this.escapePath(i)}."${n.name}"`)))),"uuid"===n.generationStrategy?!0===n.isGenerated?(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT ${this.driver.uuidGenerator}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" DROP DEFAULT`))):(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" DROP DEFAULT`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT ${this.driver.uuidGenerator}`))):"increment"===n.generationStrategy&&(!0===n.isGenerated?(a.push(new RP(`CREATE SEQUENCE IF NOT EXISTS ${this.escapePath(this.buildSequencePath(i,n))} OWNED BY ${this.escapePath(i)}."${n.name}"`)),o.push(new RP(`DROP SEQUENCE ${this.escapePath(this.buildSequencePath(i,n))}`)),a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT nextval('${this.escapePath(this.buildSequencePath(i,n))}')`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" DROP DEFAULT`))):(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" DROP DEFAULT`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT nextval('${this.escapePath(this.buildSequencePath(i,n))}')`)),a.push(new RP(`DROP SEQUENCE ${this.escapePath(this.buildSequencePath(i,n))}`)),o.push(new RP(`CREATE SEQUENCE IF NOT EXISTS ${this.escapePath(this.buildSequencePath(i,n))} OWNED BY ${this.escapePath(i)}."${n.name}"`))))),n.default===l.default||s||(null!==n.default&&void 0!==n.default?(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT ${n.default}`)),null!==l.default&&void 0!==l.default?o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT ${l.default}`)):o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" DROP DEFAULT`))):null!==l.default&&void 0!==l.default&&(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" DROP DEFAULT`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" SET DEFAULT ${l.default}`)))),(n.spatialFeatureType||"").toLowerCase()===(l.spatialFeatureType||"").toLowerCase()&&n.srid===l.srid||(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(n)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(l)}`))),n.generatedType!==l.generatedType&&(!n.generatedType||"VIRTUAL"===n.generatedType)){const e=(await this.getTableNameWithSchema(i.name)).split("."),t=e[1],r=e[0];a.push(new RP(`ALTER TABLE ${this.escapePath(i)} RENAME COLUMN "${l.name}" TO "TEMP_OLD_${l.name}"`)),a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD ${this.buildCreateColumnSql(i,n)}`)),a.push(new RP(`UPDATE ${this.escapePath(i)} SET "${n.name}" = "TEMP_OLD_${l.name}"`)),a.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP COLUMN "TEMP_OLD_${l.name}"`)),a.push(this.deleteTypeormMetadataSql({database:this.driver.database,schema:r,table:t,type:nP.GENERATED_COLUMN,name:l.name})),o.push(this.insertTypeormMetadataSql({database:this.driver.database,schema:r,table:t,type:nP.GENERATED_COLUMN,name:l.name,value:l.asExpression})),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD ${this.buildCreateColumnSql(i,l)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP COLUMN "${n.name}"`))}}await this.executeQueries(a,o),this.replaceCachedTable(i,r)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:i}of t)await this.changeColumn(e,n,i)}async dropColumn(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableColumn(t)?t:n.findColumnByName(t);if(!i)throw new EO(`Column "${t}" was not found in table "${n.name}"`);const r=n.clone(),a=[],o=[];if(i.isPrimary){const e=i.primaryKeyConstraintName?i.primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,r.primaryColumns.map((e=>e.name))),t=r.primaryColumns.map((e=>`"${e.name}"`)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(r)} DROP CONSTRAINT "${e}"`)),o.push(new RP(`ALTER TABLE ${this.escapePath(r)} ADD CONSTRAINT "${e}" PRIMARY KEY (${t})`));if(r.findColumnByName(i.name).isPrimary=!1,r.primaryColumns.length>0){const e=r.primaryColumns[0].primaryKeyConstraintName?r.primaryColumns[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,r.primaryColumns.map((e=>e.name))),t=r.primaryColumns.map((e=>`"${e.name}"`)).join(", ");a.push(new RP(`ALTER TABLE ${this.escapePath(r)} ADD CONSTRAINT "${e}" PRIMARY KEY (${t})`)),o.push(new RP(`ALTER TABLE ${this.escapePath(r)} DROP CONSTRAINT "${e}"`))}}const s=r.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===i.name));s&&(r.indices.splice(r.indices.indexOf(s),1),a.push(this.dropIndexSql(n,s)),o.push(this.createIndexSql(n,s)));const l=r.checks.find((e=>!!e.columnNames&&1===e.columnNames.length&&e.columnNames[0]===i.name));l&&(r.checks.splice(r.checks.indexOf(l),1),a.push(this.dropCheckConstraintSql(n,l)),o.push(this.createCheckConstraintSql(n,l)));const c=r.uniques.find((e=>1===e.columnNames.length&&e.columnNames[0]===i.name));if(c&&(r.uniques.splice(r.uniques.indexOf(c),1),a.push(this.dropUniqueConstraintSql(n,c)),o.push(this.createUniqueConstraintSql(n,c))),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN "${i.name}"`)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(n,i)}`)),"enum"===i.type||"simple-enum"===i.type){if(await this.hasEnumType(n,i)){const e=await this.getUserDefinedTypeName(n,i),t=`"${e.schema}"."${e.name}"`;a.push(this.dropEnumTypeSql(n,i,t)),o.push(this.createEnumTypeSql(n,i,t))}}if("STORED"===i.generatedType){const e=(await this.getTableNameWithSchema(n.name)).split("."),t=e[1],r=e[0],s=this.deleteTypeormMetadataSql({database:this.driver.database,schema:r,table:t,type:nP.GENERATED_COLUMN,name:i.name}),l=this.insertTypeormMetadataSql({database:this.driver.database,schema:r,table:t,type:nP.GENERATED_COLUMN,name:i.name,value:i.asExpression});a.push(s),o.push(l)}await this.executeQueries(a,o),r.removeColumn(i),this.replaceCachedTable(n,r)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t,n){const i=PO.isTable(e)?e:await this.getCachedTable(e),r=i.clone(),a=this.createPrimaryKeySql(i,t,n);r.columns.forEach((e=>{t.find((t=>t===e.name))&&(e.isPrimary=!0)}));const o=this.dropPrimaryKeySql(r);await this.executeQueries(a,o),this.replaceCachedTable(i,r)}async updatePrimaryKeys(e,t){var n;const i=PO.isTable(e)?e:await this.getCachedTable(e),r=i.clone(),a=t.map((e=>e.name)),o=[],s=[],l=r.primaryColumns;if(l.length>0){const e=l[0].primaryKeyConstraintName?l[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,l.map((e=>e.name))),t=l.map((e=>`"${e.name}"`)).join(", ");o.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${e}"`)),s.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${e}" PRIMARY KEY (${t})`))}r.columns.filter((e=>-1!==a.indexOf(e.name))).forEach((e=>e.isPrimary=!0));const c=(null===(n=l[0])||void 0===n?void 0:n.primaryKeyConstraintName)?l[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,a),u=a.map((e=>`"${e}"`)).join(", ");o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${c}" PRIMARY KEY (${u})`)),s.push(new RP(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${c}"`)),await this.executeQueries(o,s),this.replaceCachedTable(i,r)}async dropPrimaryKey(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=this.dropPrimaryKeySql(n),r=this.createPrimaryKeySql(n,n.primaryColumns.map((e=>e.name)),t);await this.executeQueries(i,r),n.primaryColumns.forEach((e=>{e.isPrimary=!1}))}async createUniqueConstraint(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.uniqueConstraintName(n,t.columnNames));const i=this.createUniqueConstraintSql(n,t),r=this.dropUniqueConstraintSql(n,t);await this.executeQueries(i,r),n.addUniqueConstraint(t)}async createUniqueConstraints(e,t){for(const n of t)await this.createUniqueConstraint(e,n)}async dropUniqueConstraint(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableUnique(t)?t:n.uniques.find((e=>e.name===t));if(!i)throw new EO(`Supplied unique constraint was not found in table ${n.name}`);const r=this.dropUniqueConstraintSql(n,i),a=this.createUniqueConstraintSql(n,i);await this.executeQueries(r,a),n.removeUniqueConstraint(i)}async dropUniqueConstraints(e,t){for(const n of t)await this.dropUniqueConstraint(e,n)}async createCheckConstraint(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.checkConstraintName(n,t.expression));const i=this.createCheckConstraintSql(n,t),r=this.dropCheckConstraintSql(n,t);await this.executeQueries(i,r),n.addCheckConstraint(t)}async createCheckConstraints(e,t){const n=t.map((t=>this.createCheckConstraint(e,t)));await Promise.all(n)}async dropCheckConstraint(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableCheck(t)?t:n.checks.find((e=>e.name===t));if(!i)throw new EO(`Supplied check constraint was not found in table ${n.name}`);const r=this.dropCheckConstraintSql(n,i),a=this.createCheckConstraintSql(n,i);await this.executeQueries(r,a),n.removeCheckConstraint(i)}async dropCheckConstraints(e,t){const n=t.map((t=>this.dropCheckConstraint(e,t)));await Promise.all(n)}async createExclusionConstraint(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.exclusionConstraintName(n,t.expression));const i=this.createExclusionConstraintSql(n,t),r=this.dropExclusionConstraintSql(n,t);await this.executeQueries(i,r),n.addExclusionConstraint(t)}async createExclusionConstraints(e,t){const n=t.map((t=>this.createExclusionConstraint(e,t)));await Promise.all(n)}async dropExclusionConstraint(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableExclusion(t)?t:n.exclusions.find((e=>e.name===t));if(!i)throw new EO(`Supplied exclusion constraint was not found in table ${n.name}`);const r=this.dropExclusionConstraintSql(n,i),a=this.createExclusionConstraintSql(n,i);await this.executeQueries(r,a),n.removeExclusionConstraint(i)}async dropExclusionConstraints(e,t){const n=t.map((t=>this.dropExclusionConstraint(e,t)));await Promise.all(n)}async createForeignKey(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const i=this.createForeignKeySql(n,t),r=this.dropForeignKeySql(n,t);await this.executeQueries(i,r),n.addForeignKey(t)}async createForeignKeys(e,t){for(const n of t)await this.createForeignKey(e,n)}async dropForeignKey(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableForeignKey(t)?t:n.foreignKeys.find((e=>e.name===t));if(!i)throw new EO(`Supplied foreign key was not found in table ${n.name}`);i.name||(i.name=this.connection.namingStrategy.foreignKeyName(n,i.columnNames,this.getTablePath(i),i.referencedColumnNames));const r=this.dropForeignKeySql(n,i),a=this.createForeignKeySql(n,i);await this.executeQueries(r,a),n.removeForeignKey(i)}async dropForeignKeys(e,t){for(const n of t)await this.dropForeignKey(e,n)}async createIndex(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const i=this.createIndexSql(n,t),r=this.dropIndexSql(n,t);await this.executeQueries(i,r),n.addIndex(t)}async createViewIndex(e,t){const n=PO.isView(e)?e:await this.getCachedView(e);t.name||(t.name=this.generateIndexName(n,t));const i=this.createViewIndexSql(n,t),r=this.dropIndexSql(n,t);await this.executeQueries(i,r),n.addIndex(t)}async createIndices(e,t){for(const n of t)await this.createIndex(e,n)}async createViewIndices(e,t){for(const n of t)await this.createViewIndex(e,n)}async dropIndex(e,t){const n=PO.isTable(e)?e:await this.getCachedTable(e),i=PO.isTableIndex(t)?t:n.indices.find((e=>e.name===t));if(!i)throw new EO(`Supplied index ${t} was not found in table ${n.name}`);i.name||(i.name=this.generateIndexName(n,i));const r=this.dropIndexSql(n,i),a=this.createIndexSql(n,i);await this.executeQueries(r,a),n.removeIndex(i)}async dropViewIndex(e,t){const n=PO.isView(e)?e:await this.getCachedView(e),i=PO.isTableIndex(t)?t:n.indices.find((e=>e.name===t));if(!i)throw new EO(`Supplied index ${t} was not found in view ${n.name}`);i.name||(i.name=this.generateIndexName(n,i));const r=this.dropIndexSql(n,i),a=this.createViewIndexSql(n,i);await this.executeQueries(r,a),n.removeIndex(i)}async dropIndices(e,t){for(const n of t)await this.dropIndex(e,n)}async clearTable(e){await this.query(`TRUNCATE TABLE ${this.escapePath(e)}`)}async clearDatabase(){const e=[];this.connection.entityMetadatas.filter((e=>e.schema)).forEach((t=>{!!e.find((e=>e===t.schema))||e.push(t.schema)})),e.push(this.driver.options.schema||"current_schema()");const t=e.map((e=>"current_schema()"===e?e:"'"+e+"'")).join(", "),n=this.isTransactionActive;n||await this.startTransaction();try{const e=await this.getVersion(),i=`SELECT 'DROP VIEW IF EXISTS "' || schemaname || '"."' || viewname || '" CASCADE;' as "query" FROM "pg_views" WHERE "schemaname" IN (${t}) AND "viewname" NOT IN ('geography_columns', 'geometry_columns', 'raster_columns', 'raster_overviews')`,r=await this.query(i);if(await Promise.all(r.map((e=>this.query(e.query)))),xR.isGreaterOrEqual(e,"9.3")){const e=`SELECT 'DROP MATERIALIZED VIEW IF EXISTS "' || schemaname || '"."' || matviewname || '" CASCADE;' as "query" FROM "pg_matviews" WHERE "schemaname" IN (${t})`,n=await this.query(e);await Promise.all(n.map((e=>this.query(e.query))))}const a=`SELECT 'DROP TABLE IF EXISTS "' || schemaname || '"."' || tablename || '" CASCADE;' as "query" FROM "pg_tables" WHERE "schemaname" IN (${t}) AND "tablename" NOT IN ('spatial_ref_sys')`,o=await this.query(a);await Promise.all(o.map((e=>this.query(e.query)))),await this.dropEnumTypes(t),n||await this.commitTransaction()}catch(i){try{n||await this.rollbackTransaction()}catch(r){}throw i}}async loadViews(e){if(!(await this.hasTable(this.getTypeormMetadataTableName())))return[];e||(e=[]);const t=await this.getCurrentDatabase(),n=await this.getCurrentSchema(),i=0===e.length?"1=1":e.map((e=>this.driver.parseTableName(e))).map((({schema:e,tableName:t})=>(e||(e=this.driver.options.schema||n),`("t"."schema" = '${e}' AND "t"."name" = '${t}')`))).join(" OR "),r=`SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('m') AND "cnst"."contype" IS NULL AND (${0===e.length?"1=1":e.map((e=>this.driver.parseTableName(e))).map((({schema:e,tableName:t})=>(e||(e=this.driver.options.schema||n),`("ns"."nspname" = '${e}' AND "t"."relname" = '${t}')`))).join(" OR ")})`,a=`SELECT "t".* FROM ${this.escapePath(this.getTypeormMetadataTableName())} "t" INNER JOIN "pg_catalog"."pg_class" "c" ON "c"."relname" = "t"."name" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "c"."relnamespace" AND "n"."nspname" = "t"."schema" WHERE "t"."type" IN ('${nP.VIEW}', '${nP.MATERIALIZED_VIEW}') ${i?`AND (${i})`:""}`,o=await this.query(a),s=await this.query(r);return o.map((e=>{const i=oP.uniq(s.filter((t=>t.table_name===e.name&&t.table_schema===e.schema)),(e=>e.constraint_name)),r=new kP,a=e.schema!==n||this.driver.options.schema?e.schema:void 0;return r.database=t,r.schema=e.schema,r.name=this.driver.buildTableName(e.name,a),r.expression=e.value,r.materialized=e.type===nP.MATERIALIZED_VIEW,r.indices=i.map((e=>{const t=s.filter((t=>t.table_schema===e.table_schema&&t.table_name===e.table_name&&t.constraint_name===e.constraint_name));return new uR({view:r,name:e.constraint_name,columnNames:t.map((e=>e.column_name)),isUnique:"TRUE"===e.is_unique,where:e.condition,isFulltext:!1})})),r}))}async loadTables(e){if(e&&0===e.length)return[];const t=await this.getCurrentSchema(),n=await this.getCurrentDatabase(),i=[];if(e){const n='SELECT "table_schema", "table_name" FROM "information_schema"."tables" WHERE '+e.map((e=>this.driver.parseTableName(e))).map((({schema:e,tableName:n})=>`("table_schema" = '${e||t}' AND "table_name" = '${n}')`)).join(" OR ");i.push(...await this.query(n))}else{const e='SELECT "table_schema", "table_name" FROM "information_schema"."tables"';i.push(...await this.query(e))}if(0===i.length)return[];const r='SELECT columns.*, pg_catalog.col_description((\'"\' || table_catalog || \'"."\' || table_schema || \'"."\' || table_name || \'"\')::regclass::oid, ordinal_position) AS description, (\'"\' || "udt_schema" || \'"."\' || "udt_name" || \'"\')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE '+i.map((({table_schema:e,table_name:t})=>`("table_schema" = '${e}' AND "table_name" = '${t}')`)).join(" OR "),a=i.map((({table_schema:e,table_name:t})=>`("ns"."nspname" = '${e}' AND "t"."relname" = '${t}')`)).join(" OR "),o=`SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (${a})`,s=`SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (${a})`,l=`SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (${i.map((({table_schema:e,table_name:t})=>`("ns"."nspname" = '${e}' AND "cl"."relname" = '${t}')`)).join(" OR ")}) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid" ${await this.hasSupportForPartitionedTables()?' AND "cl"."relispartition" = \'f\'':""}INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"`,[c,u,d,h]=await Promise.all([this.query(r),this.query(o),this.query(s),this.query(l)]);return Promise.all(i.map((async e=>{const i=new gR,r=(e,n)=>e[n]!==t||this.driver.options.schema&&this.driver.options.schema!==t?e[n]:void 0,a=r(e,"table_schema");i.database=n,i.schema=e.table_schema,i.name=this.driver.buildTableName(e.table_name,a),i.columns=await Promise.all(c.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema)).map((async t=>{const r=u.filter((e=>e.table_name===t.table_name&&e.table_schema===t.table_schema&&e.column_name===t.column_name)),a=new cR;if(a.name=t.column_name,a.type=t.regtype.toLowerCase(),"numeric"!==a.type&&"decimal"!==a.type&&"float"!==a.type||(null===t.numeric_precision||this.isDefaultColumnPrecision(i,a,t.numeric_precision)?null===t.numeric_scale||this.isDefaultColumnScale(i,a,t.numeric_scale)||(a.precision=void 0):a.precision=t.numeric_precision,null===t.numeric_scale||this.isDefaultColumnScale(i,a,t.numeric_scale)?null===t.numeric_precision||this.isDefaultColumnPrecision(i,a,t.numeric_precision)||(a.scale=void 0):a.scale=t.numeric_scale),"interval"!==a.type&&"time without time zone"!==a.type&&"time with time zone"!==a.type&&"timestamp without time zone"!==a.type&&"timestamp with time zone"!==a.type||(a.precision=this.isDefaultColumnPrecision(i,a,t.datetime_precision)?void 0:t.datetime_precision),"USER-DEFINED"===t.data_type||"ARRAY"===t.data_type){const{name:n}=await this.getUserDefinedTypeName(i,a),r=this.buildEnumName(i,a,!1,!0)!==n?n:void 0,o=`SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = '${e.table_schema}' AND "t"."typname" = '${r||n}'`,s=await this.query(o);if(s.length&&(a.type="enum",a.enum=s.map((e=>e.value)),a.enumName=r),"ARRAY"===t.data_type){a.isArray=!0;const e=a.type.replace("[]","");a.type=this.connection.driver.normalizeType({type:e})}}if("geometry"===a.type||"geography"===a.type){const e=`SELECT * FROM (SELECT "f_table_schema" "table_schema", "f_table_name" "table_name", "f_${a.type}_column" "column_name", "srid", "type" FROM "${a.type}_columns") AS _ WHERE "column_name" = '${t.column_name}' AND "table_schema" = '${t.table_schema}' AND "table_name" = '${t.table_name}'`,n=await this.query(e);n.length>0&&(a.spatialFeatureType=n[0].type,a.srid=n[0].srid)}if(-1!==this.driver.withLengthColumnTypes.indexOf(a.type)){let e;if(a.isArray){const n=/\((\d+)\)/.exec(t.format_type);e=n?n[1]:void 0}else t.character_maximum_length&&(e=t.character_maximum_length.toString());e&&(a.length=this.isDefaultColumnLength(i,a,e)?"":e)}a.isNullable="YES"===t.is_nullable;const o=r.find((e=>"PRIMARY"===e.constraint_type));if(o){a.isPrimary=!0;const e=u.filter((e=>e.table_name===t.table_name&&e.table_schema===t.table_schema&&e.column_name!==t.column_name&&"PRIMARY"===e.constraint_type)).map((e=>e.column_name));e.push(t.column_name);const n=this.connection.namingStrategy.primaryKeyName(i,e);o.constraint_name!==n&&(a.primaryKeyConstraintName=o.constraint_name)}const s=r.filter((e=>"UNIQUE"===e.constraint_type)),l=s.every((e=>u.some((n=>"UNIQUE"===n.constraint_type&&n.constraint_name===e.constraint_name&&n.column_name!==t.column_name))));if(a.isUnique=s.length>0&&!l,"YES"===t.is_identity)a.isGenerated=!0,a.generationStrategy="identity",a.generatedIdentity=t.identity_generation;else if(null!==t.column_default&&void 0!==t.column_default){const e=`nextval('${this.buildSequenceName(i,t.column_name)}'::regclass)`,n=`nextval('${this.buildSequencePath(i,t.column_name)}'::regclass)`,r=t.column_default.replace(/"/g,"");r===e||r===n?(a.isGenerated=!0,a.generationStrategy="increment"):"gen_random_uuid()"===t.column_default||/^uuid_generate_v\d\(\)/.test(t.column_default)?"uuid"===a.type?(a.isGenerated=!0,a.generationStrategy="uuid"):a.default=t.column_default:"now()"===t.column_default||-1!==t.column_default.indexOf("'now'::text")?a.default=t.column_default:(a.default=t.column_default.replace(/::[\w\s.\[\]\-"]+/g,""),a.default=a.default.replace(/^(-?\d+)$/,"'$1'"))}if("ALWAYS"===t.is_generated&&t.generation_expression){a.generatedType="STORED";const t=await this.selectTypeormMetadataSql({database:n,schema:e.table_schema,table:e.table_name,type:nP.GENERATED_COLUMN,name:a.name}),i=await this.query(t.query,t.parameters);i[0]&&i[0].value?a.asExpression=i[0].value:a.asExpression=""}return a.comment=t.description?t.description:void 0,t.character_set_name&&(a.charset=t.character_set_name),t.collation_name&&(a.collation=t.collation_name),a})));const o=oP.uniq(u.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema&&"UNIQUE"===t.constraint_type)),(e=>e.constraint_name));i.uniques=o.map((e=>{const t=u.filter((t=>t.constraint_name===e.constraint_name));return new pR({name:e.constraint_name,columnNames:t.map((e=>e.column_name)),deferrable:e.deferrable?e.deferred:void 0})}));const s=oP.uniq(u.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema&&"CHECK"===t.constraint_type)),(e=>e.constraint_name));i.checks=s.map((e=>{const t=u.filter((t=>t.constraint_name===e.constraint_name));return new mR({name:e.constraint_name,columnNames:t.map((e=>e.column_name)),expression:e.expression.replace(/^\s*CHECK\s*\((.*)\)\s*$/i,"$1")})}));const l=oP.uniq(u.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema&&"EXCLUDE"===t.constraint_type)),(e=>e.constraint_name));i.exclusions=l.map((e=>new fR({name:e.constraint_name,expression:e.expression.substring(8)})));const p=oP.uniq(h.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema)),(e=>e.constraint_name));i.foreignKeys=p.map((e=>{const t=h.filter((t=>t.constraint_name===e.constraint_name)),n=r(e,"referenced_table_schema"),i=this.driver.buildTableName(e.referenced_table_name,n);return new dR({name:e.constraint_name,columnNames:t.map((e=>e.column_name)),referencedSchema:e.referenced_table_schema,referencedTableName:i,referencedColumnNames:t.map((e=>e.referenced_column_name)),onDelete:e.on_delete,onUpdate:e.on_update,deferrable:e.deferrable?e.deferred:void 0})}));const m=oP.uniq(d.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema)),(e=>e.constraint_name));return i.indices=m.map((e=>{const t=d.filter((t=>t.table_schema===e.table_schema&&t.table_name===e.table_name&&t.constraint_name===e.constraint_name));return new uR({table:i,name:e.constraint_name,columnNames:t.map((e=>e.column_name)),isUnique:"TRUE"===e.is_unique,where:e.condition,isSpatial:t.every((e=>this.driver.spatialTypes.indexOf(e.type_name)>=0)),isFulltext:!1})})),i})))}createTableSql(e,t){const n=e.columns.map((t=>this.buildCreateColumnSql(e,t))).join(", ");let i=`CREATE TABLE ${this.escapePath(e)} (${n}`;if(e.columns.filter((e=>e.isUnique)).forEach((t=>{e.uniques.some((e=>1===e.columnNames.length&&e.columnNames[0]===t.name))||e.uniques.push(new pR({name:this.connection.namingStrategy.uniqueConstraintName(e,[t.name]),columnNames:[t.name]}))})),e.uniques.length>0){const t=e.uniques.map((t=>{let n=`CONSTRAINT "${t.name?t.name:this.connection.namingStrategy.uniqueConstraintName(e,t.columnNames)}" UNIQUE (${t.columnNames.map((e=>`"${e}"`)).join(", ")})`;return t.deferrable&&(n+=` DEFERRABLE ${t.deferrable}`),n})).join(", ");i+=`, ${t}`}if(e.checks.length>0){const t=e.checks.map((t=>`CONSTRAINT "${t.name?t.name:this.connection.namingStrategy.checkConstraintName(e,t.expression)}" CHECK (${t.expression})`)).join(", ");i+=`, ${t}`}if(e.exclusions.length>0){const t=e.exclusions.map((t=>`CONSTRAINT "${t.name?t.name:this.connection.namingStrategy.exclusionConstraintName(e,t.expression)}" EXCLUDE ${t.expression}`)).join(", ");i+=`, ${t}`}if(e.foreignKeys.length>0&&t){const t=e.foreignKeys.map((t=>{const n=t.columnNames.map((e=>`"${e}"`)).join(", ");t.name||(t.name=this.connection.namingStrategy.foreignKeyName(e,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const i=t.referencedColumnNames.map((e=>`"${e}"`)).join(", ");let r=`CONSTRAINT "${t.name}" FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))} (${i})`;return t.onDelete&&(r+=` ON DELETE ${t.onDelete}`),t.onUpdate&&(r+=` ON UPDATE ${t.onUpdate}`),t.deferrable&&(r+=` DEFERRABLE ${t.deferrable}`),r})).join(", ");i+=`, ${t}`}const r=e.columns.filter((e=>e.isPrimary));if(r.length>0){const t=r[0].primaryKeyConstraintName?r[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(e,r.map((e=>e.name))),n=r.map((e=>`"${e.name}"`)).join(", ");i+=`, CONSTRAINT "${t}" PRIMARY KEY (${n})`}return i+=")",e.columns.filter((e=>e.comment)).forEach((t=>i+=`; COMMENT ON COLUMN ${this.escapePath(e)}."${t.name}" IS ${this.escapeComment(t.comment)}`)),new RP(i)}async getVersion(){return(await this.query("SELECT version()"))[0].version.replace(/^PostgreSQL ([\d\.]+) .*$/,"$1")}dropTableSql(e){return new RP(`DROP TABLE ${this.escapePath(e)}`)}createViewSql(e){const t=e.materialized?"MATERIALIZED ":"",n=this.escapePath(e);return"string"==typeof e.expression?new RP(`CREATE ${t}VIEW ${n} AS ${e.expression}`):new RP(`CREATE ${t}VIEW ${n} AS ${e.expression(this.connection).getQuery()}`)}async insertViewDefinitionSql(e){const t=await this.getCurrentSchema();let{schema:n,tableName:i}=this.driver.parseTableName(e);n||(n=t);const r=e.materialized?nP.MATERIALIZED_VIEW:nP.VIEW,a="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:r,schema:n,name:i,value:a})}dropViewSql(e){const t=e.materialized?"MATERIALIZED ":"";return new RP(`DROP ${t}VIEW ${this.escapePath(e)}`)}async deleteViewDefinitionSql(e){const t=await this.getCurrentSchema();let{schema:n,tableName:i}=this.driver.parseTableName(e);n||(n=t);const r=e.materialized?nP.MATERIALIZED_VIEW:nP.VIEW;return this.deleteTypeormMetadataSql({type:r,schema:n,name:i})}async dropEnumTypes(e){const t=`SELECT 'DROP TYPE IF EXISTS "' || n.nspname || '"."' || t.typname || '" CASCADE;' as "query" FROM "pg_type" "t" INNER JOIN "pg_enum" "e" ON "e"."enumtypid" = "t"."oid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" IN (${e}) GROUP BY "n"."nspname", "t"."typname"`,n=await this.query(t);await Promise.all(n.map((e=>this.query(e.query))))}async hasEnumType(e,t){let{schema:n}=this.driver.parseTableName(e);n||(n=await this.getCurrentSchema());const i=`SELECT "n"."nspname", "t"."typname" FROM "pg_type" "t" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = '${n}' AND "t"."typname" = '${this.buildEnumName(e,t,!1,!0)}'`;return!!(await this.query(i)).length}createEnumTypeSql(e,t,n){n||(n=this.buildEnumName(e,t));const i=t.enum.map((e=>`'${e.replace("'","''")}'`)).join(", ");return new RP(`CREATE TYPE ${n} AS ENUM(${i})`)}dropEnumTypeSql(e,t,n){return n||(n=this.buildEnumName(e,t)),new RP(`DROP TYPE ${n}`)}createIndexSql(e,t){const n=t.columnNames.map((e=>`"${e}"`)).join(", ");return new RP(`CREATE ${t.isUnique?"UNIQUE ":""}INDEX "${t.name}" ON ${this.escapePath(e)} ${t.isSpatial?"USING GiST ":""}(${n}) ${t.where?"WHERE "+t.where:""}`)}createViewIndexSql(e,t){const n=t.columnNames.map((e=>`"${e}"`)).join(", ");return new RP(`CREATE ${t.isUnique?"UNIQUE ":""}INDEX "${t.name}" ON ${this.escapePath(e)} (${n}) ${t.where?"WHERE "+t.where:""}`)}dropIndexSql(e,t){let n=PO.isTableIndex(t)?t.name:t;const{schema:i}=this.driver.parseTableName(e);return new RP(i?`DROP INDEX "${i}"."${n}"`:`DROP INDEX "${n}"`)}createPrimaryKeySql(e,t,n){const i=n||this.connection.namingStrategy.primaryKeyName(e,t),r=t.map((e=>`"${e}"`)).join(", ");return new RP(`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${i}" PRIMARY KEY (${r})`)}dropPrimaryKeySql(e){if(!e.primaryColumns.length)throw new EO(`Table ${e} has no primary keys.`);const t=e.primaryColumns.map((e=>e.name)),n=e.primaryColumns[0].primaryKeyConstraintName,i=n||this.connection.namingStrategy.primaryKeyName(e,t);return new RP(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${i}"`)}createUniqueConstraintSql(e,t){const n=t.columnNames.map((e=>'"'+e+'"')).join(", ");let i=`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${t.name}" UNIQUE (${n})`;return t.deferrable&&(i+=` DEFERRABLE ${t.deferrable}`),new RP(i)}dropUniqueConstraintSql(e,t){const n=PO.isTableUnique(t)?t.name:t;return new RP(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${n}"`)}createCheckConstraintSql(e,t){return new RP(`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${t.name}" CHECK (${t.expression})`)}dropCheckConstraintSql(e,t){const n=PO.isTableCheck(t)?t.name:t;return new RP(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${n}"`)}createExclusionConstraintSql(e,t){return new RP(`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${t.name}" EXCLUDE ${t.expression}`)}dropExclusionConstraintSql(e,t){const n=PO.isTableExclusion(t)?t.name:t;return new RP(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${n}"`)}createForeignKeySql(e,t){const n=t.columnNames.map((e=>'"'+e+'"')).join(", "),i=t.referencedColumnNames.map((e=>'"'+e+'"')).join(",");let r=`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${t.name}" FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))}(${i})`;return t.onDelete&&(r+=` ON DELETE ${t.onDelete}`),t.onUpdate&&(r+=` ON UPDATE ${t.onUpdate}`),t.deferrable&&(r+=` DEFERRABLE ${t.deferrable}`),new RP(r)}dropForeignKeySql(e,t){const n=PO.isTableForeignKey(t)?t.name:t;return new RP(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${n}"`)}buildSequenceName(e,t){const{tableName:n}=this.driver.parseTableName(e),i=PO.isTableColumn(t)?t.name:t;let r=`${n}_${i}_seq`;return r.length>this.connection.driver.maxAliasLength&&(r=`${n.substring(0,29)}_${i.substring(0,Math.max(29,63-e.name.length-5))}_seq`),r}buildSequencePath(e,t){const{schema:n}=this.driver.parseTableName(e);return n?`${n}.${this.buildSequenceName(e,t)}`:this.buildSequenceName(e,t)}buildEnumName(e,t,n=!0,i,r){const{schema:a,tableName:o}=this.driver.parseTableName(e);let s=t.enumName?t.enumName:`${o}_${t.name.toLowerCase()}_enum`;return a&&n&&(s=`${a}.${s}`),r&&(s+="_old"),s.split(".").map((e=>i?e:`"${e}"`)).join(".")}async getUserDefinedTypeName(e,t){let{schema:n,tableName:i}=this.driver.parseTableName(e);n||(n=await this.getCurrentSchema());const r=await this.query(`SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = '${n}' AND "table_name" = '${i}' AND "column_name"='${t.name}'`);let a=r[0].udt_name;return 0===a.indexOf("_")&&(a=a.substr(1,a.length)),{schema:r[0].udt_schema,name:a}}escapeComment(e){return e&&0!==e.length?`'${e=e.replace(/'/g,"''").replace(/\u0000/g,"")}'`:"NULL"}escapePath(e){const{schema:t,tableName:n}=this.driver.parseTableName(e);return t&&t!==this.driver.searchSchema?`"${t}"."${n}"`:`"${n}"`}async getTableNameWithSchema(e){const t=PO.isTable(e)?e.name:e;if(-1===t.indexOf(".")){return`${(await this.query("SELECT current_schema()"))[0].current_schema}.${t}`}return`${t.split(".")[0]}.${t.split(".")[1]}`}buildCreateColumnSql(e,t){let n='"'+t.name+'"';if(!0===t.isGenerated&&"uuid"!==t.generationStrategy)if("identity"===t.generationStrategy){const e=t.generatedIdentity||"BY DEFAULT";n+=` ${t.type} GENERATED ${e} AS IDENTITY`}else"integer"!==t.type&&"int"!==t.type&&"int4"!==t.type||(n+=" SERIAL"),"smallint"!==t.type&&"int2"!==t.type||(n+=" SMALLSERIAL"),"bigint"!==t.type&&"int8"!==t.type||(n+=" BIGSERIAL");return"enum"===t.type||"simple-enum"===t.type?(n+=" "+this.buildEnumName(e,t),t.isArray&&(n+=" array")):t.isGenerated&&"uuid"!==t.type||(n+=" "+this.connection.driver.createFullType(t)),"STORED"===t.generatedType&&t.asExpression&&(n+=` GENERATED ALWAYS AS (${t.asExpression}) STORED`),t.charset&&(n+=' CHARACTER SET "'+t.charset+'"'),t.collation&&(n+=' COLLATE "'+t.collation+'"'),!0!==t.isNullable&&(n+=" NOT NULL"),void 0!==t.default&&null!==t.default&&(n+=" DEFAULT "+t.default),t.isGenerated&&"uuid"===t.generationStrategy&&!t.default&&(n+=` DEFAULT ${this.driver.uuidGenerator}`),n}async hasSupportForPartitionedTables(){return!!(await this.query("SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'")).length}}class YP extends GP{constructor(e,t){super(e,t)}}class JP extends YP{constructor(e,t,n){super(e,n),this.client=t}connect(){return this.databaseConnection?Promise.resolve(this.databaseConnection):(this.databaseConnectionPromise||("slave"===this.mode&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then((([e,t])=>(this.driver.connectedQueryRunners.push(this),this.databaseConnection=e,this.releaseCallback=t,this.databaseConnection))):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then((([e,t])=>(this.driver.connectedQueryRunners.push(this),this.databaseConnection=e,this.releaseCallback=t,this.databaseConnection)))),this.databaseConnectionPromise)}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}0===this.transactionDepth?await this.client.startTransaction():await this.query(`SAVEPOINT typeorm_${this.transactionDepth}`),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new _O;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.client.commitTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new _O;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.client.rollbackTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new rR;const i=await this.client.query(e,t),r=new DP;return r.raw=i,(null==i?void 0:i.hasOwnProperty("records"))&&Array.isArray(i.records)&&(r.records=i.records),(null==i?void 0:i.hasOwnProperty("numberOfRecordsUpdated"))&&(r.affected=i.numberOfRecordsUpdated),n?r:r.raw}}class XP extends _R{}class ZP extends XP{constructor(e){super(),this.transactionSupport="nested",this.connection=e,this.options=e.options,this.isReplicated=!1,this.loadDependencies(),this.client=new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,((e,t)=>this.connection.logger.logQuery(e,t)),this.options.serviceConfigOptions,this.options.formatOptions),this.database=CR.buildDriverOptions(this.options).database}async connect(){}async disconnect(){}createQueryRunner(e){return new JP(this,new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,((e,t)=>this.connection.logger.logQuery(e,t)),this.options.serviceConfigOptions,this.options.formatOptions),e)}preparePersistentValue(e,t){return this.options.formatOptions&&!1===this.options.formatOptions.castParameters?super.preparePersistentValue(e,t):(t.transformer&&(e=sP.transformTo(t.transformer,e)),this.client.preparePersistentValue(e,t))}prepareHydratedValue(e,t){return this.options.formatOptions&&!1===this.options.formatOptions.castParameters?super.prepareHydratedValue(e,t):(t.transformer&&(e=sP.transformFrom(t.transformer,e)),this.client.prepareHydratedValue(e,t))}loadDependencies(){const e=this.options.driver||FA.load("typeorm-aurora-data-api-driver"),{pg:t}=e;this.DataApiDriver=t}executeQuery(e,t){return this.connection.query(t)}async afterConnect(){const e=await this.checkMetadataForExtensions();return e.hasExtensions&&await this.enableExtensions(e,this.connection),Promise.resolve()}}class eM extends $P{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new IP(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async executeSet(e){if(this.isReleased)throw new rR;return(await this.connect()).executeSet(e,!1)}async query(e,t,n=!1){if(this.isReleased)throw new rR;const i=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const r=e.substr(0,e.indexOf(" "));try{let a;a=-1!==["BEGIN","ROLLBACK","COMMIT","CREATE","ALTER","DROP"].indexOf(r)?await i.execute(e,!1):-1!==["INSERT","UPDATE","DELETE"].indexOf(r)?await i.run(e,t,!1):await i.query(e,t||[]);const o=new DP;return(null==a?void 0:a.hasOwnProperty("values"))&&(o.raw=a.values,o.records=a.values),(null==a?void 0:a.hasOwnProperty("changes"))&&(o.affected=a.changes.changes,o.raw=a.changes.lastId||a.changes.changes),n?o:o.raw}catch(a){throw this.driver.connection.logger.logQueryError(a,e,t,this),new eR(e,t,a)}}parametrize(e){return Object.keys(e).map((e=>`"${e}"=?`))}}class tM extends OP{constructor(e){super(e),this.database=this.options.database,this.driver=this.options.driver,this.sqlite=this.options.driver}async connect(){this.databaseConnection=this.createDatabaseConnection(),await this.databaseConnection}async disconnect(){this.queryRunner=void 0;return(await this.databaseConnection).close().then((()=>{this.databaseConnection=void 0}))}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new eM(this)),this.queryRunner}async createDatabaseConnection(){const e=this.options.mode||"no-encryption",t="no-encryption"!==e,n=void 0===this.options.version?1:this.options.version,i=await this.sqlite.createConnection(this.options.database,t,e,n);return await i.open(),await i.query("PRAGMA foreign_keys = ON"),this.options.journalMode&&-1!==["DELETE","TRUNCATE","PERSIST","MEMORY","WAL","OFF"].indexOf(this.options.journalMode)&&await i.query(`PRAGMA journal_mode = ${this.options.journalMode}`),i}loadDependencies(){if(this.sqlite=this.driver,!this.driver)throw new HO("Capacitor","@capacitor-community/sqlite")}}class nM extends MP{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.mode=t,this.broadcaster=new IP(this)}async connect(){if(this.session)return Promise.resolve(this.session);const[e]=await this.driver.instanceDatabase.createSession({});return this.session=e,this.sessionTransaction=await e.transaction(),this.session}async release(){return this.isReleased=!0,this.session&&await this.session.delete(),this.session=void 0,Promise.resolve()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(t){throw this.isTransactionActive=!1,t}await this.connect(),await this.sessionTransaction.begin(),this.connection.logger.logQuery("START TRANSACTION"),await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive||!this.sessionTransaction)throw new _O;await this.broadcaster.broadcast("BeforeTransactionCommit"),await this.sessionTransaction.commit(),this.connection.logger.logQuery("COMMIT"),this.isTransactionActive=!1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive||!this.sessionTransaction)throw new _O;await this.broadcaster.broadcast("BeforeTransactionRollback"),await this.sessionTransaction.rollback(),this.connection.logger.logQuery("ROLLBACK"),this.isTransactionActive=!1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new rR;try{const a=+new Date;let o;await this.connect();const s=e.startsWith("SELECT"),l=s&&!this.isTransactionActive?this.driver.instanceDatabase:this.sessionTransaction;this.isTransactionActive||s||await this.sessionTransaction.begin();try{this.driver.connection.logger.logQuery(e,t,this),o=await l.run({sql:e,params:t?t.reduce(((e,t,n)=>(e["param"+n]=t,e)),{}):void 0,json:!0}),this.isTransactionActive||s||await this.sessionTransaction.commit()}catch(i){try{this.isTransactionActive||s||await this.sessionTransaction.rollback()}catch(r){}throw i}const c=this.driver.options.maxQueryExecutionTime,u=+new Date-a;c&&u>c&&this.driver.connection.logger.logQuerySlow(u,e,t,this);const d=new DP;return d.raw=o,d.records=o?o[0]:[],o&&o[1]&&o[1].rowCountExact&&(d.affected=parseInt(o[1].rowCountExact)),n?d:d.records}catch(a){throw this.driver.connection.logger.logQueryError(a,e,t,this),new eR(e,t,a)}}async updateDDL(e,t){if(this.isReleased)throw new rR;this.driver.connection.logger.logQuery(e,t,this);try{const n=+new Date,[i]=await this.driver.instanceDatabase.updateSchema(e);await i.promise();const r=this.driver.options.maxQueryExecutionTime,a=+new Date-n;r&&a>r&&this.driver.connection.logger.logQuerySlow(a,e,t,this)}catch(n){throw this.driver.connection.logger.logQueryError(n,e,t,this),new eR(e,t,n)}}async stream(e,t,n,i){if(this.isReleased)throw new rR;try{this.driver.connection.logger.logQuery(e,t,this);const r={sql:e,params:t?t.reduce(((e,t,n)=>(e["param"+n]=t,e)),{}):void 0,json:!0},a=this.driver.instanceDatabase.runStream(r);return n&&a.on("end",n),i&&a.on("error",i),a}catch(r){throw this.driver.connection.logger.logQueryError(r,e,t,this),new eR(e,t,r)}}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){throw new EO("Check database queries are not supported by Spanner driver.")}async getCurrentDatabase(){throw new EO("Check database queries are not supported by Spanner driver.")}async hasSchema(e){return!!(await this.query(`SELECT * FROM "information_schema"."schemata" WHERE "schema_name" = '${e}'`)).length}async getCurrentSchema(){throw new EO("Check schema queries are not supported by Spanner driver.")}async hasTable(e){const t=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`TABLES\` WHERE \`TABLE_CATALOG\` = '' AND \`TABLE_SCHEMA\` = '' AND \`TABLE_TYPE\` = 'BASE TABLE' AND \`TABLE_NAME\` = '${e instanceof gR?e.name:e}'`;return!!(await this.query(t)).length}async hasColumn(e,t){const n=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`COLUMNS\` WHERE \`TABLE_CATALOG\` = '' AND \`TABLE_SCHEMA\` = '' AND \`TABLE_NAME\` = '${e instanceof gR?e.name:e}' AND \`COLUMN_NAME\` = '${t}'`;return!!(await this.query(n)).length}async createDatabase(e,t){if(t){if(await this.hasDatabase(e))return Promise.resolve()}const n=`CREATE DATABASE "${e}"`,i=`DROP DATABASE "${e}"`;await this.executeQueries(new RP(n),new RP(i))}async dropDatabase(e,t){const n=t?`DROP DATABASE IF EXISTS "${e}"`:`DROP DATABASE "${e}"`,i=`CREATE DATABASE "${e}"`;await this.executeQueries(new RP(n),new RP(i))}async createSchema(e,t){return Promise.resolve()}async dropSchema(e,t,n){return Promise.resolve()}async createTable(e,t=!1,n=!0,i=!0){if(t){if(await this.hasTable(e))return Promise.resolve()}const r=[],a=[];r.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),n&&e.foreignKeys.forEach((t=>a.push(this.dropForeignKeySql(e,t)))),i&&e.indices.forEach((t=>{t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where)),r.push(this.createIndexSql(e,t)),a.push(this.dropIndexSql(e,t))}));const o=e.columns.filter((e=>e.generatedType&&e.asExpression));for(const s of o){const t=this.insertTypeormMetadataSql({table:e.name,type:nP.GENERATED_COLUMN,name:s.name,value:s.asExpression}),n=this.deleteTypeormMetadataSql({table:e.name,type:nP.GENERATED_COLUMN,name:s.name});r.push(t),a.push(n)}await this.executeQueries(r,a)}async dropTable(e,t,n=!0,i=!0){if(t){if(!(await this.hasTable(e)))return Promise.resolve()}const r=n,a=this.getTablePath(e),o=await this.getCachedTable(a),s=[],l=[];i&&o.indices.forEach((e=>{s.push(this.dropIndexSql(o,e)),l.push(this.createIndexSql(o,e))})),n&&o.foreignKeys.forEach((e=>s.push(this.dropForeignKeySql(o,e)))),s.push(this.dropTableSql(o)),l.push(this.createTableSql(o,r));const c=o.columns.filter((e=>e.generatedType&&e.asExpression));for(const u of c){const e=this.deleteTypeormMetadataSql({table:o.name,type:nP.GENERATED_COLUMN,name:u.name}),t=this.insertTypeormMetadataSql({table:o.name,type:nP.GENERATED_COLUMN,name:u.name,value:u.asExpression});s.push(e),l.push(t)}await this.executeQueries(s,l)}async createView(e){const t=[],n=[];t.push(this.createViewSql(e)),t.push(await this.insertViewDefinitionSql(e)),n.push(this.dropViewSql(e)),n.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(t,n)}async dropView(e){const t=e instanceof kP?e.name:e,n=await this.getCachedView(t),i=[],r=[];i.push(await this.deleteViewDefinitionSql(n)),i.push(this.dropViewSql(n)),r.push(await this.insertViewDefinitionSql(n)),r.push(this.createViewSql(n)),await this.executeQueries(i,r)}async renameTable(e,t){throw new EO("Rename table queries are not supported by Spanner driver.")}async addColumn(e,t){const n=e instanceof gR?e:await this.getCachedTable(e),i=n.clone(),r=[],a=[];r.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(t)}`)),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN ${this.driver.escape(t.name)}`));const o=i.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===t.name));if(o)r.push(this.createIndexSql(n,o)),a.push(this.dropIndexSql(n,o));else if(t.isUnique){const e=new uR({name:this.connection.namingStrategy.indexName(n,[t.name]),columnNames:[t.name],isUnique:!0});i.indices.push(e),i.uniques.push(new pR({name:e.name,columnNames:e.columnNames})),r.push(this.createIndexSql(n,e)),a.push(this.dropIndexSql(n,e))}if(t.generatedType&&t.asExpression){const e=this.insertTypeormMetadataSql({table:n.name,type:nP.GENERATED_COLUMN,name:t.name,value:t.asExpression}),i=this.deleteTypeormMetadataSql({table:n.name,type:nP.GENERATED_COLUMN,name:t.name});r.push(e),a.push(i)}await this.executeQueries(r,a),i.addColumn(t),this.replaceCachedTable(n,i)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const i=e instanceof gR?e:await this.getCachedTable(e),r=t instanceof cR?t:i.columns.find((e=>e.name===t));if(!r)throw new EO(`Column "${t}" was not found in the "${i.name}" table.`);let a;return n instanceof cR?a=n:(a=r.clone(),a.name=n),this.changeColumn(i,r,a)}async changeColumn(e,t,n){const i=e instanceof gR?e:await this.getCachedTable(e);let r=i.clone();const a=[],o=[],s=t instanceof cR?t:i.columns.find((e=>e.name===t));if(!s)throw new EO(`Column "${t}" was not found in the "${i.name}" table.`);if(s.name!==n.name||s.type!==n.type||s.length!==n.length||s.isArray!==n.isArray||s.generatedType!==n.generatedType||s.asExpression!==n.asExpression)await this.dropColumn(i,s),await this.addColumn(i,n),r=i.clone();else if(n.precision===s.precision&&n.scale===s.scale||(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(n)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(s)}`))),s.isNullable!==n.isNullable&&(n.isNullable?(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${s.name}" DROP NOT NULL`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${s.name}" SET NOT NULL`))):(a.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${s.name}" SET NOT NULL`)),o.push(new RP(`ALTER TABLE ${this.escapePath(i)} ALTER COLUMN "${s.name}" DROP NOT NULL`)))),n.isUnique!==s.isUnique)if(!0===n.isUnique){const e=new uR({name:this.connection.namingStrategy.indexName(i,[n.name]),columnNames:[n.name],isUnique:!0});r.indices.push(e),r.uniques.push(new pR({name:e.name,columnNames:e.columnNames})),a.push(this.createIndexSql(i,e)),o.push(this.dropIndexSql(i,e))}else{const e=r.indices.find((e=>1===e.columnNames.length&&!0===e.isUnique&&!!e.columnNames.find((e=>e===n.name))));r.indices.splice(r.indices.indexOf(e),1);const t=r.uniques.find((t=>t.name===e.name));r.uniques.splice(r.uniques.indexOf(t),1),a.push(this.dropIndexSql(i,e)),o.push(this.createIndexSql(i,e))}await this.executeQueries(a,o),this.replaceCachedTable(i,r)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:i}of t)await this.changeColumn(e,n,i)}async dropColumn(e,t){const n=e instanceof gR?e:await this.getCachedTable(e),i=t instanceof cR?t:n.findColumnByName(t);if(!i)throw new EO(`Column "${t}" was not found in table "${n.name}"`);const r=n.clone(),a=[],o=[],s=r.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===i.name));s&&(r.indices.splice(r.indices.indexOf(s),1),a.push(this.dropIndexSql(n,s)),o.push(this.createIndexSql(n,s)));const l=r.checks.find((e=>!!e.columnNames&&1===e.columnNames.length&&e.columnNames[0]===i.name));if(l&&(r.checks.splice(r.checks.indexOf(l),1),a.push(this.dropCheckConstraintSql(n,l)),o.push(this.createCheckConstraintSql(n,l))),a.push(new RP(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN ${this.driver.escape(i.name)}`)),o.push(new RP(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(i)}`)),i.generatedType&&i.asExpression){const e=this.deleteTypeormMetadataSql({table:n.name,type:nP.GENERATED_COLUMN,name:i.name}),t=this.insertTypeormMetadataSql({table:n.name,type:nP.GENERATED_COLUMN,name:i.name,value:i.asExpression});a.push(e),o.push(t)}await this.executeQueries(a,o),r.removeColumn(i),this.replaceCachedTable(n,r)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async updatePrimaryKeys(e,t){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async dropPrimaryKey(e){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async createUniqueConstraint(e,t){throw new EO("Spanner does not support unique constraints. Use unique index instead.")}async createUniqueConstraints(e,t){throw new EO("Spanner does not support unique constraints. Use unique index instead.")}async dropUniqueConstraint(e,t){throw new EO("Spanner does not support unique constraints. Use unique index instead.")}async dropUniqueConstraints(e,t){throw new EO("Spanner does not support unique constraints. Use unique index instead.")}async createCheckConstraint(e,t){const n=e instanceof gR?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.checkConstraintName(n,t.expression));const i=this.createCheckConstraintSql(n,t),r=this.dropCheckConstraintSql(n,t);await this.executeQueries(i,r),n.addCheckConstraint(t)}async createCheckConstraints(e,t){const n=t.map((t=>this.createCheckConstraint(e,t)));await Promise.all(n)}async dropCheckConstraint(e,t){const n=e instanceof gR?e:await this.getCachedTable(e),i=t instanceof mR?t:n.checks.find((e=>e.name===t));if(!i)throw new EO(`Supplied check constraint was not found in table ${n.name}`);const r=this.dropCheckConstraintSql(n,i),a=this.createCheckConstraintSql(n,i);await this.executeQueries(r,a),n.removeCheckConstraint(i)}async dropCheckConstraints(e,t){const n=t.map((t=>this.dropCheckConstraint(e,t)));await Promise.all(n)}async createExclusionConstraint(e,t){throw new EO("Spanner does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new EO("Spanner does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new EO("Spanner does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new EO("Spanner does not support exclusion constraints.")}async createForeignKey(e,t){const n=e instanceof gR?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const i=this.createForeignKeySql(n,t),r=this.dropForeignKeySql(n,t);await this.executeQueries(i,r),n.addForeignKey(t)}async createForeignKeys(e,t){for(const n of t)await this.createForeignKey(e,n)}async dropForeignKey(e,t){const n=e instanceof gR?e:await this.getCachedTable(e),i=t instanceof dR?t:n.foreignKeys.find((e=>e.name===t));if(!i)throw new EO(`Supplied foreign key was not found in table ${n.name}`);const r=this.dropForeignKeySql(n,i),a=this.createForeignKeySql(n,i);await this.executeQueries(r,a),n.removeForeignKey(i)}async dropForeignKeys(e,t){for(const n of t)await this.dropForeignKey(e,n)}async createIndex(e,t){const n=e instanceof gR?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const i=this.createIndexSql(n,t),r=this.dropIndexSql(n,t);await this.executeQueries(i,r),n.addIndex(t)}async createIndices(e,t){for(const n of t)await this.createIndex(e,n)}async dropIndex(e,t){const n=e instanceof gR?e:await this.getCachedTable(e),i=t instanceof uR?t:n.indices.find((e=>e.name===t));if(!i)throw new EO(`Supplied index ${t} was not found in table ${n.name}`);i.name||(i.name=this.generateIndexName(n,i));const r=this.dropIndexSql(n,i),a=this.createIndexSql(n,i);await this.executeQueries(r,a),n.removeIndex(i)}async dropIndices(e,t){for(const n of t)await this.dropIndex(e,n)}async clearTable(e){await this.query(`DELETE FROM ${this.escapePath(e)} WHERE true`)}async clearDatabase(){const e=await this.query("SELECT concat('DROP INDEX `', INDEX_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`INDEXES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `INDEX_TYPE` = 'INDEX' AND `SPANNER_IS_MANAGED` = false"),t=await this.query("SELECT concat('ALTER TABLE `', TABLE_NAME, '`', ' DROP CONSTRAINT `', CONSTRAINT_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `CONSTRAINT_TYPE` = 'FOREIGN KEY'"),n=await this.query("SELECT concat('DROP TABLE `', TABLE_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE'");if(!e.length&&!t.length&&!n.length)return;const i=this.isTransactionActive;i||await this.startTransaction();try{for(let t of e)await this.updateDDL(t.query);for(let e of t)await this.updateDDL(e.query);for(let e of n)await this.updateDDL(e.query);await this.commitTransaction()}catch(r){try{i||await this.rollbackTransaction()}catch(a){}throw r}}async executeMemoryUpSql(){for(const{query:e,parameters:t}of this.sqlInMemory.upQueries)this.isDMLQuery(e)?await this.query(e,t):await this.updateDDL(e,t)}async executeMemoryDownSql(){for(const{query:e,parameters:t}of this.sqlInMemory.downQueries.reverse())this.isDMLQuery(e)?await this.query(e,t):await this.updateDDL(e,t)}async loadViews(e){return Promise.resolve([])}async loadTables(e){if(e&&0===e.length)return[];const t=[];if(e&&e.length){const n=`SELECT \`TABLE_NAME\` FROM \`INFORMATION_SCHEMA\`.\`TABLES\` WHERE \`TABLE_CATALOG\` = '' AND \`TABLE_SCHEMA\` = '' AND \`TABLE_TYPE\` = 'BASE TABLE' AND \`TABLE_NAME\` IN (${e.map((e=>`'${e}'`)).join(", ")})`;t.push(...await this.query(n))}else{const e="SELECT `TABLE_NAME` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE'";t.push(...await this.query(e))}if(!t.length)return[];const n=t.map((e=>`'${e.TABLE_NAME}'`)).join(", "),i=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`COLUMNS\` WHERE \`TABLE_CATALOG\` = '' AND \`TABLE_SCHEMA\` = '' AND \`TABLE_NAME\` IN (${n})`,r=`SELECT \`KCU\`.\`TABLE_NAME\`, \`KCU\`.\`COLUMN_NAME\` FROM \`INFORMATION_SCHEMA\`.\`TABLE_CONSTRAINTS\` \`TC\` INNER JOIN \`INFORMATION_SCHEMA\`.\`KEY_COLUMN_USAGE\` \`KCU\` ON \`KCU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` WHERE \`TC\`.\`TABLE_CATALOG\` = '' AND \`TC\`.\`TABLE_SCHEMA\` = '' AND \`TC\`.\`CONSTRAINT_TYPE\` = 'PRIMARY KEY' AND \`TC\`.\`TABLE_NAME\` IN (${n})`,a=`SELECT \`I\`.\`TABLE_NAME\`, \`I\`.\`INDEX_NAME\`, \`I\`.\`IS_UNIQUE\`, \`I\`.\`IS_NULL_FILTERED\`, \`IC\`.\`COLUMN_NAME\` FROM \`INFORMATION_SCHEMA\`.\`INDEXES\` \`I\` INNER JOIN \`INFORMATION_SCHEMA\`.\`INDEX_COLUMNS\` \`IC\` ON \`IC\`.\`INDEX_NAME\` = \`I\`.\`INDEX_NAME\` AND \`IC\`.\`TABLE_NAME\` = \`I\`.\`TABLE_NAME\` WHERE \`I\`.\`TABLE_CATALOG\` = '' AND \`I\`.\`TABLE_SCHEMA\` = '' AND \`I\`.\`TABLE_NAME\` IN (${n}) AND \`I\`.\`INDEX_TYPE\` = 'INDEX' AND \`I\`.\`SPANNER_IS_MANAGED\` = false`,o=`SELECT \`TC\`.\`TABLE_NAME\`, \`TC\`.\`CONSTRAINT_NAME\`, \`CC\`.\`CHECK_CLAUSE\`, \`CCU\`.\`COLUMN_NAME\`FROM \`INFORMATION_SCHEMA\`.\`TABLE_CONSTRAINTS\` \`TC\` INNER JOIN \`INFORMATION_SCHEMA\`.\`CONSTRAINT_COLUMN_USAGE\` \`CCU\` ON \`CCU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` INNER JOIN \`INFORMATION_SCHEMA\`.\`CHECK_CONSTRAINTS\` \`CC\` ON \`CC\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` WHERE \`TC\`.\`TABLE_CATALOG\` = '' AND \`TC\`.\`TABLE_SCHEMA\` = '' AND \`TC\`.\`CONSTRAINT_TYPE\` = 'CHECK' AND \`TC\`.\`TABLE_NAME\` IN (${n}) AND \`TC\`.\`CONSTRAINT_NAME\` NOT LIKE 'CK_IS_NOT_NULL%'`,s=`SELECT \`TC\`.\`TABLE_NAME\`, \`TC\`.\`CONSTRAINT_NAME\`, \`KCU\`.\`COLUMN_NAME\`, \`CTU\`.\`TABLE_NAME\` AS \`REFERENCED_TABLE_NAME\`, \`CCU\`.\`COLUMN_NAME\` AS \`REFERENCED_COLUMN_NAME\`, \`RC\`.\`UPDATE_RULE\`, \`RC\`.\`DELETE_RULE\` FROM \`INFORMATION_SCHEMA\`.\`TABLE_CONSTRAINTS\` \`TC\` INNER JOIN \`INFORMATION_SCHEMA\`.\`KEY_COLUMN_USAGE\` \`KCU\` ON \`KCU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` INNER JOIN \`INFORMATION_SCHEMA\`.\`CONSTRAINT_TABLE_USAGE\` \`CTU\` ON \`CTU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` INNER JOIN \`INFORMATION_SCHEMA\`.\`REFERENTIAL_CONSTRAINTS\` \`RC\` ON \`RC\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` INNER JOIN \`INFORMATION_SCHEMA\`.\`CONSTRAINT_COLUMN_USAGE\` \`CCU\` ON \`CCU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` WHERE \`TC\`.\`TABLE_CATALOG\` = '' AND \`TC\`.\`TABLE_SCHEMA\` = '' AND \`TC\`.\`CONSTRAINT_TYPE\` = 'FOREIGN KEY' AND \`TC\`.\`TABLE_NAME\` IN (${n})`,[l,c,u,d,h]=await Promise.all([this.query(i),this.query(r),this.query(a),this.query(o),this.query(s)]);return Promise.all(t.map((async e=>{const t=new gR;t.name=this.driver.buildTableName(e.TABLE_NAME),t.columns=await Promise.all(l.filter((t=>t.TABLE_NAME===e.TABLE_NAME)).map((async n=>{const i=u.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.COLUMN_NAME===n.COLUMN_NAME&&!0===t.IS_UNIQUE)),r=this.connection.entityMetadatas.find((e=>this.getTablePath(t)===this.getTablePath(e))),a=i.length>0&&r&&r.indices.some((e=>i.some((t=>e.name===t.INDEX_NAME&&!1===e.synchronize)))),o=i.every((e=>u.some((t=>t.INDEX_NAME===e.INDEX_NAME&&t.COLUMN_NAME!==n.COLUMN_NAME)))),s=new cR;s.name=n.COLUMN_NAME;let l=n.SPANNER_TYPE.toLowerCase();if(-1!==l.indexOf("array")&&(s.isArray=!0,l=l.substring(l.indexOf("<")+1,l.indexOf(">"))),-1!==l.indexOf("(")?s.type=l.substring(0,l.indexOf("(")):s.type=l,-1!==this.driver.withLengthColumnTypes.indexOf(s.type)&&(s.length=l.substring(l.indexOf("(")+1,l.indexOf(")"))),"ALWAYS"===n.IS_GENERATED){s.asExpression=n.GENERATION_EXPRESSION,s.generatedType="STORED";const t=await this.selectTypeormMetadataSql({table:e.TABLE_NAME,type:nP.GENERATED_COLUMN,name:s.name}),i=await this.query(t.query,t.parameters);i[0]&&i[0].value?s.asExpression=i[0].value:s.asExpression=""}return s.isUnique=i.length>0&&!a&&!o,s.isNullable="YES"===n.IS_NULLABLE,s.isPrimary=c.some((e=>e.TABLE_NAME===n.TABLE_NAME&&e.COLUMN_NAME===n.COLUMN_NAME)),s})));const n=h.filter((t=>t.TABLE_NAME===e.TABLE_NAME));t.foreignKeys=oP.uniq(n,(e=>e.CONSTRAINT_NAME)).map((e=>{const t=n.filter((t=>t.CONSTRAINT_NAME===e.CONSTRAINT_NAME));return new dR({name:e.CONSTRAINT_NAME,columnNames:oP.uniq(t.map((e=>e.COLUMN_NAME))),referencedDatabase:e.REFERENCED_TABLE_SCHEMA,referencedTableName:e.REFERENCED_TABLE_NAME,referencedColumnNames:oP.uniq(t.map((e=>e.REFERENCED_COLUMN_NAME))),onDelete:e.DELETE_RULE,onUpdate:e.UPDATE_RULE})}));const i=u.filter((t=>t.TABLE_NAME===e.TABLE_NAME));t.indices=oP.uniq(i,(e=>e.INDEX_NAME)).map((e=>{const n=i.filter((t=>t.INDEX_NAME===e.INDEX_NAME));return new uR({table:t,name:e.INDEX_NAME,columnNames:n.map((e=>e.COLUMN_NAME)),isUnique:e.IS_UNIQUE,isNullFiltered:e.IS_NULL_FILTERED})}));const r=d.filter((t=>t.TABLE_NAME===e.TABLE_NAME));return t.checks=oP.uniq(r,(e=>e.CONSTRAINT_NAME)).map((e=>{const t=r.filter((t=>t.CONSTRAINT_NAME===e.CONSTRAINT_NAME));return new mR({name:e.CONSTRAINT_NAME,columnNames:t.map((e=>e.COLUMN_NAME)),expression:e.CHECK_CLAUSE})})),t})))}createTableSql(e,t){const n=e.columns.map((e=>this.buildCreateColumnSql(e))).join(", ");let i=`CREATE TABLE ${this.escapePath(e)} (${n}`;if(e.columns.filter((e=>e.isUnique)).forEach((t=>{const n=e.indices.some((e=>1===e.columnNames.length&&!!e.isUnique&&-1!==e.columnNames.indexOf(t.name))),i=e.uniques.some((e=>1===e.columnNames.length&&-1!==e.columnNames.indexOf(t.name)));n||i||e.indices.push(new uR({name:this.connection.namingStrategy.uniqueConstraintName(e,[t.name]),columnNames:[t.name],isUnique:!0}))})),e.uniques.length>0&&e.uniques.forEach((t=>{e.indices.some((e=>e.name===t.name))||e.indices.push(new uR({name:t.name,columnNames:t.columnNames,isUnique:!0}))})),e.checks.length>0){i+=`, ${e.checks.map((t=>`CONSTRAINT \`${t.name?t.name:this.connection.namingStrategy.checkConstraintName(e,t.expression)}\` CHECK (${t.expression})`)).join(", ")}`}if(e.foreignKeys.length>0&&t){const t=e.foreignKeys.map((t=>{const n=t.columnNames.map((e=>`\`${e}\``)).join(", ");t.name||(t.name=this.connection.namingStrategy.foreignKeyName(e,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const i=t.referencedColumnNames.map((e=>`\`${e}\``)).join(", ");return`CONSTRAINT \`${t.name}\` FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))} (${i})`})).join(", ");i+=`, ${t}`}i+=")";const r=e.columns.filter((e=>e.isPrimary));if(r.length>0){i+=` PRIMARY KEY (${r.map((e=>this.driver.escape(e.name))).join(", ")})`}return new RP(i)}dropTableSql(e){return new RP(`DROP TABLE ${this.escapePath(e)}`)}createViewSql(e){const t=e.materialized?"MATERIALIZED ":"",n=this.escapePath(e),i="string"==typeof e.expression?e.expression:e.expression(this.connection).getQuery();return new RP(`CREATE ${t}VIEW ${n} SQL SECURITY INVOKER AS ${i}`)}async insertViewDefinitionSql(e){let{schema:t,tableName:n}=this.driver.parseTableName(e);const i=e.materialized?nP.MATERIALIZED_VIEW:nP.VIEW,r="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:i,schema:t,name:n,value:r})}dropViewSql(e){const t=e.materialized?"MATERIALIZED ":"";return new RP(`DROP ${t}VIEW ${this.escapePath(e)}`)}async deleteViewDefinitionSql(e){let{schema:t,tableName:n}=this.driver.parseTableName(e);const i=e.materialized?nP.MATERIALIZED_VIEW:nP.VIEW;return this.deleteTypeormMetadataSql({type:i,schema:t,name:n})}createIndexSql(e,t){const n=t.columnNames.map((e=>this.driver.escape(e))).join(", ");let i="";return t.isUnique&&(i+="UNIQUE "),t.isNullFiltered&&(i+="NULL_FILTERED "),new RP(`CREATE ${i}INDEX \`${t.name}\` ON ${this.escapePath(e)} (${n})`)}dropIndexSql(e,t){let n=t instanceof uR?t.name:t;return new RP(`DROP INDEX \`${n}\``)}createCheckConstraintSql(e,t){return new RP(`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT \`${t.name}\` CHECK (${t.expression})`)}dropCheckConstraintSql(e,t){const n=t instanceof mR?t.name:t;return new RP(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT \`${n}\``)}createForeignKeySql(e,t){const n=t.columnNames.map((e=>this.driver.escape(e))).join(", "),i=t.referencedColumnNames.map((e=>this.driver.escape(e))).join(",");let r=`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT \`${t.name}\` FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))} (${i})`;return new RP(r)}dropForeignKeySql(e,t){const n=t instanceof dR?t.name:t;return new RP(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT \`${n}\``)}escapePath(e){const{tableName:t}=this.driver.parseTableName(e);return`\`${t}\``}buildCreateColumnSql(e){let t=`${this.driver.escape(e.name)} ${this.connection.driver.createFullType(e)}`;return"STORED"===e.generatedType&&e.asExpression?t+=` AS (${e.asExpression}) STORED`:e.isNullable||(t+=" NOT NULL"),t}async executeQueries(e,t){if(e instanceof RP&&(e=[e]),t instanceof RP&&(t=[t]),this.sqlInMemory.upQueries.push(...e),this.sqlInMemory.downQueries.push(...t),!0===this.sqlMemoryMode)return Promise.resolve();for(const{query:n,parameters:i}of e)this.isDMLQuery(n)?await this.query(n,i):await this.updateDDL(n,i)}isDMLQuery(e){return e.startsWith("INSERT")||e.startsWith("UPDATE")||e.startsWith("DELETE")}}class iM{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="none",this.supportedDataTypes=["bool","int64","float64","numeric","string","json","bytes","date","timestamp","array"],this.supportedUpsertTypes=[],this.spatialTypes=[],this.withLengthColumnTypes=["string","bytes"],this.withWidthColumnTypes=[],this.withPrecisionColumnTypes=[],this.withScaleColumnTypes=[],this.mappedDataTypes={createDate:"timestamp",createDateDefault:"",updateDate:"timestamp",updateDateDefault:"",deleteDate:"timestamp",deleteDateNullable:!0,version:"int64",treeLevel:"int64",migrationId:"int64",migrationName:"string",migrationTimestamp:"int64",cacheId:"string",cacheIdentifier:"string",cacheTime:"int64",cacheDuration:"int64",cacheQuery:"string",cacheResult:"string",metadataType:"string",metadataDatabase:"string",metadataSchema:"string",metadataTable:"string",metadataName:"string",metadataValue:"string"},this.dataTypeDefaults={},this.maxAliasLength=63,this.cteCapabilities={enabled:!0},this._isReturningSqlSupported={delete:!1,insert:!1,update:!1},this.connection=e,this.options=e.options,this.isReplicated=!!this.options.replication,this.loadDependencies()}async connect(){this.instance=this.spanner.instance(this.options.instanceId),this.instanceDatabase=this.instance.database(this.options.databaseId)}afterConnect(){return Promise.resolve()}async disconnect(){this.instanceDatabase.close()}createSchemaBuilder(){return new _P(this.connection)}createQueryRunner(e){return new nM(this,e)}escapeQueryWithParameters(e,t,n){const i=Object.keys(n).map((e=>n[e]));return t&&Object.keys(t).length?(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,r)=>{if(!t.hasOwnProperty(r))return e;let a=t[r];return null===a?e:n?a.map((e=>(i.push(e),this.createParameter(r,i.length-1)))).join(", "):a instanceof Function?a():(i.push(a),this.createParameter(r,i.length-1))})),[e=e.replace(/([ ]+)?=([ ]+)?:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,i,r,a)=>{if(!t.hasOwnProperty(a))return e;return null===t[a]?" IS NULL":e})),i]):[e,i]}escape(e){return`\`${e}\``}buildTableName(e,t,n){let i=[e];return n&&i.unshift(n),i.join(".")}parseTableName(e){const t=this.database,n=void 0;if(e instanceof gR||e instanceof kP){const i=this.parseTableName(e.name);return{database:e.database||i.database||t,schema:e.schema||i.schema||n,tableName:i.tableName}}if(e instanceof dR){const i=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||i.database||t,schema:e.referencedSchema||i.schema||n,tableName:i.tableName}}if(e instanceof pP)return{database:e.database||t,schema:e.schema||n,tableName:e.tableName};const i=e.split(".");return{database:(i.length>1?i[0]:void 0)||t,schema:n,tableName:i.length>1?i[1]:i[0]}}preparePersistentValue(e,t){if(t.transformer&&(e=sP.transformTo(t.transformer,e)),null==e)return e;if("numeric"===t.type){return(this.options.driver||FA.load("spanner")).Spanner.numeric(e)}return"date"===t.type?aP.mixedDateToDateString(e):"json"===t.type?e:"timestamp"===t.type||t.type===Date?aP.mixedDateToDate(e):e}prepareHydratedValue(e,t){return null==e?t.transformer?sP.transformFrom(t.transformer,e):e:(t.type===Boolean||"bool"===t.type?e=!!e:"timestamp"===t.type||t.type===Date?e=new Date(e):"numeric"===t.type?e=e.value:"date"===t.type?e=aP.mixedDateToDateString(e):"json"===t.type?e="string"==typeof e?JSON.parse(e):e:t.type===Number&&(e=isNaN(+e)?e:parseInt(e)),t.transformer&&(e=sP.transformFrom(t.transformer,e)),e)}normalizeType(e){return e.type===Number?"int64":e.type===String||"uuid"===e.type?"string":e.type===Date?"timestamp":e.type===Buffer?"bytes":e.type===Boolean?"bool":e.type||""}normalizeDefault(e){return""===e.default?`"${e.default}"`:`${e.default}`}normalizeIsUnique(e){return e.entityMetadata.indices.some((t=>t.isUnique&&1===t.columns.length&&t.columns[0]===e))}getColumnLength(e){if(e.length)return e.length.toString();if("uuid"===e.generationStrategy)return"36";switch(e.type){case String:case"string":case"bytes":return"max";default:return""}}createFullType(e){let t=e.type;return this.getColumnLength(e)?t+=`(${this.getColumnLength(e)})`:e.width?t+=`(${e.width})`:null!==e.precision&&void 0!==e.precision&&null!==e.scale&&void 0!==e.scale?t+=`(${e.precision},${e.scale})`:null!==e.precision&&void 0!==e.precision&&(t+=`(${e.precision})`),e.isArray&&(t=`array<${t}>`),t}obtainMasterConnection(){return this.instanceDatabase}obtainSlaveConnection(){return this.instanceDatabase}createGeneratedMap(e,t,n){if(!t)return;if(void 0===t.insertId)return Object.keys(t).reduce(((n,i)=>{const r=e.findColumnWithDatabaseName(i);return r&&oP.mergeDeep(n,r.createValueMap(t[i])),n}),{});const i=e.generatedColumns.reduce(((e,i)=>{let r;return"increment"===i.generationStrategy&&t.insertId&&(r=t.insertId+n),oP.mergeDeep(e,i.createValueMap(r))}),{});return Object.keys(i).length>0?i:void 0}findChangedColumns(e,t){return t.filter((t=>{const n=e.find((e=>e.name===t.databaseName));if(!n)return!1;return n.name!==t.databaseName||n.type!==this.normalizeType(t)||n.length!==this.getColumnLength(t)||n.asExpression!==t.asExpression||n.generatedType!==t.generatedType||n.isPrimary!==t.isPrimary||!this.compareNullableValues(t,n)||n.isUnique!==this.normalizeIsUnique(t)}))}isReturningSqlSupported(e){return this._isReturningSqlSupported[e]}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"@param"+t}loadDependencies(){try{const e=this.options.driver||FA.load("spanner");this.spanner=new e.Spanner({projectId:this.options.projectId})}catch(RD){throw console.error(RD),new HO("Spanner","@google-cloud/spanner")}}compareNullableValues(e,t){return!!e.generatedType||e.isNullable===t.isNullable}compareDefaultValues(e,t){return"string"==typeof e&&"string"==typeof t&&(e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t}normalizeDatetimeFunction(e){if(!e)return e;if(-1!==e.toUpperCase().indexOf("CURRENT_TIMESTAMP")||-1!==e.toUpperCase().indexOf("NOW")){const t=e.match(/\(\d+\)/);return t?`CURRENT_TIMESTAMP${t[0]}`:"CURRENT_TIMESTAMP"}return e}escapeComment(e){return e?e=e.replace(/\u0000/g,""):e}}class rM{create(e){const{type:t}=e.options;switch(t){case"mysql":case"mariadb":return new MR(e);case"postgres":return new _R(e);case"cockroachdb":return new OR(e);case"sap":return new PR(e);case"sqlite":return new IR(e);case"better-sqlite3":return new DR(e);case"cordova":return new jP(e);case"nativescript":return new zP(e);case"react-native":return new BP(e);case"sqljs":return new VP(e);case"oracle":return new $R(e);case"mssql":return new RR(e);case"mongodb":return new NR(e);case"expo":return new HP(e);case"aurora-mysql":return new KP(e);case"aurora-postgres":return new ZP(e);case"capacitor":return new tM(e);case"spanner":return new iM(e);default:throw new WO(t,["aurora-mysql","aurora-postgres","better-sqlite3","capacitor","cockroachdb","cordova","expo","mariadb","mongodb","mssql","mysql","nativescript","oracle","postgres","react-native","sap","sqlite","sqljs","spanner"])}}}const aM=new class{constructor(){this.instances=[]}get(e){let t=this.instances.find((t=>t.type===e));return t||(t={type:e,object:new e},this.instances.push(t)),t.object}};function oM(e){return aM.get(e)}class sM{constructor(e){this["@instanceof"]=Symbol.for("ColumnMetadata"),this.length="",this.isPrimary=!1,this.isGenerated=!1,this.isNullable=!1,this.isSelect=!0,this.isInsert=!0,this.isUpdate=!0,this.zerofill=!1,this.unsigned=!1,this.isArray=!1,this.isVirtual=!1,this.isVirtualProperty=!1,this.isDiscriminator=!1,this.isTreeLevel=!1,this.isCreateDate=!1,this.isUpdateDate=!1,this.isDeleteDate=!1,this.isVersion=!1,this.isObjectId=!1,this.isNestedSetLeft=!1,this.isNestedSetRight=!1,this.isMaterializedPath=!1,this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.referencedColumn=e.referencedColumn,e.args.target&&(this.target=e.args.target),e.args.propertyName&&(this.propertyName=e.args.propertyName),e.args.options.name&&(this.givenDatabaseName=e.args.options.name),e.args.options.type&&(this.type=e.args.options.type),e.args.options.length&&(this.length=e.args.options.length?e.args.options.length.toString():""),e.args.options.width&&(this.width=e.args.options.width),e.args.options.charset&&(this.charset=e.args.options.charset),e.args.options.collation&&(this.collation=e.args.options.collation),e.args.options.primary&&(this.isPrimary=e.args.options.primary),null===e.args.options.default&&(this.isNullable=!0),void 0!==e.args.options.nullable&&(this.isNullable=e.args.options.nullable),void 0!==e.args.options.select&&(this.isSelect=e.args.options.select),void 0!==e.args.options.insert&&(this.isInsert=e.args.options.insert),void 0!==e.args.options.update&&(this.isUpdate=e.args.options.update),void 0!==e.args.options.readonly&&(this.isUpdate=!e.args.options.readonly),e.args.options.comment&&(this.comment=e.args.options.comment),void 0!==e.args.options.default&&(this.default=e.args.options.default),e.args.options.onUpdate&&(this.onUpdate=e.args.options.onUpdate),e.args.options.generatedIdentity&&(this.generatedIdentity=e.args.options.generatedIdentity),null!==e.args.options.scale&&void 0!==e.args.options.scale&&(this.scale=e.args.options.scale),e.args.options.zerofill&&(this.zerofill=e.args.options.zerofill,this.unsigned=!0),e.args.options.unsigned&&(this.unsigned=e.args.options.unsigned),null!==e.args.options.precision&&(this.precision=e.args.options.precision),e.args.options.enum&&(RO.isObject(e.args.options.enum)&&!Array.isArray(e.args.options.enum)?this.enum=Object.keys(e.args.options.enum).filter((t=>isNaN(+t)&&"function"!=typeof e.args.options.enum[t])).map((t=>e.args.options.enum[t])):this.enum=e.args.options.enum),e.args.options.enumName&&(this.enumName=e.args.options.enumName),e.args.options.primaryKeyConstraintName&&(this.primaryKeyConstraintName=e.args.options.primaryKeyConstraintName),e.args.options.foreignKeyConstraintName&&(this.foreignKeyConstraintName=e.args.options.foreignKeyConstraintName),e.args.options.asExpression&&(this.asExpression=e.args.options.asExpression,this.generatedType=e.args.options.generatedType?e.args.options.generatedType:"VIRTUAL"),e.args.options.hstoreType&&(this.hstoreType=e.args.options.hstoreType),e.args.options.array&&(this.isArray=e.args.options.array),e.args.mode&&(this.isVirtualProperty="virtual-property"===e.args.mode,this.isVirtual="virtual"===e.args.mode,this.isTreeLevel="treeLevel"===e.args.mode,this.isCreateDate="createDate"===e.args.mode,this.isUpdateDate="updateDate"===e.args.mode,this.isDeleteDate="deleteDate"===e.args.mode,this.isVersion="version"===e.args.mode,this.isObjectId="objectId"===e.args.mode),this.isVirtualProperty&&(this.isInsert=!1,this.isUpdate=!1),e.args.options.transformer&&(this.transformer=e.args.options.transformer),e.args.options.spatialFeatureType&&(this.spatialFeatureType=e.args.options.spatialFeatureType),void 0!==e.args.options.srid&&(this.srid=e.args.options.srid),e.args.options.query&&(this.query=e.args.options.query),this.isTreeLevel&&(this.type=e.connection.driver.mappedDataTypes.treeLevel),this.isCreateDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.createDate),this.default||(this.default=()=>e.connection.driver.mappedDataTypes.createDateDefault),void 0===this.precision&&void 0===e.args.options.precision&&e.connection.driver.mappedDataTypes.createDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.createDatePrecision)),this.isUpdateDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.updateDate),this.default||(this.default=()=>e.connection.driver.mappedDataTypes.updateDateDefault),this.onUpdate||(this.onUpdate=e.connection.driver.mappedDataTypes.updateDateDefault),void 0===this.precision&&void 0===e.args.options.precision&&e.connection.driver.mappedDataTypes.updateDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.updateDatePrecision)),this.isDeleteDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.deleteDate),this.isNullable||(this.isNullable=e.connection.driver.mappedDataTypes.deleteDateNullable),void 0===this.precision&&void 0===e.args.options.precision&&e.connection.driver.mappedDataTypes.deleteDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.deleteDatePrecision)),this.isVersion&&(this.type=e.connection.driver.mappedDataTypes.version),e.closureType&&(this.closureType=e.closureType),e.nestedSetLeft&&(this.isNestedSetLeft=e.nestedSetLeft),e.nestedSetRight&&(this.isNestedSetRight=e.nestedSetRight),e.materializedPath&&(this.isMaterializedPath=e.materializedPath)}createValueMap(e,t=!1){if(this.embeddedMetadata){const n=[...this.embeddedMetadata.parentPropertyNames],i=(n,r)=>{const a=n.shift();return a?(r[a]={},i(n,r[a]),r):("increment"!==this.generationStrategy&&"rowid"!==this.generationStrategy||"bigint"!==this.type||null===e||(e=String(e)),r[t?this.databaseName:this.propertyName]=e,r)};return i(n,{})}return"increment"!==this.generationStrategy&&"rowid"!==this.generationStrategy||"bigint"!==this.type||null===e||(e=String(e)),{[t?this.databaseName:this.propertyName]:e}}getEntityValueMap(e,t){var n;if(this.embeddedMetadata){const t=[...this.embeddedMetadata.parentPropertyNames],n=this.embeddedMetadata.isArray,i=(e,t)=>{if(void 0===t)return{};const r=e.shift();if(r){const n=i(e,t[r]);return Object.keys(n).length>0?{[r]:n}:{}}return n&&Array.isArray(t)?t.map((e=>({[this.propertyName]:e[this.propertyName]}))):void 0!==t[this.propertyName]?{[this.propertyName]:t[this.propertyName]}:{}},r=i(t,e);return Object.keys(r).length>0?r:void 0}if(this.relationMetadata&&!(null===(n=Object.getOwnPropertyDescriptor(e,this.relationMetadata.propertyName))||void 0===n?void 0:n.get)&&e[this.relationMetadata.propertyName]&&RO.isObject(e[this.relationMetadata.propertyName])){const t=this.relationMetadata.joinColumns.reduce(((t,n)=>{const i=n.referencedColumn.getEntityValueMap(e[this.relationMetadata.propertyName]);return void 0===i?t:oP.mergeDeep(t,i)}),{});return Object.keys(t).length>0?{[this.propertyName]:t}:void 0}return void 0!==e[this.propertyName]?{[this.propertyName]:e[this.propertyName]}:void 0}getEntityValue(e,t=!1){if(null==e)return;let n;if(this.embeddedMetadata){const t=[...this.embeddedMetadata.parentPropertyNames],i=this.embeddedMetadata.isArray,r=(e,t)=>{const n=e.shift();return n&&t?r(e,t[n]):t},a=r(t,e);if(a)if(this.relationMetadata&&this.referencedColumn){const e=this.relationMetadata.getEntityValue(a);n=e&&RO.isObject(e)&&!PO.isFindOperator(e)&&!Buffer.isBuffer(e)?this.referencedColumn.getEntityValue(e):!a[this.propertyName]||!RO.isObject(a[this.propertyName])||PO.isFindOperator(a[this.propertyName])||Buffer.isBuffer(a[this.propertyName])||a[this.propertyName]instanceof Date?a[this.propertyName]:this.referencedColumn.getEntityValue(a[this.propertyName])}else n=this.referencedColumn?this.referencedColumn.getEntityValue(a[this.propertyName]):i&&Array.isArray(a)?a.map((e=>e[this.propertyName])):a[this.propertyName]}else if(this.relationMetadata&&this.referencedColumn){const t=this.relationMetadata.getEntityValue(e);n=t&&RO.isObject(t)&&!PO.isFindOperator(t)&&"function"!=typeof t&&!Buffer.isBuffer(t)?this.referencedColumn.getEntityValue(t):!e[this.propertyName]||!RO.isObject(e[this.propertyName])||PO.isFindOperator(e[this.propertyName])||"function"==typeof e[this.propertyName]||Buffer.isBuffer(e[this.propertyName])||e[this.propertyName]instanceof Date?e[this.propertyName]:this.referencedColumn.getEntityValue(e[this.propertyName])}else n=this.referencedColumn?this.referencedColumn.getEntityValue(e[this.propertyName]):e[this.propertyName];return t&&this.transformer&&(n=sP.transformTo(this.transformer,n)),n}setEntityValue(e,t){if(this.embeddedMetadata){const n=(e,i)=>{const r=e.shift();return r?(i[r.propertyName]||(i[r.propertyName]=r.create()),n(e,i[r.propertyName]),i):(i[this.propertyName]=t,i)};return n([...this.embeddedMetadata.embeddedMetadataTree],e)}!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName?(this.propertyName in e||(e[this.propertyName]={}),e[this.propertyName][this.referencedColumn.propertyName]=t):e[this.propertyName]=t}compareEntityValue(e,t){const n=this.getEntityValue(e);return RO.isObject(n)?n.equals(t):n===t}build(e){return this.propertyPath=this.buildPropertyPath(),this.propertyAliasName=this.propertyPath.replace(".","_"),this.databaseName=this.buildDatabaseName(e),this.databasePath=this.buildDatabasePath(),this.databaseNameWithoutPrefixes=e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,[]),this}buildPropertyPath(){let e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.propertyName,!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName&&(e+="."+this.referencedColumn.propertyName),e}buildDatabasePath(){let e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.databaseName,!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.databaseName!==this.databaseName&&(e+="."+this.referencedColumn.databaseName),e}buildDatabaseName(e){let t=this.embeddedMetadata?this.embeddedMetadata.parentPrefixes:[];return"mongodb"===e.driver.options.type&&(t=[]),e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,t)}}class lM{constructor(e){this.isUnique=!1,this.isSpatial=!1,this.isFulltext=!1,this.isNullFiltered=!1,this.synchronize=!0,this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,null!==e.args.synchronize&&void 0!==e.args.synchronize&&(this.synchronize=e.args.synchronize),this.isUnique=!!e.args.unique,this.isSpatial=!!e.args.spatial,this.isFulltext=!!e.args.fulltext,this.isNullFiltered=!!e.args.nullFiltered,this.parser=e.args.parser,this.where=e.args.where,this.isSparse=e.args.sparse,this.isBackground=e.args.background,this.expireAfterSeconds=e.args.expireAfterSeconds,this.givenName=e.args.name,this.givenColumnNames=e.args.columns)}build(e){if(!1===this.synchronize)return this.name=this.givenName,this;const t={};if(this.givenColumnNames){let e=[];if(Array.isArray(this.givenColumnNames))e=this.givenColumnNames.map((e=>this.embeddedMetadata?this.embeddedMetadata.propertyPath+"."+e:e.trim())),e.forEach((e=>t[e]=1));else{const n=this.givenColumnNames(this.entityMetadata.propertiesMap);Array.isArray(n)?(e=n.map((e=>String(e))),e.forEach((e=>t[e]=1))):(e=Object.keys(n).map((e=>String(e))),Object.keys(n).forEach((e=>t[e]=n[e])))}this.columns=e.map((e=>{const t=this.entityMetadata.columns.find((t=>t.propertyPath===e));if(t)return[t];const n=this.entityMetadata.relations.find((t=>t.isWithJoinColumn&&t.propertyName===e));if(n)return n.joinColumns;const i=this.givenName?'"'+this.givenName+'" ':"",r=this.entityMetadata.targetName;throw new EO(`Index ${i}contains column that is missing in the entity (${r}): `+e)})).reduce(((e,t)=>e.concat(t)))}return this.columnNamesWithOrderingMap=Object.keys(t).reduce(((e,n)=>{const i=this.entityMetadata.columns.find((e=>e.propertyPath===n));return i&&(e[i.databasePath]=t[n]),e}),{}),this.name=this.givenName?this.givenName:e.indexName(this.entityMetadata.tableName,this.columns.map((e=>e.databaseName)),this.where),this}}class cM{constructor(e){this.isTreeParent=!1,this.isTreeChildren=!1,this.isPrimary=!1,this.isLazy=!1,this.isEager=!1,this.persistenceEnabled=!0,this.isCascadeInsert=!1,this.isCascadeUpdate=!1,this.isCascadeRemove=!1,this.isCascadeSoftRemove=!1,this.isCascadeRecover=!1,this.isNullable=!0,this.createForeignKeyConstraints=!0,this.isOwning=!1,this.isOneToOne=!1,this.isOneToOneOwner=!1,this.isWithJoinColumn=!1,this.isOneToOneNotOwner=!1,this.isOneToMany=!1,this.isManyToOne=!1,this.isManyToMany=!1,this.isManyToManyOwner=!1,this.isManyToManyNotOwner=!1,this.foreignKeys=[],this.joinColumns=[],this.inverseJoinColumns=[],this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata;const t=e.args;this.target=t.target,this.propertyName=t.propertyName,this.relationType=t.relationType,t.inverseSideProperty&&(this.givenInverseSidePropertyFactory=t.inverseSideProperty),this.isLazy=t.isLazy||!1,this.isCascadeInsert=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("insert"),this.isCascadeUpdate=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("update"),this.isCascadeRemove=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("remove"),this.isCascadeSoftRemove=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("soft-remove"),this.isCascadeRecover=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("recover"),this.isNullable=!1!==t.options.nullable&&!this.isPrimary,this.onDelete=t.options.onDelete,this.onUpdate=t.options.onUpdate,this.deferrable=t.options.deferrable,this.createForeignKeyConstraints=!1!==t.options.createForeignKeyConstraints,this.isEager=t.options.eager||!1,this.persistenceEnabled=!1!==t.options.persistence,this.orphanedRowAction=t.options.orphanedRowAction||"nullify",this.isTreeParent=t.isTreeParent||!1,this.isTreeChildren=t.isTreeChildren||!1,"function"==typeof t.type?this.type="function"==typeof t.type?t.type():t.type:PO.isEntitySchema(t.type)?this.type=t.type.options.name:RO.isObject(t.type)&&"string"==typeof t.type.name?this.type=t.type.name:this.type=t.type,this.isOneToOne="one-to-one"===this.relationType,this.isOneToMany="one-to-many"===this.relationType,this.isManyToOne="many-to-one"===this.relationType,this.isManyToMany="many-to-many"===this.relationType,this.isOneToOneNotOwner=!!this.isOneToOne,this.isManyToManyNotOwner=!!this.isManyToMany}getRelationIdMap(e){const t=(this.isOwning?this.joinColumns:this.inverseRelation.joinColumns).map((e=>e.referencedColumn));return pP.getValueMap(e,t)}ensureRelationIdMap(e){if(RO.isObject(e))return e;const t=(this.isOwning?this.joinColumns:this.inverseRelation.joinColumns).map((e=>e.referencedColumn));if(t.length>1)throw new EO("Cannot create relation id map for a single value because relation contains multiple referenced columns.");return t[0].createValueMap(e)}getEntityValue(e,t=!1){if(null!=e){if(this.embeddedMetadata){const n=[...this.embeddedMetadata.parentPropertyNames],i=(e,t)=>{const n=e.shift();return n?t[n]?i(e,t[n]):void 0:t},r=i(n,e);return this.isLazy?void 0!==r["__"+this.propertyName+"__"]?r["__"+this.propertyName+"__"]:!0===t?r[this.propertyName]:void 0:r?r[this.isLazy?"__"+this.propertyName+"__":this.propertyName]:void 0}return this.isLazy?void 0!==e["__"+this.propertyName+"__"]?e["__"+this.propertyName+"__"]:!0===t?e[this.propertyName]:void 0:e[this.propertyName]}}setEntityValue(e,t){const n=this.isLazy?"__"+this.propertyName+"__":this.propertyName;if(this.embeddedMetadata){const i=(e,r)=>{const a=e.shift();return a?(r[a.propertyName]||(r[a.propertyName]=a.create()),i(e,r[a.propertyName]),r):(r[n]=t,r)};return i([...this.embeddedMetadata.embeddedMetadataTree],e)}e[n]=t}createValueMap(e){if(this.embeddedMetadata){const t=[...this.embeddedMetadata.parentPropertyNames],n=(t,i)=>{const r=t.shift();return r?(i[r]={},n(t,i[r]),i):(i[this.propertyName]=e,i)};return n(t,{})}return{[this.propertyName]:e}}build(){this.propertyPath=this.buildPropertyPath()}registerForeignKeys(...e){this.foreignKeys.push(...e)}registerJoinColumns(e=[],t=[]){this.joinColumns=e,this.inverseJoinColumns=t,this.isOwning=this.isManyToOne||(this.isManyToMany||this.isOneToOne)&&this.joinColumns.length>0,this.isOneToOneOwner=this.isOneToOne&&this.isOwning,this.isOneToOneNotOwner=this.isOneToOne&&!this.isOwning,this.isManyToManyOwner=this.isManyToMany&&this.isOwning,this.isManyToManyNotOwner=this.isManyToMany&&!this.isOwning,this.isWithJoinColumn=this.isManyToOne||this.isOneToOneOwner}registerJunctionEntityMetadata(e){this.junctionEntityMetadata=e,this.joinTableName=e.tableName,this.inverseRelation&&(this.inverseRelation.junctionEntityMetadata=e,this.joinTableName=e.tableName)}buildInverseSidePropertyPath(){if(this.givenInverseSidePropertyFactory){const e=this.inverseEntityMetadata.propertiesMap;if("function"==typeof this.givenInverseSidePropertyFactory)return this.givenInverseSidePropertyFactory(e);if("string"==typeof this.givenInverseSidePropertyFactory)return this.givenInverseSidePropertyFactory}else{if(this.isTreeParent&&this.entityMetadata.treeChildrenRelation)return this.entityMetadata.treeChildrenRelation.propertyName;if(this.isTreeChildren&&this.entityMetadata.treeParentRelation)return this.entityMetadata.treeParentRelation.propertyName}return""}buildPropertyPath(){return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length?this.embeddedMetadata.parentPropertyNames.join(".")+"."+this.propertyName:this.propertyName}}class uM{constructor(e){this.columns=[],this.relations=[],this.listeners=[],this.indices=[],this.uniques=[],this.relationIds=[],this.relationCounts=[],this.embeddeds=[],this.isAlwaysUsingConstructor=!0,this.isArray=!1,this.parentPropertyNames=[],this.parentPrefixes=[],this.embeddedMetadataTree=[],this.columnsFromTree=[],this.relationsFromTree=[],this.listenersFromTree=[],this.indicesFromTree=[],this.uniquesFromTree=[],this.relationIdsFromTree=[],this.relationCountsFromTree=[],this.entityMetadata=e.entityMetadata,this.type=e.args.type(),this.propertyName=e.args.propertyName,this.customPrefix=e.args.prefix,this.isArray=e.args.isArray}create(e){return"function"!=typeof this.type?{}:(null==e?void 0:e.fromDeserializer)||!this.isAlwaysUsingConstructor?Object.create(this.type.prototype):new this.type}build(e){return this.embeddeds.forEach((t=>t.build(e))),this.prefix=this.buildPrefix(e),this.parentPropertyNames=this.buildParentPropertyNames(),this.parentPrefixes=this.buildParentPrefixes(),this.propertyPath=this.parentPropertyNames.join("."),this.embeddedMetadataTree=this.buildEmbeddedMetadataTree(),this.columnsFromTree=this.buildColumnsFromTree(),this.relationsFromTree=this.buildRelationsFromTree(),this.listenersFromTree=this.buildListenersFromTree(),this.indicesFromTree=this.buildIndicesFromTree(),this.uniquesFromTree=this.buildUniquesFromTree(),this.relationIdsFromTree=this.buildRelationIdsFromTree(),this.relationCountsFromTree=this.buildRelationCountsFromTree(),e.options.entitySkipConstructor&&(this.isAlwaysUsingConstructor=!e.options.entitySkipConstructor),this}buildPartialPrefix(){if(void 0===this.customPrefix||!0===this.customPrefix)return[this.propertyName];if(""===this.customPrefix||!1===this.customPrefix)return[];if("string"==typeof this.customPrefix)return[this.customPrefix];throw new EO(`Invalid prefix option given for ${this.entityMetadata.targetName}#${this.propertyName}`)}buildPrefix(e){if("mongodb"===e.driver.options.type)return this.propertyName;let t=[];return this.parentEmbeddedMetadata&&t.push(this.parentEmbeddedMetadata.buildPrefix(e)),t.push(...this.buildPartialPrefix()),t.join("_")}buildParentPropertyNames(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPropertyNames().concat(this.propertyName):[this.propertyName]}buildParentPrefixes(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPrefixes().concat(this.buildPartialPrefix()):this.buildPartialPrefix()}buildEmbeddedMetadataTree(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildEmbeddedMetadataTree().concat(this):[this]}buildColumnsFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildColumnsFromTree())),this.columns)}buildRelationsFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildRelationsFromTree())),this.relations)}buildListenersFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildListenersFromTree())),this.listeners)}buildIndicesFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildIndicesFromTree())),this.indices)}buildUniquesFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildUniquesFromTree())),this.uniques)}buildRelationIdsFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildRelationIdsFromTree())),this.relationIds)}buildRelationCountsFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildRelationCountsFromTree())),this.relationCounts)}}class dM{constructor(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}setValue(e){const t=this.relation.getEntityValue(e);if(Array.isArray(t))e[this.propertyName]=t.map((e=>this.relation.inverseEntityMetadata.getEntityIdMixedMap(e))).filter((e=>null!=e));else{const n=this.relation.inverseEntityMetadata.getEntityIdMixedMap(t);void 0!==n&&(e[this.propertyName]=n)}}build(){const e="function"==typeof this.relationNameOrFactory?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new EO(`Cannot find relation ${e}. Wrong relation specified for @RelationId decorator.`);this.relation=t}}class hM{constructor(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}build(){const e="function"==typeof this.relationNameOrFactory?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new EO(`Cannot find relation ${e}. Wrong relation specified for @RelationCount decorator.`);this.relation=t}}class pM{}pM.AFTER_LOAD="after-load",pM.BEFORE_INSERT="before-insert",pM.AFTER_INSERT="after-insert",pM.BEFORE_UPDATE="before-update",pM.AFTER_UPDATE="after-update",pM.BEFORE_REMOVE="before-remove",pM.AFTER_REMOVE="after-remove",pM.BEFORE_SOFT_REMOVE="before-soft-remove",pM.AFTER_SOFT_REMOVE="after-soft-remove",pM.BEFORE_RECOVER="before-recover",pM.AFTER_RECOVER="after-recover";class mM{constructor(e){this.columns=[],this.referencedColumns=[],this.columnNames=[],this.referencedColumnNames=[],this.entityMetadata=e.entityMetadata,this.referencedEntityMetadata=e.referencedEntityMetadata,this.columns=e.columns,this.referencedColumns=e.referencedColumns,this.onDelete=e.onDelete||"NO ACTION",this.onUpdate=e.onUpdate||"NO ACTION",this.deferrable=e.deferrable,this.givenName=e.name,e.namingStrategy&&this.build(e.namingStrategy)}build(e){this.columnNames=this.columns.map((e=>e.databaseName)),this.referencedColumnNames=this.referencedColumns.map((e=>e.databaseName)),this.referencedTablePath=this.referencedEntityMetadata.tablePath,this.name=this.givenName?this.givenName:e.foreignKeyName(this.entityMetadata.tableName,this.columnNames,this.referencedEntityMetadata.tableName,this.referencedColumnNames)}}class fM{constructor(e){this.connection=e}build(e,t){var n,i;const r=this.collectReferencedColumns(e,t),a=this.collectInverseReferencedColumns(e,t),o=t.name||this.connection.namingStrategy.joinTableName(e.entityMetadata.tableNameWithoutPrefix,e.inverseEntityMetadata.tableNameWithoutPrefix,e.propertyPath,e.inverseRelation?e.inverseRelation.propertyName:""),s=new pP({connection:this.connection,args:{target:"",name:o,type:"junction",database:t.database||e.entityMetadata.database,schema:t.schema||e.entityMetadata.schema,synchronize:t.synchronize}});s.build();const l=r.map((n=>{const i=t.joinColumns?t.joinColumns.find((e=>!(e.referencedColumnName&&e.referencedColumnName!==n.propertyName||!e.name))):void 0,r=i&&i.name?i.name:this.connection.namingStrategy.joinTableColumnName(e.entityMetadata.tableNameWithoutPrefix,n.propertyName,n.databaseName);return new sM({connection:this.connection,entityMetadata:s,referencedColumn:n,args:{target:"",mode:"virtual",propertyName:r,options:{name:r,length:n.length||!CR.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||"uuid"===this.connection.driver.normalizeType(n)||"uuid"!==n.generationStrategy&&"uuid"!==n.type?n.length:"36",width:n.width,type:n.type,precision:n.precision,scale:n.scale,charset:n.charset,collation:n.collation,zerofill:n.zerofill,unsigned:!!n.zerofill||n.unsigned,enum:n.enum,enumName:n.enumName,foreignKeyConstraintName:null==i?void 0:i.foreignKeyConstraintName,nullable:!1,primary:!0}}})})),c=a.map((n=>{const i=t.inverseJoinColumns?t.inverseJoinColumns.find((e=>!(e.referencedColumnName&&e.referencedColumnName!==n.propertyName||!e.name))):void 0,r=i&&i.name?i.name:this.connection.namingStrategy.joinTableInverseColumnName(e.inverseEntityMetadata.tableNameWithoutPrefix,n.propertyName,n.databaseName);return new sM({connection:this.connection,entityMetadata:s,referencedColumn:n,args:{target:"",mode:"virtual",propertyName:r,options:{length:n.length||!CR.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||"uuid"===this.connection.driver.normalizeType(n)||"uuid"!==n.generationStrategy&&"uuid"!==n.type?n.length:"36",width:n.width,type:n.type,precision:n.precision,scale:n.scale,charset:n.charset,collation:n.collation,zerofill:n.zerofill,unsigned:!!n.zerofill||n.unsigned,enum:n.enum,enumName:n.enumName,foreignKeyConstraintName:null==i?void 0:i.foreignKeyConstraintName,name:r,nullable:!1,primary:!0}}})}));return this.changeDuplicatedColumnNames(l,c),s.ownerColumns=l,s.inverseColumns=c,s.ownColumns=[...l,...c],s.ownColumns.forEach((t=>t.relationMetadata=e)),s.foreignKeys=e.createForeignKeyConstraints?[new mM({entityMetadata:s,referencedEntityMetadata:e.entityMetadata,columns:l,referencedColumns:r,name:null===(n=l[0])||void 0===n?void 0:n.foreignKeyConstraintName,onDelete:"spanner"===this.connection.driver.options.type?"NO ACTION":e.onDelete||"CASCADE",onUpdate:"oracle"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type?"NO ACTION":e.onUpdate||"CASCADE"}),new mM({entityMetadata:s,referencedEntityMetadata:e.inverseEntityMetadata,columns:c,referencedColumns:a,name:null===(i=c[0])||void 0===i?void 0:i.foreignKeyConstraintName,onDelete:"spanner"===this.connection.driver.options.type?"NO ACTION":e.inverseRelation?e.inverseRelation.onDelete:"CASCADE",onUpdate:"oracle"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type?"NO ACTION":e.inverseRelation?e.inverseRelation.onUpdate:"CASCADE"})]:[],s.ownIndices=[new lM({entityMetadata:s,columns:l,args:{target:s.target,synchronize:!0}}),new lM({entityMetadata:s,columns:c,args:{target:s.target,synchronize:!0}})],s}collectReferencedColumns(e,t){const n=!!t.joinColumns&&t.joinColumns.find((e=>!!e.referencedColumnName));return!t.joinColumns||t.joinColumns&&!n?e.entityMetadata.columns.filter((e=>e.isPrimary)):t.joinColumns.map((t=>{const n=e.entityMetadata.columns.find((e=>e.propertyName===t.referencedColumnName));if(!n)throw new EO(`Referenced column ${t.referencedColumnName} was not found in entity ${e.entityMetadata.name}`);return n}))}collectInverseReferencedColumns(e,t){const n=!!t.inverseJoinColumns,i=!!n&&t.inverseJoinColumns.find((e=>!!e.referencedColumnName));return!n||n&&!i?e.inverseEntityMetadata.primaryColumns:t.inverseJoinColumns.map((t=>{const n=e.inverseEntityMetadata.ownColumns.find((e=>e.propertyName===t.referencedColumnName));if(!n)throw new EO(`Referenced column ${t.referencedColumnName} was not found in entity ${e.inverseEntityMetadata.name}`);return n}))}changeDuplicatedColumnNames(e,t){e.forEach((e=>{t.forEach((t=>{if(e.givenDatabaseName===t.givenDatabaseName){const n=this.connection.namingStrategy.joinTableColumnDuplicationPrefix(e.propertyName,1);e.propertyName=n,e.givenDatabaseName=n;const i=this.connection.namingStrategy.joinTableColumnDuplicationPrefix(t.propertyName,2);t.propertyName=i,t.givenDatabaseName=i}}))}))}}class gM{constructor(e){this.connection=e}build(e){const t=new pP({parentClosureEntityMetadata:e,connection:this.connection,args:{target:"",name:e.treeOptions&&e.treeOptions.closureTableName?e.treeOptions.closureTableName:e.tableNameWithoutPrefix,type:"closure-junction"}});return t.build(),e.primaryColumns.forEach((n=>{t.ownColumns.push(new sM({connection:this.connection,entityMetadata:t,closureType:"ancestor",referencedColumn:n,args:{target:"",mode:"virtual",propertyName:e.treeOptions&&e.treeOptions.ancestorColumnName?e.treeOptions.ancestorColumnName(n):n.propertyName+"_ancestor",options:{primary:!0,length:n.length,type:n.type}}})),t.ownColumns.push(new sM({connection:this.connection,entityMetadata:t,closureType:"descendant",referencedColumn:n,args:{target:"",mode:"virtual",propertyName:e.treeOptions&&e.treeOptions.descendantColumnName?e.treeOptions.descendantColumnName(n):n.propertyName+"_descendant",options:{primary:!0,length:n.length,type:n.type}}}))})),t.ownIndices=[new lM({entityMetadata:t,columns:[t.ownColumns[0]],args:{target:t.target,synchronize:!0}}),new lM({entityMetadata:t,columns:[t.ownColumns[1]],args:{target:t.target,synchronize:!0}})],e.treeLevelColumn&&t.ownColumns.push(new sM({connection:this.connection,entityMetadata:t,args:{target:"",mode:"virtual",propertyName:"level",options:{type:this.connection.driver.mappedDataTypes.treeLevel}}})),t.foreignKeys=[new mM({entityMetadata:t,referencedEntityMetadata:e,columns:[t.ownColumns[0]],referencedColumns:e.primaryColumns,onDelete:"mssql"===this.connection.driver.options.type?"NO ACTION":"CASCADE"}),new mM({entityMetadata:t,referencedEntityMetadata:e,columns:[t.ownColumns[1]],referencedColumns:e.primaryColumns,onDelete:"mssql"===this.connection.driver.options.type?"NO ACTION":"CASCADE"})],t}}class bM{constructor(e){this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,this.givenName=e.args.name,this.givenColumnNames=e.args.columns,this.deferrable=e.args.deferrable)}build(e){const t={};if(this.givenColumnNames){let e=[];if(Array.isArray(this.givenColumnNames))e=this.givenColumnNames.map((e=>this.embeddedMetadata?this.embeddedMetadata.propertyPath+"."+e:e.trim())),e.forEach((e=>t[e]=1));else{const n=this.givenColumnNames(this.entityMetadata.propertiesMap);Array.isArray(n)?(e=n.map((e=>String(e))),e.forEach((e=>t[e]=1))):(e=Object.keys(n).map((e=>String(e))),Object.keys(n).forEach((e=>t[e]=n[e])))}this.columns=e.map((e=>{const t=this.entityMetadata.columns.find((t=>t.propertyPath===e));if(t)return[t];const n=this.entityMetadata.relations.find((t=>t.isWithJoinColumn&&t.propertyName===e));if(n)return n.joinColumns;const i=this.givenName?'"'+this.givenName+'" ':"",r=this.entityMetadata.targetName;throw new EO(`Unique constraint ${i}contains column that is missing in the entity (${r}): `+e)})).reduce(((e,t)=>e.concat(t)))}return this.columnNamesWithOrderingMap=Object.keys(t).reduce(((e,n)=>{const i=this.entityMetadata.columns.find((e=>e.propertyPath===n));return i&&(e[i.databasePath]=t[n]),e}),{}),this.name=this.givenName?this.givenName:e.uniqueConstraintName(this.entityMetadata.tableName,this.columns.map((e=>e.databaseName))),this}}class yM{constructor(e){this.connection=e}build(e,t){var n;const i=this.collectReferencedColumns(e,t),r=this.collectColumns(e,t,i);if(!i.length||!t.createForeignKeyConstraints)return{foreignKey:void 0,columns:r,uniqueConstraint:void 0};const a=new mM({name:null===(n=e[0])||void 0===n?void 0:n.foreignKeyConstraintName,entityMetadata:t.entityMetadata,referencedEntityMetadata:t.inverseEntityMetadata,namingStrategy:this.connection.namingStrategy,columns:r,referencedColumns:i,onDelete:t.onDelete,onUpdate:t.onUpdate,deferrable:t.deferrable});if(r.every((e=>e.isPrimary))||!t.isOneToOne)return{foreignKey:a,columns:r,uniqueConstraint:void 0};const o=new bM({entityMetadata:t.entityMetadata,columns:a.columns,args:{name:this.connection.namingStrategy.relationConstraintName(t.entityMetadata.tableName,a.columns.map((e=>e.databaseName))),target:t.entityMetadata.target}});return o.build(this.connection.namingStrategy),{foreignKey:a,columns:r,uniqueConstraint:o}}collectReferencedColumns(e,t){const n=e.find((e=>!!e.referencedColumnName)),i=0===e.length&&t.isManyToOne,r=e.length>0&&!n;return i||r?t.inverseEntityMetadata.primaryColumns:e.map((e=>{const n=t.inverseEntityMetadata.ownColumns.find((t=>t.propertyName===e.referencedColumnName));if(!n)throw new EO(`Referenced column ${e.referencedColumnName} was not found in entity ${t.inverseEntityMetadata.name}`);return n}))}collectColumns(e,t,n){return n.map((n=>{const i=e.find((e=>!(e.referencedColumnName&&e.referencedColumnName!==n.propertyName||!e.name))),r=i?i.name:this.connection.namingStrategy.joinColumnName(t.propertyName,n.propertyName);let a=(t.embeddedMetadata?t.embeddedMetadata.columns:t.entityMetadata.ownColumns).find((e=>e.databaseNameWithoutPrefixes===r));return a||(a=new sM({connection:this.connection,entityMetadata:t.entityMetadata,embeddedMetadata:t.embeddedMetadata,args:{target:"",mode:"virtual",propertyName:t.propertyName,options:{name:r,type:n.type,length:n.length||!CR.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||"uuid"===this.connection.driver.normalizeType(n)||"uuid"!==n.generationStrategy&&"uuid"!==n.type?n.length:"36",width:n.width,charset:n.charset,collation:n.collation,precision:n.precision,scale:n.scale,zerofill:n.zerofill,unsigned:n.unsigned,comment:n.comment,enum:n.enum,enumName:n.enumName,primary:t.isPrimary,nullable:t.isNullable}}}),t.entityMetadata.registerColumn(a)),a.referencedColumn=n,a.type=n.type,a.relationMetadata=t,a.build(this.connection),a}))}}class vM{constructor(e){this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.type=e.args.type}isAllowed(e){return this.entityMetadata.target===e.constructor||"function"==typeof this.entityMetadata.target&&e.constructor.prototype instanceof this.entityMetadata.target}execute(e){if(!this.embeddedMetadata)return e[this.propertyName]();this.callEntityEmbeddedMethod(e,this.embeddedMetadata.propertyPath.split("."))}callEntityEmbeddedMethod(e,t){const n=t.shift();n&&e[n]&&(0===t.length?Array.isArray(e[n])?e[n].map((e=>e[this.propertyName]())):e[n][this.propertyName]():e[n]&&this.callEntityEmbeddedMethod(e[n],t))}}class wM{constructor(e){this.entityMetadata=e.entityMetadata,e.args&&(this.target=e.args.target,this.expression=e.args.expression,this.givenName=e.args.name)}build(e){return this.name=this.givenName?this.givenName:e.checkConstraintName(this.entityMetadata.tableName,this.expression),this}}class EM{constructor(e){this.entityMetadata=e.entityMetadata,e.args&&(this.target=e.args.target,this.expression=e.args.expression,this.givenName=e.args.name)}build(e){return this.name=this.givenName?this.givenName:e.exclusionConstraintName(this.entityMetadata.tableName,this.expression),this}}class xM{constructor(e,t){this.connection=e,this.metadataArgsStorage=t,this.junctionEntityMetadataBuilder=new fM(e),this.closureJunctionEntityMetadataBuilder=new gM(e),this.relationJoinColumnBuilder=new yM(e)}build(e){const t=(e?this.metadataArgsStorage.filterTables(e):this.metadataArgsStorage.tables).filter((e=>"regular"===e.type||"closure"===e.type||"entity-child"===e.type||"view"===e.type)).map((e=>this.createEntityMetadata(e)));return t.forEach((e=>this.computeParentEntityMetadata(t,e))),t.forEach((e=>{e.childEntityMetadatas=t.filter((t=>"function"==typeof e.target&&"function"==typeof t.target&&qA.isInherited(t.target,e.target)))})),t.filter((e=>"entity-child"!==e.tableType)).forEach((e=>e.build())),t.filter((e=>"entity-child"===e.tableType)).forEach((e=>e.build())),t.filter((e=>"entity-child"!==e.tableType)).forEach((e=>this.computeEntityMetadataStep1(t,e))),t.filter((e=>"entity-child"===e.tableType)).forEach((e=>this.computeEntityMetadataStep1(t,e))),t.forEach((e=>this.computeEntityMetadataStep2(e))),t.forEach((e=>this.computeInverseProperties(e,t))),t.filter((e=>"entity-child"!==e.tableType)).forEach((e=>{e.relations.filter((e=>e.isOneToOne||e.isManyToOne)).forEach((t=>{const n=this.metadataArgsStorage.filterJoinColumns(t.target,t.propertyName),{foreignKey:i,columns:r,uniqueConstraint:a}=this.relationJoinColumnBuilder.build(n,t);if(i&&(t.registerForeignKeys(i),e.foreignKeys.push(i)),r&&t.registerJoinColumns(r),a)if(CR.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type||"mssql"===this.connection.driver.options.type||"sap"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type){const n=new lM({entityMetadata:a.entityMetadata,columns:a.columns,args:{target:a.target,name:a.name,unique:!0,synchronize:!0}});"mssql"===this.connection.driver.options.type&&(n.where=n.columns.map((e=>`${this.connection.driver.escape(e.databaseName)} IS NOT NULL`)).join(" AND ")),"spanner"===this.connection.driver.options.type&&(n.isNullFiltered=!0),t.embeddedMetadata?t.embeddedMetadata.indices.push(n):t.entityMetadata.ownIndices.push(n),this.computeEntityMetadataStep2(e)}else t.embeddedMetadata?t.embeddedMetadata.uniques.push(a):t.entityMetadata.ownUniques.push(a),this.computeEntityMetadataStep2(e);if(i&&"cockroachdb"===this.connection.driver.options.type){const n=new lM({entityMetadata:t.entityMetadata,columns:i.columns,args:{target:t.entityMetadata.target,synchronize:!0}});t.embeddedMetadata?t.embeddedMetadata.indices.push(n):t.entityMetadata.ownIndices.push(n),this.computeEntityMetadataStep2(e)}})),e.relations.filter((e=>e.isManyToMany)).forEach((e=>{const n=this.metadataArgsStorage.findJoinTable(e.target,e.propertyName);if(!n)return;const i=this.junctionEntityMetadataBuilder.build(e,n);e.registerForeignKeys(...i.foreignKeys),e.registerJoinColumns(i.ownIndices[0].columns,i.ownIndices[1].columns),e.registerJunctionEntityMetadata(i),this.computeEntityMetadataStep2(i),this.computeInverseProperties(i,t),t.push(i)}))})),t.forEach((e=>{e.relationsWithJoinColumns=e.relations.filter((e=>e.isWithJoinColumn)),e.hasNonNullableRelations=e.relationsWithJoinColumns.some((e=>!e.isNullable||e.isPrimary))})),t.filter((e=>"closure-table"===e.treeType)).forEach((e=>{const n=this.closureJunctionEntityMetadataBuilder.build(e);e.closureJunctionTable=n,this.computeEntityMetadataStep2(n),this.computeInverseProperties(n,t),t.push(n)})),t.filter((e=>"STI"===e.inheritancePattern&&e.discriminatorColumn)).forEach((e=>this.createKeysForTableInheritance(e))),t.forEach((e=>{e.indices.forEach((e=>e.build(this.connection.namingStrategy)))})),t.forEach((e=>{e.uniques.forEach((e=>e.build(this.connection.namingStrategy)))})),t.forEach((e=>{e.checks.forEach((e=>e.build(this.connection.namingStrategy)))})),t.forEach((e=>{e.exclusions.forEach((e=>e.build(this.connection.namingStrategy)))})),t.filter((e=>"function"==typeof e.target)).forEach((e=>{e.relations.filter((e=>e.isLazy)).forEach((t=>{this.connection.relationLoader.enableLazyLoad(t,e.target.prototype)}))})),t.forEach((e=>{e.columns.forEach((t=>{const n=this.metadataArgsStorage.findGenerated(t.target,t.propertyName);n&&(t.isGenerated=!0,t.generationStrategy=n.strategy,"uuid"===n.strategy?t.type="uuid":"rowid"===n.strategy?t.type="int":t.type=t.type||Number,t.build(this.connection),this.computeEntityMetadataStep2(e))}))})),t}createEntityMetadata(e){const t="function"==typeof e.target?qA.getInheritanceTree(e.target):[e.target],n=this.metadataArgsStorage.findInheritanceType(e.target),i=this.metadataArgsStorage.findTree(e.target);let r;return(n&&"STI"===n.pattern||"entity-child"===e.type)&&(r=this.metadataArgsStorage.filterSingleTableChildren(e.target).map((e=>e.target)).filter((e=>"function"==typeof e)),t.push(...r)),new pP({connection:this.connection,args:e,inheritanceTree:t,tableTree:i,inheritancePattern:n?n.pattern:void 0})}computeParentEntityMetadata(e,t){"entity-child"===t.tableType&&(t.parentEntityMetadata=e.find((e=>-1!==e.inheritanceTree.indexOf(t.target)&&"STI"===e.inheritancePattern)))}computeEntityMetadataStep1(e,t){const n=this.metadataArgsStorage.findInheritanceType(t.target),i=this.metadataArgsStorage.findDiscriminatorValue(t.target);if(t.discriminatorValue=void 0!==i?i.value:t.target.name,t.embeddeds=this.createEmbeddedsRecursively(t,this.metadataArgsStorage.filterEmbeddeds(t.inheritanceTree)).map((e=>("STI"===t.inheritancePattern&&(e.columns=e.columns.map((e=>(e.isNullable=!0,e)))),e))),t.ownColumns=this.metadataArgsStorage.filterColumns(t.inheritanceTree).map((n=>{if("entity-child"===t.tableType)return t.parentEntityMetadata.ownColumns.find((e=>e.propertyName===n.propertyName));const i=new sM({connection:this.connection,entityMetadata:t,args:n});return e.find((e=>"entity-child"===e.tableType&&e.target===n.target))&&(i.isNullable=!0),i})),n&&n.column){const e=n.column&&n.column.name?n.column.name:"type";let i=t.ownColumns.find((t=>t.propertyName===e));i?i.isDiscriminator=!0:(i=new sM({connection:this.connection,entityMetadata:t,args:{target:t.target,mode:"virtual",propertyName:e,options:n.column||{name:e,type:"varchar",nullable:!1}}}),i.isVirtual=!0,i.isDiscriminator=!0,t.ownColumns.push(i))}if("entity-child"===t.tableType){const e=t.parentEntityMetadata.ownColumns.find((e=>e.isDiscriminator));e&&!t.ownColumns.find((t=>t===e))&&t.ownColumns.push(e),t.inheritancePattern=t.parentEntityMetadata.inheritancePattern,!t.treeType&&t.parentEntityMetadata.treeType&&(t.treeType=t.parentEntityMetadata.treeType,t.treeOptions=t.parentEntityMetadata.treeOptions,t.treeParentRelation=t.parentEntityMetadata.treeParentRelation,t.treeLevelColumn=t.parentEntityMetadata.treeLevelColumn)}const{namingStrategy:r}=this.connection;if("materialized-path"===t.treeType)t.ownColumns.push(new sM({connection:this.connection,entityMetadata:t,materializedPath:!0,args:{target:t.target,mode:"virtual",propertyName:"mpath",options:{name:r.materializedPathColumnName,type:String,nullable:!0,default:""}}}));else if("nested-set"===t.treeType){const{left:e,right:n}=r.nestedSetColumnNames;t.ownColumns.push(new sM({connection:this.connection,entityMetadata:t,nestedSetLeft:!0,args:{target:t.target,mode:"virtual",propertyName:e,options:{name:e,type:Number,nullable:!1,default:1}}})),t.ownColumns.push(new sM({connection:this.connection,entityMetadata:t,nestedSetRight:!0,args:{target:t.target,mode:"virtual",propertyName:n,options:{name:n,type:Number,nullable:!1,default:2}}}))}if(t.ownRelations=this.metadataArgsStorage.filterRelations(t.inheritanceTree).map((e=>{if("entity-child"===t.tableType){const n=t.parentEntityMetadata.ownRelations.find((t=>t.propertyName===e.propertyName)),i="function"==typeof e.type?e.type():e.type;if(n.type!==i){const e=Object.create(n);return e.type=i,e}return n}return new cM({entityMetadata:t,args:e})})),t.relationIds=this.metadataArgsStorage.filterRelationIds(t.inheritanceTree).map((e=>"entity-child"===t.tableType?t.parentEntityMetadata.relationIds.find((t=>t.propertyName===e.propertyName)):new dM({entityMetadata:t,args:e}))),t.relationCounts=this.metadataArgsStorage.filterRelationCounts(t.inheritanceTree).map((e=>"entity-child"===t.tableType?t.parentEntityMetadata.relationCounts.find((t=>t.propertyName===e.propertyName)):new hM({entityMetadata:t,args:e}))),t.ownListeners=this.metadataArgsStorage.filterListeners(t.inheritanceTree).map((e=>new vM({entityMetadata:t,args:e}))),t.checks=this.metadataArgsStorage.filterChecks(t.inheritanceTree).map((e=>new wM({entityMetadata:t,args:e}))),"postgres"===this.connection.driver.options.type&&(t.exclusions=this.metadataArgsStorage.filterExclusions(t.inheritanceTree).map((e=>new EM({entityMetadata:t,args:e})))),"cockroachdb"===this.connection.driver.options.type){t.ownIndices=this.metadataArgsStorage.filterIndices(t.inheritanceTree).filter((e=>!e.unique)).map((e=>new lM({entityMetadata:t,args:e})));const e=this.metadataArgsStorage.filterIndices(t.inheritanceTree).filter((e=>e.unique)).map((e=>new bM({entityMetadata:t,args:{target:e.target,name:e.name,columns:e.columns}})));t.ownUniques.push(...e)}else t.ownIndices=this.metadataArgsStorage.filterIndices(t.inheritanceTree).map((e=>new lM({entityMetadata:t,args:e})));if(CR.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type||"sap"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type){const e=this.metadataArgsStorage.filterUniques(t.inheritanceTree).map((e=>new lM({entityMetadata:t,args:{target:e.target,name:e.name,columns:e.columns,unique:!0,synchronize:!0}})));t.ownIndices.push(...e)}else{const e=this.metadataArgsStorage.filterUniques(t.inheritanceTree).map((e=>new bM({entityMetadata:t,args:e})));t.ownUniques.push(...e)}}createEmbeddedsRecursively(e,t){return t.map((t=>{const n=new uM({entityMetadata:e,args:t}),i="function"==typeof n.type?qA.getInheritanceTree(n.type):[n.type];return n.columns=this.metadataArgsStorage.filterColumns(i).map((t=>new sM({connection:this.connection,entityMetadata:e,embeddedMetadata:n,args:t}))),n.relations=this.metadataArgsStorage.filterRelations(i).map((t=>new cM({entityMetadata:e,embeddedMetadata:n,args:t}))),n.listeners=this.metadataArgsStorage.filterListeners(i).map((t=>new vM({entityMetadata:e,embeddedMetadata:n,args:t}))),n.indices=this.metadataArgsStorage.filterIndices(i).map((t=>new lM({entityMetadata:e,embeddedMetadata:n,args:t}))),n.uniques=this.metadataArgsStorage.filterUniques(i).map((t=>new bM({entityMetadata:e,embeddedMetadata:n,args:t}))),n.relationIds=this.metadataArgsStorage.filterRelationIds(i).map((t=>new dM({entityMetadata:e,args:t}))),n.relationCounts=this.metadataArgsStorage.filterRelationCounts(i).map((t=>new hM({entityMetadata:e,args:t}))),n.embeddeds=this.createEmbeddedsRecursively(e,this.metadataArgsStorage.filterEmbeddeds(i)),n.embeddeds.forEach((e=>e.parentEmbeddedMetadata=n)),e.allEmbeddeds.push(n),n}))}computeEntityMetadataStep2(e){e.embeddeds.forEach((e=>e.build(this.connection))),e.embeddeds.forEach((e=>{e.columnsFromTree.forEach((e=>e.build(this.connection))),e.relationsFromTree.forEach((e=>e.build()))})),e.ownColumns.forEach((e=>e.build(this.connection))),e.ownRelations.forEach((e=>e.build())),e.relations=e.embeddeds.reduce(((e,t)=>e.concat(t.relationsFromTree)),e.ownRelations),e.eagerRelations=e.relations.filter((e=>e.isEager)),e.lazyRelations=e.relations.filter((e=>e.isLazy)),e.oneToOneRelations=e.relations.filter((e=>e.isOneToOne)),e.oneToManyRelations=e.relations.filter((e=>e.isOneToMany)),e.manyToOneRelations=e.relations.filter((e=>e.isManyToOne)),e.manyToManyRelations=e.relations.filter((e=>e.isManyToMany)),e.ownerOneToOneRelations=e.relations.filter((e=>e.isOneToOneOwner)),e.ownerManyToManyRelations=e.relations.filter((e=>e.isManyToManyOwner)),e.treeParentRelation=e.relations.find((e=>e.isTreeParent)),e.treeChildrenRelation=e.relations.find((e=>e.isTreeChildren)),e.columns=e.embeddeds.reduce(((e,t)=>e.concat(t.columnsFromTree)),e.ownColumns),e.listeners=e.embeddeds.reduce(((e,t)=>e.concat(t.listenersFromTree)),e.ownListeners),e.afterLoadListeners=e.listeners.filter((e=>e.type===pM.AFTER_LOAD)),e.afterInsertListeners=e.listeners.filter((e=>e.type===pM.AFTER_INSERT)),e.afterUpdateListeners=e.listeners.filter((e=>e.type===pM.AFTER_UPDATE)),e.afterRemoveListeners=e.listeners.filter((e=>e.type===pM.AFTER_REMOVE)),e.afterSoftRemoveListeners=e.listeners.filter((e=>e.type===pM.AFTER_SOFT_REMOVE)),e.afterRecoverListeners=e.listeners.filter((e=>e.type===pM.AFTER_RECOVER)),e.beforeInsertListeners=e.listeners.filter((e=>e.type===pM.BEFORE_INSERT)),e.beforeUpdateListeners=e.listeners.filter((e=>e.type===pM.BEFORE_UPDATE)),e.beforeRemoveListeners=e.listeners.filter((e=>e.type===pM.BEFORE_REMOVE)),e.beforeSoftRemoveListeners=e.listeners.filter((e=>e.type===pM.BEFORE_SOFT_REMOVE)),e.beforeRecoverListeners=e.listeners.filter((e=>e.type===pM.BEFORE_RECOVER)),e.indices=e.embeddeds.reduce(((e,t)=>e.concat(t.indicesFromTree)),e.ownIndices),e.uniques=e.embeddeds.reduce(((e,t)=>e.concat(t.uniquesFromTree)),e.ownUniques),e.primaryColumns=e.columns.filter((e=>e.isPrimary)),e.nonVirtualColumns=e.columns.filter((e=>!e.isVirtual)),e.ancestorColumns=e.columns.filter((e=>"ancestor"===e.closureType)),e.descendantColumns=e.columns.filter((e=>"descendant"===e.closureType)),e.hasMultiplePrimaryKeys=e.primaryColumns.length>1,e.generatedColumns=e.columns.filter((e=>e.isGenerated||e.isObjectId)),e.hasUUIDGeneratedColumns=e.columns.filter((e=>e.isGenerated||"uuid"===e.generationStrategy)).length>0,e.createDateColumn=e.columns.find((e=>e.isCreateDate)),e.updateDateColumn=e.columns.find((e=>e.isUpdateDate)),e.deleteDateColumn=e.columns.find((e=>e.isDeleteDate)),e.versionColumn=e.columns.find((e=>e.isVersion)),e.discriminatorColumn=e.columns.find((e=>e.isDiscriminator)),e.treeLevelColumn=e.columns.find((e=>e.isTreeLevel)),e.nestedSetLeftColumn=e.columns.find((e=>e.isNestedSetLeft)),e.nestedSetRightColumn=e.columns.find((e=>e.isNestedSetRight)),e.materializedPathColumn=e.columns.find((e=>e.isMaterializedPath)),e.objectIdColumn=e.columns.find((e=>e.isObjectId)),e.foreignKeys.forEach((e=>e.build(this.connection.namingStrategy))),e.propertiesMap=e.createPropertiesMap(),e.relationIds.forEach((e=>e.build())),e.relationCounts.forEach((e=>e.build())),e.embeddeds.forEach((e=>{e.relationIdsFromTree.forEach((e=>e.build())),e.relationCountsFromTree.forEach((e=>e.build()))}))}computeInverseProperties(e,t){e.relations.forEach((n=>{const i=t.find((e=>e.target===n.type||"string"==typeof n.type&&(e.targetName===n.type||e.givenTableName===n.type)));if(!i)throw new EO("Entity metadata for "+e.name+"#"+n.propertyPath+" was not found. Check if you specified a correct entity object and if it's connected in the connection options.");n.inverseEntityMetadata=i,n.inverseSidePropertyPath=n.buildInverseSidePropertyPath(),n.inverseRelation=i.relations.find((e=>e.propertyPath===n.inverseSidePropertyPath))}))}createKeysForTableInheritance(e){e.indices.push(new lM({entityMetadata:e,columns:[e.discriminatorColumn],args:{target:e.target,unique:!1}}))}}class TM extends EO{static createEntitySchemaIsRequiredException(e){return new TM(`EntitySchema is required for ${e} embedded field`)}static createTargetIsRequired(e){return new TM(`Target field is required for ${e} embedded EntitySchema`)}constructor(e){super(e)}}class CM{transform(e){const t=new BA;return e.forEach((e=>{var n;const i=e.options,r={target:i.target||i.name,name:i.tableName,database:i.database,schema:i.schema,type:i.type||"regular",orderBy:i.orderBy,synchronize:i.synchronize,withoutRowid:!!i.withoutRowid,expression:i.expression};t.tables.push(r);const{inheritance:a}=i;a&&t.inheritances.push({target:i.target,pattern:null!==(n=a.pattern)&&void 0!==n?n:"STI",column:a.column?"string"==typeof a.column?{name:a.column}:a.column:void 0}),this.transformColumnsRecursive(i,t)})),t}transformColumnsRecursive(e,t){Object.keys(e.columns).forEach((n=>{const i=e.columns[n];let r="regular";i.createDate&&(r="createDate"),i.updateDate&&(r="updateDate"),i.deleteDate&&(r="deleteDate"),i.version&&(r="version"),i.treeChildrenCount&&(r="treeChildrenCount"),i.treeLevel&&(r="treeLevel"),i.objectId&&(r="objectId");const a={target:e.target||e.name,mode:r,propertyName:n,options:{type:i.type,name:i.objectId?"_id":i.name,primaryKeyConstraintName:i.primaryKeyConstraintName,length:i.length,width:i.width,nullable:i.nullable,readonly:i.readonly,update:i.update,select:i.select,insert:i.insert,primary:i.primary,unique:i.unique,comment:i.comment,default:i.default,onUpdate:i.onUpdate,precision:i.precision,scale:i.scale,zerofill:i.zerofill,unsigned:i.unsigned,charset:i.charset,collation:i.collation,enum:i.enum,enumName:i.enumName,asExpression:i.asExpression,generatedType:i.generatedType,hstoreType:i.hstoreType,array:i.array,transformer:i.transformer,spatialFeatureType:i.spatialFeatureType,srid:i.srid}};if(t.columns.push(a),i.generated){const r={target:e.target||e.name,propertyName:n,strategy:"string"==typeof i.generated?i.generated:"increment"};t.generations.push(r)}i.unique&&t.uniques.push({target:e.target||e.name,columns:[n]})})),e.relations&&Object.keys(e.relations).forEach((n=>{const i=e.relations[n],r={target:e.target||e.name,propertyName:n,relationType:i.type,isLazy:i.lazy||!1,type:i.target,inverseSideProperty:i.inverseSide,isTreeParent:i.treeParent,isTreeChildren:i.treeChildren,options:{eager:i.eager||!1,cascade:i.cascade,nullable:i.nullable,onDelete:i.onDelete,onUpdate:i.onUpdate,deferrable:i.deferrable,createForeignKeyConstraints:i.createForeignKeyConstraints,persistence:i.persistence,orphanedRowAction:i.orphanedRowAction}};if(t.relations.push(r),i.joinColumn)if("boolean"==typeof i.joinColumn){const i={target:e.target||e.name,propertyName:n};t.joinColumns.push(i)}else{const r=Array.isArray(i.joinColumn)?i.joinColumn:[i.joinColumn];for(const i of r){const r={target:e.target||e.name,propertyName:n,name:i.name,referencedColumnName:i.referencedColumnName,foreignKeyConstraintName:i.foreignKeyConstraintName};t.joinColumns.push(r)}}if(i.joinTable)if("boolean"==typeof i.joinTable){const i={target:e.target||e.name,propertyName:n};t.joinTables.push(i)}else{const r={target:e.target||e.name,propertyName:n,name:i.joinTable.name,database:i.joinTable.database,schema:i.joinTable.schema,joinColumns:i.joinTable.joinColumn?[i.joinTable.joinColumn]:i.joinTable.joinColumns,inverseJoinColumns:i.joinTable.inverseJoinColumn?[i.joinTable.inverseJoinColumn]:i.joinTable.inverseJoinColumns};t.joinTables.push(r)}})),e.relationIds&&Object.keys(e.relationIds).forEach((n=>{const i=e.relationIds[n],r={propertyName:n,relation:i.relationName,target:e.target||e.name,alias:i.alias,queryBuilderFactory:i.queryBuilderFactory};t.relationIds.push(r)})),e.indices&&e.indices.forEach((n=>{const i={target:e.target||e.name,name:n.name,unique:!0===n.unique,spatial:!0===n.spatial,fulltext:!0===n.fulltext,nullFiltered:!0===n.nullFiltered,parser:n.parser,synchronize:!1!==n.synchronize,where:n.where,sparse:n.sparse,columns:n.columns};t.indices.push(i)})),e.uniques&&e.uniques.forEach((n=>{const i={target:e.target||e.name,name:n.name,columns:n.columns,deferrable:n.deferrable};t.uniques.push(i)})),e.checks&&e.checks.forEach((n=>{const i={target:e.target||e.name,name:n.name,expression:n.expression};t.checks.push(i)})),e.exclusions&&e.exclusions.forEach((n=>{const i={target:e.target||e.name,name:n.name,expression:n.expression};t.exclusions.push(i)})),e.embeddeds&&Object.keys(e.embeddeds).forEach((n=>{const i=e.embeddeds[n];if(!i.schema)throw TM.createEntitySchemaIsRequiredException(n);const r=i.schema.options;t.embeddeds.push({target:e.target||e.name,propertyName:n,isArray:!0===i.array,prefix:void 0!==i.prefix?i.prefix:void 0,type:()=>(null==r?void 0:r.target)||r.name}),this.transformColumnsRecursive(r,t)}))}}class SM{constructor(e){this.connection=e}async buildMigrations(e){const[t,n]=oP.splitClassesAndStrings(e);return[...t,...await(this.connection.logger,[])].map((e=>oM(e)))}async buildSubscribers(e){const[t,n]=oP.splitClassesAndStrings(e||[]),i=[...t,...await(this.connection.logger,[])];return h$().filterSubscribers(i).map((e=>oM(e.target)))}async buildEntityMetadatas(e){const[t,n]=oP.splitClassesAndStrings(e||[]),i=t.filter((e=>!PO.isEntitySchema(e))),r=t.filter((e=>PO.isEntitySchema(e))),a=[...i,...await(this.connection.logger,[])];a.forEach((e=>{PO.isEntitySchema(e)&&r.push(e)}));const o=new xM(this.connection,h$()).build(a),s=(new CM).transform(r);return[...o,...new xM(this.connection,s).build()]}}class NM{constructor(e,t,n,i,r){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=n,this.rawRelationCountResults=i,this.queryRunner=r}transform(e,t){const n=this.group(e,t),i=[];return n.forEach((e=>{const n=this.transformRawResultsGroup(e,t);void 0===n||Object.values(n).every((e=>null===e))||i.push(n)})),i}group(e,t){const n=new Map,i=[];return"view"===t.metadata.tableType?i.push(...t.metadata.columns.map((e=>CR.buildAlias(this.driver,void 0,t.name,e.databaseName)))):i.push(...t.metadata.primaryColumns.map((e=>CR.buildAlias(this.driver,void 0,t.name,e.databaseName)))),e.forEach((e=>{const t=i.map((t=>{const n=e[t];return Buffer.isBuffer(n)?n.toString("hex"):RO.isObject(n)?JSON.stringify(n):n})).join("_"),r=n.get(t);r?r.push(e):n.set(t,[e])})),n}transformRawResultsGroup(e,t){let n=t.metadata;if(n.discriminatorColumn){const i=e.map((e=>e[CR.buildAlias(this.driver,void 0,t.name,t.metadata.discriminatorColumn.databaseName)])),r=n.childEntityMetadatas.find((e=>void 0!==i.find((t=>t===e.discriminatorValue))));r&&(n=r)}let i=n.create(this.queryRunner,{fromDeserializer:!0,pojo:-1!==this.expressionMap.options.indexOf("create-pojo")});const r=this.transformColumns(e,t,i,n),a=this.transformJoins(e,i,t,n),o=this.transformRelationIds(e,t,i,n),s=this.transformRelationCounts(e,t,i);if(r)return i;return 0===n.primaryColumns.filter((e=>!1===e.isVirtual)).length&&(a||o||s)?i:void 0}transformColumns(e,t,n,i){let r=!1;return i.columns.forEach((a=>{if(i.childEntityMetadatas.length>0&&-1!==i.childEntityMetadatas.findIndex((e=>e.target===a.target)))return;const o=e[0][CR.buildAlias(this.driver,void 0,t.name,a.databaseName)];void 0===o||a.isVirtual||this.expressionMap.selects.find((e=>e.selection===t.name||e.selection===t.name+"."+a.propertyPath))&&(a.setEntityValue(n,this.driver.prepareHydratedValue(o,a)),null!==o&&(r=!0))})),r}transformJoins(e,t,n,i){let r=!1;return this.expressionMap.joinAttributes.forEach((a=>{if(!a.metadata)return;if(!a.isSelected)return;if(a.relation&&!i.relations.find((e=>e===a.relation)))return;if(a.mapToProperty){if(a.mapToPropertyParentAlias!==n.name)return}else if(!a.relation||a.parentAlias!==n.name||a.relationPropertyPath!==a.relation.propertyPath)return;let o=this.transform(e,a.alias);o=a.isMany?o:o[0],o=a.isMany||void 0!==o?o:null,void 0!==o&&(a.mapToPropertyPropertyName?t[a.mapToPropertyPropertyName]=o:a.relation.setEntityValue(t,o),r=!0)})),r}transformRelationIds(e,t,n,i){let r=!1;return this.rawRelationIdResults.forEach(((i,a)=>{if(i.relationIdAttribute.parentAlias!==t.name)return;const o=i.relationIdAttribute.relation,s=this.createValueMapFromJoinColumns(o,i.relationIdAttribute.parentAlias,e);if(null==s)return;this.prepareDataForTransformRelationIds();const l=this.hashEntityIds(o,s),c=this.relationIdMaps[a][l]||[],u=i.relationIdAttribute.mapToPropertyPropertyPath.split("."),d=(e,t,n)=>{const i=e.shift();return i&&0===e.length?(t[i]=n,t):i&&e.length>0?void d(e,t[i],n):t};o.isOneToOne||o.isManyToOne?void 0!==c[0]&&(d(u,n,c[0]),r=!0):(d(u,n,c),r=r||c.length>0)})),r}transformRelationCounts(e,t,n){let i=!1;return this.rawRelationCountResults.filter((e=>e.relationCountAttribute.parentAlias===t.name)).forEach((r=>{const a=r.relationCountAttribute.relation;let o;o=a.isOneToMany?a.inverseRelation.joinColumns[0].referencedColumn.databaseName:a.isOwning?a.joinColumns[0].referencedColumn.databaseName:a.inverseRelation.joinColumns[0].referencedColumn.databaseName;const s=e[0][CR.buildAlias(this.driver,void 0,t.name,o)];null!=s&&(n[r.relationCountAttribute.mapToPropertyPropertyName]=0,r.results.filter((e=>e.parentId===s)).forEach((e=>{n[r.relationCountAttribute.mapToPropertyPropertyName]=parseInt(e.cnt),i=!0})))})),i}createValueMapFromJoinColumns(e,t,n){let i;return i=e.isManyToOne||e.isOneToOneOwner?e.entityMetadata.primaryColumns.map((e=>e)):e.isOneToMany||e.isOneToOneNotOwner?e.inverseRelation.joinColumns.map((e=>e)):e.isOwning?e.joinColumns.map((e=>e)):e.inverseRelation.inverseJoinColumns.map((e=>e)),i.reduce(((i,r)=>(n.forEach((n=>{e.isManyToOne||e.isOneToOneOwner?i[r.databaseName]=this.driver.prepareHydratedValue(n[CR.buildAlias(this.driver,void 0,t,r.databaseName)],r):i[r.databaseName]=this.driver.prepareHydratedValue(n[CR.buildAlias(this.driver,void 0,t,r.referencedColumn.databaseName)],r.referencedColumn)})),i)),{})}extractEntityPrimaryIds(e,t){let n;return n=e.isManyToOne||e.isOneToOneOwner?e.entityMetadata.primaryColumns.map((e=>e)):e.isOneToMany||e.isOneToOneNotOwner?e.inverseRelation.joinColumns.map((e=>e)):e.isOwning?e.joinColumns.map((e=>e)):e.inverseRelation.inverseJoinColumns.map((e=>e)),n.reduce(((e,n)=>(e[n.databaseName]=t[n.databaseName],e)),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map((e=>{const t=e.relationIdAttribute.relation;let n;return n=t.isManyToOne||t.isOneToOneOwner?t.joinColumns:t.isOneToMany||t.isOneToOneNotOwner?t.inverseEntityMetadata.primaryColumns:t.isOwning?t.inverseJoinColumns:t.inverseRelation.joinColumns,e.results.reduce(((i,r)=>{let a=n.reduce(((e,n)=>{let i=r[n.databaseName];return t.isOneToMany||t.isOneToOneNotOwner?(n.isVirtual&&n.referencedColumn&&n.referencedColumn.propertyName!==n.propertyName&&(i=n.referencedColumn.createValueMap(i)),oP.mergeDeep(e,n.createValueMap(i))):(!n.isPrimary&&n.referencedColumn.referencedColumn&&(i=n.referencedColumn.referencedColumn.createValueMap(i)),oP.mergeDeep(e,n.referencedColumn.createValueMap(i)))}),{});if(1!==n.length||e.relationIdAttribute.disableMixedMap||(a=t.isOneToMany||t.isOneToOneNotOwner?n[0].getEntityValue(a):n[0].referencedColumn.getEntityValue(a)),void 0!==a){const e=this.hashEntityIds(t,r);i[e]?i[e].push(a):i[e]=[a]}return i}),{})})))}hashEntityIds(e,t){const n=this.extractEntityPrimaryIds(e,t);return JSON.stringify(n)}}class kM{static isAliasProperty(e){if("string"!=typeof e||-1===e.indexOf("."))return!1;const[t,n]=e.split(".");return!(!t||!n)&&(-1===e.indexOf("(")&&-1===e.indexOf(")"))}}class AM{constructor(e,t,n){this.connection=e,this.queryExpressionMap=t,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,n&&RO.assign(this,n)}get isMany(){return void 0!==this.isMappingMany?this.isMappingMany:!!this.relation&&(this.relation.isManyToMany||this.relation.isOneToMany)}get isSelected(){if(!this.isSelectedEvaluated){let e=()=>{for(const e of this.queryExpressionMap.selects){if(e.selection===this.alias.name)return!0;if(this.metadata&&this.metadata.columns.find((t=>e.selection===this.alias.name+"."+t.propertyPath)))return!0}return!1};this.isSelectedCache=e(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(kM.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(kM.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let e=()=>{if(!kM.isAliasProperty(this.entityOrProperty))return;const e=this.queryExpressionMap.findAliasByName(this.parentAlias);let t=e.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(t)return t;if(e.metadata.parentEntityMetadata&&(t=e.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),t))return t;throw new EO(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=e.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){return this.relation?this.relation.inverseEntityMetadata:this.connection.hasMetadata(this.entityOrProperty)?this.connection.getMetadata(this.entityOrProperty):this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity)?this.connection.getMetadata(this.mapAsEntity):void 0}get junctionAlias(){if(!this.relation)throw new EO("Cannot get junction table for join without relation.");if("string"!=typeof this.entityOrProperty)throw new EO("Junction property is not defined.");const e=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?CR.buildAlias(this.connection.driver,void 0,e,this.alias.name):CR.buildAlias(this.connection.driver,void 0,this.alias.name,e)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class _M{constructor(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,RO.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!kM.isAliasProperty(this.relationName))throw new EO("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!kM.isAliasProperty(this.relationName))throw new EO("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!kM.isAliasProperty(this.relationName))throw new EO("Given value must be a string representation of alias property");const e=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new EO(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return e}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class OM{constructor(e,t){this.expressionMap=e,RO.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!kM.isAliasProperty(this.relationName))throw new EO("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!kM.isAliasProperty(this.relationName))throw new EO("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rc"}get relation(){if(!kM.isAliasProperty(this.relationName))throw new EO("Given value is a string representation of alias property");const[e,t]=this.relationName.split("."),n=this.expressionMap.findAliasByName(e).metadata.findRelationWithPropertyPath(t);if(!n)throw new EO(`Relation with property path ${t} in entity was not found.`);return n}get metadata(){if(!kM.isAliasProperty(this.relationName))throw new EO("Given value is a string representation of alias property");const e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}let RM=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map((async t=>{if(t.relation.isManyToOne||t.relation.isOneToOneOwner){if(t.queryBuilderFactory)throw new EO("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const n={},i=e.map((e=>{const i={},r=[];t.relation.joinColumns.forEach((n=>{i[n.databaseName]=this.connection.driver.prepareHydratedValue(e[CR.buildAlias(this.connection.driver,void 0,t.parentAlias,n.databaseName)],n.referencedColumn);const a=`${n.databaseName}:${i[n.databaseName]}`;-1===r.indexOf(a)&&r.push(a)})),t.relation.entityMetadata.primaryColumns.forEach((n=>{i[n.databaseName]=this.connection.driver.prepareHydratedValue(e[CR.buildAlias(this.connection.driver,void 0,t.parentAlias,n.databaseName)],n);const a=`${n.databaseName}:${i[n.databaseName]}`;-1===r.indexOf(a)&&r.push(a)})),r.sort();const a=r.join("::");return n[a]?null:(n[a]=!0,i)})).filter((e=>e));return{relationIdAttribute:t,results:i}}if(t.relation.isOneToMany||t.relation.isOneToOneNotOwner){const n=t.relation,i=n.isOwning?n.joinColumns:n.inverseRelation.joinColumns,r=n.inverseEntityMetadata.target,a=n.inverseEntityMetadata.tableName,o=t.alias||a,s={},l={},c=e.map(((e,n)=>{const r=[],a={},c=i.map((i=>{const s=i.databaseName+n,l=e[CR.buildAlias(this.connection.driver,void 0,t.parentAlias,i.referencedColumn.databaseName)],c=`${o}:${i.propertyPath}:${l}`;return-1!==r.indexOf(c)?"":(r.push(c),a[s]=l,o+"."+i.propertyPath+" = :"+s)})).filter((e=>e)).join(" AND ");r.sort();const u=r.join("::");return s[u]?"":(s[u]=!0,Object.assign(l,a),c)})).filter((e=>e)).map((e=>"("+e+")")).join(" OR ");if(!c)return{relationIdAttribute:t,results:[]};const u=this.connection.createQueryBuilder(this.queryRunner);oP.uniq([...i,...n.inverseRelation.entityMetadata.primaryColumns],(e=>e.propertyPath)).forEach((e=>{u.addSelect(o+"."+e.propertyPath,e.databaseName)})),u.from(r,o).where("("+c+")").setParameters(l),t.queryBuilderFactory&&t.queryBuilderFactory(u);const d=await u.getRawMany();return d.forEach((e=>{i.forEach((t=>{e[t.databaseName]=this.connection.driver.prepareHydratedValue(e[t.databaseName],t.referencedColumn)})),n.inverseRelation.entityMetadata.primaryColumns.forEach((t=>{e[t.databaseName]=this.connection.driver.prepareHydratedValue(e[t.databaseName],t)}))})),{relationIdAttribute:t,results:d}}{const n=t.relation,i=n.isOwning?n.joinColumns:n.inverseRelation.inverseJoinColumns,r=n.isOwning?n.inverseJoinColumns:n.inverseRelation.joinColumns,a=t.junctionAlias,o=t.joinInverseSideMetadata.tableName,s=t.alias||o,l=n.isOwning?n.junctionEntityMetadata.tableName:n.inverseRelation.junctionEntityMetadata.tableName,c=e.map((e=>i.reduce(((n,i)=>(n[i.propertyPath]=e[CR.buildAlias(this.connection.driver,void 0,t.parentAlias,i.referencedColumn.databaseName)],n)),{})));if(0===c.length)return{relationIdAttribute:t,results:[]};const u={},d={},h=c.map(((e,t)=>{const n=[],i={},r=Object.keys(e).map((r=>{const o=r+t,s=e[r],l=`${a}:${r}:${s}`;return-1!==n.indexOf(l)?"":(n.push(l),i[o]=s,a+"."+r+" = :"+o)})).filter((e=>e)).join(" AND ");n.sort();const o=n.join("::");return d[o]?"":(d[o]=!0,Object.assign(u,i),r)})).filter((e=>e)),p=r.map((e=>a+"."+e.propertyPath+" = "+s+"."+e.referencedColumn.propertyPath)).join(" AND "),m=h.map((e=>"("+e+" AND "+p+")")).join(" OR "),f=this.connection.createQueryBuilder(this.queryRunner);r.forEach((e=>{f.addSelect(a+"."+e.propertyPath,e.databaseName).addOrderBy(a+"."+e.propertyPath)})),i.forEach((e=>{f.addSelect(a+"."+e.propertyPath,e.databaseName).addOrderBy(a+"."+e.propertyPath)})),f.from(o,s).innerJoin(l,a,m).setParameters(u),t.queryBuilderFactory&&t.queryBuilderFactory(f);const g=await f.getRawMany();return g.forEach((e=>{[...i,...r].forEach((t=>{e[t.databaseName]=this.connection.driver.prepareHydratedValue(e[t.databaseName],t.referencedColumn)}))})),{relationIdAttribute:t,results:g}}}));return Promise.all(t)}};class PM{constructor(e,t){this.connection=e,this.queryRunner=t}load(e,t,n){const i=Array.isArray(t)?t:[t],r=Array.isArray(n)?n:n?[n]:void 0;return e.isManyToMany?this.loadForManyToMany(e,i,r):e.isManyToOne||e.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(e,i,r):this.loadForOneToManyAndOneToOneNotOwner(e,i,r)}async loadManyToManyRelationIdsAndGroup(e,t,n,i){const r=e.isManyToMany||e.isOneToMany,a=Array.isArray(t)?t:[t];if(!n&&!(n=await this.connection.relationLoader.load(e,t,this.queryRunner,i)).length)return a.map((e=>({entity:e,related:r?[]:void 0})));const o=await this.load(e,t,n),s=Array.isArray(n)?n:[n];let l=[],c=[];return e.isManyToManyOwner?(l=e.junctionEntityMetadata.inverseColumns.map((e=>e.referencedColumn)),c=e.junctionEntityMetadata.ownerColumns.map((e=>e.referencedColumn))):e.isManyToManyNotOwner?(l=e.junctionEntityMetadata.ownerColumns.map((e=>e.referencedColumn)),c=e.junctionEntityMetadata.inverseColumns.map((e=>e.referencedColumn))):e.isManyToOne||e.isOneToOneOwner?(l=e.joinColumns.map((e=>e.referencedColumn)),c=e.entityMetadata.primaryColumns):(e.isOneToMany||e.isOneToOneNotOwner)&&(l=e.inverseRelation.entityMetadata.primaryColumns,c=e.inverseRelation.joinColumns.map((e=>e.referencedColumn))),a.map((t=>{const n={entity:t,related:r?[]:void 0},i=o.filter((e=>c.every((n=>n.compareEntityValue(t,e[n.entityMetadata.name+"_"+n.propertyAliasName])))));return i.length?(s.forEach((t=>{i.forEach((i=>{l.every((n=>n.compareEntityValue(t,i[CR.buildAlias(this.connection.driver,void 0,n.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+n.propertyPath.replace(".","_"))])))&&(r?n.related.push(t):n.related=t)}))})),n):n}))}loadForManyToMany(e,t,n){const i=e.junctionEntityMetadata,r=i.name,a=e.isOwning?i.ownerColumns:i.inverseColumns,o=e.isOwning?i.inverseColumns:i.ownerColumns,s=this.connection.createQueryBuilder(this.queryRunner);a.forEach((e=>{const t=CR.buildAlias(this.connection.driver,void 0,e.referencedColumn.entityMetadata.name+"_"+e.referencedColumn.propertyPath.replace(".","_"));s.addSelect(r+"."+e.propertyPath,t)})),o.forEach((t=>{const n=CR.buildAlias(this.connection.driver,void 0,t.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+t.referencedColumn.propertyPath.replace(".","_"));s.addSelect(r+"."+t.propertyPath,n)}));let l="";if(1===a.length){const e=t.map((e=>a[0].referencedColumn.getEntityValue(e)));e.every((e=>"number"==typeof e))?l=`${r}.${a[0].propertyPath} IN (${e.join(", ")})`:(s.setParameter("values1",e),l=r+"."+a[0].propertyPath+" IN (:...values1)")}else l="("+t.map(((e,t)=>a.map((n=>{const i="entity1_"+t+"_"+n.propertyName;return s.setParameter(i,n.referencedColumn.getEntityValue(e)),r+"."+n.propertyPath+" = :"+i})).join(" AND "))).map((e=>"("+e+")")).join(" OR ")+")";let c="";if(n)if(1===o.length){const e=n.map((e=>o[0].referencedColumn.getEntityValue(e)));e.every((e=>"number"==typeof e))?c=`${r}.${o[0].propertyPath} IN (${e.join(", ")})`:(s.setParameter("values2",e),c=r+"."+o[0].propertyPath+" IN (:...values2)")}else c="("+n.map(((e,t)=>o.map((n=>{const i="entity2_"+t+"_"+n.propertyName;return s.setParameter(i,n.referencedColumn.getEntityValue(e)),r+"."+n.propertyPath+" = :"+i})).join(" AND "))).map((e=>"("+e+")")).join(" OR ")+")";const u=[l,c].filter((e=>e.length>0)).join(" AND ");return s.from(i.target,r).where(u).getRawMany()}loadForManyToOneAndOneToOneOwner(e,t,n){const i=e.entityMetadata.targetName,r=e.joinColumns.every((t=>!!e.entityMetadata.nonVirtualColumns.find((e=>e===t))));if(n&&r){let i=[];if(t.forEach((t=>{let r={};e.entityMetadata.primaryColumns.forEach((e=>{const n=e.entityMetadata.name+"_"+e.propertyPath.replace(".","_");r[n]=e.getEntityValue(t)})),n.forEach((n=>{e.joinColumns.forEach((i=>{const a=i.getEntityValue(t),o=i.referencedColumn.getEntityValue(n);if(void 0!==a&&void 0!==o&&a===o){const t=i.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+i.referencedColumn.propertyPath.replace(".","_");r[t]=o}}))})),Object.keys(r).length===e.entityMetadata.primaryColumns.length+e.joinColumns.length&&i.push(r)})),i.length===t.length)return Promise.resolve(i)}const a=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach((e=>{const t=CR.buildAlias(this.connection.driver,void 0,e.entityMetadata.name+"_"+e.propertyPath.replace(".","_"));a.addSelect(i+"."+e.propertyPath,t)})),e.joinColumns.forEach((t=>{const n=CR.buildAlias(this.connection.driver,void 0,t.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+t.referencedColumn.propertyPath.replace(".","_"));a.addSelect(i+"."+t.propertyPath,n)}));let o="";if(1===e.entityMetadata.primaryColumns.length){const n=t.map((t=>e.entityMetadata.primaryColumns[0].getEntityValue(t)));n.every((e=>"number"==typeof e))?o=`${i}.${e.entityMetadata.primaryColumns[0].propertyPath} IN (${n.join(", ")})`:(a.setParameter("values",n),o=i+"."+e.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else o=t.map(((t,n)=>e.entityMetadata.primaryColumns.map(((e,r)=>{const o="entity"+n+"_"+r;return a.setParameter(o,e.getEntityValue(t)),i+"."+e.propertyPath+" = :"+o})).join(" AND "))).map((e=>"("+e+")")).join(" OR ");return a.from(e.entityMetadata.target,i).where(o).getRawMany()}loadForOneToManyAndOneToOneNotOwner(e,t,n){if((e=e.inverseRelation).entityMetadata.primaryColumns.length===e.joinColumns.length){if(e.entityMetadata.primaryColumns.every((t=>-1!==e.joinColumns.indexOf(t))))return Promise.resolve(t.map((t=>{const n={};return e.joinColumns.forEach((function(i){const r=i.referencedColumn.getEntityValue(t),a=i.referencedColumn.entityMetadata.name+"_"+i.referencedColumn.propertyPath.replace(".","_"),o=i.entityMetadata.name+"_"+e.inverseRelation.propertyPath.replace(".","_")+"_"+i.propertyPath.replace(".","_");n[a]=r,n[o]=r})),n})))}const i=e.entityMetadata.targetName,r=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach((t=>{const n=CR.buildAlias(this.connection.driver,void 0,t.entityMetadata.name+"_"+e.inverseRelation.propertyPath.replace(".","_")+"_"+t.propertyPath.replace(".","_"));r.addSelect(i+"."+t.propertyPath,n)})),e.joinColumns.forEach((e=>{const t=CR.buildAlias(this.connection.driver,void 0,e.referencedColumn.entityMetadata.name+"_"+e.referencedColumn.propertyPath.replace(".","_"));r.addSelect(i+"."+e.propertyPath,t)}));let a="";if(1===e.joinColumns.length){const n=t.map((t=>e.joinColumns[0].referencedColumn.getEntityValue(t)));n.every((e=>"number"==typeof e))?a=`${i}.${e.joinColumns[0].propertyPath} IN (${n.join(", ")})`:(r.setParameter("values",n),a=i+"."+e.joinColumns[0].propertyPath+" IN (:...values)")}else a=t.map(((t,n)=>e.joinColumns.map(((e,a)=>{const o="entity"+n+"_"+a;return r.setParameter(o,e.referencedColumn.getEntityValue(t)),i+"."+e.propertyPath+" = :"+o})).join(" AND "))).map((e=>"("+e+")")).join(" OR ");return r.from(e.entityMetadata.target,i).where(a).getRawMany()}}class MM{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach((e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationIdAttributes.push(t)})),this.expressionMap.joinAttributes.forEach((e=>{e.metadata&&!e.metadata.isJunction&&e.metadata.relationIds.forEach((t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationIdAttributes.push(n)}))}))}metadataToAttribute(e,t){return new _M(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class $M{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationCountAttributes=n}async load(e){const t=(e,t,n)=>n.indexOf(e)===t,n=this.relationCountAttributes.map((async n=>{if(n.relation.isOneToMany){const i=n.relation,r=i.inverseRelation,a=r.joinColumns[0].referencedColumn.propertyName,o=i.inverseEntityMetadata.target,s=i.inverseEntityMetadata.tableName,l=n.alias||s,c=r.propertyName;let u=e.map((e=>e[n.parentAlias+"_"+a])).filter((e=>!!e));if(u=u.filter(t),0===u.length)return{relationCountAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);return d.select(l+"."+c,"parentId").addSelect("COUNT(*)","cnt").from(o,l).where(l+"."+c+" IN (:...ids)").addGroupBy(l+"."+c).setParameter("ids",u),n.queryBuilderFactory&&n.queryBuilderFactory(d),{relationCountAttribute:n,results:await d.getRawMany()}}{let i,r,a,o;n.relation.isOwning?(i=n.relation.joinColumns[0].referencedColumn.databaseName,r=n.relation.inverseJoinColumns[0].referencedColumn.databaseName,a=n.relation.junctionEntityMetadata.columns[0],o=n.relation.junctionEntityMetadata.columns[1]):(i=n.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,r=n.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,a=n.relation.junctionEntityMetadata.columns[1],o=n.relation.junctionEntityMetadata.columns[0]);let s=e.map((e=>e[n.parentAlias+"_"+i])).filter((e=>!!e));if(s=s.filter(t),0===s.length)return{relationCountAttribute:n,results:[]};const l=n.junctionAlias,c=n.joinInverseSideMetadata.tableName,u=n.alias||c,d=n.relation.junctionEntityMetadata.tableName,h=l+"."+a.propertyName+" IN ("+s.map((e=>isNaN(e)?"'"+e+"'":e))+") AND "+l+"."+o.propertyName+" = "+u+"."+r,p=this.connection.createQueryBuilder(this.queryRunner);return p.select(l+"."+a.propertyName,"parentId").addSelect("COUNT("+p.escape(u)+"."+p.escape(r)+")","cnt").from(c,u).innerJoin(d,l,h).addGroupBy(l+"."+a.propertyName),n.queryBuilderFactory&&n.queryBuilderFactory(p),{relationCountAttribute:n,results:await p.getRawMany()}}}));return Promise.all(n)}}class IM{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach((e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationCountAttributes.push(t)})),this.expressionMap.joinAttributes.forEach((e=>{e.metadata&&!e.metadata.isJunction&&e.metadata.relationCounts.forEach((t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationCountAttributes.push(n)}))}))}metadataToAttribute(e,t){return new OM(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class DM{constructor(e){RO.assign(this,e||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(e){this._metadata=e}get metadata(){if(!this._metadata)throw new EO(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class LM{constructor(e){var t;this.connection=e,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.cache=!1,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],e.options.relationLoadStrategy&&(this.relationLoadStrategy=e.options.relationLoadStrategy),this.timeTravel=(null===(t=e.options)||void 0===t?void 0:t.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&-1===this.options.indexOf("disable-global-order")){const e=this.mainAlias.metadata.orderBy||{};return Object.keys(e).reduce(((t,n)=>(t[this.mainAlias.name+"."+n]=e[n],t)),{})}return this.orderBys}setMainAlias(e){return this.mainAlias=e,e}createAlias(e){let t=e.name;!t&&e.tablePath&&(t=e.tablePath),t||"function"!=typeof e.target||(t=e.target.name),t||"string"!=typeof e.target||(t=e.target);const n=new DM;return n.type=e.type,t&&(n.name=t),e.metadata&&(n.metadata=e.metadata),e.target&&!n.hasMetadata&&(n.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(n.tablePath=e.tablePath),e.subQuery&&(n.subQuery=e.subQuery),this.aliases.push(n),n}findAliasByName(e){const t=this.aliases.find((t=>t.name===e));if(!t)throw new EO(`"${e}" alias was not found. Maybe you forgot to join it?`);return t}findColumnByAliasExpression(e){const[t,n]=e.split(".");return this.findAliasByName(t).metadata.findColumnWithPropertyName(n)}get relationMetadata(){if(!this.mainAlias)throw new EO("Entity to work with is not specified!");const e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new EO(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return e}clone(){const e=new LM(this.connection);return e.queryType=this.queryType,e.selects=this.selects.map((e=>e)),e.maxExecutionTime=this.maxExecutionTime,e.selectDistinct=this.selectDistinct,e.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach((t=>e.aliases.push(new DM(t)))),e.relationLoadStrategy=this.relationLoadStrategy,e.mainAlias=this.mainAlias,e.valuesSet=this.valuesSet,e.returning=this.returning,e.onConflict=this.onConflict,e.onIgnore=this.onIgnore,e.onUpdate=this.onUpdate,e.joinAttributes=this.joinAttributes.map((e=>new AM(this.connection,this,e))),e.relationIdAttributes=this.relationIdAttributes.map((e=>new _M(this,e))),e.relationCountAttributes=this.relationCountAttributes.map((e=>new OM(this,e))),e.wheres=this.wheres.map((e=>({...e}))),e.havings=this.havings.map((e=>({...e}))),e.orderBys=Object.assign({},this.orderBys),e.groupBys=this.groupBys.map((e=>e)),e.limit=this.limit,e.offset=this.offset,e.skip=this.skip,e.take=this.take,e.lockMode=this.lockMode,e.onLocked=this.onLocked,e.lockVersion=this.lockVersion,e.lockTables=this.lockTables,e.withDeleted=this.withDeleted,e.parameters=Object.assign({},this.parameters),e.disableEscaping=this.disableEscaping,e.enableRelationIdValues=this.enableRelationIdValues,e.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,e.subQuery=this.subQuery,e.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,e.cache=this.cache,e.cacheId=this.cacheId,e.cacheDuration=this.cacheDuration,e.relationPropertyPath=this.relationPropertyPath,e.of=this.of,e.insertColumns=this.insertColumns,e.whereEntities=this.whereEntities,e.updateEntity=this.updateEntity,e.callListeners=this.callListeners,e.useTransaction=this.useTransaction,e.timeTravel=this.timeTravel,e.nativeParameters=Object.assign({},this.nativeParameters),e.comment=this.comment,e.commonTableExpressions=this.commonTableExpressions.map((e=>({alias:e.alias,queryBuilder:"string"==typeof e.queryBuilder?e.queryBuilder:e.queryBuilder.clone(),options:e.options}))),e}}class jM{constructor(e,t,n=!0,i=!1,r,a){this["@instanceof"]=Symbol.for("FindOperator"),this._type=e,this._value=t,this._useParameter=n,this._multipleParameters=i,this._getSql=r,this._objectLiteralParameters=a}get useParameter(){return PO.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return PO.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return PO.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return PO.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(PO.isFindOperator(this._value))return this._value}get getSql(){return PO.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(e){this._value instanceof jM?this._value.transformValue(e):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map((t=>e&&sP.transformTo(e,t))):sP.transformTo(e,this._value)}}const qM=/[.*+\-?^${}()|[\]\\]/g;class BM{constructor(e,t){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,PO.isDataSource(e)?(this.connection=e,this.queryRunner=t,this.expressionMap=new LM(this.connection)):(this.connection=e.connection,this.queryRunner=e.queryRunner,this.expressionMap=e.expressionMap.clone())}get alias(){if(!this.expressionMap.mainAlias)throw new EO("Main alias is not set");return this.expressionMap.mainAlias.name}select(e,t){this.expressionMap.queryType="select",Array.isArray(e)?this.expressionMap.selects=e.map((e=>({selection:e}))):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);const n=require("./SelectQueryBuilder").SelectQueryBuilder;return PO.isSelectQueryBuilder(this)?this:new n(this)}insert(){this.expressionMap.queryType="insert";const e=require("./InsertQueryBuilder").InsertQueryBuilder;return PO.isInsertQueryBuilder(this)?this:new e(this)}update(e,t){const n=t||e;if("function"==typeof(e=PO.isEntitySchema(e)?e.options.name:e)||"string"==typeof e){const t=this.createFromAlias(e);this.expressionMap.setMainAlias(t)}this.expressionMap.queryType="update",this.expressionMap.valuesSet=n;const i=require("./UpdateQueryBuilder").UpdateQueryBuilder;return PO.isUpdateQueryBuilder(this)?this:new i(this)}delete(){this.expressionMap.queryType="delete";const e=require("./DeleteQueryBuilder").DeleteQueryBuilder;return PO.isDeleteQueryBuilder(this)?this:new e(this)}softDelete(){this.expressionMap.queryType="soft-delete";const e=require("./SoftDeleteQueryBuilder").SoftDeleteQueryBuilder;return PO.isSoftDeleteQueryBuilder(this)?this:new e(this)}restore(){this.expressionMap.queryType="restore";const e=require("./SoftDeleteQueryBuilder").SoftDeleteQueryBuilder;return PO.isSoftDeleteQueryBuilder(this)?this:new e(this)}relation(e,t){const n=2===arguments.length?e:void 0,i=2===arguments.length?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=i,n){const e=this.createFromAlias(n);this.expressionMap.setMainAlias(e)}const r=require("./RelationQueryBuilder").RelationQueryBuilder;return PO.isRelationQueryBuilder(this)?this:new r(this)}hasRelation(e,t){const n=this.connection.getMetadata(e);return(Array.isArray(t)?t:[t]).every((e=>!!n.findRelationWithPropertyPath(e)))}hasParameter(e){var t;return(null===(t=this.parentQueryBuilder)||void 0===t?void 0:t.hasParameter(e))||e in this.expressionMap.parameters}setParameter(e,t){if("function"==typeof t)throw new EO(`Function parameter isn't supported in the parameters. Please check "${e}" parameter.`);if(!e.match(/^([A-Za-z0-9_.]+)$/))throw new EO("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(e,t),this.expressionMap.parameters[e]=t,this}setParameters(e){for(const[t,n]of Object.entries(e))this.setParameter(t,n);return this}createParameter(e){let t;do{t="orm_param_"+this.parameterIndex++}while(this.hasParameter(t));return this.setParameter(t,e),`:${t}`}setNativeParameters(e){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(e),Object.keys(e).forEach((t=>{this.expressionMap.nativeParameters[t]=e[t]})),this}getParameters(){const e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){const n=t.childEntityMetadatas.filter((e=>e.discriminatorColumn)).map((e=>e.discriminatorValue));n.push(t.discriminatorValue),e.discriminatorColumnValues=n}}return e}printSql(){const[e,t]=this.getQueryAndParameters();return this.connection.logger.logQuery(e,t),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const e=this.getQuery(),t=this.getParameters();return this.connection.driver.escapeQueryWithParameters(e,t,this.expressionMap.nativeParameters)}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();try{return await n.query(e,t)}finally{n!==this.queryRunner&&await n.release()}}createQueryBuilder(){return new this.constructor(this.connection,this.queryRunner)}clone(){return new this.constructor(this)}comment(e){return this.expressionMap.comment=e,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e}setQueryRunner(e){return this.queryRunner=e,this}callListeners(e){return this.expressionMap.callListeners=e,this}useTransaction(e){return this.expressionMap.useTransaction=e,this}addCommonTableExpression(e,t,n){return this.expressionMap.commonTableExpressions.push({queryBuilder:e,alias:t,options:n||{}}),this}getTableName(e){return e.split(".").map((e=>""===e?e:this.escape(e))).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new EO('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(e,t){if(this.connection.hasMetadata(e)){const n=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:n.tablePath})}{if("string"==typeof e){const n="("===e.substr(0,1)&&")"===e.substr(-1);return this.expressionMap.createAlias({type:"from",name:t,tablePath:n?void 0:e,subQuery:n?e:void 0})}const n=e(this.subQuery());this.setParameters(n.getParameters());const i=n.getQuery();return this.expressionMap.createAlias({type:"from",name:t,subQuery:i})}}replacePropertyNames(e){return e}replacePropertyNamesForTheWholeQuery(e){const t={};for(const r of this.expressionMap.aliases){if(!r.hasMetadata)continue;const e=this.expressionMap.aliasNamePrefixingEnabled&&r.name?`${r.name}.`:"";t[e]||(t[e]={});for(const n of r.metadata.relations)n.joinColumns.length>0&&(t[e][n.propertyPath]=n.joinColumns[0].databaseName);for(const n of r.metadata.relations){const i=[...n.joinColumns,...n.inverseJoinColumns];for(const r of i){const i=`${n.propertyPath}.${r.referencedColumn.propertyPath}`;t[e][i]=r.databaseName}}for(const n of r.metadata.columns)t[e][n.databaseName]=n.databaseName;for(const n of r.metadata.columns)t[e][n.propertyName]=n.databaseName;for(const n of r.metadata.columns)t[e][n.propertyPath]=n.databaseName}const n=Object.keys(t),i=n.map((e=>(e=>e.replace(qM,"\\$&"))(e))).join("|");return n.length>0&&(e=e.replace(new RegExp("([ =(]|^.{0})"+(i?"("+i+")":"")+"([^ =(),]+)(?=[ =),]|.{0}$)","gm"),((...e)=>{let n,r,a;if(i){if(n=e[0],r=e[1],a=e[3],t[e[2]][a])return`${r}${this.escape(e[2].substring(0,e[2].length-1))}.${this.escape(t[e[2]][a])}`}else if(n=e[0],r=e[1],a=e[2],t[""][a])return`${r}${this.escape(t[""][a])}`;return n}))),e}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace("*/","")} */ `:""}createTimeTravelQuery(){return"select"===this.expressionMap.queryType&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const e=[],t=this.createWhereClausesExpression(this.expressionMap.wheres);if(t.length>0&&"1=1"!==t&&e.push(this.replacePropertyNames(t)),this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if("select"===this.expressionMap.queryType&&!this.expressionMap.withDeleted&&t.deleteDateColumn){const n=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+t.deleteDateColumn.propertyName:t.deleteDateColumn.propertyName,i=`${this.replacePropertyNames(n)} IS NULL`;e.push(i)}if(t.discriminatorColumn&&t.parentEntityMetadata){const n=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+t.discriminatorColumn.databaseName:t.discriminatorColumn.databaseName,i=`${this.replacePropertyNames(n)} IN (:...discriminatorColumnValues)`;e.push(i)}}if(this.expressionMap.extraAppendedAndWhereCondition){const t=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);e.push(t)}let n="";return n+=this.createTimeTravelQuery(),e.length?1===e.length?n+=` WHERE ${e[0]}`:n+=` WHERE ( ${e.join(" ) AND ( ")} )`:n+="",n}createReturningExpression(e){const t=this.getReturningColumns(),n=this.connection.driver;if("string"!=typeof this.expressionMap.returning&&this.expressionMap.extraReturningColumns.length>0&&n.isReturningSqlSupported(e)&&t.push(...this.expressionMap.extraReturningColumns.filter((e=>-1===t.indexOf(e)))),t.length){let e=t.map((e=>{const t=this.escape(e.databaseName);return"mssql"===n.options.type?"insert"===this.expressionMap.queryType||"update"===this.expressionMap.queryType||"soft-delete"===this.expressionMap.queryType||"restore"===this.expressionMap.queryType?"INSERTED."+t:this.escape(this.getMainTableName())+"."+t:t})).join(", ");return"oracle"===n.options.type&&(e+=" INTO "+t.map((e=>this.createParameter({type:n.columnTypeToNativeParameter(e.type),dir:n.oracle.BIND_OUT}))).join(", ")),"mssql"===n.options.type&&("insert"!==this.expressionMap.queryType&&"update"!==this.expressionMap.queryType||(e+=" INTO @OutputTable")),e}return"string"==typeof this.expressionMap.returning?this.expressionMap.returning:""}getReturningColumns(){const e=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach((t=>{this.expressionMap.mainAlias.hasMetadata&&e.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(t))})),e}createWhereClausesExpression(e){return e.map(((e,t)=>{const n=this.createWhereConditionExpression(e.condition);switch(e.type){case"and":return(t>0?"AND ":"")+n;case"or":return(t>0?"OR ":"")+n}return n})).join(" ").trim()}createWhereConditionExpression(e,t=!1){if("string"==typeof e)return e;if(Array.isArray(e))return 0===e.length?"1=1":1!==e.length||t?"("+this.createWhereClausesExpression(e)+")":this.createWhereClausesExpression(e);const{driver:n}=this.connection;switch(e.operator){case"lessThan":return`${e.parameters[0]} < ${e.parameters[1]}`;case"lessThanOrEqual":return`${e.parameters[0]} <= ${e.parameters[1]}`;case"arrayContains":return`${e.parameters[0]} @> ${e.parameters[1]}`;case"jsonContains":return`${e.parameters[0]} ::jsonb @> ${e.parameters[1]}`;case"arrayContainedBy":return`${e.parameters[0]} <@ ${e.parameters[1]}`;case"arrayOverlap":return`${e.parameters[0]} && ${e.parameters[1]}`;case"moreThan":return`${e.parameters[0]} > ${e.parameters[1]}`;case"moreThanOrEqual":return`${e.parameters[0]} >= ${e.parameters[1]}`;case"notEqual":return`${e.parameters[0]} != ${e.parameters[1]}`;case"equal":return`${e.parameters[0]} = ${e.parameters[1]}`;case"ilike":return"postgres"===n.options.type||"cockroachdb"===n.options.type?`${e.parameters[0]} ILIKE ${e.parameters[1]}`:`UPPER(${e.parameters[0]}) LIKE UPPER(${e.parameters[1]})`;case"like":return`${e.parameters[0]} LIKE ${e.parameters[1]}`;case"between":return`${e.parameters[0]} BETWEEN ${e.parameters[1]} AND ${e.parameters[2]}`;case"in":return e.parameters.length<=1?"0=1":`${e.parameters[0]} IN (${e.parameters.slice(1).join(", ")})`;case"any":return"cockroachdb"===n.options.type?`${e.parameters[0]}::STRING = ANY(${e.parameters[1]}::STRING[])`:`${e.parameters[0]} = ANY(${e.parameters[1]})`;case"isNull":return`${e.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(e.condition)})`;case"brackets":return`${this.createWhereConditionExpression(e.condition,!0)}`;case"and":return e.parameters.join(" AND ")}throw new TypeError(`Unsupported FindOperator ${jM.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const e=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map((t=>{const n="string"==typeof t.queryBuilder?t.queryBuilder:t.queryBuilder.getQuery();if("string"!=typeof t.queryBuilder){if(t.queryBuilder.hasCommonTableExpressions())throw new EO(`Nested CTEs aren't supported (CTE: ${t.alias})`);if(!this.connection.driver.cteCapabilities.writable&&!PO.isSelectQueryBuilder(t.queryBuilder))throw new EO(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${t.alias})`);this.setParameters(t.queryBuilder.getParameters())}let i=this.escape(t.alias);if(t.options.columnNames){const e=t.options.columnNames.map((e=>this.escape(e)));if(PO.isSelectQueryBuilder(t.queryBuilder)&&t.queryBuilder.expressionMap.selects.length&&t.options.columnNames.length!==t.queryBuilder.expressionMap.selects.length)throw new EO(`cte.options.columnNames length (${t.options.columnNames.length}) doesn't match subquery select list length ${t.queryBuilder.expressionMap.selects.length} (CTE: ${t.alias})`);i+=`(${e.join(", ")})`}const r=t.options.recursive&&e?"RECURSIVE":"";let a="";return this.connection.driver.cteCapabilities.materializedHint&&void 0!==t.options.materialized&&(a=t.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[r,i,"AS",a,`(${n})`].filter(Boolean).join(" ")})).join(", ")+" "}getWhereInIdsCondition(e){const t=this.expressionMap.mainAlias.metadata,n=(Array.isArray(e)?e:[e]).map((e=>t.ensureEntityIdMap(e)));if(!t.hasMultiplePrimaryKeys){const e=t.primaryColumns[0];if(!e.transformer&&!e.relationMetadata&&!e.embeddedMetadata)return{[e.propertyName]:(i=n.map((t=>e.getEntityValue(t,!1))),new jM("in",i,!0,!0))}}var i;return new mP((e=>{for(const t of n)e.orWhere(new mP((e=>e.where(t))))}))}getExistsCondition(e){const t=e.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${t.getQuery()})`,t.getParameters()]}findColumnsForPropertyPath(e){let t=this.expressionMap.mainAlias;const n=[],i=e.split(".");for(;i.length>1;){const e=i[0];if(!(null==t?void 0:t.hasMetadata))break;if(t.metadata.hasEmbeddedWithPropertyPath(e))i.unshift(`${i.shift()}.${i.shift()}`);else{if(!t.metadata.hasRelationWithPropertyPath(e))break;{const r=this.expressionMap.joinAttributes.find((t=>t.relationPropertyPath===e));if(!(null==r?void 0:r.alias)){const t=n.length>0?`${n.join(".")}.${e}`:e;throw new Error(`Cannot find alias for relation at ${t}`)}t=r.alias,n.push(...e.split(".")),i.shift()}}}if(!t)throw new Error(`Cannot find alias for property ${e}`);const r=i.join("."),a=t.metadata.findColumnsWithPropertyPath(r);if(!a.length)throw new VO(e,t.metadata);return[t,n,a]}createPropertyPath(e,t,n=""){const i=[];for(const r of Object.keys(t)){const a=n?`${n}.${r}`:r;if(null===t[r]||"object"!=typeof t[r]||PO.isFindOperator(t[r]))i.push(a);else if(e.hasEmbeddedWithPropertyPath(a)){const n=this.createPropertyPath(e,t[r],a);i.push(...n)}else if(e.hasRelationWithPropertyPath(a)){const n=e.findRelationWithPropertyPath(a);if("one-to-one"===n.relationType||"many-to-one"===n.relationType){const e=n.joinColumns.map((e=>e.referencedColumn)).filter((e=>!!e));if(e.length>0&&e.every((e=>e.getEntityValue(t[r],!1)))){i.push(a);continue}}if("one-to-many"===n.relationType||"many-to-many"===n.relationType)throw new Error(`Cannot query across ${n.relationType} for property ${a}`);const o=n.inverseEntityMetadata.primaryColumns;if(o.length>0&&o.every((e=>e.getEntityValue(t[r],!1)))){const e=o.map((e=>`${a}.${e.propertyPath}`));i.push(...e);continue}const s=this.createPropertyPath(n.inverseEntityMetadata,t[r]).map((e=>`${a}.${e}`));i.push(...s)}else i.push(a)}return i}*getPredicates(e){if(this.expressionMap.mainAlias.hasMetadata){const t=this.createPropertyPath(this.expressionMap.mainAlias.metadata,e);for(const n of t){const[t,i,r]=this.findColumnsForPropertyPath(n);for(const n of r){let r=e;for(const e of i){if(!r||!(e in r)){r={};break}r=r[e]}const a=this.expressionMap.aliasNamePrefixingEnabled?`${t.name}.${n.propertyPath}`:n.propertyPath,o=n.getEntityValue(r,!0);yield[a,o]}}}else for(const t of Object.keys(e)){const n=e[t],i=this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${t}`:t;yield[i,n]}}getWherePredicateCondition(e,t){if(PO.isFindOperator(t)){let n=[];if(t.useParameter)if(t.objectLiteralParameters)this.setParameters(t.objectLiteralParameters);else if(t.multipleParameters)for(const e of t.value)n.push(this.createParameter(e));else n.push(this.createParameter(t.value));if("raw"===t.type)return t.getSql?t.getSql(e):{operator:"equal",parameters:[e,t.value]};if("not"===t.type)return t.child?{operator:t.type,condition:this.getWherePredicateCondition(e,t.child)}:{operator:"notEqual",parameters:[e,...n]};if("and"===t.type){const n=t.value;return{operator:t.type,parameters:n.map((t=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,t))))}}return{operator:t.type,parameters:[e,...n]}}return{operator:"equal",parameters:[e,this.createParameter(t)]}}getWhereCondition(e){if("string"==typeof e)return e;if(PO.isBrackets(e)){const t=this.createQueryBuilder();return t.parentQueryBuilder=this,t.expressionMap.mainAlias=this.expressionMap.mainAlias,t.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,t.expressionMap.parameters=this.expressionMap.parameters,t.expressionMap.nativeParameters=this.expressionMap.nativeParameters,t.expressionMap.wheres=[],e.whereFactory(t),{operator:PO.isNotBrackets(e)?"not":"brackets",condition:t.expressionMap.wheres}}if("function"==typeof e)return e(this);const t=Array.isArray(e)?e:[e],n=[];for(const i of t){const e=[];for(const[t,n]of this.getPredicates(i))e.push({type:"and",condition:this.getWherePredicateCondition(t,n)});n.push({type:"or",condition:e})}return 1===n.length?n[0].condition:n}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}class FM extends BM{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createSelectExpression(),e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),this.replacePropertyNamesForTheWholeQuery(e)}setFindOptions(e){return this.findOptions=e,this.applyFindOptions(),this}subQuery(){const e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.parentQueryBuilder=this,e}select(e,t){if(this.expressionMap.queryType="select",Array.isArray(e))this.expressionMap.selects=e.map((e=>({selection:e})));else if("function"==typeof e){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this}addSelect(e,t){if(!e)return this;if(Array.isArray(e))this.expressionMap.selects=this.expressionMap.selects.concat(e.map((e=>({selection:e}))));else if("function"==typeof e){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this}maxExecutionTime(e){return this.expressionMap.maxExecutionTime=e,this}distinct(e=!0){return this.expressionMap.selectDistinct=e,this}distinctOn(e){return this.expressionMap.selectDistinctOn=e,this}fromDummy(){var e;return this.from(null!==(e=this.connection.driver.dummyTableName)&&void 0!==e?e:"(SELECT 1 AS dummy_column)","dummy_table")}from(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}addFrom(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(n),this}innerJoin(e,t,n,i){return this.join("INNER",e,t,n,i),this}leftJoin(e,t,n,i){return this.join("LEFT",e,t,n,i),this}innerJoinAndSelect(e,t,n,i){return this.addSelect(t),this.innerJoin(e,t,n,i),this}leftJoinAndSelect(e,t,n,i){return this.addSelect(t),this.leftJoin(e,t,n,i),this}innerJoinAndMapMany(e,t,n,i,r){return this.addSelect(n),this.join("INNER",t,n,i,r,e,!0),this}innerJoinAndMapOne(e,t,n,i,r,a){return this.addSelect(n),this.join("INNER",t,n,i,r,e,!1,a),this}leftJoinAndMapMany(e,t,n,i,r){return this.addSelect(n),this.join("LEFT",t,n,i,r,e,!0),this}leftJoinAndMapOne(e,t,n,i,r,a){return this.addSelect(n),this.join("LEFT",t,n,i,r,e,!1,a),this}loadRelationIdAndMap(e,t,n,i){const r=new _M(this.expressionMap);return r.mapToProperty=e,r.relationName=t,"string"==typeof n&&(r.alias=n),"object"==typeof n&&n.disableMixedMap&&(r.disableMixedMap=!0),r.queryBuilderFactory=i,this.expressionMap.relationIdAttributes.push(r),r.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:r.junctionAlias,metadata:r.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(e,t,n,i){const r=new OM(this.expressionMap);return r.mapToProperty=e,r.relationName=t,r.alias=n,r.queryBuilderFactory=i,this.expressionMap.relationCountAttributes.push(r),this.expressionMap.createAlias({type:"other",name:r.junctionAlias}),r.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:r.junctionAlias,metadata:r.relation.junctionEntityMetadata}),this}loadAllRelationIds(e){return this.expressionMap.mainAlias.metadata.relations.forEach((t=>{void 0!==e&&void 0!==e.relations&&-1===e.relations.indexOf(t.propertyPath)||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+t.propertyPath,this.expressionMap.mainAlias.name+"."+t.propertyPath,e)})),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereExists(e){return this.where(...this.getExistsCondition(e))}andWhereExists(e){return this.andWhere(...this.getExistsCondition(e))}orWhereExists(e){return this.orWhere(...this.getExistsCondition(e))}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}having(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this}andHaving(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this}orHaving(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this}groupBy(e){return this.expressionMap.groupBys=e?[e]:[],this}addGroupBy(e){return this.expressionMap.groupBys.push(e),this}timeTravelQuery(e){return"cockroachdb"===this.connection.driver.options.type&&(this.expressionMap.timeTravel=void 0===e?"follower_read_timestamp()":e),this}orderBy(e,t="ASC",n){if(void 0!==t&&"ASC"!==t&&"DESC"!==t)throw new EO('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(void 0!==n&&"NULLS FIRST"!==n&&"NULLS LAST"!==n)throw new EO('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return this.expressionMap.orderBys=e?"object"==typeof e?e:n?{[e]:{order:t,nulls:n}}:{[e]:t}:{},this}addOrderBy(e,t="ASC",n){if(void 0!==t&&"ASC"!==t&&"DESC"!==t)throw new EO('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(void 0!==n&&"NULLS FIRST"!==n&&"NULLS LAST"!==n)throw new EO('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return this.expressionMap.orderBys[e]=n?{order:t,nulls:n}:t,this}limit(e){if(this.expressionMap.limit=this.normalizeNumber(e),void 0!==this.expressionMap.limit&&isNaN(this.expressionMap.limit))throw new EO('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(e){if(this.expressionMap.offset=this.normalizeNumber(e),void 0!==this.expressionMap.offset&&isNaN(this.expressionMap.offset))throw new EO('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(e){if(this.expressionMap.take=this.normalizeNumber(e),void 0!==this.expressionMap.take&&isNaN(this.expressionMap.take))throw new EO('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(e){if(this.expressionMap.skip=this.normalizeNumber(e),void 0!==this.expressionMap.skip&&isNaN(this.expressionMap.skip))throw new EO('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(e){return this.expressionMap.useIndex=e,this}setLock(e,t,n){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this.expressionMap.lockTables=n,this}setOnLocked(e){return this.expressionMap.onLocked=e,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if("optimistic"===this.expressionMap.lockMode)throw new KO;this.expressionMap.queryEntity=!1;const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0);const n=await this.loadRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(i){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getRawAndEntities(){const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(i){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getOne(){const e=(await this.getRawAndEntities()).entities[0];if(e&&"optimistic"===this.expressionMap.lockMode&&this.expressionMap.lockVersion){const t=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const n=t.updateDateColumn.getEntityValue(e);if(n.getTime()!==this.expressionMap.lockVersion.getTime())throw new DO(t.name,this.expressionMap.lockVersion,n)}else{const n=t.versionColumn.getEntityValue(e);if(n!==this.expressionMap.lockVersion)throw new DO(t.name,this.expressionMap.lockVersion,n)}}return void 0===e?null:e}async getOneOrFail(){const e=await this.getOne();if(!e)throw new MO(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return e}async getMany(){if("optimistic"===this.expressionMap.lockMode)throw new KO;return(await this.getRawAndEntities()).entities}async getCount(){if("optimistic"===this.expressionMap.lockMode)throw new KO;const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeCountQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(i){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getExists(){if("optimistic"===this.expressionMap.lockMode)throw new KO;const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeExistsQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(i){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getManyAndCount(){if("optimistic"===this.expressionMap.lockMode)throw new KO;const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);this.expressionMap.queryEntity=!1;const i=this.expressionMap.cacheId;this.expressionMap.cacheId=i?`${i}-count`:i;const r=await this.executeCountQuery(e),a=[n.entities,r];return t&&await e.commitTransaction(),a}catch(n){if(t)try{await e.rollbackTransaction()}catch(i){}throw n}finally{e!==this.queryRunner&&await e.release()}}async stream(){this.expressionMap.queryEntity=!1;const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{!0===this.expressionMap.useTransaction&&!1===n.isTransactionActive&&(await n.startTransaction(),i=!0);const r=()=>{if(n!==this.queryRunner)return n.release()},a=n.stream(e,t,r,r);return i&&await n.commitTransaction(),a}catch(r){if(i)try{await n.rollbackTransaction()}catch(a){}throw r}}cache(e,t){return"boolean"==typeof e?this.expressionMap.cache=e:"number"==typeof e?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):"string"!=typeof e&&"number"!=typeof e||(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this}setOption(e){return this.expressionMap.options.push(e),this}join(e,t,n,i,r,a,o,s){r&&this.setParameters(r);const l=new AM(this.connection,this.expressionMap);l.direction=e,l.mapAsEntity=s,l.mapToProperty=a,l.isMappingMany=o,l.entityOrProperty=t,l.condition=i,this.expressionMap.joinAttributes.push(l);const c=l.metadata;if(c){if(c.deleteDateColumn&&!this.expressionMap.withDeleted){const e=`${n}.${c.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${e}`:`${e}`}l.alias=this.expressionMap.createAlias({type:"join",name:n,metadata:c}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let e="";if("function"==typeof t){const n=t(this.subQuery());this.setParameters(n.getParameters()),e=n.getQuery()}else e=t;const i="function"==typeof t||"("===t.substr(0,1)&&")"===t.substr(-1);l.alias=this.expressionMap.createAlias({type:"join",name:n,tablePath:!1===i?t:void 0,subQuery:!0===i?e:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new EO("Cannot build query because main alias is not set (call qb#from method)");const e=[],t=[];if(this.expressionMap.mainAlias.hasMetadata){const n=this.expressionMap.mainAlias.metadata;e.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,n)),t.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,n))}this.expressionMap.joinAttributes.forEach((n=>{if(n.metadata)e.push(...this.buildEscapedEntityColumnSelects(n.alias.name,n.metadata)),t.push(...this.findEntityColumnSelects(n.alias.name,n.metadata));else{const i=this.expressionMap.selects.some((e=>e.selection===n.alias.name));if(i){e.push({selection:this.escape(n.alias.name)+".*"});const i=this.expressionMap.selects.find((e=>e.selection===n.alias.name));t.push(i)}}})),this.expressionMap.selects.filter((e=>-1===t.indexOf(e))).forEach((t=>e.push({selection:this.replacePropertyNames(t.selection),aliasName:t.aliasName}))),0===e.length&&e.push({selection:"*"});let n="";this.expressionMap.useIndex&&CR.isMySQLFamily(this.connection.driver)&&(n=` USE INDEX (${this.expressionMap.useIndex})`);const i=this.expressionMap.aliases.filter((e=>"from"===e.type&&(e.tablePath||e.subQuery))).map((e=>e.subQuery?e.subQuery+" "+this.escape(e.name):this.getTableName(e.tablePath)+" "+this.escape(e.name))),r=this.createSelectDistinctExpression(),a=e.map((e=>e.selection+(e.aliasName?" AS "+this.escape(e.aliasName):""))).join(", ");return r+a+" FROM "+i.join(", ")+this.createTableLockExpression()+n}createSelectDistinctExpression(){const{selectDistinct:e,selectDistinctOn:t,maxExecutionTime:n}=this.expressionMap,{driver:i}=this.connection;let r="SELECT ";if(n>0&&CR.isMySQLFamily(i)&&(r+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),CR.isPostgresFamily(i)&&t.length>0){const e=t.map((e=>this.replacePropertyNames(e))).join(", ");r=`SELECT DISTINCT ON (${e}) `}else e&&(r="SELECT DISTINCT ");return r}createJoinExpression(){return this.expressionMap.joinAttributes.map((e=>{const t=e.relation,n=e.tablePath,i=e.alias.name;let r=e.condition?" AND ("+e.condition+")":"";const a=e.parentAlias;if(!a||!t){const t=e.alias.subQuery?e.alias.subQuery:this.getTableName(n);return" "+e.direction+" JOIN "+t+" "+this.escape(i)+this.createTableLockExpression()+(e.condition?" ON "+this.replacePropertyNames(e.condition):"")}if(t.isManyToOne||t.isOneToOneOwner){const o=t.joinColumns.map((e=>i+"."+e.referencedColumn.propertyPath+"="+a+"."+t.propertyPath+"."+e.referencedColumn.propertyPath)).join(" AND ");return" "+e.direction+" JOIN "+this.getTableName(n)+" "+this.escape(i)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(o+r)}if(t.isOneToMany||t.isOneToOneNotOwner){const o=t.inverseRelation.joinColumns.map((e=>("entity-child"===t.inverseEntityMetadata.tableType&&t.inverseEntityMetadata.discriminatorColumn&&(r+=" AND "+i+"."+t.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+t.inverseEntityMetadata.discriminatorValue+"'"),i+"."+t.inverseRelation.propertyPath+"."+e.referencedColumn.propertyPath+"="+a+"."+e.referencedColumn.propertyPath))).join(" AND ");return" "+e.direction+" JOIN "+this.getTableName(n)+" "+this.escape(i)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(o+r)}{const o=t.junctionEntityMetadata.tablePath,s=e.junctionAlias;let l="",c="";return t.isOwning?(l=t.joinColumns.map((e=>s+"."+e.propertyPath+"="+a+"."+e.referencedColumn.propertyPath)).join(" AND "),c=t.inverseJoinColumns.map((e=>i+"."+e.referencedColumn.propertyPath+"="+s+"."+e.propertyPath)).join(" AND ")):(l=t.inverseRelation.inverseJoinColumns.map((e=>s+"."+e.propertyPath+"="+a+"."+e.referencedColumn.propertyPath)).join(" AND "),c=t.inverseRelation.joinColumns.map((e=>i+"."+e.referencedColumn.propertyPath+"="+s+"."+e.propertyPath)).join(" AND "))," "+e.direction+" JOIN "+this.getTableName(o)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l)+" "+e.direction+" JOIN "+this.getTableName(n)+" "+this.escape(i)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+r)}})).join(" ")}createGroupByExpression(){return this.expressionMap.groupBys&&this.expressionMap.groupBys.length?" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", ")):""}createOrderByExpression(){const e=this.expressionMap.allOrderBys;return 0===Object.keys(e).length?"":" ORDER BY "+Object.keys(e).map((t=>{const n="string"==typeof e[t]?e[t]:e[t].order+" "+e[t].nulls,i=this.expressionMap.selects.find((e=>e.selection===t));if(i&&!i.aliasName&&-1!==t.indexOf(".")){const e=t.split("."),i=e[0],r=e.slice(1).join("."),a=this.expressionMap.aliases.find((e=>e.name===i));if(a){const e=a.metadata.findColumnWithPropertyPath(r);if(e){const t=CR.buildAlias(this.connection.driver,void 0,i,e.databaseName);return this.escape(t)+" "+n}}}return this.replacePropertyNames(t)+" "+n})).join(", ")}createLimitOffsetExpression(){let e=this.expressionMap.offset,t=this.expressionMap.limit;if(e||t||0!==this.expressionMap.joinAttributes.length||(e=this.expressionMap.skip,t=this.expressionMap.take),"mssql"===this.connection.driver.options.type){let n="";if((t||e)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(n=" ORDER BY (SELECT NULL)"),t&&e)return n+" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return n+" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(e)return n+" OFFSET "+e+" ROWS"}else if(CR.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type||"sap"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)throw new aR}else if(CR.isSQLiteFamily(this.connection.driver)){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" LIMIT -1 OFFSET "+e}else if("oracle"===this.connection.driver.options.type){if(t&&e)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return" FETCH NEXT "+t+" ROWS ONLY";if(e)return" OFFSET "+e+" ROWS"}else{if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" OFFSET "+e}return""}createTableLockExpression(){if("mssql"===this.connection.driver.options.type)switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const e=this.connection.driver;let t="";if(this.expressionMap.lockTables){if(!CR.isPostgresFamily(e)&&"cockroachdb"!==e.options.type)throw new EO("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new EO("lockTables cannot be an empty array");t=" OF "+this.expressionMap.lockTables.join(", ")}let n="";switch("nowait"===this.expressionMap.onLocked?n=" NOWAIT":"skip_locked"===this.expressionMap.onLocked&&(n=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if("mysql"===e.options.type||"aurora-mysql"===e.options.type)return CR.isReleaseVersionOrGreater(e,"8.0.0")?" FOR SHARE"+t+n:" LOCK IN SHARE MODE";if("mariadb"===e.options.type)return" LOCK IN SHARE MODE";if(CR.isPostgresFamily(e))return" FOR SHARE"+t+n;if("oracle"===e.options.type)return" FOR UPDATE";if("mssql"===e.options.type)return"";throw new CO;case"pessimistic_write":if(CR.isMySQLFamily(e)||"aurora-mysql"===e.options.type||"oracle"===e.options.type)return" FOR UPDATE"+n;if(CR.isPostgresFamily(e)||"cockroachdb"===e.options.type)return" FOR UPDATE"+t+n;if("mssql"===e.options.type)return"";throw new CO;case"pessimistic_partial_write":if(CR.isPostgresFamily(e))return" FOR UPDATE"+t+" SKIP LOCKED";if(CR.isMySQLFamily(e))return" FOR UPDATE SKIP LOCKED";throw new CO;case"pessimistic_write_or_fail":if(CR.isPostgresFamily(e)||"cockroachdb"===e.options.type)return" FOR UPDATE"+t+" NOWAIT";if(CR.isMySQLFamily(e))return" FOR UPDATE NOWAIT";throw new CO;case"for_no_key_update":if(CR.isPostgresFamily(e)||"cockroachdb"===e.options.type)return" FOR NO KEY UPDATE"+t+n;throw new CO;case"for_key_share":if(CR.isPostgresFamily(e))return" FOR KEY SHARE"+t+n;throw new CO;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const e=this.expressionMap.havings.map(((e,t)=>{switch(e.type){case"and":return(t>0?"AND ":"")+this.replacePropertyNames(e.condition);case"or":return(t>0?"OR ":"")+this.replacePropertyNames(e.condition);default:return this.replacePropertyNames(e.condition)}})).join(" ");return e.length?" HAVING "+e:""}buildEscapedEntityColumnSelects(e,t){const n=this.expressionMap.selects.some((t=>t.selection===e)),i=[];if(n&&i.push(...t.columns.filter((e=>!0===e.isSelect))),i.push(...t.columns.filter((t=>this.expressionMap.selects.some((n=>n.selection===e+"."+t.propertyPath))))),0===i.length)return[];const r=this.expressionMap.queryEntity?t.primaryColumns.filter((e=>-1===i.indexOf(e))):[],a=[...i,...r],o=[],s=this.escape(e);return a.forEach((t=>{let i=s+"."+this.escape(t.databaseName);if(t.isVirtualProperty&&t.query&&(i=`(${t.query(s)})`),-1!==this.connection.driver.spatialTypes.indexOf(t.type)){if(CR.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type){const e=this.connection.driver.options.legacySpatialSupport;i=`${e?"AsText":"ST_AsText"}(${i})`}CR.isPostgresFamily(this.connection.driver)&&(i=t.precision?`ST_AsGeoJSON(${i}, ${t.precision})::json`:`ST_AsGeoJSON(${i})::json`),"mssql"===this.connection.driver.options.type&&(i=`${i}.ToString()`)}const r=this.expressionMap.selects.filter((n=>n.selection===e+"."+t.propertyPath));r.length?r.forEach((n=>{o.push({selection:i,aliasName:n.aliasName?n.aliasName:CR.buildAlias(this.connection.driver,void 0,e,t.databaseName),virtual:n.virtual})})):o.push({selection:i,aliasName:CR.buildAlias(this.connection.driver,void 0,e,t.databaseName),virtual:n})})),o}findEntityColumnSelects(e,t){const n=this.expressionMap.selects.find((t=>t.selection===e));return n?[n]:this.expressionMap.selects.filter((n=>t.columns.some((t=>n.selection===e+"."+t.propertyPath))))}computeCountExpression(){const e=this.expressionMap.mainAlias.name,t=this.expressionMap.mainAlias.metadata.primaryColumns,n=this.escape(e);if(0===this.expressionMap.joinAttributes.length&&0===this.expressionMap.relationIdAttributes.length&&0===this.expressionMap.relationCountAttributes.length)return"COUNT(1)";if("cockroachdb"===this.connection.driver.options.type||CR.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+t.map((e=>`${n}.${this.escape(e.databaseName)}`)).join(", ")+"))";if(CR.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+t.map((e=>`${n}.${this.escape(e.databaseName)}`)).join(", ")+")";if("mssql"===this.connection.driver.options.type){const e=t.map((e=>`${n}.${this.escape(e.databaseName)}`)).join(", '|;|', ");return 1===t.length?`COUNT(DISTINCT(${e}))`:`COUNT(DISTINCT(CONCAT(${e})))`}if("spanner"===this.connection.driver.options.type){if(1===t.length)return`COUNT(DISTINCT(${n}.${this.escape(t[0].databaseName)}))`;return`COUNT(DISTINCT(CONCAT(${t.map((e=>`CAST(${n}.${this.escape(e.databaseName)} AS STRING)`)).join(", '|;|', ")})))`}return"COUNT(DISTINCT("+t.map((e=>`${n}.${this.escape(e.databaseName)}`)).join(" || '|;|' || ")+"))"}async executeCountQuery(e){const t=this.computeCountExpression(),n=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(t,"cnt").setOption("disable-global-order").loadRawResults(e);return n&&n[0]&&n[0].cnt?parseInt(n[0].cnt):0}async executeExistsQuery(e){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(e)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const e=Array.isArray(this.findOptions.select)?oP.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(e,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const e=Array.isArray(this.findOptions.relations)?oP.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(e,"object"==typeof this.findOptions.select?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),!1!==this.findOptions.loadEagerRelations&&"join"===this.expressionMap.relationLoadStrategy&&this.buildEagerRelations(e,"object"==typeof this.findOptions.select?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere("("!==this.conditions.substr(0,1)?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach((e=>{e.select&&!e.selection?"inner"===e.type?this.innerJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):"inner"===e.type?this.innerJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias)})),void 0!==this.findOptions.skip&&this.skip(this.findOptions.skip),void 0!==this.findOptions.take&&this.take(this.findOptions.take),"number"==typeof this.findOptions.cache||"boolean"==typeof this.findOptions.cache?this.cache(this.findOptions.cache):"object"==typeof this.findOptions.cache&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach((e=>{this.leftJoin(this.findOptions.join.leftJoin[e],e)})),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach((e=>{this.innerJoin(this.findOptions.join.innerJoin[e],e)})),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach((e=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[e],e)})),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach((e=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[e],e)}))),this.findOptions.lock)if("optimistic"===this.findOptions.lock.mode)this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if("pessimistic_read"===this.findOptions.lock.mode||"pessimistic_write"===this.findOptions.lock.mode||"dirty_read"===this.findOptions.lock.mode||"pessimistic_partial_write"===this.findOptions.lock.mode||"pessimistic_write_or_fail"===this.findOptions.lock.mode||"for_no_key_update"===this.findOptions.lock.mode||"for_key_share"===this.findOptions.lock.mode){const e=this.findOptions.lock.tables?this.findOptions.lock.tables.map((e=>{const t=this.expressionMap.aliases.find((t=>t.metadata.tableNameWithoutPrefix===e));if(!t)throw new EO(`"${e}" is not part of this query`);return this.escape(t.name)})):void 0;this.setLock(this.findOptions.lock.mode,void 0,e),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}!0===this.findOptions.loadRelationIds?this.loadAllRelationIds():"object"==typeof this.findOptions.loadRelationIds&&this.loadAllRelationIds(this.findOptions.loadRelationIds),!1!==this.findOptions.loadEagerRelations&&LR.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),!0===this.findOptions.transaction&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(e){this.relationMetadatas.push(e)}async executeEntitiesAndRawResults(e){if(!this.expressionMap.mainAlias)throw new EO('Alias is not set. Use "from" method to set an alias.');if(("pessimistic_read"===this.expressionMap.lockMode||"pessimistic_write"===this.expressionMap.lockMode||"pessimistic_partial_write"===this.expressionMap.lockMode||"pessimistic_write_or_fail"===this.expressionMap.lockMode||"for_no_key_update"===this.expressionMap.lockMode||"for_key_share"===this.expressionMap.lockMode)&&!e.isTransactionActive)throw new JO;if("optimistic"===this.expressionMap.lockMode){const e=this.expressionMap.mainAlias.metadata;if(!e.versionColumn&&!e.updateDateColumn)throw new QO(e.name)}const t=new RM(this.connection,e,this.expressionMap.relationIdAttributes),n=new $M(this.connection,e,this.expressionMap.relationCountAttributes);new MM(this.expressionMap).transform();new IM(this.expressionMap).transform();let i=[],r=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[t,n]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),r=this.expressionMap.mainAlias.metadata,a=this.expressionMap.mainAlias.name,o=r.primaryColumns.map((e=>{const t=this.escape("distinctAlias"),i=this.escape(CR.buildAlias(this.connection.driver,void 0,a,e.databaseName));n[i]||(n[i]="ASC");const r=CR.buildAlias(this.connection.driver,void 0,"ids_"+a,e.databaseName);return`${t}.${i} AS ${this.escape(r)}`})),s=this.clone(),l=s.expressionMap.timeTravel;if(i=await new FM(this.connection,e).select(`DISTINCT ${o.join(", ")}`).addSelect(t).from(`(${s.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(l).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(n).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),i.length>0){let t="";const n={};if(r.hasMultiplePrimaryKeys)t=i.map(((e,t)=>r.primaryColumns.map((i=>{const r=`orm_distinct_ids_${t}_${i.databaseName}`,o=CR.buildAlias(this.connection.driver,void 0,"ids_"+a,i.databaseName);return n[r]=e[o],`${a}.${i.propertyPath}=:${r}`})).join(" AND "))).join(" OR ");else{const e=CR.buildAlias(this.connection.driver,void 0,"ids_"+a,r.primaryColumns[0].databaseName),o=i.map((t=>t[e])),s=o.every((e=>"number"==typeof e));s?t=`${a}.${r.primaryColumns[0].propertyPath} IN (${o.join(", ")})`:(n.orm_distinct_ids=o,t=a+"."+r.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}i=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:t}).setParameters(n).loadRawResults(e)}}else i=await this.loadRawResults(e);if(i.length>0){const a=await t.load(i),o=await n.load(i),s=new NM(this.expressionMap,this.connection.driver,a,o,this.queryRunner);r=s.transform(i,this.expressionMap.mainAlias),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,r)}if("query"===this.expressionMap.relationLoadStrategy){const t=new PM(this.connection,e);await Promise.all(this.relationMetadatas.map((async e=>{const n=e.inverseEntityMetadata.target,i=e.inverseEntityMetadata.targetName,a=Array.isArray(this.findOptions.select)?oP.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,o=Array.isArray(this.findOptions.relations)?oP.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,s=this.createQueryBuilder().select(i).from(n,i).setFindOptions({select:a?oP.deepValue(a,e.propertyPath):void 0,order:this.findOptions.order?oP.deepValue(this.findOptions.order,e.propertyPath):void 0,relations:o?oP.deepValue(o,e.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(r.length>0){const n=await t.loadManyToManyRelationIdsAndGroup(e,r,void 0,s);r.forEach((t=>{const i=n.find((e=>e.entity===t));if(i){const n=void 0===i.related?null:i.related;e.setEntityValue(t,n)}}))}})))}return{raw:i,entities:r}}createOrderByCombinedWithSelectExpression(e){const t=this.expressionMap.allOrderBys,n=Object.keys(t).map((t=>{if(-1!==t.indexOf(".")){const n=t.split("."),i=n[0],r=n.slice(1).join("."),a=this.expressionMap.findAliasByName(i).metadata.findColumnWithPropertyPath(r);return this.escape(e)+"."+this.escape(CR.buildAlias(this.connection.driver,void 0,i,a.databaseName))}return this.expressionMap.selects.find((e=>e.selection===t||e.aliasName===t))?this.escape(e)+"."+this.escape(t):""})).join(", "),i={};return Object.keys(t).forEach((n=>{if(-1!==n.indexOf(".")){const r=n.split("."),a=r[0],o=r.slice(1).join("."),s=this.expressionMap.findAliasByName(a).metadata.findColumnWithPropertyPath(o);i[this.escape(e)+"."+this.escape(CR.buildAlias(this.connection.driver,void 0,a,s.databaseName))]=t[n]}else this.expressionMap.selects.find((e=>e.selection===n||e.aliasName===n))?i[this.escape(e)+"."+this.escape(n)]=t[n]:i[n]=t[n]})),[n,i]}async loadRawResults(e){const[t,n]=this.getQueryAndParameters(),i=t+" -- PARAMETERS: "+JSON.stringify(n),r="object"==typeof this.connection.options.cache?this.connection.options.cache:{};let a;const o=r.alwaysEnabled&&this.expressionMap.cache||this.expressionMap.cache;let s=!1;if(this.connection.queryResultCache&&o)try{if(a=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:i,duration:this.expressionMap.cacheDuration||r.duration||1e3},e),a&&!this.connection.queryResultCache.isExpired(a))return JSON.parse(a.result)}catch(c){if(!r.ignoreErrors)throw c;s=!0}const l=await e.query(t,n,!0);if(!s&&this.connection.queryResultCache&&o)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:i,time:(new Date).getTime(),duration:this.expressionMap.cacheDuration||r.duration||1e3,result:JSON.stringify(l.records)},a,e)}catch(c){if(!r.ignoreErrors)throw c}return l.records}mergeExpressionMap(e){return RO.assign(this.expressionMap,e),this}normalizeNumber(e){return"number"==typeof e||null==e?e:Number(e)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner("slave")}buildSelect(e,t,n,i){for(let r in e){if(void 0===e[r]||!1===e[r])continue;const a=i?i+"."+r:r,o=t.findColumnWithPropertyPathStrict(a),s=t.findEmbeddedWithPropertyPath(a),l=t.findRelationWithPropertyPath(a);if(!s&&!o&&!l)throw new VO(a,t);o?this.selects.push(n+"."+a):s&&this.buildSelect(e[r],t,n,a)}}buildRelations(e,t,n,i,r){e&&Object.keys(e).forEach((a=>{const o=e[a],s=r?r+"."+a:a,l=n.findEmbeddedWithPropertyPath(s),c=n.findRelationWithPropertyPath(s);if(!l&&!c)throw new VO(s,n);if(l)this.buildRelations(o,"object"==typeof t?oP.deepValue(t,l.propertyPath):void 0,n,i,s);else if(c){let e=i+"_"+s.replace(".","_");e=CR.buildAlias(this.connection.driver,{joiner:"__"},i,e),!0!==o&&"object"!=typeof o||("query"===this.expressionMap.relationLoadStrategy?this.concatRelationMetadata(c):(this.joins.push({type:"left",select:!0,selection:t&&"object"==typeof t[a]?t[a]:void 0,alias:e,parentAlias:i,relationMetadata:c}),t&&"object"==typeof t[a]&&this.buildSelect(t[a],c.inverseEntityMetadata,e))),"object"==typeof o&&"join"===this.expressionMap.relationLoadStrategy&&this.buildRelations(o,"object"==typeof t?oP.deepValue(t,c.propertyPath):void 0,c.inverseEntityMetadata,e,void 0)}}))}buildEagerRelations(e,t,n,i,r){e&&Object.keys(e).forEach((a=>{const o=e[a],s=r?r+"."+a:a,l=n.findEmbeddedWithPropertyPath(s),c=n.findRelationWithPropertyPath(s);if(!l&&!c)throw new VO(s,n);if(l)this.buildEagerRelations(o,"object"==typeof t?oP.deepValue(t,l.propertyPath):void 0,n,i,s);else if(c){let e=i+"_"+s.replace(".","_");e=CR.buildAlias(this.connection.driver,{joiner:"__"},i,e),!0!==o&&"object"!=typeof o||c.inverseEntityMetadata.eagerRelations.forEach((n=>{let i=e+"_"+n.propertyPath.replace(".","_");i=CR.buildAlias(this.connection.driver,{joiner:"__"},e,i);const r=this.joins.find((e=>e.alias===i));r||this.joins.push({type:"left",select:!0,alias:i,parentAlias:e,selection:void 0,relationMetadata:n}),t&&"object"==typeof t[a]&&this.buildSelect(t[a],c.inverseEntityMetadata,e)})),"object"==typeof o&&this.buildEagerRelations(o,"object"==typeof t?oP.deepValue(t,c.propertyPath):void 0,c.inverseEntityMetadata,e,void 0)}}))}buildOrder(e,t,n,i){for(let r in e){if(void 0===e[r])continue;const a=i?i+"."+r:r,o=t.findColumnWithPropertyPathStrict(a),s=t.findEmbeddedWithPropertyPath(a),l=t.findRelationWithPropertyPath(a);if(!s&&!o&&!l)throw new VO(a,t);if(o){let t="object"==typeof e[r]?e[r].direction:e[r];t="DESC"===t||"desc"===t||-1===t?"DESC":"ASC";let i="object"==typeof e[r]?e[r].nulls:void 0;i="first"===(null==i?void 0:i.toLowerCase())?"NULLS FIRST":"last"===(null==i?void 0:i.toLowerCase())?"NULLS LAST":void 0;let o=`${n}.${a}`;this.addOrderBy(o,t,i)}else if(s)this.buildOrder(e[r],t,n,a);else if(l){let t=n+"_"+a.replace(".","_");t=CR.buildAlias(this.connection.driver,{joiner:"__"},n,t);const i=this.joins.find((e=>e.alias===t));i||this.joins.push({type:"left",select:!1,alias:t,parentAlias:n,selection:void 0,relationMetadata:l}),this.buildOrder(e[r],l.inverseEntityMetadata,t)}}}buildWhere(e,t,n,i){let r="";if(Array.isArray(e)&&e.length)r="("+e.map((e=>this.buildWhere(e,t,n,i))).filter((e=>!!e)).map((e=>"("+e+")")).join(" OR ")+")";else{let a=[];for(let r in e){if(void 0===e[r]||null===e[r])continue;const o=i?i+"."+r:r,s=t.findColumnWithPropertyPathStrict(o),l=t.findEmbeddedWithPropertyPath(o),c=t.findRelationWithPropertyPath(o);if(!l&&!s&&!c)throw new VO(o,t);if(s){let t=`${n}.${o}`;s.isVirtualProperty&&s.query&&(t=`(${s.query(n)})`);let i=e[r];PO.isEqualOperator(e[r])&&(i=e[r].value),s.transformer&&(i instanceof jM?i.transformValue(s.transformer):i=sP.transformTo(s.transformer,i)),a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(t,i)))}else if(l){const i=this.buildWhere(e[r],t,n,o);i&&a.push(i)}else if(c){if("object"==typeof e[r]){const t=Object.keys(e[r]).every((t=>void 0===e[r][t]));if(t)continue}if(PO.isFindOperator(e[r]))if("moreThan"===e[r].type||"lessThan"===e[r].type||"moreThanOrEqual"===e[r].type||"lessThanOrEqual"===e[r].type){let t="";"moreThan"===e[r].type?t=">":"lessThan"===e[r].type?t="<":"moreThanOrEqual"===e[r].type?t=">=":"lessThanOrEqual"===e[r].type&&(t="<=");const i=this.subQuery();if(c.isManyToManyOwner)i.select("COUNT(*)").from(c.joinTableName,c.joinTableName).where(c.joinColumns.map((e=>`${c.joinTableName}.${e.propertyName} = ${n}.${e.referencedColumn.propertyName}`)).join(" AND "));else if(c.isManyToManyNotOwner)i.select("COUNT(*)").from(c.inverseRelation.joinTableName,c.inverseRelation.joinTableName).where(c.inverseRelation.inverseJoinColumns.map((e=>`${c.inverseRelation.joinTableName}.${e.propertyName} = ${n}.${e.referencedColumn.propertyName}`)).join(" AND "));else{if(!c.isOneToMany)throw new Error("This relation isn't supported by given find operator");i.select("COUNT(*)").from(c.inverseEntityMetadata.target,c.inverseEntityMetadata.tableName).where(c.inverseRelation.joinColumns.map((e=>`${c.inverseEntityMetadata.tableName}.${e.propertyName} = ${n}.${e.referencedColumn.propertyName}`)).join(" AND "))}this.andWhere(i.getSql()+" "+t+" "+parseInt(e[r].value))}else{if(!(c.isManyToOne||c.isOneToOne&&c.isOneToOneOwner))throw new Error("This relation isn't supported by given find operator");{const t=`${n}.${o}`;a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(t,e[r])))}}else{let t=n+"_"+c.propertyPath.replace(".","_");t=CR.buildAlias(this.connection.driver,{joiner:"__"},n,t);const i=this.joins.find((e=>e.alias===t));i||this.joins.push({type:"left",select:!1,selection:void 0,alias:t,parentAlias:n,relationMetadata:c});const o=this.buildWhere(e[r],c.inverseEntityMetadata,t);o&&a.push(o)}}}r=a.join(" AND ")}return r}}class zM{constructor(e){this.options=e}logQuery(e,t,n){this.isLogEnabledFor("query")&&this.writeLog("query",{type:"query",prefix:"query",message:e,format:"sql",parameters:t},n)}logQueryError(e,t,n,i){this.isLogEnabledFor("query-error")&&this.writeLog("warn",[{type:"query-error",prefix:"query failed",message:t,format:"sql",parameters:n},{type:"query-error",prefix:"error",message:e}],i)}logQuerySlow(e,t,n,i){this.isLogEnabledFor("query-slow")&&this.writeLog("warn",[{type:"query-slow",prefix:"query is slow",message:t,format:"sql",parameters:n,additionalInfo:{time:e}},{type:"query-slow",prefix:"execution time",message:e}],i)}logSchemaBuild(e,t){this.isLogEnabledFor("schema-build")&&this.writeLog("schema",{type:"schema-build",message:e},t)}logMigration(e,t){this.isLogEnabledFor("migration")||this.writeLog("log",{type:"migration",message:e},t)}log(e,t,n){switch(e){case"log":if(!this.isLogEnabledFor("log"))return;this.writeLog("log",{type:"log",message:t},n);break;case"info":if(!this.isLogEnabledFor("info"))return;this.writeLog("info",{type:"info",prefix:"info",message:t},n);break;case"warn":if(!this.isLogEnabledFor("warn"))return;this.writeLog("warn",{type:"warn",message:t},n)}}isLogEnabledFor(e){switch(e){case"query":return"all"===this.options||!0===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("query");case"error":case"query-error":return"all"===this.options||!0===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("error");case"query-slow":case"migration":return!0;case"schema":case"schema-build":return"all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("schema");case"log":return"all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("log");case"info":return"all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("info");case"warn":return"all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("warn");default:return!1}}prepareLogMessages(e,t){t={addColonToPrefix:!0,appendParameterAsComment:!0,highlightSql:!0,...t};const n=Array.isArray(e)?e:[e];for(let i of n){if("object"!=typeof i&&(i={message:i}),"sql"===i.format){let e=String(i.message);t.appendParameterAsComment&&i.parameters&&i.parameters.length&&(e+=` -- PARAMETERS: ${this.stringifyParams(i.parameters)}`),t.highlightSql&&(e=FA.highlightSql(e)),i.message=e}t.addColonToPrefix&&i.prefix&&(i.prefix+=":")}return n}stringifyParams(e){try{return JSON.stringify(e)}catch(t){return e}}}class UM extends zM{writeLog(e,t,n){var i;const r=this.prepareLogMessages(t,{highlightSql:!1});for(let a of r)switch(null!==(i=a.type)&&void 0!==i?i:e){case"log":case"schema-build":case"migration":console.log(a.message);break;case"info":case"query":a.prefix?console.info(a.prefix,a.message):console.info(a.message);break;case"warn":case"query-slow":a.prefix?console.warn(a.prefix,a.message):console.warn(a.message);break;case"error":case"query-error":a.prefix?console.error(a.prefix,a.message):console.error(a.message)}}}class VM extends zM{writeLog(e,t,n){var i;const r=this.prepareLogMessages(t);for(let a of r)switch(null!==(i=a.type)&&void 0!==i?i:e){case"log":case"schema-build":case"migration":FA.log(String(a.message));break;case"info":case"query":a.prefix?FA.logInfo(a.prefix,a.message):FA.log(String(a.message));break;case"warn":case"query-slow":a.prefix?FA.logWarn(a.prefix,a.message):console.warn(FA.warn(String(a.message)));break;case"error":case"query-error":a.prefix?FA.logError(a.prefix,String(a.message)):console.error(FA.error(String(a.message)))}}}class WM{logQuery(){throw new Error("This logger is not applicable in a browser context")}logQueryError(){throw new Error("This logger is not applicable in a browser context")}logQuerySlow(){throw new Error("This logger is not applicable in a browser context")}logSchemaBuild(){throw new Error("This logger is not applicable in a browser context")}logMigration(){throw new Error("This logger is not applicable in a browser context")}log(){throw new Error("This logger is not applicable in a browser context")}}class HM extends WM{}var QM,KM,GM={exports:{}};function YM(){if(KM)return QM;KM=1;var e=1e3,t=60*e,n=60*t,i=24*n,r=7*i,a=365.25*i;function o(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}return QM=function(s,l){l=l||{};var c=typeof s;if("string"===c&&s.length>0)return function(o){if((o=String(o)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(!s)return;var l=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*r;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(s);if("number"===c&&isFinite(s))return l.long?function(r){var a=Math.abs(r);if(a>=i)return o(r,a,i,"day");if(a>=n)return o(r,a,n,"hour");if(a>=t)return o(r,a,t,"minute");if(a>=e)return o(r,a,e,"second");return r+" ms"}(s):function(r){var a=Math.abs(r);if(a>=i)return Math.round(r/i)+"d";if(a>=n)return Math.round(r/n)+"h";if(a>=t)return Math.round(r/t)+"m";if(a>=e)return Math.round(r/e)+"s";return r+"ms"}(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))},QM}var JM=function(e){function t(e){let i,r,a,o=null;function s(...e){if(!s.enabled)return;const n=s,r=Number(new Date),a=r-(i||r);n.diff=a,n.prev=i,n.curr=r,i=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((i,r)=>{if("%%"===i)return"%";o++;const a=t.formatters[r];if("function"==typeof a){const t=e[o];i=a.call(n,t),e.splice(o,1),o--}return i})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==t.namespaces&&(r=t.namespaces,a=t.enabled(e)),a),set:e=>{o=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,n){const i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=YM(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(r=i))})),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!=typeof process&&"env"in process&&(e={}.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=JM(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(GM,GM.exports);var XM=GM.exports;class ZM extends zM{constructor(){super(...arguments),this.logger={log:XM.debug("typeorm:log"),info:XM.debug("typeorm:info"),warn:XM.debug("typeorm:warn"),error:XM.debug("typeorm:error"),query:XM.debug("typeorm:query:log"),"query-error":XM.debug("typeorm:query:error"),"query-slow":XM.debug("typeorm:query:slow"),"schema-build":XM.debug("typeorm:schema"),migration:XM.debug("typeorm:migration")}}isLogEnabledFor(e){switch(e){case"query":return this.logger.query.enabled;case"query-error":return this.logger["query-error"].enabled;case"query-slow":return!0;case"schema":case"schema-build":return this.logger["schema-build"].enabled;case"migration":return this.logger.migration.enabled;case"log":return this.logger.log.enabled;case"info":return this.logger.info.enabled;case"warn":return this.logger.warn.enabled;default:return!1}}writeLog(e,t,n){var i;const r=this.prepareLogMessages(t,{appendParameterAsComment:!1});for(let a of r){const t=null!==(i=a.type)&&void 0!==i?i:e;t in this.logger&&(a.prefix?this.logger[t](a.prefix,a.message):this.logger[t](a.message),a.parameters&&a.parameters.length&&this.logger[t]("parameters:",a.parameters))}}}class e${create(e,t){if(RO.isObject(e))return e;if(e)switch(e){case"simple-console":return new UM(t);case"file":return new HM(t);case"advanced-console":return new VM(t);case"debug":return new ZM}return new VM(t)}}class t${constructor(e,t){this.connection=e,this.clientType=t,this.redis=this.loadRedis()}async connect(){const e=this.connection.options.cache;if("redis"===this.clientType)this.client=this.redis.createClient({...null==e?void 0:e.options,legacyMode:!0}),"object"==typeof this.connection.options.cache&&this.connection.options.cache.ignoreErrors&&this.client.on("error",(e=>{this.connection.logger.log("warn",e)})),"connect"in this.client&&await this.client.connect();else if("ioredis"===this.clientType)e&&e.port?e.options?this.client=new this.redis(e.port,e.options):this.client=new this.redis(e.port):e&&e.options?this.client=new this.redis(e.options):this.client=new this.redis;else if("ioredis/cluster"===this.clientType)if(e&&e.options&&Array.isArray(e.options))this.client=new this.redis.Cluster(e.options);else{if(!(e&&e.options&&e.options.startupNodes))throw new EO(`options.startupNodes required for ${this.clientType}.`);this.client=new this.redis.Cluster(e.options.startupNodes,e.options.options)}}async disconnect(){return new Promise(((e,t)=>{this.client.quit(((n,i)=>{if(n)return t(n);e(),this.client=void 0}))}))}async synchronize(e){}getFromCache(e,t){return new Promise(((t,n)=>{e.identifier?this.client.get(e.identifier,((e,i)=>{if(e)return n(e);t(JSON.parse(i))})):e.query?this.client.get(e.query,((e,i)=>{if(e)return n(e);t(JSON.parse(i))})):t(void 0)}))}isExpired(e){return e.time+e.duration<(new Date).getTime()}async storeInCache(e,t,n){return new Promise(((t,n)=>{e.identifier?this.client.set(e.identifier,JSON.stringify(e),"PX",e.duration,((e,i)=>{if(e)return n(e);t()})):e.query&&this.client.set(e.query,JSON.stringify(e),"PX",e.duration,((e,i)=>{if(e)return n(e);t()}))}))}async clear(e){return new Promise(((e,t)=>{this.client.flushdb(((n,i)=>{if(n)return t(n);e()}))}))}async remove(e,t){await Promise.all(e.map((e=>this.deleteKey(e))))}deleteKey(e){return new Promise(((t,n)=>{this.client.del(e,((e,i)=>{if(e)return n(e);t()}))}))}loadRedis(){try{return"ioredis/cluster"===this.clientType?FA.load("ioredis"):FA.load(this.clientType)}catch(RD){throw new EO(`Cannot use cache because ${this.clientType} is not installed. Please run "npm i ${this.clientType} --save".`)}}}let n$;const i$=new Uint8Array(16);function r$(){if(!n$&&(n$="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n$(i$)}const a$=[];for(let e=0;e<256;++e)a$.push((e+256).toString(16).slice(1));const o$={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function s$(e,t,n){if(o$.randomUUID&&!t&&!e)return o$.randomUUID();const i=(e=e||{}).random||(e.rng||r$)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return a$[e[t+0]]+a$[e[t+1]]+a$[e[t+2]]+a$[e[t+3]]+"-"+a$[e[t+4]]+a$[e[t+5]]+"-"+a$[e[t+6]]+a$[e[t+7]]+"-"+a$[e[t+8]]+a$[e[t+9]]+"-"+a$[e[t+10]]+a$[e[t+11]]+a$[e[t+12]]+a$[e[t+13]]+a$[e[t+14]]+a$[e[t+15]]}(i)}class l${constructor(e){this.connection=e;const{schema:t}=this.connection.driver.options,n=this.connection.driver.database,i=("object"==typeof this.connection.options.cache?this.connection.options.cache:{}).tableName||"query-result-cache";this.queryResultCacheDatabase=n,this.queryResultCacheSchema=t,this.queryResultCacheTable=this.connection.driver.buildTableName(i,t,n)}async connect(){}async disconnect(){}async synchronize(e){e=this.getQueryRunner(e);const t=this.connection.driver;await e.hasTable(this.queryResultCacheTable)||await e.createTable(new gR({database:this.queryResultCacheDatabase,schema:this.queryResultCacheSchema,name:this.queryResultCacheTable,columns:[{name:"id",isPrimary:!0,isNullable:!1,type:t.normalizeType({type:t.mappedDataTypes.cacheId}),generationStrategy:"spanner"===t.options.type?"uuid":"increment",isGenerated:!0},{name:"identifier",type:t.normalizeType({type:t.mappedDataTypes.cacheIdentifier}),isNullable:!0},{name:"time",type:t.normalizeType({type:t.mappedDataTypes.cacheTime}),isPrimary:!1,isNullable:!1},{name:"duration",type:t.normalizeType({type:t.mappedDataTypes.cacheDuration}),isPrimary:!1,isNullable:!1},{name:"query",type:t.normalizeType({type:t.mappedDataTypes.cacheQuery}),isPrimary:!1,isNullable:!1},{name:"result",type:t.normalizeType({type:t.mappedDataTypes.cacheResult}),isNullable:!1}]}))}getFromCache(e,t){t=this.getQueryRunner(t);const n=this.connection.createQueryBuilder(t).select().from(this.queryResultCacheTable,"cache");return e.identifier?n.where(`${n.escape("cache")}.${n.escape("identifier")} = :identifier`).setParameters({identifier:"mssql"===this.connection.driver.options.type?new yR(e.identifier,"nvarchar"):e.identifier}).getRawOne():e.query?"oracle"===this.connection.driver.options.type?n.where(`dbms_lob.compare(${n.escape("cache")}.${n.escape("query")}, :query) = 0`,{query:e.query}).getRawOne():n.where(`${n.escape("cache")}.${n.escape("query")} = :query`).setParameters({query:"mssql"===this.connection.driver.options.type?new yR(e.query,"nvarchar"):e.query}).getRawOne():Promise.resolve(void 0)}isExpired(e){const t="string"==typeof e.duration?parseInt(e.duration):e.duration;return("string"==typeof e.time?parseInt(e.time):e.time)+t<(new Date).getTime()}async storeInCache(e,t,n){const i=void 0===n||"slave"===(null==n?void 0:n.getReplicationMode());(void 0===n||i)&&(n=this.connection.createQueryRunner("master"));let r=e;if("mssql"===this.connection.driver.options.type&&(r={identifier:new yR(e.identifier,"nvarchar"),time:new yR(e.time,"bigint"),duration:new yR(e.duration,"int"),query:new yR(e.query,"nvarchar"),result:new yR(e.result,"nvarchar")}),t&&t.identifier){const e=n.manager.createQueryBuilder().update(this.queryResultCacheTable).set(r);e.where(`${e.escape("identifier")} = :condition`,{condition:r.identifier}),await e.execute()}else if(t&&t.query){const e=n.manager.createQueryBuilder().update(this.queryResultCacheTable).set(r);"oracle"===this.connection.driver.options.type?e.where('dbms_lob.compare("query", :condition) = 0',{condition:r.query}):e.where(`${e.escape("query")} = :condition`,{condition:r.query}),await e.execute()}else"spanner"!==this.connection.driver.options.type||r.id||(r.id=s$()),await n.manager.createQueryBuilder().insert().into(this.queryResultCacheTable).values(r).execute();i&&await n.release()}async clear(e){return this.getQueryRunner(e).clearTable(this.queryResultCacheTable)}async remove(e,t){let n=t||this.getQueryRunner();await Promise.all(e.map((e=>{const t=n.manager.createQueryBuilder();return t.delete().from(this.queryResultCacheTable).where(`${t.escape("identifier")} = :identifier`,{identifier:e}).execute()}))),t||await n.release()}getQueryRunner(e){return e||this.connection.createQueryRunner()}}class c${constructor(e){this.connection=e}create(){if(!this.connection.options.cache)throw new EO("To use cache you need to enable it in connection options by setting cache: true or providing some caching options. Example: { host: ..., username: ..., cache: true }");const e=this.connection.options.cache;return e.provider&&"function"==typeof e.provider?e.provider(this.connection):"redis"===e.type||"ioredis"===e.type||"ioredis/cluster"===e.type?new t$(this.connection,e.type):new l$(this.connection)}}class u${constructor(e){this.connection=e}load(e,t,n,i){return n&&n.isReleased&&(n=void 0),e.isManyToOne||e.isOneToOneOwner?this.loadManyToOneOrOneToOneOwner(e,t,n,i):e.isOneToMany||e.isOneToOneNotOwner?this.loadOneToManyOrOneToOneNotOwner(e,t,n,i):e.isManyToManyOwner?this.loadManyToManyOwner(e,t,n,i):this.loadManyToManyNotOwner(e,t,n,i)}loadManyToOneOrOneToOneOwner(e,t,n,i){const r=Array.isArray(t)?t:[t],a=e.entityMetadata.name,o=i||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),s=o.expressionMap.mainAlias.name,l=e.entityMetadata.primaryColumns,c=(e.isOwning?e.joinColumns:e.inverseRelation.joinColumns).map((t=>`${e.entityMetadata.name}.${t.propertyName} = ${s}.${t.referencedColumn.propertyName}`)).join(" AND ");if(o.innerJoin(e.entityMetadata.target,a,c),1===l.length)o.where(`${a}.${l[0].propertyPath} IN (:...${a+"_"+l[0].propertyName})`),o.setParameter(a+"_"+l[0].propertyName,r.map((e=>l[0].getEntityValue(e,!0))));else{const e=r.map(((e,t)=>l.map(((n,i)=>{const r=a+"_entity_"+t+"_"+i;return o.setParameter(r,n.getEntityValue(e,!0)),a+"."+n.propertyPath+" = :"+r})).join(" AND "))).map((e=>"("+e+")")).join(" OR ");o.where(e)}return LR.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadOneToManyOrOneToOneNotOwner(e,t,n,i){const r=Array.isArray(t)?t:[t],a=e.inverseRelation.joinColumns,o=i||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.inverseRelation.entityMetadata.target,e.propertyName),s=o.expressionMap.mainAlias.name;if(1===a.length)o.where(`${s}.${a[0].propertyPath} IN (:...${s+"_"+a[0].propertyName})`),o.setParameter(s+"_"+a[0].propertyName,r.map((e=>a[0].referencedColumn.getEntityValue(e,!0))));else{const e=r.map(((e,t)=>a.map(((n,i)=>{const r=s+"_entity_"+t+"_"+i;return o.setParameter(r,n.referencedColumn.getEntityValue(e,!0)),s+"."+n.propertyPath+" = :"+r})).join(" AND "))).map((e=>"("+e+")")).join(" OR ");o.where(e)}return LR.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadManyToManyOwner(e,t,n,i){const r=Array.isArray(t)?t:[t],a=e.joinColumns.reduce(((e,t)=>(e[t.propertyName]=r.map((e=>t.referencedColumn.getEntityValue(e,!0))),e)),{}),o=i||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),s=o.expressionMap.mainAlias.name,l=e.junctionEntityMetadata.tableName,c=e.joinColumns.map((e=>`${l}.${e.propertyName} IN (:...${e.propertyName})`)),u=e.inverseJoinColumns.map((e=>`${l}.${e.propertyName}=${s}.${e.referencedColumn.propertyName}`));return o.innerJoin(l,l,[...c,...u].join(" AND ")).setParameters(a),LR.joinEagerRelations(o,o.alias,o.expressionMap.mainAlias.metadata),o.getMany()}loadManyToManyNotOwner(e,t,n,i){const r=Array.isArray(t)?t:[t],a=i||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),o=a.expressionMap.mainAlias.name,s=e.junctionEntityMetadata.tableName,l=e.inverseRelation.joinColumns.map((e=>`${s}.${e.propertyName} = ${o}.${e.referencedColumn.propertyName}`)),c=e.inverseRelation.inverseJoinColumns.map((e=>`${s}.${e.propertyName} IN (:...${e.propertyName})`)),u=e.inverseRelation.inverseJoinColumns.reduce(((e,t)=>(e[t.propertyName]=r.map((e=>t.referencedColumn.getEntityValue(e,!0))),e)),{});return a.innerJoin(s,s,[...l,...c].join(" AND ")).setParameters(u),LR.joinEagerRelations(a,a.alias,a.expressionMap.mainAlias.metadata),a.getMany()}enableLazyLoad(e,t,n){const i=this,r="__"+e.propertyName+"__",a="__promise_"+e.propertyName+"__",o="__has_"+e.propertyName+"__",s=(e,t)=>(e[r]=t,e[o]=!0,delete e[a],t),l=(e,t)=>(delete e[o],delete e[r],e[a]=t,t.then((n=>e[a]===t?s(e,n):n)),t);Object.defineProperty(t,e.propertyName,{get:function(){if(!0===this[o]||void 0!==this[r])return Promise.resolve(this[r]);if(this[a])return this[a];const t=i.load(e,this,n).then((t=>e.isOneToOne||e.isManyToOne?0===t.length?null:t[0]:t));return l(this,t)},set:function(e){e instanceof Promise?l(this,e):s(this,e)},configurable:!0,enumerable:!1})}}class d${constructor(e){this["@instanceof"]=Symbol.for("DataSource"),this.migrations=[],this.subscribers=[],this.entityMetadatas=[],this.entityMetadatasMap=new Map,this.name=e.name||"default",this.options=e,this.logger=(new e$).create(this.options.logger,this.options.logging),this.driver=(new rM).create(this),this.manager=this.createEntityManager(),this.namingStrategy=e.namingStrategy||new wO,this.metadataTableName=e.metadataTableName||"typeorm_metadata",this.queryResultCache=e.cache?new c$(this).create():void 0,this.relationLoader=new u$(this),this.relationIdLoader=new PM(this),this.isInitialized=!1}get isConnected(){return this.isInitialized}get mongoManager(){if(!PO.isMongoEntityManager(this.manager))throw new EO("MongoEntityManager is only available for MongoDB databases.");return this.manager}get sqljsManager(){if(!PO.isSqljsEntityManager(this.manager))throw new EO("SqljsEntityManager is only available for Sqljs databases.");return this.manager}setOptions(e){return Object.assign(this.options,e),(e.logger||e.logging)&&(this.logger=(new e$).create(e.logger||this.options.logger,e.logging||this.options.logging)),e.namingStrategy&&(this.namingStrategy=e.namingStrategy),e.cache&&(this.queryResultCache=new c$(this).create()),e.database&&(this.driver.database=CR.buildDriverOptions(this.options).database),this}async initialize(){if(this.isInitialized)throw new TO(this.name);await this.driver.connect(),this.queryResultCache&&await this.queryResultCache.connect(),RO.assign(this,{isInitialized:!0});try{await this.buildMetadatas(),await this.driver.afterConnect(),this.options.dropSchema&&await this.dropDatabase(),this.options.migrationsRun&&await this.runMigrations({transaction:this.options.migrationsTransactionMode}),this.options.synchronize&&await this.synchronize()}catch(e){throw await this.destroy(),e}return this}async connect(){return this.initialize()}async destroy(){if(!this.isInitialized)throw new oR(this.name);await this.driver.disconnect(),this.queryResultCache&&await this.queryResultCache.disconnect(),RO.assign(this,{isInitialized:!1})}async close(){return this.destroy()}async synchronize(e=!1){if(!this.isInitialized)throw new oR(this.name);e&&await this.dropDatabase();const t=this.driver.createSchemaBuilder();await t.build()}async dropDatabase(){const e=this.createQueryRunner();try{if("mssql"===this.driver.options.type||CR.isMySQLFamily(this.driver)||"aurora-mysql"===this.driver.options.type||CR.isSQLiteFamily(this.driver)){const t=[];if(this.entityMetadatas.forEach((e=>{e.database&&-1===t.indexOf(e.database)&&t.push(e.database)})),0===t.length&&this.driver.database&&t.push(this.driver.database),0===t.length)await e.clearDatabase();else for(const n of t)await e.clearDatabase(n)}else await e.clearDatabase()}finally{await e.release()}}async runMigrations(e){if(!this.isInitialized)throw new oR(this.name);const t=new vR(this);t.transaction=e&&e.transaction||"all",t.fake=e&&e.fake||!1;return await t.executePendingMigrations()}async undoLastMigration(e){if(!this.isInitialized)throw new oR(this.name);const t=new vR(this);t.transaction=e&&e.transaction||"all",t.fake=e&&e.fake||!1,await t.undoLastMigration()}async showMigrations(){if(!this.isInitialized)throw new oR(this.name);const e=new vR(this);return await e.showMigrations()}hasMetadata(e){return!!this.findMetadata(e)}getMetadata(e){const t=this.findMetadata(e);if(!t)throw new $O(e);return t}getRepository(e){return this.manager.getRepository(e)}getTreeRepository(e){return this.manager.getTreeRepository(e)}getMongoRepository(e){if("mongodb"!==this.driver.options.type)throw new EO("You can use getMongoRepository only for MongoDB connections.");return this.manager.getRepository(e)}getCustomRepository(e){return this.manager.getCustomRepository(e)}async transaction(e,t){return this.manager.transaction(e,t)}async query(e,t,n){if(PO.isMongoEntityManager(this.manager))throw new EO("Queries aren't supported by MongoDB.");if(n&&n.isReleased)throw new qO;const i=n||this.createQueryRunner();try{return await i.query(e,t)}finally{n||await i.release()}}createQueryBuilder(e,t,n){if(PO.isMongoEntityManager(this.manager))throw new EO("Query Builder is not supported by MongoDB.");if(t){t=CR.buildAlias(this.driver,void 0,t);const i=this.getMetadata(e);return new FM(this,n).select(t).from(i.target,t)}return new FM(this,e)}createQueryRunner(e="master"){const t=this.driver.createQueryRunner(e),n=this.createEntityManager(t);return Object.assign(t,{manager:n}),t}getManyToManyMetadata(e,t){const n=this.getMetadata(e).findRelationWithPropertyPath(t);if(!n)throw new EO(`Relation "${t}" was not found in ${e} entity.`);if(!n.isManyToMany)throw new EO(`Relation "${e}#${t}" does not have a many-to-many relationship.You can use this method only on many-to-many relations.`);return n.junctionEntityMetadata}createEntityManager(e){return(new NP).create(this,e)}findMetadata(e){const t=this.entityMetadatasMap.get(e);if(t)return t;for(let[n,i]of this.entityMetadatasMap){if(PO.isEntitySchema(e)&&i.name===e.options.name)return i;if("string"==typeof e)if(-1!==e.indexOf(".")){if(i.tablePath===e)return i}else if(i.name===e||i.tableName===e)return i;if(RO.isObjectWithName(e)&&"string"==typeof e.name)if(-1!==e.name.indexOf(".")){if(i.tablePath===e.name)return i}else if(i.name===e.name||i.tableName===e.name)return i}}async buildMetadatas(){const e=new SM(this),t=new SR,n=RO.mixedListToArray(this.options.subscribers||[]),i=await e.buildSubscribers(n);RO.assign(this,{subscribers:i});const r=RO.mixedListToArray(this.options.entities||[]),a=await e.buildEntityMetadatas(r);RO.assign(this,{entityMetadatas:a,entityMetadatasMap:new Map(a.map((e=>[e.target,e])))});const o=RO.mixedListToArray(this.options.migrations||[]),s=await e.buildMigrations(o);RO.assign(this,{migrations:s}),t.validateMany(this.entityMetadatas.filter((e=>"view"!==e.tableType)),this.driver);for(let l of a)PO.isBaseEntityConstructor(l.target)&&l.target.useDataSource(this)}}function h$(){const e=FA.getGlobalVariable();return e.typeormMetadataArgsStorage||(e.typeormMetadataArgsStorage=new BA),e.typeormMetadataArgsStorage}function p$(e,t){return function(n,i){let r;"string"==typeof e||"function"==typeof e?r=e:e&&(t=e,r=e.type),t||(t={});const a=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",n,i):void 0;if(!r&&a&&(r=a),!t.type&&r&&(t.type=r),"hstore"!==t.type||t.hstoreType||(t.hstoreType=a===Object?"object":"string"),"function"==typeof e)h$().embeddeds.push({target:n.constructor,propertyName:i,isArray:a===Array||!0===t.array,prefix:void 0!==t.prefix?t.prefix:void 0,type:e});else{if(!t.type)throw new iR(n,i);!0===t.unique&&h$().uniques.push({target:n.constructor,columns:[i]}),h$().columns.push({target:n.constructor,propertyName:i,mode:"regular",options:t}),t.generated&&h$().generations.push({target:n.constructor,propertyName:i,strategy:"string"==typeof t.generated?t.generated:"increment"})}}}var m$=Object.defineProperty,f$=Object.getOwnPropertyDescriptor,g$=(e,t,n,i)=>{for(var r,a=i>1?void 0:i?f$(t,n):t,o=e.length-1;o>=0;o--)(r=e[o])&&(a=(i?r(t,n,a):r(a))||a);return i&&a&&m$(t,n,a),a};let b$=class{constructor(){e(this,"id",void 0),e(this,"isActive",void 0),e(this,"isActive2",void 0),e(this,"name",void 0),e(this,"jsonTest",void 0)}};var y$,v$;g$([(y$={type:"varchar"},function(e,t){let n;"string"==typeof y$||y$===String||y$===Boolean||y$===Number?n=y$:v$=Object.assign({},y$),v$||(v$={});const i=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",e,t):void 0;if(!n&&i&&(n=i),!v$.type&&n&&(v$.type=n),!v$.type)throw new iR(e,t);if(v$.nullable)throw new LO(e,t);v$.primary=!0,h$().columns.push({target:e.constructor,propertyName:t,mode:"regular",options:v$}),v$.generated&&h$().generations.push({target:e.constructor,propertyName:t,strategy:"string"==typeof v$.generated?v$.generated:"increment"})})],b$.prototype,"id",2),g$([p$({type:"boolean"})],b$.prototype,"isActive",2),g$([p$({type:"boolean"})],b$.prototype,"isActive2",2),g$([p$({type:"varchar",length:255})],b$.prototype,"name",2),g$([p$({type:"text",length:255})],b$.prototype,"jsonTest",2),b$=g$([function(e,t){const n=(RO.isObject(e)?e:t)||{},i="string"==typeof e?e:n.name;return function(e){h$().tables.push({target:e,name:i,type:"regular",orderBy:n.orderBy?n.orderBy:void 0,engine:n.engine?n.engine:void 0,database:n.database?n.database:void 0,schema:n.schema?n.schema:void 0,synchronize:n.synchronize,withoutRowid:n.withoutRowid})}}("item")],b$);class w${async up(e){await e.query('\n            CREATE TABLE "item" (\n                "id" integer PRIMARY KEY NOT NULL,\n                "isActive" boolean NOT NULL,\n                "image" BLOB,\n            )\n        ')}async down(e){await e.query('\n            DROP TABLE "item"\n        ')}}class E${async up(e){await e.query('\n            ALTER TABLE "item" ADD  "isActive2" boolean\n        ')}async down(e){await e.query('\n          ALTER TABLE "item" DROP COLUMN  "isActive2"\n        ')}}class x${async up(e){await e.query('\n            ALTER TABLE "item" ADD  "name" varchar\n        ')}async down(e){await e.query('\n          ALTER TABLE "item" DROP COLUMN  "name"\n        ')}}class T${async up(e){await e.query('\n            ALTER TABLE "item" ADD  "jsonTest" text\n        ')}async down(e){await e.query('\n          ALTER TABLE "item" DROP COLUMN  "jsonTest"\n        ')}}class C${constructor(){e(this,"localForage",void 0),e(this,"connection",null)}async configureNativeConnection(){try{await LA.checkConnectionsConsistency({dbNames:[],openModes:[]})}catch(t){console.log("Error with ConnectionsConsistency: ",t)}const e=new IA(LA);this.connection=new d$({type:"capacitor",database:"test_db123",driver:e,migrationsTransactionMode:"none",logging:["error","query","schema"],entities:[b$],migrationsRun:!0,migrations:[w$,E$,x$,T$]});return await this.connection.initialize()}}const S$=()=>{const[e,t]=U.useState();U.useEffect((()=>{fetch("https://images.rapidload-cdn.io/spai/ret_img,q_lossy,to_avif/https://www.itpedia.nl/wp-content/uploads/2018/02/Thinking_Face_Emoji-600x600.png").then((e=>e.blob())).then((e=>{t(e)})).catch((e=>{console.error("Error with blob:",e)}))}),[]),console.log(e),JSON.stringify(XT());const[n,i]=U.useState("");U.useState();const{showConfirmationAlert:r,ConfirmationAlert:a}=(()=>{const[e,t]=U.useState(!1),[n,i]=U.useState(""),[r,a]=U.useState();return{showConfirmationAlert:(e,n)=>{i(e),a((()=>n)),t(!0)},ConfirmationAlert:X.jsx(kx,{isOpen:e,message:n,buttons:[{text:"Cancel",role:"cancel",handler:()=>{t(!1)}},{text:"Confirm",handler:()=>{r&&r(),t(!1)}}]})}})(),[o,s]=U.useState(),l=async()=>{var e;const t=new C$;await t.configureNativeConnection();const n=null===(e=t.connection)||void 0===e?void 0:e.getRepository(b$),i=await(null==n?void 0:n.find({}));s(i)};U.useEffect((()=>{l()}),[]);return X.jsxs(X.Fragment,{children:[X.jsx(mA,{}),X.jsxs(Bx,{id:"main-content",children:[X.jsx(ox,{children:X.jsx(ox,{children:X.jsxs(yx,{color:"warning",children:[X.jsx(nx,{slot:"start",children:X.jsx(hx,{})}),X.jsx(bx,{children:"Home"})]})})}),X.jsxs(rx,{fullscreen:!0,className:"ion-padding",children:[X.jsxs(Tx,{children:[X.jsx(lx,{type:"text",value:n,onIonInput:e=>i(e.target.value)}),X.jsx(xx,{slot:"end",onClick:async()=>{try{var e;const t=new C$,i=(await t.configureNativeConnection(),null===(e=t.connection)||void 0===e?void 0:e.getRepository(b$));await(null==i?void 0:i.save({id:Date.now().toString(),isActive:!0,isActive2:!1,name:n,jsonTest:JSON.stringify({id:Math.random(),nest:{nested:!0}})})),await l()}catch(t){alert(t.message)}},disabled:""===n.trim(),children:"ADD"}),X.jsx(sx,{id:"myImg",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAABgGlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAKJF1kc8rRFEUxz/zhogRxUKxmITV+F0TG2UklDSNUX5tZt78UvPj9d6bJFtlO0WJjV8L/gK2ylopIiUrC2tig57z5qmRzLmdez73e+853XsuKOG0mjEqeiGTNfXQeMA7N7/grXqilkYUemiJqIY2EgxOUdbeb3HZ8brLrlX+3L9WG4sbKriqhYdVTTeFJ4SnVkzN5i3hJjUViQmfCPt0uaDwja1HHX62Oenwp816ODQKSoOwN/mLo79YTekZYXk57Zl0Xv25j/0STzw7OyOxTbwVgxDjBPAyyRij+OljSGY/XfTTLSvK5PcW86fJSa4qs8YqOsskSWHiEzUv1eMSE6LHZaRZtfv/t69GYqDfqe4JQOWjZb12QNUmfBUs6+PAsr4Owf0A59lSfm4fBt9EL5S09j2oX4fTi5IW3YazDWi+1yJ6pCi5xZVEAl6OoW4eGq+gZtHp2c8+R3cQXpOvuoSdXeiU8/VL31yqZ+FnYKX/AAAACXBIWXMAABYlAAAWJQFJUiTwAAALc0lEQVRoge1aeUxcxxn/5r2397LLLiwL7AksGLANPgiH7eAjPvCRxLKcNI6UNInTJK0iVc5RKW1Vua3SSI1UNVHaJk2iNm0uuY3jyG1kN23sGjvhMmDAGHs59oSFhb132eu96R+LHxjW7HKkKJK/v2a+mW/m+72Z75iZhzDG8G0mYqUVWCrdAbDSdAfAStMdACtN33oA1PIPiSEaoYPeWMgXDXpjACCScoQSrkjK4fJIQMs821IB2MyOLz9vGjRan3nuSDTAMXW7+ztd4WA8aWcOnyzeIC+qkKuKJQS5PFDQUlKJ9ubeHzx8nKEZACjL31JTvSkWoZ3WoC/oisRD0Xjo4e/vtlzzNjV2cEgBjxKIRdJslZDDIykKlW/K2bhbJRAv9QsuST7oDye0BwDzeHcN1F250umPTLAdaBrHY0ww4gZwA8CoDwYcKIOXnZWhikaZnsbRqr3qym25HO7iTXHxkmPW4I3/YA7JS1RDUe+YOZgl0qYQw9gfdpqcnW2trQSFWj63fvCLzjFrcNFqLBKAsX3i5G97oxFGlVnOMs2Ovhy1NM0RZMJ8hsYtzW1Oe+jkb64a2ydSyySjhdsAhpYztrazw4AAMAxeHb1gfC/RIuFnH2p4ormpORTzJjgk4lAEh8F0spkRzcQO77RIxOGmzkcValHVnvzqBvVC3dSCV6CrcbTt7DAAMDSOhWl1YZZBUUMgAgB84XHXSChbrGM70ziWVHsMOE5HygoCh/Z9NGiTXR36ytQ70XZ2uLtxdKH6LMyIrX3ei5+aAYCOM8arlhHfDQ7BK1ZtKFSuP9/3XjQ+abb3GwpXWdwpxmGYeIaQPnb0469aGr5slQNg00Q7t7+m8VNTppKvWZXuPoQFrYDXGT7zp34EQMeYLxo/axo6YZ7o7Hc2n7nyZnDSt069HwAsrq4MOZdPiecZBwNmgHnh6IVASPr7E2tYptHR6h0Ln3nnhnc8/I0AuPCJOR5jMMY2o8fhNU4rhHGb+VRxmY5L8t2hYd9EhN1FKNmOppn4ww3WAl33q3+8Nz5jfzGY7jG2hgLxCydMyw/AbvRZ+7yYwXQcO3zGWa2ReCjgiYp4MgAwm005ufLbjcNgZq0hcF/Dx+9++IjdyZnVGqMjmMHWGz670becADCGS6csiEAAQJJIyJ29RxFCAjEVpScBwOLqkir4PFKYdKgMUeSHT3zU+PX+8+2Zc1u31OwYtQRDvmjjSXOa3jEtAOZez7g9hBmcULa0vJhLCWZ20MvXBzzRYMQDAOMBU8gXyxJr5o6DgX7xyXNef/Zbfyuf1UQAQRHcptaL5vHOoQGLa2TScs2zbAAGr7gIYno3EyQ6UPu9LLEGARAEuUq5eUvtju6Bize1BNOgTZGjmKM9PrK3X5N//ddv7Y8z03wEiCI4JMFhDcYdskdC8f6OtEJbajfKMHio280w0ytKcogMOa+h/kGSQAFvdNA0cPbCJ07/ENthwNlUVnmEM8CLM1GWWVni3b/rxBt/fsbholjVCUQlYsgsGreHjO0TO44UIiJFYEsNwDEUiEzODkaIQBwu2Xjp3OB429xY7graomE6S6Qd9fcnONKM2LOPvX/+4n0XOyUJDoFIApFJ3RQAuPwjKlriMAXyCjPmVy/1FrIbfSjZLE1NTQPO1qSZCAa4ca1fochJVBHCzx89M+HOe/tkKQAgICiCSyLqdtoDgC88xtCM7UZqX5R6BQKeKEKzU6aOtq4+x4V5pAacLWvWrzpY2QAIyejf5ecO/OiVpxgGUQSF0vhqGDPhYDzoiabsmRpA0BtlbtX+yuXeK7Yz80sVFhU+9XMpMf4+RG2k59OPTh8f90Qogkw5HUuRSdrriqTslsYKuKMwQ/+ejhsd1n+klPrxr/ZzBg5BeAgAgMra9t0Dp/99KqUUlxLyqKkAgjEOupdjBWYecM83fmGa6GCrIl5mwvfPJWV+BK7f9EvxCbmgicbJD8ozadeBLfueLEmUvz5tHR0KpBRJDYAvokL+GAC0NLfM1D5TkLt944OfXXqDwcxcKecIT83XQ9gEAECKeLanf/L01rdP1LA+NCmdOnn61MmpcqmqrrQ6O6V6qe1JLOMmvIXV3c0yEUCFao80m6+UGJJK/fKl0xH9J3HlsbjyWEx8kMFURfl/f/PT148e7Odx00oSeEJSLOel7EYeP358/h72fr9reBJjkGKDaaKDdUc2z9VMepWAK7V7eudKOcZsf333Aod5PMLZ8tKLo509NTr1ZLbMaii4ek9d/2RQO2hPniyxVKArLFgt06+RLRXAuC00POAHDJIsnpK71jzelThkYcxYXJ1q2Wq752pSQQbj9p5mBbfCMxZyuMLnvi4dG1tbXGDLlIxsrLhcvdZnsWknvMl3FAKiyGAoWCtTGSRLBYAA9TU7E2WxjJcnWGN29tBMHAAwYLu3V8zPisYnk8pizORQFUKedNxvJRBpGRH+q3EjF6n02oEsmW17XbM2R9w3kBOOzo5oMkFunkpZvVedkWoXpbaB3EIxTzDtvxVa8Z4NR/kc0U0VcTA6X9ponejN0YgAIGHrsTj64J8lL7z8XEfPPQjh2qrPX/vZmxLhbDeQJdZQHCK3YL6TXboACALp18pmZqNZ+cI9VU8IuFOLq5Ovmw+Aq4vDJ6UCJYPj+GZAGfdwXn2n/pU3nh8eK+3pq/GHbglwCJBSLy5af8ukiwcAAEWV8pnZKADIlIK91Y8pxLryvG1xOkm8ZGcORj1OSyBbrMWAZ91QdPdnvPjKQ3/4sJYiuCSaTqflQhWXTxVVZqWjW1oAdOWZ2SrhrMxWks3fv/M7kXjI6u5hmTxKWJpbv3vNM1p5Jcs0O67naMUAwGAawy0fAmMUjhIAQCCCJDhb7rpHL99QZDDI8wS68iRHtkUCQAg23a/FzGz/3dLcOuBsYasGRc2RA8/W1tbmGyQzAVhcXTwhJeErACBh/clnAdTcfkldLBNJuXcf0iVNgRcJAADUJRLNKunMRehqv9Y7co6tamRrN2+qZ6vaYgVJTLlIX9jpdoSyRToAwMBgSBK5E8QheJjB6hKJqjiF91wwAACoP6yjOETiw1zvsrRbTrNNSknRts170IyPxuGRuZIStmq2DeRopo4mt1sEhIhSQ6Ugg7P1AX36Wi0AgFTBb3jcgAH8rkjT4McsXy5S7dx0kKRmD6WVV7Bli7tLkMERc+WQuNhKdt9YmLtOquDtO1oiVfC/EQAAoCmVbj6opePT1kCR3F11D3L4SRJ9vSGfXRNX0O53TV94zbVmrbwyrzBjy0GdpnQB94oLBgAAlfW52x8qJG4eTXiUSCCefT811SSklBlFbNVkMrGX7wntCUQCAElQpfoqbVlm1e78ivrcheqz8PcBBHX3afJyp867oaiHid/WKDWy6V1kdXeJpFwhZwpDtkhXv/VuIVdaUX5Xjlq065Gi6n0LvluHRT9wlFRMvcRgjD23v4vVF2pZlZwB06Q/yu4i9+QwANpQVZmdLzx0bHXxxrTC1lxa5BuZvkjFln2eQFaeMOlNoEjKzRJrxwMWAMAYmwbtak2+dzInW6zXlEoZBlfv01RuX9Ib2SIB6GYAKNo5WV6gvNbsjEcZgkCzkg6trCIBAACsrq7V6ws2yNdRFCqry6nak387+0mfFgmgwKBmy3bb8NMv6Dbdr7UbfUM97sEr7slAjG3V6QrbrVNlh8+oXyMr35SjMkhIanneiZdhBUaHJwCApJC2TKotk249rI9G6KA3GvTGgt4oAFy2qi1mGyQyarlDW1q8HJpP0SIBCEX8ex/Y3nX5ur5IdfjRhlvaEHD5JJcvkCmnbrB33V/77ut/BwCEkFC0gCCVDi3ppT5N8rr9r738F7VOuWNf3UzrXxb6fwD4Rulb/7vNHQArTXcArDTdAbDSdAfAStP/AFtNwoeUbqKBAAAAAElFTkSuQmCC",alt:"img"})]}),X.jsx("h3",{children:"THE SQLITE DATA"}),null==o?void 0:o.map((e=>X.jsxs(Tx,{children:[X.jsx(cx,{className:"ion-text-wrap",children:JSON.stringify(e)}),X.jsx(xx,{onClick:()=>(async e=>{try{var t;const n=new C$,i=(await n.configureNativeConnection(),null===(t=n.connection)||void 0===t?void 0:t.getRepository(b$));if(i){const t=await i.findOne({where:{id:e}});t?(t.name,await i.save(t)):console.log("can't rename input:",t.name)}else console.log("Connection to DB is absent");await l()}catch(n){alert(n.message)}})(null==e?void 0:e.id),children:"DELETE"})]},null==e?void 0:e.id))),a]}),X.jsx(fA,{})]})]})};((e={})=>{"undefined"!=typeof document&&document.documentElement.classList.add("ion-ce"),Ng(Object.assign({},e))})();const N$=()=>X.jsx(Dx,{children:X.jsx(gT,{children:X.jsxs(Wx,{children:[X.jsx(yp,{exact:!0,path:"/home",children:X.jsx(S$,{})}),X.jsx(yp,{exact:!0,path:"/timer",children:X.jsx($A,{})}),X.jsx(yp,{exact:!0,path:"/timer-configuration",children:X.jsx(tC,{})}),X.jsx(yp,{exact:!0,path:"/",children:X.jsx(pp,{to:"/home"})})]})})}),k$="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function A$(){throw new Error("setTimeout has not been defined")}function _$(){throw new Error("clearTimeout has not been defined")}var O$=A$,R$=_$;function P$(e){if(O$===setTimeout)return setTimeout(e,0);if((O$===A$||!O$)&&setTimeout)return O$=setTimeout,setTimeout(e,0);try{return O$(e,0)}catch(RD){try{return O$.call(null,e,0)}catch(RD){return O$.call(this,e,0)}}}"function"==typeof k$.setTimeout&&(O$=setTimeout),"function"==typeof k$.clearTimeout&&(R$=clearTimeout);var M$,$$=[],I$=!1,D$=-1;function L$(){I$&&M$&&(I$=!1,M$.length?$$=M$.concat($$):D$=-1,$$.length&&j$())}function j$(){if(!I$){var e=P$(L$);I$=!0;for(var t=$$.length;t;){for(M$=$$,$$=[];++D$<t;)M$&&M$[D$].run();D$=-1,t=$$.length}M$=null,I$=!1,function(e){if(R$===clearTimeout)return clearTimeout(e);if((R$===_$||!R$)&&clearTimeout)return R$=clearTimeout,clearTimeout(e);try{return R$(e)}catch(RD){try{return R$.call(null,e)}catch(RD){return R$.call(this,e)}}}(e)}}function q$(e,t){this.fun=e,this.array=t}q$.prototype.run=function(){this.fun.apply(null,this.array)};function B$(){}var F$=B$,z$=B$,U$=B$,V$=B$,W$=B$,H$=B$,Q$=B$;var K$=k$.performance||{},G$=K$.now||K$.mozNow||K$.msNow||K$.oNow||K$.webkitNow||function(){return(new Date).getTime()};var Y$=new Date;var J$={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];$$.push(new q$(e,t)),1!==$$.length||I$||P$(j$)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:F$,addListener:z$,once:U$,off:V$,removeListener:W$,removeAllListeners:H$,emit:Q$,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*G$.call(K$),n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n-=e[0],(i-=e[1])<0&&(n--,i+=1e9)),[n,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Y$)/1e3}};var X$=[],Z$=[],eI="undefined"!=typeof Uint8Array?Uint8Array:Array,tI=!1;function nI(){tI=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)X$[t]=e[t],Z$[e.charCodeAt(t)]=t;Z$["-".charCodeAt(0)]=62,Z$["_".charCodeAt(0)]=63}function iI(e,t,n){for(var i,r,a=[],o=t;o<n;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(X$[(r=i)>>18&63]+X$[r>>12&63]+X$[r>>6&63]+X$[63&r]);return a.join("")}function rI(e){var t;tI||nI();for(var n=e.length,i=n%3,r="",a=[],o=16383,s=0,l=n-i;s<l;s+=o)a.push(iI(e,s,s+o>l?l:s+o));return 1===i?(t=e[n-1],r+=X$[t>>2],r+=X$[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=X$[t>>10],r+=X$[t>>4&63],r+=X$[t<<2&63],r+="="),a.push(r),a.join("")}function aI(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=h,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=i;u>0;o=256*o+e[t+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),a-=c}return(p?-1:1)*o*Math.pow(2,a-i)}function oI(e,t,n,i,r,a){var o,s,l,c=8*a-r-1,u=(1<<c)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,m=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,r),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[n+p]=255&s,p+=m,s/=256,r-=8);for(o=o<<r|s,c+=r;c>0;e[n+p]=255&o,p+=m,o/=256,c-=8);e[n+p-m]|=128*f}var sI={}.toString,lI=Array.isArray||function(e){return"[object Array]"==sI.call(e)};function cI(){return dI.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function uI(e,t){if(cI()<t)throw new RangeError("Invalid typed array length");return dI.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=dI.prototype:(null===e&&(e=new dI(t)),e.length=t),e}function dI(e,t,n){if(!(dI.TYPED_ARRAY_SUPPORT||this instanceof dI))return new dI(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return mI(this,e)}return hI(this,e,t,n)}function hI(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);dI.TYPED_ARRAY_SUPPORT?(e=t).__proto__=dI.prototype:e=fI(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!dI.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|yI(t,n);e=uI(e,i);var r=e.write(t,n);r!==i&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(bI(t)){var n=0|gI(t.length);return 0===(e=uI(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?uI(e,0):fI(e,t);if("Buffer"===t.type&&lI(t.data))return fI(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function pI(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function mI(e,t){if(pI(t),e=uI(e,t<0?0:0|gI(t)),!dI.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fI(e,t){var n=t.length<0?0:0|gI(t.length);e=uI(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function gI(e){if(e>=cI())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cI().toString(16)+" bytes");return 0|e}function bI(e){return!(null==e||!e._isBuffer)}function yI(e,t){if(bI(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return WI(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return HI(e).length;default:if(i)return WI(e).length;t=(""+t).toLowerCase(),i=!0}}function vI(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return $I(this,t,n);case"utf8":case"utf-8":return OI(this,t,n);case"ascii":return PI(this,t,n);case"latin1":case"binary":return MI(this,t,n);case"base64":return _I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return II(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function wI(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function EI(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=dI.from(t,i)),bI(t))return 0===t.length?-1:xI(e,t,n,i,r);if("number"==typeof t)return t&=255,dI.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):xI(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function xI(e,t,n,i,r){var a,o=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var u=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(c(e,a+h)!==c(t,h)){d=!1;break}if(d)return a}return-1}function TI(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function CI(e,t,n,i){return QI(WI(t,e.length-n),e,n,i)}function SI(e,t,n,i){return QI(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function NI(e,t,n,i){return SI(e,t,n,i)}function kI(e,t,n,i){return QI(HI(t),e,n,i)}function AI(e,t,n,i){return QI(function(e,t){for(var n,i,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(n=e.charCodeAt(o))>>8,r=n%256,a.push(r),a.push(i);return a}(t,e.length-n),e,n,i)}function _I(e,t,n){return 0===t&&n===e.length?rI(e):rI(e.slice(t,n))}function OI(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,l,c=e[r],u=null,d=c>239?4:c>223?3:c>191?2:1;if(r+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(a=e[r+1]))&&(l=(31&c)<<6|63&a)>127&&(u=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&(l=(15&c)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return function(e){var t=e.length;if(t<=RI)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=RI));return n}(i)}dI.TYPED_ARRAY_SUPPORT=void 0===k$.TYPED_ARRAY_SUPPORT||k$.TYPED_ARRAY_SUPPORT,dI.poolSize=8192,dI._augment=function(e){return e.__proto__=dI.prototype,e},dI.from=function(e,t,n){return hI(null,e,t,n)},dI.TYPED_ARRAY_SUPPORT&&(dI.prototype.__proto__=Uint8Array.prototype,dI.__proto__=Uint8Array),dI.alloc=function(e,t,n){return function(e,t,n,i){return pI(t),t<=0?uI(e,t):void 0!==n?"string"==typeof i?uI(e,t).fill(n,i):uI(e,t).fill(n):uI(e,t)}(null,e,t,n)},dI.allocUnsafe=function(e){return mI(null,e)},dI.allocUnsafeSlow=function(e){return mI(null,e)},dI.isBuffer=function(e){return null!=e&&(!!e._isBuffer||KI(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&KI(e.slice(0,0))}(e))},dI.compare=function(e,t){if(!bI(e)||!bI(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},dI.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},dI.concat=function(e,t){if(!lI(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return dI.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=dI.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var a=e[n];if(!bI(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},dI.byteLength=yI,dI.prototype._isBuffer=!0,dI.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)wI(this,t,t+1);return this},dI.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)wI(this,t,t+3),wI(this,t+1,t+2);return this},dI.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)wI(this,t,t+7),wI(this,t+1,t+6),wI(this,t+2,t+5),wI(this,t+3,t+4);return this},dI.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?OI(this,0,e):vI.apply(this,arguments)},dI.prototype.equals=function(e){if(!bI(e))throw new TypeError("Argument must be a Buffer");return this===e||0===dI.compare(this,e)},dI.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},dI.prototype.compare=function(e,t,n,i,r){if(!bI(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(i,r),c=e.slice(t,n),u=0;u<s;++u)if(l[u]!==c[u]){a=l[u],o=c[u];break}return a<o?-1:o<a?1:0},dI.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},dI.prototype.indexOf=function(e,t,n){return EI(this,e,t,n,!0)},dI.prototype.lastIndexOf=function(e,t,n){return EI(this,e,t,n,!1)},dI.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return TI(this,e,t,n);case"utf8":case"utf-8":return CI(this,e,t,n);case"ascii":return SI(this,e,t,n);case"latin1":case"binary":return NI(this,e,t,n);case"base64":return kI(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return AI(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},dI.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var RI=4096;function PI(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function MI(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function $I(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=VI(e[a]);return r}function II(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function DI(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function LI(e,t,n,i,r,a){if(!bI(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function jI(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function qI(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function BI(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function FI(e,t,n,i,r){return r||BI(e,0,n,4),oI(e,t,n,i,23,4),n+4}function zI(e,t,n,i,r){return r||BI(e,0,n,8),oI(e,t,n,i,52,8),n+8}dI.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),dI.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=dI.prototype;else{var r=t-e;n=new dI(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+e]}return n},dI.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||DI(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},dI.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||DI(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},dI.prototype.readUInt8=function(e,t){return t||DI(e,1,this.length),this[e]},dI.prototype.readUInt16LE=function(e,t){return t||DI(e,2,this.length),this[e]|this[e+1]<<8},dI.prototype.readUInt16BE=function(e,t){return t||DI(e,2,this.length),this[e]<<8|this[e+1]},dI.prototype.readUInt32LE=function(e,t){return t||DI(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},dI.prototype.readUInt32BE=function(e,t){return t||DI(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},dI.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||DI(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},dI.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||DI(e,t,this.length);for(var i=t,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},dI.prototype.readInt8=function(e,t){return t||DI(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},dI.prototype.readInt16LE=function(e,t){t||DI(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},dI.prototype.readInt16BE=function(e,t){t||DI(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},dI.prototype.readInt32LE=function(e,t){return t||DI(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},dI.prototype.readInt32BE=function(e,t){return t||DI(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},dI.prototype.readFloatLE=function(e,t){return t||DI(e,4,this.length),aI(this,e,!0,23,4)},dI.prototype.readFloatBE=function(e,t){return t||DI(e,4,this.length),aI(this,e,!1,23,4)},dI.prototype.readDoubleLE=function(e,t){return t||DI(e,8,this.length),aI(this,e,!0,52,8)},dI.prototype.readDoubleBE=function(e,t){return t||DI(e,8,this.length),aI(this,e,!1,52,8)},dI.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||LI(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},dI.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||LI(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},dI.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,1,255,0),dI.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},dI.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,2,65535,0),dI.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):jI(this,e,t,!0),t+2},dI.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,2,65535,0),dI.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):jI(this,e,t,!1),t+2},dI.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,4,4294967295,0),dI.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):qI(this,e,t,!0),t+4},dI.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,4,4294967295,0),dI.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):qI(this,e,t,!1),t+4},dI.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);LI(this,e,t,n,r-1,-r)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},dI.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);LI(this,e,t,n,r-1,-r)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},dI.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,1,127,-128),dI.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},dI.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,2,32767,-32768),dI.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):jI(this,e,t,!0),t+2},dI.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,2,32767,-32768),dI.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):jI(this,e,t,!1),t+2},dI.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,4,2147483647,-2147483648),dI.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):qI(this,e,t,!0),t+4},dI.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||LI(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),dI.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):qI(this,e,t,!1),t+4},dI.prototype.writeFloatLE=function(e,t,n){return FI(this,e,t,!0,n)},dI.prototype.writeFloatBE=function(e,t,n){return FI(this,e,t,!1,n)},dI.prototype.writeDoubleLE=function(e,t,n){return zI(this,e,t,!0,n)},dI.prototype.writeDoubleBE=function(e,t,n){return zI(this,e,t,!1,n)},dI.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,a=i-n;if(this===e&&n<t&&t<i)for(r=a-1;r>=0;--r)e[r+t]=this[r+n];else if(a<1e3||!dI.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},dI.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!dI.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=bI(e)?e:WI(new dI(e,i).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var UI=/[^+\/0-9A-Za-z-_]/g;function VI(e){return e<16?"0"+e.toString(16):e.toString(16)}function WI(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function HI(e){return function(e){var t,n,i,r,a,o;tI||nI();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:"="===e[s-1]?1:0,o=new eI(3*s/4-a),i=a>0?s-4:s;var l=0;for(t=0,n=0;t<i;t+=4,n+=3)r=Z$[e.charCodeAt(t)]<<18|Z$[e.charCodeAt(t+1)]<<12|Z$[e.charCodeAt(t+2)]<<6|Z$[e.charCodeAt(t+3)],o[l++]=r>>16&255,o[l++]=r>>8&255,o[l++]=255&r;return 2===a?(r=Z$[e.charCodeAt(t)]<<2|Z$[e.charCodeAt(t+1)]>>4,o[l++]=255&r):1===a&&(r=Z$[e.charCodeAt(t)]<<10|Z$[e.charCodeAt(t+1)]<<4|Z$[e.charCodeAt(t+2)]>>2,o[l++]=r>>8&255,o[l++]=255&r),o}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(UI,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function QI(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function KI(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var GI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function YI(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return XI()}},n.exports),n.exports}function JI(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}function XI(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function ZI(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var eD=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,tD=function(e){return eD.exec(e).slice(1)};function nD(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var i=n>=0?arguments[n]:"/";if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t="/"===i.charAt(0))}return e=ZI(dD(e.split("/"),(function(e){return!!e})),!t).join("/"),(t?"/":"")+e||"."}function iD(e){var t=rD(e),n="/"===hD(e,-1);return e=ZI(dD(e.split("/"),(function(e){return!!e})),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function rD(e){return"/"===e.charAt(0)}function aD(){return iD(dD(Array.prototype.slice.call(arguments,0),(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function oD(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=nD(e).substr(1),t=nD(t).substr(1);for(var i=n(e.split("/")),r=n(t.split("/")),a=Math.min(i.length,r.length),o=a,s=0;s<a;s++)if(i[s]!==r[s]){o=s;break}var l=[];for(s=o;s<i.length;s++)l.push("..");return(l=l.concat(r.slice(o))).join("/")}function sD(e){var t=tD(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."}function lD(e,t){var n=tD(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function cD(e){return tD(e)[3]}const uD={extname:cD,basename:lD,dirname:sD,sep:"/",delimiter:":",relative:oD,join:aD,isAbsolute:rD,normalize:iD,resolve:nD};function dD(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var hD="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)};const pD=Object.freeze({__proto__:null,resolve:nD,normalize:iD,isAbsolute:rD,join:aD,relative:oD,sep:"/",delimiter:":",dirname:sD,basename:lD,extname:cD,default:uD}),mD=Object.freeze({__proto__:null,default:{}}),fD=JI(pD),gD=JI(mD);var bD=YI((function(e,t){var n=void 0,i=function(t){return n||(n=new Promise((function(n,i){var r,a=void 0!==t?t:{},o=a.onAbort;a.onAbort=function(e){i(new Error(e)),o&&o(e)},a.postRun=a.postRun||[],a.postRun.push((function(){n(a)})),e=void 0,r||(r=void 0!==a?a:{}),r.onRuntimeInitialized=function(){function e(e,t){switch(typeof t){case"boolean":G(e,t?1:0);break;case"number":W(e,t);break;case"string":Q(e,t,-1,-1);break;case"object":if(null===t)H(e);else if(null!=t.length){var n=Tt(t);K(e,n,t.length,-1),At(n)}else Y(e,"Wrong API use : tried to return a value of an unknown type ("+t+").",-1);break;default:H(e)}}function t(e,t){for(var n=[],i=0;i<e;i+=1){var r=Z(t+4*i,"i32"),a=B(r);if(1===a||2===a)r=V(r);else if(3===a)r=z(r);else if(4===a){r=F(a=r),a=U(a);for(var o=new Uint8Array(r),s=0;s<r;s+=1)o[s]=C[a+s];r=o}else r=null;n.push(r)}return n}function n(e,t){this.La=e,this.db=t,this.Ja=1,this.fb=[]}function i(e,t){if(this.db=t,t=D(e)+1,this.Ya=kt(t),null===this.Ya)throw Error("Unable to allocate memory for the SQL string");I(e,S,this.Ya,t),this.eb=this.Ya,this.Ua=this.ib=null}function a(e){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=e){var t=this.filename,n="/",i=t;if(n&&(n="string"==typeof n?n:Ne(n),i=t?ne(n+"/"+t):n),t=rt(!0,!0),i=Be(i,4095&(void 0!==t?t:438)|32768,0),e){if("string"==typeof e){n=Array(e.length);for(var r=0,a=e.length;r<a;++r)n[r]=e.charCodeAt(r);e=n}Ge(i,146|t),n=Je(i,577),tt(n,e,0,e.length,0),Xe(n),Ge(i,t)}}this.handleError(l(this.filename,o)),this.db=Z(o,"i32"),X(this.db),this.Za={},this.Na={}}var o=Mt(4),s=r.cwrap,l=s("sqlite3_open","number",["string","number"]),c=s("sqlite3_close_v2","number",["number"]),u=s("sqlite3_exec","number",["number","string","number","number","number"]),d=s("sqlite3_changes","number",["number"]),h=s("sqlite3_prepare_v2","number",["number","string","number","number","number"]),p=s("sqlite3_sql","string",["number"]),m=s("sqlite3_normalized_sql","string",["number"]),f=s("sqlite3_prepare_v2","number",["number","number","number","number","number"]),g=s("sqlite3_bind_text","number",["number","number","number","number","number"]),b=s("sqlite3_bind_blob","number",["number","number","number","number","number"]),y=s("sqlite3_bind_double","number",["number","number","number"]),v=s("sqlite3_bind_int","number",["number","number","number"]),w=s("sqlite3_bind_parameter_index","number",["number","string"]),E=s("sqlite3_step","number",["number"]),x=s("sqlite3_errmsg","string",["number"]),T=s("sqlite3_column_count","number",["number"]),N=s("sqlite3_data_count","number",["number"]),k=s("sqlite3_column_double","number",["number","number"]),A=s("sqlite3_column_text","string",["number","number"]),_=s("sqlite3_column_blob","number",["number","number"]),O=s("sqlite3_column_bytes","number",["number","number"]),R=s("sqlite3_column_type","number",["number","number"]),P=s("sqlite3_column_name","string",["number","number"]),M=s("sqlite3_reset","number",["number"]),L=s("sqlite3_clear_bindings","number",["number"]),j=s("sqlite3_finalize","number",["number"]),q=s("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),B=s("sqlite3_value_type","number",["number"]),F=s("sqlite3_value_bytes","number",["number"]),z=s("sqlite3_value_text","string",["number"]),U=s("sqlite3_value_blob","number",["number"]),V=s("sqlite3_value_double","number",["number"]),W=s("sqlite3_result_double","",["number","number"]),H=s("sqlite3_result_null","",["number"]),Q=s("sqlite3_result_text","",["number","string","number","number"]),K=s("sqlite3_result_blob","",["number","number","number","number"]),G=s("sqlite3_result_int","",["number","number"]),Y=s("sqlite3_result_error","",["number","string","number"]),J=s("sqlite3_aggregate_context","number",["number","number"]),X=s("RegisterExtensionFunctions","number",["number"]);n.prototype.bind=function(e){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(e)?this.xb(e):null==e||"object"!=typeof e||this.yb(e)},n.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var e=E(this.La);switch(e){case 100:return!0;case 101:return!1;default:throw this.db.handleError(e)}},n.prototype.sb=function(e){return null==e&&(e=this.Ja,this.Ja+=1),k(this.La,e)},n.prototype.Cb=function(e){if(null==e&&(e=this.Ja,this.Ja+=1),e=A(this.La,e),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(e)},n.prototype.Db=function(e){return null==e&&(e=this.Ja,this.Ja+=1),A(this.La,e)},n.prototype.getBlob=function(e){null==e&&(e=this.Ja,this.Ja+=1);var t=O(this.La,e);e=_(this.La,e);for(var n=new Uint8Array(t),i=0;i<t;i+=1)n[i]=C[e+i];return n},n.prototype.get=function(e,t){t=t||{},null!=e&&this.bind(e)&&this.step(),e=[];for(var n=N(this.La),i=0;i<n;i+=1)switch(R(this.La,i)){case 1:var r=t.useBigInt?this.Cb(i):this.sb(i);e.push(r);break;case 2:e.push(this.sb(i));break;case 3:e.push(this.Db(i));break;case 4:e.push(this.getBlob(i));break;default:e.push(null)}return e},n.prototype.getColumnNames=function(){for(var e=[],t=T(this.La),n=0;n<t;n+=1)e.push(P(this.La,n));return e},n.prototype.getAsObject=function(e,t){e=this.get(e,t),t=this.getColumnNames();for(var n={},i=0;i<t.length;i+=1)n[t[i]]=e[i];return n},n.prototype.getSQL=function(){return p(this.La)},n.prototype.getNormalizedSQL=function(){return m(this.La)},n.prototype.run=function(e){return null!=e&&this.bind(e),this.step(),this.reset()},n.prototype.nb=function(e,t){null==t&&(t=this.Ja,this.Ja+=1);var n=Tt(e=oe(e));this.fb.push(n),this.db.handleError(g(this.La,t,n,e.length-1,0))},n.prototype.wb=function(e,t){null==t&&(t=this.Ja,this.Ja+=1);var n=Tt(e);this.fb.push(n),this.db.handleError(b(this.La,t,n,e.length,0))},n.prototype.mb=function(e,t){null==t&&(t=this.Ja,this.Ja+=1),this.db.handleError((e===(0|e)?v:y)(this.La,t,e))},n.prototype.zb=function(e){null==e&&(e=this.Ja,this.Ja+=1),b(this.La,e,0,0,0)},n.prototype.ob=function(e,t){switch(null==t&&(t=this.Ja,this.Ja+=1),typeof e){case"string":return void this.nb(e,t);case"number":return void this.mb(e,t);case"bigint":return void this.nb(e.toString(),t);case"boolean":return void this.mb(e+0,t);case"object":if(null===e)return void this.zb(t);if(null!=e.length)return void this.wb(e,t)}throw"Wrong API use : tried to bind a value of an unknown type ("+e+")."},n.prototype.yb=function(e){var t=this;return Object.keys(e).forEach((function(n){var i=w(t.La,n);0!==i&&t.ob(e[n],i)})),!0},n.prototype.xb=function(e){for(var t=0;t<e.length;t+=1)this.ob(e[t],t+1);return!0},n.prototype.reset=function(){return this.freemem(),0===L(this.La)&&0===M(this.La)},n.prototype.freemem=function(){for(var e;void 0!==(e=this.fb.pop());)At(e)},n.prototype.free=function(){this.freemem();var e=0===j(this.La);return delete this.db.Za[this.La],this.La=0,e},i.prototype.next=function(){if(null===this.Ya)return{done:!0};if(null!==this.Ua&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var e=Rt(),t=Mt(4);ee(o),ee(t);try{this.db.handleError(f(this.db.db,this.eb,-1,o,t)),this.eb=Z(t,"i32");var i=Z(o,"i32");return 0===i?(this.gb(),{done:!0}):(this.Ua=new n(i,this.db),this.db.Za[i]=this.Ua,{value:this.Ua,done:!1})}catch(LD){throw this.ib=$(this.eb),this.gb(),LD}finally{Pt(e)}},i.prototype.gb=function(){At(this.Ya),this.Ya=null},i.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:$(this.eb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(i.prototype[Symbol.iterator]=function(){return this}),a.prototype.run=function(e,t){if(!this.db)throw"Database closed";if(t){e=this.prepare(e,t);try{e.step()}finally{e.free()}}else this.handleError(u(this.db,e,0,0,o));return this},a.prototype.exec=function(e,t,i){if(!this.db)throw"Database closed";var r=Rt(),a=null;try{var s=D(e)+1,l=Mt(s);I(e,C,l,s);var c=l,u=Mt(4);for(e=[];0!==Z(c,"i8");){ee(o),ee(u),this.handleError(f(this.db,c,-1,o,u));var d=Z(o,"i32");if(c=Z(u,"i32"),0!==d){for(s=null,a=new n(d,this),null!=t&&a.bind(t);a.step();)null===s&&(s={columns:a.getColumnNames(),values:[]},e.push(s)),s.values.push(a.get(null,i));a.free()}}return e}catch(h){throw a&&a.free(),h}finally{Pt(r)}},a.prototype.each=function(e,t,n,i,r){"function"==typeof t&&(i=n,n=t,t=void 0),e=this.prepare(e,t);try{for(;e.step();)n(e.getAsObject(null,r))}finally{e.free()}if("function"==typeof i)return i()},a.prototype.prepare=function(e,t){if(ee(o),this.handleError(h(this.db,e,-1,o,0)),0===(e=Z(o,"i32")))throw"Nothing to prepare";var i=new n(e,this);return null!=t&&i.bind(t),this.Za[e]=i},a.prototype.iterateStatements=function(e){return new i(e,this)},a.prototype.export=function(){Object.values(this.Za).forEach((function(e){e.free()})),Object.values(this.Na).forEach(xt),this.Na={},this.handleError(c(this.db));var e=nt(this.filename);return this.handleError(l(this.filename,o)),this.db=Z(o,"i32"),e},a.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach((function(e){e.free()})),Object.values(this.Na).forEach(xt),this.Na={},this.handleError(c(this.db)),We("/"+this.filename),this.db=null)},a.prototype.handleError=function(e){if(0===e)return null;throw e=x(this.db),Error(e)},a.prototype.getRowsModified=function(){return d(this.db)},a.prototype.create_function=function(n,i){Object.prototype.hasOwnProperty.call(this.Na,n)&&(xt(this.Na[n]),delete this.Na[n]);var r=Et((function(n,r,a){r=t(r,a);try{var o=i.apply(null,r)}catch(nC){return void Y(n,nC,-1)}e(n,o)}),"viii");return this.Na[n]=r,this.handleError(q(this.db,n,i.length,1,0,r,0,0,0)),this},a.prototype.create_aggregate=function(n,i){var r=i.init||function(){return null},a=i.finalize||function(e){return e},o=i.step;if(!o)throw"An aggregate function must have a step function in "+n;var s={};Object.hasOwnProperty.call(this.Na,n)&&(xt(this.Na[n]),delete this.Na[n]),i=n+"__finalize",Object.hasOwnProperty.call(this.Na,i)&&(xt(this.Na[i]),delete this.Na[i]);var l=Et((function(e,n,i){var a=J(e,1);Object.hasOwnProperty.call(s,a)||(s[a]=r()),n=t(n,i),n=[s[a]].concat(n);try{s[a]=o.apply(null,n)}catch(Nn){delete s[a],Y(e,Nn,-1)}}),"viii"),c=Et((function(t){var n=J(t,1);try{var i=a(s[n])}catch(Pc){return delete s[n],void Y(t,Pc,-1)}e(t,i),delete s[n]}),"vi");return this.Na[n]=l,this.Na[i]=c,this.handleError(q(this.db,n,o.length-1,1,0,0,l,c,0)),this},r.Database=a};var s,l,c,u,d,h,p=Object.assign({},r),m="./this.program",f="object"==typeof window,g="function"==typeof importScripts,b="object"==typeof J$&&"object"==typeof J$.versions&&"string"==typeof J$.versions.node,y="";b?(y=g?fD.dirname(y)+"/":"/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist/",h=()=>{d||(u=gD,d=fD)},s=function(e,t){return h(),e=d.normalize(e),u.readFileSync(e,t?void 0:"utf8")},c=e=>((e=s(e,!0)).buffer||(e=new Uint8Array(e)),e),l=(e,t,n)=>{h(),e=d.normalize(e),u.readFile(e,(function(e,i){e?n(e):t(i.buffer)}))},1<J$.argv.length&&(m=J$.argv[1].replace(/\\/g,"/")),e.exports=r,r.inspect=function(){return"[Emscripten Module object]"}):(f||g)&&(g?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},g&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),l=(e,t,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?t(i.response):n()},i.onerror=n,i.send(null)});var v,w=r.print||console.log.bind(console),E=r.printErr||console.warn.bind(console);Object.assign(r,p),p=null,r.thisProgram&&(m=r.thisProgram),r.wasmBinary&&(v=r.wasmBinary),"object"!=typeof WebAssembly&&K("no native wasm support detected");var x,T,C,S,N,k,A,_,O,R=!1,P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function M(e,t,n){var i=t+n;for(n=t;e[n]&&!(n>=i);)++n;if(16<n-t&&e.buffer&&P)return P.decode(e.subarray(t,n));for(i="";t<n;){var r=e[t++];if(128&r){var a=63&e[t++];if(192==(224&r))i+=String.fromCharCode((31&r)<<6|a);else{var o=63&e[t++];65536>(r=224==(240&r)?(15&r)<<12|a<<6|o:(7&r)<<18|a<<12|o<<6|63&e[t++])?i+=String.fromCharCode(r):(r-=65536,i+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else i+=String.fromCharCode(r)}return i}function $(e,t){return e?M(S,e,t):""}function I(e,t,n,i){if(!(0<i))return 0;var r=n;i=n+i-1;for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(55296<=o&&57343>=o)o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a);if(127>=o){if(n>=i)break;t[n++]=o}else{if(2047>=o){if(n+1>=i)break;t[n++]=192|o>>6}else{if(65535>=o){if(n+2>=i)break;t[n++]=224|o>>12}else{if(n+3>=i)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63}t[n++]=128|o>>6&63}t[n++]=128|63&o}}return t[n]=0,n-r}function D(e){for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);127>=i?t++:2047>=i?t+=2:55296<=i&&57343>=i?(t+=4,++n):t+=3}return t}function L(){var e=x.buffer;T=e,r.HEAP8=C=new Int8Array(e),r.HEAP16=N=new Int16Array(e),r.HEAP32=k=new Int32Array(e),r.HEAPU8=S=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=A=new Uint32Array(e),r.HEAPF32=_=new Float32Array(e),r.HEAPF64=O=new Float64Array(e)}var j,q=[],B=[],F=[];function z(){var e=r.preRun.shift();q.unshift(e)}var U,V,W,H=0,Q=null;function K(e){throw r.onAbort&&r.onAbort(e),E(e="Aborted("+e+")"),R=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}function G(){return U.startsWith("data:application/octet-stream;base64,")}if(U="sql-wasm.wasm",!G()){var Y=U;U=r.locateFile?r.locateFile(Y,y):y+Y}function J(){var e=U;try{if(e==U&&v)return new Uint8Array(v);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(FD){K(FD)}}function X(e){for(;0<e.length;)e.shift()(r)}function Z(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return C[e>>0];case"i16":return N[e>>1];case"i32":case"i64":return k[e>>2];case"float":return _[e>>2];case"double":return O[e>>3];case"*":return A[e>>2];default:K("invalid type for getValue: "+t)}return null}function ee(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":C[e>>0]=0;break;case"i16":N[e>>1]=0;break;case"i32":k[e>>2]=0;break;case"i64":W=[0,(V=0,1<=+Math.abs(V)?0<V?(0|Math.min(+Math.floor(V/4294967296),4294967295))>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],k[e>>2]=W[0],k[e+4>>2]=W[1];break;case"float":_[e>>2]=0;break;case"double":O[e>>3]=0;break;case"*":A[e>>2]=0;break;default:K("invalid type for setValue: "+t)}}var te=(e,t)=>{for(var n=0,i=e.length-1;0<=i;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},ne=e=>{var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=te(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},ie=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},re=e=>{if("/"===e)return"/";var t=(e=(e=ne(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)};function ae(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return e=te(e.split("/").filter((e=>!!e)),!t).join("/"),(t?"/":"")+e||"."}function oe(e,t){var n=Array(D(e)+1);return e=I(e,n,0,n.length),t&&(n.length=e),n}var se=[];function le(e,t){se[e]={input:[],output:[],Xa:t},je(e,pe)}var ce,ue,de,he,pe={open:function(e){var t=se[e.node.rdev];if(!t)throw new Te(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.Xa.fsync(e.tty)},fsync:function(e){e.tty.Xa.fsync(e.tty)},read:function(e,t,n,i){if(!e.tty||!e.tty.Xa.tb)throw new Te(60);for(var r=0,a=0;a<i;a++){try{var o=e.tty.Xa.tb(e.tty)}catch($T){throw new Te(29)}if(void 0===o&&0===r)throw new Te(6);if(null==o)break;r++,t[n+a]=o}return r&&(e.node.timestamp=Date.now()),r},write:function(e,t,n,i){if(!e.tty||!e.tty.Xa.jb)throw new Te(60);try{for(var r=0;r<i;r++)e.tty.Xa.jb(e.tty,t[n+r])}catch(a){throw new Te(29)}return i&&(e.node.timestamp=Date.now()),r}},me={tb:function(e){if(!e.input.length){var t=null;if(b){var n=dI.alloc(256),i=0;try{i=u.readSync(J$.stdin.fd,n,0,256,-1)}catch(r){if(!r.toString().includes("EOF"))throw r;i=0}t=0<i?n.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&(null!==(t=readline())&&(t+="\n"));if(!t)return null;e.input=oe(t,!0)}return e.input.shift()},jb:function(e,t){null===t||10===t?(w(M(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&0<e.output.length&&(w(M(e.output,0)),e.output=[])}},fe={jb:function(e,t){null===t||10===t?(E(M(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&0<e.output.length&&(E(M(e.output,0)),e.output=[])}},ge={Qa:null,Ra:function(){return ge.createNode(null,"/",16895,0)},createNode:function(e,t,n,i){if(24576==(61440&n)||4096==(61440&n))throw new Te(63);return ge.Qa||(ge.Qa={dir:{node:{Pa:ge.Ga.Pa,Oa:ge.Ga.Oa,lookup:ge.Ga.lookup,ab:ge.Ga.ab,rename:ge.Ga.rename,unlink:ge.Ga.unlink,rmdir:ge.Ga.rmdir,readdir:ge.Ga.readdir,symlink:ge.Ga.symlink},stream:{Ta:ge.Ha.Ta}},file:{node:{Pa:ge.Ga.Pa,Oa:ge.Ga.Oa},stream:{Ta:ge.Ha.Ta,read:ge.Ha.read,write:ge.Ha.write,lb:ge.Ha.lb,bb:ge.Ha.bb,cb:ge.Ha.cb}},link:{node:{Pa:ge.Ga.Pa,Oa:ge.Ga.Oa,readlink:ge.Ga.readlink},stream:{}},pb:{node:{Pa:ge.Ga.Pa,Oa:ge.Ga.Oa},stream:Le}}),16384==(61440&(n=Oe(e,t,n,i)).mode)?(n.Ga=ge.Qa.dir.node,n.Ha=ge.Qa.dir.stream,n.Ia={}):32768==(61440&n.mode)?(n.Ga=ge.Qa.file.node,n.Ha=ge.Qa.file.stream,n.Ma=0,n.Ia=null):40960==(61440&n.mode)?(n.Ga=ge.Qa.link.node,n.Ha=ge.Qa.link.stream):8192==(61440&n.mode)&&(n.Ga=ge.Qa.pb.node,n.Ha=ge.Qa.pb.stream),n.timestamp=Date.now(),e&&(e.Ia[t]=n,e.timestamp=n.timestamp),n},Jb:function(e){return e.Ia?e.Ia.subarray?e.Ia.subarray(0,e.Ma):new Uint8Array(e.Ia):new Uint8Array(0)},qb:function(e,t){var n=e.Ia?e.Ia.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),0!=n&&(t=Math.max(t,256)),n=e.Ia,e.Ia=new Uint8Array(t),0<e.Ma&&e.Ia.set(n.subarray(0,e.Ma),0))},Gb:function(e,t){if(e.Ma!=t)if(0==t)e.Ia=null,e.Ma=0;else{var n=e.Ia;e.Ia=new Uint8Array(t),n&&e.Ia.set(n.subarray(0,Math.min(t,e.Ma))),e.Ma=t}},Ga:{Pa:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.Ma:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Ab=4096,t.blocks=Math.ceil(t.size/t.Ab),t},Oa:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&ge.Gb(e,t.size)},lookup:function(){throw Ce[44]},ab:function(e,t,n,i){return ge.createNode(e,t,n,i)},rename:function(e,t,n){if(16384==(61440&e.mode)){try{var i=_e(t,n)}catch(a){}if(i)for(var r in i.Ia)throw new Te(55)}delete e.parent.Ia[e.name],e.parent.timestamp=Date.now(),e.name=n,t.Ia[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.Ia[t],e.timestamp=Date.now()},rmdir:function(e,t){var n,i=_e(e,t);for(n in i.Ia)throw new Te(55);delete e.Ia[t],e.timestamp=Date.now()},readdir:function(e){var t,n=[".",".."];for(t in e.Ia)e.Ia.hasOwnProperty(t)&&n.push(t);return n},symlink:function(e,t,n){return(e=ge.createNode(e,t,41471,0)).link=n,e},readlink:function(e){if(40960!=(61440&e.mode))throw new Te(28);return e.link}},Ha:{read:function(e,t,n,i,r){var a=e.node.Ia;if(r>=e.node.Ma)return 0;if(8<(e=Math.min(e.node.Ma-r,i))&&a.subarray)t.set(a.subarray(r,r+e),n);else for(i=0;i<e;i++)t[n+i]=a[r+i];return e},write:function(e,t,n,i,r,a){if(t.buffer===C.buffer&&(a=!1),!i)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.Ia||e.Ia.subarray)){if(a)return e.Ia=t.subarray(n,n+i),e.Ma=i;if(0===e.Ma&&0===r)return e.Ia=t.slice(n,n+i),e.Ma=i;if(r+i<=e.Ma)return e.Ia.set(t.subarray(n,n+i),r),i}if(ge.qb(e,r+i),e.Ia.subarray&&t.subarray)e.Ia.set(t.subarray(n,n+i),r);else for(a=0;a<i;a++)e.Ia[r+a]=t[n+a];return e.Ma=Math.max(e.Ma,r+i),i},Ta:function(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.Ma),0>t)throw new Te(28);return t},lb:function(e,t,n){ge.qb(e.node,t+n),e.node.Ma=Math.max(e.node.Ma,t+n)},bb:function(e,t,n,i,r){if(32768!=(61440&e.node.mode))throw new Te(43);if(e=e.node.Ia,2&r||e.buffer!==T){if((0<n||n+t<e.length)&&(e=e.subarray?e.subarray(n,n+t):Array.prototype.slice.call(e,n,n+t)),n=!0,t=65536*Math.ceil(t/65536),(r=Ot(65536,t))?(S.fill(0,r,r+t),t=r):t=0,!t)throw new Te(48);C.set(e,t)}else n=!1,t=e.byteOffset;return{Fb:t,vb:n}},cb:function(e,t,n,i,r){if(32768!=(61440&e.node.mode))throw new Te(43);return 2&r||ge.Ha.write(e,t,0,i,n,!1),0}}},be=null,ye={},ve=[],we=1,Ee=null,xe=!0,Te=null,Ce={},Se=(e,t={})=>{if(!(e=ae("/",e)))return{path:"",node:null};if(8<(t=Object.assign({rb:!0,kb:0},t)).kb)throw new Te(32);e=te(e.split("/").filter((e=>!!e)),!1);for(var n=be,i="/",r=0;r<e.length;r++){var a=r===e.length-1;if(a&&t.parent)break;if(n=_e(n,e[r]),i=ne(i+"/"+e[r]),n.Va&&(!a||a&&t.rb)&&(n=n.Va.root),!a||t.Sa)for(a=0;40960==(61440&n.mode);)if(n=He(i),i=ae(ie(i),n),n=Se(i,{kb:t.kb+1}).node,40<a++)throw new Te(32)}return{path:i,node:n}},Ne=e=>{for(var t;;){if(e===e.parent)return e=e.Ra.ub,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},ke=(e,t)=>{for(var n=0,i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i)|0;return(e+n>>>0)%Ee.length},Ae=e=>{var t=ke(e.parent.id,e.name);if(Ee[t]===e)Ee[t]=e.Wa;else for(t=Ee[t];t;){if(t.Wa===e){t.Wa=e.Wa;break}t=t.Wa}},_e=(e,t)=>{var n;if(n=(n=Me(e,"x"))?n:e.Ga.lookup?0:2)throw new Te(n,e);for(n=Ee[ke(e.id,t)];n;n=n.Wa){var i=n.name;if(n.parent.id===e.id&&i===t)return n}return e.Ga.lookup(e,t)},Oe=(e,t,n,i)=>(e=new Ct(e,t,n,i),t=ke(e.parent.id,e.name),e.Wa=Ee[t],Ee[t]=e),Re={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Pe=e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},Me=(e,t)=>xe?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2,$e=(e,t)=>{try{return _e(e,t),20}catch(n){}return Me(e,"wx")},Ie=(e,t,n)=>{try{var i=_e(e,t)}catch(r){return r.Ka}if(e=Me(e,"wx"))return e;if(n){if(16384!=(61440&i.mode))return 54;if(i===i.parent||"/"===Ne(i))return 10}else if(16384==(61440&i.mode))return 31;return 0},De=(e,t)=>(de||((de=function(){this.$a={}}).prototype={},Object.defineProperties(de.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},flags:{get:function(){return this.$a.flags},set:function(e){this.$a.flags=e}},position:{get:function(){return this.$a.position},set:function(e){this.$a.position=e}}})),e=Object.assign(new de,e),t=((e=0)=>{for(;4096>=e;e++)if(!ve[e])return e;throw new Te(33)})(t),e.fd=t,ve[t]=e),Le={open:e=>{e.Ha=ye[e.node.rdev].Ha,e.Ha.open&&e.Ha.open(e)},Ta:()=>{throw new Te(70)}},je=(e,t)=>{ye[e]={Ha:t}},qe=(e,t)=>{var n="/"===t,i=!t;if(n&&be)throw new Te(10);if(!n&&!i){var r=Se(t,{rb:!1});if(t=r.path,(r=r.node).Va)throw new Te(10);if(16384!=(61440&r.mode))throw new Te(54)}t={type:e,Kb:{},ub:t,Eb:[]},(e=e.Ra(t)).Ra=t,t.root=e,n?be=e:r&&(r.Va=t,r.Ra&&r.Ra.Eb.push(t))},Be=(e,t,n)=>{var i=Se(e,{parent:!0}).node;if(!(e=re(e))||"."===e||".."===e)throw new Te(28);var r=$e(i,e);if(r)throw new Te(r);if(!i.Ga.ab)throw new Te(63);return i.Ga.ab(i,e,t,n)},Fe=(e,t)=>Be(e,1023&(void 0!==t?t:511)|16384,0),ze=(e,t,n)=>{void 0===n&&(n=t,t=438),Be(e,8192|t,n)},Ue=(e,t)=>{if(!ae(e))throw new Te(44);var n=Se(t,{parent:!0}).node;if(!n)throw new Te(44);t=re(t);var i=$e(n,t);if(i)throw new Te(i);if(!n.Ga.symlink)throw new Te(63);n.Ga.symlink(n,t,e)},Ve=e=>{var t=Se(e,{parent:!0}).node;e=re(e);var n=_e(t,e),i=Ie(t,e,!0);if(i)throw new Te(i);if(!t.Ga.rmdir)throw new Te(63);if(n.Va)throw new Te(10);t.Ga.rmdir(t,e),Ae(n)},We=e=>{var t=Se(e,{parent:!0}).node;if(!t)throw new Te(44);e=re(e);var n=_e(t,e),i=Ie(t,e,!1);if(i)throw new Te(i);if(!t.Ga.unlink)throw new Te(63);if(n.Va)throw new Te(10);t.Ga.unlink(t,e),Ae(n)},He=e=>{if(!(e=Se(e).node))throw new Te(44);if(!e.Ga.readlink)throw new Te(28);return ae(Ne(e.parent),e.Ga.readlink(e))},Qe=(e,t)=>{if(!(e=Se(e,{Sa:!t}).node))throw new Te(44);if(!e.Ga.Pa)throw new Te(63);return e.Ga.Pa(e)},Ke=e=>Qe(e,!0),Ge=(e,t)=>{if(!(e="string"==typeof e?Se(e,{Sa:!0}).node:e).Ga.Oa)throw new Te(63);e.Ga.Oa(e,{mode:4095&t|-4096&e.mode,timestamp:Date.now()})},Ye=(e,t)=>{if(0>t)throw new Te(28);if(!(e="string"==typeof e?Se(e,{Sa:!0}).node:e).Ga.Oa)throw new Te(63);if(16384==(61440&e.mode))throw new Te(31);if(32768!=(61440&e.mode))throw new Te(28);var n=Me(e,"w");if(n)throw new Te(n);e.Ga.Oa(e,{size:t,timestamp:Date.now()})},Je=(e,t,n)=>{if(""===e)throw new Te(44);if("string"==typeof t){var i=Re[t];if(void 0===i)throw Error("Unknown file open mode: "+t);t=i}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var a=e;else{e=ne(e);try{a=Se(e,{Sa:!(131072&t)}).node}catch(o){}}if(i=!1,64&t)if(a){if(128&t)throw new Te(20)}else a=Be(e,n,0),i=!0;if(!a)throw new Te(44);if(8192==(61440&a.mode)&&(t&=-513),65536&t&&16384!=(61440&a.mode))throw new Te(54);if(!i&&(n=a?40960==(61440&a.mode)?32:16384==(61440&a.mode)&&("r"!==Pe(t)||512&t)?31:Me(a,Pe(t)):44))throw new Te(n);return 512&t&&!i&&Ye(a,0),t&=-131713,(a=De({node:a,path:Ne(a),flags:t,seekable:!0,position:0,Ha:a.Ha,Ib:[],error:!1})).Ha.open&&a.Ha.open(a),!r.logReadFiles||1&t||(he||(he={}),e in he||(he[e]=1)),a},Xe=e=>{if(null===e.fd)throw new Te(8);e.hb&&(e.hb=null);try{e.Ha.close&&e.Ha.close(e)}catch(FD){throw FD}finally{ve[e.fd]=null}e.fd=null},Ze=(e,t,n)=>{if(null===e.fd)throw new Te(8);if(!e.seekable||!e.Ha.Ta)throw new Te(70);if(0!=n&&1!=n&&2!=n)throw new Te(28);e.position=e.Ha.Ta(e,t,n),e.Ib=[]},et=(e,t,n,i,r)=>{if(0>i||0>r)throw new Te(28);if(null===e.fd)throw new Te(8);if(1==(2097155&e.flags))throw new Te(8);if(16384==(61440&e.node.mode))throw new Te(31);if(!e.Ha.read)throw new Te(28);var a=void 0!==r;if(a){if(!e.seekable)throw new Te(70)}else r=e.position;return t=e.Ha.read(e,t,n,i,r),a||(e.position+=t),t},tt=(e,t,n,i,r)=>{if(0>i||0>r)throw new Te(28);if(null===e.fd)throw new Te(8);if(0==(2097155&e.flags))throw new Te(8);if(16384==(61440&e.node.mode))throw new Te(31);if(!e.Ha.write)throw new Te(28);e.seekable&&1024&e.flags&&Ze(e,0,2);var a=void 0!==r;if(a){if(!e.seekable)throw new Te(70)}else r=e.position;return t=e.Ha.write(e,t,n,i,r,void 0),a||(e.position+=t),t},nt=e=>{var t,n=Je(e,n||0);e=Qe(e).size;var i=new Uint8Array(e);return et(n,i,0,e,0),t=i,Xe(n),t},it=()=>{Te||(Te=function(e,t){this.node=t,this.Hb=function(e){this.Ka=e},this.Hb(e),this.message="FS error"},Te.prototype=Error(),Te.prototype.constructor=Te,[44].forEach((e=>{Ce[e]=new Te(e),Ce[e].stack="<generic error, no stack>"})))},rt=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},at=(e,t,n)=>{e=ne("/dev/"+e);var i=rt(!!t,!!n);ue||(ue=64);var r=ue++<<8|0;je(r,{open:e=>{e.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(e,n,i,r)=>{for(var a=0,o=0;o<r;o++){try{var s=t()}catch(dt){throw new Te(29)}if(void 0===s&&0===a)throw new Te(6);if(null==s)break;a++,n[i+o]=s}return a&&(e.node.timestamp=Date.now()),a},write:(e,t,i,r)=>{for(var a=0;a<r;a++)try{n(t[i+a])}catch(o){throw new Te(29)}return r&&(e.node.timestamp=Date.now()),a}}),ze(e,i,r)},ot={};function st(e,t,n){if("/"===t.charAt(0))return t;if(e=-100===e?"/":pt(e).path,0==t.length){if(!n)throw new Te(44);return e}return ne(e+"/"+t)}function lt(e,t,n){try{var i=e(t)}catch(r){if(r&&r.node&&ne(t)!==ne(Ne(r.node)))return-54;throw r}return k[n>>2]=i.dev,k[n+8>>2]=i.ino,k[n+12>>2]=i.mode,A[n+16>>2]=i.nlink,k[n+20>>2]=i.uid,k[n+24>>2]=i.gid,k[n+28>>2]=i.rdev,W=[i.size>>>0,(V=i.size,1<=+Math.abs(V)?0<V?(0|Math.min(+Math.floor(V/4294967296),4294967295))>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],k[n+40>>2]=W[0],k[n+44>>2]=W[1],k[n+48>>2]=4096,k[n+52>>2]=i.blocks,W=[Math.floor(i.atime.getTime()/1e3)>>>0,(V=Math.floor(i.atime.getTime()/1e3),1<=+Math.abs(V)?0<V?(0|Math.min(+Math.floor(V/4294967296),4294967295))>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],k[n+56>>2]=W[0],k[n+60>>2]=W[1],A[n+64>>2]=0,W=[Math.floor(i.mtime.getTime()/1e3)>>>0,(V=Math.floor(i.mtime.getTime()/1e3),1<=+Math.abs(V)?0<V?(0|Math.min(+Math.floor(V/4294967296),4294967295))>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],k[n+72>>2]=W[0],k[n+76>>2]=W[1],A[n+80>>2]=0,W=[Math.floor(i.ctime.getTime()/1e3)>>>0,(V=Math.floor(i.ctime.getTime()/1e3),1<=+Math.abs(V)?0<V?(0|Math.min(+Math.floor(V/4294967296),4294967295))>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],k[n+88>>2]=W[0],k[n+92>>2]=W[1],A[n+96>>2]=0,W=[i.ino>>>0,(V=i.ino,1<=+Math.abs(V)?0<V?(0|Math.min(+Math.floor(V/4294967296),4294967295))>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],k[n+104>>2]=W[0],k[n+108>>2]=W[1],0}var ct,ut=void 0;function ht(){return k[(ut+=4)-4>>2]}function pt(e){if(!(e=ve[e]))throw new Te(8);return e}function mt(e){return A[e>>2]+4294967296*k[e+4>>2]}function ft(e){var t=D(e)+1,n=kt(t);return n&&I(e,C,n,t),n}ct=b?()=>{var e=J$.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var gt={};function bt(){if(!yt){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(e in gt)void 0===gt[e]?delete t[e]:t[e]=gt[e];var n=[];for(e in t)n.push(e+"="+t[e]);yt=n}return yt}var yt,vt=void 0,wt=[];function Et(e,t){if(!vt){vt=new WeakMap;var n=j.length;if(vt)for(var i=0;i<0+n;i++){var r=j.get(i);r&&vt.set(r,i)}}if(vt.has(e))return vt.get(e);if(wt.length)n=wt.pop();else{try{j.grow(1)}catch($T){if(!($T instanceof RangeError))throw $T;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}n=j.length-1}try{j.set(n,e)}catch($T){if(!($T instanceof TypeError))throw $T;if("function"==typeof WebAssembly.Function){i=WebAssembly.Function,r={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var a={parameters:[],results:"v"==t[0]?[]:[r[t[0]]]},o=1;o<t.length;++o)a.parameters.push(r[t[o]]);t=new i(a,e)}else{for(i=[1,96],r=t.slice(0,1),a={i:127,p:127,j:126,f:125,d:124},128>(o=(t=t.slice(1)).length)?i.push(o):i.push(o%128|128,o>>7),o=0;o<t.length;++o)i.push(a[t[o]]);"v"==r?i.push(0):i.push(1,a[r]),t=[0,97,115,109,1,0,0,0,1],128>(r=i.length)?t.push(r):t.push(r%128|128,r>>7),t.push.apply(t,i),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}j.set(n,t)}return vt.set(e,n),n}function xt(e){vt.delete(j.get(e)),wt.push(e)}function Tt(e){var t=kt(e.length);return e.subarray||e.slice||(e=new Uint8Array(e)),S.set(e,t),t}function Ct(e,t,n,i){e||(e=this),this.parent=e,this.Ra=e.Ra,this.Va=null,this.id=we++,this.name=t,this.mode=n,this.Ga={},this.Ha={},this.rdev=i}Object.defineProperties(Ct.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),it(),Ee=Array(4096),qe(ge,"/"),Fe("/tmp"),Fe("/home"),Fe("/home/web_user"),(()=>{Fe("/dev"),je(259,{read:()=>0,write:(e,t,n,i)=>i}),ze("/dev/null",259),le(1280,me),le(1536,fe),ze("/dev/tty",1280),ze("/dev/tty1",1536);var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(b)try{var t=gD;return()=>t.randomBytes(1)[0]}catch(n){}return()=>K("randomDevice")}();at("random",e),at("urandom",e),Fe("/dev/shm"),Fe("/dev/shm/tmp")})(),(()=>{Fe("/proc");var e=Fe("/proc/self");Fe("/proc/self/fd"),qe({Ra:()=>{var t=Oe(e,"fd",16895,73);return t.Ga={lookup:(e,t)=>{var n=ve[+t];if(!n)throw new Te(8);return(e={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>n.path}}).parent=e}},t}},"/proc/self/fd")})();var St={a:function(e,t,n,i){K("Assertion failed: "+$(e)+", at: "+[t?$(t):"unknown filename",n,i?$(i):"unknown function"])},h:function(e,t){try{return e=$(e),Ge(e,t),0}catch(n){if(void 0===ot||!(n instanceof Te))throw n;return-n.Ka}},H:function(e,t,n){try{if(t=st(e,t=$(t)),-8&n)return-28;var i=Se(t,{Sa:!0}).node;return i?(e="",4&n&&(e+="r"),2&n&&(e+="w"),1&n&&(e+="x"),e&&Me(i,e)?-2:0):-44}catch(r){if(void 0===ot||!(r instanceof Te))throw r;return-r.Ka}},i:function(e,t){try{var n=ve[e];if(!n)throw new Te(8);return Ge(n.node,t),0}catch(i){if(void 0===ot||!(i instanceof Te))throw i;return-i.Ka}},g:function(e){try{var t=ve[e];if(!t)throw new Te(8);var n=t.node,i="string"==typeof n?Se(n,{Sa:!0}).node:n;if(!i.Ga.Oa)throw new Te(63);return i.Ga.Oa(i,{timestamp:Date.now()}),0}catch(r){if(void 0===ot||!(r instanceof Te))throw r;return-r.Ka}},b:function(e,t,n){ut=n;try{var i=pt(e);switch(t){case 0:var r=ht();return 0>r?-28:De(i,r).fd;case 1:case 2:case 6:case 7:return 0;case 3:return i.flags;case 4:return r=ht(),i.flags|=r,0;case 5:return r=ht(),N[r+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return k[Nt()>>2]=28,-1}}catch(a){if(void 0===ot||!(a instanceof Te))throw a;return-a.Ka}},G:function(e,t){try{var n=pt(e);return lt(Qe,n.path,t)}catch(i){if(void 0===ot||!(i instanceof Te))throw i;return-i.Ka}},l:function(e,t,n){try{if(t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,isNaN(t))return-61;var i=ve[e];if(!i)throw new Te(8);if(0==(2097155&i.flags))throw new Te(28);return Ye(i.node,t),0}catch(r){if(void 0===ot||!(r instanceof Te))throw r;return-r.Ka}},B:function(e,t){try{if(0===t)return-28;var n=D("/")+1;return t<n?-68:(I("/",S,e,t),n)}catch(i){if(void 0===ot||!(i instanceof Te))throw i;return-i.Ka}},E:function(e,t){try{return e=$(e),lt(Ke,e,t)}catch(n){if(void 0===ot||!(n instanceof Te))throw n;return-n.Ka}},y:function(e,t,n){try{return t=st(e,t=$(t)),"/"===(t=ne(t))[t.length-1]&&(t=t.substr(0,t.length-1)),Fe(t,n),0}catch(i){if(void 0===ot||!(i instanceof Te))throw i;return-i.Ka}},D:function(e,t,n,i){try{t=$(t);var r=256&i;return t=st(e,t,4096&i),lt(r?Ke:Qe,t,n)}catch(a){if(void 0===ot||!(a instanceof Te))throw a;return-a.Ka}},v:function(e,t,n,i){ut=i;try{t=st(e,t=$(t));var r=i?ht():0;return Je(t,n,r).fd}catch(a){if(void 0===ot||!(a instanceof Te))throw a;return-a.Ka}},t:function(e,t,n,i){try{if(t=st(e,t=$(t)),0>=i)return-28;var r=He(t),a=Math.min(i,D(r)),o=C[n+a];return I(r,S,n,i+1),C[n+a]=o,a}catch($T){if(void 0===ot||!($T instanceof Te))throw $T;return-$T.Ka}},s:function(e){try{return e=$(e),Ve(e),0}catch(FD){if(void 0===ot||!(FD instanceof Te))throw FD;return-FD.Ka}},F:function(e,t){try{return e=$(e),lt(Qe,e,t)}catch(n){if(void 0===ot||!(n instanceof Te))throw n;return-n.Ka}},p:function(e,t,n){try{return t=st(e,t=$(t)),0===n?We(t):512===n?Ve(t):K("Invalid flags passed to unlinkat"),0}catch(i){if(void 0===ot||!(i instanceof Te))throw i;return-i.Ka}},o:function(e,t,n){try{if(t=st(e,t=$(t),!0),n){var i=mt(n),r=k[n+8>>2];a=1e3*i+r/1e6,o=1e3*(i=mt(n+=16))+(r=k[n+8>>2])/1e6}else var a=Date.now(),o=a;e=a;var s=Se(t,{Sa:!0}).node;return s.Ga.Oa(s,{timestamp:Math.max(e,o)}),0}catch(Lh){if(void 0===ot||!(Lh instanceof Te))throw Lh;return-Lh.Ka}},e:function(){return Date.now()},j:function(e,t){e=new Date(1e3*mt(e)),k[t>>2]=e.getSeconds(),k[t+4>>2]=e.getMinutes(),k[t+8>>2]=e.getHours(),k[t+12>>2]=e.getDate(),k[t+16>>2]=e.getMonth(),k[t+20>>2]=e.getFullYear()-1900,k[t+24>>2]=e.getDay();var n=new Date(e.getFullYear(),0,1);k[t+28>>2]=(e.getTime()-n.getTime())/864e5|0,k[t+36>>2]=-60*e.getTimezoneOffset();var i=new Date(e.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),k[t+32>>2]=0|(i!=n&&e.getTimezoneOffset()==Math.min(n,i))},w:function(e,t,n,i,r,a){try{var o=pt(i);if(0!=(2&t)&&0==(2&n)&&2!=(2097155&o.flags))throw new Te(2);if(1==(2097155&o.flags))throw new Te(2);if(!o.Ha.bb)throw new Te(43);var s=o.Ha.bb(o,e,r,t,n),l=s.Fb;return k[a>>2]=s.vb,l}catch(c){if(void 0===ot||!(c instanceof Te))throw c;return-c.Ka}},x:function(e,t,n,i,r,a){try{var o=pt(r);if(2&n){var s=S.slice(e,e+t);o&&o.Ha.cb&&o.Ha.cb(o,s,a,t,i)}}catch(Lh){if(void 0===ot||!(Lh instanceof Te))throw Lh;return-Lh.Ka}},n:function e(t,n,i){e.Bb||(e.Bb=!0,function(e,t,n){function i(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var r=(new Date).getFullYear(),a=new Date(r,0,1),o=new Date(r,6,1);r=a.getTimezoneOffset();var s=o.getTimezoneOffset();k[e>>2]=60*Math.max(r,s),k[t>>2]=Number(r!=s),e=i(a),t=i(o),e=ft(e),t=ft(t),s<r?(A[n>>2]=e,A[n+4>>2]=t):(A[n>>2]=t,A[n+4>>2]=e)}(t,n,i))},q:function(){return 2147483648},d:ct,c:function(e){var t=S.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var i=t*(1+.2/n);i=Math.min(i,e+100663296);var r=Math;i=Math.max(e,i),r=r.min.call(r,2147483648,i+(65536-i%65536)%65536);e:{try{x.grow(r-T.byteLength+65535>>>16),L();var a=1;break e}catch(zD){}a=void 0}if(a)return!0}return!1},z:function(e,t){var n=0;return bt().forEach((function(i,r){var a=t+n;for(r=A[e+4*r>>2]=a,a=0;a<i.length;++a)C[r++>>0]=i.charCodeAt(a);C[r>>0]=0,n+=i.length+1})),0},A:function(e,t){var n=bt();A[e>>2]=n.length;var i=0;return n.forEach((function(e){i+=e.length+1})),A[t>>2]=i,0},f:function(e){try{var t=pt(e);return Xe(t),0}catch(n){if(void 0===ot||!(n instanceof Te))throw n;return n.Ka}},m:function(e,t){try{var n=pt(e);return C[t>>0]=n.tty?2:16384==(61440&n.mode)?3:40960==(61440&n.mode)?7:4,0}catch(i){if(void 0===ot||!(i instanceof Te))throw i;return i.Ka}},u:function(e,t,n,i){try{e:{var r=pt(e);e=t;for(var a=t=0;a<n;a++){var o=A[e>>2],s=A[e+4>>2];e+=8;var l=et(r,C,o,s);if(0>l){var c=-1;break e}if(t+=l,l<s)break}c=t}return A[i>>2]=c,0}catch(u){if(void 0===ot||!(u instanceof Te))throw u;return u.Ka}},k:function(e,t,n,i,r){try{if(t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,isNaN(t))return 61;var a=pt(e);return Ze(a,t,i),W=[a.position>>>0,(V=a.position,1<=+Math.abs(V)?0<V?(0|Math.min(+Math.floor(V/4294967296),4294967295))>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],k[r>>2]=W[0],k[r+4>>2]=W[1],a.hb&&0===t&&0===i&&(a.hb=null),0}catch(zD){if(void 0===ot||!(zD instanceof Te))throw zD;return zD.Ka}},C:function(e){try{var t=pt(e);return t.Ha&&t.Ha.fsync?t.Ha.fsync(t):0}catch(n){if(void 0===ot||!(n instanceof Te))throw n;return n.Ka}},r:function(e,t,n,i){try{e:{var r=pt(e);e=t;for(var a=t=0;a<n;a++){var o=A[e>>2],s=A[e+4>>2];e+=8;var l=tt(r,C,o,s);if(0>l){var c=-1;break e}t+=l}c=t}return A[i>>2]=c,0}catch(u){if(void 0===ot||!(u instanceof Te))throw u;return u.Ka}}};!function(){function e(e){r.asm=e.exports,x=r.asm.I,L(),j=r.asm.Aa,B.unshift(r.asm.J),H--,r.monitorRunDependencies&&r.monitorRunDependencies(H),0==H&&Q&&(e=Q,Q=null,e())}function t(t){e(t.instance)}function n(e){return function(){if(!v&&(f||g)){if("function"==typeof fetch&&!U.startsWith("file://"))return fetch(U,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+U+"'";return e.arrayBuffer()})).catch((function(){return J()}));if(l)return new Promise((function(e,t){l(U,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return J()}))}().then((function(e){return WebAssembly.instantiate(e,i)})).then((function(e){return e})).then(e,(function(e){E("failed to asynchronously prepare wasm: "+e),K(e)}))}var i={a:St};if(H++,r.monitorRunDependencies&&r.monitorRunDependencies(H),r.instantiateWasm)try{return r.instantiateWasm(i,e)}catch(a){return E("Module.instantiateWasm callback failed with error: "+a),!1}v||"function"!=typeof WebAssembly.instantiateStreaming||G()||U.startsWith("file://")||b||"function"!=typeof fetch?n(t):fetch(U,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,i).then(t,(function(e){return E("wasm streaming compile failed: "+e),E("falling back to ArrayBuffer instantiation"),n(t)}))}))}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.J).apply(null,arguments)},r._sqlite3_free=function(){return(r._sqlite3_free=r.asm.K).apply(null,arguments)},r._sqlite3_value_double=function(){return(r._sqlite3_value_double=r.asm.L).apply(null,arguments)},r._sqlite3_value_text=function(){return(r._sqlite3_value_text=r.asm.M).apply(null,arguments)};var Nt=r.___errno_location=function(){return(Nt=r.___errno_location=r.asm.N).apply(null,arguments)};r._sqlite3_prepare_v2=function(){return(r._sqlite3_prepare_v2=r.asm.O).apply(null,arguments)},r._sqlite3_step=function(){return(r._sqlite3_step=r.asm.P).apply(null,arguments)},r._sqlite3_finalize=function(){return(r._sqlite3_finalize=r.asm.Q).apply(null,arguments)},r._sqlite3_reset=function(){return(r._sqlite3_reset=r.asm.R).apply(null,arguments)},r._sqlite3_value_int=function(){return(r._sqlite3_value_int=r.asm.S).apply(null,arguments)},r._sqlite3_clear_bindings=function(){return(r._sqlite3_clear_bindings=r.asm.T).apply(null,arguments)},r._sqlite3_value_blob=function(){return(r._sqlite3_value_blob=r.asm.U).apply(null,arguments)},r._sqlite3_value_bytes=function(){return(r._sqlite3_value_bytes=r.asm.V).apply(null,arguments)},r._sqlite3_value_type=function(){return(r._sqlite3_value_type=r.asm.W).apply(null,arguments)},r._sqlite3_result_blob=function(){return(r._sqlite3_result_blob=r.asm.X).apply(null,arguments)},r._sqlite3_result_double=function(){return(r._sqlite3_result_double=r.asm.Y).apply(null,arguments)},r._sqlite3_result_error=function(){return(r._sqlite3_result_error=r.asm.Z).apply(null,arguments)},r._sqlite3_result_int=function(){return(r._sqlite3_result_int=r.asm._).apply(null,arguments)},r._sqlite3_result_int64=function(){return(r._sqlite3_result_int64=r.asm.$).apply(null,arguments)},r._sqlite3_result_null=function(){return(r._sqlite3_result_null=r.asm.aa).apply(null,arguments)},r._sqlite3_result_text=function(){return(r._sqlite3_result_text=r.asm.ba).apply(null,arguments)},r._sqlite3_sql=function(){return(r._sqlite3_sql=r.asm.ca).apply(null,arguments)},r._sqlite3_aggregate_context=function(){return(r._sqlite3_aggregate_context=r.asm.da).apply(null,arguments)},r._sqlite3_column_count=function(){return(r._sqlite3_column_count=r.asm.ea).apply(null,arguments)},r._sqlite3_data_count=function(){return(r._sqlite3_data_count=r.asm.fa).apply(null,arguments)},r._sqlite3_column_blob=function(){return(r._sqlite3_column_blob=r.asm.ga).apply(null,arguments)},r._sqlite3_column_bytes=function(){return(r._sqlite3_column_bytes=r.asm.ha).apply(null,arguments)},r._sqlite3_column_double=function(){return(r._sqlite3_column_double=r.asm.ia).apply(null,arguments)},r._sqlite3_column_text=function(){return(r._sqlite3_column_text=r.asm.ja).apply(null,arguments)},r._sqlite3_column_type=function(){return(r._sqlite3_column_type=r.asm.ka).apply(null,arguments)},r._sqlite3_column_name=function(){return(r._sqlite3_column_name=r.asm.la).apply(null,arguments)},r._sqlite3_bind_blob=function(){return(r._sqlite3_bind_blob=r.asm.ma).apply(null,arguments)},r._sqlite3_bind_double=function(){return(r._sqlite3_bind_double=r.asm.na).apply(null,arguments)},r._sqlite3_bind_int=function(){return(r._sqlite3_bind_int=r.asm.oa).apply(null,arguments)},r._sqlite3_bind_text=function(){return(r._sqlite3_bind_text=r.asm.pa).apply(null,arguments)},r._sqlite3_bind_parameter_index=function(){return(r._sqlite3_bind_parameter_index=r.asm.qa).apply(null,arguments)},r._sqlite3_normalized_sql=function(){return(r._sqlite3_normalized_sql=r.asm.ra).apply(null,arguments)},r._sqlite3_errmsg=function(){return(r._sqlite3_errmsg=r.asm.sa).apply(null,arguments)},r._sqlite3_exec=function(){return(r._sqlite3_exec=r.asm.ta).apply(null,arguments)},r._sqlite3_changes=function(){return(r._sqlite3_changes=r.asm.ua).apply(null,arguments)},r._sqlite3_close_v2=function(){return(r._sqlite3_close_v2=r.asm.va).apply(null,arguments)},r._sqlite3_create_function_v2=function(){return(r._sqlite3_create_function_v2=r.asm.wa).apply(null,arguments)},r._sqlite3_open=function(){return(r._sqlite3_open=r.asm.xa).apply(null,arguments)};var kt=r._malloc=function(){return(kt=r._malloc=r.asm.ya).apply(null,arguments)},At=r._free=function(){return(At=r._free=r.asm.za).apply(null,arguments)};r._RegisterExtensionFunctions=function(){return(r._RegisterExtensionFunctions=r.asm.Ba).apply(null,arguments)};var _t,Ot=r._emscripten_builtin_memalign=function(){return(Ot=r._emscripten_builtin_memalign=r.asm.Ca).apply(null,arguments)},Rt=r.stackSave=function(){return(Rt=r.stackSave=r.asm.Da).apply(null,arguments)},Pt=r.stackRestore=function(){return(Pt=r.stackRestore=r.asm.Ea).apply(null,arguments)},Mt=r.stackAlloc=function(){return(Mt=r.stackAlloc=r.asm.Fa).apply(null,arguments)};function $t(){function e(){if(!_t&&(_t=!0,r.calledRun=!0,!R)){if(r.noFSInit||ce||(ce=!0,it(),r.stdin=r.stdin,r.stdout=r.stdout,r.stderr=r.stderr,r.stdin?at("stdin",r.stdin):Ue("/dev/tty","/dev/stdin"),r.stdout?at("stdout",null,r.stdout):Ue("/dev/tty","/dev/stdout"),r.stderr?at("stderr",null,r.stderr):Ue("/dev/tty1","/dev/stderr"),Je("/dev/stdin",0),Je("/dev/stdout",1),Je("/dev/stderr",1)),xe=!1,X(B),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;){var e=r.postRun.shift();F.unshift(e)}X(F)}}if(!(0<H)){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)z();X(q),0<H||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e())}}if(r.UTF8ToString=$,r.stackAlloc=Mt,r.stackSave=Rt,r.stackRestore=Pt,r.cwrap=function(e,t,n,i){var a=(n=n||[]).every((e=>"number"===e||"boolean"===e));return"string"!==t&&a&&!i?r["_"+e]:function(){return function(e,t,n,i){var a={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);t=Mt(n),I(e,S,t,n)}return t},array:e=>{var t=Mt(e.length);return C.set(e,t),t}};e=r["_"+e];var o=[],s=0;if(i)for(var l=0;l<i.length;l++){var c=a[n[l]];c?(0===s&&(s=Rt()),o[l]=c(i[l])):o[l]=i[l]}return function(e){return 0!==s&&Pt(s),"string"===t?$(e):"boolean"===t?!!e:e}(n=e.apply(null,o))}(e,t,n,arguments)}},Q=function e(){_t||$t(),_t||(Q=e)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return $t(),a})),n)};e.exports=i,e.exports.default=i}));class yD{static async getDBFromStore(e,t){try{const n=await t.getItem(e);return Promise.resolve(n)}catch(n){return Promise.reject(`GetDBFromStore: ${n.message}`)}}static async setInitialDBToStore(e,t){try{const n=null;return await t.setItem(e,n),Promise.resolve()}catch(n){return Promise.reject(`SetInitialDBToStore: ${n.message}`)}}static async setDBToStore(e,t,n){try{const i=e.export();return await yD.saveDBToStore(t,i,n),Promise.resolve()}catch(i){return Promise.reject(`SetDBToStore: ${i.message}`)}}static async saveDBToStore(e,t,n){try{return await n.setItem(e,t),Promise.resolve()}catch(i){return Promise.reject(`SaveDBToStore: ${i.message}`)}}static async removeDBFromStore(e,t){try{return await t.removeItem(e),Promise.resolve()}catch(n){return Promise.reject(`RemoveDBFromStore: ${n.message}`)}}static async isDBInStore(e,t){try{const n=await t.getItem(e);return null!=n&&n.length>0?Promise.resolve(!0):Promise.resolve(!1)}catch(n){return Promise.reject(`IsDBInStore: ${n}`)}}static async restoreDBFromStore(e,t,n){const i=`${t}-${e}`;try{if(await yD.isDBInStore(i,n)){if(await yD.isDBInStore(e,n)){const t=await yD.getDBFromStore(i,n);return await yD.saveDBToStore(e,t,n),await yD.removeDBFromStore(i,n),Promise.resolve()}return Promise.reject(new Error(`RestoreDBFromStore: ${e} does not exist`))}return Promise.reject(new Error(`RestoreDBFromStore: ${i} does not exist`))}catch(r){return Promise.reject(`RestoreDBFromStore: ${r.message}`)}}static async copyDBToStore(e,t,n){try{if(await yD.isDBInStore(e,n)){const i=await yD.getDBFromStore(e,n);return await yD.saveDBToStore(t,i,n),Promise.resolve()}return Promise.reject(new Error(`CopyDBToStore: ${e} does not exist`))}catch(i){return Promise.reject(`CopyDBToStore: ${i.message}`)}}static async getDBListFromStore(e){try{const t=await e.keys();return Promise.resolve(t)}catch(t){return Promise.reject(`GetDBListFromStore: ${t.message}`)}}}class vD{static async getTablesNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const n=[];try{const t=await CD.queryAll(e,"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const e of t)n.push(e.name);return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetTablesNames: ${i.message}`))}}static async getViewsNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='view' AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const n=[];try{const t=await CD.queryAll(e,"SELECT name FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const e of t)n.push(e.name);return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`getViewsNames: ${i.message}`))}}static async dropElements(e,t){let n="",i="AND name NOT LIKE ('sqlite_%')";switch(t){case"index":n="DropIndexes";break;case"trigger":n="DropTriggers";break;case"table":n="DropTables",i+=" AND name NOT IN ('sync_table')";break;case"view":n="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${t} not found`))}let r="SELECT name FROM sqlite_master WHERE ";r+=`type = '${t}' ${i};`;try{const i=await CD.queryAll(e,r,[]);if(i.length>0){const r=t.toUpperCase(),a=[];for(const e of i){let t=`DROP ${r} IF EXISTS `;t+=`${e.name};`,a.push(t)}for(const t of a){if(await CD.run(e,t,[],!1,"no")<0)return Promise.reject(new Error(`DropElements: ${n}: lastId < 0`))}}return Promise.resolve()}catch(a){return Promise.reject(new Error(`DropElements: ${n}: ${a.message}`))}}static async dropAll(e){try{return await vD.dropElements(e,"table"),await vD.dropElements(e,"index"),await vD.dropElements(e,"trigger"),await vD.dropElements(e,"view"),await CD.run(e,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(t){return Promise.reject(new Error(`DropAll: ${t.message}`))}}static async dropTempTables(e,t){const n=Object.keys(t),i=[];for(const a of n){let e="DROP TABLE IF EXISTS ";e+=`_temp_${a};`,i.push(e)}try{return await CD.execute(e,i.join("\n"),!1)<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(r){return Promise.reject(new Error(`DropTempTables: ${r.message}`))}}}class wD{static async isJsonSQLite(e){const t=["database","version","overwrite","encrypted","mode","tables","views"];if(null==e||0===Object.keys(e).length&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(-1===t.indexOf(n))return!1;if("database"===n&&"string"!=typeof e[n])return!1;if("version"===n&&"number"!=typeof e[n])return!1;if("overwrite"===n&&"boolean"!=typeof e[n])return!1;if("encrypted"===n&&"boolean"!=typeof e[n])return!1;if("mode"===n&&"string"!=typeof e[n])return!1;if("tables"===n&&"object"!=typeof e[n])return!1;if("tables"===n)for(const t of e[n]){if(!(await wD.isTable(t)))return!1}if("views"===n&&"object"!=typeof e[n])return!1;if("views"===n)for(const t of e[n]){if(!(await wD.isView(t)))return!1}}return!0}static async isTable(e){const t=["name","schema","indexes","triggers","values"];let n=0;if(null==e||0===Object.keys(e).length&&e.constructor===Object)return!1;for(const i of Object.keys(e)){if(-1===t.indexOf(i))return!1;if("name"===i&&"string"!=typeof e[i])return!1;if("schema"===i&&"object"!=typeof e[i])return!1;if("indexes"===i&&"object"!=typeof e[i])return!1;if("triggers"===i&&"object"!=typeof e[i])return!1;if("values"===i&&"object"!=typeof e[i])return!1;if("schema"===i){e.schema.forEach((e=>{e.column&&n++}));for(let t=0;t<n;t++){if(!(await wD.isSchema(e[i][t])))return!1}}if("indexes"===i)for(const t of e[i]){if(!(await wD.isIndexes(t)))return!1}if("triggers"===i)for(const t of e[i]){if(!(await wD.isTriggers(t)))return!1}if("values"===i&&n>0)for(const t of e[i])if("object"!=typeof t||t.length!=n)return!1}return!0}static async isSchema(e){const t=["column","value","foreignkey","primarykey","constraint"];if(null==e||0===Object.keys(e).length&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(-1===t.indexOf(n))return!1;if("column"===n&&"string"!=typeof e[n])return!1;if("value"===n&&"string"!=typeof e[n])return!1;if("foreignkey"===n&&"string"!=typeof e[n])return!1;if("primarykey"===n&&"string"!=typeof e[n])return!1;if("constraint"===n&&"string"!=typeof e[n])return!1}return!0}static async isIndexes(e){const t=["name","value","mode"];if(null==e||0===Object.keys(e).length&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(-1===t.indexOf(n))return!1;if("name"===n&&"string"!=typeof e[n])return!1;if("value"===n&&"string"!=typeof e[n])return!1;if("mode"===n&&("string"!=typeof e[n]||"UNIQUE"!=e[n].toUpperCase()))return!1}return!0}static async isTriggers(e){const t=["name","timeevent","condition","logic"];if(null==e||0===Object.keys(e).length&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(-1===t.indexOf(n))return!1;if("name"===n&&"string"!=typeof e[n])return!1;if("timeevent"===n&&"string"!=typeof e[n])return!1;if("condition"===n&&"string"!=typeof e[n])return!1;if("logic"===n&&"string"!=typeof e[n])return!1}return!0}static async isView(e){const t=["name","value"];if(null==e||0===Object.keys(e).length&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(-1===t.indexOf(n))return!1;if("name"===n&&"string"!=typeof e[n])return!1;if("value"===n&&"string"!=typeof e[n])return!1}return!0}static async checkSchemaValidity(e){for(let t=0;t<e.length;t++){const n={},i=Object.keys(e[t]);i.includes("column")&&(n.column=e[t].column),i.includes("value")&&(n.value=e[t].value),i.includes("foreignkey")&&(n.foreignkey=e[t].foreignkey),i.includes("constraint")&&(n.constraint=e[t].constraint);if(!(await wD.isSchema(n)))return Promise.reject(new Error(`CheckSchemaValidity: schema[${t}] not valid`))}return Promise.resolve()}static async checkIndexesValidity(e){for(let t=0;t<e.length;t++){const n={},i=Object.keys(e[t]);i.includes("value")&&(n.value=e[t].value),i.includes("name")&&(n.name=e[t].name),i.includes("mode")&&(n.mode=e[t].mode);if(!(await wD.isIndexes(n)))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${t}] not valid`))}return Promise.resolve()}static async checkTriggersValidity(e){for(let t=0;t<e.length;t++){const n={},i=Object.keys(e[t]);i.includes("logic")&&(n.logic=e[t].logic),i.includes("name")&&(n.name=e[t].name),i.includes("timeevent")&&(n.timeevent=e[t].timeevent),i.includes("condition")&&(n.condition=e[t].condition);if(!(await wD.isTriggers(n)))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${t}] not valid`))}return Promise.resolve()}static async checkViewsValidity(e){for(let t=0;t<e.length;t++){const n={},i=Object.keys(e[t]);i.includes("value")&&(n.value=e[t].value),i.includes("name")&&(n.name=e[t].name);if(!(await wD.isView(n)))return Promise.reject(new Error(`CheckViewsValidity: views[${t}] not valid`))}return Promise.resolve()}static async getTableColumnNamesTypes(e,t){let n=[];const i=[],r=[],a=`PRAGMA table_info('${t}');`;try{if(n=await CD.queryAll(e,a,[]),n.length>0)for(const e of n)i.push(e.name),r.push(e.type);return Promise.resolve({names:i,types:r})}catch(o){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${o.message}`))}}static async getValues(e,t,n){const i=[];try{const r=await wD.getTableColumnNamesTypes(e,n);let a=[];if(!Object.keys(r).includes("names"))return Promise.reject(new Error(`GetValues: Table ${n} no names`));a=r.names;const o=await CD.queryAll(e,t,[]);for(const e of o){const t=[];for(const n of a)Object.keys(e).includes(n)?t.push(e[n]):t.push(null);i.push(t)}return Promise.resolve(i)}catch(r){return Promise.reject(new Error(`GetValues: ${r.message}`))}}}class ED{static extractTableName(e){const t=e.match(/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i);if(t&&t[1]){return t[1]}return null}static extractWhereClause(e){const t=e.match(/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i);if(t&&t[1]){return t[1].trim()}return null}static addPrefixToWhereClause(e,t,n,i){let r;if(e.includes("AND")){r=e.split("AND").map((e=>e.trim()))}else r=[e];const a=r.map((e=>{const r=e.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!r)return e;const a=r[1].trim(),o=r[2].trim();let s=r[3].trim(),l=a;const c=ED.findIndexOfStringInArray(a,n);-1!==c&&(l=ED.getStringAtIndex(t,c));return`${`${i}${l}`} ${o} ${s}`}));return a.join(" AND ")}static findIndexOfStringInArray(e,t){return t.indexOf(e)}static getStringAtIndex(e,t){return t>=0&&t<e.length?e[t]:void 0}static extractForeignKeyInfo(e){const t=e.match(/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/);if(t){return{forKeys:t[1].split(",").map((e=>e.trim())),tableName:t[2],refKeys:t[3].split(",").map((e=>e.trim())),action:t[5]?t[5]:"NO ACTION"}}throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const t=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),n=e.split(/\s|,|\(|\)/),i=[];let r=!1,a=!1;for(const o of n)"IN"===o?r=!0:r&&"("===o?a=!0:a&&")"===o?a=!1:!o.match(/\b[a-zA-Z]\w*\b/)||a||t.has(o.toUpperCase())||i.push(o);return Array.from(new Set(i))}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,t){const n="RETURNING",i={stmt:e,names:""},r=e.toUpperCase().indexOf(n);if(-1!==r){const n=e.substring(0,r);if(i.stmt=`${n};`,"wA"===t.substring(0,2)){const t=e.substring(r+9).trim();t.endsWith(";")?i.names=t.substring(0,t.length-1):i.names=t}}return i}static extractCombinedPrimaryKey(e){const t=new RegExp(/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g),n=e.matchAll(t),i=[];for(const r of n){const e=r[1].trim().split(",").map((e=>e.trim()));i.push(e)}return 0===i.length?null:i}static getWhereStmtForCombinedPK(e,t,n,i){let r=e;for(const a of i){const e=a.join(",")===t.join(",")?n:t;for(const[t,n]of a.entries())r=ED.replaceAllString(r,n,e[t])}return r}static replaceAllString(e,t,n){return e.split(t).join(n)}static indicesOf(e,t,n=0){const i=[];let r=e.indexOf(t,n);for(;-1!==r;)i.push(r),r=e.indexOf(t,r+1);return i}static getWhereStmtForNonCombinedPK(e,t,n){let i="",r=e.substring(6);for(let a=0;a<t.length;a++){let e="withRefsNames",o=ED.indicesOf(r,t[a]);if(0===o.length&&(o=ED.indicesOf(r,n[a]),e="colNames"),o.length>0){let s="";const l=ED.indicesOf(r,"=",o[0]);if(l.length>0){const o=ED.indicesOf(r,"AND",l[0]);o.length>0?(s=r.substring(l[0]+1,o[0]-1),r=r.substring(o[0]+3)):s=r.substring(l[0]+1),a>0&&(i+=" AND "),i+="withRefsNames"===e?n[a]+" = "+s:t[a]+" = "+s}}}return i="WHERE "+i,i}static updateWhere(e,t,n){let i="";if(e.length<=0)return i;if("WHERE"!==e.toUpperCase().substring(0,5))return i;if(t.length===n.length){const r=ED.extractCombinedPrimaryKey(e);i=r?ED.getWhereStmtForCombinedPK(e,t,n,r):ED.getWhereStmtForNonCombinedPK(e,t,n)}return i}}ED.replaceString=(e,t,n)=>{const i=e.indexOf(t);if(-1!==i){return e.substring(0,i)+n+e.substring(i+t.length)}return e};class xD{static findReferencesAndUpdate(e){return new xD(e)}static getRefs(e){return new xD(e)}static getReferences(e){return new xD(e)}static searchForRelatedItems(e){return new xD(e)}static upDateWhereForDefault(e){return new xD(e)}static upDateWhereForRestrict(e){return new xD(e)}static upDateWhereForCascade(e){return new xD(e)}static executeUpdateForDelete(e){return new xD(e)}constructor(e){this.message=e}}class TD{static async findReferencesAndUpdate(e,t,n,i,r){try{let a=!0;const o=await TD.getReferences(e,t),s=o.retRefs,l=o.tableWithRefs;if(s.length<=0)return a;if(t===l)return a;for(const c of s){const a=ED.extractForeignKeyInfo(c),o=a.tableName;if(""===o||o!==t)continue;const s=a.forKeys,u=a.refKeys;if(u.length!==s.length){const e="findReferencesAndUpdate: mismatch length";throw xD.findReferencesAndUpdate(e)}const d=a.action;if("NO_ACTION"===d)continue;let h=l,p=s,m={uWhereStmt:"",setStmt:""};if(TD.checkValuesMatch(s,i))throw xD.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const i=await TD.searchForRelatedItems(e,h,t,n,s,u,r);if(0===i.relatedItems.length&&i.key.length<=0)continue;if(h!==t)switch(d){case"RESTRICT":m=await TD.upDateWhereForRestrict(i);break;case"CASCADE":m=await TD.upDateWhereForCascade(i);break;default:m=await TD.upDateWhereForDefault(s,i)}}m.setStmt.length>0&&m.uWhereStmt.length>0&&TD.executeUpdateForDelete(e,h,m.uWhereStmt,m.setStmt,p,r)}return a}catch(a){const e=a.message?a.message:a;throw a instanceof xD?xD.findReferencesAndUpdate(e):a}}static async getReferences(e,t){const n="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+t+"%') AND sql LIKE('%ON DELETE%');";try{const t=await CD.queryAll(e,n,[]);let i=[],r="";if(t.length>0){let e=TD.getRefs(t[0].sql);i=e.foreignKeys,r=e.tableName}return Promise.resolve({tableWithRefs:r,retRefs:i})}catch(i){const e=`getReferences: ${i.message?i.message:i}`;throw xD.getReferences(e)}}static getRefs(e){let t="";const n=[],i=ED.flattenMultilineString(e);try{const e=/CREATE\s+TABLE\s+(\w+)\s+\(/,r=i.match(e);r&&(t=r[1]);const a=/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g,o=i.matchAll(a);for(const t of o){const e=t[0];n.push(e)}}catch(r){const e=`getRefs: Error creating regular expression: ${r}`;throw xD.getRefs(e)}return{tableName:t,foreignKeys:n}}static async getReferencedTableName(e){var t="";if(e.length>0){const n=e.split(new RegExp("REFERENCES","i"));if(2===n.length){const e=n[1].indexOf("(");t=n[1].substring(0,e).trim()}}return t}static async searchForRelatedItems(e,t,n,i,r,a,o){const s=[];let l="";const c=r.map((e=>`t1.${e}`)),u=a.map((e=>`t2.${e}`));try{let d=ED.addPrefixToWhereClause(i,a,r,"t2.");d.endsWith(";")&&(d=d.slice(0,-1));const h=`SELECT t1.rowid FROM ${t} t1 JOIN ${n} t2 ON ${c.map(((e,t)=>`${e} = ${u[t]}`)).join(" AND ")} WHERE ${d} AND t1.sql_deleted = 0;`,p=await CD.queryAll(e,h,o);return p.length>0&&(l=Object.keys(p[0])[0],s.push(...p)),{key:l,relatedItems:s}}catch(d){const e=d.message?d.message:d;throw xD.searchForRelatedItems(e)}}static async upDateWhereForDefault(e,t){let n="",i="";try{const r=t.key,a=[];for(const e of t.relatedItems){const t=e[r];void 0!==t&&a.push(t)}for(const t of e)n+=`${t} = NULL, `;n+="sql_deleted = 0",i=`WHERE ${r} IN (`;for(const e of a)i+=`${e},`;i.endsWith(",")&&(i=i.slice(0,-1)),i+=");"}catch(r){const e=r.message?r.message:r;throw xD.upDateWhereForDefault(e)}return{setStmt:n,uWhereStmt:i}}static async upDateWhereForRestrict(e){try{const t="",n="";if(e.relatedItems.length>0){const e="Restrict mode related items exist, please delete them first";throw xD.upDateWhereForRestrict(e)}return{setStmt:t,uWhereStmt:n}}catch(t){const e=t.message?t.message:t;throw xD.upDateWhereForRestrict(e)}}static async upDateWhereForCascade(e){let t="",n="";try{const i=e.key,r=[];for(const t of e.relatedItems){const e=t[i];void 0!==e&&r.push(e)}t+="sql_deleted = 1",n=`WHERE ${i} IN (`;for(const e of r)n+=`${e},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(i){const e=i.message?i.message:i;throw xD.upDateWhereForCascade(e)}return{setStmt:t,uWhereStmt:n}}static executeUpdateForDelete(e,t,n,i,r,a){try{let o=-1;const s=`UPDATE ${t} SET ${i} ${n}`,l=[];if(a.length>0){const e=n.split("?");";"===e[e.length-1]&&e.pop();for(let t=0;t<e.length;t++)for(const n of r){ED.indicesOf(e[t],n).length>0&&l.push(a[t])}}if(o=CD.run(e,s,l,!1,"no").lastId,-1===o){const e=`UPDATE sql_deleted failed for table: ${t}`;throw xD.executeUpdateForDelete(e)}}catch(o){const e=o.message?o.message:o;throw xD.executeUpdateForDelete(e)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(e,t){for(const n of e)if(!t.includes(n))return!1;return!0}}class CD{static async beginTransaction(e,t){const n="BeginTransaction: ";if(!t)return Promise.reject(new Error(`${n}database not opened`));try{return e.exec("BEGIN"),Promise.resolve()}catch(i){return Promise.reject(new Error(`${n}${i.message}`))}}static async rollbackTransaction(e,t){const n="RollbackTransaction: ";if(!t)return Promise.reject(new Error(`${n}database not opened`));try{return e.exec("ROLLBACK"),Promise.resolve()}catch(i){return Promise.reject(new Error(`${n}${i.message}`))}}static commitTransaction(e,t){const n="CommitTransaction: ";if(!t)return Promise.reject(new Error(`${n}database not opened`));try{return e.exec("COMMIT"),Promise.resolve()}catch(i){return Promise.reject(new Error(`${n}${i.message}`))}}static async dbChanges(e){let t=0;try{return t=e.exec("SELECT total_changes()")[0].values[0][0],Promise.resolve(t)}catch(n){return Promise.reject(new Error(`DbChanges failed: ${n.message}`))}}static async getLastId(e){let t=-1;try{return t=e.exec("SELECT last_insert_rowid()")[0].values[0][0],Promise.resolve(t)}catch(n){return Promise.reject(new Error(`GetLastId failed: ${n.message}`))}}static async setForeignKeyConstraintsEnabled(e,t){let n="PRAGMA foreign_keys=OFF";t&&(n="PRAGMA foreign_keys=ON");try{return e.run(n),Promise.resolve()}catch(i){const e=i.message?i.message:i;return Promise.reject(new Error(`SetForeignKey: ${e}`))}}static async getVersion(e){let t=0;try{return t=e.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(t)}catch(n){return Promise.reject(new Error(`GetVersion: ${n.message}`))}}static async setVersion(e,t){try{return e.exec(`PRAGMA user_version = ${t}`),Promise.resolve()}catch(n){return Promise.reject(new Error(`SetVersion: ${n.message}`))}}static async execute(e,t,n){try{var i=t;if(!n&&t.toLowerCase().includes("DELETE FROM".toLowerCase())){let n=(i=t.replace(/\n/g,"")).split(";");var r=[];for(const t of n){if("DELETE FROM"===t.trim().substring(0,11).toUpperCase()&&t.toLowerCase().includes("WHERE".toLowerCase())){const n=t.trim(),i=await CD.deleteSQL(e,n,[]);r.push(i)}else r.push(t)}i=r.join(";")}e.exec(i);const a=await CD.dbChanges(e);return Promise.resolve(a)}catch(a){return Promise.reject(new Error(`Execute: ${a.message}`))}}static async executeSet(e,t,n,i){const r=[];let a=-1,o={};for(let l=0;l<t.length;l++){const c="statement"in t[l]?t[l].statement:null,u="values"in t[l]&&t[l].values.length>0?t[l].values:[];if(null==c){let e="ExecuteSet: Error No statement";return e+=` for index ${l}`,Promise.reject(new Error(e))}try{if(Array.isArray(u[0]))for(const t of u){const s=await CD.replaceUndefinedByNull(t);o=await CD.run(e,c,s,n,i),a=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&r.push(o.values)}else{const t=await CD.replaceUndefinedByNull(u);o=await CD.run(e,c,t,n,i),a=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&r.push(o.values)}}catch(s){return Promise.reject(new Error(`ExecuteSet: ${s.message}`))}}return o.lastId=a,o.values="all"===i?r:"one"===i?r[0]:[],Promise.resolve(o)}static async queryAll(e,t,n){try{let i=[];if(i=null!=n&&n.length>0?e.exec(t,n):e.exec(t),0==i.length)return Promise.resolve([]);const r=i[0].values.map((e=>{const t={};return i[0].columns.forEach(((n,i)=>{t[n]=e[i]})),t}));return Promise.resolve(r)}catch(i){return Promise.reject(new Error(`queryAll: ${i.message}`))}}static async run(e,t,n,i,r){let a=t.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),o=t,s=[],l={};try{i||"DELETE"!==a||(o=await CD.deleteSQL(e,t,n));const c=n||[];if(c.length>0){const t=await CD.replaceUndefinedByNull(c),n=e.exec(o,t);if("all"===r||"one"===r){if(!(n&&n.length>0))return Promise.reject(new Error(`run: ${o} does not returned any change`));s=CD.getReturnedValues(n[0],r)}}else{const t=e.exec(o);if("all"===r||"one"===r){if(!(t&&t.length>0))return Promise.reject(new Error(`run: ${o} does not returned any change`));s=CD.getReturnedValues(t[0],r)}}const u=await CD.getLastId(e);return l.lastId=u,null!=s&&s.length>0&&(l.values=s),Promise.resolve(l)}catch(c){return Promise.reject(new Error(`run: ${c.message}`))}}static getReturnedValues(e,t){const n=[];for(let i=0;i<e.values.length;i++){let r={};for(let t=0;t<e.columns.length;t++)r[e.columns[t]]=e.values[i][t];if(n.push(r),"one"===t)break}return n}static async deleteSQL(e,t,n){let i=t;try{const t=await CD.isLastModified(e,!0),r=await CD.isSqlDeleted(e,!0);if(!t||!r)return i;const a=ED.extractWhereClause(i);if(!a){const e="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${e}`))}const o=ED.extractTableName(i);if(!o){const e="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${e}`))}const s=ED.extractColumnNames(a);if(0===s.length){const e="deleteSQL: Did not find column names in the WHERE Statement";return Promise.reject(new Error(`${e}`))}const l="sql_deleted = 1";if(await TD.findReferencesAndUpdate(e,o,a,s,n)){i=`UPDATE ${o} SET ${l} WHERE ${a.endsWith(";")?a.slice(0,-1):a} AND sql_deleted = 0;`}else i="";return Promise.resolve(i)}catch(r){let e=r.message?r.message:r;return Promise.reject(new Error(`deleteSQL: ${e}`))}}static async getTableList(e){try{const t=await vD.getTablesNames(e);return Promise.resolve(t)}catch(t){return Promise.reject(new Error(`getTableList: ${t.message}`))}}static async isTableExists(e,t){try{let n="SELECT name FROM sqlite_master WHERE ";n+=`type='table' AND name='${t}';`;const i=(await CD.queryAll(e,n,[])).length>0;return Promise.resolve(i)}catch(n){return Promise.reject(new Error(`isTableExists: ${n.message}`))}}static async isLastModified(e,t){if(!t)return Promise.reject("isLastModified: database not opened");try{const t=await vD.getTablesNames(e);for(const n of t){const t=await wD.getTableColumnNamesTypes(e,n);if(t.names.includes("last_modified"))return Promise.resolve(!0)}}catch(n){return Promise.reject(`isLastModified: ${n}`)}}static async isSqlDeleted(e,t){if(!t)return Promise.reject("isSqlDeleted: database not opened");try{const t=await vD.getTablesNames(e);for(const n of t){const t=await wD.getTableColumnNamesTypes(e,n);if(t.names.includes("sql_deleted"))return Promise.resolve(!0)}}catch(n){return Promise.reject(`isSqlDeleted: ${n}`)}}static async replaceUndefinedByNull(e){const t=[];for(const n of e){let e=n;void 0===n&&(e=null),t.push(e)}return Promise.resolve(t)}static async backupTables(e){let t={};try{const i=await vD.getTablesNames(e);for(const r of i)try{const n=await CD.backupTable(e,r);t[`${r}`]=n}catch(n){return Promise.reject(new Error(`BackupTables: table ${r}: ${n.message}`))}return Promise.resolve(t)}catch(n){return Promise.reject(new Error(`BackupTables: ${n.message}`))}}static async backupTable(e,t){try{await CD.beginTransaction(e,!0);const i=await CD.getTableColumnNames(e,t),r=`_temp_${t}`,a=`DROP TABLE IF EXISTS ${r};`;await CD.run(e,a,[],!1,"no");let o=`ALTER TABLE ${t} RENAME `;o+=`TO ${r};`;if(await CD.run(e,o,[],!1,"no")<0){let t="BackupTable: lastId < 0";try{await CD.rollbackTransaction(e,!0)}catch(n){t+=`: ${n.message}`}return Promise.reject(new Error(`${t}`))}try{return await CD.commitTransaction(e,!0),Promise.resolve(i)}catch(n){return Promise.reject(new Error(`BackupTable: ${n.message}`))}}catch(n){return Promise.reject(new Error(`BackupTable: ${n.message}`))}}static async getTableColumnNames(e,t){let n=[];const i=[],r=`PRAGMA table_info('${t}');`;try{if(n=await CD.queryAll(e,r,[]),n.length>0)for(const e of n)i.push(e.name);return Promise.resolve(i)}catch(a){return Promise.reject(new Error(`GetTableColumnNames: ${a.message}`))}}static async findCommonColumns(e,t){let n={};try{const i=await vD.getTablesNames(e);if(0===i.length)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const r of i){const i=await CD.getTableColumnNames(e,r);Object.keys(t).includes(r)&&(n[r]=CD.arraysIntersection(t[r],i))}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`FindCommonColumns: ${i.message}`))}}static arraysIntersection(e,t){if(null!=e&&null!=t){const n=new Set(e),i=new Set(t);return[...n].filter((e=>i.has(e)))}return[]}static async updateNewTablesData(e,t){try{await CD.beginTransaction(e,!0);const i=[];Object.keys(t).forEach((e=>{const n=t[e].join(",");let r=`INSERT INTO ${e} `;r+=`(${n}) `,r+=`SELECT ${n} FROM _temp_${e};`,i.push(r)}));if(await CD.execute(e,i.join("\n"),!1)<0){let t="updateNewTablesData: changes < 0";try{await CD.rollbackTransaction(e,!0)}catch(n){t+=`: ${n.message}`}return Promise.reject(new Error(`${t}`))}try{return await CD.commitTransaction(e,!0),Promise.resolve()}catch(n){return Promise.reject(new Error(`updateNewTablesData: ${n.message}`))}}catch(n){return Promise.reject(new Error(`updateNewTablesData: ${n.message}`))}}}class SD{static async createDatabaseSchema(e,t){let n=-1;const i=t.version;try{return await CD.setVersion(e.mDb,i),"full"===t.mode&&await vD.dropAll(e.mDb),n=await SD.createSchema(e,t),Promise.resolve(n)}catch(r){return Promise.reject(new Error(`CreateDatabaseSchema: ${r.message}`))}}static async createSchema(e,t){let n=0;const i=e.mDb;try{await CD.beginTransaction(i,!0),e.setIsTransActive(!0)}catch(a){return Promise.reject(new Error(`CreateSchema: ${a.message}`))}const r=await SD.createSchemaStatement(t);if(r.length>0){const t=r.join("\n");try{if(n=await CD.execute(i,t,!0),n<0)try{await CD.rollbackTransaction(i,!0),e.setIsTransActive(!1)}catch(a){return Promise.reject(new Error(`CreateSchema: changes < 0 ${a.message}`))}}catch(a){const t=a.message;try{return await CD.rollbackTransaction(i,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${t}`))}catch(a){return Promise.reject(new Error(`CreateSchema: changes < 0 ${a.message}: ${t}`))}}}try{return await CD.commitTransaction(i,!0),e.setIsTransActive(!1),Promise.resolve(n)}catch(a){return Promise.reject(new Error(`CreateSchema: commit ${a.message}`))}}static async createSchemaStatement(e){const t=[];let n=!1,i=!1;try{for(const r of e.tables){if(null!=r.schema&&r.schema.length>=1){t.push(`CREATE TABLE IF NOT EXISTS ${r.name} (`);for(let e=0;e<r.schema.length;e++)e===r.schema.length-1?r.schema[e].column?(t.push(`${r.schema[e].column} ${r.schema[e].value}`),"last_modified"===r.schema[e].column&&(n=!0),"sql_deleted"===r.schema[e].column&&(i=!0)):r.schema[e].foreignkey?t.push(`FOREIGN KEY (${r.schema[e].foreignkey}) ${r.schema[e].value}`):r.schema[e].constraint&&t.push(`CONSTRAINT ${r.schema[e].constraint} ${r.schema[e].value}`):r.schema[e].column?t.push(`${r.schema[e].column} ${r.schema[e].value},`):r.schema[e].foreignkey?t.push(`FOREIGN KEY (${r.schema[e].foreignkey}) ${r.schema[e].value},`):r.schema[e].primarykey?t.push(`FOREIGN KEY ${r.schema[e].value},`):r.schema[e].constraint&&t.push(`CONSTRAINT ${r.schema[e].constraint} ${r.schema[e].value},`);if(t.push(");"),n&&i){let e="CREATE TRIGGER IF NOT EXISTS ";e+=`${r.name}`,e+="_trigger_last_modified ",e+=`AFTER UPDATE ON ${r.name} `,e+="FOR EACH ROW WHEN NEW.last_modified < ",e+="OLD.last_modified BEGIN UPDATE ",e+=`${r.name} `,e+="SET last_modified = ",e+="(strftime('%s','now')) WHERE id=OLD.id; END;",t.push(e)}}if(null!=r.indexes&&r.indexes.length>=1)for(const e of r.indexes){const n=r.name;let i=`CREATE ${Object.keys(e).includes("mode")?e.mode+" ":""} INDEX IF NOT EXISTS `;i+=`${e.name} ON ${n} (${e.value});`,t.push(i)}if(null!=r.triggers&&r.triggers.length>=1)for(const e of r.triggers){const n=r.name;e.timeevent.toUpperCase().endsWith(" ON")&&(e.timeevent=e.timeevent.substring(0,e.timeevent.length-3));let i="CREATE TRIGGER IF NOT EXISTS ";i+=`${e.name} ${e.timeevent} ON ${n} `,e.condition&&(i+=`${e.condition} `),i+=`${e.logic};`,t.push(i)}}return Promise.resolve(t)}catch(r){return Promise.reject(r)}}static async createTablesData(e,t,n){let i=0,r=!1,a=-1,o="",s=-1;const l=e.mDb;try{s=await CD.dbChanges(l),await CD.beginTransaction(l,!0),e.setIsTransActive(!0)}catch(c){return Promise.reject(new Error(`createTablesData: ${c.message}`))}for(const u of t.tables)if(null!=u.values&&u.values.length>=1)try{a=await SD.createTableData(l,u,t.mode);const e=`create table data ${u.name}`;if(n.emit({progress:e}),a<0)break;r=!0}catch(c){o=c.message,r=!1;break}if(r)try{return await CD.commitTransaction(l,!0),e.setIsTransActive(!1),i=await CD.dbChanges(l)-s,Promise.resolve(i)}catch(c){return Promise.reject(new Error(`CreateTablesData: ${c.message}`))}else{if(!(o.length>0))return Promise.resolve(0);try{return await CD.rollbackTransaction(l,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${o}`))}catch(c){return Promise.reject(new Error(`CreateTablesData: ${c.message}: ${o}`))}}}static async createTableData(e,t,n){let i=-1;try{if(!(await CD.isTableExists(e,t.name)))return Promise.reject(new Error(`CreateTableData: Table ${t.name} does not exist`));const r=await wD.getTableColumnNamesTypes(e,t.name),a=r.types,o=r.names;if(0===a.length)return Promise.reject(new Error(`CreateTableData: Table ${t.name} info does not exist`));for(let s=0;s<t.values.length;s++){let r=t.values[s],a=!0;const l=await SD.createRowStatement(e,o,r,s,t.name,n);if(a=await SD.checkUpdate(e,l,r,t.name,o),a){if("DELETE"===l.substring(0,6).toUpperCase()&&(r=[]),i=await CD.run(e,l,r,!0,"no"),i<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else i=0}return Promise.resolve(i)}catch(r){return Promise.reject(new Error(`CreateTableData: ${r.message}`))}}static async createRowStatement(e,t,n,i,r,a){if(n.length!=t.length||0===n.length||0===t.length)return Promise.reject(new Error(`CreateRowStatement: Table ${r} values row ${i} not correct length`));try{const o=await SD.isIdExists(e,r,t[0],n[0]);let s;if("full"===a||"partial"===a&&!o){const e=t.join(),n=await SD.createQuestionMarkString(t.length);s=`INSERT INTO ${r} (${e}) VALUES (`,s+=`${n});`}else{let e=!0;const a=e=>"sql_deleted"===e,o=t.findIndex(a);if(o>=0&&1===n[o]&&(e=!1,s=`DELETE FROM ${r} WHERE `,"string"==typeof n[0]?s+=`${t[0]} = '${n[0]}';`:s+=`${t[0]} = ${n[0]};`),e){const e=await SD.setNameForUpdate(t);if(0===e.length)return Promise.reject(new Error(`CreateRowStatement: Table ${r} values row ${i} not set to String`));s=`UPDATE ${r} SET ${e} WHERE `,"string"==typeof n[0]?s+=`${t[0]} = '${n[0]}';`:s+=`${t[0]} = ${n[0]};`}}return Promise.resolve(s)}catch(o){return Promise.reject(new Error(`CreateRowStatement: ${o.message}`))}}static async checkUpdate(e,t,n,i,r){if("UPDATE"!==t.substring(0,6))return Promise.resolve(true);try{let t=`SELECT * FROM ${i} WHERE `;"string"==typeof n[0]?t+=`${r[0]} = '${n[0]}';`:t+=`${r[0]} = ${n[0]};`;const a=await wD.getValues(e,t,i);let o=[];if(a.length>0&&(o=a[0]),n.length>0&&o.length>0&&n.length===o.length){for(let e=0;e<n.length;e++)if(n[e]!==o[e])return Promise.resolve(!0);return Promise.resolve(!1)}{const e="Both arrays not the same length";return Promise.reject(new Error(`CheckUpdate: ${e}`))}}catch(a){return Promise.reject(new Error(`CheckUpdate: ${a.message}`))}}static async isIdExists(e,t,n,i){let r=!1,a=`SELECT ${n} FROM ${t} WHERE ${n} = `;"number"==typeof i&&(a+=`${i};`),"string"==typeof i&&(a+=`'${i}';`);try{return 1===(await CD.queryAll(e,a,[])).length&&(r=!0),Promise.resolve(r)}catch(o){return Promise.reject(new Error(`IsIdExists: ${o.message}`))}}static async isType(e,t){let n=!1;return"NULL"===e&&"object"==typeof t&&(n=!0),"TEXT"===e&&"string"==typeof t&&(n=!0),"INTEGER"===e&&"number"==typeof t&&(n=!0),"REAL"===e&&"number"==typeof t&&(n=!0),"BLOB"===e&&"string"==typeof t&&(n=!0),n?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))}static async checkColumnTypes(e,t){for(let i=0;i<t.length;i++)if(null!=t[i])try{await SD.isType(e[i],t[i])}catch(n){return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()}static async createQuestionMarkString(e){let t="";for(let n=0;n<e;n++)t+="?,";return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))}static async setNameForUpdate(e){let t="";for(const n of e)t+=`${n} = ? ,`;return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("SetNameForUpdate: length = 0"))}static async createView(e,t){const n=`CREATE VIEW IF NOT EXISTS ${t.name} AS ${t.value};`;try{return await CD.execute(e,n,!0)<0?Promise.reject(new Error(`CreateView: ${t.name} failed`)):Promise.resolve()}catch(i){return Promise.reject(new Error(`CreateView: ${i.message}`))}}static async createViews(e,t){const n=e.mDb;let i=!1,r="",a=-1,o=-1;try{a=await CD.dbChanges(n),await CD.beginTransaction(n,!0),e.setIsTransActive(!0)}catch(s){return Promise.reject(new Error(`createViews: ${s.message}`))}for(const l of t.views)if(null!=l.value)try{await SD.createView(n,l),i=!0}catch(s){r=s.message,i=!1;break}if(i)try{return await CD.commitTransaction(n,!0),e.setIsTransActive(!1),o=await CD.dbChanges(n)-a,Promise.resolve(o)}catch(s){return Promise.reject(new Error(`createViews: ${s.message}`))}else{if(!(r.length>0))return Promise.resolve(0);try{return await CD.rollbackTransaction(n,!0),e.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${r}`))}catch(s){return Promise.reject(new Error(`createViews: ${s.message}: ${r}`))}}}}class ND{static async createExportObject(e,t,n){const i={};let r=[],a=[],o="";try{a=await ND.getViewsName(e);const s=await ND.getTablesNameSQL(e);if(0===s.length)return Promise.reject(new Error("createExportObject: table's names failed"));if(!(await CD.isTableExists(e,"sync_table"))&&"partial"===t.mode)return Promise.reject(new Error("No sync_table available"));switch(t.mode){case"partial":r=await ND.getTablesPartial(e,s,n);break;case"full":r=await ND.getTablesFull(e,s,n);break;default:o="createExportObject: expMode "+t.mode+" not defined"}return o.length>0?Promise.reject(new Error(o)):(r.length>0&&(i.database=t.database,i.version=t.version,i.encrypted=t.encrypted,i.mode=t.mode,i.tables=r,a.length>0&&(i.views=a)),Promise.resolve(i))}catch(s){return Promise.reject(new Error("createExportObject: "+s.message))}}static async getViewsName(e){const t=[];let n="SELECT name,sql FROM sqlite_master WHERE ";n+="type='view' AND name NOT LIKE 'sqlite_%';";let i=[];try{i=await CD.queryAll(e,"SELECT name,sql FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%';",[]);for(const e of i){const n={};n.name=e.name,n.value=e.sql.substring(e.sql.indexOf("AS ")+3),t.push(n)}return Promise.resolve(t)}catch(r){return Promise.reject(new Error(`getViewsName: ${r.message}`))}}static async getTablesFull(e,t,n){const i=[];let r="";try{for(const a of t){let t,o;if(!a.name){r="GetTablesFull: no name";break}if(t=a.name,!a.sql){r="GetTablesFull: no sql";break}o=a.sql;const s={},l=await ND.getSchema(o);if(0===l.length){r="GetTablesFull: no Schema returned";break}await wD.checkSchemaValidity(l);const c=await ND.getIndexes(e,t);c.length>0&&await wD.checkIndexesValidity(c);const u=await ND.getTriggers(e,t);u.length>0&&await wD.checkTriggersValidity(u);let d=`Full: Table ${t} schema export completed ...`;n.emit({progress:d});const h=`SELECT * FROM ${t};`,p=await wD.getValues(e,h,t);if(s.name=t,!(l.length>0)){r="GetTablesFull: must contain schema";break}if(s.schema=l,c.length>0&&(s.indexes=c),u.length>0&&(s.triggers=u),p.length>0&&(s.values=p),Object.keys(s).length<=1){r=`GetTablesFull: table ${t} is not a jsonTable`;break}d=`Full: Table ${t} table data export completed ...`,n.emit({progress:d}),i.push(s)}return r.length>0?Promise.reject(new Error(r)):Promise.resolve(i)}catch(a){return Promise.reject(new Error(`GetTablesFull: ${a.message}`))}}static async getSchema(e){const t=[],n=e.indexOf("("),i=e.lastIndexOf(")");let r=e.substring(n+1,i);try{r=await ND.modEmbeddedParentheses(r);const e=r.split(",");for(let n=0;n<e.length;n++){let i=[];const r=e[n].replace(/\n/g,"").trim();i[0]=r.substring(0,r.indexOf(" ")),i[1]=r.substring(r.indexOf(" ")+1);const a={};if("FOREIGN"===i[0].toUpperCase()){const e=r.indexOf("("),t=r.indexOf(")"),n=r.substring(e+1,t).split("");i[0]=n.join(","),i[0]=i[0].replace(/, /g,","),i[1]=r.substring(t+2),a.foreignkey=i[0]}else if("PRIMARY"===i[0].toUpperCase()){const e=r.indexOf("("),t=r.indexOf(")"),n=r.substring(e+1,t).split("");i[0]="CPK_"+n.join("_"),i[0]=i[0].replace(/_ /g,"_"),i[1]=r,a.constraint=i[0]}else if("CONSTRAINT"===i[0].toUpperCase()){let e=[];const t=i[1].trim();e[0]=t.substring(0,t.indexOf(" ")),e[1]=t.substring(t.indexOf(" ")+1),i[0]=e[0],a.constraint=i[0],i[1]=e[1]}else a.column=i[0];a.value=i[1].replace(//g,","),t.push(a)}return Promise.resolve(t)}catch(a){return Promise.reject(new Error(a.message))}}static async getIndexes(e,t){const n=[];let i="";try{let r="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";r+=`type = 'index' AND tbl_name = '${t}' `,r+="AND sql NOTNULL;";const a=await CD.queryAll(e,r,[]);if(a.length>0){for(const e of a){if(3!==Object.keys(e).length){i=`GetIndexes: Table ${t} creating indexes`;break}if(e.tbl_name!==t){i=`GetIndexes: Table ${t} doesn't match`;break}{const t=e.sql,i=t.includes("UNIQUE")?"UNIQUE":"",r=t.lastIndexOf("("),a=t.lastIndexOf(")"),o={};o.name=e.name,o.value=t.slice(r+1,a),i.length>0&&(o.mode=i),n.push(o)}}if(i.length>0)return Promise.reject(new Error(i))}return Promise.resolve(n)}catch(r){return Promise.reject(new Error(`GetIndexes: ${r.message}`))}}static async getTriggers(e,t){const n=[];try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'trigger' AND tbl_name = '${t}' `,i+="AND sql NOT NULL;";const r=await CD.queryAll(e,i,[]);if(r.length>0)for(const e of r){if(3!==Object.keys(e).length)return Promise.reject(new Error(`GetTriggers: Table ${t} creating indexes`));if(e.tbl_name!==t)return Promise.reject(new Error(`GetTriggers: Table ${t} doesn't match`));{const i=e.sql,r=e.name;let a=i.split(r);if(2!=a.length)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!a[1].includes(t))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${t}`));const o=a[1].split(t,1)[0].trim();if(a=a[1].split(o+" "+t),2!=a.length)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let s="",l="";if("BEGIN"!==a[1].trim().substring(0,5).toUpperCase()){if(a=a[1].trim().split("BEGIN"),2!=a.length)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));s=a[0].trim(),l="BEGIN"+a[1]}else l=a[1].trim();const c={};c.name=r,c.logic=l,s.length>0&&(c.condition=s),c.timeevent=o,n.push(c)}}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetTriggers: ${i.message}`))}}static async getTablesPartial(e,t,n){const i=[];let r={},a=0,o=[],s="";try{const l=await ND.getPartialModeData(e,t);Object.keys(l).includes("syncDate")&&(a=l.syncDate),Object.keys(l).includes("modTables")&&(r=l.modTables,o=Object.keys(r));for(const c of t){let t="",l="";if(!c.name){s="GetTablesFull: no name";break}if(t=c.name,!c.sql){s="GetTablesFull: no sql";break}if(l=c.sql,0==o.length||-1===o.indexOf(t)||"No"==r[t])continue;const u={};let d=[],h=[],p=[];u.name=c,"Create"===r[u.name]&&(d=await ND.getSchema(l),d.length>0&&await wD.checkSchemaValidity(d),h=await ND.getIndexes(e,t),h.length>0&&await wD.checkIndexesValidity(h),p=await ND.getTriggers(e,t),p.length>0&&await wD.checkTriggersValidity(p));let m=`Partial: Table ${t} schema export completed ...`;n.emit({progress:m});let f="";f="Create"===r[t]?`SELECT * FROM ${t};`:`SELECT * FROM ${t} WHERE last_modified > ${a};`;const g=await wD.getValues(e,f,t);if(u.name=t,d.length>0&&(u.schema=d),h.length>0&&(u.indexes=h),p.length>0&&(u.triggers=p),g.length>0&&(u.values=g),Object.keys(u).length<=1){s=`GetTablesPartial: table ${t} is not a jsonTable`;break}m=`Partial: Table ${t} table data export completed ...`,n.emit({progress:m}),i.push(u)}return s.length>0?Promise.reject(new Error(s)):Promise.resolve(i)}catch(l){return Promise.reject(new Error(`GetTablesPartial: ${l.message}`))}}static async getPartialModeData(e,t){const n={};try{const i=await ND.getSynchroDate(e);if(i<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const r=await ND.getTablesModified(e,t,i);return r.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(n.syncDate=i,n.modTables=r,Promise.resolve(n))}catch(i){return Promise.reject(new Error(`GetPartialModeData: ${i.message}`))}}static async getTablesNameSQL(e){let t="SELECT name,sql FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%';";try{const t=await CD.queryAll(e,"SELECT name,sql FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%';",[]);return Promise.resolve(t)}catch(n){return Promise.reject(new Error(`getTablesNamesSQL: ${n.message}`))}}static async getTablesModified(e,t,n){let i="";try{const r={};for(const a of t){let t,o="SELECT count(*) AS tcount  ";o+=`FROM ${a.name};`;let s=await CD.queryAll(e,o,[]);if(1!=s.length){i="GetTableModified: total count not returned";break}const l=s[0].tcount;if(o="SELECT count(*) AS mcount FROM ",o+=`${a.name} WHERE last_modified > `,o+=`${n};`,s=await CD.queryAll(e,o,[]),1!=s.length)break;const c=s[0].mcount;t=0===c?"No":l===c?"Create":"Modified";r[a.name]=t}return i.length>0?Promise.reject(new Error(i)):Promise.resolve(r)}catch(r){return Promise.reject(new Error(`GetTableModified: ${r.message}`))}}static async getSynchroDate(e){try{const t="SELECT sync_date FROM sync_table WHERE id = 1;",n=await CD.queryAll(e,t,[]);return Promise.resolve(n[0].sync_date)}catch(t){const e=`GetSynchroDate: ${t.message}`;return Promise.reject(new Error(e))}}static async getLastExportDate(e){try{const t="SELECT sync_date FROM sync_table WHERE id = 2;",n=await CD.queryAll(e,t,[]);return 0===n.length?Promise.resolve(-1):Promise.resolve(n[0].sync_date)}catch(t){const e=`getLastExport: ${t.message}`;return Promise.reject(new Error(e))}}static async setLastExportDate(e,t){try{if(!(await CD.isTableExists(e,"sync_table")))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(t).getTime()/1e3);let i="";i=await ND.getLastExportDate(e)>0?`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:`INSERT INTO sync_table (sync_date) VALUES (${n});`;return await CD.execute(e,i,!1)<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(n){return{result:!1,message:`setLastExportDate failed: ${n.message}`}}}static async delExportedRows(e){let t;try{if(!(await CD.isTableExists(e,"sync_table")))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(t=await ND.getLastExportDate(e),t<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=await CD.getTableList(e);if(0===n.length)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const i of n){let n=-1;const r=`DELETE FROM ${i}\n              WHERE sql_deleted = 1 AND last_modified < ${t};`;if(n=await CD.run(e,r,[],!0,"no"),n<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(n){return Promise.reject(new Error(`DelExportedRows failed: ${n.message}`))}}static async modEmbeddedParentheses(e){const t=ND.indexOfChar(e,"("),n=ND.indexOfChar(e,")");if(t.length!=n.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(0===t.length)return Promise.resolve(e);let i=e.substring(0,t[0]-1);for(let r=0;r<t.length;r++){let a;r<t.length-1&&t[r+1]<n[r]?(a=e.substring(t[r]-1,n[r+1]),r++):a=e.substring(t[r]-1,n[r]);i+=a.replace(/,/g,""),r<t.length-1&&(i+=e.substring(n[r],t[r+1]-1))}return i+=e.substring(n[n.length-1],e.length),Promise.resolve(i)}static indexOfChar(e,t){let n=[...e];return t=t.toLowerCase(),n.reduce(((e,n,i)=>n.toLowerCase()===t?[...e,i]:e),[])}}class kD{static async onUpgrade(e,t,n,i){let r=-1;const a=new Int32Array(Object.keys(t).map((e=>parseInt(e)))).sort();for(const s of a)if(s>n&&s<=i){const n=t[s].statements;if(0===n.length)return Promise.reject("onUpgrade: statements not given");try{await CD.setForeignKeyConstraintsEnabled(e.mDb,!1);const t=await CD.dbChanges(e.mDb);await kD.executeStatementsProcess(e,n),await CD.setVersion(e.mDb,s),await CD.setForeignKeyConstraintsEnabled(e.mDb,!0),r=await CD.dbChanges(e.mDb)-t}catch(o){return Promise.reject(new Error(`onUpgrade: ${o.message}`))}}return Promise.resolve(r)}static async executeStatementsProcess(e,t){try{await CD.beginTransaction(e.mDb,!0),e.setIsTransActive(!0);for(const n of t)await CD.execute(e.mDb,n,!1);return await CD.commitTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.resolve()}catch(n){return await CD.rollbackTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${n}`)}}}class AD{constructor(e,t,n,i,r,a){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=e,this.store=i,this.version=t,this.mDb=null,this.vUpgDict=n,this._isDBOpen=!1,this.autoSave=r,this.wasmPath=a}async open(){const e={locateFile:e=>`${this.wasmPath}/${e}`};return new Promise(((t,n)=>{try{bD(e).then((async e=>{const i=await yD.getDBFromStore(this.dbName,this.store);null!=i?this.mDb=new e.Database(i):(this.mDb=new e.Database,await yD.setInitialDBToStore(this.dbName,this.store)),this._isDBOpen=!0;let r=await CD.getVersion(this.mDb);if(this.version>r&&Object.keys(this.vUpgDict).length>0)try{await yD.isDBInStore(this.dbName,this.store)&&(await yD.copyDBToStore(this.dbName,`backup-${this.dbName}`,this.store),this.isBackup=!0);if(-1===await kD.onUpgrade(this,this.vUpgDict,r,this.version))try{this.isBackup&&await yD.restoreDBFromStore(this.dbName,"backup",this.store)}catch(a){return n(new Error(`Open: ${a.message}`))}this.isBackup&&await yD.removeDBFromStore(`backup-${this.dbName}`,this.store)}catch(a){try{this.isBackup&&await yD.restoreDBFromStore(this.dbName,"backup",this.store)}catch(a){return n(new Error(`Open: ${a.message}`))}}if(this.autoSave)try{await this.saveToStore()}catch(a){return this._isDBOpen=!1,n(`Open: ${a}`)}return await CD.setForeignKeyConstraintsEnabled(this.mDb,!0),t()}))}catch(i){return this._isDBOpen=!1,n(`in open ${i}`)}}))}isDBOpen(){return this._isDBOpen}async close(){if(null!=this.mDb&&this._isDBOpen)try{await this.saveToStore(!1),this.mDb.close(),this._isDBOpen=!1}catch(e){return this._isDBOpen=!1,Promise.reject(`in close ${e}`)}return Promise.resolve()}async saveToStore(e=!0){if(null!=this.mDb&&this._isDBOpen)try{await yD.setDBToStore(this.mDb,this.dbName,this.store),e&&await CD.setForeignKeyConstraintsEnabled(this.mDb,!0)}catch(t){return Promise.reject(`in saveToStore ${t}`)}return Promise.resolve()}async exportDB(){try{return this.mDb.export()}catch(e){const t=e.message?e.message:e;return Promise.reject(`exportDB: ${t}`)}}async getVersion(){if(null!=this.mDb&&this._isDBOpen)try{const e=await CD.getVersion(this.mDb);return Promise.resolve(e)}catch(e){return this._isDBOpen=!1,Promise.reject(`in getVersion ${e}`)}}async isDBExists(e){try{const t=await yD.isDBInStore(e,this.store);return Promise.resolve(t)}catch(t){return Promise.reject(`in isDBExists ${t}`)}}async deleteDB(e){try{const t=await this.isDBExists(e);return t&&!this._isDBOpen&&await this.open(),await this.close(),t&&await yD.removeDBFromStore(e,this.store),Promise.resolve()}catch(t){return Promise.reject(new Error(`DeleteDB: ${t.message}`))}}async beginTransaction(){if(!this._isDBOpen){let e=`BeginTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await CD.beginTransaction(this.mDb,!0),this.setIsTransActive(!0),0}catch(e){let t=`BeginTransaction: ${e.message}`;return Promise.reject(new Error(`${t}`))}}async commitTransaction(){if(!this._isDBOpen){let e=`CommitTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await CD.commitTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`CommitTransaction: ${e.message}`;return Promise.reject(new Error(`${t}`))}}async rollbackTransaction(){if(!this._isDBOpen){let e=`RollbackTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await CD.rollbackTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`RollbackTransaction: ${e.message}`;return Promise.reject(new Error(`${t}`))}}isTransActive(){return this.isTransactionActive}setIsTransActive(e){this.isTransactionActive=e}async executeSQL(e,t=!0){if(!this._isDBOpen){let e=`ExecuteSQL: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}let n=-1;try{n=await CD.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(i){let e=`executeSQL: ${i.message}`;return Promise.reject(new Error(`${e}`))}try{if(await CD.execute(this.mDb,e,!1)<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const i=await CD.dbChanges(this.mDb)-n;return Promise.resolve(i)}catch(i){let e=`ExecuteSQL: ${i.message}`;try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(i){e+=` : ${i.message}`}return Promise.reject(new Error(`ExecuteSQL: ${e}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave)try{await this.saveToStore()}catch(i){return this._isDBOpen=!1,Promise.reject(`ExecuteSQL: ${i}`)}}}async execSet(e,t=!0,n="no"){if(!this._isDBOpen){let e=`ExecSet: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}const i={changes:-1,lastId:-1};let r=-1;try{r=await CD.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(a){let e=`ExecSet: ${a.message}`;return Promise.reject(new Error(`${e}`))}try{const a=await CD.executeSet(this.mDb,e,!1,n);let o=a.lastId;if(o<0)return Promise.reject(new Error("ExecSet: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const s=await CD.dbChanges(this.mDb)-r;return i.changes=s,i.lastId=o,i.values=a.values?a.values:[],Promise.resolve(i)}catch(a){let e=`ExecSet: ${a.message}`;try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(a){e+=` : ${a.message}`}return Promise.reject(new Error(`ExecSet: ${e}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave)try{await this.saveToStore()}catch(a){return this._isDBOpen=!1,Promise.reject(`ExecSet: ${a}`)}}}async selectSQL(e,t){if(!this._isDBOpen){let e=`SelectSQL: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let n=await CD.queryAll(this.mDb,e,t);return Promise.resolve(n)}catch(n){return Promise.reject(new Error(`SelectSQL: ${n.message}`))}}async runSQL(e,t,n=!0,i){let r=-1;if(!this._isDBOpen){let e=`RunSQL: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}const a={changes:-1,lastId:-1};let o=-1;try{o=await CD.dbChanges(this.mDb),n&&!this.isTransactionActive&&await this.beginTransaction()}catch(s){let e=`RunSQL: ${s.message}`;return Promise.reject(new Error(`${e}`))}try{const s=await CD.run(this.mDb,e,t,!1,i);if(r=s.lastId,r<0)return Promise.reject(new Error("RunSQL: lastId < 0"));n&&this.isTransactionActive&&await this.commitTransaction();const l=await CD.dbChanges(this.mDb)-o;return a.changes=l,a.lastId=r,a.values=s.values?s.values:[],Promise.resolve(a)}catch(s){let e=`RunSQL: ${s.message}`;try{n&&this.isTransactionActive&&await this.rollbackTransaction()}catch(s){e+=` : ${s.message}`}return Promise.reject(new Error(`${e}`))}finally{if(n&&this.setIsTransActive(!1),this.autoSave)try{await this.saveToStore()}catch(s){return this._isDBOpen=!1,Promise.reject(`ExecSet: ${s}`)}}}async getTableNames(){if(!this._isDBOpen){let e=`GetTableNames: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=await CD.getTableList(this.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`GetTableNames: ${e.message}`))}}async isTable(e){if(!this._isDBOpen){let e=`isTable: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{const t=await CD.isTableExists(this.mDb,e);return Promise.resolve(t)}catch(t){const e=`IsTable: ${t.message}`;return Promise.reject(new Error(e))}}async createSyncTable(){if(!this._isDBOpen){let e=`createSyncTable: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}let e=-1;try{if(await CD.isTableExists(this.mDb,"sync_table"))return Promise.resolve(0);{const t=await CD.isLastModified(this.mDb,this._isDBOpen),n=await CD.isSqlDeleted(this.mDb,this._isDBOpen);if(t&&n){const t=Math.round((new Date).getTime()/1e3);let n="\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );";return n+=`INSERT INTO sync_table (sync_date) VALUES (\n                              "${t}");`,e=await CD.execute(this.mDb,n,!1),Promise.resolve(e)}return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(t){const e=`CreateSyncTable: ${t.message}`;return Promise.reject(new Error(e))}}async getSyncDate(){if(!this._isDBOpen){let e=`getSyncDate: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!(await CD.isTableExists(this.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const e=await ND.getSynchroDate(this.mDb);return Promise.resolve(e)}catch(e){const t=`getSyncDate: ${e.message}`;return Promise.reject(new Error(t))}}async setSyncDate(e){if(!this._isDBOpen){let e=`SetSyncDate: Database ${this.dbName} `;return e+="not opened",{result:!1,message:e}}try{if(!(await CD.isTableExists(this.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const t=Math.round(new Date(e).getTime()/1e3);let n="UPDATE sync_table SET sync_date = ";n+=`${t} WHERE id = 1;`;return await CD.execute(this.mDb,n,!1)<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(t){return{result:!1,message:`setSyncDate failed: ${t.message}`}}}async importJson(e,t){let n=0;if(!this._isDBOpen)return Promise.reject(new Error("ImportJson: database is closed"));try{if(await CD.setForeignKeyConstraintsEnabled(this.mDb,!1),e.tables&&e.tables.length>0){n=await SD.createDatabaseSchema(this,e);let i=`Schema creation completed changes: ${n}`;if(t.emit({progress:i}),-1!=n){n+=await SD.createTablesData(this,e,t);let i=`Tables data creation completed changes: ${n}`;t.emit({progress:i})}}return e.views&&e.views.length>0&&(n+=await SD.createViews(this,e)),await CD.setForeignKeyConstraintsEnabled(this.mDb,!0),await this.saveToStore(),Promise.resolve(n)}catch(i){return Promise.reject(new Error(`ImportJson: ${i.message}`))}}async exportJson(e,t){const n={};if(n.database=this.dbName.slice(0,-9),n.version=this.version,n.encrypted=!1,n.mode=e,!this._isDBOpen)return Promise.reject(new Error("ExportJson: database is closed"));try{await CD.isTableExists(this.mDb,"sync_table")&&await ND.setLastExportDate(this.mDb,(new Date).toISOString());const e=await ND.createExportObject(this.mDb,n,t);if(0===Object.keys(e).length){const e="ExportJson: return Object is empty No data to synchronize";return Promise.reject(new Error(e))}return wD.isJsonSQLite(e)?Promise.resolve(e):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(i){return Promise.reject(new Error(`ExportJson: ${i.message}`))}}async deleteExportedRows(){if(!this._isDBOpen)return Promise.reject(new Error("deleteExportedRows: database is closed"));try{return await ND.delExportedRows(this.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error(`deleteExportedRows: ${e.message}`))}}}var _D=YI((function(e,t){
/*!
                localForage -- Offline Storage, Improved
                Version 1.10.0
                https://localforage.github.io/localForage
                (c) 2013-2017 Mozilla, Apache License 2.0
            */
e.exports=function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){if(!s&&XI)return XI();if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){var n=t[o][1][e];return r(n||e)}),c,c.exports,e,t,n,i)}return n[o].exports}for(var a=XI,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){(function(e){var n,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var a=0,o=new r(u),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;i=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}function d(e){1!==c.push(e)||i||n()}t.exports=d}).call(this,void 0!==GI?GI:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var i=e(1);function r(){}var a={},o=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){i((function(){var i;try{i=t(n)}catch(RD){return a.reject(e,RD)}i===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,i)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function i(t){n||(n=!0,a.reject(e,t))}function r(t){n||(n=!0,a.resolve(e,t))}function o(){t(r,i)}var s=m(o);"error"===s.status&&i(s.value)}function m(e,t){var n={};try{n.value=e(t),n.status="success"}catch(RD){n.status="error",n.value=RD}return n}function f(e){return e instanceof this?e:a.resolve(new this(r),e)}function g(e){var t=new this(r);return a.reject(t,e)}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,l=-1,c=new this(r);++l<n;)u(e[l],l);return c;function u(e,r){function l(e){o[r]=e,++s!==n||i||(i=!0,a.resolve(c,o))}t.resolve(e).then(l,(function(e){i||(i=!0,a.reject(c,e))}))}}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=-1,s=new this(r);++o<n;)l(e[o]);return s;function l(e){t.resolve(e).then((function(e){i||(i=!0,a.resolve(s,e))}),(function(e){i||(i=!0,a.reject(s,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(r);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){a.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},a.resolve=function(e,t){var n=m(h,t);if("error"===n.status)return a.reject(e,n.value);var i=n.value;if(i)p(e,i);else{e.state=s,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},a.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},c.resolve=f,c.reject=g,c.all=b,c.race=y},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==GI?GI:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(RD){return}}var o=a();function s(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(RD){return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(RD){if("TypeError"!==RD.name)throw RD;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var m="local-forage-detect-blob-support",f=void 0,g={},b=Object.prototype.toString,y="readonly",v="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n),r=0;r<t;r++)i[r]=e.charCodeAt(r);return n}function E(e){return new c((function(t){var n=e.transaction(m,v),i=l([""]);n.objectStore(m).put(i,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function x(e){return"boolean"==typeof f?c.resolve(f):E(e).then((function(e){return f=e}))}function T(e){var t=g[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function C(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function S(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function N(e,t){return new c((function(n,i){if(g[e.name]=g[e.name]||D(),e.db){if(!t)return n(e.db);T(e),e.db.close()}var r=[e.name];t&&r.push(e.version);var a=o.open.apply(o,r);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(m)}catch(i){if("ConstraintError"!==i.name)throw i;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),i(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},n(t),C(e)}}))}function k(e){return N(e,!1)}function A(e){return N(e,!0)}function _(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,r=e.version>e.db.version;if(i&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||n){if(n){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function O(e){return new c((function(t,n){var i=new FileReader;i.onerror=n,i.onloadend=function(n){var i=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:i,type:e.type})},i.readAsBinaryString(e)}))}function R(e){return l([w(atob(e.data))],{type:e.type})}function P(e){return e&&e.__local_forage_encoded_blob}function M(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function $(e){T(e);for(var t=g[e.name],n=t.forages,i=0;i<n.length;i++){var r=n[i];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return e.db=null,k(e).then((function(t){return e.db=t,_(e)?A(e):t})).then((function(i){e.db=t.db=i;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=i})).catch((function(t){throw S(e,t),t}))}function I(e,t,n,i){void 0===i&&(i=1);try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(a){if(i>0&&(!e.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===a.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),A(e)})).then((function(){return $(e).then((function(){I(e,t,n,i-1)}))})).catch(n);n(a)}}function D(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(e){var t=this,n={db:null};if(e)for(var i in e)n[i]=e[i];var r=g[n.name];r||(r=D(),g[n.name]=r),r.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=M);var a=[];function o(){return c.resolve()}for(var s=0;s<r.forages.length;s++){var l=r.forages[s];l!==t&&a.push(l._initReady().catch(o))}var u=r.forages.slice(0);return c.all(a).then((function(){return n.db=r.db,k(n)})).then((function(e){return n.db=e,_(n,t._defaultConfig.version)?A(n):e})).then((function(e){n.db=r.db=e,t._dbInfo=n;for(var i=0;i<u.length;i++){var a=u[i];a!==t&&(a._dbInfo.db=n.db,a._dbInfo.version=n.version)}}))}function j(e,t){var n=this;e=h(e);var i=new c((function(t,i){n.ready().then((function(){I(n._dbInfo,y,(function(r,a){if(r)return i(r);try{var o=a.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),P(e)&&(e=R(e)),t(e)},o.onerror=function(){i(o.error)}}catch(RD){i(RD)}}))})).catch(i)}));return u(i,t),i}function q(e,t){var n=this,i=new c((function(t,i){n.ready().then((function(){I(n._dbInfo,y,(function(r,a){if(r)return i(r);try{var o=a.objectStore(n._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var n=o.result;if(n){var i=n.value;P(i)&&(i=R(i));var r=e(i,n.key,s++);void 0!==r?t(r):n.continue()}else t()},o.onerror=function(){i(o.error)}}catch(RD){i(RD)}}))})).catch(i)}));return u(i,t),i}function B(e,t,n){var i=this;e=h(e);var r=new c((function(n,r){var a;i.ready().then((function(){return a=i._dbInfo,"[object Blob]"===b.call(t)?x(a.db).then((function(e){return e?t:O(t)})):t})).then((function(t){I(i._dbInfo,v,(function(a,o){if(a)return r(a);try{var s=o.objectStore(i._dbInfo.storeName);null===t&&(t=void 0);var l=s.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=l.error?l.error:l.transaction.error;r(e)}}catch(RD){r(RD)}}))})).catch(r)}));return u(r,n),r}function F(e,t){var n=this;e=h(e);var i=new c((function(t,i){n.ready().then((function(){I(n._dbInfo,v,(function(r,a){if(r)return i(r);try{var o=a.objectStore(n._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){i(o.error)},a.onabort=function(){var e=o.error?o.error:o.transaction.error;i(e)}}catch(RD){i(RD)}}))})).catch(i)}));return u(i,t),i}function z(e){var t=this,n=new c((function(e,n){t.ready().then((function(){I(t._dbInfo,v,(function(i,r){if(i)return n(i);try{var a=r.objectStore(t._dbInfo.storeName).clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(RD){n(RD)}}))})).catch(n)}));return u(n,e),n}function U(e){var t=this,n=new c((function(e,n){t.ready().then((function(){I(t._dbInfo,y,(function(i,r){if(i)return n(i);try{var a=r.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){n(a.error)}}catch(RD){n(RD)}}))})).catch(n)}));return u(n,e),n}function V(e,t){var n=this,i=new c((function(t,i){e<0?t(null):n.ready().then((function(){I(n._dbInfo,y,(function(r,a){if(r)return i(r);try{var o=a.objectStore(n._dbInfo.storeName),s=!1,l=o.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},l.onerror=function(){i(l.error)}}catch(RD){i(RD)}}))})).catch(i)}));return u(i,t),i}function W(e){var t=this,n=new c((function(e,n){t.ready().then((function(){I(t._dbInfo,y,(function(i,r){if(i)return n(i);try{var a=r.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];a.onsuccess=function(){var t=a.result;t?(o.push(t.key),t.continue()):e(o)},a.onerror=function(){n(a.error)}}catch(RD){n(RD)}}))})).catch(n)}));return u(n,e),n}function H(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,r=this;if(e.name){var a=e.name===n.name&&r._dbInfo.db?c.resolve(r._dbInfo.db):k(e).then((function(t){var n=g[e.name],i=n.forages;n.db=t;for(var r=0;r<i.length;r++)i[r]._dbInfo.db=t;return t}));i=e.storeName?a.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;T(e);var i=g[e.name],r=i.forages;t.close();for(var a=0;a<r.length;a++){var s=r[a];s._dbInfo.db=null,s._dbInfo.version=n}var l=new c((function(t,i){var r=o.open(e.name,n);r.onerror=function(e){r.result.close(),i(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(e.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}));return l.then((function(e){i.db=e;for(var t=0;t<r.length;t++){var n=r[t];n._dbInfo.db=e,C(n._dbInfo)}})).catch((function(t){throw(S(e,t)||c.resolve()).catch((function(){})),t}))}})):a.then((function(t){T(e);var n=g[e.name],i=n.forages;t.close();for(var r=0;r<i.length;r++)i[r]._dbInfo.db=null;var a=new c((function(t,n){var i=o.deleteDatabase(e.name);i.onerror=function(){var e=i.result;e&&e.close(),n(i.error)},i.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},i.onsuccess=function(){var e=i.result;e&&e.close(),t(e)}}));return a.then((function(e){n.db=e;for(var t=0;t<i.length;t++)C(i[t]._dbInfo)})).catch((function(t){throw(S(e,t)||c.resolve()).catch((function(){})),t}))}))}else i=c.reject("Invalid arguments");return u(i,t),i}var Q={_driver:"asyncStorage",_initStorage:L,_support:s(),iterate:q,getItem:j,setItem:B,removeItem:F,clear:z,length:U,key:V,keys:W,dropInstance:H};function K(){return"function"==typeof openDatabase}var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Z=X.length,ee="arbf",te="blob",ne="si08",ie="ui08",re="uic8",ae="si16",oe="si32",se="ur16",le="ui32",ce="fl32",ue="fl64",de=Z+ee.length,he=Object.prototype.toString;function pe(e){var t,n,i,r,a,o=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),u=new Uint8Array(c);for(t=0;t<s;t+=4)n=G.indexOf(e[t]),i=G.indexOf(e[t+1]),r=G.indexOf(e[t+2]),a=G.indexOf(e[t+3]),u[l++]=n<<2|i>>4,u[l++]=(15&i)<<4|r>>2,u[l++]=(3&r)<<6|63&a;return c}function me(e){var t,n=new Uint8Array(e),i="";for(t=0;t<n.length;t+=3)i+=G[n[t]>>2],i+=G[(3&n[t])<<4|n[t+1]>>4],i+=G[(15&n[t+1])<<2|n[t+2]>>6],i+=G[63&n[t+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}function fe(e,t){var n="";if(e&&(n=he.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var i,r=X;e instanceof ArrayBuffer?(i=e,r+=ee):(i=e.buffer,"[object Int8Array]"===n?r+=ne:"[object Uint8Array]"===n?r+=ie:"[object Uint8ClampedArray]"===n?r+=re:"[object Int16Array]"===n?r+=ae:"[object Uint16Array]"===n?r+=se:"[object Int32Array]"===n?r+=oe:"[object Uint32Array]"===n?r+=le:"[object Float32Array]"===n?r+=ce:"[object Float64Array]"===n?r+=ue:t(new Error("Failed to get type for BinaryArray"))),t(r+me(i))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=Y+e.type+"~"+me(this.result);t(X+te+n)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(RD){console.error("Couldn't convert value into a JSON string: ",e),t(null,RD)}}function ge(e){if(e.substring(0,Z)!==X)return JSON.parse(e);var t,n=e.substring(de),i=e.substring(Z,de);if(i===te&&J.test(n)){var r=n.match(J);t=r[1],n=n.substring(r[0].length)}var a=pe(n);switch(i){case ee:return a;case te:return l([a],{type:t});case ne:return new Int8Array(a);case ie:return new Uint8Array(a);case re:return new Uint8ClampedArray(a);case ae:return new Int16Array(a);case se:return new Uint16Array(a);case oe:return new Int32Array(a);case le:return new Uint32Array(a);case ce:return new Float32Array(a);case ue:return new Float64Array(a);default:throw new Error("Unkown type: "+i)}}var be={serialize:fe,deserialize:ge,stringToBuffer:pe,bufferToString:me};function ye(e,t,n,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function ve(e){var t=this,n={db:null};if(e)for(var i in e)n[i]="string"!=typeof e[i]?e[i].toString():e[i];var r=new c((function(e,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(RD){return i(RD)}n.db.transaction((function(r){ye(r,n,(function(){t._dbInfo=n,e()}),(function(e,t){i(t)}))}),i)}));return n.serializer=be,r}function we(e,t,n,i,r,a){e.executeSql(n,i,r,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?a(e,o):ye(e,t,(function(){e.executeSql(n,i,r,a)}),a)}),a):a(e,o)}),a)}function Ee(e,t){var n=this;e=h(e);var i=new c((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return u(i,t),i}function xe(e,t){var n=this,i=new c((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT * FROM "+r.storeName,[],(function(n,i){for(var a=i.rows,o=a.length,s=0;s<o;s++){var l=a.item(s),c=l.value;if(c&&(c=r.serializer.deserialize(c)),void 0!==(c=e(c,l.key,s+1)))return void t(c)}t()}),(function(e,t){i(t)}))}))})).catch(i)}));return u(i,t),i}function Te(e,t,n,i){var r=this;e=h(e);var a=new c((function(a,o){r.ready().then((function(){void 0===t&&(t=null);var s=t,l=r._dbInfo;l.serializer.serialize(t,(function(t,c){c?o(c):l.db.transaction((function(n){we(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){a(s)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(i>0)return void a(Te.apply(r,[e,s,n,i-1]));o(t)}}))}))})).catch(o)}));return u(a,n),a}function Ce(e,t,n){return Te.apply(this,[e,t,n,1])}function Se(e,t){var n=this;e=h(e);var i=new c((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){i(t)}))}))})).catch(i)}));return u(i,t),i}function Ne(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"DELETE FROM "+i.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function ke(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],(function(t,n){var i=n.rows.item(0).c;e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ae(e,t){var n=this,i=new c((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var i=n.rows.length?n.rows.item(0).key:null;t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return u(i,t),i}function _e(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT key FROM "+i.storeName,[],(function(t,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Oe(e){return new c((function(t,n){e.transaction((function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,i){for(var r=[],a=0;a<i.rows.length;a++)r.push(i.rows.item(a).name);t({db:e,storeNames:r})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Re(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,r=this;return i=e.name?new c((function(t){var i;i=e.name===n.name?r._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:i,storeNames:[e.storeName]}):t(Oe(i))})).then((function(e){return new c((function(t,n){e.db.transaction((function(i){function r(e){return new c((function(t,n){i.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var a=[],o=0,s=e.storeNames.length;o<s;o++)a.push(r(e.storeNames[o]));c.all(a).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),u(i,t),i}var Pe={_driver:"webSQLStorage",_initStorage:ve,_support:K(),iterate:xe,getItem:Ee,setItem:Ce,removeItem:Se,clear:Ne,length:ke,key:Ae,keys:_e,dropInstance:Re};function Me(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(RD){return!1}}function $e(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Ie(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(RD){return!0}}function De(){return!Ie()||localStorage.length>0}function Le(e){var t=this,n={};if(e)for(var i in e)n[i]=e[i];return n.keyPrefix=$e(e,t._defaultConfig),De()?(t._dbInfo=n,n.serializer=be,c.resolve()):c.reject()}function je(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(e)&&localStorage.removeItem(i)}}));return u(n,e),n}function qe(e,t){var n=this;e=h(e);var i=n.ready().then((function(){var t=n._dbInfo,i=localStorage.getItem(t.keyPrefix+e);return i&&(i=t.serializer.deserialize(i)),i}));return u(i,t),i}function Be(e,t){var n=this,i=n.ready().then((function(){for(var t=n._dbInfo,i=t.keyPrefix,r=i.length,a=localStorage.length,o=1,s=0;s<a;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(r),o++)))return c}}}));return u(i,t),i}function Fe(e,t){var n=this,i=n.ready().then((function(){var t,i=n._dbInfo;try{t=localStorage.key(e)}catch(r){t=null}return t&&(t=t.substring(i.keyPrefix.length)),t}));return u(i,t),i}function ze(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,i=[],r=0;r<n;r++){var a=localStorage.key(r);0===a.indexOf(e.keyPrefix)&&i.push(a.substring(e.keyPrefix.length))}return i}));return u(n,e),n}function Ue(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function Ve(e,t){var n=this;e=h(e);var i=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(i,t),i}function We(e,t,n){var i=this;e=h(e);var r=i.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(r,a){var o=i._dbInfo;o.serializer.serialize(t,(function(t,i){if(i)a(i);else try{localStorage.setItem(o.keyPrefix+e,t),r(n)}catch(RD){"QuotaExceededError"!==RD.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==RD.name||a(RD),a(RD)}}))}))}));return u(r,n),r}function He(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var i,r=this;return i=e.name?new c((function(t){e.storeName?t($e(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),u(i,t),i}var Qe={_driver:"localStorageWrapper",_initStorage:Le,_support:Me(),iterate:Be,getItem:qe,setItem:We,removeItem:Ve,clear:je,length:Ue,key:Fe,keys:ze,dropInstance:He},Ke=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ge=function(e,t){for(var n=e.length,i=0;i<n;){if(Ke(e[i],t))return!0;i++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Xe={},Ze={INDEXEDDB:Q,WEBSQL:Pe,LOCALSTORAGE:Qe},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),it={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rt(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function at(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ye(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ot=function(){function e(t){for(var n in r(this,e),Ze)if(Ze.hasOwnProperty(n)){var i=Ze[n],a=i._driver;this[n]=a,Je[a]||this.defineDriver(i)}this._defaultConfig=at({},it),this._config=at({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":i(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var i=new c((function(t,n){try{var i=e._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(r);for(var a=nt.concat("_initStorage"),o=0,s=a.length;o<s;o++){var l=a[o];if((!Ge(tt,l)||e[l])&&"function"!=typeof e[l])return void n(r)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,i=tt.length;n<i;n++){var r=tt[n];e[r]||(e[r]=t(r))}};d();var h=function(n){Je[i]&&console.info("Redefining LocalForage driver: "+i),Je[i]=e,Xe[i]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(RD){n(RD)}}));return d(i,t,n),i},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var i=Je[e]?c.resolve(Je[e]):c.reject(new Error("Driver not found."));return d(i,t,n),i},e.prototype.getSerializer=function(e){var t=c.resolve(be);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var i=this;Ye(e)||(e=[e]);var r=this._getSupportedDrivers(e);function a(){i._config.driver=i.driver()}function o(e){return i._extend(e),a(),i._ready=i._initStorage(i._config),i._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var r=e[t];return t++,i._dbInfo=null,i._ready=null,i.getDriver(r).then(o).catch(n)}a();var s=new Error("No available storage method found.");return i._driverSet=c.reject(s),i._driverSet}return n()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then((function(e){i._driver=e._driver,a(),i._wrapLibraryMethodsWithReady(),i._initDriver=s(r)}))})).catch((function(){a();var e=new Error("No available storage method found.");return i._driverSet=c.reject(e),i._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){at(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];this.supports(r)&&t.push(r)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)rt(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new ot;t.exports=st},{3:3}]},{},[4])(4)})),OD=YI((function(e,t){
/*!

            JSZip v3.10.1 - A JavaScript class for generating and reading zip files
            <http://stuartk.com/jszip>

            (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
            Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

            JSZip uses the library pako released under the MIT license :
            https://github.com/nodeca/pako/blob/main/LICENSE
            */
e.exports=function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){if(!s&&XI)return XI();if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return r(t[o][1][e]||e)}),c,c.exports,e,t,n,i)}return n[o].exports}for(var a=XI,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){var i=e("./utils"),r=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,r,o,s,l,c,u=[],d=0,h=e.length,p=h,m="string"!==i.getTypeOf(e);d<e.length;)p=h-d,r=m?(t=e[d++],n=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),n=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),o=t>>2,s=(3&t)<<4|n>>4,l=1<p?(15&n)<<2|r>>6:64,c=2<p?63&r:64,u.push(a.charAt(o)+a.charAt(s)+a.charAt(l)+a.charAt(c));return u.join("")},n.decode=function(e){var t,n,i,o,s,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&p--,e.charAt(e.length-2)===a.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=r.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=a.indexOf(e.charAt(c++))<<2|(o=a.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(s=a.indexOf(e.charAt(c++)))>>2,i=(3&s)<<6|(l=a.indexOf(e.charAt(c++))),h[u++]=t,64!==s&&(h[u++]=n),64!==l&&(h[u++]=i);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){var i=e("./external"),r=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function s(e,t,n,i,r){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=i,this.compressedContent=r}s.prototype={getContentWorker:function(){var e=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){var i=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){var i=e("./utils"),r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){var i=null;i="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:i}},{lie:37}],7:[function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=e("pako"),a=e("./utils"),o=e("./stream/GenericWorker"),s=i?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",a.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){function i(e,t){var n,i="";for(n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i}function r(e,t,n,r,o,u){var d,h,p=e.file,m=e.compression,f=u!==s.utf8encode,g=a.transformTo("string",u(p.name)),b=a.transformTo("string",s.utf8encode(p.name)),y=p.comment,v=a.transformTo("string",u(y)),w=a.transformTo("string",s.utf8encode(y)),E=b.length!==p.name.length,x=w.length!==y.length,T="",C="",S="",N=p.dir,k=p.date,A={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(A.crc32=e.crc32,A.compressedSize=e.compressedSize,A.uncompressedSize=e.uncompressedSize);var _=0;t&&(_|=8),f||!E&&!x||(_|=2048);var O=0,R=0;N&&(O|=16),"UNIX"===o?(R=798,O|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(p.unixPermissions,N)):(R=20,O|=function(e){return 63&(e||0)}(p.dosPermissions)),d=k.getUTCHours(),d<<=6,d|=k.getUTCMinutes(),d<<=5,d|=k.getUTCSeconds()/2,h=k.getUTCFullYear()-1980,h<<=4,h|=k.getUTCMonth()+1,h<<=5,h|=k.getUTCDate(),E&&(C=i(1,1)+i(l(g),4)+b,T+="up"+i(C.length,2)+C),x&&(S=i(1,1)+i(l(v),4)+w,T+="uc"+i(S.length,2)+S);var P="";return P+="\n\0",P+=i(_,2),P+=m.magic,P+=i(d,2),P+=i(h,2),P+=i(A.crc32,4),P+=i(A.compressedSize,4),P+=i(A.uncompressedSize,4),P+=i(g.length,2),P+=i(T.length,2),{fileRecord:c.LOCAL_FILE_HEADER+P+g+T,dirRecord:c.CENTRAL_FILE_HEADER+i(R,2)+P+i(v.length,2)+"\0\0\0\0"+i(O,4)+i(r,4)+g+T+v}}var a=e("../utils"),o=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,i){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(u,o),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-i-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=r(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=r(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+i(e.crc32,4)+i(e.compressedSize,4)+i(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,r=function(e,t,n,r,o){var s=a.transformTo("string",o(r));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(e,2)+i(e,2)+i(t,4)+i(n,4)+i(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){var i=e("../compressions"),r=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var a=new r(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,n){o++;var r=function(e,t){var n=e||t,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(r,s).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(a)})),a.entriesCount=o}catch(e){a.error(e)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(e,t){return(new i).loadAsync(e,t)},i.external=e("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){var i=e("./utils"),r=e("./external"),a=e("./utf8"),o=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new r.Promise((function(t,n){var i=e.decompressed.getContentWorker().pipe(new s);i.on("error",(function(e){n(e)})).on("end",(function(){i.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new o(t);return n.load(e),n})).then((function(e){var n=[r.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var a=0;a<i.length;a++)n.push(c(i[a]));return r.Promise.all(n)})).then((function(e){for(var r=e.shift(),a=r.files,o=0;o<a.length;o++){var s=a[o],l=s.fileNameStr,c=i.resolve(s.fileNameStr);n.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(c).unsafeOriginalName=l)}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){var i=e("../utils"),r=e("../stream/GenericWorker");function a(e,t){r.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}i.inherits(a,r),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},a.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){var i=e("readable-stream").Readable;function r(e,t,n){i.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),n&&n(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}e("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){t.exports={isNode:void 0!==dI,newBufferFrom:function(e,t){if(dI.from&&dI.from!==Uint8Array.from)return dI.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new dI(e,t)},allocBuffer:function(e){if(dI.alloc)return dI.alloc(e);var t=new dI(e);return t.fill(0),t},isBuffer:function(e){return dI.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){function i(e,t,n){var i,r=a.getTypeOf(t),s=a.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=f(e)),s.createFolders&&(i=m(e))&&g.call(this,i,!0);var d="string"===r&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!d),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",r="string");var b=null;b=t instanceof c||t instanceof o?t:h.isNode&&h.isStream(t)?new p(e,t):a.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new u(e,b,s);this.files[e]=y}var r=e("./utf8"),a=e("./utils"),o=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},f=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=f(e),this.files[e]||i.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function b(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,i;for(t in this.files)i=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,i)},filter:function(e){var t=[];return this.forEach((function(n,i){e(n,i)&&t.push(i)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,i.call(this,e,t,n),this;if(b(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(b(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),i=this.clone();return i.root=n.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");a.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";t=d.generateWorker(this,n,i)}catch(e){(t=new o("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){var i=e("./DataReader");function r(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(r,i),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===i&&this.data[a+3]===r)return a-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&n===a[1]&&i===a[2]&&r===a[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){var i=e("../utils");function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=r},{"../utils":32}],19:[function(e,t,n){var i=e("./Uint8ArrayReader");function r(e){i.call(this,e)}e("../utils").inherits(r,i),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){var i=e("./DataReader");function r(e){i.call(this,e)}e("../utils").inherits(r,i),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){var i=e("./ArrayReader");function r(e){i.call(this,e)}e("../utils").inherits(r,i),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){var i=e("../utils"),r=e("../support"),a=e("./ArrayReader"),o=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||r.uint8array?"nodebuffer"===t?new s(e):r.uint8array?new l(i.transformTo("uint8array",e)):new a(i.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){var i=e("./GenericWorker"),r=e("../utils");function a(e){i.call(this,"ConvertWorker to "+e),this.destType=e}r.inherits(a,i),a.prototype.processChunk=function(e){this.push({data:r.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){var i=e("./GenericWorker"),r=e("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,i),a.prototype.processChunk=function(e){this.streamInfo.crc32=r(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){var i=e("../utils"),r=e("./GenericWorker");function a(e){r.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}i.inherits(a,r),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}r.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){var i=e("../utils"),r=e("./GenericWorker");function a(e){r.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}i.inherits(a,r),a.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=i},{}],29:[function(e,t,n){var i=e("../utils"),r=e("./ConvertWorker"),a=e("./GenericWorker"),o=e("../base64"),s=e("../support"),l=e("../external"),c=null;if(s.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t){return new l.Promise((function(n,r){var a=[],s=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){a.push(e),t&&t(n)})).on("error",(function(e){a=[],r(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return i.transformTo(e,t)}}(l,function(e,t){var n,i=0,r=null,a=0;for(n=0;n<t.length;n++)a+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(r=new Uint8Array(a),n=0;n<t.length;n++)r.set(t[n],i),i+=t[n].length;return r;case"nodebuffer":return dI.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,a),c);n(e)}catch(e){r(e)}a=[]})).resume()}))}function d(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,i.checkSupport(o),this._worker=e.pipe(new r(o)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==dI,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),n.blob=0===r.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){for(var i=e("./utils"),r=e("./support"),a=e("./nodejsUtils"),o=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return r.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,n,i,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=r.uint8array?new Uint8Array(l):new Array(l),a=o=0;o<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return r.nodebuffer?i.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,r,a,o=e.length,l=new Array(2*o);for(t=n=0;t<o;)if((r=e[t++])<128)l[n++]=r;else if(4<(a=s[r]))l[n++]=65533,t+=a-1;else{for(r&=2===a?31:3===a?15:7;1<a&&t<o;)r=r<<6|63&e[t++],a--;1<a?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)}(e=i.transformTo(r.uint8array?"uint8array":"array",e))},i.inherits(c,o),c.prototype.processChunk=function(e){var t=i.transformTo(r.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),l=t;o!==t.length&&(r.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,i.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){var i=e("./support"),r=e("./base64"),a=e("./nodejsUtils"),o=e("./external");function s(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(t,i){n.checkSupport("blob");try{return new Blob([t],{type:i})}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(i)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var i=[],r=0,a=e.length;if(a<=n)return String.fromCharCode.apply(null,e);for(;r<a;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(r,Math.min(r+n,a)))):i.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+n,a)))),r+=n;return i.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,i=n.getTypeOf(e),r=!0;if("uint8array"===i?r=c.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=c.applyCanBeUsed.nodebuffer),r)for(;1<t;)try{return c.stringifyByChunk(e,i,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var h={};h.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,a.allocBuffer(e.length))}},h.array={string:u,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},h.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return a.newBufferFrom(e)}},h.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var i=n.getTypeOf(t);return h[i][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],i=0;i<t.length;i++){var r=t[i];"."===r||""===r&&0!==i&&i!==t.length-1||(".."===r?n.pop():n.push(r))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":i.nodebuffer&&a.isBuffer(e)?"nodebuffer":i.uint8array&&e instanceof Uint8Array?"uint8array":i.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!i[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,i="";for(n=0;n<(e||"").length;n++)i+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return i},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,a,s,c){return o.Promise.resolve(t).then((function(e){return i.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,n){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){n(e.target.error)},i.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(c?t=r.decode(t):a&&!0!==s&&(t=function(e){return l(e,i.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){var i=e("./reader/readerFor"),r=e("./utils"),a=e("./signature"),o=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(t)+", expected "+r.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===t;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=r.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=t-n;if(0<i)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){var i=e("./reader/readerFor"),r=e("./utils"),a=e("./compressedObject"),o=e("./crc32"),s=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,i,r=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<r;)t=e.readInt(2),n=e.readInt(2),i=e.readData(n),this.extraFields[t]={id:t,length:n,value:i};e.setIndex(r)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var a=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){function i(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),o=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");i.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!i&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&i&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new r(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)i.prototype[c[d]]=u;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){var n,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var a=0,o=new r(u),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;i=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}t.exports=function(e){1!==c.push(e)||i||n()}}).call(this,void 0!==GI?GI:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){var i=e("immediate");function r(){}var a={},o=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){i((function(){var i;try{i=t(n)}catch(i){return a.reject(e,i)}i===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,i)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function i(t){n||(n=!0,a.reject(e,t))}function r(t){n||(n=!0,a.resolve(e,t))}var o=m((function(){t(r,i)}));"error"===o.status&&i(o.value)}function m(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(r);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){a.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},a.resolve=function(e,t){var n=m(h,t);if("error"===n.status)return a.reject(e,n.value);var i=n.value;if(i)p(e,i);else{e.state=s,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},a.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:a.resolve(new this(r),e)},c.reject=function(e){var t=new this(r);return a.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,l=-1,c=new this(r);++l<n;)u(e[l],l);return c;function u(e,r){t.resolve(e).then((function(e){o[r]=e,++s!==n||i||(i=!0,a.resolve(c,o))}),(function(e){i||(i=!0,a.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o,s=-1,l=new this(r);++s<n;)o=e[s],t.resolve(o).then((function(e){i||(i=!0,a.resolve(l,e))}),(function(e){i||(i=!0,a.reject(l,e))}));return l}},{immediate:36}],38:[function(e,t,n){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){var i=e("./zlib/deflate"),r=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,h=8;function p(e){if(!(this instanceof p))return new p(e);this.options=r.assign({level:u,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var m;if(m="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=i.deflateSetDictionary(this.strm,m))!==c)throw new Error(o[n]);this._dict_set=!0}}function m(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}p.prototype.push=function(e,t){var n,o,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=i.deflate(s,o))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===o?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),!(s.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=p,n.deflate=m,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,m(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,m(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){var i=e("./zlib/inflate"),r=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);this.header=new c,i.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,l,c,d,h,p=this.strm,m=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?p.input=a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(m),p.next_out=0,p.avail_out=m),(n=i.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&f&&(h="string"==typeof f?a.string2buf(f):"[object ArrayBuffer]"===u.call(f)?new Uint8Array(f):f,n=i.inflateSetDictionary(this.strm,h)),n===o.Z_BUF_ERROR&&!0===g&&(n=o.Z_OK,g=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==o.Z_STREAM_END&&(0!==p.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(p.output,p.next_out),c=p.next_out-l,d=a.buf2string(p.output,l),p.next_out=c,p.avail_out=m-c,c&&r.arraySet(p.output,p.output,l,c,0),this.onData(d)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var a=0;a<i;a++)e[r+a]=t[n+a]},flattenChunks:function(e){var t,n,i,r,a,o;for(t=i=0,n=e.length;t<n;t++)i+=e[t].length;for(o=new Uint8Array(i),t=r=0,n=e.length;t<n;t++)a=e[t],o.set(a,r),r+=a.length;return o}},a={arraySet:function(e,t,n,i,r){for(var a=0;a<i;a++)e[r+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(i)},{}],42:[function(e,t,n){var i=e("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new i.Buf8(256),s=0;s<256;s++)o[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,r,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),a=o=0;o<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,i,r,a,s=t||e.length,c=new Array(2*s);for(n=i=0;n<s;)if((r=e[n++])<128)c[i++]=r;else if(4<(a=o[r]))c[i++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;1<a&&n<s;)r=r<<6|63&e[n++],a--;1<a?c[i++]=65533:r<65536?c[i++]=r:(r-=65536,c[i++]=55296|r>>10&1023,c[i++]=56320|1023&r)}return l(c,i)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){t.exports=function(e,t,n,i){for(var r=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;a=a+(r=r+t[i++]|0)|0,--o;);r%=65521,a%=65521}return r|a<<16|0}},{}],44:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){var i,r=e("../utils/common"),a=e("./trees"),o=e("./adler32"),s=e("./crc32"),l=e("./messages"),c=0,u=4,d=0,h=-2,p=-1,m=4,f=2,g=8,b=9,y=286,v=30,w=19,E=2*y+1,x=15,T=3,C=258,S=C+T+1,N=42,k=113,A=1,_=2,O=3,R=4;function P(e,t){return e.msg=l[t],t}function M(e){return(e<<1)-(4<e?9:0)}function $(e){for(var t=e.length;0<=--t;)e[t]=0}function I(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function D(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,I(e.strm)}function L(e,t){e.pending_buf[e.pending++]=t}function j(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function q(e,t){var n,i,r=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-S?e.strstart-(e.w_size-S):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+C,p=c[a+o-1],m=c[a+o];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+o]===m&&c[n+o-1]===p&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<h);if(i=C-(h-a),a=h-C,o<i){if(e.match_start=t,s<=(o=i))break;p=c[a+o-1],m=c[a+o]}}}while((t=d[t&u])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead}function B(e){var t,n,i,a,l,c,u,d,h,p,m=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-S)){for(r.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;i=e.head[--t],e.head[t]=m<=i?i-m:0,--n;);for(t=n=m;i=e.prev[--t],e.prev[t]=m<=i?i-m:0,--n;);a+=m}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,p=void 0,(h=a)<(p=c.avail_in)&&(p=h),n=0===p?0:(c.avail_in-=p,r.arraySet(u,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=o(c.adler,u,p,d):2===c.state.wrap&&(c.adler=s(c.adler,u,p,d)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=T)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+T-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<T)););}while(e.lookahead<S&&0!==e.strm.avail_in)}function F(e,t){for(var n,i;;){if(e.lookahead<S){if(B(e),e.lookahead<S&&t===c)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-S&&(e.match_length=q(e,n)),e.match_length>=T)if(i=a._tr_tally(e,e.strstart-e.match_start,e.match_length-T),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=T){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(D(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<T-1?e.strstart:T-1,t===u?(D(e,!0),0===e.strm.avail_out?O:R):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?A:_}function z(e,t){for(var n,i,r;;){if(e.lookahead<S){if(B(e),e.lookahead<S&&t===c)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=T-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-S&&(e.match_length=q(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===T&&4096<e.strstart-e.match_start)&&(e.match_length=T-1)),e.prev_length>=T&&e.match_length<=e.prev_length){for(r=e.strstart+e.lookahead-T,i=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-T),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=T-1,e.strstart++,i&&(D(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((i=a._tr_tally(e,0,e.window[e.strstart-1]))&&D(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<T-1?e.strstart:T-1,t===u?(D(e,!0),0===e.strm.avail_out?O:R):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?A:_}function U(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*E),this.dyn_dtree=new r.Buf16(2*(2*v+1)),this.bl_tree=new r.Buf16(2*(2*w+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(x+1),this.heap=new r.Buf16(2*y+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*y+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=f,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?N:k,e.adler=2===t.wrap?0:1,t.last_flush=c,a._tr_init(t),d):P(e,h)}function H(e){var t=W(e);return t===d&&function(e){e.window_size=2*e.w_size,$(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=T-1,e.match_available=0,e.ins_h=0}(e.state),t}function Q(e,t,n,i,a,o){if(!e)return h;var s=1;if(t===p&&(t=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),a<1||b<a||n!==g||i<8||15<i||t<0||9<t||o<0||m<o)return P(e,h);8===i&&(i=9);var l=new V;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+T-1)/T),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,H(e)}i=[new U(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(B(e),0===e.lookahead&&t===c)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,D(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-S&&(D(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(D(e,!0),0===e.strm.avail_out?O:R):(e.strstart>e.block_start&&(D(e,!1),e.strm.avail_out),A)})),new U(4,4,8,4,F),new U(4,5,16,8,F),new U(4,6,32,32,F),new U(4,4,16,16,z),new U(8,16,32,32,z),new U(8,16,128,128,z),new U(8,32,128,256,z),new U(32,128,258,1024,z),new U(32,258,258,4096,z)],n.deflateInit=function(e,t){return Q(e,t,g,15,8,0)},n.deflateInit2=Q,n.deflateReset=H,n.deflateResetKeep=W,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,d):h},n.deflate=function(e,t){var n,r,o,l;if(!e||!e.state||5<t||t<0)return e?P(e,h):h;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&t!==u)return P(e,0===e.avail_out?-5:h);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===N)if(2===r.wrap)e.adler=0,L(r,31),L(r,139),L(r,8),r.gzhead?(L(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),L(r,255&r.gzhead.time),L(r,r.gzhead.time>>8&255),L(r,r.gzhead.time>>16&255),L(r,r.gzhead.time>>24&255),L(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),L(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(L(r,255&r.gzhead.extra.length),L(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=s(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(L(r,0),L(r,0),L(r,0),L(r,0),L(r,0),L(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),L(r,3),r.status=k);else{var p=g+(r.w_bits-8<<4)<<8;p|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(p|=32),p+=31-p%31,r.status=k,j(r,p),0!==r.strstart&&(j(r,e.adler>>>16),j(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),I(e),o=r.pending,r.pending!==r.pending_buf_size));)L(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),I(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,L(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),I(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,L(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=s(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&I(e),r.pending+2<=r.pending_buf_size&&(L(r,255&e.adler),L(r,e.adler>>8&255),e.adler=0,r.status=k)):r.status=k),0!==r.pending){if(I(e),0===e.avail_out)return r.last_flush=-1,d}else if(0===e.avail_in&&M(t)<=M(n)&&t!==u)return P(e,-5);if(666===r.status&&0!==e.avail_in)return P(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==c&&666!==r.status){var m=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(B(e),0===e.lookahead)){if(t===c)return A;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(D(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(D(e,!0),0===e.strm.avail_out?O:R):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?A:_}(r,t):3===r.strategy?function(e,t){for(var n,i,r,o,s=e.window;;){if(e.lookahead<=C){if(B(e),e.lookahead<=C&&t===c)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=T&&0<e.strstart&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){o=e.strstart+C;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);e.match_length=C-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=T?(n=a._tr_tally(e,1,e.match_length-T),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(D(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(D(e,!0),0===e.strm.avail_out?O:R):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?A:_}(r,t):i[r.level].func(r,t);if(m!==O&&m!==R||(r.status=666),m===A||m===O)return 0===e.avail_out&&(r.last_flush=-1),d;if(m===_&&(1===t?a._tr_align(r):5!==t&&(a._tr_stored_block(r,0,0,!1),3===t&&($(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),I(e),0===e.avail_out))return r.last_flush=-1,d}return t!==u?d:r.wrap<=0?1:(2===r.wrap?(L(r,255&e.adler),L(r,e.adler>>8&255),L(r,e.adler>>16&255),L(r,e.adler>>24&255),L(r,255&e.total_in),L(r,e.total_in>>8&255),L(r,e.total_in>>16&255),L(r,e.total_in>>24&255)):(j(r,e.adler>>>16),j(r,65535&e.adler)),I(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==N&&69!==t&&73!==t&&91!==t&&103!==t&&t!==k&&666!==t?P(e,h):(e.state=null,t===k?P(e,-3):d):h},n.deflateSetDictionary=function(e,t){var n,i,a,s,l,c,u,p,m=t.length;if(!e||!e.state)return h;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==N||n.lookahead)return h;for(1===s&&(e.adler=o(e.adler,t,m,0)),n.wrap=0,m>=n.w_size&&(0===s&&($(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new r.Buf8(n.w_size),r.arraySet(p,t,m-n.w_size,n.w_size,0),t=p,m=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=m,e.next_in=0,e.input=t,B(n);n.lookahead>=T;){for(i=n.strstart,a=n.lookahead-(T-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+T-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--a;);n.strstart=i,n.lookahead=T-1,B(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=T-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=s,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){t.exports=function(e,t){var n,i,r,a,o,s,l,c,u,d,h,p,m,f,g,b,y,v,w,E,x,T,C,S,N;n=e.state,i=e.next_in,S=e.input,r=i+(e.avail_in-5),a=e.next_out,N=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,p=n.hold,m=n.bits,f=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{m<15&&(p+=S[i++]<<m,m+=8,p+=S[i++]<<m,m+=8),v=f[p&b];t:for(;;){if(p>>>=w=v>>>24,m-=w,0==(w=v>>>16&255))N[a++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=f[(65535&v)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}E=65535&v,(w&=15)&&(m<w&&(p+=S[i++]<<m,m+=8),E+=p&(1<<w)-1,p>>>=w,m-=w),m<15&&(p+=S[i++]<<m,m+=8,p+=S[i++]<<m,m+=8),v=g[p&y];n:for(;;){if(p>>>=w=v>>>24,m-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=g[(65535&v)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&v,m<(w&=15)&&(p+=S[i++]<<m,(m+=8)<w&&(p+=S[i++]<<m,m+=8)),l<(x+=p&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,m-=w,(w=a-o)<x){if(u<(w=x-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=h,(T=0)===d){if(T+=c-w,w<E){for(E-=w;N[a++]=h[T++],--w;);T=a-x,C=N}}else if(d<w){if(T+=c+d-w,(w-=d)<E){for(E-=w;N[a++]=h[T++],--w;);if(T=0,d<E){for(E-=w=d;N[a++]=h[T++],--w;);T=a-x,C=N}}}else if(T+=d-w,w<E){for(E-=w;N[a++]=h[T++],--w;);T=a-x,C=N}for(;2<E;)N[a++]=C[T++],N[a++]=C[T++],N[a++]=C[T++],E-=3;E&&(N[a++]=C[T++],1<E&&(N[a++]=C[T++]))}else{for(T=a-x;N[a++]=N[T++],N[a++]=N[T++],N[a++]=N[T++],2<(E-=3););E&&(N[a++]=N[T++],1<E&&(N[a++]=N[T++]))}break}}break}}while(i<r&&a<s);i-=E=m>>3,p&=(1<<(m-=E<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=p,n.bits=m}},{}],49:[function(e,t,n){var i=e("../utils/common"),r=e("./adler32"),a=e("./crc32"),o=e("./inffast"),s=e("./inftrees"),l=1,c=2,u=0,d=-2,h=1,p=852,m=592;function f(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(p),t.distcode=t.distdyn=new i.Buf32(m),t.sane=1,t.back=-1,u):d}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,b(e)):d}function v(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,y(e))):d}function w(e,t){var n,i;return e?(i=new g,(e.state=i).window=null,(n=v(e,t))!==u&&(e.state=null),n):d}var E,x,T=!0;function C(e){if(T){var t;for(E=new i.Buf32(512),x=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,x,0,e.work,{bits:5}),T=!1}e.lencode=E,e.lenbits=9,e.distcode=x,e.distbits=5}function S(e,t,n,r){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),r>=o.wsize?(i.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(a=o.wsize-o.wnext)&&(a=r),i.arraySet(o.window,t,n-r,a,o.wnext),(r-=a)?(i.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}n.inflateReset=y,n.inflateReset2=v,n.inflateResetKeep=b,n.inflateInit=function(e){return w(e,15)},n.inflateInit2=w,n.inflate=function(e,t){var n,p,m,g,b,y,v,w,E,x,T,N,k,A,_,O,R,P,M,$,I,D,L,j,q=0,B=new i.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),b=e.next_out,m=e.output,v=e.avail_out,g=e.next_in,p=e.input,y=e.avail_in,w=n.hold,E=n.bits,x=y,T=v,D=u;e:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;E<16;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(2&n.wrap&&35615===w){B[n.check=0]=255&w,B[1]=w>>>8&255,n.check=a(n.check,B,2,0),E=w=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&w)){e.msg="unknown compression method",n.mode=30;break}if(E-=4,I=8+(15&(w>>>=4)),0===n.wbits)n.wbits=I;else if(I>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<I,e.adler=n.check=1,n.mode=512&w?10:12,E=w=0;break;case 2:for(;E<16;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(n.flags=w,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&(B[0]=255&w,B[1]=w>>>8&255,n.check=a(n.check,B,2,0)),E=w=0,n.mode=3;case 3:for(;E<32;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}n.head&&(n.head.time=w),512&n.flags&&(B[0]=255&w,B[1]=w>>>8&255,B[2]=w>>>16&255,B[3]=w>>>24&255,n.check=a(n.check,B,4,0)),E=w=0,n.mode=4;case 4:for(;E<16;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&(B[0]=255&w,B[1]=w>>>8&255,n.check=a(n.check,B,2,0)),E=w=0,n.mode=5;case 5:if(1024&n.flags){for(;E<16;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&(B[0]=255&w,B[1]=w>>>8&255,n.check=a(n.check,B,2,0)),E=w=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(N=n.length)&&(N=y),N&&(n.head&&(I=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,p,g,N,I)),512&n.flags&&(n.check=a(n.check,p,N,g)),y-=N,g+=N,n.length-=N),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(N=0;I=p[g+N++],n.head&&I&&n.length<65536&&(n.head.name+=String.fromCharCode(I)),I&&N<y;);if(512&n.flags&&(n.check=a(n.check,p,N,g)),y-=N,g+=N,I)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(N=0;I=p[g+N++],n.head&&I&&n.length<65536&&(n.head.comment+=String.fromCharCode(I)),I&&N<y;);if(512&n.flags&&(n.check=a(n.check,p,N,g)),y-=N,g+=N,I)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;E<16;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(w!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}E=w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;E<32;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}e.adler=n.check=f(w),E=w=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=b,e.avail_out=v,e.next_in=g,e.avail_in=y,n.hold=w,n.bits=E,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){w>>>=7&E,E-=7&E,n.mode=27;break}for(;E<3;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}switch(n.last=1&w,E-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(C(n),n.mode=20,6!==t)break;w>>>=2,E-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}w>>>=2,E-=2;break;case 14:for(w>>>=7&E,E-=7&E;E<32;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&w,E=w=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(N=n.length){if(y<N&&(N=y),v<N&&(N=v),0===N)break e;i.arraySet(m,p,g,N,b),y-=N,g+=N,v-=N,b+=N,n.length-=N;break}n.mode=12;break;case 17:for(;E<14;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(n.nlen=257+(31&w),w>>>=5,E-=5,n.ndist=1+(31&w),w>>>=5,E-=5,n.ncode=4+(15&w),w>>>=4,E-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;E<3;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}n.lens[F[n.have++]]=7&w,w>>>=3,E-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,L={bits:n.lenbits},D=s(0,n.lens,0,19,n.lencode,0,n.work,L),n.lenbits=L.bits,D){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(q=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,R=65535&q,!((_=q>>>24)<=E);){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(R<16)w>>>=_,E-=_,n.lens[n.have++]=R;else{if(16===R){for(j=_+2;E<j;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(w>>>=_,E-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}I=n.lens[n.have-1],N=3+(3&w),w>>>=2,E-=2}else if(17===R){for(j=_+3;E<j;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}E-=_,I=0,N=3+(7&(w>>>=_)),w>>>=3,E-=3}else{for(j=_+7;E<j;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}E-=_,I=0,N=11+(127&(w>>>=_)),w>>>=7,E-=7}if(n.have+N>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;N--;)n.lens[n.have++]=I}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,L={bits:n.lenbits},D=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,L),n.lenbits=L.bits,D){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,L={bits:n.distbits},D=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L),n.distbits=L.bits,D){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=v){e.next_out=b,e.avail_out=v,e.next_in=g,e.avail_in=y,n.hold=w,n.bits=E,o(e,T),b=e.next_out,m=e.output,v=e.avail_out,g=e.next_in,p=e.input,y=e.avail_in,w=n.hold,E=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;O=(q=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,R=65535&q,!((_=q>>>24)<=E);){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(O&&0==(240&O)){for(P=_,M=O,$=R;O=(q=n.lencode[$+((w&(1<<P+M)-1)>>P)])>>>16&255,R=65535&q,!(P+(_=q>>>24)<=E);){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}w>>>=P,E-=P,n.back+=P}if(w>>>=_,E-=_,n.back+=_,n.length=R,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=12;break}if(64&O){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(j=n.extra;E<j;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,E-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(q=n.distcode[w&(1<<n.distbits)-1])>>>16&255,R=65535&q,!((_=q>>>24)<=E);){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(0==(240&O)){for(P=_,M=O,$=R;O=(q=n.distcode[$+((w&(1<<P+M)-1)>>P)])>>>16&255,R=65535&q,!(P+(_=q>>>24)<=E);){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}w>>>=P,E-=P,n.back+=P}if(w>>>=_,E-=_,n.back+=_,64&O){e.msg="invalid distance code",n.mode=30;break}n.offset=R,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(j=n.extra;E<j;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,E-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break e;if(N=T-v,n.offset>N){if((N=n.offset-N)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}k=N>n.wnext?(N-=n.wnext,n.wsize-N):n.wnext-N,N>n.length&&(N=n.length),A=n.window}else A=m,k=b-n.offset,N=n.length;for(v<N&&(N=v),v-=N,n.length-=N;m[b++]=A[k++],--N;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;m[b++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;E<32;){if(0===y)break e;y--,w|=p[g++]<<E,E+=8}if(T-=v,e.total_out+=T,n.total+=T,T&&(e.adler=n.check=n.flags?a(n.check,m,T,b-T):r(n.check,m,T,b-T)),T=v,(n.flags?w:f(w))!==n.check){e.msg="incorrect data check",n.mode=30;break}E=w=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;E<32;){if(0===y)break e;y--,w+=p[g++]<<E,E+=8}if(w!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}E=w=0}n.mode=29;case 29:D=1;break e;case 30:D=-3;break e;case 31:return-4;default:return d}return e.next_out=b,e.avail_out=v,e.next_in=g,e.avail_in=y,n.hold=w,n.bits=E,(n.wsize||T!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&S(e,e.output,e.next_out,T-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,T-=e.avail_out,e.total_in+=x,e.total_out+=T,n.total+=T,n.wrap&&T&&(e.adler=n.check=n.flags?a(n.check,m,T,e.next_out-T):r(n.check,m,T,e.next_out-T)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==x&&0===T||4===t)&&D===u&&(D=-5),D)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?d:((n.head=t).done=!1,u):d},n.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&r(1,t,i,0)!==n.check?-3:S(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,u):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){var i=e("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,h){var p,m,f,g,b,y,v,w,E,x=h.bits,T=0,C=0,S=0,N=0,k=0,A=0,_=0,O=0,R=0,P=0,M=null,$=0,I=new i.Buf16(16),D=new i.Buf16(16),L=null,j=0;for(T=0;T<=15;T++)I[T]=0;for(C=0;C<l;C++)I[t[n+C]]++;for(k=x,N=15;1<=N&&0===I[N];N--);if(N<k&&(k=N),0===N)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(S=1;S<N&&0===I[S];S++);for(k<S&&(k=S),T=O=1;T<=15;T++)if(O<<=1,(O-=I[T])<0)return-1;if(0<O&&(0===e||1!==N))return-1;for(D[1]=0,T=1;T<15;T++)D[T+1]=D[T]+I[T];for(C=0;C<l;C++)0!==t[n+C]&&(d[D[t[n+C]]++]=C);if(y=0===e?(M=L=d,19):1===e?(M=r,$-=257,L=a,j-=257,256):(M=o,L=s,-1),T=S,b=u,_=C=P=0,f=-1,g=(R=1<<(A=k))-1,1===e&&852<R||2===e&&592<R)return 1;for(;;){for(v=T-_,E=d[C]<y?(w=0,d[C]):d[C]>y?(w=L[j+d[C]],M[$+d[C]]):(w=96,0),p=1<<T-_,S=m=1<<A;c[b+(P>>_)+(m-=p)]=v<<24|w<<16|E|0,0!==m;);for(p=1<<T-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,C++,0==--I[T]){if(T===N)break;T=t[n+d[C]]}if(k<T&&(P&g)!==f){for(0===_&&(_=k),b+=S,O=1<<(A=T-_);A+_<N&&!((O-=I[A+_])<=0);)A++,O<<=1;if(R+=1<<A,1===e&&852<R||2===e&&592<R)return 1;c[f=P&g]=k<<24|A<<16|b-u|0}}return 0!==P&&(c[b+P]=T-_<<24|64<<16|0),h.bits=k,0}},{"../utils/common":41}],51:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){var i=e("../utils/common"),r=0,a=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,l=29,c=256,u=c+1+l,d=30,h=19,p=2*u+1,m=15,f=16,g=7,b=256,y=16,v=17,w=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(u+2));o(S);var N=new Array(2*d);o(N);var k=new Array(512);o(k);var A=new Array(256);o(A);var _=new Array(l);o(_);var O,R,P,M=new Array(d);function $(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function I(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function D(e){return e<256?k[e]:k[256+(e>>>7)]}function L(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function j(e,t,n){e.bi_valid>f-n?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>f-e.bi_valid,e.bi_valid+=n-f):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function q(e,t,n){j(e,n[2*t],n[2*t+1])}function B(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function F(e,t,n){var i,r,a=new Array(m+1),o=0;for(i=1;i<=m;i++)a[i]=o=o+n[i-1]<<1;for(r=0;r<=t;r++){var s=e[2*r+1];0!==s&&(e[2*r]=B(a[s]++,s))}}function z(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*b]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function U(e){8<e.bi_valid?L(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function V(e,t,n,i){var r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n]}function W(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&V(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!V(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function H(e,t,n){var i,r,a,o,s=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],r=e.pending_buf[e.l_buf+s],s++,0===i?q(e,r,t):(q(e,(a=A[r])+c+1,t),0!==(o=E[a])&&j(e,r-=_[a],o),q(e,a=D(--i),n),0!==(o=x[a])&&j(e,i-=M[a],o)),s<e.last_lit;);q(e,b,t)}function Q(e,t){var n,i,r,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=p,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=o[2*r+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)W(e,a,n);for(r=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],W(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,a[2*r]=a[2*n]+a[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,a[2*n+1]=a[2*i+1]=r,e.heap[1]=r++,W(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,a,o,s,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,g=t.stat_desc.max_length,b=0;for(a=0;a<=m;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<p;n++)g<(a=l[2*l[2*(i=e.heap[n])+1]+1]+1)&&(a=g,b++),l[2*i+1]=a,c<i||(e.bl_count[a]++,o=0,f<=i&&(o=h[i-f]),s=l[2*i],e.opt_len+=s*(a+o),d&&(e.static_len+=s*(u[2*i+1]+o)));if(0!==b){do{for(a=g-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[g]--,b-=2}while(0<b);for(a=g;0!==a;a--)for(i=e.bl_count[a];0!==i;)c<(r=e.heap[--n])||(l[2*r+1]!==a&&(e.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),i--)}}(e,t),F(a,c,e.bl_count)}function K(e,t,n){var i,r,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++s<l&&r===o||(s<c?e.bl_tree[2*r]+=s:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*v]++:e.bl_tree[2*w]++,a=r,c=(s=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4))}function G(e,t,n){var i,r,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++s<l&&r===o)){if(s<c)for(;q(e,r,e.bl_tree),0!=--s;);else 0!==r?(r!==a&&(q(e,r,e.bl_tree),s--),q(e,y,e.bl_tree),j(e,s-3,2)):s<=10?(q(e,v,e.bl_tree),j(e,s-3,3)):(q(e,w,e.bl_tree),j(e,s-11,7));a=r,c=(s=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4)}}o(M);var Y=!1;function J(e,t,n,r){j(e,(s<<1)+(r?1:0),3),function(e,t,n,r){U(e),r&&(L(e,n),L(e,~n)),i.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){Y||(function(){var e,t,n,i,r,a=new Array(m+1);for(i=n=0;i<l-1;i++)for(_[i]=n,e=0;e<1<<E[i];e++)A[n++]=i;for(A[n-1]=i,i=r=0;i<16;i++)for(M[i]=r,e=0;e<1<<x[i];e++)k[r++]=i;for(r>>=7;i<d;i++)for(M[i]=r<<7,e=0;e<1<<x[i]-7;e++)k[256+r++]=i;for(t=0;t<=m;t++)a[t]=0;for(e=0;e<=143;)S[2*e+1]=8,e++,a[8]++;for(;e<=255;)S[2*e+1]=9,e++,a[9]++;for(;e<=279;)S[2*e+1]=7,e++,a[7]++;for(;e<=287;)S[2*e+1]=8,e++,a[8]++;for(F(S,u+1,a),e=0;e<d;e++)N[2*e+1]=5,N[2*e]=B(e,5);O=new $(S,E,c+1,u,m),R=new $(N,x,0,d,m),P=new $(new Array(0),T,0,h,g)}(),Y=!0),e.l_desc=new I(e.dyn_ltree,O),e.d_desc=new I(e.dyn_dtree,R),e.bl_desc=new I(e.bl_tree,P),e.bi_buf=0,e.bi_valid=0,z(e)},n._tr_stored_block=J,n._tr_flush_block=function(e,t,n,i){var o,s,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return r;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return a;return r}(e)),Q(e,e.l_desc),Q(e,e.d_desc),l=function(e){var t;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),Q(e,e.bl_desc),t=h-1;3<=t&&0===e.bl_tree[2*C[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=o&&(o=s)):o=s=n+5,n+4<=o&&-1!==t?J(e,t,n,i):4===e.strategy||s===o?(j(e,2+(i?1:0),3),H(e,S,N)):(j(e,4+(i?1:0),3),function(e,t,n,i){var r;for(j(e,t-257,5),j(e,n-1,5),j(e,i-4,4),r=0;r<i;r++)j(e,e.bl_tree[2*C[r]+1],3);G(e,e.dyn_ltree,t-1),G(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),H(e,e.dyn_ltree,e.dyn_dtree)),z(e),i&&U(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(A[n]+c+1)]++,e.dyn_dtree[2*D(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){j(e,2,3),q(e,b,S),function(e){16===e.bi_valid?(L(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){if(!e.setImmediate){var n,i,r,a,o=1,s={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){J$.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){r.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):function(e){setTimeout(h,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var r={callback:e,args:t};return s[o]=r,n(o),o++},u.clearImmediate=d}function d(e){delete s[e]}function h(e){if(l)setTimeout(h,0,e);else{var n=s[e];if(n){l=!0;try{!function(e){var n=e.callback,i=e.args;switch(i.length){case 0:n();break;case 1:n(i[0]);break;case 2:n(i[0],i[1]);break;case 3:n(i[0],i[1],i[2]);break;default:n.apply(t,i)}}(n)}finally{d(e),l=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==GI?GI:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}));const RD="undefined"!=typeof self&&"showOpenFilePicker"in self,PD=RD?Promise.resolve().then((function(){return ID})):Promise.resolve().then((function(){return BD}));RD?Promise.resolve().then((function(){return jD})):Promise.resolve().then((function(){return FD}));const MD=RD?Promise.resolve().then((function(){return qD})):Promise.resolve().then((function(){return zD}));const $D=async e=>{const t=await e.getFile();return t.handle=e,t};var ID={__proto__:null,default:async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach(((e,n)=>{t[n]={description:e.description||"Files",accept:{}},e.mimeTypes?e.mimeTypes.map((i=>{t[n].accept[i]=e.extensions||[]})):t[n].accept["*/*"]=e.extensions||[]}));const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),i=await Promise.all(n.map($D));return e[0].multiple?i:i[0]}};function DD(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return DD=function(e){this.s=e,this.n=e.next},DD.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new DD(e)}const LD=async(e,t,n=e.name,i)=>{const r=[],a=[];var o,s=!1,l=!1;try{for(var c,u=function(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new DD(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());s=!(c=await u.next()).done;s=!1){const o=c.value,s=`${n}/${o.name}`;"file"===o.kind?a.push(o.getFile().then((t=>(t.directoryHandle=e,t.handle=o,Object.defineProperty(t,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>s}))))):"directory"!==o.kind||!t||i&&i(o)||r.push(LD(o,t,s,i))}}catch(e){l=!0,o=e}finally{try{s&&null!=u.return&&await u.return()}finally{if(l)throw o}}return[...(await Promise.all(r)).flat(),...await Promise.all(a)]};var jD={__proto__:null,default:async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:LD(t,e.recursive,void 0,e.skipDirectory)}},qD={__proto__:null,default:async(e,t=[{}],n=null,i=!1,r=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const a=[];let o=null;if(e instanceof Blob&&e.type?o=e.type:e.headers&&e.headers.get("content-type")&&(o=e.headers.get("content-type")),t.forEach(((e,t)=>{a[t]={description:e.description||"Files",accept:{}},e.mimeTypes?(0===t&&o&&e.mimeTypes.push(o),e.mimeTypes.map((n=>{a[t].accept[n]=e.extensions||[]}))):o?a[t].accept[o]=e.extensions||[]:a[t].accept["*/*"]=e.extensions||[]})),n)try{await n.getFile()}catch(e){if(n=null,i)throw e}const s=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:a,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&r&&r(s);const l=await s.createWritable();if("stream"in e){const t=e.stream();return await t.pipeTo(l),s}return"body"in e?(await e.body.pipeTo(l),s):(await l.write(await e),await l.close(),s)}},BD={__proto__:null,default:async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise(((t,n)=>{const i=document.createElement("input");i.type="file";const r=[...e.map((e=>e.mimeTypes||[])),...e.map((e=>e.extensions||[]))].join();i.multiple=e[0].multiple||!1,i.accept=r||"",i.style.display="none",document.body.append(i);const a=e=>{"function"==typeof o&&o(),t(e)},o=e[0].legacySetup&&e[0].legacySetup(a,(()=>o(n)),i),s=()=>{window.removeEventListener("focus",s),i.remove()};i.addEventListener("click",(()=>{window.addEventListener("focus",s)})),i.addEventListener("change",(()=>{window.removeEventListener("focus",s),i.remove(),a(i.multiple?Array.from(i.files):i.files[0])})),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})))},FD={__proto__:null,default:async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise(((t,n)=>{const i=document.createElement("input");i.type="file",i.webkitdirectory=!0;const r=e=>{"function"==typeof a&&a(),t(e)},a=e[0].legacySetup&&e[0].legacySetup(r,(()=>a(n)),i);i.addEventListener("change",(()=>{let t=Array.from(i.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(t=t.filter((t=>t.webkitRelativePath.split("/").every((t=>!e[0].skipDirectory({name:t,kind:"directory"})))))):t=t.filter((e=>2===e.webkitRelativePath.split("/").length)),r(t)})),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})))},zD={__proto__:null,default:async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let i=e;"body"in e&&(i=await async function(e,t){const n=e.getReader(),i=new ReadableStream({start:e=>async function t(){return n.read().then((({done:n,value:i})=>{if(!n)return e.enqueue(i),t();e.close()}))}()}),r=new Response(i),a=await r.blob();return n.releaseLock(),new Blob([a],{type:t})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await i);const r=()=>{"function"==typeof a&&a()},a=t.legacySetup&&t.legacySetup(r,(()=>a()),n);return n.addEventListener("click",(()=>{setTimeout((()=>URL.revokeObjectURL(n.href)),3e4),r()})),n.click(),null}};const UD=Nm(class extends Bm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.importProgress=Vp(this,"jeepSqliteImportProgress",7),this.exportProgress=Vp(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=Vp(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=Vp(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=Vp(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(e){this.innerAutoSave=e}parseTypeOrm(e){this.innerTypeOrm=e}parseWasmPath(e){this.innerWasmPath=e}parsePickText(e){this.innerPickText=e}parseSaveText(e){this.innerSaveText=e}parseButtonOptions(e){this.innerButtonOptions=JSON.parse(e);const t=Object.keys(this.innerButtonOptions);for(const n of t)switch(n){case"top":this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[n]);break;case"right":this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[n]);break;case"fontSize":this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[n]);break;case"padding":this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[n]);break;case"backgroundColor":this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[n]);break;case"color":this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[n])}}async echo(e){return e}async createConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=e.version?e.version:1,i=!!e.readonly&&e.readonly;try{return await this._createConnection(t,n,i),Promise.resolve()}catch(r){return Promise.reject(r)}}async isConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly,i=await this._isConnection(t,n);return Promise.resolve(i)}async closeConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{return await this._closeConnection(t,n),Promise.resolve()}catch(i){return Promise.reject(i)}}async open(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{return await this._open(t,n),Promise.resolve()}catch(i){return Promise.reject(i)}}async close(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{return await this._close(t,n),Promise.resolve()}catch(i){return Promise.reject(i)}}async getVersion(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{const e=await this._getVersion(t,n);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}async beginTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database;if(!!e.readonly&&e.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const e=await this._beginTransaction(t);return Promise.resolve(e)}catch(n){return Promise.reject(n)}}async commitTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database;if(!!e.readonly&&e.readonly)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const e=await this._commitTransaction(t);return Promise.resolve(e)}catch(n){return Promise.reject(n)}}async rollbackTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database;if(!!e.readonly&&e.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const e=await this._rollbackTransaction(t);return Promise.resolve(e)}catch(n){return Promise.reject(n)}}async isTransactionActive(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database;if(!!e.readonly&&e.readonly)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const e=await this._isTransactionActive(t);return Promise.resolve(e)}catch(n){return Promise.reject(n)}}async execute(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statements")||0===e.statements.length)return Promise.reject("Must provide raw SQL statements");const n=e.database,i=e.statements;let r=!0;const a=!!e.readonly&&e.readonly;t.includes("transaction")&&(r=e.transaction);try{const e=await this._execute(n,i,r,a);return Promise.resolve(e)}catch(o){return Promise.reject(o)}}async executeSet(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("set")||0===e.set.length)return Promise.reject("Must provide a non-empty set of SQL statements");const n=e.database,i=e.set;let r=!0;t.includes("transaction")&&(r=e.transaction);const a=!!e.readonly&&e.readonly,o=e.returnMode?e.returnMode:"no";try{const e=await this._executeSet(n,i,r,a,o);return Promise.resolve(e)}catch(s){return Promise.reject(s)}}async run(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||0===e.statement.length)return Promise.reject("Must provide a run statement");const n=e.database,i=e.statement;let r=[];t.includes("values")&&(r=e.values.length>0?e.values:[]);let a=!0;t.includes("transaction")&&(a=e.transaction);const o=!!e.readonly&&e.readonly,s=e.returnMode?e.returnMode:"no";try{const e=await this._run(n,i,r,a,o,s);return Promise.resolve(e)}catch(l){return Promise.reject(l)}}async query(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||0===e.statement.length)return Promise.reject("Must provide a query statement");let n=[];t.includes("values")&&(n=e.values.length>0?e.values:[]);const i=e.database,r=e.statement,a=!!e.readonly&&e.readonly;try{const e=await this._query(i,r,n,a);return Promise.resolve(e)}catch(o){return Promise.reject(o)}}async getTableList(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{const e=await this._getTableList(t,n);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}async isDBExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{const e=await this._isDBExists(t,n);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}async isDBOpen(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{const e=await this._isDBOpen(t,n);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}async deleteDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{return await this._deleteDatabase(t,n)}catch(i){return Promise.reject(i)}}async isStoreOpen(){return Promise.resolve(this.isStore)}async copyFromAssets(e){let t;if(null!=e){t=!Object.keys(e).includes("overwrite")||e.overwrite}else t=!0;if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{return await this._copyFromAssets(t),Promise.resolve()}catch(n){return Promise.reject(n)}}async isTableExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");const n=e.database;if(!t.includes("table"))return Promise.reject("Must provide a table name");const i=e.table,r=!!e.readonly&&e.readonly;try{const e=await this._isTableExists(n,i,r);return Promise.resolve(e)}catch(a){return Promise.reject(a)}}async createSyncTable(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{const e=await this._createSyncTable(t,n);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}async getSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{const e=await this._getSyncDate(t,n);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}async setSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const n=e.database,i=e.syncdate,r=!!e.readonly&&e.readonly;try{return await this._setSyncDate(n,i,r),Promise.resolve()}catch(a){return Promise.reject(a)}}async isJsonValid(e){if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const t=e.jsonstring;try{const e=await this._isJsonValid(t);return Promise.resolve(e)}catch(n){return Promise.reject(n)}}async importFromJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const t=e.jsonstring;try{const e=await this._importFromJson(t);return Promise.resolve(e)}catch(n){return Promise.reject(n)}}async exportToJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const n=e.database,i=e.jsonexportmode,r=!!e.readonly&&e.readonly;try{const e=await this._exportToJson(n,i,r);return Promise.resolve(e)}catch(a){return Promise.reject(a)}}async deleteExportedRows(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{return await this._deleteExportedRows(t,n),Promise.resolve()}catch(i){return Promise.reject(i)}}async addUpgradeStatement(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const n=e.database,i=e.upgrade;for(const r of i){const e=Object.keys(r);if(!e.includes("toVersion")||!e.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if("number"!=typeof r.toVersion)return Promise.reject("upgrade.toVersion must be a number");if(this._versionUpgrades[n])this._versionUpgrades[n][r.toVersion]=r;else{const e={};e[r.toVersion]=r,this._versionUpgrades[n]=e}}return Promise.resolve()}async isDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database;try{const e=await this._isDatabase(t);return Promise.resolve(e)}catch(n){return Promise.reject(n)}}async getDatabaseList(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{const e=await this._getDatabaseList();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async checkConnectionsConsistency(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const n=e.dbNames;if(!t.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const i=e.openModes;try{const e=await this._checkConnectionsConsistency(n,i);return Promise.resolve(e)}catch(r){return Promise.reject(r)}}async saveToStore(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database,n=!!e.readonly&&e.readonly;try{return await this._saveToStore(t,n),Promise.resolve()}catch(i){return Promise.reject(i)}}async saveToLocalDisk(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const t=e.database;try{return await this._saveToLocalDisk(t),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(e){const t=!e.overwrite||e.overwrite;RD?console.log("Using the File System Access API."):console.log("Using the fallback implementation.");try{return await this._getFromLocalDiskToStore(t),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromHTTPRequest(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("url"))return Promise.reject("Must provide an url");const t=e.url,n=!e.overwrite||e.overwrite;try{return await this._getFromHTTPRequest(t,n),Promise.resolve()}catch(i){return Promise.reject(i)}}connectedCallback(){this.parseAutoSave(void 0!==this.autoSave&&this.autoSave),this.parseTypeOrm(void 0!==this.typeOrm&&this.typeOrm),this.parseWasmPath(void 0!==this.wasmPath?this.wasmPath:"/assets"),this.parseSaveText(void 0!==this.saveText?this.saveText:"Save"),this.parsePickText(void 0!==this.pickText?this.pickText:"Pick a database"),void 0!==this.buttonOptions&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then((e=>{this.isStore=e}))}componentWillLoad(){}async componentDidLoad(){this._element=this.el.shadowRoot,this.isStore||console.log("jeep-sqlite isStore = false")}async _createConnection(e,t,n){let i={};const r=Object.keys(this._versionUpgrades);0!==r.length&&r.includes(e)&&(i=this._versionUpgrades[e]);const a=Object.keys(this._dbDict);let o;try{o=a.length>0&&(a.includes("RW_"+e)||a.includes("RO_"+e))?a.includes("RW_"+e)?this._dbDict["RW_"+e]:this._dbDict["RO_"+e]:new AD(e+"SQLite.db",t,i,this.store,this.innerAutoSave,this.innerWasmPath);const r=n?"RO_"+e:"RW_"+e;return this._dbDict[r]=o,Promise.resolve()}catch(s){return Promise.reject(s.message)}}async _isConnection(e,t){const n=t?"RO_"+e:"RW_"+e;return Object.keys(this._dbDict).includes(n)?{result:!0}:{result:!1}}async _closeConnection(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`CloseConnection: No available connection for ${e}`);const i=this._dbDict[n];try{if(i.isDBOpen())try{await i.close()}catch(r){return Promise.reject(`CloseConnection: close ${e} failed ${r}`)}return delete this._dbDict[n],Promise.resolve()}catch(r){return Promise.reject(`CloseConnection: ${r.message}`)}}async _open(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`Open: No available connection for ${e}`);const i=this._dbDict[n];try{return await i.open(),Promise.resolve()}catch(r){return Promise.reject(`Open: ${r.message}`)}}async _close(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`Close: No available connection for ${e}`);const i=this._dbDict[n];try{return await i.close(),Promise.resolve()}catch(r){return Promise.reject(`Close: ${r.message}`)}}async _saveToStore(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`SaveToStore: No available connection for ${e}`);const i=this._dbDict[n];try{return await i.saveToStore(),Promise.resolve()}catch(r){return Promise.reject(`SaveToStore: ${r.message}`)}}async _saveToLocalDisk(e){try{const t=Object.keys(this._dbDict),n="RW_"+e;if(!t.includes(n))return Promise.reject(`_saveToLocalDisk: No available connection for ${e}`);const i=this._dbDict[n],r=await i.exportDB();this._blob=await this.uint2blob(r);const a=`${e}SQLite.db`;return this._opts={fileName:a,extensions:[".db"]},this._buttonSaveEl=document.createElement("button"),this._buttonSaveEl.setAttribute("id","saveButton"),this._buttonSaveEl.innerHTML=`${this.innerSaveText} ${a}`,this._element.appendChild(this._buttonSaveEl),this._buttonSaveEl.addEventListener("click",this.saveFile.bind(this)),Promise.resolve()}catch(t){return Promise.reject(`_saveToLocalDisk: ${t.message}`)}}async _getFromLocalDiskToStore(e){return this._buttonPickEl=document.createElement("button"),this._buttonPickEl.setAttribute("id","pickButton"),this._buttonPickEl.innerHTML=`${this.innerPickText}`,this._element.appendChild(this._buttonPickEl),this._buttonPickEl.addEventListener("click",this.pickDatabase.bind(this)),this._overwrite=e,Promise.resolve()}async pickDatabase(){try{const e=await async function(...e){return(await PD).default(...e)}({extensions:[".db"]});let t=await this.blob2uint(e);const n=this.removePathSuffix(e.name),i=this.setPathSuffix(e.name);await yD.isDBInStore(i,this.store)?this._overwrite?(await yD.removeDBFromStore(i,this.store),await yD.saveDBToStore(i,t,this.store)):this.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${i}`}):await yD.saveDBToStore(i,t,this.store),this._element.removeChild(this._buttonPickEl),this.PickDatabaseEnded.emit({db_name:n})}catch(e){const t=e.message?e.message:e;this.PickDatabaseEnded.emit({message:t})}}async saveFile(){try{await async function(...e){return(await MD).default(...e)}(this._blob,[this._opts]);const e=this._opts.fileName;this._element.removeChild(this._buttonSaveEl),this.SaveDatabaseEnded.emit({db_name:e})}catch(e){const t=e.message?e.message:e;this.SaveDatabaseEnded.emit({message:t})}}async _getVersion(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`Open: No available connection for ${e}`);const i=this._dbDict[n];try{const e=await i.getVersion(),t={};return t.version=e,Promise.resolve(t)}catch(r){return Promise.reject(`Open: ${r.message}`)}}async _beginTransaction(e){const t="RW_"+e;if(!Object.keys(this._dbDict).includes(t))return Promise.reject(`BeginTransaction: No available connection for ${e}`);const n=this._dbDict[t];let i={};return i={changes:{changes:await n.beginTransaction()}},Promise.resolve(i)}async _commitTransaction(e){const t="RW_"+e;if(!Object.keys(this._dbDict).includes(t))return Promise.reject(`CommitTransaction: No available connection for ${e}`);const n=this._dbDict[t];let i={};return i={changes:{changes:await n.commitTransaction()}},Promise.resolve(i)}async _rollbackTransaction(e){const t="RW_"+e;if(!Object.keys(this._dbDict).includes(t))return Promise.reject(`RollbackTransaction: No available connection for ${e}`);const n=this._dbDict[t];let i={};return i={changes:{changes:await n.rollbackTransaction()}},Promise.resolve(i)}async _isTransactionActive(e){const t="RW_"+e;if(!Object.keys(this._dbDict).includes(t))return Promise.reject(`IsTransactionActive: No available connection for ${e}`);let n={};return n={result:this._dbDict[t].isTransActive()},Promise.resolve(n)}async _execute(e,t,n,i){const r="RW_"+e;if(!Object.keys(this._dbDict).includes(r))return Promise.reject(`Execute: No available connection for ${e}`);const a=this._dbDict[r];if(i)return Promise.reject("Execute: not allowed in read-only mode");let o={};const s=t.substring(0,6);if(this.innerAutoSave&&"COMMIT"===s&&this.innerTypeOrm)return o={changes:{changes:0}},Promise.resolve(o);try{return o={changes:{changes:await a.executeSQL(t,n)}},Promise.resolve(o)}catch(l){return Promise.reject(`Execute: ${l.message}`)}}async _executeSet(e,t,n,i,r){const a="RW_"+e;if(!Object.keys(this._dbDict).includes(a))return Promise.reject(`ExecuteSet: No available connection for ${e}`);const o=this._dbDict[a];if(i)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const l of t)if(!("statement"in l)||!("values"in l))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const e=await o.execSet(t,n,r),i={changes:{changes:e.changes,lastId:e.lastId,values:e.values}};return Promise.resolve(i)}catch(s){return Promise.reject(`ExecuteSet: ${s.message}`)}}async _run(e,t,n,i,r,a){const o="RW_"+e;if(!Object.keys(this._dbDict).includes(o))return Promise.reject(`Run: No available connection for ${e}`);const s=this._dbDict[o];if(r)return Promise.reject("Run: not allowed in read-only mode");let l={};const c=t.substring(0,6);if(this.innerAutoSave&&"COMMIT"===c)return l={changes:{changes:0}},Promise.resolve(l);try{const e=await s.runSQL(t,n,i,a);return l={changes:{changes:e.changes,lastId:e.lastId,values:e.values}},Promise.resolve(l)}catch(u){return Promise.reject(`Run: ${u.message}`)}}async _query(e,t,n,i){const r=i?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(r))return Promise.reject(`Query: No available connection for ${e}`);const a=this._dbDict[r];let o=[];const s=t.substring(0,6);if(this.innerAutoSave&&"COMMIT"===s)return Promise.resolve({values:o});try{return o=await a.selectSQL(t,n),Promise.resolve({values:o})}catch(l){return Promise.reject(`Query failed: ${l.message}`)}}async _getTableList(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`GetTableList: No available connection for ${e}`);const i=this._dbDict[n];let r=[];try{return r=await i.getTableNames(),Promise.resolve({values:r})}catch(a){return Promise.reject(`GetTableList failed: ${a.message}`)}}async _isDBExists(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`IsDBExists: No available connection for ${e}`);const i=this._dbDict[n];try{const t={result:await i.isDBExists(e+"SQLite.db")};return Promise.resolve(t)}catch(r){return Promise.reject(`IsDBExists: ${r.message}`)}}async _isDBOpen(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`IsDBOpen: No available connection for ${e}`);const i=this._dbDict[n];try{const t={result:await i.isDBOpen(e+"SQLite.db")};return Promise.resolve(t)}catch(r){return Promise.reject(`IsDBOpen: ${r.message}`)}}async _deleteDatabase(e,t){const n="RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`DeleteDatabase: No available connection for ${e}`);const i=this._dbDict[n];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return await i.deleteDB(e+"SQLite.db"),Promise.resolve()}catch(r){return Promise.reject(`DeleteDatabase: ${r.message}`)}}async _isTableExists(e,t,n){const i=n?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(i))return Promise.reject(`IsTableExists: No available connection for ${e}`);const r=this._dbDict[i];try{const e={result:await r.isTable(t)};return Promise.resolve(e)}catch(a){return Promise.reject(`IsTableExists: ${a.message}`)}}async _createSyncTable(e,t){const n="RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`CreateSyncTable: No available connection for ${e}`);const i=this._dbDict[n];if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const e=await i.createSyncTable();return Promise.resolve({changes:{changes:e}})}catch(r){return Promise.reject(`CreateSyncTable: ${r.message}`)}}async _getSyncDate(e,t){const n=t?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`GetSyncDate: No available connection for ${e}`);const i=this._dbDict[n];try{const e=await i.getSyncDate();return Promise.resolve({syncDate:e})}catch(r){return Promise.reject(`GetSyncDate: ${r.message}`)}}async _setSyncDate(e,t,n){const i="RW_"+e;if(!Object.keys(this._dbDict).includes(i))return Promise.reject(`SetSyncDate: No available connection for ${e}`);const r=this._dbDict[i];if(n)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const e=await r.setSyncDate(t);return e.result?Promise.resolve():Promise.reject(`SetSyncDate: ${e.message}`)}catch(a){return Promise.reject(`SetSyncDate: ${a.message}`)}}async _isJsonValid(e){const t=JSON.parse(e);return await wD.isJsonSQLite(t)?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")}async _importFromJson(e){var t,n;const i=JSON.parse(e);if(!(await wD.isJsonSQLite(i)))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const r=i,a=`${r.database}SQLite.db`,o=null!==(t=r.version)&&void 0!==t?t:1,s=r.mode,l=null!==(n=r.overwrite)&&void 0!==n&&n,c=new AD(a,o,{},this.store,this.innerAutoSave,this.innerWasmPath);try{if(l&&"full"===s){yD.isDBInStore(a,this.store)&&await yD.removeDBFromStore(a,this.store)}await c.open();const e=await c.getTableNames();if("full"===s&&e.length>0){const e=await c.getVersion();if(o<e)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${e}`);if(e===o)return Promise.resolve({changes:{changes:0}})}const t=await c.importJson(r,this.importProgress);return await c.close(),Promise.resolve({changes:{changes:t}})}catch(u){return Promise.reject(`ImportFromJson: ${u.message}`)}}async _exportToJson(e,t,n){const i=n?"RO_"+e:"RW_"+e;if(!Object.keys(this._dbDict).includes(i))return Promise.reject(`ExportToJson: No available connection for ${e}`);const r=this._dbDict[i];try{const e=await r.exportJson(t,this.exportProgress);return Object.keys(e).includes("message")?Promise.reject(`ExportToJson: ${e.message}`):Promise.resolve({export:e})}catch(a){return Promise.reject(`ExportToJson: ${a.message}`)}}async _deleteExportedRows(e,t){const n="RW_"+e;if(!Object.keys(this._dbDict).includes(n))return Promise.reject(`ExportToJson: No available connection for ${e}`);const i=this._dbDict[n];if(t)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{await i.deleteExportedRows()}catch(r){return Promise.reject(`DeleteExportedRows: ${r.message}`)}}async _copyFromAssets(e){const t=await this.loadJSON("assets/databases/databases.json");if(null==t)return Promise.reject("CopyFromAssets: no databases.json file in assets/databases folder");this.databaseList=JSON.parse(t);if(!Object.keys(this.databaseList).includes("databaseList"))return Promise.reject("CopyFromAssets: no key databaseList in databases.json");try{for(const t of this.databaseList.databaseList)".db"===t.substring(t.length-3)&&await this.copyDatabase(`assets/databases/${t}`,e),".zip"===t.substring(t.length-4)&&await this.unzipDatabase(`assets/databases/${t}`,e);return Promise.resolve()}catch(n){return Promise.reject(`CopyFromAssets: ${n.message}`)}}async _getFromHTTPRequest(e,t){try{let n;return".db"===e.substring(e.length-3)&&(await this.copyDatabase(e,t),n="db"),".zip"===e.substring(e.length-4)&&(await this.unzipDatabase(e,t),n="zip"),this.HTTPRequestEnded.emit({message:n}),Promise.resolve()}catch(n){return Promise.reject(`GetFromHTTPRequest: ${n.message}`)}}async _isDatabase(e){try{const t={result:await yD.isDBInStore(e+"SQLite.db",this.store)};return Promise.resolve(t)}catch(t){return Promise.reject(`IsDatabase: ${t.message}`)}}async _getDatabaseList(){try{const e={values:await yD.getDBListFromStore(this.store)};return Promise.resolve(e)}catch(e){return Promise.reject(`GetDatabaseList: ${e.message}`)}}async _checkConnectionsConsistency(e,t){const n={result:!1},i=[];e.forEach(((e,n)=>{i.push(`${t[n]}_${e}`)}));try{let e=new Set(Object.keys(this._dbDict));const t=new Set(i);if(0===t.size)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n);if(e.size<t.size)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n);if(e.size>t.size){const n={};for(const i of e)if(!Array.from(t.keys()).includes(i)){let e=!1;"RO_"===i.substring(0,3)&&(e=!0),n.database=i.substring(3),n.readonly=e,await this._closeConnection(n.database,n.readonly)}}if(e=new Set(Object.keys(this._dbDict)),e.size===t.size){return 0===(await this.symmetricDifference(e,t)).size?(n.result=!0,Promise.resolve(n)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n))}return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n)}catch(r){return Promise.reject(`CheckConnectionsConsistency: ${r.message}`)}}async _resetDbDict(e){try{for(const t of e){const e={};let n=!1;"RO_"===t.substring(0,3)&&(n=!0),e.database=t.substring(3),e.readonly=n,await this._closeConnection(e.database,e.readonly)}}catch(t){return Promise.reject(`ResetDbDict: ${t.message}`)}}async symmetricDifference(e,t){let n=new Set;e.forEach((e=>{n.add(e.substring(3))}));let i=new Set;t.forEach((e=>{i.add(e.substring(3))}));for(const r of i)n.has(r)?n.delete(r):n.add(r);return n}async unzipDatabase(e,t){return new Promise(((n,i)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onerror=()=>{i(new Error("unzipDatabase: failed"))},r.onload=()=>{OD.loadAsync(r.response).then((async e=>{const r=Object.keys(e.files);try{for(const n of r)await this.retrieveDBFromZip(e.files,n,t);n()}catch(a){i(new Error(`unzipDatabase Error: ${a.message}`))}}))},r.send()}))}async retrieveDBFromZip(e,t,n){return new Promise(((i,r)=>{e[t].async("nodebuffer").then((async e=>{try{const a=new Uint8Array(e),o=this.setPathSuffix(t);await yD.isDBInStore(o,this.store)?n?(await yD.removeDBFromStore(o,this.store),await yD.saveDBToStore(o,a,this.store)):r(new Error(`retrieveDBFromZip: cannot overwrite ${o}`)):await yD.saveDBToStore(o,a,this.store),i()}catch(a){r(new Error(`retrieveDBFromZip:: ${a.message}`))}}))}))}async copyDatabase(e,t){return new Promise(((n,i)=>{var r,a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onerror=()=>{i(new Error("CopyDatabase: failed"))},a.onload=()=>{r=new Uint8Array(a.response)},a.onloadend=async()=>{const a=this.setPathSuffix(e);await yD.isDBInStore(a,this.store)?t?(await yD.removeDBFromStore(a,this.store),await yD.saveDBToStore(a,r,this.store)):i(new Error(`CopyDatabase Error: cannot overwrite ${a}`)):await yD.saveDBToStore(a,r,this.store),n()},a.send()}))}async loadJSON(e){return new Promise(((t,n)=>{var i=new XMLHttpRequest;i.overrideMimeType("application/json"),i.open("GET",e,!0),i.onerror=()=>{n(new Error("LoadJSON: failed"))},i.onreadystatechange=function(){404==i.status&&t(null),4==i.readyState&&200==i.status&&t(i.responseText)},i.send(null)}))}async openStore(e,t){let n=!1;const i=this.setConfig(e,t);return this.store=_D.createInstance(i),null!=this.store&&(this.storeName=e,n=!0),n}setConfig(e,t){return{name:e,storeName:t,driver:[_D.INDEXEDDB],version:1}}removePathSuffix(e){return e.includes("SQLite.db")?e.split("SQLite.db")[0]:".db"===e.substring(e.length-3)?e.slice(0,e.lastIndexOf(".")):e}setPathSuffix(e){let t=e.slice(e.lastIndexOf("/")+1);return".db"===e.substring(e.length-3)&&(e.includes("SQLite.db")||(t=e.slice(e.lastIndexOf("/")+1,-3)+"SQLite.db")),t}async blob2uint(e){return new Response(e).arrayBuffer().then((e=>new Uint8Array(e)))}async uint2blob(e){const t=new Blob([e.buffer]);return Promise.resolve(t)}render(){}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}static get style(){return":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}"}},[1,"jeep-sqlite",{autoSave:[516,"autosave"],typeOrm:[516,"typeorm"],wasmPath:[513,"wasmpath"],pickText:[513,"picktext"],saveText:[513,"savetext"],buttonOptions:[513,"buttonoptions"],innerAutoSave:[32],innerTypeOrm:[32],innerWasmPath:[32],innerPickText:[32],innerSaveText:[32],innerButtonOptions:[32],echo:[64],createConnection:[64],isConnection:[64],closeConnection:[64],open:[64],close:[64],getVersion:[64],beginTransaction:[64],commitTransaction:[64],rollbackTransaction:[64],isTransactionActive:[64],execute:[64],executeSet:[64],run:[64],query:[64],getTableList:[64],isDBExists:[64],isDBOpen:[64],deleteDatabase:[64],isStoreOpen:[64],copyFromAssets:[64],isTableExists:[64],createSyncTable:[64],getSyncDate:[64],setSyncDate:[64],isJsonValid:[64],importFromJson:[64],exportToJson:[64],deleteExportedRows:[64],addUpgradeStatement:[64],isDatabase:[64],getDatabaseList:[64],checkConnectionsConsistency:[64],saveToStore:[64],saveToLocalDisk:[64],getFromLocalDiskToStore:[64],getFromHTTPRequest:[64]}]),VD=UD;window.addEventListener("DOMContentLoaded",(async()=>{try{if("web"===TA.getPlatform()){console.log("Start of initialization IndexedDB");const e=new IA(LA);customElements.define("jeep-sqlite",VD);const t=document.createElement("jeep-sqlite");document.body.appendChild(t),await customElements.whenDefined("jeep-sqlite"),await e.initWebStore(),console.log("End of initialization IndexedDB")}const e=document.getElementById("root");sd(e).render(X.jsx(V.StrictMode,{children:X.jsx(N$,{})}))}catch(RD){console.log(RD)}})),window.Buffer=QA.Buffer}}}))}();
